function Lk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();var Ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function QV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var aR={exports:{}},r1={},iR={exports:{}},Gt={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var zh=Symbol.for("react.element"),ZV=Symbol.for("react.portal"),JV=Symbol.for("react.fragment"),eU=Symbol.for("react.strict_mode"),tU=Symbol.for("react.profiler"),nU=Symbol.for("react.provider"),rU=Symbol.for("react.context"),aU=Symbol.for("react.forward_ref"),iU=Symbol.for("react.suspense"),oU=Symbol.for("react.memo"),sU=Symbol.for("react.lazy"),oR=Symbol.iterator;function lU(t){return t===null||typeof t!="object"?null:(t=oR&&t[oR]||t["@@iterator"],typeof t=="function"?t:null)}var sR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lR=Object.assign,uR={};function Nd(t,e,n){this.props=t,this.context=e,this.refs=uR,this.updater=n||sR}Nd.prototype.isReactComponent={},Nd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},Nd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cR(){}cR.prototype=Nd.prototype;function Fk(t,e,n){this.props=t,this.context=e,this.refs=uR,this.updater=n||sR}var Bk=Fk.prototype=new cR;Bk.constructor=Fk,lR(Bk,Nd.prototype),Bk.isPureReactComponent=!0;var dR=Array.isArray,pR=Object.prototype.hasOwnProperty,zk={current:null},hR={key:!0,ref:!0,__self:!0,__source:!0};function fR(t,e,n){var r,a={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)pR.call(e,r)&&!hR.hasOwnProperty(r)&&(a[r]=e[r]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:zh,type:t,key:i,ref:o,props:a,_owner:zk.current}}function uU(t,e){return{$$typeof:zh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jk(t){return typeof t=="object"&&t!==null&&t.$$typeof===zh}function cU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var mR=/\/+/g;function Vk(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cU(""+t.key):e.toString(36)}function a1(t,e,n,r,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zh:case ZV:o=!0}}if(o)return o=t,a=a(o),t=r===""?"."+Vk(o,0):r,dR(a)?(n="",t!=null&&(n=t.replace(mR,"$&/")+"/"),a1(a,e,n,"",function(u){return u})):a!=null&&(jk(a)&&(a=uU(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(mR,"$&/")+"/")+t)),e.push(a)),1;if(o=0,r=r===""?".":r+":",dR(t))for(var s=0;s<t.length;s++){i=t[s];var l=r+Vk(i,s);o+=a1(i,e,n,l,a)}else if(l=lU(t),typeof l=="function")for(t=l.call(t),s=0;!(i=t.next()).done;)i=i.value,l=r+Vk(i,s++),o+=a1(i,e,n,l,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function i1(t,e,n){if(t==null)return t;var r=[],a=0;return a1(t,r,"","",function(i){return e.call(n,i,a++)}),r}function dU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wa={current:null},o1={transition:null},pU={ReactCurrentDispatcher:Wa,ReactCurrentBatchConfig:o1,ReactCurrentOwner:zk};Gt.Children={map:i1,forEach:function(t,e,n){i1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return i1(t,function(){e++}),e},toArray:function(t){return i1(t,function(e){return e})||[]},only:function(t){if(!jk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},Gt.Component=Nd,Gt.Fragment=JV,Gt.Profiler=tU,Gt.PureComponent=Fk,Gt.StrictMode=eU,Gt.Suspense=iU,Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pU,Gt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lR({},t.props),a=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=zk.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)pR.call(e,l)&&!hR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:zh,type:t.type,key:a,ref:i,props:r,_owner:o}},Gt.createContext=function(t){return t={$$typeof:rU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nU,_context:t},t.Consumer=t},Gt.createElement=fR,Gt.createFactory=function(t){var e=fR.bind(null,t);return e.type=t,e},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(t){return{$$typeof:aU,render:t}},Gt.isValidElement=jk,Gt.lazy=function(t){return{$$typeof:sU,_payload:{_status:-1,_result:t},_init:dU}},Gt.memo=function(t,e){return{$$typeof:oU,type:t,compare:e===void 0?null:e}},Gt.startTransition=function(t){var e=o1.transition;o1.transition={};try{t()}finally{o1.transition=e}},Gt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Gt.useCallback=function(t,e){return Wa.current.useCallback(t,e)},Gt.useContext=function(t){return Wa.current.useContext(t)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(t){return Wa.current.useDeferredValue(t)},Gt.useEffect=function(t,e){return Wa.current.useEffect(t,e)},Gt.useId=function(){return Wa.current.useId()},Gt.useImperativeHandle=function(t,e,n){return Wa.current.useImperativeHandle(t,e,n)},Gt.useInsertionEffect=function(t,e){return Wa.current.useInsertionEffect(t,e)},Gt.useLayoutEffect=function(t,e){return Wa.current.useLayoutEffect(t,e)},Gt.useMemo=function(t,e){return Wa.current.useMemo(t,e)},Gt.useReducer=function(t,e,n){return Wa.current.useReducer(t,e,n)},Gt.useRef=function(t){return Wa.current.useRef(t)},Gt.useState=function(t){return Wa.current.useState(t)},Gt.useSyncExternalStore=function(t,e,n){return Wa.current.useSyncExternalStore(t,e,n)},Gt.useTransition=function(){return Wa.current.useTransition()},Gt.version="18.2.0",iR.exports=Gt;var R=iR.exports;const W=Wi(R),gR=Lk({__proto__:null,default:W},[R]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var hU=R,fU=Symbol.for("react.element"),mU=Symbol.for("react.fragment"),gU=Object.prototype.hasOwnProperty,yU=hU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bU={key:!0,ref:!0,__self:!0,__source:!0};function yR(t,e,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gU.call(e,r)&&!bU.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)a[r]===void 0&&(a[r]=e[r]);return{$$typeof:fU,type:t,key:i,ref:o,props:a,_owner:yU.current}}r1.Fragment=mU,r1.jsx=yR,r1.jsxs=yR,aR.exports=r1;var re=aR.exports;const vU={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};let xU=class T_{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||vU,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,a){return a&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new T_(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new T_(this.logger,e)}};var ns=new xU;class s1{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const a=this.observers[r].get(n)||0;this.observers[r].set(n,a+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(i=>{let[o,s]=i;for(let l=0;l<s;l++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(i=>{let[o,s]=i;for(let l=0;l<s;l++)o.apply(o,[e,...r])})}}function jh(){let t,e;const n=new Promise((r,a)=>{t=r,e=a});return n.resolve=t,n.reject=e,n}function bR(t){return t==null?"":""+t}function wU(t,e,n){t.forEach(r=>{e[r]&&(n[r]=e[r])})}const kU=/###/g;function Vh(t,e,n){function r(s){return s&&s.indexOf("###")>-1?s.replace(kU,"."):s}function a(){return!t||typeof t=="string"}const i=typeof e!="string"?e:e.split(".");let o=0;for(;o<i.length-1;){if(a())return{};const s=r(i[o]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++o}return a()?{}:{obj:t,k:r(i[o])}}function vR(t,e,n){const{obj:r,k:a}=Vh(t,e,Object);if(r!==void 0||e.length===1){r[a]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),s=Vh(t,o,Object);for(;s.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),s=Vh(t,o,Object),s&&s.obj&&typeof s.obj[`${s.k}.${i}`]<"u"&&(s.obj=void 0);s.obj[`${s.k}.${i}`]=n}function SU(t,e,n,r){const{obj:a,k:i}=Vh(t,e,Object);a[i]=a[i]||[],r&&(a[i]=a[i].concat(n)),r||a[i].push(n)}function l1(t,e){const{obj:n,k:r}=Vh(t,e);if(n)return n[r]}function CU(t,e,n){const r=l1(t,n);return r!==void 0?r:l1(e,n)}function xR(t,e,n){for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):xR(t[r],e[r],n):t[r]=e[r]);return t}function Td(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var IU={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function EU(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>IU[e]):t}class NU{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const TU=[" ",",","?","!",";"],_U=new NU(20);function RU(t,e,n){e=e||"",n=n||"";const r=TU.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const a=_U.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!a.test(t);if(!i){const o=t.indexOf(n);o>0&&!a.test(t.substring(0,o))&&(i=!0)}return i}function Uk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let a=t;for(let i=0;i<r.length;){if(!a||typeof a!="object")return;let o,s="";for(let l=i;l<r.length;++l)if(l!==i&&(s+=n),s+=r[l],o=a[s],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}a=o}return a}function u1(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class wR extends s1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,o=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,n],r&&(Array.isArray(r)?s.push(...r):typeof r=="string"&&i?s.push(...r.split(i)):s.push(r)));const l=l1(this.data,s);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=s[0],n=s[1],r=s.slice(2).join(".")),l||!o||typeof r!="string"?l:Uk(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,a){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let s=[e,n];r&&(s=s.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(s=e.split("."),a=n,n=s[1]),this.addNamespaces(n),vR(this.data,s,a),i.silent||this.emit("added",e,n,r,a)}addResources(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(typeof r[i]=="string"||Object.prototype.toString.apply(r[i])==="[object Array]")&&this.addResource(e,n,i,r[i],{silent:!0});a.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},s=[e,n];e.indexOf(".")>-1&&(s=e.split("."),a=r,r=n,n=s[1]),this.addNamespaces(n);let l=l1(this.data,s)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),a?xR(l,r,i):l={...l,...r},vR(this.data,s,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var kR={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,a){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,a))}),e}};const SR={};class Ow extends s1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),wU(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ns.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,s=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!RU(e,r,a);if(o&&!s){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:i};const u=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(a)}return typeof i=="string"&&(i=[i]),{key:e,namespaces:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:s}=this.extractFromKey(e[e.length-1],n),l=s[s.length-1],u=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const w=n.nsSeparator||this.options.nsSeparator;return a?{res:`${l}${w}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${w}${o}`}return a?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const d=this.resolve(e,n);let p=d&&d.res;const f=d&&d.usedKey||o,g=d&&d.exactUsedKey||o,y=Object.prototype.toString.apply(p),v=["[object Number]","[object Function]","[object RegExp]"],b=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject;if(x&&p&&typeof p!="string"&&typeof p!="boolean"&&typeof p!="number"&&v.indexOf(y)<0&&!(typeof b=="string"&&y==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,p,{...n,ns:s}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(d.res=w,d.usedParams=this.getUsedParamsDetails(n),d):w}if(i){const w=y==="[object Array]",S=w?[]:{},C=w?g:f;for(const I in p)if(Object.prototype.hasOwnProperty.call(p,I)){const _=`${C}${i}${I}`;S[I]=this.translate(_,{...n,joinArrays:!1,ns:s}),S[I]===_&&(S[I]=p[I])}p=S}}else if(x&&typeof b=="string"&&y==="[object Array]")p=p.join(b),p&&(p=this.extendTranslation(p,e,n,r));else{let w=!1,S=!1;const C=n.count!==void 0&&typeof n.count!="string",I=Ow.hasDefaultValue(n),_=C?this.pluralResolver.getSuffix(u,n.count,n):"",T=n.ordinal&&C?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",M=C&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),P=M&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${_}`]||n[`defaultValue${T}`]||n.defaultValue;!this.isValidLookup(p)&&I&&(w=!0,p=P),this.isValidLookup(p)||(S=!0,p=o);const L=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:p,j=I&&P!==p&&this.options.updateMissing;if(S||w||j){if(this.logger.log(j?"updateKey":"missingKey",u,l,o,j?P:p),i){const Z=this.resolve(o,{...n,keySeparator:!1});Z&&Z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let B=[];const K=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&K&&K[0])for(let Z=0;Z<K.length;Z++)B.push(K[Z]);else this.options.saveMissingTo==="all"?B=this.languageUtils.toResolveHierarchy(n.lng||this.language):B.push(n.lng||this.language);const X=(Z,H,F)=>{const Y=I&&F!==p?F:L;this.options.missingKeyHandler?this.options.missingKeyHandler(Z,l,H,Y,j,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Z,l,H,Y,j,n),this.emit("missingKey",Z,l,H,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?B.forEach(Z=>{const H=this.pluralResolver.getSuffixes(Z,n);M&&n[`defaultValue${this.options.pluralSeparator}zero`]&&H.indexOf(`${this.options.pluralSeparator}zero`)<0&&H.push(`${this.options.pluralSeparator}zero`),H.forEach(F=>{X([Z],o+F,n[`defaultValue${F}`]||P)})}):X(B,o,P))}p=this.extendTranslation(p,e,n,d,r),S&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${o}`),(S||w)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,w?p:void 0):p=this.options.parseMissingKeyHandler(p))}return a?(d.res=p,d.usedParams=this.getUsedParamsDetails(n),d):p}extendTranslation(e,n,r,a,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const p=e.match(this.interpolator.nestingRegexp);c=p&&p.length}let d=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language,r),u){const p=e.match(this.interpolator.nestingRegexp),f=p&&p.length;c<f&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(r.lng=a.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,f=new Array(p),g=0;g<p;g++)f[g]=arguments[g];return i&&i[0]===f[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${n[0]}`),null):o.translate(...f,n)},r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,l=typeof s=="string"?[s]:s;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=kR.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,a,i,o,s;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;a=c;let d=u.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const p=n.count!==void 0&&typeof n.count!="string",f=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),g=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(v=>{this.isValidLookup(r)||(s=v,!SR[`${y[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(SR[`${y[0]}-${v}`]=!0,this.logger.warn(`key "${a}" for languages "${y.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(b=>{if(this.isValidLookup(r))return;o=b;const x=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(x,c,b,v,n);else{let S;p&&(S=this.pluralResolver.getSuffix(b,n.count,n));const C=`${this.options.pluralSeparator}zero`,I=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(x.push(c+S),n.ordinal&&S.indexOf(I)===0&&x.push(c+S.replace(I,this.options.pluralSeparator)),f&&x.push(c+C)),g){const _=`${c}${this.options.contextSeparator}${n.context}`;x.push(_),p&&(x.push(_+S),n.ordinal&&S.indexOf(I)===0&&x.push(_+S.replace(I,this.options.pluralSeparator)),f&&x.push(_+C))}}let w;for(;w=x.pop();)this.isValidLookup(r)||(i=w,r=this.getResource(b,v,w,n))}))})}),{res:r,usedKey:a,exactUsedKey:i,usedLng:o,usedNS:s}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,a):this.resourceStore.getResource(e,n,r,a)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let a=r?e.replace:e;if(r&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const i of n)delete a[i]}return a}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}function Gk(t){return t.charAt(0).toUpperCase()+t.slice(1)}class CR{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ns.create("languageUtils")}getScriptPartFromCode(e){if(e=u1(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=u1(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(a=>a.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Gk(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Gk(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Gk(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(n=a)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(i=>{if(i===a||!(i.indexOf("-")<0&&a.indexOf("-")<0)&&i.indexOf(a)===0)return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),a=[],i=o=>{o&&(this.isSupportedCode(o)?a.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):typeof e=="string"&&i(this.formatLanguageCode(e)),r.forEach(o=>{a.indexOf(o)<0&&i(this.formatLanguageCode(o))}),a}}let $U=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],OU={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};const MU=["v1","v2","v3"],PU=["v4"],IR={zero:0,one:1,two:2,few:3,many:4,other:5};function AU(){const t={};return $U.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:OU[e.fc]}})}),t}class DU{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=ns.create("pluralResolver"),(!this.options.compatibilityJSON||PU.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=AU()}addRule(e,n){this.rules[e]=n}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(u1(e==="dev"?"en":e),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(a=>`${n}${a}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((a,i)=>IR[a]-IR[i]).map(a=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a}`):r.numbers.map(a=>this.getSuffix(e,a,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,r);return a?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(n)}`:this.getSuffixRetroCompatible(a,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let a=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const i=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!MU.includes(this.options.compatibilityJSON)}}function ER(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=CU(t,e,n);return!i&&a&&typeof n=="string"&&(i=Uk(t,n,r),i===void 0&&(i=Uk(e,n,r))),i}class LU{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ns.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const n=e.interpolation;this.escape=n.escape!==void 0?n.escape:EU,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?Td(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?Td(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?Td(n.nestingPrefix):n.nestingPrefixEscaped||Td("$t("),this.nestingSuffix=n.nestingSuffix?Td(n.nestingSuffix):n.nestingSuffixEscaped||Td(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,a){let i,o,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(f){return f.replace(/\$/g,"$$$$")}const c=f=>{if(f.indexOf(this.formatSeparator)<0){const b=ER(n,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,r,{...a,...n,interpolationkey:f}):b}const g=f.split(this.formatSeparator),y=g.shift().trim(),v=g.join(this.formatSeparator).trim();return this.format(ER(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...a,...n,interpolationkey:y})};this.resetRegExp();const d=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,p=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>u(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?u(this.escape(f)):u(f)}].forEach(f=>{for(s=0;i=f.regex.exec(e);){const g=i[1].trim();if(o=c(g),o===void 0)if(typeof d=="function"){const v=d(e,i,a);o=typeof v=="string"?v:""}else if(a&&Object.prototype.hasOwnProperty.call(a,g))o="";else if(p){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=bR(o));const y=f.safeValue(o);if(e=e.replace(i[0],y),p?(f.regex.lastIndex+=o.length,f.regex.lastIndex-=i[0].length):f.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,i,o;function s(l,u){const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const d=l.split(new RegExp(`${c}[ ]*{`));let p=`{${d[1]}`;l=d[0],p=this.interpolate(p,o);const f=p.match(/'/g),g=p.match(/"/g);(f&&f.length%2===0&&!g||g.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),u&&(o={...u,...o})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,y),`${l}${c}${p}`}return delete o.defaultValue,l}for(;a=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const c=a[1].split(this.formatSeparator).map(d=>d.trim());a[1]=c.shift(),l=c,u=!0}if(i=n(s.call(this,a[1].trim(),o),o),i&&a[0]===e&&typeof i!="string")return i;typeof i!="string"&&(i=bR(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),u&&(i=l.reduce((c,d)=>this.format(c,d,r.lng,{...r,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}function FU(t){let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);e==="currency"&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(i=>{if(!i)return;const[o,...s]=i.split(":"),l=s.join(":").trim().replace(/^'+|'+$/g,"");n[o.trim()]||(n[o.trim()]=l),l==="false"&&(n[o.trim()]=!1),l==="true"&&(n[o.trim()]=!0),isNaN(l)||(n[o.trim()]=parseInt(l,10))})}return{formatName:e,formatOptions:n}}function _d(t){const e={};return function(n,r,a){const i=r+JSON.stringify(a);let o=e[i];return o||(o=t(u1(r),a),e[i]=o),o(n)}}class BU{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ns.create("formatter"),this.options=e,this.formats={number:_d((n,r)=>{const a=new Intl.NumberFormat(n,{...r});return i=>a.format(i)}),currency:_d((n,r)=>{const a=new Intl.NumberFormat(n,{...r,style:"currency"});return i=>a.format(i)}),datetime:_d((n,r)=>{const a=new Intl.DateTimeFormat(n,{...r});return i=>a.format(i)}),relativetime:_d((n,r)=>{const a=new Intl.RelativeTimeFormat(n,{...r});return i=>a.format(i,r.range||"day")}),list:_d((n,r)=>{const a=new Intl.ListFormat(n,{...r});return i=>a.format(i)})},this.init(e)}init(e){const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=_d(n)}format(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((i,o)=>{const{formatName:s,formatOptions:l}=FU(o);if(this.formats[s]){let u=i;try{const c=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},d=c.locale||c.lng||a.locale||a.lng||r;u=this.formats[s](i,d,{...l,...a,...c})}catch(c){this.logger.warn(c)}return u}else this.logger.warn(`there was no format function for ${s}`);return i},e)}}function zU(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}class jU extends s1{constructor(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=ns.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,a.backend,a)}queueLoad(e,n,r,a){const i={},o={},s={},l={};return e.forEach(u=>{let c=!0;n.forEach(d=>{const p=`${u}|${d}`;!r.reload&&this.store.hasResourceBundle(u,d)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,c=!1,o[p]===void 0&&(o[p]=!0),i[p]===void 0&&(i[p]=!0),l[d]===void 0&&(l[d]=!0)))}),c||(s[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const a=e.split("|"),i=a[0],o=a[1];n&&this.emit("failedLoading",i,o,n),r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2;const s={};this.queue.forEach(l=>{SU(l.loaded,[i],o),zU(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{s[u]||(s[u]={});const c=l.loaded[u];c.length&&c.forEach(d=>{s[u][d]===void 0&&(s[u][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:a,wait:i,callback:o});return}this.readingCalls++;const s=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(u&&c&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,a+1,i*2,o)},i);return}o(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(c=>s(null,c)).catch(s):s(null,u)}catch(u){s(u)}return}return l(e,n,s)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const i=this.queueLoad(e,n,r,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),a=r[0],i=r[1];this.read(a,i,"read",void 0,void 0,(o,s)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${a} failed`,o),!o&&s&&this.logger.log(`${n}loaded namespace ${i} for language ${a}`,s),this.loaded(e,o,s)})}saveMissing(e,n,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(e,n,r,a,l):c=u(e,n,r,a),c&&typeof c.then=="function"?c.then(d=>s(null,d)).catch(s):s(null,c)}catch(c){s(c)}else u(e,n,r,a,s,l)}!e||!e[0]||this.store.addResource(e[0],n,r,a)}}}function NR(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let e={};if(typeof t[1]=="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function TR(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function c1(){}function VU(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(e=>{typeof t[e]=="function"&&(t[e]=t[e].bind(t))})}class b0 extends s1{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=TR(e),this.services={},this.logger=ns,this.modules={external:[]},VU(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const a=NR();this.options={...a,...this.options,...TR(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function i(l){return l?typeof l=="function"?new l:l:null}if(!this.options.isClone){this.modules.logger?ns.init(i(this.modules.logger),this.options):ns.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=BU);const u=new CR(this.options);this.store=new wR(this.options.resources,this.options);const c=this.services;c.logger=ns,c.resourceStore=this.store,c.languageUtils=u,c.pluralResolver=new DU(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(c.formatter=i(l),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new LU(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new jU(i(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(d){for(var p=arguments.length,f=new Array(p>1?p-1:0),g=1;g<p;g++)f[g-1]=arguments[g];e.emit(d,...f)}),this.modules.languageDetector&&(c.languageDetector=i(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=i(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new Ow(this.services,this.options),this.translator.on("*",function(d){for(var p=arguments.length,f=new Array(p>1?p-1:0),g=1;g<p;g++)f[g-1]=arguments[g];e.emit(d,...f)}),this.modules.external.forEach(d=>{d.init&&d.init(this)})}if(this.format=this.options.interpolation.format,r||(r=c1),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=function(){return e.store[l](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=function(){return e.store[l](...arguments),e}});const o=jh(),s=()=>{const l=(u,c)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(c),r(u,c)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),o}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c1;const r=typeof e=="string"?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const a=[],i=o=>{!o||o==="cimode"||this.services.languageUtils.toResolveHierarchy(o).forEach(s=>{s!=="cimode"&&a.indexOf(s)<0&&a.push(s)})};r?i(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(o=>i(o)),this.options.preload&&this.options.preload.forEach(o=>i(o)),this.services.backendConnector.load(a,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(o)})}else n(null)}reloadResources(e,n,r){const a=jh();return e||(e=this.languages),n||(n=this.options.ns),r||(r=c1),this.services.backendConnector.reload(e,n,i=>{a.resolve(),r(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&kR.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const a=jh();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,a.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},s=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{o(c,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),a}getFixedT(e,n,r){var a=this;const i=function(o,s){let l;if(typeof s!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),d=2;d<u;d++)c[d-2]=arguments[d];l=a.options.overloadTranslationOptionHandler([o,s].concat(c))}else l={...s};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix=l.keyPrefix||r||i.keyPrefix;const p=a.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(o)?f=o.map(g=>`${l.keyPrefix}${p}${g}`):f=l.keyPrefix?`${l.keyPrefix}${p}${o}`:o,a.t(f,l)};return typeof e=="string"?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=this.services.backendConnector.state[`${s}|${l}`];return u===-1||u===2};if(n.precheck){const s=n.precheck(this,o);if(s!==void 0)return s}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!a||o(i,e)))}loadNamespaces(e,n){const r=jh();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=jh();typeof e=="string"&&(e=[e]);const a=this.options.preload||[],i=e.filter(o=>a.indexOf(o)<0);return i.length?(this.options.preload=a.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new CR(NR());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new b0(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c1;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new b0(a);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new wR(this.store.data,a),i.services.resourceStore=i.store),i.translator=new Ow(i.services,a),i.translator.on("*",function(o){for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];i.emit(o,...l)}),i.init(a,n),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ia=b0.createInstance();ia.createInstance=b0.createInstance,ia.createInstance,ia.dir,ia.init,ia.loadResources,ia.reloadResources,ia.use,ia.changeLanguage,ia.getFixedT,ia.t,ia.exists,ia.setDefaultNamespace,ia.hasLoadedNamespace,ia.loadNamespaces,ia.loadLanguages;const _R=R.createContext({dragDropManager:void 0});function Uh(t){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(t)}function UU(t,e){if(Uh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GU(t){var e=UU(t,"string");return Uh(e)=="symbol"?e:String(e)}function WU(t,e,n){return e=GU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function $R(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RR(Object(n),!0).forEach(function(r){WU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ca(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var OR=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Wk=function(){return Math.random().toString(36).substring(7).split("").join(".")},d1={INIT:"@@redux/INIT"+Wk(),REPLACE:"@@redux/REPLACE"+Wk(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Wk()}};function HU(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Hk(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ca(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ca(1));return n(Hk)(t,e)}if(typeof t!="function")throw new Error(Ca(2));var a=t,i=e,o=[],s=o,l=!1;function u(){s===o&&(s=o.slice())}function c(){if(l)throw new Error(Ca(3));return i}function d(y){if(typeof y!="function")throw new Error(Ca(4));if(l)throw new Error(Ca(5));var v=!0;return u(),s.push(y),function(){if(v){if(l)throw new Error(Ca(6));v=!1,u();var b=s.indexOf(y);s.splice(b,1),o=null}}}function p(y){if(!HU(y))throw new Error(Ca(7));if(typeof y.type>"u")throw new Error(Ca(8));if(l)throw new Error(Ca(9));try{l=!0,i=a(i,y)}finally{l=!1}for(var v=o=s,b=0;b<v.length;b++){var x=v[b];x()}return y}function f(y){if(typeof y!="function")throw new Error(Ca(10));a=y,p({type:d1.REPLACE})}function g(){var y,v=d;return y={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Ca(11));function x(){b.next&&b.next(c())}x();var w=v(x);return{unsubscribe:w}}},y[OR]=function(){return this},y}return p({type:d1.INIT}),r={dispatch:p,subscribe:d,getState:c,replaceReducer:f},r[OR]=g,r}function qU(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:d1.INIT});if(typeof r>"u")throw new Error(Ca(12));if(typeof n(void 0,{type:d1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ca(13))})}function KU(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var a=e[r];typeof t[a]=="function"&&(n[a]=t[a])}var i=Object.keys(n),o;try{qU(n)}catch(s){o=s}return function(s,l){if(s===void 0&&(s={}),o)throw o;for(var u=!1,c={},d=0;d<i.length;d++){var p=i[d],f=n[p],g=s[p],y=f(g,l);if(typeof y>"u")throw l&&l.type,new Error(Ca(14));c[p]=y,u=u||y!==g}return u=u||i.length!==Object.keys(s).length,u?c:s}}function MR(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,a){return function(){return r(a.apply(void 0,arguments))}})}function XU(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var a=r.apply(void 0,arguments),i=function(){throw new Error(Ca(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=e.map(function(l){return l(o)});return i=MR.apply(void 0,s)(a.dispatch),$R($R({},a),{},{dispatch:i})}}}function Nt(t,e,...n){if(YU()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;r=new Error(e.replace(/%s/g,function(){return n[a++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function YU(){return typeof process<"u"&&!0}function QU(t,e,n){return e.split(".").reduce((r,a)=>r&&r[a]?r[a]:n||null,t)}function ZU(t,e){return t.filter(n=>n!==e)}function PR(t){return typeof t=="object"}function JU(t,e){const n=new Map,r=i=>{n.set(i,n.has(i)?n.get(i)+1:1)};t.forEach(r),e.forEach(r);const a=[];return n.forEach((i,o)=>{i===1&&a.push(o)}),a}function eG(t,e){return t.filter(n=>e.indexOf(n)>-1)}const qk="dnd-core/INIT_COORDS",p1="dnd-core/BEGIN_DRAG",Kk="dnd-core/PUBLISH_DRAG_SOURCE",h1="dnd-core/HOVER",f1="dnd-core/DROP",m1="dnd-core/END_DRAG";function AR(t,e){return{type:qk,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const tG={type:qk,payload:{clientOffset:null,sourceClientOffset:null}};function nG(t){return function(e=[],n={publishSource:!0}){const{publishSource:r=!0,clientOffset:a,getSourceClientOffset:i}=n,o=t.getMonitor(),s=t.getRegistry();t.dispatch(AR(a)),rG(e,o,s);const l=oG(e,o);if(l==null){t.dispatch(tG);return}let u=null;if(a){if(!i)throw new Error("getSourceClientOffset must be defined");aG(i),u=i(l)}t.dispatch(AR(a,u));const c=s.getSource(l).beginDrag(o,l);if(c==null)return;iG(c),s.pinSource(l);const d=s.getSourceType(l);return{type:p1,payload:{itemType:d,item:c,sourceId:l,clientOffset:a||null,sourceClientOffset:u||null,isSourcePublic:!!r}}}}function rG(t,e,n){Nt(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){Nt(n.getSource(r),"Expected sourceIds to be registered.")})}function aG(t){Nt(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function iG(t){Nt(PR(t),"Item must be an object.")}function oG(t,e){let n=null;for(let r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function sG(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){sG(t,a,n[a])})}return t}function uG(t){return function(e={}){const n=t.getMonitor(),r=t.getRegistry();cG(n),hG(n).forEach((a,i)=>{const o=dG(a,i,r,n),s={type:f1,payload:{dropResult:lG({},e,o)}};t.dispatch(s)})}}function cG(t){Nt(t.isDragging(),"Cannot call drop while not dragging."),Nt(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function dG(t,e,n,r){const a=n.getTarget(t);let i=a?a.drop(r,t):void 0;return pG(i),typeof i>"u"&&(i=e===0?{}:r.getDropResult()),i}function pG(t){Nt(typeof t>"u"||PR(t),"Drop result must either be an object or undefined.")}function hG(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function fG(t){return function(){const e=t.getMonitor(),n=t.getRegistry();mG(e);const r=e.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(e,r),n.unpinSource()),{type:m1}}}function mG(t){Nt(t.isDragging(),"Cannot call endDrag while not dragging.")}function Xk(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function gG(t){return function(e,{clientOffset:n}={}){yG(e);const r=e.slice(0),a=t.getMonitor(),i=t.getRegistry(),o=a.getItemType();return vG(r,i,o),bG(r,a,i),xG(r,a,i),{type:h1,payload:{targetIds:r,clientOffset:n||null}}}}function yG(t){Nt(Array.isArray(t),"Expected targetIds to be an array.")}function bG(t,e,n){Nt(e.isDragging(),"Cannot call hover while not dragging."),Nt(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<t.length;r++){const a=t[r];Nt(t.lastIndexOf(a)===r,"Expected targetIds to be unique in the passed array.");const i=n.getTarget(a);Nt(i,"Expected targetIds to be registered.")}}function vG(t,e,n){for(let r=t.length-1;r>=0;r--){const a=t[r],i=e.getTargetType(a);Xk(i,n)||t.splice(r,1)}}function xG(t,e,n){t.forEach(function(r){n.getTarget(r).hover(e,r)})}function wG(t){return function(){if(t.getMonitor().isDragging())return{type:Kk}}}function kG(t){return{beginDrag:nG(t),publishDragSource:wG(t),hover:gG(t),drop:uG(t),endDrag:fG(t)}}class SG{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function r(i){return(...o)=>{const s=i.apply(e,o);typeof s<"u"&&n(s)}}const a=kG(this);return Object.keys(a).reduce((i,o)=>{const s=a[o];return i[o]=r(s),i},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function CG(t,e){return{x:t.x+e.x,y:t.y+e.y}}function DR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function IG(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:r}=t;return!e||!n||!r?null:DR(CG(e,r),n)}function EG(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:DR(e,n)}const Gh=[],Yk=[];Gh.__IS_NONE__=!0,Yk.__IS_ALL__=!0;function NG(t,e){return t===Gh?!1:t===Yk||typeof e>"u"?!0:eG(e,t).length>0}class TG{subscribeToStateChange(e,n={}){const{handlerIds:r}=n;Nt(typeof e=="function","listener must be a function."),Nt(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),s=o.stateId;try{s===a||s===a+1&&!NG(o.dirtyHandlerIds,r)||e()}finally{a=s}};return this.store.subscribe(i)}subscribeToOffsetChange(e){Nt(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const a=this.store.getState().dragOffset;a!==n&&(n=a,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return Nt(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(Nt(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),a=this.getItemType();return Xk(r,a)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(Nt(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),a=this.getItemType();return r!==a?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const a=this.registry.getTargetType(e),i=this.getItemType();if(i&&!Xk(a,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(e);return r?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return IG(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return EG(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const LR=typeof global<"u"?global:self,FR=LR.MutationObserver||LR.WebKitMutationObserver;function BR(t){return function(){const e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}function _G(t){let e=1;const n=new FR(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const RG=typeof FR=="function"?_G:BR;class $G{enqueueTask(e){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let r=0,a=e.length-this.index;r<a;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=RG(this.flush),this.requestErrorThrow=BR(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class OG{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class MG{create(e){const n=this.freeTasks,r=n.length?n.pop():new OG(this.onError,a=>n[n.length]=a);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const zR=new $G,PG=new MG(zR.registerPendingError);function AG(t){zR.enqueueTask(PG.create(t))}const Qk="dnd-core/ADD_SOURCE",Zk="dnd-core/ADD_TARGET",Jk="dnd-core/REMOVE_SOURCE",g1="dnd-core/REMOVE_TARGET";function DG(t){return{type:Qk,payload:{sourceId:t}}}function LG(t){return{type:Zk,payload:{targetId:t}}}function FG(t){return{type:Jk,payload:{sourceId:t}}}function BG(t){return{type:g1,payload:{targetId:t}}}function zG(t){Nt(typeof t.canDrag=="function","Expected canDrag to be a function."),Nt(typeof t.beginDrag=="function","Expected beginDrag to be a function."),Nt(typeof t.endDrag=="function","Expected endDrag to be a function.")}function jG(t){Nt(typeof t.canDrop=="function","Expected canDrop to be a function."),Nt(typeof t.hover=="function","Expected hover to be a function."),Nt(typeof t.drop=="function","Expected beginDrag to be a function.")}function eS(t,e){if(e&&Array.isArray(t)){t.forEach(n=>eS(n,!1));return}Nt(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Hi;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Hi||(Hi={}));let VG=0;function UG(){return VG++}function GG(t){const e=UG().toString();switch(t){case Hi.SOURCE:return`S${e}`;case Hi.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function jR(t){switch(t[0]){case"S":return Hi.SOURCE;case"T":return Hi.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function VR(t,e){const n=t.entries();let r=!1;do{const{done:a,value:[,i]}=n.next();if(i===e)return!0;r=!!a}while(!r);return!1}class WG{addSource(e,n){eS(e),zG(n);const r=this.addHandler(Hi.SOURCE,e,n);return this.store.dispatch(DG(r)),r}addTarget(e,n){eS(e,!0),jG(n);const r=this.addHandler(Hi.TARGET,e,n);return this.store.dispatch(LG(r)),r}containsHandler(e){return VR(this.dragSources,e)||VR(this.dropTargets,e)}getSource(e,n=!1){return Nt(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Nt(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Nt(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Nt(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return jR(e)===Hi.SOURCE}isTargetId(e){return jR(e)===Hi.TARGET}removeSource(e){Nt(this.getSource(e),"Expected an existing source."),this.store.dispatch(FG(e)),AG(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Nt(this.getTarget(e),"Expected an existing target."),this.store.dispatch(BG(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);Nt(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){Nt(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,r){const a=GG(e);return this.types.set(a,n),e===Hi.SOURCE?this.dragSources.set(a,r):e===Hi.TARGET&&this.dropTargets.set(a,r),a}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const HG=(t,e)=>t===e;function qG(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function KG(t,e,n=HG){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function XG(t=Gh,e){switch(e.type){case h1:break;case Qk:case Zk:case g1:case Jk:return Gh;case p1:case Kk:case m1:case f1:default:return Yk}const{targetIds:n=[],prevTargetIds:r=[]}=e.payload,a=JU(n,r);if(!(a.length>0||!KG(n,r)))return Gh;const i=r[r.length-1],o=n[n.length-1];return i!==o&&(i&&a.push(i),o&&a.push(o)),a}function YG(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){YG(t,a,n[a])})}return t}const UR={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function ZG(t=UR,e){const{payload:n}=e;switch(e.type){case qk:case p1:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case h1:return qG(t.clientOffset,n.clientOffset)?t:QG({},t,{clientOffset:n.clientOffset});case m1:case f1:return UR;default:return t}}function JG(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){JG(t,a,n[a])})}return t}const eW={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function tW(t=eW,e){const{payload:n}=e;switch(e.type){case p1:return Rd({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case Kk:return Rd({},t,{isSourcePublic:!0});case h1:return Rd({},t,{targetIds:n.targetIds});case g1:return t.targetIds.indexOf(n.targetId)===-1?t:Rd({},t,{targetIds:ZU(t.targetIds,n.targetId)});case f1:return Rd({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case m1:return Rd({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function nW(t=0,e){switch(e.type){case Qk:case Zk:return t+1;case Jk:case g1:return t-1;default:return t}}function rW(t=0){return t+1}function aW(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){aW(t,a,n[a])})}return t}function oW(t={},e){return{dirtyHandlerIds:XG(t.dirtyHandlerIds,{type:e.type,payload:iW({},e.payload,{prevTargetIds:QU(t,"dragOperation.targetIds",[])})}),dragOffset:ZG(t.dragOffset,e),refCount:nW(t.refCount,e),dragOperation:tW(t.dragOperation,e),stateId:rW(t.stateId)}}function sW(t,e=void 0,n={},r=!1){const a=lW(r),i=new TG(a,new WG(a)),o=new SG(a,i),s=t(o,e,n);return o.receiveBackend(s),o}function lW(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Hk(oW,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function uW(t,e){if(t==null)return{};var n=cW(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cW(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}let GR=0;const y1=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var dW=R.memo(function(t){var{children:e}=t,n=uW(t,["children"]);const[r,a]=pW(n);return R.useEffect(()=>{if(a){const i=WR();return++GR,()=>{--GR===0&&(i[y1]=null)}}},[]),re.jsx(_R.Provider,{value:r,children:e})});function pW(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=hW(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function hW(t,e=WR(),n,r){const a=e;return a[y1]||(a[y1]={dragDropManager:sW(t,e,n,r)}),a[y1]}function WR(){return typeof global<"u"?global:window}const fW=R.memo(function({connect:t,src:e}){return R.useEffect(()=>{if(typeof Image>"u")return;let n=!1;const r=new Image;return r.src=e,r.onload=()=>{t(r),n=!0},()=>{n&&t(null)}}),null});var mW=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(a=r;a--!==0;)if(!t(e[a],n[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;a--!==0;){var o=i[a];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const gW=Wi(mW),Zu=typeof window<"u"?R.useLayoutEffect:R.useEffect;function yW(t,e,n){const[r,a]=R.useState(()=>e(t)),i=R.useCallback(()=>{const o=e(t);gW(r,o)||(a(o),n&&n())},[r,t,n]);return Zu(i),[r,i]}function bW(t,e,n){const[r,a]=yW(t,e,n);return Zu(function(){const i=t.getHandlerId();if(i!=null)return t.subscribeToStateChange(a,{handlerIds:[i]})},[t,a]),r}function HR(t,e,n){return bW(e,t||(()=>({})),()=>n.reconnect())}function qR(t,e){const n=[...e||[]];return e==null&&typeof t!="function"&&n.push(t),R.useMemo(()=>typeof t=="function"?t():t,n)}function vW(t){return R.useMemo(()=>t.hooks.dragSource(),[t])}function xW(t){return R.useMemo(()=>t.hooks.dragPreview(),[t])}let tS=!1,nS=!1;class wW{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Nt(!tS,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return tS=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{tS=!1}}isDragging(){if(!this.sourceId)return!1;Nt(!nS,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return nS=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{nS=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let rS=!1;class kW{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;Nt(!rS,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return rS=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{rS=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function SW(t,e,n){const r=n.getRegistry(),a=r.addTarget(t,e);return[a,()=>r.removeTarget(a)]}function CW(t,e,n){const r=n.getRegistry(),a=r.addSource(t,e);return[a,()=>r.removeSource(a)]}function aS(t,e,n,r){let a=n?n.call(r,t,e):void 0;if(a!==void 0)return!!a;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<i.length;l++){const u=i[l];if(!s(u))return!1;const c=t[u],d=e[u];if(a=n?n.call(r,c,d,u):void 0,a===!1||a===void 0&&c!==d)return!1}return!0}function iS(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function IW(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function EW(t){return(e=null,n=null)=>{if(!R.isValidElement(e)){const a=e;return t(a,n),a}const r=e;return IW(r),NW(r,n?a=>t(a,n):t)}}function KR(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const a=EW(r);e[n]=()=>a}}),e}function XR(t,e){typeof t=="function"?t(e):t.current=e}function NW(t,e){const n=t.ref;return Nt(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?R.cloneElement(t,{ref:r=>{XR(n,r),XR(e,r)}}):R.cloneElement(t,{ref:e})}class TW{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!aS(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!aS(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=KR({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,iS(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,iS(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class _W{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!aS(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=KR({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,iS(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function $d(){const{dragDropManager:t}=R.useContext(_R);return Nt(t!=null,"Expected drag drop context"),t}function RW(t,e){const n=$d(),r=R.useMemo(()=>new TW(n.getBackend()),[n]);return Zu(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),Zu(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function $W(){const t=$d();return R.useMemo(()=>new wW(t),[t])}class OW{beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,a=this.monitor,{isDragging:i}=r;return i?i(a):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:a}=e;a&&a(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function MW(t,e,n){const r=R.useMemo(()=>new OW(t,e,n),[e,n]);return R.useEffect(()=>{r.spec=t},[t]),r}function PW(t){return R.useMemo(()=>{const e=t.type;return Nt(e!=null,"spec.type must be defined"),e},[t])}function AW(t,e,n){const r=$d(),a=MW(t,e,n),i=PW(t);Zu(function(){if(i!=null){const[o,s]=CW(i,a,r);return e.receiveHandlerId(o),n.receiveHandlerId(o),s}},[r,e,n,a,i])}function DW(t,e){const n=qR(t,e);Nt(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=$W(),a=RW(n.options,n.previewOptions);return AW(n,r,a),[HR(n.collect,r,a),vW(a),xW(a)]}function LW(t){return R.useMemo(()=>t.hooks.dropTarget(),[t])}function FW(t){const e=$d(),n=R.useMemo(()=>new _W(e.getBackend()),[e]);return Zu(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function BW(){const t=$d();return R.useMemo(()=>new kW(t),[t])}function zW(t){const{accept:e}=t;return R.useMemo(()=>(Nt(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class jW{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function VW(t,e){const n=R.useMemo(()=>new jW(t,e),[e]);return R.useEffect(()=>{n.spec=t},[t]),n}function UW(t,e,n){const r=$d(),a=VW(t,e),i=zW(t);Zu(function(){const[o,s]=SW(i,a,r);return e.receiveHandlerId(o),n.receiveHandlerId(o),s},[r,e,a,n,i.map(o=>o.toString()).join("|")])}function GW(t,e){const n=qR(t,e),r=BW(),a=FW(n.options);return UW(n,r,a),[HR(n.collect,r,a),LW(a)]}var Pl;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(Pl||(Pl={}));class WW{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,n,r,a;return(a=(r=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&a!==void 0?a:0}get delayMouseStart(){var e,n,r,a;return(a=(r=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&a!==void 0?a:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,n){this.args=e,this.context=n}}function HW(t,e,n,r){return Math.sqrt(Math.pow(Math.abs(n-t),2)+Math.pow(Math.abs(r-e),2))}function qW(t,e,n,r,a){if(!a)return!1;const i=Math.atan2(r-e,n-t)*180/Math.PI+180;for(let o=0;o<a.length;++o){const s=a[o];if(s&&(s.start==null||i>=s.start)&&(s.end==null||i<=s.end))return!0}return!1}const KW={Left:1,Right:2,Center:4},XW={Left:0,Center:1,Right:2};function oS(t){return t.button===void 0||t.button===XW.Left}function YW(t){return t.buttons===void 0||(t.buttons&KW.Left)===0}function YR(t){return!!t.targetTouches}const QW=1;function ZW(t){const e=t.nodeType===QW?t:t.parentElement;if(!e)return;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function JW(t,e){if(t.targetTouches.length===1)return b1(t.targetTouches[0]);if(e&&t.touches.length===1&&t.touches[0].target===e.target)return b1(t.touches[0])}function b1(t,e){return YR(t)?JW(t,e):{x:t.clientX,y:t.clientY}}const QR=(()=>{let t=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return t=!0,!0}}))}catch{}return t})(),Wh={[Pl.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Pl.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Pl.keyboard]:{keydown:"keydown"}};class y0{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(Nt(!y0.isSetUp,"Cannot have two Touch backends at the same time."),y0.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(y0.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,n,r,a=!1){const i=QR?{capture:a,passive:!1}:a;this.listenerTypes.forEach(function(o){const s=Wh[o][n];s&&e.addEventListener(s,r,i)})}removeEventListener(e,n,r,a=!1){const i=QR?{capture:a,passive:!1}:a;this.listenerTypes.forEach(function(o){const s=Wh[o][n];s&&e.removeEventListener(s,r,i)})}connectDragSource(e,n){const r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,n),this.addEventListener(n,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(n,"start",r)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,n){const r=this.options.rootElement;if(!this.document||!r)return()=>{};const a=i=>{if(!this.document||!r||!this.monitor.isDragging())return;let o;switch(i.type){case Wh.mouse.move:o={x:i.clientX,y:i.clientY};break;case Wh.touch.move:var s,l;o={x:((s=i.touches[0])===null||s===void 0?void 0:s.clientX)||0,y:((l=i.touches[0])===null||l===void 0?void 0:l.clientY)||0};break}const u=o!=null?this.document.elementFromPoint(o.x,o.y):void 0,c=u&&n.contains(u);if(u===n||c)return this.handleMove(i,e)};return this.addEventListener(this.document.body,"move",a),this.targetNodes.set(e,n),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",a))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,n,r){this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&ZW(i)},this.handleTopMoveStartCapture=a=>{oS(a)&&(this.moveStartSourceIds=[])},this.handleMoveStart=a=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(a)},this.handleTopMoveStart=a=>{if(!oS(a))return;const i=b1(a);i&&(YR(a)&&(this.lastTargetTouchFallback=a.targetTouches[0]),this._mouseClientOffset=i),this.waitingForDelay=!1},this.handleTopMoveStartDelay=a=>{if(!oS(a))return;const i=a.type===Wh.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,a),i),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(a,i)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(i)},this.handleTopMove=a=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:i,dragOverTargetIds:o}=this,s=this.options.enableHoverOutsideTarget,l=b1(a,this.lastTargetTouchFallback);if(!l)return;if(this._isScrolling||!this.monitor.isDragging()&&qW(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&i&&HW(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(i,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const u=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(u),this.actions.publishDragSource(),a.cancelable&&a.preventDefault();const c=(o||[]).map(g=>this.targetNodes.get(g)).filter(g=>!!g),d=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(l.x,l.y,c):this.document.elementsFromPoint(l.x,l.y),p=[];for(const g in d){if(!d.hasOwnProperty(g))continue;let y=d[g];for(y!=null&&p.push(y);y;)y=y.parentElement,y&&p.indexOf(y)===-1&&p.push(y)}const f=p.filter(g=>c.indexOf(g)>-1).map(g=>this._getDropTargetId(g)).filter(g=>!!g).filter((g,y,v)=>v.indexOf(g)===y);if(s)for(const g in this.targetNodes){const y=this.targetNodes.get(g);if(u&&y&&y.contains(u)&&f.indexOf(g)===-1){f.unshift(g);break}}f.reverse(),this.actions.hover(f,{clientOffset:l})},this._getDropTargetId=a=>{const i=this.targetNodes.keys();let o=i.next();for(;o.done===!1;){const s=o.value;if(a===this.targetNodes.get(s))return s;o=i.next()}},this.handleTopMoveEndCapture=a=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!YW(a)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}a.cancelable&&a.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=a=>{a.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new WW(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Pl.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Pl.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Pl.keyboard)}}const eH=function(t,e={},n={}){return new y0(t,e,n)};var ZR={exports:{}},Si={},JR={exports:{}},e$={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(t){function e(F,Y){var Q=F.length;F.push(Y);e:for(;0<Q;){var ne=Q-1>>>1,se=F[ne];if(0<a(se,Y))F[ne]=Y,F[Q]=se,Q=ne;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Y=F[0],Q=F.pop();if(Q!==Y){F[0]=Q;e:for(var ne=0,se=F.length,pe=se>>>1;ne<pe;){var de=2*(ne+1)-1,ie=F[de],xe=de+1,q=F[xe];if(0>a(ie,Q))xe<se&&0>a(q,ie)?(F[ne]=q,F[xe]=Q,ne=xe):(F[ne]=ie,F[de]=Q,ne=de);else if(xe<se&&0>a(q,Q))F[ne]=q,F[xe]=Q,ne=xe;else break e}}return Y}function a(F,Y){var Q=F.sortIndex-Y.sortIndex;return Q!==0?Q:F.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,d=null,p=3,f=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=F)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function S(F){if(y=!1,w(F),!g)if(n(l)!==null)g=!0,Z(C);else{var Y=n(u);Y!==null&&H(S,Y.startTime-F)}}function C(F,Y){g=!1,y&&(y=!1,b(T),T=-1),f=!0;var Q=p;try{for(w(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||F&&!L());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,p=d.priorityLevel;var se=ne(d.expirationTime<=Y);Y=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(l)&&r(l),w(Y)}else r(l);d=n(l)}if(d!==null)var pe=!0;else{var de=n(u);de!==null&&H(S,de.startTime-Y),pe=!1}return pe}finally{d=null,p=Q,f=!1}}var I=!1,_=null,T=-1,M=5,P=-1;function L(){return!(t.unstable_now()-P<M)}function j(){if(_!==null){var F=t.unstable_now();P=F;var Y=!0;try{Y=_(!0,F)}finally{Y?B():(I=!1,_=null)}}else I=!1}var B;if(typeof x=="function")B=function(){x(j)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,X=K.port2;K.port1.onmessage=j,B=function(){X.postMessage(null)}}else B=function(){v(j,0)};function Z(F){_=F,I||(I=!0,B())}function H(F,Y){T=v(function(){F(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,Z(C))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var Q=p;p=Y;try{return F()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Q=p;p=F;try{return Y()}finally{p=Q}},t.unstable_scheduleCallback=function(F,Y,Q){var ne=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ne+Q:ne):Q=ne,F){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Q+se,F={id:c++,callback:Y,priorityLevel:F,startTime:Q,expirationTime:se,sortIndex:-1},Q>ne?(F.sortIndex=Q,e(u,F),n(l)===null&&F===n(u)&&(y?(b(T),T=-1):y=!0,H(S,Q-ne))):(F.sortIndex=se,e(l,F),g||f||(g=!0,Z(C))),F},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(F){var Y=p;return function(){var Q=p;p=Y;try{return F.apply(this,arguments)}finally{p=Q}}}})(e$),JR.exports=e$;var Hh=JR.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var t$=R,Ci=Hh;function Ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n$=new Set,qh={};function Ju(t,e){Od(t,e),Od(t+"Capture",e)}function Od(t,e){for(qh[t]=e,t=0;t<e.length;t++)n$.add(e[t])}var Ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sS=Object.prototype.hasOwnProperty,tH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r$={},a$={};function nH(t){return sS.call(a$,t)?!0:sS.call(r$,t)?!1:tH.test(t)?a$[t]=!0:(r$[t]=!0,!1)}function rH(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aH(t,e,n,r){if(e===null||typeof e>"u"||rH(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ha(t,e,n,r,a,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var oa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){oa[t]=new Ha(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];oa[e]=new Ha(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){oa[t]=new Ha(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){oa[t]=new Ha(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){oa[t]=new Ha(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){oa[t]=new Ha(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){oa[t]=new Ha(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){oa[t]=new Ha(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){oa[t]=new Ha(t,5,!1,t.toLowerCase(),null,!1,!1)});var lS=/[\-:]([a-z])/g;function uS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lS,uS);oa[e]=new Ha(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lS,uS);oa[e]=new Ha(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lS,uS);oa[e]=new Ha(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){oa[t]=new Ha(t,1,!1,t.toLowerCase(),null,!1,!1)}),oa.xlinkHref=new Ha("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){oa[t]=new Ha(t,1,!1,t.toLowerCase(),null,!0,!0)});function cS(t,e,n,r){var a=oa.hasOwnProperty(e)?oa[e]:null;(a!==null?a.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aH(e,n,a,r)&&(n=null),r||a===null?nH(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ls=t$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,v1=Symbol.for("react.element"),Md=Symbol.for("react.portal"),Pd=Symbol.for("react.fragment"),dS=Symbol.for("react.strict_mode"),pS=Symbol.for("react.profiler"),i$=Symbol.for("react.provider"),o$=Symbol.for("react.context"),hS=Symbol.for("react.forward_ref"),fS=Symbol.for("react.suspense"),mS=Symbol.for("react.suspense_list"),gS=Symbol.for("react.memo"),Al=Symbol.for("react.lazy"),s$=Symbol.for("react.offscreen"),l$=Symbol.iterator;function Kh(t){return t===null||typeof t!="object"?null:(t=l$&&t[l$]||t["@@iterator"],typeof t=="function"?t:null)}var Zn=Object.assign,yS;function Xh(t){if(yS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yS=e&&e[1]||""}return`
`+yS+t}var bS=!1;function vS(t,e){if(!t||bS)return"";bS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{bS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xh(t):""}function iH(t){switch(t.tag){case 5:return Xh(t.type);case 16:return Xh("Lazy");case 13:return Xh("Suspense");case 19:return Xh("SuspenseList");case 0:case 2:case 15:return t=vS(t.type,!1),t;case 11:return t=vS(t.type.render,!1),t;case 1:return t=vS(t.type,!0),t;default:return""}}function xS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pd:return"Fragment";case Md:return"Portal";case pS:return"Profiler";case dS:return"StrictMode";case fS:return"Suspense";case mS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case o$:return(t.displayName||"Context")+".Consumer";case i$:return(t._context.displayName||"Context")+".Provider";case hS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gS:return e=t.displayName||null,e!==null?e:xS(t.type)||"Memo";case Al:e=t._payload,t=t._init;try{return xS(t(e))}catch{}}return null}function oH(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xS(e);case 8:return e===dS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Dl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function u$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sH(t){var e=u$(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function x1(t){t._valueTracker||(t._valueTracker=sH(t))}function c$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=u$(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function w1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wS(t,e){var n=e.checked;return Zn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function d$(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Dl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function p$(t,e){e=e.checked,e!=null&&cS(t,"checked",e,!1)}function kS(t,e){p$(t,e);var n=Dl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?SS(t,e.type,n):e.hasOwnProperty("defaultValue")&&SS(t,e.type,Dl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function h$(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function SS(t,e,n){(e!=="number"||w1(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yh=Array.isArray;function Ad(t,e,n,r){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Dl(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function CS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return Zn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function f$(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ne(92));if(Yh(n)){if(1<n.length)throw Error(Ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Dl(n)}}function m$(t,e){var n=Dl(e.value),r=Dl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function g$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function y$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?y$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var k1,b$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(k1=k1||document.createElement("div"),k1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=k1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lH=["Webkit","ms","Moz","O"];Object.keys(Zh).forEach(function(t){lH.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zh[e]=Zh[t]})});function v$(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zh.hasOwnProperty(t)&&Zh[t]?(""+e).trim():e+"px"}function x$(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=v$(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var uH=Zn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ES(t,e){if(e){if(uH[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ne(62))}}function NS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var TS=null;function _S(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var RS=null,Dd=null,Ld=null;function w$(t){if(t=wf(t)){if(typeof RS!="function")throw Error(Ne(280));var e=t.stateNode;e&&(e=W1(e),RS(t.stateNode,t.type,e))}}function k$(t){Dd?Ld?Ld.push(t):Ld=[t]:Dd=t}function S$(){if(Dd){var t=Dd,e=Ld;if(Ld=Dd=null,w$(t),e)for(t=0;t<e.length;t++)w$(e[t])}}function C$(t,e){return t(e)}function I$(){}var $S=!1;function E$(t,e,n){if($S)return t(e,n);$S=!0;try{return C$(t,e,n)}finally{$S=!1,(Dd!==null||Ld!==null)&&(I$(),S$())}}function Jh(t,e){var n=t.stateNode;if(n===null)return null;var r=W1(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ne(231,e,typeof n));return n}var OS=!1;if(Ds)try{var ef={};Object.defineProperty(ef,"passive",{get:function(){OS=!0}}),window.addEventListener("test",ef,ef),window.removeEventListener("test",ef,ef)}catch{OS=!1}function cH(t,e,n,r,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var tf=!1,S1=null,C1=!1,MS=null,dH={onError:function(t){tf=!0,S1=t}};function pH(t,e,n,r,a,i,o,s,l){tf=!1,S1=null,cH.apply(dH,arguments)}function hH(t,e,n,r,a,i,o,s,l){if(pH.apply(this,arguments),tf){if(tf){var u=S1;tf=!1,S1=null}else throw Error(Ne(198));C1||(C1=!0,MS=u)}}function ec(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function N$(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function T$(t){if(ec(t)!==t)throw Error(Ne(188))}function fH(t){var e=t.alternate;if(!e){if(e=ec(t),e===null)throw Error(Ne(188));return e!==t?null:t}for(var n=t,r=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return T$(a),t;if(i===r)return T$(a),e;i=i.sibling}throw Error(Ne(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o)throw Error(Ne(189))}}if(n.alternate!==r)throw Error(Ne(190))}if(n.tag!==3)throw Error(Ne(188));return n.stateNode.current===n?t:e}function _$(t){return t=fH(t),t!==null?R$(t):null}function R$(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=R$(t);if(e!==null)return e;t=t.sibling}return null}var $$=Ci.unstable_scheduleCallback,O$=Ci.unstable_cancelCallback,mH=Ci.unstable_shouldYield,gH=Ci.unstable_requestPaint,mr=Ci.unstable_now,yH=Ci.unstable_getCurrentPriorityLevel,PS=Ci.unstable_ImmediatePriority,M$=Ci.unstable_UserBlockingPriority,I1=Ci.unstable_NormalPriority,bH=Ci.unstable_LowPriority,P$=Ci.unstable_IdlePriority,E1=null,rs=null;function vH(t){if(rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(E1,t,void 0,(t.current.flags&128)===128)}catch{}}var Eo=Math.clz32?Math.clz32:kH,xH=Math.log,wH=Math.LN2;function kH(t){return t>>>=0,t===0?32:31-(xH(t)/wH|0)|0}var N1=64,T1=4194304;function nf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _1(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~a;s!==0?r=nf(s):(i&=o,i!==0&&(r=nf(i)))}else o=n&~a,o!==0?r=nf(o):i!==0&&(r=nf(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&a)&&(a=r&-r,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Eo(e),a=1<<n,r|=t[n],e&=~a;return r}function SH(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CH(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Eo(i),s=1<<o,l=a[o];l===-1?(!(s&n)||s&r)&&(a[o]=SH(s,e)):l<=e&&(t.expiredLanes|=s),i&=~s}}function AS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function A$(){var t=N1;return N1<<=1,!(N1&4194240)&&(N1=64),t}function DS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Eo(e),t[e]=n}function IH(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-Eo(n),i=1<<a;e[a]=0,r[a]=-1,t[a]=-1,n&=~i}}function LS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Eo(n),a=1<<r;a&e|t[r]&e&&(t[r]|=e),n&=~a}}var gn=0;function D$(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var L$,FS,F$,B$,z$,BS=!1,R1=[],Ll=null,Fl=null,Bl=null,af=new Map,of=new Map,zl=[],EH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function j$(t,e){switch(t){case"focusin":case"focusout":Ll=null;break;case"dragenter":case"dragleave":Fl=null;break;case"mouseover":case"mouseout":Bl=null;break;case"pointerover":case"pointerout":af.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":of.delete(e.pointerId)}}function sf(t,e,n,r,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},e!==null&&(e=wf(e),e!==null&&FS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function NH(t,e,n,r,a){switch(e){case"focusin":return Ll=sf(Ll,t,e,n,r,a),!0;case"dragenter":return Fl=sf(Fl,t,e,n,r,a),!0;case"mouseover":return Bl=sf(Bl,t,e,n,r,a),!0;case"pointerover":var i=a.pointerId;return af.set(i,sf(af.get(i)||null,t,e,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,of.set(i,sf(of.get(i)||null,t,e,n,r,a)),!0}return!1}function V$(t){var e=tc(t.target);if(e!==null){var n=ec(e);if(n!==null){if(e=n.tag,e===13){if(e=N$(n),e!==null){t.blockedOn=e,z$(t.priority,function(){F$(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);TS=r,n.target.dispatchEvent(r),TS=null}else return e=wf(n),e!==null&&FS(e),t.blockedOn=n,!1;e.shift()}return!0}function U$(t,e,n){$1(t)&&n.delete(e)}function TH(){BS=!1,Ll!==null&&$1(Ll)&&(Ll=null),Fl!==null&&$1(Fl)&&(Fl=null),Bl!==null&&$1(Bl)&&(Bl=null),af.forEach(U$),of.forEach(U$)}function lf(t,e){t.blockedOn===e&&(t.blockedOn=null,BS||(BS=!0,Ci.unstable_scheduleCallback(Ci.unstable_NormalPriority,TH)))}function uf(t){function e(a){return lf(a,t)}if(0<R1.length){lf(R1[0],t);for(var n=1;n<R1.length;n++){var r=R1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ll!==null&&lf(Ll,t),Fl!==null&&lf(Fl,t),Bl!==null&&lf(Bl,t),af.forEach(e),of.forEach(e),n=0;n<zl.length;n++)r=zl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zl.length&&(n=zl[0],n.blockedOn===null);)V$(n),n.blockedOn===null&&zl.shift()}var Fd=Ls.ReactCurrentBatchConfig,O1=!0;function _H(t,e,n,r){var a=gn,i=Fd.transition;Fd.transition=null;try{gn=1,zS(t,e,n,r)}finally{gn=a,Fd.transition=i}}function RH(t,e,n,r){var a=gn,i=Fd.transition;Fd.transition=null;try{gn=4,zS(t,e,n,r)}finally{gn=a,Fd.transition=i}}function zS(t,e,n,r){if(O1){var a=jS(t,e,n,r);if(a===null)aC(t,e,r,M1,n),j$(t,r);else if(NH(a,t,e,n,r))r.stopPropagation();else if(j$(t,r),e&4&&-1<EH.indexOf(t)){for(;a!==null;){var i=wf(a);if(i!==null&&L$(i),i=jS(t,e,n,r),i===null&&aC(t,e,r,M1,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else aC(t,e,r,null,n)}}var M1=null;function jS(t,e,n,r){if(M1=null,t=_S(r),t=tc(t),t!==null)if(e=ec(t),e===null)t=null;else if(n=e.tag,n===13){if(t=N$(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return M1=t,null}function G$(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yH()){case PS:return 1;case M$:return 4;case I1:case bH:return 16;case P$:return 536870912;default:return 16}default:return 16}}var jl=null,VS=null,P1=null;function W$(){if(P1)return P1;var t,e=VS,n=e.length,r,a="value"in jl?jl.value:jl.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===a[i-r];r++);return P1=a.slice(t,1<r?1-r:void 0)}function A1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function D1(){return!0}function H$(){return!1}function Ii(t){function e(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?D1:H$,this.isPropagationStopped=H$,this}return Zn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=D1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=D1)},persist:function(){},isPersistent:D1}),e}var Bd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},US=Ii(Bd),cf=Zn({},Bd,{view:0,detail:0}),$H=Ii(cf),GS,WS,df,L1=Zn({},cf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==df&&(df&&t.type==="mousemove"?(GS=t.screenX-df.screenX,WS=t.screenY-df.screenY):WS=GS=0,df=t),GS)},movementY:function(t){return"movementY"in t?t.movementY:WS}}),q$=Ii(L1),OH=Zn({},L1,{dataTransfer:0}),MH=Ii(OH),PH=Zn({},cf,{relatedTarget:0}),HS=Ii(PH),AH=Zn({},Bd,{animationName:0,elapsedTime:0,pseudoElement:0}),DH=Ii(AH),LH=Zn({},Bd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FH=Ii(LH),BH=Zn({},Bd,{data:0}),K$=Ii(BH),zH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UH(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VH[t])?!!e[t]:!1}function qS(){return UH}var GH=Zn({},cf,{key:function(t){if(t.key){var e=zH[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=A1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jH[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qS,charCode:function(t){return t.type==="keypress"?A1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?A1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WH=Ii(GH),HH=Zn({},L1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X$=Ii(HH),qH=Zn({},cf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qS}),KH=Ii(qH),XH=Zn({},Bd,{propertyName:0,elapsedTime:0,pseudoElement:0}),YH=Ii(XH),QH=Zn({},L1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZH=Ii(QH),JH=[9,13,27,32],KS=Ds&&"CompositionEvent"in window,pf=null;Ds&&"documentMode"in document&&(pf=document.documentMode);var eq=Ds&&"TextEvent"in window&&!pf,Y$=Ds&&(!KS||pf&&8<pf&&11>=pf),Q$=" ",Z$=!1;function J$(t,e){switch(t){case"keyup":return JH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eO(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zd=!1;function tq(t,e){switch(t){case"compositionend":return eO(e);case"keypress":return e.which!==32?null:(Z$=!0,Q$);case"textInput":return t=e.data,t===Q$&&Z$?null:t;default:return null}}function nq(t,e){if(zd)return t==="compositionend"||!KS&&J$(t,e)?(t=W$(),P1=VS=jl=null,zd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Y$&&e.locale!=="ko"?null:e.data;default:return null}}var rq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rq[t.type]:e==="textarea"}function nO(t,e,n,r){k$(r),e=V1(e,"onChange"),0<e.length&&(n=new US("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hf=null,ff=null;function aq(t){xO(t,0)}function F1(t){var e=Wd(t);if(c$(e))return t}function iq(t,e){if(t==="change")return e}var rO=!1;if(Ds){var XS;if(Ds){var YS="oninput"in document;if(!YS){var aO=document.createElement("div");aO.setAttribute("oninput","return;"),YS=typeof aO.oninput=="function"}XS=YS}else XS=!1;rO=XS&&(!document.documentMode||9<document.documentMode)}function iO(){hf&&(hf.detachEvent("onpropertychange",oO),ff=hf=null)}function oO(t){if(t.propertyName==="value"&&F1(ff)){var e=[];nO(e,ff,t,_S(t)),E$(aq,e)}}function oq(t,e,n){t==="focusin"?(iO(),hf=e,ff=n,hf.attachEvent("onpropertychange",oO)):t==="focusout"&&iO()}function sq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return F1(ff)}function lq(t,e){if(t==="click")return F1(e)}function uq(t,e){if(t==="input"||t==="change")return F1(e)}function cq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var No=typeof Object.is=="function"?Object.is:cq;function mf(t,e){if(No(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!sS.call(e,a)||!No(t[a],e[a]))return!1}return!0}function sO(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lO(t,e){var n=sO(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sO(n)}}function uO(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uO(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cO(){for(var t=window,e=w1();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=w1(t.document)}return e}function QS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dq(t){var e=cO(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uO(n.ownerDocument.documentElement,n)){if(r!==null&&QS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!t.extend&&i>r&&(a=r,r=i,i=a),a=lO(n,i);var o=lO(n,r);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pq=Ds&&"documentMode"in document&&11>=document.documentMode,jd=null,ZS=null,gf=null,JS=!1;function dO(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;JS||jd==null||jd!==w1(r)||(r=jd,"selectionStart"in r&&QS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gf&&mf(gf,r)||(gf=r,r=V1(ZS,"onSelect"),0<r.length&&(e=new US("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jd)))}function B1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Vd={animationend:B1("Animation","AnimationEnd"),animationiteration:B1("Animation","AnimationIteration"),animationstart:B1("Animation","AnimationStart"),transitionend:B1("Transition","TransitionEnd")},eC={},pO={};Ds&&(pO=document.createElement("div").style,"AnimationEvent"in window||(delete Vd.animationend.animation,delete Vd.animationiteration.animation,delete Vd.animationstart.animation),"TransitionEvent"in window||delete Vd.transitionend.transition);function z1(t){if(eC[t])return eC[t];if(!Vd[t])return t;var e=Vd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pO)return eC[t]=e[n];return t}var hO=z1("animationend"),fO=z1("animationiteration"),mO=z1("animationstart"),gO=z1("transitionend"),yO=new Map,bO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vl(t,e){yO.set(t,e),Ju(e,[t])}for(var tC=0;tC<bO.length;tC++){var nC=bO[tC],hq=nC.toLowerCase(),fq=nC[0].toUpperCase()+nC.slice(1);Vl(hq,"on"+fq)}Vl(hO,"onAnimationEnd"),Vl(fO,"onAnimationIteration"),Vl(mO,"onAnimationStart"),Vl("dblclick","onDoubleClick"),Vl("focusin","onFocus"),Vl("focusout","onBlur"),Vl(gO,"onTransitionEnd"),Od("onMouseEnter",["mouseout","mouseover"]),Od("onMouseLeave",["mouseout","mouseover"]),Od("onPointerEnter",["pointerout","pointerover"]),Od("onPointerLeave",["pointerout","pointerover"]),Ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ju("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mq=new Set("cancel close invalid load scroll toggle".split(" ").concat(yf));function vO(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hH(r,e,void 0,t),t.currentTarget=null}function xO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;vO(a,s,u),i=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;vO(a,s,u),i=l}}}if(C1)throw t=MS,C1=!1,MS=null,t}function Ln(t,e){var n=e[cC];n===void 0&&(n=e[cC]=new Set);var r=t+"__bubble";n.has(r)||(wO(e,t,2,!1),n.add(r))}function rC(t,e,n){var r=0;e&&(r|=4),wO(n,t,r,e)}var j1="_reactListening"+Math.random().toString(36).slice(2);function bf(t){if(!t[j1]){t[j1]=!0,n$.forEach(function(n){n!=="selectionchange"&&(mq.has(n)||rC(n,!1,t),rC(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[j1]||(e[j1]=!0,rC("selectionchange",!1,e))}}function wO(t,e,n,r){switch(G$(e)){case 1:var a=_H;break;case 4:a=RH;break;default:a=zS}n=a.bind(null,e,n,t),a=void 0,!OS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function aC(t,e,n,r,a){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=tc(s),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}s=s.parentNode}}r=r.return}E$(function(){var u=i,c=_S(n),d=[];e:{var p=yO.get(t);if(p!==void 0){var f=US,g=t;switch(t){case"keypress":if(A1(n)===0)break e;case"keydown":case"keyup":f=WH;break;case"focusin":g="focus",f=HS;break;case"focusout":g="blur",f=HS;break;case"beforeblur":case"afterblur":f=HS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=q$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=MH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=KH;break;case hO:case fO:case mO:f=DH;break;case gO:f=YH;break;case"scroll":f=$H;break;case"wheel":f=ZH;break;case"copy":case"cut":case"paste":f=FH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=X$}var y=(e&4)!==0,v=!y&&t==="scroll",b=y?p!==null?p+"Capture":null:p;y=[];for(var x=u,w;x!==null;){w=x;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,b!==null&&(S=Jh(x,b),S!=null&&y.push(vf(x,S,w)))),v)break;x=x.return}0<y.length&&(p=new f(p,g,null,n,c),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==TS&&(g=n.relatedTarget||n.fromElement)&&(tc(g)||g[Fs]))break e;if((f||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=u,g=g?tc(g):null,g!==null&&(v=ec(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(y=q$,S="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=X$,S="onPointerLeave",b="onPointerEnter",x="pointer"),v=f==null?p:Wd(f),w=g==null?p:Wd(g),p=new y(S,x+"leave",f,n,c),p.target=v,p.relatedTarget=w,S=null,tc(c)===u&&(y=new y(b,x+"enter",g,n,c),y.target=w,y.relatedTarget=v,S=y),v=S,f&&g)t:{for(y=f,b=g,x=0,w=y;w;w=Ud(w))x++;for(w=0,S=b;S;S=Ud(S))w++;for(;0<x-w;)y=Ud(y),x--;for(;0<w-x;)b=Ud(b),w--;for(;x--;){if(y===b||b!==null&&y===b.alternate)break t;y=Ud(y),b=Ud(b)}y=null}else y=null;f!==null&&kO(d,p,f,y,!1),g!==null&&v!==null&&kO(d,v,g,y,!0)}}e:{if(p=u?Wd(u):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var C=iq;else if(tO(p))if(rO)C=uq;else{C=sq;var I=oq}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=lq);if(C&&(C=C(t,u))){nO(d,C,n,c);break e}I&&I(t,p,u),t==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&SS(p,"number",p.value)}switch(I=u?Wd(u):window,t){case"focusin":(tO(I)||I.contentEditable==="true")&&(jd=I,ZS=u,gf=null);break;case"focusout":gf=ZS=jd=null;break;case"mousedown":JS=!0;break;case"contextmenu":case"mouseup":case"dragend":JS=!1,dO(d,n,c);break;case"selectionchange":if(pq)break;case"keydown":case"keyup":dO(d,n,c)}var _;if(KS)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else zd?J$(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Y$&&n.locale!=="ko"&&(zd||T!=="onCompositionStart"?T==="onCompositionEnd"&&zd&&(_=W$()):(jl=c,VS="value"in jl?jl.value:jl.textContent,zd=!0)),I=V1(u,T),0<I.length&&(T=new K$(T,t,null,n,c),d.push({event:T,listeners:I}),_?T.data=_:(_=eO(n),_!==null&&(T.data=_)))),(_=eq?tq(t,n):nq(t,n))&&(u=V1(u,"onBeforeInput"),0<u.length&&(c=new K$("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=_))}xO(d,e)})}function vf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function V1(t,e){for(var n=e+"Capture",r=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Jh(t,n),i!=null&&r.unshift(vf(t,i,a)),i=Jh(t,e),i!=null&&r.push(vf(t,i,a))),t=t.return}return r}function Ud(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kO(t,e,n,r,a){for(var i=e._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,a?(l=Jh(n,i),l!=null&&o.unshift(vf(n,l,s))):a||(l=Jh(n,i),l!=null&&o.push(vf(n,l,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gq=/\r\n?/g,yq=/\u0000|\uFFFD/g;function SO(t){return(typeof t=="string"?t:""+t).replace(gq,`
`).replace(yq,"")}function U1(t,e,n){if(e=SO(e),SO(t)!==e&&n)throw Error(Ne(425))}function G1(){}var iC=null,oC=null;function sC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lC=typeof setTimeout=="function"?setTimeout:void 0,bq=typeof clearTimeout=="function"?clearTimeout:void 0,CO=typeof Promise=="function"?Promise:void 0,vq=typeof queueMicrotask=="function"?queueMicrotask:typeof CO<"u"?function(t){return CO.resolve(null).then(t).catch(xq)}:lC;function xq(t){setTimeout(function(){throw t})}function uC(t,e){var n=e,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),uf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);uf(e)}function Ul(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function IO(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gd=Math.random().toString(36).slice(2),as="__reactFiber$"+Gd,xf="__reactProps$"+Gd,Fs="__reactContainer$"+Gd,cC="__reactEvents$"+Gd,wq="__reactListeners$"+Gd,kq="__reactHandles$"+Gd;function tc(t){var e=t[as];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fs]||n[as]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=IO(t);t!==null;){if(n=t[as])return n;t=IO(t)}return e}t=n,n=t.parentNode}return null}function wf(t){return t=t[as]||t[Fs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ne(33))}function W1(t){return t[xf]||null}var dC=[],Hd=-1;function Gl(t){return{current:t}}function Fn(t){0>Hd||(t.current=dC[Hd],dC[Hd]=null,Hd--)}function $n(t,e){Hd++,dC[Hd]=t.current,t.current=e}var Wl={},Ia=Gl(Wl),ai=Gl(!1),nc=Wl;function qd(t,e){var n=t.type.contextTypes;if(!n)return Wl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function ii(t){return t=t.childContextTypes,t!=null}function H1(){Fn(ai),Fn(Ia)}function EO(t,e,n){if(Ia.current!==Wl)throw Error(Ne(168));$n(Ia,e),$n(ai,n)}function NO(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in e))throw Error(Ne(108,oH(t)||"Unknown",a));return Zn({},n,r)}function q1(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wl,nc=Ia.current,$n(Ia,t),$n(ai,ai.current),!0}function TO(t,e,n){var r=t.stateNode;if(!r)throw Error(Ne(169));n?(t=NO(t,e,nc),r.__reactInternalMemoizedMergedChildContext=t,Fn(ai),Fn(Ia),$n(Ia,t)):Fn(ai),$n(ai,n)}var Bs=null,K1=!1,pC=!1;function _O(t){Bs===null?Bs=[t]:Bs.push(t)}function Sq(t){K1=!0,_O(t)}function Hl(){if(!pC&&Bs!==null){pC=!0;var t=0,e=gn;try{var n=Bs;for(gn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bs=null,K1=!1}catch(a){throw Bs!==null&&(Bs=Bs.slice(t+1)),$$(PS,Hl),a}finally{gn=e,pC=!1}}return null}var Kd=[],Xd=0,X1=null,Y1=0,qi=[],Ki=0,rc=null,zs=1,js="";function ac(t,e){Kd[Xd++]=Y1,Kd[Xd++]=X1,X1=t,Y1=e}function RO(t,e,n){qi[Ki++]=zs,qi[Ki++]=js,qi[Ki++]=rc,rc=t;var r=zs;t=js;var a=32-Eo(r)-1;r&=~(1<<a),n+=1;var i=32-Eo(e)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,zs=1<<32-Eo(e)+a|n<<a|r,js=i+t}else zs=1<<i|n<<a|r,js=t}function hC(t){t.return!==null&&(ac(t,1),RO(t,1,0))}function fC(t){for(;t===X1;)X1=Kd[--Xd],Kd[Xd]=null,Y1=Kd[--Xd],Kd[Xd]=null;for(;t===rc;)rc=qi[--Ki],qi[Ki]=null,js=qi[--Ki],qi[Ki]=null,zs=qi[--Ki],qi[Ki]=null}var Ei=null,Ni=null,Gn=!1,To=null;function $O(t,e){var n=Zi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function OO(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ei=t,Ni=Ul(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ei=t,Ni=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=rc!==null?{id:zs,overflow:js}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ei=t,Ni=null,!0):!1;default:return!1}}function mC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gC(t){if(Gn){var e=Ni;if(e){var n=e;if(!OO(t,e)){if(mC(t))throw Error(Ne(418));e=Ul(n.nextSibling);var r=Ei;e&&OO(t,e)?$O(r,n):(t.flags=t.flags&-4097|2,Gn=!1,Ei=t)}}else{if(mC(t))throw Error(Ne(418));t.flags=t.flags&-4097|2,Gn=!1,Ei=t}}}function MO(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ei=t}function Q1(t){if(t!==Ei)return!1;if(!Gn)return MO(t),Gn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sC(t.type,t.memoizedProps)),e&&(e=Ni)){if(mC(t))throw PO(),Error(Ne(418));for(;e;)$O(t,e),e=Ul(e.nextSibling)}if(MO(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ni=Ul(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ni=null}}else Ni=Ei?Ul(t.stateNode.nextSibling):null;return!0}function PO(){for(var t=Ni;t;)t=Ul(t.nextSibling)}function Yd(){Ni=Ei=null,Gn=!1}function yC(t){To===null?To=[t]:To.push(t)}var Cq=Ls.ReactCurrentBatchConfig;function _o(t,e){if(t&&t.defaultProps){e=Zn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Z1=Gl(null),J1=null,Qd=null,bC=null;function vC(){bC=Qd=J1=null}function xC(t){var e=Z1.current;Fn(Z1),t._currentValue=e}function wC(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zd(t,e){J1=t,bC=Qd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(oi=!0),t.firstContext=null)}function Xi(t){var e=t._currentValue;if(bC!==t)if(t={context:t,memoizedValue:e,next:null},Qd===null){if(J1===null)throw Error(Ne(308));Qd=t,J1.dependencies={lanes:0,firstContext:t}}else Qd=Qd.next=t;return e}var ic=null;function kC(t){ic===null?ic=[t]:ic.push(t)}function AO(t,e,n,r){var a=e.interleaved;return a===null?(n.next=n,kC(e)):(n.next=a.next,a.next=n),e.interleaved=n,Vs(t,r)}function Vs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ql=!1;function SC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Us(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Kl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Zt&2){var a=r.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),r.pending=e,Vs(t,n)}return a=r.interleaved,a===null?(e.next=e,kC(r)):(e.next=a.next,a.next=e),r.interleaved=e,Vs(t,n)}function ey(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,LS(t,n)}}function LO(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ty(t,e,n,r){var a=t.updateQueue;ql=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;o=0,c=u=l=null,s=i;do{var p=s.lane,f=s.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=t,y=s;switch(p=e,f=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(f,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,p=typeof g=="function"?g.call(f,d,p):g,p==null)break e;d=Zn({},d,p);break e;case 2:ql=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,p=a.effects,p===null?a.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=p;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;p=s,s=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(c===null&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);lc|=o,t.lanes=o,t.memoizedState=d}}function FO(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Ne(191,a));a.call(r)}}}var BO=new t$.Component().refs;function CC(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Zn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ny={isMounted:function(t){return(t=t._reactInternals)?ec(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ka(),a=Zl(t),i=Us(r,a);i.payload=e,n!=null&&(i.callback=n),e=Kl(t,i,a),e!==null&&(Oo(e,t,a,r),ey(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ka(),a=Zl(t),i=Us(r,a);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Kl(t,i,a),e!==null&&(Oo(e,t,a,r),ey(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ka(),r=Zl(t),a=Us(n,r);a.tag=2,e!=null&&(a.callback=e),e=Kl(t,a,r),e!==null&&(Oo(e,t,r,n),ey(e,t,r))}};function zO(t,e,n,r,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!mf(n,r)||!mf(a,i):!0}function jO(t,e,n){var r=!1,a=Wl,i=e.contextType;return typeof i=="object"&&i!==null?i=Xi(i):(a=ii(e)?nc:Ia.current,r=e.contextTypes,i=(r=r!=null)?qd(t,a):Wl),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ny,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function VO(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ny.enqueueReplaceState(e,e.state,null)}function IC(t,e,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs=BO,SC(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=Xi(i):(i=ii(e)?nc:Ia.current,a.context=qd(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(CC(t,e,i,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&ny.enqueueReplaceState(a,a.state,null),ty(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function kf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ne(309));var r=n.stateNode}if(!r)throw Error(Ne(147,t));var a=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var s=a.refs;s===BO&&(s=a.refs={}),o===null?delete s[i]:s[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ne(284));if(!n._owner)throw Error(Ne(290,t))}return t}function ry(t,e){throw t=Object.prototype.toString.call(e),Error(Ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function UO(t){var e=t._init;return e(t._payload)}function GO(t){function e(b,x){if(t){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function a(b,x){return b=eu(b,x),b.index=0,b.sibling=null,b}function i(b,x,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function s(b,x,w,S){return x===null||x.tag!==6?(x=sI(w,b.mode,S),x.return=b,x):(x=a(x,w),x.return=b,x)}function l(b,x,w,S){var C=w.type;return C===Pd?c(b,x,w.props.children,S,w.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Al&&UO(C)===x.type)?(S=a(x,w.props),S.ref=kf(b,x,w),S.return=b,S):(S=ky(w.type,w.key,w.props,null,b.mode,S),S.ref=kf(b,x,w),S.return=b,S)}function u(b,x,w,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=lI(w,b.mode,S),x.return=b,x):(x=a(x,w.children||[]),x.return=b,x)}function c(b,x,w,S,C){return x===null||x.tag!==7?(x=pc(w,b.mode,S,C),x.return=b,x):(x=a(x,w),x.return=b,x)}function d(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=sI(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case v1:return w=ky(x.type,x.key,x.props,null,b.mode,w),w.ref=kf(b,null,x),w.return=b,w;case Md:return x=lI(x,b.mode,w),x.return=b,x;case Al:var S=x._init;return d(b,S(x._payload),w)}if(Yh(x)||Kh(x))return x=pc(x,b.mode,w,null),x.return=b,x;ry(b,x)}return null}function p(b,x,w,S){var C=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:s(b,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case v1:return w.key===C?l(b,x,w,S):null;case Md:return w.key===C?u(b,x,w,S):null;case Al:return C=w._init,p(b,x,C(w._payload),S)}if(Yh(w)||Kh(w))return C!==null?null:c(b,x,w,S,null);ry(b,w)}return null}function f(b,x,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(w)||null,s(x,b,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case v1:return b=b.get(S.key===null?w:S.key)||null,l(x,b,S,C);case Md:return b=b.get(S.key===null?w:S.key)||null,u(x,b,S,C);case Al:var I=S._init;return f(b,x,w,I(S._payload),C)}if(Yh(S)||Kh(S))return b=b.get(w)||null,c(x,b,S,C,null);ry(x,S)}return null}function g(b,x,w,S){for(var C=null,I=null,_=x,T=x=0,M=null;_!==null&&T<w.length;T++){_.index>T?(M=_,_=null):M=_.sibling;var P=p(b,_,w[T],S);if(P===null){_===null&&(_=M);break}t&&_&&P.alternate===null&&e(b,_),x=i(P,x,T),I===null?C=P:I.sibling=P,I=P,_=M}if(T===w.length)return n(b,_),Gn&&ac(b,T),C;if(_===null){for(;T<w.length;T++)_=d(b,w[T],S),_!==null&&(x=i(_,x,T),I===null?C=_:I.sibling=_,I=_);return Gn&&ac(b,T),C}for(_=r(b,_);T<w.length;T++)M=f(_,b,T,w[T],S),M!==null&&(t&&M.alternate!==null&&_.delete(M.key===null?T:M.key),x=i(M,x,T),I===null?C=M:I.sibling=M,I=M);return t&&_.forEach(function(L){return e(b,L)}),Gn&&ac(b,T),C}function y(b,x,w,S){var C=Kh(w);if(typeof C!="function")throw Error(Ne(150));if(w=C.call(w),w==null)throw Error(Ne(151));for(var I=C=null,_=x,T=x=0,M=null,P=w.next();_!==null&&!P.done;T++,P=w.next()){_.index>T?(M=_,_=null):M=_.sibling;var L=p(b,_,P.value,S);if(L===null){_===null&&(_=M);break}t&&_&&L.alternate===null&&e(b,_),x=i(L,x,T),I===null?C=L:I.sibling=L,I=L,_=M}if(P.done)return n(b,_),Gn&&ac(b,T),C;if(_===null){for(;!P.done;T++,P=w.next())P=d(b,P.value,S),P!==null&&(x=i(P,x,T),I===null?C=P:I.sibling=P,I=P);return Gn&&ac(b,T),C}for(_=r(b,_);!P.done;T++,P=w.next())P=f(_,b,T,P.value,S),P!==null&&(t&&P.alternate!==null&&_.delete(P.key===null?T:P.key),x=i(P,x,T),I===null?C=P:I.sibling=P,I=P);return t&&_.forEach(function(j){return e(b,j)}),Gn&&ac(b,T),C}function v(b,x,w,S){if(typeof w=="object"&&w!==null&&w.type===Pd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case v1:e:{for(var C=w.key,I=x;I!==null;){if(I.key===C){if(C=w.type,C===Pd){if(I.tag===7){n(b,I.sibling),x=a(I,w.props.children),x.return=b,b=x;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Al&&UO(C)===I.type){n(b,I.sibling),x=a(I,w.props),x.ref=kf(b,I,w),x.return=b,b=x;break e}n(b,I);break}else e(b,I);I=I.sibling}w.type===Pd?(x=pc(w.props.children,b.mode,S,w.key),x.return=b,b=x):(S=ky(w.type,w.key,w.props,null,b.mode,S),S.ref=kf(b,x,w),S.return=b,b=S)}return o(b);case Md:e:{for(I=w.key;x!==null;){if(x.key===I)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(b,x.sibling),x=a(x,w.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=lI(w,b.mode,S),x.return=b,b=x}return o(b);case Al:return I=w._init,v(b,x,I(w._payload),S)}if(Yh(w))return g(b,x,w,S);if(Kh(w))return y(b,x,w,S);ry(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(b,x.sibling),x=a(x,w),x.return=b,b=x):(n(b,x),x=sI(w,b.mode,S),x.return=b,b=x),o(b)):n(b,x)}return v}var Jd=GO(!0),WO=GO(!1),Sf={},is=Gl(Sf),Cf=Gl(Sf),If=Gl(Sf);function oc(t){if(t===Sf)throw Error(Ne(174));return t}function EC(t,e){switch($n(If,e),$n(Cf,t),$n(is,Sf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:IS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=IS(e,t)}Fn(is),$n(is,e)}function ep(){Fn(is),Fn(Cf),Fn(If)}function HO(t){oc(If.current);var e=oc(is.current),n=IS(e,t.type);e!==n&&($n(Cf,t),$n(is,n))}function NC(t){Cf.current===t&&(Fn(is),Fn(Cf))}var Jn=Gl(0);function ay(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var TC=[];function _C(){for(var t=0;t<TC.length;t++)TC[t]._workInProgressVersionPrimary=null;TC.length=0}var iy=Ls.ReactCurrentDispatcher,RC=Ls.ReactCurrentBatchConfig,sc=0,er=null,Mr=null,Hr=null,oy=!1,Ef=!1,Nf=0,Iq=0;function Ea(){throw Error(Ne(321))}function $C(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!No(t[n],e[n]))return!1;return!0}function OC(t,e,n,r,a,i){if(sc=i,er=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,iy.current=t===null||t.memoizedState===null?_q:Rq,t=n(r,a),Ef){i=0;do{if(Ef=!1,Nf=0,25<=i)throw Error(Ne(301));i+=1,Hr=Mr=null,e.updateQueue=null,iy.current=$q,t=n(r,a)}while(Ef)}if(iy.current=uy,e=Mr!==null&&Mr.next!==null,sc=0,Hr=Mr=er=null,oy=!1,e)throw Error(Ne(300));return t}function MC(){var t=Nf!==0;return Nf=0,t}function os(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hr===null?er.memoizedState=Hr=t:Hr=Hr.next=t,Hr}function Yi(){if(Mr===null){var t=er.alternate;t=t!==null?t.memoizedState:null}else t=Mr.next;var e=Hr===null?er.memoizedState:Hr.next;if(e!==null)Hr=e,Mr=t;else{if(t===null)throw Error(Ne(310));Mr=t,t={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},Hr===null?er.memoizedState=Hr=t:Hr=Hr.next=t}return Hr}function Tf(t,e){return typeof e=="function"?e(t):e}function PC(t){var e=Yi(),n=e.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=t;var r=Mr,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var s=o=null,l=null,u=i;do{var c=u.lane;if((sc&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=r):l=l.next=d,er.lanes|=c,lc|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=s,No(r,e.memoizedState)||(oi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do i=a.lane,er.lanes|=i,lc|=i,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function AC(t){var e=Yi(),n=e.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);No(i,e.memoizedState)||(oi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function qO(){}function KO(t,e){var n=er,r=Yi(),a=e(),i=!No(r.memoizedState,a);if(i&&(r.memoizedState=a,oi=!0),r=r.queue,DC(QO.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Hr!==null&&Hr.memoizedState.tag&1){if(n.flags|=2048,_f(9,YO.bind(null,n,r,a,e),void 0,null),qr===null)throw Error(Ne(349));sc&30||XO(n,e,a)}return a}function XO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=er.updateQueue,e===null?(e={lastEffect:null,stores:null},er.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function YO(t,e,n,r){e.value=n,e.getSnapshot=r,ZO(e)&&JO(t)}function QO(t,e,n){return n(function(){ZO(e)&&JO(t)})}function ZO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!No(t,n)}catch{return!0}}function JO(t){var e=Vs(t,1);e!==null&&Oo(e,t,1,-1)}function eM(t){var e=os();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tf,lastRenderedState:t},e.queue=t,t=t.dispatch=Tq.bind(null,er,t),[e.memoizedState,t]}function _f(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=er.updateQueue,e===null?(e={lastEffect:null,stores:null},er.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tM(){return Yi().memoizedState}function sy(t,e,n,r){var a=os();er.flags|=t,a.memoizedState=_f(1|e,n,void 0,r===void 0?null:r)}function ly(t,e,n,r){var a=Yi();r=r===void 0?null:r;var i=void 0;if(Mr!==null){var o=Mr.memoizedState;if(i=o.destroy,r!==null&&$C(r,o.deps)){a.memoizedState=_f(e,n,i,r);return}}er.flags|=t,a.memoizedState=_f(1|e,n,i,r)}function nM(t,e){return sy(8390656,8,t,e)}function DC(t,e){return ly(2048,8,t,e)}function rM(t,e){return ly(4,2,t,e)}function aM(t,e){return ly(4,4,t,e)}function iM(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oM(t,e,n){return n=n!=null?n.concat([t]):null,ly(4,4,iM.bind(null,e,t),n)}function LC(){}function sM(t,e){var n=Yi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$C(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lM(t,e){var n=Yi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$C(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function uM(t,e,n){return sc&21?(No(n,e)||(n=A$(),er.lanes|=n,lc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,oi=!0),t.memoizedState=n)}function Eq(t,e){var n=gn;gn=n!==0&&4>n?n:4,t(!0);var r=RC.transition;RC.transition={};try{t(!1),e()}finally{gn=n,RC.transition=r}}function cM(){return Yi().memoizedState}function Nq(t,e,n){var r=Zl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dM(t))pM(e,n);else if(n=AO(t,e,n,r),n!==null){var a=Ka();Oo(n,t,r,a),hM(n,e,r)}}function Tq(t,e,n){var r=Zl(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dM(t))pM(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,No(s,o)){var l=e.interleaved;l===null?(a.next=a,kC(e)):(a.next=l.next,l.next=a),e.interleaved=a;return}}catch{}finally{}n=AO(t,e,a,r),n!==null&&(a=Ka(),Oo(n,t,r,a),hM(n,e,r))}}function dM(t){var e=t.alternate;return t===er||e!==null&&e===er}function pM(t,e){Ef=oy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hM(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,LS(t,n)}}var uy={readContext:Xi,useCallback:Ea,useContext:Ea,useEffect:Ea,useImperativeHandle:Ea,useInsertionEffect:Ea,useLayoutEffect:Ea,useMemo:Ea,useReducer:Ea,useRef:Ea,useState:Ea,useDebugValue:Ea,useDeferredValue:Ea,useTransition:Ea,useMutableSource:Ea,useSyncExternalStore:Ea,useId:Ea,unstable_isNewReconciler:!1},_q={readContext:Xi,useCallback:function(t,e){return os().memoizedState=[t,e===void 0?null:e],t},useContext:Xi,useEffect:nM,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sy(4194308,4,iM.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sy(4194308,4,t,e)},useInsertionEffect:function(t,e){return sy(4,2,t,e)},useMemo:function(t,e){var n=os();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=os();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Nq.bind(null,er,t),[r.memoizedState,t]},useRef:function(t){var e=os();return t={current:t},e.memoizedState=t},useState:eM,useDebugValue:LC,useDeferredValue:function(t){return os().memoizedState=t},useTransition:function(){var t=eM(!1),e=t[0];return t=Eq.bind(null,t[1]),os().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=er,a=os();if(Gn){if(n===void 0)throw Error(Ne(407));n=n()}else{if(n=e(),qr===null)throw Error(Ne(349));sc&30||XO(r,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,nM(QO.bind(null,r,i,t),[t]),r.flags|=2048,_f(9,YO.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=os(),e=qr.identifierPrefix;if(Gn){var n=js,r=zs;n=(r&~(1<<32-Eo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Iq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Rq={readContext:Xi,useCallback:sM,useContext:Xi,useEffect:DC,useImperativeHandle:oM,useInsertionEffect:rM,useLayoutEffect:aM,useMemo:lM,useReducer:PC,useRef:tM,useState:function(){return PC(Tf)},useDebugValue:LC,useDeferredValue:function(t){var e=Yi();return uM(e,Mr.memoizedState,t)},useTransition:function(){var t=PC(Tf)[0],e=Yi().memoizedState;return[t,e]},useMutableSource:qO,useSyncExternalStore:KO,useId:cM,unstable_isNewReconciler:!1},$q={readContext:Xi,useCallback:sM,useContext:Xi,useEffect:DC,useImperativeHandle:oM,useInsertionEffect:rM,useLayoutEffect:aM,useMemo:lM,useReducer:AC,useRef:tM,useState:function(){return AC(Tf)},useDebugValue:LC,useDeferredValue:function(t){var e=Yi();return Mr===null?e.memoizedState=t:uM(e,Mr.memoizedState,t)},useTransition:function(){var t=AC(Tf)[0],e=Yi().memoizedState;return[t,e]},useMutableSource:qO,useSyncExternalStore:KO,useId:cM,unstable_isNewReconciler:!1};function tp(t,e){try{var n="",r=e;do n+=iH(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function FC(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function BC(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Oq=typeof WeakMap=="function"?WeakMap:Map;function fM(t,e,n){n=Us(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gy||(gy=!0,JC=r),BC(t,e)},n}function mM(t,e,n){n=Us(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=e.value;n.payload=function(){return r(a)},n.callback=function(){BC(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){BC(t,e),typeof r!="function"&&(Yl===null?Yl=new Set([this]):Yl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gM(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Oq;var a=new Set;r.set(e,a)}else a=r.get(e),a===void 0&&(a=new Set,r.set(e,a));a.has(n)||(a.add(n),t=Hq.bind(null,t,e,n),e.then(t,t))}function yM(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bM(t,e,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Us(-1,1),e.tag=2,Kl(n,e,1))),n.lanes|=1),t)}var Mq=Ls.ReactCurrentOwner,oi=!1;function qa(t,e,n,r){e.child=t===null?WO(e,null,n,r):Jd(e,t.child,n,r)}function vM(t,e,n,r,a){n=n.render;var i=e.ref;return Zd(e,a),r=OC(t,e,n,r,i,a),n=MC(),t!==null&&!oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Gs(t,e,a)):(Gn&&n&&hC(e),e.flags|=1,qa(t,e,r,a),e.child)}function xM(t,e,n,r,a){if(t===null){var i=n.type;return typeof i=="function"&&!oI(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,wM(t,e,i,r,a)):(t=ky(n.type,null,r,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:mf,n(o,r)&&t.ref===e.ref)return Gs(t,e,a)}return e.flags|=1,t=eu(i,r),t.ref=e.ref,t.return=e,e.child=t}function wM(t,e,n,r,a){if(t!==null){var i=t.memoizedProps;if(mf(i,r)&&t.ref===e.ref)if(oi=!1,e.pendingProps=r=i,(t.lanes&a)!==0)t.flags&131072&&(oi=!0);else return e.lanes=t.lanes,Gs(t,e,a)}return zC(t,e,n,r,a)}function kM(t,e,n){var r=e.pendingProps,a=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$n(rp,Ti),Ti|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$n(rp,Ti),Ti|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$n(rp,Ti),Ti|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,$n(rp,Ti),Ti|=r;return qa(t,e,a,n),e.child}function SM(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zC(t,e,n,r,a){var i=ii(n)?nc:Ia.current;return i=qd(e,i),Zd(e,a),n=OC(t,e,n,r,i,a),r=MC(),t!==null&&!oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Gs(t,e,a)):(Gn&&r&&hC(e),e.flags|=1,qa(t,e,n,a),e.child)}function CM(t,e,n,r,a){if(ii(n)){var i=!0;q1(e)}else i=!1;if(Zd(e,a),e.stateNode===null)dy(t,e),jO(e,n,r),IC(e,n,r,a),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Xi(u):(u=ii(n)?nc:Ia.current,u=qd(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&VO(e,o,r,u),ql=!1;var p=e.memoizedState;o.state=p,ty(e,r,o,a),l=e.memoizedState,s!==r||p!==l||ai.current||ql?(typeof c=="function"&&(CC(e,n,c,r),l=e.memoizedState),(s=ql||zO(e,n,s,r,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,DO(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:_o(e.type,s),o.props=u,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Xi(l):(l=ii(n)?nc:Ia.current,l=qd(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||p!==l)&&VO(e,o,r,l),ql=!1,p=e.memoizedState,o.state=p,ty(e,r,o,a);var g=e.memoizedState;s!==d||p!==g||ai.current||ql?(typeof f=="function"&&(CC(e,n,f,r),g=e.memoizedState),(u=ql||zO(e,n,u,r,p,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return jC(t,e,n,r,i,a)}function jC(t,e,n,r,a,i){SM(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return a&&TO(e,n,!1),Gs(t,e,i);r=e.stateNode,Mq.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Jd(e,t.child,null,i),e.child=Jd(e,null,s,i)):qa(t,e,s,i),e.memoizedState=r.state,a&&TO(e,n,!0),e.child}function IM(t){var e=t.stateNode;e.pendingContext?EO(t,e.pendingContext,e.pendingContext!==e.context):e.context&&EO(t,e.context,!1),EC(t,e.containerInfo)}function EM(t,e,n,r,a){return Yd(),yC(a),e.flags|=256,qa(t,e,n,r),e.child}var VC={dehydrated:null,treeContext:null,retryLane:0};function UC(t){return{baseLanes:t,cachePool:null,transitions:null}}function NM(t,e,n){var r=e.pendingProps,a=Jn.current,i=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(a&2)!==0),s?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),$n(Jn,a&1),t===null)return gC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Sy(o,r,0,null),t=pc(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=UC(n),e.memoizedState=VC,t):GC(e,o));if(a=t.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return Pq(t,e,o,r,s,a,n);if(i){i=r.fallback,o=e.mode,a=t.child,s=a.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==a?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=eu(a,l),r.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=eu(s,i):(i=pc(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?UC(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=VC,r}return i=t.child,t=i.sibling,r=eu(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function GC(t,e){return e=Sy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cy(t,e,n,r){return r!==null&&yC(r),Jd(e,t.child,null,n),t=GC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Pq(t,e,n,r,a,i,o){if(n)return e.flags&256?(e.flags&=-257,r=FC(Error(Ne(422))),cy(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,a=e.mode,r=Sy({mode:"visible",children:r.children},a,0,null),i=pc(i,a,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Jd(e,t.child,null,o),e.child.memoizedState=UC(o),e.memoizedState=VC,i);if(!(e.mode&1))return cy(t,e,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(Ne(419)),r=FC(i,r,void 0),cy(t,e,o,r)}if(s=(o&t.childLanes)!==0,oi||s){if(r=qr,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Vs(t,a),Oo(r,t,a,-1))}return iI(),r=FC(Error(Ne(421))),cy(t,e,o,r)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=qq.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Ni=Ul(a.nextSibling),Ei=e,Gn=!0,To=null,t!==null&&(qi[Ki++]=zs,qi[Ki++]=js,qi[Ki++]=rc,zs=t.id,js=t.overflow,rc=e),e=GC(e,r.children),e.flags|=4096,e)}function TM(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wC(t.return,e,n)}function WC(t,e,n,r,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function _M(t,e,n){var r=e.pendingProps,a=r.revealOrder,i=r.tail;if(qa(t,e,r.children,n),r=Jn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&TM(t,n,e);else if(t.tag===19)TM(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($n(Jn,r),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&ay(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),WC(e,!1,a,n,i);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&ay(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}WC(e,!0,n,null,i);break;case"together":WC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),lc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ne(153));if(e.child!==null){for(t=e.child,n=eu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=eu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Aq(t,e,n){switch(e.tag){case 3:IM(e),Yd();break;case 5:HO(e);break;case 1:ii(e.type)&&q1(e);break;case 4:EC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,a=e.memoizedProps.value;$n(Z1,r._currentValue),r._currentValue=a;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($n(Jn,Jn.current&1),e.flags|=128,null):n&e.child.childLanes?NM(t,e,n):($n(Jn,Jn.current&1),t=Gs(t,e,n),t!==null?t.sibling:null);$n(Jn,Jn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _M(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),$n(Jn,Jn.current),r)break;return null;case 22:case 23:return e.lanes=0,kM(t,e,n)}return Gs(t,e,n)}var RM,HC,$M,OM;RM=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},HC=function(){},$M=function(t,e,n,r){var a=t.memoizedProps;if(a!==r){t=e.stateNode,oc(is.current);var i=null;switch(n){case"input":a=wS(t,a),r=wS(t,r),i=[];break;case"select":a=Zn({},a,{value:void 0}),r=Zn({},r,{value:void 0}),i=[];break;case"textarea":a=CS(t,a),r=CS(t,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=G1)}ES(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(s=a?.[u],r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ln("scroll",t),i||s===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}},OM=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rf(t,e){if(!Gn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Na(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Dq(t,e,n){var r=e.pendingProps;switch(fC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Na(e),null;case 1:return ii(e.type)&&H1(),Na(e),null;case 3:return r=e.stateNode,ep(),Fn(ai),Fn(Ia),_C(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Q1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,To!==null&&(nI(To),To=null))),HC(t,e),Na(e),null;case 5:NC(e);var a=oc(If.current);if(n=e.type,t!==null&&e.stateNode!=null)$M(t,e,n,r,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ne(166));return Na(e),null}if(t=oc(is.current),Q1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[as]=e,r[xf]=i,t=(e.mode&1)!==0,n){case"dialog":Ln("cancel",r),Ln("close",r);break;case"iframe":case"object":case"embed":Ln("load",r);break;case"video":case"audio":for(a=0;a<yf.length;a++)Ln(yf[a],r);break;case"source":Ln("error",r);break;case"img":case"image":case"link":Ln("error",r),Ln("load",r);break;case"details":Ln("toggle",r);break;case"input":d$(r,i),Ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ln("invalid",r);break;case"textarea":f$(r,i),Ln("invalid",r)}ES(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&U1(r.textContent,s,t),a=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&U1(r.textContent,s,t),a=["children",""+s]):qh.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Ln("scroll",r)}switch(n){case"input":x1(r),h$(r,i,!0);break;case"textarea":x1(r),g$(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=G1)}r=a,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=y$(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[as]=e,t[xf]=r,RM(t,e,!1,!1),e.stateNode=t;e:{switch(o=NS(n,r),n){case"dialog":Ln("cancel",t),Ln("close",t),a=r;break;case"iframe":case"object":case"embed":Ln("load",t),a=r;break;case"video":case"audio":for(a=0;a<yf.length;a++)Ln(yf[a],t);a=r;break;case"source":Ln("error",t),a=r;break;case"img":case"image":case"link":Ln("error",t),Ln("load",t),a=r;break;case"details":Ln("toggle",t),a=r;break;case"input":d$(t,r),a=wS(t,r),Ln("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=Zn({},r,{value:void 0}),Ln("invalid",t);break;case"textarea":f$(t,r),a=CS(t,r),Ln("invalid",t);break;default:a=r}ES(n,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?x$(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&b$(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Qh(t,l):typeof l=="number"&&Qh(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qh.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ln("scroll",t):l!=null&&cS(t,i,l,o))}switch(n){case"input":x1(t),h$(t,r,!1);break;case"textarea":x1(t),g$(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Dl(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ad(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ad(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=G1)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Na(e),null;case 6:if(t&&e.stateNode!=null)OM(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ne(166));if(n=oc(If.current),oc(is.current),Q1(e)){if(r=e.stateNode,n=e.memoizedProps,r[as]=e,(i=r.nodeValue!==n)&&(t=Ei,t!==null))switch(t.tag){case 3:U1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&U1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[as]=e,e.stateNode=r}return Na(e),null;case 13:if(Fn(Jn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Gn&&Ni!==null&&e.mode&1&&!(e.flags&128))PO(),Yd(),e.flags|=98560,i=!1;else if(i=Q1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ne(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ne(317));i[as]=e}else Yd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Na(e),i=!1}else To!==null&&(nI(To),To=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Jn.current&1?Pr===0&&(Pr=3):iI())),e.updateQueue!==null&&(e.flags|=4),Na(e),null);case 4:return ep(),HC(t,e),t===null&&bf(e.stateNode.containerInfo),Na(e),null;case 10:return xC(e.type._context),Na(e),null;case 17:return ii(e.type)&&H1(),Na(e),null;case 19:if(Fn(Jn),i=e.memoizedState,i===null)return Na(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Rf(i,!1);else{if(Pr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ay(t),o!==null){for(e.flags|=128,Rf(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $n(Jn,Jn.current&1|2),e.child}t=t.sibling}i.tail!==null&&mr()>ap&&(e.flags|=128,r=!0,Rf(i,!1),e.lanes=4194304)}else{if(!r)if(t=ay(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Gn)return Na(e),null}else 2*mr()-i.renderingStartTime>ap&&n!==1073741824&&(e.flags|=128,r=!0,Rf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mr(),e.sibling=null,n=Jn.current,$n(Jn,r?n&1|2:n&1),e):(Na(e),null);case 22:case 23:return aI(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ti&1073741824&&(Na(e),e.subtreeFlags&6&&(e.flags|=8192)):Na(e),null;case 24:return null;case 25:return null}throw Error(Ne(156,e.tag))}function Lq(t,e){switch(fC(e),e.tag){case 1:return ii(e.type)&&H1(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ep(),Fn(ai),Fn(Ia),_C(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return NC(e),null;case 13:if(Fn(Jn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ne(340));Yd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fn(Jn),null;case 4:return ep(),null;case 10:return xC(e.type._context),null;case 22:case 23:return aI(),null;case 24:return null;default:return null}}var py=!1,Ta=!1,Fq=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function np(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){or(t,e,r)}else n.current=null}function MM(t,e,n){try{n()}catch(r){or(t,e,r)}}var PM=!1;function Bq(t,e){if(iC=O1,t=cO(),QS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,c=0,d=t,p=null;t:for(;;){for(var f;d!==n||a!==0&&d.nodeType!==3||(s=o+a),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)p=d,d=f;for(;;){if(d===t)break t;if(p===n&&++u===a&&(s=o),p===i&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=f}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(oC={focusedElem:t,selectionRange:n},O1=!1,Ue=e;Ue!==null;)if(e=Ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ue=t;else for(;Ue!==null;){e=Ue;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:_o(e.type,y),v);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(S){or(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Ue=t;break}Ue=e.return}return g=PM,PM=!1,g}function $f(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&MM(e,n,i)}a=a.next}while(a!==r)}}function hy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qC(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function AM(t){var e=t.alternate;e!==null&&(t.alternate=null,AM(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[as],delete e[xf],delete e[cC],delete e[wq],delete e[kq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function DM(t){return t.tag===5||t.tag===3||t.tag===4}function LM(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||DM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function KC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=G1));else if(r!==4&&(t=t.child,t!==null))for(KC(t,e,n),t=t.sibling;t!==null;)KC(t,e,n),t=t.sibling}function XC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(XC(t,e,n),t=t.sibling;t!==null;)XC(t,e,n),t=t.sibling}var sa=null,Ro=!1;function Xl(t,e,n){for(n=n.child;n!==null;)FM(t,e,n),n=n.sibling}function FM(t,e,n){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(E1,n)}catch{}switch(n.tag){case 5:Ta||np(n,e);case 6:var r=sa,a=Ro;sa=null,Xl(t,e,n),sa=r,Ro=a,sa!==null&&(Ro?(t=sa,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):sa.removeChild(n.stateNode));break;case 18:sa!==null&&(Ro?(t=sa,n=n.stateNode,t.nodeType===8?uC(t.parentNode,n):t.nodeType===1&&uC(t,n),uf(t)):uC(sa,n.stateNode));break;case 4:r=sa,a=Ro,sa=n.stateNode.containerInfo,Ro=!0,Xl(t,e,n),sa=r,Ro=a;break;case 0:case 11:case 14:case 15:if(!Ta&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&MM(n,e,o),a=a.next}while(a!==r)}Xl(t,e,n);break;case 1:if(!Ta&&(np(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){or(n,e,s)}Xl(t,e,n);break;case 21:Xl(t,e,n);break;case 22:n.mode&1?(Ta=(r=Ta)||n.memoizedState!==null,Xl(t,e,n),Ta=r):Xl(t,e,n);break;default:Xl(t,e,n)}}function BM(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Fq),e.forEach(function(r){var a=Kq.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function $o(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:sa=s.stateNode,Ro=!1;break e;case 3:sa=s.stateNode.containerInfo,Ro=!0;break e;case 4:sa=s.stateNode.containerInfo,Ro=!0;break e}s=s.return}if(sa===null)throw Error(Ne(160));FM(i,o,a),sa=null,Ro=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){or(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zM(e,t),e=e.sibling}function zM(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($o(e,t),ss(t),r&4){try{$f(3,t,t.return),hy(3,t)}catch(y){or(t,t.return,y)}try{$f(5,t,t.return)}catch(y){or(t,t.return,y)}}break;case 1:$o(e,t),ss(t),r&512&&n!==null&&np(n,n.return);break;case 5:if($o(e,t),ss(t),r&512&&n!==null&&np(n,n.return),t.flags&32){var a=t.stateNode;try{Qh(a,"")}catch(y){or(t,t.return,y)}}if(r&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&p$(a,i),NS(s,o);var u=NS(s,i);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?x$(a,d):c==="dangerouslySetInnerHTML"?b$(a,d):c==="children"?Qh(a,d):cS(a,c,d,u)}switch(s){case"input":kS(a,i);break;case"textarea":m$(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Ad(a,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ad(a,!!i.multiple,i.defaultValue,!0):Ad(a,!!i.multiple,i.multiple?[]:"",!1))}a[xf]=i}catch(y){or(t,t.return,y)}}break;case 6:if($o(e,t),ss(t),r&4){if(t.stateNode===null)throw Error(Ne(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(y){or(t,t.return,y)}}break;case 3:if($o(e,t),ss(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{uf(e.containerInfo)}catch(y){or(t,t.return,y)}break;case 4:$o(e,t),ss(t);break;case 13:$o(e,t),ss(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(ZC=mr())),r&4&&BM(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ta=(u=Ta)||c,$o(e,t),Ta=u):$o(e,t),ss(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Ue=t,c=t.child;c!==null;){for(d=Ue=c;Ue!==null;){switch(p=Ue,f=p.child,p.tag){case 0:case 11:case 14:case 15:$f(4,p,p.return);break;case 1:np(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){or(r,n,y)}}break;case 5:np(p,p.return);break;case 22:if(p.memoizedState!==null){UM(d);continue}}f!==null?(f.return=p,Ue=f):UM(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=v$("display",o))}catch(y){or(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){or(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:$o(e,t),ss(t),r&4&&BM(t);break;case 21:break;default:$o(e,t),ss(t)}}function ss(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(DM(n)){var r=n;break e}n=n.return}throw Error(Ne(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Qh(a,""),r.flags&=-33);var i=LM(t);XC(t,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,s=LM(t);KC(t,s,o);break;default:throw Error(Ne(161))}}catch(l){or(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zq(t,e,n){Ue=t,jM(t)}function jM(t,e,n){for(var r=(t.mode&1)!==0;Ue!==null;){var a=Ue,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||py;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||Ta;s=py;var u=Ta;if(py=o,(Ta=l)&&!u)for(Ue=a;Ue!==null;)o=Ue,l=o.child,o.tag===22&&o.memoizedState!==null?GM(a):l!==null?(l.return=o,Ue=l):GM(a);for(;i!==null;)Ue=i,jM(i),i=i.sibling;Ue=a,py=s,Ta=u}VM(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ue=i):VM(t)}}function VM(t){for(;Ue!==null;){var e=Ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ta||hy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ta)if(n===null)r.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:_o(e.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&FO(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}FO(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&uf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}Ta||e.flags&512&&qC(e)}catch(p){or(e,e.return,p)}}if(e===t){Ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function UM(t){for(;Ue!==null;){var e=Ue;if(e===t){Ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function GM(t){for(;Ue!==null;){var e=Ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hy(4,e)}catch(l){or(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var a=e.return;try{r.componentDidMount()}catch(l){or(e,a,l)}}var i=e.return;try{qC(e)}catch(l){or(e,i,l)}break;case 5:var o=e.return;try{qC(e)}catch(l){or(e,o,l)}}}catch(l){or(e,e.return,l)}if(e===t){Ue=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Ue=s;break}Ue=e.return}}var jq=Math.ceil,fy=Ls.ReactCurrentDispatcher,YC=Ls.ReactCurrentOwner,Qi=Ls.ReactCurrentBatchConfig,Zt=0,qr=null,Ir=null,la=0,Ti=0,rp=Gl(0),Pr=0,Of=null,lc=0,my=0,QC=0,Mf=null,si=null,ZC=0,ap=1/0,Ws=null,gy=!1,JC=null,Yl=null,yy=!1,Ql=null,by=0,Pf=0,eI=null,vy=-1,xy=0;function Ka(){return Zt&6?mr():vy!==-1?vy:vy=mr()}function Zl(t){return t.mode&1?Zt&2&&la!==0?la&-la:Cq.transition!==null?(xy===0&&(xy=A$()),xy):(t=gn,t!==0||(t=window.event,t=t===void 0?16:G$(t.type)),t):1}function Oo(t,e,n,r){if(50<Pf)throw Pf=0,eI=null,Error(Ne(185));rf(t,n,r),(!(Zt&2)||t!==qr)&&(t===qr&&(!(Zt&2)&&(my|=n),Pr===4&&Jl(t,la)),li(t,r),n===1&&Zt===0&&!(e.mode&1)&&(ap=mr()+500,K1&&Hl()))}function li(t,e){var n=t.callbackNode;CH(t,e);var r=_1(t,t===qr?la:0);if(r===0)n!==null&&O$(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&O$(n),e===1)t.tag===0?Sq(HM.bind(null,t)):_O(HM.bind(null,t)),vq(function(){!(Zt&6)&&Hl()}),n=null;else{switch(D$(r)){case 1:n=PS;break;case 4:n=M$;break;case 16:n=I1;break;case 536870912:n=P$;break;default:n=I1}n=e6(n,WM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function WM(t,e){if(vy=-1,xy=0,Zt&6)throw Error(Ne(327));var n=t.callbackNode;if(ip()&&t.callbackNode!==n)return null;var r=_1(t,t===qr?la:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wy(t,r);else{e=r;var a=Zt;Zt|=2;var i=KM();(qr!==t||la!==e)&&(Ws=null,ap=mr()+500,cc(t,e));do try{Gq();break}catch(s){qM(t,s)}while(!0);vC(),fy.current=i,Zt=a,Ir!==null?e=0:(qr=null,la=0,e=Pr)}if(e!==0){if(e===2&&(a=AS(t),a!==0&&(r=a,e=tI(t,a))),e===1)throw n=Of,cc(t,0),Jl(t,r),li(t,mr()),n;if(e===6)Jl(t,r);else{if(a=t.current.alternate,!(r&30)&&!Vq(a)&&(e=wy(t,r),e===2&&(i=AS(t),i!==0&&(r=i,e=tI(t,i))),e===1))throw n=Of,cc(t,0),Jl(t,r),li(t,mr()),n;switch(t.finishedWork=a,t.finishedLanes=r,e){case 0:case 1:throw Error(Ne(345));case 2:dc(t,si,Ws);break;case 3:if(Jl(t,r),(r&130023424)===r&&(e=ZC+500-mr(),10<e)){if(_1(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){Ka(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=lC(dc.bind(null,t,si,Ws),e);break}dc(t,si,Ws);break;case 4:if(Jl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,a=-1;0<r;){var o=31-Eo(r);i=1<<o,o=e[o],o>a&&(a=o),r&=~i}if(r=a,r=mr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jq(r/1960))-r,10<r){t.timeoutHandle=lC(dc.bind(null,t,si,Ws),r);break}dc(t,si,Ws);break;case 5:dc(t,si,Ws);break;default:throw Error(Ne(329))}}}return li(t,mr()),t.callbackNode===n?WM.bind(null,t):null}function tI(t,e){var n=Mf;return t.current.memoizedState.isDehydrated&&(cc(t,e).flags|=256),t=wy(t,e),t!==2&&(e=si,si=n,e!==null&&nI(e)),t}function nI(t){si===null?si=t:si.push.apply(si,t)}function Vq(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!No(i(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jl(t,e){for(e&=~QC,e&=~my,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Eo(e),r=1<<n;t[n]=-1,e&=~r}}function HM(t){if(Zt&6)throw Error(Ne(327));ip();var e=_1(t,0);if(!(e&1))return li(t,mr()),null;var n=wy(t,e);if(t.tag!==0&&n===2){var r=AS(t);r!==0&&(e=r,n=tI(t,r))}if(n===1)throw n=Of,cc(t,0),Jl(t,e),li(t,mr()),n;if(n===6)throw Error(Ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,dc(t,si,Ws),li(t,mr()),null}function rI(t,e){var n=Zt;Zt|=1;try{return t(e)}finally{Zt=n,Zt===0&&(ap=mr()+500,K1&&Hl())}}function uc(t){Ql!==null&&Ql.tag===0&&!(Zt&6)&&ip();var e=Zt;Zt|=1;var n=Qi.transition,r=gn;try{if(Qi.transition=null,gn=1,t)return t()}finally{gn=r,Qi.transition=n,Zt=e,!(Zt&6)&&Hl()}}function aI(){Ti=rp.current,Fn(rp)}function cc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bq(n)),Ir!==null)for(n=Ir.return;n!==null;){var r=n;switch(fC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&H1();break;case 3:ep(),Fn(ai),Fn(Ia),_C();break;case 5:NC(r);break;case 4:ep();break;case 13:Fn(Jn);break;case 19:Fn(Jn);break;case 10:xC(r.type._context);break;case 22:case 23:aI()}n=n.return}if(qr=t,Ir=t=eu(t.current,null),la=Ti=e,Pr=0,Of=null,QC=my=lc=0,si=Mf=null,ic!==null){for(e=0;e<ic.length;e++)if(n=ic[e],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}ic=null}return t}function qM(t,e){do{var n=Ir;try{if(vC(),iy.current=uy,oy){for(var r=er.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}oy=!1}if(sc=0,Hr=Mr=er=null,Ef=!1,Nf=0,YC.current=null,n===null||n.return===null){Pr=1,Of=e,Ir=null;break}e:{var i=t,o=n.return,s=n,l=e;if(e=la,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=yM(o);if(f!==null){f.flags&=-257,bM(f,o,s,i,e),f.mode&1&&gM(i,u,e),e=f,l=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){gM(i,u,e),iI();break e}l=Error(Ne(426))}}else if(Gn&&s.mode&1){var v=yM(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),bM(v,o,s,i,e),yC(tp(l,s));break e}}i=l=tp(l,s),Pr!==4&&(Pr=2),Mf===null?Mf=[i]:Mf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=fM(i,l,e);LO(i,b);break e;case 1:s=l;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Yl===null||!Yl.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=mM(i,s,e);LO(i,S);break e}}i=i.return}while(i!==null)}YM(n)}catch(C){e=C,Ir===n&&n!==null&&(Ir=n=n.return);continue}break}while(!0)}function KM(){var t=fy.current;return fy.current=uy,t===null?uy:t}function iI(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),qr===null||!(lc&268435455)&&!(my&268435455)||Jl(qr,la)}function wy(t,e){var n=Zt;Zt|=2;var r=KM();(qr!==t||la!==e)&&(Ws=null,cc(t,e));do try{Uq();break}catch(a){qM(t,a)}while(!0);if(vC(),Zt=n,fy.current=r,Ir!==null)throw Error(Ne(261));return qr=null,la=0,Pr}function Uq(){for(;Ir!==null;)XM(Ir)}function Gq(){for(;Ir!==null&&!mH();)XM(Ir)}function XM(t){var e=JM(t.alternate,t,Ti);t.memoizedProps=t.pendingProps,e===null?YM(t):Ir=e,YC.current=null}function YM(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Lq(n,e),n!==null){n.flags&=32767,Ir=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pr=6,Ir=null;return}}else if(n=Dq(n,e,Ti),n!==null){Ir=n;return}if(e=e.sibling,e!==null){Ir=e;return}Ir=e=t}while(e!==null);Pr===0&&(Pr=5)}function dc(t,e,n){var r=gn,a=Qi.transition;try{Qi.transition=null,gn=1,Wq(t,e,n,r)}finally{Qi.transition=a,gn=r}return null}function Wq(t,e,n,r){do ip();while(Ql!==null);if(Zt&6)throw Error(Ne(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ne(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(IH(t,i),t===qr&&(Ir=qr=null,la=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yy||(yy=!0,e6(I1,function(){return ip(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qi.transition,Qi.transition=null;var o=gn;gn=1;var s=Zt;Zt|=4,YC.current=null,Bq(t,n),zM(n,t),dq(oC),O1=!!iC,oC=iC=null,t.current=n,zq(n),gH(),Zt=s,gn=o,Qi.transition=i}else t.current=n;if(yy&&(yy=!1,Ql=t,by=a),i=t.pendingLanes,i===0&&(Yl=null),vH(n.stateNode),li(t,mr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(gy)throw gy=!1,t=JC,JC=null,t;return by&1&&t.tag!==0&&ip(),i=t.pendingLanes,i&1?t===eI?Pf++:(Pf=0,eI=t):Pf=0,Hl(),null}function ip(){if(Ql!==null){var t=D$(by),e=Qi.transition,n=gn;try{if(Qi.transition=null,gn=16>t?16:t,Ql===null)var r=!1;else{if(t=Ql,Ql=null,by=0,Zt&6)throw Error(Ne(331));var a=Zt;for(Zt|=4,Ue=t.current;Ue!==null;){var i=Ue,o=i.child;if(Ue.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Ue=u;Ue!==null;){var c=Ue;switch(c.tag){case 0:case 11:case 15:$f(8,c,i)}var d=c.child;if(d!==null)d.return=c,Ue=d;else for(;Ue!==null;){c=Ue;var p=c.sibling,f=c.return;if(AM(c),c===u){Ue=null;break}if(p!==null){p.return=f,Ue=p;break}Ue=f}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}Ue=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ue=o;else e:for(;Ue!==null;){if(i=Ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$f(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Ue=b;break e}Ue=i.return}}var x=t.current;for(Ue=x;Ue!==null;){o=Ue;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ue=w;else e:for(o=x;Ue!==null;){if(s=Ue,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:hy(9,s)}}catch(C){or(s,s.return,C)}if(s===o){Ue=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,Ue=S;break e}Ue=s.return}}if(Zt=a,Hl(),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(E1,t)}catch{}r=!0}return r}finally{gn=n,Qi.transition=e}}return!1}function QM(t,e,n){e=tp(n,e),e=fM(t,e,1),t=Kl(t,e,1),e=Ka(),t!==null&&(rf(t,1,e),li(t,e))}function or(t,e,n){if(t.tag===3)QM(t,t,n);else for(;e!==null;){if(e.tag===3){QM(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yl===null||!Yl.has(r))){t=tp(n,t),t=mM(e,t,1),e=Kl(e,t,1),t=Ka(),e!==null&&(rf(e,1,t),li(e,t));break}}e=e.return}}function Hq(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ka(),t.pingedLanes|=t.suspendedLanes&n,qr===t&&(la&n)===n&&(Pr===4||Pr===3&&(la&130023424)===la&&500>mr()-ZC?cc(t,0):QC|=n),li(t,e)}function ZM(t,e){e===0&&(t.mode&1?(e=T1,T1<<=1,!(T1&130023424)&&(T1=4194304)):e=1);var n=Ka();t=Vs(t,e),t!==null&&(rf(t,e,n),li(t,n))}function qq(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ZM(t,n)}function Kq(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ne(314))}r!==null&&r.delete(e),ZM(t,n)}var JM;JM=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ai.current)oi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return oi=!1,Aq(t,e,n);oi=!!(t.flags&131072)}else oi=!1,Gn&&e.flags&1048576&&RO(e,Y1,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dy(t,e),t=e.pendingProps;var a=qd(e,Ia.current);Zd(e,n),a=OC(null,e,r,t,a,n);var i=MC();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ii(r)?(i=!0,q1(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,SC(e),a.updater=ny,e.stateNode=a,a._reactInternals=e,IC(e,r,t,n),e=jC(null,e,r,!0,i,n)):(e.tag=0,Gn&&i&&hC(e),qa(null,e,a,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dy(t,e),t=e.pendingProps,a=r._init,r=a(r._payload),e.type=r,a=e.tag=Yq(r),t=_o(r,t),a){case 0:e=zC(null,e,r,t,n);break e;case 1:e=CM(null,e,r,t,n);break e;case 11:e=vM(null,e,r,t,n);break e;case 14:e=xM(null,e,r,_o(r.type,t),n);break e}throw Error(Ne(306,r,""))}return e;case 0:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:_o(r,a),zC(t,e,r,a,n);case 1:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:_o(r,a),CM(t,e,r,a,n);case 3:e:{if(IM(e),t===null)throw Error(Ne(387));r=e.pendingProps,i=e.memoizedState,a=i.element,DO(t,e),ty(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=tp(Error(Ne(423)),e),e=EM(t,e,r,n,a);break e}else if(r!==a){a=tp(Error(Ne(424)),e),e=EM(t,e,r,n,a);break e}else for(Ni=Ul(e.stateNode.containerInfo.firstChild),Ei=e,Gn=!0,To=null,n=WO(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yd(),r===a){e=Gs(t,e,n);break e}qa(t,e,r,n)}e=e.child}return e;case 5:return HO(e),t===null&&gC(e),r=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,sC(r,a)?o=null:i!==null&&sC(r,i)&&(e.flags|=32),SM(t,e),qa(t,e,o,n),e.child;case 6:return t===null&&gC(e),null;case 13:return NM(t,e,n);case 4:return EC(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Jd(e,null,r,n):qa(t,e,r,n),e.child;case 11:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:_o(r,a),vM(t,e,r,a,n);case 7:return qa(t,e,e.pendingProps,n),e.child;case 8:return qa(t,e,e.pendingProps.children,n),e.child;case 12:return qa(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,a=e.pendingProps,i=e.memoizedProps,o=a.value,$n(Z1,r._currentValue),r._currentValue=o,i!==null)if(No(i.value,o)){if(i.children===a.children&&!ai.current){e=Gs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Us(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),wC(i.return,n,e),s.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ne(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),wC(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}qa(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,r=e.pendingProps.children,Zd(e,n),a=Xi(a),r=r(a),e.flags|=1,qa(t,e,r,n),e.child;case 14:return r=e.type,a=_o(r,e.pendingProps),a=_o(r.type,a),xM(t,e,r,a,n);case 15:return wM(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:_o(r,a),dy(t,e),e.tag=1,ii(r)?(t=!0,q1(e)):t=!1,Zd(e,n),jO(e,r,a),IC(e,r,a,n),jC(null,e,r,!0,t,n);case 19:return _M(t,e,n);case 22:return kM(t,e,n)}throw Error(Ne(156,e.tag))};function e6(t,e){return $$(t,e)}function Xq(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zi(t,e,n,r){return new Xq(t,e,n,r)}function oI(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Yq(t){if(typeof t=="function")return oI(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hS)return 11;if(t===gS)return 14}return 2}function eu(t,e){var n=t.alternate;return n===null?(n=Zi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ky(t,e,n,r,a,i){var o=2;if(r=t,typeof t=="function")oI(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Pd:return pc(n.children,a,i,e);case dS:o=8,a|=8;break;case pS:return t=Zi(12,n,e,a|2),t.elementType=pS,t.lanes=i,t;case fS:return t=Zi(13,n,e,a),t.elementType=fS,t.lanes=i,t;case mS:return t=Zi(19,n,e,a),t.elementType=mS,t.lanes=i,t;case s$:return Sy(n,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case i$:o=10;break e;case o$:o=9;break e;case hS:o=11;break e;case gS:o=14;break e;case Al:o=16,r=null;break e}throw Error(Ne(130,t==null?t:typeof t,""))}return e=Zi(o,n,e,a),e.elementType=t,e.type=r,e.lanes=i,e}function pc(t,e,n,r){return t=Zi(7,t,r,e),t.lanes=n,t}function Sy(t,e,n,r){return t=Zi(22,t,r,e),t.elementType=s$,t.lanes=n,t.stateNode={isHidden:!1},t}function sI(t,e,n){return t=Zi(6,t,null,e),t.lanes=n,t}function lI(t,e,n){return e=Zi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Qq(t,e,n,r,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=DS(0),this.expirationTimes=DS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=DS(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function uI(t,e,n,r,a,i,o,s,l){return t=new Qq(t,e,n,s,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Zi(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},SC(i),t}function Zq(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Md,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function t6(t){if(!t)return Wl;t=t._reactInternals;e:{if(ec(t)!==t||t.tag!==1)throw Error(Ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ii(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ne(171))}if(t.tag===1){var n=t.type;if(ii(n))return NO(t,n,e)}return e}function n6(t,e,n,r,a,i,o,s,l){return t=uI(n,r,!0,t,a,i,o,s,l),t.context=t6(null),n=t.current,r=Ka(),a=Zl(n),i=Us(r,a),i.callback=e??null,Kl(n,i,a),t.current.lanes=a,rf(t,a,r),li(t,r),t}function Cy(t,e,n,r){var a=e.current,i=Ka(),o=Zl(a);return n=t6(n),e.context===null?e.context=n:e.pendingContext=n,e=Us(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Kl(a,e,o),t!==null&&(Oo(t,a,o,i),ey(t,a,o)),o}function Iy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function r6(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cI(t,e){r6(t,e),(t=t.alternate)&&r6(t,e)}function Jq(){return null}var a6=typeof reportError=="function"?reportError:function(t){console.error(t)};function dI(t){this._internalRoot=t}Ey.prototype.render=dI.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ne(409));Cy(t,e,null,null)},Ey.prototype.unmount=dI.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;uc(function(){Cy(null,t,null,null)}),e[Fs]=null}};function Ey(t){this._internalRoot=t}Ey.prototype.unstable_scheduleHydration=function(t){if(t){var e=B$();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zl.length&&e!==0&&e<zl[n].priority;n++);zl.splice(n,0,t),n===0&&V$(t)}};function pI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ny(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function i6(){}function eK(t,e,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=Iy(o);i.call(u)}}var o=n6(e,r,t,0,null,!1,!1,"",i6);return t._reactRootContainer=o,t[Fs]=o.current,bf(t.nodeType===8?t.parentNode:t),uc(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var s=r;r=function(){var u=Iy(l);s.call(u)}}var l=uI(t,0,!1,null,null,!1,!1,"",i6);return t._reactRootContainer=l,t[Fs]=l.current,bf(t.nodeType===8?t.parentNode:t),uc(function(){Cy(e,l,n,r)}),l}function Ty(t,e,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=Iy(o);s.call(l)}}Cy(e,o,t,a)}else o=eK(n,e,t,a,r);return Iy(o)}L$=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nf(e.pendingLanes);n!==0&&(LS(e,n|1),li(e,mr()),!(Zt&6)&&(ap=mr()+500,Hl()))}break;case 13:uc(function(){var r=Vs(t,1);if(r!==null){var a=Ka();Oo(r,t,1,a)}}),cI(t,1)}},FS=function(t){if(t.tag===13){var e=Vs(t,134217728);if(e!==null){var n=Ka();Oo(e,t,134217728,n)}cI(t,134217728)}},F$=function(t){if(t.tag===13){var e=Zl(t),n=Vs(t,e);if(n!==null){var r=Ka();Oo(n,t,e,r)}cI(t,e)}},B$=function(){return gn},z$=function(t,e){var n=gn;try{return gn=t,e()}finally{gn=n}},RS=function(t,e,n){switch(e){case"input":if(kS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var a=W1(r);if(!a)throw Error(Ne(90));c$(r),kS(r,a)}}}break;case"textarea":m$(t,n);break;case"select":e=n.value,e!=null&&Ad(t,!!n.multiple,e,!1)}},C$=rI,I$=uc;var tK={usingClientEntryPoint:!1,Events:[wf,Wd,W1,k$,S$,rI]},Af={findFiberByHostInstance:tc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nK={bundleType:Af.bundleType,version:Af.version,rendererPackageName:Af.rendererPackageName,rendererConfig:Af.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_$(t),t===null?null:t.stateNode},findFiberByHostInstance:Af.findFiberByHostInstance||Jq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_y.isDisabled&&_y.supportsFiber)try{E1=_y.inject(nK),rs=_y}catch{}}Si.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tK,Si.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pI(e))throw Error(Ne(200));return Zq(t,e,null,n)},Si.createRoot=function(t,e){if(!pI(t))throw Error(Ne(299));var n=!1,r="",a=a6;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=uI(t,1,!1,null,null,n,!1,r,a),t[Fs]=e.current,bf(t.nodeType===8?t.parentNode:t),new dI(e)},Si.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ne(188)):(t=Object.keys(t).join(","),Error(Ne(268,t)));return t=_$(e),t=t===null?null:t.stateNode,t},Si.flushSync=function(t){return uc(t)},Si.hydrate=function(t,e,n){if(!Ny(e))throw Error(Ne(200));return Ty(null,t,e,!0,n)},Si.hydrateRoot=function(t,e,n){if(!pI(t))throw Error(Ne(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=a6;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=n6(e,null,t,1,n??null,a,!1,i,o),t[Fs]=e.current,bf(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new Ey(e)},Si.render=function(t,e,n){if(!Ny(e))throw Error(Ne(200));return Ty(null,t,e,!1,n)},Si.unmountComponentAtNode=function(t){if(!Ny(t))throw Error(Ne(40));return t._reactRootContainer?(uc(function(){Ty(null,null,t,!1,function(){t._reactRootContainer=null,t[Fs]=null})}),!0):!1},Si.unstable_batchedUpdates=rI,Si.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ny(n))throw Error(Ne(200));if(t==null||t._reactInternals===void 0)throw Error(Ne(38));return Ty(t,e,n,!1,r)},Si.version="18.2.0-next-9e3b772b8-20220608";function o6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o6)}catch(t){console.error(t)}}o6(),ZR.exports=Si;var Df=ZR.exports;const s6=Wi(Df),rK=Lk({__proto__:null,default:s6},[Df]);var l6,u6=Df;l6=u6.createRoot,u6.hydrateRoot;function aK(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const c6={};function hI(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&c6[e[0]]||(typeof e[0]=="string"&&(c6[e[0]]=new Date),aK(...e))}const d6=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function p6(t,e,n){t.loadNamespaces(e,d6(t,n))}function h6(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(a=>{t.options.ns.indexOf(a)<0&&t.options.ns.push(a)}),t.loadLanguages(e,d6(t,r))}function iK(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],a=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=e.services.backendConnector.state[`${s}|${l}`];return u===-1||u===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!a||o(i,t)))}function oK(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(hI("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!a(r.isLanguageChangingTo,t))return!1}}):iK(t,e,n)}const sK=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,lK={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xA9","&#169;":"\xA9","&reg;":"\xAE","&#174;":"\xAE","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},uK=t=>lK[t],cK=t=>t.replace(sK,uK);let dK={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:cK};function pK(){return dK}let hK;function fK(){return hK}const f6=R.createContext();class mK{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const gK=(t,e)=>{const n=R.useRef();return R.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current};function m6(t,e,n,r){return t.getFixedT(e,n,r)}function yK(t,e,n,r){return R.useCallback(m6(t,e,n,r),[t,e,n,r])}function tu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:a}=R.useContext(f6)||{},i=n||r||fK();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new mK),!i){hI("You will need to pass in an i18next instance by using initReactI18next");const C=(_,T)=>typeof T=="string"?T:T&&typeof T=="object"&&typeof T.defaultValue=="string"?T.defaultValue:Array.isArray(_)?_[_.length-1]:_,I=[C,{},!1];return I.t=C,I.i18n={},I.ready=!1,I}i.options.react&&i.options.react.wait!==void 0&&hI("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...pK(),...i.options.react,...e},{useSuspense:s,keyPrefix:l}=o;let u=t||a||i.options&&i.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const c=(i.isInitialized||i.initializedStoreOnce)&&u.every(C=>oK(C,i,o)),d=yK(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),p=()=>d,f=()=>m6(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),[g,y]=R.useState(p);let v=u.join();e.lng&&(v=`${e.lng}${v}`);const b=gK(v),x=R.useRef(!0);R.useEffect(()=>{const{bindI18n:C,bindI18nStore:I}=o;x.current=!0,!c&&!s&&(e.lng?h6(i,e.lng,u,()=>{x.current&&y(f)}):p6(i,u,()=>{x.current&&y(f)})),c&&b&&b!==v&&x.current&&y(f);function _(){x.current&&y(f)}return C&&i&&i.on(C,_),I&&i&&i.store.on(I,_),()=>{x.current=!1,C&&i&&C.split(" ").forEach(T=>i.off(T,_)),I&&i&&I.split(" ").forEach(T=>i.store.off(T,_))}},[i,v]);const w=R.useRef(!0);R.useEffect(()=>{x.current&&!w.current&&y(p),w.current=!1},[i,l]);const S=[g,i,c];if(S.t=g,S.i18n=i,S.ready=c,c||!c&&!s)return S;throw new Promise(C=>{e.lng?h6(i,e.lng,u,()=>C()):p6(i,u,()=>C())})}function bK(t){let{i18n:e,defaultNS:n,children:r}=t;const a=R.useMemo(()=>({i18n:e,defaultNS:n}),[e,n]);return R.createElement(f6.Provider,{value:a},r)}/**
* @remix-run/router v1.15.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function sr(){return sr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sr.apply(this,arguments)}var gr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gr||(gr={}));const g6="popstate";function vK(t){t===void 0&&(t={});function e(r,a){let{pathname:i,search:o,hash:s}=r.location;return Lf("",{pathname:i,search:o,hash:s},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:hc(a)}return wK(e,n,null,t)}function kt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function op(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xK(){return Math.random().toString(36).substr(2,8)}function y6(t,e){return{usr:t.state,key:t.key,idx:e}}function Lf(t,e,n,r){return n===void 0&&(n=null),sr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Hs(e):e,{state:n,key:e&&e.key||r||xK()})}function hc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Hs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function wK(t,e,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,s=gr.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(sr({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){s=gr.Pop;let v=c(),b=v==null?null:v-u;u=v,l&&l({action:s,location:y.location,delta:b})}function p(v,b){s=gr.Push;let x=Lf(y.location,v,b);n&&n(x,v),u=c()+1;let w=y6(x,u),S=y.createHref(x);try{o.pushState(w,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(S)}i&&l&&l({action:s,location:y.location,delta:1})}function f(v,b){s=gr.Replace;let x=Lf(y.location,v,b);n&&n(x,v),u=c();let w=y6(x,u),S=y.createHref(x);o.replaceState(w,"",S),i&&l&&l({action:s,location:y.location,delta:0})}function g(v){let b=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof v=="string"?v:hc(v);return x=x.replace(/ $/,"%20"),kt(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let y={get action(){return s},get location(){return t(a,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(g6,d),l=v,()=>{a.removeEventListener(g6,d),l=null}},createHref(v){return e(a,v)},createURL:g,encodeLocation(v){let b=g(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:f,go(v){return o.go(v)}};return y}var lr;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(lr||(lr={}));const kK=new Set(["lazy","caseSensitive","path","id","index","children"]);function SK(t){return t.index===!0}function fI(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((a,i)=>{let o=[...n,i],s=typeof a.id=="string"?a.id:o.join("-");if(kt(a.index!==!0||!a.children,"Cannot specify children on an index route"),kt(!r[s],'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),SK(a)){let l=sr({},a,e(a),{id:s});return r[s]=l,l}else{let l=sr({},a,e(a),{id:s,children:void 0});return r[s]=l,a.children&&(l.children=fI(a.children,e,o,r)),l}})}function sp(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Hs(e):e,a=ls(r.pathname||"/",n);if(a==null)return null;let i=v6(t);CK(i);let o=null;for(let s=0;o==null&&s<i.length;++s){let l=AK(a);o=MK(i[s],l)}return o}function b6(t,e){let{route:n,pathname:r,params:a}=t;return{id:n.id,pathname:r,params:a,data:e[n.id],handle:n.handle}}function v6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,s)=>{let l={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(kt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=qs([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(kt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),v6(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:$K(u,i.index),routesMeta:c})};return t.forEach((i,o)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))a(i,o);else for(let l of x6(i.path))a(i,o,l)}),e}function x6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=x6(r.join("/")),s=[];return s.push(...o.map(l=>l===""?i:[i,l].join("/"))),a&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function CK(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:OK(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const IK=/^:[\w-]+$/,EK=3,NK=2,TK=1,_K=10,RK=-2,w6=t=>t==="*";function $K(t,e){let n=t.split("/"),r=n.length;return n.some(w6)&&(r+=RK),e&&(r+=NK),n.filter(a=>!w6(a)).reduce((a,i)=>a+(IK.test(i)?EK:i===""?TK:_K),r)}function OK(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function MK(t,e){let{routesMeta:n}=t,r={},a="/",i=[];for(let o=0;o<n.length;++o){let s=n[o],l=o===n.length-1,u=a==="/"?e:e.slice(a.length)||"/",c=Ry({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let d=s.route;i.push({params:r,pathname:qs([a,c.pathname]),pathnameBase:FK(qs([a,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(a=qs([a,c.pathnameBase]))}return i}function Ry(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=PK(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((l,u,c)=>{let{paramName:d,isOptional:p}=u;if(d==="*"){let g=s[c]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const f=s[c];return p&&!f?l[d]=void 0:l[d]=(f||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function PK(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),op(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,s)=>(r.push({paramName:o,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function AK(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return op(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ls(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function DK(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?Hs(t):t;return{pathname:n?n.startsWith("/")?n:LK(n,e):e,search:BK(r),hash:zK(a)}}function LK(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function mI(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function k6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gI(t,e){let n=k6(t);return e?n.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function yI(t,e,n,r){r===void 0&&(r=!1);let a;typeof t=="string"?a=Hs(t):(a=sr({},t),kt(!a.pathname||!a.pathname.includes("?"),mI("?","pathname","search",a)),kt(!a.pathname||!a.pathname.includes("#"),mI("#","pathname","hash",a)),kt(!a.search||!a.search.includes("#"),mI("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,s;if(o==null)s=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;a.pathname=p.join("/")}s=d>=0?e[d]:"/"}let l=DK(a,s),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const qs=t=>t.join("/").replace(/\/\/+/g,"/"),FK=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BK=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zK=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class bI{constructor(e,n,r,a){a===void 0&&(a=!1),this.status=e,this.statusText=n||"",this.internal=a,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function S6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const C6=["post","put","patch","delete"],jK=new Set(C6),VK=["get",...C6],UK=new Set(VK),GK=new Set([301,302,303,307,308]),WK=new Set([307,308]),vI={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},HK={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ff={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},I6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qK=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),E6="remix-router-transitions";function KK(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;kt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let a;if(t.mapRouteProperties)a=t.mapRouteProperties;else if(t.detectErrorBoundary){let ue=t.detectErrorBoundary;a=me=>({hasErrorBoundary:ue(me)})}else a=qK;let i={},o=fI(t.routes,a,void 0,i),s,l=t.basename||"/",u=sr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),c=null,d=new Set,p=null,f=null,g=null,y=t.hydrationData!=null,v=sp(o,t.history.location,l),b=null;if(v==null){let ue=Ji(404,{pathname:t.history.location.pathname}),{matches:me,route:ke}=A6(o);v=me,b={[ke.id]:ue}}let x,w=v.some(ue=>ue.route.lazy),S=v.some(ue=>ue.route.loader);if(w)x=!1;else if(!S)x=!0;else if(u.v7_partialHydration){let ue=t.hydrationData?t.hydrationData.loaderData:null,me=t.hydrationData?t.hydrationData.errors:null;x=v.every(ke=>ke.route.loader&&ke.route.loader.hydrate!==!0&&(ue&&ue[ke.route.id]!==void 0||me&&me[ke.route.id]!==void 0))}else x=t.hydrationData!=null;let C,I={historyAction:t.history.action,location:t.history.location,matches:v,initialized:x,navigation:vI,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},_=gr.Pop,T=!1,M,P=!1,L=new Map,j=null,B=!1,K=!1,X=[],Z=[],H=new Map,F=0,Y=-1,Q=new Map,ne=new Set,se=new Map,pe=new Map,de=new Set,ie=new Map,xe=new Map,q=!1;function oe(){if(c=t.history.listen(ue=>{let{action:me,location:ke,delta:Me}=ue;if(q){q=!1;return}op(xe.size===0||Me!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let We=xi({currentLocation:I.location,nextLocation:ke,historyAction:me});if(We&&Me!=null){q=!0,t.history.go(Me*-1),vi(We,{state:"blocked",location:ke,proceed(){vi(We,{state:"proceeding",proceed:void 0,reset:void 0,location:ke}),t.history.go(Me)},reset(){let yt=new Map(I.blockers);yt.set(We,Ff),Ee({blockers:yt})}});return}return Oe(me,ke)}),n){iX(e,L);let ue=()=>oX(e,L);e.addEventListener("pagehide",ue),j=()=>e.removeEventListener("pagehide",ue)}return I.initialized||Oe(gr.Pop,I.location,{initialHydration:!0}),C}function he(){c&&c(),j&&j(),d.clear(),M&&M.abort(),I.fetchers.forEach((ue,me)=>Xn(me)),I.blockers.forEach((ue,me)=>Za(me))}function Ie(ue){return d.add(ue),()=>d.delete(ue)}function Ee(ue,me){me===void 0&&(me={}),I=sr({},I,ue);let ke=[],Me=[];u.v7_fetcherPersist&&I.fetchers.forEach((We,yt)=>{We.state==="idle"&&(de.has(yt)?Me.push(yt):ke.push(yt))}),[...d].forEach(We=>We(I,{deletedFetchers:Me,unstable_viewTransitionOpts:me.viewTransitionOpts,unstable_flushSync:me.flushSync===!0})),u.v7_fetcherPersist&&(ke.forEach(We=>I.fetchers.delete(We)),Me.forEach(We=>Xn(We)))}function _e(ue,me,ke){var Me,We;let{flushSync:yt}=ke===void 0?{}:ke,ut=I.actionData!=null&&I.navigation.formMethod!=null&&Mo(I.navigation.formMethod)&&I.navigation.state==="loading"&&((Me=ue.state)==null?void 0:Me._isRedirect)!==!0,ot;me.actionData?Object.keys(me.actionData).length>0?ot=me.actionData:ot=null:ut?ot=I.actionData:ot=null;let tt=me.loaderData?P6(I.loaderData,me.loaderData,me.matches||[],me.errors):I.loaderData,Ot=I.blockers;Ot.size>0&&(Ot=new Map(Ot),Ot.forEach((un,fn)=>Ot.set(fn,Ff)));let Pn=T===!0||I.navigation.formMethod!=null&&Mo(I.navigation.formMethod)&&((We=ue.state)==null?void 0:We._isRedirect)!==!0;s&&(o=s,s=void 0),B||_===gr.Pop||(_===gr.Push?t.history.push(ue,ue.state):_===gr.Replace&&t.history.replace(ue,ue.state));let vt;if(_===gr.Pop){let un=L.get(I.location.pathname);un&&un.has(ue.pathname)?vt={currentLocation:I.location,nextLocation:ue}:L.has(ue.pathname)&&(vt={currentLocation:ue,nextLocation:I.location})}else if(P){let un=L.get(I.location.pathname);un?un.add(ue.pathname):(un=new Set([ue.pathname]),L.set(I.location.pathname,un)),vt={currentLocation:I.location,nextLocation:ue}}Ee(sr({},me,{actionData:ot,loaderData:tt,historyAction:_,location:ue,initialized:!0,navigation:vI,revalidation:"idle",restoreScrollPosition:Ho(ue,me.matches||I.matches),preventScrollReset:Pn,blockers:Ot}),{viewTransitionOpts:vt,flushSync:yt===!0}),_=gr.Pop,T=!1,P=!1,B=!1,K=!1,X=[],Z=[]}async function Fe(ue,me){if(typeof ue=="number"){t.history.go(ue);return}let ke=xI(I.location,I.matches,l,u.v7_prependBasename,ue,u.v7_relativeSplatPath,me?.fromRouteId,me?.relative),{path:Me,submission:We,error:yt}=N6(u.v7_normalizeFormMethod,!1,ke,me),ut=I.location,ot=Lf(I.location,Me,me&&me.state);ot=sr({},ot,t.history.encodeLocation(ot));let tt=me&&me.replace!=null?me.replace:void 0,Ot=gr.Push;tt===!0?Ot=gr.Replace:tt===!1||We!=null&&Mo(We.formMethod)&&We.formAction===I.location.pathname+I.location.search&&(Ot=gr.Replace);let Pn=me&&"preventScrollReset"in me?me.preventScrollReset===!0:void 0,vt=(me&&me.unstable_flushSync)===!0,un=xi({currentLocation:ut,nextLocation:ot,historyAction:Ot});if(un){vi(un,{state:"blocked",location:ot,proceed(){vi(un,{state:"proceeding",proceed:void 0,reset:void 0,location:ot}),Fe(ue,me)},reset(){let fn=new Map(I.blockers);fn.set(un,Ff),Ee({blockers:fn})}});return}return await Oe(Ot,ot,{submission:We,pendingError:yt,preventScrollReset:Pn,replace:me&&me.replace,enableViewTransition:me&&me.unstable_viewTransition,flushSync:vt})}function Xe(){if(Qt(),Ee({revalidation:"loading"}),I.navigation.state!=="submitting"){if(I.navigation.state==="idle"){Oe(I.historyAction,I.location,{startUninterruptedRevalidation:!0});return}Oe(_||I.historyAction,I.navigation.location,{overrideNavigation:I.navigation})}}async function Oe(ue,me,ke){M&&M.abort(),M=null,_=ue,B=(ke&&ke.startUninterruptedRevalidation)===!0,fd(I.location,I.matches),T=(ke&&ke.preventScrollReset)===!0,P=(ke&&ke.enableViewTransition)===!0;let Me=s||o,We=ke&&ke.overrideNavigation,yt=sp(Me,me,l),ut=(ke&&ke.flushSync)===!0;if(!yt){let fn=Ji(404,{pathname:me.pathname}),{matches:Rr,route:rr}=A6(Me);Is(),_e(me,{matches:Rr,loaderData:{},errors:{[rr.id]:fn}},{flushSync:ut});return}if(I.initialized&&!K&&JK(I.location,me)&&!(ke&&ke.submission&&Mo(ke.submission.formMethod))){_e(me,{matches:yt},{flushSync:ut});return}M=new AbortController;let ot=zf(t.history,me,M.signal,ke&&ke.submission),tt,Ot;if(ke&&ke.pendingError)Ot={[jf(yt).route.id]:ke.pendingError};else if(ke&&ke.submission&&Mo(ke.submission.formMethod)){let fn=await lt(ot,me,ke.submission,yt,{replace:ke.replace,flushSync:ut});if(fn.shortCircuited)return;tt=fn.pendingActionData,Ot=fn.pendingActionError,We=CI(me,ke.submission),ut=!1,ot=new Request(ot.url,{signal:ot.signal})}let{shortCircuited:Pn,loaderData:vt,errors:un}=await Je(ot,me,yt,We,ke&&ke.submission,ke&&ke.fetcherSubmission,ke&&ke.replace,ke&&ke.initialHydration===!0,ut,tt,Ot);Pn||(M=null,_e(me,sr({matches:yt},tt?{actionData:tt}:{},{loaderData:vt,errors:un})))}async function lt(ue,me,ke,Me,We){We===void 0&&(We={}),Qt();let yt=rX(me,ke);Ee({navigation:yt},{flushSync:We.flushSync===!0});let ut,ot=SI(Me,me);if(!ot.route.action&&!ot.route.lazy)ut={type:lr.error,error:Ji(405,{method:ue.method,pathname:me.pathname,routeId:ot.route.id})};else if(ut=await Bf("action",ue,ot,Me,i,a,l,u.v7_relativeSplatPath),ue.signal.aborted)return{shortCircuited:!0};if(mc(ut)){let tt;return We&&We.replace!=null?tt=We.replace:tt=ut.location===I.location.pathname+I.location.search,await jt(I,ut,{submission:ke,replace:tt}),{shortCircuited:!0}}if(lp(ut)){let tt=jf(Me,ot.route.id);return(We&&We.replace)!==!0&&(_=gr.Push),{pendingActionData:{},pendingActionError:{[tt.route.id]:ut.error}}}if(fc(ut))throw Ji(400,{type:"defer-action"});return{pendingActionData:{[ot.route.id]:ut.data}}}async function Je(ue,me,ke,Me,We,yt,ut,ot,tt,Ot,Pn){let vt=Me||CI(me,We),un=We||yt||z6(vt),fn=s||o,[Rr,rr]=T6(t.history,I,ke,un,me,u.v7_partialHydration&&ot===!0,K,X,Z,de,se,ne,fn,l,Ot,Pn);if(Is(tn=>!(ke&&ke.some(cn=>cn.route.id===tn))||Rr&&Rr.some(cn=>cn.route.id===tn)),Y=++F,Rr.length===0&&rr.length===0){let tn=yo();return _e(me,sr({matches:ke,loaderData:{},errors:Pn||null},Ot?{actionData:Ot}:{},tn?{fetchers:new Map(I.fetchers)}:{}),{flushSync:tt}),{shortCircuited:!0}}if(!B&&(!u.v7_partialHydration||!ot)){rr.forEach(cn=>{let xr=I.fetchers.get(cn.key),At=Vf(void 0,xr?xr.data:void 0);I.fetchers.set(cn.key,At)});let tn=Ot||I.actionData;Ee(sr({navigation:vt},tn?Object.keys(tn).length===0?{actionData:null}:{actionData:tn}:{},rr.length>0?{fetchers:new Map(I.fetchers)}:{}),{flushSync:tt})}rr.forEach(tn=>{H.has(tn.key)&&_n(tn.key),tn.controller&&H.set(tn.key,tn.controller)});let hr=()=>rr.forEach(tn=>_n(tn.key));M&&M.signal.addEventListener("abort",hr);let{results:qo,loaderResults:Li,fetcherResults:ga}=await Yt(I.matches,ke,Rr,rr,ue);if(ue.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",hr),rr.forEach(tn=>H.delete(tn.key));let bo=D6(qo);if(bo){if(bo.idx>=Rr.length){let tn=rr[bo.idx-Rr.length].key;ne.add(tn)}return await jt(I,bo.result,{replace:ut}),{shortCircuited:!0}}let{loaderData:zu,errors:ju}=M6(I,ke,Rr,Li,Pn,rr,ga,ie);ie.forEach((tn,cn)=>{tn.subscribe(xr=>{(xr||tn.done)&&ie.delete(cn)})});let kl=yo(),Ko=bi(Y),vo=kl||Ko||rr.length>0;return sr({loaderData:zu,errors:ju},vo?{fetchers:new Map(I.fetchers)}:{})}function nt(ue,me,ke,Me){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(ue)&&_n(ue);let We=(Me&&Me.unstable_flushSync)===!0,yt=s||o,ut=xI(I.location,I.matches,l,u.v7_prependBasename,ke,u.v7_relativeSplatPath,me,Me?.relative),ot=sp(yt,ut,l);if(!ot){Ct(ue,me,Ji(404,{pathname:ut}),{flushSync:We});return}let{path:tt,submission:Ot,error:Pn}=N6(u.v7_normalizeFormMethod,!0,ut,Me);if(Pn){Ct(ue,me,Pn,{flushSync:We});return}let vt=SI(ot,tt);if(T=(Me&&Me.preventScrollReset)===!0,Ot&&Mo(Ot.formMethod)){et(ue,me,tt,vt,ot,We,Ot);return}se.set(ue,{routeId:me,path:tt}),on(ue,me,tt,vt,ot,We,Ot)}async function et(ue,me,ke,Me,We,yt,ut){if(Qt(),se.delete(ue),!Me.route.action&&!Me.route.lazy){let cn=Ji(405,{method:ut.formMethod,pathname:ke,routeId:me});Ct(ue,me,cn,{flushSync:yt});return}let ot=I.fetchers.get(ue);$t(ue,aX(ut,ot),{flushSync:yt});let tt=new AbortController,Ot=zf(t.history,ke,tt.signal,ut);H.set(ue,tt);let Pn=F,vt=await Bf("action",Ot,Me,We,i,a,l,u.v7_relativeSplatPath);if(Ot.signal.aborted){H.get(ue)===tt&&H.delete(ue);return}if(u.v7_fetcherPersist&&de.has(ue)){if(mc(vt)||lp(vt)){$t(ue,nu(void 0));return}}else{if(mc(vt))if(H.delete(ue),Y>Pn){$t(ue,nu(void 0));return}else return ne.add(ue),$t(ue,Vf(ut)),jt(I,vt,{fetcherSubmission:ut});if(lp(vt)){Ct(ue,me,vt.error);return}}if(fc(vt))throw Ji(400,{type:"defer-action"});let un=I.navigation.location||I.location,fn=zf(t.history,un,tt.signal),Rr=s||o,rr=I.navigation.state!=="idle"?sp(Rr,I.navigation.location,l):I.matches;kt(rr,"Didn't find any matches after fetcher action");let hr=++F;Q.set(ue,hr);let qo=Vf(ut,vt.data);I.fetchers.set(ue,qo);let[Li,ga]=T6(t.history,I,rr,ut,un,!1,K,X,Z,de,se,ne,Rr,l,{[Me.route.id]:vt.data},void 0);ga.filter(cn=>cn.key!==ue).forEach(cn=>{let xr=cn.key,At=I.fetchers.get(xr),Sl=Vf(void 0,At?At.data:void 0);I.fetchers.set(xr,Sl),H.has(xr)&&_n(xr),cn.controller&&H.set(xr,cn.controller)}),Ee({fetchers:new Map(I.fetchers)});let bo=()=>ga.forEach(cn=>_n(cn.key));tt.signal.addEventListener("abort",bo);let{results:zu,loaderResults:ju,fetcherResults:kl}=await Yt(I.matches,rr,Li,ga,fn);if(tt.signal.aborted)return;tt.signal.removeEventListener("abort",bo),Q.delete(ue),H.delete(ue),ga.forEach(cn=>H.delete(cn.key));let Ko=D6(zu);if(Ko){if(Ko.idx>=Li.length){let cn=ga[Ko.idx-Li.length].key;ne.add(cn)}return jt(I,Ko.result)}let{loaderData:vo,errors:tn}=M6(I,I.matches,Li,ju,void 0,ga,kl,ie);if(I.fetchers.has(ue)){let cn=nu(vt.data);I.fetchers.set(ue,cn)}bi(hr),I.navigation.state==="loading"&&hr>Y?(kt(_,"Expected pending action"),M&&M.abort(),_e(I.navigation.location,{matches:rr,loaderData:vo,errors:tn,fetchers:new Map(I.fetchers)})):(Ee({errors:tn,loaderData:P6(I.loaderData,vo,rr,tn),fetchers:new Map(I.fetchers)}),K=!1)}async function on(ue,me,ke,Me,We,yt,ut){let ot=I.fetchers.get(ue);$t(ue,Vf(ut,ot?ot.data:void 0),{flushSync:yt});let tt=new AbortController,Ot=zf(t.history,ke,tt.signal);H.set(ue,tt);let Pn=F,vt=await Bf("loader",Ot,Me,We,i,a,l,u.v7_relativeSplatPath);if(fc(vt)&&(vt=await B6(vt,Ot.signal,!0)||vt),H.get(ue)===tt&&H.delete(ue),!Ot.signal.aborted){if(de.has(ue)){$t(ue,nu(void 0));return}if(mc(vt))if(Y>Pn){$t(ue,nu(void 0));return}else{ne.add(ue),await jt(I,vt);return}if(lp(vt)){Ct(ue,me,vt.error);return}kt(!fc(vt),"Unhandled fetcher deferred data"),$t(ue,nu(vt.data))}}async function jt(ue,me,ke){let{submission:Me,fetcherSubmission:We,replace:yt}=ke===void 0?{}:ke;me.revalidate&&(K=!0);let ut=Lf(ue.location,me.location,{_isRedirect:!0});if(kt(ut,"Expected a location on the redirect navigation"),n){let un=!1;if(me.reloadDocument)un=!0;else if(I6.test(me.location)){const fn=t.history.createURL(me.location);un=fn.origin!==e.location.origin||ls(fn.pathname,l)==null}if(un){yt?e.location.replace(me.location):e.location.assign(me.location);return}}M=null;let ot=yt===!0?gr.Replace:gr.Push,{formMethod:tt,formAction:Ot,formEncType:Pn}=ue.navigation;!Me&&!We&&tt&&Ot&&Pn&&(Me=z6(ue.navigation));let vt=Me||We;if(WK.has(me.status)&&vt&&Mo(vt.formMethod))await Oe(ot,ut,{submission:sr({},vt,{formAction:me.location}),preventScrollReset:T});else{let un=CI(ut,Me);await Oe(ot,ut,{overrideNavigation:un,fetcherSubmission:We,preventScrollReset:T})}}async function Yt(ue,me,ke,Me,We){let yt=await Promise.all([...ke.map(tt=>Bf("loader",We,tt,me,i,a,l,u.v7_relativeSplatPath)),...Me.map(tt=>tt.matches&&tt.match&&tt.controller?Bf("loader",zf(t.history,tt.path,tt.controller.signal),tt.match,tt.matches,i,a,l,u.v7_relativeSplatPath):{type:lr.error,error:Ji(404,{pathname:tt.path})})]),ut=yt.slice(0,ke.length),ot=yt.slice(ke.length);return await Promise.all([F6(ue,ke,ut,ut.map(()=>We.signal),!1,I.loaderData),F6(ue,Me.map(tt=>tt.match),ot,Me.map(tt=>tt.controller?tt.controller.signal:null),!0)]),{results:yt,loaderResults:ut,fetcherResults:ot}}function Qt(){K=!0,X.push(...Is()),se.forEach((ue,me)=>{H.has(me)&&(Z.push(me),_n(me))})}function $t(ue,me,ke){ke===void 0&&(ke={}),I.fetchers.set(ue,me),Ee({fetchers:new Map(I.fetchers)},{flushSync:(ke&&ke.flushSync)===!0})}function Ct(ue,me,ke,Me){Me===void 0&&(Me={});let We=jf(I.matches,me);Xn(ue),Ee({errors:{[We.route.id]:ke},fetchers:new Map(I.fetchers)},{flushSync:(Me&&Me.flushSync)===!0})}function zn(ue){return u.v7_fetcherPersist&&(pe.set(ue,(pe.get(ue)||0)+1),de.has(ue)&&de.delete(ue)),I.fetchers.get(ue)||HK}function Xn(ue){let me=I.fetchers.get(ue);H.has(ue)&&!(me&&me.state==="loading"&&Q.has(ue))&&_n(ue),se.delete(ue),Q.delete(ue),ne.delete(ue),de.delete(ue),I.fetchers.delete(ue)}function za(ue){if(u.v7_fetcherPersist){let me=(pe.get(ue)||0)-1;me<=0?(pe.delete(ue),de.add(ue)):pe.set(ue,me)}else Xn(ue);Ee({fetchers:new Map(I.fetchers)})}function _n(ue){let me=H.get(ue);kt(me,"Expected fetch controller: "+ue),me.abort(),H.delete(ue)}function Qa(ue){for(let me of ue){let ke=zn(me),Me=nu(ke.data);I.fetchers.set(me,Me)}}function yo(){let ue=[],me=!1;for(let ke of ne){let Me=I.fetchers.get(ke);kt(Me,"Expected fetcher: "+ke),Me.state==="loading"&&(ne.delete(ke),ue.push(ke),me=!0)}return Qa(ue),me}function bi(ue){let me=[];for(let[ke,Me]of Q)if(Me<ue){let We=I.fetchers.get(ke);kt(We,"Expected fetcher: "+ke),We.state==="loading"&&(_n(ke),Q.delete(ke),me.push(ke))}return Qa(me),me.length>0}function hn(ue,me){let ke=I.blockers.get(ue)||Ff;return xe.get(ue)!==me&&xe.set(ue,me),ke}function Za(ue){I.blockers.delete(ue),xe.delete(ue)}function vi(ue,me){let ke=I.blockers.get(ue)||Ff;kt(ke.state==="unblocked"&&me.state==="blocked"||ke.state==="blocked"&&me.state==="blocked"||ke.state==="blocked"&&me.state==="proceeding"||ke.state==="blocked"&&me.state==="unblocked"||ke.state==="proceeding"&&me.state==="unblocked","Invalid blocker state transition: "+ke.state+" -> "+me.state);let Me=new Map(I.blockers);Me.set(ue,me),Ee({blockers:Me})}function xi(ue){let{currentLocation:me,nextLocation:ke,historyAction:Me}=ue;if(xe.size===0)return;xe.size>1&&op(!1,"A router only supports one blocker at a time");let We=Array.from(xe.entries()),[yt,ut]=We[We.length-1],ot=I.blockers.get(yt);if(!(ot&&ot.state==="proceeding")&&ut({currentLocation:me,nextLocation:ke,historyAction:Me}))return yt}function Is(ue){let me=[];return ie.forEach((ke,Me)=>{(!ue||ue(Me))&&(ke.cancel(),me.push(Me),ie.delete(Me))}),me}function ma(ue,me,ke){if(p=ue,g=me,f=ke||null,!y&&I.navigation===vI){y=!0;let Me=Ho(I.location,I.matches);Me!=null&&Ee({restoreScrollPosition:Me})}return()=>{p=null,g=null,f=null}}function wl(ue,me){return f&&f(ue,me.map(ke=>b6(ke,I.loaderData)))||ue.key}function fd(ue,me){if(p&&g){let ke=wl(ue,me);p[ke]=g()}}function Ho(ue,me){if(p){let ke=wl(ue,me),Me=p[ke];if(typeof Me=="number")return Me}return null}function Vt(ue){i={},s=fI(ue,a,void 0,i)}return C={get basename(){return l},get future(){return u},get state(){return I},get routes(){return o},get window(){return e},initialize:oe,subscribe:Ie,enableScrollRestoration:ma,navigate:Fe,fetch:nt,revalidate:Xe,createHref:ue=>t.history.createHref(ue),encodeLocation:ue=>t.history.encodeLocation(ue),getFetcher:zn,deleteFetcher:za,dispose:he,getBlocker:hn,deleteBlocker:Za,_internalFetchControllers:H,_internalActiveDeferreds:ie,_internalSetRoutes:Vt},C}function XK(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function xI(t,e,n,r,a,i,o,s){let l,u;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){u=d;break}}else l=e,u=e[e.length-1];let c=yI(a||".",gI(l,i),ls(t.pathname,n)||t.pathname,s==="path");return a==null&&(c.search=t.search,c.hash=t.hash),(a==null||a===""||a===".")&&u&&u.route.index&&!kI(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:qs([n,c.pathname])),hc(c)}function N6(t,e,n,r){if(!r||!XK(r))return{path:n};if(r.formMethod&&!nX(r.formMethod))return{path:n,error:Ji(405,{method:r.formMethod})};let a=()=>({path:n,error:Ji(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),s=L6(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Mo(o))return a();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,g)=>{let[y,v]=g;return""+f+y+"="+v+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:s,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!Mo(o))return a();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:s,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return a()}}}kt(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=wI(r.formData),u=r.formData;else if(r.body instanceof FormData)l=wI(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=O6(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=O6(l)}catch{return a()}let c={formMethod:o,formAction:s,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Mo(c.formMethod))return{path:n,submission:c};let d=Hs(n);return e&&d.search&&kI(d.search)&&l.append("index",""),d.search="?"+l,{path:hc(d),submission:c}}function YK(t,e){let n=t;if(e){let r=t.findIndex(a=>a.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function T6(t,e,n,r,a,i,o,s,l,u,c,d,p,f,g,y){let v=y?Object.values(y)[0]:g?Object.values(g)[0]:void 0,b=t.createURL(e.location),x=t.createURL(a),w=y?Object.keys(y)[0]:void 0,S=YK(n,w).filter((I,_)=>{let{route:T}=I;if(T.lazy)return!0;if(T.loader==null)return!1;if(i)return T.loader.hydrate?!0:e.loaderData[T.id]===void 0&&(!e.errors||e.errors[T.id]===void 0);if(QK(e.loaderData,e.matches[_],I)||s.some(L=>L===I.route.id))return!0;let M=e.matches[_],P=I;return R6(I,sr({currentUrl:b,currentParams:M.params,nextUrl:x,nextParams:P.params},r,{actionResult:v,defaultShouldRevalidate:o||b.pathname+b.search===x.pathname+x.search||b.search!==x.search||_6(M,P)}))}),C=[];return c.forEach((I,_)=>{if(i||!n.some(j=>j.route.id===I.routeId)||u.has(_))return;let T=sp(p,I.path,f);if(!T){C.push({key:_,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let M=e.fetchers.get(_),P=SI(T,I.path),L=!1;d.has(_)?L=!1:l.includes(_)?L=!0:M&&M.state!=="idle"&&M.data===void 0?L=o:L=R6(P,sr({currentUrl:b,currentParams:e.matches[e.matches.length-1].params,nextUrl:x,nextParams:n[n.length-1].params},r,{actionResult:v,defaultShouldRevalidate:o})),L&&C.push({key:_,routeId:I.routeId,path:I.path,matches:T,match:P,controller:new AbortController})}),[S,C]}function QK(t,e,n){let r=!e||n.route.id!==e.route.id,a=t[n.route.id]===void 0;return r||a}function _6(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function R6(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function $6(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let a=n[t.id];kt(a,"No route found in manifest");let i={};for(let o in r){let s=a[o]!==void 0&&o!=="hasErrorBoundary";op(!s,'Route "'+a.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!s&&!kK.has(o)&&(i[o]=r[o])}Object.assign(a,i),Object.assign(a,sr({},e(a),{lazy:void 0}))}async function Bf(t,e,n,r,a,i,o,s,l){l===void 0&&(l={});let u,c,d,p=y=>{let v,b=new Promise((x,w)=>v=w);return d=()=>v(),e.signal.addEventListener("abort",d),Promise.race([y({request:e,params:n.params,context:l.requestContext}),b])};try{let y=n.route[t];if(n.route.lazy)if(y){let v,b=await Promise.all([p(y).catch(x=>{v=x}),$6(n.route,i,a)]);if(v)throw v;c=b[0]}else if(await $6(n.route,i,a),y=n.route[t],y)c=await p(y);else if(t==="action"){let v=new URL(e.url),b=v.pathname+v.search;throw Ji(405,{method:e.method,pathname:b,routeId:n.route.id})}else return{type:lr.data,data:void 0};else if(y)c=await p(y);else{let v=new URL(e.url),b=v.pathname+v.search;throw Ji(404,{pathname:b})}kt(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(y){u=lr.error,c=y}finally{d&&e.signal.removeEventListener("abort",d)}if(tX(c)){let y=c.status;if(GK.has(y)){let b=c.headers.get("Location");if(kt(b,"Redirects returned/thrown from loaders/actions must have a Location header"),!I6.test(b))b=xI(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,b,s);else if(!l.isStaticRequest){let x=new URL(e.url),w=b.startsWith("//")?new URL(x.protocol+b):new URL(b),S=ls(w.pathname,o)!=null;w.origin===x.origin&&S&&(b=w.pathname+w.search+w.hash)}if(l.isStaticRequest)throw c.headers.set("Location",b),c;return{type:lr.redirect,status:y,location:b,revalidate:c.headers.get("X-Remix-Revalidate")!==null,reloadDocument:c.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:u===lr.error?lr.error:lr.data,response:c};let v;try{let b=c.headers.get("Content-Type");b&&/\bapplication\/json\b/.test(b)?c.body==null?v=null:v=await c.json():v=await c.text()}catch(b){return{type:lr.error,error:b}}return u===lr.error?{type:u,error:new bI(y,c.statusText,v),headers:c.headers}:{type:lr.data,data:v,statusCode:c.status,headers:c.headers}}if(u===lr.error)return{type:u,error:c};if(eX(c)){var f,g;return{type:lr.deferred,deferredData:c,statusCode:(f=c.init)==null?void 0:f.status,headers:((g=c.init)==null?void 0:g.headers)&&new Headers(c.init.headers)}}return{type:lr.data,data:c}}function zf(t,e,n,r){let a=t.createURL(L6(e)).toString(),i={signal:n};if(r&&Mo(r.formMethod)){let{formMethod:o,formEncType:s}=r;i.method=o.toUpperCase(),s==="application/json"?(i.headers=new Headers({"Content-Type":s}),i.body=JSON.stringify(r.json)):s==="text/plain"?i.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?i.body=wI(r.formData):i.body=r.formData}return new Request(a,i)}function wI(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function O6(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function ZK(t,e,n,r,a){let i={},o=null,s,l=!1,u={};return n.forEach((c,d)=>{let p=e[d].route.id;if(kt(!mc(c),"Cannot handle redirect results in processLoaderData"),lp(c)){let f=jf(t,p),g=c.error;r&&(g=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=g),i[p]=void 0,l||(l=!0,s=S6(c.error)?c.error.status:500),c.headers&&(u[p]=c.headers)}else fc(c)?(a.set(p,c.deferredData),i[p]=c.deferredData.data):i[p]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(s=c.statusCode),c.headers&&(u[p]=c.headers)}),r&&(o=r,i[Object.keys(r)[0]]=void 0),{loaderData:i,errors:o,statusCode:s||200,loaderHeaders:u}}function M6(t,e,n,r,a,i,o,s){let{loaderData:l,errors:u}=ZK(e,n,r,a,s);for(let c=0;c<i.length;c++){let{key:d,match:p,controller:f}=i[c];kt(o!==void 0&&o[c]!==void 0,"Did not find corresponding fetcher result");let g=o[c];if(!(f&&f.signal.aborted))if(lp(g)){let y=jf(t.matches,p?.route.id);u&&u[y.route.id]||(u=sr({},u,{[y.route.id]:g.error})),t.fetchers.delete(d)}else if(mc(g))kt(!1,"Unhandled fetcher revalidation redirect");else if(fc(g))kt(!1,"Unhandled fetcher deferred data");else{let y=nu(g.data);t.fetchers.set(d,y)}}return{loaderData:l,errors:u}}function P6(t,e,n,r){let a=sr({},e);for(let i of n){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(a[o]=e[o]):t[o]!==void 0&&i.route.loader&&(a[o]=t[o]),r&&r.hasOwnProperty(o))break}return a}function jf(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function A6(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Ji(t,e){let{pathname:n,routeId:r,method:a,type:i}=e===void 0?{}:e,o="Unknown Server Error",s="Unknown @remix-run/router error";return t===400?(o="Bad Request",a&&n&&r?s="You made a "+a+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?s="defer() is not supported in actions":i==="invalid-body"&&(s="Unable to encode submission body")):t===403?(o="Forbidden",s='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",s='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",a&&n&&r?s="You made a "+a.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":a&&(s='Invalid request method "'+a.toUpperCase()+'"')),new bI(t||500,o,new Error(s),!0)}function D6(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(mc(n))return{result:n,idx:e}}}function L6(t){let e=typeof t=="string"?Hs(t):t;return hc(sr({},e,{hash:""}))}function JK(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function fc(t){return t.type===lr.deferred}function lp(t){return t.type===lr.error}function mc(t){return(t&&t.type)===lr.redirect}function eX(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function tX(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function nX(t){return UK.has(t.toLowerCase())}function Mo(t){return jK.has(t.toLowerCase())}async function F6(t,e,n,r,a,i){for(let o=0;o<n.length;o++){let s=n[o],l=e[o];if(!l)continue;let u=t.find(d=>d.route.id===l.route.id),c=u!=null&&!_6(u,l)&&(i&&i[l.route.id])!==void 0;if(fc(s)&&(a||c)){let d=r[o];kt(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await B6(s,d,a).then(p=>{p&&(n[o]=p||n[o])})}}}async function B6(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:lr.data,data:t.deferredData.unwrappedData}}catch(r){return{type:lr.error,error:r}}return{type:lr.data,data:t.deferredData.data}}}function kI(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function SI(t,e){let n=typeof e=="string"?Hs(e).search:e.search;if(t[t.length-1].route.index&&kI(n||""))return t[t.length-1];let r=k6(t);return r[r.length-1]}function z6(t){let{formMethod:e,formAction:n,formEncType:r,text:a,formData:i,json:o}=t;if(!(!e||!n||!r)){if(a!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:a};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function CI(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function rX(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Vf(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function aX(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function nu(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function iX(t,e){try{let n=t.sessionStorage.getItem(E6);if(n){let r=JSON.parse(n);for(let[a,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(a,new Set(i||[]))}}catch{}}function oX(t,e){if(e.size>0){let n={};for(let[r,a]of e)n[r]=[...a];try{t.sessionStorage.setItem(E6,JSON.stringify(n))}catch(r){op(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
* React Router v6.22.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Uf(){return Uf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uf.apply(this,arguments)}const Gf=R.createContext(null),$y=R.createContext(null),Ks=R.createContext(null),Oy=R.createContext(null),ru=R.createContext({outlet:null,matches:[],isDataRoute:!1}),j6=R.createContext(null);function sX(t,e){let{relative:n}=e===void 0?{}:e;up()||kt(!1);let{basename:r,navigator:a}=R.useContext(Ks),{hash:i,pathname:o,search:s}=eo(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:qs([r,o])),a.createHref({pathname:l,search:s,hash:i})}function up(){return R.useContext(Oy)!=null}function gc(){return up()||kt(!1),R.useContext(Oy).location}function au(t){up()||kt(!1);let{pathname:e}=gc();return R.useMemo(()=>Ry(t,e),[e,t])}function V6(t){R.useContext(Ks).static||R.useLayoutEffect(t)}function lX(){let{isDataRoute:t}=R.useContext(ru);return t?SX():uX()}function uX(){up()||kt(!1);let t=R.useContext(Gf),{basename:e,future:n,navigator:r}=R.useContext(Ks),{matches:a}=R.useContext(ru),{pathname:i}=gc(),o=JSON.stringify(gI(a,n.v7_relativeSplatPath)),s=R.useRef(!1);return V6(()=>{s.current=!0}),R.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let c=yI(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:qs([e,c.pathname])),(u.replace?r.replace:r.push)(c,u.state,u)},[e,r,o,i,t])}const cX=R.createContext(null);function dX(t){let e=R.useContext(ru).outlet;return e&&R.createElement(cX.Provider,{value:t},e)}function eo(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(Ks),{matches:a}=R.useContext(ru),{pathname:i}=gc(),o=JSON.stringify(gI(a,r.v7_relativeSplatPath));return R.useMemo(()=>yI(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function pX(t,e,n,r){up()||kt(!1);let{navigator:a}=R.useContext(Ks),{matches:i}=R.useContext(ru),o=i[i.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=gc(),c;if(e){var d;let v=typeof e=="string"?Hs(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||kt(!1),c=v}else c=u;let p=c.pathname||"/",f=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=sp(t,{pathname:f}),y=yX(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:qs([l,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:qs([l,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&y?R.createElement(Oy.Provider,{value:{location:Uf({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:gr.Pop}},y):y}function hX(){let t=kX(),e=S6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:r},n):null,null)}const fX=R.createElement(hX,null);class mX extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(ru.Provider,{value:this.props.routeContext},R.createElement(j6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gX(t){let{routeContext:e,match:n,children:r}=t,a=R.useContext(Gf);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(ru.Provider,{value:e},r)}function yX(t,e,n,r){var a;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,s=(a=n)==null?void 0:a.errors;if(s!=null){let c=o.findIndex(d=>d.route.id&&s?.[d.route.id]);c>=0||kt(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:p,errors:f}=n,g=d.route.loader&&p[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,p)=>{let f,g=!1,y=null,v=null;n&&(f=s&&d.route.id?s[d.route.id]:void 0,y=d.route.errorElement||fX,l&&(u<0&&p===0?(CX("route-fallback",!1),g=!0,v=null):u===p&&(g=!0,v=d.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),x=()=>{let w;return f?w=y:g?w=v:d.route.Component?w=R.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,R.createElement(gX,{match:d,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?R.createElement(mX,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var U6=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(U6||{}),cp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(cp||{});function bX(t){let e=R.useContext(Gf);return e||kt(!1),e}function II(t){let e=R.useContext($y);return e||kt(!1),e}function vX(t){let e=R.useContext(ru);return e||kt(!1),e}function G6(t){let e=vX(),n=e.matches[e.matches.length-1];return n.route.id||kt(!1),n.route.id}function xX(){return II(cp.UseNavigation).navigation}function wX(){let{matches:t,loaderData:e}=II(cp.UseMatches);return R.useMemo(()=>t.map(n=>b6(n,e)),[t,e])}function kX(){var t;let e=R.useContext(j6),n=II(cp.UseRouteError),r=G6(cp.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function SX(){let{router:t}=bX(U6.UseNavigateStable),e=G6(cp.UseNavigateStable),n=R.useRef(!1);return V6(()=>{n.current=!0}),R.useCallback(function(r,a){a===void 0&&(a={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Uf({fromRouteId:e},a)))},[t,e])}const W6={};function CX(t,e,n){!e&&!W6[t]&&(W6[t]=!0)}function IX(t){return dX(t.context)}function dp(t){kt(!1)}function EX(t){let{basename:e="/",children:n=null,location:r,navigationType:a=gr.Pop,navigator:i,static:o=!1,future:s}=t;up()&&kt(!1);let l=e.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:l,navigator:i,static:o,future:Uf({v7_relativeSplatPath:!1},s)}),[l,s,i,o]);typeof r=="string"&&(r=Hs(r));let{pathname:c="/",search:d="",hash:p="",state:f=null,key:g="default"}=r,y=R.useMemo(()=>{let v=ls(c,l);return v==null?null:{location:{pathname:v,search:d,hash:p,state:f,key:g},navigationType:a}},[l,c,d,p,f,g,a]);return y==null?null:R.createElement(Ks.Provider,{value:u},R.createElement(Oy.Provider,{children:n,value:y}))}new Promise(()=>{});function EI(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,a)=>{if(!R.isValidElement(r))return;let i=[...e,a];if(r.type===R.Fragment){n.push.apply(n,EI(r.props.children,i));return}r.type!==dp&&kt(!1),!r.props.index||!r.props.children||kt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=EI(r.props.children,i)),n.push(o)}),n}function NX(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:R.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:R.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:R.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
* React Router DOM v6.22.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function yc(){return yc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yc.apply(this,arguments)}function H6(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function TX(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _X(t,e){return t.button===0&&(!e||e==="_self")&&!TX(t)}const RX=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],$X=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],OX="6";try{window.__reactRouterVersion=OX}catch{}function MX(t,e){return KK({basename:e?.basename,future:yc({},e?.future,{v7_prependBasename:!0}),history:vK({window:e?.window}),hydrationData:e?.hydrationData||PX(),routes:t,mapRouteProperties:NX,window:e?.window}).initialize()}function PX(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=yc({},e,{errors:AX(e.errors)})),e}function AX(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,a]of e)if(a&&a.__type==="RouteErrorResponse")n[r]=new bI(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let i=window[a.__subType];if(typeof i=="function")try{let o=new i(a.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let i=new Error(a.message);i.stack="",n[r]=i}}else n[r]=a;return n}const q6=R.createContext({isTransitioning:!1}),DX=R.createContext(new Map),LX="startTransition",K6=gR[LX],FX="flushSync",X6=rK[FX];function BX(t){K6?K6(t):t()}function Wf(t){X6?X6(t):t()}class zX{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function jX(t){let{fallbackElement:e,router:n,future:r}=t,[a,i]=R.useState(n.state),[o,s]=R.useState(),[l,u]=R.useState({isTransitioning:!1}),[c,d]=R.useState(),[p,f]=R.useState(),[g,y]=R.useState(),v=R.useRef(new Map),{v7_startTransition:b}=r||{},x=R.useCallback(_=>{b?BX(_):_()},[b]),w=R.useCallback((_,T)=>{let{deletedFetchers:M,unstable_flushSync:P,unstable_viewTransitionOpts:L}=T;M.forEach(B=>v.current.delete(B)),_.fetchers.forEach((B,K)=>{B.data!==void 0&&v.current.set(K,B.data)});let j=n.window==null||typeof n.window.document.startViewTransition!="function";if(!L||j){P?Wf(()=>i(_)):x(()=>i(_));return}if(P){Wf(()=>{p&&(c&&c.resolve(),p.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let B=n.window.document.startViewTransition(()=>{Wf(()=>i(_))});B.finished.finally(()=>{Wf(()=>{d(void 0),f(void 0),s(void 0),u({isTransitioning:!1})})}),Wf(()=>f(B));return}p?(c&&c.resolve(),p.skipTransition(),y({state:_,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(s(_),u({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[n.window,p,c,v,x]);R.useLayoutEffect(()=>n.subscribe(w),[n,w]),R.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new zX)},[l]),R.useEffect(()=>{if(c&&o&&n.window){let _=o,T=c.promise,M=n.window.document.startViewTransition(async()=>{x(()=>i(_)),await T});M.finished.finally(()=>{d(void 0),f(void 0),s(void 0),u({isTransitioning:!1})}),f(M)}},[x,o,c,n.window]),R.useEffect(()=>{c&&o&&a.location.key===o.location.key&&c.resolve()},[c,p,a.location,o]),R.useEffect(()=>{!l.isTransitioning&&g&&(s(g.state),u({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),y(void 0))},[l.isTransitioning,g]),R.useEffect(()=>{},[]);let S=R.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:_=>n.navigate(_),push:(_,T,M)=>n.navigate(_,{state:T,preventScrollReset:M?.preventScrollReset}),replace:(_,T,M)=>n.navigate(_,{replace:!0,state:T,preventScrollReset:M?.preventScrollReset})}),[n]),C=n.basename||"/",I=R.useMemo(()=>({router:n,navigator:S,static:!1,basename:C}),[n,S,C]);return R.createElement(R.Fragment,null,R.createElement(Gf.Provider,{value:I},R.createElement($y.Provider,{value:a},R.createElement(DX.Provider,{value:v.current},R.createElement(q6.Provider,{value:l},R.createElement(EX,{basename:C,location:a.location,navigationType:a.historyAction,navigator:S,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},a.initialized||n.future.v7_partialHydration?R.createElement(VX,{routes:n.routes,future:n.future,state:a}):e))))),null)}function VX(t){let{routes:e,future:n,state:r}=t;return pX(e,void 0,r,n)}const UX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NI=R.forwardRef(function(t,e){let{onClick:n,relative:r,reloadDocument:a,replace:i,state:o,target:s,to:l,preventScrollReset:u,unstable_viewTransition:c}=t,d=H6(t,RX),{basename:p}=R.useContext(Ks),f,g=!1;if(typeof l=="string"&&GX.test(l)&&(f=l,UX))try{let x=new URL(window.location.href),w=l.startsWith("//")?new URL(x.protocol+l):new URL(l),S=ls(w.pathname,p);w.origin===x.origin&&S!=null?l=S+w.search+w.hash:g=!0}catch{}let y=sX(l,{relative:r}),v=qX(l,{replace:i,state:o,target:s,preventScrollReset:u,relative:r,unstable_viewTransition:c});function b(x){n&&n(x),x.defaultPrevented||v(x)}return R.createElement("a",yc({},d,{href:f||y,onClick:g||a?n:b,ref:e,target:s}))}),My=R.forwardRef(function(t,e){let{"aria-current":n="page",caseSensitive:r=!1,className:a="",end:i=!1,style:o,to:s,unstable_viewTransition:l,children:u}=t,c=H6(t,$X),d=eo(s,{relative:c.relative}),p=gc(),f=R.useContext($y),{navigator:g,basename:y}=R.useContext(Ks),v=f!=null&&YX(d)&&l===!0,b=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,x=p.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(x=x.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&y&&(w=ls(w,y)||w);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let C=x===b||!i&&x.startsWith(b)&&x.charAt(S)==="/",I=w!=null&&(w===b||!i&&w.startsWith(b)&&w.charAt(b.length)==="/"),_={isActive:C,isPending:I,isTransitioning:v},T=C?n:void 0,M;typeof a=="function"?M=a(_):M=[a,C?"active":null,I?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(_):o;return R.createElement(NI,yc({},c,{"aria-current":T,className:M,ref:e,style:P,to:s,unstable_viewTransition:l}),typeof u=="function"?u(_):u)});function WX(t){let{getKey:e,storageKey:n}=t;return KX({getKey:e,storageKey:n}),null}var Py;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Py||(Py={}));var TI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(TI||(TI={}));function Y6(t){let e=R.useContext(Gf);return e||kt(!1),e}function HX(t){let e=R.useContext($y);return e||kt(!1),e}function qX(t,e){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:s}=e===void 0?{}:e,l=lX(),u=gc(),c=eo(t,{relative:o});return R.useCallback(d=>{if(_X(d,n)){d.preventDefault();let p=r!==void 0?r:hc(u)===hc(c);l(t,{replace:p,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:s})}},[u,l,c,r,a,n,t,i,o,s])}const Q6="react-router-scroll-positions";let Ay={};function KX(t){let{getKey:e,storageKey:n}=t===void 0?{}:t,{router:r}=Y6(Py.UseScrollRestoration),{restoreScrollPosition:a,preventScrollReset:i}=HX(TI.UseScrollRestoration),{basename:o}=R.useContext(Ks),s=gc(),l=wX(),u=xX();R.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),XX(R.useCallback(()=>{if(u.state==="idle"){let c=(e?e(s,l):null)||s.key;Ay[c]=window.scrollY}try{sessionStorage.setItem(n||Q6,JSON.stringify(Ay))}catch{}window.history.scrollRestoration="auto"},[n,e,u.state,s,l])),typeof document<"u"&&(R.useLayoutEffect(()=>{try{let c=sessionStorage.getItem(n||Q6);c&&(Ay=JSON.parse(c))}catch{}},[n]),R.useLayoutEffect(()=>{let c=e&&o!=="/"?(p,f)=>e(yc({},p,{pathname:ls(p.pathname,o)||p.pathname}),f):e,d=r?.enableScrollRestoration(Ay,()=>window.scrollY,c);return()=>d&&d()},[r,o,e]),R.useLayoutEffect(()=>{if(a!==!1){if(typeof a=="number"){window.scrollTo(0,a);return}if(s.hash){let c=document.getElementById(decodeURIComponent(s.hash.slice(1)));if(c){c.scrollIntoView();return}}i!==!0&&window.scrollTo(0,0)}},[s,a,i]))}function XX(t,e){let{capture:n}=e||{};R.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("pagehide",t,r),()=>{window.removeEventListener("pagehide",t,r)}},[t,n])}function YX(t,e){e===void 0&&(e={});let n=R.useContext(q6);n==null&&kt(!1);let{basename:r}=Y6(Py.useViewTransitionState),a=eo(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=ls(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ls(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ry(a.pathname,o)!=null||Ry(a.pathname,i)!=null}const Hf=W.createContext({theme:"material",dark:!0,touchRipple:!0});function QX(t,e){return typeof window>"u"?R.useEffect(t,e):R.useLayoutEffect(t,e)}const Z6=function(t,e){e===void 0&&(e=!0);const[n,r]=R.useState(t);return QX(()=>{if(e){if(t==="ios"||t==="material")n!==t&&r(t);else if(n==="parent"&&typeof window<"u"&&typeof document<"u"){const a=document.documentElement;a&&(a.classList.contains("ios")?r("ios"):(a.classList.contains("md")||a.classList.contains("material"))&&r("material"))}}},[t]),e?n:t},ZX=t=>{const{theme:e,dark:n,touchRipple:r=!0,autoThemeDetection:a=!0,children:i}=t,o=Z6(e,a);return W.createElement(Hf.Provider,{value:{theme:o,dark:n,touchRipple:r}},i)};function A(){const t=[];for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>{typeof i=="object"&&i.constructor===Object?Object.keys(i).forEach(o=>{i[o]&&t.push(o)}):Array.isArray(i)?t.push(...i):typeof i=="function"?t.push(i()):i&&i.value?t.push(i.value):i&&t.push(i)});const a=[];return t.forEach(i=>{a.indexOf(i)<0&&a.push(i)}),a.filter(i=>!!i).join(" ")}const tr=function(t,e){return e===void 0&&(e=""),!e||typeof e!="string"?t:["static","relative","absolute","fixed","sticky"].filter(n=>e.indexOf(n)>=0).length>0?"":t},JX=(t,e,n)=>{const{safeAreas:r}=t;return A(e==="ios"&&"k-ios",e==="material"&&"k-material","k-app w-full h-full min-h-screen",r&&"safe-areas",tr("relative",n),n)};function _I(){return _I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_I.apply(this,arguments)}const J6=R.forwardRef((t,e)=>{const{component:n="div",className:r,theme:a="material",dark:i=!0,touchRipple:o=!0,safeAreas:s=!0,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=Z6(a),g=JX({...t,safeAreas:s},f,r);return W.createElement(ZX,{theme:f,dark:i,touchRipple:o,autoThemeDetection:!1},W.createElement(d,_I({ref:c,className:g},p),l))});J6.displayName="App";const RI=(t,e,n)=>{if(typeof t=="string")return t;const r=[t.common,t[e]];return n&&t[n]&&(typeof t[n]=="string"?r.push(t[n]):r.push(t[n].common,t[n][e])),r},eY=(t,e,n)=>{const r={},a=["common","ios","material"];return Object.keys(t).forEach(i=>{const o=i==="base"?n:"";if(!(typeof t[i]!="string"&&Object.keys(t[i]).filter(l=>!a.includes(l)).length>0)){r[i]=A(RI(t[i],e),o);return}r[i]={};const s=RI(t[i],e);r[i].default=A(s,o),Object.keys(t[i]).filter(l=>!a.includes(l)).forEach(l=>{r[i][l]=A(s,RI(t[i],e,l),o)})}),r},it=function(t){let{ios:e,material:n}=t===void 0?{}:t,r=R.useContext(Hf).theme||"ios";return e&&(r="ios"),n&&(r="material"),(a,i)=>eY(a,r,i)},tY=(t,e)=>({base:{common:A("transition-transform z-40 left-1/2 bottom-0 transform -translate-x-1/2 max-w-md w-full overflow-hidden",tr("fixed",e)),ios:"pt-2 px-2 pb-2-safe duration-300",material:"pb-safe last-child-hairline-b-none rounded-t-2xl duration-400 ease-material-in",opened:"",closed:"translate-y-full"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}});function $I(){return $I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$I.apply(this,arguments)}const nY=R.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,opened:o,backdrop:s=!0,onBackdropClick:l,children:u,...c}=t,d=R.useRef(null);R.useImperativeHandle(e,()=>({el:d.current}));const p=o?"opened":"closed",f=n,g={...c},y=it({ios:a,material:i})(tY(t,r),r);return W.createElement(W.Fragment,null,s&&W.createElement("div",{className:y.backdrop[p],onClick:l}),W.createElement(f,$I({ref:d,className:y.base[p]},g),u))});nY.displayName="Actions";const rY=t=>{const{dividers:e}=t;return{base:{common:"relative",ios:"mt-2 first:mt-0 last-child-hairline-b-none",material:A(e&&"hairline-b")}}};function OI(){return OI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OI.apply(this,arguments)}const aY=R.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,dividers:o=!0,children:s,...l}=t,u=R.useRef(null);R.useImperativeHandle(e,()=>({el:u.current}));const c=n,d={...l},p=it({ios:a,material:i})(rY({dividers:o,...t}),r);return W.createElement(c,OI({ref:u,className:p.base},d),s)});aY.displayName="ActionsGroup";const yn=function(t){let{ios:e,material:n}=t===void 0?{}:t,r=R.useContext(Hf).theme||"ios";return e&&(r="ios"),n&&(r="material"),r};class iY{constructor(e,n,r){const a=this;if(!e)return;a.el=e;const{left:i,top:o,width:s,height:l}=e.getBoundingClientRect(),u={x:n-i,y:r-o};let c=Math.max((l**2+s**2)**.5,48);const d=e.classList.contains("k-touch-ripple-inset");d&&(c=Math.max(Math.min(s,l),48));const p=typeof window<"u"&&window.getComputedStyle(e,null).getPropertyValue("overflow")==="hidden";if(!d&&p){const g=((u.x-s/2)**2+(u.y-l/2)**2)**.5,y=(c/2+g)/(c/2);a.rippleTransform=`translate3d(0px, 0px, 0) scale(${y})`}else a.rippleTransform=`translate3d(${-u.x+s/2}px, ${-u.y+l/2}px, 0) scale(1)`;a.rippleWaveEl=document.createElement("span"),a.rippleWaveEl.classList.add("k-touch-ripple-wave"),a.rippleWaveEl.setAttribute("hidden",""),a.rippleWaveEl.style=`
      width: ${c}px;
      height: ${c}px;
      margin-top:-${c/2}px;
      margin-left:-${c/2}px;
      left:${u.x}px;
      top:${u.y}px; --k-ripple-transform: ${a.rippleTransform}`,e.insertAdjacentElement("afterbegin",a.rippleWaveEl);const f=()=>{a.rippleWaveEl.removeEventListener("animationend",f),a.rippleWaveEl&&(a.rippleWaveEl.classList.contains("k-touch-ripple-wave-out")||(a.rippleWaveEl.classList.add("k-touch-ripple-wave-in"),a.shouldBeRemoved&&a.out()))};return a.rippleWaveEl.addEventListener("animationend",f),a}destroy(){let e=this;e.rippleWaveEl&&e.el.removeChild(e.rippleWaveEl),Object.keys(e).forEach(n=>{e[n]=null,delete e[n]}),e=null}out(){const e=this,{rippleWaveEl:n}=this;clearTimeout(e.removeTimeout),n.classList.add("k-touch-ripple-wave-out"),e.removeTimeout=setTimeout(()=>{e.destroy()},300);const r=()=>{e.rippleWaveEl.removeEventListener("animationend",r),clearTimeout(e.removeTimeout),e.destroy()};e.rippleWaveEl.addEventListener("animationend",r)}remove(){const e=this;e.shouldBeRemoved||(e.removeTimeout=setTimeout(()=>{e.destroy()},400),e.shouldBeRemoved=!0,e.rippleWaveEl.classList.contains("k-touch-ripple-wave-in")&&e.out())}}const Po=(t,e,n)=>{const r=R.useContext(Hf);n||(n=t);const a=R.useRef(null),i=()=>{a.current&&a.current.remove(),a.current=null},o=f=>{a.current=new iY(t.current,f.pageX,f.pageY)},s=()=>{i()},l=()=>{i()},u=()=>{if(!r.touchRipple)return;const f=n.current;f.addEventListener("pointerdown",o),f.addEventListener("pointermove",s),f.addEventListener("pointerup",l),f.addEventListener("pointercancel",l),f.addEventListener("contextmenu",l)},c=()=>{const f=n.current;f.removeEventListener("pointerdown",o),f.removeEventListener("pointermove",s),f.removeEventListener("pointerup",l),f.removeEventListener("pointercancel",l),f.removeEventListener("contextmenu",l)},d=()=>{!n||!n.current||!e||u()},p=()=>{!n||!n.current||!e||c()};R.useEffect(()=>(d(),()=>p()))},Tt=()=>{const t=R.useContext(Hf);return e=>t.dark?e:""},oY=(t,e,n)=>{const{fontSizeIos:r,fontSizeMaterial:a,bold:i,dividers:o}=t;return{base:{common:A("flex items-center w-full px-4 relative z-10 overflow-hidden",o&&"hairline-b"),ios:A("h-14",e.textIos,e.bgIos,e.activeBgIos,r,"first:rounded-t-xl last:rounded-b-xl justify-center",i&&"font-semibold"),material:A("h-12",e.textMaterial,e.bgMaterial,e.activeBgMaterial,a,"justify-start",n("dark:touch-ripple-white"),i&&"font-medium")}}},sY=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-neutral-800")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),activeBgIos:A("active:bg-neutral-200",e("dark:active:bg-neutral-700")),activeBgMaterial:"",textIos:"text-primary",textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t}};function MI(){return MI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MI.apply(this,arguments)}const lY=R.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,bold:s,boldIos:l=!1,boldMaterial:u=!1,fontSizeIos:c="text-xl",fontSizeMaterial:d="text-base",href:p,touchRipple:f=!0,dividers:g=void 0,children:y,...v}=t,b=R.useRef(null);R.useImperativeHandle(e,()=>({el:b.current}));let x=n;typeof t.component>"u"&&(p||p==="")&&(x="a");const w={href:p,...v},S=yn({ios:i,material:o}),C=it({ios:i,material:o}),I=Tt();Po(b,S==="material"&&f);const _=sY(a,I),T=C(oY({fontSizeIos:c,fontSizeMaterial:d,bold:typeof s>"u"?S==="ios"?l:u:s,dividers:typeof g>"u"?S==="ios":g,...t},_,I),r);return W.createElement(x,MI({ref:b,role:"button",tabIndex:"0",className:T.base},w),y)});lY.displayName="ActionsButton";const uY=(t,e)=>{const{fontSizeIos:n,fontSizeMaterial:r,dividers:a}=t;return{base:{common:A(`flex items-center w-full px-4 relative z-10 overflow-hidden ${e.activeBg}`,a&&"hairline-b"),ios:A("h-14",e.bgIos,e.textIos,n,"first:rounded-t-xl last:rounded-b-xl justify-center"),material:A("h-12",e.bgMaterial,e.textMaterial,r,"font-medium","justify-start")}}},cY=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-neutral-800")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),textIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function PI(){return PI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PI.apply(this,arguments)}const dY=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,fontSizeIos:s="text-sm",fontSizeMaterial:l="text-sm",dividers:u=void 0,children:c,...d}=t,p=R.useRef(null);R.useImperativeHandle(e,()=>({el:p.current}));const f=n,g={...d},y=yn({ios:i,material:o}),v=it({ios:i,material:o}),b=Tt(),x=cY(a,b),w=v(uY({fontSizeIos:s,fontSizeMaterial:l,dividers:typeof u>"u"?y==="ios":u,...t},x),r);return W.createElement(f,PI({ref:p,className:w.base},g),c)});dY.displayName="ActionsLabel";const pY=(t,e)=>({base:{common:`${e.text} ${e.bg} inline-flex items-center justify-center rounded-full leading-none`,ios:"font-semibold",material:"font-medium",sm:"text-2xs min-w-4 min-h-4 px-0.5",md:"text-xs min-w-5 min-h-5 px-1.5 py-0.5"}}),hY=function(t){return t===void 0&&(t={}),{bg:"bg-primary",text:"text-white",...t}};function AI(){return AI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AI.apply(this,arguments)}const eP=R.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,small:i,ios:o,material:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it({ios:o,material:s}),g=hY(a),y=i?"sm":"md",v=f(pY(t,g),r);return W.createElement(d,AI({ref:c,className:v.base[y]},p),l)});eP.displayName="Badge";const fY=(t,e,n)=>{const{inset:r,nested:a,margin:i,padding:o,strong:s,outline:l}=t;return{base:{common:A("text-sm z-10",tr("relative",n),!r&&!a&&l&&"hairline-t hairline-b",r&&l&&"border",r&&"px-4",!r&&"pl-4-safe pr-4-safe",!a&&i,(s||l)&&o),ios:A(e.textIos,s&&e.strongBgIos,r&&l&&e.outlineIos),material:A(e.textMaterial,s&&e.strongBgMaterial,r&&l&&e.outlineMaterial)},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"}}},mY=function(t,e){return t===void 0&&(t={}),{outlineIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-15")),outlineMaterial:A("border-md-light-outline",e("border-md-dark-outline")),strongBgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),strongBgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),textIos:"",textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t}};function DI(){return DI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DI.apply(this,arguments)}const to=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,margin:i="my-8",padding:o="py-4",inset:s,insetIos:l,insetMaterial:u,strong:c,strongIos:d,strongMaterial:p,outline:f,outlineIos:g,outlineMaterial:y,nested:v,ios:b,material:x,children:w,...S}=t,C=R.useRef(null);R.useImperativeHandle(e,()=>({el:C.current}));const I=n,_={...S},T=yn({ios:b,material:x}),M=it({ios:b,material:x}),P=Tt(),L=mY(a,P),j=typeof c>"u"?T==="ios"?d:p:c,B=typeof f>"u"?T==="ios"?g:y:f,K=typeof s>"u"?T==="ios"?l:u:s,X=M(fY({...t,margin:i,padding:o,inset:K,strong:j,outline:B},L,r)),Z=A(X.base,K&&X.inset,r);return W.createElement(I,DI({ref:C,className:Z},_),w)});to.displayName="Block";const gY=(t,e)=>{const{inset:n}=t;return{base:{common:A("mb-8 flex items-center -mt-6 text-sm",n?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:e.textIos,material:e.textMaterial}}},yY=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black text-opacity-75",e("dark:text-white dark:text-opacity-75")),textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function LI(){return LI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LI.apply(this,arguments)}const bY=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,inset:s,insetIos:l,insetMaterial:u,children:c,...d}=t,p=R.useRef(null);R.useImperativeHandle(e,()=>({el:p.current}));const f=yn(),g=typeof s>"u"?f==="ios"?l:u:s,y=n,v={...d},b=it({ios:i,material:o}),x=Tt(),w=yY(a,x),S=b(gY({...t,inset:g},w),r);return W.createElement(y,LI({ref:p,className:S.base},v),c)});bY.displayName="BlockFooter";const vY=(t,e)=>{const{inset:n}=t;return{base:{common:A("mt-8 flex items-center -mb-6 text-sm",n?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:e.textIos,material:e.textMaterial}}},xY=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black",e("dark:text-white")),textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function FI(){return FI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FI.apply(this,arguments)}const wY=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,inset:s,insetIos:l,insetMaterial:u,children:c,...d}=t,p=R.useRef(null);R.useImperativeHandle(e,()=>({el:p.current}));const f=n,g={...d},y=yn(),v=typeof s>"u"?y==="ios"?l:u:s,b=it({ios:i,material:o}),x=Tt(),w=xY(a,x),S=b(vY({...t,inset:v},w),r);return W.createElement(f,FI({ref:p,className:S.base},g),c)});wY.displayName="BlockHeader";const kY=(t,e)=>{const{withBlock:n,medium:r,large:a}=t;return{base:{common:`pl-4-safe pr-4-safe mt-8 flex justify-between items-center ${n?"-mb-6":"mb-2"}`,ios:A(`font-semibold ${e.textIos}`,a&&"text-[1.5rem]",r&&"text-[1.125rem]",!r&&!a&&"text-[1rem]"),material:A(`font-medium ${e.textMaterial}`,a&&"text-[1.375rem]",r&&"text-[1rem]",!r&&!a&&"text-[0.875rem]")}}},SY=function(t,e){return t===void 0&&(t={}),{textIos:"",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function BI(){return BI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BI.apply(this,arguments)}const CY=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,withBlock:i=!0,medium:o,large:s,ios:l,material:u,children:c,...d}=t,p=R.useRef(null);R.useImperativeHandle(e,()=>({el:p.current}));const f=n,g={...d},y=it({ios:l,material:u}),v=Tt(),b=SY(a,v),x=y(kY({...t,withBlock:i},b),r);return W.createElement(f,BI({ref:p,className:x.base},g),c)});CY.displayName="BlockTitle";const IY=t=>{const{fontSizeIos:e,fontSizeMaterial:n}=t;return{base:{common:"flex items-center justify-start overflow-auto whitespace-nowrap py-1 px-0 space-x-3 no-scrollbar rtl:space-x-reverse",ios:e,material:n}}};function zI(){return zI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zI.apply(this,arguments)}const EY=R.forwardRef((t,e)=>{const{component:n="div",className:r,fontSizeIos:a="text-[17px]",fontSizeMaterial:i="text-[14px]",ios:o,material:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it({ios:o,material:s})(IY({...t,fontSizeIos:a,fontSizeMaterial:i}),r);return W.createElement(d,zI({ref:c,className:f.base},p),l)});EY.displayName="Breadcrumbs";const NY=(t,e)=>{const{active:n}=t;return{base:{common:A("flex items-center overflow-hidden"),ios:A(e.textIos,e.bgIos,n?e.textActiveIos:e.textIos,n&&"font-semibold"),material:A("font-medium px-2 py-1 rounded-lg",e.bgMaterial,n?e.textActiveMaterial:e.textMaterial)}}},TY=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),textMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),bgIos:"",bgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),textActiveIos:A("text-black",e("dark:text-white")),textActiveMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),...t}};function jI(){return jI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jI.apply(this,arguments)}const _Y=R.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,colors:o,active:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it({ios:a,material:i}),g=Tt(),y=TY(o,g),v=f(NY({...t},y),r);return W.createElement(d,jI({ref:c,className:v.base,role:"menuitem",tabIndex:"0"},p),l)});_Y.displayName="BreadcrumbsItem";const RY=()=>({base:{common:"w-3 opacity-35 flex justify-center",ios:"",material:""},icon:{common:"rtl:rotate-180",ios:"h-3",material:"h-2.5"}});function VI(){return VI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VI.apply(this,arguments)}const tP=t=>W.createElement("svg",VI({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"14",viewBox:"0 0 12 20",fill:"currentcolor"},t),W.createElement("path",{d:"M11.518406,10.5648622 C11.4831857,10.6163453 11.4426714,10.6653692 11.3968592,10.7111814 L2.5584348,19.5496058 C1.9753444,20.1326962 1.03186648,20.1345946 0.44199608,19.5447242 C-0.14379032,18.9589377 -0.14922592,18.0146258 0.43711448,17.4282854 L7.87507783,9.9903221 L0.4431923,2.5584366 C-0.1398981,1.9753462 -0.1417965,1.0318683 0.448074,0.4419979 C1.0338604,-0.1437886 1.9781723,-0.1492241 2.56451268,0.4371163 L11.4029371,9.2755407 C11.7556117,9.6282153 11.7969345,10.1725307 11.518406,10.5648622 Z"}));function UI(){return UI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UI.apply(this,arguments)}const $Y=R.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,children:o,...s}=t,l=R.useRef(null);R.useImperativeHandle(e,()=>({el:l.current}));const u=n,c={...s},d=it({ios:a,material:i})(RY({...t}),r);return W.createElement(u,UI({ref:l,className:d.base},c),W.createElement(tP,{className:d.icon}),o)});$Y.displayName="BreadcrumbsSeparator";const OY=(t,e)=>({base:{common:`flex items-center cursor-pointer space-x-0.75 rtl:space-x-reverse ${e.bg}`,ios:A("rounded active:opacity-30 px-1.5 h-[1em] duration-300 active:duration-0",e.bgIos),material:A("py-3 px-2 rounded-lg",e.bgMaterial)},dot:{common:`w-1 h-1 rounded-full ${e.dotBg}`,ios:e.dotBgIos,material:e.dotBgMaterial}}),MY=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-black bg-opacity-15",e("dark:bg-white dark:bg-opacity-15")),bgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),dotBgIos:A("bg-black",e("dark:bg-white")),dotBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function GI(){return GI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GI.apply(this,arguments)}const PY=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,...l}=t,u=R.useRef(null);R.useImperativeHandle(e,()=>({el:u.current}));const c=Tt(),d=MY(a,c),p=n,f={...l},g=it({ios:i,material:o})(OY({...t},d),r);return W.createElement(p,GI({ref:u,role:"button",tabIndex:"0",className:g.base},f),W.createElement("span",{className:g.dot}),W.createElement("span",{className:g.dot}),W.createElement("span",{className:g.dot}),s)});PY.displayName="BreadcrumbsCollapsed";const AY=(t,e,n,r)=>{const{inline:a,segmented:i,segmentedStrong:o,segmentedActive:s,disabled:l}=t;return{base:{common:A("flex text-center justify-center items-center appearance-none py-1 transition-colors focus:outline-none cursor-pointer select-none overflow-hidden z-10",a?"inline-flex":"w-full flex",tr("relative",n),l&&"pointer-events-none",o&&s&&"k-segmented-strong-button-active"),ios:"uppercase duration-100 font-semibold px-2",material:"duration-300 font-medium px-4",square:{ios:i&&!o?"first:rounded-s last:rounded-e":"rounded",material:i&&!o?"first:rounded-lg-s last:rounded-lg-e":"rounded-lg"},rounded:i&&!o?"":"rounded-full"},style:{fill:{common:A(l&&A(e.disabledBg,e.disabledText)),ios:A(l?A(e.disabledBg,e.disabledText):`${e.fillTextIos} ${e.fillBgIos} ${e.fillActiveBgIos}`),material:A(l?A(e.disabledBg,e.disabledText):A(e.fillTextMaterial,e.fillBgMaterial,e.fillActiveBgMaterial,e.fillTouchRipple))},outline:{common:A(l?A(e.disabledText,e.disabledBorder):A("active:bg-opacity-15",e.touchRipple)),ios:A(!i&&"border-2",!l&&!i&&e.outlineBorderIos,!l&&A(e.textIos,e.activeBgIos)),material:A(!i&&"border",!l&&!i&&e.outlineBorderMaterial,!l&&A(e.textMaterial,e.activeBgMaterial))},clear:{common:A(l?e.disabledText:`active:bg-opacity-15 ${e.touchRipple}`),ios:!l&&A(e.textIos,e.activeBgIos),material:!l&&A(e.textMaterial,e.activeBgMaterial)},tonal:{common:l?A(e.disabledBg,e.disabledText):A(e.touchRipple),ios:!l&&A(e.tonalTextIos,e.tonalBgIos,e.activeBgIos,"bg-opacity-15 active:bg-opacity-25"),material:!l&&A(e.tonalTextMaterial,e.tonalBgMaterial,e.activeBgMaterial)},segmentedStrong:A("active:bg-black active:bg-opacity-10",r("dark:active:bg-white dark:active:bg-opacity-5 dark:touch-ripple-white")),segmentedStrongActive:"duration-0"},size:{small:{ios:"text-xs h-7",material:"text-sm h-8"},medium:{common:"text-sm",ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},raised:"shadow active:shadow-lg"}},DY=function(t,e){return t===void 0&&(t={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:A("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:A("text-white"),fillTextMaterial:A("text-md-light-on-primary",e("dark:text-md-dark-on-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillBgIos:"bg-primary",fillBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),fillTouchRipple:A("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),tonalBgIos:"bg-primary",tonalBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),tonalTextIos:"text-primary",tonalTextMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),touchRipple:"touch-ripple-primary",disabledText:A("text-black text-opacity-30",e("dark:text-white dark:text-opacity-30")),disabledBg:A("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-10")),disabledBorder:A("border-black border-opacity-10",e("dark:border-white dark:border-opacity-10")),...t}};function WI(){return WI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WI.apply(this,arguments)}const yr=R.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,disabled:s,href:l,outline:u,outlineIos:c,outlineMaterial:d,clear:p,clearIos:f,clearMaterial:g,tonal:y,tonalIos:v,tonalMaterial:b,rounded:x,roundedIos:w,roundedMaterial:S,small:C,smallIos:I,smallMaterial:_,large:T,largeIos:M,largeMaterial:P,raised:L,raisedIos:j,raisedMaterial:B,inline:K,segmented:X,segmentedStrong:Z,segmentedActive:H,touchRipple:F=!0,children:Y,...Q}=t,ne=R.useRef(null);R.useImperativeHandle(e,()=>({el:ne.current}));let se=n;typeof t.component>"u"&&(l||l==="")&&(se="a");const pe={href:l,...Q},de=yn({ios:i,material:o}),ie=it({ios:i,material:o}),xe=Tt();Po(ne,de==="material"&&F);const q=(Fe=>{const Xe={};return Object.keys(Fe).forEach(Oe=>{Xe[Oe]=typeof Fe[Oe]>"u"?de==="ios"?t[`${Oe}Ios`]:t[`${Oe}Material`]:Fe[Oe]}),Xe})({outline:u,clear:p,tonal:y,rounded:x,small:C,large:T,raised:L}),oe=q.large?"large":q.small?"small":"medium";let he=q.outline?"outline":q.clear||X&&!H?"clear":q.tonal?"tonal":"fill";Z&&(he="segmentedStrong"),Z&&H&&(he="segmentedStrongActive");const Ie=DY(a,xe),Ee=ie(AY({...t,...q},Ie,r,xe)),_e=A(Ee.base[q.rounded?"rounded":"square"],Ee.style[he],Ee.size[oe],q.raised&&Ee.raised,r);return W.createElement(se,WI({ref:ne,className:_e,disabled:s,role:"button",tabIndex:"0"},pe),Y)});yr.displayName="Button";const LY=(t,e)=>{const{margin:n,headerDivider:r,footerDivider:a,contentWrapPadding:i}=t;return{base:{common:A(n,"overflow-hidden"),ios:A("rounded-lg",e.bgIos,e.textIos),material:A("rounded-2xl",e.bgMaterial,e.textMaterial),plain:"",raised:"shadow",outline:{common:A("border"),ios:e.outlineIos,material:e.outlineMaterial}},header:{common:A(r&&"border-b","p-4"),ios:A(r&&e.outlineIos,t.headerFontSizeIos),material:A(r&&e.outlineMaterial,t.headerFontSizeMaterial)},content:A(i,"text-sm"),footer:{common:A(r&&"border-t","text-sm p-4"),ios:A(e.footerTextIos,a&&e.outlineIos),material:A(e.footerTextMaterial,a&&e.outlineMaterial)}}},FY=function(t,e){return t===void 0&&(t={}),{textIos:A(""),textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),bgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),bgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),footerTextIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),footerTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),outlineIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-20")),outlineMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function HI(){return HI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HI.apply(this,arguments)}const nP=R.forwardRef((t,e)=>{const{component:n="div",className:r,margin:a="m-4",colors:i,header:o,footer:s,ios:l,material:u,headerFontSizeIos:c="text-[17px]",headerFontSizeMaterial:d="text-[22px]",contentWrap:p=!0,contentWrapPadding:f="p-4",raised:g,raisedIos:y,raisedMaterial:v,outline:b,outlineIos:x,outlineMaterial:w,headerDivider:S=!1,footerDivider:C=!1,children:I,..._}=t,T=R.useRef(null);R.useImperativeHandle(e,()=>({el:T.current}));const M=n,P={..._},L=yn(),j=it({ios:l,material:u}),B=Tt(),K=FY(i,B),X=typeof b>"u"?L==="ios"?x:w:b,Z=typeof g>"u"?L==="ios"?y:v:g,H=X?"outline":Z?"raised":"plain",F=j(LY({...t,margin:a,contentWrapPadding:f,headerDivider:S,footerDivider:C,headerFontSizeIos:c,headerFontSizeMaterial:d,outline:X,raised:Z},K),r);return W.createElement(M,HI({ref:T,className:F.base[H]},P),o&&W.createElement("div",{className:F.header},o),p?W.createElement("div",{className:F.content},I):I,s&&W.createElement("div",{className:F.footer},s))});nP.displayName="Card";const BY=(t,e,n,r)=>({base:A("cursor-pointer inline-flex align-middle",tr("relative",n),r("dark:touch-ripple-white")),iconWrap:{common:A("flex items-center justify-center text-white",r("dark:text-black")),ios:"w-5.5 h-5.5 rounded-full border",material:"w-4.5 h-4.5 rounded-sm border-2",notChecked:{ios:e.borderIos,material:e.borderMaterial},checked:{ios:`${e.bgCheckedIos} ${e.borderCheckedIos}`,material:`${e.bgCheckedMaterial} ${e.borderCheckedMaterial}`}},icon:{notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:A("bg-white w-3/4",r("dark:bg-black")),ios:"h-0.5 rounded-full",material:"h-0.5"},input:"hidden"}),zY=function(t,e){return t===void 0&&(t={}),{borderIos:A("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),...t}};function Dy(){return Dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dy.apply(this,arguments)}const rP=t=>{const{ios:e,material:n,fill:r,...a}=t;return yn({ios:e,material:n})==="ios"?W.createElement("svg",Dy({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},a),W.createElement("path",{fill:r||"currentColor",fillRule:"evenodd",d:"M10.6461792,0.119820016 C11.0022676,0.346673312 11.1070333,0.819240884 10.88018,1.17532923 L5.59004012,9.47918548 C5.44456028,9.70754308 5.19802823,9.83254199 4.94596825,9.83309245 C4.59813173,9.83364386 4.39457446,9.67360825 4.28105047,9.53831563 L1.17887189,5.84128316 C0.907480501,5.5178515 0.949667479,5.03565214 1.27309914,4.76426075 C1.59653081,4.49286936 2.07873017,4.53505633 2.35012156,4.858488 L4.8346263,7.81909046 L9.59067001,0.353820775 C9.81752331,-0.00226757161 10.2900909,-0.10703328 10.6461792,0.119820016 Z",transform:"translate(4 5.483)"})):W.createElement("svg",Dy({xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 18 14",fill:"currentcolor"},a),W.createElement("polygon",{fill:r,points:"6 11.17 1.83 7 .41 8.41 6 14 18 2 16.59 .59"}))};function qI(){return qI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qI.apply(this,arguments)}const jY=R.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,indeterminate:s,name:l,value:u,disabled:c,readOnly:d,onChange:p,ios:f,material:g,touchRipple:y=!0,children:v,...b}=t,x=R.useRef(null),w=R.useRef(null);R.useImperativeHandle(e,()=>({el:w.current,inputEl:x.current}));const S=n,C={...b},I=yn({ios:f,material:g}),_=it({ios:f,material:g}),T=Tt();Po(w,I==="material"&&y);const M=zY(a,T),P=o||i&&!p||s?"checked":"notChecked",L=_(BY(t,M,r,T),r);return R.useEffect(()=>{x.current&&(x.current.indeterminate=!!s)},[s]),W.createElement(S,qI({ref:w,className:L.base},C),W.createElement("input",{ref:x,type:"checkbox",name:l,value:u,disabled:c,readOnly:d,checked:o,defaultChecked:i,onChange:p,className:L.input}),W.createElement("i",{className:L.iconWrap[P]},s?W.createElement("span",{className:L.indeterminateIcon}):W.createElement(rP,{ios:f,material:g,className:L.icon[P]})),v)});jY.displayName="Checkbox";const VY=(t,e)=>({base:{common:"text-sm inline-flex items-center justify-center align-middle rounded-full px-3",ios:"rounded-full h-7",material:"rounded-lg h-8 font-medium",fill:{ios:A(e.fillBg||e.fillBgIos,e.fillText||e.fillTextIos),material:A(e.fillBg||e.fillBgMaterial,e.fillText||e.fillTextMaterial)},outline:{common:"border",ios:A(e.outlineText||e.outlineTextIos,e.outlineBorder||e.outlineBorderIos),material:A(e.outlineText||e.outlineTextMaterial,e.outlineBorder||e.outlineBorderMaterial)}},media:{common:"-my-1 me-1 select-none",ios:"-ms-3",material:"-ms-2"},deleteButton:"-me-2 -my-1 ms-1 h-full flex items-center justify-center w-6 cursor-pointer opacity-50 active:opacity-100 select-none"}),UY=function(t,e){return t===void 0&&(t={}),{fillTextIos:"text-current",fillTextMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),fillBgIos:A("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-10")),fillBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),outlineTextIos:A("text-current"),outlineTextMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),outlineBorderIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-20")),outlineBorderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function Ly(){return Ly=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ly.apply(this,arguments)}const qf=t=>{let{theme:e,...n}=t;return e==="ios"?W.createElement("svg",Ly({xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 28 28",fill:"currentcolor"},n),W.createElement("path",{d:"M14,0 C21.7319865,0 28,6.2680135 28,14 C28,21.7319865 21.7319865,28 14,28 C6.2680135,28 0,21.7319865 0,14 C0,6.2680135 6.2680135,0 14,0 Z M18.9393398,6.93933983 L14,11.8786797 L9.06066017,6.93933983 L6.93933983,9.06066017 L11.8786797,14 L6.93933983,18.9393398 L9.06066017,21.0606602 L14,16.1213203 L18.9393398,21.0606602 L21.0606602,18.9393398 L16.1213203,14 L21.0606602,9.06066017 L18.9393398,6.93933983 Z"})):W.createElement("svg",Ly({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.47 2 2 6.47 2 12C2 17.53 6.47 22 12 22C17.53 22 22 17.53 22 12C22 6.47 17.53 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM12 10.59L15.59 7L17 8.41L13.41 12L17 15.59L15.59 17L12 13.41L8.41 17L7 15.59L10.59 12L7 8.41L8.41 7L12 10.59Z",fill:"currentcolor"}))};function KI(){return KI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KI.apply(this,arguments)}const GY=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,media:i,deleteButton:o,onDelete:s,ios:l,material:u,outline:c,children:d,...p}=t,f=R.useRef(null);R.useImperativeHandle(e,()=>({el:f.current}));const g=n,y={...p},v=it({ios:l,material:u}),b=yn({ios:l,material:u}),x=Tt(),w=c?"outline":"fill",S=UY(a,x),C=v(VY(t,S),r);return W.createElement(g,KI({ref:f,className:C.base[w]},y),i&&W.createElement("div",{className:C.media},i),d,o&&W.createElement("div",{className:C.deleteButton,role:"button",tabIndex:"0",onClick:s},W.createElement(qf,{theme:b,className:"h-4 w-4"})))});GY.displayName="Chip";const WY=(t,e,n,r)=>{let{hasButtons:a}=r;const{titleFontSizeMaterial:i,titleFontSizeIos:o,translucent:s,sizeIos:l,sizeMaterial:u}=t;return{base:{common:A("left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40 max-h-full overflow-hidden duration-400",tr("fixed",n)),ios:A("rounded-xl max-w-full",l,e.bgIos,s&&"translucent"),material:A("rounded-[1.75rem] p-6 max-w-[90%]",u,e.bgMaterial),opened:"",closed:"scale-[0.85] opacity-0 pointer-events-none"},contentWrap:{common:"flex flex-col items-center justify-center",material:"space-y-3",ios:A("p-4 space-y-1 relative",a&&"hairline-b")},title:{common:A("w-full"),ios:A(e.titleIos,o,"font-semibold text-center"),material:A(e.titleMaterial,i)},content:{common:A("text-sm w-full"),ios:A(e.contentTextIos,"text-center"),material:A(e.contentTextMaterial)},buttons:{common:"flex items-center",ios:A("justify-center last-child-hairline-r-none"),material:A("justify-end pt-6 space-x-2 rtl:space-x-reverse")},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},HY=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-neutral-800")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),titleIos:"",titleMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),contentTextIos:"",contentTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function XI(){return XI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XI.apply(this,arguments)}const qY=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,opened:i,backdrop:o=!0,onBackdropClick:s,translucent:l=!0,sizeIos:u="w-[16.875rem]",sizeMaterial:c="w-[19.5rem]",titleFontSizeIos:d="text-[18px]",titleFontSizeMaterial:p="text-[24px]",title:f,content:g,buttons:y,ios:v,material:b,children:x,...w}=t,S=R.useRef(null);R.useImperativeHandle(e,()=>({el:S.current}));const C=i?"opened":"closed",I=n,_={...w},T=it({ios:v,material:b}),M=Tt(),P=HY(a,M),L=T(WY({...t,titleFontSizeIos:d,titleFontSizeMaterial:p,translucent:l,sizeIos:u,sizeMaterial:c},P,r,{hasButtons:!!y}),r);return W.createElement(W.Fragment,null,o&&W.createElement("div",{className:L.backdrop[C],onClick:s}),W.createElement(I,XI({ref:S,className:L.base[C]},_),W.createElement("div",{className:L.contentWrap},f&&W.createElement("div",{className:L.title},f),(g||x)&&W.createElement("div",{className:L.content},g,x)),y&&W.createElement("div",{className:L.buttons},y)))});qY.displayName="Dialog";const KY=(t,e)=>{const{strong:n,disabled:r}=t;return{base:{ios:A("text-center text-[17px] flex items-center justify-center h-11 w-full hairline-r rtl:hairline-l relative first:rounded-bl-xl last:rounded-br-xl rtl:first:rounded-br-xl rtl:first:rounded-bl-none rtl:last:rounded-bl-xl rtl:last:rounded-br-none",r?e.disabledTextIos:e.textIos,n&&"font-semibold",!r&&e.activeBgIos)}}},XY=function(t,e){return t===void 0&&(t={}),{activeBgIos:A("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),textIos:"text-primary",disabledTextIos:A("text-black text-opacity-30",e("dark:text-white dark:text-opacity-30")),...t}};function Fy(){return Fy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fy.apply(this,arguments)}const YY=R.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,disabled:s,strong:l,strongIos:u,strongMaterial:c,children:d,...p}=t,f=R.useRef(null);R.useImperativeHandle(e,()=>({el:f.current}));const g={...p},y=yn({ios:i,material:o}),v=it({ios:i,material:o}),b=Tt(),x=XY(a,b),w=typeof l>"u"?y==="ios"?u:c:l,S=v(KY({...t,strong:w},x),r),C=n;return y==="ios"?W.createElement(C,Fy({className:S.base,disabled:s,role:"button",tabIndex:"0"},g),d):W.createElement(yr,Fy({component:n,inline:!0,rounded:!0,disabled:s,clear:!w,className:r},g),d)});YY.displayName="DialogButton";const QY=(t,e)=>({base:{common:"flex items-center justify-center space-x-2 rtl:!space-x-reverse cursor-pointer overflow-hidden select-none",ios:`h-12 duration-100 rounded-full shadow-lg ${e.bgIos} ${e.activeBgIos} ${e.textIos}`,material:`duration-300 rounded-2xl shadow ${e.bgMaterial} ${e.activeBgMaterial} ${e.textMaterial} ${e.touchRipple}`,iconOnly:{ios:"w-12",material:"w-14 h-14"},withText:{common:"px-4",material:"h-14"}},text:{common:"text-sm",ios:"font-semibold uppercase",material:"font-medium"},icon:{common:"h-1em w-1em",ios:"text-icon-ios",material:"text-icon-material"}}),ZY=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-primary",bgMaterial:A("bg-md-light-primary-container",e("dark:bg-md-dark-primary-container")),activeBgIos:"active:bg-ios-primary-shade",activeBgMaterial:"",textIos:"text-white",textMaterial:A("text-md-light-on-primary-container",e("dark:text-md-dark-on-primary-container")),touchRipple:A("touch-ripple-primary",e("dark:touch-ripple-white")),...t}};function YI(){return YI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YI.apply(this,arguments)}const JY=R.forwardRef((t,e)=>{const{component:n="a",className:r,colors:a,href:i,text:o,textPosition:s="after",icon:l,ios:u,material:c,touchRipple:d=!0,children:p,...f}=t,g=R.useRef(null);R.useImperativeHandle(e,()=>({el:g.current}));const y=n,v={...f},b=yn({ios:u,material:c}),x=it({ios:u,material:c}),w=Tt();Po(g,b==="material"&&d);const S=ZY(a,w),C=x(QY(t,S),r);return W.createElement(y,YI({className:o?C.base.withText:C.base.iconOnly,href:i,ref:g,role:"button",tabIndex:"0"},v),o&&s==="before"&&W.createElement("span",{className:C.text},o),l&&W.createElement("span",{className:C.icon},l),o&&s==="after"&&W.createElement("span",{className:C.text},o),p)});JY.displayName="Fab";const eQ=(t,e)=>({base:`${tr("relative",e)} inline-block not-italic`,badge:"absolute -end-1.5 -top-0.5"});function QI(){return QI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QI.apply(this,arguments)}const _a=R.forwardRef((t,e)=>{const{component:n="i",className:r,ios:a,material:i,badge:o,badgeColors:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it(),g=yn(),y=f(eQ(t,r),r);return W.createElement(d,QI({ref:c,className:y.base},p),g==="ios"?a:i,typeof o<"u"&&o!==null&&W.createElement(eP,{small:!0,className:y.badge,colors:s},o),l)});_a.displayName="Icon";const tQ=(t,e,n)=>{let{textColor:r,needsTouchRipple:a}=e;const{iconOnly:i,tabbar:o}=t;return{base:{common:A(!o&&r,"inline-flex space-x-1 rtl:!space-x-reverse justify-center items-center cursor-pointer select-none",a&&`touch-ripple-primary ${tr("relative",n)} z-10`),notTabbar:{ios:"active:opacity-30 duration-300 active:duration-0",material:a?"":"active:opacity-55"}},tabbar:{common:A(tr("relative",n),"w-full h-full duration-300"),material:"font-medium text-sm z-10",active:"k-tabbar-link-active",inactive:""},toolbar:{common:A("h-full max-h-12",i&&"k-touch-ripple-inset"),material:"px-3 text-sm font-medium"},navbar:{common:A("h-full max-h-12",i&&"k-touch-ripple-inset"),material:"px-3"}}},nQ=function(t,e){return t===void 0&&(t={}),{textIos:"text-primary",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),navbarTextIos:"text-primary",navbarTextMaterial:"",...t}};function ZI(){return ZI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZI.apply(this,arguments)}const pp=R.forwardRef((t,e)=>{const{component:n="a",className:r,colors:a,navbar:i,toolbar:o,iconOnly:s,linkProps:l={},tabbar:u,tabbarActive:c,touchRipple:d=void 0,ios:p,material:f,onClick:g,children:y,...v}=t,b=R.useRef(null);R.useImperativeHandle(e,()=>({el:b.current}));const x=n,w={...l,...v},S=yn({ios:p,material:f}),C=it({ios:p,material:f}),I=Tt(),_=S==="material"&&(d||(o||u||i)&&typeof d>"u");Po(b,_);const T=nQ(a,I),M=t.navbar?S==="material"?T.navbarTextMaterial:T.navbarTextIos:S==="material"?T.textMaterial:T.textIos,P=u&&!c?T.tabbarInactive:M,L=c?"active":"inactive",j=C(tQ(t,{textColor:P,needsTouchRipple:_},r)),B=A(j.base[u?"default":"notTabbar"],o&&j.toolbar,i&&j.navbar,u&&j.tabbar[L],r);return W.createElement(x,ZI({ref:b,className:B},w,{role:"link",tabIndex:"0",onClick:g}),y)});pp.displayName="Link";const rQ=(t,e,n)=>{const{nested:r,margin:a,inset:i,strong:o,outline:s}=t;return{base:{common:A(!r&&a,!i&&!r&&s&&"hairline-t hairline-b",i&&s&&"border",tr("relative",n),"z-10"),ios:A(o&&e.strongBgIos,i&&s&&e.outlineIos),material:A(o&&e.strongBgMaterial,i&&s&&e.outlineMaterial)},ul:{common:A(i&&"no-safe-areas","last-child-hairline-b-none")},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"},menuList:{common:"py-1"}}},aQ=function(t,e){return t===void 0&&(t={}),{outlineIos:A("border-black border-opacity-20",e("dark:border-white dark:border-opacity-15")),outlineMaterial:A("border-md-light-outline",e("border-md-dark-outline")),strongBgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),strongBgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),...t}},aP=W.createContext(!1);function JI(){return JI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JI.apply(this,arguments)}const hp=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,margin:i="my-8",nested:o,menuList:s,dividers:l,dividersIos:u=!0,dividersMaterial:c=!1,inset:d,insetIos:p,insetMaterial:f,strong:g,strongIos:y,strongMaterial:v,outline:b,outlineIos:x,outlineMaterial:w,ios:S,material:C,children:I,..._}=t,T=R.useRef(null);R.useImperativeHandle(e,()=>({el:T.current}));const M=n,P={..._},L=yn(),j=it({ios:S,material:C}),B=Tt(),K=typeof l>"u"?L==="ios"?u:c:l,X=typeof g>"u"?L==="ios"?y:v:g,Z=typeof b>"u"?L==="ios"?x:w:b,H=typeof d>"u"?L==="ios"?p:f:d,F=aQ(a,B),Y=j(rQ({...t,margin:i,inset:H,strong:X,outline:Z},F,r)),Q=A(Y.base,H&&Y.inset,s&&Y.menuList,r);return W.createElement(aP.Provider,{value:K},W.createElement(M,JI({ref:T,className:Q},P),W.createElement("ul",{className:Y.ul},I)))});hp.displayName="List";function eE(){return eE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eE.apply(this,arguments)}const iQ=R.forwardRef((t,e)=>{const{children:n,...r}=t,a=R.useRef(null);R.useImperativeHandle(e,()=>({el:a.current}));const i={...r};return W.createElement("li",{ref:a},W.createElement(hp,eE({nested:!0},i),n))});iQ.displayName="ListGroup";const oQ=(t,e,n)=>{const{dividers:r}=t;return{base:"",button:{common:A(tr("relative",n),r&&"hairline-b active:hairline-transparent",`flex items-center justify-center px-4 space-x-1 w-full duration-300 active:duration-0 focus:outline-none ${e.touchRipple} overflow-hidden select-none`),ios:A("h-11",e.textIos,e.activeBgIos,e.activeBgIos),material:A("h-12",e.textMaterial,e.activeBgMaterial)}}},sQ=function(t,e){return t===void 0&&(t={}),{textIos:"text-primary",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),activeBgIos:"active:bg-primary active:bg-opacity-15",activeBgMaterial:"",touchRipple:"touch-ripple-primary",...t}},iP=()=>R.useContext(aP);function By(){return By=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},By.apply(this,arguments)}const lQ=R.forwardRef((t,e)=>{const{component:n="li",className:r,colors:a,href:i,target:o,type:s,value:l,linkComponent:u="a",linkProps:c={},ios:d,material:p,touchRipple:f=!0,children:g,...y}=t,v=R.useRef(null),b=R.useRef(null),x=iP();R.useImperativeHandle(e,()=>({el:v.current}));const w=n,S={...y},C=yn({ios:d,material:p}),I=it({ios:d,material:p});Po(b,C==="material"&&f);const _=Tt(),T=sQ(a,_),M=I(oQ({...t,dividers:x},T,r),r),P=!!i||i==="",L={href:!P||i===!0||i===!1?void 0:i||"",target:o,type:s,value:l,...c},j=P?u:"button";return W.createElement(w,By({ref:v,className:M.base},S),W.createElement(j,By({ref:b,className:M.button},L),g))});lQ.displayName="ListButton";const uQ=(t,e,n)=>{let{className:r,isMediaItem:a,theme:i,textColor:o,needsTouchRipple:s,isMenuListItemActive:l,autoStrongTitle:u}=n;const{menuListItem:c,dividers:d,mediaClassName:p="",mediaClass:f="",innerClassName:g="",innerClass:y="",contentClassName:v="",contentClass:b="",titleWrapClassName:x="",titleWrapClass:w="",titleFontSizeIos:S,titleFontSizeMaterial:C,strongTitle:I,contacts:_}=t;return{base:{common:c?`${o} py-1`:"",material:_&&"[&:nth-child(2)]:-mt-12"},itemContent:{common:A(`flex items-center ${v||b}`),ios:A(!c&&A(e.primaryTextIos,"ps-4-safe"),c&&"rounded-lg ml-2-safe mr-2-safe ps-2"),material:A(!c&&A(e.primaryTextMaterial,a?"ml-2-safe mr-2-safe rounded-2xl ps-2":"ps-4-safe",_&&"ml-10"),c&&"rounded-full min-h-[3.5rem] ml-4-safe mr-4-safe ps-4"),link:A("duration-300 active:duration-0 cursor-pointer select-none",d&&i==="ios"&&"active:hairline-transparent",s&&A("relative overflow-hidden z-10",e.touchRipple),A(l?i==="ios"?e.menuListItemActiveBgIos:e.menuListItemActiveBgMaterial:c?i==="ios"?e.menuListItemBgIos:e.menuListItemBgMaterial:i==="ios"?e.activeBgIos:e.activeBgMaterial))},media:{common:`shrink-0 flex ${p||f}`,ios:"py-2 me-4",material:A("py-3",c?"me-3":"me-4")},inner:{common:A("w-full relative",!c&&d&&"hairline-b",g||y),ios:"py-2.5 pe-4-safe",material:A("py-3",a&&!c?"pe-2":"pe-4-safe")},titleWrap:{common:A(`flex justify-between items-center ${x||w}`),ios:A(!c&&S),material:A(!c&&C)},title:{common:"shrink",menuListItem:A("text-sm",I===!0||u?"font-semibold":"font-medium"),strong:{common:"",ios:"font-semibold",material:"font-medium"}},after:{common:A("shrink-0 ms-auto ps-1 flex items-center space-x-1"),ios:e.secondaryTextIos,material:A(e.secondaryTextMaterial,"text-sm")},chevron:"opacity-20 shrink-0 ms-3 rtl:rotate-180",subtitle:"text-sm",text:{common:A("text-sm line-clamp-2"),ios:e.secondaryTextIos,material:e.secondaryTextMaterial},header:{common:"text-xs mb-0.5",ios:e.secondaryTextIos,material:e.secondaryTextMaterial},footer:{common:A("text-xs mt-0.5"),ios:e.secondaryTextIos,material:e.secondaryTextMaterial},groupTitle:{common:A("pl-4-safe pr-4-safe py-1 flex items-center z-20",tr("relative",r)),ios:`h-8${d?" hairline-t":""} -mt-px ${S} ${e.secondaryTextIos} ${e.groupTitleBgIos} ${_&&A("font-semibold top-11-safe sticky",e.groupTitleContactsTextIos,e.groupTitleContactsBgIos)}`,material:`h-12 ${C} ${e.secondaryTextMaterial} ${e.groupTitleBgMaterial} ${_&&A("pointer-events-none overflow-visible h-12 box-border text-xl font-medium flex max-w-full items-center px-4 top-16-safe sticky",e.groupTitleContactsTextMaterial,e.groupTitleContactsBgMaterial)}`}}},cQ=function(t,e){return t===void 0&&(t={}),{primaryTextIos:A("text-black",e("dark:text-white")),primaryTextMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),secondaryTextIos:A("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),secondaryTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),activeBgIos:A("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),activeBgMaterial:"",groupTitleBgIos:A("bg-ios-light-surface-variant",e("dark:bg-ios-dark-surface-variant")),groupTitleBgMaterial:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),menuListItemTextIos:A("text-black",e("dark:text-white")),menuListItemTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),menuListItemBgIos:A("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),menuListItemBgMaterial:A("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),menuListItemActiveTextIos:A("text-primary",e("dark:text-white")),menuListItemActiveTextMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),menuListItemActiveBgIos:A("bg-primary bg-opacity-15",e("dark:bg-primary")),menuListItemActiveBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),touchRipple:A("touch-ripple-black",e("dark:touch-ripple-white")),groupTitleContactsTextIos:A("text-opacity-90",e("dark:text-opacity-90")),groupTitleContactsTextMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),groupTitleContactsBgIos:A(e("dark:bg-[#323234]")),groupTitleContactsBgMaterial:A("bg-transparent",e("dark:bg-transparent")),...t}};function zy(){return zy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zy.apply(this,arguments)}const fp=R.forwardRef((t,e)=>{const{component:n="li",colors:r,className:a,mediaClassName:i="",innerClassName:o="",innerChildren:s,contentClassName:l="",contentChildren:u,titleWrapClassName:c="",titleFontSizeIos:d="text-[17px]",titleFontSizeMaterial:p="text-[16px]",title:f,subtitle:g,text:y,after:v,media:b,header:x,footer:w,menuListItem:S,menuListItemActive:C,groupTitle:I,strongTitle:_="auto",label:T,chevron:M=void 0,chevronIos:P=!0,chevronMaterial:L=!0,chevronIcon:j,href:B,target:K,link:X,linkComponent:Z="a",linkProps:H={},dividers:F,contacts:Y,ios:Q,material:ne,touchRipple:se=!0,children:pe,...de}=t,ie=R.useRef(null),xe=R.useRef(null);R.useImperativeHandle(e,()=>({el:xe.current}));const q=n,oe={...de},he=typeof F>"u"?iP():F,Ie=yn({ios:Q,material:ne}),Ee=it({ios:Q,material:ne}),_e=Tt(),Fe=typeof M>"u"?Ie==="ios"?P:L:M,Xe=cQ(r,_e),Oe=S&&C,lt=Xe[`${Oe?"menuListItemActiveText":S?"menuListItemText":"text"}${Ie==="ios"?"Ios":"Material"}`],Je=!!B||B===""||S||X,nt=!!T,et=Ie==="material"&&(nt||Je)&&se;Po(ie,et);const on=B===!0||B===!1||typeof B>"u"?void 0:B||"",jt=Je?Z:nt?"label":"div",Yt=Je?{href:on,target:K,...H}:{},Qt=f&&(g||y),$t=_==="auto"&&Qt,Ct=Ee(uQ({...t,titleFontSizeIos:d,titleFontSizeMaterial:p,dividers:he,strongTitle:_,mediaClassName:i,innerClassName:o,contentClassName:l,titleWrapClassName:c},Xe,{isMediaItem:Qt,theme:Ie,textColor:lt,needsTouchRipple:et,isMenuListItemActive:Oe,darkClasses:_e,autoStrongTitle:$t,className:a}),a),zn=Je||nt?Ct.itemContent.link:Ct.itemContent.default,Xn=S?Ct.title.menuListItem:_===!0||$t?Ct.title.strong:Ct.title.default;return I?W.createElement(q,{className:A(Ct.groupTitle,a)},f,pe):W.createElement(q,zy({ref:xe,className:Ct.base},oe),W.createElement(jt,zy({ref:ie,className:zn},Yt),b&&W.createElement("div",{className:Ct.media},b),W.createElement("div",{className:Ct.inner},x&&W.createElement("div",{className:Ct.header},x),(f||v)&&W.createElement("div",{className:Ct.titleWrap},f&&W.createElement("div",{className:Xn},f),v&&W.createElement("div",{className:Ct.after},v),Je&&Fe&&!S&&(j||W.createElement(tP,{className:Ct.chevron}))),g&&W.createElement("div",{className:Ct.subtitle},g),y&&W.createElement("div",{className:Ct.text},y),w&&W.createElement("div",{className:Ct.footer},w),s),u),pe)});fp.displayName="ListItem";function tE(){return tE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tE.apply(this,arguments)}const dQ=t=>W.createElement("svg",tE({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"5",viewBox:"0 0 8 5",fill:"currentcolor"},t),W.createElement("polygon",{fillRule:"evenodd",points:"0 0 8 0 4 5"})),pQ=(t,e,n)=>{let{isFloatingTransformed:r,isFocused:a,darkClasses:i,getLabelColor:o,hasLabel:s}=n;const{error:l,type:u,outline:c,inputClassName:d="",inputClass:p=""}=t;return{base:{common:"",ios:A(c&&"my-4"),material:A("py-2")},itemContent:{common:"relative",ios:A(c&&"ml-4 mr-4 rounded-lg",!c&&e.bgIos),material:A("min-h-[56px] ml-4 mr-4",c?A("rounded"):A(e.bgMaterial,"rounded-t relative "))},inner:{common:"",material:A(c?"pt-4 pb-4":"pt-2 pb-2"),stacked:"",floating:""},label:{common:A("duration-200 text-xs",o(),c&&"flex"),ios:A(c&&"-mt-4"),material:A(c&&"-mt-4"),stacked:"",floating:{common:A("pointer-events-none duration-200 transform origin-left rtl:origin-right max-w-[66%]",r&&"scale-133"),ios:r?c?"translate-y-6":"translate-y-4":"",material:r?c?"translate-y-8":"translate-y-3":""}},labelText:{common:A(c&&"relative p-1 block -m-1"),ios:A(c&&A("-top-1",e.outlineLabelBgIos)),material:A(c&&A("-top-2",e.outlineLabelBgMaterial))},inputWrap:{common:"relative",ios:A((!s||c)&&"-mt-2.5","-mb-2.5"),stacked:"",floating:""},media:{material:""},titleWrap:{material:`duration-200 ${o()}`},input:{common:`block text-base appearance-none w-full focus:outline-none bg-transparent ${d||p}`,ios:"h-10",material:"h-6",notFloating:{common:A("placeholder-black placeholder-opacity-30",i("dark:placeholder-white dark:placeholder-opacity-30")),material:A(u==="textarea"&&"py-1"),ios:A(u==="textarea"&&"py-2")},floating:r?"placeholder-transparent":A("placeholder-black placeholder-opacity-30",i("dark:placeholder-white dark:placeholder-opacity-30"))},errorInfo:{common:"text-xs relative z-10",ios:"mt-1",material:""},error:e.errorText,info:"opacity-50",clearButton:{common:"absolute end-0 top-1/2 transform -translate-y-1/2 cursor-pointer",ios:A("w-3.5 h-3.5 opacity-45 active:opacity-30",e.labelTextIos),material:A("w-6 h-6 active:opacity-55",e.labelTextMaterial)},dropdown:"absolute end-0 top-1/2 transform -translate-y-1/2 pointer-events-none opacity-50",border:{common:"pointer-events-none absolute start-0 bottom-0 duration-200 w-full",ios:c&&A(l?e.errorBorder:a?e.outlineBorderFocusIos:e.outlineBorderIos,"h-full border rounded-lg -z-10"),material:A(l?e.errorBorder:a?e.outlineBorderFocusMaterial:e.outlineBorderMaterial,c&&A("h-full border rounded -z-10",a&&"border-2"),!c&&A("border-b h-px origin-bottom",a&&"scale-y-[2]"))}}},hQ=function(t,e){return t===void 0&&(t={}),{bgIos:"",bgMaterial:A("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),outlineBorderIos:A("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),outlineBorderFocusIos:"border-primary",outlineBorderMaterial:A("border-md-light-on-surface",e("dark:border-md-dark-on-surface")),outlineBorderFocusMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),outlineLabelBgIos:A("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),outlineLabelBgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),labelTextIos:"",labelTextFocusIos:"",labelTextMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),labelTextFocusMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),errorText:"text-red-500",errorBorder:"border-red-500",...t}};function nE(){return nE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nE.apply(this,arguments)}const fQ=R.forwardRef((t,e)=>{const{component:n="li",className:r,colors:a,label:i,floatingLabel:o,outline:s,outlineIos:l,outlineMaterial:u,media:c,input:d,info:p,error:f,clearButton:g,dropdown:y,inputId:v,inputStyle:b,inputClassName:x="",name:w,value:S,defaultValue:C,type:I="text",inputMode:_,readOnly:T,required:M,disabled:P,placeholder:L,size:j,accept:B,autoComplete:K,autoCorrect:X,autoCapitalize:Z,spellCheck:H,autoFocus:F,autoSave:Y,max:Q,min:ne,step:se,maxLength:pe,minLength:de,multiple:ie,pattern:xe,tabIndex:q,onInput:oe,onChange:he,onFocus:Ie,onBlur:Ee,onClear:_e,ios:Fe,material:Xe,children:Oe,...lt}=t,Je=R.useRef(null),nt=R.useRef(null);R.useImperativeHandle(e,()=>({el:nt.current,inputEl:Je.current}));const[et,on]=R.useState(!1),jt=yn({ios:Fe,material:Xe}),Yt=it({ios:Fe,material:Xe}),Qt=Tt(),$t=hQ(a,Qt),Ct=i&&o?"floating":"stacked",zn=Ct==="floating"?"floating":"notFloating",Xn=()=>{if(Je.current)return Je.current.value},za=i&&o&&!(()=>{const ma=Xn();return typeof S>"u"?ma||ma===0:S||S===0})()&&!et,_n=()=>f?$t.errorText:jt==="material"?et?$t.labelTextFocusMaterial:$t.labelTextMaterial:jt==="ios"?et?$t.labelTextFocusIos:$t.labelTextIos:"",Qa=ma=>{on(!0),Ie&&Ie(ma)},yo=ma=>{on(!1),Ee&&Ee(ma)},bi=typeof s>"u"?jt==="ios"?l:u:s,hn=Yt(pQ({...t,outline:bi},$t,{isFloatingTransformed:za,isFocused:et,darkClasses:Qt,getLabelColor:_n,inputClassName:x,hasLabel:!!i})),Za={...lt},vi=()=>{if(d)return d;const ma=I==="select"||I==="textarea"?I:"input",wl=ma==="input";return W.createElement(ma,{id:v,ref:Je,className:hn.input[zn],style:b,name:w,type:wl?I:void 0,placeholder:L,inputMode:_,size:j,accept:B,autoComplete:K,autoCorrect:X,autoCapitalize:Z,spellCheck:H,autoFocus:F,autoSave:Y,disabled:P,max:Q,maxLength:pe,min:ne,minLength:de,step:se,multiple:ie,readOnly:T,required:M,pattern:xe,tabIndex:q,value:S,defaultValue:C,onInput:oe,onChange:he,onFocus:Qa,onBlur:yo},I==="select"?Oe:null)},xi=W.createElement(W.Fragment,null,f&&f!==!0&&W.createElement("div",{className:A(hn.errorInfo,hn.error)},f),p&&!f&&W.createElement("div",{className:A(hn.errorInfo,hn.info)},p)),Is=W.createElement(W.Fragment,null,i&&W.createElement("div",{className:hn.label[Ct]},W.createElement("div",{className:hn.labelText},i)),W.createElement("div",{className:hn.inputWrap[Ct]},vi(),g&&W.createElement(qf,{theme:jt,onClick:_e,className:hn.clearButton}),y&&W.createElement(dQ,{className:hn.dropdown})),xi);return W.createElement(fp,nE({ref:nt,component:n,media:c,className:hn.base,title:null,mediaClassName:hn.media,innerClassName:hn.inner[Ct],contentClassName:hn.itemContent,titleWrapClassName:hn.titleWrap,innerChildren:Is,contentChildren:(bi||jt==="material")&&W.createElement("span",{className:hn.border}),dividers:jt==="material"||bi?!1:void 0},Za),I!=="select"?Oe:null)});fQ.displayName="ListInput";function rE(){return rE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rE.apply(this,arguments)}const mQ=R.forwardRef((t,e)=>{const{children:n,...r}=t,a=R.useRef(null);R.useImperativeHandle(e,()=>({el:a.current}));const i={...r};return W.createElement(hp,rE({ref:a,menuList:!0},i),n)});mQ.displayName="MenuList";function aE(){return aE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aE.apply(this,arguments)}const gQ=R.forwardRef((t,e)=>{const{active:n,href:r,children:a,...i}=t,o=R.useRef(null);R.useImperativeHandle(e,()=>({el:o.current}));const s={...i};return W.createElement(fp,aE({ref:o,menuListItem:!0,menuListItemActive:n,href:r||!1},s),a)});gQ.displayName="MenuListItem";const yQ=(t,e)=>{const{type:n}=t;return{message:{common:"max-w-[70%] box-border flex relative z-1 transform translate-z-0 mb-2 first:mt-2"},messageSent:{common:A("self-end",e.messageSent)},messageReceived:{common:e.messageReceived},messageName:{common:"text-xs",ios:A("mb-0.5 ms-4",e.messageNameIos),material:A("ms-4 mb-0.5",e.messageNameMd)},messageHeader:{common:"text-xs",ios:A("mb-0.5 ms-4",e.messageNameIos),material:A("ms-4 mb-0.5",e.messageNameMd)},messageFooter:{common:"text-xs",ios:A("mb-0.5 ms-4",e.messageNameIos),material:A("ms-4 mb-0.5",e.messageNameMd)},messageAvatar:{common:A("rounded-full relative bg-cover self-end shrink-0 me-1.5 w-8 h-8")},messageContent:{common:"flex flex-col"},messageBubble:{...n==="sent"&&{ios:A("rounded-3xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",e.bubbleSentIos),material:A("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4",e.bubbleSentMd)},...n==="received"&&{ios:A("rounded-2xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",e.bubbleReceivedIos),material:A("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4 ",e.bubbleReceivedMd)}},messageTextHeader:{common:"w-full text-left leading-tight text-sm opacity-80"},messageTextFooter:{common:"w-full text-left leading-tight text-sm opacity-80"},messageText:{common:"w-full text-left leading-tight"}}},bQ=function(t,e){return t===void 0&&(t={}),{messageSent:"text-white",messageReceived:"text-inherit",messageNameIos:A("text-black text-opacity-45",e("dark:text-white dark:text-opacity-45")),messageNameMd:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),bubbleSentIos:A("bg-primary"),bubbleSentMd:A("bg-md-light-primary",e("dark:bg-md-dark-primary dark:text-md-dark-on-primary")),bubbleReceivedIos:A("bg-[#e5e5ea]",e("dark:bg-[#252525]")),bubbleReceivedMd:A(e("dark:bg-md-dark-surface-variant"),"bg-[#e5e5ea]"),...t}};function iE(){return iE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iE.apply(this,arguments)}const vQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,text:o,name:s,type:l="sent",header:u,footer:c,textHeader:d,textFooter:p,avatar:f,ios:g,material:y,children:v,...b}=t,x=R.useRef(null);R.useImperativeHandle(e,()=>({el:x.current}));const w=it({ios:g,material:y}),S=Tt(),C=bQ(a,S),I=w(yQ({...t},C)),_=n,T={...b},M=A(r,I.message,{[I.messageSent]:l==="sent",[I.messageReceived]:l==="received"});return W.createElement(_,iE({id:i,ref:x,className:M},T),f&&W.createElement("div",{className:I.messageAvatar},f),W.createElement("div",{className:I.messageContent},s&&W.createElement("div",{className:I.messageName},s),u&&W.createElement("div",{className:I.messageHeader},u),W.createElement("div",{className:I.messageBubble},d&&W.createElement("div",{className:I.messageTextHeader},d),o&&W.createElement("div",{className:I.messageText},o),p&&W.createElement("div",{className:I.messageTextFooter},p)),c&&W.createElement("div",{className:I.messageFooter},c)))});vQ.displayName="Message";const xQ=(t,e,n)=>{let{isFocused:r}=n;const{rightClassName:a="",rightClass:i="",leftClassName:o="",leftClass:s=""}=t;return{base:{common:"fixed bottom-0 start-0 w-full"},toolbar:{material:e.bgMessage},left:{common:A("mt-1 -ms-2",o||s),ios:A("px-2",e.toolbarIconIos),material:A("",e.toolbarIconMd)},right:{common:A("mt-1 -me-2",a||i),ios:A("px-2",e.toolbarIconIos)},messagebarArea:{common:"w-full"},messagebarInput:{common:A("block w-full focus:outline-none resize-none",r&&"outline-offset-0"),ios:A("border h-8 rounded-3xl px-4 leading-4 py-1.5",e.inputBgIos,e.borderIos,e.placeholderIos),material:A("rounded-3xl h-12 px-4 py-4 leading-4 ",e.inputBgMd,e.placeholderMd)}}},wQ=function(t,e){return t===void 0&&(t={}),{toolbarIconIos:A("fill-primary",e("dark:fill-md-dark-primary")),toolbarIconMd:A("fill-black"),inputBgIos:A("bg-transparent"),borderIos:A("border-[#c8c8cd]",e("dark:border-white dark:border-opacity-30")),inputBgMd:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-variant")),placeholderIos:A(e("dark:placeholder-white dark:placeholder-opacity-40")),placeholderMd:A("placeholder-md-light-on-surface-variant",e("dark:placeholder-md-dark-on-surface-variant")),bgIos:A("bg-white",e("dark:bg-black")),bgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}},kQ=(t,e,n)=>{const{bgClassName:r="",bgClass:a="",outline:i,translucent:o,innerClassName:s="",innerClass:l="",tabbar:u,tabbarIcons:c,top:d}=t;return{base:{common:A("w-full z-20",tr("relative",n),!d&&"pb-safe")},bg:{common:A("absolute w-full h-full left-0 top-0",i&&(d?"hairline-b":"hairline-t"),r||a),ios:A(e.bgIos,o&&"translucent"),material:A(`${e.bgMaterial}`)},inner:{common:A("flex relative justify-between items-center w-full overflow-hidden",s||l),ios:A("pl-2-safe pr-2-safe",c?"h-12.5":"h-11"),material:A(u?"":"pl-2-safe pr-2-safe",c?"h-20":"h-14")},highlight:{common:A(d?"bottom-0":"top-0","absolute left-0 w-full h-0.5 duration-200 pointer-events-none transition-transform"),ios:e.tabbarHighlightBgIos,material:e.tabbarHighlightBgMaterial}}},SQ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-ios-light-surface-2",e("dark:bg-ios-dark-surface-2")),bgMaterial:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),tabbarHighlightBgIos:"bg-primary",tabbarHighlightBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function oE(){return oE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oE.apply(this,arguments)}const sE=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,translucent:i=!0,bgClassName:o="",innerClassName:s="",outline:l,tabbar:u,tabbarIcons:c,tabbarLabels:d,top:p,ios:f,material:g,children:y,...v}=t,b=R.useRef(null),x=R.useRef(null);R.useImperativeHandle(e,()=>({el:x.current}));const w=n,[S,C]=R.useState({transform:"",width:""}),I=yn({ios:f,material:g}),_=it({ios:f,material:g}),T=Tt(),M={...v},P=SQ(a,T),L=_(kQ({...t,outline:typeof l>"u"?I==="ios":l,translucent:i,bgClassName:o,innerClassName:s},P,r),r),j=I==="material"&&u&&!c;return R.useEffect(()=>{if(j&&b.current){const B=b.current.previousElementSibling,K=1/B.children.length*100,X=[...B.children].indexOf(B.querySelector(".k-tabbar-link-active"));C({...S,width:`${K}%`,transform:`translateX(${X*100}%)`})}},[y]),W.createElement(w,oE({ref:x,className:L.base},M),W.createElement("div",{className:L.bg}),W.createElement("div",{className:L.inner},y),j&&W.createElement("span",{className:L.highlight,style:S,ref:b}))});sE.displayName="Toolbar";function lE(){return lE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lE.apply(this,arguments)}const CQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,style:o,name:s,placeholder:l="Message",value:u,outline:c=!1,leftClassName:d="",rightClassName:p="",textareaId:f,disabled:g,size:y,left:v,right:b,ios:x,material:w,onInput:S,onChange:C,onFocus:I,children:_,...T}=t,M=R.useRef(null),P=R.useRef(null);R.useImperativeHandle(e,()=>({el:M.current,areaElRef:P.current}));const[L,j]=R.useState(!1),B=it({ios:x,material:w}),K=Tt(),X=wQ(a,K),Z=Q=>{j(!0),I&&I(Q)},H=B(xQ({...t},X,{isFocused:L})),F=n,Y={...T};return W.createElement(F,lE({ref:M,id:i,style:o,className:H.base},Y),W.createElement(sE,{colors:X,outline:c},v&&W.createElement("div",{className:H.left},v),W.createElement("div",{className:H.messagebarArea},W.createElement("textarea",{id:f,ref:P,type:"textarea",className:H.messagebarInput,placeholder:l,name:s,size:y,disabled:g,onInput:S,onChange:C,onFocus:Z,value:u})),b&&W.createElement("div",{className:H.right},b)))});CQ.displayName="Messagebar";const IQ=()=>({base:{common:A("flex flex-col relative z-1 px-2"),ios:"mb-12",material:"mb-16"}});function uE(){return uE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uE.apply(this,arguments)}const EQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,ios:o,material:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=it({ios:o,material:s})(IQ({...t})),p=n,f={...u};return W.createElement(p,uE({id:i,className:d.base,ref:c},f),l)});EQ.displayName="Messages";const NQ=(t,e)=>({base:{common:A("text-center text-xs leading-none"),ios:A("w-full mt-2.5",e.titleIos),material:A("mt-4",e.titleMd)}}),TQ=function(t,e){return t===void 0&&(t={}),{titleIos:A("text-black text-opacity-45",e("dark:text-white dark:text-opacity-45")),titleMd:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function cE(){return cE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cE.apply(this,arguments)}const _Q=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,id:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=it({ios:i,material:o}),p=Tt(),f=TQ(a,p),g=d(NQ({...t},f)),y=n,v={...u};return W.createElement(y,cE({id:s,className:g.base,ref:c},v),l)});_Q.displayName="MessagesTitle";const RQ=(t,e,n)=>{const{outline:r,translucent:a,large:i,medium:o,transparent:s,left:l,right:u,fontSizeIos:c,fontSizeMaterial:d,titleFontSizeIos:p,titleFontSizeMaterial:f,titleLargeFontSizeIos:g,titleLargeFontSizeMaterial:y,titleMediumFontSizeIos:v,titleMediumFontSizeMaterial:b,bgClassName:x="",bgClass:w="",subnavbarClassName:S="",subnavbarClass:C="",innerClassName:I="",innerClass:_="",leftClassName:T="",leftClass:M="",titleClassName:P="",titleClass:L="",subtitleClassName:j="",subtitleClass:B="",rightClassName:K="",rightClass:X="",centerTitle:Z}=t;return{base:{common:A("w-full z-20 top-0 pt-safe",(i||o)&&"pointer-events-none",tr("sticky",n)),ios:A(c,e.textIos),material:A(d,e.textMaterial)},bg:{common:A("absolute w-full h-full left-0 top-0",r&&"hairline-b",x||w),ios:A(e.bgIos,a&&"translucent"),material:`${e.bgMaterial}`},subnavbar:{common:A("relative flex items-center",S||C,(i||o)&&"pointer-events-auto"),ios:"h-11 pl-2-safe pr-2-safe",material:"h-14 pl-4-safe pr-4-safe"},inner:{common:A("flex relative items-center w-full overflow-hidden",I||_,(i||o)&&"pointer-events-auto z-10"),ios:A("pl-2-safe pr-2-safe h-11",!l&&u?"justify-end":"justify-between"),material:"justify-start h-16 pl-safe pr-safe"},titleContainer:{common:A("flex items-center px-4 relative",(i||o)&&"pointer-events-auto"),ios:A(o&&A(v,"h-11 font-semibold"),i&&A(g,"h-13 font-bold")),material:A(o&&A(b,"h-12 pb-4"),i&&A(y,"h-[5.5rem]"))},left:{common:A("flex justify-center items-center h-full",T||M),ios:"me-2 transform transform-gpu",material:"mx-1"},title:{common:A("whitespace-nowrap leading-tight",P||L,(i||o||s)&&"opacity-0",Z?"absolute top-1/2 left-1/2 transform-gpu -translate-x-1/2 -translate-y-1/2 text-center":"text-start"),ios:A(`${p} font-semibold`,!Z&&"first:mx-2"),material:A(`${f} font-normal`,!Z&&"first:mx-4")},subtitle:{common:A("font-normal leading-none",j||B),ios:"text-2xs opacity-55",material:"text-sm opacity-85"},right:{common:A("flex justify-center items-center h-full",K||X),ios:A("transform transform-gpu",Z?"ms-2":"ms-auto"),material:"ms-auto me-1"}}},$Q=(t,e)=>({bgIos:A("bg-ios-light-surface-2",e("dark:bg-ios-dark-surface-2")),bgMaterial:A("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),textIos:A("text-black",e("dark:text-white")),textMaterial:A("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t});function dE(){return dE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dE.apply(this,arguments)}const jy=R.forwardRef((t,e)=>{const{component:n="div",className:r,bgClassName:a="",innerClassName:i="",leftClassName:o="",titleClassName:s="",subtitleClassName:l="",rightClassName:u="",subnavbarClassName:c="",centerTitle:d,colors:p,translucent:f=!0,outline:g,medium:y,large:v,transparent:b,fontSizeIos:x="text-[17px]",fontSizeMaterial:w="text-[16px]",titleFontSizeIos:S="text-[17px]",titleFontSizeMaterial:C="text-[22px]",titleMediumFontSizeIos:I="text-[24px]",titleMediumFontSizeMaterial:_="text-[24px]",titleLargeFontSizeIos:T="text-[34px]",titleLargeFontSizeMaterial:M="text-[28px]",scrollEl:P,left:L,title:j,subtitle:B,right:K,subnavbar:X,ios:Z,material:H,children:F,...Y}=t,Q=R.useRef(null),ne=R.useRef(0),se=R.useRef(null),pe=R.useRef(null),de=R.useRef(null),ie=R.useRef(null),xe=R.useRef(null),q=R.useRef(null);R.useImperativeHandle(e,()=>({el:Q.current}));const oe=n,he=yn({ios:Z,material:H}),Ie=it({ios:Z,material:H}),Ee=Tt(),_e={...Y},Fe=$Q(p,Ee),Xe=et=>{const{scrollTop:on}=et.target;if(!b&&!v&&!y){q.current&&(ie.current&&(ie.current.style.opacity=""),se.current&&(se.current.style.opacity=""));return}const jt=ne.current,Yt=Math.max(Math.min(on/jt,1),0);se.current.style.opacity=b?-.5+Yt*1.5:"",(y||v)&&(se.current.style.transform=`translateY(-${Yt*jt}px)`),de.current&&(de.current.style.transform=`translateY(-${Yt*jt}px)`,de.current.style.opacity=1-Yt*2),ie.current&&(ie.current.style.opacity=-.5+Yt*1.5),(y||v)&&xe.current&&(xe.current.style.transform=`translateY(-${Yt*jt}px)`)},Oe=()=>typeof P>"u"?Q.current&&Q.current.parentNode:P.current||P,lt=()=>{if(!v&&!y&&!b){q.current&&(Xe({target:{scrollTop:0}}),q.current=!1);return}q.current=!0,de.current?ne.current=de.current.offsetHeight:ne.current=pe.current.offsetHeight;const et=Oe();et?(et.addEventListener("scroll",Xe),Xe({target:et})):Xe({target:{scrollTop:0}})},Je=()=>{const et=Oe();et&&et.removeEventListener("scroll",Xe)};R.useEffect(()=>(lt(),Je));const nt=Ie(RQ({...t,centerTitle:typeof d>"u"?he==="ios":d,translucent:f,outline:typeof g>"u"?he==="ios":g,fontSizeIos:x,fontSizeMaterial:w,titleFontSizeIos:S,titleFontSizeMaterial:C,titleMediumFontSizeIos:I,titleMediumFontSizeMaterial:_,titleLargeFontSizeIos:T,titleLargeFontSizeMaterial:M,bgClassName:a,innerClassName:i,leftClassName:o,titleClassName:s,subtitleClassName:l,rightClassName:u,subnavbarClassName:c},Fe,r),r);return W.createElement(oe,dE({ref:Q,className:nt.base},_e),W.createElement("div",{className:nt.bg,ref:se}),W.createElement("div",{className:nt.inner,ref:pe},L&&W.createElement("div",{className:nt.left},L),(j||B)&&W.createElement("div",{className:nt.title,ref:ie},j,B&&W.createElement("div",{className:nt.subtitle},B)),K&&W.createElement("div",{className:nt.right},K),F),(v||y)&&W.createElement("div",{className:nt.titleContainer,ref:de},j),X&&W.createElement("div",{className:nt.subnavbar,ref:xe},X))});jy.displayName="Navbar";function Vy(){return Vy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vy.apply(this,arguments)}const oP=t=>{let{theme:e,...n}=t;return e==="ios"?W.createElement("svg",Vy({xmlns:"http://www.w3.org/2000/svg",width:"12",height:"20",viewBox:"0 0 12 20",fill:"currentcolor"},n),W.createElement("path",{d:"M0.18261596,9.4221638 C0.21783626,9.37068075 0.25835058,9.32165682 0.30416276,9.27584463 L9.1425872,0.4374202 C9.7256776,-0.14567018 10.6691555,-0.1475686 11.2590259,0.44230183 C11.8448123,1.02808827 11.8502479,1.97240019 11.2639075,2.55874056 L3.82594417,9.9967039 L11.2578297,17.4285894 C11.8409201,18.0116798 11.8428185,18.9551577 11.252948,19.5450281 C10.6671616,20.1308146 9.7228497,20.1362501 9.13650932,19.5499097 L0.2980849,10.7114853 C-0.0545897,10.3588107 -0.0959125,9.8144953 0.18261596,9.4221638 Z"})):W.createElement("svg",Vy({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentcolor"},n),W.createElement("polygon",{points:"16 7 3.83 7 9.42 1.41 8 0 0 8 8 16 9.41 14.59 3.83 9 16 9"}))},OQ=()=>({base:{common:"cursor-pointer",material:"min-w-12 k-touch-ripple-inset"},icon:"rtl:rotate-180"});function pE(){return pE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pE.apply(this,arguments)}const MQ=R.forwardRef((t,e)=>{const{component:n="a",className:r,text:a="Back",showText:i="auto",ios:o,material:s,onClick:l,children:u,...c}=t,d=R.useRef(null);R.useImperativeHandle(e,()=>({el:d.current}));const p={...c},f=yn({ios:o,material:s}),g=it({ios:o,material:s}),y=i==="auto"&&f==="ios"||i===!0,v=g(OQ(),r);return W.createElement(pp,pE({ref:d,component:n,className:v.base,navbar:!0},p,{onClick:l}),W.createElement("span",{className:v.icon},W.createElement(oP,{theme:f})),y&&W.createElement("span",null,a),u)});MQ.displayName="NavbarBackLink";const PQ=(t,e,n)=>{const{opened:r,translucent:a}=t;return{base:{common:A(tr("absolute",n),"z-50 transform transition-transform-opacity box-border duration-500",!r&&"-translate-y-full opacity-0 pointer-events-none transition duration-500","md:w-[568px] md:end-auto md:start-1/2 md:-ms-[256px]"),ios:A("rounded-xl px-2.5 py-2.5 start-2 end-2 top-2 shadow-lg",e.bgIos,a&&"translucent"),material:A("rounded-2xl py-5 px-4 start-4 end-4 top-4",e.bgMaterial)},content:{common:"",ios:"mt-2.5 ",material:A("mt-2")},header:{common:A("flex justify-start"),ios:"items-center",material:"items-start"},icon:{ios:A("me-2"),material:"me-4"},contentTitle:{material:A("flex flex-row items-center")},title:{ios:A("tracking-wide text-[13px] uppercase",e.titleIos),material:A("font-medium")},titleRightText:{ios:A("me-1 ms-auto text-[13px]",e.titleRightIos),material:A("ms-1 text-xs before:w-0.75 before:h-0.75 before:rounded-full before:inline-block before:align-middle before:me-1",e.titleRightMd)},button:{ios:A("me-1 ms-auto cursor-pointer"),material:A("ms-auto cursor-pointer")},deleteIcon:{ios:A("w-5 h-5",e.deleteIconIos),material:A("w-6 h-6",e.deleteIconMd)},subtitle:{ios:A("text-[15px] font-semibold",e.subtitleIos),material:A("text-sm")},text:{ios:A("text-[15px]"),material:A("text-sm",e.textMaterial)}}},AQ=(t,e)=>({bgIos:A("bg-white",e("dark:bg-[#1e1e1e]")),bgMaterial:A("bg-md-light-surface-5",e("dark:bg-md-dark-surface-5")),titleIos:A("text-black",e("dark:text-white")),titleRightIos:A("text-opacity-45 text-black",e("dark:text-white dark:text-opacity-45")),titleRightMd:A("text-md-light-on-surface-variant before:bg-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant before:dark:bg-md-dark-on-surface-variant")),subtitleIos:A("text-black ",e("dark:text-white")),textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant ")),deleteIconIos:A("fill-stone-400 active:fill-stone-200",e("dark:fill-stone-500 dark:active:fill-stone-700")),deleteIconMd:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t});function Uy(){return Uy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uy.apply(this,arguments)}const DQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,button:i,icon:o,title:s,titleRightText:l,subtitle:u,text:c,translucent:d=!0,opened:p,onClose:f,ios:g,material:y,children:v,...b}=t,x=R.useRef(null);R.useImperativeHandle(e,()=>({el:x.current}));const w=n,S={...b},C=yn({ios:g,material:y}),I=it({ios:g,material:y}),_=Tt(),T=AQ(a,_),M=I(PQ({...t,translucent:d},T,r),r);return C==="ios"?W.createElement(w,Uy({ref:x,className:M.base},S),W.createElement("div",{className:M.header},o&&W.createElement("div",{className:M.icon},o),s&&W.createElement("div",{className:M.title},s),l&&W.createElement("div",{className:M.titleRightText},l),i&&W.createElement("div",{className:M.button,role:"button",tabIndex:"0",onClick:f},W.createElement(qf,{theme:C,className:M.deleteIcon}))),W.createElement("div",{className:M.content},u&&W.createElement("div",{className:M.subtitle},u),c&&W.createElement("div",{className:M.text},c),v)):W.createElement(w,Uy({ref:x,className:M.base},S),W.createElement("div",{className:M.header},o&&W.createElement("div",{className:M.icon},o),W.createElement("div",{className:M.contentWrapper},W.createElement("div",{className:M.contentTitle},s&&W.createElement("div",{className:M.title},s),l&&W.createElement("div",{className:M.titleRightText},l)),W.createElement("div",{className:M.content},u&&W.createElement("div",{className:M.subtitle},u),c&&W.createElement("div",{className:M.text},c),v)),i&&W.createElement("div",{className:M.button,role:"button",tabIndex:"0",onClick:f},W.createElement(qf,{theme:C,className:M.deleteIcon}))))});DQ.displayName="Notification";const LQ=(t,e,n)=>({base:{common:A("h-full w-full left-0 top-0 overflow-auto",tr("absolute",n)),ios:e.bgIos,material:e.bgMaterial}}),FQ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-ios-light-surface",e("dark:bg-ios-dark-surface")),bgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}};function hE(){return hE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hE.apply(this,arguments)}const Gy=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,...l}=t,u=R.useRef(null);R.useImperativeHandle(e,()=>({el:u.current}));const c=n,d={...l},p=it({ios:i,material:o}),f=Tt(),g=FQ(a,f),y=p(LQ(t,g,r),r);return W.createElement(c,hE({ref:u,className:y.base},d),s)});Gy.displayName="Page";const BQ=(t,e,n)=>{const{size:r,floating:a}=t;return{base:{common:A("transition-transform transform duration-400 z-40 max-w-full overflow-hidden",a?"top-2-safe bottom-2-safe !h-auto":"top-0 max-h-full",e.bg,tr("fixed",n),r),ios:"",material:"ease-material-in"},left:{common:A("no-safe-areas-right",a?"right-full -mr-2 rounded-2xl":"right-full"),material:A(!a&&"rounded-r-2xl"),opened:"translate-x-full",closed:"-translate-x-2"},right:{common:A("no-safe-areas-left",a?"left-full -ml-2 rounded-2xl":"left-full"),material:A(!a&&"rounded-l-2xl"),opened:"-translate-x-full",closed:"translate-x-2"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},zQ=function(t,e){return t===void 0&&(t={}),{bg:A("bg-white",e("dark:bg-black")),...t}};function fE(){return fE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fE.apply(this,arguments)}const sP=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,size:i="w-72 h-screen",side:o="left",opened:s,backdrop:l=!0,floating:u=!1,onBackdropClick:c,ios:d,material:p,children:f,...g}=t,y=R.useRef(null);R.useImperativeHandle(e,()=>({el:y.current}));const v=s?"opened":"closed",b=n,x={...g},w=it({ios:d,material:p}),S=Tt(),C=zQ(a,S),I=w(BQ({...t,size:i,floating:u},C,r),r),_=A(I.base,I[o][v]);return W.createElement(W.Fragment,null,l&&W.createElement("div",{className:I.backdrop[v],onClick:c}),W.createElement(b,fE({ref:y,className:_},x),f))});sP.displayName="Panel";const jQ=t=>{let{popoverEl:e,targetEl:n,angleEl:r,needsAngle:a,targetX:i,targetY:o,targetWidth:s=0,targetHeight:l=0,theme:u}=t;n.current?n=n.current:n.value?n=n.value:n.el?n=n.el:n.$el&&(n=n.$el),typeof n=="string"&&(n=document.querySelector(n));let c=document.body.offsetWidth,d=document.body.offsetHeight;c===0&&(c=window.innerWidth),d===0&&(d=window.innerHeight);const[p,f]=[e.offsetWidth,e.offsetHeight];let g=0,y,v,b="";a&&(g=r.offsetWidth/2);let x,w;const S=window.getComputedStyle(n);let C=parseInt(S.getPropertyValue("--k-safe-area-top"),10)||0,I=parseInt(S.getPropertyValue("--k-safe-area-left"),10)||0,_=parseInt(S.getPropertyValue("--k-safe-area-right"),10)||0;if(Number.isNaN(C)&&(C=0),Number.isNaN(I)&&(I=0),Number.isNaN(_)&&(_=0),n){s=n.offsetWidth,l=n.offsetHeight;const X=n.getBoundingClientRect();x=X.left,w=X.top}else typeof i<"u"&&o!=="undefined"&&(x=i,w=o);let[T,M,P]=[0,0,0];const L=u==="ios"?13:23;let j="top";f+g<w-C?M=w-f-g:f+g<d-w-l?(j="bottom",M=w+l+g):(j="middle",M=l/2+w-f/2,P=M,M=Math.max(5,Math.min(M,d-f-5)),P-=M),j==="top"||j==="bottom"?(T=s/2+x-p/2,P=T,T=Math.max(5,Math.min(T,c-p-5)),I&&(T=Math.max(T,I)),_&&T+p>c-5-_&&(T=c-5-_-p),j==="top"&&(b="bottom"),j==="bottom"&&(b="top"),P-=T,y=p/2-g+P,y=Math.max(Math.min(y,p-g*2-L),L)):j==="middle"&&(T=x-p-g,b="right",(T<5||T+p+_>c||T<I)&&(T<5&&(T=x+s+g),T+p+_>c&&(T=c-p-5-_),T<I&&(T=I),b="left"),v=f/2-g+P,v=Math.max(Math.min(v,f-g*2-L),L));const B=j,K=T<x?"left":"right";return{set:!0,angleTop:typeof v>"u"?void 0:`${v}px`,angleLeft:typeof y>"u"?void 0:`${y}px`,anglePosition:b,popoverTop:`${M}px`,popoverLeft:`${T}px`,popoverPosition:`${B}-${K}`}},VQ=(t,e,n)=>{const{size:r,translucent:a,angleClassName:i,angleClass:o}=t;return{base:{common:A("transition-transform-opacity z-40 no-safe-areas",tr("fixed",n),r),ios:"duration-300",material:"duration-400 ease-material-in",opened:"",closed:{common:"opacity-0 pointer-events-none",ios:"",material:"scale-x-90 scale-y-75"}},inner:{common:A("overflow-hidden relative"),ios:A("rounded-xl",a&&"translucent",e.bgIos),material:A("rounded-[1.75rem]",e.bgMaterial)},angleWrap:{common:A(i||o||"","pointer-events-none"),ios:A("absolute w-6.5 h-6.5 z-50 overflow-hidden",a&&"opacity-80"),material:A("absolute w-6.5 h-6.5 z-50 overflow-hidden"),bottom:"top-full",top:"bottom-full",left:"right-full",right:"left-full"},angleArrow:{common:A("absolute rounded w-full h-full transform rotate-45"),ios:e.bgIos,material:e.bgMaterial,bottom:"-top-4.75",top:"top-4.75",left:"left-4.75",right:"-left-4.75"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}}},UQ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-ios-light-surface-3",e("dark:bg-ios-dark-surface-3")),bgMaterial:A("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),...t}};function mE(){return mE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mE.apply(this,arguments)}const GQ=R.forwardRef((t,e)=>{const{component:n="div",className:r,angle:a=!0,angleClassName:i="",colors:o,size:s="w-64",opened:l,backdrop:u=!0,onBackdropClick:c,target:d,targetX:p,targetY:f,targetWidth:g,targetHeight:y,translucent:v=!0,ios:b,material:x,children:w,style:S={},...C}=t,I=R.useRef(null),_=R.useRef(null),[T,M]=R.useState({set:!1,angleTop:0,angleLeft:0,anglePosition:"bottom",popoverTop:0,popoverLeft:0,popoverPosition:"top-left"});R.useImperativeHandle(e,()=>({el:I.current}));const P=l?"opened":"closed",L=n,j={...C},B=yn({ios:b,material:x}),K=it({ios:b,material:x}),X=Tt(),Z=UQ(o,X),H=K(VQ({...t,size:s,angleClassName:i,translucent:v},Z,r),r),F=()=>{!d||!I.current||!l||M(jQ({popoverEl:I.current,targetEl:d,angleEl:_.current,needsAngle:a,targetX:p,targetY:f,targetHeight:y,targetWidth:g,theme:B}))},Y=()=>{typeof window>"u"||window.addEventListener("resize",F)},Q=()=>{typeof window>"u"||window.removeEventListener("resize",F)};R.useEffect(()=>(Y(),()=>Q())),R.useEffect(()=>{F()},[l]);const ne=T.set?{...S||{},left:T.popoverLeft,top:T.popoverTop}:S,se=T.set?{left:T.angleLeft,top:T.angleTop}:void 0,pe={"top-right":"origin-bottom-left","top-left":"origin-bottom-right","middle-left":"origin-right","middle-right":"origin-left","bottom-right":"origin-top-left","bottom-left":"origin-top-right"},de=A(H.base[P],B==="material"&&pe[T.popoverPosition]);return W.createElement(W.Fragment,null,u&&W.createElement("div",{className:H.backdrop[P],onClick:c}),W.createElement(L,mE({ref:I,className:de,style:ne},j),a&&W.createElement("div",{ref:_,style:se,className:H.angleWrap[T.anglePosition]},W.createElement("div",{className:H.angleArrow[T.anglePosition]})),W.createElement("div",{className:H.inner},w)))});GQ.displayName="Popover";const WQ=(t,e,n)=>{const{size:r}=t;return{base:{common:A("left-1/2 top-1/2 transition-transform transform -translate-x-1/2 z-40 max-w-full max-h-full overflow-hidden md:no-safe-areas",e.bg,tr("fixed",n),r),ios:"duration-400 md:rounded-lg",material:" md:rounded-[1.75rem]",opened:{common:"-translate-y-1/2",material:A("ease-material-in-popup duration-[600ms]")},closed:{common:"translate-y-full",material:"duration-400"}},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},HQ=function(t,e){return t===void 0&&(t={}),{bg:A("bg-white",e("dark:bg-black")),...t}};function gE(){return gE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gE.apply(this,arguments)}const lP=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,size:i="w-screen h-screen md:w-160 md:h-160",opened:o,backdrop:s=!0,onBackdropClick:l,ios:u,material:c,children:d,...p}=t,f=R.useRef(null);R.useImperativeHandle(e,()=>({el:f.current}));const g=o?"opened":"closed",y=n,v={...p},b=it({ios:u,material:c}),x=Tt(),w=HQ(a,x),S=b(WQ({...t,size:i},w,r),r);return W.createElement(W.Fragment,null,s&&W.createElement("div",{className:S.backdrop[g],onClick:l}),W.createElement(y,gE({ref:f,className:S.base[g]},v),d))});lP.displayName="Popup";function yE(){return yE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yE.apply(this,arguments)}const qQ=t=>W.createElement("svg",yE({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},t),W.createElement("path",{d:"M10,0 C10.5522847,0 11,0.44771525 11,1 L11,6 C11,6.55228475 10.5522847,7 10,7 C9.44771525,7 9,6.55228475 9,6 L9,1 C9,0.44771525 9.44771525,0 10,0 Z"}),W.createElement("path",{d:"M10,13 C10.5522847,13 11,13.4477153 11,14 L11,19 C11,19.5522847 10.5522847,20 10,20 C9.44771525,20 9,19.5522847 9,19 L9,14 C9,13.4477153 9.44771525,13 10,13 Z",opacity:".64"}),W.createElement("path",{d:"M13,10 C13,9.44771525 13.4477153,9 14,9 L19,9 C19.5522847,9 20,9.44771525 20,10 C20,10.5522847 19.5522847,11 19,11 L14,11 C13.4477153,11 13,10.5522847 13,10 Z",opacity:".82"}),W.createElement("path",{d:"M-3.8285687e-16,10 C-3.8285687e-16,9.44771525 0.44771525,9 1,9 L6,9 C6.55228475,9 7,9.44771525 7,10 C7,10.5522847 6.55228475,11 6,11 L1,11 C0.44771525,11 -3.8285687e-16,10.5522847 -3.8285687e-16,10 Z",opacity:".46"}),W.createElement("path",{d:"M2.92912627,2.92912627 C3.31965056,2.53860197 3.95281554,2.53860197 4.34333983,2.92912627 L7.87887373,6.46466017 C8.26939803,6.85518446 8.26939803,7.48834944 7.87887373,7.87887373 C7.48834944,8.26939803 6.85518446,8.26939803 6.46466017,7.87887373 L2.92912627,4.34333983 C2.53860197,3.95281554 2.53860197,3.31965056 2.92912627,2.92912627 Z",opacity:".37"}),W.createElement("path",{d:"M12.1211263,12.1211263 C12.5116506,11.730602 13.1448155,11.730602 13.5353398,12.1211263 L17.0708737,15.6566602 C17.461398,16.0471845 17.461398,16.6803494 17.0708737,17.0708737 C16.6803494,17.461398 16.0471845,17.461398 15.6566602,17.0708737 L12.1211263,13.5353398 C11.730602,13.1448155 11.730602,12.5116506 12.1211263,12.1211263 Z",opacity:".73"}),W.createElement("path",{d:"M12.1211263,7.87887373 C11.730602,7.48834944 11.730602,6.85518446 12.1211263,6.46466017 L15.6566602,2.92912627 C16.0471845,2.53860197 16.6803494,2.53860197 17.0708737,2.92912627 C17.461398,3.31965056 17.461398,3.95281554 17.0708737,4.34333983 L13.5353398,7.87887373 C13.1448155,8.26939803 12.5116506,8.26939803 12.1211263,7.87887373 Z",opacity:".91"}),W.createElement("path",{d:"M2.92912627,17.0708737 C2.53860197,16.6803494 2.53860197,16.0471845 2.92912627,15.6566602 L6.46466017,12.1211263 C6.85518446,11.730602 7.48834944,11.730602 7.87887373,12.1211263 C8.26939803,12.5116506 8.26939803,13.1448155 7.87887373,13.5353398 L4.34333983,17.0708737 C3.95281554,17.461398 3.31965056,17.461398 2.92912627,17.0708737 Z",opacity:".55"}));function bE(){return bE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bE.apply(this,arguments)}const KQ=t=>W.createElement("svg",bE({viewBox:"0 0 36 36"},t,{fill:"none",stroke:"currentcolor"}),W.createElement("circle",{cx:"18",cy:"18",r:"16"})),XQ=(t,e,n)=>{const{size:r}=t;return{base:{common:A(n==="ios"?"k-ios-preloader":"k-material-preloader",`inline-block ${r}`),ios:e.iconIos,material:`stroke-4 ${e.iconMaterial}`},inner:{common:"block w-full h-full"}}},YQ=function(t,e){return t===void 0&&(t={}),{iconIos:"text-primary",iconMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function vE(){return vE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vE.apply(this,arguments)}const QQ=R.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,size:i="w-8 h-8",ios:o,material:s,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=yn({ios:o,material:s}),g=it({ios:o,material:s}),y=Tt(),v=YQ(a,y),b=f==="ios"?qQ:KQ,x=g(XQ({...t,size:i},v,f),r);return W.createElement(d,vE({ref:c,className:x.base},p),W.createElement("span",{className:x.inner},W.createElement(b,{className:"w-full h-full"})),l)});QQ.displayName="Preloader";const ZQ=t=>({base:{common:"block h-1 bg-opacity-30 dark:bg-opacity-30 overflow-hidden rtl:rotate-180",ios:"bg-black rounded-full",material:t.bgMaterial},inner:{common:"block duration-200 w-full h-full",ios:t.bgIos,material:t.bgMaterial}}),JQ=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-primary",bgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function xE(){return xE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xE.apply(this,arguments)}const eZ=R.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,ios:i,material:o,progress:s=0,children:l,...u}=t,c=R.useRef(null);R.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=it({ios:i,material:o}),g=Tt(),y=JQ(a,g),v=f(ZQ(y),r);return W.createElement(d,xE({ref:c,className:v.base},p),W.createElement("span",{className:v.inner,style:{transform:`translateX(-${100-s/1*100}%)`}}),l)});eZ.displayName="Progressbar";const tZ=(t,e,n,r)=>({base:A("cursor-pointer inline-flex align-middle",tr("relative",n),r("dark:touch-ripple-white")),iconWrap:{common:"flex items-center justify-center rounded-full",ios:"w-5.5 h-5.5 border",material:"w-5 h-5 border-2",notChecked:{ios:e.borderIos,material:e.borderMaterial},checked:{ios:e.borderCheckedIos,material:e.borderCheckedMaterial}},icon:{ios:"text-primary",material:`w-3 h-3 rounded-full ${e.bgCheckedMaterial}`,notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:"bg-white w-3/4",ios:"h-0.25",material:"h-0.5"},input:{common:"hidden"}}),nZ=function(t,e){return t===void 0&&(t={}),{borderIos:A("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),...t}};function wE(){return wE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wE.apply(this,arguments)}const rZ=R.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,name:s,value:l,disabled:u,readOnly:c,onChange:d,ios:p,material:f,touchRipple:g=!0,children:y,...v}=t,b=R.useRef(null);R.useImperativeHandle(e,()=>({el:b.current}));const x=n,w={...v},S=yn({ios:p,material:f}),C=it({ios:p,material:f}),I=Tt();Po(b,S==="material"&&g);const _=nZ(a,I),T=o||i&&!d?"checked":"notChecked",M=C(tZ(t,_,r,I),r);return W.createElement(x,wE({ref:b,className:M.base},w),W.createElement("input",{type:"radio",name:s,value:l,disabled:u,readOnly:c,checked:o,defaultChecked:i,onChange:d,className:M.input}),W.createElement("i",{className:M.iconWrap[T]},S==="ios"?W.createElement(rP,{className:M.icon[T]}):W.createElement("span",{className:M.icon[T]})),y)});rZ.displayName="Radio";const aZ=(t,e,n)=>({base:{common:"block relative select-none w-full self-center touch-pan-y",ios:"h-7",material:"h-5"},trackBg:{common:A("absolute top-1/2 left-0 w-full transform -translate-y-1/2 bg-black bg-opacity-20",n("dark:bg-white dark:bg-opacity-20")),ios:"h-1 rounded-full",material:"h-0.5"},trackValue:{common:"absolute top-1/2 start-0 w-full transform -translate-y-1/2",ios:`h-1 rounded-full ${e.valueBgIos}`,material:`h-0.5 ${e.valueBgMaterial}`},input:{common:"appearance-none w-full bg-transparent cursor-pointer block focus:outline-none relative",ios:"h-7",material:"h-5"},inputThumb:{common:"range-thumb:relative range-thumb:appearance-none range-thumb:rounded-full range-thumb:border-none",ios:`range-thumb:w-7 range-thumb:h-7 range-thumb:-mt-3.5 ${e.thumbBgIos} range-thumb:shadow-ios-toggle`,material:`range-thumb:w-3 range-thumb:h-3 ${e.thumbBgMaterial} range-thumb:-mt-1.5 range-thumb:transform range-thumb:duration-200 active:range-thumb:scale-150`},inputTrack:{common:"range-track:appearance-none range-track:h-px"}}),iZ=function(t,e){return t===void 0&&(t={}),{valueBgIos:"bg-primary",valueBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),thumbBgIos:"range-thumb:bg-white",thumbBgMaterial:A("range-thumb:bg-md-light-primary",e("dark:range-thumb:bg-md-dark-primary")),...t}};function kE(){return kE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kE.apply(this,arguments)}const Wy=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,inputId:l,name:u,value:c=void 0,defaultValue:d,readOnly:p,disabled:f,step:g=1,min:y=0,max:v=100,onInput:b,onChange:x,onFocus:w,onBlur:S,...C}=t,I=R.useRef(null);R.useImperativeHandle(e,()=>({el:I.current}));const _=n,T={...C},M=it({ios:i,material:o}),P=Tt(),L=iZ(a,P),j=M(aZ(t,L,P),r),B=((c||0)-y)/(v-y)*100;return W.createElement(_,kE({ref:I,className:j.base},T),W.createElement("span",{className:j.trackBg}),W.createElement("span",{className:j.trackValue,style:{width:`${B}%`}}),W.createElement("input",{className:A(j.input,j.inputThumb,j.inputTrack),type:"range",id:l,name:u,min:y,max:v,step:g,value:c,defaultValue:d,readOnly:p,disabled:f,onInput:b,onChange:x,onFocus:w,onBlur:S}))});Wy.displayName="Range";const oZ=(t,e,n)=>{let{isEnabled:r,darkClasses:a}=n;return{base:{common:"relative flex overflow-hidden items-center",ios:"px-2 w-full",material:"px-0 py-2 -mx-2 w-[calc(100%+32px)]"},inner:{common:"w-full shrink-1 relative",ios:"transition-all duration-300"},searchIconWrap:{common:"absolute inset-y-0 flex items-center z-40",ios:"start-2",material:"start-4"},clearButton:{common:"absolute justify-center inset-y-0 flex items-center z-40 cursor-pointer end-0",ios:"w-8 h-8",material:"w-12 h-12"},input:{common:"block appearance-none  w-full py-2  focus:outline-none z-30",ios:A("h-8 bg-black/10 pl-7 pr-7 rounded-lg text-base",a("dark:placeholder-white dark:placeholder-opacity-30 dark:bg-white/10"),e.placeholderIos,e.inputBgIos),material:A("h-12 ps-12 pe-4 rounded-full",e.placeholderMaterial,e.inputBgMaterial)},deleteIcon:{common:"",ios:"w-3.5 h-3.5 opacity-45",material:"w-6 h-6 active:opacity-20"},searchIcon:{common:"",ios:A("w-4 h-4 opacity-45"),material:A("w-5 h-5 z-30",r?"opacity-0 transform rotate-90 scale-50 transition-transform-opacity  duration-400 ":"block transform transition-transform-opacity scale-100 rotate-0 duration-400")},cancelButton:{ios:A("ps-2 flex items-center h-8 cursor-pointer bg-transparent text-primary shrink-0 z-40 transition-all duration-300 active:opacity-30",r?"":"opacity-0"),material:A("absolute left-4 cursor-pointer",r?"z-40 transform scale-100 rotate-0 transition-transform-opacity  duration-400":"opacity-0 transform -rotate-90 scale-50 transition-transform-opacity duration-400")}}},sZ=function(t,e){return t===void 0&&(t={}),{inputBgIos:"",inputBgMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),placeholderIos:"",placeholderMaterial:A("placeholder-md-light-on-surface-variant",e("dark:placeholder-md-dark-on-surface-variant")),...t}};function Hy(){return Hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hy.apply(this,arguments)}const lZ=t=>{let{theme:e,...n}=t;return e==="ios"?W.createElement("svg",Hy({xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 56 56",fill:"currentcolor"},n),W.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"})):W.createElement("svg",Hy({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 56 56",fill:"currentcolor"},n),W.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"}))};function SE(){return SE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SE.apply(this,arguments)}const uZ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,placeholder:i="Search",value:o,inputId:s,inputStyle:l,disableButton:u=!1,disableButtonText:c="Cancel",clearButton:d=!0,onInput:p,onChange:f,onFocus:g,onBlur:y,onClear:v,onDisable:b,ios:x,material:w,...S}=t,C=R.useRef(null),I=R.useRef(null),_=R.useRef(null),[T,M]=R.useState(0),P=R.useRef(null),L=R.useRef(!1);R.useImperativeHandle(e,()=>({el:I.current,searchEl:C.current}));const[j,B]=R.useState(!1),K=yn({ios:x,material:w}),X=it({ios:x,material:w}),Z=Tt(),H=sZ(a,Z),F=he=>{p&&p(he)},Y=he=>{f&&f(he)},Q=he=>{B(!0),g&&g(he)},ne=he=>{y&&y(he)},se=()=>{o||(P.current=setTimeout(()=>{B(!1)}))},pe=()=>{clearTimeout(P.current)},de=he=>{he.preventDefault(),B(!1),C.current&&C.current.blur(),b&&b(),v&&v()};R.useEffect(()=>{_.current&&M(_.current.offsetWidth),requestAnimationFrame(()=>{requestAnimationFrame(()=>{L.current=!0})})},[]);const ie=X(oZ({...t},H,{isEnabled:j,darkClasses:Z})),xe=K==="ios"?W.createElement("button",{type:"button",ref:_,style:{marginRight:j?0:`-${T}px`,transitionDuration:L.current?"":"0ms"},className:ie.cancelButton,onClick:de,onPointerDown:he=>he.preventDefault()},c):W.createElement(oP,{theme:K,onClick:de,className:A(ie.cancelButton),onPointerDown:he=>he.preventDefault()}),q=n,oe={...S};return W.createElement(q,SE({ref:I,className:ie.base},oe,{onBlurCapture:se,onFocusCapture:pe}),W.createElement("div",{className:ie.inner},W.createElement("span",{className:ie.searchIconWrap},W.createElement(lZ,{ios:x,material:w,className:ie.searchIcon})),W.createElement("input",{id:s,ref:C,className:A(ie.input),style:l,type:"text",name:"search",placeholder:i,value:o,onInput:F,onChange:Y,onFocus:Q,onBlur:ne}),o&&d&&W.createElement("button",{className:ie.clearButton,onClick:v,type:"button"},W.createElement(qf,{theme:K,className:ie.deleteIcon}))),u&&xe)});uZ.displayName="Searchbar";const cZ=(t,e,n)=>{const{outline:r,rounded:a}=t;return{base:{common:"flex justify-center items-center overflow-hidden w-full",square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},raised:r?"shadow":"shadow divide-x divide-black divide-opacity-10 rtl:divide-x-reverse",outline:{common:"",ios:`${e.borderIos} border-2`,material:`${e.borderMaterial} border`},outlineInner:{common:"-m-0.5 flex w-full justify-center items-center rtl:divide-x-reverse",ios:`divide-x-2 ${e.divideIos}`,material:`divide-x ${e.divideMaterial}`},strong:{common:A("p-0.5 space-x-1 relative"),ios:e.strongBgIos,material:e.strongBgMaterial},strongHighlight:{common:A("absolute start-0.5 top-0.5 bottom-0.5 !ms-0 pointer-events-none duration-200",a&&"rounded-full","bg-white shadow",n("dark:bg-opacity-15 dark:touch-ripple-white")),ios:A(!a&&"rounded"),material:A(!a&&"rounded-md")}}},dZ=function(t,e){return t===void 0&&(t={}),{strongBgIos:A("bg-black bg-opacity-5",e("dark:bg-white dark:bg-opacity-10")),strongBgMaterial:A("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),borderIos:"border-primary",borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),divideIos:"divide-primary",divideMaterial:A("divide-md-light-outline",e("dark:divide-md-dark-outline")),...t}};function CE(){return CE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CE.apply(this,arguments)}const pZ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,raised:s,outline:l,strong:u,rounded:c,children:d,...p}=t,f=R.useRef(null),g=R.useRef(null);R.useImperativeHandle(e,()=>({el:f.current}));const[y,v]=R.useState({transform:"",width:""}),b=n,x={...p},w=it({ios:i,material:o}),S=Tt(),C=dZ(a,S),I=w(cZ(t,C,S)),_=A(c?I.base.rounded:I.base.square,s&&I.raised,l&&I.outline,u&&I.strong,r);return R.useEffect(()=>{if(u&&g.current){const T=g.current.parentElement,M=T.children.length-1,P=[...T.children].indexOf(T.querySelector(".k-segmented-strong-button-active")),L="4px";v({...y,width:`calc((100% - 2px * 2 - ${L} * (${M} - 1)) / ${M})`,transform:`translateX(calc((${P} * 100% + ${P} * ${L}) * var(--k-rtl-reverse)))`})}},[d]),W.createElement(b,CE({ref:f,className:_},x),l?W.createElement("span",{className:I.outlineInner},d):d,u&&W.createElement("span",{ref:g,className:I.strongHighlight,style:y}))});pZ.displayName="Segmented";function IE(){return IE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IE.apply(this,arguments)}const hZ=R.forwardRef((t,e)=>{const{active:n,children:r,outline:a,strong:i,clear:o,rounded:s,...l}=t,u=R.useRef(null);return R.useImperativeHandle(e,()=>({el:u.current})),W.createElement(yr,IE({ref:u,segmented:!0,segmentedActive:n,segmentedStrong:i,rounded:s&&i},l),r)});hZ.displayName="SegmentedButton";const fZ=(t,e,n)=>({base:{common:A("left-0 top-full transition-transform duration-400 z-40 overflow-hidden",tr("fixed",n)),ios:"",material:`rounded-t-2xl ease-material-in ${e.bgIos}`,opened:`-translate-y-full ${e.bgMaterial}`,closed:""},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}),mZ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-white",e("dark:bg-black")),bgMaterial:A("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}};function EE(){return EE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EE.apply(this,arguments)}const gZ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,opened:i,backdrop:o=!0,onBackdropClick:s,ios:l,material:u,children:c,...d}=t,p=R.useRef(null);R.useImperativeHandle(e,()=>({el:p.current}));const f=i?"opened":"closed",g=n,y={...d},v=it({ios:l,material:u}),b=Tt(),x=mZ(a,b),w=v(fZ(t,x,r),r);return W.createElement(W.Fragment,null,o&&W.createElement("div",{className:w.backdrop[f],onClick:s}),W.createElement(g,EE({ref:p,className:w.base[f]},y),c))});gZ.displayName="Sheet";const yZ=(t,e)=>{const{buttonsOnly:n}=t;return{base:`${e.text} inline-flex items-stretch`,raised:"shadow",size:{small:{ios:"h-6",material:"h-8"},medium:{ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},shape:{square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},button:{common:"relative flex items-center justify-center w-10 cursor-pointer overflow-hidden z-10 select-none"},buttonLeftShape:{square:{ios:"rounded-s",material:"rounded-s-lg"},rounded:"rounded-s-full"},buttonRightShape:{square:{ios:"rounded-e",material:"rounded-e-lg"},rounded:"rounded-e-full"},buttonStyle:{fill:{common:A(e.fillTouchRipple,n&&"first:border-r border-black border-opacity-10 rtl:first:border-l rtl:first:border-r-0"),ios:A(e.fillBgIos,e.fillTextIos,e.fillActiveBgIos),material:A(e.fillBgMaterial,e.fillTextMaterial,e.fillActiveBgMaterial)},outline:{common:A(e.touchRipple,"active:bg-opacity-15",n&&"first:border-r-0 rtl:last:border-r-0"),ios:A("border-2",e.textIos,e.activeBgIos,e.outlineBorderIos,n&&"rtl:first:border-r-2"),material:A("border",e.textMaterial,e.activeBgMaterial,e.outlineBorderMaterial,n&&"rtl:first:border-r")},clear:{common:`${e.touchRipple} active:bg-opacity-15 last:border-l rtl:last:border-l-0 rtl:first:border-l border-black border-opacity-10`,ios:A(e.textIos,e.activeBgIos),material:A(e.textMaterial,e.activeBgMaterial)}},input:{common:"focus:outline-none text-center appearance-none bg-transparent"},value:{common:"w-11 flex items-center justify-center font-medium",ios:`text-base ${e.textIos}`,material:`text-sm ${e.textMaterial}`,fill:{common:"",ios:`border-t-2 border-b-2 ${e.outlineBorderIos}`,material:`border-t border-b ${e.outlineBorderMaterial}`},outline:{common:"",ios:`border-t-2 border-b-2 ${e.outlineBorderIos}`,material:`border-t border-b ${e.outlineBorderMaterial}`},clear:"border-l border-black border-opacity-10"},hBar:"w-4 h-0.5 bg-current block",vBar:"w-0.5 h-4 bg-current block absolute inset-1/2 transform -translate-x-1/2 rtl:translate-x-1/2 -translate-y-1/2"}},bZ=function(t,e){return t===void 0&&(t={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:A("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:A("text-white"),fillTextMaterial:A("text-md-light-on-primary",e("dark:text-md-dark-on-primary")),fillBgIos:"bg-primary",fillBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillTouchRipple:A("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),touchRipple:"touch-ripple-primary",...t}};function NE(){return NE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NE.apply(this,arguments)}const vZ=R.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,value:i=0,defaultValue:o,input:s=!1,inputType:l="text",inputPlaceholder:u,inputDisabled:c,inputReadOnly:d,buttonsOnly:p,rounded:f,roundedIos:g,roundedMaterial:y,small:v,smallIos:b,smallMaterial:x,large:w,largeIos:S,largeMaterial:C,raised:I,raisedIos:_,raisedMaterial:T,outline:M,outlineIos:P,outlineMaterial:L,onInput:j,onChange:B,onFocus:K,onBlur:X,onMinus:Z,onPlus:H,ios:F,material:Y,touchRipple:Q=!0,children:ne,...se}=t,pe=R.useRef(null),de=R.useRef(null),ie=R.useRef(null);R.useImperativeHandle(e,()=>({el:pe.current}));const xe=n,q=yn({ios:F,material:Y}),oe=it({ios:F,material:Y});Po(de,q==="material"&&Q),Po(ie,q==="material"&&Q);const he=typeof f>"u"?q==="ios"?g:y:f,Ie=typeof v>"u"?q==="ios"?b:x:v,Ee=typeof w>"u"?q==="ios"?S:C:w,_e=typeof I>"u"?q==="ios"?_:T:I,Fe=typeof M>"u"?q==="ios"?P:L:M,Xe=Tt(),Oe=bZ(a,Xe),lt=Ee?"large":Ie?"small":"medium",Je=Fe&&_e?"clear":Fe?"outline":"fill",nt=he?"rounded":"square",et=oe(yZ({...t,rounded:he,small:Ie,large:Ee,raised:_e,outline:Fe},Oe)),on={...se},jt=A(et.base,_e&&et.raised,et.size[lt],et.shape[nt],r),Yt=A(et.button,et.buttonStyle[Je],et.buttonLeftShape[nt]),Qt=A(et.button,et.buttonStyle[Je],et.buttonRightShape[nt]),$t=A(s&&et.input,et.value[Je]);return W.createElement(xe,NE({ref:pe,className:jt},on),W.createElement("span",{ref:de,className:Yt,role:"button",tabIndex:"0",onClick:Z},W.createElement("span",{className:et.hBar})),s&&!p&&W.createElement("input",{className:$t,placeholder:u,type:l,value:i,defaultValue:o,disabled:c,readOnly:d,onInput:j,onChange:B,onFocus:K,onBlur:X}),!s&&!p&&W.createElement("span",{className:$t},i),W.createElement("span",{ref:ie,className:Qt,role:"button",tabIndex:"0",onClick:H},W.createElement("span",{className:et.hBar}),W.createElement("span",{className:et.vBar})))});vZ.displayName="Stepper";function TE(){return TE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TE.apply(this,arguments)}const uP=R.forwardRef((t,e)=>{const{labels:n,icons:r,children:a,...i}=t,o=R.useRef(null);R.useImperativeHandle(e,()=>({el:o.current}));const s={...i};return W.createElement(sE,TE({ref:o,tabbar:!0,tabbarIcons:r,tabbarLabels:n},s),a)});uP.displayName="Tabbar";const xZ=function(t,e){let{hasIcon:n,hasLabel:r,active:a}=t===void 0?{}:t;return e===void 0&&(e={}),{content:{common:"flex flex-col items-center justify-center h-full",ios:A("py-1",a?e.textActiveIos:e.textIos),material:A("py-2",n&&r&&"space-y-1",a?e.textActiveMaterial:e.textMaterial)},iconContainer:{common:"flex items-center justify-center k-tabbar-link-icon relative",ios:A("w-7 h-7"),material:A("w-16 h-8 rounded-full")},iconBg:{common:"absolute left-0 top-0 w-full h-full rounded-full duration-200 -z-10 pointer-events-none",ios:A(a?e.iconBgActiveIos:e.iconBgIos),material:A(a?e.iconBgActiveMaterial:e.iconBgMaterial,!a&&"scale-x-[0.5] opacity-0")},label:{ios:A(n?"text-xs font-medium":"",""),material:A(n?"text-xs":"text-sm","font-medium")}}},wZ=function(t,e){return t===void 0&&(t={}),{textIos:A("text-black text-opacity-40",e("dark:text-white dark:text-opacity-55")),textActiveIos:"text-primary",textMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),textActiveMaterial:A("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),iconBgIos:"",iconBgActiveIos:"",iconBgMaterial:"",iconBgActiveMaterial:A("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),...t}};function _E(){return _E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_E.apply(this,arguments)}const Kf=R.forwardRef((t,e)=>{const{className:n,active:r,ios:a,material:i,colors:o,linkProps:s={},icon:l,label:u,children:c,...d}=t,p=R.useRef(null);R.useImperativeHandle(e,()=>({el:p.current}));const f={...s,...d},g=Tt(),y=wZ(o,g),v=it({ios:a,material:i}),b=!!l,x=u||c&&c.length,w=v(xZ({hasLabel:x,hasIcon:b,active:r},y));return W.createElement(pp,_E({ref:p,tabbar:!0,tabbarActive:r,className:n},f),W.createElement("span",{className:w.content},l&&W.createElement("span",{className:w.iconContainer},W.createElement("span",{className:w.iconBg}),l),(u||c&&c.length)&&W.createElement("span",{className:w.label},u,c)))});Kf.displayName="TabbarLink";const kZ=()=>({base:{common:"w-full border-none p-0 m-0 border-collapse text-left table",ios:"",material:""}});function RE(){return RE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RE.apply(this,arguments)}const SZ=R.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=R.useRef(null);R.useImperativeHandle(e,()=>({el:s.current}));const l=it({ios:r,material:a})(kZ({...t})),u={...o};return W.createElement("table",RE({className:l.base,ref:s},u),i)});SZ.displayName="Table";const CZ=()=>({base:{common:"text-sm",ios:"",material:""}});function $E(){return $E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$E.apply(this,arguments)}const IZ=R.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=R.useRef(null);R.useImperativeHandle(e,()=>({el:s.current}));const l=it({ios:r,material:a})(CZ({...t})),u={...o};return W.createElement("tbody",$E({className:l.base,ref:s},u),i)});IZ.displayName="TableBody";const EZ=(t,e,n)=>{const{header:r}=t;return{base:{common:A("align-middle",n),ios:A(r?`text-xs font-semibold overflow-hidden whitespace-nowrap leading-4 h-11 bg-transparent ${e.textHeaderIos} py-0 px-4`:"h-11 relative py-0 px-4"),material:A(r?`${e.textHeaderMaterial} px-6 py-0  text-xs font-medium overflow-hidden text-ellipsis whitespace-nowrap leading-4 h-14 bg-transparent`:"py-0 first:px-6 px-7 h-12")}}},NZ=function(t,e){return t===void 0&&(t={}),{textHeaderIos:A("text-black/45",e("dark:text-white/55")),textHeaderMaterial:A("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function OE(){return OE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OE.apply(this,arguments)}const TZ=R.forwardRef((t,e)=>{const{className:n,colors:r,header:a,ios:i,material:o,children:s,...l}=t,u=R.useRef(null);R.useImperativeHandle(e,()=>({el:u.current}));const c=a?"th":"td",d=it({ios:i,material:o}),p=Tt(),f=NZ(r,p),g=d(EZ({...t},f,n)),y={...l};return W.createElement(c,OE({className:g.base,ref:u},y),s)});TZ.displayName="TableCell";const _Z=()=>({base:{common:"align-middle relative",ios:"hairline-b",material:""}});function ME(){return ME=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ME.apply(this,arguments)}const RZ=R.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=R.useRef(null);R.useImperativeHandle(e,()=>({el:s.current}));const l=it({ios:r,material:a})(_Z({...t})),u={...o};return W.createElement("thead",ME({className:l.base,ref:s},u),i)});RZ.displayName="TableHead";const $Z=(t,e)=>{const{header:n}=t;return{base:{common:"align-middle relative",ios:n?"":A(e.bgIos,"hairline-b last:hairline-transparent"),material:n?"":A(e.bgMaterial,`border-t ${e.dividerMaterial}`)}}},OZ=function(t,e){return t===void 0&&(t={}),{bgIos:A("hover:bg-black/5",e("dark:hover:bg-white/10")),bgMaterial:A("hover:bg-md-light-secondary-container",e("dark:hover:bg-md-dark-secondary-container")),dividerMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function PE(){return PE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PE.apply(this,arguments)}const MZ=R.forwardRef((t,e)=>{const{className:n,colors:r,header:a,ios:i,material:o,children:s,...l}=t,u=R.useRef(null);R.useImperativeHandle(e,()=>({el:u.current}));const c=it({ios:i,material:o}),d=Tt(),p=OZ(r,d),f=c($Z({...t},p)),g={...l};return W.createElement("tr",PE({className:f.base,ref:u},g),s)});MZ.displayName="TableRow";const PZ=(t,e,n)=>{const{translucent:r,opened:a}=t;return{base:{common:A(tr("fixed",n),"z-50 transform transition-transform-opacity w-full sm:w-auto start-0 bottom-0 sm:max-w-lg",!a&&"translate-y-full opacity-0 pointer-events-none"),ios:A("sm:rounded-lg duration-300",e.textIos,e.bgIos,r&&"translucent"),material:A("sm:rounded-2xl duration-200",e.textMaterial,e.bgMaterial),left:"sm:start-4-safe sm:bottom-4-safe",right:"sm:end-4-safe sm:bottom-4-safe sm:start-auto",center:"sm:left-1/2 sm:bottom-4-safe sm:-translate-x-1/2"},content:{common:"flex items-center justify-between",ios:"pl-4-safe pr-4-safe pt-3 pb-3-safe sm:px-4 sm:py-3",material:"pl-6-safe pr-6-safe py-3.5 pb-3.5-safe sm:px-6 sm:py-3.5"},button:{common:"-my-2 shrink-0 ms-4",ios:"",material:"-me-2"}}},AZ=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-black",bgMaterial:A("bg-md-light-surface-5",e("dark:bg-md-dark-surface-5")),textIos:"text-white",textMaterial:A("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function AE(){return AE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AE.apply(this,arguments)}const DZ=R.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,translucent:i=!0,button:o,position:s="left",opened:l,ios:u,material:c,children:d,...p}=t,f=R.useRef(null);R.useImperativeHandle(e,()=>({el:f.current}));const g=n,y={...p},v=it({ios:u,material:c}),b=Tt(),x=AZ(a,b),w=v(PZ({...t,translucent:i},x,r),r);return W.createElement(g,AE({ref:f,className:w.base[s]},y),W.createElement("div",{className:w.content},d,o&&W.createElement("div",{className:w.button},o)))});DZ.displayName="Toast";const LZ=(t,e,n,r)=>({base:{common:A(tr("relative",n),"cursor-pointer select-none inline-block align-middle relative duration-300 rounded-full group",r("dark:touch-ripple-white")),ios:"h-8 w-13 p-0.5",material:"w-13 h-8 border-2",notChecked:{ios:e.bgIos,material:A(e.bgMaterial,e.borderMaterial)},checked:{ios:`${e.checkedBgIos}`,material:A(e.checkedBgMaterial,e.checkedBorderMaterial)}},inner:{ios:A("w-full h-full bg-white rounded-full block duration-300 transform",r("dark:bg-opacity-0")),notChecked:{},checked:{ios:"scale-0"}},thumbWrap:{common:"rounded-full absolute duration-300 transform",ios:"w-7 h-7 start-0.5 top-0.5",material:"w-6 h-6 start-0.5 top-0.5",checked:{ios:A("translate-x-5 rtl:!-translate-x-5"),material:A("translate-x-5 rtl:!-translate-x-5")},notChecked:""},thumb:{common:"w-full h-full rounded-full absolute duration-300 transform start-0 top-0",ios:"shadow-ios-toggle",material:"group-active:scale-[1.1]",checked:{ios:A(e.checkedThumbBgIos),material:A(e.checkedThumbBgMaterial)},notChecked:{ios:e.thumbBgIos,material:A("scale-[0.666]",e.thumbBgMaterial)}},input:{common:"hidden"}}),FZ=function(t,e){return t===void 0&&(t={}),{bgIos:A("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-20")),checkedBgIos:"bg-primary",thumbBgIos:"bg-white",checkedThumbBgIos:"bg-white",bgMaterial:A("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),checkedBgMaterial:A("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderMaterial:A("border-md-light-outline",e("dark:border-md-dark-outline")),checkedBorderMaterial:A("border-md-light-primary",e("dark:border-md-dark-primary")),thumbBgMaterial:A("bg-md-light-outline",e("dark:bg-md-dark-outline")),checkedThumbBgMaterial:A("bg-md-light-on-primary",e("dark:bg-md-dark-on-primary")),...t}};function DE(){return DE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DE.apply(this,arguments)}const cP=R.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,name:s,value:l,disabled:u,readOnly:c,onChange:d,touchRipple:p=!0,ios:f,material:g,children:y,...v}=t,b=R.useRef(null),x=R.useRef(null);R.useImperativeHandle(e,()=>({el:b.current}));const w=n,S={...v},C=yn({ios:f,material:g}),I=it({ios:f,material:g}),_=Tt();Po(x,C==="material"&&p,b);const T=FZ(a,_),M=o||i&&!d?"checked":"notChecked",P=I(LZ(t,T,r,_),r);return W.createElement(w,DE({ref:b,className:P.base[M]},S),W.createElement("input",{type:"checkbox",name:s,value:l,disabled:u,readOnly:c,checked:o,defaultChecked:i,onChange:d,className:P.input}),W.createElement("span",{className:P.inner[M]}),W.createElement("span",{ref:x,className:P.thumbWrap[M]},W.createElement("span",{className:P.thumb[M]})),y)});cP.displayName="Toggle";var BZ={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const dP=t=>{let e;const n=new Set,r=(s,l)=>{const u=typeof s=="function"?s(e):s;if(!Object.is(u,e)){const c=e;e=l??(typeof u!="object"||u===null)?u:Object.assign({},e,u),n.forEach(d=>d(e,c))}},a=()=>e,i={setState:r,getState:a,getInitialState:()=>o,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(BZ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},o=e=t(r,a,i);return i},zZ=t=>t?dP(t):dP;var pP={exports:{}},hP={},fP={exports:{}},mP={};/**
* @license React
* use-sync-external-store-shim.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var mp=R;function jZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var VZ=typeof Object.is=="function"?Object.is:jZ,UZ=mp.useState,GZ=mp.useEffect,WZ=mp.useLayoutEffect,HZ=mp.useDebugValue;function qZ(t,e){var n=e(),r=UZ({inst:{value:n,getSnapshot:e}}),a=r[0].inst,i=r[1];return WZ(function(){a.value=n,a.getSnapshot=e,LE(a)&&i({inst:a})},[t,n,e]),GZ(function(){return LE(a)&&i({inst:a}),t(function(){LE(a)&&i({inst:a})})},[t]),HZ(n),n}function LE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!VZ(t,n)}catch{return!0}}function KZ(t,e){return e()}var XZ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?KZ:qZ;mP.useSyncExternalStore=mp.useSyncExternalStore!==void 0?mp.useSyncExternalStore:XZ,fP.exports=mP;var YZ=fP.exports;/**
* @license React
* use-sync-external-store-shim/with-selector.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var qy=R,QZ=YZ;function ZZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var JZ=typeof Object.is=="function"?Object.is:ZZ,eJ=QZ.useSyncExternalStore,tJ=qy.useRef,nJ=qy.useEffect,rJ=qy.useMemo,aJ=qy.useDebugValue;hP.useSyncExternalStoreWithSelector=function(t,e,n,r,a){var i=tJ(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=rJ(function(){function l(f){if(!u){if(u=!0,c=f,f=r(f),a!==void 0&&o.hasValue){var g=o.value;if(a(g,f))return d=g}return d=f}if(g=d,JZ(c,f))return g;var y=r(f);return a!==void 0&&a(g,y)?g:(c=f,d=y)}var u=!1,c,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,a]);var s=eJ(t,i[0],i[1]);return nJ(function(){o.hasValue=!0,o.value=s},[s]),aJ(s),s},pP.exports=hP;var iJ=pP.exports;const oJ=Wi(iJ);var gP={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:sJ}=W,{useSyncExternalStoreWithSelector:lJ}=oJ;let yP=!1;const uJ=t=>t;function cJ(t,e=uJ,n){(gP?"production":void 0)!=="production"&&n&&!yP&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),yP=!0);const r=lJ(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return sJ(r),r}const bP=t=>{(gP?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?zZ(t):t,n=(r,a)=>cJ(e,r,a);return Object.assign(n,e),n},dJ=t=>t?bP(t):bP;var Ky={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const FE=new Map,Xy=t=>{const e=FE.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},pJ=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=FE.get(n.name);if(r)return{type:"tracked",store:t,...r};const a={connection:e.connect(n),stores:{}};return FE.set(n.name,a),{type:"tracked",store:t,...a}},hJ=(t,e={})=>(n,r,a)=>{const{enabled:i,anonymousActionType:o,store:s,...l}=e;let u;try{u=(i??(Ky?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(Ky?"production":void 0)!=="production"&&i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(n,r,a);const{connection:c,...d}=pJ(s,u,l);let p=!0;a.setState=(y,v,b)=>{const x=n(y,v);if(!p)return x;const w=b===void 0?{type:o||"anonymous"}:typeof b=="string"?{type:b}:b;return s===void 0?(c?.send(w,r()),x):(c?.send({...w,type:`${s}/${w.type}`},{...Xy(l.name),[s]:a.getState()}),x)};const f=(...y)=>{const v=p;p=!1,n(...y),p=v},g=t(a.setState,r,a);if(d.type==="untracked"?c?.init(g):(d.stores[d.store]=a,c?.init(Object.fromEntries(Object.entries(d.stores).map(([y,v])=>[y,y===d.store?g:v.getState()])))),a.dispatchFromDevtools&&typeof a.dispatch=="function"){let y=!1;const v=a.dispatch;a.dispatch=(...b)=>{(Ky?"production":void 0)!=="production"&&b[0].type==="__setState"&&!y&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),y=!0),v(...b)}}return c.subscribe(y=>{var v;switch(y.type){case"ACTION":if(typeof y.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return BE(y.payload,b=>{if(b.type==="__setState"){if(s===void 0){f(b.state);return}Object.keys(b.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const x=b.state[s];if(x==null)return;JSON.stringify(a.getState())!==JSON.stringify(x)&&f(x);return}a.dispatchFromDevtools&&typeof a.dispatch=="function"&&a.dispatch(b)});case"DISPATCH":switch(y.payload.type){case"RESET":return f(g),s===void 0?c?.init(a.getState()):c?.init(Xy(l.name));case"COMMIT":if(s===void 0){c?.init(a.getState());return}return c?.init(Xy(l.name));case"ROLLBACK":return BE(y.state,b=>{if(s===void 0){f(b),c?.init(a.getState());return}f(b[s]),c?.init(Xy(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return BE(y.state,b=>{if(s===void 0){f(b);return}JSON.stringify(a.getState())!==JSON.stringify(b[s])&&f(b[s])});case"IMPORT_STATE":{const{nextLiftedState:b}=y.payload,x=(v=b.computedStates.slice(-1)[0])==null?void 0:v.state;if(!x)return;f(s===void 0?x:x[s]),c?.send(null,b);return}case"PAUSE_RECORDING":return p=!p}return}}),g},fJ=hJ,BE=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function mJ(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var a;const i=s=>s===null?null:JSON.parse(s,e?.reviver),o=(a=n.getItem(r))!=null?a:null;return o instanceof Promise?o.then(i):i(o)},setItem:(r,a)=>n.setItem(r,JSON.stringify(a,e?.replacer)),removeItem:r=>n.removeItem(r)}}const Xf=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Xf(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Xf(r)(n)}}}},gJ=(t,e)=>(n,r,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,b)=>({...b,...v}),...e},o=!1;const s=new Set,l=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,a);const c=Xf(i.serialize),d=()=>{const v=i.partialize({...r()});let b;const x=c({state:v,version:i.version}).then(w=>u.setItem(i.name,w)).catch(w=>{b=w});if(b)throw b;return x},p=a.setState;a.setState=(v,b)=>{p(v,b),d()};const f=t((...v)=>{n(...v),d()},r,a);let g;const y=()=>{var v;if(!u)return;o=!1,s.forEach(x=>x(r()));const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,r()))||void 0;return Xf(u.getItem.bind(u))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var w;return g=i.merge(x,(w=r())!=null?w:f),n(g,!0),d()}).then(()=>{b?.(g,void 0),o=!0,l.forEach(x=>x(g))}).catch(x=>{b?.(void 0,x)})};return a.persist={setOptions:v=>{i={...i,...v},v.getStorage&&(u=v.getStorage())},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:v=>(s.add(v),()=>{s.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},y(),g||f},yJ=(t,e)=>(n,r,a)=>{let i={storage:mJ(()=>localStorage),partialize:y=>y,version:0,merge:(y,v)=>({...v,...y}),...e},o=!1;const s=new Set,l=new Set;let u=i.storage;if(!u)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...y)},r,a);const c=()=>{const y=i.partialize({...r()});return u.setItem(i.name,{state:y,version:i.version})},d=a.setState;a.setState=(y,v)=>{d(y,v),c()};const p=t((...y)=>{n(...y),c()},r,a);a.getInitialState=()=>p;let f;const g=()=>{var y,v;if(!u)return;o=!1,s.forEach(x=>{var w;return x((w=r())!=null?w:p)});const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(y=r())!=null?y:p))||void 0;return Xf(u.getItem.bind(u))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var w;return f=i.merge(x,(w=r())!=null?w:p),n(f,!0),c()}).then(()=>{b?.(f,void 0),f=r(),o=!0,l.forEach(x=>x(f))}).catch(x=>{b?.(void 0,x)})};return a.persist={setOptions:y=>{i={...i,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:y=>(s.add(y),()=>{s.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},i.skipHydration||g(),f||p},bJ=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Ky?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),gJ(t,e)):yJ(t,e),vJ=bJ,vP=[{id:1,image:"./frame/frame_1.png",front:"./frame/frame_1_front.png"},{id:2,image:"./frame/frame_2.png",front:"./frame/frame_2_front.png"},{id:3,image:"./frame/frame_3.png",front:"./frame/frame_3_front.png"},{id:4,image:"./frame/frame_4.png",front:"./frame/frame_4_front.png"},{id:5,image:"./frame/frame_5.png",front:"./frame/frame_5_front.png"}],xJ=[{id:"Betende_Frau_Maria",image:"./sticker/Betende_Frau_Maria.png"},{id:"Blumentopf",image:"./sticker/Blumentopf.png"},{id:"Blume",image:"./sticker/Blume.png"},{id:"Frau_in_gelbem_Kleid",image:"./sticker/Frau_in_gelbem_Kleid.png"},{id:"Magd",image:"./sticker/Magd.png"},{id:"Mann_liegend",image:"./sticker/Mann_liegend.png"},{id:"Mann",image:"./sticker/Mann.png"},{id:"Mucha_Dekor",image:"./sticker/Mucha_Dekor.png"},{id:"The_Hare",image:"./sticker/The_Hare.png"},{id:"Wasserspeier",image:"./sticker/Wasserspeier.png"}],xP=[{id:"http://www.wikidata.org/entity/Q20355536",name:"A Street in Torello, Italy",year:"1890",country:"Denmark",location:"Statens Museum for Kunst",creator:"Peder Severin Kr\xF8yer",url:"https://api.smk.dk/api/v1/iiif/manifest/?id=KMS1435",identifier:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2",image:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2/full/400,/0/default.jpg",thumbnail:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q20537703",name:"At the French Windows. The Artist's Wife",year:"1897",country:"Denmark",location:"Statens Museum for Kunst",creator:"Laurits Andersen Ring",url:"https://api.smk.dk/api/v1/iiif/manifest/?id=KMS3716",identifier:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2",image:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2/full/400,/0/default.jpg",thumbnail:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103297795",name:"Brot! (Bread!)",year:"1924",country:"Germany",location:"Vanderbilt University Fine Arts Gallery",creator:"K\xE4the Kollwitz",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1977/1977.011.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103297971",name:"Business-Man, ffrom Genius, Zeitschrift f\xFCr werdende und alte Kunst (Magazine for Emerging and Ancient Art), Year 2, no. 1",year:"1920",country:"Belgium",location:"Vanderbilt University Fine Arts Gallery",creator:"Frans Masereel",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.032.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q3698180",name:"Calvary",year:"1475",country:"Belgium",location:"Royal Museum of Fine Arts Antwerp",creator:"Antonello da Messina",url:"https://iiif.kmska.be/iiif/2/5/manifest.json",identifier:"https://iiif.kmska.be/c/iiif/2/public@5.tif",image:"https://iiif.kmska.be/c/iiif/2/public@5.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.kmska.be/c/iiif/2/public@5.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103300860",name:"Half-Figure Prophet",year:"1450",country:"France",location:"Vanderbilt University Fine Arts Gallery",creator:"http://www.wikidata.org/.well-known/genid/d7c4865c9fae865605be887d7277ab75",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1975/1975.005.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q102967848",name:"Landscape with Shepherds",year:"",country:"Netherlands",location:"Vanderbilt University Fine Arts Gallery",creator:"Jan Both",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1979/1979.0195P.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q106582838",name:"The Blacksmith Worker",year:"",country:"Switzerland",location:"Vanderbilt University Fine Arts Gallery",creator:"Antonello da Messina",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.036.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q104032628",name:"The Empty Jug",year:"1653",country:"Netherlands",location:"Vanderbilt University Fine Arts Gallery",creator:"Adriaen van Ostade",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1979/1979.0845P.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q102975484",name:"Trostung (Consolation), from Genius, Zeitschrift f\xFCr werdende und alte Kunst (Magazine for Emerging and Ancient Art), Year 2, no. 1",year:"1920",country:"Austria",location:"Vanderbilt University Fine Arts Gallery",creator:"Georg Ehrlich",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.031.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg/full/100,100/0/default.jpg"}],bc=dJ()(fJ(vJ(t=>({addToArtwork:(e,n)=>t(r=>({artworkList:[{id:e,image:n},...r.artworkList]})),addToCanvas:(e,n,r)=>t(a=>({canvasList:[...a.canvasList,{brightness:0,contrast:0,height:400,id:`${a.canvasList.length+1}`,image:e,isDragging:!1,opacity:1,width:400,x:n,y:r}]})),addToImageList:e=>t(n=>({imageList:[...n.imageList,...e]})),removeFromImageList:e=>t(n=>({imageList:n.imageList.filter(r=>r.id!==e)})),artworkList:xJ,canvasList:[],frame:vP[1],imageList:xP.sort(()=>Math.random()-.5),imageLikeList:[],likeImage:e=>t(n=>({imageLikeList:[...n.imageLikeList,e]})),resetState:()=>t(()=>({imageList:xP.sort(()=>Math.random()-.5),canvasList:[],imageLikeList:[]})),removeFromCanvas:e=>t(n=>({canvasList:n.canvasList.filter(r=>r.id!==e)})),setFrame:e=>t(()=>({frame:vP.find(n=>n.id===e)})),transformCanvasImage:e=>t(n=>({canvasList:n.canvasList.map(r=>r.id!==e.id?r:{...r,height:e.height,width:e.width,x:e.x,y:e.y,brightness:e.brightness,contrast:e.contrast,opacity:e.opacity})})),moveCanvasImage:(e,n)=>t(r=>{const a=r.canvasList.findIndex(i=>i.id===e);if(a!==-1){const i=n?a+1:a-1;if(i>=0&&i<r.canvasList.length){const o=[...r.canvasList],[s]=o.splice(a,1);return o.splice(i,0,s),{canvasList:o}}}return{}})}),{name:"glamStore"})));function wJ({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const kJ=R.forwardRef(wJ),SJ=kJ;function CJ({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 15-6 6m0 0-6-6m6 6V9a6 6 0 0 1 12 0v3"}))}const IJ=R.forwardRef(CJ),EJ=IJ;function NJ({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 9 6-6m0 0 6 6m-6-6v12a6 6 0 0 1-12 0v-3"}))}const TJ=R.forwardRef(NJ),_J=TJ;function RJ({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const $J=R.forwardRef(RJ),OJ=$J;function MJ({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const PJ=R.forwardRef(MJ),AJ=PJ;function DJ({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const LJ=R.forwardRef(DJ),FJ=LJ;function BJ({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 0 0 .303-.54"}))}const zJ=R.forwardRef(BJ),jJ=zJ;function VJ({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"}))}const UJ=R.forwardRef(VJ),GJ=UJ;function WJ({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const HJ=R.forwardRef(WJ),qJ=HJ;function KJ({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const XJ=R.forwardRef(KJ),YJ=XJ;function QJ({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const ZJ=R.forwardRef(QJ),JJ=ZJ;function eee({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const tee=R.forwardRef(eee),nee=tee;function ree({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 8.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v8.25A2.25 2.25 0 0 0 6 16.5h2.25m8.25-8.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-7.5A2.25 2.25 0 0 1 8.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 0 0-2.25 2.25v6"}))}const aee=R.forwardRef(ree),iee=aee;function oee({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const see=R.forwardRef(oee),lee=see;function uee({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const cee=R.forwardRef(uee),dee=cee;function pee({title:t,titleId:e,...n},r){return R.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?R.createElement("title",{id:e},t):null,R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const hee=R.forwardRef(pee),fee=hee;function wP(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var mee=["color"],gee=R.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,a=wP(t,mee);return R.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:e}),R.createElement("path",{d:"M3 9C3 6.5 4.5 4.25 7.5 1.5C10.5 4.25 12 6.5 12 9C12 11.4853 9.98528 13.5 7.5 13.5C5.01472 13.5 3 11.4853 3 9ZM10.9524 8.30307C9.67347 7.82121 8.2879 8.46208 6.98956 9.06259C5.9327 9.55142 4.93365 10.0135 4.09695 9.82153C4.03357 9.55804 4 9.28294 4 9C4 7.11203 5.02686 5.27195 7.5 2.87357C9.66837 4.97639 10.725 6.65004 10.9524 8.30307Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),yee=["color"],bee=R.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,a=wP(t,yee);return R.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:e}),R.createElement("path",{d:"M7.85367 1.48956C7.65841 1.29429 7.34182 1.29429 7.14656 1.48956L1.48971 7.14641C1.29445 7.34167 1.29445 7.65825 1.48971 7.85352L7.14656 13.5104C7.34182 13.7056 7.65841 13.7056 7.85367 13.5104L13.5105 7.85352C13.7058 7.65825 13.7058 7.34167 13.5105 7.14641L7.85367 1.48956ZM7.5 2.55033L2.55037 7.49996L7.5 12.4496V2.55033Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),kP={exports:{}};(function(t,e){(function(n,r){r()})(Ga,function(){function n(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,c,d){var p=new XMLHttpRequest;p.open("GET",u),p.responseType="blob",p.onload=function(){l(p.response,c,d)},p.onerror=function(){console.error("could not download file")},p.send()}function a(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function i(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ga=="object"&&Ga.global===Ga?Ga:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(u,c,d){var p=o.URL||o.webkitURL,f=document.createElement("a");c=c||u.name||"download",f.download=c,f.rel="noopener",typeof u=="string"?(f.href=u,f.origin===location.origin?i(f):a(f.href)?r(u,c,d):i(f,f.target="_blank")):(f.href=p.createObjectURL(u),setTimeout(function(){p.revokeObjectURL(f.href)},4e4),setTimeout(function(){i(f)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,d){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,d),c);else if(a(u))r(u,c,d);else{var p=document.createElement("a");p.href=u,p.target="_blank",setTimeout(function(){i(p)})}}:function(u,c,d,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof u=="string")return r(u,c,d);var f=u.type==="application/octet-stream",g=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||f&&g||s)&&typeof FileReader<"u"){var v=new FileReader;v.onloadend=function(){var w=v.result;w=y?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=w:location=w,p=null},v.readAsDataURL(u)}else{var b=o.URL||o.webkitURL,x=b.createObjectURL(u);p?p.location=x:location.href=x,p=null,setTimeout(function(){b.revokeObjectURL(x)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(kP);var vee=kP.exports,zE={exports:{}},Yy={},Qy={},Dt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof Ga<"u"?Ga:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.3",isBrowser:n(),isUnminified:/param/.test(function(a){}.toString()),dblClickWindow:400,getAngle(a){return t.Konva.angleDeg?a*e:a},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(a){t.glob.Konva=a}};const r=a=>{t.Konva[a.prototype.getClassName()]=a};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(Dt);var nr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=Dt;class n{constructor(S=[1,0,0,1,0,0]){this.dirty=!1,this.m=S&&S.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(S){S.m[0]=this.m[0],S.m[1]=this.m[1],S.m[2]=this.m[2],S.m[3]=this.m[3],S.m[4]=this.m[4],S.m[5]=this.m[5]}point(S){var C=this.m;return{x:C[0]*S.x+C[2]*S.y+C[4],y:C[1]*S.x+C[3]*S.y+C[5]}}translate(S,C){return this.m[4]+=this.m[0]*S+this.m[2]*C,this.m[5]+=this.m[1]*S+this.m[3]*C,this}scale(S,C){return this.m[0]*=S,this.m[1]*=S,this.m[2]*=C,this.m[3]*=C,this}rotate(S){var C=Math.cos(S),I=Math.sin(S),_=this.m[0]*C+this.m[2]*I,T=this.m[1]*C+this.m[3]*I,M=this.m[0]*-I+this.m[2]*C,P=this.m[1]*-I+this.m[3]*C;return this.m[0]=_,this.m[1]=T,this.m[2]=M,this.m[3]=P,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(S,C){var I=this.m[0]+this.m[2]*C,_=this.m[1]+this.m[3]*C,T=this.m[2]+this.m[0]*S,M=this.m[3]+this.m[1]*S;return this.m[0]=I,this.m[1]=_,this.m[2]=T,this.m[3]=M,this}multiply(S){var C=this.m[0]*S.m[0]+this.m[2]*S.m[1],I=this.m[1]*S.m[0]+this.m[3]*S.m[1],_=this.m[0]*S.m[2]+this.m[2]*S.m[3],T=this.m[1]*S.m[2]+this.m[3]*S.m[3],M=this.m[0]*S.m[4]+this.m[2]*S.m[5]+this.m[4],P=this.m[1]*S.m[4]+this.m[3]*S.m[5]+this.m[5];return this.m[0]=C,this.m[1]=I,this.m[2]=_,this.m[3]=T,this.m[4]=M,this.m[5]=P,this}invert(){var S=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*S,I=-this.m[1]*S,_=-this.m[2]*S,T=this.m[0]*S,M=S*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),P=S*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=I,this.m[2]=_,this.m[3]=T,this.m[4]=M,this.m[5]=P,this}getMatrix(){return this.m}decompose(){var S=this.m[0],C=this.m[1],I=this.m[2],_=this.m[3],T=this.m[4],M=this.m[5],P=S*_-C*I;let L={x:T,y:M,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(S!=0||C!=0){var j=Math.sqrt(S*S+C*C);L.rotation=C>0?Math.acos(S/j):-Math.acos(S/j),L.scaleX=j,L.scaleY=P/j,L.skewX=(S*I+C*_)/P,L.skewY=0}else if(I!=0||_!=0){var B=Math.sqrt(I*I+_*_);L.rotation=Math.PI/2-(_>0?Math.acos(-I/B):-Math.acos(I/B)),L.scaleX=P/B,L.scaleY=B,L.skewX=0,L.skewY=(S*I+C*_)/P}return L.rotation=t.Util._getRotation(L.rotation),L}}t.Transform=n;var r="[object Array]",a="[object Number]",i="[object String]",o="[object Boolean]",s=Math.PI/180,l=180/Math.PI,u="#",c="",d="0",p="Konva warning: ",f="Konva error: ",g="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,b=[];const x=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(w){setTimeout(w,60)};t.Util={_isElement(w){return!!(w&&w.nodeType==1)},_isFunction(w){return!!(w&&w.constructor&&w.call&&w.apply)},_isPlainObject(w){return!!w&&w.constructor===Object},_isArray(w){return Object.prototype.toString.call(w)===r},_isNumber(w){return Object.prototype.toString.call(w)===a&&!isNaN(w)&&isFinite(w)},_isString(w){return Object.prototype.toString.call(w)===i},_isBoolean(w){return Object.prototype.toString.call(w)===o},isObject(w){return w instanceof Object},isValidSelector(w){if(typeof w!="string")return!1;var S=w[0];return S==="#"||S==="."||S===S.toUpperCase()},_sign(w){return w===0||w>0?1:-1},requestAnimFrame(w){b.push(w),b.length===1&&x(function(){const S=b;b=[],S.forEach(function(C){C()})})},createCanvasElement(){var w=document.createElement("canvas");try{w.style=w.style||{}}catch{}return w},createImageElement(){return document.createElement("img")},_isInDocument(w){for(;w=w.parentNode;)if(w==document)return!0;return!1},_urlToImage(w,S){var C=t.Util.createImageElement();C.onload=function(){S(C)},C.src=w},_rgbToHex(w,S,C){return((1<<24)+(w<<16)+(S<<8)+C).toString(16).slice(1)},_hexToRgb(w){w=w.replace(u,c);var S=parseInt(w,16);return{r:S>>16&255,g:S>>8&255,b:S&255}},getRandomColor(){for(var w=(Math.random()*16777215<<0).toString(16);w.length<6;)w=d+w;return u+w},getRGB(w){var S;return w in y?(S=y[w],{r:S[0],g:S[1],b:S[2]}):w[0]===u?this._hexToRgb(w.substring(1)):w.substr(0,4)===g?(S=v.exec(w.replace(/ /g,"")),{r:parseInt(S[1],10),g:parseInt(S[2],10),b:parseInt(S[3],10)}):{r:0,g:0,b:0}},colorToRGBA(w){return w=w||"black",t.Util._namedColorToRBA(w)||t.Util._hex3ColorToRGBA(w)||t.Util._hex4ColorToRGBA(w)||t.Util._hex6ColorToRGBA(w)||t.Util._hex8ColorToRGBA(w)||t.Util._rgbColorToRGBA(w)||t.Util._rgbaColorToRGBA(w)||t.Util._hslColorToRGBA(w)},_namedColorToRBA(w){var S=y[w.toLowerCase()];return S?{r:S[0],g:S[1],b:S[2],a:1}:null},_rgbColorToRGBA(w){if(w.indexOf("rgb(")===0){w=w.match(/rgb\(([^)]+)\)/)[1];var S=w.split(/ *, */).map(Number);return{r:S[0],g:S[1],b:S[2],a:1}}},_rgbaColorToRGBA(w){if(w.indexOf("rgba(")===0){w=w.match(/rgba\(([^)]+)\)/)[1];var S=w.split(/ *, */).map((C,I)=>C.slice(-1)==="%"?I===3?parseInt(C)/100:parseInt(C)/100*255:Number(C));return{r:S[0],g:S[1],b:S[2],a:S[3]}}},_hex8ColorToRGBA(w){if(w[0]==="#"&&w.length===9)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:parseInt(w.slice(7,9),16)/255}},_hex6ColorToRGBA(w){if(w[0]==="#"&&w.length===7)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:1}},_hex4ColorToRGBA(w){if(w[0]==="#"&&w.length===5)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:parseInt(w[4]+w[4],16)/255}},_hex3ColorToRGBA(w){if(w[0]==="#"&&w.length===4)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:1}},_hslColorToRGBA(w){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(w)){const[S,...C]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(w),I=Number(C[0])/360,_=Number(C[1])/100,T=Number(C[2])/100;let M,P,L;if(_===0)return L=T*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};T<.5?M=T*(1+_):M=T+_-T*_;const j=2*T-M,B=[0,0,0];for(let K=0;K<3;K++)P=I+1/3*-(K-1),P<0&&P++,P>1&&P--,6*P<1?L=j+(M-j)*6*P:2*P<1?L=M:3*P<2?L=j+(M-j)*(2/3-P)*6:L=j,B[K]=L*255;return{r:Math.round(B[0]),g:Math.round(B[1]),b:Math.round(B[2]),a:1}}},haveIntersection(w,S){return!(S.x>w.x+w.width||S.x+S.width<w.x||S.y>w.y+w.height||S.y+S.height<w.y)},cloneObject(w){var S={};for(var C in w)this._isPlainObject(w[C])?S[C]=this.cloneObject(w[C]):this._isArray(w[C])?S[C]=this.cloneArray(w[C]):S[C]=w[C];return S},cloneArray(w){return w.slice(0)},degToRad(w){return w*s},radToDeg(w){return w*l},_degToRad(w){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(w)},_radToDeg(w){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(w)},_getRotation(w){return e.Konva.angleDeg?t.Util.radToDeg(w):w},_capitalize(w){return w.charAt(0).toUpperCase()+w.slice(1)},throw(w){throw new Error(f+w)},error(w){console.error(f+w)},warn(w){e.Konva.showWarnings&&console.warn(p+w)},each(w,S){for(var C in w)S(C,w[C])},_inRange(w,S,C){return S<=w&&w<C},_getProjectionToSegment(w,S,C,I,_,T){var M,P,L,j=(w-C)*(w-C)+(S-I)*(S-I);if(j==0)M=w,P=S,L=(_-C)*(_-C)+(T-I)*(T-I);else{var B=((_-w)*(C-w)+(T-S)*(I-S))/j;B<0?(M=w,P=S,L=(w-_)*(w-_)+(S-T)*(S-T)):B>1?(M=C,P=I,L=(C-_)*(C-_)+(I-T)*(I-T)):(M=w+B*(C-w),P=S+B*(I-S),L=(M-_)*(M-_)+(P-T)*(P-T))}return[M,P,L]},_getProjectionToLine(w,S,C){var I=t.Util.cloneObject(w),_=Number.MAX_VALUE;return S.forEach(function(T,M){if(!(!C&&M===S.length-1)){var P=S[(M+1)%S.length],L=t.Util._getProjectionToSegment(T.x,T.y,P.x,P.y,w.x,w.y),j=L[0],B=L[1],K=L[2];K<_&&(I.x=j,I.y=B,_=K)}}),I},_prepareArrayForTween(w,S,C){var I,_=[],T=[];if(w.length>S.length){var M=S;S=w,w=M}for(I=0;I<w.length;I+=2)_.push({x:w[I],y:w[I+1]});for(I=0;I<S.length;I+=2)T.push({x:S[I],y:S[I+1]});var P=[];return T.forEach(function(L){var j=t.Util._getProjectionToLine(L,_,C);P.push(j.x),P.push(j.y)}),P},_prepareToStringify(w){var S;w.visitedByCircularReferenceRemoval=!0;for(var C in w)if(w.hasOwnProperty(C)&&w[C]&&typeof w[C]=="object"){if(S=Object.getOwnPropertyDescriptor(w,C),w[C].visitedByCircularReferenceRemoval||t.Util._isElement(w[C]))if(S.configurable)delete w[C];else return null;else if(t.Util._prepareToStringify(w[C])===null)if(S.configurable)delete w[C];else return null}return delete w.visitedByCircularReferenceRemoval,w},_assign(w,S){for(var C in S)w[C]=S[C];return w},_getFirstPointerId(w){return w.touches?w.changedTouches[0].identifier:w.pointerId||999},releaseCanvas(...w){e.Konva.releaseCanvasOnDestroy&&w.forEach(S=>{S.width=0,S.height=0})},drawRoundedRectPath(w,S,C,I){let _=0,T=0,M=0,P=0;typeof I=="number"?_=T=M=P=Math.min(I,S/2,C/2):(_=Math.min(I[0]||0,S/2,C/2),T=Math.min(I[1]||0,S/2,C/2),P=Math.min(I[2]||0,S/2,C/2),M=Math.min(I[3]||0,S/2,C/2)),w.moveTo(_,0),w.lineTo(S-T,0),w.arc(S-T,T,T,Math.PI*3/2,0,!1),w.lineTo(S,C-P),w.arc(S-P,C-P,P,0,Math.PI/2,!1),w.lineTo(M,C),w.arc(M,C-M,M,Math.PI/2,Math.PI,!1),w.lineTo(0,_),w.arc(_,_,_,Math.PI,Math.PI*3/2,!1)}}})(nr);var Wn={},Lt={},Qe={};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.getComponentValidator=Qe.getBooleanValidator=Qe.getNumberArrayValidator=Qe.getFunctionValidator=Qe.getStringOrGradientValidator=Qe.getStringValidator=Qe.getNumberOrAutoValidator=Qe.getNumberOrArrayOfNumbersValidator=Qe.getNumberValidator=Qe.alphaComponent=Qe.RGBComponent=void 0;const Xs=Dt,ur=nr;function Ys(t){return ur.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||ur.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function xee(t){return t>255?255:t<0?0:Math.round(t)}Qe.RGBComponent=xee;function wee(t){return t>1?1:t<1e-4?1e-4:t}Qe.alphaComponent=wee;function kee(){if(Xs.Konva.isUnminified)return function(t,e){return ur.Util._isNumber(t)||ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}Qe.getNumberValidator=kee;function See(t){if(Xs.Konva.isUnminified)return function(e,n){let r=ur.Util._isNumber(e),a=ur.Util._isArray(e)&&e.length==t;return!r&&!a&&ur.Util.warn(Ys(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}Qe.getNumberOrArrayOfNumbersValidator=See;function Cee(){if(Xs.Konva.isUnminified)return function(t,e){var n=ur.Util._isNumber(t),r=t==="auto";return n||r||ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}Qe.getNumberOrAutoValidator=Cee;function Iee(){if(Xs.Konva.isUnminified)return function(t,e){return ur.Util._isString(t)||ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}Qe.getStringValidator=Iee;function Eee(){if(Xs.Konva.isUnminified)return function(t,e){const n=ur.Util._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}Qe.getStringOrGradientValidator=Eee;function Nee(){if(Xs.Konva.isUnminified)return function(t,e){return ur.Util._isFunction(t)||ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}Qe.getFunctionValidator=Nee;function Tee(){if(Xs.Konva.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(ur.Util._isArray(t)?t.forEach(function(r){ur.Util._isNumber(r)||ur.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}Qe.getNumberArrayValidator=Tee;function _ee(){if(Xs.Konva.isUnminified)return function(t,e){var n=t===!0||t===!1;return n||ur.Util.warn(Ys(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}Qe.getBooleanValidator=_ee;function Ree(t){if(Xs.Konva.isUnminified)return function(e,n){return e==null||ur.Util.isObject(e)||ur.Util.warn(Ys(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}Qe.getComponentValidator=Ree,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=nr,n=Qe;var r="get",a="set";t.Factory={addGetterSetter(i,o,s,l,u){t.Factory.addGetter(i,o,s),t.Factory.addSetter(i,o,l,u),t.Factory.addOverloadedGetterSetter(i,o)},addGetter(i,o,s){var l=r+e.Util._capitalize(o);i.prototype[l]=i.prototype[l]||function(){var u=this.attrs[o];return u===void 0?s:u}},addSetter(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]||t.Factory.overWriteSetter(i,o,s,l)},overWriteSetter(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]=function(c){return s&&c!==void 0&&c!==null&&(c=s.call(this,c,o)),this._setAttr(o,c),l&&l.call(this),this}},addComponentsGetterSetter(i,o,s,l,u){var c=s.length,d=e.Util._capitalize,p=r+d(o),f=a+d(o),g,y;i.prototype[p]=function(){var b={};for(g=0;g<c;g++)y=s[g],b[y]=this.getAttr(o+d(y));return b};var v=(0,n.getComponentValidator)(s);i.prototype[f]=function(b){var x=this.attrs[o],w;l&&(b=l.call(this,b)),v&&v.call(this,b,o);for(w in b)b.hasOwnProperty(w)&&this._setAttr(o+d(w),b[w]);return b||s.forEach(S=>{this._setAttr(o+d(S),void 0)}),this._fireChangeEvent(o,x,b),u&&u.call(this),this},t.Factory.addOverloadedGetterSetter(i,o)},addOverloadedGetterSetter(i,o){var s=e.Util._capitalize(o),l=a+s,u=r+s;i.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(i,o,s,l){e.Util.error("Adding deprecated "+o);var u=r+e.Util._capitalize(o),c=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";i.prototype[u]=function(){e.Util.error(c);var d=this.attrs[o];return d===void 0?s:d},t.Factory.addSetter(i,o,l,function(){e.Util.error(c)}),t.Factory.addOverloadedGetterSetter(i,o)},backCompat(i,o){e.Util.each(o,function(s,l){var u=i.prototype[l],c=r+e.Util._capitalize(s),d=a+e.Util._capitalize(s);function p(){u.apply(this,arguments),e.Util.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}i.prototype[s]=p,i.prototype[c]=p,i.prototype[d]=p})},afterSetFilter(){this._filterUpToDate=!1}}}(Lt);var Ao={},Qs={};Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.HitContext=Qs.SceneContext=Qs.Context=void 0;const SP=nr,$ee=Dt;function Oee(t){var e=[],n=t.length,r=SP.Util,a,i;for(a=0;a<n;a++)i=t[a],r._isNumber(i)?i=Math.round(i*1e3)/1e3:r._isString(i)||(i=i+""),e.push(i);return e}var CP=",",Mee="(",Pee=")",Aee="([",Dee="])",Lee=";",Fee="()",Bee="=",IP=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],zee=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const jee=100;class Zy{constructor(e){this.canvas=e,$ee.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var r=this.traceArr,a=r.length,i="",o,s,l,u;for(o=0;o<a;o++)s=r[o],l=s.method,l?(u=s.args,i+=l,e?i+=Fee:SP.Util._isArray(u[0])?i+=Aee+u.join(CP)+Dee:(n&&(u=u.map(c=>typeof c=="number"?Math.floor(c):c)),i+=Mee+u.join(CP)+Pee)):(i+=s.property,e||(i+=Bee+s.val)),i+=Lee;return i}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,r;n.push(e),r=n.length,r>=jee&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,a,i,o){this._context.arc(e,n,r,a,i,o)}arcTo(e,n,r,a,i){this._context.arcTo(e,n,r,a,i)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,a,i,o){this._context.bezierCurveTo(e,n,r,a,i,o)}clearRect(e,n,r,a){this._context.clearRect(e,n,r,a)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){var r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,a){return this._context.createLinearGradient(e,n,r,a)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,a,i,o){return this._context.createRadialGradient(e,n,r,a,i,o)}drawImage(e,n,r,a,i,o,s,l,u){var c=arguments,d=this._context;c.length===3?d.drawImage(e,n,r):c.length===5?d.drawImage(e,n,r,a,i):c.length===9&&d.drawImage(e,n,r,a,i,o,s,l,u)}ellipse(e,n,r,a,i,o,s,l){this._context.ellipse(e,n,r,a,i,o,s,l)}isPointInPath(e,n,r,a){return r?this._context.isPointInPath(r,e,n,a):this._context.isPointInPath(e,n,a)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,r,a){this._context.fillRect(e,n,r,a)}strokeRect(e,n,r,a){this._context.strokeRect(e,n,r,a)}fillText(e,n,r,a){a?this._context.fillText(e,n,r,a):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,a){return this._context.getImageData(e,n,r,a)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,a){this._context.rect(e,n,r,a)}roundRect(e,n,r,a,i){this._context.roundRect(e,n,r,a,i)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,a){this._context.quadraticCurveTo(e,n,r,a)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,a,i,o){this._context.setTransform(e,n,r,a,i,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,a){this._context.strokeText(e,n,r,a)}transform(e,n,r,a,i,o){this._context.transform(e,n,r,a,i,o)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=IP.length,r=this.setAttr,a,i,o=function(s){var l=e[s],u;e[s]=function(){return i=Oee(Array.prototype.slice.call(arguments,0)),u=l.apply(e,arguments),e._trace({method:s,args:i}),u}};for(a=0;a<n;a++)o(IP[a]);e.setAttr=function(){r.apply(e,arguments);var s=arguments[0],l=arguments[1];(s==="shadowOffsetX"||s==="shadowOffsetY"||s==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:s,val:l})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var r=!n||n==="source-over";r||this.setAttr("globalCompositeOperation",n)}}Qs.Context=Zy,zee.forEach(function(t){Object.defineProperty(Zy.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class Vee extends Zy{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}const a=e.getFillPatternImage();if(a&&r==="pattern"){this._fillPattern(e);return}const i=e.getFillLinearGradientColorStops();if(i&&r==="linear-gradient"){this._fillLinearGradient(e);return}const o=e.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):a?this._fillPattern(e):i?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),a=e.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(n.x,n.y,r.x,r.y);if(a){for(var o=0;o<a.length;o+=2)i.addColorStop(a[o],a[o+1]);this.setAttr("strokeStyle",i)}}_stroke(e){var n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var i=e.getStrokeLinearGradientColorStops();i?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,a,i=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",o=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,s=(a=e.getShadowOffset())!==null&&a!==void 0?a:{x:0,y:0},l=e.getAbsoluteScale(),u=this.canvas.getPixelRatio(),c=l.x*u,d=l.y*u;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",o*Math.min(Math.abs(c),Math.abs(d))),this.setAttr("shadowOffsetX",s.x*c),this.setAttr("shadowOffsetY",s.y*d)}}Qs.SceneContext=Vee;class Uee extends Zy{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const i=e.getStrokeScaleEnabled();if(!i){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var r=e.hitStrokeWidth(),a=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",a),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),i||this.restore()}}}Qs.HitContext=Uee,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.HitCanvas=Ao.SceneCanvas=Ao.Canvas=void 0;const Jy=nr,EP=Qs,NP=Dt,Gee=Lt,Wee=Qe;var eb;function Hee(){if(eb)return eb;var t=Jy.Util.createCanvasElement(),e=t.getContext("2d");return eb=function(){var n=NP.Konva._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),Jy.Util.releaseCanvas(t),eb}class tb{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},r=n.pixelRatio||NP.Konva.pixelRatio||Hee();this.pixelRatio=r,this._canvas=Jy.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(r){return Jy.Util.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Ao.Canvas=tb,Gee.Factory.addGetterSetter(tb,"pixelRatio",void 0,(0,Wee.getNumberValidator)());class qee extends tb{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new EP.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Ao.SceneCanvas=qee;class Kee extends tb{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new EP.HitContext(this),this.setSize(e.width,e.height)}}Ao.HitCanvas=Kee;var nb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=Dt,n=nr;t.DD={get isDragging(){var r=!1;return t.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){var r;return t.DD._dragElements.forEach(a=>{r=a.node}),r},_dragElements:new Map,_drag(r){const a=[];t.DD._dragElements.forEach((i,o)=>{const{node:s}=i,l=s.getStage();l.setPointersPositions(r),i.pointerId===void 0&&(i.pointerId=n.Util._getFirstPointerId(r));const u=l._changedPointerPositions.find(p=>p.id===i.pointerId);if(u){if(i.dragStatus!=="dragging"){var c=s.dragDistance(),d=Math.max(Math.abs(u.x-i.startPointerPos.x),Math.abs(u.y-i.startPointerPos.y));if(d<c||(s.startDrag({evt:r}),!s.isDragging()))return}s._setDragPosition(r,i),a.push(s)}}),a.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:r},!0)})},_endDragBefore(r){const a=[];t.DD._dragElements.forEach(i=>{const{node:o}=i,s=o.getStage();if(r&&s.setPointersPositions(r),!s._changedPointerPositions.find(u=>u.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,i.dragStatus="stopped");const l=i.node.getLayer()||i.node instanceof e.Konva.Stage&&i.node;l&&a.indexOf(l)===-1&&a.push(l)}),a.forEach(i=>{i.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((a,i)=>{a.dragStatus==="stopped"&&a.node.fire("dragend",{type:"dragend",target:a.node,evt:r},!0),a.dragStatus!=="dragging"&&t.DD._dragElements.delete(i)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1))})(nb),Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.Node=void 0;const Wt=nr,Yf=Lt,Qf=Ao,vc=Dt,no=nb,br=Qe;var rb="absoluteOpacity",ab="allEventListeners",Zs="absoluteTransform",TP="absoluteScale",xc="canvas",Xee="Change",Yee="children",Qee="konva",jE="listening",_P="mouseenter",RP="mouseleave",$P="set",OP="Shape",ib=" ",MP="stage",iu="transform",Zee="Stage",VE="visible",Jee=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(ib);let ete=1;class gt{constructor(e){this._id=ete++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===iu||e===Zs)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var r=this._cache.get(e),a=e===iu||e===Zs,i=r===void 0||a&&r.dirty===!0;return i&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const a=n.map(i=>i+"Change.konva").join(ib);this.on(a,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(xc)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Zs&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(xc)){const{scene:e,filter:n,hit:r}=this._cache.get(xc);Wt.Util.releaseCanvas(e,n,r),this._cache.delete(xc)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var a=Math.ceil(n.width||r.width),i=Math.ceil(n.height||r.height),o=n.pixelRatio,s=n.x===void 0?Math.floor(r.x):n.x,l=n.y===void 0?Math.floor(r.y):n.y,u=n.offset||0,c=n.drawBorder||!1,d=n.hitCanvasPixelRatio||1;if(!a||!i){Wt.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const p=Math.abs(Math.round(r.x)-s)>.5?1:0,f=Math.abs(Math.round(r.y)-l)>.5?1:0;a+=u*2+p,i+=u*2+f,s-=u,l-=u;var g=new Qf.SceneCanvas({pixelRatio:o,width:a,height:i}),y=new Qf.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),v=new Qf.HitCanvas({pixelRatio:d,width:a,height:i}),b=g.getContext(),x=v.getContext();return v.isCache=!0,g.isCache=!0,this._cache.delete(xc),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(g.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1),b.save(),x.save(),b.translate(-s,-l),x.translate(-s,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(rb),this._clearSelfAndDescendantCache(TP),this.drawScene(g,this),this.drawHit(v,this),this._isUnderCache=!1,b.restore(),x.restore(),c&&(b.save(),b.beginPath(),b.rect(0,0,a,i),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(xc,{scene:g,filter:y,hit:v,x:s,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(xc)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],a=1/0,i=1/0,o=-1/0,s=-1/0,l=this.getAbsoluteTransform(n);return r.forEach(function(u){var c=l.point(u);a===void 0&&(a=o=c.x,i=s=c.y),a=Math.min(a,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y)}),{x:a,y:i,width:o-a,height:s-i}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var r=this._getCachedSceneCanvas(),a=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/a,r.height/a),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),r=n.scene,a=n.filter,i=a.getContext(),o,s,l,u;if(e){if(!this._filterUpToDate){var c=r.pixelRatio;a.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=e.length,i.clear(),i.drawImage(r._canvas,0,0,r.getWidth()/c,r.getHeight()/c),s=i.getImageData(0,0,a.getWidth(),a.getHeight()),l=0;l<o;l++){if(u=e[l],typeof u!="function"){Wt.Util.error("Filter should be type of function, but got "+typeof u+" instead. Please check correct filters");continue}u.call(this,s),i.putImageData(s,0,0)}}catch(d){Wt.Util.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return a}return r}on(e,n){if(this._cache&&this._cache.delete(ab),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split(ib),a=r.length,i,o,s,l,u;for(i=0;i<a;i++)o=r[i],s=o.split("."),l=s[0],u=s[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:u,handler:n});return this}off(e,n){var r=(e||"").split(ib),a=r.length,i,o,s,l,u,c;if(this._cache&&this._cache.delete(ab),!e)for(o in this.eventListeners)this._off(o);for(i=0;i<a;i++)if(s=r[i],l=s.split("."),u=l[0],c=l[1],u)this.eventListeners[u]&&this._off(u,c,n);else for(o in this.eventListeners)this._off(o,c,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){var a=this;this.on(e,function(i){for(var o=i.target.findAncestors(n,!0,a),s=0;s<o.length;s++)i=Wt.Util.cloneObject(i),i.currentTarget=o[s],r.call(o[s],i)})}remove(){return this.isDragging()&&this.stopDrag(),no.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Zs),this._clearSelfAndDescendantCache(rb),this._clearSelfAndDescendantCache(TP),this._clearSelfAndDescendantCache(MP),this._clearSelfAndDescendantCache(VE),this._clearSelfAndDescendantCache(jE)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+Wt.Util._capitalize(e);return Wt.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,r;if(!e)return this;for(n in e)n!==Yee&&(r=$P+Wt.Util._capitalize(n),Wt.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(jE,this._isListening)}_isListening(e){if(!this.listening())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(VE,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),a=!1;no.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(a=!0)});var i=!n&&!vc.Konva.hitOnDragEnabled&&a;return this.isListening()&&this.isVisible()&&!i}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,r=0,a,i,o,s;function l(c){for(a=[],i=c.length,o=0;o<i;o++)s=c[o],r++,s.nodeType!==OP&&(a=a.concat(s.getChildren().slice())),s._id===n._id&&(o=i);a.length>0&&a[0].getDepth()<=e&&l(a)}const u=this.getStage();return n.nodeType!==Zee&&u&&l(u.getChildren()),r}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(iu),this._clearSelfAndDescendantCache(Zs)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var n=e.getPointerPosition();if(!n)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);var a=this.getAbsoluteTransform(e).getMatrix(),i=new Wt.Transform,o=this.offset();return i.m=a.slice(),i.translate(o.x,o.y),i.getTranslation()}setAbsolutePosition(e){const{x:n,y:r,...a}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(iu);var i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(e.x,e.y),e={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(a),this.setPosition({x:e.x,y:e.y}),this._clearCache(iu),this._clearSelfAndDescendantCache(Zs),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,r=e.y,a=this.x(),i=this.y();return n!==void 0&&(a+=n),r!==void 0&&(i+=r),this.setPosition({x:a,y:i}),this}_eachAncestorReverse(e,n){var r=[],a=this.getParent(),i,o;if(!(n&&n._id===this._id)){for(r.unshift(this);a&&(!n||a._id!==n._id);)r.unshift(a),a=a.parent;for(i=r.length,o=0;o<i;o++)e(r[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Wt.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Wt.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Wt.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Wt.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Wt.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Wt.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(rb,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e=this.getAttrs(),n,r,a,i,o;const s={attrs:{},className:this.getClassName()};for(n in e)r=e[n],o=Wt.Util.isObject(r)&&!Wt.Util._isPlainObject(r)&&!Wt.Util._isArray(r),!o&&(a=typeof this[n]=="function"&&this[n],delete e[n],i=a?a.call(this):null,e[n]=r,i!==r&&(s.attrs[n]=r));return Wt.Util._prepareToStringify(s)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){var a=[];n&&this._isMatch(e)&&a.push(this);for(var i=this.parent;i;){if(i===r)return a;i._isMatch(e)&&a.push(i),i=i.parent}return a}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),r=n.length,a,i;for(a=0;a<r;a++)if(i=n[a],Wt.Util.isValidSelector(i)||(Wt.Util.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Wt.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Wt.Util.warn("Konva is awesome, right?")),i.charAt(0)==="#"){if(this.id()===i.slice(1))return!0}else if(i.charAt(0)==="."){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(MP,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Zs,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new Wt.Transform,this._eachAncestorReverse(function(a){var i=a.transformsEnabled();i==="all"?n.multiply(a.getTransform()):i==="position"&&n.translate(a.x()-a.offsetX(),a.y()-a.offsetY())},e),n;n=this._cache.get(Zs)||new Wt.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const a=this.attrs.x||0,i=this.attrs.y||0,o=this.attrs.offsetX||0,s=this.attrs.offsetY||0;n.translate(a-o,i-s)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(iu,this._getTransform)}_getTransform(){var e,n,r=this._cache.get(iu)||new Wt.Transform;r.reset();var a=this.x(),i=this.y(),o=vc.Konva.getAngle(this.rotation()),s=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,u=this.attrs.skewX||0,c=this.attrs.skewY||0,d=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return(a!==0||i!==0)&&r.translate(a,i),o!==0&&r.rotate(o),(u!==0||c!==0)&&r.skew(u,c),(s!==1||l!==1)&&r.scale(s,l),(d!==0||p!==0)&&r.translate(-1*d,-1*p),r.dirty=!1,r}clone(e){var n=Wt.Util.cloneObject(this.attrs),r,a,i,o,s;for(r in e)n[r]=e[r];var l=new this.constructor(n);for(r in this.eventListeners)for(a=this.eventListeners[r],i=a.length,o=0;o<i;o++)s=a[o],s.name.indexOf(Qee)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(s));return l}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),r=this.getStage(),a=e.x!==void 0?e.x:Math.floor(n.x),i=e.y!==void 0?e.y:Math.floor(n.y),o=e.pixelRatio||1,s=new Qf.SceneCanvas({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:o}),l=s.getContext();const u=new Qf.SceneCanvas({width:s.width/s.pixelRatio+Math.abs(a),height:s.height/s.pixelRatio+Math.abs(i),pixelRatio:s.pixelRatio});return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(a||i)&&l.translate(-1*a,-1*i),this.drawScene(s,void 0,u),l.restore(),s}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,r=e.quality||null,a=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(a),a}toImage(e){return new Promise((n,r)=>{try{const a=e?.callback;a&&delete e.callback,Wt.Util._urlToImage(this.toDataURL(e),function(i){n(i),a?.(i)})}catch(a){r(a)}})}toBlob(e){return new Promise((n,r)=>{try{const a=e?.callback;a&&delete e.callback,this.toCanvas(e).toBlob(i=>{n(i),a?.(i)},e?.mimeType,e?.quality)}catch(a){r(a)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():vc.Konva.dragDistance}_off(e,n,r){var a=this.eventListeners[e],i,o,s;for(i=0;i<a.length;i++)if(o=a[i].name,s=a[i].handler,(o!=="konva"||n==="konva")&&(!n||o===n)&&(!r||r===s)){if(a.splice(i,1),a.length===0){delete this.eventListeners[e];break}i--}}_fireChangeEvent(e,n,r){this._fire(e+Xee,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){var n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var r=(n||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){var r=this[$P+Wt.Util._capitalize(e)];return Wt.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(vc.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){var r=this.attrs[e];r===n&&!Wt.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){var a;r!==void 0&&(a=this.attrs[e],a||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,a,r))}_fireAndBubble(e,n,r){n&&this.nodeType===OP&&(n.target=this);var a=(e===_P||e===RP)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!a){this._fire(e,n);var i=(e===_P||e===RP)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!i&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,r,a;const i=(n=this._cache.get(ab))!==null&&n!==void 0?n:{};let o=i?.[e];if(o===void 0){o=[];let s=Object.getPrototypeOf(this);for(;s;){const l=(a=(r=s.eventListeners)===null||r===void 0?void 0:r[e])!==null&&a!==void 0?a:[];o.push(...l),s=Object.getPrototypeOf(s)}i[e]=o,this._cache.set(ab,i)}return o}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(var a=0;a<r.length;a++)r[a].handler.call(this,n);const i=this.eventListeners[e];if(i)for(var a=0;a<i.length;a++)i[a].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,r=this.getStage(),a=this.getAbsolutePosition();if(r){var i=r._getPointerById(n)||r._changedPointerPositions[0]||a;no.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-a.x,y:i.y-a.y},dragStatus:"ready",pointerId:n})}}startDrag(e,n=!0){no.DD._dragElements.has(this._id)||this._createDragElement(e);const r=no.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(r){var a={x:r.x-n.offset.x,y:r.y-n.offset.y},i=this.dragBoundFunc();if(i!==void 0){const o=i.call(this,a,e);o?a=o:Wt.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==a.x||this._lastPos.y!==a.y)&&(this.setAbsolutePosition(a),this._requestDraw()),this._lastPos=a}}stopDrag(e){const n=no.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),no.DD._endDragBefore(e),no.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=no.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,r=!n||vc.Konva.dragButtons.indexOf(e.evt.button)>=0;if(r&&!this.isDragging()){var a=!1;no.DD._dragElements.forEach(i=>{this.isAncestorOf(i.node)&&(a=!0)}),a||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=no.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",a=n&&n.dragStatus==="ready";r?this.stopDrag():a&&no.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return Wt.Util.haveIntersection(r,this.getClientRect())}static create(e,n){return Wt.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var r=gt.prototype.getClassName.call(e),a=e.children,i,o,s;n&&(e.attrs.container=n),vc.Konva[r]||(Wt.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=vc.Konva[r];if(i=new l(e.attrs),a)for(o=a.length,s=0;s<o;s++)i.add(gt._createNode(a[s]));return i}}Wn.Node=gt,gt.prototype.nodeType="Node",gt.prototype._attrsAffectingSize=[],gt.prototype.eventListeners={},gt.prototype.on.call(gt.prototype,Jee,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(iu),this._clearSelfAndDescendantCache(Zs)}),gt.prototype.on.call(gt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(VE)}),gt.prototype.on.call(gt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(jE)}),gt.prototype.on.call(gt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(rb)});const Sn=Yf.Factory.addGetterSetter;Sn(gt,"zIndex"),Sn(gt,"absolutePosition"),Sn(gt,"position"),Sn(gt,"x",0,(0,br.getNumberValidator)()),Sn(gt,"y",0,(0,br.getNumberValidator)()),Sn(gt,"globalCompositeOperation","source-over",(0,br.getStringValidator)()),Sn(gt,"opacity",1,(0,br.getNumberValidator)()),Sn(gt,"name","",(0,br.getStringValidator)()),Sn(gt,"id","",(0,br.getStringValidator)()),Sn(gt,"rotation",0,(0,br.getNumberValidator)()),Yf.Factory.addComponentsGetterSetter(gt,"scale",["x","y"]),Sn(gt,"scaleX",1,(0,br.getNumberValidator)()),Sn(gt,"scaleY",1,(0,br.getNumberValidator)()),Yf.Factory.addComponentsGetterSetter(gt,"skew",["x","y"]),Sn(gt,"skewX",0,(0,br.getNumberValidator)()),Sn(gt,"skewY",0,(0,br.getNumberValidator)()),Yf.Factory.addComponentsGetterSetter(gt,"offset",["x","y"]),Sn(gt,"offsetX",0,(0,br.getNumberValidator)()),Sn(gt,"offsetY",0,(0,br.getNumberValidator)()),Sn(gt,"dragDistance",null,(0,br.getNumberValidator)()),Sn(gt,"width",0,(0,br.getNumberValidator)()),Sn(gt,"height",0,(0,br.getNumberValidator)()),Sn(gt,"listening",!0,(0,br.getBooleanValidator)()),Sn(gt,"preventDefault",!0,(0,br.getBooleanValidator)()),Sn(gt,"filters",null,function(t){return this._filterUpToDate=!1,t}),Sn(gt,"visible",!0,(0,br.getBooleanValidator)()),Sn(gt,"transformsEnabled","all",(0,br.getStringValidator)()),Sn(gt,"size"),Sn(gt,"dragBoundFunc"),Sn(gt,"draggable",!1,(0,br.getBooleanValidator)()),Yf.Factory.backCompat(gt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var wc={};Object.defineProperty(wc,"__esModule",{value:!0}),wc.Container=void 0;const gp=Lt,UE=Wn,ob=Qe;class kc extends UE.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var r=[];return n.forEach(function(a){e(a)&&r.push(a)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}const r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var r=[];return this._descendants(a=>{const i=a._isMatch(e);return i&&r.push(a),!!(i&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const a of r)if(n=e(a),n||a.hasChildren()&&(n=a._descendants(e),n))return!0;return!1}toObject(){var e=UE.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=UE.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n,r){var a=this.getLayer(),i=e||a&&a.getCanvas(),o=i&&i.getContext(),s=this._getCanvasCache(),l=s&&s.scene,u=i&&i.isCache;if(!this.isVisible()&&!u)return this;if(l){o.save();var c=this.getAbsoluteTransform(n).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,n,r);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var r=this.getLayer(),a=e||r&&r.hitCanvas,i=a&&a.getContext(),o=this._getCanvasCache(),s=o&&o.hit;if(s){i.save();var l=this.getAbsoluteTransform(n).getMatrix();i.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",a,n);return this}_drawChildren(e,n,r,a){var i,o=n&&n.getContext(),s=this.clipWidth(),l=this.clipHeight(),u=this.clipFunc(),c=s&&l||u;const d=r===this;if(c){o.save();var p=this.getAbsoluteTransform(r),f=p.getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o.beginPath();let b;if(u)b=u.call(this,o,this);else{var g=this.clipX(),y=this.clipY();o.rect(g,y,s,l)}o.clip.apply(o,b),f=p.copy().invert().getMatrix(),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var v=!d&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";v&&(o.save(),o._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(b){b[e](n,r,a)}),v&&o.restore(),c&&o.restore()}getClientRect(e={}){var n,r=e.skipTransform,a=e.relativeTo,i,o,s,l,u={x:1/0,y:1/0,width:0,height:0},c=this;(n=this.children)===null||n===void 0||n.forEach(function(y){if(y.visible()){var v=y.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});v.width===0&&v.height===0||(i===void 0?(i=v.x,o=v.y,s=v.x+v.width,l=v.y+v.height):(i=Math.min(i,v.x),o=Math.min(o,v.y),s=Math.max(s,v.x+v.width),l=Math.max(l,v.y+v.height)))}});for(var d=this.find("Shape"),p=!1,f=0;f<d.length;f++){var g=d[f];if(g._isVisible(this)){p=!0;break}}return p&&i!==void 0?u={x:i,y:o,width:s-i,height:l-o}:u={x:0,y:0,width:0,height:0},r?u:this._transformedRect(u,a)}}wc.Container=kc,gp.Factory.addComponentsGetterSetter(kc,"clip",["x","y","width","height"]),gp.Factory.addGetterSetter(kc,"clipX",void 0,(0,ob.getNumberValidator)()),gp.Factory.addGetterSetter(kc,"clipY",void 0,(0,ob.getNumberValidator)()),gp.Factory.addGetterSetter(kc,"clipWidth",void 0,(0,ob.getNumberValidator)()),gp.Factory.addGetterSetter(kc,"clipHeight",void 0,(0,ob.getNumberValidator)()),gp.Factory.addGetterSetter(kc,"clipFunc");var PP={},_i={};Object.defineProperty(_i,"__esModule",{value:!0}),_i.releaseCapture=_i.setPointerCapture=_i.hasPointerCapture=_i.createEvent=_i.getCapturedShape=void 0;const tte=Dt,Zf=new Map,AP=tte.Konva._global.PointerEvent!==void 0;function nte(t){return Zf.get(t)}_i.getCapturedShape=nte;function GE(t){return{evt:t,pointerId:t.pointerId}}_i.createEvent=GE;function rte(t,e){return Zf.get(t)===e}_i.hasPointerCapture=rte;function ate(t,e){DP(t),e.getStage()&&(Zf.set(t,e),AP&&e._fire("gotpointercapture",GE(new PointerEvent("gotpointercapture"))))}_i.setPointerCapture=ate;function DP(t,e){const n=Zf.get(t);if(!n)return;const r=n.getStage();r&&r.content,Zf.delete(t),AP&&n._fire("lostpointercapture",GE(new PointerEvent("lostpointercapture")))}_i.releaseCapture=DP,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=nr,n=Lt,r=wc,a=Dt,i=Ao,o=nb,s=Dt,l=_i;var u="Stage",c="string",d="px",p="mouseout",f="mouseleave",g="mouseover",y="mouseenter",v="mousemove",b="mousedown",x="mouseup",w="pointermove",S="pointerdown",C="pointerup",I="pointercancel",_="lostpointercapture",T="pointerout",M="pointerleave",P="pointerover",L="pointerenter",j="contextmenu",B="touchstart",K="touchend",X="touchmove",Z="touchcancel",H="wheel",F=5,Y=[[y,"_pointerenter"],[b,"_pointerdown"],[v,"_pointermove"],[x,"_pointerup"],[f,"_pointerleave"],[B,"_pointerdown"],[X,"_pointermove"],[K,"_pointerup"],[Z,"_pointercancel"],[g,"_pointerover"],[H,"_wheel"],[j,"_contextmenu"],[S,"_pointerdown"],[w,"_pointermove"],[C,"_pointerup"],[I,"_pointercancel"],[_,"_lostpointercapture"]];const Q={mouse:{[T]:p,[M]:f,[P]:g,[L]:y,[w]:v,[S]:b,[C]:x,[I]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[T]:"touchout",[M]:"touchleave",[P]:"touchover",[L]:"touchenter",[w]:X,[S]:B,[C]:K,[I]:Z,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[T]:T,[M]:M,[P]:P,[L]:L,[w]:w,[S]:S,[C]:C,[I]:I,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ne=xe=>xe.indexOf("pointer")>=0?"pointer":xe.indexOf("touch")>=0?"touch":"mouse",se=xe=>{const q=ne(xe);if(q==="pointer")return a.Konva.pointerEventsEnabled&&Q.pointer;if(q==="touch")return Q.touch;if(q==="mouse")return Q.mouse};function pe(xe={}){return(xe.clipFunc||xe.clipWidth||xe.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),xe}const de="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class ie extends r.Container{constructor(q){super(pe(q)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{pe(this.attrs)}),this._checkVisibility()}_validateAdd(q){const oe=q.getType()==="Layer",he=q.getType()==="FastLayer";oe||he||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const q=this.visible()?"":"none";this.content.style.display=q}setContainer(q){if(typeof q===c){if(q.charAt(0)==="."){var oe=q.slice(1);q=document.getElementsByClassName(oe)[0]}else{var he;q.charAt(0)!=="#"?he=q:he=q.slice(1),q=document.getElementById(he)}if(!q)throw"Can not find container in document with id "+he}return this._setAttr("container",q),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),q.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var q=this.children,oe=q.length,he;for(he=0;he<oe;he++)q[he].clear();return this}clone(q){return q||(q={}),q.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,q)}destroy(){super.destroy();var q=this.content;q&&e.Util._isInDocument(q)&&this.container().removeChild(q);var oe=t.stages.indexOf(this);return oe>-1&&t.stages.splice(oe,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const q=this._pointerPositions[0]||this._changedPointerPositions[0];return q?{x:q.x,y:q.y}:(e.Util.warn(de),null)}_getPointerById(q){return this._pointerPositions.find(oe=>oe.id===q)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(q){q=q||{},q.x=q.x||0,q.y=q.y||0,q.width=q.width||this.width(),q.height=q.height||this.height();var oe=new i.SceneCanvas({width:q.width,height:q.height,pixelRatio:q.pixelRatio||1}),he=oe.getContext()._context,Ie=this.children;return(q.x||q.y)&&he.translate(-1*q.x,-1*q.y),Ie.forEach(function(Ee){if(Ee.isVisible()){var _e=Ee._toKonvaCanvas(q);he.drawImage(_e._canvas,q.x,q.y,_e.getWidth()/_e.getPixelRatio(),_e.getHeight()/_e.getPixelRatio())}}),oe}getIntersection(q){if(!q)return null;var oe=this.children,he=oe.length,Ie=he-1,Ee;for(Ee=Ie;Ee>=0;Ee--){const _e=oe[Ee].getIntersection(q);if(_e)return _e}return null}_resizeDOM(){var q=this.width(),oe=this.height();this.content&&(this.content.style.width=q+d,this.content.style.height=oe+d),this.bufferCanvas.setSize(q,oe),this.bufferHitCanvas.setSize(q,oe),this.children.forEach(he=>{he.setSize({width:q,height:oe}),he.draw()})}add(q,...oe){if(arguments.length>1){for(var he=0;he<arguments.length;he++)this.add(arguments[he]);return this}super.add(q);var Ie=this.children.length;return Ie>F&&e.Util.warn("The stage has "+Ie+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),q.setSize({width:this.width(),height:this.height()}),q.draw(),a.Konva.isBrowser&&this.content.appendChild(q.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(q){return l.hasPointerCapture(q,this)}setPointerCapture(q){l.setPointerCapture(q,this)}releaseCapture(q){l.releaseCapture(q,this)}getLayers(){return this.children}_bindContentEvents(){a.Konva.isBrowser&&Y.forEach(([q,oe])=>{this.content.addEventListener(q,he=>{this[oe](he)},{passive:!1})})}_pointerenter(q){this.setPointersPositions(q);const oe=se(q.type);oe&&this._fire(oe.pointerenter,{evt:q,target:this,currentTarget:this})}_pointerover(q){this.setPointersPositions(q);const oe=se(q.type);oe&&this._fire(oe.pointerover,{evt:q,target:this,currentTarget:this})}_getTargetShape(q){let oe=this[q+"targetShape"];return oe&&!oe.getStage()&&(oe=null),oe}_pointerleave(q){const oe=se(q.type),he=ne(q.type);if(oe){this.setPointersPositions(q);var Ie=this._getTargetShape(he),Ee=!o.DD.isDragging||a.Konva.hitOnDragEnabled;Ie&&Ee?(Ie._fireAndBubble(oe.pointerout,{evt:q}),Ie._fireAndBubble(oe.pointerleave,{evt:q}),this._fire(oe.pointerleave,{evt:q,target:this,currentTarget:this}),this[he+"targetShape"]=null):Ee&&(this._fire(oe.pointerleave,{evt:q,target:this,currentTarget:this}),this._fire(oe.pointerout,{evt:q,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(q){const oe=se(q.type),he=ne(q.type);if(oe){this.setPointersPositions(q);var Ie=!1;this._changedPointerPositions.forEach(Ee=>{var _e=this.getIntersection(Ee);if(o.DD.justDragged=!1,a.Konva["_"+he+"ListenClick"]=!0,!_e||!_e.isListening())return;a.Konva.capturePointerEventsEnabled&&_e.setPointerCapture(Ee.id),this[he+"ClickStartShape"]=_e,_e._fireAndBubble(oe.pointerdown,{evt:q,pointerId:Ee.id}),Ie=!0;const Fe=q.type.indexOf("touch")>=0;_e.preventDefault()&&q.cancelable&&Fe&&q.preventDefault()}),Ie||this._fire(oe.pointerdown,{evt:q,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(q){const oe=se(q.type),he=ne(q.type);if(!oe)return;o.DD.isDragging&&o.DD.node.preventDefault()&&q.cancelable&&q.preventDefault(),this.setPointersPositions(q);var Ie=!o.DD.isDragging||a.Konva.hitOnDragEnabled;if(!Ie)return;var Ee={};let _e=!1;var Fe=this._getTargetShape(he);this._changedPointerPositions.forEach(Xe=>{const Oe=l.getCapturedShape(Xe.id)||this.getIntersection(Xe),lt=Xe.id,Je={evt:q,pointerId:lt};var nt=Fe!==Oe;if(nt&&Fe&&(Fe._fireAndBubble(oe.pointerout,{...Je},Oe),Fe._fireAndBubble(oe.pointerleave,{...Je},Oe)),Oe){if(Ee[Oe._id])return;Ee[Oe._id]=!0}Oe&&Oe.isListening()?(_e=!0,nt&&(Oe._fireAndBubble(oe.pointerover,{...Je},Fe),Oe._fireAndBubble(oe.pointerenter,{...Je},Fe),this[he+"targetShape"]=Oe),Oe._fireAndBubble(oe.pointermove,{...Je})):Fe&&(this._fire(oe.pointerover,{evt:q,target:this,currentTarget:this,pointerId:lt}),this[he+"targetShape"]=null)}),_e||this._fire(oe.pointermove,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(q){const oe=se(q.type),he=ne(q.type);if(!oe)return;this.setPointersPositions(q);const Ie=this[he+"ClickStartShape"],Ee=this[he+"ClickEndShape"];var _e={};let Fe=!1;this._changedPointerPositions.forEach(Xe=>{const Oe=l.getCapturedShape(Xe.id)||this.getIntersection(Xe);if(Oe){if(Oe.releaseCapture(Xe.id),_e[Oe._id])return;_e[Oe._id]=!0}const lt=Xe.id,Je={evt:q,pointerId:lt};let nt=!1;a.Konva["_"+he+"InDblClickWindow"]?(nt=!0,clearTimeout(this[he+"DblTimeout"])):o.DD.justDragged||(a.Konva["_"+he+"InDblClickWindow"]=!0,clearTimeout(this[he+"DblTimeout"])),this[he+"DblTimeout"]=setTimeout(function(){a.Konva["_"+he+"InDblClickWindow"]=!1},a.Konva.dblClickWindow),Oe&&Oe.isListening()?(Fe=!0,this[he+"ClickEndShape"]=Oe,Oe._fireAndBubble(oe.pointerup,{...Je}),a.Konva["_"+he+"ListenClick"]&&Ie&&Ie===Oe&&(Oe._fireAndBubble(oe.pointerclick,{...Je}),nt&&Ee&&Ee===Oe&&Oe._fireAndBubble(oe.pointerdblclick,{...Je}))):(this[he+"ClickEndShape"]=null,a.Konva["_"+he+"ListenClick"]&&this._fire(oe.pointerclick,{evt:q,target:this,currentTarget:this,pointerId:lt}),nt&&this._fire(oe.pointerdblclick,{evt:q,target:this,currentTarget:this,pointerId:lt}))}),Fe||this._fire(oe.pointerup,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a.Konva["_"+he+"ListenClick"]=!1,q.cancelable&&he!=="touch"&&q.preventDefault()}_contextmenu(q){this.setPointersPositions(q);var oe=this.getIntersection(this.getPointerPosition());oe&&oe.isListening()?oe._fireAndBubble(j,{evt:q}):this._fire(j,{evt:q,target:this,currentTarget:this})}_wheel(q){this.setPointersPositions(q);var oe=this.getIntersection(this.getPointerPosition());oe&&oe.isListening()?oe._fireAndBubble(H,{evt:q}):this._fire(H,{evt:q,target:this,currentTarget:this})}_pointercancel(q){this.setPointersPositions(q);const oe=l.getCapturedShape(q.pointerId)||this.getIntersection(this.getPointerPosition());oe&&oe._fireAndBubble(C,l.createEvent(q)),l.releaseCapture(q.pointerId)}_lostpointercapture(q){l.releaseCapture(q.pointerId)}setPointersPositions(q){var oe=this._getContentPosition(),he=null,Ie=null;q=q||window.event,q.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(q.touches,Ee=>{this._pointerPositions.push({id:Ee.identifier,x:(Ee.clientX-oe.left)/oe.scaleX,y:(Ee.clientY-oe.top)/oe.scaleY})}),Array.prototype.forEach.call(q.changedTouches||q.touches,Ee=>{this._changedPointerPositions.push({id:Ee.identifier,x:(Ee.clientX-oe.left)/oe.scaleX,y:(Ee.clientY-oe.top)/oe.scaleY})})):(he=(q.clientX-oe.left)/oe.scaleX,Ie=(q.clientY-oe.top)/oe.scaleY,this.pointerPos={x:he,y:Ie},this._pointerPositions=[{x:he,y:Ie,id:e.Util._getFirstPointerId(q)}],this._changedPointerPositions=[{x:he,y:Ie,id:e.Util._getFirstPointerId(q)}])}_setPointerPosition(q){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(q)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var q=this.content.getBoundingClientRect();return{top:q.top,left:q.left,scaleX:q.width/this.content.clientWidth||1,scaleY:q.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new i.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new i.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!a.Konva.isBrowser){var q=this.container();if(!q)throw"Stage has no container. A container is required.";q.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),q.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(q){q.batchDraw()}),this}}t.Stage=ie,ie.prototype.nodeType=u,(0,s._registerNode)(ie),n.Factory.addGetterSetter(ie,"container")}(PP);var Jf={},Ar={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=Dt,n=nr,r=Lt,a=Wn,i=Qe,o=Dt,s=_i;var l="hasShadow",u="shadowRGBA",c="patternImage",d="linearGradient",p="radialGradient";let f;function g(){return f||(f=n.Util.createCanvasElement().getContext("2d"),f)}t.shapes={};function y(M){const P=this.attrs.fillRule;P?M.fill(P):M.fill()}function v(M){M.stroke()}function b(M){M.fill()}function x(M){M.stroke()}function w(){this._clearCache(l)}function S(){this._clearCache(u)}function C(){this._clearCache(c)}function I(){this._clearCache(d)}function _(){this._clearCache(p)}class T extends a.Node{constructor(P){super(P);let L;for(;L=n.Util.getRandomColor(),!(L&&!(L in t.shapes)););this.colorKey=L,t.shapes[L]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var P=g();const L=P.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const j=new n.Transform;j.translate(this.fillPatternX(),this.fillPatternY()),j.rotate(e.Konva.getAngle(this.fillPatternRotation())),j.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),j.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const B=j.getMatrix(),K=typeof DOMMatrix>"u"?{a:B[0],b:B[1],c:B[2],d:B[3],e:B[4],f:B[5]}:new DOMMatrix(B);L.setTransform(K)}return L}}_getLinearGradient(){return this._getCache(d,this.__getLinearGradient)}__getLinearGradient(){var P=this.fillLinearGradientColorStops();if(P){for(var L=g(),j=this.fillLinearGradientStartPoint(),B=this.fillLinearGradientEndPoint(),K=L.createLinearGradient(j.x,j.y,B.x,B.y),X=0;X<P.length;X+=2)K.addColorStop(P[X],P[X+1]);return K}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){var P=this.fillRadialGradientColorStops();if(P){for(var L=g(),j=this.fillRadialGradientStartPoint(),B=this.fillRadialGradientEndPoint(),K=L.createRadialGradient(j.x,j.y,this.fillRadialGradientStartRadius(),B.x,B.y,this.fillRadialGradientEndRadius()),X=0;X<P.length;X+=2)K.addColorStop(P[X],P[X+1]);return K}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var P=n.Util.colorToRGBA(this.shadowColor());if(P)return"rgba("+P.r+","+P.g+","+P.b+","+P.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const P=this.hitStrokeWidth();return P==="auto"?this.hasStroke():this.strokeEnabled()&&!!P}intersects(P){var L=this.getStage();if(!L)return!1;const j=L.bufferHitCanvas;return j.getContext().clear(),this.drawHit(j,void 0,!0),j.context.getImageData(Math.round(P.x),Math.round(P.y),1,1).data[3]>0}destroy(){return a.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(P){var L;if(!(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0)||L))return!1;const j=P||this.hasFill(),B=this.hasStroke(),K=this.getAbsoluteOpacity()!==1;if(j&&B&&K)return!0;const X=this.hasShadow(),Z=this.shadowForStrokeEnabled();return!!(j&&B&&X&&Z)}setStrokeHitEnabled(P){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),P?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var P=this.size();return{x:this._centroid?-P.width/2:0,y:this._centroid?-P.height/2:0,width:P.width,height:P.height}}getClientRect(P={}){const L=P.skipTransform,j=P.relativeTo,B=this.getSelfRect(),K=!P.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,X=B.width+K,Z=B.height+K,H=!P.skipShadow&&this.hasShadow(),F=H?this.shadowOffsetX():0,Y=H?this.shadowOffsetY():0,Q=X+Math.abs(F),ne=Z+Math.abs(Y),se=H&&this.shadowBlur()||0,pe=Q+se*2,de=ne+se*2,ie={width:pe,height:de,x:-(K/2+se)+Math.min(F,0)+B.x,y:-(K/2+se)+Math.min(Y,0)+B.y};return L?ie:this._transformedRect(ie,j)}drawScene(P,L,j){var B=this.getLayer(),K=P||B.getCanvas(),X=K.getContext(),Z=this._getCanvasCache(),H=this.getSceneFunc(),F=this.hasShadow(),Y,Q,ne=K.isCache,se=L===this;if(!this.isVisible()&&!se)return this;if(Z){X.save();var pe=this.getAbsoluteTransform(L).getMatrix();return X.transform(pe[0],pe[1],pe[2],pe[3],pe[4],pe[5]),this._drawCachedSceneCanvas(X),X.restore(),this}if(!H)return this;if(X.save(),this._useBufferCanvas()&&!ne){Y=this.getStage();const xe=j||Y.bufferCanvas;Q=xe.getContext(),Q.clear(),Q.save(),Q._applyLineJoin(this);var de=this.getAbsoluteTransform(L).getMatrix();Q.transform(de[0],de[1],de[2],de[3],de[4],de[5]),H.call(this,Q,this),Q.restore();var ie=xe.pixelRatio;F&&X._applyShadow(this),X._applyOpacity(this),X._applyGlobalCompositeOperation(this),X.drawImage(xe._canvas,0,0,xe.width/ie,xe.height/ie)}else{if(X._applyLineJoin(this),!se){var de=this.getAbsoluteTransform(L).getMatrix();X.transform(de[0],de[1],de[2],de[3],de[4],de[5]),X._applyOpacity(this),X._applyGlobalCompositeOperation(this)}F&&X._applyShadow(this),H.call(this,X,this)}return X.restore(),this}drawHit(P,L,j=!1){if(!this.shouldDrawHit(L,j))return this;var B=this.getLayer(),K=P||B.hitCanvas,X=K&&K.getContext(),Z=this.hitFunc()||this.sceneFunc(),H=this._getCanvasCache(),F=H&&H.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),F){X.save();var Y=this.getAbsoluteTransform(L).getMatrix();return X.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),this._drawCachedHitCanvas(X),X.restore(),this}if(!Z)return this;if(X.save(),X._applyLineJoin(this),this!==L){var Q=this.getAbsoluteTransform(L).getMatrix();X.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5])}return Z.call(this,X,this),X.restore(),this}drawHitFromCache(P=0){var L=this._getCanvasCache(),j=this._getCachedSceneCanvas(),B=L.hit,K=B.getContext(),X=B.getWidth(),Z=B.getHeight(),H,F,Y,Q,ne,se;K.clear(),K.drawImage(j._canvas,0,0,X,Z);try{for(H=K.getImageData(0,0,X,Z),F=H.data,Y=F.length,Q=n.Util._hexToRgb(this.colorKey),ne=0;ne<Y;ne+=4)se=F[ne+3],se>P?(F[ne]=Q.r,F[ne+1]=Q.g,F[ne+2]=Q.b,F[ne+3]=255):F[ne+3]=0;K.putImageData(H,0,0)}catch(pe){n.Util.error("Unable to draw hit graph from cached scene canvas. "+pe.message)}return this}hasPointerCapture(P){return s.hasPointerCapture(P,this)}setPointerCapture(P){s.setPointerCapture(P,this)}releaseCapture(P){s.releaseCapture(P,this)}}t.Shape=T,T.prototype._fillFunc=y,T.prototype._strokeFunc=v,T.prototype._fillFuncHit=b,T.prototype._strokeFuncHit=x,T.prototype._centroid=!1,T.prototype.nodeType="Shape",(0,o._registerNode)(T),T.prototype.eventListeners={},T.prototype.on.call(T.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),T.prototype.on.call(T.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",S),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",I),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",_),r.Factory.addGetterSetter(T,"stroke",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(T,"strokeWidth",2,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(T,"hitStrokeWidth","auto",(0,i.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(T,"strokeHitEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(T,"perfectDrawEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(T,"shadowForStrokeEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(T,"lineJoin"),r.Factory.addGetterSetter(T,"lineCap"),r.Factory.addGetterSetter(T,"sceneFunc"),r.Factory.addGetterSetter(T,"hitFunc"),r.Factory.addGetterSetter(T,"dash"),r.Factory.addGetterSetter(T,"dashOffset",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowColor",void 0,(0,i.getStringValidator)()),r.Factory.addGetterSetter(T,"shadowBlur",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowOpacity",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(T,"shadowOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternImage"),r.Factory.addGetterSetter(T,"fill",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(T,"fillPatternX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(T,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(T,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(T,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(T,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(T,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(T,"fillEnabled",!0),r.Factory.addGetterSetter(T,"strokeEnabled",!0),r.Factory.addGetterSetter(T,"shadowEnabled",!0),r.Factory.addGetterSetter(T,"dashEnabled",!0),r.Factory.addGetterSetter(T,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(T,"fillPriority","color"),r.Factory.addComponentsGetterSetter(T,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(T,"fillPatternOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(T,"fillPatternScaleX",1,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternScaleY",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(T,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(T,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(T,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(T,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(T,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(T,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(T,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(T,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(T,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(T,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(T,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(T,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(T,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(T,"fillPatternRotation",0),r.Factory.addGetterSetter(T,"fillRule",void 0,(0,i.getStringValidator)()),r.Factory.backCompat(T,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Ar),Object.defineProperty(Jf,"__esModule",{value:!0}),Jf.Layer=void 0;const Js=nr,WE=wc,yp=Wn,HE=Lt,LP=Ao,ite=Qe,ote=Ar,ste=Dt;var lte="#",ute="beforeDraw",cte="draw",FP=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],dte=FP.length;let bp=class extends WE.Container{constructor(t){super(t),this.canvas=new LP.SceneCanvas,this.hitCanvas=new LP.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){yp.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=yp.Node.prototype.moveUp.call(this);if(!t)return!1;var e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(yp.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(yp.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return yp.Node.prototype.remove.call(this),t&&t.parentNode&&Js.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){var e=t.getType();e!=="Group"&&e!=="Shape"&&Js.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),yp.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Js.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Js.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Js.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,n=!1;;){for(let r=0;r<dte;r++){const a=FP[r],i=this._getIntersection({x:t.x+a.x*e,y:t.y+a.y*e}),o=i.shape;if(o)return o;if(n=!!i.antialiased,!i.antialiased)break}if(n)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=n[3];if(r===255){const a=Js.Util._rgbToHex(n[0],n[1],n[2]),i=ote.shapes[lte+a];return i?{shape:i}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas();return this._fire(ute,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),WE.Container.prototype.drawScene.call(this,r,e),this._fire(cte,{node:this}),this}drawHit(t,e){var n=this.getLayer(),r=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),WE.Container.prototype.drawHit.call(this,r,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){Js.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return Js.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,e=!!this.hitCanvas._canvas.parentNode;e?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return Js.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Jf.Layer=bp,bp.prototype.nodeType="Layer",(0,ste._registerNode)(bp),HE.Factory.addGetterSetter(bp,"imageSmoothingEnabled",!0),HE.Factory.addGetterSetter(bp,"clearBeforeDraw",!0),HE.Factory.addGetterSetter(bp,"hitGraphEnabled",!0,(0,ite.getBooleanValidator)());var sb={};Object.defineProperty(sb,"__esModule",{value:!0}),sb.FastLayer=void 0;const pte=nr,hte=Jf,fte=Dt;class qE extends hte.Layer{constructor(e){super(e),this.listening(!1),pte.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}sb.FastLayer=qE,qE.prototype.nodeType="FastLayer",(0,fte._registerNode)(qE);var vp={};Object.defineProperty(vp,"__esModule",{value:!0}),vp.Group=void 0;const mte=nr,gte=wc,yte=Dt;class KE extends gte.Container{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&mte.Util.throw("You may only add groups and shapes to groups.")}}vp.Group=KE,KE.prototype.nodeType="Group",(0,yte._registerNode)(KE);var xp={};Object.defineProperty(xp,"__esModule",{value:!0}),xp.Animation=void 0;const XE=Dt,BP=nr,YE=function(){return XE.glob.performance&&XE.glob.performance.now?function(){return XE.glob.performance.now()}:function(){return new Date().getTime()}}();class Cs{constructor(e,n){this.id=Cs.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:YE(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,r=n.length;for(let a=0;a<r;a++)if(n[a]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const e=Cs.animations,n=e.length;for(let r=0;r<n;r++)if(e[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=YE(),Cs._addAnimation(this),this}stop(){return Cs._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,r=this.animations,a=r.length;for(let i=0;i<a;i++)if(r[i].id===n){this.animations.splice(i,1);break}}static _runFrames(){const e={},n=this.animations;for(let r=0;r<n.length;r++){const a=n[r],i=a.layers,o=a.func;a._updateFrameObject(YE());const s=i.length;let l;if(o?l=o.call(a,a.frame)!==!1:l=!0,!!l)for(let u=0;u<s;u++){const c=i[u];c._id!==void 0&&(e[c._id]=c)}}for(let r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){const e=Cs;e.animations.length?(e._runFrames(),BP.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,BP.Util.requestAnimFrame(this._animationLoop))}}xp.Animation=Cs,Cs.animations=[],Cs.animIdCounter=0,Cs.animRunning=!1;var zP={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=nr,n=xp,r=Wn,a=Dt;var i={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,s=2,l=3,u=0,c=["fill","stroke","shadowColor"];class d{constructor(g,y,v,b,x,w,S){this.prop=g,this.propFunc=y,this.begin=b,this._pos=b,this.duration=w,this._change=0,this.prevPos=0,this.yoyo=S,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=x-this.begin,this.pause()}fire(g){var y=this[g];y&&y()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=s,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var g=this.getTimer()-this._startTime;this.state===s?this.setTime(g):this.state===l&&this.setTime(this.duration-g)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class p{constructor(g){var y=this,v=g.node,b=v._id,x,w=g.easing||t.Easings.Linear,S=!!g.yoyo,C;typeof g.duration>"u"?x=.3:g.duration===0?x=.001:x=g.duration,this.node=v,this._id=u++;var I=v.getLayer()||(v instanceof a.Konva.Stage?v.getLayers():null);I||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){y.tween.onEnterFrame()},I),this.tween=new d(C,function(_){y._tweenFunc(_)},w,0,1,x*1e3,S),this._addListeners(),p.attrs[b]||(p.attrs[b]={}),p.attrs[b][this._id]||(p.attrs[b][this._id]={}),p.tweens[b]||(p.tweens[b]={});for(C in g)i[C]===void 0&&this._addAttr(C,g[C]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,y){var v=this.node,b=v._id,x,w,S,C,I,_,T,M;if(S=p.tweens[b][g],S&&delete p.attrs[b][S][g],x=v.getAttr(g),e.Util._isArray(y))if(w=[],I=Math.max(y.length,x.length),g==="points"&&y.length!==x.length&&(y.length>x.length?(T=x,x=e.Util._prepareArrayForTween(x,y,v.closed())):(_=y,y=e.Util._prepareArrayForTween(y,x,v.closed()))),g.indexOf("fill")===0)for(C=0;C<I;C++)if(C%2===0)w.push(y[C]-x[C]);else{var P=e.Util.colorToRGBA(x[C]);M=e.Util.colorToRGBA(y[C]),x[C]=P,w.push({r:M.r-P.r,g:M.g-P.g,b:M.b-P.b,a:M.a-P.a})}else for(C=0;C<I;C++)w.push(y[C]-x[C]);else c.indexOf(g)!==-1?(x=e.Util.colorToRGBA(x),M=e.Util.colorToRGBA(y),w={r:M.r-x.r,g:M.g-x.g,b:M.b-x.b,a:M.a-x.a}):w=y-x;p.attrs[b][this._id][g]={start:x,diff:w,end:y,trueEnd:_,trueStart:T},p.tweens[b][g]=this._id}_tweenFunc(g){var y=this.node,v=p.attrs[y._id][this._id],b,x,w,S,C,I,_,T;for(b in v){if(x=v[b],w=x.start,S=x.diff,T=x.end,e.Util._isArray(w))if(C=[],_=Math.max(w.length,T.length),b.indexOf("fill")===0)for(I=0;I<_;I++)I%2===0?C.push((w[I]||0)+S[I]*g):C.push("rgba("+Math.round(w[I].r+S[I].r*g)+","+Math.round(w[I].g+S[I].g*g)+","+Math.round(w[I].b+S[I].b*g)+","+(w[I].a+S[I].a*g)+")");else for(I=0;I<_;I++)C.push((w[I]||0)+S[I]*g);else c.indexOf(b)!==-1?C="rgba("+Math.round(w.r+S.r*g)+","+Math.round(w.g+S.g*g)+","+Math.round(w.b+S.b*g)+","+(w.a+S.a*g)+")":C=w+S*g;y.setAttr(b,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueEnd&&g.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueStart&&g.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var g=this.node._id,y=this._id,v=p.tweens[g],b;this.pause();for(b in v)delete p.tweens[g][b];delete p.attrs[g][y]}}t.Tween=p,p.attrs={},p.tweens={},r.Node.prototype.to=function(f){var g=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),g&&g()};var y=new p(f);y.play()},t.Easings={BackEaseIn(f,g,y,v){var b=1.70158;return y*(f/=v)*f*((b+1)*f-b)+g},BackEaseOut(f,g,y,v){var b=1.70158;return y*((f=f/v-1)*f*((b+1)*f+b)+1)+g},BackEaseInOut(f,g,y,v){var b=1.70158;return(f/=v/2)<1?y/2*(f*f*(((b*=1.525)+1)*f-b))+g:y/2*((f-=2)*f*(((b*=1.525)+1)*f+b)+2)+g},ElasticEaseIn(f,g,y,v,b,x){var w=0;return f===0?g:(f/=v)===1?g+y:(x||(x=v*.3),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),-(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x))+g)},ElasticEaseOut(f,g,y,v,b,x){var w=0;return f===0?g:(f/=v)===1?g+y:(x||(x=v*.3),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),b*Math.pow(2,-10*f)*Math.sin((f*v-w)*(2*Math.PI)/x)+y+g)},ElasticEaseInOut(f,g,y,v,b,x){var w=0;return f===0?g:(f/=v/2)===2?g+y:(x||(x=v*(.3*1.5)),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),f<1?-.5*(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x))+g:b*Math.pow(2,-10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x)*.5+y+g)},BounceEaseOut(f,g,y,v){return(f/=v)<1/2.75?y*(7.5625*f*f)+g:f<2/2.75?y*(7.5625*(f-=1.5/2.75)*f+.75)+g:f<2.5/2.75?y*(7.5625*(f-=2.25/2.75)*f+.9375)+g:y*(7.5625*(f-=2.625/2.75)*f+.984375)+g},BounceEaseIn(f,g,y,v){return y-t.Easings.BounceEaseOut(v-f,0,y,v)+g},BounceEaseInOut(f,g,y,v){return f<v/2?t.Easings.BounceEaseIn(f*2,0,y,v)*.5+g:t.Easings.BounceEaseOut(f*2-v,0,y,v)*.5+y*.5+g},EaseIn(f,g,y,v){return y*(f/=v)*f+g},EaseOut(f,g,y,v){return-y*(f/=v)*(f-2)+g},EaseInOut(f,g,y,v){return(f/=v/2)<1?y/2*f*f+g:-y/2*(--f*(f-2)-1)+g},StrongEaseIn(f,g,y,v){return y*(f/=v)*f*f*f*f+g},StrongEaseOut(f,g,y,v){return y*((f=f/v-1)*f*f*f*f+1)+g},StrongEaseInOut(f,g,y,v){return(f/=v/2)<1?y/2*f*f*f*f*f+g:y/2*((f-=2)*f*f*f*f+2)+g},Linear(f,g,y,v){return y*f/v+g}}})(zP),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=Dt,n=nr,r=Wn,a=wc,i=PP,o=Jf,s=sb,l=vp,u=nb,c=Ar,d=xp,p=zP,f=Qs,g=Ao;t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:a.Container,Stage:i.Stage,stages:i.stages,Layer:o.Layer,FastLayer:s.FastLayer,Group:l.Group,DD:u.DD,Shape:c.Shape,shapes:c.shapes,Animation:d.Animation,Tween:p.Tween,Easings:p.Easings,Context:f.Context,Canvas:g.Canvas}),t.default=t.Konva}(Qy);var lb={};Object.defineProperty(lb,"__esModule",{value:!0}),lb.Arc=void 0;const ub=Lt,bte=Ar,jP=Dt,cb=Qe,vte=Dt;class el extends bte.Shape{_sceneFunc(e){var n=jP.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),a=jP.Konva.getAngle(r?360-this.angle():this.angle()),i=Math.cos(Math.min(a,Math.PI)),o=1,s=Math.sin(Math.min(Math.max(Math.PI,a),3*Math.PI/2)),l=Math.sin(Math.min(a,Math.PI/2)),u=i*(i>0?e:n),c=o*n,d=s*(s>0?e:n),p=l*(l>0?n:e);return{x:u,y:r?-1*p:d,width:c-u,height:p-d}}}lb.Arc=el,el.prototype._centroid=!0,el.prototype.className="Arc",el.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,vte._registerNode)(el),ub.Factory.addGetterSetter(el,"innerRadius",0,(0,cb.getNumberValidator)()),ub.Factory.addGetterSetter(el,"outerRadius",0,(0,cb.getNumberValidator)()),ub.Factory.addGetterSetter(el,"angle",0,(0,cb.getNumberValidator)()),ub.Factory.addGetterSetter(el,"clockwise",!1,(0,cb.getBooleanValidator)());var db={},em={};Object.defineProperty(em,"__esModule",{value:!0}),em.Line=void 0;const pb=Lt,xte=Ar,VP=Qe,wte=Dt;function QE(t,e,n,r,a,i,o){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(a-n,2)+Math.pow(i-r,2)),u=o*s/(s+l),c=o*l/(s+l),d=n-u*(a-t),p=r-u*(i-e),f=n+c*(a-t),g=r+c*(i-e);return[d,p,f,g]}function UP(t,e){var n=t.length,r=[],a,i;for(a=2;a<n-2;a+=2)i=QE(t[a-2],t[a-1],t[a],t[a+1],t[a+2],t[a+3],e),!isNaN(i[0])&&(r.push(i[0]),r.push(i[1]),r.push(t[a]),r.push(t[a+1]),r.push(i[2]),r.push(i[3]));return r}class ou extends xte.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),r=n.length,a=this.tension(),i=this.closed(),o=this.bezier(),s,l,u;if(r){if(e.beginPath(),e.moveTo(n[0],n[1]),a!==0&&r>4){for(s=this.getTensionPoints(),l=s.length,u=i?0:4,i||e.quadraticCurveTo(s[0],s[1],s[2],s[3]);u<l-2;)e.bezierCurveTo(s[u++],s[u++],s[u++],s[u++],s[u++],s[u++]);i||e.quadraticCurveTo(s[l-2],s[l-1],n[r-2],n[r-1])}else if(o)for(u=2;u<r;)e.bezierCurveTo(n[u++],n[u++],n[u++],n[u++],n[u++],n[u++]);else for(u=2;u<r;u+=2)e.lineTo(n[u],n[u+1]);i?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():UP(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,r=this.tension(),a=QE(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),i=QE(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),o=UP(e,r),s=[a[2],a[3]].concat(o).concat([i[0],i[1],e[n-2],e[n-1],i[2],i[3],a[0],a[1],e[0],e[1]]);return s}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],r=e[0],a=e[1],i=e[1],o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),a=Math.min(a,s),i=Math.max(i,s);return{x:n,y:a,width:r-n,height:i-a}}}em.Line=ou,ou.prototype.className="Line",ou.prototype._attrsAffectingSize=["points","bezier","tension"],(0,wte._registerNode)(ou),pb.Factory.addGetterSetter(ou,"closed",!1),pb.Factory.addGetterSetter(ou,"bezier",!1),pb.Factory.addGetterSetter(ou,"tension",0,(0,VP.getNumberValidator)()),pb.Factory.addGetterSetter(ou,"points",[],(0,VP.getNumberArrayValidator)());var wp={},GP={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,s,l)=>{let u,c,d;u=l/2,c=0;for(let p=0;p<20;p++)d=u*t.tValues[20][p]+u,c+=t.cValues[20][p]*r(o,s,d);return u*c};t.getCubicArcLength=e;const n=(o,s,l)=>{l===void 0&&(l=1);const u=o[0]-2*o[1]+o[2],c=s[0]-2*s[1]+s[2],d=2*o[1]-2*o[0],p=2*s[1]-2*s[0],f=4*(u*u+c*c),g=4*(u*d+c*p),y=d*d+p*p;if(f===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(s[2]-s[0],2));const v=g/(2*f),b=y/f,x=l+v,w=b-v*v,S=x*x+w>0?Math.sqrt(x*x+w):0,C=v*v+w>0?Math.sqrt(v*v+w):0,I=v+Math.sqrt(v*v+w)!==0?w*Math.log(Math.abs((x+S)/(v+C))):0;return Math.sqrt(f)/2*(x*S-v*C+I)};t.getQuadraticArcLength=n;function r(o,s,l){const u=a(1,l,o),c=a(1,l,s),d=u*u+c*c;return Math.sqrt(d)}const a=(o,s,l)=>{const u=l.length-1;let c,d;if(u===0)return 0;if(o===0){d=0;for(let p=0;p<=u;p++)d+=t.binomialCoefficients[u][p]*Math.pow(1-s,u-p)*Math.pow(s,p)*l[p];return d}else{c=new Array(u);for(let p=0;p<u;p++)c[p]=u*(l[p+1]-l[p]);return a(o-1,s,c)}},i=(o,s,l)=>{let u=1,c=o/s,d=(o-l(c))/s,p=0;for(;u>.001;){const f=l(c+d),g=Math.abs(o-f)/s;if(g<u)u=g,c+=d;else{const y=l(c-d),v=Math.abs(o-y)/s;v<u?(u=v,c-=d):d/=2}if(p++,p>500)break}return c};t.t2length=i})(GP),Object.defineProperty(wp,"__esModule",{value:!0}),wp.Path=void 0;const kte=Lt,Ste=Ar,Cte=Dt,kp=GP;class jr extends Ste.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=jr.parsePathData(this.data()),this.pathLength=jr.getPathLength(this.dataArray)}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var r=!1,a=0;a<n.length;a++){var i=n[a].command,o=n[a].points;switch(i){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var s=o[0],l=o[1],u=o[2],c=o[3],d=o[4],p=o[5],f=o[6],g=o[7],y=u>c?u:c,v=u>c?1:u/c,b=u>c?c/u:1;e.translate(s,l),e.rotate(f),e.scale(v,b),e.arc(0,0,y,d,d+p,1-g),e.scale(1/v,1/b),e.rotate(-f),e.translate(-s,-l);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(u){if(u.command==="A"){var c=u.points[4],d=u.points[5],p=u.points[4]+d,f=Math.PI/180;if(Math.abs(c-p)<f&&(f=Math.abs(c-p)),d<0)for(let g=c-f;g>p;g-=f){const y=jr.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],g,0);e.push(y.x,y.y)}else for(let g=c+f;g<p;g+=f){const y=jr.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],g,0);e.push(y.x,y.y)}}else if(u.command==="C")for(let g=0;g<=1;g+=.01){const y=jr.getPointOnCubicBezier(g,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);e.push(y.x,y.y)}else e=e.concat(u.points)});for(var n=e[0],r=e[0],a=e[1],i=e[1],o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],isNaN(o)||(n=Math.min(n,o),r=Math.max(r,o)),isNaN(s)||(a=Math.min(a,s),i=Math.max(i,s));return{x:n,y:a,width:r-n,height:i-a}}getLength(){return this.pathLength}getPointAtLength(e){return jr.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,r,a){return Math.sqrt((r-e)*(r-e)+(a-n)*(a-n))}static getPathLength(e){let n=0;for(var r=0;r<e.length;++r)n+=e[r].pathLength;return n}static getPointAtLengthOfDataArray(e,n){var r,a=0,i=n.length;if(!i)return null;for(;a<i&&e>n[a].pathLength;)e-=n[a].pathLength,++a;if(a===i)return r=n[a-1].points.slice(-2),{x:r[0],y:r[1]};if(e<.01)return r=n[a].points.slice(0,2),{x:r[0],y:r[1]};var o=n[a],s=o.points;switch(o.command){case"L":return jr.getPointOnLine(e,o.start.x,o.start.y,s[0],s[1]);case"C":return jr.getPointOnCubicBezier((0,kp.t2length)(e,jr.getPathLength(n),y=>(0,kp.getCubicArcLength)([o.start.x,s[0],s[2],s[4]],[o.start.y,s[1],s[3],s[5]],y)),o.start.x,o.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return jr.getPointOnQuadraticBezier((0,kp.t2length)(e,jr.getPathLength(n),y=>(0,kp.getQuadraticArcLength)([o.start.x,s[0],s[2]],[o.start.y,s[1],s[3]],y)),o.start.x,o.start.y,s[0],s[1],s[2],s[3]);case"A":var l=s[0],u=s[1],c=s[2],d=s[3],p=s[4],f=s[5],g=s[6];return p+=f*e/o.pathLength,jr.getPointOnEllipticalArc(l,u,c,d,p,g)}return null}static getPointOnLine(e,n,r,a,i,o,s){o===void 0&&(o=n),s===void 0&&(s=r);var l=(i-r)/(a-n+1e-8),u=Math.sqrt(e*e/(1+l*l));a<n&&(u*=-1);var c=l*u,d;if(a===n)d={x:o,y:s+c};else if((s-r)/(o-n+1e-8)===l)d={x:o+u,y:s+c};else{var p,f,g=this.getLineLength(n,r,a,i),y=(o-n)*(a-n)+(s-r)*(i-r);y=y/(g*g),p=n+y*(a-n),f=r+y*(i-r);var v=this.getLineLength(o,s,p,f),b=Math.sqrt(e*e-v*v);u=Math.sqrt(b*b/(1+l*l)),a<n&&(u*=-1),c=l*u,d={x:p+u,y:f+c}}return d}static getPointOnCubicBezier(e,n,r,a,i,o,s,l,u){function c(v){return v*v*v}function d(v){return 3*v*v*(1-v)}function p(v){return 3*v*(1-v)*(1-v)}function f(v){return(1-v)*(1-v)*(1-v)}var g=l*c(e)+o*d(e)+a*p(e)+n*f(e),y=u*c(e)+s*d(e)+i*p(e)+r*f(e);return{x:g,y}}static getPointOnQuadraticBezier(e,n,r,a,i,o,s){function l(f){return f*f}function u(f){return 2*f*(1-f)}function c(f){return(1-f)*(1-f)}var d=o*l(e)+a*u(e)+n*c(e),p=s*l(e)+i*u(e)+r*c(e);return{x:d,y:p}}static getPointOnEllipticalArc(e,n,r,a,i,o){var s=Math.cos(o),l=Math.sin(o),u={x:r*Math.cos(i),y:a*Math.sin(i)};return{x:e+(u.x*s-u.y*l),y:n+(u.x*l+u.y*s)}}static parsePathData(e){if(!e)return[];var n=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var a=0;a<r.length;a++)n=n.replace(new RegExp(r[a],"g"),"|"+r[a]);var i=n.split("|"),o=[],s=[],l=0,u=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,d;for(a=1;a<i.length;a++){var p=i[a],f=p.charAt(0);for(p=p.slice(1),s.length=0;d=c.exec(p);)s.push(d[0]);for(var g=[],y=0,v=s.length;y<v;y++){if(s[y]==="00"){g.push(0,0);continue}var b=parseFloat(s[y]);isNaN(b)?g.push(0):g.push(b)}for(;g.length>0&&!isNaN(g[0]);){var x="",w=[],S=l,C=u,I,_,T,M,P,L,j,B,K,X;switch(f){case"l":l+=g.shift(),u+=g.shift(),x="L",w.push(l,u);break;case"L":l=g.shift(),u=g.shift(),w.push(l,u);break;case"m":var Z=g.shift(),H=g.shift();if(l+=Z,u+=H,x="M",o.length>2&&o[o.length-1].command==="z"){for(var F=o.length-2;F>=0;F--)if(o[F].command==="M"){l=o[F].points[0]+Z,u=o[F].points[1]+H;break}}w.push(l,u),f="l";break;case"M":l=g.shift(),u=g.shift(),x="M",w.push(l,u),f="L";break;case"h":l+=g.shift(),x="L",w.push(l,u);break;case"H":l=g.shift(),x="L",w.push(l,u);break;case"v":u+=g.shift(),x="L",w.push(l,u);break;case"V":u=g.shift(),x="L",w.push(l,u);break;case"C":w.push(g.shift(),g.shift(),g.shift(),g.shift()),l=g.shift(),u=g.shift(),w.push(l,u);break;case"c":w.push(l+g.shift(),u+g.shift(),l+g.shift(),u+g.shift()),l+=g.shift(),u+=g.shift(),x="C",w.push(l,u);break;case"S":_=l,T=u,I=o[o.length-1],I.command==="C"&&(_=l+(l-I.points[2]),T=u+(u-I.points[3])),w.push(_,T,g.shift(),g.shift()),l=g.shift(),u=g.shift(),x="C",w.push(l,u);break;case"s":_=l,T=u,I=o[o.length-1],I.command==="C"&&(_=l+(l-I.points[2]),T=u+(u-I.points[3])),w.push(_,T,l+g.shift(),u+g.shift()),l+=g.shift(),u+=g.shift(),x="C",w.push(l,u);break;case"Q":w.push(g.shift(),g.shift()),l=g.shift(),u=g.shift(),w.push(l,u);break;case"q":w.push(l+g.shift(),u+g.shift()),l+=g.shift(),u+=g.shift(),x="Q",w.push(l,u);break;case"T":_=l,T=u,I=o[o.length-1],I.command==="Q"&&(_=l+(l-I.points[0]),T=u+(u-I.points[1])),l=g.shift(),u=g.shift(),x="Q",w.push(_,T,l,u);break;case"t":_=l,T=u,I=o[o.length-1],I.command==="Q"&&(_=l+(l-I.points[0]),T=u+(u-I.points[1])),l+=g.shift(),u+=g.shift(),x="Q",w.push(_,T,l,u);break;case"A":M=g.shift(),P=g.shift(),L=g.shift(),j=g.shift(),B=g.shift(),K=l,X=u,l=g.shift(),u=g.shift(),x="A",w=this.convertEndpointToCenterParameterization(K,X,l,u,j,B,M,P,L);break;case"a":M=g.shift(),P=g.shift(),L=g.shift(),j=g.shift(),B=g.shift(),K=l,X=u,l+=g.shift(),u+=g.shift(),x="A",w=this.convertEndpointToCenterParameterization(K,X,l,u,j,B,M,P,L);break}o.push({command:x||f,points:w,start:{x:S,y:C},pathLength:this.calcLength(S,C,x||f,w)})}(f==="z"||f==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,n,r,a){var i,o,s,l,u=jr;switch(r){case"L":return u.getLineLength(e,n,a[0],a[1]);case"C":return(0,kp.getCubicArcLength)([e,a[0],a[2],a[4]],[n,a[1],a[3],a[5]],1);case"Q":return(0,kp.getQuadraticArcLength)([e,a[0],a[2]],[n,a[1],a[3]],1);case"A":i=0;var c=a[4],d=a[5],p=a[4]+d,f=Math.PI/180;if(Math.abs(c-p)<f&&(f=Math.abs(c-p)),o=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],c,0),d<0)for(l=c-f;l>p;l-=f)s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(l=c+f;l<p;l+=f)s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],p,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),i}return 0}static convertEndpointToCenterParameterization(e,n,r,a,i,o,s,l,u){var c=u*(Math.PI/180),d=Math.cos(c)*(e-r)/2+Math.sin(c)*(n-a)/2,p=-1*Math.sin(c)*(e-r)/2+Math.cos(c)*(n-a)/2,f=d*d/(s*s)+p*p/(l*l);f>1&&(s*=Math.sqrt(f),l*=Math.sqrt(f));var g=Math.sqrt((s*s*(l*l)-s*s*(p*p)-l*l*(d*d))/(s*s*(p*p)+l*l*(d*d)));i===o&&(g*=-1),isNaN(g)&&(g=0);var y=g*s*p/l,v=g*-l*d/s,b=(e+r)/2+Math.cos(c)*y-Math.sin(c)*v,x=(n+a)/2+Math.sin(c)*y+Math.cos(c)*v,w=function(P){return Math.sqrt(P[0]*P[0]+P[1]*P[1])},S=function(P,L){return(P[0]*L[0]+P[1]*L[1])/(w(P)*w(L))},C=function(P,L){return(P[0]*L[1]<P[1]*L[0]?-1:1)*Math.acos(S(P,L))},I=C([1,0],[(d-y)/s,(p-v)/l]),_=[(d-y)/s,(p-v)/l],T=[(-1*d-y)/s,(-1*p-v)/l],M=C(_,T);return S(_,T)<=-1&&(M=Math.PI),S(_,T)>=1&&(M=0),o===0&&M>0&&(M=M-2*Math.PI),o===1&&M<0&&(M=M+2*Math.PI),[b,x,s,l,I,M,c,o]}}wp.Path=jr,jr.prototype.className="Path",jr.prototype._attrsAffectingSize=["data"],(0,Cte._registerNode)(jr),kte.Factory.addGetterSetter(jr,"data"),Object.defineProperty(db,"__esModule",{value:!0}),db.Arrow=void 0;const hb=Lt,Ite=em,WP=Qe,Ete=Dt,HP=wp;class Sc extends Ite.Line{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,r=this.points(),a=r,i=this.tension()!==0&&r.length>4;i&&(a=this.getTensionPoints());var o=this.pointerLength(),s=r.length,l,u;if(i){const p=[a[a.length-4],a[a.length-3],a[a.length-2],a[a.length-1],r[s-2],r[s-1]],f=HP.Path.calcLength(a[a.length-4],a[a.length-3],"C",p),g=HP.Path.getPointOnQuadraticBezier(Math.min(1,1-o/f),p[0],p[1],p[2],p[3],p[4],p[5]);l=r[s-2]-g.x,u=r[s-1]-g.y}else l=r[s-2]-r[s-4],u=r[s-1]-r[s-3];var c=(Math.atan2(u,l)+n)%n,d=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[s-2],r[s-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-o,d/2),e.lineTo(-o,-d/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),i?(l=(a[0]+a[2])/2-r[0],u=(a[1]+a[3])/2-r[1]):(l=r[2]-r[0],u=r[3]-r[1]),e.rotate((Math.atan2(-u,-l)+n)%n),e.moveTo(0,0),e.lineTo(-o,d/2),e.lineTo(-o,-d/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}db.Arrow=Sc,Sc.prototype.className="Arrow",(0,Ete._registerNode)(Sc),hb.Factory.addGetterSetter(Sc,"pointerLength",10,(0,WP.getNumberValidator)()),hb.Factory.addGetterSetter(Sc,"pointerWidth",10,(0,WP.getNumberValidator)()),hb.Factory.addGetterSetter(Sc,"pointerAtBeginning",!1),hb.Factory.addGetterSetter(Sc,"pointerAtEnding",!0);var fb={};Object.defineProperty(fb,"__esModule",{value:!0}),fb.Circle=void 0;const Nte=Lt,Tte=Ar,_te=Qe,Rte=Dt;class Sp extends Tte.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}fb.Circle=Sp,Sp.prototype._centroid=!0,Sp.prototype.className="Circle",Sp.prototype._attrsAffectingSize=["radius"],(0,Rte._registerNode)(Sp),Nte.Factory.addGetterSetter(Sp,"radius",0,(0,_te.getNumberValidator)());var mb={};Object.defineProperty(mb,"__esModule",{value:!0}),mb.Ellipse=void 0;const ZE=Lt,$te=Ar,qP=Qe,Ote=Dt;class su extends $te.Shape{_sceneFunc(e){var n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}mb.Ellipse=su,su.prototype.className="Ellipse",su.prototype._centroid=!0,su.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,Ote._registerNode)(su),ZE.Factory.addComponentsGetterSetter(su,"radius",["x","y"]),ZE.Factory.addGetterSetter(su,"radiusX",0,(0,qP.getNumberValidator)()),ZE.Factory.addGetterSetter(su,"radiusY",0,(0,qP.getNumberValidator)());var gb={};Object.defineProperty(gb,"__esModule",{value:!0}),gb.Image=void 0;const JE=nr,Cc=Lt,Mte=Ar,Pte=Dt,tm=Qe;let us=class bV extends Mte.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),a=this.cornerRadius(),i=this.attrs.image;let o;if(i){const s=this.attrs.cropWidth,l=this.attrs.cropHeight;s&&l?o=[i,this.cropX(),this.cropY(),s,l,0,0,n,r]:o=[i,0,0,n,r]}(this.hasFill()||this.hasStroke()||a)&&(e.beginPath(),a?JE.Util.drawRoundedRectPath(e,n,r,a):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),i&&(a&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){var n=this.width(),r=this.height(),a=this.cornerRadius();e.beginPath(),a?JE.Util.drawRoundedRectPath(e,n,r,a):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){var a=JE.Util.createImageElement();a.onload=function(){var i=new bV({image:a});n(i)},a.onerror=r,a.crossOrigin="Anonymous",a.src=e}};gb.Image=us,us.prototype.className="Image",(0,Pte._registerNode)(us),Cc.Factory.addGetterSetter(us,"cornerRadius",0,(0,tm.getNumberOrArrayOfNumbersValidator)(4)),Cc.Factory.addGetterSetter(us,"image"),Cc.Factory.addComponentsGetterSetter(us,"crop",["x","y","width","height"]),Cc.Factory.addGetterSetter(us,"cropX",0,(0,tm.getNumberValidator)()),Cc.Factory.addGetterSetter(us,"cropY",0,(0,tm.getNumberValidator)()),Cc.Factory.addGetterSetter(us,"cropWidth",0,(0,tm.getNumberValidator)()),Cc.Factory.addGetterSetter(us,"cropHeight",0,(0,tm.getNumberValidator)());var Cp={};Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.Tag=Cp.Label=void 0;const yb=Lt,Ate=Ar,Dte=vp,e3=Qe,KP=Dt;var XP=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Lte="Change.konva",Fte="none",t3="up",n3="right",r3="down",a3="left",Bte=XP.length;class i3 extends Dte.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,r,a=function(){n._sync()};for(r=0;r<Bte;r++)e.on(XP[r]+Lte,a)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),r,a,i,o,s,l,u;if(e&&n){switch(r=e.width(),a=e.height(),i=n.pointerDirection(),o=n.pointerWidth(),u=n.pointerHeight(),s=0,l=0,i){case t3:s=r/2,l=-1*u;break;case n3:s=r+o,l=a/2;break;case r3:s=r/2,l=a+u;break;case a3:s=-1*o,l=a/2;break}n.setAttrs({x:-1*s,y:-1*l,width:r,height:a}),e.setAttrs({x:-1*s,y:-1*l})}}}Cp.Label=i3,i3.prototype.className="Label",(0,KP._registerNode)(i3);class Ic extends Ate.Shape{_sceneFunc(e){var n=this.width(),r=this.height(),a=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),s=this.cornerRadius();let l=0,u=0,c=0,d=0;typeof s=="number"?l=u=c=d=Math.min(s,n/2,r/2):(l=Math.min(s[0]||0,n/2,r/2),u=Math.min(s[1]||0,n/2,r/2),d=Math.min(s[2]||0,n/2,r/2),c=Math.min(s[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(l,0),a===t3&&(e.lineTo((n-i)/2,0),e.lineTo(n/2,-1*o),e.lineTo((n+i)/2,0)),e.lineTo(n-u,0),e.arc(n-u,u,u,Math.PI*3/2,0,!1),a===n3&&(e.lineTo(n,(r-o)/2),e.lineTo(n+i,r/2),e.lineTo(n,(r+o)/2)),e.lineTo(n,r-d),e.arc(n-d,r-d,d,0,Math.PI/2,!1),a===r3&&(e.lineTo((n+i)/2,r),e.lineTo(n/2,r+o),e.lineTo((n-i)/2,r)),e.lineTo(c,r),e.arc(c,r-c,c,Math.PI/2,Math.PI,!1),a===a3&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*i,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,r=this.pointerWidth(),a=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),s=this.height();return i===t3?(n-=a,s+=a):i===r3?s+=a:i===a3?(e-=r*1.5,o+=r):i===n3&&(o+=r*1.5),{x:e,y:n,width:o,height:s}}}Cp.Tag=Ic,Ic.prototype.className="Tag",(0,KP._registerNode)(Ic),yb.Factory.addGetterSetter(Ic,"pointerDirection",Fte),yb.Factory.addGetterSetter(Ic,"pointerWidth",0,(0,e3.getNumberValidator)()),yb.Factory.addGetterSetter(Ic,"pointerHeight",0,(0,e3.getNumberValidator)()),yb.Factory.addGetterSetter(Ic,"cornerRadius",0,(0,e3.getNumberOrArrayOfNumbersValidator)(4));var nm={};Object.defineProperty(nm,"__esModule",{value:!0}),nm.Rect=void 0;const zte=Lt,jte=Ar,Vte=Dt,Ute=nr,Gte=Qe;class bb extends jte.Shape{_sceneFunc(e){var n=this.cornerRadius(),r=this.width(),a=this.height();e.beginPath(),n?Ute.Util.drawRoundedRectPath(e,r,a,n):e.rect(0,0,r,a),e.closePath(),e.fillStrokeShape(this)}}nm.Rect=bb,bb.prototype.className="Rect",(0,Vte._registerNode)(bb),zte.Factory.addGetterSetter(bb,"cornerRadius",0,(0,Gte.getNumberOrArrayOfNumbersValidator)(4));var vb={};Object.defineProperty(vb,"__esModule",{value:!0}),vb.RegularPolygon=void 0;const YP=Lt,Wte=Ar,QP=Qe,Hte=Dt;class Ec extends Wte.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(var a=0;a<e;a++)r.push({x:n*Math.sin(a*2*Math.PI/e),y:-1*n*Math.cos(a*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();var n=e[0].x,r=e[0].y,a=e[0].x,i=e[0].y;return e.forEach(o=>{n=Math.min(n,o.x),r=Math.max(r,o.x),a=Math.min(a,o.y),i=Math.max(i,o.y)}),{x:n,y:a,width:r-n,height:i-a}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}vb.RegularPolygon=Ec,Ec.prototype.className="RegularPolygon",Ec.prototype._centroid=!0,Ec.prototype._attrsAffectingSize=["radius"],(0,Hte._registerNode)(Ec),YP.Factory.addGetterSetter(Ec,"radius",0,(0,QP.getNumberValidator)()),YP.Factory.addGetterSetter(Ec,"sides",0,(0,QP.getNumberValidator)());var xb={};Object.defineProperty(xb,"__esModule",{value:!0}),xb.Ring=void 0;const ZP=Lt,qte=Ar,JP=Qe,Kte=Dt;var eA=Math.PI*2;class Nc extends qte.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,eA,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),eA,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}xb.Ring=Nc,Nc.prototype.className="Ring",Nc.prototype._centroid=!0,Nc.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Kte._registerNode)(Nc),ZP.Factory.addGetterSetter(Nc,"innerRadius",0,(0,JP.getNumberValidator)()),ZP.Factory.addGetterSetter(Nc,"outerRadius",0,(0,JP.getNumberValidator)());var wb={};Object.defineProperty(wb,"__esModule",{value:!0}),wb.Sprite=void 0;const Tc=Lt,Xte=Ar,Yte=xp,tA=Qe,Qte=Dt;class cs extends Xte.Shape{constructor(e){super(e),this._updated=!0,this.anim=new Yte.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),r=this.frameIndex(),a=r*4,i=this.animations()[n],o=this.frameOffsets(),s=i[a+0],l=i[a+1],u=i[a+2],c=i[a+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,u,c),e.closePath(),e.fillStrokeShape(this)),d)if(o){var p=o[n],f=r*2;e.drawImage(d,s,l,u,c,p[f+0],p[f+1],u,c)}else e.drawImage(d,s,l,u,c,0,0,u,c)}_hitFunc(e){var n=this.animation(),r=this.frameIndex(),a=r*4,i=this.animations()[n],o=this.frameOffsets(),s=i[a+2],l=i[a+3];if(e.beginPath(),o){var u=o[n],c=r*2;e.rect(u[c+0],u[c+1],s,l)}else e.rect(0,0,s,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),r=this.animations(),a=r[n],i=a.length/4;e<i-1?this.frameIndex(e+1):this.frameIndex(0)}}wb.Sprite=cs,cs.prototype.className="Sprite",(0,Qte._registerNode)(cs),Tc.Factory.addGetterSetter(cs,"animation"),Tc.Factory.addGetterSetter(cs,"animations"),Tc.Factory.addGetterSetter(cs,"frameOffsets"),Tc.Factory.addGetterSetter(cs,"image"),Tc.Factory.addGetterSetter(cs,"frameIndex",0,(0,tA.getNumberValidator)()),Tc.Factory.addGetterSetter(cs,"frameRate",17,(0,tA.getNumberValidator)()),Tc.Factory.backCompat(cs,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var kb={};Object.defineProperty(kb,"__esModule",{value:!0}),kb.Star=void 0;const o3=Lt,Zte=Ar,s3=Qe,Jte=Dt;class lu extends Zte.Shape{_sceneFunc(e){var n=this.innerRadius(),r=this.outerRadius(),a=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var i=1;i<a*2;i++){var o=i%2===0?r:n,s=o*Math.sin(i*Math.PI/a),l=-1*o*Math.cos(i*Math.PI/a);e.lineTo(s,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}kb.Star=lu,lu.prototype.className="Star",lu.prototype._centroid=!0,lu.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Jte._registerNode)(lu),o3.Factory.addGetterSetter(lu,"numPoints",5,(0,s3.getNumberValidator)()),o3.Factory.addGetterSetter(lu,"innerRadius",0,(0,s3.getNumberValidator)()),o3.Factory.addGetterSetter(lu,"outerRadius",0,(0,s3.getNumberValidator)());var _c={};Object.defineProperty(_c,"__esModule",{value:!0}),_c.Text=_c.stringToArray=void 0;const l3=nr,Ra=Lt,ene=Ar,uu=Qe,tne=Dt;function nA(t){return Array.from(t)}_c.stringToArray=nA;var Ip="auto",nne="center",rA="inherit",rm="justify",rne="Change.konva",ane="2d",aA="-",iA="left",ine="text",one="Text",sne="top",lne="bottom",oA="middle",sA="normal",une="px ",Sb=" ",cne="right",lA="rtl",dne="word",pne="char",uA="none",u3="\u2026",cA=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],hne=cA.length;function fne(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}var c3;function d3(){return c3||(c3=l3.Util.createCanvasElement().getContext(ane),c3)}function mne(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function gne(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function yne(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class cr extends ene.Shape{constructor(e){super(yne(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<hne;n++)this.on(cA[n]+rne,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,r=n.length;if(this.text()){var a=this.padding(),i=this.fontSize(),o=this.lineHeight()*i,s=this.verticalAlign(),l=this.direction(),u=0,c=this.align(),d=this.getWidth(),p=this.letterSpacing(),f=this.fill(),g=this.textDecoration(),y=g.indexOf("underline")!==-1,v=g.indexOf("line-through")!==-1,b;l=l===rA?e.direction:l;var x=0,x=o/2,w=0,S=0;for(l===lA&&e.setAttr("direction",l),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",oA),e.setAttr("textAlign",iA),s===oA?u=(this.getHeight()-r*o-a*2)/2:s===lne&&(u=this.getHeight()-r*o-a*2),e.translate(a,u+a),b=0;b<r;b++){var w=0,S=0,C=n[b],I=C.text,_=C.width,T=C.lastInParagraph,M,P,L;if(e.save(),c===cne?w+=d-_-a*2:c===nne&&(w+=(d-_-a*2)/2),y){e.save(),e.beginPath(),e.moveTo(w,x+S+Math.round(i/2)),M=I.split(" ").length-1,P=M===0,L=c===rm&&!T?d-a*2:_,e.lineTo(w+Math.round(L),x+S+Math.round(i/2)),e.lineWidth=i/15;const H=this._getLinearGradient();e.strokeStyle=H||f,e.stroke(),e.restore()}if(v){e.save(),e.beginPath(),e.moveTo(w,x+S),M=I.split(" ").length-1,P=M===0,L=c===rm&&T&&!P?d-a*2:_,e.lineTo(w+Math.round(L),x+S),e.lineWidth=i/15;const H=this._getLinearGradient();e.strokeStyle=H||f,e.stroke(),e.restore()}if(l!==lA&&(p!==0||c===rm)){M=I.split(" ").length-1;for(var j=nA(I),B=0;B<j.length;B++){var K=j[B];K===" "&&!T&&c===rm&&(w+=(d-a*2-_)/M),this._partialTextX=w,this._partialTextY=x+S,this._partialText=K,e.fillStrokeShape(this),w+=this.measureSize(K).width+p}}else p!==0&&e.setAttr("letterSpacing",`${p}px`),this._partialTextX=w,this._partialTextY=x+S,this._partialText=I,e.fillStrokeShape(this);e.restore(),r>1&&(x+=o)}}}_hitFunc(e){var n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=l3.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(ine,n),this}getWidth(){var e=this.attrs.width===Ip||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Ip||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return l3.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=d3(),r=this.fontSize(),a;return n.save(),n.font=this._getContextFont(),a=n.measureText(e),n.restore(),{width:a.width,height:r}}_getContextFont(){return this.fontStyle()+Sb+this.fontVariant()+Sb+(this.fontSize()+une)+fne(this.fontFamily())}_addTextLine(e){this.align()===rm&&(e=e.trim());var n=this._getTextWidth(e);return this.textArr.push({text:e,width:n,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),r=e.length;return d3().measureText(e).width+(r?n*(r-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),r=0,a=this.lineHeight()*n,i=this.attrs.width,o=this.attrs.height,s=i!==Ip&&i!==void 0,l=o!==Ip&&o!==void 0,u=this.padding(),c=i-u*2,d=o-u*2,p=0,f=this.wrap(),g=f!==uA,y=f!==pne&&g,v=this.ellipsis();this.textArr=[],d3().font=this._getContextFont();for(var b=v?this._getTextWidth(u3):0,x=0,w=e.length;x<w;++x){var S=e[x],C=this._getTextWidth(S);if(s&&C>c)for(;S.length>0;){for(var I=0,_=S.length,T="",M=0;I<_;){var P=I+_>>>1,L=S.slice(0,P+1),j=this._getTextWidth(L)+b;j<=c?(I=P+1,T=L,M=j):_=P}if(T){if(y){var B,K=S[T.length],X=K===Sb||K===aA;X&&M<=c?B=T.length:B=Math.max(T.lastIndexOf(Sb),T.lastIndexOf(aA))+1,B>0&&(I=B,T=T.slice(0,I),M=this._getTextWidth(T))}T=T.trimRight(),this._addTextLine(T),r=Math.max(r,M),p+=a;var Z=this._shouldHandleEllipsis(p);if(Z){this._tryToAddEllipsisToLastLine();break}if(S=S.slice(I),S=S.trimLeft(),S.length>0&&(C=this._getTextWidth(S),C<=c)){this._addTextLine(S),p+=a,r=Math.max(r,C);break}}else break}else this._addTextLine(S),p+=a,r=Math.max(r,C),this._shouldHandleEllipsis(p)&&x<w-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&p+a>d)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){var n=+this.fontSize(),r=this.lineHeight()*n,a=this.attrs.height,i=a!==Ip&&a!==void 0,o=this.padding(),s=a-o*2,l=this.wrap(),u=l!==uA;return!u||i&&e+r>s}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==Ip&&e!==void 0,r=this.padding(),a=e-r*2,i=this.ellipsis(),o=this.textArr[this.textArr.length-1];if(!(!o||!i)){if(n){var s=this._getTextWidth(o.text+u3)<a;s||(o.text=o.text.slice(0,o.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+u3)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}}_c.Text=cr,cr.prototype._fillFunc=mne,cr.prototype._strokeFunc=gne,cr.prototype.className=one,cr.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,tne._registerNode)(cr),Ra.Factory.overWriteSetter(cr,"width",(0,uu.getNumberOrAutoValidator)()),Ra.Factory.overWriteSetter(cr,"height",(0,uu.getNumberOrAutoValidator)()),Ra.Factory.addGetterSetter(cr,"direction",rA),Ra.Factory.addGetterSetter(cr,"fontFamily","Arial"),Ra.Factory.addGetterSetter(cr,"fontSize",12,(0,uu.getNumberValidator)()),Ra.Factory.addGetterSetter(cr,"fontStyle",sA),Ra.Factory.addGetterSetter(cr,"fontVariant",sA),Ra.Factory.addGetterSetter(cr,"padding",0,(0,uu.getNumberValidator)()),Ra.Factory.addGetterSetter(cr,"align",iA),Ra.Factory.addGetterSetter(cr,"verticalAlign",sne),Ra.Factory.addGetterSetter(cr,"lineHeight",1,(0,uu.getNumberValidator)()),Ra.Factory.addGetterSetter(cr,"wrap",dne),Ra.Factory.addGetterSetter(cr,"ellipsis",!1,(0,uu.getBooleanValidator)()),Ra.Factory.addGetterSetter(cr,"letterSpacing",0,(0,uu.getNumberValidator)()),Ra.Factory.addGetterSetter(cr,"text","",(0,uu.getStringValidator)()),Ra.Factory.addGetterSetter(cr,"textDecoration","");var Cb={};Object.defineProperty(Cb,"__esModule",{value:!0}),Cb.TextPath=void 0;const p3=nr,Do=Lt,bne=Ar,am=wp,h3=_c,dA=Qe,vne=Dt;var xne="",pA="normal";function hA(t){t.fillText(this.partialText,0,0)}function fA(t){t.strokeText(this.partialText,0,0)}class Dr extends bne.Shape{constructor(e){super(e),this.dummyCanvas=p3.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return am.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:am.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=am.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),r=this.fill(),a=this.fontSize(),i=this.glyphInfo;n==="underline"&&e.beginPath();for(var o=0;o<i.length;o++){e.save();var s=i[o].p0;e.translate(s.x,s.y),e.rotate(i[o].rotation),this.partialText=i[o].text,e.fillStrokeShape(this),n==="underline"&&(o===0&&e.moveTo(0,a/2+1),e.lineTo(a,a/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=a/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var r=n[0].p0;e.moveTo(r.x,r.y)}for(var a=0;a<n.length;a++){var i=n[a].p1;e.lineTo(i.x,i.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return p3.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return h3.Text.prototype.setText.call(this,e)}_getContextFont(){return h3.Text.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,r=n.getContext("2d");r.save(),r.font=this._getContextFont();var a=r.measureText(e);return r.restore(),{width:a.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),a=this.align(),i=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let s=0;a==="center"&&(s=Math.max(0,this.pathLength/2-o/2)),a==="right"&&(s=Math.max(0,this.pathLength-o));const l=(0,h3.stringToArray)(this.text());let u=s;for(var c=0;c<l.length;c++){const d=this._getPointAtLength(u);if(!d)return;let p=this._getTextSize(l[c]).width+r;if(l[c]===" "&&a==="justify"){const x=this.text().split(" ").length-1;p+=(this.pathLength-o)/x}const f=this._getPointAtLength(u+p);if(!f)return;const g=am.Path.getLineLength(d.x,d.y,f.x,f.y);let y=0;if(i)try{y=i(l[c-1],l[c])*this.fontSize()}catch{y=0}d.x+=y,f.x+=y,this.textWidth+=y;const v=am.Path.getPointOnLine(y+g/2,d.x,d.y,f.x,f.y),b=Math.atan2(f.y-d.y,f.x-d.x);this.glyphInfo.push({transposeX:v.x,transposeY:v.y,text:l[c],rotation:b,p0:d,p1:f}),u+=p}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(c){e.push(c.p0.x),e.push(c.p0.y),e.push(c.p1.x),e.push(c.p1.y)});for(var n=e[0]||0,r=e[0]||0,a=e[1]||0,i=e[1]||0,o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),a=Math.min(a,s),i=Math.max(i,s);var u=this.fontSize();return{x:n-u/2,y:a-u/2,width:r-n+u,height:i-a+u}}destroy(){return p3.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Cb.TextPath=Dr,Dr.prototype._fillFunc=hA,Dr.prototype._strokeFunc=fA,Dr.prototype._fillFuncHit=hA,Dr.prototype._strokeFuncHit=fA,Dr.prototype.className="TextPath",Dr.prototype._attrsAffectingSize=["text","fontSize","data"],(0,vne._registerNode)(Dr),Do.Factory.addGetterSetter(Dr,"data"),Do.Factory.addGetterSetter(Dr,"fontFamily","Arial"),Do.Factory.addGetterSetter(Dr,"fontSize",12,(0,dA.getNumberValidator)()),Do.Factory.addGetterSetter(Dr,"fontStyle",pA),Do.Factory.addGetterSetter(Dr,"align","left"),Do.Factory.addGetterSetter(Dr,"letterSpacing",0,(0,dA.getNumberValidator)()),Do.Factory.addGetterSetter(Dr,"textBaseline","middle"),Do.Factory.addGetterSetter(Dr,"fontVariant",pA),Do.Factory.addGetterSetter(Dr,"text",xne),Do.Factory.addGetterSetter(Dr,"textDecoration",null),Do.Factory.addGetterSetter(Dr,"kerningFunc",null);var Ib={};Object.defineProperty(Ib,"__esModule",{value:!0}),Ib.Transformer=void 0;const bn=nr,sn=Lt,mA=Wn,wne=Ar,kne=nm,gA=vp,Lo=Dt,cu=Qe,Sne=Dt;var yA="tr-konva",Cne=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${yA}`).join(" "),bA="nodesRect",Ine=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Ene={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Nne="ontouchstart"in Lo.Konva._global;function Tne(t,e,n){if(t==="rotater")return n;e+=bn.Util.degToRad(Ene[t]||0);var r=(bn.Util.radToDeg(e)%360+360)%360;return bn.Util._inRange(r,315+22.5,360)||bn.Util._inRange(r,0,22.5)?"ns-resize":bn.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":bn.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":bn.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":bn.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":bn.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":bn.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":bn.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(bn.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}var Eb=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],vA=1e8;function _ne(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function xA(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),a=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:r,y:a}}function Rne(t,e){const n=_ne(t);return xA(t,e,n)}function $ne(t,e,n){let r=e;for(let a=0;a<t.length;a++){const i=Lo.Konva.getAngle(t[a]),o=Math.abs(i-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<n&&(r=i)}return r}let Kt=class extends gA.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Cne,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return bn.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return yA+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(r=>r.isAncestorOf(this)?(bn.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const a=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},i=r._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");r.on(i,a),r.on(Ine.map(o=>o+`.${this._getEventNamespace()}`).join(" "),a),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,a),this._proxyDrag(r)}),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,n=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(n,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!e)return;const r=t.getAbsolutePosition(),a=r.x-e.x,i=r.y-e.y;this.nodes().forEach(o=>{if(o===t||o.isDragging())return;const s=o.getAbsolutePosition();o.setAbsolutePosition({x:s.x+a,y:s.y+i}),o.startDrag(n)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(bA),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(bA,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),n){var r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=t.getAbsoluteScale(n),i=t.getAbsolutePosition(n),o=r.x*a.x-t.offsetX()*a.x,s=r.y*a.y-t.offsetY()*a.y;const l=(Lo.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),u={x:i.x+o*Math.cos(l)+s*Math.sin(-l),y:i.y+s*Math.cos(l)+o*Math.sin(l),width:r.width*a.x,height:r.height*a.y,rotation:l};return xA(u,-Lo.Konva.getAngle(e),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-vA,y:-vA,width:0,height:0,rotation:0};const e=[];this.nodes().map(l=>{const u=l.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var c=[{x:u.x,y:u.y},{x:u.x+u.width,y:u.y},{x:u.x+u.width,y:u.y+u.height},{x:u.x,y:u.y+u.height}],d=l.getAbsoluteTransform();c.forEach(function(p){var f=d.point(p);e.push(f)})});const n=new bn.Transform;n.rotate(-Lo.Konva.getAngle(this.rotation()));var r=1/0,a=1/0,i=-1/0,o=-1/0;e.forEach(function(l){var u=n.point(l);r===void 0&&(r=i=u.x,a=o=u.y),r=Math.min(r,u.x),a=Math.min(a,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}),n.invert();const s=n.point({x:r,y:a});return{x:s.x,y:s.y,width:i-r,height:o-a,rotation:Lo.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Eb.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){var e=new kne.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Nne?10:"auto"}),n=this;e.on("mousedown touchstart",function(r){n._handleMouseDown(r)}),e.on("dragstart",r=>{e.stopDrag(),r.cancelBubble=!0}),e.on("dragend",r=>{r.cancelBubble=!0}),e.on("mouseenter",()=>{var r=Lo.Konva.getAngle(this.rotation()),a=this.rotateAnchorCursor(),i=Tne(t,r,a);e.getStage().content&&(e.getStage().content.style.cursor=i),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){var t=new wne.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(e,n){var r=n.getParent(),a=r.padding();e.beginPath(),e.rect(-a,-a,n.width()+a*2,n.height()+a*2),e.moveTo(n.width()/2,-a),r.rotateEnabled()&&r.rotateLineVisible()&&e.lineTo(n.width()/2,-r.rotateAnchorOffset()*bn.Util._sign(n.height())-a),e.fillStrokeShape(n)},hitFunc:(e,n)=>{if(this.shouldOverdrawWholeArea()){var r=this.padding();e.beginPath(),e.rect(-r,-r,n.width()+r*2,n.height()+r*2),e.fillStrokeShape(n)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,r=e.height,a=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/a),this.cos=Math.abs(n/a),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var i=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-i.x,y:o.y-i.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(s=>{s._fire("transformstart",{evt:t.evt,target:s})})}_handleMouseMove(t){var e,n,r,a=this.findOne("."+this._movingAnchorName),i=a.getStage();i.setPointersPositions(t);const o=i.getPointerPosition();let s={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const l=a.getAbsolutePosition();this.anchorDragBoundFunc()&&(s=this.anchorDragBoundFunc()(l,s,t)),a.setAbsolutePosition(s);const u=a.getAbsolutePosition();if(!(l.x===u.x&&l.y===u.y)){if(this._movingAnchorName==="rotater"){var c=this._getNodeRect();e=a.x()-c.width/2,n=-a.y()+c.height/2;let j=Math.atan2(-n,e)+Math.PI/2;c.height<0&&(j-=Math.PI);var d=Lo.Konva.getAngle(this.rotation());const B=d+j,K=Lo.Konva.getAngle(this.rotationSnapTolerance()),X=$ne(this.rotationSnaps(),B,K)-c.rotation,Z=Rne(c,X);this._fitNodesInto(Z,t);return}var p=this.shiftBehavior(),f;p==="inverted"?f=this.keepRatio()&&!t.shiftKey:p==="none"?f=this.keepRatio():f=this.keepRatio()||t.shiftKey;var x=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(g.x-a.x(),2)+Math.pow(g.y-a.y(),2));var y=this.findOne(".top-left").x()>g.x?-1:1,v=this.findOne(".top-left").y()>g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".top-left").x(g.x-e),this.findOne(".top-left").y(g.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(a.y());else if(this._movingAnchorName==="top-right"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(a.x()-g.x,2)+Math.pow(g.y-a.y(),2));var y=this.findOne(".top-right").x()<g.x?-1:1,v=this.findOne(".top-right").y()>g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".top-right").x(g.x+e),this.findOne(".top-right").y(g.y-n)}var b=a.position();this.findOne(".top-left").y(b.y),this.findOne(".bottom-right").x(b.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(a.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(a.x());else if(this._movingAnchorName==="bottom-left"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(g.x-a.x(),2)+Math.pow(a.y()-g.y,2));var y=g.x<a.x()?-1:1,v=a.y()<g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,a.x(g.x-e),a.y(g.y+n)}b=a.position(),this.findOne(".top-left").x(b.x),this.findOne(".bottom-right").y(b.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(a.y());else if(this._movingAnchorName==="bottom-right"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(a.x()-g.x,2)+Math.pow(a.y()-g.y,2));var y=this.findOne(".bottom-right").x()<g.x?-1:1,v=this.findOne(".bottom-right").y()<g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".bottom-right").x(g.x+e),this.findOne(".bottom-right").y(g.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var x=this.centeredScaling()||t.altKey;if(x){var w=this.findOne(".top-left"),S=this.findOne(".bottom-right"),C=w.x(),I=w.y(),_=this.getWidth()-S.x(),T=this.getHeight()-S.y();S.move({x:-C,y:-I}),w.move({x:_,y:T})}var M=this.findOne(".top-left").getAbsolutePosition();e=M.x,n=M.y;var P=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),L=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:P,height:L,rotation:Lo.Konva.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach(n=>{n._fire("transformend",{evt:t,target:n})}),this._movingAnchorName=null}}_fitNodesInto(t,e){var n=this._getNodeRect();const r=1;if(bn.Util._inRange(t.width,-this.padding()*2-r,r)){this.update();return}if(bn.Util._inRange(t.height,-this.padding()*2-r,r)){this.update();return}var a=new bn.Transform;if(a.rotate(Lo.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const d=a.point({x:-this.padding()*2,y:0});t.x+=d.x,t.y+=d.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const d=a.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const d=a.point({x:0,y:-this.padding()*2});t.x+=d.x,t.y+=d.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const d=a.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const d=this.boundBoxFunc()(n,t);d?t=d:bn.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const i=1e7,o=new bn.Transform;o.translate(n.x,n.y),o.rotate(n.rotation),o.scale(n.width/i,n.height/i);const s=new bn.Transform,l=t.width/i,u=t.height/i;this.flipEnabled()===!1?(s.translate(t.x,t.y),s.rotate(t.rotation),s.translate(t.width<0?t.width:0,t.height<0?t.height:0),s.scale(Math.abs(l),Math.abs(u))):(s.translate(t.x,t.y),s.rotate(t.rotation),s.scale(l,u));const c=s.multiply(o.invert());this._nodes.forEach(d=>{var p;const f=d.getParent().getAbsoluteTransform(),g=d.getTransform().copy();g.translate(d.offsetX(),d.offsetY());const y=new bn.Transform;y.multiply(f.copy().invert()).multiply(c).multiply(f).multiply(g);const v=y.decompose();d.setAttrs(v),this._fire("transform",{evt:e,target:d}),d._fire("transform",{evt:e,target:d}),(p=d.getLayer())===null||p===void 0||p.batchDraw()}),this.rotation(bn.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t,e=this._getNodeRect();this.rotation(bn.Util._getRotation(e.rotation));var n=e.width,r=e.height,a=this.enabledAnchors(),i=this.resizeEnabled(),o=this.padding(),s=this.anchorSize();const l=this.find("._anchor");l.forEach(c=>{c.setAttrs({width:s,height:s,offsetX:s/2,offsetY:s/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:s/2+o,offsetY:s/2+o,visible:i&&a.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:s/2+o,visible:i&&a.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:s/2-o,offsetY:s/2+o,visible:i&&a.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:s/2+o,visible:i&&a.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:r/2,offsetX:s/2-o,visible:i&&a.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:s/2+o,offsetY:s/2-o,visible:i&&a.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:r,offsetY:s/2-o,visible:i&&a.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:r,offsetX:s/2-o,offsetY:s/2-o,visible:i&&a.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*bn.Util._sign(r)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const u=this.anchorStyleFunc();u&&l.forEach(c=>{u(c)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),gA.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return mA.Node.prototype.toObject.call(this)}clone(t){var e=mA.Node.prototype.clone.call(this,t);return e}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Ib.Transformer=Kt;function One(t){return t instanceof Array||bn.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){Eb.indexOf(e)===-1&&bn.Util.warn("Unknown anchor name: "+e+". Available names are: "+Eb.join(", "))}),t||[]}Kt.prototype.className="Transformer",(0,Sne._registerNode)(Kt),sn.Factory.addGetterSetter(Kt,"enabledAnchors",Eb,One),sn.Factory.addGetterSetter(Kt,"flipEnabled",!0,(0,cu.getBooleanValidator)()),sn.Factory.addGetterSetter(Kt,"resizeEnabled",!0),sn.Factory.addGetterSetter(Kt,"anchorSize",10,(0,cu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"rotateEnabled",!0),sn.Factory.addGetterSetter(Kt,"rotateLineVisible",!0),sn.Factory.addGetterSetter(Kt,"rotationSnaps",[]),sn.Factory.addGetterSetter(Kt,"rotateAnchorOffset",50,(0,cu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"rotateAnchorCursor","crosshair"),sn.Factory.addGetterSetter(Kt,"rotationSnapTolerance",5,(0,cu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"borderEnabled",!0),sn.Factory.addGetterSetter(Kt,"anchorStroke","rgb(0, 161, 255)"),sn.Factory.addGetterSetter(Kt,"anchorStrokeWidth",1,(0,cu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"anchorFill","white"),sn.Factory.addGetterSetter(Kt,"anchorCornerRadius",0,(0,cu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"borderStroke","rgb(0, 161, 255)"),sn.Factory.addGetterSetter(Kt,"borderStrokeWidth",1,(0,cu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"borderDash"),sn.Factory.addGetterSetter(Kt,"keepRatio",!0),sn.Factory.addGetterSetter(Kt,"shiftBehavior","default"),sn.Factory.addGetterSetter(Kt,"centeredScaling",!1),sn.Factory.addGetterSetter(Kt,"ignoreStroke",!1),sn.Factory.addGetterSetter(Kt,"padding",0,(0,cu.getNumberValidator)()),sn.Factory.addGetterSetter(Kt,"node"),sn.Factory.addGetterSetter(Kt,"nodes"),sn.Factory.addGetterSetter(Kt,"boundBoxFunc"),sn.Factory.addGetterSetter(Kt,"anchorDragBoundFunc"),sn.Factory.addGetterSetter(Kt,"anchorStyleFunc"),sn.Factory.addGetterSetter(Kt,"shouldOverdrawWholeArea",!1),sn.Factory.addGetterSetter(Kt,"useSingleNodeRotation",!0),sn.Factory.backCompat(Kt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Nb={};Object.defineProperty(Nb,"__esModule",{value:!0}),Nb.Wedge=void 0;const Tb=Lt,Mne=Ar,Pne=Dt,wA=Qe,Ane=Dt;class tl extends Mne.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Pne.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Nb.Wedge=tl,tl.prototype.className="Wedge",tl.prototype._centroid=!0,tl.prototype._attrsAffectingSize=["radius"],(0,Ane._registerNode)(tl),Tb.Factory.addGetterSetter(tl,"radius",0,(0,wA.getNumberValidator)()),Tb.Factory.addGetterSetter(tl,"angle",0,(0,wA.getNumberValidator)()),Tb.Factory.addGetterSetter(tl,"clockwise",!1),Tb.Factory.backCompat(tl,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var _b={};Object.defineProperty(_b,"__esModule",{value:!0}),_b.Blur=void 0;const kA=Lt,Dne=Wn,Lne=Qe;function SA(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var Fne=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Bne=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function zne(t,e){var n=t.data,r=t.width,a=t.height,i,o,s,l,u,c,d,p,f,g,y,v,b,x,w,S,C,I,_,T,M,P,L,j,B=e+e+1,K=r-1,X=a-1,Z=e+1,H=Z*(Z+1)/2,F=new SA,Y=null,Q=F,ne=null,se=null,pe=Fne[e],de=Bne[e];for(s=1;s<B;s++)Q=Q.next=new SA,s===Z&&(Y=Q);for(Q.next=F,d=c=0,o=0;o<a;o++){for(S=C=I=_=p=f=g=y=0,v=Z*(T=n[c]),b=Z*(M=n[c+1]),x=Z*(P=n[c+2]),w=Z*(L=n[c+3]),p+=H*T,f+=H*M,g+=H*P,y+=H*L,Q=F,s=0;s<Z;s++)Q.r=T,Q.g=M,Q.b=P,Q.a=L,Q=Q.next;for(s=1;s<Z;s++)l=c+((K<s?K:s)<<2),p+=(Q.r=T=n[l])*(j=Z-s),f+=(Q.g=M=n[l+1])*j,g+=(Q.b=P=n[l+2])*j,y+=(Q.a=L=n[l+3])*j,S+=T,C+=M,I+=P,_+=L,Q=Q.next;for(ne=F,se=Y,i=0;i<r;i++)n[c+3]=L=y*pe>>de,L!==0?(L=255/L,n[c]=(p*pe>>de)*L,n[c+1]=(f*pe>>de)*L,n[c+2]=(g*pe>>de)*L):n[c]=n[c+1]=n[c+2]=0,p-=v,f-=b,g-=x,y-=w,v-=ne.r,b-=ne.g,x-=ne.b,w-=ne.a,l=d+((l=i+e+1)<K?l:K)<<2,S+=ne.r=n[l],C+=ne.g=n[l+1],I+=ne.b=n[l+2],_+=ne.a=n[l+3],p+=S,f+=C,g+=I,y+=_,ne=ne.next,v+=T=se.r,b+=M=se.g,x+=P=se.b,w+=L=se.a,S-=T,C-=M,I-=P,_-=L,se=se.next,c+=4;d+=r}for(i=0;i<r;i++){for(C=I=_=S=f=g=y=p=0,c=i<<2,v=Z*(T=n[c]),b=Z*(M=n[c+1]),x=Z*(P=n[c+2]),w=Z*(L=n[c+3]),p+=H*T,f+=H*M,g+=H*P,y+=H*L,Q=F,s=0;s<Z;s++)Q.r=T,Q.g=M,Q.b=P,Q.a=L,Q=Q.next;for(u=r,s=1;s<=e;s++)c=u+i<<2,p+=(Q.r=T=n[c])*(j=Z-s),f+=(Q.g=M=n[c+1])*j,g+=(Q.b=P=n[c+2])*j,y+=(Q.a=L=n[c+3])*j,S+=T,C+=M,I+=P,_+=L,Q=Q.next,s<X&&(u+=r);for(c=i,ne=F,se=Y,o=0;o<a;o++)l=c<<2,n[l+3]=L=y*pe>>de,L>0?(L=255/L,n[l]=(p*pe>>de)*L,n[l+1]=(f*pe>>de)*L,n[l+2]=(g*pe>>de)*L):n[l]=n[l+1]=n[l+2]=0,p-=v,f-=b,g-=x,y-=w,v-=ne.r,b-=ne.g,x-=ne.b,w-=ne.a,l=i+((l=o+Z)<X?l:X)*r<<2,p+=S+=ne.r=n[l],f+=C+=ne.g=n[l+1],g+=I+=ne.b=n[l+2],y+=_+=ne.a=n[l+3],ne=ne.next,v+=T=se.r,b+=M=se.g,x+=P=se.b,w+=L=se.a,S-=T,C-=M,I-=P,_-=L,se=se.next,c+=r}}const jne=function(t){var e=Math.round(this.blurRadius());e>0&&zne(t,e)};_b.Blur=jne,kA.Factory.addGetterSetter(Dne.Node,"blurRadius",0,(0,Lne.getNumberValidator)(),kA.Factory.afterSetFilter);var Rb={};Object.defineProperty(Rb,"__esModule",{value:!0}),Rb.Brighten=void 0;const CA=Lt,Vne=Wn,Une=Qe,Gne=function(t){var e=this.brightness()*255,n=t.data,r=n.length,a;for(a=0;a<r;a+=4)n[a]+=e,n[a+1]+=e,n[a+2]+=e};Rb.Brighten=Gne,CA.Factory.addGetterSetter(Vne.Node,"brightness",0,(0,Une.getNumberValidator)(),CA.Factory.afterSetFilter);var $b={};Object.defineProperty($b,"__esModule",{value:!0}),$b.Contrast=void 0;const IA=Lt,Wne=Wn,Hne=Qe,qne=function(t){var e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length,a=150,i=150,o=150,s;for(s=0;s<r;s+=4)a=n[s],i=n[s+1],o=n[s+2],a/=255,a-=.5,a*=e,a+=.5,a*=255,i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,a=a<0?0:a>255?255:a,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,n[s]=a,n[s+1]=i,n[s+2]=o};$b.Contrast=qne,IA.Factory.addGetterSetter(Wne.Node,"contrast",0,(0,Hne.getNumberValidator)(),IA.Factory.afterSetFilter);var Ob={};Object.defineProperty(Ob,"__esModule",{value:!0}),Ob.Emboss=void 0;const du=Lt,Mb=Wn,Kne=nr,EA=Qe,Xne=function(t){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),a=this.embossBlend(),i=0,o=0,s=t.data,l=t.width,u=t.height,c=l*4,d=u;switch(r){case"top-left":i=-1,o=-1;break;case"top":i=-1,o=0;break;case"top-right":i=-1,o=1;break;case"right":i=0,o=1;break;case"bottom-right":i=1,o=1;break;case"bottom":i=1,o=0;break;case"bottom-left":i=1,o=-1;break;case"left":i=0,o=-1;break;default:Kne.Util.error("Unknown emboss direction: "+r)}do{var p=(d-1)*c,f=i;d+f<1&&(f=0),d+f>u&&(f=0);var g=(d-1+f)*l*4,y=l;do{var v=p+(y-1)*4,b=o;y+b<1&&(b=0),y+b>l&&(b=0);var x=g+(y-1+b)*4,w=s[v]-s[x],S=s[v+1]-s[x+1],C=s[v+2]-s[x+2],I=w,_=I>0?I:-I,T=S>0?S:-S,M=C>0?C:-C;if(T>_&&(I=S),M>_&&(I=C),I*=e,a){var P=s[v]+I,L=s[v+1]+I,j=s[v+2]+I;s[v]=P>255?255:P<0?0:P,s[v+1]=L>255?255:L<0?0:L,s[v+2]=j>255?255:j<0?0:j}else{var B=n-I;B<0?B=0:B>255&&(B=255),s[v]=s[v+1]=s[v+2]=B}}while(--y)}while(--d)};Ob.Emboss=Xne,du.Factory.addGetterSetter(Mb.Node,"embossStrength",.5,(0,EA.getNumberValidator)(),du.Factory.afterSetFilter),du.Factory.addGetterSetter(Mb.Node,"embossWhiteLevel",.5,(0,EA.getNumberValidator)(),du.Factory.afterSetFilter),du.Factory.addGetterSetter(Mb.Node,"embossDirection","top-left",null,du.Factory.afterSetFilter),du.Factory.addGetterSetter(Mb.Node,"embossBlend",!1,null,du.Factory.afterSetFilter);var Pb={};Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.Enhance=void 0;const NA=Lt,Yne=Wn,Qne=Qe;function f3(t,e,n,r,a){var i=n-e,o=a-r,s;return i===0?r+o/2:o===0?r:(s=(t-e)/i,s=o*s+r,s)}const Zne=function(t){var e=t.data,n=e.length,r=e[0],a=r,i,o=e[1],s=o,l,u=e[2],c=u,d,p,f=this.enhance();if(f!==0){for(p=0;p<n;p+=4)i=e[p+0],i<r?r=i:i>a&&(a=i),l=e[p+1],l<o?o=l:l>s&&(s=l),d=e[p+2],d<u?u=d:d>c&&(c=d);a===r&&(a=255,r=0),s===o&&(s=255,o=0),c===u&&(c=255,u=0);var g,y,v,b,x,w,S,C,I;for(f>0?(y=a+f*(255-a),v=r-f*(r-0),x=s+f*(255-s),w=o-f*(o-0),C=c+f*(255-c),I=u-f*(u-0)):(g=(a+r)*.5,y=a+f*(a-g),v=r+f*(r-g),b=(s+o)*.5,x=s+f*(s-b),w=o+f*(o-b),S=(c+u)*.5,C=c+f*(c-S),I=u+f*(u-S)),p=0;p<n;p+=4)e[p+0]=f3(e[p+0],r,a,v,y),e[p+1]=f3(e[p+1],o,s,w,x),e[p+2]=f3(e[p+2],u,c,I,C)}};Pb.Enhance=Zne,NA.Factory.addGetterSetter(Yne.Node,"enhance",0,(0,Qne.getNumberValidator)(),NA.Factory.afterSetFilter);var Ab={};Object.defineProperty(Ab,"__esModule",{value:!0}),Ab.Grayscale=void 0;const Jne=function(t){var e=t.data,n=e.length,r,a;for(r=0;r<n;r+=4)a=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=a,e[r+1]=a,e[r+2]=a};Ab.Grayscale=Jne;var Db={};Object.defineProperty(Db,"__esModule",{value:!0}),Db.HSL=void 0;const Ep=Lt,m3=Wn,g3=Qe;Ep.Factory.addGetterSetter(m3.Node,"hue",0,(0,g3.getNumberValidator)(),Ep.Factory.afterSetFilter),Ep.Factory.addGetterSetter(m3.Node,"saturation",0,(0,g3.getNumberValidator)(),Ep.Factory.afterSetFilter),Ep.Factory.addGetterSetter(m3.Node,"luminance",0,(0,g3.getNumberValidator)(),Ep.Factory.afterSetFilter);const ere=function(t){var e=t.data,n=e.length,r=1,a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=this.luminance()*127,s,l=r*a*Math.cos(i*Math.PI/180),u=r*a*Math.sin(i*Math.PI/180),c=.299*r+.701*l+.167*u,d=.587*r-.587*l+.33*u,p=.114*r-.114*l-.497*u,f=.299*r-.299*l-.328*u,g=.587*r+.413*l+.035*u,y=.114*r-.114*l+.293*u,v=.299*r-.3*l+1.25*u,b=.587*r-.586*l-1.05*u,x=.114*r+.886*l-.2*u,w,S,C,I;for(s=0;s<n;s+=4)w=e[s+0],S=e[s+1],C=e[s+2],I=e[s+3],e[s+0]=c*w+d*S+p*C+o,e[s+1]=f*w+g*S+y*C+o,e[s+2]=v*w+b*S+x*C+o,e[s+3]=I};Db.HSL=ere;var Lb={};Object.defineProperty(Lb,"__esModule",{value:!0}),Lb.HSV=void 0;const Np=Lt,y3=Wn,b3=Qe,tre=function(t){var e=t.data,n=e.length,r=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o,s=r*a*Math.cos(i*Math.PI/180),l=r*a*Math.sin(i*Math.PI/180),u=.299*r+.701*s+.167*l,c=.587*r-.587*s+.33*l,d=.114*r-.114*s-.497*l,p=.299*r-.299*s-.328*l,f=.587*r+.413*s+.035*l,g=.114*r-.114*s+.293*l,y=.299*r-.3*s+1.25*l,v=.587*r-.586*s-1.05*l,b=.114*r+.886*s-.2*l,x,w,S,C;for(o=0;o<n;o+=4)x=e[o+0],w=e[o+1],S=e[o+2],C=e[o+3],e[o+0]=u*x+c*w+d*S,e[o+1]=p*x+f*w+g*S,e[o+2]=y*x+v*w+b*S,e[o+3]=C};Lb.HSV=tre,Np.Factory.addGetterSetter(y3.Node,"hue",0,(0,b3.getNumberValidator)(),Np.Factory.afterSetFilter),Np.Factory.addGetterSetter(y3.Node,"saturation",0,(0,b3.getNumberValidator)(),Np.Factory.afterSetFilter),Np.Factory.addGetterSetter(y3.Node,"value",0,(0,b3.getNumberValidator)(),Np.Factory.afterSetFilter);var Fb={};Object.defineProperty(Fb,"__esModule",{value:!0}),Fb.Invert=void 0;const nre=function(t){var e=t.data,n=e.length,r;for(r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};Fb.Invert=nre;var Bb={};Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.Kaleidoscope=void 0;const zb=Lt,TA=Wn,_A=nr,RA=Qe;var rre=function(t,e,n){var r=t.data,a=e.data,i=t.width,o=t.height,s=n.polarCenterX||i/2,l=n.polarCenterY||o/2,u,c,d,p=0,f=0,g=0,y=0,v,b=Math.sqrt(s*s+l*l);c=i-s,d=o-l,v=Math.sqrt(c*c+d*d),b=v>b?v:b;var x=o,w=i,S,C,I=360/w*Math.PI/180,_,T;for(C=0;C<w;C+=1)for(_=Math.sin(C*I),T=Math.cos(C*I),S=0;S<x;S+=1)c=Math.floor(s+b*S/x*T),d=Math.floor(l+b*S/x*_),u=(d*i+c)*4,p=r[u+0],f=r[u+1],g=r[u+2],y=r[u+3],u=(C+S*i)*4,a[u+0]=p,a[u+1]=f,a[u+2]=g,a[u+3]=y},are=function(t,e,n){var r=t.data,a=e.data,i=t.width,o=t.height,s=n.polarCenterX||i/2,l=n.polarCenterY||o/2,u,c,d,p,f,g=0,y=0,v=0,b=0,x,w=Math.sqrt(s*s+l*l);c=i-s,d=o-l,x=Math.sqrt(c*c+d*d),w=x>w?x:w;var S=o,C=i,I,_,T=n.polarRotation||0,M,P;for(c=0;c<i;c+=1)for(d=0;d<o;d+=1)p=c-s,f=d-l,I=Math.sqrt(p*p+f*f)*S/w,_=(Math.atan2(f,p)*180/Math.PI+360+T)%360,_=_*C/360,M=Math.floor(_),P=Math.floor(I),u=(P*i+M)*4,g=r[u+0],y=r[u+1],v=r[u+2],b=r[u+3],u=(d*i+c)*4,a[u+0]=g,a[u+1]=y,a[u+2]=v,a[u+3]=b};const ire=function(t){var e=t.width,n=t.height,r,a,i,o,s,l,u,c,d,p,f=Math.round(this.kaleidoscopePower()),g=Math.round(this.kaleidoscopeAngle()),y=Math.floor(e*(g%360)/360);if(!(f<1)){var v=_A.Util.createCanvasElement();v.width=e,v.height=n;var b=v.getContext("2d").getImageData(0,0,e,n);_A.Util.releaseCanvas(v),rre(t,b,{polarCenterX:e/2,polarCenterY:n/2});for(var x=e/Math.pow(2,f);x<=8;)x=x*2,f-=1;x=Math.ceil(x);var w=x,S=0,C=w,I=1;for(y+x>e&&(S=w,C=0,I=-1),a=0;a<n;a+=1)for(r=S;r!==C;r+=I)i=Math.round(r+y)%e,d=(e*a+i)*4,s=b.data[d+0],l=b.data[d+1],u=b.data[d+2],c=b.data[d+3],p=(e*a+r)*4,b.data[p+0]=s,b.data[p+1]=l,b.data[p+2]=u,b.data[p+3]=c;for(a=0;a<n;a+=1)for(w=Math.floor(x),o=0;o<f;o+=1){for(r=0;r<w+1;r+=1)d=(e*a+r)*4,s=b.data[d+0],l=b.data[d+1],u=b.data[d+2],c=b.data[d+3],p=(e*a+w*2-r-1)*4,b.data[p+0]=s,b.data[p+1]=l,b.data[p+2]=u,b.data[p+3]=c;w*=2}are(b,t,{polarRotation:0})}};Bb.Kaleidoscope=ire,zb.Factory.addGetterSetter(TA.Node,"kaleidoscopePower",2,(0,RA.getNumberValidator)(),zb.Factory.afterSetFilter),zb.Factory.addGetterSetter(TA.Node,"kaleidoscopeAngle",0,(0,RA.getNumberValidator)(),zb.Factory.afterSetFilter);var jb={};Object.defineProperty(jb,"__esModule",{value:!0}),jb.Mask=void 0;const $A=Lt,ore=Wn,sre=Qe;function Vb(t,e,n){var r=(n*t.width+e)*4,a=[];return a.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),a}function im(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function lre(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function ure(t,e){var n=Vb(t,0,0),r=Vb(t,t.width-1,0),a=Vb(t,0,t.height-1),i=Vb(t,t.width-1,t.height-1),o=e||10;if(im(n,r)<o&&im(r,i)<o&&im(i,a)<o&&im(a,n)<o){for(var s=lre([r,n,i,a]),l=[],u=0;u<t.width*t.height;u++){var c=im(s,[t.data[u*4],t.data[u*4+1],t.data[u*4+2]]);l[u]=c<o?0:255}return l}}function cre(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function dre(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,g=l+p-i;if(f>=0&&f<n&&g>=0&&g<e){var y=f*e+g,v=r[d*a+p];c+=t[y]*v}}o[u]=c===255*8?255:0}return o}function pre(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,g=l+p-i;if(f>=0&&f<n&&g>=0&&g<e){var y=f*e+g,v=r[d*a+p];c+=t[y]*v}}o[u]=c>=255*4?255:0}return o}function hre(t,e,n){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,g=l+p-i;if(f>=0&&f<n&&g>=0&&g<e){var y=f*e+g,v=r[d*a+p];c+=t[y]*v}}o[u]=c}return o}const fre=function(t){var e=this.threshold(),n=ure(t,e);return n&&(n=dre(n,t.width,t.height),n=pre(n,t.width,t.height),n=hre(n,t.width,t.height),cre(t,n)),t};jb.Mask=fre,$A.Factory.addGetterSetter(ore.Node,"threshold",0,(0,sre.getNumberValidator)(),$A.Factory.afterSetFilter);var Ub={};Object.defineProperty(Ub,"__esModule",{value:!0}),Ub.Noise=void 0;const OA=Lt,mre=Wn,gre=Qe,yre=function(t){var e=this.noise()*255,n=t.data,r=n.length,a=e/2,i;for(i=0;i<r;i+=4)n[i+0]+=a-2*a*Math.random(),n[i+1]+=a-2*a*Math.random(),n[i+2]+=a-2*a*Math.random()};Ub.Noise=yre,OA.Factory.addGetterSetter(mre.Node,"noise",.2,(0,gre.getNumberValidator)(),OA.Factory.afterSetFilter);var Gb={};Object.defineProperty(Gb,"__esModule",{value:!0}),Gb.Pixelate=void 0;const MA=Lt,bre=nr,vre=Wn,xre=Qe,wre=function(t){var e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,a,i,o,s,l,u,c,d=Math.ceil(n/e),p=Math.ceil(r/e),f,g,y,v,b,x,w,S=t.data;if(e<=0){bre.Util.error("pixelSize value can not be <= 0");return}for(b=0;b<d;b+=1)for(x=0;x<p;x+=1){for(s=0,l=0,u=0,c=0,f=b*e,g=f+e,y=x*e,v=y+e,w=0,a=f;a<g;a+=1)if(!(a>=n))for(i=y;i<v;i+=1)i>=r||(o=(n*i+a)*4,s+=S[o+0],l+=S[o+1],u+=S[o+2],c+=S[o+3],w+=1);for(s=s/w,l=l/w,u=u/w,c=c/w,a=f;a<g;a+=1)if(!(a>=n))for(i=y;i<v;i+=1)i>=r||(o=(n*i+a)*4,S[o+0]=s,S[o+1]=l,S[o+2]=u,S[o+3]=c)}};Gb.Pixelate=wre,MA.Factory.addGetterSetter(vre.Node,"pixelSize",8,(0,xre.getNumberValidator)(),MA.Factory.afterSetFilter);var Wb={};Object.defineProperty(Wb,"__esModule",{value:!0}),Wb.Posterize=void 0;const PA=Lt,kre=Wn,Sre=Qe,Cre=function(t){var e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,a=255/e,i;for(i=0;i<r;i+=1)n[i]=Math.floor(n[i]/a)*a};Wb.Posterize=Cre,PA.Factory.addGetterSetter(kre.Node,"levels",.5,(0,Sre.getNumberValidator)(),PA.Factory.afterSetFilter);var Hb={};Object.defineProperty(Hb,"__esModule",{value:!0}),Hb.RGB=void 0;const qb=Lt,v3=Wn,Ire=Qe,Ere=function(t){var e=t.data,n=e.length,r=this.red(),a=this.green(),i=this.blue(),o,s;for(o=0;o<n;o+=4)s=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=s*r,e[o+1]=s*a,e[o+2]=s*i,e[o+3]=e[o+3]};Hb.RGB=Ere,qb.Factory.addGetterSetter(v3.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),qb.Factory.addGetterSetter(v3.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),qb.Factory.addGetterSetter(v3.Node,"blue",0,Ire.RGBComponent,qb.Factory.afterSetFilter);var Kb={};Object.defineProperty(Kb,"__esModule",{value:!0}),Kb.RGBA=void 0;const om=Lt,Xb=Wn,Nre=Qe,Tre=function(t){var e=t.data,n=e.length,r=this.red(),a=this.green(),i=this.blue(),o=this.alpha(),s,l;for(s=0;s<n;s+=4)l=1-o,e[s]=r*o+e[s]*l,e[s+1]=a*o+e[s+1]*l,e[s+2]=i*o+e[s+2]*l};Kb.RGBA=Tre,om.Factory.addGetterSetter(Xb.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),om.Factory.addGetterSetter(Xb.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),om.Factory.addGetterSetter(Xb.Node,"blue",0,Nre.RGBComponent,om.Factory.afterSetFilter),om.Factory.addGetterSetter(Xb.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});var Yb={};Object.defineProperty(Yb,"__esModule",{value:!0}),Yb.Sepia=void 0;const _re=function(t){var e=t.data,n=e.length,r,a,i,o;for(r=0;r<n;r+=4)a=e[r+0],i=e[r+1],o=e[r+2],e[r+0]=Math.min(255,a*.393+i*.769+o*.189),e[r+1]=Math.min(255,a*.349+i*.686+o*.168),e[r+2]=Math.min(255,a*.272+i*.534+o*.131)};Yb.Sepia=_re;var Qb={};Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.Solarize=void 0;const Rre=function(t){var e=t.data,n=t.width,r=t.height,a=n*4,i=r;do{var o=(i-1)*a,s=n;do{var l=o+(s-1)*4,u=e[l],c=e[l+1],d=e[l+2];u>127&&(u=255-u),c>127&&(c=255-c),d>127&&(d=255-d),e[l]=u,e[l+1]=c,e[l+2]=d}while(--s)}while(--i)};Qb.Solarize=Rre;var Zb={};Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.Threshold=void 0;const AA=Lt,$re=Wn,Ore=Qe,Mre=function(t){var e=this.threshold()*255,n=t.data,r=n.length,a;for(a=0;a<r;a+=1)n[a]=n[a]<e?0:255};Zb.Threshold=Mre,AA.Factory.addGetterSetter($re.Node,"threshold",.5,(0,Ore.getNumberValidator)(),AA.Factory.afterSetFilter),Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.Konva=void 0;const DA=Qy,Pre=lb,Are=db,Dre=fb,Lre=mb,Fre=gb,LA=Cp,Bre=em,zre=wp,jre=nm,Vre=vb,Ure=xb,Gre=wb,Wre=kb,Hre=_c,qre=Cb,Kre=Ib,Xre=Nb,Yre=_b,Qre=Rb,Zre=$b,Jre=Ob,eae=Pb,tae=Ab,nae=Db,rae=Lb,aae=Fb,iae=Bb,oae=jb,sae=Ub,lae=Gb,uae=Wb,cae=Hb,dae=Kb,pae=Yb,hae=Qb,fae=Zb;Yy.Konva=DA.Konva.Util._assign(DA.Konva,{Arc:Pre.Arc,Arrow:Are.Arrow,Circle:Dre.Circle,Ellipse:Lre.Ellipse,Image:Fre.Image,Label:LA.Label,Tag:LA.Tag,Line:Bre.Line,Path:zre.Path,Rect:jre.Rect,RegularPolygon:Vre.RegularPolygon,Ring:Ure.Ring,Sprite:Gre.Sprite,Star:Wre.Star,Text:Hre.Text,TextPath:qre.TextPath,Transformer:Kre.Transformer,Wedge:Xre.Wedge,Filters:{Blur:Yre.Blur,Brighten:Qre.Brighten,Contrast:Zre.Contrast,Emboss:Jre.Emboss,Enhance:eae.Enhance,Grayscale:tae.Grayscale,HSL:nae.HSL,HSV:rae.HSV,Invert:aae.Invert,Kaleidoscope:iae.Kaleidoscope,Mask:oae.Mask,Noise:sae.Noise,Pixelate:lae.Pixelate,Posterize:uae.Posterize,RGB:cae.RGB,RGBA:dae.RGBA,Sepia:pae.Sepia,Solarize:hae.Solarize,Threshold:fae.Threshold}});var mae=zE.exports;Object.defineProperty(mae,"__esModule",{value:!0});const gae=Yy;zE.exports=gae.Konva;var yae=zE.exports;const FA=Wi(yae);var x3={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=Qy;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=Qy;t.exports=r.Konva})(x3,x3.exports);var bae=x3.exports;const sm=Wi(bae);var BA={exports:{}};/**
* @license React
* react-reconciler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var vae=function(t){var e={},n=R,r=Hh,a=Object.assign;function i(h){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+h,k=1;k<arguments.length;k++)m+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,s=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),S=Symbol.iterator;function C(h){return h===null||typeof h!="object"?null:(h=S&&h[S]||h["@@iterator"],typeof h=="function"?h:null)}function I(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case l:return"Portal";case d:return"Profiler";case c:return"StrictMode";case y:return"Suspense";case v:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case f:return(h.displayName||"Context")+".Consumer";case p:return(h._context.displayName||"Context")+".Provider";case g:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case b:return m=h.displayName||null,m!==null?m:I(h.type)||"Memo";case x:m=h._payload,h=h._init;try{return I(h(m))}catch{}}return null}function _(h){var m=h.type;switch(h.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=m.render,h=h.displayName||h.name||"",m.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(m);case 8:return m===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function T(h){var m=h,k=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,m.flags&4098&&(k=m.return),h=m.return;while(h)}return m.tag===3?k:null}function M(h){if(T(h)!==h)throw Error(i(188))}function P(h){var m=h.alternate;if(!m){if(m=T(h),m===null)throw Error(i(188));return m!==h?null:h}for(var k=h,E=m;;){var N=k.return;if(N===null)break;var O=N.alternate;if(O===null){if(E=N.return,E!==null){k=E;continue}break}if(N.child===O.child){for(O=N.child;O;){if(O===k)return M(N),h;if(O===E)return M(N),m;O=O.sibling}throw Error(i(188))}if(k.return!==E.return)k=N,E=O;else{for(var G=!1,le=N.child;le;){if(le===k){G=!0,k=N,E=O;break}if(le===E){G=!0,E=N,k=O;break}le=le.sibling}if(!G){for(le=O.child;le;){if(le===k){G=!0,k=O,E=N;break}if(le===E){G=!0,E=O,k=N;break}le=le.sibling}if(!G)throw Error(i(189))}}if(k.alternate!==E)throw Error(i(190))}if(k.tag!==3)throw Error(i(188));return k.stateNode.current===k?h:m}function L(h){return h=P(h),h!==null?j(h):null}function j(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var m=j(h);if(m!==null)return m;h=h.sibling}return null}function B(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var m=B(h);if(m!==null)return m}h=h.sibling}return null}var K=Array.isArray,X=t.getPublicInstance,Z=t.getRootHostContext,H=t.getChildHostContext,F=t.prepareForCommit,Y=t.resetAfterCommit,Q=t.createInstance,ne=t.appendInitialChild,se=t.finalizeInitialChildren,pe=t.prepareUpdate,de=t.shouldSetTextContent,ie=t.createTextInstance,xe=t.scheduleTimeout,q=t.cancelTimeout,oe=t.noTimeout,he=t.isPrimaryRenderer,Ie=t.supportsMutation,Ee=t.supportsPersistence,_e=t.supportsHydration,Fe=t.getInstanceFromNode,Xe=t.preparePortalMount,Oe=t.getCurrentEventPriority,lt=t.detachDeletedInstance,Je=t.supportsMicrotasks,nt=t.scheduleMicrotask,et=t.supportsTestSelectors,on=t.findFiberRoot,jt=t.getBoundingRect,Yt=t.getTextContent,Qt=t.isHiddenSubtree,$t=t.matchAccessibilityRole,Ct=t.setFocusIfFocusable,zn=t.setupIntersectionObserver,Xn=t.appendChild,za=t.appendChildToContainer,_n=t.commitTextUpdate,Qa=t.commitMount,yo=t.commitUpdate,bi=t.insertBefore,hn=t.insertInContainerBefore,Za=t.removeChild,vi=t.removeChildFromContainer,xi=t.resetTextContent,Is=t.hideInstance,ma=t.hideTextInstance,wl=t.unhideInstance,fd=t.unhideTextInstance,Ho=t.clearContainer,Vt=t.cloneInstance,ue=t.createContainerChildSet,me=t.appendChildToContainerChildSet,ke=t.finalizeContainerChildren,Me=t.replaceContainerChildren,We=t.cloneHiddenInstance,yt=t.cloneHiddenTextInstance,ut=t.canHydrateInstance,ot=t.canHydrateTextInstance,tt=t.canHydrateSuspenseInstance,Ot=t.isSuspenseInstancePending,Pn=t.isSuspenseInstanceFallback,vt=t.getSuspenseInstanceFallbackErrorDetails,un=t.registerSuspenseInstanceRetry,fn=t.getNextHydratableSibling,Rr=t.getFirstHydratableChild,rr=t.getFirstHydratableChildWithinContainer,hr=t.getFirstHydratableChildWithinSuspenseInstance,qo=t.hydrateInstance,Li=t.hydrateTextInstance,ga=t.hydrateSuspenseInstance,bo=t.getNextHydratableInstanceAfterSuspenseInstance,zu=t.commitHydratedContainer,ju=t.commitHydratedSuspenseInstance,kl=t.clearSuspenseBoundary,Ko=t.clearSuspenseBoundaryFromContainer,vo=t.shouldDeleteUnhydratedTailInstances,tn=t.didNotMatchHydratedContainerTextInstance,cn=t.didNotMatchHydratedTextInstance,xr;function At(h){if(xr===void 0)try{throw Error()}catch(k){var m=k.stack.trim().match(/\n( *(at )?)/);xr=m&&m[1]||""}return`
`+xr+h}var Sl=!1;function kh(h,m){if(!h||Sl)return"";Sl=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Re){var E=Re}Reflect.construct(h,[],m)}else{try{m.call()}catch(Re){E=Re}h.call(m.prototype)}else{try{throw Error()}catch(Re){E=Re}h()}}catch(Re){if(Re&&E&&typeof Re.stack=="string"){for(var N=Re.stack.split(`
`),O=E.stack.split(`
`),G=N.length-1,le=O.length-1;1<=G&&0<=le&&N[G]!==O[le];)le--;for(;1<=G&&0<=le;G--,le--)if(N[G]!==O[le]){if(G!==1||le!==1)do if(G--,le--,0>le||N[G]!==O[le]){var ye=`
`+N[G].replace(" at new "," at ");return h.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",h.displayName)),ye}while(1<=G&&0<=le);break}}}finally{Sl=!1,Error.prepareStackTrace=k}return(h=h?h.displayName||h.name:"")?At(h):""}var Lw=Object.prototype.hasOwnProperty,Vu=[],Cl=-1;function Fi(h){return{current:h}}function wn(h){0>Cl||(h.current=Vu[Cl],Vu[Cl]=null,Cl--)}function mn(h,m){Cl++,Vu[Cl]=h.current,h.current=m}var Bi={},Vr=Fi(Bi),ya=Fi(!1),Es=Bi;function Il(h,m){var k=h.type.contextTypes;if(!k)return Bi;var E=h.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===m)return E.__reactInternalMemoizedMaskedChildContext;var N={},O;for(O in k)N[O]=m[O];return E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=m,h.__reactInternalMemoizedMaskedChildContext=N),N}function ba(h){return h=h.childContextTypes,h!=null}function md(){wn(ya),wn(Vr)}function v0(h,m,k){if(Vr.current!==Bi)throw Error(i(168));mn(Vr,m),mn(ya,k)}function jn(h,m,k){var E=h.stateNode;if(m=m.childContextTypes,typeof E.getChildContext!="function")return k;E=E.getChildContext();for(var N in E)if(!(N in m))throw Error(i(108,_(h)||"Unknown",N));return a({},k,E)}function Xo(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Bi,Es=Vr.current,mn(Vr,h),mn(ya,ya.current),!0}function Uu(h,m,k){var E=h.stateNode;if(!E)throw Error(i(169));k?(h=jn(h,m,Es),E.__reactInternalMemoizedMergedChildContext=h,wn(ya),wn(Vr),mn(Vr,h)):wn(ya),mn(ya,k)}var wi=Math.clz32?Math.clz32:Fw,x0=Math.log,Sh=Math.LN2;function Fw(h){return h>>>=0,h===0?32:31-(x0(h)/Sh|0)|0}var gd=64,Ns=4194304;function Gu(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Ts(h,m){var k=h.pendingLanes;if(k===0)return 0;var E=0,N=h.suspendedLanes,O=h.pingedLanes,G=k&268435455;if(G!==0){var le=G&~N;le!==0?E=Gu(le):(O&=G,O!==0&&(E=Gu(O)))}else G=k&~N,G!==0?E=Gu(G):O!==0&&(E=Gu(O));if(E===0)return 0;if(m!==0&&m!==E&&!(m&N)&&(N=E&-E,O=m&-m,N>=O||N===16&&(O&4194240)!==0))return m;if(E&4&&(E|=k&16),m=h.entangledLanes,m!==0)for(h=h.entanglements,m&=E;0<m;)k=31-wi(m),N=1<<k,E|=h[k],m&=~N;return E}function D(h,m){switch(h){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(h,m){for(var k=h.suspendedLanes,E=h.pingedLanes,N=h.expirationTimes,O=h.pendingLanes;0<O;){var G=31-wi(O),le=1<<G,ye=N[G];ye===-1?(!(le&k)||le&E)&&(N[G]=D(le,m)):ye<=m&&(h.expiredLanes|=le),O&=~le}}function J(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function ae(){var h=gd;return gd<<=1,!(gd&4194240)&&(gd=64),h}function ve(h){for(var m=[],k=0;31>k;k++)m.push(h);return m}function Ce(h,m,k){h.pendingLanes|=m,m!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,m=31-wi(m),h[m]=k}function Ae(h,m){var k=h.pendingLanes&~m;h.pendingLanes=m,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=m,h.mutableReadLanes&=m,h.entangledLanes&=m,m=h.entanglements;var E=h.eventTimes;for(h=h.expirationTimes;0<k;){var N=31-wi(k),O=1<<N;m[N]=0,E[N]=-1,h[N]=-1,k&=~O}}function $e(h,m){var k=h.entangledLanes|=m;for(h=h.entanglements;k;){var E=31-wi(k),N=1<<E;N&m|h[E]&m&&(h[E]|=m),k&=~N}}var Te=0;function je(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var mt=r.unstable_scheduleCallback,rt=r.unstable_cancelCallback,Rt=r.unstable_shouldYield,xt=r.unstable_requestPaint,Ke=r.unstable_now,ct=r.unstable_ImmediatePriority,pt=r.unstable_UserBlockingPriority,at=r.unstable_NormalPriority,wt=r.unstable_IdlePriority,st=null,bt=null;function ar(h){if(bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(st,h,void 0,(h.current.flags&128)===128)}catch{}}function Ja(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var Ut=typeof Object.is=="function"?Object.is:Ja,Vn=null,An=!1,va=!1;function ja(h){Vn===null?Vn=[h]:Vn.push(h)}function xo(h){An=!0,ja(h)}function wr(){if(!va&&Vn!==null){va=!0;var h=0,m=Te;try{var k=Vn;for(Te=1;h<k.length;h++){var E=k[h];do E=E(!0);while(E!==null)}Vn=null,An=!1}catch(N){throw Vn!==null&&(Vn=Vn.slice(h+1)),mt(ct,wr),N}finally{Te=m,va=!1}}return null}var ht=[],_t=0,kr=null,Sr=0,dn=[],Rn=0,ea=null,wo=1,ta="";function _s(h,m){ht[_t++]=Sr,ht[_t++]=kr,kr=h,Sr=m}function Ch(h,m,k){dn[Rn++]=wo,dn[Rn++]=ta,dn[Rn++]=ea,ea=h;var E=wo;h=ta;var N=32-wi(E)-1;E&=~(1<<N),k+=1;var O=32-wi(m)+N;if(30<O){var G=N-N%5;O=(E&(1<<G)-1).toString(32),E>>=G,N-=G,wo=1<<32-wi(m)+N|k<<N|E,ta=O+h}else wo=1<<O|k<<N|E,ta=h}function Va(h){h.return!==null&&(_s(h,1),Ch(h,1,0))}function Rs(h){for(;h===kr;)kr=ht[--_t],ht[_t]=null,Sr=ht[--_t],ht[_t]=null;for(;h===ea;)ea=dn[--Rn],dn[Rn]=null,ta=dn[--Rn],dn[Rn]=null,wo=dn[--Rn],dn[Rn]=null}var ir=null,na=null,nn=!1,$s=!1,ko=null;function __(h,m){var k=Gi(5,null,null,0);k.elementType="DELETED",k.stateNode=m,k.return=h,m=h.deletions,m===null?(h.deletions=[k],h.flags|=16):m.push(k)}function R_(h,m){switch(h.tag){case 5:return m=ut(m,h.type,h.pendingProps),m!==null?(h.stateNode=m,ir=h,na=Rr(m),!0):!1;case 6:return m=ot(m,h.pendingProps),m!==null?(h.stateNode=m,ir=h,na=null,!0):!1;case 13:if(m=tt(m),m!==null){var k=ea!==null?{id:wo,overflow:ta}:null;return h.memoizedState={dehydrated:m,treeContext:k,retryLane:1073741824},k=Gi(18,null,null,0),k.stateNode=m,k.return=h,h.child=k,ir=h,na=null,!0}return!1;default:return!1}}function Bw(h){return(h.mode&1)!==0&&(h.flags&128)===0}function zw(h){if(nn){var m=na;if(m){var k=m;if(!R_(h,m)){if(Bw(h))throw Error(i(418));m=fn(k);var E=ir;m&&R_(h,m)?__(E,k):(h.flags=h.flags&-4097|2,nn=!1,ir=h)}}else{if(Bw(h))throw Error(i(418));h.flags=h.flags&-4097|2,nn=!1,ir=h}}}function $_(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;ir=h}function w0(h){if(!_e||h!==ir)return!1;if(!nn)return $_(h),nn=!0,!1;if(h.tag!==3&&(h.tag!==5||vo(h.type)&&!de(h.type,h.memoizedProps))){var m=na;if(m){if(Bw(h))throw O_(),Error(i(418));for(;m;)__(h,m),m=fn(m)}}if($_(h),h.tag===13){if(!_e)throw Error(i(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));na=bo(h)}else na=ir?fn(h.stateNode):null;return!0}function O_(){for(var h=na;h;)h=fn(h)}function yd(){_e&&(na=ir=null,$s=nn=!1)}function jw(h){ko===null?ko=[h]:ko.push(h)}var vV=o.ReactCurrentBatchConfig;function k0(h,m){if(Ut(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var k=Object.keys(h),E=Object.keys(m);if(k.length!==E.length)return!1;for(E=0;E<k.length;E++){var N=k[E];if(!Lw.call(m,N)||!Ut(h[N],m[N]))return!1}return!0}function xV(h){switch(h.tag){case 5:return At(h.type);case 16:return At("Lazy");case 13:return At("Suspense");case 19:return At("SuspenseList");case 0:case 2:case 15:return h=kh(h.type,!1),h;case 11:return h=kh(h.type.render,!1),h;case 1:return h=kh(h.type,!0),h;default:return""}}function So(h,m){if(h&&h.defaultProps){m=a({},m),h=h.defaultProps;for(var k in h)m[k]===void 0&&(m[k]=h[k]);return m}return m}var S0=Fi(null),C0=null,bd=null,Vw=null;function Uw(){Vw=bd=C0=null}function M_(h,m,k){he?(mn(S0,m._currentValue),m._currentValue=k):(mn(S0,m._currentValue2),m._currentValue2=k)}function Gw(h){var m=S0.current;wn(S0),he?h._currentValue=m:h._currentValue2=m}function Ww(h,m,k){for(;h!==null;){var E=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,E!==null&&(E.childLanes|=m)):E!==null&&(E.childLanes&m)!==m&&(E.childLanes|=m),h===k)break;h=h.return}}function vd(h,m){C0=h,Vw=bd=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&m&&(ei=!0),h.firstContext=null)}function zi(h){var m=he?h._currentValue:h._currentValue2;if(Vw!==h)if(h={context:h,memoizedValue:m,next:null},bd===null){if(C0===null)throw Error(i(308));bd=h,C0.dependencies={lanes:0,firstContext:h}}else bd=bd.next=h;return m}var Wu=null;function Hw(h){Wu===null?Wu=[h]:Wu.push(h)}function P_(h,m,k,E){var N=m.interleaved;return N===null?(k.next=k,Hw(m)):(k.next=N.next,N.next=k),m.interleaved=k,Yo(h,E)}function Yo(h,m){h.lanes|=m;var k=h.alternate;for(k!==null&&(k.lanes|=m),k=h,h=h.return;h!==null;)h.childLanes|=m,k=h.alternate,k!==null&&(k.childLanes|=m),k=h,h=h.return;return k.tag===3?k.stateNode:null}var El=!1;function qw(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function A_(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Os(h,m){return{eventTime:h,lane:m,tag:0,payload:null,callback:null,next:null}}function Nl(h,m,k){var E=h.updateQueue;if(E===null)return null;if(E=E.shared,Bt&2){var N=E.pending;return N===null?m.next=m:(m.next=N.next,N.next=m),E.pending=m,Yo(h,k)}return N=E.interleaved,N===null?(m.next=m,Hw(E)):(m.next=N.next,N.next=m),E.interleaved=m,Yo(h,k)}function I0(h,m,k){if(m=m.updateQueue,m!==null&&(m=m.shared,(k&4194240)!==0)){var E=m.lanes;E&=h.pendingLanes,k|=E,m.lanes=k,$e(h,k)}}function D_(h,m){var k=h.updateQueue,E=h.alternate;if(E!==null&&(E=E.updateQueue,k===E)){var N=null,O=null;if(k=k.firstBaseUpdate,k!==null){do{var G={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};O===null?N=O=G:O=O.next=G,k=k.next}while(k!==null);O===null?N=O=m:O=O.next=m}else N=O=m;k={baseState:E.baseState,firstBaseUpdate:N,lastBaseUpdate:O,shared:E.shared,effects:E.effects},h.updateQueue=k;return}h=k.lastBaseUpdate,h===null?k.firstBaseUpdate=m:h.next=m,k.lastBaseUpdate=m}function E0(h,m,k,E){var N=h.updateQueue;El=!1;var O=N.firstBaseUpdate,G=N.lastBaseUpdate,le=N.shared.pending;if(le!==null){N.shared.pending=null;var ye=le,Re=ye.next;ye.next=null,G===null?O=Re:G.next=Re,G=ye;var qe=h.alternate;qe!==null&&(qe=qe.updateQueue,le=qe.lastBaseUpdate,le!==G&&(le===null?qe.firstBaseUpdate=Re:le.next=Re,qe.lastBaseUpdate=ye))}if(O!==null){var It=N.baseState;G=0,qe=Re=ye=null,le=O;do{var Be=le.lane,Dn=le.eventTime;if((E&Be)===Be){qe!==null&&(qe=qe.next={eventTime:Dn,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var kn=h,ri=le;switch(Be=m,Dn=k,ri.tag){case 1:if(kn=ri.payload,typeof kn=="function"){It=kn.call(Dn,It,Be);break e}It=kn;break e;case 3:kn.flags=kn.flags&-65537|128;case 0:if(kn=ri.payload,Be=typeof kn=="function"?kn.call(Dn,It,Be):kn,Be==null)break e;It=a({},It,Be);break e;case 2:El=!0}}le.callback!==null&&le.lane!==0&&(h.flags|=64,Be=N.effects,Be===null?N.effects=[le]:Be.push(le))}else Dn={eventTime:Dn,lane:Be,tag:le.tag,payload:le.payload,callback:le.callback,next:null},qe===null?(Re=qe=Dn,ye=It):qe=qe.next=Dn,G|=Be;if(le=le.next,le===null){if(le=N.shared.pending,le===null)break;Be=le,le=Be.next,Be.next=null,N.lastBaseUpdate=Be,N.shared.pending=null}}while(!0);if(qe===null&&(ye=It),N.baseState=ye,N.firstBaseUpdate=Re,N.lastBaseUpdate=qe,m=N.shared.interleaved,m!==null){N=m;do G|=N.lane,N=N.next;while(N!==m)}else O===null&&(N.shared.lanes=0);qu|=G,h.lanes=G,h.memoizedState=It}}function L_(h,m,k){if(h=m.effects,m.effects=null,h!==null)for(m=0;m<h.length;m++){var E=h[m],N=E.callback;if(N!==null){if(E.callback=null,E=k,typeof N!="function")throw Error(i(191,N));N.call(E)}}}var F_=new n.Component().refs;function Kw(h,m,k,E){m=h.memoizedState,k=k(E,m),k=k==null?m:a({},m,k),h.memoizedState=k,h.lanes===0&&(h.updateQueue.baseState=k)}var N0={isMounted:function(h){return(h=h._reactInternals)?T(h)===h:!1},enqueueSetState:function(h,m,k){h=h._reactInternals;var E=Sa(),N=Rl(h),O=Os(E,N);O.payload=m,k!=null&&(O.callback=k),m=Nl(h,O,N),m!==null&&(Ui(m,h,N,E),I0(m,h,N))},enqueueReplaceState:function(h,m,k){h=h._reactInternals;var E=Sa(),N=Rl(h),O=Os(E,N);O.tag=1,O.payload=m,k!=null&&(O.callback=k),m=Nl(h,O,N),m!==null&&(Ui(m,h,N,E),I0(m,h,N))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var k=Sa(),E=Rl(h),N=Os(k,E);N.tag=2,m!=null&&(N.callback=m),m=Nl(h,N,E),m!==null&&(Ui(m,h,E,k),I0(m,h,E))}};function B_(h,m,k,E,N,O,G){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(E,O,G):m.prototype&&m.prototype.isPureReactComponent?!k0(k,E)||!k0(N,O):!0}function z_(h,m,k){var E=!1,N=Bi,O=m.contextType;return typeof O=="object"&&O!==null?O=zi(O):(N=ba(m)?Es:Vr.current,E=m.contextTypes,O=(E=E!=null)?Il(h,N):Bi),m=new m(k,O),h.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=N0,h.stateNode=m,m._reactInternals=h,E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=N,h.__reactInternalMemoizedMaskedChildContext=O),m}function j_(h,m,k,E){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(k,E),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(k,E),m.state!==h&&N0.enqueueReplaceState(m,m.state,null)}function Xw(h,m,k,E){var N=h.stateNode;N.props=k,N.state=h.memoizedState,N.refs=F_,qw(h);var O=m.contextType;typeof O=="object"&&O!==null?N.context=zi(O):(O=ba(m)?Es:Vr.current,N.context=Il(h,O)),N.state=h.memoizedState,O=m.getDerivedStateFromProps,typeof O=="function"&&(Kw(h,m,O,k),N.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(m=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),m!==N.state&&N0.enqueueReplaceState(N,N.state,null),E0(h,k,N,E),N.state=h.memoizedState),typeof N.componentDidMount=="function"&&(h.flags|=4194308)}function Ih(h,m,k){if(h=k.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(i(309));var E=k.stateNode}if(!E)throw Error(i(147,h));var N=E,O=""+h;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===O?m.ref:(m=function(G){var le=N.refs;le===F_&&(le=N.refs={}),G===null?delete le[O]:le[O]=G},m._stringRef=O,m)}if(typeof h!="string")throw Error(i(284));if(!k._owner)throw Error(i(290,h))}return h}function T0(h,m){throw h=Object.prototype.toString.call(m),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h))}function V_(h){var m=h._init;return m(h._payload)}function U_(h){function m(ge,ce){if(h){var we=ge.deletions;we===null?(ge.deletions=[ce],ge.flags|=16):we.push(ce)}}function k(ge,ce){if(!h)return null;for(;ce!==null;)m(ge,ce),ce=ce.sibling;return null}function E(ge,ce){for(ge=new Map;ce!==null;)ce.key!==null?ge.set(ce.key,ce):ge.set(ce.index,ce),ce=ce.sibling;return ge}function N(ge,ce){return ge=Ol(ge,ce),ge.index=0,ge.sibling=null,ge}function O(ge,ce,we){return ge.index=we,h?(we=ge.alternate,we!==null?(we=we.index,we<ce?(ge.flags|=2,ce):we):(ge.flags|=2,ce)):(ge.flags|=1048576,ce)}function G(ge){return h&&ge.alternate===null&&(ge.flags|=2),ge}function le(ge,ce,we,ze){return ce===null||ce.tag!==6?(ce=Ak(we,ge.mode,ze),ce.return=ge,ce):(ce=N(ce,we),ce.return=ge,ce)}function ye(ge,ce,we,ze){var dt=we.type;return dt===u?qe(ge,ce,we.props.children,ze,we.key):ce!==null&&(ce.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===x&&V_(dt)===ce.type)?(ze=N(ce,we.props),ze.ref=Ih(ge,ce,we),ze.return=ge,ze):(ze=e1(we.type,we.key,we.props,null,ge.mode,ze),ze.ref=Ih(ge,ce,we),ze.return=ge,ze)}function Re(ge,ce,we,ze){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==we.containerInfo||ce.stateNode.implementation!==we.implementation?(ce=Dk(we,ge.mode,ze),ce.return=ge,ce):(ce=N(ce,we.children||[]),ce.return=ge,ce)}function qe(ge,ce,we,ze,dt){return ce===null||ce.tag!==7?(ce=Qu(we,ge.mode,ze,dt),ce.return=ge,ce):(ce=N(ce,we),ce.return=ge,ce)}function It(ge,ce,we){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=Ak(""+ce,ge.mode,we),ce.return=ge,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case s:return we=e1(ce.type,ce.key,ce.props,null,ge.mode,we),we.ref=Ih(ge,null,ce),we.return=ge,we;case l:return ce=Dk(ce,ge.mode,we),ce.return=ge,ce;case x:var ze=ce._init;return It(ge,ze(ce._payload),we)}if(K(ce)||C(ce))return ce=Qu(ce,ge.mode,we,null),ce.return=ge,ce;T0(ge,ce)}return null}function Be(ge,ce,we,ze){var dt=ce!==null?ce.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return dt!==null?null:le(ge,ce,""+we,ze);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case s:return we.key===dt?ye(ge,ce,we,ze):null;case l:return we.key===dt?Re(ge,ce,we,ze):null;case x:return dt=we._init,Be(ge,ce,dt(we._payload),ze)}if(K(we)||C(we))return dt!==null?null:qe(ge,ce,we,ze,null);T0(ge,we)}return null}function Dn(ge,ce,we,ze,dt){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ge=ge.get(we)||null,le(ce,ge,""+ze,dt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case s:return ge=ge.get(ze.key===null?we:ze.key)||null,ye(ce,ge,ze,dt);case l:return ge=ge.get(ze.key===null?we:ze.key)||null,Re(ce,ge,ze,dt);case x:var Mt=ze._init;return Dn(ge,ce,we,Mt(ze._payload),dt)}if(K(ze)||C(ze))return ge=ge.get(we)||null,qe(ce,ge,ze,dt,null);T0(ce,ze)}return null}function kn(ge,ce,we,ze){for(var dt=null,Mt=null,Et=ce,rn=ce=0,Wr=null;Et!==null&&rn<we.length;rn++){Et.index>rn?(Wr=Et,Et=null):Wr=Et.sibling;var an=Be(ge,Et,we[rn],ze);if(an===null){Et===null&&(Et=Wr);break}h&&Et&&an.alternate===null&&m(ge,Et),ce=O(an,ce,rn),Mt===null?dt=an:Mt.sibling=an,Mt=an,Et=Wr}if(rn===we.length)return k(ge,Et),nn&&_s(ge,rn),dt;if(Et===null){for(;rn<we.length;rn++)Et=It(ge,we[rn],ze),Et!==null&&(ce=O(Et,ce,rn),Mt===null?dt=Et:Mt.sibling=Et,Mt=Et);return nn&&_s(ge,rn),dt}for(Et=E(ge,Et);rn<we.length;rn++)Wr=Dn(Et,ge,rn,we[rn],ze),Wr!==null&&(h&&Wr.alternate!==null&&Et.delete(Wr.key===null?rn:Wr.key),ce=O(Wr,ce,rn),Mt===null?dt=Wr:Mt.sibling=Wr,Mt=Wr);return h&&Et.forEach(function(Ml){return m(ge,Ml)}),nn&&_s(ge,rn),dt}function ri(ge,ce,we,ze){var dt=C(we);if(typeof dt!="function")throw Error(i(150));if(we=dt.call(we),we==null)throw Error(i(151));for(var Mt=dt=null,Et=ce,rn=ce=0,Wr=null,an=we.next();Et!==null&&!an.done;rn++,an=we.next()){Et.index>rn?(Wr=Et,Et=null):Wr=Et.sibling;var Ml=Be(ge,Et,an.value,ze);if(Ml===null){Et===null&&(Et=Wr);break}h&&Et&&Ml.alternate===null&&m(ge,Et),ce=O(Ml,ce,rn),Mt===null?dt=Ml:Mt.sibling=Ml,Mt=Ml,Et=Wr}if(an.done)return k(ge,Et),nn&&_s(ge,rn),dt;if(Et===null){for(;!an.done;rn++,an=we.next())an=It(ge,an.value,ze),an!==null&&(ce=O(an,ce,rn),Mt===null?dt=an:Mt.sibling=an,Mt=an);return nn&&_s(ge,rn),dt}for(Et=E(ge,Et);!an.done;rn++,an=we.next())an=Dn(Et,ge,rn,an.value,ze),an!==null&&(h&&an.alternate!==null&&Et.delete(an.key===null?rn:an.key),ce=O(an,ce,rn),Mt===null?dt=an:Mt.sibling=an,Mt=an);return h&&Et.forEach(function(YV){return m(ge,YV)}),nn&&_s(ge,rn),dt}function As(ge,ce,we,ze){if(typeof we=="object"&&we!==null&&we.type===u&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case s:e:{for(var dt=we.key,Mt=ce;Mt!==null;){if(Mt.key===dt){if(dt=we.type,dt===u){if(Mt.tag===7){k(ge,Mt.sibling),ce=N(Mt,we.props.children),ce.return=ge,ge=ce;break e}}else if(Mt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===x&&V_(dt)===Mt.type){k(ge,Mt.sibling),ce=N(Mt,we.props),ce.ref=Ih(ge,Mt,we),ce.return=ge,ge=ce;break e}k(ge,Mt);break}else m(ge,Mt);Mt=Mt.sibling}we.type===u?(ce=Qu(we.props.children,ge.mode,ze,we.key),ce.return=ge,ge=ce):(ze=e1(we.type,we.key,we.props,null,ge.mode,ze),ze.ref=Ih(ge,ce,we),ze.return=ge,ge=ze)}return G(ge);case l:e:{for(Mt=we.key;ce!==null;){if(ce.key===Mt)if(ce.tag===4&&ce.stateNode.containerInfo===we.containerInfo&&ce.stateNode.implementation===we.implementation){k(ge,ce.sibling),ce=N(ce,we.children||[]),ce.return=ge,ge=ce;break e}else{k(ge,ce);break}else m(ge,ce);ce=ce.sibling}ce=Dk(we,ge.mode,ze),ce.return=ge,ge=ce}return G(ge);case x:return Mt=we._init,As(ge,ce,Mt(we._payload),ze)}if(K(we))return kn(ge,ce,we,ze);if(C(we))return ri(ge,ce,we,ze);T0(ge,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,ce!==null&&ce.tag===6?(k(ge,ce.sibling),ce=N(ce,we),ce.return=ge,ge=ce):(k(ge,ce),ce=Ak(we,ge.mode,ze),ce.return=ge,ge=ce),G(ge)):k(ge,ce)}return As}var xd=U_(!0),G_=U_(!1),Eh={},ji=Fi(Eh),Nh=Fi(Eh),wd=Fi(Eh);function Qo(h){if(h===Eh)throw Error(i(174));return h}function Yw(h,m){mn(wd,m),mn(Nh,h),mn(ji,Eh),h=Z(m),wn(ji),mn(ji,h)}function kd(){wn(ji),wn(Nh),wn(wd)}function W_(h){var m=Qo(wd.current),k=Qo(ji.current);m=H(k,h.type,m),k!==m&&(mn(Nh,h),mn(ji,m))}function Qw(h){Nh.current===h&&(wn(ji),wn(Nh))}var Yn=Fi(0);function _0(h){for(var m=h;m!==null;){if(m.tag===13){var k=m.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||Ot(k)||Pn(k)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Zw=[];function Jw(){for(var h=0;h<Zw.length;h++){var m=Zw[h];he?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}Zw.length=0}var R0=o.ReactCurrentDispatcher,ek=o.ReactCurrentBatchConfig,Hu=0,Qn=null,$r=null,Ur=null,$0=!1,Th=!1,_h=0,wV=0;function xa(){throw Error(i(321))}function tk(h,m){if(m===null)return!1;for(var k=0;k<m.length&&k<h.length;k++)if(!Ut(h[k],m[k]))return!1;return!0}function nk(h,m,k,E,N,O){if(Hu=O,Qn=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,R0.current=h===null||h.memoizedState===null?IV:EV,h=k(E,N),Th){O=0;do{if(Th=!1,_h=0,25<=O)throw Error(i(301));O+=1,Ur=$r=null,m.updateQueue=null,R0.current=NV,h=k(E,N)}while(Th)}if(R0.current=P0,m=$r!==null&&$r.next!==null,Hu=0,Ur=$r=Qn=null,$0=!1,m)throw Error(i(300));return h}function rk(){var h=_h!==0;return _h=0,h}function Zo(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?Qn.memoizedState=Ur=h:Ur=Ur.next=h,Ur}function Vi(){if($r===null){var h=Qn.alternate;h=h!==null?h.memoizedState:null}else h=$r.next;var m=Ur===null?Qn.memoizedState:Ur.next;if(m!==null)Ur=m,$r=h;else{if(h===null)throw Error(i(310));$r=h,h={memoizedState:$r.memoizedState,baseState:$r.baseState,baseQueue:$r.baseQueue,queue:$r.queue,next:null},Ur===null?Qn.memoizedState=Ur=h:Ur=Ur.next=h}return Ur}function Rh(h,m){return typeof m=="function"?m(h):m}function ak(h){var m=Vi(),k=m.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=h;var E=$r,N=E.baseQueue,O=k.pending;if(O!==null){if(N!==null){var G=N.next;N.next=O.next,O.next=G}E.baseQueue=N=O,k.pending=null}if(N!==null){O=N.next,E=E.baseState;var le=G=null,ye=null,Re=O;do{var qe=Re.lane;if((Hu&qe)===qe)ye!==null&&(ye=ye.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),E=Re.hasEagerState?Re.eagerState:h(E,Re.action);else{var It={lane:qe,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};ye===null?(le=ye=It,G=E):ye=ye.next=It,Qn.lanes|=qe,qu|=qe}Re=Re.next}while(Re!==null&&Re!==O);ye===null?G=E:ye.next=le,Ut(E,m.memoizedState)||(ei=!0),m.memoizedState=E,m.baseState=G,m.baseQueue=ye,k.lastRenderedState=E}if(h=k.interleaved,h!==null){N=h;do O=N.lane,Qn.lanes|=O,qu|=O,N=N.next;while(N!==h)}else N===null&&(k.lanes=0);return[m.memoizedState,k.dispatch]}function ik(h){var m=Vi(),k=m.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=h;var E=k.dispatch,N=k.pending,O=m.memoizedState;if(N!==null){k.pending=null;var G=N=N.next;do O=h(O,G.action),G=G.next;while(G!==N);Ut(O,m.memoizedState)||(ei=!0),m.memoizedState=O,m.baseQueue===null&&(m.baseState=O),k.lastRenderedState=O}return[O,E]}function H_(){}function q_(h,m){var k=Qn,E=Vi(),N=m(),O=!Ut(E.memoizedState,N);if(O&&(E.memoizedState=N,ei=!0),E=E.queue,ok(Y_.bind(null,k,E,h),[h]),E.getSnapshot!==m||O||Ur!==null&&Ur.memoizedState.tag&1){if(k.flags|=2048,$h(9,X_.bind(null,k,E,N,m),void 0,null),Gr===null)throw Error(i(349));Hu&30||K_(k,m,N)}return N}function K_(h,m,k){h.flags|=16384,h={getSnapshot:m,value:k},m=Qn.updateQueue,m===null?(m={lastEffect:null,stores:null},Qn.updateQueue=m,m.stores=[h]):(k=m.stores,k===null?m.stores=[h]:k.push(h))}function X_(h,m,k,E){m.value=k,m.getSnapshot=E,Q_(m)&&Z_(h)}function Y_(h,m,k){return k(function(){Q_(m)&&Z_(h)})}function Q_(h){var m=h.getSnapshot;h=h.value;try{var k=m();return!Ut(h,k)}catch{return!0}}function Z_(h){var m=Yo(h,1);m!==null&&Ui(m,h,1,-1)}function J_(h){var m=Zo();return typeof h=="function"&&(h=h()),m.memoizedState=m.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rh,lastRenderedState:h},m.queue=h,h=h.dispatch=CV.bind(null,Qn,h),[m.memoizedState,h]}function $h(h,m,k,E){return h={tag:h,create:m,destroy:k,deps:E,next:null},m=Qn.updateQueue,m===null?(m={lastEffect:null,stores:null},Qn.updateQueue=m,m.lastEffect=h.next=h):(k=m.lastEffect,k===null?m.lastEffect=h.next=h:(E=k.next,k.next=h,h.next=E,m.lastEffect=h)),h}function e5(){return Vi().memoizedState}function O0(h,m,k,E){var N=Zo();Qn.flags|=h,N.memoizedState=$h(1|m,k,void 0,E===void 0?null:E)}function M0(h,m,k,E){var N=Vi();E=E===void 0?null:E;var O=void 0;if($r!==null){var G=$r.memoizedState;if(O=G.destroy,E!==null&&tk(E,G.deps)){N.memoizedState=$h(m,k,O,E);return}}Qn.flags|=h,N.memoizedState=$h(1|m,k,O,E)}function t5(h,m){return O0(8390656,8,h,m)}function ok(h,m){return M0(2048,8,h,m)}function n5(h,m){return M0(4,2,h,m)}function r5(h,m){return M0(4,4,h,m)}function a5(h,m){if(typeof m=="function")return h=h(),m(h),function(){m(null)};if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function i5(h,m,k){return k=k!=null?k.concat([h]):null,M0(4,4,a5.bind(null,m,h),k)}function sk(){}function o5(h,m){var k=Vi();m=m===void 0?null:m;var E=k.memoizedState;return E!==null&&m!==null&&tk(m,E[1])?E[0]:(k.memoizedState=[h,m],h)}function s5(h,m){var k=Vi();m=m===void 0?null:m;var E=k.memoizedState;return E!==null&&m!==null&&tk(m,E[1])?E[0]:(h=h(),k.memoizedState=[h,m],h)}function l5(h,m,k){return Hu&21?(Ut(k,m)||(k=ae(),Qn.lanes|=k,qu|=k,h.baseState=!0),m):(h.baseState&&(h.baseState=!1,ei=!0),h.memoizedState=k)}function kV(h,m){var k=Te;Te=k!==0&&4>k?k:4,h(!0);var E=ek.transition;ek.transition={};try{h(!1),m()}finally{Te=k,ek.transition=E}}function u5(){return Vi().memoizedState}function SV(h,m,k){var E=Rl(h);if(k={lane:E,action:k,hasEagerState:!1,eagerState:null,next:null},c5(h))d5(m,k);else if(k=P_(h,m,k,E),k!==null){var N=Sa();Ui(k,h,E,N),p5(k,m,E)}}function CV(h,m,k){var E=Rl(h),N={lane:E,action:k,hasEagerState:!1,eagerState:null,next:null};if(c5(h))d5(m,N);else{var O=h.alternate;if(h.lanes===0&&(O===null||O.lanes===0)&&(O=m.lastRenderedReducer,O!==null))try{var G=m.lastRenderedState,le=O(G,k);if(N.hasEagerState=!0,N.eagerState=le,Ut(le,G)){var ye=m.interleaved;ye===null?(N.next=N,Hw(m)):(N.next=ye.next,ye.next=N),m.interleaved=N;return}}catch{}finally{}k=P_(h,m,N,E),k!==null&&(N=Sa(),Ui(k,h,E,N),p5(k,m,E))}}function c5(h){var m=h.alternate;return h===Qn||m!==null&&m===Qn}function d5(h,m){Th=$0=!0;var k=h.pending;k===null?m.next=m:(m.next=k.next,k.next=m),h.pending=m}function p5(h,m,k){if(k&4194240){var E=m.lanes;E&=h.pendingLanes,k|=E,m.lanes=k,$e(h,k)}}var P0={readContext:zi,useCallback:xa,useContext:xa,useEffect:xa,useImperativeHandle:xa,useInsertionEffect:xa,useLayoutEffect:xa,useMemo:xa,useReducer:xa,useRef:xa,useState:xa,useDebugValue:xa,useDeferredValue:xa,useTransition:xa,useMutableSource:xa,useSyncExternalStore:xa,useId:xa,unstable_isNewReconciler:!1},IV={readContext:zi,useCallback:function(h,m){return Zo().memoizedState=[h,m===void 0?null:m],h},useContext:zi,useEffect:t5,useImperativeHandle:function(h,m,k){return k=k!=null?k.concat([h]):null,O0(4194308,4,a5.bind(null,m,h),k)},useLayoutEffect:function(h,m){return O0(4194308,4,h,m)},useInsertionEffect:function(h,m){return O0(4,2,h,m)},useMemo:function(h,m){var k=Zo();return m=m===void 0?null:m,h=h(),k.memoizedState=[h,m],h},useReducer:function(h,m,k){var E=Zo();return m=k!==void 0?k(m):m,E.memoizedState=E.baseState=m,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:m},E.queue=h,h=h.dispatch=SV.bind(null,Qn,h),[E.memoizedState,h]},useRef:function(h){var m=Zo();return h={current:h},m.memoizedState=h},useState:J_,useDebugValue:sk,useDeferredValue:function(h){return Zo().memoizedState=h},useTransition:function(){var h=J_(!1),m=h[0];return h=kV.bind(null,h[1]),Zo().memoizedState=h,[m,h]},useMutableSource:function(){},useSyncExternalStore:function(h,m,k){var E=Qn,N=Zo();if(nn){if(k===void 0)throw Error(i(407));k=k()}else{if(k=m(),Gr===null)throw Error(i(349));Hu&30||K_(E,m,k)}N.memoizedState=k;var O={value:k,getSnapshot:m};return N.queue=O,t5(Y_.bind(null,E,O,h),[h]),E.flags|=2048,$h(9,X_.bind(null,E,O,k,m),void 0,null),k},useId:function(){var h=Zo(),m=Gr.identifierPrefix;if(nn){var k=ta,E=wo;k=(E&~(1<<32-wi(E)-1)).toString(32)+k,m=":"+m+"R"+k,k=_h++,0<k&&(m+="H"+k.toString(32)),m+=":"}else k=wV++,m=":"+m+"r"+k.toString(32)+":";return h.memoizedState=m},unstable_isNewReconciler:!1},EV={readContext:zi,useCallback:o5,useContext:zi,useEffect:ok,useImperativeHandle:i5,useInsertionEffect:n5,useLayoutEffect:r5,useMemo:s5,useReducer:ak,useRef:e5,useState:function(){return ak(Rh)},useDebugValue:sk,useDeferredValue:function(h){var m=Vi();return l5(m,$r.memoizedState,h)},useTransition:function(){var h=ak(Rh)[0],m=Vi().memoizedState;return[h,m]},useMutableSource:H_,useSyncExternalStore:q_,useId:u5,unstable_isNewReconciler:!1},NV={readContext:zi,useCallback:o5,useContext:zi,useEffect:ok,useImperativeHandle:i5,useInsertionEffect:n5,useLayoutEffect:r5,useMemo:s5,useReducer:ik,useRef:e5,useState:function(){return ik(Rh)},useDebugValue:sk,useDeferredValue:function(h){var m=Vi();return $r===null?m.memoizedState=h:l5(m,$r.memoizedState,h)},useTransition:function(){var h=ik(Rh)[0],m=Vi().memoizedState;return[h,m]},useMutableSource:H_,useSyncExternalStore:q_,useId:u5,unstable_isNewReconciler:!1};function Sd(h,m){try{var k="",E=m;do k+=xV(E),E=E.return;while(E);var N=k}catch(O){N=`
Error generating stack: `+O.message+`
`+O.stack}return{value:h,source:m,stack:N,digest:null}}function lk(h,m,k){return{value:h,source:null,stack:k??null,digest:m??null}}function uk(h,m){try{console.error(m.value)}catch(k){setTimeout(function(){throw k})}}var TV=typeof WeakMap=="function"?WeakMap:Map;function h5(h,m,k){k=Os(-1,k),k.tag=3,k.payload={element:null};var E=m.value;return k.callback=function(){K0||(K0=!0,Tk=E),uk(h,m)},k}function f5(h,m,k){k=Os(-1,k),k.tag=3;var E=h.type.getDerivedStateFromError;if(typeof E=="function"){var N=m.value;k.payload=function(){return E(N)},k.callback=function(){uk(h,m)}}var O=h.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(k.callback=function(){uk(h,m),typeof E!="function"&&(Tl===null?Tl=new Set([this]):Tl.add(this));var G=m.stack;this.componentDidCatch(m.value,{componentStack:G!==null?G:""})}),k}function m5(h,m,k){var E=h.pingCache;if(E===null){E=h.pingCache=new TV;var N=new Set;E.set(m,N)}else N=E.get(m),N===void 0&&(N=new Set,E.set(m,N));N.has(k)||(N.add(k),h=VV.bind(null,h,m,k),m.then(h,h))}function g5(h){do{var m;if((m=h.tag===13)&&(m=h.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return h;h=h.return}while(h!==null);return null}function y5(h,m,k,E,N){return h.mode&1?(h.flags|=65536,h.lanes=N,h):(h===m?h.flags|=65536:(h.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(m=Os(-1,1),m.tag=2,Nl(k,m,1))),k.lanes|=1),h)}var _V=o.ReactCurrentOwner,ei=!1;function Ua(h,m,k,E){m.child=h===null?G_(m,null,k,E):xd(m,h.child,k,E)}function b5(h,m,k,E,N){k=k.render;var O=m.ref;return vd(m,N),E=nk(h,m,k,E,O,N),k=rk(),h!==null&&!ei?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~N,Ms(h,m,N)):(nn&&k&&Va(m),m.flags|=1,Ua(h,m,E,N),m.child)}function v5(h,m,k,E,N){if(h===null){var O=k.type;return typeof O=="function"&&!Pk(O)&&O.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(m.tag=15,m.type=O,x5(h,m,O,E,N)):(h=e1(k.type,null,E,m,m.mode,N),h.ref=m.ref,h.return=m,m.child=h)}if(O=h.child,!(h.lanes&N)){var G=O.memoizedProps;if(k=k.compare,k=k!==null?k:k0,k(G,E)&&h.ref===m.ref)return Ms(h,m,N)}return m.flags|=1,h=Ol(O,E),h.ref=m.ref,h.return=m,m.child=h}function x5(h,m,k,E,N){if(h!==null){var O=h.memoizedProps;if(k0(O,E)&&h.ref===m.ref)if(ei=!1,m.pendingProps=E=O,(h.lanes&N)!==0)h.flags&131072&&(ei=!0);else return m.lanes=h.lanes,Ms(h,m,N)}return ck(h,m,k,E,N)}function w5(h,m,k){var E=m.pendingProps,N=E.children,O=h!==null?h.memoizedState:null;if(E.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},mn(Id,ki),ki|=k;else{if(!(k&1073741824))return h=O!==null?O.baseLanes|k:k,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:h,cachePool:null,transitions:null},m.updateQueue=null,mn(Id,ki),ki|=h,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=O!==null?O.baseLanes:k,mn(Id,ki),ki|=E}else O!==null?(E=O.baseLanes|k,m.memoizedState=null):E=k,mn(Id,ki),ki|=E;return Ua(h,m,N,k),m.child}function k5(h,m){var k=m.ref;(h===null&&k!==null||h!==null&&h.ref!==k)&&(m.flags|=512,m.flags|=2097152)}function ck(h,m,k,E,N){var O=ba(k)?Es:Vr.current;return O=Il(m,O),vd(m,N),k=nk(h,m,k,E,O,N),E=rk(),h!==null&&!ei?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~N,Ms(h,m,N)):(nn&&E&&Va(m),m.flags|=1,Ua(h,m,k,N),m.child)}function S5(h,m,k,E,N){if(ba(k)){var O=!0;Xo(m)}else O=!1;if(vd(m,N),m.stateNode===null)D0(h,m),z_(m,k,E),Xw(m,k,E,N),E=!0;else if(h===null){var G=m.stateNode,le=m.memoizedProps;G.props=le;var ye=G.context,Re=k.contextType;typeof Re=="object"&&Re!==null?Re=zi(Re):(Re=ba(k)?Es:Vr.current,Re=Il(m,Re));var qe=k.getDerivedStateFromProps,It=typeof qe=="function"||typeof G.getSnapshotBeforeUpdate=="function";It||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(le!==E||ye!==Re)&&j_(m,G,E,Re),El=!1;var Be=m.memoizedState;G.state=Be,E0(m,E,G,N),ye=m.memoizedState,le!==E||Be!==ye||ya.current||El?(typeof qe=="function"&&(Kw(m,k,qe,E),ye=m.memoizedState),(le=El||B_(m,k,le,E,Be,ye,Re))?(It||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(m.flags|=4194308)):(typeof G.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=E,m.memoizedState=ye),G.props=E,G.state=ye,G.context=Re,E=le):(typeof G.componentDidMount=="function"&&(m.flags|=4194308),E=!1)}else{G=m.stateNode,A_(h,m),le=m.memoizedProps,Re=m.type===m.elementType?le:So(m.type,le),G.props=Re,It=m.pendingProps,Be=G.context,ye=k.contextType,typeof ye=="object"&&ye!==null?ye=zi(ye):(ye=ba(k)?Es:Vr.current,ye=Il(m,ye));var Dn=k.getDerivedStateFromProps;(qe=typeof Dn=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(le!==It||Be!==ye)&&j_(m,G,E,ye),El=!1,Be=m.memoizedState,G.state=Be,E0(m,E,G,N);var kn=m.memoizedState;le!==It||Be!==kn||ya.current||El?(typeof Dn=="function"&&(Kw(m,k,Dn,E),kn=m.memoizedState),(Re=El||B_(m,k,Re,E,Be,kn,ye)||!1)?(qe||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(E,kn,ye),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(E,kn,ye)),typeof G.componentDidUpdate=="function"&&(m.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof G.componentDidUpdate!="function"||le===h.memoizedProps&&Be===h.memoizedState||(m.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||le===h.memoizedProps&&Be===h.memoizedState||(m.flags|=1024),m.memoizedProps=E,m.memoizedState=kn),G.props=E,G.state=kn,G.context=ye,E=Re):(typeof G.componentDidUpdate!="function"||le===h.memoizedProps&&Be===h.memoizedState||(m.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||le===h.memoizedProps&&Be===h.memoizedState||(m.flags|=1024),E=!1)}return dk(h,m,k,E,O,N)}function dk(h,m,k,E,N,O){k5(h,m);var G=(m.flags&128)!==0;if(!E&&!G)return N&&Uu(m,k,!1),Ms(h,m,O);E=m.stateNode,_V.current=m;var le=G&&typeof k.getDerivedStateFromError!="function"?null:E.render();return m.flags|=1,h!==null&&G?(m.child=xd(m,h.child,null,O),m.child=xd(m,null,le,O)):Ua(h,m,le,O),m.memoizedState=E.state,N&&Uu(m,k,!0),m.child}function C5(h){var m=h.stateNode;m.pendingContext?v0(h,m.pendingContext,m.pendingContext!==m.context):m.context&&v0(h,m.context,!1),Yw(h,m.containerInfo)}function I5(h,m,k,E,N){return yd(),jw(N),m.flags|=256,Ua(h,m,k,E),m.child}var pk={dehydrated:null,treeContext:null,retryLane:0};function hk(h){return{baseLanes:h,cachePool:null,transitions:null}}function E5(h,m,k){var E=m.pendingProps,N=Yn.current,O=!1,G=(m.flags&128)!==0,le;if((le=G)||(le=h!==null&&h.memoizedState===null?!1:(N&2)!==0),le?(O=!0,m.flags&=-129):(h===null||h.memoizedState!==null)&&(N|=1),mn(Yn,N&1),h===null)return zw(m),h=m.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(m.mode&1?Pn(h)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(G=E.children,h=E.fallback,O?(E=m.mode,O=m.child,G={mode:"hidden",children:G},!(E&1)&&O!==null?(O.childLanes=0,O.pendingProps=G):O=t1(G,E,0,null),h=Qu(h,E,k,null),O.return=m,h.return=m,O.sibling=h,m.child=O,m.child.memoizedState=hk(k),m.memoizedState=pk,h):fk(m,G));if(N=h.memoizedState,N!==null&&(le=N.dehydrated,le!==null))return RV(h,m,G,E,le,N,k);if(O){O=E.fallback,G=m.mode,N=h.child,le=N.sibling;var ye={mode:"hidden",children:E.children};return!(G&1)&&m.child!==N?(E=m.child,E.childLanes=0,E.pendingProps=ye,m.deletions=null):(E=Ol(N,ye),E.subtreeFlags=N.subtreeFlags&14680064),le!==null?O=Ol(le,O):(O=Qu(O,G,k,null),O.flags|=2),O.return=m,E.return=m,E.sibling=O,m.child=E,E=O,O=m.child,G=h.child.memoizedState,G=G===null?hk(k):{baseLanes:G.baseLanes|k,cachePool:null,transitions:G.transitions},O.memoizedState=G,O.childLanes=h.childLanes&~k,m.memoizedState=pk,E}return O=h.child,h=O.sibling,E=Ol(O,{mode:"visible",children:E.children}),!(m.mode&1)&&(E.lanes=k),E.return=m,E.sibling=null,h!==null&&(k=m.deletions,k===null?(m.deletions=[h],m.flags|=16):k.push(h)),m.child=E,m.memoizedState=null,E}function fk(h,m){return m=t1({mode:"visible",children:m},h.mode,0,null),m.return=h,h.child=m}function A0(h,m,k,E){return E!==null&&jw(E),xd(m,h.child,null,k),h=fk(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function RV(h,m,k,E,N,O,G){if(k)return m.flags&256?(m.flags&=-257,E=lk(Error(i(422))),A0(h,m,G,E)):m.memoizedState!==null?(m.child=h.child,m.flags|=128,null):(O=E.fallback,N=m.mode,E=t1({mode:"visible",children:E.children},N,0,null),O=Qu(O,N,G,null),O.flags|=2,E.return=m,O.return=m,E.sibling=O,m.child=E,m.mode&1&&xd(m,h.child,null,G),m.child.memoizedState=hk(G),m.memoizedState=pk,O);if(!(m.mode&1))return A0(h,m,G,null);if(Pn(N))return E=vt(N).digest,O=Error(i(419)),E=lk(O,E,void 0),A0(h,m,G,E);if(k=(G&h.childLanes)!==0,ei||k){if(E=Gr,E!==null){switch(G&-G){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=N&(E.suspendedLanes|G)?0:N,N!==0&&N!==O.retryLane&&(O.retryLane=N,Yo(h,N),Ui(E,h,N,-1))}return Mk(),E=lk(Error(i(421))),A0(h,m,G,E)}return Ot(N)?(m.flags|=128,m.child=h.child,m=UV.bind(null,h),un(N,m),null):(h=O.treeContext,_e&&(na=hr(N),ir=m,nn=!0,ko=null,$s=!1,h!==null&&(dn[Rn++]=wo,dn[Rn++]=ta,dn[Rn++]=ea,wo=h.id,ta=h.overflow,ea=m)),m=fk(m,E.children),m.flags|=4096,m)}function N5(h,m,k){h.lanes|=m;var E=h.alternate;E!==null&&(E.lanes|=m),Ww(h.return,m,k)}function mk(h,m,k,E,N){var O=h.memoizedState;O===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:E,tail:k,tailMode:N}:(O.isBackwards=m,O.rendering=null,O.renderingStartTime=0,O.last=E,O.tail=k,O.tailMode=N)}function T5(h,m,k){var E=m.pendingProps,N=E.revealOrder,O=E.tail;if(Ua(h,m,E.children,k),E=Yn.current,E&2)E=E&1|2,m.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&N5(h,k,m);else if(h.tag===19)N5(h,k,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}E&=1}if(mn(Yn,E),!(m.mode&1))m.memoizedState=null;else switch(N){case"forwards":for(k=m.child,N=null;k!==null;)h=k.alternate,h!==null&&_0(h)===null&&(N=k),k=k.sibling;k=N,k===null?(N=m.child,m.child=null):(N=k.sibling,k.sibling=null),mk(m,!1,N,k,O);break;case"backwards":for(k=null,N=m.child,m.child=null;N!==null;){if(h=N.alternate,h!==null&&_0(h)===null){m.child=N;break}h=N.sibling,N.sibling=k,k=N,N=h}mk(m,!0,k,null,O);break;case"together":mk(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function D0(h,m){!(m.mode&1)&&h!==null&&(h.alternate=null,m.alternate=null,m.flags|=2)}function Ms(h,m,k){if(h!==null&&(m.dependencies=h.dependencies),qu|=m.lanes,!(k&m.childLanes))return null;if(h!==null&&m.child!==h.child)throw Error(i(153));if(m.child!==null){for(h=m.child,k=Ol(h,h.pendingProps),m.child=k,k.return=m;h.sibling!==null;)h=h.sibling,k=k.sibling=Ol(h,h.pendingProps),k.return=m;k.sibling=null}return m.child}function $V(h,m,k){switch(m.tag){case 3:C5(m),yd();break;case 5:W_(m);break;case 1:ba(m.type)&&Xo(m);break;case 4:Yw(m,m.stateNode.containerInfo);break;case 10:M_(m,m.type._context,m.memoizedProps.value);break;case 13:var E=m.memoizedState;if(E!==null)return E.dehydrated!==null?(mn(Yn,Yn.current&1),m.flags|=128,null):k&m.child.childLanes?E5(h,m,k):(mn(Yn,Yn.current&1),h=Ms(h,m,k),h!==null?h.sibling:null);mn(Yn,Yn.current&1);break;case 19:if(E=(k&m.childLanes)!==0,h.flags&128){if(E)return T5(h,m,k);m.flags|=128}var N=m.memoizedState;if(N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),mn(Yn,Yn.current),E)break;return null;case 22:case 23:return m.lanes=0,w5(h,m,k)}return Ms(h,m,k)}function Jo(h){h.flags|=4}function _5(h,m){if(h!==null&&h.child===m.child)return!0;if(m.flags&16)return!1;for(h=m.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var Oh,Mh,L0,F0;if(Ie)Oh=function(h,m){for(var k=m.child;k!==null;){if(k.tag===5||k.tag===6)ne(h,k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===m)break;for(;k.sibling===null;){if(k.return===null||k.return===m)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},Mh=function(){},L0=function(h,m,k,E,N){if(h=h.memoizedProps,h!==E){var O=m.stateNode,G=Qo(ji.current);k=pe(O,k,h,E,N,G),(m.updateQueue=k)&&Jo(m)}},F0=function(h,m,k,E){k!==E&&Jo(m)};else if(Ee){Oh=function(h,m,k,E){for(var N=m.child;N!==null;){if(N.tag===5){var O=N.stateNode;k&&E&&(O=We(O,N.type,N.memoizedProps,N)),ne(h,O)}else if(N.tag===6)O=N.stateNode,k&&E&&(O=yt(O,N.memoizedProps,N)),ne(h,O);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)O=N.child,O!==null&&(O.return=N),Oh(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===m)break;for(;N.sibling===null;){if(N.return===null||N.return===m)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var R5=function(h,m,k,E){for(var N=m.child;N!==null;){if(N.tag===5){var O=N.stateNode;k&&E&&(O=We(O,N.type,N.memoizedProps,N)),me(h,O)}else if(N.tag===6)O=N.stateNode,k&&E&&(O=yt(O,N.memoizedProps,N)),me(h,O);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)O=N.child,O!==null&&(O.return=N),R5(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===m)break;for(;N.sibling===null;){if(N.return===null||N.return===m)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};Mh=function(h,m){var k=m.stateNode;if(!_5(h,m)){h=k.containerInfo;var E=ue(h);R5(E,m,!1,!1),k.pendingChildren=E,Jo(m),ke(h,E)}},L0=function(h,m,k,E,N){var O=h.stateNode,G=h.memoizedProps;if((h=_5(h,m))&&G===E)m.stateNode=O;else{var le=m.stateNode,ye=Qo(ji.current),Re=null;G!==E&&(Re=pe(le,k,G,E,N,ye)),h&&Re===null?m.stateNode=O:(O=Vt(O,Re,k,G,E,m,h,le),se(O,k,E,N,ye)&&Jo(m),m.stateNode=O,h?Jo(m):Oh(O,m,!1,!1))}},F0=function(h,m,k,E){k!==E?(h=Qo(wd.current),k=Qo(ji.current),m.stateNode=ie(E,h,k,m),Jo(m)):m.stateNode=h.stateNode}}else Mh=function(){},L0=function(){},F0=function(){};function Ph(h,m){if(!nn)switch(h.tailMode){case"hidden":m=h.tail;for(var k=null;m!==null;)m.alternate!==null&&(k=m),m=m.sibling;k===null?h.tail=null:k.sibling=null;break;case"collapsed":k=h.tail;for(var E=null;k!==null;)k.alternate!==null&&(E=k),k=k.sibling;E===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:E.sibling=null}}function wa(h){var m=h.alternate!==null&&h.alternate.child===h.child,k=0,E=0;if(m)for(var N=h.child;N!==null;)k|=N.lanes|N.childLanes,E|=N.subtreeFlags&14680064,E|=N.flags&14680064,N.return=h,N=N.sibling;else for(N=h.child;N!==null;)k|=N.lanes|N.childLanes,E|=N.subtreeFlags,E|=N.flags,N.return=h,N=N.sibling;return h.subtreeFlags|=E,h.childLanes=k,m}function OV(h,m,k){var E=m.pendingProps;switch(Rs(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wa(m),null;case 1:return ba(m.type)&&md(),wa(m),null;case 3:return k=m.stateNode,kd(),wn(ya),wn(Vr),Jw(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(h===null||h.child===null)&&(w0(m)?Jo(m):h===null||h.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,ko!==null&&($k(ko),ko=null))),Mh(h,m),wa(m),null;case 5:Qw(m),k=Qo(wd.current);var N=m.type;if(h!==null&&m.stateNode!=null)L0(h,m,N,E,k),h.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!E){if(m.stateNode===null)throw Error(i(166));return wa(m),null}if(h=Qo(ji.current),w0(m)){if(!_e)throw Error(i(175));h=qo(m.stateNode,m.type,m.memoizedProps,k,h,m,!$s),m.updateQueue=h,h!==null&&Jo(m)}else{var O=Q(N,E,k,h,m);Oh(O,m,!1,!1),m.stateNode=O,se(O,N,E,k,h)&&Jo(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return wa(m),null;case 6:if(h&&m.stateNode!=null)F0(h,m,h.memoizedProps,E);else{if(typeof E!="string"&&m.stateNode===null)throw Error(i(166));if(h=Qo(wd.current),k=Qo(ji.current),w0(m)){if(!_e)throw Error(i(176));if(h=m.stateNode,k=m.memoizedProps,(E=Li(h,k,m,!$s))&&(N=ir,N!==null))switch(N.tag){case 3:tn(N.stateNode.containerInfo,h,k,(N.mode&1)!==0);break;case 5:cn(N.type,N.memoizedProps,N.stateNode,h,k,(N.mode&1)!==0)}E&&Jo(m)}else m.stateNode=ie(E,h,k,m)}return wa(m),null;case 13:if(wn(Yn),E=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(nn&&na!==null&&m.mode&1&&!(m.flags&128))O_(),yd(),m.flags|=98560,N=!1;else if(N=w0(m),E!==null&&E.dehydrated!==null){if(h===null){if(!N)throw Error(i(318));if(!_e)throw Error(i(344));if(N=m.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(i(317));ga(N,m)}else yd(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;wa(m),N=!1}else ko!==null&&($k(ko),ko=null),N=!0;if(!N)return m.flags&65536?m:null}return m.flags&128?(m.lanes=k,m):(k=E!==null,k!==(h!==null&&h.memoizedState!==null)&&k&&(m.child.flags|=8192,m.mode&1&&(h===null||Yn.current&1?Or===0&&(Or=3):Mk())),m.updateQueue!==null&&(m.flags|=4),wa(m),null);case 4:return kd(),Mh(h,m),h===null&&Xe(m.stateNode.containerInfo),wa(m),null;case 10:return Gw(m.type._context),wa(m),null;case 17:return ba(m.type)&&md(),wa(m),null;case 19:if(wn(Yn),N=m.memoizedState,N===null)return wa(m),null;if(E=(m.flags&128)!==0,O=N.rendering,O===null)if(E)Ph(N,!1);else{if(Or!==0||h!==null&&h.flags&128)for(h=m.child;h!==null;){if(O=_0(h),O!==null){for(m.flags|=128,Ph(N,!1),h=O.updateQueue,h!==null&&(m.updateQueue=h,m.flags|=4),m.subtreeFlags=0,h=k,k=m.child;k!==null;)E=k,N=h,E.flags&=14680066,O=E.alternate,O===null?(E.childLanes=0,E.lanes=N,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=O.childLanes,E.lanes=O.lanes,E.child=O.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=O.memoizedProps,E.memoizedState=O.memoizedState,E.updateQueue=O.updateQueue,E.type=O.type,N=O.dependencies,E.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),k=k.sibling;return mn(Yn,Yn.current&1|2),m.child}h=h.sibling}N.tail!==null&&Ke()>Nk&&(m.flags|=128,E=!0,Ph(N,!1),m.lanes=4194304)}else{if(!E)if(h=_0(O),h!==null){if(m.flags|=128,E=!0,h=h.updateQueue,h!==null&&(m.updateQueue=h,m.flags|=4),Ph(N,!0),N.tail===null&&N.tailMode==="hidden"&&!O.alternate&&!nn)return wa(m),null}else 2*Ke()-N.renderingStartTime>Nk&&k!==1073741824&&(m.flags|=128,E=!0,Ph(N,!1),m.lanes=4194304);N.isBackwards?(O.sibling=m.child,m.child=O):(h=N.last,h!==null?h.sibling=O:m.child=O,N.last=O)}return N.tail!==null?(m=N.tail,N.rendering=m,N.tail=m.sibling,N.renderingStartTime=Ke(),m.sibling=null,h=Yn.current,mn(Yn,E?h&1|2:h&1),m):(wa(m),null);case 22:case 23:return Ok(),k=m.memoizedState!==null,h!==null&&h.memoizedState!==null!==k&&(m.flags|=8192),k&&m.mode&1?ki&1073741824&&(wa(m),Ie&&m.subtreeFlags&6&&(m.flags|=8192)):wa(m),null;case 24:return null;case 25:return null}throw Error(i(156,m.tag))}function MV(h,m){switch(Rs(m),m.tag){case 1:return ba(m.type)&&md(),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return kd(),wn(ya),wn(Vr),Jw(),h=m.flags,h&65536&&!(h&128)?(m.flags=h&-65537|128,m):null;case 5:return Qw(m),null;case 13:if(wn(Yn),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(i(340));yd()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return wn(Yn),null;case 4:return kd(),null;case 10:return Gw(m.type._context),null;case 22:case 23:return Ok(),null;case 24:return null;default:return null}}var B0=!1,ka=!1,PV=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function Cd(h,m){var k=h.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(E){Un(h,m,E)}else k.current=null}function $5(h,m,k){try{k()}catch(E){Un(h,m,E)}}var O5=!1;function AV(h,m){for(F(h.containerInfo),Ve=m;Ve!==null;)if(h=Ve,m=h.child,(h.subtreeFlags&1028)!==0&&m!==null)m.return=h,Ve=m;else for(;Ve!==null;){h=Ve;try{var k=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var E=k.memoizedProps,N=k.memoizedState,O=h.stateNode,G=O.getSnapshotBeforeUpdate(h.elementType===h.type?E:So(h.type,E),N);O.__reactInternalSnapshotBeforeUpdate=G}break;case 3:Ie&&Ho(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(le){Un(h,h.return,le)}if(m=h.sibling,m!==null){m.return=h.return,Ve=m;break}Ve=h.return}return k=O5,O5=!1,k}function Ah(h,m,k){var E=m.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var N=E=E.next;do{if((N.tag&h)===h){var O=N.destroy;N.destroy=void 0,O!==void 0&&$5(m,k,O)}N=N.next}while(N!==E)}}function z0(h,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var k=m=m.next;do{if((k.tag&h)===h){var E=k.create;k.destroy=E()}k=k.next}while(k!==m)}}function gk(h){var m=h.ref;if(m!==null){var k=h.stateNode;switch(h.tag){case 5:h=X(k);break;default:h=k}typeof m=="function"?m(h):m.current=h}}function M5(h){var m=h.alternate;m!==null&&(h.alternate=null,M5(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&lt(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function P5(h){return h.tag===5||h.tag===3||h.tag===4}function A5(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||P5(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function yk(h,m,k){var E=h.tag;if(E===5||E===6)h=h.stateNode,m?hn(k,h,m):za(k,h);else if(E!==4&&(h=h.child,h!==null))for(yk(h,m,k),h=h.sibling;h!==null;)yk(h,m,k),h=h.sibling}function bk(h,m,k){var E=h.tag;if(E===5||E===6)h=h.stateNode,m?bi(k,h,m):Xn(k,h);else if(E!==4&&(h=h.child,h!==null))for(bk(h,m,k),h=h.sibling;h!==null;)bk(h,m,k),h=h.sibling}var ra=null,Co=!1;function es(h,m,k){for(k=k.child;k!==null;)vk(h,m,k),k=k.sibling}function vk(h,m,k){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(st,k)}catch{}switch(k.tag){case 5:ka||Cd(k,m);case 6:if(Ie){var E=ra,N=Co;ra=null,es(h,m,k),ra=E,Co=N,ra!==null&&(Co?vi(ra,k.stateNode):Za(ra,k.stateNode))}else es(h,m,k);break;case 18:Ie&&ra!==null&&(Co?Ko(ra,k.stateNode):kl(ra,k.stateNode));break;case 4:Ie?(E=ra,N=Co,ra=k.stateNode.containerInfo,Co=!0,es(h,m,k),ra=E,Co=N):(Ee&&(E=k.stateNode.containerInfo,N=ue(E),Me(E,N)),es(h,m,k));break;case 0:case 11:case 14:case 15:if(!ka&&(E=k.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){N=E=E.next;do{var O=N,G=O.destroy;O=O.tag,G!==void 0&&(O&2||O&4)&&$5(k,m,G),N=N.next}while(N!==E)}es(h,m,k);break;case 1:if(!ka&&(Cd(k,m),E=k.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=k.memoizedProps,E.state=k.memoizedState,E.componentWillUnmount()}catch(le){Un(k,m,le)}es(h,m,k);break;case 21:es(h,m,k);break;case 22:k.mode&1?(ka=(E=ka)||k.memoizedState!==null,es(h,m,k),ka=E):es(h,m,k);break;default:es(h,m,k)}}function D5(h){var m=h.updateQueue;if(m!==null){h.updateQueue=null;var k=h.stateNode;k===null&&(k=h.stateNode=new PV),m.forEach(function(E){var N=GV.bind(null,h,E);k.has(E)||(k.add(E),E.then(N,N))})}}function Io(h,m){var k=m.deletions;if(k!==null)for(var E=0;E<k.length;E++){var N=k[E];try{var O=h,G=m;if(Ie){var le=G;e:for(;le!==null;){switch(le.tag){case 5:ra=le.stateNode,Co=!1;break e;case 3:ra=le.stateNode.containerInfo,Co=!0;break e;case 4:ra=le.stateNode.containerInfo,Co=!0;break e}le=le.return}if(ra===null)throw Error(i(160));vk(O,G,N),ra=null,Co=!1}else vk(O,G,N);var ye=N.alternate;ye!==null&&(ye.return=null),N.return=null}catch(Re){Un(N,m,Re)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)L5(m,h),m=m.sibling}function L5(h,m){var k=h.alternate,E=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(Io(m,h),ts(h),E&4){try{Ah(3,h,h.return),z0(3,h)}catch(Be){Un(h,h.return,Be)}try{Ah(5,h,h.return)}catch(Be){Un(h,h.return,Be)}}break;case 1:Io(m,h),ts(h),E&512&&k!==null&&Cd(k,k.return);break;case 5:if(Io(m,h),ts(h),E&512&&k!==null&&Cd(k,k.return),Ie){if(h.flags&32){var N=h.stateNode;try{xi(N)}catch(Be){Un(h,h.return,Be)}}if(E&4&&(N=h.stateNode,N!=null)){var O=h.memoizedProps;if(k=k!==null?k.memoizedProps:O,E=h.type,m=h.updateQueue,h.updateQueue=null,m!==null)try{yo(N,m,E,k,O,h)}catch(Be){Un(h,h.return,Be)}}}break;case 6:if(Io(m,h),ts(h),E&4&&Ie){if(h.stateNode===null)throw Error(i(162));N=h.stateNode,O=h.memoizedProps,k=k!==null?k.memoizedProps:O;try{_n(N,k,O)}catch(Be){Un(h,h.return,Be)}}break;case 3:if(Io(m,h),ts(h),E&4){if(Ie&&_e&&k!==null&&k.memoizedState.isDehydrated)try{zu(m.containerInfo)}catch(Be){Un(h,h.return,Be)}if(Ee){N=m.containerInfo,O=m.pendingChildren;try{Me(N,O)}catch(Be){Un(h,h.return,Be)}}}break;case 4:if(Io(m,h),ts(h),E&4&&Ee){O=h.stateNode,N=O.containerInfo,O=O.pendingChildren;try{Me(N,O)}catch(Be){Un(h,h.return,Be)}}break;case 13:Io(m,h),ts(h),N=h.child,N.flags&8192&&(O=N.memoizedState!==null,N.stateNode.isHidden=O,!O||N.alternate!==null&&N.alternate.memoizedState!==null||(Ek=Ke())),E&4&&D5(h);break;case 22:var G=k!==null&&k.memoizedState!==null;if(h.mode&1?(ka=(k=ka)||G,Io(m,h),ka=k):Io(m,h),ts(h),E&8192){if(k=h.memoizedState!==null,(h.stateNode.isHidden=k)&&!G&&h.mode&1)for(Ve=h,E=h.child;E!==null;){for(m=Ve=E;Ve!==null;){G=Ve;var le=G.child;switch(G.tag){case 0:case 11:case 14:case 15:Ah(4,G,G.return);break;case 1:Cd(G,G.return);var ye=G.stateNode;if(typeof ye.componentWillUnmount=="function"){var Re=G,qe=G.return;try{var It=Re;ye.props=It.memoizedProps,ye.state=It.memoizedState,ye.componentWillUnmount()}catch(Be){Un(Re,qe,Be)}}break;case 5:Cd(G,G.return);break;case 22:if(G.memoizedState!==null){z5(m);continue}}le!==null?(le.return=G,Ve=le):z5(m)}E=E.sibling}if(Ie){e:if(E=null,Ie)for(m=h;;){if(m.tag===5){if(E===null){E=m;try{N=m.stateNode,k?Is(N):wl(m.stateNode,m.memoizedProps)}catch(Be){Un(h,h.return,Be)}}}else if(m.tag===6){if(E===null)try{O=m.stateNode,k?ma(O):fd(O,m.memoizedProps)}catch(Be){Un(h,h.return,Be)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;E===m&&(E=null),m=m.return}E===m&&(E=null),m.sibling.return=m.return,m=m.sibling}}}break;case 19:Io(m,h),ts(h),E&4&&D5(h);break;case 21:break;default:Io(m,h),ts(h)}}function ts(h){var m=h.flags;if(m&2){try{if(Ie){e:{for(var k=h.return;k!==null;){if(P5(k)){var E=k;break e}k=k.return}throw Error(i(160))}switch(E.tag){case 5:var N=E.stateNode;E.flags&32&&(xi(N),E.flags&=-33);var O=A5(h);bk(h,O,N);break;case 3:case 4:var G=E.stateNode.containerInfo,le=A5(h);yk(h,le,G);break;default:throw Error(i(161))}}}catch(ye){Un(h,h.return,ye)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function DV(h,m,k){Ve=h,F5(h)}function F5(h,m,k){for(var E=(h.mode&1)!==0;Ve!==null;){var N=Ve,O=N.child;if(N.tag===22&&E){var G=N.memoizedState!==null||B0;if(!G){var le=N.alternate,ye=le!==null&&le.memoizedState!==null||ka;le=B0;var Re=ka;if(B0=G,(ka=ye)&&!Re)for(Ve=N;Ve!==null;)G=Ve,ye=G.child,G.tag===22&&G.memoizedState!==null?j5(N):ye!==null?(ye.return=G,Ve=ye):j5(N);for(;O!==null;)Ve=O,F5(O),O=O.sibling;Ve=N,B0=le,ka=Re}B5(h)}else N.subtreeFlags&8772&&O!==null?(O.return=N,Ve=O):B5(h)}}function B5(h){for(;Ve!==null;){var m=Ve;if(m.flags&8772){var k=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:ka||z0(5,m);break;case 1:var E=m.stateNode;if(m.flags&4&&!ka)if(k===null)E.componentDidMount();else{var N=m.elementType===m.type?k.memoizedProps:So(m.type,k.memoizedProps);E.componentDidUpdate(N,k.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var O=m.updateQueue;O!==null&&L_(m,O,E);break;case 3:var G=m.updateQueue;if(G!==null){if(k=null,m.child!==null)switch(m.child.tag){case 5:k=X(m.child.stateNode);break;case 1:k=m.child.stateNode}L_(m,G,k)}break;case 5:var le=m.stateNode;k===null&&m.flags&4&&Qa(le,m.type,m.memoizedProps,m);break;case 6:break;case 4:break;case 12:break;case 13:if(_e&&m.memoizedState===null){var ye=m.alternate;if(ye!==null){var Re=ye.memoizedState;if(Re!==null){var qe=Re.dehydrated;qe!==null&&ju(qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}ka||m.flags&512&&gk(m)}catch(It){Un(m,m.return,It)}}if(m===h){Ve=null;break}if(k=m.sibling,k!==null){k.return=m.return,Ve=k;break}Ve=m.return}}function z5(h){for(;Ve!==null;){var m=Ve;if(m===h){Ve=null;break}var k=m.sibling;if(k!==null){k.return=m.return,Ve=k;break}Ve=m.return}}function j5(h){for(;Ve!==null;){var m=Ve;try{switch(m.tag){case 0:case 11:case 15:var k=m.return;try{z0(4,m)}catch(ye){Un(m,k,ye)}break;case 1:var E=m.stateNode;if(typeof E.componentDidMount=="function"){var N=m.return;try{E.componentDidMount()}catch(ye){Un(m,N,ye)}}var O=m.return;try{gk(m)}catch(ye){Un(m,O,ye)}break;case 5:var G=m.return;try{gk(m)}catch(ye){Un(m,G,ye)}}}catch(ye){Un(m,m.return,ye)}if(m===h){Ve=null;break}var le=m.sibling;if(le!==null){le.return=m.return,Ve=le;break}Ve=m.return}}var j0=0,V0=1,U0=2,G0=3,W0=4;if(typeof Symbol=="function"&&Symbol.for){var Dh=Symbol.for;j0=Dh("selector.component"),V0=Dh("selector.has_pseudo_class"),U0=Dh("selector.role"),G0=Dh("selector.test_id"),W0=Dh("selector.text")}function xk(h){var m=Fe(h);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(i(364));return m}if(h=on(h),h===null)throw Error(i(362));return h.stateNode.current}function wk(h,m){switch(m.$$typeof){case j0:if(h.type===m.value)return!0;break;case V0:e:{m=m.value,h=[h,0];for(var k=0;k<h.length;){var E=h[k++],N=h[k++],O=m[N];if(E.tag!==5||!Qt(E)){for(;O!=null&&wk(E,O);)N++,O=m[N];if(N===m.length){m=!0;break e}else for(E=E.child;E!==null;)h.push(E,N),E=E.sibling}}m=!1}return m;case U0:if(h.tag===5&&$t(h.stateNode,m.value))return!0;break;case W0:if((h.tag===5||h.tag===6)&&(h=Yt(h),h!==null&&0<=h.indexOf(m.value)))return!0;break;case G0:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function kk(h){switch(h.$$typeof){case j0:return"<"+(I(h.value)||"Unknown")+">";case V0:return":has("+(kk(h)||"")+")";case U0:return'[role="'+h.value+'"]';case W0:return'"'+h.value+'"';case G0:return'[data-testname="'+h.value+'"]';default:throw Error(i(365))}}function V5(h,m){var k=[];h=[h,0];for(var E=0;E<h.length;){var N=h[E++],O=h[E++],G=m[O];if(N.tag!==5||!Qt(N)){for(;G!=null&&wk(N,G);)O++,G=m[O];if(O===m.length)k.push(N);else for(N=N.child;N!==null;)h.push(N,O),N=N.sibling}}return k}function Sk(h,m){if(!et)throw Error(i(363));h=xk(h),h=V5(h,m),m=[],h=Array.from(h);for(var k=0;k<h.length;){var E=h[k++];if(E.tag===5)Qt(E)||m.push(E.stateNode);else for(E=E.child;E!==null;)h.push(E),E=E.sibling}return m}var LV=Math.ceil,H0=o.ReactCurrentDispatcher,Ck=o.ReactCurrentOwner,fr=o.ReactCurrentBatchConfig,Bt=0,Gr=null,Cr=null,aa=0,ki=0,Id=Fi(0),Or=0,Lh=null,qu=0,q0=0,Ik=0,Fh=null,ti=null,Ek=0,Nk=1/0,Ps=null;function Ed(){Nk=Ke()+500}var K0=!1,Tk=null,Tl=null,X0=!1,_l=null,Y0=0,Bh=0,_k=null,Q0=-1,Z0=0;function Sa(){return Bt&6?Ke():Q0!==-1?Q0:Q0=Ke()}function Rl(h){return h.mode&1?Bt&2&&aa!==0?aa&-aa:vV.transition!==null?(Z0===0&&(Z0=ae()),Z0):(h=Te,h!==0?h:Oe()):1}function Ui(h,m,k,E){if(50<Bh)throw Bh=0,_k=null,Error(i(185));Ce(h,k,E),(!(Bt&2)||h!==Gr)&&(h===Gr&&(!(Bt&2)&&(q0|=k),Or===4&&$l(h,aa)),ni(h,E),k===1&&Bt===0&&!(m.mode&1)&&(Ed(),An&&wr()))}function ni(h,m){var k=h.callbackNode;U(h,m);var E=Ts(h,h===Gr?aa:0);if(E===0)k!==null&&rt(k),h.callbackNode=null,h.callbackPriority=0;else if(m=E&-E,h.callbackPriority!==m){if(k!=null&&rt(k),m===1)h.tag===0?xo(G5.bind(null,h)):ja(G5.bind(null,h)),Je?nt(function(){!(Bt&6)&&wr()}):mt(ct,wr),k=null;else{switch(je(E)){case 1:k=ct;break;case 4:k=pt;break;case 16:k=at;break;case 536870912:k=wt;break;default:k=at}k=J5(k,U5.bind(null,h))}h.callbackPriority=m,h.callbackNode=k}}function U5(h,m){if(Q0=-1,Z0=0,Bt&6)throw Error(i(327));var k=h.callbackNode;if(Yu()&&h.callbackNode!==k)return null;var E=Ts(h,h===Gr?aa:0);if(E===0)return null;if(E&30||E&h.expiredLanes||m)m=J0(h,E);else{m=E;var N=Bt;Bt|=2;var O=q5();(Gr!==h||aa!==m)&&(Ps=null,Ed(),Ku(h,m));do try{zV();break}catch(le){H5(h,le)}while(!0);Uw(),H0.current=O,Bt=N,Cr!==null?m=0:(Gr=null,aa=0,m=Or)}if(m!==0){if(m===2&&(N=J(h),N!==0&&(E=N,m=Rk(h,N))),m===1)throw k=Lh,Ku(h,0),$l(h,E),ni(h,Ke()),k;if(m===6)$l(h,E);else{if(N=h.current.alternate,!(E&30)&&!FV(N)&&(m=J0(h,E),m===2&&(O=J(h),O!==0&&(E=O,m=Rk(h,O))),m===1))throw k=Lh,Ku(h,0),$l(h,E),ni(h,Ke()),k;switch(h.finishedWork=N,h.finishedLanes=E,m){case 0:case 1:throw Error(i(345));case 2:Xu(h,ti,Ps);break;case 3:if($l(h,E),(E&130023424)===E&&(m=Ek+500-Ke(),10<m)){if(Ts(h,0)!==0)break;if(N=h.suspendedLanes,(N&E)!==E){Sa(),h.pingedLanes|=h.suspendedLanes&N;break}h.timeoutHandle=xe(Xu.bind(null,h,ti,Ps),m);break}Xu(h,ti,Ps);break;case 4:if($l(h,E),(E&4194240)===E)break;for(m=h.eventTimes,N=-1;0<E;){var G=31-wi(E);O=1<<G,G=m[G],G>N&&(N=G),E&=~O}if(E=N,E=Ke()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*LV(E/1960))-E,10<E){h.timeoutHandle=xe(Xu.bind(null,h,ti,Ps),E);break}Xu(h,ti,Ps);break;case 5:Xu(h,ti,Ps);break;default:throw Error(i(329))}}}return ni(h,Ke()),h.callbackNode===k?U5.bind(null,h):null}function Rk(h,m){var k=Fh;return h.current.memoizedState.isDehydrated&&(Ku(h,m).flags|=256),h=J0(h,m),h!==2&&(m=ti,ti=k,m!==null&&$k(m)),h}function $k(h){ti===null?ti=h:ti.push.apply(ti,h)}function FV(h){for(var m=h;;){if(m.flags&16384){var k=m.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var E=0;E<k.length;E++){var N=k[E],O=N.getSnapshot;N=N.value;try{if(!Ut(O(),N))return!1}catch{return!1}}}if(k=m.child,m.subtreeFlags&16384&&k!==null)k.return=m,m=k;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function $l(h,m){for(m&=~Ik,m&=~q0,h.suspendedLanes|=m,h.pingedLanes&=~m,h=h.expirationTimes;0<m;){var k=31-wi(m),E=1<<k;h[k]=-1,m&=~E}}function G5(h){if(Bt&6)throw Error(i(327));Yu();var m=Ts(h,0);if(!(m&1))return ni(h,Ke()),null;var k=J0(h,m);if(h.tag!==0&&k===2){var E=J(h);E!==0&&(m=E,k=Rk(h,E))}if(k===1)throw k=Lh,Ku(h,0),$l(h,m),ni(h,Ke()),k;if(k===6)throw Error(i(345));return h.finishedWork=h.current.alternate,h.finishedLanes=m,Xu(h,ti,Ps),ni(h,Ke()),null}function W5(h){_l!==null&&_l.tag===0&&!(Bt&6)&&Yu();var m=Bt;Bt|=1;var k=fr.transition,E=Te;try{if(fr.transition=null,Te=1,h)return h()}finally{Te=E,fr.transition=k,Bt=m,!(Bt&6)&&wr()}}function Ok(){ki=Id.current,wn(Id)}function Ku(h,m){h.finishedWork=null,h.finishedLanes=0;var k=h.timeoutHandle;if(k!==oe&&(h.timeoutHandle=oe,q(k)),Cr!==null)for(k=Cr.return;k!==null;){var E=k;switch(Rs(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&md();break;case 3:kd(),wn(ya),wn(Vr),Jw();break;case 5:Qw(E);break;case 4:kd();break;case 13:wn(Yn);break;case 19:wn(Yn);break;case 10:Gw(E.type._context);break;case 22:case 23:Ok()}k=k.return}if(Gr=h,Cr=h=Ol(h.current,null),aa=ki=m,Or=0,Lh=null,Ik=q0=qu=0,ti=Fh=null,Wu!==null){for(m=0;m<Wu.length;m++)if(k=Wu[m],E=k.interleaved,E!==null){k.interleaved=null;var N=E.next,O=k.pending;if(O!==null){var G=O.next;O.next=N,E.next=G}k.pending=E}Wu=null}return h}function H5(h,m){do{var k=Cr;try{if(Uw(),R0.current=P0,$0){for(var E=Qn.memoizedState;E!==null;){var N=E.queue;N!==null&&(N.pending=null),E=E.next}$0=!1}if(Hu=0,Ur=$r=Qn=null,Th=!1,_h=0,Ck.current=null,k===null||k.return===null){Or=1,Lh=m,Cr=null;break}e:{var O=h,G=k.return,le=k,ye=m;if(m=aa,le.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Re=ye,qe=le,It=qe.tag;if(!(qe.mode&1)&&(It===0||It===11||It===15)){var Be=qe.alternate;Be?(qe.updateQueue=Be.updateQueue,qe.memoizedState=Be.memoizedState,qe.lanes=Be.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var Dn=g5(G);if(Dn!==null){Dn.flags&=-257,y5(Dn,G,le,O,m),Dn.mode&1&&m5(O,Re,m),m=Dn,ye=Re;var kn=m.updateQueue;if(kn===null){var ri=new Set;ri.add(ye),m.updateQueue=ri}else kn.add(ye);break e}else{if(!(m&1)){m5(O,Re,m),Mk();break e}ye=Error(i(426))}}else if(nn&&le.mode&1){var As=g5(G);if(As!==null){!(As.flags&65536)&&(As.flags|=256),y5(As,G,le,O,m),jw(Sd(ye,le));break e}}O=ye=Sd(ye,le),Or!==4&&(Or=2),Fh===null?Fh=[O]:Fh.push(O),O=G;do{switch(O.tag){case 3:O.flags|=65536,m&=-m,O.lanes|=m;var ge=h5(O,ye,m);D_(O,ge);break e;case 1:le=ye;var ce=O.type,we=O.stateNode;if(!(O.flags&128)&&(typeof ce.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(Tl===null||!Tl.has(we)))){O.flags|=65536,m&=-m,O.lanes|=m;var ze=f5(O,le,m);D_(O,ze);break e}}O=O.return}while(O!==null)}X5(k)}catch(dt){m=dt,Cr===k&&k!==null&&(Cr=k=k.return);continue}break}while(!0)}function q5(){var h=H0.current;return H0.current=P0,h===null?P0:h}function Mk(){(Or===0||Or===3||Or===2)&&(Or=4),Gr===null||!(qu&268435455)&&!(q0&268435455)||$l(Gr,aa)}function J0(h,m){var k=Bt;Bt|=2;var E=q5();(Gr!==h||aa!==m)&&(Ps=null,Ku(h,m));do try{BV();break}catch(N){H5(h,N)}while(!0);if(Uw(),Bt=k,H0.current=E,Cr!==null)throw Error(i(261));return Gr=null,aa=0,Or}function BV(){for(;Cr!==null;)K5(Cr)}function zV(){for(;Cr!==null&&!Rt();)K5(Cr)}function K5(h){var m=Z5(h.alternate,h,ki);h.memoizedProps=h.pendingProps,m===null?X5(h):Cr=m,Ck.current=null}function X5(h){var m=h;do{var k=m.alternate;if(h=m.return,m.flags&32768){if(k=MV(k,m),k!==null){k.flags&=32767,Cr=k;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Or=6,Cr=null;return}}else if(k=OV(k,m,ki),k!==null){Cr=k;return}if(m=m.sibling,m!==null){Cr=m;return}Cr=m=h}while(m!==null);Or===0&&(Or=5)}function Xu(h,m,k){var E=Te,N=fr.transition;try{fr.transition=null,Te=1,jV(h,m,k,E)}finally{fr.transition=N,Te=E}return null}function jV(h,m,k,E){do Yu();while(_l!==null);if(Bt&6)throw Error(i(327));k=h.finishedWork;var N=h.finishedLanes;if(k===null)return null;if(h.finishedWork=null,h.finishedLanes=0,k===h.current)throw Error(i(177));h.callbackNode=null,h.callbackPriority=0;var O=k.lanes|k.childLanes;if(Ae(h,O),h===Gr&&(Cr=Gr=null,aa=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||X0||(X0=!0,J5(at,function(){return Yu(),null})),O=(k.flags&15990)!==0,k.subtreeFlags&15990||O){O=fr.transition,fr.transition=null;var G=Te;Te=1;var le=Bt;Bt|=4,Ck.current=null,AV(h,k),L5(k,h),Y(h.containerInfo),h.current=k,DV(k),xt(),Bt=le,Te=G,fr.transition=O}else h.current=k;if(X0&&(X0=!1,_l=h,Y0=N),O=h.pendingLanes,O===0&&(Tl=null),ar(k.stateNode),ni(h,Ke()),m!==null)for(E=h.onRecoverableError,k=0;k<m.length;k++)N=m[k],E(N.value,{componentStack:N.stack,digest:N.digest});if(K0)throw K0=!1,h=Tk,Tk=null,h;return Y0&1&&h.tag!==0&&Yu(),O=h.pendingLanes,O&1?h===_k?Bh++:(Bh=0,_k=h):Bh=0,wr(),null}function Yu(){if(_l!==null){var h=je(Y0),m=fr.transition,k=Te;try{if(fr.transition=null,Te=16>h?16:h,_l===null)var E=!1;else{if(h=_l,_l=null,Y0=0,Bt&6)throw Error(i(331));var N=Bt;for(Bt|=4,Ve=h.current;Ve!==null;){var O=Ve,G=O.child;if(Ve.flags&16){var le=O.deletions;if(le!==null){for(var ye=0;ye<le.length;ye++){var Re=le[ye];for(Ve=Re;Ve!==null;){var qe=Ve;switch(qe.tag){case 0:case 11:case 15:Ah(8,qe,O)}var It=qe.child;if(It!==null)It.return=qe,Ve=It;else for(;Ve!==null;){qe=Ve;var Be=qe.sibling,Dn=qe.return;if(M5(qe),qe===Re){Ve=null;break}if(Be!==null){Be.return=Dn,Ve=Be;break}Ve=Dn}}}var kn=O.alternate;if(kn!==null){var ri=kn.child;if(ri!==null){kn.child=null;do{var As=ri.sibling;ri.sibling=null,ri=As}while(ri!==null)}}Ve=O}}if(O.subtreeFlags&2064&&G!==null)G.return=O,Ve=G;else e:for(;Ve!==null;){if(O=Ve,O.flags&2048)switch(O.tag){case 0:case 11:case 15:Ah(9,O,O.return)}var ge=O.sibling;if(ge!==null){ge.return=O.return,Ve=ge;break e}Ve=O.return}}var ce=h.current;for(Ve=ce;Ve!==null;){G=Ve;var we=G.child;if(G.subtreeFlags&2064&&we!==null)we.return=G,Ve=we;else e:for(G=ce;Ve!==null;){if(le=Ve,le.flags&2048)try{switch(le.tag){case 0:case 11:case 15:z0(9,le)}}catch(dt){Un(le,le.return,dt)}if(le===G){Ve=null;break e}var ze=le.sibling;if(ze!==null){ze.return=le.return,Ve=ze;break e}Ve=le.return}}if(Bt=N,wr(),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(st,h)}catch{}E=!0}return E}finally{Te=k,fr.transition=m}}return!1}function Y5(h,m,k){m=Sd(k,m),m=h5(h,m,1),h=Nl(h,m,1),m=Sa(),h!==null&&(Ce(h,1,m),ni(h,m))}function Un(h,m,k){if(h.tag===3)Y5(h,h,k);else for(;m!==null;){if(m.tag===3){Y5(m,h,k);break}else if(m.tag===1){var E=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Tl===null||!Tl.has(E))){h=Sd(k,h),h=f5(m,h,1),m=Nl(m,h,1),h=Sa(),m!==null&&(Ce(m,1,h),ni(m,h));break}}m=m.return}}function VV(h,m,k){var E=h.pingCache;E!==null&&E.delete(m),m=Sa(),h.pingedLanes|=h.suspendedLanes&k,Gr===h&&(aa&k)===k&&(Or===4||Or===3&&(aa&130023424)===aa&&500>Ke()-Ek?Ku(h,0):Ik|=k),ni(h,m)}function Q5(h,m){m===0&&(h.mode&1?(m=Ns,Ns<<=1,!(Ns&130023424)&&(Ns=4194304)):m=1);var k=Sa();h=Yo(h,m),h!==null&&(Ce(h,m,k),ni(h,k))}function UV(h){var m=h.memoizedState,k=0;m!==null&&(k=m.retryLane),Q5(h,k)}function GV(h,m){var k=0;switch(h.tag){case 13:var E=h.stateNode,N=h.memoizedState;N!==null&&(k=N.retryLane);break;case 19:E=h.stateNode;break;default:throw Error(i(314))}E!==null&&E.delete(m),Q5(h,k)}var Z5;Z5=function(h,m,k){if(h!==null)if(h.memoizedProps!==m.pendingProps||ya.current)ei=!0;else{if(!(h.lanes&k)&&!(m.flags&128))return ei=!1,$V(h,m,k);ei=!!(h.flags&131072)}else ei=!1,nn&&m.flags&1048576&&Ch(m,Sr,m.index);switch(m.lanes=0,m.tag){case 2:var E=m.type;D0(h,m),h=m.pendingProps;var N=Il(m,Vr.current);vd(m,k),N=nk(null,m,E,h,N,k);var O=rk();return m.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,ba(E)?(O=!0,Xo(m)):O=!1,m.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,qw(m),N.updater=N0,m.stateNode=N,N._reactInternals=m,Xw(m,E,h,k),m=dk(null,m,E,!0,O,k)):(m.tag=0,nn&&O&&Va(m),Ua(null,m,N,k),m=m.child),m;case 16:E=m.elementType;e:{switch(D0(h,m),h=m.pendingProps,N=E._init,E=N(E._payload),m.type=E,N=m.tag=HV(E),h=So(E,h),N){case 0:m=ck(null,m,E,h,k);break e;case 1:m=S5(null,m,E,h,k);break e;case 11:m=b5(null,m,E,h,k);break e;case 14:m=v5(null,m,E,So(E.type,h),k);break e}throw Error(i(306,E,""))}return m;case 0:return E=m.type,N=m.pendingProps,N=m.elementType===E?N:So(E,N),ck(h,m,E,N,k);case 1:return E=m.type,N=m.pendingProps,N=m.elementType===E?N:So(E,N),S5(h,m,E,N,k);case 3:e:{if(C5(m),h===null)throw Error(i(387));E=m.pendingProps,O=m.memoizedState,N=O.element,A_(h,m),E0(m,E,null,k);var G=m.memoizedState;if(E=G.element,_e&&O.isDehydrated)if(O={element:E,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},m.updateQueue.baseState=O,m.memoizedState=O,m.flags&256){N=Sd(Error(i(423)),m),m=I5(h,m,E,k,N);break e}else if(E!==N){N=Sd(Error(i(424)),m),m=I5(h,m,E,k,N);break e}else for(_e&&(na=rr(m.stateNode.containerInfo),ir=m,nn=!0,ko=null,$s=!1),k=G_(m,null,E,k),m.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(yd(),E===N){m=Ms(h,m,k);break e}Ua(h,m,E,k)}m=m.child}return m;case 5:return W_(m),h===null&&zw(m),E=m.type,N=m.pendingProps,O=h!==null?h.memoizedProps:null,G=N.children,de(E,N)?G=null:O!==null&&de(E,O)&&(m.flags|=32),k5(h,m),Ua(h,m,G,k),m.child;case 6:return h===null&&zw(m),null;case 13:return E5(h,m,k);case 4:return Yw(m,m.stateNode.containerInfo),E=m.pendingProps,h===null?m.child=xd(m,null,E,k):Ua(h,m,E,k),m.child;case 11:return E=m.type,N=m.pendingProps,N=m.elementType===E?N:So(E,N),b5(h,m,E,N,k);case 7:return Ua(h,m,m.pendingProps,k),m.child;case 8:return Ua(h,m,m.pendingProps.children,k),m.child;case 12:return Ua(h,m,m.pendingProps.children,k),m.child;case 10:e:{if(E=m.type._context,N=m.pendingProps,O=m.memoizedProps,G=N.value,M_(m,E,G),O!==null)if(Ut(O.value,G)){if(O.children===N.children&&!ya.current){m=Ms(h,m,k);break e}}else for(O=m.child,O!==null&&(O.return=m);O!==null;){var le=O.dependencies;if(le!==null){G=O.child;for(var ye=le.firstContext;ye!==null;){if(ye.context===E){if(O.tag===1){ye=Os(-1,k&-k),ye.tag=2;var Re=O.updateQueue;if(Re!==null){Re=Re.shared;var qe=Re.pending;qe===null?ye.next=ye:(ye.next=qe.next,qe.next=ye),Re.pending=ye}}O.lanes|=k,ye=O.alternate,ye!==null&&(ye.lanes|=k),Ww(O.return,k,m),le.lanes|=k;break}ye=ye.next}}else if(O.tag===10)G=O.type===m.type?null:O.child;else if(O.tag===18){if(G=O.return,G===null)throw Error(i(341));G.lanes|=k,le=G.alternate,le!==null&&(le.lanes|=k),Ww(G,k,m),G=O.sibling}else G=O.child;if(G!==null)G.return=O;else for(G=O;G!==null;){if(G===m){G=null;break}if(O=G.sibling,O!==null){O.return=G.return,G=O;break}G=G.return}O=G}Ua(h,m,N.children,k),m=m.child}return m;case 9:return N=m.type,E=m.pendingProps.children,vd(m,k),N=zi(N),E=E(N),m.flags|=1,Ua(h,m,E,k),m.child;case 14:return E=m.type,N=So(E,m.pendingProps),N=So(E.type,N),v5(h,m,E,N,k);case 15:return x5(h,m,m.type,m.pendingProps,k);case 17:return E=m.type,N=m.pendingProps,N=m.elementType===E?N:So(E,N),D0(h,m),m.tag=1,ba(E)?(h=!0,Xo(m)):h=!1,vd(m,k),z_(m,E,N),Xw(m,E,N,k),dk(null,m,E,!0,h,k);case 19:return T5(h,m,k);case 22:return w5(h,m,k)}throw Error(i(156,m.tag))};function J5(h,m){return mt(h,m)}function WV(h,m,k,E){this.tag=h,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(h,m,k,E){return new WV(h,m,k,E)}function Pk(h){return h=h.prototype,!(!h||!h.isReactComponent)}function HV(h){if(typeof h=="function")return Pk(h)?1:0;if(h!=null){if(h=h.$$typeof,h===g)return 11;if(h===b)return 14}return 2}function Ol(h,m){var k=h.alternate;return k===null?(k=Gi(h.tag,m,h.key,h.mode),k.elementType=h.elementType,k.type=h.type,k.stateNode=h.stateNode,k.alternate=h,h.alternate=k):(k.pendingProps=m,k.type=h.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=h.flags&14680064,k.childLanes=h.childLanes,k.lanes=h.lanes,k.child=h.child,k.memoizedProps=h.memoizedProps,k.memoizedState=h.memoizedState,k.updateQueue=h.updateQueue,m=h.dependencies,k.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},k.sibling=h.sibling,k.index=h.index,k.ref=h.ref,k}function e1(h,m,k,E,N,O){var G=2;if(E=h,typeof h=="function")Pk(h)&&(G=1);else if(typeof h=="string")G=5;else e:switch(h){case u:return Qu(k.children,N,O,m);case c:G=8,N|=8;break;case d:return h=Gi(12,k,m,N|2),h.elementType=d,h.lanes=O,h;case y:return h=Gi(13,k,m,N),h.elementType=y,h.lanes=O,h;case v:return h=Gi(19,k,m,N),h.elementType=v,h.lanes=O,h;case w:return t1(k,N,O,m);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case p:G=10;break e;case f:G=9;break e;case g:G=11;break e;case b:G=14;break e;case x:G=16,E=null;break e}throw Error(i(130,h==null?h:typeof h,""))}return m=Gi(G,k,m,N),m.elementType=h,m.type=E,m.lanes=O,m}function Qu(h,m,k,E){return h=Gi(7,h,E,m),h.lanes=k,h}function t1(h,m,k,E){return h=Gi(22,h,E,m),h.elementType=w,h.lanes=k,h.stateNode={isHidden:!1},h}function Ak(h,m,k){return h=Gi(6,h,null,m),h.lanes=k,h}function Dk(h,m,k){return m=Gi(4,h.children!==null?h.children:[],h.key,m),m.lanes=k,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}function qV(h,m,k,E,N){this.tag=m,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=oe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ve(0),this.expirationTimes=ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ve(0),this.identifierPrefix=E,this.onRecoverableError=N,_e&&(this.mutableSourceEagerHydrationData=null)}function eR(h,m,k,E,N,O,G,le,ye){return h=new qV(h,m,k,le,ye),m===1?(m=1,O===!0&&(m|=8)):m=0,O=Gi(3,null,null,m),h.current=O,O.stateNode=h,O.memoizedState={element:E,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},qw(O),h}function tR(h){if(!h)return Bi;h=h._reactInternals;e:{if(T(h)!==h||h.tag!==1)throw Error(i(170));var m=h;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(ba(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(i(171))}if(h.tag===1){var k=h.type;if(ba(k))return jn(h,k,m)}return m}function nR(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=L(m),h===null?null:h.stateNode}function rR(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var k=h.retryLane;h.retryLane=k!==0&&k<m?k:m}}function n1(h,m){rR(h,m),(h=h.alternate)&&rR(h,m)}function KV(h){return h=L(h),h===null?null:h.stateNode}function XV(){return null}return e.attemptContinuousHydration=function(h){if(h.tag===13){var m=Yo(h,134217728);if(m!==null){var k=Sa();Ui(m,h,134217728,k)}n1(h,134217728)}},e.attemptDiscreteHydration=function(h){if(h.tag===13){var m=Yo(h,1);if(m!==null){var k=Sa();Ui(m,h,1,k)}n1(h,1)}},e.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var m=Rl(h),k=Yo(h,m);if(k!==null){var E=Sa();Ui(k,h,m,E)}n1(h,m)}},e.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var m=h.stateNode;if(m.current.memoizedState.isDehydrated){var k=Gu(m.pendingLanes);k!==0&&($e(m,k|1),ni(m,Ke()),!(Bt&6)&&(Ed(),wr()))}break;case 13:W5(function(){var E=Yo(h,1);if(E!==null){var N=Sa();Ui(E,h,1,N)}}),n1(h,1)}},e.batchedUpdates=function(h,m){var k=Bt;Bt|=1;try{return h(m)}finally{Bt=k,Bt===0&&(Ed(),An&&wr())}},e.createComponentSelector=function(h){return{$$typeof:j0,value:h}},e.createContainer=function(h,m,k,E,N,O,G){return eR(h,m,!1,null,k,E,N,O,G)},e.createHasPseudoClassSelector=function(h){return{$$typeof:V0,value:h}},e.createHydrationContainer=function(h,m,k,E,N,O,G,le,ye){return h=eR(k,E,!0,h,N,O,G,le,ye),h.context=tR(null),k=h.current,E=Sa(),N=Rl(k),O=Os(E,N),O.callback=m??null,Nl(k,O,N),h.current.lanes=N,Ce(h,N,E),ni(h,E),h},e.createPortal=function(h,m,k){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:h,containerInfo:m,implementation:k}},e.createRoleSelector=function(h){return{$$typeof:U0,value:h}},e.createTestNameSelector=function(h){return{$$typeof:G0,value:h}},e.createTextSelector=function(h){return{$$typeof:W0,value:h}},e.deferredUpdates=function(h){var m=Te,k=fr.transition;try{return fr.transition=null,Te=16,h()}finally{Te=m,fr.transition=k}},e.discreteUpdates=function(h,m,k,E,N){var O=Te,G=fr.transition;try{return fr.transition=null,Te=1,h(m,k,E,N)}finally{Te=O,fr.transition=G,Bt===0&&Ed()}},e.findAllNodes=Sk,e.findBoundingRects=function(h,m){if(!et)throw Error(i(363));m=Sk(h,m),h=[];for(var k=0;k<m.length;k++)h.push(jt(m[k]));for(m=h.length-1;0<m;m--){k=h[m];for(var E=k.x,N=E+k.width,O=k.y,G=O+k.height,le=m-1;0<=le;le--)if(m!==le){var ye=h[le],Re=ye.x,qe=Re+ye.width,It=ye.y,Be=It+ye.height;if(E>=Re&&O>=It&&N<=qe&&G<=Be){h.splice(m,1);break}else if(E!==Re||k.width!==ye.width||Be<O||It>G){if(!(O!==It||k.height!==ye.height||qe<E||Re>N)){Re>E&&(ye.width+=Re-E,ye.x=E),qe<N&&(ye.width=N-Re),h.splice(m,1);break}}else{It>O&&(ye.height+=It-O,ye.y=O),Be<G&&(ye.height=G-It),h.splice(m,1);break}}}return h},e.findHostInstance=nR,e.findHostInstanceWithNoPortals=function(h){return h=P(h),h=h!==null?B(h):null,h===null?null:h.stateNode},e.findHostInstanceWithWarning=function(h){return nR(h)},e.flushControlled=function(h){var m=Bt;Bt|=1;var k=fr.transition,E=Te;try{fr.transition=null,Te=1,h()}finally{Te=E,fr.transition=k,Bt=m,Bt===0&&(Ed(),wr())}},e.flushPassiveEffects=Yu,e.flushSync=W5,e.focusWithin=function(h,m){if(!et)throw Error(i(363));for(h=xk(h),m=V5(h,m),m=Array.from(m),h=0;h<m.length;){var k=m[h++];if(!Qt(k)){if(k.tag===5&&Ct(k.stateNode))return!0;for(k=k.child;k!==null;)m.push(k),k=k.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Te},e.getFindAllNodesFailureDescription=function(h,m){if(!et)throw Error(i(363));var k=0,E=[];h=[xk(h),0];for(var N=0;N<h.length;){var O=h[N++],G=h[N++],le=m[G];if((O.tag!==5||!Qt(O))&&(wk(O,le)&&(E.push(kk(le)),G++,G>k&&(k=G)),G<m.length))for(O=O.child;O!==null;)h.push(O,G),O=O.sibling}if(k<m.length){for(h=[];k<m.length;k++)h.push(kk(m[k]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},e.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return X(h.child.stateNode);default:return h.child.stateNode}},e.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:KV,findFiberByHostInstance:h.findFiberByHostInstance||XV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)h=!0;else{try{st=m.inject(h),bt=m}catch{}h=!!m.checkDCE}}return h},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(h,m,k,E){if(!et)throw Error(i(363));h=Sk(h,m);var N=zn(h,k,E).disconnect;return{disconnect:function(){N()}}},e.registerMutableSourceForHydration=function(h,m){var k=m._getVersion;k=k(m._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[m,k]:h.mutableSourceEagerHydrationData.push(m,k)},e.runWithPriority=function(h,m){var k=Te;try{return Te=h,m()}finally{Te=k}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(h,m,k,E){var N=m.current,O=Sa(),G=Rl(N);return k=tR(k),m.context===null?m.context=k:m.pendingContext=k,m=Os(O,G),m.payload={element:h},E=E===void 0?null:E,E!==null&&(m.callback=E),h=Nl(N,m,G),h!==null&&(Ui(h,N,G,O),I0(h,N,G)),G},e};BA.exports=vae;var xae=BA.exports;const wae=Wi(xae);var zA={exports:{}},Rc={};/**
* @license React
* react-reconciler-constants.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/Rc.ConcurrentRoot=1,Rc.ContinuousEventPriority=4,Rc.DefaultEventPriority=16,Rc.DiscreteEventPriority=1,Rc.IdleEventPriority=536870912,Rc.LegacyRoot=0,zA.exports=Rc;var jA=zA.exports;const VA={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let UA=!1,GA=!1;const w3=".react-konva-event",kae=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Sae=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Cae={};function Jb(t,e,n=Cae){if(!UA&&"zIndex"in e&&(console.warn(Sae),UA=!0),!GA&&e.draggable){var r=e.x!==void 0||e.y!==void 0,a=e.onDragEnd||e.onDragMove;r&&!a&&(console.warn(kae),GA=!0)}for(var i in n)if(!VA[i]){var o=i.slice(0,2)==="on",s=n[i]!==e[i];if(o&&s){var l=i.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t.off(l,n[i])}var u=!e.hasOwnProperty(i);u&&t.setAttr(i,void 0)}var c=e._useStrictMode,d={},p=!1;const f={};for(var i in e)if(!VA[i]){var o=i.slice(0,2)==="on",g=n[i]!==e[i];if(o&&g){var l=i.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e[i]&&(f[l]=e[i])}!o&&(e[i]!==n[i]||c&&e[i]!==t.getAttr(i))&&(p=!0,d[i]=e[i])}p&&(t.setAttrs(d),pu(t));for(var l in f)t.on(l+w3,f[l])}function pu(t){if(!Dt.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const WA={},Iae={};sm.Node.prototype._applyProps=Jb;function Eae(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),pu(t)}function Nae(t,e,n){let r=sm[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=sm.Group);const a={},i={};for(var o in e){var s=o.slice(0,2)==="on";s?i[o]=e[o]:a[o]=e[o]}const l=new r(a);return Jb(l,i),l}function Tae(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function _ae(t,e,n){return!1}function Rae(t){return t}function $ae(){return null}function Oae(){return null}function Mae(t,e,n,r){return Iae}function Pae(){}function Aae(t){}function Dae(t,e){return!1}function Lae(){return WA}function Fae(){return WA}const Bae=setTimeout,zae=clearTimeout,jae=-1;function Vae(t,e){return!1}const Uae=!1,Gae=!0,Wae=!0;function Hae(t,e){e.parent===t?e.moveToTop():t.add(e),pu(t)}function qae(t,e){e.parent===t?e.moveToTop():t.add(e),pu(t)}function HA(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),pu(t)}function Kae(t,e,n){HA(t,e,n)}function Xae(t,e){e.destroy(),e.off(w3),pu(t)}function Yae(t,e){e.destroy(),e.off(w3),pu(t)}function Qae(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function Zae(t,e,n){}function Jae(t,e,n,r,a){Jb(t,a,r)}function eie(t){t.hide(),pu(t)}function tie(t){}function nie(t,e){(e.visible==null||e.visible)&&t.show()}function rie(t,e){}function aie(t){}function iie(){}const oie=()=>jA.DefaultEventPriority,sie=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Hae,appendChildToContainer:qae,appendInitialChild:Eae,cancelTimeout:zae,clearContainer:aie,commitMount:Zae,commitTextUpdate:Qae,commitUpdate:Jae,createInstance:Nae,createTextInstance:Tae,detachDeletedInstance:iie,finalizeInitialChildren:_ae,getChildHostContext:Fae,getCurrentEventPriority:oie,getPublicInstance:Rae,getRootHostContext:Lae,hideInstance:eie,hideTextInstance:tie,idlePriority:Hh.unstable_IdlePriority,insertBefore:HA,insertInContainerBefore:Kae,isPrimaryRenderer:Uae,noTimeout:jae,now:Hh.unstable_now,prepareForCommit:$ae,preparePortalMount:Oae,prepareUpdate:Mae,removeChild:Xae,removeChildFromContainer:Yae,resetAfterCommit:Pae,resetTextContent:Aae,run:Hh.unstable_runWithPriority,scheduleTimeout:Bae,shouldDeprioritizeSubtree:Dae,shouldSetTextContent:Vae,supportsMutation:Wae,unhideInstance:nie,unhideTextInstance:rie,warnsIfNotActing:Gae},Symbol.toStringTag,{value:"Module"}));var lie=Object.defineProperty,uie=Object.defineProperties,cie=Object.getOwnPropertyDescriptors,qA=Object.getOwnPropertySymbols,die=Object.prototype.hasOwnProperty,pie=Object.prototype.propertyIsEnumerable,KA=(t,e,n)=>e in t?lie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,XA=(t,e)=>{for(var n in e||(e={}))die.call(e,n)&&KA(t,n,e[n]);if(qA)for(var n of qA(e))pie.call(e,n)&&KA(t,n,e[n]);return t},hie=(t,e)=>uie(t,cie(e));function YA(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const a=YA(r,e,n);if(a)return a;r=e?null:r.sibling}}function QA(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const k3=QA(R.createContext(null));class ZA extends R.Component{render(){return R.createElement(k3.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:JA,ReactCurrentDispatcher:eD}=R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function fie(){const t=R.useContext(k3);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=R.useId();return R.useMemo(()=>{for(const n of[JA?.current,t,t?.alternate]){if(!n)continue;const r=YA(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===e)return!0;i=i.next}});if(r)return r}},[t,e])}function mie(){var t,e;const n=fie(),[r]=R.useState(()=>new Map);r.clear();let a=n;for(;a;){const i=(t=a.type)==null?void 0:t._context;i&&i!==k3&&!r.has(i)&&r.set(i,(e=eD?.current)==null?void 0:e.readContext(QA(i))),a=a.return}return r}function gie(){const t=mie();return R.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>R.createElement(e,null,R.createElement(n.Provider,hie(XA({},r),{value:t.get(n)}))),e=>R.createElement(ZA,XA({},e))),[t])}function yie(t){const e=W.useRef({});return W.useLayoutEffect(()=>{e.current=t}),W.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const bie=t=>{const e=W.useRef(),n=W.useRef(),r=W.useRef(),a=yie(t),i=gie(),o=s=>{const{forwardedRef:l}=t;l&&(typeof l=="function"?l(s):l.current=s)};return W.useLayoutEffect(()=>(n.current=new sm.Stage({width:t.width,height:t.height,container:e.current}),o(n.current),r.current=lm.createContainer(n.current,jA.LegacyRoot,!1,null),lm.updateContainer(W.createElement(i,{},t.children),r.current),()=>{sm.isBrowser&&(o(null),lm.updateContainer(null,r.current,null),n.current.destroy())}),[]),W.useLayoutEffect(()=>{o(n.current),Jb(n.current,t,a),lm.updateContainer(W.createElement(i,{},t.children),r.current,null)}),W.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},S3="Layer",tD="Image",vie="Transformer",lm=wae(sie);lm.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:W.version,rendererPackageName:"react-konva"});const xie=W.forwardRef((t,e)=>W.createElement(ZA,{},W.createElement(bie,{...t,forwardedRef:e})));var $c=R,wie=function(t,e,n){const r=$c.useRef("loading"),a=$c.useRef(),[i,o]=$c.useState(0),s=$c.useRef(),l=$c.useRef(),u=$c.useRef();return(s.current!==t||l.current!==e||u.current!==n)&&(r.current="loading",a.current=void 0,s.current=t,l.current=e,u.current=n),$c.useLayoutEffect(function(){if(!t)return;var c=document.createElement("img");function d(){r.current="loaded",a.current=c,o(Math.random())}function p(){r.current="failed",a.current=void 0,o(Math.random())}return c.addEventListener("load",d),c.addEventListener("error",p),e&&(c.crossOrigin=e),n&&(c.referrerPolicy=n),c.src=t,function(){c.removeEventListener("load",d),c.removeEventListener("error",p)}},[t,e,n]),[a.current,r.current]};const nD=Wi(wie),rD=({front:t})=>{const{frame:e}=bc(),[n]=nD(t?e.front:e.image,"anonymous");return re.jsx(tD,{image:n,draggable:!1})},kie=({canvasImage:t,isSelected:e,onSelect:n})=>{const r=R.useRef(),a=R.useRef(),[i]=nD(t.image,"anonymous"),o=bc(c=>c.transformCanvasImage);R.useEffect(()=>{var c;e&&(a.current.nodes([r.current]),(c=a.current.getLayer())==null||c.batchDraw())},[e]),R.useEffect(()=>{i&&r.current.cache()},[i]);const s=()=>{o({...t,isDragging:!0})},l=c=>{o({...t,isDragging:!1,x:c.target.x(),y:c.target.y()})},u=()=>{var c;const d=r.current,p=d.scaleX(),f=d.scaleY(),g=Math.max(5,d.width()*p),y=Math.max(d.height()*f);o({...t,x:d.x(),y:d.y(),width:g,height:y}),a.current.nodes([r.current]),(c=a.current.getLayer())==null||c.batchDraw()};return re.jsxs(re.Fragment,{children:[re.jsx(tD,{brightness:t.brightness,contrast:t.contrast,draggable:!0,filters:[FA.Filters.Brighten,FA.Filters.Contrast],id:t.id,image:i,onClick:n,onDragEnd:l,onDragStart:s,onTap:n,onTransformEnd:u,opacity:t.opacity||1,ref:r,scaleX:.5,scaleY:.5,x:t.x,y:t.y},t.id),e&&re.jsx(vie,{ref:a,flipEnabled:!1,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],borderStroke:"#BC13FE"})]})},Sie=()=>{const{addToCanvas:t,artworkList:e,canvasList:n,frame:r,moveCanvasImage:a,removeFromCanvas:i,setFrame:o,transformCanvasImage:s}=bc(),{t:l}=tu(),u=R.useRef(null),[c,d]=R.useState(null),[p,f]=R.useState(0),[g,y]=R.useState(0),[v,b]=R.useState(1),[x,w]=R.useState(!1),[S,C]=R.useState(!1),[I,_]=R.useState(!1),T=1080,M=1080;R.useEffect(()=>{const ie=()=>{const xe=(window.innerWidth*.9||0)/T;u.current&&(u.current.width(T*xe),u.current.height(M*xe),u.current.scale({x:xe,y:xe}))};return ie(),window.addEventListener("resize",ie),()=>{window.removeEventListener("resize",ie)}},[]);const P=ie=>{ie.target===ie.target.getStage()&&d(null)},L=ie=>{d(ie),f(ie.brightness),y(ie.contrast),b(ie.opacity)},j=ie=>{c&&a(c.id,ie)},B=(ie,xe)=>{if(!c)return;const q={...c,[xe]:ie};switch(s(q),xe){case"brightness":f(ie);break;case"contrast":y(ie);break;case"opacity":b(ie);break}},K=()=>{c&&(i(c.id),d(null))},X=async()=>{if(navigator.share)try{const ie=u.current;if(!ie){console.error("Canvas element not found");return}const xe=await fetch(ie.toDataURL()).then(q=>q.blob());if(!xe){console.error("Failed to create blob from canvas");return}await navigator.share({files:[new File([xe],"canvas.png",{type:"image/png"})],title:"GLAMorous Europe",text:"Check out my GLAMorous Europe artwork!"}),console.log("Share successful")}catch(ie){console.error("Error sharing:",ie)}else console.log("Web Share API not supported")},Z=()=>{var ie;const xe=(ie=u.current)==null?void 0:ie.toDataURL();xe&&vee.saveAs(xe,"GLAMorousEurope.png")},H=()=>{w(!x),_(!1),C(!1)},F=()=>{C(!S),_(!1),w(!1)},Y=()=>{_(!I),C(!1),w(!1)},[{canDrop:Q,isOver:ne},se]=GW(()=>({accept:"artwork",drop:(ie,xe)=>{const q=xe.getClientOffset();if(ie&&q){const oe=e.find(he=>he.id===ie.id);if(oe){const he=u.current;if(he){const Ie=q.x-he.container().getBoundingClientRect().left,Ee=q.y-he.container().getBoundingClientRect().top;t(oe.image,Ie,Ee)}}}},collect:ie=>({isOver:ie.isOver(),canDrop:ie.canDrop()})})),pe=Q&&ne;let de="transparent";return pe&&(de="#ebb2ff"),re.jsxs(re.Fragment,{children:[re.jsxs(to,{margin:"my-0",className:"flex flex-wrap gap-1 container justify-center content-center text-center mx-auto",children:[re.jsx(yr,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:X,children:re.jsx(_a,{material:re.jsx(nee,{className:"w-6 h-6"})})}),re.jsx(yr,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:Z,children:re.jsx(_a,{material:re.jsx(SJ,{className:"w-6 h-6"})})}),re.jsx(yr,{className:"p-4 text-xl text-black",rounded:!0,inline:!0,onClick:()=>o(Math.max(1,r.id-1)),children:re.jsx(_a,{material:re.jsx(AJ,{className:"w-6 h-6"})})}),re.jsx(yr,{className:"p-4 text-xl text-black",rounded:!0,inline:!0,onClick:()=>o(Math.min(5,r.id+1)),children:re.jsx(_a,{material:re.jsx(FJ,{className:"w-6 h-6"})})}),c&&re.jsxs(re.Fragment,{children:[re.jsx(yr,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:()=>j(!0),children:re.jsx(_a,{material:re.jsx(_J,{className:"w-6 h-6"})})}),re.jsx(yr,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:()=>j(!1),children:re.jsx(_a,{material:re.jsx(EJ,{className:"w-6 h-6"})})}),re.jsx(yr,{className:"p-2 text-black",rounded:!0,inline:!0,onClick:K,children:re.jsx(_a,{material:re.jsx(dee,{className:"w-6 h-6"})})}),re.jsx(yr,{className:"p-2 text-black",style:{backgroundColor:I&&"#BC13FE"},rounded:!0,inline:!0,onClick:Y,children:re.jsx(_a,{material:re.jsx(gee,{className:"w-6 h-6"})})}),re.jsx(yr,{className:"p-2 text-black",style:{backgroundColor:x&&"#BC13FE"},rounded:!0,inline:!0,onClick:H,children:re.jsx(_a,{material:re.jsx(lee,{className:"w-6 h-6"})})}),re.jsx(yr,{className:"p-2 text-black",style:{backgroundColor:S&&"#BC13FE"},rounded:!0,inline:!0,onClick:F,children:re.jsx(_a,{material:re.jsx(bee,{className:"w-6 h-6"})})}),I&&re.jsx(hp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:re.jsx(fp,{innerClassName:"flex space-x-4 w-6",innerChildren:re.jsxs(re.Fragment,{children:[re.jsx("p",{children:l("artworkCanvasOpacity")}),re.jsx(Wy,{value:v,min:0,max:1,step:.01,onChange:ie=>B(parseFloat(ie.target.value),"opacity")})]})})}),x&&re.jsx(hp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:re.jsx(fp,{innerClassName:"flex space-x-4 w-6",innerChildren:re.jsxs(re.Fragment,{children:[re.jsx("p",{children:l("artworkCanvasBrightness")}),re.jsx(Wy,{value:p,min:-1,max:1,step:.01,onChange:ie=>B(parseFloat(ie.target.value),"brightness")})]})})}),S&&re.jsx(hp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:re.jsx(fp,{innerClassName:"flex space-x-4 w-6",innerChildren:re.jsxs(re.Fragment,{children:[re.jsx("p",{children:l("artworkCanvasContrast")}),re.jsx(Wy,{value:g,min:-100,max:100,step:1,onChange:ie=>B(parseFloat(ie.target.value),"contrast")})]})})})]})]}),re.jsx("div",{className:"mx-auto flex items-center",ref:se,children:re.jsxs(xie,{style:{border:"4px solid",borderColor:de},width:T,height:M,ref:u,onMouseDown:P,onTouchStart:P,children:[re.jsx(S3,{listening:!1,children:re.jsx(rD,{front:!1})}),re.jsx(S3,{children:n.map(ie=>re.jsx(kie,{canvasImage:ie,isSelected:c?.id===ie.id,onSelect:()=>L(ie)},ie.id))}),re.jsx(S3,{listening:!1,children:re.jsx(rD,{front:!0})})]})})]})};function Cie({id:t,image:e}){const[{opacity:n},r,a]=DW(()=>({type:"artwork",item:{id:t},collect:i=>({opacity:i.isDragging()?.4:1})}));return re.jsxs(re.Fragment,{children:[re.jsx(fW,{connect:a,src:e}),re.jsx("img",{src:e,alt:t,role:"presentation",style:{cursor:"move",marginRight:"10px",maxHeight:"100px",opacity:n,scrollSnapAlign:"start",width:"auto"},ref:r})]})}function Iie(){const{t}=tu(),{artworkList:e}=bc();return re.jsxs(to,{margin:"my-4",className:"flex flex-col flex-wrap gap-4 container justify-center content-center text-center mx-auto",children:[re.jsx("div",{className:"p-2",children:re.jsx("h1",{className:"text-xl",children:t("artworkTitle")})}),re.jsx(to,{margin:"my-4",className:"flex mx-auto overflow-x-auto",style:{maxHeight:"100px",scrollSnapType:"x mandatory",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:e.map((n,r)=>re.jsx(Cie,{...n},n.id+r))}),re.jsx(Sie,{})]})}const Eie="modulepreload",Nie=function(t){return"/"+t},aD={},Tie=function(t,e,n){let r=Promise.resolve();if(e&&e.length>0){const a=document.getElementsByTagName("link");r=Promise.all(e.map(i=>{if(i=Nie(i),i in aD)return;aD[i]=!0;const o=i.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(n)for(let u=a.length-1;u>=0;u--){const c=a[u];if(c.href===i&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${s}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":Eie,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((u,c)=>{l.addEventListener("load",u),l.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})}))}return r.then(()=>t()).catch(a=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a})};let _ie={data:""},Rie=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||_ie,$ie=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Oie=/\/\*[^]*?\*\/|  +/g,iD=/\n+/g,hu=(t,e)=>{let n="",r="",a="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?hu(o,i):i+"{"+hu(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=hu(o,e?e.replace(/([^,])+/g,s=>i.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,s):s?s+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=hu.p?hu.p(i,o):i+":"+o+";")}return n+(e&&a?e+"{"+a+"}":a)+r},nl={},oD=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+oD(t[n]);return e}return t},Mie=(t,e,n,r,a)=>{let i=oD(t),o=nl[i]||(nl[i]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(i));if(!nl[o]){let l=i!==t?t:(u=>{let c,d,p=[{}];for(;c=$ie.exec(u.replace(Oie,""));)c[4]?p.shift():c[3]?(d=c[3].replace(iD," ").trim(),p.unshift(p[0][d]=p[0][d]||{})):p[0][c[1]]=c[2].replace(iD," ").trim();return p[0]})(t);nl[o]=hu(a?{["@keyframes "+o]:l}:l,n?"":"."+o)}let s=n&&nl.g?nl.g:null;return n&&(nl.g=nl[o]),((l,u,c,d)=>{d?u.data=u.data.replace(d,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(nl[o],e,r,s),o},Pie=(t,e,n)=>t.reduce((r,a,i)=>{let o=e[i];if(o&&o.call){let s=o(n),l=s&&s.props&&s.props.className||/^go/.test(s)&&s;o=l?"."+l:s&&typeof s=="object"?s.props?"":hu(s,""):s===!1?"":s}return r+a+(o??"")},"");function ev(t){let e=this||{},n=t.call?t(e.p):t;return Mie(n.unshift?n.raw?Pie(n,[].slice.call(arguments,1),e.p):n.reduce((r,a)=>Object.assign(r,a&&a.call?a(e.p):a),{}):n,Rie(e.target),e.g,e.o,e.k)}let sD,C3,I3;ev.bind({g:1});let rl=ev.bind({k:1});function Aie(t,e,n,r){hu.p=e,sD=t,C3=n,I3=r}function fu(t,e){let n=this||{};return function(){let r=arguments;function a(i,o){let s=Object.assign({},i),l=s.className||a.className;n.p=Object.assign({theme:C3&&C3()},s),n.o=/ *go\d+/.test(l),s.className=ev.apply(n,r)+(l?" "+l:""),e&&(s.ref=o);let u=t;return t[0]&&(u=s.as||t,delete s.as),I3&&u[0]&&I3(s),sD(u,s)}return e?e(a):a}}var Die=t=>typeof t=="function",tv=(t,e)=>Die(t)?t(e):t,Lie=(()=>{let t=0;return()=>(++t).toString()})(),lD=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Fie=20,nv=new Map,Bie=1e3,uD=t=>{if(nv.has(t))return;let e=setTimeout(()=>{nv.delete(t),Oc({type:4,toastId:t})},Bie);nv.set(t,e)},zie=t=>{let e=nv.get(t);e&&clearTimeout(e)},E3=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Fie)};case 1:return e.toast.id&&zie(e.toast.id),{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return t.toasts.find(i=>i.id===n.id)?E3(t,{type:1,toast:n}):E3(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?uD(r):t.toasts.forEach(i=>{uD(i.id)}),{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let a=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+a}))}}},rv=[],av={toasts:[],pausedAt:void 0},Oc=t=>{av=E3(av,t),rv.forEach(e=>{e(av)})},jie={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Vie=(t={})=>{let[e,n]=R.useState(av);R.useEffect(()=>(rv.push(n),()=>{let a=rv.indexOf(n);a>-1&&rv.splice(a,1)}),[e]);let r=e.toasts.map(a=>{var i,o;return{...t,...t[a.type],...a,duration:a.duration||((i=t[a.type])==null?void 0:i.duration)||t?.duration||jie[a.type],style:{...t.style,...(o=t[a.type])==null?void 0:o.style,...a.style}}});return{...e,toasts:r}},Uie=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||Lie()}),um=t=>(e,n)=>{let r=Uie(e,t,n);return Oc({type:2,toast:r}),r.id},Ri=(t,e)=>um("blank")(t,e);Ri.error=um("error"),Ri.success=um("success"),Ri.loading=um("loading"),Ri.custom=um("custom"),Ri.dismiss=t=>{Oc({type:3,toastId:t})},Ri.remove=t=>Oc({type:4,toastId:t}),Ri.promise=(t,e,n)=>{let r=Ri.loading(e.loading,{...n,...n?.loading});return t.then(a=>(Ri.success(tv(e.success,a),{id:r,...n,...n?.success}),a)).catch(a=>{Ri.error(tv(e.error,a),{id:r,...n,...n?.error})}),t};var Gie=(t,e)=>{Oc({type:1,toast:{id:t,height:e}})},Wie=()=>{Oc({type:5,time:Date.now()})},Hie=t=>{let{toasts:e,pausedAt:n}=Vie(t);R.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(s=>{if(s.duration===1/0)return;let l=(s.duration||0)+s.pauseDuration-(i-s.createdAt);if(l<0){s.visible&&Ri.dismiss(s.id);return}return setTimeout(()=>Ri.dismiss(s.id),l)});return()=>{o.forEach(s=>s&&clearTimeout(s))}},[e,n]);let r=R.useCallback(()=>{n&&Oc({type:6,time:Date.now()})},[n]),a=R.useCallback((i,o)=>{let{reverseOrder:s=!1,gutter:l=8,defaultPosition:u}=o||{},c=e.filter(f=>(f.position||u)===(i.position||u)&&f.height),d=c.findIndex(f=>f.id===i.id),p=c.filter((f,g)=>g<d&&f.visible).length;return c.filter(f=>f.visible).slice(...s?[p+1]:[0,p]).reduce((f,g)=>f+(g.height||0)+l,0)},[e]);return{toasts:e,handlers:{updateHeight:Gie,startPause:Wie,endPause:r,calculateOffset:a}}},qie=rl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Kie=rl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Xie=rl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Yie=fu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${qie} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Kie} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Xie} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Qie=rl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Zie=fu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Qie} 1s linear infinite;
`,Jie=rl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,eoe=rl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,toe=fu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Jie} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${eoe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,noe=fu("div")`
  position: absolute;
`,roe=fu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,aoe=rl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ioe=fu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${aoe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ooe=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?R.createElement(ioe,null,e):e:n==="blank"?null:R.createElement(roe,null,R.createElement(Zie,{...r}),n!=="loading"&&R.createElement(noe,null,n==="error"?R.createElement(Yie,{...r}):R.createElement(toe,{...r})))},soe=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,loe=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,uoe="0%{opacity:0;} 100%{opacity:1;}",coe="0%{opacity:1;} 100%{opacity:0;}",doe=fu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,poe=fu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,hoe=(t,e)=>{let n=t.includes("top")?1:-1,[r,a]=lD()?[uoe,coe]:[soe(n),loe(n)];return{animation:e?`${rl(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${rl(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},foe=R.memo(({toast:t,position:e,style:n,children:r})=>{let a=t.height?hoe(t.position||e||"top-center",t.visible):{opacity:0},i=R.createElement(ooe,{toast:t}),o=R.createElement(poe,{...t.ariaProps},tv(t.message,t));return R.createElement(doe,{className:t.className,style:{...a,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):R.createElement(R.Fragment,null,i,o))});Aie(R.createElement);var moe=({id:t,className:e,style:n,onHeightUpdate:r,children:a})=>{let i=R.useCallback(o=>{if(o){let s=()=>{let l=o.getBoundingClientRect().height;r(t,l)};s(),new MutationObserver(s).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return R.createElement("div",{ref:i,className:e,style:n},a)},goe=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:lD()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...a}},yoe=ev`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,iv=16,boe=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:a,containerStyle:i,containerClassName:o})=>{let{toasts:s,handlers:l}=Hie(n);return R.createElement("div",{style:{position:"fixed",zIndex:9999,top:iv,left:iv,right:iv,bottom:iv,pointerEvents:"none",...i},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},s.map(u=>{let c=u.position||e,d=l.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),p=goe(c,d);return R.createElement(moe,{id:u.id,key:u.id,onHeightUpdate:l.updateHeight,className:u.visible?yoe:"",style:p},u.type==="custom"?tv(u.message,u):a?a(u):R.createElement(foe,{toast:u,position:c}))}))},voe=Ri,cD={exports:{}},xoe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",woe=xoe,koe=woe;function dD(){}function pD(){}pD.resetWarningCache=dD;var Soe=function(){function t(r,a,i,o,s,l){if(l!==koe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:pD,resetWarningCache:dD};return n.PropTypes=n,n};cD.exports=Soe();var Coe=cD.exports;const ua=Wi(Coe);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var N3=function(t,e){return N3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},N3(t,e)};function hD(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");N3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Fo=function(){return Fo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Fo.apply(this,arguments)};function fD(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function Mc(t,e){for(var n=0,r=e.length,a=t.length;n<r;n++,a++)t[a]=e[n];return t}var Ioe=function(t){return Object.keys(t).filter(function(e){return t[e]}).join(" ")},ov=function(t,e){return t.x===e.x&&t.y===e.y},sv=function(t,e){return!t&&e||t&&!e||t.length!==e.length?!1:t.every(function(n,r){return ov(n,e[r])})},Pc=function(t,e){var n=t.x,r=t.y;return e===void 0&&(e=1),{x:Math.round((n+Number.EPSILON)*e)/e,y:Math.round((r+Number.EPSILON)*e)/e}},Eoe=function(t,e,n){n===void 0&&(n=0);var r=t.findIndex(function(a){return Math.max(Math.abs(a.x-e.x),Math.abs(a.y-e.y))<=n});return{point:Fo({},t[r]||{x:NaN,y:NaN}),index:r}},mD=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)},gD=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},Noe=function(t,e,n){var r=mD(t,e),a=gD(t,e),i=Math.round(a/n)*n;return{x:t.x+r*Math.cos(i),y:t.y+r*Math.sin(i)}},Toe=function(t,e,n){var r=mD(t,e),a=gD(t,e),i=n.reduce(function(o,s){return Math.abs(s-a)<Math.abs(o-a)?s:o},1/0);return i!==1/0&&(e.x=t.x+r*Math.cos(i),e.y=t.y+r*Math.sin(i)),e},_oe=function(t){for(var e=[],n=1;n<t.length;n++){var r=Math.atan2(t[n].y-t[n-1].y,t[n].x-t[n-1].x),a=r+Math.PI;e.push(r,a>Math.PI?a-2*Math.PI:a)}return e.filter(function(i,o,s){return s.indexOf(i)===o})};function Roe(t,e,n,r){r===void 0&&(r=!0);var a=new Image;a.crossOrigin="Anonymous";var i=document.createElement("canvas"),o=i.getContext("2d");if(!o)return n(new Error("CTX is null"),i);a.onerror=function(){n(new Error("Failed to load image"),i)},a.onload=function(){try{if(i.width=a.naturalWidth+2,i.height=a.naturalHeight+2,o.drawImage(a,0,0),e.length<3){n(null,i);return}if(o.beginPath(),o.moveTo(0,0),o.lineTo(i.width,0),o.lineTo(i.width,i.height),o.lineTo(0,i.height),o.lineTo(0,0),o.lineTo(e[0].x+1,e[0].y+1),e.slice(1).forEach(function(w){var S=w.x,C=w.y;return o.lineTo(S+1,C+1)}),o.lineTo(e[0].x+1,e[0].y+1),o.lineTo(0,0),o.closePath(),o.clip("evenodd"),o.globalCompositeOperation="destination-out",o.fill(),r){var s=e.map(function(w){var S=w.x;return S+1}),l=e.map(function(w){var S=w.y;return S+1}),u=[Math.min.apply(null,s),Math.min.apply(null,l)],c=u[0],d=u[1],p=[Math.max.apply(null,s),Math.max.apply(null,l)],f=p[0],g=p[1],y=[f-c,g-d],v=y[0],b=y[1],x=o.getImageData(c,d,v,b);i.width=v,i.height=b,o.putImageData(x,0,0)}n(null,i)}catch(w){n(w instanceof Error?w:new Error(String(w)),i)}},a.src=t}var yD=function(){function t(e){this.getSvgElement=e}return t.prototype.getSvg=function(){var e=this.getSvgElement();if(!e)throw new Error("SVG is null");return e},t.prototype.getCTM=function(){var e=this.getSvg(),n=e.getCTM();if(n===null){var r=e.querySelector('rect[visibility="hidden"]');n=r.getCTM()}if(!n)throw new Error("CTM is null");return n},t.prototype.getViewboxSize=function(){return this.getSvg().viewBox.baseVal},t.prototype.getRealSize=function(){var e=this.getSvg();return{width:e.clientWidth,height:e.clientHeight}},t.prototype.getViewboxOffset=function(){var e=this.getSvg(),n=this.getRealSize(),r=n.width,a=n.height,i=this.getViewboxSize(),o=i.width,s=i.height,l=Object.assign(e.createSVGPoint(),{x:r,y:a}),u=this.getCTM(),c=l.matrixTransform(u.inverse()),d=c.x,p=c.y;return{x:d-o,y:p-s}},t.prototype.convertViewboxPointsToReal=function(e){var n=this.getSvg(),r=this.getCTM();return e.map(function(a){var i=a.x,o=a.y,s=Object.assign(n.createSVGPoint(),{x:i,y:o}).matrixTransform(r);return Pc(s)})},t.prototype.convertRealPointsToViewbox=function(e){var n=this.getSvg(),r=this.getCTM().inverse();return e.map(function(a){var i=a.x,o=a.y,s=Object.assign(n.createSVGPoint(),{x:i,y:o}).matrixTransform(r);return Pc(s,1e3)})},t.prototype.getBorderPoints=function(e){e===void 0&&(e=!0);var n=this.getViewboxSize(),r=n.width,a=n.height,i=this.getViewboxOffset(),o=i.x,s=i.y,l=[{x:-o,y:-s},{x:r+o,y:-s},{x:r+o,y:a+s},{x:-o,y:a+s}];return e&&l.push({x:-o,y:-s}),l},t.prototype.isAboveTheBorder=function(e){var n=e.x,r=e.y,a=this.getViewboxSize(),i=a.width,o=a.height,s=this.getViewboxOffset(),l=s.x,u=s.y;return n<-l||n>i+l||r<-u||r>o+u},t.prototype.getMouseCoordinates=function(e){var n=e,r=n.changedTouches&&n.touches?n.changedTouches[0]||n.touches[0]:n,a=r.clientX,i=r.clientY,o=this.getSvg(),s=o.getScreenCTM();if(!s)throw new Error("ScreenCTM is null");var l=o.createSVGPoint();l.x=a,l.y=i;var u=l.matrixTransform(s.inverse()),c=u.x,d=u.y;return{x:c,y:d}},t}(),bD=function(t){return function(e){hD(n,e);function n(){var r=e!==null&&e.apply(this,arguments)||this;return r.ref=W.createRef(),r.svg=new yD(function(){var a,i;return(i=(a=r.ref)===null||a===void 0?void 0:a.current)===null||i===void 0?void 0:i.ownerSVGElement}),r.dragLastPosition=null,r.wasMoved=!1,r.onMouseTouchDown=function(a){if(a.target===r.ref.current&&r.props.draggable){a.stopImmediatePropagation(),a.preventDefault();var i=a.target;r.dragLastPosition=r.getMousePosition(a),i.ownerSVGElement&&i.ownerSVGElement.focus({preventScroll:!0})}},r.onMouseTouchMove=function(a){if(r.dragLastPosition){a.stopImmediatePropagation(),a.preventDefault();var i=r.getMousePosition(a),o=i.x,s=i.y,l=o-r.dragLastPosition.x,u=s-r.dragLastPosition.y;!r.wasMoved&&r.props.onDragStart&&r.props.onDragStart({x:r.dragLastPosition.x,y:r.dragLastPosition.y,dx:l,dy:u}),r.props.onDrag&&r.props.onDrag({dx:l,dy:u}),r.dragLastPosition={x:o,y:s},r.wasMoved=!0}},r.onMouseTouchUp=function(a){r.dragLastPosition&&r.wasMoved&&(a.stopImmediatePropagation(),a.preventDefault(),(a instanceof MouseEvent||!a.touches)&&window.addEventListener("click",function(i){return i.stopPropagation()},{capture:!0,once:!0}),r.props.onDragEnd&&r.props.onDragEnd({x:r.dragLastPosition.x,y:r.dragLastPosition.y})),r.dragLastPosition=null,r.wasMoved=!1},r}return n.prototype.render=function(){var r=this.props,a=r.draggable;r.onDrag,r.onDragStart,r.onDragEnd;var i=fD(r,["draggable","onDrag","onDragStart","onDragEnd"]);return W.createElement(t,Fo({ref:this.ref},i,{draggable:a}))},n.prototype.componentDidUpdate=function(r){r.draggable&&!this.props.draggable&&this.dragLastPosition&&this.wasMoved&&(this.props.onDragEnd&&this.props.onDragEnd({x:this.dragLastPosition.x,y:this.dragLastPosition.y}),this.dragLastPosition=null,this.wasMoved=!1)},n.prototype.componentDidMount=function(){window.addEventListener("mousedown",this.onMouseTouchDown,!0),window.addEventListener("mousemove",this.onMouseTouchMove,!0),window.addEventListener("mouseup",this.onMouseTouchUp,!0),window.addEventListener("touchstart",this.onMouseTouchDown,!0),window.addEventListener("touchmove",this.onMouseTouchMove,!0),window.addEventListener("touchend",this.onMouseTouchUp,!0)},n.prototype.componentWillUnmount=function(){window.removeEventListener("mousedown",this.onMouseTouchDown),window.removeEventListener("mousemove",this.onMouseTouchMove),window.removeEventListener("mouseup",this.onMouseTouchUp),window.removeEventListener("touchstart",this.onMouseTouchDown),window.removeEventListener("touchmove",this.onMouseTouchMove),window.removeEventListener("touchend",this.onMouseTouchUp)},n.prototype.getMousePosition=function(r){var a=r;return this.svg.getMouseCoordinates(a)},n}(W.Component)},$oe=bD(W.forwardRef(function(t,e){var n=t.path,r=t.animate,a=t.draggable;return W.createElement("polyline",{ref:e,style:{cursor:a?"move":""},points:n.map(function(i){var o=i.x,s=i.y;return o+","+s}).join(" "),fill:"rgba(0,0,0,0)",stroke:"white",strokeWidth:"1.5",shapeRendering:"geometricPrecision",strokeDasharray:"3",strokeDashoffset:"0",vectorEffect:"non-scaling-stroke"},r&&W.createElement("animate",{attributeName:"stroke-dashoffset",values:"0;1000;0",dur:"100s",repeatCount:"indefinite"}))}));function Ooe(t){var e=t.path;return W.createElement("polygon",{style:{pointerEvents:"none",transform:"translate(-1px, -1px)"},points:e.map(function(n){var r=n.x,a=n.y;return r+","+a}).join(" "),fill:"rgba(0, 0, 0, 0.5)",fillRule:"evenodd",stroke:"null",shapeRendering:"geometricPrecision"})}var Moe=bD(W.forwardRef(function(t,e){var n=t.x,r=t.y,a=t.onClickTouchEvent,i=t.draggable,o=t.style,s=o.cursor,l=s===void 0?i?"move":"default":s,u=fD(o,["cursor"]);return W.createElement("rect",{style:Fo({cursor:l},u),ref:e,x:n-10,y:r-10,onClick:function(c){c.stopPropagation(),c.preventDefault(),a(c)},onTouchEnd:function(c){c.stopPropagation(),c.preventDefault(),a(c)},width:"20px",height:"20",fill:"rgba(0, 0, 0, 0)",stroke:"white",strokeWidth:"1.25",vectorEffect:"non-scaling-stroke"})})),Lr;(function(t){t.ADD="ADD",t.DELETE="DELETE",t.MODIFY="MODIFY",t.MOVE="MOVE",t.RESET="RESET",t.CHANGE="CHANGE"})(Lr||(Lr={}));function Poe(t,e){var n=t.points.length;switch(e.type){case Lr.ADD:{if(t.closed)return[t,!1];if(n>0&&ov(t.points[n-1],e.payload)||n>1&&ov(t.points[n-2],e.payload))return[t,!1];var r=n>2&&ov(t.points[0],e.payload);return r?[{points:Mc([],t.points),closed:!0},!0]:[{points:Mc(Mc([],t.points,!0),[e.payload]),closed:!1},!0]}case Lr.DELETE:return[{points:Mc([],t.points.filter(function(u,c){return e.payload!==c})),closed:n>4&&t.closed},!0];case Lr.MODIFY:{var a=t.points[e.payload.index],i=a.x,o=a.y,s=t.points.map(function(u){var c=u.x,d=u.y;return c===i&&d===o?{x:e.payload.x,y:e.payload.y}:{x:c,y:d}});return[{points:s,closed:t.closed},!!(e.payload.x||e.payload.y)]}case Lr.MOVE:return[{points:t.points.map(function(u){var c=u.x,d=u.y;return{x:c+e.payload.x,y:d+e.payload.y}}),closed:t.closed},!!(e.payload.x||e.payload.y)];case Lr.CHANGE:{var l=!sv(e.payload,t.points);return[{points:e.payload,closed:l?e.payload.length>2:t.closed},l]}case Lr.RESET:return[{points:[],closed:!1},!!t.points.length];default:return[t,!1]}}var Aoe=function(t){hD(e,t);function e(n){var r=t.call(this,n)||this;return r.imageRef=W.createRef(),r.svgRef=W.createRef(),r.svg=new yD(function(){var a;return(a=r.svgRef)===null||a===void 0?void 0:a.current}),r.angles=[],r.path={points:[],closed:!1},r.lastEmittedPoints=[],r.lastUpdatedPoints=[],r.imgError=!1,r.setPathFromPropsOnMediaLoad=!0,r.hidePointer=function(){var a=r.path.points[r.path.points.length-1]||{x:0,y:0};r.setPointer(Fo({},a),!0)},r.onShapeDrag=function(a){var i=a.dx,o=a.dy,s=r.path.points.map(function(l){var u=l.x,c=l.y;return{x:u+i,y:c+o}});s.some(function(l){return r.svg.isAboveTheBorder(l)})||r.dispatchPathAction({type:Lr.MOVE,payload:{x:i,y:o}})},r.onPointDrag=function(a,i){var o=i.dx,s=i.dy,l=Fo({},r.path.points[a]);l.x+=o,l.y+=s,r.svg.isAboveTheBorder(l)||r.dispatchPathAction({type:Lr.MODIFY,payload:Fo(Fo({},l),{index:a})})},r.onPointClick=function(a){r.isLoaded()&&!r.props.disabled&&!r.path.closed&&r.dispatchPathAction({type:Lr.ADD,payload:r.path.points[a]})},r.onDragEnd=function(){r.checkIfPathUpdated(!1)},r.onMediaLoaded=function(a){r.setPathFromPropsOnMediaLoad&&(r.setPathStateFromProps(),r.setPathFromPropsOnMediaLoad=!1),r.imgError=!1,r.props.onImageLoad(a)},r.onMediaError=function(a){r.dispatchPathAction({type:Lr.RESET}),r.imgError=!0,r.props.onImageError(a)},r.onClickTouchEvent=function(a){if(r.isLoaded()&&!r.props.disabled){if(r.path.closed){a.target===r.svgRef.current&&r.dispatchPathAction({type:Lr.RESET});return}var i=r.getMousePosition(a)[0];r.svg.isAboveTheBorder(i)?r.hidePointer():r.dispatchPathAction({type:Lr.ADD,payload:Pc(i,1e3),pointer:i})}},r.onClick=function(a){r.onClickTouchEvent(a)},r.onTouchEnd=function(a){a.cancelable&&(a.preventDefault(),r.onClickTouchEvent(a)),r.hidePointer()},r.onMouseTouchMove=function(a){if(r.isLoaded()){var i=r.getMousePosition(a)[0];r.setPointer(i)}},r.onContextMenu=function(a){if(r.isLoaded()&&(a.preventDefault(),!r.props.disabled&&!r.path.closed)){var i=r.getMousePosition(a),o=i[0],s=i[1].index;s>-1?r.dispatchPathAction({type:Lr.DELETE,payload:s,pointer:o}):r.setPointer(o)}},r.state={path:{points:[],closed:!1},pointer:{x:n.viewBox.width/2,y:n.viewBox.width/2}},r}return e.prototype.render=function(){var n=this;return W.createElement("div",{className:Ioe({ReactFreeSelect__Component:!0,ReactFreeSelect__Closed:this.state.path.closed,ReactFreeSelect__Disabled:this.props.disabled}),style:Fo({display:"inline-block",position:"relative",margin:"0",padding:"0",fontSize:"0",cursor:this.props.disabled?"not-allowed":"default"},this.props.style)},W.createElement("img",{ref:this.imageRef,src:this.props.src,alt:this.props.imageAlt,crossOrigin:this.props.crossOrigin,style:this.props.imageStyle,onLoad:this.onMediaLoaded,onError:this.onMediaError}),W.createElement("svg",{ref:this.svgRef,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden",userSelect:"none",touchAction:"none"},viewBox:"0 0 "+this.props.viewBox.width+" "+this.props.viewBox.height,onMouseMove:this.onMouseTouchMove,onTouchMove:this.onMouseTouchMove,onClick:this.onClick,onTouchEnd:this.onTouchEnd,onContextMenu:this.onContextMenu,onMouseLeave:this.hidePointer},W.createElement("rect",{visibility:"hidden"}),!!this.state.path.points.length&&W.createElement(Ooe,{path:this.getPolygonPoints()}),W.createElement($oe,{draggable:this.state.path.closed&&!this.props.disabled,onDrag:this.onShapeDrag,onDragEnd:this.onDragEnd,animate:!this.props.disabled,path:this.getPolylinePoints()}),this.getRoundedPoints().map(function(r,a){var i=r.x,o=r.y;return W.createElement(Moe,{key:a,x:i,y:o,draggable:!n.props.disabled,style:{cursor:!a&&n.state.path.points.length>2&&!n.state.path.closed?"pointer":void 0},onDrag:function(s){var l=s.dx,u=s.dy;return n.onPointDrag(a,{dx:l,dy:u})},onDragEnd:n.onDragEnd,onClickTouchEvent:function(){return n.onPointClick(a)}})})))},e.prototype.componentDidUpdate=function(n){!n.disabled&&this.props.disabled&&!this.path.closed&&this.hidePointer(),n.src&&n.src!==this.props.src?this.dispatchPathAction({type:Lr.RESET}):sv(n.value,this.props.value)||(this.isLoaded()?this.setPathStateFromProps():this.setPathFromPropsOnMediaLoad=!0)},e.prototype.convertPoints=function(n){var r=this.getAspectRatio();return this.svg.convertViewboxPointsToReal(n).map(function(a){var i=a.x,o=a.y;return{x:Math.round(i/r.x),y:Math.round(o/r.y)}})},e.prototype.checkIfPathUpdated=function(n){if(this.path.closed||n){var r=this.convertPoints(this.path.points);sv(r,this.lastUpdatedPoints)||(this.emitOnComplete(r),this.lastUpdatedPoints=r.map(function(a){var i=a.x,o=a.y;return{x:i,y:o}}))}},e.prototype.emitOnChange=function(n){var r=n.points;if(this.props.onChange){var a=this.convertPoints(r);this.lastEmittedPoints=a,this.props.onChange(a)}},e.prototype.emitOnComplete=function(n){this.props.onComplete&&this.props.onComplete(n)},e.prototype.setPointer=function(n,r){var a=n.x,i=n.y;r===void 0&&(r=!1),(r||!this.props.disabled)&&this.setState({path:this.path,pointer:{x:a,y:i}})},e.prototype.dispatchPathAction=function(n){var r=this.path.closed,a=Poe(this.path,n),i=a[0],o=a[1];i.points=i.points.map(function(s){return Pc(s,1e3)}),o&&(this.path=i,this.setState({pointer:n.pointer||this.path.points[this.path.points.length-1]||{x:0,y:0},path:i}),this.angles=_oe(i.points),this.emitOnChange(i),[Lr.MODIFY,Lr.MOVE].includes(n.type)||this.checkIfPathUpdated(r))},e.prototype.isLoaded=function(){if(this.imgError||!this.svgRef.current)return!1;var n=this.svgRef.current;return!!(n.width.baseVal.value&&n.height.baseVal.value)},e.prototype.getAspectRatio=function(){return this.imageRef.current?{x:this.imageRef.current.clientWidth/this.imageRef.current.naturalWidth,y:this.imageRef.current.clientHeight/this.imageRef.current.naturalHeight}:{x:NaN,y:NaN}},e.prototype.setPathStateFromProps=function(){if(!sv(this.lastEmittedPoints,this.props.value)){var n=this.getAspectRatio(),r=this.svg.convertRealPointsToViewbox(this.props.value.map(function(a){var i=a.x,o=a.y;return{x:i*n.x,y:o*n.y}}));this.dispatchPathAction({type:Lr.CHANGE,payload:r})}},e.prototype.getRoundedPoints=function(){return this.state.path.points.map(function(n){return Pc(n)})},e.prototype.getBorder=function(){return this.svg.getBorderPoints().map(function(n){return Pc(n)}).map(function(n){var r=n.x,a=n.y;return{x:r-1,y:a+1}})},e.prototype.getPolygonPoints=function(){var n=this.getRoundedPoints(),r=this.getBorder();return this.state.path.closed?Mc(Mc(Mc([],r,!0),n,!0),[n[0],r[0]]):r},e.prototype.getPolylinePoints=function(){var n=this.getRoundedPoints();return n.concat(this.state.path.closed?n[0]:Pc(this.state.pointer))},e.prototype.getMousePosition=function(n,r,a){r===void 0&&(r=!0),a===void 0&&(a=!0);var i=this.svg.getMouseCoordinates(n);if(a){var o=navigator.platform.includes("Mac")?n.metaKey:n.ctrlKey,s=this.path.points[this.path.points.length-1];o&&s&&(n.shiftKey?i=Toe(s,i,this.angles):i=Noe(s,i,Math.PI/12))}var l=Eoe(this.path.points,i,10),u=l.point,c=l.index;return r&&c>-1&&(i=Fo({},u)),[i,{point:u,index:c}]},e.propTypes={value:ua.arrayOf(ua.exact({x:ua.number.isRequired,y:ua.number.isRequired})),style:ua.shape({}),viewBox:ua.exact({width:ua.number.isRequired,height:ua.number.isRequired}),disabled:ua.bool,onChange:ua.func,onComplete:ua.func,src:ua.string.isRequired,imageAlt:ua.string,crossOrigin:ua.string,imageStyle:ua.shape({}),onImageLoad:ua.func,onImageError:ua.func},e.defaultProps={value:[],style:{},imageStyle:{},viewBox:{width:1e3,height:1e3},disabled:!1,onImageError:Function.prototype,onImageLoad:Function.prototype},e}(W.Component);/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Doe=1e-7,Loe=1e-4;class T3{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class lv{refCount(e){return $i("refCount")}incRef(e){return $i("incRef")}timerAvailable(){return!0}time(e){return $i("time")}read(e){return $i("read")}readSync(e){return $i("readSync")}readToGPU(e,n){return $i("readToGPU")}numDataIds(){return $i("numDataIds")}disposeData(e,n){return $i("disposeData")}write(e,n,r){return $i("write")}move(e,n,r,a,i){return $i("move")}memory(){return $i("memory")}floatPrecision(){return $i("floatPrecision")}epsilon(){return this.floatPrecision()===32?Doe:Loe}dispose(){return $i("dispose")}}function $i(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vD(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,al(t,e,n)}function Foe(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,al(t,n,r),al(e,n,r)}function mu(t,e,n){return Math.max(t,Math.min(e,n))}function uv(t){return t%2===0?t:t+1}function al(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function xD(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function Boe(t,e){const n=Math.random();return e*n+(1-n)*t}function zoe(t,e){let n=0;for(let r=0;r<t.length;r++){const a=Number(t[r])-Number(e[r]);n+=a*a}return n}function V(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Kr(t,e,n=""){V(vn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Ac(t){V(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function il(t,e=[],n=!1){if(e==null&&(e=[]),Array.isArray(t)||ca(t)&&!n)for(let r=0;r<t.length;++r)il(t[r],e,n);else e.push(t);return e}function be(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function joe(t){return t.length===0}function vn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Dc(t){return t%1===0}function Voe(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function cv(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Uoe(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return vD(e),e}function Lc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function _3(t,e=a=>0,n,r=setTimeout){return new Promise((a,i)=>{let o=0;const s=()=>{if(t()){a();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r(s,l)};s()})}function R3(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const a=t.slice();return a[r]=e/n,a}function Xt(t,e){const n=e.length;return t=t==null?e.map((r,a)=>a):[].concat(t),V(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),V(t.every(r=>Dc(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function ol(t,e){const n=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||a?null:Xt(e,t).sort();let o=0;for(let s=0;s<t.length;++s){if(i!=null){if(i[o]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(i[o]==null||i[o]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),i[o]<=s&&o++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function Er(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Nr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function wD(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function kD(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function $3(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function ca(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function dv(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function SD(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function ds(t){return typeof t=="string"||t instanceof String}function CD(t){return typeof t=="boolean"}function ID(t){return typeof t=="number"}function Tp(t){return Array.isArray(t)?Tp(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":ID(t)?"float32":ds(t)?"string":CD(t)?"bool":"float32"}function gu(t){return!!(t&&t.constructor&&t.call&&t.apply)}function pv(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Ze(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function ED(t,e,n,r=!1){const a=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)a[o]=n[t+o]}else{const i=e[0],o=e.slice(1),s=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<i;l++)a[l]=ED(t+l*s,o,n,r)}return a}function Oi(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((a,i)=>a*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return ED(0,t,e,n)}function hv(t,e){const n=Xr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Xr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function O3(t,e){const n=t.reduce((r,a)=>r*a,1);if(e==null||e==="float32")return Oi(t,new Float32Array(n));if(e==="int32")return Oi(t,new Int32Array(n));if(e==="bool")return Oi(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function M3(t){t.forEach(e=>{V(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Bo(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let a=0;a<t.length-1;++a)r+=n[a]*t[a];return r}function Fc(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(t/n[a]),t-=r[a]*n[a];return r[r.length-1]=t,r}function Bc(t){return t&&t.then&&typeof t.then=="function"}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ND="tfjsflags";class TD{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Goe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const a=this.urlFlags[e];fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${a}.`),this.set(e,a)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Bc(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);ND in e&&e[ND].split(",").forEach(n=>{const[r,a]=n.split(":");this.urlFlags[r]=Hoe(r,a)})}}function Goe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(Woe(e,r[0],r[1]),r.join("="))),e}function Woe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Hoe(t,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function fe(){return P3}let P3=null;function qoe(t){P3=t}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/let A3;function _D(){if(A3==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");A3=t}return A3}function Koe(){const t=_D();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function D3(t,e){const n=Koe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const fv="Abs",cm="Acos",dm="Acosh",_p="Add",mv="AddN",gv="All",yv="Any",bv="ArgMax",vv="ArgMin",pm="Asin",hm="Asinh",fm="Atan",mm="Atanh",gm="Atan2",xv="AvgPool",L3="AvgPoolGrad",wv="AvgPool3D",F3="AvgPool3DGrad",kv="BatchMatMul",Sv="BatchToSpaceND",Cv="Bincount",Xoe="BroadcastTo",Iv="BroadcastArgs",ym="Cast",bm="Ceil",vm="ClipByValue",Ev="Complex",Nv="ComplexAbs",Tv="Concat",_v="Conv2D",Rv="Conv2DBackpropFilter",$v="Conv2DBackpropInput",Ov="Conv3D",B3="Conv3DBackpropFilterV2",Mv="Conv3DBackpropInputV2",xm="Cos",wm="Cosh",Pv="Cumprod",Av="Cumsum",Dv="CropAndResize",Lv="DenseBincount",Fv="DepthToSpace",Bv="DepthwiseConv2dNative",zv="DepthwiseConv2dNativeBackpropFilter",jv="DepthwiseConv2dNativeBackpropInput",Vv="Diag",Uv="Dilation2D",z3="Dilation2DBackpropInput",j3="Dilation2DBackpropFilter",km="RealDiv",Gv="Einsum",Sm="Elu",V3="EluGrad",Cm="Erf",Im="Equal",Em="Exp",Wv="ExpandDims",Nm="Expm1",Hv="FFT",qv="Fill",Kv="FlipLeftRight",Tm="Floor",_m="FloorDiv",Xv="FusedBatchNorm",Yv="GatherV2",Qv="GatherNd",Rm="Greater",$m="GreaterEqual",Om="Identity",Zv="IFFT",Jv="Imag",Mm="IsFinite",Pm="IsInf",Am="IsNan",ex="LeakyRelu",Dm="Less",Lm="LessEqual",tx="LinSpace",Fm="Log",Bm="Log1p",zm="LogicalAnd",jm="LogicalNot",Vm="LogicalOr",Yoe="LogicalXor",Qoe="LogSoftmax",Zoe="LowerBound",nx="LRN",U3="LRNGrad",rx="Max",Um="Maximum",ax="MaxPool",G3="MaxPoolGrad",ix="MaxPool3D",W3="MaxPool3DGrad",ox="MaxPoolWithArgmax",sx="Mean",lx="Min",Gm="Minimum",ux="MirrorPad",Wm="Mod",cx="Multinomial",Hm="Multiply",dx="Neg",qm="NotEqual",px="NonMaxSuppressionV3",hx="NonMaxSuppressionV4",fx="NonMaxSuppressionV5",mx="OnesLike",gx="OneHot",yx="Pack",bx="PadV2",Joe="Pool",Km="Pow",vx="Prelu",xx="Prod",wx="RaggedGather",kx="RaggedTensorToTensor",Sx="Range",Cx="Real",Xm="Reciprocal",Ym="Relu",Ix="Reshape",Ex="ResizeNearestNeighbor",H3="ResizeNearestNeighborGrad",Nx="ResizeBilinear",q3="ResizeBilinearGrad",Qm="Relu6",Tx="Reverse",Zm="Round",Jm="Rsqrt",_x="ScatterNd",Rx="SearchSorted",$x="Select",eg="Selu",Ox="Slice",tg="Sin",ng="Sinh",rg="Sign",ag="Sigmoid",ig="Softplus",og="Sqrt",Mx="Sum",Px="SpaceToBatchND",Ax="SplitV",Dx="Softmax",Lx="SparseFillEmptyRows",Fx="SparseReshape",Bx="SparseSegmentMean",zx="SparseSegmentSum",jx="SparseToDense",sg="SquaredDifference",K3="Square",Vx="StridedSlice",Ux="StringNGrams",Gx="StringSplit",Wx="StringToHashBucketFast",lg="Sub",ug="Tan",cg="Tanh",dg="Tile",Hx="TopK",qx="Transform",Rp="Transpose",Kx="Unique",Xx="Unpack",Yx="UnsortedSegmentSum",ese="UpperBound",Qx="ZerosLike",pg="Step",Zx="FromPixels",Jx="RotateWithOffset",hg="_FusedMatMul",fg="FusedConv2D",mg="FusedDepthwiseConv2D";/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mi(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(...t)}function tse(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.log(...t)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $p=D3("kernelRegistry",()=>new Map),gg=D3("gradRegistry",()=>new Map);function e2(t,e){const n=Y3(t,e);return $p.get(n)}function X3(t){return gg.get(t)}function t2(t){const e=$p.entries(),n=[];for(;;){const{done:r,value:a}=e.next();if(r)break;const[i,o]=a,[s]=i.split("_");s===t&&n.push(o)}return n}function n2(t){const{kernelName:e,backendName:n}=t,r=Y3(e,n);$p.has(r)&&Mi(`The kernel '${e}' for backend '${n}' is already registered`),$p.set(r,t)}function nse(t){const{kernelName:e}=t;gg.has(e)&&fe().getBool("DEBUG")&&Mi(`Overriding the gradient for '${e}'`),gg.set(e,t)}function rse(t,e){const n=Y3(t,e);if(!$p.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);$p.delete(n)}function ase(t){if(!gg.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);gg.delete(t)}function ise(t,e){t2(t).forEach(n=>{const r=Object.assign({},n,{backendName:e});n2(r)})}function Y3(t,e){return`${e}_${t}`}var RD=On,ro=null;try{ro=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function On(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}On.prototype.__isLong__,Object.defineProperty(On.prototype,"__isLong__",{value:!0});function ui(t){return(t&&t.__isLong__)===!0}On.isLong=ui;var $D={},OD={};function zc(t,e){var n,r,a;return e?(t>>>=0,(a=0<=t&&t<256)&&(r=OD[t],r)?r:(n=Mn(t,(t|0)<0?-1:0,!0),a&&(OD[t]=n),n)):(t|=0,(a=-128<=t&&t<128)&&(r=$D[t],r)?r:(n=Mn(t,t<0?-1:0,!1),a&&($D[t]=n),n))}On.fromInt=zc;function ao(t,e){if(isNaN(t))return e?jc:io;if(e){if(t<0)return jc;if(t>=PD)return BD}else{if(t<=-AD)return ci;if(t+1>=AD)return FD}return t<0?ao(-t,e).neg():Mn(t%Op|0,t/Op|0,e)}On.fromNumber=ao;function Mn(t,e,n){return new On(t,e,n)}On.fromBits=Mn;var r2=Math.pow;function Q3(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return io;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Q3(t.substring(1),e,n).neg();for(var a=ao(r2(n,8)),i=io,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+s),n);if(s<8){var u=ao(r2(n,s));i=i.mul(u).add(ao(l))}else i=i.mul(a),i=i.add(ao(l))}return i.unsigned=e,i}On.fromString=Q3;function zo(t,e){return typeof t=="number"?ao(t,e):typeof t=="string"?Q3(t,e):Mn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}On.fromValue=zo;var MD=65536,ose=1<<24,Op=MD*MD,PD=Op*Op,AD=PD/2,DD=zc(ose),io=zc(0);On.ZERO=io;var jc=zc(0,!0);On.UZERO=jc;var Mp=zc(1);On.ONE=Mp;var LD=zc(1,!0);On.UONE=LD;var Z3=zc(-1);On.NEG_ONE=Z3;var FD=Mn(-1,2147483647,!1);On.MAX_VALUE=FD;var BD=Mn(-1,-1,!0);On.MAX_UNSIGNED_VALUE=BD;var ci=Mn(0,-2147483648,!1);On.MIN_VALUE=ci;var Pe=On.prototype;Pe.toInt=function(){return this.unsigned?this.low>>>0:this.low},Pe.toNumber=function(){return this.unsigned?(this.high>>>0)*Op+(this.low>>>0):this.high*Op+(this.low>>>0)},Pe.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(ci)){var e=ao(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var a=ao(r2(t,6),this.unsigned),i=this,o="";;){var s=i.div(a),l=i.sub(s.mul(a)).toInt()>>>0,u=l.toString(t);if(i=s,i.isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},Pe.getHighBits=function(){return this.high},Pe.getHighBitsUnsigned=function(){return this.high>>>0},Pe.getLowBits=function(){return this.low},Pe.getLowBitsUnsigned=function(){return this.low>>>0},Pe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ci)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1},Pe.isZero=function(){return this.high===0&&this.low===0},Pe.eqz=Pe.isZero,Pe.isNegative=function(){return!this.unsigned&&this.high<0},Pe.isPositive=function(){return this.unsigned||this.high>=0},Pe.isOdd=function(){return(this.low&1)===1},Pe.isEven=function(){return(this.low&1)===0},Pe.equals=function(t){return ui(t)||(t=zo(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},Pe.eq=Pe.equals,Pe.notEquals=function(t){return!this.eq(t)},Pe.neq=Pe.notEquals,Pe.ne=Pe.notEquals,Pe.lessThan=function(t){return this.comp(t)<0},Pe.lt=Pe.lessThan,Pe.lessThanOrEqual=function(t){return this.comp(t)<=0},Pe.lte=Pe.lessThanOrEqual,Pe.le=Pe.lessThanOrEqual,Pe.greaterThan=function(t){return this.comp(t)>0},Pe.gt=Pe.greaterThan,Pe.greaterThanOrEqual=function(t){return this.comp(t)>=0},Pe.gte=Pe.greaterThanOrEqual,Pe.ge=Pe.greaterThanOrEqual,Pe.compare=function(t){if(ui(t)||(t=zo(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Pe.comp=Pe.compare,Pe.negate=function(){return!this.unsigned&&this.eq(ci)?ci:this.not().add(Mp)},Pe.neg=Pe.negate,Pe.add=function(t){ui(t)||(t=zo(t));var e=this.high>>>16,n=this.high&65535,r=this.low>>>16,a=this.low&65535,i=t.high>>>16,o=t.high&65535,s=t.low>>>16,l=t.low&65535,u=0,c=0,d=0,p=0;return p+=a+l,d+=p>>>16,p&=65535,d+=r+s,c+=d>>>16,d&=65535,c+=n+o,u+=c>>>16,c&=65535,u+=e+i,u&=65535,Mn(d<<16|p,u<<16|c,this.unsigned)},Pe.subtract=function(t){return ui(t)||(t=zo(t)),this.add(t.neg())},Pe.sub=Pe.subtract,Pe.multiply=function(t){if(this.isZero())return io;if(ui(t)||(t=zo(t)),ro){var e=ro.mul(this.low,this.high,t.low,t.high);return Mn(e,ro.get_high(),this.unsigned)}if(t.isZero())return io;if(this.eq(ci))return t.isOdd()?ci:io;if(t.eq(ci))return this.isOdd()?ci:io;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(DD)&&t.lt(DD))return ao(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,r=this.high&65535,a=this.low>>>16,i=this.low&65535,o=t.high>>>16,s=t.high&65535,l=t.low>>>16,u=t.low&65535,c=0,d=0,p=0,f=0;return f+=i*u,p+=f>>>16,f&=65535,p+=a*u,d+=p>>>16,p&=65535,p+=i*l,d+=p>>>16,p&=65535,d+=r*u,c+=d>>>16,d&=65535,d+=a*l,c+=d>>>16,d&=65535,d+=i*s,c+=d>>>16,d&=65535,c+=n*u+r*l+a*s+i*o,c&=65535,Mn(p<<16|f,c<<16|d,this.unsigned)},Pe.mul=Pe.multiply,Pe.divide=function(t){if(ui(t)||(t=zo(t)),t.isZero())throw Error("division by zero");if(ro){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?ro.div_u:ro.div_s)(this.low,this.high,t.low,t.high);return Mn(e,ro.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?jc:io;var n,r,a;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return jc;if(t.gt(this.shru(1)))return LD;a=jc}else{if(this.eq(ci)){if(t.eq(Mp)||t.eq(Z3))return ci;if(t.eq(ci))return Mp;var i=this.shr(1);return n=i.div(t).shl(1),n.eq(io)?t.isNegative()?Mp:Z3:(r=this.sub(t.mul(n)),a=n.add(r.div(t)),a)}else if(t.eq(ci))return this.unsigned?jc:io;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=io}for(r=this;r.gte(t);){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),s=o<=48?1:r2(2,o-48),l=ao(n),u=l.mul(t);u.isNegative()||u.gt(r);)n-=s,l=ao(n,this.unsigned),u=l.mul(t);l.isZero()&&(l=Mp),a=a.add(l),r=r.sub(u)}return a},Pe.div=Pe.divide,Pe.modulo=function(t){if(ui(t)||(t=zo(t)),ro){var e=(this.unsigned?ro.rem_u:ro.rem_s)(this.low,this.high,t.low,t.high);return Mn(e,ro.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},Pe.mod=Pe.modulo,Pe.rem=Pe.modulo,Pe.not=function(){return Mn(~this.low,~this.high,this.unsigned)},Pe.and=function(t){return ui(t)||(t=zo(t)),Mn(this.low&t.low,this.high&t.high,this.unsigned)},Pe.or=function(t){return ui(t)||(t=zo(t)),Mn(this.low|t.low,this.high|t.high,this.unsigned)},Pe.xor=function(t){return ui(t)||(t=zo(t)),Mn(this.low^t.low,this.high^t.high,this.unsigned)},Pe.shiftLeft=function(t){return ui(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Mn(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Mn(0,this.low<<t-32,this.unsigned)},Pe.shl=Pe.shiftLeft,Pe.shiftRight=function(t){return ui(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Mn(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Mn(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Pe.shr=Pe.shiftRight,Pe.shiftRightUnsigned=function(t){if(ui(t)&&(t=t.toInt()),t&=63,t===0)return this;var e=this.high;if(t<32){var n=this.low;return Mn(n>>>t|e<<32-t,e>>>t,this.unsigned)}else return t===32?Mn(e,0,this.unsigned):Mn(e>>>t-32,0,this.unsigned)},Pe.shru=Pe.shiftRightUnsigned,Pe.shr_u=Pe.shiftRightUnsigned,Pe.toSigned=function(){return this.unsigned?Mn(this.low,this.high,!1):this},Pe.toUnsigned=function(){return this.unsigned?this:Mn(this.low,this.high,!0)},Pe.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Pe.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},Pe.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]},On.fromBytes=function(t,e,n){return n?On.fromBytesLE(t,e):On.fromBytesBE(t,e)},On.fromBytesLE=function(t,e){return new On(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},On.fromBytesBE=function(t,e){return new On(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};const zD=Wi(RD),sse=Lk({__proto__:null,default:zD},[RD]);/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Vc=zD||sse;function yg(t){return Vc.fromString(t,!0,16)}const jD=yg("c3a5c85c97cb3127"),Uc=yg("b492b66fbe98f273"),$a=yg("9ae16a3b2f90404f");function J3(t){return t.xor(t.shru(47))}function VD(t,e,n){const r=t.slice(e,e+n);return Vc.fromBytes(Array.from(r),!0,!0)}function Cn(t,e){return VD(t,e,8)}function UD(t,e){return VD(t,e,4)}function Fr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function yu(t,e,n=yg("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let a=e.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function lse(t,e,n,r,a,i){a=a.add(t),i=Fr(i.add(a).add(r),21);const o=a;return a=a.add(e),a=a.add(n),i=i.add(Fr(a,44)),[a.add(r),i.add(o)]}function a2(t,e,n,r){return lse(Cn(t,e),Cn(t,e+8),Cn(t,e+16),Cn(t,e+24),n,r)}function use(t,e=t.length){if(e>=8){const n=$a.add(e*2),r=Cn(t,0).add($a),a=Cn(t,e-8),i=Fr(a,37).mul(n).add(r),o=Fr(r,25).add(a).mul(n);return yu(i,o,n)}if(e>=4){const n=$a.add(e*2),r=UD(t,0);return yu(r.shl(3).add(e),UD(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],a=t[e-1],i=n+(r<<8),o=e+(a<<2);return J3($a.mul(i).xor(jD.mul(o))).mul($a)}return $a}function cse(t,e=t.length){const n=$a.add(e*2),r=Cn(t,0).mul(Uc),a=Cn(t,8),i=Cn(t,e-8).mul(n),o=Cn(t,e-16).mul($a);return yu(Fr(r.add(a),43).add(Fr(i,30)).add(o),r.add(Fr(a.add($a),18)).add(i),n)}function dse(t,e=t.length){const n=$a.add(e*2),r=Cn(t,0).mul($a),a=Cn(t,8),i=Cn(t,e-8).mul(n),o=Cn(t,e-16).mul($a),s=Fr(r.add(a),43).add(Fr(i,30)).add(o),l=yu(s,r.add(Fr(a.add($a),18)).add(i),n),u=Cn(t,16).mul(n),c=Cn(t,24),d=s.add(Cn(t,e-32)).mul(n),p=l.add(Cn(t,e-24)).mul(n);return yu(Fr(u.add(c),43).add(Fr(d,30)).add(p),u.add(Fr(c.add(r),18)).add(d),n)}function GD(t,e=t.length){const n=Vc.fromNumber(81,!0);if(e<=32)return e<=16?use(t,e):cse(t,e);if(e<=64)return dse(t,e);let r=n,a=n.mul(Uc).add(113),i=J3(a.mul($a).add(113)).mul($a),o=[Vc.UZERO,Vc.UZERO],s=[Vc.UZERO,Vc.UZERO];r=r.mul($a).add(Cn(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=Fr(r.add(a).add(o[0]).add(Cn(t,l+8)),37).mul(Uc),a=Fr(a.add(o[1]).add(Cn(t,l+48)),42).mul(Uc),r=r.xor(s[1]),a=a.add(o[0]).add(Cn(t,l+40)),i=Fr(i.add(s[0]),33).mul(Uc),o=a2(t,l,o[1].mul(Uc),r.add(s[0])),s=a2(t,l+32,i.add(s[1]),a.add(Cn(t,l+16))),[i,r]=[r,i],l+=64;while(l!==u);const d=Uc.add(i.and(255).shl(1));return l=c,s[0]=s[0].add(e-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=Fr(r.add(a).add(o[0]).add(Cn(t,l+8)),37).mul(d),a=Fr(a.add(o[1]).add(Cn(t,l+48)),42).mul(d),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(Cn(t,l+40))),i=Fr(i.add(s[0]),33).mul(d),o=a2(t,l,o[1].mul(d),r.add(s[0])),s=a2(t,l+32,i.add(s[1]),a.add(Cn(t,l+16))),[i,r]=[r,i],yu(yu(o[0],s[0],d).add(J3(a).mul(jD)).add(i),yu(o[1],s[1],d).add(r),d)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sl(t,e){return e==="string"?ps(t):bu([t],e)}function pse(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function bu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=il(t)),fe().getBool("DEBUG")&&wD(t,e),pse(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function di(){return fe().platform.now()}function hse(t,e){return fe().platform.fetch(t,e)}function ps(t,e="utf-8"){return e=e||"utf-8",fe().platform.encode(t,e)}function ll(t,e="utf-8"){return e=e||"utf-8",fe().platform.decode(t,e)}const fse=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:vn,assert:V,assertNonNegativeIntegerDimensions:M3,assertNonNull:Ac,assertShapesMatch:Kr,bytesFromStringArray:SD,bytesPerElement:dv,checkConversionForErrors:wD,clamp:mu,computeStrides:Ze,createScalarValue:sl,createShuffledIndices:Uoe,decodeString:ll,distSquared:zoe,encodeString:ps,fetch:hse,fingerPrint64:GD,flatten:il,getArrayFromDType:Nr,getTypedArrayFromDType:Er,hasEncodingLoss:$3,hexToLong:yg,indexToLoc:Fc,inferDtype:Tp,inferFromImplicitShape:R3,isBoolean:CD,isFunction:gu,isInt:Dc,isNumber:ID,isPromise:Bc,isScalarShape:joe,isString:ds,isTypedArray:ca,isValidDtype:kD,locToIndex:Bo,makeOnesTypedArray:hv,makeZerosNestedTypedArray:O3,makeZerosTypedArray:Xr,nearestDivisor:pv,nearestLargerEven:uv,now:di,parseAxisParam:Xt,randUniform:Boe,repeatedTry:_3,rightPad:Lc,shuffle:vD,shuffleCombo:Foe,sizeFromShape:be,sizeToSquarishShape:cv,squeezeShape:ol,sum:xD,swap:al,tanh:Voe,toNestedArray:Oi,toTypedArray:bu},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class mse{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new yse)}profileKernel(e,n,r){let a;const i=()=>{a=r()};let o;const s=di();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const l of a)l.dataSync();o=Promise.resolve({kernelMs:di()-s})}if(fe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<a.length;l++){const u=a[l];u.data().then(c=>{gse(c,u.dtype,e)})}return{kernelName:e,outputs:a,inputs:n,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:a,inputs:i,extraInfo:o}=e;r.forEach(s=>{Promise.all([s.data(),a,o]).then(l=>{this.logger.logKernelProfile(n,s,l[0],l[1],i,l[2])})})}}function gse(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const a=t[r];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}class yse{logKernelProfile(e,n,r,a,i,o){const s=typeof a=="number"?Lc(`${a}ms`,9):a.error,l=Lc(e,25),u=n.rank,c=n.size,d=Lc(n.shape.toString(),14);let p="";for(const f in i){const g=i[f];if(g!=null){const y=g.shape||n.shape,v=y.length;p+=`${f}: ${v}D ${v>0?y:""} `}}console.log(`%c${l}	%c${s}	%c${u}D ${d}	%c${c}	%c${p}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bse(t,e,n){const r={},a={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const d in c){const p=c[d];let f=!1;for(let g=0;g<e.length;g++)if(r[p.id]){u.outputs.forEach(y=>r[y.id]=!0),f=!0,a[u.id]=!0;break}if(f)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(i[u.outputs[d].id]){for(const p in c)i[c[p].id]=!0,o[u.id]=!0;break}}const s=[];for(let l=0;l<t.length;l++){const u=t[l];if(a[u.id]&&o[u.id]){const c={};for(const p in u.inputs){const f=u.inputs[p];r[f.id]&&(c[p]=f)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,s.push(d)}}return s}function vse(t,e,n,r){for(let a=e.length-1;a>=0;a--){const i=e[a],o=[];if(i.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const s=i.gradient(o);for(const l in i.inputs){if(!(l in s))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(s)}.`);const u=n(()=>s[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=i.inputs[l];if(!vn(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const d=t[c.id];t[c.id]=r(d,u),d.dispose()}}}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const WD=20,bg=3,eN=7;function xse(t,e,n,r){const a=Ze(e),i=wse(t,e,n,a),o=e.length,s=i2(t,e,n,a,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(s.map(u=>"    "+u).join(`
`)),l.join(`
`)}function wse(t,e,n,r){const a=be(e),i=r[r.length-1],o=new Array(i).fill(0),s=e.length,l=n==="complex64"?xg(t):t;if(s>1)for(let u=0;u<a/i;u++){const c=u*i;for(let d=0;d<i;d++)o[d]=Math.max(o[d],vg(l[c+d],0,n).length)}return o}function vg(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(eN))} + ${parseFloat(t[1].toFixed(eN))}j`:ds(t)?r=`'${t}'`:n==="bool"?r=HD(t):r=parseFloat(t.toFixed(eN)).toString(),Lc(r,e)}function HD(t){return t===0?"false":"true"}function i2(t,e,n,r,a,i=!0){const o=n==="complex64"?2:1,s=e[0],l=e.length;if(l===0){if(n==="complex64"){const y=xg(t);return[vg(y[0],0,n)]}return n==="bool"?[HD(t[0])]:[t[0].toString()]}if(l===1){if(s>WD){const y=bg*o;let v=Array.from(t.slice(0,y)),b=Array.from(t.slice((s-bg)*o,s*o));return n==="complex64"&&(v=xg(v),b=xg(b)),["["+v.map((x,w)=>vg(x,a[w],n)).join(", ")+", ..., "+b.map((x,w)=>vg(x,a[s-bg+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?xg(t):Array.from(t)).map((y,v)=>vg(y,a[v],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),d=r[0]*o,p=[];if(s>WD){for(let y=0;y<bg;y++){const v=y*d,b=v+d;p.push(...i2(t.slice(v,b),u,n,c,a,!1))}p.push("...");for(let y=s-bg;y<s;y++){const v=y*d,b=v+d;p.push(...i2(t.slice(v,b),u,n,c,a,y===s-1))}}else for(let y=0;y<s;y++){const v=y*d,b=v+d;p.push(...i2(t.slice(v,b),u,n,c,a,y===s-1))}const f=l===2?",":"";p[0]="["+p[0]+f;for(let y=1;y<p.length-1;y++)p[y]=" "+p[y]+f;let g=`,
`;for(let y=2;y<l;y++)g+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":g),p}function xg(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Tr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=be(e),r!=null){const a=r.length;V(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Nr(n,this.size),this.strides=Ze(e)}set(e,...n){n.length===0&&(n=[0]),V(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const a of e){if(a<0||a>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=this.strides[a]*e[a];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return jo().makeTensor(this.values,this.shape,this.dtype)}}let jo=null,Pp=null;function kse(t){jo=t}function Sse(t){Pp=t}class Hn{constructor(e,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=be(e),this.strides=Ze(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Pp.buffer(this.shape,this.dtype,e)}bufferSync(){return Pp.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Oi(this.shape,e,this.dtype==="complex64")}arraySync(){return Oi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=jo().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>ll(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),jo().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=jo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>ll(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await jo().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(jo().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Pp.print(this,e)}clone(){return this.throwIfDisposed(),Pp.clone(this)}toString(e=!1){const n=this.dataSync();return xse(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Pp.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),jo().makeVariable(this,e,n,r)}}Object.defineProperty(Hn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Cse(){return D3("Tensor",()=>Hn)}Cse();class wg extends Hn{constructor(e,n,r,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!vn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);jo().disposeTensor(this),this.dataId=e.dataId,jo().incRef(this,null)}dispose(){jo().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(wg,Symbol.hasInstance,{value:t=>t instanceof Hn&&t.assign!=null&&t.assign instanceof Function});/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var tN;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(tN||(tN={}));var nN;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(nN||(nN={}));var rN;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(rN||(rN={}));var aN;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(aN||(aN={}));var iN;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(iN||(iN={}));const Ise={float32:aN,int32:nN,bool:rN,complex64:iN};function Xa(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Ise[t][e]}function o2(t){return Xa(t,"int32")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qn(t,e){if(t.dtype===e.dtype)return[t,e];const n=Xa(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function qD(t,e){V(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function Ese(t,e){return e.some(n=>n.id===t.id)}function oN(t){const e=[];return KD(t,e,new Set),e}function KD(t,e,n){if(t==null)return;if(t instanceof Hn){e.push(t);return}if(!Nse(t))return;const r=t;for(const a in r){const i=r[a];n.has(i)||(n.add(i),KD(i,e,n))}}function Nse(t){return Array.isArray(t)||typeof t=="object"}const Tse=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:qD,getTensorsInContainer:oN,isTensorInList:Ese,makeTypesMatch:qn},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sN(t){return t.kernelName!=null}class XD{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class wh{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new XD}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Mi(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new mse(this.backendInstance),!0}setupRegisteredKernels(){t2(this.backendName).forEach(e=>{e.setupFunc!=null&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){t2(e).forEach(n=>{n.disposeFunc!=null&&n.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof lv)&&typeof r.then=="function"){const a=++this.pendingBackendInitId,i=r.then(o=>a<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,Mi(`Initialization of backend ${e} failed`),Mi(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Mi(`Initialization of backend ${e} failed`),Mi(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:a,asyncInit:i}=this.initializeBackend(r);if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n),o=a.refCount(n);a.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let a;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(a),()=>(a=n(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(e,n,r){e();try{const a=r();return n(),a}catch(a){throw n(),a}}nextTensorId(){return wh.nextTensorId++}nextVariableId(){return wh.nextVariableId++}clone(e){const n=te.runKernel(Om,{x:e}),r={x:e},a=o=>({x:()=>{const s="float32",l={x:o},u={dtype:s};return te.runKernel(ym,l,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,e2(e,this.backendName)==null)throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const a=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-i-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const a=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let l;const u=sN(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(sN(e)){const{kernelName:g,inputs:y,attrs:v}=e;this.backendName==null&&this.backend;const b=e2(g,this.backendName);V(b!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),s=()=>{const x=this.backend.numDataIds();l=b.kernelFunc({inputs:y,attrs:v,backend:this.backend});const w=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,x,w);const S=w.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(a){const C=this.getTensorsForGradient(g,y,S);r=this.saveTensorsForBackwardMode(C)}return S}}else{const{forwardFunc:g}=e,y=v=>{a&&(r=v.map(b=>this.keep(this.clone(b))))};s=()=>{const v=this.backend.numDataIds();l=this.tidy(()=>g(this.backend,y));const b=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,v,b),b}}const{inputs:c,attrs:d}=e,p=sN(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=s():(f=this.profiler.profileKernel(u,c,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),a&&this.addTapeNode(u,c,n,p,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(g=>c[g]!=null?c[g].shape:null),outputShapes:n.map(g=>g.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(n=>this.keep(this.clone(n)))}getTensorsForGradient(e,n,r){const a=X3(e);if(a!=null){const i=a.inputsToSave||[],o=a.outputsToSave||[];let s;a.saveAllInputs?(V(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(n).map(u=>n[u])):s=i.map(u=>n[u]);const l=r.filter((u,c)=>o[c]);return s.concat(l)}return[]}makeTensor(e,n,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;let i=e;r==="string"&&ds(e[0])&&(i=e.map(l=>ps(l)));const o=a.write(i,n,r),s=new Hn(n,r,o,this.nextTensorId());if(this.trackTensor(s,a),r==="string"){const l=this.state.tensorInfo.get(o),u=SD(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return s}makeTensorFromDataId(e,n,r,a){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,a)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:a,dtype:i}=e,o=new Hn(a,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,a){r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));const i=new wg(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*dv(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof wg||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*dv(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,a,i,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=X3(e);l!=null&&(a=l.gradFunc),a!=null&&(s.gradient=u=>(u=u.map((c,d)=>{if(c==null){const p=r[d],f=Xr(p.size,p.dtype);return this.makeTensor(f,p.shape,p.dtype)}return c}),a(u.length>1?u:u[0],i,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=oN(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===a.id&&this.track(i)})}gradients(e,n,r,a=!1){if(V(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));V(i instanceof Hn,()=>"The result y returned by f() must be a tensor.");const o=bse(this.state.activeTape,n,i);if(!a&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const s={};s[i.id]=r??_se(i.shape),vse(s,o,u=>this.tidy(u),Rse);const l=n.map(u=>s[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return V(gu(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{V(n.every(s=>s instanceof Hn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const a={};n.forEach((s,l)=>{a[l]=s});const i=(s,l)=>(r=e(...n,l),V(r.value instanceof Hn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),V(gu(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(s,l)=>{const u=r.gradFunc(s,l),c=Array.isArray(u)?u:[u];V(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),V(c.every(p=>p instanceof Hn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((p,f)=>{d[f]=()=>p}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=di(),r=await this.backend.time(e);return r.wallMs=di()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new XD;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}wh.nextTensorId=0,wh.nextVariableId=0;function _se(t){const e=hv(be(t),"float32");return te.makeTensor(e,t,"float32")}function YD(){const t=_D();if(t._tfengine==null){const e=new TD(t);t._tfengine=new wh(e)}return qoe(t._tfengine.ENV),kse(()=>t._tfengine),t._tfengine}const te=YD();function Rse(t,e){const n={a:t,b:e};return te.runKernel(_p,n)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $se(){return typeof navigator<"u"&&navigator!=null}let lN;function Ose(t){lN=t}function uN(t){if(lN!==void 0)return lN;if(t||$se()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function cN(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const Mse=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:cN,isMobile:uN,mockIsMobile:Ose},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pi=fe();pi.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),pi.registerFlag("IS_BROWSER",()=>cN()),pi.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"),pi.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),pi.registerFlag("PROD",()=>!1),pi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>pi.getBool("DEBUG")),pi.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),pi.registerFlag("IS_TEST",()=>!1),pi.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),pi.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),pi.registerFlag("ENGINE_COMPILE_ONLY",()=>!1),pi.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),pi.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hs(t,e){let n=t;if(ca(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||ca(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&fe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&QD(t,r,[]),r}function QD(t,e,n){if(n=n||[],!Array.isArray(t)&&!ca(t)){V(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}V(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),V(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let a=0;a<t.length;++a)QD(t[a],r,n.concat(a))}function ZD(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function z(t,e,n,r="numeric"){if(t instanceof Hn)return ZD(r,t.dtype,e,n),t;let a=Tp(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),ZD(r,a,e,n),t==null||!ca(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const s=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${s}'`)}const i=hs(t,a);!ca(t)&&!Array.isArray(t)&&(t=[t]);const o=a!=="string"?bu(t,a):il(t,[],!0);return te.makeTensor(o,i,a)}function kg(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((a,i)=>z(a,`${e}[${i}]`,n,r))}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dN="__op";function ee(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+dN;const a=(...i)=>{te.startScope(n);try{const o=r(...i);return Bc(o)&&console.error("Cannot return a Promise inside of tidy."),te.endScope(o),o}catch(o){throw te.endScope(null),o}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pse(t,e){const n=z(t,"real","complex"),r=z(e,"imag","complex");Kr(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const a={real:n,imag:r};return te.runKernel(Ev,a)}const ul=ee({complex_:Pse});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vu(t,e,n,r){if(r==null&&(r=Tp(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ca(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){M3(e);const a=be(e),i=be(n);V(a===i,()=>`Based on the provided shape, [${e}], the tensor should have ${a} values but has ${i}`);for(let o=0;o<n.length;++o){const s=n[o],l=o===n.length-1?s!==be(e.slice(o)):!0;V(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!ca(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?bu(t,r):il(t,[],!0),te.makeTensor(t,e,r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vo(t,e,n){const r=hs(t,n);return vu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pN={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const s2=4;async function Ase(t,e){const n=[],r=[],a=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<a.length;++o){const s=a[o],l=Array.isArray(t)?t[o].tensor:t[s];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${s}': ${l.dtype}`);const u={name:s,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const p=await l.bytes(),f=p.reduce((v,b)=>v+b.length,0)+s2*p.length,g=new Uint8Array(f);let y=0;for(let v=0;v<p.length;v++){const b=p[v],x=new Uint8Array(new Uint32Array([b.length]).buffer);g.set(x,y),y+=s2,g.set(b,y),y+=b.length}d(g)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const i=await Promise.all(r);return{data:Dse(i),specs:n}}function JD(t,e){const n={};let r,a=0;for(const i of e){const o=i.name,s=i.dtype,l=i.shape,u=be(l);let c;if("quantization"in i){const d=i.quantization;if(d.dtype==="uint8"||d.dtype==="uint16"){if(!("min"in d&&"scale"in d))throw new Error(`Weight ${i.name} with quantization ${d.dtype} doesn't have corresponding metadata min and scale.`)}else if(d.dtype==="float16"){if(s!=="float32")throw new Error(`Weight ${i.name} is quantized with ${d.dtype} which only supports weights of type float32 not ${s}.`)}else throw new Error(`Weight ${i.name} has unknown quantization dtype ${d.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const p=pN[d.dtype],f=t.slice(a,a+u*p),g=d.dtype==="uint8"?new Uint8Array(f):new Uint16Array(f);if(s==="float32")if(d.dtype==="uint8"||d.dtype==="uint16"){c=new Float32Array(g.length);for(let y=0;y<g.length;y++){const v=g[y];c[y]=v*d.scale+d.min}}else if(d.dtype==="float16")r===void 0&&(r=Vse()),c=r(g);else throw new Error(`Unsupported quantization type ${d.dtype} for weight type float32.`);else if(s==="int32"){if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error(`Unsupported quantization type ${d.dtype} for weight type int32.`);c=new Int32Array(g.length);for(let y=0;y<g.length;y++){const v=g[y];c[y]=Math.round(v*d.scale+d.min)}}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);a+=u*p}else if(s==="string"){const d=be(i.shape);c=[];for(let p=0;p<d;p++){const f=new Uint32Array(t.slice(a,a+s2))[0];a+=s2;const g=new Uint8Array(t.slice(a,a+f));c.push(g),a+=f}}else{const d=pN[s],p=t.slice(a,a+u*d);if(s==="float32")c=new Float32Array(p);else if(s==="int32")c=new Int32Array(p);else if(s==="bool")c=new Uint8Array(p);else if(s==="complex64"){c=new Float32Array(p);const f=new Float32Array(c.length/2),g=new Float32Array(c.length/2);for(let b=0;b<f.length;b++)f[b]=c[b*2],g[b]=c[b*2+1];const y=Vo(f,l,"float32"),v=Vo(g,l,"float32");n[o]=ul(y,v),y.dispose(),v.dispose()}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);a+=u*d}s!=="complex64"&&(n[o]=Vo(c,l,s))}return n}function Dse(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let a=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}const hN=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function e8(t){return hN?Buffer.byteLength(t):new Blob([t]).size}function Lse(t){if(hN)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function Fse(t){if(hN){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function fN(t){if(t.length===1)return t[0];let e=0;t.forEach(a=>{e+=a.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(a=>{n.set(new Uint8Array(a),r),r+=a.byteLength}),n.buffer}function t8(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function n8(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function r8(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),r}async function mN(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),r8(t,n,r)}function Sg(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:e8(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:e8(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}function a8(t){const e=[];for(const n of t)e.push(...n.weights);return e}function Bse(){const t=n=>{let r=n<<13,a=0;for(;!(r&8388608);)a-=8388608,r<<=1;return r&=-8388609,a+=947912704,r|a},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function zse(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function jse(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function Vse(){const t=Bse(),e=zse(),n=jse();return r=>{const a=new ArrayBuffer(4*r.length),i=new Uint32Array(a);for(let o=0;o<r.length;o++){const s=r[o],l=t[n[s>>10]+(s&1023)]+e[s>>10];i[o]=l}return new Float32Array(a)}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Kn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Kn.instance==null&&(Kn.instance=new Kn),Kn.instance}static registerSaveRouter(e){Kn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Kn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Kn.getHandlers(e,"save")}static getLoadHandlers(e,n){return Kn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const a=[];return(n==="load"?Kn.getInstance().loadRouters:Kn.getInstance().saveRouters).forEach(i=>{const o=i(e,r);o!==null&&a.push(o)}),a}}const Use=t=>Kn.registerSaveRouter(t),Gse=t=>Kn.registerLoadRouter(t),Wse=t=>Kn.getSaveHandlers(t),Hse=(t,e)=>Kn.getLoadHandlers(t,e);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gN="tensorflowjs",yN=1,Gc="models_store",xu="model_info_store";function i8(){if(!fe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function bN(t){const e=t.result;e.createObjectStore(Gc,{keyPath:"modelPath"}),e.createObjectStore(xu,{keyPath:"modelPath"})}class Wc{constructor(e){if(this.indexedDB=i8(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,a)=>{const i=this.indexedDB.open(gN,yN);i.onupgradeneeded=()=>bN(i),i.onsuccess=()=>{const o=i.result;if(n==null){const s=o.transaction(Gc,"readonly"),l=s.objectStore(Gc).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return o.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=u=>(o.close(),a(l.error)),s.oncomplete=()=>o.close()}else{const s=Sg(n),l=o.transaction(xu,"readwrite");let u=l.objectStore(xu);const c=u.put({modelPath:this.modelPath,modelArtifactsInfo:s});let d;c.onsuccess=()=>{d=o.transaction(Gc,"readwrite");const p=d.objectStore(Gc).put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:s});p.onsuccess=()=>r({modelArtifactsInfo:s}),p.onerror=f=>{u=l.objectStore(xu);const g=u.delete(this.modelPath);g.onsuccess=()=>(o.close(),a(p.error)),g.onerror=y=>(o.close(),a(p.error))}},c.onerror=p=>(o.close(),a(c.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},i.onerror=o=>a(i.error)})}}Wc.URL_SCHEME="indexeddb://";const o8=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Wc.URL_SCHEME)?qse(t.slice(Wc.URL_SCHEME.length)):null;Kn.registerSaveRouter(o8),Kn.registerLoadRouter(o8);function qse(t){return new Wc(t)}function Kse(t){return t.startsWith(Wc.URL_SCHEME)?t.slice(Wc.URL_SCHEME.length):t}class Xse{constructor(){this.indexedDB=i8()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(gN,yN);r.onupgradeneeded=()=>bN(r),r.onsuccess=()=>{const a=r.result,i=a.transaction(xu,"readonly"),o=i.objectStore(xu).getAll();o.onsuccess=()=>{const s={};for(const l of o.result)s[l.modelPath]=l.modelArtifactsInfo;e(s)},o.onerror=s=>(a.close(),n(o.error)),i.oncomplete=()=>a.close()},r.onerror=a=>n(r.error)})}async removeModel(e){return e=Kse(e),new Promise((n,r)=>{const a=this.indexedDB.open(gN,yN);a.onupgradeneeded=()=>bN(a),a.onsuccess=()=>{const i=a.result,o=i.transaction(xu,"readwrite"),s=o.objectStore(xu),l=s.get(e);let u;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=s.delete(e),d=()=>{u=i.transaction(Gc,"readwrite");const p=u.objectStore(Gc).delete(e);p.onsuccess=()=>n(l.result.modelArtifactsInfo),p.onerror=f=>r(l.error)};c.onsuccess=d,c.onerror=p=>(d(),i.close(),r(l.error))}},l.onerror=c=>(i.close(),r(l.error)),o.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},a.onerror=i=>r(a.error)})}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cl="/",Ap="tensorflowjs_models",s8="info",Yse="model_topology",Qse="weight_specs",Zse="weight_data",Jse="model_metadata";function l8(t){return{info:[Ap,t,s8].join(cl),topology:[Ap,t,Yse].join(cl),weightSpecs:[Ap,t,Qse].join(cl),weightData:[Ap,t,Zse].join(cl),modelMetadata:[Ap,t,Jse].join(cl)}}function u8(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function ele(t){const e=t.split(cl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(cl)}function tle(t){return t.startsWith(Hc.URL_SCHEME)?t.slice(Hc.URL_SCHEME.length):t}class Hc{constructor(e){if(!fe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=l8(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Sg(e);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Lse(e.weightData));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:a}}catch{throw u8(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=a;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const s=JSON.parse(i);n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy,s.signature!=null&&(n.signature=s.signature),s.userDefinedMetadata!=null&&(n.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(n.modelInitializer=s.modelInitializer),s.trainingConfig!=null&&(n.trainingConfig=s.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Fse(o),n}}Hc.URL_SCHEME="localstorage://";const c8=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Hc.URL_SCHEME)?nle(t.slice(Hc.URL_SCHEME.length)):null;Kn.registerSaveRouter(c8),Kn.registerLoadRouter(c8);function nle(t){return new Hc(t)}class rle{constructor(){V(fe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),V(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Ap+cl,r=cl+s8;for(let a=0;a<this.LS.length;++a){const i=this.LS.key(a);if(i.startsWith(n)&&i.endsWith(r)){const o=ele(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=tle(e);const n=l8(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return u8(n),r}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Dp="://";class Ba{constructor(){this.managers={}}static getInstance(){return Ba.instance==null&&(Ba.instance=new Ba),Ba.instance}static registerManager(e,n){V(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Dp)&&(e=e.slice(0,e.indexOf(Dp))),V(e.length>0,()=>"scheme must not be an empty string.");const r=Ba.getInstance();V(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ba.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ba.getInstance().managers)}}function l2(t){if(t.indexOf(Dp)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ba.getSchemes().join(",")}`);return{scheme:t.split(Dp)[0],path:t.split(Dp)[1]}}async function d8(t,e,n=!1){V(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Kn.getLoadHandlers(t);V(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),V(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const a=r[0],i=Kn.getSaveHandlers(e);V(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),V(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],s=l2(t).scheme,l=l2(t).path,u=s===l2(t).scheme,c=await a.load();n&&u&&await Ba.getManager(s).removeModel(l);const d=await o.save(c);return n&&!u&&await Ba.getManager(s).removeModel(l),d.modelArtifactsInfo}async function ale(){const t=Ba.getSchemes(),e={};for(const n of t){const r=await Ba.getManager(n).listModels();for(const a in r){const i=n+Dp+a;e[i]=r[a]}}return e}async function ile(t){const e=l2(t);return Ba.getManager(e.scheme).removeModel(e.path)}async function ole(t,e){return d8(t,e,!1)}async function sle(t,e){return d8(t,e,!0)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lle{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(!window||!fe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const a=this.functionRefs[r.data.index];a(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}}if(fe().get("IS_BROWSER")){fe().setPlatform("browser",new lle);try{Ba.registerManager(Hc.URL_SCHEME,new rle)}catch{}try{Ba.registerManager(Wc.URL_SCHEME,new Xse)}catch{}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ule={importFetch:()=>require("node-fetch")};let vN;class cle{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return fe().global.fetch!=null?fe().global.fetch(e,n):(vN==null&&(vN=ule.importFetch()),vN(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}}fe().get("IS_NODE")&&!fe().get("IS_BROWSER")&&fe().setPlatform("node",new cle);/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function St(t,e="float32",n){return e=e||"float32",M3(t),new Tr(t,e,n)}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dle(t,e){const n=z(t,"x","cast");if(!kD(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:e};return te.runKernel(ym,r,a)}const Bn=ee({cast_:dle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ple(t){const e={x:z(t,"x","clone","string_or_numeric")};return te.runKernel(Om,e)}const dl=ee({clone_:ple});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xN(t,e=!1){console.log(t.toString(e))}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/YD();const hle={buffer:St,cast:Bn,clone:dl,print:xN};Sse(hle);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fle="model",mle=".json",gle=".weights.bin";function p8(t){return new Promise(e=>setTimeout(e)).then(t)}class pd{constructor(e){if(!fe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(pd.URL_SCHEME)&&(e=e.slice(pd.URL_SCHEME.length)),(e==null||e.length===0)&&(e=fle),this.modelJsonFileName=e+mle,this.weightDataFileName=e+gle}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=n8(e,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await p8(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;s.download=this.weightDataFileName,s.href=n,await p8(()=>s.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Sg(e)}}}}pd.URL_SCHEME="downloads://";class yle{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=a=>{const i=JSON.parse(a.target.result),o=i.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const s=mN(i,l=>this.loadWeights(l));e(s)},r.onerror=a=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const a=this.checkManifestAndWeightFiles(e),i=r.map(o=>this.loadWeightsFile(o,a[o]));return Promise.all(i).then(o=>[n,fN(o)])}loadWeightsFile(e,n){return new Promise((r,a)=>{const i=new FileReader;i.onload=o=>{const s=o.target.result;r(s)},i.onerror=o=>a(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>t8(i.name)),a={};for(const i of e)i.paths.forEach(o=>{const s=t8(o);if(n.indexOf(s)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(n.push(s),r.indexOf(s)===-1)throw new Error(`Weight file with basename '${s}' is not provided.`);a[o]=this.weightsFiles[r.indexOf(s)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return a}}const ble=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(pd.URL_SCHEME)?vle(t.slice(pd.URL_SCHEME.length)):null;Kn.registerSaveRouter(ble);function vle(t="model"){return new pd(t)}function xle(t){return new yle(t)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h8(t,e,n,r){o(t),n=n??0,r=r??1,s(n,r);let a=0;const i=l=>(l.then(u=>{const c=n+ ++a/t.length*(r-n);return e(c),u}),l);function o(l){V(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function s(l,u){V(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),V(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),V(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(i))}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function f8(t,e){e==null&&(e={});const n=e.fetchFunc==null?fe().platform.fetch:e.fetchFunc,r=t.map(u=>n(u,e.requestInit,{isBinary:!0})),a=0,i=.5,o=(e.onProgress==null?await Promise.all(r):await h8(r,e.onProgress,a,i)).map(u=>u.arrayBuffer());return e.onProgress==null?await Promise.all(o):await h8(o,e.onProgress,.5,1)}async function wle(t,e="",n,r){return m8(a=>f8(a,{requestInit:r}))(t,e,n)}function m8(t){return async(e,n="",r)=>{const a=e.map(()=>!1),i={},o=r!=null?r.map(()=>!1):[],s=[];if(e.forEach((f,g)=>{let y=0;f.weights.forEach(v=>{const b="quantization"in v?v.quantization.dtype:v.dtype,x=pN[b]*be(v.shape),w=()=>{a[g]=!0,i[g]==null&&(i[g]=[]),i[g].push({manifestEntry:v,groupOffset:y,sizeBytes:x})};r!=null?r.forEach((S,C)=>{S===v.name&&(w(),o[C]=!0)}):w(),s.push(v.name),y+=x})}),!o.every(f=>f)){const f=r.filter((g,y)=>!o[y]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${s.join(", ")}.`)}const l=a.reduce((f,g,y)=>(g&&f.push(y),f),[]),u=[];l.forEach(f=>{e[f].paths.forEach(g=>{const y=n+(n.endsWith("/")?"":"/")+g;u.push(y)})});const c=await t(u),d={};let p=0;return l.forEach(f=>{const g=e[f].paths.length;let y=0;for(let w=0;w<g;w++)y+=c[p+w].byteLength;const v=new ArrayBuffer(y),b=new Uint8Array(v);let x=0;for(let w=0;w<g;w++){const S=new Uint8Array(c[p+w]);b.set(S,x),x+=S.byteLength}i[f].forEach(w=>{const S=v.slice(w.groupOffset,w.groupOffset+w.sizeBytes),C=JD(S,[w.manifestEntry]);for(const I in C)d[I]=C[I]}),p+=g}),d}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kle="application/octet-stream",Sle="application/json";class wN{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(V(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=fe().platform.fetch,V(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&V(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=n8(e,r);n.body.append("model.json",new Blob([JSON.stringify(a)],{type:Sle}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:kle}),"model.weights.bin");const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:Sg(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=n.modelTopology,a=n.weightsManifest;if(r==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return mN(n,i=>this.loadWeights(i))}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,a]=Cle(n),i=this.weightPathPrefix||r,o=a8(e),s=[],l=[];for(const c of e)for(const d of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(d)):s.push(i+d+a);this.weightUrlConverter&&s.push(...await Promise.all(l));const u=await f8(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,fN(u)]}}wN.URL_SCHEME_REGEX=/^https?:\/\//;function Cle(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),a=n>e?t.substring(n):"";return[r+"/",a]}function kN(t){return t.match(wN.URL_SCHEME_REGEX)!=null}const g8=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>kN(r)):n=kN(t),n)return SN(t,e)}return null};Kn.registerSaveRouter(g8),Kn.registerLoadRouter(g8);function SN(t,e){return new wN(t,e)}function Ile(t,e){return SN(t,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class CN{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class y8{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class Ele{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function Nle(t,e,n,r){const a=arguments;return new Ele(b8(...a))}function b8(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new CN(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new CN({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new CN({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function Tle(t){return new y8(t)}function _le(t){return new y8(t)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const IN=Object.freeze(Object.defineProperty({__proto__:null,browserFiles:xle,browserHTTPRequest:Ile,concatenateArrayBuffers:fN,copyModel:ole,decodeWeights:JD,encodeWeights:Ase,fromMemory:Nle,fromMemorySync:b8,getLoadHandlers:Hse,getModelArtifactsForJSON:mN,getModelArtifactsForJSONSync:r8,getModelArtifactsInfoForJSON:Sg,getSaveHandlers:Wse,getWeightSpecs:a8,http:SN,isHTTPScheme:kN,listModels:ale,loadWeights:wle,moveModel:sle,registerLoadRouter:Gse,registerSaveRouter:Use,removeModel:ile,weightsLoaderFactory:m8,withSaveHandler:Tle,withSaveHandlerSync:_le},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rle(t,e,n=!1,r=!1){let a=z(t,"a","matMul"),i=z(e,"b","matMul");[a,i]=qn(a,i);const o={a,b:i},s={transposeA:n,transposeB:r};return te.runKernel(kv,o,s)}const ln=ee({matMul_:Rle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $le(t,e,n=1,r=0,a="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:z(t,"indices","oneHot","int32")},o={dtype:a,depth:e,onValue:n,offValue:r};return te.runKernel(gx,i,o)}const u2=ee({oneHot_:$le});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ole(){fe().set("PROD",!0)}function Mle(){fe().set("DEBUG",!0)}function Ple(){fe().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Ale(t){fe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Dle(){te.disposeVariables()}function pl(){return te}function Lle(){return te.memory()}function Fle(t){return te.profile(t)}function Ht(t,e){return te.tidy(t,e)}function da(t){oN(t).forEach(e=>e.dispose())}function fs(t){return te.keep(t)}function Ble(t){return te.time(t)}function zle(t){return te.setBackend(t)}function jle(){return te.ready()}function Vle(){return te.backendName}function Ule(t){te.removeBackend(t)}function Gle(t){return te.findBackend(t)}function Wle(t){return te.findBackendFactory(t)}function EN(t,e,n=1){return te.registerBackend(t,e,n)}function Hle(){return te.backend}function qle(t,e){fe().setPlatform(t,e)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kle(t){const e={input:z(t,"input","imag")};return te.runKernel(Jv,e)}const Cg=ee({imag_:Kle});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xle(t){const e={x:z(t,"x","neg")};return te.runKernel(dx,e)}const ms=ee({neg_:Xle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yle(t){const e={input:z(t,"input","real")};return te.runKernel(Cx,e)}const Lp=ee({real_:Yle});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qle(t,e,n){const r=z(t,"x","transpose");if(e==null&&(e=r.shape.map((o,s)=>s).reverse()),V(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{V(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const a={x:r},i={perm:e};return r.dtype==="complex64"?Ht(()=>{let o=Lp(r),s=Cg(r);return o=te.runKernel(Rp,{x:o},i),s=te.runKernel(Rp,{x:s},i),n&&(s=ms(s)),ul(o,s)}):te.runKernel(Rp,a,i)}const Ig=ee({transpose_:Qle});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zle(t,e,n){const r=z(t,"labels","confusionMatrix"),a=z(e,"predictions","confusionMatrix");V(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),V(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),V(a.rank===1,()=>`Expected the rank of predictions to be 1, but got ${a.rank}`),V(r.shape[0]===a.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${a.shape[0]}. Labels and predictions should have the same number of elements.`),V(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const i=u2(Bn(r,"int32"),n),o=u2(Bn(a,"int32"),n),s=Ig(i),l=ln(s,o);return Bn(l,"int32")}const Jle=ee({confusionMatrix_:Zle});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const eue=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:Jle},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qc(t,e){const n=t.length,r=[];for(let a=0;a<n;a++){const i=n-1-a,o=t[i]||1;(e[e.length-1-a]||1)>1&&o===1&&r.unshift(i)}return r}function NN(t,e){const n=[];for(let r=0;r<e.length;r++){const a=t[t.length-r-1],i=e.length-r-1,o=e[i];(a==null||a===1&&o>1)&&n.unshift(i)}return n}function zt(t,e){const n=[],r=Math.max(t.length,e.length);for(let a=0;a<r;a++){let i=t[t.length-a-1];i==null&&(i=1);let o=e[e.length-a-1];if(o==null&&(o=1),i===1)n.unshift(o);else if(o===1)n.unshift(i);else if(i!==o){const s=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(s)}else n.unshift(i)}return n}const tue=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:zt,getBroadcastDims:qc,getReductionAxes:NN},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function TN(t,e,n){if(Ac(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=hs(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return vu(t,e,r,n)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/let Kc;function v8(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)s=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(e2(Zx,te.backendName)!=null){const p={pixels:t},f={numChannels:e};return te.runKernel(Zx,p,f)}const[l,u]=a?[t.videoWidth,t.videoHeight]:[t.width,t.height];let c;if(o)c=t.getContext("2d").getImageData(0,0,l,u).data;else if(r||n)c=t.data;else if(i||a||s){if(Kc==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Kc=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Kc=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Kc.canvas.width=l,Kc.canvas.height=u,Kc.drawImage(t,0,0,l,u),c=Kc.getImageData(0,0,l,u).data}let d;if(e===4)d=new Int32Array(c);else{const p=l*u;d=new Int32Array(p*e);for(let f=0;f<p;f++)for(let g=0;g<e;++g)d[f*e+g]=c[f*4+g]}return TN(d,[u,l,e],"int32")}function nue(t){return t!=null&&t.data instanceof Uint8Array}function rue(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function aue(t){return t!=null&&t.width!==0&&t.height!==0}function iue(t){return rue()&&!(t instanceof ImageBitmap)&&aue(t)&&!nue(t)}async function oue(t,e=3){let n=null;if(fe().getBool("WRAP_TO_IMAGEBITMAP")&&iue(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return v8(n,e)}async function x8(t,e){let n=z(t,"img","toPixels");if(!(t instanceof Hn)){const u=n;n=Bn(u,"int32"),u.dispose()}if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,a]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2];if(i>4||i===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${i}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const o=await n.data(),s=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(a*r*4);for(let u=0;u<r*a;++u){const c=[0,0,0,255];for(let p=0;p<i;p++){const f=o[u*i+p];if(n.dtype==="float32"){if(f<0||f>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${f}.`)}else if(n.dtype==="int32"&&(f<0||f>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${f}.`);i===1?(c[0]=f*s,c[1]=f*s,c[2]=f*s):c[p]=f*s}const d=u*4;l[d+0]=Math.round(c[0]),l[d+1]=Math.round(c[1]),l[d+2]=Math.round(c[2]),l[d+3]=Math.round(c[3])}if(e!=null){e.width=a,e.height=r;const u=e.getContext("2d"),c=new ImageData(l,a,r);u.putImageData(c,0,0)}return n!==t&&n.dispose(),l}const w8=ee({fromPixels_:v8}),sue=Object.freeze(Object.defineProperty({__proto__:null,fromPixels:w8,fromPixelsAsync:oue,toPixels:x8},Symbol.toStringTag,{value:"Module"}));function c2(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(be(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const a=e.shape,i=a[a.length-1];let o=1;for(let d=0;d<a.length-1;++d)o*=a[d];const s=t.shape,l=a.slice();l.pop();let u=1;for(let d=i;d<n;++d)u*=s[d],l.push(s[d]);const c=[...Ze(t.shape).map(d=>d/u),1].slice(0,i);return[l,o,u,c]}const lue=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:c2},Symbol.toStringTag,{value:"Module"}));function _N(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(i+` update.rank < ${a}. `);if(t.length<r+(n.rank-a))throw new Error(i+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+t.length-r)throw new Error(i+` update.rank != ${a+t.length-r}`);for(let o=0;o<a;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-a;++o)if(n.shape[o+a]!==t[o+r])throw new Error(i+` updates.shape[${o+a}] (${n.shape[o+a]}) != shape[${o+a}] (${t[o+a]})`)}function RN(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}_N(n,e,t)}function Fp(t,e,n){const r=e.shape.length,a=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let d=a;d<i;++d)o*=n[d];const s=a<1?1:a,l=be(e.shape)/s,u=[...Ze(n.slice(0,a)),1],c=be(n);return{sliceRank:a,numUpdates:l,sliceSize:o,strides:u,outputSize:c}}const uue=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Fp,validateInput:RN,validateUpdateShape:_N},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $N=-2,cue=-1;function ON(t,e,n){const r=t.shape.length;V(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),V(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)V(e[a]+n[a]<=t.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${e[a]+n[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function due(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function MN(t,e,n){const r=[];for(let a=0;a<t.length;a++)r[a]=Math.ceil((e[a]-t[a])/n[a]);return r}function k8(t,e,n,r){const a=[...t];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)i===0?a[e]=1:(a.splice(e,0,1),a.pop());return a}function S8(t,e,n){return n<=t?n:n-(e-1)}function C8(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function pue(t,e,n,r,a,i,o,s,l){const u=t.length;let c=new Array(u),d=new Array(u),p=new Array(u);if(e.length&&n>0){const f=e[0],g=n+1;c=I8(o,f,g,r,t),d=E8(s,f,g,a,t),p=k8(i,f,g,t)}else for(let f=0;f<u;f++)c[f]=T8(o,r,i,t,f,l),d[f]=_8(s,a,i,t,f,l),p[f]=N8(i,f,l);return{begin:c,end:d,strides:p}}function I8(t,e,n,r,a){const i=[...a],o=C8(n,e);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{const l=S8(e,n,s);let u=r[l];t&1<<l&&(u=0),i[s]=u}return i}function E8(t,e,n,r,a){const i=[...a],o=C8(n,e);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{const l=S8(e,n,s);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[s]=u}for(let s=0;s<i.length;s++){const l=a[s];i[s]<0&&(i[s]+=l),i[s]=mu(0,i[s],a[s])}return i}function N8(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function T8(t,e,n,r,a,i){let o=e[a];const s=n[a]||1;(t&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),o=mu(0,o,l-1),o}function _8(t,e,n,r,a,i){let o=e[a];const s=n[a]||1;(t&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),s>0?o=mu(0,o,l):o=mu(-1,o,l-1),o}function PN(t,e,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(e[a]>0||n[a]!==t[a])return!1;return!0}function AN(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function DN(t,e,n){let r;const a=t.shape.length;typeof e=="number"?r=[e,...new Array(a-1).fill(0)]:e.length<a?r=e.concat(new Array(a-e.length).fill(0)):r=e.slice(),r.forEach(o=>{V(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=[n,...new Array(a-1).fill(-1)]:n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map((o,s)=>o>=0?o:(V(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${s}.`),t.shape[s]-r[s])),[r,i]}function LN(t,e,n,r,a,i,o,s,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)c&&1<<x&s&&d.numAddAxisAfterEllipsis++,1<<x&o&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};hue(d,p);let f=!0,g=!0,y=!0;const v=[],b=[];for(let x=0;x<t.length;++x){if(p.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const w=!!(p.shrinkAxisMask&1<<x),S=t[x];if(S===-1){v.push(w?1:-1);continue}const C=[p.beginMask&1<<x,p.endMask&1<<x],I=[p.strides[x]>0?0:-1,p.strides[x]>0?S:S-1];if(w&&p.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&p.strides[x]===1;const _=!!(p.beginMask&1<<x&&p.endMask&1<<x);if(p.beginValid&&p.endValid){if(w){const L=p.begin[x]<0?S+p.begin[x]:p.begin[x];if(p.begin[x]=L,p.end[x]=p.begin[x]+1,L<0||L>=S)throw Error(`slice index ${p.begin[x]} of dimension ${x} out of bounds.`)}else p.begin[x]=R8(p.begin[x],0,p.strides[x],S,C,I),p.end[x]=R8(p.end[x],1,p.strides[x],S,C,I);const P=p.strides[x]===1&&p.begin[x]===0&&p.end[x]===S;f=f&&P,g=g&&(x===0&&p.strides[x]===1||P)}else f=f&&p.strides[x]===1&&_,g=g&&(x===0&&p.strides[x]===1||_);let T,M=!1;if(p.beginValid&&p.endValid?(T=p.end[x]-p.begin[x],M=!0):w?(T=1,M=!0):_&&S>=0&&(p.strides[x]<0?T=-S:T=S,M=!0),M){let P;T===0||T<0!=p.strides[x]<0?P=0:P=Math.trunc(T/p.strides[x])+(T%p.strides[x]!==0?1:0),v.push(P)}else v.push(-1)}for(let x=0;x<p.finalShapeGatherIndices.length;++x){const w=p.finalShapeGatherIndices[x];w>=0?b.push(v[w]):w===$N&&b.push(1)}return{finalShapeSparse:b.filter((x,w)=>p.finalShapeGatherIndices[w]!==$N),finalShape:b,isIdentity:f,sliceDim0:g,isSimpleSlice:y,begin:p.begin,end:p.end,strides:p.strides}}function hue(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const a=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<a;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push($N),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(cue),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function R8(t,e,n,r,a,i){if(a[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const $8=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:ON,computeFlatOffset:AN,computeOutShape:MN,getNormalizedAxes:pue,isSliceContinous:PN,maskToAxes:due,parseSliceParams:DN,sliceInfo:LN,startForAxis:T8,startIndicesWithElidedDims:I8,stopForAxis:_8,stopIndicesWithElidedDims:E8,stridesForAxis:N8,stridesWithElidedDims:k8},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class O8{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Bu{constructor(){this.classNameMap={}}static getMap(){return Bu.instance==null&&(Bu.instance=new Bu),Bu.instance}static register(e){Bu.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function wu(t){V(t.className!=null,()=>"Class being registered does not have the static className property defined."),V(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),V(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Bu.register(t)}const fue=Object.freeze(Object.defineProperty({__proto__:null,Serializable:O8,SerializationMap:Bu,registerClass:wu},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mue=.001,M8=.1;function gue(t,e,n){return n==null&&(n=FN()),BN(t,e,(r,a)=>zN(r,a,n))}function FN(){return te.backend.floatPrecision()===32?mue:M8}function BN(t,e,n){let r=!0;if((ca(t)||ca(e))&&(r=!1),ca(t)&&ca(e)&&(r=!0),r){const o=t.constructor.name,s=e.constructor.name;if(o!==s)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${s}`)}if(Array.isArray(t)&&Array.isArray(e)){const o=hs(t),s=hs(e);if(!vn(o,s))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${s}]`)}const a=ca(t)?t:il(t),i=ca(e)?e:il(e);if(a.length!==i.length)throw new Error(`Arrays have different lengths actual: ${a.length} vs expected: ${i.length}.
Actual:   ${a}.
Expected: ${i}.`);for(let o=0;o<i.length;++o){const s=a[o],l=i[o];if(!n(s,l))throw new Error(`Arrays differ: actual[${o}] = ${s}, expected[${o}] = ${l}.
Actual:   ${a}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function yue(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function bue(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return ds(t)||ds(t[0])||ds(e)||ds(e[0])?BN(t,n,(r,a)=>r==a):BN(t,e,(r,a)=>zN(r,a,0))}function vue(t,e,n){if(n==null&&(n=FN()),!zN(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function zN(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function xue(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function wue(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error(`Expected ArrayBuffer value at ${a} to be ${r[a]} but got ${n[a]} instead`)}function P8(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?P8(n):t[e]=ps(n)}return t}function kue(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function Sue(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const Cue=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:M8,createVideoElement:kue,encodeStrings:P8,expectArrayBuffersEqual:wue,expectArraysClose:gue,expectArraysEqual:bue,expectNumbersClose:vue,expectPromiseToFail:yue,expectValuesInRange:xue,play:Sue,testEpsilon:FN},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const Iue="3.21.0";/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Eue(t,e){let n=z(t,"a","add"),r=z(e,"b","add");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(_p,a)}const ft=ee({add_:Eue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nue(t,e){let n=z(t,"a","floorDiv"),r=z(e,"b","floorDiv");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(_m,a)}const jN=ee({floorDiv_:Nue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tue(t,e){let n=z(t,"a","div"),r=z(e,"b","div");if([n,r]=qn(n,r),n.dtype==="int32"&&r.dtype==="int32")return jN(n,r);const a={a:n,b:r},i={};return te.runKernel(km,a,i)}const In=ee({div_:Tue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _ue(t,e){let n=z(t,"a","mul"),r=z(e,"b","mul");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(Hm,a)}const De=ee({mul_:_ue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rue(t){const e=z(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return te.runKernel(Nv,n)}else{const n={x:e};return te.runKernel(fv,n)}}const hi=ee({abs_:Rue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $ue(t){const e={x:z(t,"x","acos")};return te.runKernel(cm,e)}const A8=ee({acos_:$ue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Oue(t){const e={x:z(t,"x","acosh")};return te.runKernel(dm,e)}const D8=ee({acosh_:Oue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mue(t){V(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),V(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((a,i)=>z(a,`tensors${i}`,"addN")),n=e[0];e.forEach(a=>{if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(a=>{if(!vn(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return te.runKernel(mv,r)}const L8=ee({addN_:Mue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pue(t,e=null,n=!1){const r={x:z(t,"x","all","bool")},a={axis:e,keepDims:n};return te.runKernel(gv,r,a)}const F8=ee({all_:Pue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Aue(t,e=null,n=!1){const r={x:z(t,"x","any","bool")},a={axis:e,keepDims:n};return te.runKernel(yv,r,a)}const B8=ee({any_:Aue});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Due(t,e=0){const n={x:z(t,"x","argMax")},r={axis:e};return te.runKernel(bv,n,r)}const z8=ee({argMax_:Due});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lue(t,e=0){const n={x:z(t,"x","argMin")},r={axis:e};return te.runKernel(vv,n,r)}const j8=ee({argMin_:Lue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fue(t){const e={x:z(t,"x","asin")};return te.runKernel(pm,e)}const V8=ee({asin_:Fue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bue(t){const e={x:z(t,"x","asinh")};return te.runKernel(hm,e)}const U8=ee({asinh_:Bue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zue(t){const e={x:z(t,"x","atan")};return te.runKernel(fm,e)}const G8=ee({atan_:zue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jue(t,e){let n=z(t,"a","atan2"),r=z(e,"b","atan2");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(gm,a)}const W8=ee({atan2_:jue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vue(t){const e={x:z(t,"x","atanh")};return te.runKernel(mm,e)}const H8=ee({atanh_:Vue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Eg(t,e,n,r,a="NHWC",i){const o=t[3],s=[...e,o],l=fl(a);return Br(t,s,n,i,r,null,null,l)}function oo(t,e,n,r,a,i,o="channelsLast"){const[s,l]=d2(e);let u;if(o==="channelsLast")u=[s,l,t[3],t[3]];else if(o==="channelsFirst")u=[s,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Br(t,u,n,r,a,i,!1,o)}function hl(t,e,n,r,a,i,o="NDHWC"){const[s,l,u]=UN(e);let c,d;if(o==="NDHWC")d="channelsLast",c=[s,l,u,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",c=[s,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return ku(t,c,n,r,a,!1,d,i)}function Br(t,e,n,r,a,i,o=!1,s="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(s==="channelsLast")[l,u,c,d]=t;else if(s==="channelsFirst")[l,d,u,c]=t;else throw new Error(`Unknown dataFormat ${s}`);const[p,f,,g]=e,[y,v]=d2(n),[b,x]=d2(r),w=Bp(p,b),S=Bp(f,x),{padInfo:C,outHeight:I,outWidth:_}=Wue(a,u,c,y,v,w,S,i,s),T=o?g*d:g;let M;return s==="channelsFirst"?M=[l,T,I,_]:s==="channelsLast"&&(M=[l,I,_,T]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:d,outHeight:I,outWidth:_,outChannels:T,padInfo:C,strideHeight:y,strideWidth:v,filterHeight:p,filterWidth:f,effectiveFilterHeight:w,effectiveFilterWidth:S,dilationHeight:b,dilationWidth:x,inShape:t,outShape:M,filterShape:e}}function ku(t,e,n,r,a,i=!1,o="channelsLast",s){let[l,u,c,d,p]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,d,p]=t;else if(o==="channelsFirst")[l,p,u,c,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[f,g,y,,v]=e,[b,x,w]=UN(n),[S,C,I]=UN(r),_=Bp(f,S),T=Bp(g,C),M=Bp(y,I),{padInfo:P,outDepth:L,outHeight:j,outWidth:B}=Hue(a,u,c,d,b,x,w,_,T,M,s),K=i?v*p:v;let X;return o==="channelsFirst"?X=[l,K,L,j,B]:o==="channelsLast"&&(X=[l,L,j,B,K]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:d,inChannels:p,outDepth:L,outHeight:j,outWidth:B,outChannels:K,padInfo:P,strideDepth:b,strideHeight:x,strideWidth:w,filterDepth:f,filterHeight:g,filterWidth:y,effectiveFilterDepth:_,effectiveFilterHeight:T,effectiveFilterWidth:M,dilationDepth:S,dilationHeight:C,dilationWidth:I,inShape:t,outShape:X,filterShape:e}}function Uue(t,e,n,r,a){r==null&&(r=VN(t,e,n));const i=t[0],o=t[1],s=Xc((i-e+2*r)/n+1,a),l=Xc((o-e+2*r)/n+1,a);return[s,l]}function Gue(t,e,n,r,a,i){a==null&&(a=VN(t,e,r));const o=t[0],s=t[1],l=t[2],u=Xc((o-e+2*a)/r+1,i),c=Xc((s-e+2*a)/r+1,i),d=Xc((l-e+2*a)/r+1,i);return[u,c,d,n]}function VN(t,e,n,r=1){const a=Bp(e,r);return Math.floor((t[0]*(n-1)-n+a)/2)}function d2(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function UN(t){return typeof t=="number"?[t,t,t]:t}function Bp(t,e){return e<=1?t:t+(t-1)*(e-1)}function Wue(t,e,n,r,a,i,o,s,l){let u,c,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const p=Uue([e,n],i,r,t,s);c=p[0],d=p[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/a);const p=Math.max(0,(c-1)*r+i-e),f=Math.max(0,(d-1)*a+o-n),g=Math.floor(p/2),y=p-g,v=Math.floor(f/2),b=f-v;u={top:g,bottom:y,left:v,right:b,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),d=Math.ceil((n-o+1)/a);else if(typeof t=="object"){const p=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],g=l==="channelsLast"?t[2][0]:t[3][0],y=l==="channelsLast"?t[2][1]:t[3][1];u={top:p,bottom:f,left:g,right:y,type:p===0&&f===0&&g===0&&y===0?"VALID":"EXPLICIT"},c=Xc((e-i+p+f)/r+1,s),d=Xc((n-o+g+y)/a+1,s)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:d}}function Hue(t,e,n,r,a,i,o,s,l,u,c){let d,p,f,g;if(typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=Gue([e,n,r,1],s,1,a,t,c);p=y[0],f=y[1],g=y[2]}else if(t==="same"){p=Math.ceil(e/a),f=Math.ceil(n/i),g=Math.ceil(r/o);const y=(p-1)*a+s-e,v=(f-1)*i+l-n,b=(g-1)*o+u-r,x=Math.floor(y/2),w=y-x,S=Math.floor(v/2),C=v-S,I=Math.floor(b/2),_=b-I;d={top:S,bottom:C,left:I,right:_,front:x,back:w,type:"SAME"}}else if(t==="valid")d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((e-s+1)/a),f=Math.ceil((n-l+1)/i),g=Math.ceil((r-u+1)/o);else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:f,outWidth:g}}function Xc(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Ng(t){const[e,n,r]=d2(t);return e===1&&n===1&&r===1}function pa(t,e){return Ng(t)||Ng(e)}function fl(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function so(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")V(Dc(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(a=>{V(Dc(a),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${a}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function que(t,e){const n={x:z(t,"x","reshape","string_or_numeric")},r={shape:e};return te.runKernel(Ix,n,r)}const Se=ee({reshape_:que});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kue(t,e,n,r,a){const i=z(t,"x","avgPool","float32"),o=1;V(pa(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let s=i,l=!1;i.rank===3&&(l=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),so("avgPool",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a};let d=te.runKernel(xv,u,c);return d=Bn(d,i.dtype),l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const GN=ee({avgPool_:Kue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xue(t,e,n,r,a,i="NDHWC"){const o=z(t,"x","avgPool3d","float32");let s=o,l=!1;o.rank===4&&(l=!0,s=Se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(s.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),V(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),so("avgPool3d",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i};let d=te.runKernel(wv,u,c);return d=Bn(d,s.dtype),l?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const q8=ee({avgPool3d_:Xue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yue(t,e=0){V(t.length>=1,()=>"Pass at least one tensor to concat");const n=kg(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return dl(n[0]);const r=n,a={axis:e};return te.runKernel(Tv,r,a)}const ha=ee({concat_:Yue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Que(t){const e={x:z(t,"x","sigmoid","float32")};return te.runKernel(ag,e)}const Yc=ee({sigmoid_:Que});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zue(t,e,n){const r=z(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const a={x:r},i={begin:e,size:n};return te.runKernel(Ox,a,i)}const xn=ee({slice_:Zue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jue(t){const e={x:z(t,"x","tanh","float32")};return te.runKernel(cg,e)}const p2=ee({tanh_:Jue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ece(t,e,n,r,a,i){const o=z(t,"forgetBias","basicLSTMCell"),s=z(e,"lstmKernel","basicLSTMCell"),l=z(n,"lstmBias","basicLSTMCell"),u=z(r,"data","basicLSTMCell"),c=z(a,"c","basicLSTMCell"),d=z(i,"h","basicLSTMCell"),p=ha([u,d],1),f=ln(p,s),g=ft(f,l),y=g.shape[0],v=g.shape[1]/4,b=[y,v],x=xn(g,[0,0],b),w=xn(g,[0,v],b),S=xn(g,[0,v*2],b),C=xn(g,[0,v*3],b),I=ft(De(Yc(x),p2(w)),De(c,Yc(ft(o,S)))),_=De(p2(I),Yc(C));return[I,_]}const K8=ee({basicLSTMCell_:ece});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tce(t,e,n){const r=z(t,"x","batchToSpaceND"),a=e.reduce((s,l)=>s*l);V(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),V(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),V(r.shape[0]%a===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${a}`);const i={x:r},o={blockShape:e,crops:n};return te.runKernel(Sv,i,o)}const WN=ee({batchToSpaceND_:tce});function nce(t){let e;return t.rank===0||t.rank===1?e=Se(t,[1,1,1,t.size]):t.rank===2?e=Se(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rce(t,e,n,r,a,i){i==null&&(i=.001);const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;r!=null&&(c=z(r,"offset","batchNorm")),V(s.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(c==null||s.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(u==null||s.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:nce(o),scale:u,offset:c,mean:s,variance:l},p={varianceEpsilon:i},f=te.runKernel(Xv,d,p);return Se(f,o.shape)}const Tg=ee({batchNorm_:rce});function ace(t,e,n,r,a,i){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),V(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),V(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),V(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Tg(o,s,l,c,u,i)}const X8=ee({batchNorm2d_:ace});function ice(t,e,n,r,a,i){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),V(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),V(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),V(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Tg(o,s,l,c,u,i)}const Y8=ee({batchNorm3d_:ice});function oce(t,e,n,r,a,i){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let u;a!=null&&(u=z(a,"scale","batchNorm"));let c;return r!=null&&(c=z(r,"offset","batchNorm")),V(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),V(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),V(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&V(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&V(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Tg(o,s,l,c,u,i)}const Q8=ee({batchNorm4d_:oce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sce(t,e,n){const r=z(t,"x","bincount"),a=z(e,"weights","bincount");V(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),V(n>=0,()=>`size must be non-negative, but got ${n}.`),V(a.size===r.size||a.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`);const i={x:r,weights:a},o={size:n};return te.runKernel(Cv,i,o)}const HN=ee({bincount_:sce});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lce(t,e){const n=z(t,"s0","broadcastArgs","int32"),r=z(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const a={s0:n,s1:r};return te.runKernel(Iv,a)}const Z8=ee({broadcastArgs_:lce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uce(t,e){let n=z(t,"broadcastTo","x");const r=n.shape;if(e.some(l=>!(l>0)||l%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=Se(n,l)}const a=n.shape,i=Array.from(e);for(let l=e.length-1;l>=0;l--)if(a[l]===e[l])i[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((l,u)=>l>1?u:-1).filter(l=>l>=0).length===0)return dl(n);const o={x:n},s={reps:i};return te.runKernel(dg,o,s)}const zp=ee({broadcastTo_:uce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cce(t){const e={x:z(t,"x","ceil","float32")};return te.runKernel(bm,e)}const J8=ee({ceil_:cce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jp(t,e,n){const r={shape:t,value:e,dtype:n};return te.runKernel(qv,{},r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dce(t,e,n){const r=z(t,"x","clipByValue");if(V(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return jp(r.shape,e,r.dtype);const a={x:r},i={clipValueMin:e,clipValueMax:n};return te.runKernel(vm,a,i)}const eL=ee({clipByValue_:dce});function pce(t){return ha(t,0)}const tL=ee({concat1d_:pce});function hce(t,e){return ha(t,e)}const nL=ee({concat2d_:hce});function fce(t,e){return ha(t,e)}const rL=ee({concat3d_:fce});function mce(t,e){return ha(t,e)}const aL=ee({concat4d_:mce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gce(t,e,n,r,a="NHWC",i=[1,1],o){const s=z(t,"x","conv2d","float32"),l=z(e,"filter","conv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),V(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),so("conv2d",r,o);const d=a==="NHWC"?u.shape[3]:u.shape[1];V(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),V(pa(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const p={x:u,filter:l},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},g=te.runKernel(_v,p,f);return c?Se(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const _g=ee({conv2d_:gce});function yce(t,e,n,r,a="NWC",i=1,o){const s=z(t,"x","conv1d"),l=z(e,"filter","conv1d");let u=s,c=!1;s.rank===2&&(c=!0,u=Se(s,[1,s.shape[0],s.shape[1]])),V(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),V(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),so("conv1d",r,o),V(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),V(pa(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),V(a==="NWC",()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);const d=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=Se(u,[u.shape[0],1,u.shape[1],u.shape[2]]),f=_g(p,d,[1,n],r,"NHWC",[1,i],o);return c?Se(f,[f.shape[2],f.shape[3]]):Se(f,[f.shape[0],f.shape[2],f.shape[3]])}const iL=ee({conv1d_:yce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bce(t,e,n,r,a,i="NHWC",o){V(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,l=e,u=!1;e.rank===3&&(u=!0,l=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,t[0],t[1],t[2]]),V(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),V(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),V(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?s[3]:s[1],d=i==="NHWC"?l.shape[3]:l.shape[1];V(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),V(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),so("conv2dDerInput",a,o);const p={dy:l,filter:n},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},g=te.runKernel($v,p,f);return u?Se(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const oL=ee({conv2DBackpropInput_:bce});function vce(t,e,n,r,a,i){const o=z(t,"x","conv2dTranspose"),s=z(e,"filter","conv2dTranspose");return oL(n,o,s,r,a,"NHWC",i)}const sL=ee({conv2dTranspose_:vce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xce(t,e,n,r,a="NDHWC",i=[1,1,1]){const o=z(t,"x","conv3d"),s=z(e,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=Se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),V(s.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),V(l.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`),V(pa(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),V(a==="NDHWC",()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`);const c={x:l,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:i},p=te.runKernel(Ov,c,d);return u?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const lL=ee({conv3d_:xce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wce(t,e,n,r,a){V(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,s=!1;e.rank===4&&(s=!0,o=Se(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],u=o.shape[4];V(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),V(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),V(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),V(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),V(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},d={pad:a,strides:r,inputShape:i},p=te.runKernel(Mv,c,d);return s?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const kce=ee({conv3DBackpropInput_:wce});function Sce(t,e,n,r,a){const i=z(t,"x","conv3dTranspose"),o=z(e,"filter","conv3dTranspose");return kce(n,i,o,r,a)}const uL=ee({conv3dTranspose_:Sce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cce(t){const e={x:z(t,"x","cos","float32")};return te.runKernel(xm,e)}const cL=ee({cos_:Cce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ice(t){const e={x:z(t,"x","cosh","float32")};return te.runKernel(wm,e)}const dL=ee({cosh_:Ice});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ece(t,e=0,n=!1,r=!1){const a={x:z(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return te.runKernel(Pv,a,i)}const pL=ee({cumprod_:Ece});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nce(t,e=0,n=!1,r=!1){const a={x:z(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return te.runKernel(Av,a,i)}const hL=ee({cumsum_:Nce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tce(t,e,n,r=!1){const a=z(t,"x","denseBincount"),i=z(e,"weights","denseBincount");V(a.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),V(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),V(n>=0,()=>`size must be non-negative, but got ${n}.`),V(i.size===a.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${i.shape}.`);const o={x:a,weights:i},s={size:n,binaryOutput:r};return te.runKernel(Lv,o,s)}const fL=ee({denseBincount_:Tce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _ce(t,e,n="NHWC"){const r=z(t,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];V(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),V(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e}  for depthToSpace with input shape
    ${r.shape}`),V(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),V(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const s={x:r},l={blockSize:e,dataFormat:n};return te.runKernel(Fv,s,l)}const mL=ee({depthToSpace_:_ce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rce(t,e,n,r,a="NHWC",i=[1,1],o){const s=z(t,"x","depthwiseConv2d","float32"),l=z(e,"filter","depthwiseConv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),V(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=a==="NHWC"?u.shape[3]:u.shape[1];V(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),so("depthwiseConv2d",r,o);const p={x:u,filter:l},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},g=te.runKernel(Bv,p,f);return c?Se(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const h2=ee({depthwiseConv2d_:Rce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $ce(t){const e={x:z(t,"x","diag")};return te.runKernel(Vv,e)}const gL=ee({diag_:$ce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Oce(t,e,n,r,a=[1,1],i="NHWC"){const o=z(t,"x","dilation2d"),s=z(e,"filter","dilation2d");V(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),V(s.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),V(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,u=!1;o.rank===3&&(l=Se(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0);const c={x:l,filter:s},d={strides:n,pad:r,dilations:a},p=te.runKernel(Uv,c,d);return u?Se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const yL=ee({dilation2d_:Oce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mce(t,e){let n=z(t,"a","equal","string_or_numeric"),r=z(e,"b","equal","string_or_numeric");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Im,a)}const qN=ee({equal_:Mce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pce(t,e,n){const r=z(e,"a","where"),a=z(n,"b","where"),i=z(t,"condition","where","bool"),o=zt(zt(i.shape,r.shape),a.shape),s=zp(i,o),l=zp(r,o),u=zp(a,o),c={condition:s,t:l,e:u};return te.runKernel($x,c)}const Qc=ee({where_:Pce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ace(t){const e={x:z(t,"x","zerosLike")};return te.runKernel(Qx,e)}const fi=ee({zerosLike_:Ace});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dce(t,e){let n=z(t,"a","div"),r=z(e,"b","div");[n,r]=qn(n,r);const a=In(n,r),i=fi(a),o=qN(r,i);return Qc(o,i,a)}const bL=ee({divNoNan_:Dce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lce(t,e){const n=z(t,"t1","dot"),r=z(e,"t2","dot");V((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(V(a===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${i}.`),n.rank===1&&r.rank===1){const o=Se(n,[1,-1]),s=Se(r,[-1,1]),l=ln(o,s);return Se(l,[])}else if(n.rank===1&&r.rank===2){const o=Se(n,[1,-1]),s=Se(r,[r.shape[0],r.shape[1]]),l=ln(o,s);return Se(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=Se(r,[-1,1]),s=ln(n,o);return Se(s,[s.size])}else{const o=Se(r,[r.shape[0],r.shape[1]]);return ln(n,o)}}const vL=ee({dot_:Lce});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fce(t,...e){const n=e.map((a,i)=>z(a,`tensors${i}`,"einsum")),r={equation:t};return te.runKernel(Gv,n,r)}const xL=ee({einsum_:Fce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bce(t){const e={x:z(t,"x","elu","float32")};return te.runKernel(Sm,e)}const KN=ee({elu_:Bce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zce(t){let e=z(t,"x","erf");V(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Bn(e,"float32"));const n={x:e};return te.runKernel(Cm,n)}const wL=ee({erf_:zce});/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function XN(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function kL(t,e,n){const r=t.length+e.length,a=[];let i=0,o=0;for(let s=0;s<r;s++)n.indexOf(s)===-1?a.push(t[i++]):a.push(e[o++]);return a}function Yr(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const a=e.map(i=>t[i]);return[n,a]}function _r(t,e){const n=e.map(r=>1);return kL(t,n,e)}function Qr(t,e,n){V(XN(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function dr(t,e){if(XN(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Rg(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function pr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jce(t,e=null,n=!1){const r={x:z(t,"x","max")},a={reductionIndices:e,keepDims:n};return te.runKernel(rx,r,a)}const Zc=ee({max_:jce});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vce(t,e=null,n=!1){const r={x:z(t,"x","min")},a={axis:e,keepDims:n};return te.runKernel(lx,r,a)}const f2=ee({min_:Vce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uce(t,e){let n=z(t,"base","pow"),r=z(e,"exp","pow");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(Km,a)}const Vp=ee({pow_:Uce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ft(t,e){if((ca(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&ca(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return vu(t,[],[],e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gce(t){const e={x:z(t,"x","sqrt","float32")};return te.runKernel(og,e)}const gs=ee({sqrt_:Gce});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wce(t){const e=z(t,"x","square"),n={};return te.runKernel("Square",{x:e},n)}const lo=ee({square_:Wce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hce(t,e=null,n=!1){let r=z(t,"x","sum");r.dtype==="bool"&&(r=Bn(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return te.runKernel(Mx,a,i)}const En=ee({sum_:Hce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qce(t,e="euclidean",n=null,r=!1){t=z(t,"x","norm");const a=SL(t,e,n);let i=a.shape;if(r){const o=Xt(n,t.shape);i=_r(a.shape,o)}return Se(a,i)}function SL(t,e,n=null){if(t.rank===0)return hi(t);if(t.rank!==1&&n===null)return SL(Se(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return En(hi(t),n);if(e===1/0)return Zc(hi(t),n);if(e===-1/0)return f2(hi(t),n);if(e==="euclidean"||e===2)return gs(En(Vp(hi(t),Ft(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Zc(En(hi(t),n[0]),n[1]-1);if(e===1/0)return Zc(En(hi(t),n[1]),n[0]);if(e===-1/0)return f2(En(hi(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return gs(En(lo(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const $g=ee({norm_:qce});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kce(t,e=null,n=!1){return $g(t,"euclidean",e,n)}const CL=ee({euclideanNorm_:Kce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xce(t){const e={x:z(t,"x","exp")};return te.runKernel(Em,e)}const Su=ee({exp_:Xce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yce(t,e=0){const n=z(t,"x","expandDims","string_or_numeric");V(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:e};return te.runKernel(Wv,r,a)}const ml=ee({expandDims_:Yce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qce(t){const e={x:z(t,"x","expm1")};return te.runKernel(Nm,e)}const IL=ee({expm1_:Qce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zce(t,e){const n=z(t,"x","tile","string_or_numeric");V(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},a={reps:e};return te.runKernel(dg,r,a)}const Up=ee({tile_:Zce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jce(t,e,n,r="float32"){e==null&&(e=t);const a=St([t,e],r),i=t<=e?t:e;for(let s=0;s<i;++s)a.set(1,s,s);const o=Se(a.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Up(ml(o,0),[n[0],1,1]);if(n.length===2)return Up(ml(ml(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Up(ml(ml(ml(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const YN=ee({eye_:Jce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ede(t){const e={x:z(t,"x","floor","float32")};return te.runKernel(Tm,e)}const QN=ee({floor_:ede});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tde(t,e,n=0,r=0){const a=z(t,"x","gather"),i=z(e,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return te.runKernel(Yv,o,s)}const ZN=ee({gather_:tde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nde(t,e){let n=z(t,"a","greater","string_or_numeric"),r=z(e,"b","greater","string_or_numeric");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Rm,a)}const Og=ee({greater_:nde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rde(t,e){let n=z(t,"a","greaterEqual","string_or_numeric"),r=z(e,"b","greaterEqual","string_or_numeric");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel($m,a)}const JN=ee({greaterEqual_:rde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ade(t){const e={x:z(t,"x","isFinite")};return te.runKernel(Mm,e)}const EL=ee({isFinite_:ade});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ide(t){const e={x:z(t,"x","isInf")};return te.runKernel(Pm,e)}const NL=ee({isInf_:ide});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ode(t){const e={x:z(t,"x","isNaN")};return te.runKernel(Am,e)}const TL=ee({isNaN_:ode});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sde(t,e=.2){const n={x:z(t,"x","leakyRelu")},r={alpha:e};return te.runKernel(ex,n,r)}const e4=ee({leakyRelu_:sde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lde(t,e){let n=z(t,"a","less","string_or_numeric"),r=z(e,"b","less","string_or_numeric");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Dm,a)}const _L=ee({less_:lde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ude(t,e){let n=z(t,"a","lessEqual","string_or_numeric"),r=z(e,"b","lessEqual","string_or_numeric");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Lm,a)}const m2=ee({lessEqual_:ude});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function RL(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return te.runKernel(tx,{},r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cde(t,e=5,n=1,r=1,a=.5){const i=z(t,"x","localResponseNormalization");V(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),V(Dc(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,s=!1;i.rank===3&&(s=!0,o=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},u={depthRadius:e,bias:n,alpha:r,beta:a},c=te.runKernel(nx,l,u);return s?Se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const $L=ee({localResponseNormalization_:cde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dde(t){const e={x:z(t,"x","log","float32")};return te.runKernel(Fm,e)}const Gp=ee({log_:dde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pde(t){const e={x:z(t,"x","log1p")};return te.runKernel(Bm,e)}const t4=ee({log1p_:pde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hde(t){return V(gu(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=z(e,"x","tf.grad","string_or_numeric"),a=n!=null?z(n,"dy","tf.grad"):null;return te.tidy(()=>{const{value:i,grads:o}=te.gradients(()=>t(r),[r],a);return a!=null&&Kr(i.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),g2(o),o[0]})}}function fde(t){return V(gu(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{V(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=kg(e,"args","tf.grads","string_or_numeric"),a=n!=null?z(n,"dy","tf.grads"):null;return te.tidy(()=>{const{value:i,grads:o}=te.gradients(()=>t(...r),r,a);return a!=null&&Kr(i.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),g2(o),o})}}function mde(t){return V(gu(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{V(e instanceof Hn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),V(n==null||n instanceof Hn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:a}=te.gradients(()=>t(e),[e],n);return g2(r),{grad:r[0],value:a}}}function gde(t){return V(gu(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{V(Array.isArray(e)&&e.every(a=>a instanceof Hn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),V(n==null||n instanceof Hn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=te.gradients(()=>t(...e),e,n);return n!=null&&Kr(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),g2(r.grads),r}}function OL(t,e){V(gu(t),()=>"The f passed in variableGrads(f) must be a function"),V(e==null||Array.isArray(e)&&e.every(u=>u instanceof wg),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in te.registeredVariables)e.push(te.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,a=e.length;e=e.filter(u=>u.trainable),V(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const i=!0,{value:o,grads:s}=te.gradients(t,e,null,i);V(s.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),V(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,c)=>{s[c]!=null&&(l[u.name]=s[c])}),r?.forEach(u=>l[u.name]=null),{value:o,grads:l}}function ys(t){return te.customGrad(t)}function g2(t){if(t.filter(e=>e==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yde(t){const e={x:z(t,"x","softplus")};return te.runKernel(ig,e)}const n4=ee({softplus_:yde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bde(t){const e=z(t,"x","logSigmoid");return ys(n=>({value:ms(n4(ms(n))),gradFunc:r=>De(r,Yc(ms(n)))}))(e)}const ML=ee({logSigmoid_:bde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vde(t,e){let n=z(t,"a","sub"),r=z(e,"b","sub");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(lg,a)}const Pt=ee({sub_:vde});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xde(t,e=-1){const n=z(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return ys((r,a)=>{const i=Zc(r,e,!0),o=Pt(r,i),s=Pt(Bn(o,"float32"),Gp(En(Su(o),e,!0)));return a([s]),{value:s,gradFunc:(l,u)=>{const[c]=u,d=!0,p=Su(c);return Pt(l,De(En(l,e,d),p))}}})(n)}const PL=ee({logSoftmax_:xde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wde(t,e=null,n=!1){const r=z(t,"x","logSumExp"),a=Xt(e,r.shape),i=Zc(r,a,!0),o=Pt(r,i),s=Su(o),l=En(s,a),u=Gp(l),c=ft(Se(i,u.shape),u);if(n){const d=_r(c.shape,a);return Se(c,d)}return c}const r4=ee({logSumExp_:wde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kde(t,e){const n=z(t,"a","logicalAnd","bool"),r=z(e,"b","logicalAnd","bool");zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(zm,a)}const Mg=ee({logicalAnd_:kde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sde(t){const e={x:z(t,"x","logicalNot","bool")};return te.runKernel(jm,e)}const a4=ee({logicalNot_:Sde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cde(t,e){const n=z(t,"a","logicalOr","bool"),r=z(e,"b","logicalOr","bool");zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Vm,a)}const i4=ee({logicalOr_:Cde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ide(t,e){const n=z(t,"a","logicalXor","bool"),r=z(e,"b","logicalXor","bool");return zt(n.shape,r.shape),Mg(i4(t,e),a4(Mg(t,e)))}const AL=ee({logicalXor_:Ide});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const y2=2147483648;function Ede(t,e,n="left"){const r=z(t,"sortedSequence","searchSorted"),a=z(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=Se(r,[-1,i]),l=Se(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(be(l.shape)>=y2)throw new Error(`values tensor size must less than ${y2}`);if(s.shape[1]>=y2)throw new Error(`trailing dim_size must less than ${y2} for int32 output type, was ${s.shape[1]}`);const u={sortedSequence:s,values:l},c={side:n};return te.runKernel(Rx,u,c)}const b2=ee({searchSorted_:Ede});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function DL(t,e){return b2(t,e,"left")}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nde(t,e,n,r,a){const i=z(t,"x","maxPool"),o=1;let s=i,l=!1;i.rank===3&&(l=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),V(pa(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),so("maxPool",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a},d=te.runKernel(ax,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const o4=ee({maxPool_:Nde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tde(t,e=[1,1,1],n,r,a,i="NDHWC"){const o=z(t,"x","maxPool3d");let s=o,l=!1;o.rank===4&&(l=!0,s=Se(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(s.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),V(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),so("maxPool3d",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=te.runKernel(ix,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const LL=ee({maxPool3d_:Tde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _de(t,e,n,r,a=!1){const i={x:z(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:a},s=te.runKernel(ox,i,o);return{result:s[0],indexes:s[1]}}const FL=ee({maxPoolWithArgmax_:_de});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rde(t,e){let n=z(t,"a","maximum"),r=z(e,"b","maximum");[n,r]=qn(n,r),n.dtype==="bool"&&(n=Bn(n,"int32"),r=Bn(r,"int32")),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Um,a)}const s4=ee({maximum_:Rde});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $de(t,e=null,n=!1){const r={x:z(t,"x","mean")},a={axis:e,keepDims:n};return te.runKernel(sx,r,a)}const Pg=ee({mean_:$de});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cu(t,e="float32"){if(e==="complex64"){const r=Cu(t,"float32"),a=Cu(t,"float32");return ul(r,a)}const n=Xr(be(t),e);return te.makeTensor(n,t,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Iu(t,e="float32"){if(e==="complex64"){const r=Iu(t,"float32"),a=Cu(t,"float32");return ul(r,a)}const n=hv(be(t),e);return te.makeTensor(n,t,e)}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function BL(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=z(t,"x","meshgrid",t instanceof Hn?t.dtype:"float32");if(e===void 0)return[r];let a=z(e,"y","meshgrid",e instanceof Hn?e.dtype:"float32");const i=be(r.shape),o=be(a.shape);return n==="xy"?(r=Se(r,[1,-1]),a=Se(a,[-1,1]),[ln(Iu([o,1],r.dtype),r),ln(a,Iu([1,i],a.dtype))]):(r=Se(r,[-1,1]),a=Se(a,[1,-1]),[ln(r,Iu([1,o],r.dtype)),ln(Iu([i,1],a.dtype),a)])}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ode(t,e){let n=z(t,"a","minimum"),r=z(e,"b","minimum");[n,r]=qn(n,r),n.dtype==="bool"&&(n=Bn(n,"int32"),r=Bn(r,"int32")),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(Gm,a)}const l4=ee({minimum_:Ode});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mde(t,e,n){V(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=z(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");V(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const a=n==="reflect"?1:0;for(let s=0;s<r.rank;s++)V(e[s].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),V(e[s][0]>=0&&e[s][0]<=r.shape[s]-a&&e[s][1]>=0&&e[s][1]<=r.shape[s]-a,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-a} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return te.runKernel(ux,o,i)}const zL=ee({mirrorPad_:Mde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pde(t,e){let n=z(t,"a","mod"),r=z(e,"b","mod");[n,r]=qn(n,r);const a={a:n,b:r};return te.runKernel(Wm,a)}const jL=ee({mod_:Pde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ade(t,e=null,n=!1){t=z(t,"x","moments");const r=Xt(e,t.shape),a=Pg(t,r,n);let i=a.shape;n||(i=_r(a.shape,r));const o=lo(Pt(Bn(t,"float32"),Se(a,i))),s=Pg(o,r,n);return{mean:a,variance:s}}const VL=ee({moments_:Ade});function Dde(t,e,n,r){const a=z(e,"data","multiRNNCell"),i=kg(n,"c","multiRNNCell"),o=kg(r,"h","multiRNNCell");let s=a;const l=[];for(let d=0;d<t.length;d++){const p=t[d](s,i[d],o[d]);l.push(p[0]),l.push(p[1]),s=p[1]}const u=[],c=[];for(let d=0;d<l.length;d+=2)u.push(l[d]),c.push(l[d+1]);return[u,c]}const UL=ee({multiRNNCell_:Dde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lde(t,e,n,r=!1){const a=z(t,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const s={logits:o===1?Se(a,[1,-1]):a},l={numSamples:e,seed:n,normalized:r},u=te.runKernel(cx,s,l);return o===1?Se(u,[u.size]):u}const GL=ee({multinomial_:Lde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fde(t,e){let n=z(t,"a","notEqual","string_or_numeric"),r=z(e,"b","notEqual","string_or_numeric");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r};return te.runKernel(qm,a)}const u4=ee({notEqual_:Fde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bde(t){const e={x:z(t,"x","onesLike")};return te.runKernel(mx,e)}const WL=ee({onesLike_:Bde});function zde(t,e){const n=z(t,"v1","outerProduct"),r=z(e,"v2","outerProduct");V(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const a=Se(n,[-1,1]),i=Se(r,[1,-1]);return ln(a,i)}const HL=ee({outerProduct_:zde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jde(t,e,n=0){const r=z(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:e,constantValue:n},i={x:r};return te.runKernel(bx,i,a)}const Wp=ee({pad_:jde});function Vde(t,e,n=0){return V(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Wp(t,[e],n)}const qL=ee({pad1d_:Vde});function Ude(t,e,n=0){return V(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Wp(t,e,n)}const KL=ee({pad2d_:Ude});function Gde(t,e,n=0){return V(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Wp(t,e,n)}const XL=ee({pad3d_:Gde});function Wde(t,e,n=0){return V(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Wp(t,e,n)}const YL=ee({pad4d_:Wde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hde(t,e,n){const r=z(t,"x","spaceToBatchND");V(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),V(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),V(r.shape.reduce((o,s,l)=>l>0&&l<=e.length?o&&(s+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const a={x:r},i={blockShape:e,paddings:n};return te.runKernel(Px,a,i)}const c4=ee({spaceToBatchND_:Hde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qde(t,e,n,r,a,i,o){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");const s=z(t,"x","maxPool");let l=s,u=!1;s.rank===3&&(u=!0,l=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(pa(i,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const c=oo(l.shape,e,i,a,r),d=[c.dilationHeight,c.dilationWidth];let p;r==="same"?p=Xde([c.filterHeight,c.filterWidth],d):p=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[g,y]=Kde([c.inHeight,c.inWidth],d,p),v=f?r:"valid",b=f?l:c4(l,d,g),x=(n==="avg"?()=>GN(b,e,i,v,o):()=>o4(b,e,i,v,o))(),w=f?x:WN(x,d,y);return u?Se(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function Kde(t,e,n){const r=n.map(c=>c[0]),a=n.map(c=>c[1]),i=t.concat(r,a),o=e.map((c,d)=>(c-i[d]%c)%c),s=a.map((c,d)=>c+o[d]),l=e.map((c,d)=>[r[d],s[d]]),u=e.map((c,d)=>[0,o[d]]);return[l,u]}function Xde(t,e){const n=t.map((i,o)=>i+(i-1)*(e[o]-1)).map(i=>i-1),r=n.map(i=>Math.floor(i/2)),a=n.map((i,o)=>i-r[o]);return n.map((i,o)=>[r[o],a[o]])}const QL=ee({pool_:qde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yde(t,e){const n=z(t,"x","prelu"),r=z(e,"alpha","prelu"),a={x:n,alpha:r};return te.runKernel(vx,a)}const d4=ee({prelu_:Yde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qde(t,e=null,n=!1){let r=z(t,"x","prod");r.dtype==="bool"&&(r=Bn(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return te.runKernel(xx,a,i)}const ZL=ee({prod_:Qde});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zde(t,e,n,r){const a=t.map((c,d)=>z(c,`tensors${d}`,"raggedGather","int32")),i=z(e,"paramsDenseValues","raggedGather"),o=z(n,"indices","raggedGather","int32"),s={paramsNestedSplits:a,paramsDenseValues:i,indices:o},l={outputRaggedRank:r},u=te.runKernel(wx,s,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const JL=ee({raggedGather_:Zde});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jde(t,e,n,r,a){const i=z(t,"shape","raggedTensorToTensor","int32"),o=z(e,"values","raggedTensorToTensor"),s=z(n,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((d,p)=>z(d,`tensors${p}`,"raggedTensorToTensor","int32")),u={shape:i,values:o,defaultValue:s,rowPartitionTensors:l},c={rowPartitionTypes:a};return te.runKernel(kx,u,c)}const eF=ee({raggedTensorToTensor_:Jde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function epe(t,e,n){const r=be(t);let a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)a[i]=e();return te.makeTensor(a,t,n)}const tF=ee({rand_:epe});var p4={exports:{}};p4.exports,function(t){(function(e,n,r){function a(l){var u=this,c=s();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new a(l),d=u&&u.state,p=c.next;return p.int32=function(){return c.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,d&&(typeof d=="object"&&i(d,c),p.state=function(){return i(c,{})}),p}function s(){var l=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Ga,t,!1)}(p4);var tpe=p4.exports,h4={exports:{}};h4.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Ga,t,!1)}(h4);var npe=h4.exports,f4={exports:{}};f4.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Ga,t,!1)}(f4);var rpe=f4.exports,m4={exports:{}};m4.exports,function(t){(function(e,n,r){function a(s){var l=this;l.next=function(){var c=l.x,d=l.i,p,f;return p=c[d],p^=p>>>7,f=p^p<<24,p=c[d+1&7],f^=p^p>>>10,p=c[d+3&7],f^=p^p>>>3,p=c[d+4&7],f^=p^p<<7,p=c[d+7&7],p=p^p<<13,f^=p^p<<9,c[d]=f,l.i=d+1&7,f};function u(c,d){var p,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,p=0;p<d.length;++p)f[p&7]=f[p&7]<<15^d.charCodeAt(p)+f[p+1&7]<<13;for(;f.length<8;)f.push(0);for(p=0;p<8&&f[p]===0;++p);for(p==8?f[7]=-1:f[p],c.x=f,c.i=0,p=256;p>0;--p)c.next()}u(l,s)}function i(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(c.x&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Ga,t,!1)}(m4);var ape=m4.exports,g4={exports:{}};g4.exports,function(t){(function(e,n,r){function a(s){var l=this;l.next=function(){var c=l.w,d=l.X,p=l.i,f,g;return l.w=c=c+1640531527|0,g=d[p+34&127],f=d[p=p+1&127],g^=g<<13,f^=f<<17,g^=g>>>15,f^=f>>>12,g=d[p]=g^f,l.i=p,g+(c^c>>>16)|0};function u(c,d){var p,f,g,y,v,b=[],x=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,x=Math.max(x,d.length)),g=0,y=-32;y<x;++y)d&&(f^=d.charCodeAt((y+32)%d.length)),y===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,y>=0&&(v=v+1640531527|0,p=b[y&127]^=f+v,g=p==0?g+1:0);for(g>=128&&(b[(d&&d.length||0)&127]=-1),g=127,y=4*128;y>0;--y)f=b[g+34&127],p=b[g=g+1&127],f^=f<<13,p^=p<<17,f^=f>>>15,p^=p>>>12,b[g]=f^p;c.w=v,c.X=b,c.i=g}u(l,s)}function i(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(c.X&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Ga,t,!1)}(g4);var ipe=g4.exports,y4={exports:{}};y4.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.next=function(){var d=l.b,p=l.c,f=l.d,g=l.a;return d=d<<25^d>>>7^p,p=p-f|0,f=f<<24^f>>>8^g,g=g-d|0,l.b=d=d<<20^d>>>12^p,l.c=p=p-f|0,l.d=f<<16^p>>>16^g,l.a=g-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Ga,t,!1)}(y4);var ope=y4.exports,nF={exports:{}};const spe={},lpe=Object.freeze(Object.defineProperty({__proto__:null,default:spe},Symbol.toStringTag,{value:"Module"})),rF=QV(lpe);(function(t){(function(e,n,r){var a=256,i=6,o=52,s="random",l=r.pow(a,i),u=r.pow(2,o),c=u*2,d=a-1,p;function f(S,C,I){var _=[];C=C==!0?{entropy:!0}:C||{};var T=b(v(C.entropy?[S,w(n)]:S??x(),3),_),M=new g(_),P=function(){for(var L=M.g(i),j=l,B=0;L<u;)L=(L+B)*a,j*=a,B=M.g(1);for(;L>=c;)L/=2,j/=2,B>>>=1;return(L+B)/j};return P.int32=function(){return M.g(4)|0},P.quick=function(){return M.g(4)/4294967296},P.double=P,b(w(M.S),n),(C.pass||I||function(L,j,B,K){return K&&(K.S&&y(K,M),L.state=function(){return y(M,{})}),B?(r[s]=L,j):L})(P,T,"global"in C?C.global:this==r,C.state)}function g(S){var C,I=S.length,_=this,T=0,M=_.i=_.j=0,P=_.S=[];for(I||(S=[I++]);T<a;)P[T]=T++;for(T=0;T<a;T++)P[T]=P[M=d&M+S[T%I]+(C=P[T])],P[M]=C;(_.g=function(L){for(var j,B=0,K=_.i,X=_.j,Z=_.S;L--;)j=Z[K=d&K+1],B=B*a+Z[d&(Z[K]=Z[X=d&X+j])+(Z[X]=j)];return _.i=K,_.j=X,B})(a)}function y(S,C){return C.i=S.i,C.j=S.j,C.S=S.S.slice(),C}function v(S,C){var I=[],_=typeof S,T;if(C&&_=="object")for(T in S)try{I.push(v(S[T],C-1))}catch{}return I.length?I:_=="string"?S:S+"\0"}function b(S,C){for(var I=S+"",_,T=0;T<I.length;)C[d&T]=d&(_^=C[d&T]*19)+I.charCodeAt(T++);return w(C)}function x(){try{var S;return p&&(S=p.randomBytes)?S=S(a):(S=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(S)),w(S)}catch{var C=e.navigator,I=C&&C.plugins;return[+new Date,e,I,e.screen,w(n)]}}function w(S){return String.fromCharCode.apply(0,S)}if(b(r.random(),n),t.exports){t.exports=f;try{p=rF}catch{}}else r["seed"+s]=f})(typeof self<"u"?self:Ga,[],Math)})(nF);var upe=nF.exports,cpe=tpe,dpe=npe,ppe=rpe,hpe=ape,fpe=ipe,mpe=ope,Jc=upe;Jc.alea=cpe,Jc.xor128=dpe,Jc.xorwow=ppe,Jc.xorshift7=hpe,Jc.xor4096=fpe,Jc.tychei=mpe;var v2=Jc;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class b4{constructor(e,n,r,a,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=v2.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const a=this.nextVal;return this.nextVal=NaN,a}let e,n,r=!1;for(;!r;){let a,i,o;do a=2*this.random()-1,i=2*this.random()-1,o=a*a+i*i;while(o>=1||o===0);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class gpe{constructor(e,n,r,a){this.alpha=e,this.beta=1/n,this.dtype=r;const i=a||Math.random();this.randu=v2.alea(i.toString()),this.randn=new b4(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,a,i,o;for(;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,e=a*a,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class ype{constructor(e=0,n=1,r,a){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=v2.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bpe(t,e,n=1,r="float32",a){if(n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new gpe(e,n,r,a),o=St(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const aF=ee({randomGamma_:bpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vpe(t,e=0,n=1,r,a){if(r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new b4(e,n,r,!1,a),o=St(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const v4=ee({randomNormal_:vpe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xpe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return v4(t,0,1,e,n)}const iF=ee({randomStandardNormal_:xpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wpe(t,e=0,n=1,r="float32",a){const i=St(t,r),o=new ype(e,n,null,a);for(let s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}const x4=ee({randomUniform_:wpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hp(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const a={start:t,stop:e,step:n,dtype:r};return te.runKernel(Sx,{},a)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kpe(t){const e={x:z(t,"x","reciprocal")};return te.runKernel(Xm,e)}const oF=ee({reciprocal_:kpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Spe(t){const e={x:z(t,"x","relu")};return te.runKernel(Ym,e)}const Ag=ee({relu_:Spe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cpe(t){const e={x:z(t,"x","relu6")};return te.runKernel(Qm,e)}const w4=ee({relu6_:Cpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ipe(t,e){const n={x:z(t,"x","reverse")},r={dims:e};return te.runKernel(Tx,n,r)}const Eu=ee({reverse_:Ipe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Epe(t){const e=z(t,"x","reverse");return V(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Eu(e,0)}const sF=ee({reverse1d_:Epe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Npe(t,e){const n=z(t,"x","reverse");return V(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Eu(n,e)}const lF=ee({reverse2d_:Npe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tpe(t,e){const n=z(t,"x","reverse");return V(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Eu(n,e)}const uF=ee({reverse3d_:Tpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _pe(t,e){const n=z(t,"x","reverse");return V(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Eu(n,e)}const cF=ee({reverse4d_:_pe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rpe(t){const e={x:z(t,"x","round")};return te.runKernel(Zm,e)}const k4=ee({round_:Rpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $pe(t){const e={x:z(t,"x","rsqrt","float32")};return te.runKernel(Jm,e)}const dF=ee({rsqrt_:$pe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ope(t){const e={x:z(t,"x","selu")};return te.runKernel(eg,e)}const pF=ee({selu_:Ope});function Mpe(t,e,n,r,a,i=[1,1],o="NHWC"){const s=z(t,"x","separableConv2d"),l=z(e,"depthwiseFilter","separableConv2d"),u=z(n,"pointwiseFilter","separableConv2d");let c=s,d=!1;if(s.rank===3&&(d=!0,c=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");V(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),V(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),V(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),V(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),V(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const p=l.shape[2],f=l.shape[3];V(u.shape[2]===p*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*f}, but got ${u.shape[2]}.`);const g=h2(c,l,r,a,o,i),y=_g(g,u,1,"valid",o);return d?Se(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const hF=ee({separableConv2d_:Mpe});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Ppe(t,e){const n=z(t,"x","setdiff1d"),r=z(e,"y","setdiff1d");V(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),V(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),V(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const a=await n.data(),i=await r.data(),o=new Set(i);let s=0;for(let c=0;c<a.length;c++)o.has(a[c])||s++;const l=new Tr([s],n.dtype),u=new Tr([s],"int32");for(let c=0,d=0;c<a.length;c++)o.has(a[c])||(l.values[d]=a[c],u.values[d]=c,d++);return[l.toTensor(),u.toTensor()]}const fF=Ppe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ape(t){const e={x:z(t,"x","sign")};return te.runKernel(rg,e)}const mF=ee({sign_:Ape});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dpe(t){const e={x:z(t,"x","sin","float32")};return te.runKernel(tg,e)}const gF=ee({sin_:Dpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lpe(t){const e={x:z(t,"x","sinh")};return te.runKernel(ng,e)}const yF=ee({sinh_:Lpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fpe(t,e,n){const r=z(t,"x","slice1d");return V(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),xn(r,[e],[n])}const bF=ee({slice1d_:Fpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bpe(t,e,n){const r=z(t,"x","slice2d");return V(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),xn(r,e,n)}const vF=ee({slice2d_:Bpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zpe(t,e,n){const r=z(t,"x","slice3d");return V(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),xn(r,e,n)}const xF=ee({slice3d_:zpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jpe(t,e,n){const r=z(t,"x","slice4d");return V(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),xn(r,e,n)}const wF=ee({slice4d_:jpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vpe(t,e=-1){const n=z(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},a={dim:e};return te.runKernel(Dx,r,a)}const kF=ee({softmax_:Vpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Upe(t){V(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return te.runKernel(Hv,e)}const x2=ee({fft_:Upe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gpe(t){V(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return te.runKernel(Zv,e)}const Dg=ee({ifft_:Gpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wpe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const a=Se(t,[n,e]);r=Dg(a)}else{const a=[n,2*(e-1)],i=Se(Lp(t),[n,e]),o=Se(Cg(t),[n,e]),s=Eu(xn(i,[0,1],[n,e-2]),1),l=De(Eu(xn(o,[0,1],[n,e-2]),1),Ft(-1)),u=ha([i,s],1),c=ha([o,l],1),d=Se(ul(u,c),[a[0],a[1]]);r=Dg(d)}if(r=Lp(r),t.rank===3&&t.shape[0]!==0){const a=r,i=t.shape[0];r=Se(r,[i,r.shape[0]/i,r.shape[1]]),a.dispose()}return r}const S4=ee({irfft_:Wpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hpe(t,e,n=0){const r={x:z(t,"x","split")},a={numOrSizeSplits:e,axis:n};return te.runKernel(Ax,r,a)}const qp=ee({split_:Hpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qpe(t,e){V(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let a;if(e!=null&&e<n){const g=t.shape.map(v=>0),y=t.shape.map(v=>v);y[t.shape.length-1]=e,a=xn(t,g,y),n=e}else if(e!=null&&e>n){const g=t.shape.map(y=>y);g[t.shape.length-1]=e-n,a=ha([t,Cu(g)],t.shape.length-1),n=e}else a=t;const i=fi(a),o=Se(ul(a,i),[r,n]),s=x2(o),l=Math.floor(n/2)+1,u=Lp(s),c=Cg(s),d=qp(u,[l,n-l],u.shape.length-1),p=qp(c,[l,n-l],c.shape.length-1),f=a.shape.slice();return f[a.shape.length-1]=l,Se(ul(d[0],p[0]),f)}const w2=ee({rfft_:qpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kpe(t,e){let n=z(t,"a","squaredDifference"),r=z(e,"b","squaredDifference");[n,r]=qn(n,r),zt(n.shape,r.shape);const a={a:n,b:r},i={};return te.runKernel(sg,a,i)}const C4=ee({squaredDifference_:Kpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xpe(t,e){const n=z(t,"x","squeeze","string_or_numeric");return Se(n,ol(n.shape,e).newShape)}const Lg=ee({squeeze_:Xpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ype(t,e=0){const n=kg(t,"tensors","stack","string_or_numeric");V(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&V(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:e};return te.runKernel(yx,r,a)}const bs=ee({stack_:Ype});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qpe(t,e=0){const n={x:z(t,"x","step")},r={alpha:e};return te.runKernel(pg,n,r)}const I4=ee({step_:Qpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zpe(t,e,n,r,a=0,i=0,o=0,s=0,l=0){const u={x:z(t,"x","stridedSlice","string_or_numeric")},c={begin:e,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};return te.runKernel(Vx,u,c)}const SF=ee({stridedSlice_:Zpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jpe(t){const e={x:z(t,"x","tan","float32")};return te.runKernel(ug,e)}const CF=ee({tan_:Jpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uo(t,e){Ac(t);const n=hs(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return vu(t,null,n,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kp(t,e,n){if(Ac(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=hs(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return vu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function IF(t,e,n){if(Ac(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=hs(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return vu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function EF(t,e,n){if(Ac(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=hs(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return vu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function NF(t,e,n){if(Ac(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=hs(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,vu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ehe(t,e=1,n=!0){const r=z(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[s,l]=te.runKernel(Hx,i,o);return{values:s,indices:l}}const TF=ee({topk_:ehe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function the(t,e=0,n=1,r,a){if(r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new b4(e,n,r,!0,a),o=St(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const _F=ee({truncatedNormal_:the});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nhe(t,e=0){const n=z(t,"x","unique","string_or_numeric");V(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:e},[i,o]=te.runKernel(Kx,r,a);return{values:i,indices:o}}const RF=ee({unique_:nhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rhe(t,e,n){const r=z(t,"x","unsortedSegmentSum"),a=z(e,"segmentIds","unsortedSegmentSum","int32");V(Dc(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:a},o={numSegments:n};return te.runKernel(Yx,i,o)}const $F=ee({unsortedSegmentSum_:rhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ahe(t,e=0){const n=z(t,"x","unstack","string_or_numeric");V(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},a={axis:e};return te.runKernel(Xx,r,a)}const Nu=ee({unstack_:ahe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function OF(t,e){return b2(t,e,"right")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function MF(t,e=!0,n,r){return te.makeVariable(t,e,n,r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function k2(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=St(t,"int32"),a=St([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),s=i*t.length;a.values.set(o,s)}return a.toTensor()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function ihe(t){const e=z(t,"condition","whereAsync","bool"),n=await e.data(),r=k2(e.shape,n);return t!==e&&e.dispose(),r}const E4=ihe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function ohe(t,e,n){const r=z(t,"tensor","boolMask"),a=z(e,"mask","boolMask","bool"),i=n??0,o=a.rank,s=r.shape;V(o>0,()=>"mask cannot be scalar"),Kr(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let y=i;y<i+o;y++)l*=s[y];const u=s.slice(0,i).concat([l],s.slice(i+o)),c=Se(r,u),d=Se(a,[-1]),p=await E4(d),f=Lg(p,[1]),g=ZN(c,f,i);return t!==r&&r.dispose(),e!==a&&a.dispose(),f.dispose(),c.dispose(),d.dispose(),p.dispose(),g}const PF=ohe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function she(t,e,n,r,a=!0){const i=z(t,"v","movingAverage"),o=z(e,"x","movingAverage"),s=z(n,"decay","movingAverage");qD(i,o),V(vn(i.shape,o.shape),()=>"Shape mismatch in v and x");const l=Ft(1),u=Pt(l,s);let c=De(Pt(o,i),u);if(a){V(r!=null,()=>"When using zeroDebias: true, step is required.");const d=z(r,"step","movingAverage");c=In(c,Pt(l,Vp(s,d)))}return ft(i,c)}const AF=ee({movingAverage_:she});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lhe(t,e,n){const r=z(t,"indices","scatterND","int32"),a=z(e,"updates","scatterND");RN(a,r,n);const i={indices:r,updates:a},o={shape:n};return te.runKernel(_x,i,o)}const DF=ee({scatterND_:lhe});function uhe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const a=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===a))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${a}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function che(t,e,n,r=0){const a=z(t,"sparseIndices","sparseToDense","int32"),i=z(e,"sparseValues","sparseToDense","string_or_numeric"),o=z(r,"defaultValue","sparseToDense",i.dtype);uhe(a,i,n,o);const s={sparseIndices:a,sparseValues:i,defaultValue:o},l={outputShape:n};return te.runKernel(jx,s,l)}const LF=ee({sparseToDense_:che});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dhe(t,e){const n=z(e,"indices","gatherND","int32"),r={params:z(t,"x","gatherND","string_or_numeric"),indices:n};return te.runKernel(Qv,r)}const FF=ee({gatherND_:dhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function phe(t,e){if(e==null)return t.shape.slice();if(vn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hhe(t,e,n,r){const a=z(t,"x","dropout");if(V(a.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),V(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Hn?a.clone():a;const i=phe(a,n),o=1-e,s=In(QN(ft(x4(i,0,1,"float32",r),o)),o);return De(a,s)}const BF=ee({dropout_:hhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function N4(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function S2(t,e,n){const r=1-t%2,a=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);a[i]=e-n*Math.cos(o)}return uo(a,"float32")}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function fhe(t,e,n=1){const r=z(t,"predictions","inTopK"),a=z(e,"targets","inTopK");V(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),V(r.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`),Kr(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];V(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const o=await r.data(),s=await a.data(),[l,u]=[o.length/i,i],c=Er("bool",l);for(let d=0;d<l;d++){const p=d*u,f=o.subarray(p,p+u),g=[];for(let y=0;y<f.length;y++)g.push({value:f[y],index:y});g.sort((y,v)=>v.value-y.value),c[d]=0;for(let y=0;y<n;y++)if(g[y].index===s[d]){c[d]=1;break}}return t!==r&&r.dispose(),e!==a&&a.dispose(),Vo(c,a.shape,"bool")}const zF=fhe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mhe(t,e,n,r,a,i="NHWC",o){let s=t;t.rank===3&&(s=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]])),V(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),V(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),V(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];V(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),V(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),so("conv2dDerFilter",a,o);const d={x:s,dy:l},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return te.runKernel(Rv,d,p)}const ghe=ee({conv2DBackpropFilter_:mhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function C2(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return De(t,I4(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function I2(t,e){let n=e;const r=NN(t.shape,e.shape);return r.length>0&&(n=En(n,r)),Se(n,t.shape)}function E2(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Ag(t);if(e==="elu")return KN(t);if(e==="relu6")return w4(t);if(e==="prelu")return d4(t,n);if(e==="leakyrelu")return e4(t,r);if(e==="sigmoid")return Yc(t);throw new Error(`Unknown fused activation ${e}.`)}const N2=(t,e)=>!(t>0)||e==="linear";/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yhe({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",N2(te.state.gradientDepth,l)===!1){V(a==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let I=_g(t,e,n,r,a,i,o);return s!=null&&(I=ft(I,s)),E2(I,l,u,c)}const d=z(t,"x","conv2d","float32"),p=z(e,"filter","conv2d","float32");let f=d,g=!1;d.rank===3&&(g=!0,f=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),V(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),V(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),so("fused conv2d",r,o);const y=a==="NHWC"?f.shape[3]:f.shape[1];V(p.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${p.shape[2]}.`),V(pa(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const v=Br(f.shape,p.shape,n,i,r,o);let b;s!=null&&(b=z(s,"bias","fused conv2d"),[b]=qn(b,d),a==="NHWC"?zt(v.outShape,b.shape):(V(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),V(b.shape.length===0||b.shape[0]===v.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let x;if(u!=null){const I=u.shape;if(V(I.length<=1||I.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${I.length}.`),I.length===1)V(I[0]===1||I[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${I}) is not compatible with the number of output channels (${v.outChannels}).`);else if(I.length===3)try{zt(I,v.outShape)}catch{const _=`Error in fused conv2d: PReLU activation weights (${I}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(_)}x=z(u,"prelu weights","fused conv2d")}const w=(I,_)=>{V(a==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);const[T,M,P,L]=_,j=C2(I,P,l);V(Ng(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const B=oL(M.shape,j,T,n,r),K=ghe(M,j,T.shape,n,r),X=[B,K];if(L!=null){const Z=I2(L,j);X.push(Z)}return X},S={x:f,filter:p,bias:b,preluActivationWeights:x},C={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return s==null?ys((I,_,T)=>{let M=te.runKernel(fg,S,C);return T([_,I,M]),g&&(M=Se(M,[M.shape[1],M.shape[2],M.shape[3]])),{value:M,gradFunc:w}})(f,p):ys((I,_,T,M)=>{let P=te.runKernel(fg,S,C);return M([_,I,P,T]),g&&(P=Se(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:w}})(f,p,b)}const bhe=ee({fusedConv2d_:yhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vhe(t,e,n,r,a,i=[1,1],o){let s=t;t.rank===3&&(s=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:s,dy:l},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return te.runKernel(zv,u,c)}const xhe=ee({depthwiseConv2dNativeBackpropFilter_:vhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function whe(t,e,n,r,a,i=[1,1],o){let s=e,l=!1;e.rank===3&&(l=!0,s=Se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:t},d=te.runKernel(jv,u,c);return l?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const khe=ee({depthwiseConv2dNativeBackpropInput_:whe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function She({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(N2(te.state.gradientDepth,l)===!1){let C=h2(t,e,n,r,a,i,o);return s!=null&&(C=ft(C,s)),E2(C,l,u,c)}const d=z(t,"x","depthwiseConv2d","float32"),p=z(e,"filter","depthwiseConv2d","float32");let f=d,g=!1;d.rank===3&&(g=!0,f=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),V(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),V(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),V(f.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),V(pa(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),so("fused depthwiseConv2d",r,o);const y=Br(f.shape,p.shape,n,i,r,o,!0);let v;s!=null&&(v=z(s,"bias","fused conv2d"),[v]=qn(v,d),zt(y.outShape,v.shape));let b;u!=null&&(b=z(u,"prelu weights","fused depthwiseConv2d"));const x=(C,I)=>{V(Ng(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[_,T,M,P]=I,L=C2(C,M,l),j=khe(T.shape,L,_,n,r,i,o),B=xhe(T,L,_.shape,n,r,i,o);if(P!=null){const K=I2(v,L);return[j,B,K]}return[j,B]},w={x:f,filter:p,bias:v,preluActivationWeights:b},S={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return s==null?ys((C,I,_)=>{let T=te.runKernel(mg,w,S);return _([I,C,T]),g&&(T=Se(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:x}})(f,p):ys((C,I,_,T)=>{let M=te.runKernel(mg,w,S);return T([I,C,M,_]),g&&(M=Se(M,[M.shape[1],M.shape[2],M.shape[3]])),{value:M,gradFunc:x}})(f,p,v)}const Che=ee({fusedDepthwiseConv2d_:She});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ihe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:a,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:s=.2}){if(N2(te.state.gradientDepth,i)===!1){let P=ln(t,e,n,r);return a!=null&&(P=ft(P,a)),E2(P,i,o,s)}let l=z(t,"a","fused matMul"),u=z(e,"b","fused matMul");[l,u]=qn(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=r?u.shape[u.rank-2]:u.shape[u.rank-1],g=l.shape.slice(0,-2),y=u.shape.slice(0,-2),v=be(g),b=be(y);V(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=zt(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,f]),w=n?Se(l,[v,c,p]):Se(l,[v,p,c]),S=r?Se(u,[b,f,d]):Se(u,[b,d,f]);let C;a!=null&&(C=z(a,"bias","fused matMul"),[C]=qn(C,l),zt(x,C.shape));let I;o!=null&&(I=z(o,"prelu weights","fused matMul"));const _=(P,L)=>{const[j,B,K,X]=L,Z=C2(Se(P,K.shape),K,i);let H,F;if(!n&&!r?(H=ln(Z,B,!1,!0),F=ln(j,Z,!0,!1)):!n&&r?(H=ln(Z,B,!1,!1),F=ln(Z,j,!0,!1)):n&&!r?(H=ln(B,Z,!1,!0),F=ln(j,Z,!1,!1)):(H=ln(B,Z,!0,!0),F=ln(Z,j,!0,!0)),a!=null){const Y=I2(X,Z);return[H,F,Y]}else return[H,F]},T={a:w,b:S,bias:C,preluActivationWeights:I},M={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:s};return a==null?ys((P,L,j)=>{const B=te.runKernel(hg,T,M);return j([P,L,B]),{value:Se(B,x),gradFunc:_}})(w,S):ys((P,L,j,B)=>{const K=te.runKernel(hg,T,M);return B([P,L,K,j]),{value:Se(K,x),gradFunc:_}})(w,S,C)}const Ehe=ee({fusedMatMul_:Ihe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jF=Object.freeze(Object.defineProperty({__proto__:null,conv2d:bhe,depthwiseConv2d:Che,matMul:Ehe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nhe(t){return S2(t,.54,.46)}const The=ee({hammingWindow_:Nhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _he(t){return S2(t,.5,.5)}const VF=ee({hannWindow_:_he});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rhe(t,e,n,r=!1,a=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(xn(t,i,e)),i+=n;if(r)for(;i<t.size;){const s=i+e-t.size,l=ha([xn(t,i,e-s),jp([s],a)]);o.push(l),i+=n}return o.length===0?Kp([],[0,e]):Se(ha(o),[o.length,e])}const UF=ee({frame_:Rhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $he(t,e,n,r,a=VF){r==null&&(r=N4(e));const i=UF(t,e,n),o=De(i,a(e));return w2(o,r)}const Ohe=ee({stft_:$he});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mhe(t,e,n,r,a="bilinear",i=0){const o=z(t,"image","cropAndResize"),s=z(e,"boxes","cropAndResize","float32"),l=z(n,"boxInd","cropAndResize","int32"),u=s.shape[0];V(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),V(s.rank===2&&s.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`),V(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`),V(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),V(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),V(a==="bilinear"||a==="nearest",()=>`method must be bilinear or nearest, but was ${a}`);const c={image:o,boxes:s,boxInd:l},d={method:a,extrapolationValue:i,cropSize:r};return te.runKernel(Dv,c,d)}const Phe=ee({cropAndResize_:Mhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ahe(t){const e=z(t,"image","flipLeftRight","float32");V(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return te.runKernel(Kv,n,{})}const Dhe=ee({flipLeftRight_:Ahe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lhe(t){const e=z(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];V(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),V(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const a=new Array(e.rank);return a.fill(1,0,n),a[n]=3,Up(e,a)}const Fhe=ee({grayscaleToRGB_:Lhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bhe(t,e,n=0,r=.5){const a=z(t,"image","rotateWithOffset","float32");V(a.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);const i={image:a},o={radians:e,fillValue:n,center:r};return te.runKernel(Jx,i,o)}const zhe=ee({rotateWithOffset_:Bhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xp(t,e,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),V(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),V(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),V(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),V(e.rank===1,()=>"scores must be a 1D tensor"),V(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),V(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jhe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=z(t,"boxes","nonMaxSuppression","float32"),o=z(e,"scores","nonMaxSuppression","float32"),s=Xp(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return te.runKernel(px,{boxes:i,scores:o},l)}const Vhe=ee({nonMaxSuppression_:jhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uhe(t,e,n){const r=Ghe(t,e,n),a=r<0?-(r+1):r;t.splice(a,0,e)}function Ghe(t,e,n){return Hhe(t,e,n||Whe)}function Whe(t,e){return t>e?1:t<e?-1:0}function Hhe(t,e,n){let r=0,a=t.length,i=0,o=!1;for(;r<a;){i=r+(a-r>>>1);const s=n(e,t[i]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function T2(t,e,n,r,a){return T4(t,e,n,r,a,0)}function _2(t,e,n,r,a,i){return T4(t,e,n,r,a,0,!1,i,!0)}function R2(t,e,n,r,a,i){return T4(t,e,n,r,a,i,!0)}function T4(t,e,n,r,a,i,o=!1,s=!1,l=!1){const u=[];for(let v=0;v<e.length;v++)e[v]>a&&u.push({score:e[v],boxIndex:v,suppressBeginIndex:0});u.sort(GF);const c=i>0?-.5/i:0,d=[],p=[];for(;d.length<n&&u.length>0;){const v=u.pop(),{score:b,boxIndex:x,suppressBeginIndex:w}=v;if(b<a)break;let S=!1;for(let C=d.length-1;C>=w;--C){const I=qhe(t,x,d[C]);if(I>=r){S=!0;break}if(v.score=v.score*Khe(r,c,I),v.score<=a)break}v.suppressBeginIndex=d.length,S||(v.score===b?(d.push(x),p.push(v.score)):v.score>a&&Uhe(u,v,GF))}const f=d.length,g=n-f;s&&g>0&&(d.push(...new Array(g).fill(0)),p.push(...new Array(g).fill(0)));const y={selectedIndices:d};return o&&(y.selectedScores=p),l&&(y.validOutputs=f),y}function qhe(t,e,n){const r=t.subarray(e*4,e*4+4),a=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),f=(s-i)*(l-o),g=(d-u)*(p-c);if(f<=0||g<=0)return 0;const y=Math.max(i,u),v=Math.max(o,c),b=Math.min(s,d),x=Math.min(l,p),w=Math.max(b-y,0)*Math.max(x-v,0);return w/(f+g-w)}function Khe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function GF(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Xhe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=z(t,"boxes","nonMaxSuppressionAsync"),o=z(e,"scores","nonMaxSuppressionAsync"),s=Xp(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),u=l[0],c=l[1],{selectedIndices:d}=T2(u,c,n,r,a);return i!==t&&i.dispose(),o!==e&&o.dispose(),uo(d,"int32")}const Yhe=Xhe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qhe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const o=z(t,"boxes","nonMaxSuppression"),s=z(e,"scores","nonMaxSuppression"),l=Xp(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const u={boxes:o,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},d=te.runKernel(fx,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const Zhe=ee({nonMaxSuppressionWithScore_:Qhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Jhe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const o=z(t,"boxes","nonMaxSuppressionAsync"),s=z(e,"scores","nonMaxSuppressionAsync"),l=Xp(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const u=await Promise.all([o.data(),s.data()]),c=u[0],d=u[1],{selectedIndices:p,selectedScores:f}=R2(c,d,n,r,a,i);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:uo(p,"int32"),selectedScores:uo(f)}}const efe=Jhe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tfe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const o=z(t,"boxes","nonMaxSuppression"),s=z(e,"scores","nonMaxSuppression"),l=Xp(o,s,n,r,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,p={boxes:o,scores:s},f={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:i},g=te.runKernel(hx,p,f);return{selectedIndices:g[0],validOutputs:g[1]}}const nfe=ee({nonMaxSuppressionPadded_:tfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function rfe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const o=z(t,"boxes","nonMaxSuppressionAsync"),s=z(e,"scores","nonMaxSuppressionAsync"),l=Xp(o,s,n,r,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[p,f]=await Promise.all([o.data(),s.data()]),{selectedIndices:g,validOutputs:y}=_2(p,f,u,c,d,i);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:uo(g,"int32"),validOutputs:Ft(y,"int32")}}const afe=rfe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ife(t,e,n=!1,r=!1){const a=z(t,"images","resizeBilinear");V(a.rank===3||a.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),V(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),V(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const s={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=te.runKernel(Nx,s,l);return o?Se(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const ofe=ee({resizeBilinear_:ife});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sfe(t,e,n=!1,r=!1){const a=z(t,"images","resizeNearestNeighbor");V(a.rank===3||a.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),V(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),V(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),V(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const s={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=te.runKernel(Ex,s,l);return o?Se(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const lfe=ee({resizeNearestNeighbor_:sfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* https://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ufe(t,e="binary",n=!1,r=.5){const a=z(t,"image","threshold"),i=.2989,o=.587,s=.114,l=a.shape[0]*a.shape[1];let u=De(uo([r]),255),c,d,p,f;if(V(a.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`),V(a.shape[2]===3||a.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`),V(a.dtype==="int32"||a.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`),V(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),a.shape[2]===3){[c,d,p]=qp(a,[1,1,1],-1);const y=De(c,i),v=De(d,o),b=De(p,s);f=ft(ft(y,v),b)}else f=t;if(e==="otsu"){const y=HN(Bn(k4(f),"int32"),Vo([]),256);u=cfe(y,l)}const g=n?m2(f,u):Og(f,u);return Bn(De(g,255),"int32")}function cfe(t,e){let n=uo([-1]),r=uo([0]),a=uo([0]),i,o,s,l,u,c;for(let d=0;d<t.size-1;d++){i=xn(t,0,d+1),o=xn(t,d+1),u=In(En(i),e),c=In(En(o),e);const p=En(De(i,Hp(0,i.size)));s=In(p,En(i));const f=jp(o.shape,i.size),g=ft(Hp(0,o.size),f),y=De(o,g);l=In(En(y),En(o));const v=Pt(s,l),b=Pt(s,l),x=De(u,c);a=De(De(x,v),b);const w=Og(a,r);r=Qc(w,a,r),n=Qc(w,uo([d]),n)}return n}const dfe=ee({threshold_:ufe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pfe(t,e,n="nearest",r="constant",a=0,i){const o=z(t,"image","transform","float32"),s=z(e,"transforms","transform","float32");V(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),V(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),V(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:s},u={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return te.runKernel(qx,l,u)}const hfe=ee({transform_:pfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ffe(t,e,n){V(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),V(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=z(t,"a","bandPart");V(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const a=r.shape,[i,o]=r.shape.slice(-2);if(!(e<=i))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);e<0&&(e=i),n<0&&(n=o);const s=Se(Hp(0,i,1,"int32"),[-1,1]),l=Hp(0,o,1,"int32"),u=Pt(s,l),c=Mg(m2(u,Ft(+e,"int32")),JN(u,Ft(-n,"int32"))),d=Cu([i,o],r.dtype);return Se(bs(Nu(Se(r,[-1,i,o])).map(p=>Qc(c,p,d))),a)}const mfe=ee({bandPart_:ffe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gfe(t){let e;if(Array.isArray(t)){e=!1,V(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const a=t[0].shape[0];for(let i=1;i<t.length;++i)V(t[i].shape[0]===a,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${a})`)}else e=!0,t=qp(t,t.shape[0],0).map(a=>Lg(a,[0]));V(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let a=0;a<t.length;++a)n.push(te.tidy(()=>{let i=r[a];if(a>0)for(let o=0;o<a;++o){const s=De(En(De(n[o],i)),n[o]);i=Pt(i,s)}return In(i,$g(i,"euclidean"))}));return e?bs(n,0):n}const yfe=ee({gramSchmidt_:gfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bfe(t,e=!1){if(V(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return WF(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Nu(Se(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],i=[];r.forEach(l=>{const[u,c]=WF(l,e);a.push(u),i.push(c)});const o=Se(bs(a,0),t.shape),s=Se(bs(i,0),t.shape);return[o,s]}}function WF(t,e=!1){return te.tidy(()=>{V(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let a=YN(n),i=dl(t);const o=Kp([[1]],[1,1]);let s=dl(o);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=i,d=s,p=a;[s,i,a]=te.tidy(()=>{const f=xn(i,[u,u],[n-u,1]),g=$g(f),y=xn(i,[u,u],[1,1]),v=Qc(Og(y,0),Kp([[-1]]),Kp([[1]])),b=Pt(y,De(v,g)),x=In(f,b);x.shape[0]===1?s=dl(o):s=ha([o,xn(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const w=ms(In(ln(v,b),g)),S=xn(i,[u,0],[n-u,r]),C=De(w,s),I=Ig(s);if(u===0)i=Pt(S,ln(C,ln(I,S)));else{const M=Pt(S,ln(C,ln(I,S)));i=ha([xn(i,[0,0],[u,r]),M],0)}const _=Ig(C),T=xn(a,[0,u],[n,a.shape[1]-u]);if(u===0)a=Pt(T,ln(ln(T,s),_));else{const M=Pt(T,ln(ln(T,s),_));a=ha([xn(a,[0,0],[n,u]),M],1)}return[s,i,a]}),da([c,d,p])}return!e&&n>r&&(a=xn(a,[0,0],[n,r]),i=xn(i,[0,0],[r,r])),[a,i]})}const vfe=ee({qr_:bfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Oa;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Oa||(Oa={}));function xfe(t,e,n=Oa.SUM_BY_NONZERO_WEIGHTS){const r=z(t,"losses","computeWeightedLoss");let a=null;e!=null&&(a=z(e,"weights","computeWeightedLoss"));const i=a==null?r:De(r,a);if(n===Oa.NONE)return i;if(n===Oa.SUM)return En(i);if(n===Oa.MEAN){if(a==null)return Pg(i);{const o=r.size/a.size,s=In(En(i),En(a));return o>1?In(s,Ft(o)):s}}if(n===Oa.SUM_BY_NONZERO_WEIGHTS){if(a==null)return In(En(i),Ft(r.size));{const o=De(a,Iu(r.shape)),s=Bn(En(u4(o,Ft(0))),"float32");return In(En(i),s)}}throw Error(`Unknown reduction: ${n}`)}const gl=ee({computeWeightedLoss_:xfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wfe(t,e,n,r=Oa.SUM_BY_NONZERO_WEIGHTS){const a=z(t,"labels","absoluteDifference"),i=z(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=z(n,"weights","absoluteDifference")),Kr(a.shape,i.shape,"Error in absoluteDifference: ");const s=hi(Pt(a,i));return gl(s,o,r)}const kfe=ee({absoluteDifference_:wfe});function Sfe(t,e,n,r,a=Oa.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","cosineDistance"),o=z(e,"predictions","cosineDistance");let s=null;r!=null&&(s=z(r,"weights","cosineDistance")),Kr(i.shape,o.shape,"Error in cosineDistance: ");const l=Ft(1),u=Pt(l,En(De(i,o),n,!0));return gl(u,s,a)}const Cfe=ee({cosineDistance_:Sfe});function Ife(t,e,n,r=Oa.SUM_BY_NONZERO_WEIGHTS){let a=z(t,"labels","hingeLoss");const i=z(e,"predictions","hingeLoss");let o=null;n!=null&&(o=z(n,"weights","hingeLoss")),Kr(a.shape,i.shape,"Error in hingeLoss: ");const s=Ft(1);a=Pt(De(Ft(2),a),s);const l=Ag(Pt(s,De(a,i)));return gl(l,o,r)}const Efe=ee({hingeLoss_:Ife});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nfe(t,e,n,r=1,a=Oa.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","huberLoss"),o=z(e,"predictions","huberLoss");let s=null;n!=null&&(s=z(n,"weights","huberLoss")),Kr(i.shape,o.shape,"Error in huberLoss: ");const l=Ft(r),u=hi(Pt(o,i)),c=l4(u,l),d=Pt(u,c),p=ft(De(Ft(.5),lo(c)),De(l,d));return gl(p,s,a)}const Tfe=ee({huberLoss_:Nfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _fe(t,e,n,r=1e-7,a=Oa.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","logLoss"),o=z(e,"predictions","logLoss");let s=null;n!=null&&(s=z(n,"weights","logLoss")),Kr(i.shape,o.shape,"Error in logLoss: ");const l=Ft(1),u=Ft(r),c=ms(De(i,Gp(ft(o,u)))),d=De(Pt(l,i),Gp(ft(Pt(l,o),u))),p=Pt(c,d);return gl(p,s,a)}const Rfe=ee({logLoss_:_fe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $fe(t,e,n,r=Oa.SUM_BY_NONZERO_WEIGHTS){const a=z(t,"labels","meanSquaredError"),i=z(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=z(n,"weights","meanSquaredError")),Kr(a.shape,i.shape,"Error in meanSquaredError: ");const s=C4(a,i);return gl(s,o,r)}const Ofe=ee({meanSquaredError_:$fe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mfe(t,e){const n=z(t,"labels","sigmoidCrossEntropyWithLogits"),r=z(e,"logits","sigmoidCrossEntropyWithLogits");Kr(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=Ag(r),i=De(r,n),o=t4(Su(ms(hi(r))));return ft(Pt(a,i),o)}function Pfe(t,e,n,r=0,a=Oa.SUM_BY_NONZERO_WEIGHTS){let i=z(t,"multiClassLabels","sigmoidCrossEntropy");const o=z(e,"logits","sigmoidCrossEntropy");let s=null;if(n!=null&&(s=z(n,"weights","sigmoidCrossEntropy")),Kr(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=Ft(r),c=Ft(1),d=Ft(.5);i=ft(De(i,Pt(c,u)),De(d,u))}const l=Mfe(i,o);return gl(l,s,a)}const Afe=ee({sigmoidCrossEntropy_:Pfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dfe(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return ys((r,a,i)=>{const o=r4(a,[n],!0),s=Pt(Bn(a,"float32"),o);i([r,s]);const l=ms(De(s,r));return{value:En(l,[n]),gradFunc:(u,c)=>{const[d,p]=c,f=_r(u.shape,[n]);return[De(Se(u,f),Pt(Bn(d,"float32"),Su(p))),De(Se(u,f),Pt(Su(p),Bn(d,"float32")))]}}})(t,e)}function Lfe(t,e,n,r=0,a=Oa.SUM_BY_NONZERO_WEIGHTS){let i=z(t,"onehotLabels","softmaxCrossEntropy");const o=z(e,"logits","softmaxCrossEntropy");let s=null;if(n!=null&&(s=z(n,"weights","softmaxCrossEntropy")),Kr(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const u=Ft(r),c=Ft(1),d=Ft(i.shape[1]);i=ft(De(i,Pt(c,u)),In(u,d))}const l=Dfe(i,o);return gl(l,s,a)}const Ffe=ee({softmaxCrossEntropy_:Lfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bfe(t,e,n,r){const a=z(t,"indices","sparseFillEmptyRows","int32"),i=z(e,"values","sparseFillEmptyRows"),o=z(n,"denseShape","sparseFillEmptyRows","int32"),s=z(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${a.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(s.rank!==0)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const l={indices:a,values:i,denseShape:o,defaultValue:s},u=te.runKernel(Lx,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const zfe=ee({sparseFillEmptyRows_:Bfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jfe(t,e,n){const r=z(t,"inputIndices","sparseReshape","int32"),a=z(e,"inputShape","sparseReshape","int32"),i=z(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(a.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:a,newShape:i},s=te.runKernel(Fx,o);return{outputIndices:s[0],outputShape:s[1]}}const Vfe=ee({sparseReshape_:jfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ufe(t,e,n){const r=z(t,"data","sparseSegmentMean"),a=z(e,"indices","sparseSegmentMean","int32"),i=z(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:a,segmentIds:i};return te.runKernel(Bx,o)}const Gfe=ee({sparseSegmentMean_:Ufe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wfe(t,e,n){const r=z(t,"data","sparseSegmentSum"),a=z(e,"indices","sparseSegmentSum","int32"),i=z(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:a,segmentIds:i};return te.runKernel(zx,o)}const Hfe=ee({sparseSegmentSum_:Wfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qfe(t,e,n,r,a,i,o,s){const l=z(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=z(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:l,dataSplits:u},p=te.runKernel(Ux,d,c);return{nGrams:p[0],nGramsSplits:p[1]}}const Kfe=ee({stringNGrams_:qfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xfe(t,e,n=!0){const r=z(t,"input","stringSplit","string"),a=z(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(a.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${a.shape}`);const i={skipEmpty:n},o={input:r,delimiter:a},s=te.runKernel(Gx,o,i);return{indices:s[0],values:s[1],shape:s[2]}}const Yfe=ee({stringSplit_:Xfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qfe(t,e){const n=z(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return te.runKernel(Wx,a,r)}const Zfe=ee({stringToHashBucketFast_:Qfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const HF={fft:x2,ifft:Dg,rfft:w2,irfft:S4},qF={hammingWindow:The,hannWindow:VF,frame:UF,stft:Ohe},_4={flipLeftRight:Dhe,grayscaleToRGB:Fhe,resizeNearestNeighbor:lfe,resizeBilinear:ofe,rotateWithOffset:zhe,cropAndResize:Phe,nonMaxSuppression:Vhe,nonMaxSuppressionAsync:Yhe,nonMaxSuppressionWithScore:Zhe,nonMaxSuppressionWithScoreAsync:efe,nonMaxSuppressionPadded:nfe,nonMaxSuppressionPaddedAsync:afe,threshold:dfe,transform:hfe},KF={bandPart:mfe,gramSchmidt:yfe,qr:vfe},XF={absoluteDifference:kfe,computeWeightedLoss:gl,cosineDistance:Cfe,hingeLoss:Efe,huberLoss:Tfe,logLoss:Rfe,meanSquaredError:Ofe,sigmoidCrossEntropy:Afe,softmaxCrossEntropy:Ffe},YF={sparseFillEmptyRows:zfe,sparseReshape:Vfe,sparseSegmentMean:Gfe,sparseSegmentSum:Hfe},QF={stringNGrams:Kfe,stringSplit:Yfe,stringToHashBucketFast:Zfe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Tu extends O8{minimize(e,n=!1,r){const{value:a,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(s=>({name:s.name,tensor:i[s.name]}));this.applyGradients(o)}else this.applyGradients(i);return da(i),n?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return OL(e,n)}dispose(){this.iterations_!=null&&da(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ft(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Tu,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class $2 extends Tu{constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=te.registeredVariables[n],i=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accum_grad`,variable:Ht(()=>fi(a).variable(i))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${n}/accum_var`,variable:Ht(()=>fi(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[n];if(o==null)return;const s=this.accumulatedGrads[r].variable,l=this.accumulatedUpdates[r].variable;Ht(()=>{const u=ft(De(s,this.rho),De(lo(o),1-this.rho)),c=De(In(gs(ft(l,this.epsilon)),gs(ft(s,this.epsilon))),o),d=ft(De(l,this.rho),De(lo(c),1-this.rho));s.assign(u),l.assign(d);const p=ft(De(c,-this.learningRate),a);a.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(da(this.accumulatedGrads.map(e=>e.variable)),da(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}$2.className="Adadelta",wu($2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class O2 extends Tu{constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=te.registeredVariables[n];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accumulator`,variable:Ht(()=>jp(a.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[r].tensor:e[n];if(i==null)return;const o=this.accumulatedGrads[r].variable;Ht(()=>{const s=ft(o,lo(i));o.assign(s);const l=ft(De(In(i,gs(ft(s,te.backend.epsilon()))),-this.learningRate),a);a.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&da(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}O2.className="Adagrad",wu(O2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class M2 extends Tu{constructor(e,n,r,a=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Ht(()=>{this.accBeta1=Ft(n).variable(),this.accBeta2=Ft(r).variable()}),a==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ht(()=>{const r=Pt(1,this.accBeta1),a=Pt(1,this.accBeta2);n.forEach((i,o)=>{const s=te.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Ht(()=>fi(s).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:Ht(()=>fi(s).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,p=ft(De(c,this.beta1),De(u,1-this.beta1)),f=ft(De(d,this.beta2),De(lo(u),1-this.beta2)),g=In(p,r),y=In(f,a);c.assign(p),d.assign(f);const v=ft(De(In(g,ft(gs(y),this.epsilon)),-this.learningRate),s);s.assign(v)}),this.accBeta1.assign(De(this.accBeta1,this.beta1)),this.accBeta2.assign(De(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&da(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&da(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Ht(()=>{this.accBeta1.assign(Vp(this.beta1,this.iterations_+1)),this.accBeta2.assign(Vp(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}M2.className="Adam",wu(M2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class P2 extends Tu{constructor(e,n,r,a=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Ht(()=>{this.iteration=Ft(0).variable(),this.accBeta1=Ft(n).variable()}),a==null&&(this.epsilon=te.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ht(()=>{const r=Pt(1,this.accBeta1),a=In(-this.learningRate,ft(De(this.iteration,this.decay),1));n.forEach((i,o)=>{const s=te.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:fi(s).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:fi(s).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,p=ft(De(c,this.beta1),De(u,1-this.beta1)),f=De(d,this.beta2),g=hi(u),y=s4(f,g);c.assign(p),d.assign(y);const v=ft(De(In(a,r),In(p,ft(y,this.epsilon))),s);s.assign(v)}),this.iteration.assign(ft(this.iteration,1)),this.accBeta1.assign(De(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&da(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&da(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}P2.className="Adamax",wu(P2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Fg extends Tu{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=Array.isArray(e)?e[r].tensor:e[n];if(a==null)return;const i=te.registeredVariables[n];Ht(()=>{const o=ft(De(this.c,a),i);i.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=fs(Ft(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}Fg.className="SGD",wu(Fg);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class A2 extends Fg{constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Ft(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=te.registeredVariables[n];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${n}/momentum`,variable:Ht(()=>fi(a).variable(!1))});const i=this.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];o!=null&&Ht(()=>{let s;const l=ft(De(this.m,i),o);this.useNesterov?s=ft(De(this.c,ft(o,De(l,this.m))),a):s=ft(De(this.c,l),a),i.assign(l),a.assign(s)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&da(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}A2.className="Momentum",wu(A2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class D2 extends Tu{constructor(e,n=.9,r=0,a=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,a==null&&(this.epsilon=te.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=te.registeredVariables[n],i=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${n}/rms`,variable:Ht(()=>fi(a).variable(i))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${n}/momentum`,variable:Ht(()=>fi(a).variable(i))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${n}/mg`,variable:Ht(()=>fi(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[n];if(o==null)return;const s=this.accumulatedMeanSquares[r].variable,l=this.accumulatedMoments[r].variable;Ht(()=>{const u=ft(De(s,this.decay),De(lo(o),1-this.decay));if(this.centered){const c=this.accumulatedMeanGrads[r].variable,d=ft(De(c,this.decay),De(o,1-this.decay)),p=In(De(o,this.learningRate),gs(Pt(u,ft(lo(d),this.epsilon)))),f=ft(De(l,this.momentum),p);s.assign(u),c.assign(d),l.assign(f);const g=Pt(a,f);a.assign(g)}else{const c=ft(De(s,this.decay),De(lo(o),1-this.decay)),d=ft(De(l,this.momentum),In(De(o,this.learningRate),gs(ft(c,this.epsilon))));s.assign(c),l.assign(d);const p=Pt(a,d);a.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&da(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&da(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&da(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}D2.className="RMSProp",wu(D2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class _u{static sgd(e){return new Fg(e)}static momentum(e,n,r=!1){return new A2(e,n,r)}static rmsprop(e,n=.9,r=0,a=null,i=!1){return new D2(e,n,r,a,i)}static adam(e=.001,n=.9,r=.999,a=null){return new M2(e,n,r,a)}static adadelta(e=.001,n=.95,r=null){return new $2(e,n,r)}static adamax(e=.002,n=.9,r=.999,a=null,i=0){return new P2(e,n,r,a,i)}static adagrad(e,n=.1){return new O2(e,n)}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Jfe={sgd:_u.sgd,momentum:_u.momentum,adadelta:_u.adadelta,adagrad:_u.adagrad,rmsprop:_u.rmsprop,adamax:_u.adamax,adam:_u.adam};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const eme=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function ZF(){return new Promise(t=>eme(()=>t()))}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function R4(t,e){const n=t[0].length;t.forEach((a,i)=>{V(a.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),V(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((a,i)=>{for(let o=0;o<n;o++)V(o===e||a[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${a}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function vs(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Uo;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Uo||(Uo={}));function JF(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let a=1;a<n.length;++a){const i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${a+t}] = ${i} but shape[${a+t}] = ${s}`)}else r[o]=i}return r}function e9(t){const e={FIRST_DIM_SIZE:Uo.FIRST_DIM_SIZE,VALUE_ROWIDS:Uo.VALUE_ROWIDS,ROW_LENGTHS:Uo.ROW_LENGTHS,ROW_SPLITS:Uo.ROW_SPLITS,ROW_LIMITS:Uo.ROW_LIMITS,ROW_STARTS:Uo.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function t9(t){return t.length===0?0:t[0]===Uo.FIRST_DIM_SIZE?t.length-1:t.length}function n9(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let a=0;a<Math.min(n,r-1);++a){const i=t[a],o=e[a+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${a-t.length}] = ${i} but ragged tensor input.flatValues.shape[${a-t.length}] = ${o}`)}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $4=30;function L2(t){return t<=$4?t:pv(t,Math.floor(Math.sqrt(t)))}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function O4(t,e,n){const r=n*(typeof t=="number"?t:t[0]),a=e*(typeof t=="number"?t:t[1]);return[r,a]}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bg(t,e,n,r=!0){let a=[];if(r)a=a.concat(e.slice(0)),a.push(t[0]/n),a=a.concat(t.slice(1));else{a=a.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)a=a.concat([t[o+1]/e[o],e[o]]);a=a.concat(t.slice(i+1))}return a}function zg(t,e,n=!0){const r=[];if(n){r.push(e);for(let a=e+1;a<t;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{const a=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):a.push(o);r.push(...a),r.push(0),r.push(...i)}return r}function jg(t,e,n,r=!0){const a=[];r?a.push(t[0]/n):a.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?a.push(e[i-1]*t[i]):a.push(t[i]/e[i-1]):a.push(t[i]);return a}function M4(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function P4(t,e,n){const r=t.slice(0,1);for(let a=0;a<n;++a)r.push(t[a+1]-e[a][0]-e[a][1]);return r}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A4=1.7580993408473768,D4=1.0507009873554805;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const L4=.3275911,F4=.254829592,B4=-.284496736,z4=1.421413741,j4=-1.453152027,V4=1.061405429;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yl(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function r9(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function a9(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=0;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function i9(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=2;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function U4(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function o9(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function s9(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let a=0;a<Math.ceil(t/2);a++){const i=(e?2:-2)*Math.PI*(a/t);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function l9(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),a=Math.cos(r),i=Math.sin(r);return{real:a,imag:i}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const G4="->",tme=/->/g,u9=",",c9="...";function W4(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(tme,"").length)/G4.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${G4}").`);const[r,a]=t.split(G4);V(r.indexOf(c9)===-1,()=>`The ellipsis notation ("${c9}") is not supported yet.`);const i=r.split(u9),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let p=0;p<a.length;++p){const f=a[p];if(!i.some(g=>g.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);s.indexOf(f)===-1&&s.push(f)}for(let p=0;p<r.length;++p){const f=r[p];s.indexOf(f)===-1&&f!==u9&&s.push(f)}const l=new Array(i.length);for(let p=0;p<o;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let f=0;f<i[p].length;++f)l[p].push(s.indexOf(i[p][f]))}const u=s.length,c=a.length,d=[];for(let p=c;p<u;++p)d.push(p);return{allDims:s,summedDims:d,idDims:l}}function H4(t,e){let n=new Array(t);n.fill(-1);for(let a=0;a<e.length;++a)n[e[a]]=a;const r=[];for(let a=0;a<t;++a)n[a]===-1&&r.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:r}}function q4(t,e,n){const r=new Array(t);for(let a=0;a<n.length;++a){const i=n[a].shape;for(let o=0;o<e[a].length;++o)r[e[a][o]]===void 0?r[e[a][o]]=i[o]:V(r[e[a][o]]===i[o],()=>`Expected dimension ${r[e[a][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function K4(t,e){const n=t,r=[];let a=0;t.length===0&&n.push(-1),a=t.length+1;for(let o=0;o<a;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const s=n[o],l=nme(e,s);for(const u of l)i.indexOf(u)===-1&&(r[o].push(u),i.push(u))}return{path:n,steps:r}}function X4(t){return t.every((e,n)=>e===n)}function nme(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function Y4(t,e,n=0){let r=[];if(typeof e=="number")V(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const a=e.reduce((o,s)=>(s===-1&&(o+=1),o),0);V(a<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((s,l)=>l>0?s+l:s);e[i]=t.shape[n]-o}V(t.shape[n]===e.reduce((o,s)=>o+s),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function d9(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function p9(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function h9(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function f9(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function m9(t,e){return`size ${t} must be non-negative, not ${e}`}function g9(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function y9(t,e){const n=be(t),r=be(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function b9(t,e){const n=be(t),r=be(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Q4(){return"segment ids must be >= 0"}function v9(){return"segment ids are not increasing"}function x9(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function w9(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function k9(t,e){let n=!1,r;for(t<=$4?(r=t,n=!0):r=pv(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=pv(t,r+1);return r}function S9(t,e,n){const r=[],a=t.length;for(let i=0;i<a;i++)i!==e?r.push(t[i]):r.push(n);return r}function Z4(t,e,n,r){const a=e.shape.length,i=t.shape.length;if(r!==0&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],s=[];let l=1,u=1,c=1;for(let d=0;d<r;++d)s.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)s.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<a;d++)s.push(e.shape[d]);for(let d=n+1;d<i;d++)s.push(t.shape[d]),c*=t.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:s}}const rme=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:Z4,computeOutShape:S9,segOpComputeOptimalWindowSize:k9},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ed(t){try{return t.map(e=>ll(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function C9(t){return t.map(e=>ps(e))}const I9=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:F4,ERF_A2:B4,ERF_A3:z4,ERF_A4:j4,ERF_A5:V4,ERF_P:L4,PARALLELIZE_THRESHOLD:$4,get RowPartitionType(){return Uo},SELU_SCALE:D4,SELU_SCALEALPHA:A4,applyActivation:E2,assertAndGetBroadcastShape:zt,assertAxesAreInnerMostDims:Qr,assertParamsConsistent:R4,assignToTypedArray:o9,axesAreInnerMostDims:XN,calculateShapes:Fp,checkEinsumDimSizes:q4,checkPadOnDimRoundingMode:so,combineLocations:kL,combineRaggedTensorToTensorShapes:JF,complexWithEvenIndex:a9,complexWithOddIndex:i9,computeConv2DInfo:Br,computeConv3DInfo:ku,computeDefaultPad:VN,computeDilation2DInfo:Eg,computeOptimalWindowSize:L2,computeOutAndReduceShapes:Yr,computeOutShape:vs,computePool2DInfo:oo,computePool3DInfo:hl,convertConv2DDataFormat:fl,decodeEinsumEquation:W4,eitherStridesOrDilationsAreOne:pa,expandShapeToKeepDim:_r,exponent:l9,exponents:s9,fromStringArrayToUint8:C9,fromUint8ToStringArray:ed,getAxesPermutation:dr,getBroadcastDims:qc,getComplexWithIndex:U4,getEinsumComputePath:K4,getEinsumPermutation:H4,getFusedBiasGradient:I2,getFusedDyActivation:C2,getImageCenter:O4,getInnerMostAxes:pr,getPermuted:zg,getRaggedRank:t9,getReductionAxes:NN,getReshaped:Bg,getReshapedPermuted:jg,getRowPartitionTypesHelper:e9,getSliceBeginCoords:M4,getSliceSize:P4,getSparseFillEmptyRowsIndicesDenseShapeMismatch:d9,getSparseFillEmptyRowsNegativeIndexErrorMessage:p9,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:h9,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:g9,getSparseReshapeInputOutputMismatchErrorMessage:b9,getSparseReshapeInputOutputMultipleErrorMessage:y9,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:f9,getSparseReshapeNegativeOutputDimErrorMessage:m9,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:w9,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Q4,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:v9,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:x9,getUndoAxesPermutation:Rg,isIdentityPermutation:X4,log:tse,mergeRealAndImagArrays:yl,prepareAndValidate:c2,prepareSplitSize:Y4,segment_util:rme,shouldFuse:N2,slice_util:$8,splitRealAndImagArrays:r9,tupleValuesAreOne:Ng,upcastType:Xa,validateDefaultValueShape:n9,validateInput:RN,validateUpdateShape:_N,warn:Mi},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ame=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:T2,nonMaxSuppressionV4Impl:_2,nonMaxSuppressionV5Impl:R2,whereImpl:k2},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ime=Object.freeze(Object.defineProperty({__proto__:null,Abs:fv,Acos:cm,Acosh:dm,AdadeltaOptimizer:$2,AdagradOptimizer:O2,AdamOptimizer:M2,AdamaxOptimizer:P2,Add:_p,AddN:mv,All:gv,Any:yv,ArgMax:bv,ArgMin:vv,Asin:pm,Asinh:hm,Atan:fm,Atan2:gm,Atanh:mm,AvgPool:xv,AvgPool3D:wv,AvgPool3DGrad:F3,AvgPoolGrad:L3,BatchMatMul:kv,BatchToSpaceND:Sv,Bincount:Cv,BroadcastArgs:Iv,BroadcastTo:Xoe,Cast:ym,Ceil:bm,ClipByValue:vm,Complex:Ev,ComplexAbs:Nv,Concat:Tv,Conv2D:_v,Conv2DBackpropFilter:Rv,Conv2DBackpropInput:$v,Conv3D:Ov,Conv3DBackpropFilterV2:B3,Conv3DBackpropInputV2:Mv,Cos:xm,Cosh:wm,CropAndResize:Dv,Cumprod:Pv,Cumsum:Av,DataStorage:T3,DenseBincount:Lv,DepthToSpace:Fv,DepthwiseConv2dNative:Bv,DepthwiseConv2dNativeBackpropFilter:zv,DepthwiseConv2dNativeBackpropInput:jv,Diag:Vv,Dilation2D:Uv,Dilation2DBackpropFilter:j3,Dilation2DBackpropInput:z3,get ENV(){return P3},Einsum:Gv,Elu:Sm,EluGrad:V3,Environment:TD,Equal:Im,Erf:Cm,Exp:Em,ExpandDims:Wv,Expm1:Nm,FFT:Hv,Fill:qv,FlipLeftRight:Kv,Floor:Tm,FloorDiv:_m,FromPixels:Zx,FusedBatchNorm:Xv,FusedConv2D:fg,FusedDepthwiseConv2D:mg,GatherNd:Qv,GatherV2:Yv,Greater:Rm,GreaterEqual:$m,IFFT:Zv,Identity:Om,Imag:Jv,IsFinite:Mm,IsInf:Pm,IsNan:Am,KernelBackend:lv,LRN:nx,LRNGrad:U3,LeakyRelu:ex,Less:Dm,LessEqual:Lm,LinSpace:tx,Log:Fm,Log1p:Bm,LogSoftmax:Qoe,LogicalAnd:zm,LogicalNot:jm,LogicalOr:Vm,LogicalXor:Yoe,LowerBound:Zoe,Max:rx,MaxPool:ax,MaxPool3D:ix,MaxPool3DGrad:W3,MaxPoolGrad:G3,MaxPoolWithArgmax:ox,Maximum:Um,Mean:sx,Min:lx,Minimum:Gm,MirrorPad:ux,Mod:Wm,MomentumOptimizer:A2,Multinomial:cx,Multiply:Hm,Neg:dx,NonMaxSuppressionV3:px,NonMaxSuppressionV4:hx,NonMaxSuppressionV5:fx,NotEqual:qm,OP_SCOPE_SUFFIX:dN,OneHot:gx,OnesLike:mx,Optimizer:Tu,OptimizerConstructors:_u,Pack:yx,PadV2:bx,Pool:Joe,Pow:Km,Prelu:vx,Prod:xx,RMSPropOptimizer:D2,RaggedGather:wx,RaggedTensorToTensor:kx,Range:Sx,get Rank(){return tN},Real:Cx,RealDiv:km,Reciprocal:Xm,get Reduction(){return Oa},Relu:Ym,Relu6:Qm,Reshape:Ix,ResizeBilinear:Nx,ResizeBilinearGrad:q3,ResizeNearestNeighbor:Ex,ResizeNearestNeighborGrad:H3,Reverse:Tx,RotateWithOffset:Jx,Round:Zm,Rsqrt:Jm,SGDOptimizer:Fg,ScatterNd:_x,SearchSorted:Rx,Select:$x,Selu:eg,Sigmoid:ag,Sign:rg,Sin:tg,Sinh:ng,Slice:Ox,Softmax:Dx,Softplus:ig,SpaceToBatchND:Px,SparseFillEmptyRows:Lx,SparseReshape:Fx,SparseSegmentMean:Bx,SparseSegmentSum:zx,SparseToDense:jx,SplitV:Ax,Sqrt:og,Square:K3,SquaredDifference:sg,Step:pg,StridedSlice:Vx,StringNGrams:Ux,StringSplit:Gx,StringToHashBucketFast:Wx,Sub:lg,Sum:Mx,Tan:ug,Tanh:cg,Tensor:Hn,TensorBuffer:Tr,Tile:dg,TopK:Hx,Transform:qx,Transpose:Rp,Unique:Kx,Unpack:Xx,UnsortedSegmentSum:Yx,UpperBound:ese,Variable:wg,ZerosLike:Qx,_FusedMatMul:hg,abs:hi,acos:A8,acosh:D8,add:ft,addN:L8,all:F8,any:B8,argMax:z8,argMin:j8,asin:V8,asinh:U8,atan:G8,atan2:W8,atanh:H8,avgPool:GN,avgPool3d:q8,backend:Hle,backend_util:I9,basicLSTMCell:K8,batchNorm:Tg,batchNorm2d:X8,batchNorm3d:Y8,batchNorm4d:Q8,batchToSpaceND:WN,bincount:HN,booleanMaskAsync:PF,broadcastArgs:Z8,broadcastTo:zp,broadcast_util:tue,browser:sue,buffer:St,cast:Bn,ceil:J8,clipByValue:eL,clone:dl,complex:ul,concat:ha,concat1d:tL,concat2d:nL,concat3d:rL,concat4d:aL,conv1d:iL,conv2d:_g,conv2dTranspose:sL,conv3d:lL,conv3dTranspose:uL,copyRegisteredKernels:ise,cos:cL,cosh:dL,cosineWindow:S2,cumprod:pL,cumsum:hL,customGrad:ys,denseBincount:fL,deprecationWarn:Ale,depthToSpace:mL,depthwiseConv2d:h2,device_util:Mse,diag:gL,dilation2d:yL,disableDeprecationWarnings:Ple,dispose:da,disposeVariables:Dle,div:In,divNoNan:bL,dot:vL,dropout:BF,einsum:xL,elu:KN,enableDebugMode:Mle,enableProdMode:Ole,enclosingPowerOfTwo:N4,engine:pl,env:fe,equal:qN,erf:wL,euclideanNorm:CL,exp:Su,expandDims:ml,expm1:IL,eye:YN,fft:x2,fill:jp,findBackend:Gle,findBackendFactory:Wle,floor:QN,floorDiv:jN,fused:jF,gather:ZN,gatherND:FF,gather_util:lue,getBackend:Vle,getGradient:X3,getKernel:e2,getKernelsForBackend:t2,grad:hde,grads:fde,greater:Og,greaterEqual:JN,ifft:Dg,imag:Cg,image:_4,inTopKAsync:zF,io:IN,irfft:S4,isFinite:EL,isInf:NL,isNaN:TL,keep:fs,kernel_impls:ame,leakyRelu:e4,less:_L,lessEqual:m2,linalg:KF,linspace:RL,localResponseNormalization:$L,log:Gp,log1p:t4,logSigmoid:ML,logSoftmax:PL,logSumExp:r4,logicalAnd:Mg,logicalNot:a4,logicalOr:i4,logicalXor:AL,losses:XF,lowerBound:DL,matMul:ln,math:eue,max:Zc,maxPool:o4,maxPool3d:LL,maxPoolWithArgmax:FL,maximum:s4,mean:Pg,memory:Lle,meshgrid:BL,min:f2,minimum:l4,mirrorPad:zL,mod:jL,moments:VL,movingAverage:AF,mul:De,multiRNNCell:UL,multinomial:GL,neg:ms,nextFrame:ZF,norm:$g,notEqual:u4,oneHot:u2,ones:Iu,onesLike:WL,op:ee,outerProduct:HL,pad:Wp,pad1d:qL,pad2d:KL,pad3d:XL,pad4d:YL,pool:QL,pow:Vp,prelu:d4,print:xN,prod:ZL,profile:Fle,raggedGather:JL,raggedTensorToTensor:eF,rand:tF,randomGamma:aF,randomNormal:v4,randomStandardNormal:iF,randomUniform:x4,range:Hp,ready:jle,real:Lp,reciprocal:oF,registerBackend:EN,registerGradient:nse,registerKernel:n2,relu:Ag,relu6:w4,removeBackend:Ule,reshape:Se,reverse:Eu,reverse1d:sF,reverse2d:lF,reverse3d:uF,reverse4d:cF,rfft:w2,round:k4,rsqrt:dF,scalar:Ft,scatterND:DF,scatter_util:uue,searchSorted:b2,selu:pF,separableConv2d:hF,serialization:fue,setBackend:zle,setPlatform:qle,setdiff1dAsync:fF,sigmoid:Yc,sign:mF,signal:qF,sin:gF,sinh:yF,slice:xn,slice1d:bF,slice2d:vF,slice3d:xF,slice4d:wF,slice_util:$8,softmax:kF,softplus:n4,spaceToBatchND:c4,sparse:YF,sparseToDense:LF,spectral:HF,split:qp,sqrt:gs,square:lo,squaredDifference:C4,squeeze:Lg,stack:bs,step:I4,stridedSlice:SF,string:QF,sub:Pt,sum:En,sumOutType:o2,tan:CF,tanh:p2,tensor:Vo,tensor1d:uo,tensor2d:Kp,tensor3d:TN,tensor4d:IF,tensor5d:EF,tensor6d:NF,tensor_util:Tse,test_util:Cue,tidy:Ht,tile:Up,time:Ble,topk:TF,train:Jfe,transpose:Ig,truncatedNormal:_F,unique:RF,unregisterGradient:ase,unregisterKernel:rse,unsortedSegmentSum:$F,unstack:Nu,upcastType:Xa,upperBound:OF,util:fse,valueAndGrad:mde,valueAndGrads:gde,variable:MF,variableGrads:OL,version_core:Iue,where:Qc,whereAsync:E4,zeros:Cu,zerosLike:fi},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ome=fe();ome.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
* =============================================================================
*/var co;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(co||(co={}));var E9;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(E9||(E9={}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sme={};function N9(t){return sme[t]}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $(t,e,n,r,a){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const s=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?s+1:i.inputIndexEnd;if(i.type==="tensor")return Ma(e.inputNames[i.inputIndexStart],n,r,a);if(i.type==="tensors")return e.inputNames.slice(s,l).map(d=>Ma(d,n,r,a));const u=Ma(e.inputNames.slice(s)[0],n,r,a),c=u.dataSync();return i.type==="number"?c[0]:Oi(u.shape,c)}const o=e.attrParams[t];return o&&o.value}function Ma(t,e,n,r){const[a,i]=mi(t);if(r!=null){const s=r.getHashTableHandleByName(a);if(s!=null)return s}const o=n.currentContextIds.find(s=>!!e[F2(a,s)]);return o!==void 0?e[F2(a,o)][i]:void 0}function lme(t,e,n){return e[F2(t,n.currentContextId)]}function xs(t,e){const[n,r,a]=mi(t);return[F2(n,e&&e.currentContextId),r,a]}function F2(t,e){return e?`${t}-${e}`:t}function mi(t){const e=t.split(":");if(e.length===1)return[t,0,void 0];const n=e[0],r=e.length===3?e[1]:void 0,a=Number(e[e.length-1]);return[n,a,r]}function B2(t,e,n){let r=$("pad",t,e,n);if(r==="explicit"){r=$("explicitPaddings",t,e,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)a[i][0]=r[i*2],a[i][1]=r[i*2+1];return a}return r}function bl(t){return t.kept?t:dl(t)}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ume=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],cme=Object.freeze(Object.defineProperty({__proto__:null,json:ume},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dme=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],pme=Object.freeze(Object.defineProperty({__proto__:null,json:dme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hme=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],fme=Object.freeze(Object.defineProperty({__proto__:null,json:hme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mme=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],gme=Object.freeze(Object.defineProperty({__proto__:null,json:mme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yme=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],bme=Object.freeze(Object.defineProperty({__proto__:null,json:yme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vme=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],xme=Object.freeze(Object.defineProperty({__proto__:null,json:vme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wme=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],kme=Object.freeze(Object.defineProperty({__proto__:null,json:wme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Sme=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Cme=Object.freeze(Object.defineProperty({__proto__:null,json:Sme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ime=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],Eme=Object.freeze(Object.defineProperty({__proto__:null,json:Ime},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Nme=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Tme=Object.freeze(Object.defineProperty({__proto__:null,json:Nme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _me=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Rme=Object.freeze(Object.defineProperty({__proto__:null,json:_me},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $me=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],Ome=Object.freeze(Object.defineProperty({__proto__:null,json:$me},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Mme=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],Pme=Object.freeze(Object.defineProperty({__proto__:null,json:Mme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ame=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Dme=Object.freeze(Object.defineProperty({__proto__:null,json:Ame},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Lme=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],Fme=Object.freeze(Object.defineProperty({__proto__:null,json:Lme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Bme=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],zme=Object.freeze(Object.defineProperty({__proto__:null,json:Bme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jme=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Vme=Object.freeze(Object.defineProperty({__proto__:null,json:jme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ume=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Gme=Object.freeze(Object.defineProperty({__proto__:null,json:Ume},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Wme=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Hme=Object.freeze(Object.defineProperty({__proto__:null,json:Wme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class T9{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[cme,pme,fme,gme,bme,xme,kme,Cme,Eme,Tme,Rme,Ome,Pme,Dme,Fme,zme,Vme,Gme,Hme],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,a)=>(r[a.tfOpName]=a,r),{})}transformGraph(e,n={}){const r=e.node,a=[],i=[],o=[],s=r.reduce((y,v)=>(y[v.name]=this.mapNode(v),v.op.startsWith("Placeholder")?a.push(y[v.name]):v.op==="Const"?i.push(y[v.name]):(v.input==null||v.input.length===0)&&o.push(y[v.name]),y),{});let l=[];const u=[];let c={},d={};n!=null&&(c=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const p=Object.keys(s);p.forEach(y=>{const v=s[y];v.inputNames.forEach((b,x)=>{const[w,,S]=xs(b),C=s[w];if(C.outputs!=null){const I=C.outputs.indexOf(S);if(I!==-1){const _=`${w}:${I}`;v.inputNames[x]=_}}v.inputs.push(C),C.children.push(v)})}),Object.keys(d).length===0?p.forEach(y=>{const v=s[y];v.children.length===0&&u.push(v)}):Object.keys(d).forEach(y=>{const[v]=xs(y),b=s[v];b!=null&&(b.signatureKey=d[y],u.push(b))}),Object.keys(c).length>0?Object.keys(c).forEach(y=>{const[v]=xs(y),b=s[v];b&&(b.signatureKey=c[y],l.push(b))}):l=a;let f={};e.library!=null&&e.library.function!=null&&(f=e.library.function.reduce((y,v)=>(y[v.signature.name]=this.mapFunction(v),y),{}));const g={nodes:s,inputs:l,outputs:u,weights:i,placeholders:a,signature:n,functions:f};return o.length>0&&(g.initNodes=o),g}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=N9(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(a=>a.startsWith("^")?a.slice(1):a),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((a,i)=>(a[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},a),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((a,i)=>{const o=i.type;let s;switch(i.type){case"string":s=J4(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=J4(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":s=sT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=sT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":s=tT(e.attr,i.tfName,i.defaultValue||0),s===void 0&&i.tfDeprecatedName&&(s=tT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":s=oT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=oT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":s=eT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=eT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":s=uT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=uT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":s=iT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=iT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":s=lT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=lT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":s=rT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=rT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":s=aT(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=aT(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":s=R9(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=R9(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return a[i.name]={value:s,type:o},a},{})),r}mapFunction(e){const n=e.nodeDef,r=[],a=[];let i={};n!=null&&(i=n.reduce((c,d)=>(c[d.name]=this.mapNode(d),d.op==="Const"&&a.push(c[d.name]),c),{}));const o=[],s=[];e.signature.inputArg.forEach(c=>{const[d]=xs(c.name),p={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:nT(c.type),type:"dtype"}},children:[]};p.signatureKey=c.name,o.push(p),i[d]=p}),Object.keys(i).forEach(c=>{const d=i[c];d.inputNames.forEach((p,f)=>{const[g,,y]=xs(p),v=i[g];if(v.outputs!=null){const b=v.outputs.indexOf(y);if(b!==-1){const x=`${g}:${b}`;d.inputNames[f]=x}}d.inputs.push(v),v.children.push(d)})});const l=e.ret;e.signature.outputArg.forEach(c=>{const[d,p]=xs(l[c.name]),f=i[d];f!=null&&(f.defaultOutput=p,s.push(f))});const u=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:s,weights:a,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function qme(t){const e=fe().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function _9(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):qme(t);return e?n:n.toLowerCase()}function J4(t,e,n,r=!1){const a=t[e];return a!=null?_9(a.s,r):n}function eT(t,e,n){const r=t[e];return r?r.b:n}function tT(t,e,n){const r=t[e]||{},a=r.i!=null?r.i:r.f!=null?r.f:n;return typeof a=="number"?a:parseInt(a,10)}function nT(t){switch(typeof t=="string"&&(t=co[t]),t){case co.DT_FLOAT:case co.DT_HALF:return"float32";case co.DT_INT32:case co.DT_INT64:case co.DT_INT8:case co.DT_UINT8:return"int32";case co.DT_BOOL:return"bool";case co.DT_DOUBLE:return"float32";case co.DT_STRING:return"string";default:return null}}function R9(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function rT(t,e,n){const r=t[e];return r&&r.type?nT(r.type):n}function aT(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(a=>nT(a)):n}function $9(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function iT(t,e,n){const r=t[e];return r&&r.shape?$9(r.shape):n}function oT(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(a=>typeof a=="number"?a:parseInt(a,10)):n}function sT(t,e,n,r=!1){const a=t[e];return a&&a.list&&a.list.s?a.list.s.map(i=>_9(i,r)):n}function lT(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(a=>$9(a)):n}function uT(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Kme{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(a=>this.getInput(a)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((a,i)=>(a[i]=this.getAttr(i),a),{}))}getInput(e){return Ma(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Ma(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return tT(this.node.rawAttrs,e,n);if(r.s!=null)return J4(this.node.rawAttrs,e,n);if(r.b!=null)return eT(this.node.rawAttrs,e,n);if(r.shape!=null)return iT(this.node.rawAttrs,e,n);if(r.type!=null)return rT(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return oT(this.node.rawAttrs,e,n);if(r.list.s!=null)return sT(this.node.rawAttrs,e,n);if(r.list.shape!=null)return lT(this.node.rawAttrs,e,n);if(r.list.b!=null)return uT(this.node.rawAttrs,e,n);if(r.list.type!=null)return aT(this.node.rawAttrs,e,n)}return n}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fa=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:dN,abs:hi,acos:A8,acosh:D8,add:ft,addN:L8,all:F8,any:B8,argMax:z8,argMin:j8,asin:V8,asinh:U8,atan:G8,atan2:W8,atanh:H8,avgPool:GN,avgPool3d:q8,basicLSTMCell:K8,batchNorm:Tg,batchNorm2d:X8,batchNorm3d:Y8,batchNorm4d:Q8,batchToSpaceND:WN,bincount:HN,booleanMaskAsync:PF,broadcastArgs:Z8,broadcastTo:zp,buffer:St,cast:Bn,ceil:J8,clipByValue:eL,clone:dl,complex:ul,concat:ha,concat1d:tL,concat2d:nL,concat3d:rL,concat4d:aL,conv1d:iL,conv2d:_g,conv2dTranspose:sL,conv3d:lL,conv3dTranspose:uL,cos:cL,cosh:dL,cosineWindow:S2,cumprod:pL,cumsum:hL,denseBincount:fL,depthToSpace:mL,depthwiseConv2d:h2,diag:gL,dilation2d:yL,div:In,divNoNan:bL,dot:vL,dropout:BF,einsum:xL,elu:KN,enclosingPowerOfTwo:N4,equal:qN,erf:wL,euclideanNorm:CL,exp:Su,expandDims:ml,expm1:IL,eye:YN,fft:x2,fill:jp,floor:QN,floorDiv:jN,fused:jF,gather:ZN,gatherND:FF,greater:Og,greaterEqual:JN,ifft:Dg,imag:Cg,image:_4,inTopKAsync:zF,irfft:S4,isFinite:EL,isInf:NL,isNaN:TL,leakyRelu:e4,less:_L,lessEqual:m2,linalg:KF,linspace:RL,localResponseNormalization:$L,log:Gp,log1p:t4,logSigmoid:ML,logSoftmax:PL,logSumExp:r4,logicalAnd:Mg,logicalNot:a4,logicalOr:i4,logicalXor:AL,losses:XF,lowerBound:DL,matMul:ln,max:Zc,maxPool:o4,maxPool3d:LL,maxPoolWithArgmax:FL,maximum:s4,mean:Pg,meshgrid:BL,min:f2,minimum:l4,mirrorPad:zL,mod:jL,moments:VL,movingAverage:AF,mul:De,multiRNNCell:UL,multinomial:GL,neg:ms,norm:$g,notEqual:u4,oneHot:u2,ones:Iu,onesLike:WL,op:ee,outerProduct:HL,pad:Wp,pad1d:qL,pad2d:KL,pad3d:XL,pad4d:YL,pool:QL,pow:Vp,prelu:d4,print:xN,prod:ZL,raggedGather:JL,raggedTensorToTensor:eF,rand:tF,randomGamma:aF,randomNormal:v4,randomStandardNormal:iF,randomUniform:x4,range:Hp,real:Lp,reciprocal:oF,relu:Ag,relu6:w4,reshape:Se,reverse:Eu,reverse1d:sF,reverse2d:lF,reverse3d:uF,reverse4d:cF,rfft:w2,round:k4,rsqrt:dF,scalar:Ft,scatterND:DF,searchSorted:b2,selu:pF,separableConv2d:hF,setdiff1dAsync:fF,sigmoid:Yc,sign:mF,signal:qF,sin:gF,sinh:yF,slice:xn,slice1d:bF,slice2d:vF,slice3d:xF,slice4d:wF,softmax:kF,softplus:n4,spaceToBatchND:c4,sparse:YF,sparseToDense:LF,spectral:HF,split:qp,sqrt:gs,square:lo,squaredDifference:C4,squeeze:Lg,stack:bs,step:I4,stridedSlice:SF,string:QF,sub:Pt,sum:En,tan:CF,tanh:p2,tensor:Vo,tensor1d:uo,tensor2d:Kp,tensor3d:TN,tensor4d:IF,tensor5d:EF,tensor6d:NF,tile:Up,topk:TF,transpose:Ig,truncatedNormal:_F,unique:RF,unsortedSegmentSum:$F,unstack:Nu,upperBound:OF,variable:MF,where:Qc,whereAsync:E4,zeros:Cu,zerosLike:fi},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xme=(t,e,n,r=fa)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add($("a",t,e,n),$("b",t,e,n))];case"AddN":return[r.addN($("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod($("a",t,e,n),$("b",t,e,n))];case"Mul":return[r.mul($("a",t,e,n),$("b",t,e,n))];case"RealDiv":case"Div":return[r.div($("a",t,e,n),$("b",t,e,n))];case"DivNoNan":return[r.divNoNan($("a",t,e,n),$("b",t,e,n))];case"FloorDiv":return[r.floorDiv($("a",t,e,n),$("b",t,e,n))];case"Sub":return[r.sub($("a",t,e,n),$("b",t,e,n))];case"Minimum":return[r.minimum($("a",t,e,n),$("b",t,e,n))];case"Maximum":return[r.maximum($("a",t,e,n),$("b",t,e,n))];case"Pow":return[r.pow($("a",t,e,n),$("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference($("a",t,e,n),$("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Yme=(t,e,n,r=fa)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs($("x",t,e,n))];case"Acos":return[r.acos($("x",t,e,n))];case"Acosh":return[r.acosh($("x",t,e,n))];case"Asin":return[r.asin($("x",t,e,n))];case"Asinh":return[r.asinh($("x",t,e,n))];case"Atan":return[r.atan($("x",t,e,n))];case"Atan2":return[r.atan2($("x",t,e,n),$("y",t,e,n))];case"Atanh":return[r.atanh($("x",t,e,n))];case"Ceil":return[r.ceil($("x",t,e,n))];case"Complex":return[r.complex($("real",t,e,n),$("imag",t,e,n))];case"Cos":return[r.cos($("x",t,e,n))];case"Cosh":return[r.cosh($("x",t,e,n))];case"Elu":return[r.elu($("x",t,e,n))];case"Erf":return[r.erf($("x",t,e,n))];case"Exp":return[r.exp($("x",t,e,n))];case"Expm1":return[r.expm1($("x",t,e,n))];case"Floor":return[r.floor($("x",t,e,n))];case"Log":return[r.log($("x",t,e,n))];case"Log1p":return[r.log1p($("x",t,e,n))];case"Imag":return[r.imag($("x",t,e,n))];case"Neg":return[r.neg($("x",t,e,n))];case"Reciprocal":return[r.reciprocal($("x",t,e,n))];case"Real":return[r.real($("x",t,e,n))];case"Relu":return[r.relu($("x",t,e,n))];case"Round":return[r.round($("x",t,e,n))];case"Selu":return[r.selu($("x",t,e,n))];case"Sigmoid":return[r.sigmoid($("x",t,e,n))];case"Sin":return[r.sin($("x",t,e,n))];case"Sign":return[r.sign($("x",t,e,n))];case"Sinh":return[r.sinh($("x",t,e,n))];case"Softplus":return[r.softplus($("x",t,e,n))];case"Sqrt":return[r.sqrt($("x",t,e,n))];case"Square":return[r.square($("x",t,e,n))];case"Tanh":return[r.tanh($("x",t,e,n))];case"Tan":return[r.tan($("x",t,e,n))];case"ClipByValue":return[r.clipByValue($("x",t,e,n),$("clipValueMin",t,e,n),$("clipValueMax",t,e,n))];case"Relu6":return[r.relu6($("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Ma(t.inputNames[0],e,n))];case"Prod":return[r.prod($("x",t,e,n),$("axes",t,e,n))];case"LeakyRelu":return[r.leakyRelu($("x",t,e,n),$("alpha",t,e,n))];case"Prelu":return[r.prelu($("x",t,e,n),$("alpha",t,e,n))];case"IsNan":return[r.isNaN(Ma(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function po(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){V(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const a=t[r],i=e[r];V(a<0||i<0||a===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function O9(t){return!(typeof t=="number"||t.some(e=>e<0))}function Vg(t,e,n){let r=cT(t,n);const a=!O9(r);if(a&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&e.forEach(i=>{r=cT(i.shape,r)}),!O9(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function cT(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const a=t[r],i=e[r];if(a>=0&&i>=0&&a!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=a>=0?a:i}return n}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Qme{constructor(e,n,r,a,i,o,s){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Ft(0),fs(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),po(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,fs(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,a)=>this.write(r,n[a]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let a=0;a<this.size();a++)e.push(a)}if(e.length===0)return Vo([],[0].concat(this.elementShape));const r=this.readMany(e);return po(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),bs(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Vo([],[0].concat(this.elementShape));const n=[];for(let a=0;a<this.size();a++)n.push(a);const r=this.readMany(n);return po(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),ha(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Nu(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const a=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];Ht(()=>{n=Se(n,[1,r,i]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:a[l-1],0],c=[1,e[l],i];o[l]=Se(xn(n,u,c),this.elementShape)}return o});const s=[];for(let l=0;l<e.length;l++)s[l]=l;this.writeMany(s,o)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class hd{constructor(e,n,r,a=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);po(n,i.shape,"TensorList shape mismatch: "),fs(i)}),this.idTensor=Ft(0),this.maxNumElements=a,fs(this.idTensor)}get id(){return this.idTensor.id}copy(){return new hd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);po(e,this.elementShape,"TensorList shape mismatch: ");const a=Vg(this.elementShape,this.tensors,e);return Ht(()=>{const i=this.tensors.map(o=>Se(o,a));return bs(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Vg(this.elementShape,this.tensors,e),a=this.tensors.pop();return a.kept=!1,po(a.shape,e,"TensorList shape mismatch: "),Se(a,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(po(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");fs(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new hd([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);po(this.tensors[e].shape,n,"TensorList shape mismatch: ");const a=Vg(this.elementShape,this.tensors,n);return Se(this.tensors[e],a)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);po(this.elementShape,n.shape,"TensorList shape mismatch: "),fs(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);po(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const a=Vg(this.elementShape,this.tensors,r);return e.length===0?Vo([],[0].concat(a)):Ht(()=>{const i=e.map(o=>Se(this.tensors[o],a));return bs(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);po(this.elementShape,n,"TensorList shape mismatch: ");const r=Vg(this.elementShape,this.tensors,n);return this.size()===0?Vo([],[0].concat(r)):Ht(()=>{const a=this.tensors.map(i=>Se(i,r));return ha(a,0)})}}function Zme(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const a=t.shape.slice(1);po(a,e,"TensorList shape mismatch: ");const i=Nu(t);return new hd(i,e,r)}function Jme(t,e,n,r){return new hd([],t,e,r)}function ege(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const a=Math.max(...e);if(r!=null&&r!==-1&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const i=new hd([],n,t.dtype,r),o=Nu(t,0);return e.forEach((s,l)=>{i.setItem(s,o[l])}),i}function tge(t,e,n){let r=0;const a=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=cT(i,n),s=r===0?0:t.size/r,l=Ht(()=>{const c=[];t=Se(t,[1,r,s]);for(let d=0;d<e.length;++d){const p=[0,d===0?0:a[d-1],0],f=[1,e[d],s];c[d]=Se(xn(t,p,f),o)}return t.dispose(),c}),u=new hd([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nge=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=$("thenBranch",t,e,n),a=$("elseBranch",t,e,n),i=$("cond",t,e,n),o=$("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=$("body",t,e,n),a=$("cond",t,e,n),i=$("args",t,e,n),o=await n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),s=i.map(c=>c.id);let l=await o[0].data();o.forEach(c=>{!c.kept&&s.indexOf(c.id)===-1&&c.dispose()});let u=i;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const d=u.map(f=>f.id);c.forEach(f=>{!f.kept&&s.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()});const p=await n.functionMap[a].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await p[0].data(),p.forEach(f=>{!f.kept&&s.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()})}return u}case"LoopCond":{const r=$("pred",t,e,n);return[bl(r)]}case"Switch":{const r=$("pred",t,e,n);let a=$("data",t,e,n);return a.kept||(a=bl(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=t.inputNames.find(a=>Ma(a,e,n)!==void 0);if(r){const a=Ma(r,e,n);return[bl(a)]}return}case"Enter":{const r=$("frameName",t,e,n),a=$("tensor",t,e,n);return n.enterFrame(r),[bl(a)]}case"Exit":{const r=$("tensor",t,e,n);return n.exitFrame(),[bl(r)]}case"NextIteration":{const r=$("tensor",t,e,n);return n.nextIteration(),[bl(r)]}case"TensorArrayV3":{const r=$("size",t,e,n),a=$("dtype",t,e,n),i=$("elementShape",t,e,n),o=$("dynamicSize",t,e,n),s=$("clearAfterRead",t,e,n),l=$("identicalElementShapes",t,e,n),u=$("name",t,e,n),c=new Qme(u,a,r,i,l,o,s);return n.addTensorArray(c),[c.idTensor,Ft(1)]}case"TensorArrayWriteV3":{const r=$("tensorArrayId",t,e,n),a=$("index",t,e,n),i=$("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(a,i),[o.idTensor]}case"TensorArrayReadV3":{const r=$("tensorArrayId",t,e,n),a=$("index",t,e,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=$("tensorArrayId",t,e,n),a=$("indices",t,e,n),i=$("dtype",t,e,n);return[n.getTensorArray(r.id).gather(a,i)]}case"TensorArrayScatterV3":{const r=$("tensorArrayId",t,e,n),a=$("indices",t,e,n),i=$("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(a,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=$("tensorArrayId",t,e,n),a=n.getTensorArray(r.id),i=$("dtype",t,e,n);return[a.concat(i)]}case"TensorArraySplitV3":{const r=$("tensorArrayId",t,e,n),a=$("tensor",t,e,n),i=$("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,a),[o.idTensor]}case"TensorArraySizeV3":{const r=$("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return[Ft(a.size(),"int32")]}case"TensorArrayCloseV3":{const r=$("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=$("tensorListId",t,e,n),a=$("index",t,e,n),i=$("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(a,i),[o.idTensor]}case"TensorListGetItem":{const r=$("tensorListId",t,e,n),a=$("index",t,e,n),i=$("elementShape",t,e,n),o=$("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(a,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=$("indices",t,e,n),a=$("tensor",t,e,n),i=$("elementShape",t,e,n),o=$("numElements",t,e,n),s=ege(a,r,i,o);return n.addTensorList(s),[s.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=$("elementShape",t,e,n),a=$("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=$(i,t,e,n),s=t.op==="TensorListReserve"?-1:o,l=Jme(r,a,o,s);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=$("tensorListId",t,e,n),a=$("indices",t,e,n),i=$("elementShape",t,e,n),o=$("elementDType",t,e,n);return[n.getTensorList(r.id).gather(a,o,i)]}case"TensorListStack":{const r=$("tensorListId",t,e,n),a=$("elementShape",t,e,n),i=$("elementDType",t,e,n),o=$("numElements",t,e,n);return[n.getTensorList(r.id).stack(a,i,o)]}case"TensorListFromTensor":{const r=$("tensor",t,e,n),a=$("elementShape",t,e,n),i=$("elementDType",t,e,n),o=Zme(r,a,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=$("tensorListId",t,e,n),a=n.getTensorList(r.id),i=$("dtype",t,e,n),o=$("elementShape",t,e,n);return[a.concat(i,o)]}case"TensorListPushBack":{const r=$("tensorListId",t,e,n),a=$("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(a),[i.idTensor]}case"TensorListPopBack":{const r=$("tensorListId",t,e,n),a=$("elementShape",t,e,n),i=$("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(a,i)]}case"TensorListSplit":{const r=$("tensor",t,e,n),a=$("elementShape",t,e,n),i=$("lengths",t,e,n),o=tge(r,i,a);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=$("tensorListId",t,e,n),a=n.getTensorList(r.id);return[Ft(a.size(),"int32")]}case"TensorListResize":{const r=$("tensorListId",t,e,n),a=$("size",t,e,n),i=n.getTensorList(r.id).resize(a);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function M9(t,e,n){const[r,a]=$("fusedOps",t,e,n),i=r==="biasadd",o=!i,s=a==="prelu",l=r==="fusedbatchnorm",u=$("numArgs",t,e,n);if(i){if(s&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&i&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=$("strides",t,e,n),d=B2(t,e,n),p=$("dataFormat",t,e,n).toUpperCase(),f=$("dilations",t,e,n);let[g,y]=$("args",t,e,n);o&&(y=g,g=void 0);const v=$("leakyreluAlpha",t,e,n);return{stride:c,pad:d,dataFormat:p,dilations:f,biasArg:g,preluArg:y,activationFunc:a,leakyreluAlpha:v}}const rge=(t,e,n,r=fa)=>{switch(t.op){case"Conv1D":{const a=$("stride",t,e,n),i=$("pad",t,e,n),o=$("dataFormat",t,e,n).toUpperCase(),s=$("dilation",t,e,n);return[r.conv1d($("x",t,e,n),$("filter",t,e,n),a,i,o,s)]}case"Conv2D":{const a=$("strides",t,e,n),i=B2(t,e,n),o=$("dataFormat",t,e,n).toUpperCase(),s=$("dilations",t,e,n);return[r.conv2d($("x",t,e,n),$("filter",t,e,n),[a[1],a[2]],i,o,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=M9(t,e,n);return[r.fused.conv2d({x:$("x",t,e,n),filter:$("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=M9(t,e,n);return[r.fused.depthwiseConv2d({x:$("x",t,e,n),filter:$("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const a=$("outputShape",t,e,n),i=$("strides",t,e,n),o=B2(t,e,n);return[r.conv2dTranspose($("x",t,e,n),$("filter",t,e,n),a,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const a=$("strides",t,e,n),i=B2(t,e,n),o=$("dilations",t,e,n),s=$("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d($("input",t,e,n),$("filter",t,e,n),[a[1],a[2]],i,s,[o[1],o[2]])]}case"Conv3D":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("dataFormat",t,e,n).toUpperCase(),s=$("dilations",t,e,n);return[r.conv3d($("x",t,e,n),$("filter",t,e,n),[a[1],a[2],a[3]],i,o,[s[1],s[2],s[3]])]}case"AvgPool":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("kernelSize",t,e,n);return[r.avgPool($("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPool":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("kernelSize",t,e,n);return[r.maxPool($("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("kernelSize",t,e,n),s=$("includeBatchInIndex",t,e,n),{result:l,indexes:u}=r.maxPoolWithArgmax($("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i,s);return[l,u]}case"AvgPool3D":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("kernelSize",t,e,n);return[r.avgPool3d($("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("kernelSize",t,e,n);return[r.maxPool3d($("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{const a=$("strides",t,e,n),i=$("pad",t,e,n),o=$("dilations",t,e,n),s=a[1],l=a[2],u=o[1],c=o[2];return[r.dilation2d($("x",t,e,n),$("filter",t,e,n),[s,l],i,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const age=(t,e,n,r=fa)=>{switch(t.op){case"Fill":{const a=$("shape",t,e,n),i=$("dtype",t,e,n),o=$("value",t,e,n);return[r.fill(a,o,i)]}case"LinSpace":{const a=$("start",t,e,n),i=$("stop",t,e,n),o=$("num",t,e,n);return[r.linspace(a,i,o)]}case"Multinomial":{const a=$("logits",t,e,n),i=$("numSamples",t,e,n),o=$("seed",t,e,n);return[r.multinomial(a,i,o)]}case"OneHot":{const a=$("indices",t,e,n),i=$("depth",t,e,n),o=$("onValue",t,e,n),s=$("offValue",t,e,n),l=$("dtype",t,e,n);return[r.oneHot(a,i,o,s,l)]}case"Ones":return[r.ones($("shape",t,e,n),$("dtype",t,e,n))];case"OnesLike":return[r.onesLike($("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal($("shape",t,e,n),$("dtype",t,e,n),$("seed",t,e,n))];case"RandomUniform":return[r.randomUniform($("shape",t,e,n),$("minval",t,e,n),$("maxval",t,e,n),$("dtype",t,e,n))];case"Range":{const a=$("start",t,e,n),i=$("stop",t,e,n),o=$("step",t,e,n);return[r.range(a,i,o,$("dtype",t,e,n))]}case"TruncatedNormal":{const a=$("shape",t,e,n),i=$("mean",t,e,n),o=$("stdDev",t,e,n),s=$("seed",t,e,n);return[r.truncatedNormal(a,i,o,$("dtype",t,e,n),s)]}case"Zeros":return[r.zeros($("shape",t,e,n),$("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike($("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dT(t,e,n){const r=$("boxes",t,e,n),a=$("scores",t,e,n),i=$("maxOutputSize",t,e,n),o=$("iouThreshold",t,e,n),s=$("scoreThreshold",t,e,n),l=$("softNmsSigma",t,e,n);return{boxes:r,scores:a,maxOutputSize:i,iouThreshold:o,scoreThreshold:s,softNmsSigma:l}}const ige=async(t,e,n,r,a=fa)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=dT(t,e,n),d=await a.image.nonMaxSuppressionWithScoreAsync(i,o,s,l,u,c);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u}=dT(t,e,n),c=$("padToMaxOutputSize",t,e,n),d=await a.image.nonMaxSuppressionPaddedAsync(i,o,s,l,u,c);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u}=dT(t,e,n);return[await a.image.nonMaxSuppressionAsync(i,o,s,l,u)]}case"Where":{const i=a.cast($("condition",t,e,n),"bool"),o=[await a.whereAsync(i)];return i.dispose(),o}case"ListDiff":return a.setdiff1dAsync($("x",t,e,n),$("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const oge=(t,e,n,r=fa)=>{switch(t.op){case"LowerBound":{const a=$("sortedSequence",t,e,n),i=$("values",t,e,n);return[r.lowerBound(a,i)]}case"TopKV2":{const a=$("x",t,e,n),i=$("k",t,e,n),o=$("sorted",t,e,n),s=r.topk(a,i,o);return[s.values,s.indices]}case"UpperBound":{const a=$("sortedSequence",t,e,n),i=$("values",t,e,n);return[r.upperBound(a,i)]}case"Unique":{const a=$("x",t,e,n),i=r.unique(a);return[i.values,i.indices]}case"UniqueV2":{const a=$("x",t,e,n),i=$("axis",t,e,n),o=r.unique(a,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sge=(t,e,n,r=fa)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const a=$("default",t,e,n);return[Ma(t.name,e,n)||a];case"Placeholder":return[Ma(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=$("x",t,e,n);return[bl(c)]}case"IdentityN":return $("x",t,e,n).map(c=>bl(c));case"Snapshot":const i=$("x",t,e,n);return[bl(i)];case"Shape":return[r.tensor1d($("x",t,e,n).shape,"int32")];case"ShapeN":return $("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar($("x",t,e,n).size,"int32")];case"Rank":return[r.scalar($("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=$("x",t,e,n),s=$("data",t,e,n),l=$("message",t,e,n),u=$("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<s.length;c++)console.log(Array.prototype.slice.call(s[c].dataSync()).slice(0,u));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lge{constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=Ft(0),this.tensorMap=new Map,fs(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ft(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(a=>a.dispose()),this.tensorMap.clear(),Ht(()=>{const a=Nu(n),i=r.length,o=a.length;V(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let s=0;s<i;s++){const l=r[s],u=a[s];fs(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return Ht(()=>{const a=[];for(let i=0;i<r.length;i++){const o=r[i],s=this.findWithDefault(o,n);a.push(s)}return bs(a)})}findWithDefault(e,n){return this.tensorMap.get(e)??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const uge=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const a=$("keyDType",t,e,n),i=$("valueDType",t,e,n),o=new lge(a,i);return r.addHashTable(t.name,o),[o.handle]}case"LookupTableImport":case"LookupTableImportV2":{const a=$("tableHandle",t,e,n,r),i=$("keys",t,e,n),o=$("values",t,e,n);return[await r.getHashTableById(a.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const a=$("tableHandle",t,e,n,r),i=$("keys",t,e,n),o=$("defaultValue",t,e,n);return[await r.getHashTableById(a.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=$("tableHandle",t,e,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cge=(t,e,n,r=fa)=>{switch(t.op){case"ResizeBilinear":{const a=$("images",t,e,n),i=$("size",t,e,n),o=$("alignCorners",t,e,n),s=$("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)]}case"ResizeNearestNeighbor":{const a=$("images",t,e,n),i=$("size",t,e,n),o=$("alignCorners",t,e,n),s=$("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],o,s)]}case"CropAndResize":{const a=$("image",t,e,n),i=$("boxes",t,e,n),o=$("boxInd",t,e,n),s=$("cropSize",t,e,n),l=$("method",t,e,n),u=$("extrapolationValue",t,e,n);return[r.image.cropAndResize(a,i,o,s,l,u)]}case"ImageProjectiveTransformV3":{const a=$("images",t,e,n),i=$("transforms",t,e,n),o=$("outputShape",t,e,n),s=$("fillValue",t,e,n),l=$("interpolation",t,e,n),u=$("fillMode",t,e,n);return[r.image.transform(a,i,l.toLowerCase(),u.toLowerCase(),s,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dge=(t,e,n,r=fa)=>{switch(t.op){case"Equal":return[r.equal($("a",t,e,n),$("b",t,e,n))];case"NotEqual":return[r.notEqual($("a",t,e,n),$("b",t,e,n))];case"Greater":return[r.greater($("a",t,e,n),$("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual($("a",t,e,n),$("b",t,e,n))];case"Less":return[r.less($("a",t,e,n),$("b",t,e,n))];case"LessEqual":return[r.lessEqual($("a",t,e,n),$("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd($("a",t,e,n),$("b",t,e,n))];case"LogicalNot":return[r.logicalNot($("a",t,e,n))];case"LogicalOr":return[r.logicalOr($("a",t,e,n),$("b",t,e,n))];case"Select":case"SelectV2":return[r.where($("condition",t,e,n),$("a",t,e,n),$("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pge=(t,e,n,r=fa)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul($("a",t,e,n),$("b",t,e,n),$("transposeA",t,e,n),$("transposeB",t,e,n))];case"Einsum":return[r.einsum($("equation",t,e,n),...$("tensors",t,e,n))];case"Transpose":return[r.transpose($("x",t,e,n),$("perm",t,e,n))];case"_FusedMatMul":const[a,i]=$("fusedOps",t,e,n),o=a==="biasadd",s=i==="prelu",l=$("numArgs",t,e,n),u=$("leakyreluAlpha",t,e,n);if(o){if(s&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,d]=$("args",t,e,n);return[r.fused.matMul({a:$("a",t,e,n),b:$("b",t,e,n),transposeA:$("transposeA",t,e,n),transposeB:$("transposeB",t,e,n),bias:c,activation:i,preluActivationWeights:d,leakyreluAlpha:u})];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hge=(t,e,n,r=fa)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm($("x",t,e,n),$("axis",t,e,n),$("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm($("x",t,e,n),$("mean",t,e,n),$("variance",t,e,n),$("offset",t,e,n),$("scale",t,e,n),$("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm($("x",t,e,n),$("mean",t,e,n),$("variance",t,e,n),$("offset",t,e,n),$("scale",t,e,n),$("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization($("x",t,e,n),$("radius",t,e,n),$("bias",t,e,n),$("alpha",t,e,n),$("beta",t,e,n))];case"Softmax":return[r.softmax($("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax($("x",t,e,n))];case"SparseToDense":return[r.sparseToDense($("sparseIndices",t,e,n),$("outputShape",t,e,n),$("sparseValues",t,e,n),$("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fge=(t,e,n,r=fa)=>{switch(t.op){case"Max":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.max($("x",t,e,n),s,l)]}case"Mean":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.mean($("x",t,e,n),s,l)]}case"Min":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.min($("x",t,e,n),s,l)]}case"Sum":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.sum($("x",t,e,n),s,l)]}case"All":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.all($("x",t,e,n),s,l)]}case"Any":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.any($("x",t,e,n),s,l)]}case"ArgMax":{const s=$("axis",t,e,n);return[r.argMax($("x",t,e,n),s)]}case"ArgMin":{const s=$("axis",t,e,n);return[r.argMin($("x",t,e,n),s)]}case"Prod":{const s=$("axis",t,e,n),l=$("keepDims",t,e,n);return[r.prod($("x",t,e,n),s,l)]}case"Cumprod":{const s=$("axis",t,e,n),l=$("exclusive",t,e,n),u=$("reverse",t,e,n);return[r.cumprod($("x",t,e,n),s,l,u)]}case"Cumsum":{const s=$("axis",t,e,n),l=$("exclusive",t,e,n),u=$("reverse",t,e,n);return[r.cumsum($("x",t,e,n),s,l,u)]}case"Bincount":const a=$("x",t,e,n),i=$("weights",t,e,n),o=$("size",t,e,n);return[r.bincount(a,i,o)];case"DenseBincount":{const s=$("x",t,e,n),l=$("weights",t,e,n),u=$("size",t,e,n),c=$("binaryOutput",t,e,n);return[r.denseBincount(s,l,u,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mge=(t,e,n,r=fa)=>{switch(t.op){case"ConcatV2":case"Concat":{const a=$("n",t,e,n),i=$("axis",t,e,n);let o=$("tensors",t,e,n);return o=o.slice(0,a),[r.concat(o,i)]}case"Gather":{const a=$("x",t,e,n),i=$("indices",t,e,n);return[r.gather(a,r.cast(i,"int32"),0)]}case"GatherV2":{const a=$("axis",t,e,n),i=$("batchDims",t,e,n),o=$("x",t,e,n),s=$("indices",t,e,n);return[r.gather(o,r.cast(s,"int32"),a,i)]}case"Reverse":{const a=$("dims",t,e,n),i=[];for(let s=0;s<a.length;s++)a[s]&&i.push(s);const o=$("x",t,e,n);return[r.reverse(o,i)]}case"ReverseV2":{const a=$("axis",t,e,n),i=$("x",t,e,n);return[r.reverse(i,a)]}case"Slice":{const a=$("begin",t,e,n),i=$("size",t,e,n);return[r.slice($("x",t,e,n),a,i)]}case"StridedSlice":{const a=$("begin",t,e,n),i=$("end",t,e,n),o=$("strides",t,e,n),s=$("beginMask",t,e,n),l=$("endMask",t,e,n),u=$("ellipsisMask",t,e,n),c=$("newAxisMask",t,e,n),d=$("shrinkAxisMask",t,e,n),p=$("x",t,e,n);return[r.stridedSlice(p,a,i,o,s,l,u,c,d)]}case"Pack":return Ht(()=>{const a=$("axis",t,e,n),i=$("tensors",t,e,n),o=i[0].shape,s=r.squeeze(i[0]).shape,l=i.map(u=>{const c=vn(u.shape,o);if(!c&&!vn(r.squeeze(u).shape,s))throw new Error("the input tensors shape does not match");return c?u:r.reshape(u,o)});return[r.stack(l,a)]});case"Unpack":{const a=$("axis",t,e,n),i=$("tensor",t,e,n);return r.unstack(i,a)}case"Tile":{const a=$("reps",t,e,n);return[r.tile($("x",t,e,n),a)]}case"Split":case"SplitV":{const a=$("axis",t,e,n),i=$("numOrSizeSplits",t,e,n),o=$("x",t,e,n);return r.split(o,i,a)}case"ScatterNd":{const a=$("indices",t,e,n),i=$("values",t,e,n),o=$("shape",t,e,n);return[r.scatterND(a,i,o)]}case"GatherNd":{const a=$("x",t,e,n),i=$("indices",t,e,n);return[r.gatherND(a,i)]}case"SparseToDense":{const a=$("sparseIndices",t,e,n),i=$("outputShape",t,e,n),o=$("sparseValues",t,e,n),s=$("defaultValue",t,e,n);return[r.sparseToDense(a,o,i,o.dtype===s.dtype?s:r.cast(s,o.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gge=(t,e,n,r=fa)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:a,outputValues:i,emptyRowIndicator:o,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows($("indices",t,e,n),$("values",t,e,n),$("denseShape",t,e,n),$("defaultValue",t,e,n));return[a,i,o,s]}case"SparseReshape":{const{outputIndices:a,outputShape:i}=r.sparse.sparseReshape($("inputIndices",t,e,n),$("inputShape",t,e,n),$("newShape",t,e,n));return[a,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean($("data",t,e,n),$("indices",t,e,n),$("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum($("data",t,e,n),$("indices",t,e,n),$("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yge=(t,e,n,r=fa)=>{switch(t.op){case"FFT":return[r.fft($("x",t,e,n))];case"IFFT":return[r.ifft($("x",t,e,n))];case"RFFT":return[r.rfft($("x",t,e,n))];case"IRFFT":return[r.irfft($("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const bge=(t,e,n,r=fa)=>{switch(t.op){case"StringNGrams":{const{nGrams:a,nGramsSplits:i}=r.string.stringNGrams($("data",t,e,n),$("dataSplits",t,e,n),$("separator",t,e,n),$("nGramWidths",t,e,n),$("leftPad",t,e,n),$("rightPad",t,e,n),$("padWidth",t,e,n),$("preserveShortSequences",t,e,n));return[a,i]}case"StringSplit":{const{indices:a,values:i,shape:o}=r.string.stringSplit($("input",t,e,n),$("delimiter",t,e,n),$("skipEmpty",t,e,n));return[a,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast($("input",t,e,n),$("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vge=(t,e,n,r=fa)=>{switch(t.op){case"Cast":return[r.cast($("x",t,e,n),$("dtype",t,e,n))];case"ExpandDims":{const a=$("axis",t,e,n);return[r.expandDims($("x",t,e,n),a)]}case"Squeeze":{const a=$("axis",t,e,n);return[r.squeeze($("x",t,e,n),a)]}case"Reshape":return[r.reshape($("x",t,e,n),$("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad($("x",t,e,n),$("padding",t,e,n),$("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad($("x",t,e,n),$("padding",t,e,n),$("constantValue",t,e,n))];case"SpaceToBatchND":{const a=$("blockShape",t,e,n),i=$("paddings",t,e,n);return[r.spaceToBatchND($("x",t,e,n),a,i)]}case"BatchToSpaceND":{const a=$("blockShape",t,e,n),i=$("crops",t,e,n);return[r.batchToSpaceND($("x",t,e,n),a,i)]}case"DepthToSpace":{const a=$("blockSize",t,e,n),i=$("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace($("x",t,e,n),a,i)]}case"BroadcastTo":return[r.broadcastTo($("x",t,e,n),$("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs($("s0",t,e,n),$("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function P9(t,e,n,r,a=Ht){const i=((o,s,l)=>{switch(o.category){case"arithmetic":return a(()=>Xme(o,s,l));case"basic_math":return a(()=>Yme(o,s,l));case"control":return nge(o,s,l);case"convolution":return a(()=>rge(o,s,l));case"creation":return a(()=>age(o,s,l));case"dynamic":return ige(o,s,l);case"evaluation":return a(()=>oge(o,s,l));case"image":return a(()=>cge(o,s,l));case"graph":return a(()=>sge(o,s,l));case"logical":return a(()=>dge(o,s,l));case"matrices":return a(()=>pge(o,s,l));case"normalization":return a(()=>hge(o,s,l));case"reduction":return a(()=>fge(o,s,l));case"slice_join":return a(()=>mge(o,s,l));case"sparse":return a(()=>gge(o,s,l));case"spectral":return a(()=>yge(o,s,l));case"string":return a(()=>bge(o,s,l));case"transformation":return a(()=>vge(o,s,l));case"hash_table":return uge(o,s,l,r);case"custom":const u=N9(o.op);if(u&&u.customExecutor)return u.customExecutor(new Kme(o,s,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Bc(i)?i.then(o=>[].concat(o)):[].concat(i)}class A9{constructor(e={},n={},r={},a={}){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function D9(t,e,n,r){const a=new Set,i=[];let o=null,s=null;const l=new Set,u=Object.keys(t).map(p=>mi(p)[0]);let c=[];r!=null&&(c=r.map(p=>mi(p.name)[0]));const d=[...e];for(;d.length>0;){const p=d.pop();if((L9(p)||Cge(p)||Ige(p))&&o==null&&(o=p,s=o.children.map(f=>f.name).filter(f=>a.has(f))),a.add(p.name),n[p.name]==null&&u.indexOf(p.name)===-1&&c.indexOf(p.name)===-1){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),d.push(f))})}}return{inputs:t,outputs:e,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}function xge(t,e,n){const{usedNodes:r,inputs:a}=n,i=[],o=Object.keys(a).map(c=>mi(c)[0]).map(c=>t.nodes[c]),s=t.initNodes;o.forEach(c=>{r.has(c.name)&&i.push(c)}),t.weights.forEach(c=>{r.has(c.name)&&i.push(c)}),s?.forEach(c=>{r.has(c.name)&&i.push(c)});const l=new Set,u=[];for(;i.length>0;){const c=i.pop();l.add(c.name),e[c.name]||u.push(c),c.children.forEach(d=>{!l.has(d.name)&&r.has(d.name)&&d.inputs.every(p=>l.has(p.name))&&i.push(d)})}return u}const wge=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],kge=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],Sge=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function L9(t){return wge.indexOf(t.op)>=0}function Cge(t){return kge.indexOf(t.op)>=0}function Ige(t){return Sge.indexOf(t.op)>=0}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Mw{constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new Mw(e.functions[r],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(a=>a.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),a=n.map(i=>i.name).sort();return r.join(this.SEPERATOR)+"--"+a.join(this.SEPERATOR)}compile(e,n){const r=D9(e,n,this.weightMap,this._initNodes),{missingInputs:a,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(a.length>0){const s=n.map(u=>u.name),l=Object.keys(e);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs [${l}]. Missing the following inputs: [${a}]`)}return xge(this.graph,this.weightMap,r)}execute(e,n){e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const a=r.map(d=>this.graph.nodes[mi(d)[0]]),i=n.map(d=>mi(d)[0]);let o=i.map(d=>this.graph.nodes[d]);this.resetIntermediateTensors(),o.length===0&&(o=this._outputs);const s=this.getCompilationKey(a,o);let l=this.compiledMap.get(s);l==null&&(l=this.compile(e,o),this.compiledMap.set(s,l));const u={},c={};return Ht(()=>{const d=new A9(this.weightMap,u,c,this.functionExecutorMap),p=Object.assign({},this.weightMap);Object.keys(e).forEach(y=>{const[v,b]=mi(y),x=[];x[b]=e[y],p[v]=x});const f=this.getFrozenTensorIds(p),g={};for(let y=0;y<l.length;y++){const v=l[y];if(!p[v.name]){const b=P9(v,p,d,this._resourceManager);if(Bc(b))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);p[v.name]=b,this.checkTensorForDisposal(v.name,v,p,d,f,i,g)}}return this.parent==null&&d.dispose(f),n.map(y=>Ma(y,p,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(a=>a.id)));return new Set(n)}checkTensorForDisposal(e,n,r,a,i,o,s){n.category==="control"||o.indexOf(e)!==-1||(r[e].forEach(l=>{l!=null&&(s[l.id]=(s[l.id]||0)+n.children.length)}),n.inputs.forEach(l=>{if(l.category!=="control"){const u=lme(l.name,r,a);u?.forEach(c=>{if(c&&!c.kept&&!i.has(c.id)){const d=s[c.id];if(d===1){if(!this.keepTensorForDebug)c.dispose();else{const[p,f]=xs(n.name,a);this.intermediateTensors[p]?this.intermediateTensors[p][f]=c:(this.intermediateTensors[p]=[],this.intermediateTensors[p][f]=c)}delete s[c.id]}else d!=null&&s[c.id]--}})}}))}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach(e=>this.intermediateTensors[e].forEach(n=>n.dispose())),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach(e=>{this.tensorsMap[e].forEach(n=>{n&&!n.kept&&!n.isDisposed&&!this.keepIds.has(n.id)&&n.dispose()})})}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach(n=>n.dispose()),delete this.intermediateTensors[e]}async _executeAsync(e,n,r=!1,a={},i={}){r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=fe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(c){console.warn(c.message)}this.resetIntermediateTensors();const o=new A9(this.weightMap,a,i,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,o,n,r);const s=n.map(c=>Ma(c,this.tensorsMap,o)),l=s.map(c=>c.id),u=Object.keys(e).map(c=>e[c].id);return this.keepIds=new Set([...l,...u,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),this.parent==null&&o.dispose(this.keepIds),s}async executeFunctionAsync(e,n,r){const a=e.reduce((i,o,s)=>(i[this.inputs[s].name]=o,i),{});return this._executeAsync(a,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,a){const i=Object.keys(e),o=i.map(w=>this.graph.nodes[mi(w)[0]]),s=r.map(w=>mi(w)[0]);let l=s.map(w=>this.graph.nodes[w]);l.length===0&&(l=this._outputs);const{usedNodes:u,missingInputs:c,dynamicNode:d,syncInputs:p}=D9(e,l,this.weightMap,this._initNodes),f=[...o,...this.graph.weights,...this._initNodes||[]].map(w=>({node:w,contexts:n.currentContext})),g=Object.assign({},this.weightMap);Object.keys(e).forEach(w=>{const[S,C]=mi(w),I=[];I[C]=e[w],g[S]=I});const y={},v=this.getFrozenTensorIds(g),b={};for(;f.length>0;){const w=this.processStack(o,f,n,g,b,v,s,y,u);await Promise.all(w)}d==null&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const x=l.filter(w=>!L9(w)&&!Ma(w.name,g,n)).map(w=>w.name);if(x.length>0){let w="";throw d!=null&&(w=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${x}] from the provided inputs [${i}]. Consider providing the following inputs: [${c}]. ${w}`)}return g}processStack(e,n,r,a,i,o,s,l,u){const c=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let p="";if(d.node.op==="Enter"&&$("isConstant",d.node,a,r)&&([p]=xs(d.node.name,r)),a[d.node.name]==null){const f=P9(d.node,a,r,this._resourceManager);p||([p]=xs(d.node.name,r));const g=r.currentContext;Bc(f)?c.push(f.then(y=>(a[p]=y,r.currentContext=g,this.checkTensorForDisposal(p,d.node,a,r,o,s,l),this.processChildNodes(d.node,n,r,a,i,u),y))):(a[p]=f,this.checkTensorForDisposal(p,d.node,a,r,o,s,l),this.processChildNodes(d.node,n,r,a,i,u))}else this.processChildNodes(d.node,n,r,a,i,u)}return c}processChildNodes(e,n,r,a,i,o){e.children.forEach(s=>{const[l]=xs(s.name,r);i[l]||!o.has(s.name)||(s.op==="Merge"?s.inputNames.some(u=>!!Ma(u,a,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})):s.inputNames.every(u=>!!Ma(u,a,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[a]=mi(n),i=this.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((l,u)=>o[u]===-1||o[u]===l);V(s,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&V(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){const n={};for(const r in e)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[r]!=null){const a=this._signature.inputs[r];n[a.name]=e[r]}else n[r]=e[r];return n}checkInputs(e){const n=Object.keys(e).filter(r=>{const[a]=mi(r);return this.graph.nodes[a]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>this._signature!=null&&this._signature.outputs!=null&&this._signature.outputs[n]!=null?this._signature.outputs[n].name:n,{})}checkOutputs(e){e.forEach(n=>{const[r]=mi(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class Ege{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Nge="?tfjs-format=file",Tge="model.json";class _ge{constructor(e,n={},r=IN){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Ege}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Bc(e)?e.then(n=>this.loadSync(n)):this.loadSync(e)}loadSync(e){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(r=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;const a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Mw(T9.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=T9.Instance.transformGraph(e.modelInitializer);this.initializer=new Mw(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,n){const r=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){const a=r instanceof Hn?[r]:r,i={};return a.forEach((o,s)=>i[this.structuredOutputKeys[s]]=o),i}return r}normalizeInputs(e){if(!(e instanceof Hn)&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((n,r,a)=>(n[r]=e[a],n),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function Rge(t,e={},n=IN){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=$ge(t));const r=new _ge(t,e,n);return await r.load(),r}function $ge(t){return t.endsWith("/")||(t=t+"/"),`${t}${Tge}${Nge}`}/**
* @license
* Copyright 2023 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
* @license
* Copyright 2023 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function z2(t,e,n,r){return new(n||(n=Promise))(function(a,i){function o(u){try{l(r.next(u))}catch(c){i(c)}}function s(u){try{l(r.throw(u))}catch(c){i(c)}}function l(u){u.done?a(u.value):new n(function(c){c(u.value)}).then(o,s)}l((r=r.apply(t,e||[])).next())})}function j2(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!((a=a.length>0&&a[a.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(c[0]===6&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(d){c=[6,d],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Oge="https://tfhub.dev/tensorflow/tfjs-model/deeplab",Mge=513,pT={ADE20K:[[0,0,0],[120,120,120],[180,120,120],[6,230,230],[80,50,50],[4,200,3],[120,120,80],[140,140,140],[204,5,255],[230,230,230],[4,250,7],[224,5,255],[235,255,7],[150,5,61],[120,120,70],[8,255,51],[255,6,82],[143,255,140],[204,255,4],[255,51,7],[204,70,3],[0,102,200],[61,230,250],[255,6,51],[11,102,255],[255,7,71],[255,9,224],[9,7,230],[220,220,220],[255,9,92],[112,9,255],[8,255,214],[7,255,224],[255,184,6],[10,255,71],[255,41,10],[7,255,255],[224,255,8],[102,8,255],[255,61,6],[255,194,7],[255,122,8],[0,255,20],[255,8,41],[255,5,153],[6,51,255],[235,12,255],[160,150,20],[0,163,255],[140,140,140],[250,10,15],[20,255,0],[31,255,0],[255,31,0],[255,224,0],[153,255,0],[0,0,255],[255,71,0],[0,235,255],[0,173,255],[31,0,255],[11,200,200],[255,82,0],[0,255,245],[0,61,255],[0,255,112],[0,255,133],[255,0,0],[255,163,0],[255,102,0],[194,255,0],[0,143,255],[51,255,0],[0,82,255],[0,255,41],[0,255,173],[10,0,255],[173,255,0],[0,255,153],[255,92,0],[255,0,255],[255,0,245],[255,0,102],[255,173,0],[255,0,20],[255,184,184],[0,31,255],[0,255,61],[0,71,255],[255,0,204],[0,255,194],[0,255,82],[0,10,255],[0,112,255],[51,0,255],[0,194,255],[0,122,255],[0,255,163],[255,153,0],[0,255,10],[255,112,0],[143,255,0],[82,0,255],[163,255,0],[255,235,0],[8,184,170],[133,0,255],[0,255,92],[184,0,255],[255,0,31],[0,184,255],[0,214,255],[255,0,112],[92,255,0],[0,224,255],[112,224,255],[70,184,160],[163,0,255],[153,0,255],[71,255,0],[255,0,163],[255,204,0],[255,0,143],[0,255,235],[133,255,0],[255,0,235],[245,0,255],[255,0,122],[255,245,0],[10,190,212],[214,255,0],[0,204,255],[20,0,255],[255,255,0],[0,153,255],[0,41,255],[0,255,204],[41,0,255],[41,255,0],[173,0,255],[0,245,255],[71,0,255],[122,0,255],[0,255,184],[0,92,255],[184,255,0],[0,133,255],[255,214,0],[25,194,194],[102,255,0],[92,0,255]],CITYSCAPES:[[128,64,128],[244,35,232],[70,70,70],[102,102,156],[190,153,153],[153,153,153],[250,170,30],[220,220,0],[107,142,35],[152,251,152],[70,130,180],[220,20,60],[255,0,0],[0,0,142],[0,0,70],[0,60,100],[0,80,100],[0,0,230],[119,11,32]],PASCAL:[[0,0,0],[128,0,0],[0,128,0],[128,128,0],[0,0,128],[128,0,128],[0,128,128],[128,128,128],[64,0,0],[192,0,0],[64,128,0],[192,128,0],[64,0,128],[192,0,128],[64,128,128],[192,128,128],[0,64,0],[128,64,0],[0,192,0],[128,192,0],[0,64,128],[128,64,128],[0,192,128],[128,192,128],[64,64,0],[192,64,0],[64,192,0],[192,192,0],[64,64,128],[192,64,128],[64,192,128],[192,192,128],[0,0,64],[128,0,64],[0,128,64],[128,128,64],[0,0,192],[128,0,192],[0,128,192],[128,128,192],[64,0,64],[192,0,64],[64,128,64],[192,128,64],[64,0,192],[192,0,192],[64,128,192],[192,128,192],[0,64,64],[128,64,64],[0,192,64],[128,192,64],[0,64,192],[128,64,192],[0,192,192],[128,192,192],[64,64,64],[192,64,64],[64,192,64],[192,192,64],[64,64,192],[192,64,192],[64,192,192],[192,192,192],[32,0,0],[160,0,0],[32,128,0],[160,128,0],[32,0,128],[160,0,128],[32,128,128],[160,128,128],[96,0,0],[224,0,0],[96,128,0],[224,128,0],[96,0,128],[224,0,128],[96,128,128],[224,128,128],[32,64,0],[160,64,0],[32,192,0],[160,192,0],[32,64,128],[160,64,128],[32,192,128],[160,192,128],[96,64,0],[224,64,0],[96,192,0],[224,192,0],[96,64,128],[224,64,128],[96,192,128],[224,192,128],[32,0,64],[160,0,64],[32,128,64],[160,128,64],[32,0,192],[160,0,192],[32,128,192],[160,128,192],[96,0,64],[224,0,64],[96,128,64],[224,128,64],[96,0,192],[224,0,192],[96,128,192],[224,128,192],[32,64,64],[160,64,64],[32,192,64],[160,192,64],[32,64,192],[160,64,192],[32,192,192],[160,192,192],[96,64,64],[224,64,64],[96,192,64],[224,192,64],[96,64,192],[224,64,192],[96,192,192],[224,192,192],[0,32,0],[128,32,0],[0,160,0],[128,160,0],[0,32,128],[128,32,128],[0,160,128],[128,160,128],[64,32,0],[192,32,0],[64,160,0],[192,160,0],[64,32,128],[192,32,128],[64,160,128],[192,160,128],[0,96,0],[128,96,0],[0,224,0],[128,224,0],[0,96,128],[128,96,128],[0,224,128],[128,224,128],[64,96,0],[192,96,0],[64,224,0],[192,224,0],[64,96,128],[192,96,128],[64,224,128],[192,224,128],[0,32,64],[128,32,64],[0,160,64],[128,160,64],[0,32,192],[128,32,192],[0,160,192],[128,160,192],[64,32,64],[192,32,64],[64,160,64],[192,160,64],[64,32,192],[192,32,192],[64,160,192],[192,160,192],[0,96,64],[128,96,64],[0,224,64],[128,224,64],[0,96,192],[128,96,192],[0,224,192],[128,224,192],[64,96,64],[192,96,64],[64,224,64],[192,224,64],[64,96,192],[192,96,192],[64,224,192],[192,224,192],[32,32,0],[160,32,0],[32,160,0],[160,160,0],[32,32,128],[160,32,128],[32,160,128],[160,160,128],[96,32,0],[224,32,0],[96,160,0],[224,160,0],[96,32,128],[224,32,128],[96,160,128],[224,160,128],[32,96,0],[160,96,0],[32,224,0],[160,224,0],[32,96,128],[160,96,128],[32,224,128],[160,224,128],[96,96,0],[224,96,0],[96,224,0],[224,224,0],[96,96,128],[224,96,128],[96,224,128],[224,224,128],[32,32,64],[160,32,64],[32,160,64],[160,160,64],[32,32,192],[160,32,192],[32,160,192],[160,160,192],[96,32,64],[224,32,64],[96,160,64],[224,160,64],[96,32,192],[224,32,192],[96,160,192],[224,160,192],[32,96,64],[160,96,64],[32,224,64],[160,224,64],[32,96,192],[160,96,192],[32,224,192],[160,224,192],[96,96,64],[224,96,64],[96,224,64],[224,224,64],[96,96,192],[224,96,192],[96,224,192],[224,224,192]]},hT={PASCAL:["background","aeroplane","bicycle","bird","boat","bottle","bus","car","cat","chair","cow","dining table","dog","horse","motorbike","person","potted plant","sheep","sofa","train","TV"],CITYSCAPES:["road","sidewalk","building","wall","fence","pole","traffic light","traffic sign","vegetation","terrain","sky","person","rider","car","truck","bus","train","motorcycle","bicycle"],ADE20K:["background","wall","building","sky","floor","tree","ceiling","road","bed","windowpane","grass","cabinet","sidewalk","person","earth","door","table","mountain","plant","curtain","chair","car","water","painting","sofa","shelf","house","sea","mirror","rug","field","armchair","seat","fence","desk","rock","wardrobe","lamp","bathtub","railing","cushion","base","box","column","signboard","chest","counter","sand","sink","skyscraper","fireplace","refrigerator","grandstand","path","stairs","runway","case","pool","pillow","screen","stairway","river","bridge","bookcase","blind","coffee","toilet","flower","book","hill","bench","countertop","stove","palm","kitchen","computer","swivel","boat","bar","arcade","hovel","bus","towel","light","truck","tower","chandelier","awning","streetlight","booth","television","airplane","dirt","apparel","pole","land","bannister","escalator","ottoman","bottle","buffet","poster","stage","van","ship","fountain","conveyer","canopy","washer","plaything","swimming","stool","barrel","basket","waterfall","tent","bag","minibike","cradle","oven","ball","food","step","tank","trade","microwave","pot","animal","bicycle","lake","dishwasher","screen","blanket","sculpture","hood","sconce","vase","traffic","tray","ashcan","fan","pier","screen","plate","monitor","bulletin","shower","radiator","glass","clock","flag"]};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pge(t,e){return""+Oge+"/"+(e===4?t+"/1/default/1/model.json":t+"/1/quantized/"+e+"/1/model.json")+"?tfjs-format=file"}function Age(t){if(t==="pascal")return pT.PASCAL;if(t==="ade20k")return pT.ADE20K;if(t==="cityscapes")return pT.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function Dge(t){if(t==="pascal")return hT.PASCAL;if(t==="ade20k")return hT.ADE20K;if(t==="cityscapes")return hT.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function Lge(t,e,n,r){return z2(this,void 0,void 0,function(){var a,i,o,s,l,u,c,d,p,f,g,y,v,b;return j2(this,function(x){switch(x.label){case 0:if(t.length<e.length)throw new Error("The colormap must be expansive enough to encode each label. Aborting, since the given colormap has length "+t.length+", but there are "+e.length+" labels.");return a=n.shape,i=a[0],o=a[1],s=St([i,o,3],"int32"),[4,n.array()];case 1:for(l=x.sent(),u=new Set,c=0;c<i;++c)for(d=0;d<o;++d)b=l[c][d],u.add(b),s.set(t[b][0],c,d,0),s.set(t[b][1],c,d,1),s.set(t[b][2],c,d,2);return p=s.toTensor(),[4,x8(p,r)];case 2:for(f=x.sent(),da(p),g={},y=0,v=Array.from(u);y<v.length;y++)b=v[y],g[e[b]]=t[b];return[2,{legend:g,segmentationMap:f}]}})})}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fge(t){return t===void 0&&(t={base:"pascal",quantizationBytes:2}),z2(this,void 0,void 0,function(){var e;return j2(this,function(n){switch(n.label){case 0:if(ime==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(t.base){if(["pascal","cityscapes","ade20k"].indexOf(t.base)===-1)throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t.base+". Try one of 'pascal', 'cityscapes' and 'ade20k'.");if([1,2,4].indexOf(t.quantizationBytes)===-1)throw new Error("Only quantization to 1, 2 or 4 bytes is supported.")}else if(!t.modelUrl)throw new Error("SemanticSegmentation can be constructed either by passing the weights URL or one of the supported base model names from 'pascal', 'cityscapes' and 'ade20k',together with the degree of quantization (either 1, 2 or 4).Aborting, since neither has been provided.");return[4,Rge(t.modelUrl||Pge(t.base,t.quantizationBytes))];case 1:return e=n.sent(),[2,new Bge(e,t.base)]}})})}var Bge=function(){function t(e,n){this.model=e,this.base=n}return t.prototype.predict=function(e){var n=this;return Ht(function(){var r=Bn(function(a){return Ht(function(){var i=a instanceof Hn?a:w8(a),o=i.shape,s=o[0],l=o[1],u=Mge/Math.max(l,s),c=Math.round(s*u),d=Math.round(l*u);return ml(_4.resizeBilinear(i,[c,d]))})}(e),"int32");return Lg(n.model.execute(r))})},t.prototype.segment=function(e,n){return n===void 0&&(n={}),z2(this,void 0,void 0,function(){var r,a,i,o,s,l,u,c,d,p,f=this;return j2(this,function(g){switch(g.label){case 0:if(!(n.colormap&&n.labels||this.base))throw new Error("Calling the 'segment' method requires either the 'base' attribute to be defined (e.g. 'pascal', 'cityscapes' or'ade20k'), or 'colormap' and 'labels' options to be set. Aborting, since neither has been provided.");return n.colormap&&n.labels||(n.colormap=Age(this.base),n.labels=Dge(this.base)),r=n.colormap,a=n.labels,i=n.canvas,o=Ht(function(){return f.predict(e)}),s=o.shape,l=s[0],u=s[1],[4,Lge(r,a,o,i)];case 1:return c=g.sent(),d=c.legend,p=c.segmentationMap,da(o),[2,{legend:d,height:l,width:u,segmentationMap:p}]}})})},t.prototype.dispose=function(){return z2(this,void 0,void 0,function(){return j2(this,function(e){return this.model&&this.model.dispose(),[2]})})},t}();/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ge(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&V(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zge=k2;class Pw extends lv{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new T3(this,pl())}nextDataId(){return Pw.nextDataId++}write(e,n,r){this.firstUse&&(this.firstUse=!1,fe().get("IS_NODE")&&Mi(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:r,refCount:1}),a}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&ds(r[0])){const i=r.map(o=>ps(o));a=this.write(i,e,n)}else a=this.write(r,e,n);return{dataId:a,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,a,i){this.data.set(e,{values:n,dtype:a,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return yl(a,i)}return this.data.get(e).values}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>ll(a));return St(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return St(e.shape,e.dtype,n)}makeOutput(e,n,r){return pl().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=di();return e(),{kernelMs:di()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ge([e],"where");const n=this.readSync(e.dataId);return zge(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Pw.nextDataId=0;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function F9(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const jge=t=>{const{x:e}=t.inputs,n=t.backend;Ge(e,"abs");let r=new Float32Array(be(e.shape));const a=n.data.get(e.dataId).values;return r=F9(a),n.makeOutput(r,e.shape,e.dtype)},Vge={kernelName:fv,backendName:"cpu",kernelFunc:jge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vr(t){return(e,n,r,a,i)=>{const o=zt(e,n),s=o.length,l=Ze(o),u=be(o),c=Er(i,u),d=e.length,p=n.length,f=Ze(e),g=Ze(n),y=qc(e,o),v=qc(n,o);if(y.length+v.length===0)for(let b=0;b<c.length;++b)c[b]=t(r[b%r.length],a[b%a.length]);else for(let b=0;b<c.length;++b){const x=Fc(b,s,l),w=x.slice(-d);y.forEach(_=>w[_]=0);const S=Bo(w,d,f),C=x.slice(-p);v.forEach(_=>C[_]=0);const I=Bo(C,p,g);c[b]=t(r[S],a[I])}return[c,o]}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gi(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(s.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}const Uge={kernelName:Ev,backendName:"cpu",kernelFunc:gi};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function V2(t,e,n="float32"){if(n==="complex64"){const a=V2(t,e,"float32"),i=V2(t,e,"float32");return gi({inputs:{real:a,imag:i},backend:t})}const r=Xr(be(e),n);return t.makeTensorInfo(e,n,r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ws(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Gge={kernelName:Om,backendName:"cpu",kernelFunc:ws};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function td(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const Wge={kernelName:Cx,backendName:"cpu",kernelFunc:td};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function B9(t,e,n,r){if(r==="int32"){const a=Int32Array.from(t);return[e,"int32",a]}if(r==="bool"){const a=bu([0],n),[i,o]=vr((s,l)=>s!==l?1:0)(e,[],t,a,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Ru(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return ws({inputs:{x:a},backend:n});const c=V2(n,a.shape,a.dtype),d=Ru({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),p=gi({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),p}if(a.dtype==="complex64"){const c=td({inputs:{input:a},backend:n}),d=Ru({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),d}if(!$3(a.dtype,i)){const c=ws({inputs:{x:a},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:i}}const o=n.data.get(a.dataId).values,[s,l,u]=B9(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,l,u)}const Hge={kernelName:ym,backendName:"cpu",kernelFunc:Ru};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zr(t,e,n,r){return n==null?({inputs:a,backend:i})=>{const{a:o,b:s}=a,l=i;Ge([o,s],t);const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,d=o.dtype==="string"?ed(u):u,p=o.dtype==="string"?ed(c):c,f=r||o.dtype,[g,y]=e(o.shape,s.shape,d,p,f);return l.makeTensorInfo(y,f,g)}:({inputs:a,backend:i})=>{const{a:o,b:s}=a,l=i;if(o.dtype==="complex64"||s.dtype==="complex64"){const u=Ru({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,p=c.complexTensorInfos.imag,f=l.data.get(d.dataId).values,g=l.data.get(p.dataId).values,y=Ru({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(y.dataId),b=v.complexTensorInfos.real,x=v.complexTensorInfos.imag,w=l.data.get(b.dataId).values,S=l.data.get(x.dataId).values,[C,I,_]=n(o.shape,s.shape,f,g,w,S),T=l.makeTensorInfo(_,"float32",C),M=l.makeTensorInfo(_,"float32",I),P=gi({inputs:{real:T,imag:M},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(y),l.disposeIntermediateTensorInfo(T),l.disposeIntermediateTensorInfo(M),P}else{const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,d=r||o.dtype,[p,f]=e(o.shape,s.shape,u,c,d);return l.makeTensorInfo(f,d,p)}}}function fT(t){return(e,n,r,a,i,o)=>{const s=zt(e,n),l=be(s),u=s.length,c=Ze(s),d=Er("float32",l),p=Er("float32",l),f=qc(e,s),g=qc(n,s),y=yl(r,a),v=yl(i,o),b=e.length,x=Ze(e),w=n.length,S=Ze(n);if(f.length+g.length===0)for(let C=0;C<d.length;C++){const I=C%y.length,_=C%v.length,T=t(y[I*2],y[I*2+1],v[_*2],v[_*2+1]);d[C]=T.real,p[C]=T.imag}else for(let C=0;C<d.length;C++){const I=Fc(C,u,c),_=I.slice(-b);f.forEach(j=>_[j]=0);const T=Bo(_,b,x),M=I.slice(-w);g.forEach(j=>M[j]=0);const P=Bo(M,w,S),L=t(y[T*2],y[T*2+1],v[P*2],v[P*2+1]);d[C]=L.real,p[C]=L.imag}return[d,p,s]}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const z9=vr((t,e)=>t+e),qge=fT((t,e,n,r)=>({real:t+n,imag:e+r})),Yp=zr(_p,z9,qge),Kge={kernelName:_p,backendName:"cpu",kernelFunc:Yp};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mT(t,e,n,r,a){const i=be(r),o=Xr(a,n);for(let s=0;s<t.length;s++){const l=t[s];if(l<0)throw new Error("Input x must be non-negative!");l>=a||(i>0?o[l]+=e[s]:o[l]+=1)}return o}function j9(t,e,n,r=!1){const a=t.shape[0],i=t.shape[1],o=St([a,n],e.dtype);for(let s=0;s<a;s++)for(let l=0;l<i;l++){const u=t.get(s,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,s,u):e.size>0?o.set(o.get(s,u)+e.get(s,l),s,u):o.set(o.get(s,u)+1,s,u))}return o}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $u(t){return(e,n,r)=>{const a=Er(n,e.length);for(let i=0;i<e.length;++i)a[i]=t(e[i],r);return a}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pn(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:o}=r;if(Ge(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const s=i,l=s.data.get(o.dataId).values,u=be(o.shape),c=n||o.dtype,d=Nr(c,u);for(let p=0;p<u;++p)d[p]=e(l[p],a);return s.makeTensorInfo(o.shape,c,d)}}function Qp(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:o}=r;if(Ge(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const s=i,l=s.data.get(o.dataId).values,u=n||o.dtype,c=e(l,u,a);return s.makeTensorInfo(o.shape,u,c)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const V9=$u(t=>Math.ceil(t)),Xge=Qp(bm,V9),Yge={kernelName:bm,backendName:"cpu",kernelFunc:Xge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function U9(t,e,n,r){const a=Nr(n,be(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const s=be(o.shape);a.set(o.vals,i),i+=s})}else{let i=0;t.forEach(o=>{const s=n==="string"?ed(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const c=u*e[1]+i;for(let d=0;d<o.shape[1];++d)a[c+d]=s[l++]}i+=o.shape[1]})}return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const G9=vr((t,e)=>t===e?1:0),W9=zr(Im,G9,null,"bool"),Qge={kernelName:Im,backendName:"cpu",kernelFunc:W9};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const H9=$u(t=>Math.exp(t)),q9=Qp(Em,H9,"float32"),Zge={kernelName:Em,backendName:"cpu",kernelFunc:q9};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const K9=$u(t=>Math.expm1(t)),Jge=Qp(Nm,K9),e0e={kernelName:Nm,backendName:"cpu",kernelFunc:Jge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const X9=$u(t=>Math.floor(t)),t0e=Qp(Tm,X9),n0e={kernelName:Tm,backendName:"cpu",kernelFunc:t0e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Y9(t,e,n,r,a,i,o,s,l){const u=St([r,i],n);for(let c=0;c<r;c++){const d=[];let p=0;for(let f=0;f<a;f++){const g=t[c*a+f];p+=g*o[f],d.push(g)}if(p<0||p>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${s}`);for(let f=0;f<i;f++)u.values[c*i+f]=e.get(...e.indexToLoc(p*i+f))}return u}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Q9(t,e,n){const r=St(n,t.dtype);for(let a=0;a<r.size;++a){const i=r.indexToLoc(a).slice(),o=i[0],s=i[2],l=e.locToIndex([o,s]);i[2]=e.values[l];const u=t.locToIndex(i);0<=u&&u<t.values.length&&(r.values[a]=t.values[u])}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Z9=vr((t,e)=>t>e?1:0),r0e=zr(Rm,Z9,null,"bool"),a0e={kernelName:Rm,backendName:"cpu",kernelFunc:r0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const J9=vr((t,e)=>t>=e?1:0),i0e=zr($m,J9,null,"bool"),o0e={kernelName:$m,backendName:"cpu",kernelFunc:i0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const e7=vr((t,e)=>t<e?1:0),s0e=zr(Dm,e7,null,"bool"),l0e={kernelName:Dm,backendName:"cpu",kernelFunc:s0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const t7=vr((t,e)=>t<=e?1:0),u0e=zr(Lm,t7,null,"bool"),c0e={kernelName:Lm,backendName:"cpu",kernelFunc:u0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function n7(t,e,n){const r=(e-t)/(n-1),a=Xr(n,"float32");a[0]=t;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r7=$u(t=>Math.log(t)),d0e=Qp(Fm,r7),p0e={kernelName:Fm,backendName:"cpu",kernelFunc:d0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function a7(t,e,n,r){const a=Er(r,be(n));for(let i=0;i<a.length;++i){const o=i*e;let s=t[o];for(let l=0;l<e;++l){const u=t[o+l];(Number.isNaN(u)||u>s)&&(s=u)}a[i]=s}return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const i7=vr((t,e)=>Math.max(t,e)),h0e=zr(Um,i7),f0e={kernelName:Um,backendName:"cpu",kernelFunc:h0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const o7=vr((t,e)=>Math.min(t,e)),m0e=zr(Gm,o7),g0e={kernelName:Gm,backendName:"cpu",kernelFunc:m0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gT=vr((t,e)=>t*e),y0e=fT((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),U2=zr(Hm,gT,y0e),b0e={kernelName:Hm,backendName:"cpu",kernelFunc:U2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function s7(t,e,n){const r=sl(-1,n);return gT([],e,r,t,n)}function v0e(t){const{inputs:e,backend:n}=t,{x:r}=e;Ge(r,"neg");const a=n.data.get(r.dataId).values,[i,o]=s7(a,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const x0e={kernelName:dx,backendName:"cpu",kernelFunc:v0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const l7=vr((t,e)=>t!==e?1:0),w0e=zr(qm,l7,null,"bool"),k0e={kernelName:qm,backendName:"cpu",kernelFunc:w0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yT(t,e,n,r,a){const i=e.length,o=be(e),s=Ze(e),l=Ze(a),u=Er(n,be(a));for(let c=0;c<o;++c){const d=Fc(c,i,s),p=new Array(d.length);for(let g=0;g<p.length;g++)p[g]=d[r[g]];const f=Bo(p,i,l);u[f]=t[c]}return u}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ya(t){const{inputs:e,attrs:n,backend:r}=t,{x:a}=e,{perm:i}=n;Ge(a,"transpose");const o=a.shape.length,s=new Array(o);for(let c=0;c<s.length;c++)s[c]=a.shape[i[c]];const l=r.data.get(a.dataId).values,u=yT(l,a.shape,a.dtype,i,s);return{dataId:r.write(u,s,a.dtype),shape:s,dtype:a.dtype}}const S0e={kernelName:Rp,backendName:"cpu",kernelFunc:Ya};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function u7(t,e,n,r){const[a,i]=Yr(t,r),o=Xa(e,"int32"),s=Xr(be(a),o),l=be(i);for(let u=0;u<s.length;++u){const c=u*l;let d=1;for(let p=0;p<l;++p)d*=n[c+p];s[u]=d}return{outVals:s,outShape:a,outDtype:o}}function C0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;Ge(a,"prod");const s=a.shape.length,l=Xt(i,a.shape),u=dr(l,s);let c=l,d=a;const p=[];u!=null&&(d=Ya({inputs:{x:a},backend:n,attrs:{perm:u}}),p.push(d),c=pr(c.length,s));const f=n.data.get(d.dataId).values,{outVals:g,outShape:y,outDtype:v}=u7(d.shape,d.dtype,f,c);let b=y;return o&&(b=_r(y,l)),p.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(b,v,g)}const I0e={kernelName:xx,backendName:"cpu",kernelFunc:C0e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function E0e(t,e,n){t.forEach((r,a)=>{if(r<0||r>=n){const i=Fc(a,e.length,Ze(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function N0e(t,e){for(let n=0;n<t.length;++n){const r=t[n],a=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function T0e(t,e,n,r){const a=[];let i=0;const o=e.length-1+n.length,s=new Array(o).fill(null).map(()=>[0]);N0e(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let d=1;d<l+1;++d)s[u].push(d*c)}for(let u=0;u<t.length;++u){let c=t[u],d=t[u]+1;for(let p=0;p<n.length;++p){const f=n[p],g=p+e.length-1;if(g>=0){const y=s[g],v=y[y.length-1]-f[c];for(let b=c;b<d;++b)s[g].push(f[b+1]+v)}c=f[c],d=f[d]}d!==c&&(a.push([c,d]),i+=d-c)}return{outSplits:s,valueSlices:a,numValues:i}}function _0e(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,a=Nr("int32",r);e.push(a),t[n].forEach((i,o)=>a[o]=i)}return e}function c7(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function R0e(t,e,n,r,a,i){const o=c7(e,2)[1],s=c7(i,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let d=0;d<r;++d)a[l*s+d]=t[c*o+d];++l}}function $0e(t,e,n,r,a){const i=e.slice();i[0]=a;const o=Nr(n,be(i)),s=t.length,l=s===0?0:s/e[0];return R0e(t,e,r,l,o,i),[o,i]}function d7(t,e,n,r,a,i,o,s){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(E0e(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:d,numValues:p}=T0e(i,o,t,u),f=_0e(c),g=$0e(n,r,a,d,p);return[f,g[0],g[1]]}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var ho=Uo;class Aw{constructor(e,n,r,a,i,o,s,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=e9(c),this.raggedRank=t9(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===ho.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===ho.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case ho.VALUE_ROWIDS:return Aw.getMaxWidthValueRowID(n);case ho.ROW_SPLITS:return Aw.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${ho[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let a=0;a<n-1;++a){const i=e[a+1]-e[a];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,a=e[0],i=0;for(let o=1;o<n;++o){const s=e[o];s!==a&&(a=s,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return h7(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;n9(r,n);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=JF(this.raggedRank,a,n);i[0]<0&&(i[0]=e);for(let o=1;o<=this.raggedRank;++o)i[o]<0&&(i[o]=this.getMaxWidth(o));return i}calculateFirstParentOutputIndex(e,n,r){const a=Math.min(e,r),i=[];let o=0;for(let s=0;s<a;++s,o+=n)i.push(o);for(let s=a;s<e;++s)i.push(-1);return V(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,a){const i=e.length,o=[];for(let s=0;s<i-1;++s){const l=e[s+1]-e[s];let u=Math.min(a,l),c=n[s];c===-1&&(u=0);for(let d=0;d<u;++d)o.push(c),c+=r;for(let d=0;d<l-u;++d)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,a){const i=e.length,o=[];if(i===0)return[];let s=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];o.push(u);for(let c=1;c<i;++c){const d=e[c];if(d===l)u>=0&&(++s,s<a?u+=r:u=-1);else{if(s=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,a){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case ho.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,a);case ho.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,a);default:throw new Error(`Unsupported partition type: ${ho[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case ho.FIRST_DIM_SIZE:return e[0];case ho.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ho.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${ho[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),n=this.calculateOutputSize(e),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let o=r.length-2;o>=0;--o)r[o]=r[o+1]*n[o+1];const a=h7(n,!1),i=Nr(this.valuesDType,be(a));if(r[0]*n[0]>0){let o=this.calculateFirstParentOutputIndex(e,r[0],n[0]);for(let s=1;s<=this.raggedRank;++s)o=this.calculateOutputIndex(s-1,o,r[s],n[s]);this.setOutput(this.raggedRank,o,i,a)}return[a,i]}setOutput(e,n,r,a){if(r.length===0)return;const i=this.values,o=r;let s=a.slice();s=s.slice(e+1);const l=be(s),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const g=this.defaultValueShape;Ht(()=>{const y=Se(c,g);c=zp(y,s).dataSync()})}let d=0,p=0,f=0;for(let g=0;g<=u;++g){let y=g<u?n[g]:-1;if(y===f){++f;continue}if(p<f){const v=i.subarray(d*l),b=o.subarray(p*l),x=(f-p)*l;p7(b,v,x)}if(g>=u){const v=r.length;y=Math.floor(v/l)}if(y>f)if(this.defaultValue.length===1)o.subarray(f*l,y*l).fill(this.defaultValue[0]),f=y;else for(;y>f;){const v=o.slice(f*l);p7(v,c,l),++f}y<0?(d=g+1,p=f):(d=g,p=f,f=p+1)}}}function p7(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function h7(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function f7(t,e,n,r,a,i,o,s,l,u){return new Aw(t,e,n,r,a,i,o,s,l,u).compute()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m7(t,e,n,r){const a=t===e,i=t<e&&n<0,o=e<t&&n>1;if(a||i||o)return Xr(0,r);const s=Math.abs(Math.ceil((e-t)/n)),l=Xr(s,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const g7=$u(t=>1/Math.sqrt(t)),O0e=Qp(Jm,g7),M0e={kernelName:Jm,backendName:"cpu",kernelFunc:O0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zp(t,e,n,r,a,i,o,s,l,u){const c=[r/a,a],d=t.values,p=e.values;if(r===0)return St(n,e.dtype);const f=St(c,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let g=0;g<i;g++){const y=[];let v=0;for(let b=0;b<o;b++){const x=d[g*o+b];y.push(x),v+=x*s[b]}if(v<0||v>=r/a)throw new Error(`Invalid indices: ${y} does not index into ${n}`);for(let b=0;b<a;b++)u?f.values[v*a+b]+=p[g*a+b]:f.values[v*a+b]=e.rank===0?p[0]:p[g*a+b]}return f}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const P0e=$u(t=>1/(1+Math.exp(-t))),y7=pn(ag,t=>1/(1+Math.exp(-t))),A0e={kernelName:ag,backendName:"cpu",kernelFunc:y7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b7(t,e,n,r,a){const i=PN(r,e,n),o=be(n),s=Ze(r);if(i){const d=AN(e,s);return a==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=a==="string"?ed(t):t,u=St(r,a,l),c=St(n,a);for(let d=0;d<c.size;++d){const p=c.indexToLoc(d),f=p.map((g,y)=>g+e[y]);c.set(u.get(...f),...p)}return a==="string"?C9(c.values):c.values}function nd(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:o}=r;Ge(a,"slice");const[s,l]=DN(a,i,o);ON(a,s,l);const u=n.data.get(a.dataId).values,c=b7(u,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,c)}const D0e={kernelName:Ox,backendName:"cpu",kernelFunc:nd};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function v7(t,e,n,r,a,i,o){const s=e[0],l=i[0],u=new Array(l),c=new Array(s),d=e[1];if(l===0){if(s!==0)throw new Error(d9(s));const v=Nr(n,0),b=Nr(a,0);return[v,[0,d],b,u,c]}let p=!0,f=0;const g=new Array(l).fill(0);for(let v=0;v<s;++v){const b=t[v*d];if(b<0)throw new Error(p9(v,b));if(b>=l)throw new Error(h9(v,b,l));++g[b],p=p&&b>=f,f=b}let y=!0;for(let v=0;v<l;++v){const b=g[v]===0;u[v]=b,y=y&&!b,g[v]=Math.max(g[v],1),v>0&&(g[v]+=g[v-1])}if(y&&p){const v=t,b=r;for(let x=0;x<s;++x)c[x]=x;return[v,[s,d],b,u,c]}else{const v=g[l-1],b=Nr(n,v*d),x=Nr(a,v),w=new Array(l).fill(0);for(let S=0;S<s;++S){const C=t[S*d],I=w[C],_=(C===0?0:g[C-1])+I;w[C]++;for(let T=0;T<d;++T)b[_*d+T]=t[S*d+T];x[_]=r[S],c[S]=_}for(let S=0;S<l;++S)if(w[S]===0){const C=S===0?0:g[S-1];b[C*d+0]=S;for(let I=1;I<d;++I)b[C*d+I]=0;x[C]=o}return[b,[v,d],x,u,c]}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function x7(t,e,n,r,a){const i=be(r),o=e[0],s=a.length,l=[];let u=1,c=-1;for(let y=0;y<s;++y){const v=a[y];if(v===-1){if(c!==-1)throw new Error(f9(c,y));c=y,l.push(1)}else{if(v<0)throw new Error(m9(y,v));u*=v,l.push(v)}}if(c!==-1){if(u<=0)throw new Error(g9());const y=Math.trunc(i/u);if(u*y!==i)throw new Error(y9(r,l));l[c]=y}if(be(l)!==i)throw new Error(b9(r,l));const d=r.length,p=[];if(d>0){p[d-1]=1;for(let y=d-2;y>=0;--y)p[y]=p[y+1]*r[y+1]}const f=[];if(s>0){f[s-1]=1;for(let y=s-2;y>=0;--y)f[y]=f[y+1]*l[y+1]}const g=Nr(n,o*s);for(let y=0;y<o;++y){let v=0;for(let b=0;b<d;++b)v+=t[y*d+b]*p[b];for(let b=0;b<s;++b)g[y*s+b]=Math.trunc(v/f[b]),v%=f[b]}return[g,[o,s],l]}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bT(t,e,n,r,a,i=!1,o=0){const s=r.length,l=[e[0],t.length/e[0]],u=l[1],c=s>0?a[s-1]+1:0;if(c<0)throw new Error(Q4());const d=e.slice();d[0]=c;const p=d.reduce((x,w)=>x*w,1),f=Nr(n,p);if(s===0)return c>0&&f.fill(o),[f,d];if(c<=0)throw new Error(Q4());let g=0,y=1,v=0,b=a[g];for(;;){let x=0;if(y<s){if(x=a[y],b===x){++y;continue}if(b>=x)throw new Error(v9())}if(b<0||b>=c)throw new Error(x9(b,c));b>v&&f.fill(o,v*u,b*u);for(let w=g;w<y;++w){const S=r[w];if(S<0||S>=l[0])throw new Error(w9(w,r[w],l[0]));for(let C=0;C<u;C++)f[b*u+C]+=t[S*u+C]}if(i)for(let w=0;w<u;w++)f[b*u+w]/=y-g;if(g=y,++y,v=b+1,b=x,y>s)break}return v<c&&f.fill(o,v*u,c*u),[f,d]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const L0e=$u(t=>Math.sqrt(t)),F0e=pn(og,t=>Math.sqrt(t)),B0e={kernelName:og,backendName:"cpu",kernelFunc:F0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const w7=vr((t,e)=>{const n=t-e;return n*n}),z0e=zr(sg,w7),j0e={kernelName:sg,backendName:"cpu",kernelFunc:z0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function k7(t,e,n,r){const a=St(t,e.dtype);for(let i=0;i<a.size;i++){const o=a.indexToLoc(i),s=new Array(o.length);for(let l=0;l<s.length;l++)s[l]=o[l]*n[l]+r[l];a.set(e.get(...s),...o)}return a}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class V0e{constructor(e,n,r,a,i,o){this.separator=ps(e),this.nGramWidths=n,this.leftPad=ps(r),this.rightPad=ps(a),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,a,i,o){for(let s=0;s<i;++s){const l=this.getPadWidth(o),u=Math.max(0,l-s),c=Math.max(0,l-(i-(s+1))),d=o-(u+c),p=n+(u>0?0:s-l);let f=0;f+=u*this.leftPad.length;for(let x=0;x<d;++x)f+=e[p+x].length;f+=c*this.rightPad.length;const g=u+c+d-1;f+=g*this.separator.length,r[a+s]=new Uint8Array(f);const y=r[a+s];let v=0;const b=x=>x.forEach(w=>y[v++]=w);for(let x=0;x<u;++x)b(this.leftPad),b(this.separator);for(let x=0;x<d-1;++x)b(e[p+x]),b(this.separator);if(d>0){b(e[p+d-1]);for(let x=0;x<c;++x)b(this.separator),b(this.rightPad)}else{for(let x=0;x<c-1;++x)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(e,n){const r=e.length,a=n.length;if(a>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<a;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=a-1,o=Nr("int32",a);if(r===0||a===0){const l=new Array(r);for(let u=0;u<=i;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),o[l]=o[l-1]+c}const s=new Array(o[i]);for(let l=0;l<i;++l){const u=n[l];let c=o[l];if(this.nGramWidths.forEach(d=>{const p=n[l+1]-n[l],f=this.getNumNGrams(p,d);this.createNGrams(e,u,s,c,f,d),c+=f}),this.preserveShort&&c===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const p=d+2*this.padWidth;this.createNGrams(e,u,s,c,1,p)}}return[s,o]}}function S7(t,e,n,r,a,i,o,s){return new V0e(n,r,a,i,o,s).compute(t,e)}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function U0e(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const s=t.subarray(0,o);(!n||s.length!==0)&&r.push(s),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let a=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(a,i);(!n||o.length!==0)&&r.push(o),a=i+1}}function C7(t,e,n){const r=t.length,a=[];let i=0,o=0;const s=new Array(r);for(let p=0;p<r;++p){const f=a.length;U0e(t[p],e,n,a);const g=a.length-f;s[p]=g,i+=g,o=Math.max(o,g)}const l=Nr("int32",i*2),u=new Array(i),c=[r,o];let d=0;for(let p=0;p<r;++p)for(let f=0;f<s[p];++f)l[d*2]=p,l[d*2+1]=f,u[d]=a[d],++d;return[l,u,c]}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function I7(t,e){const n=Nr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=GD(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const E7=vr((t,e)=>t-e),G0e=fT((t,e,n,r)=>({real:t-n,imag:e-r})),vT=zr(lg,E7,G0e),W0e={kernelName:lg,backendName:"cpu",kernelFunc:vT};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function N7(t,e){const n=new Array(t.rank);for(let a=0;a<n.length;a++)n[a]=t.shape[a]*e[a];const r=St(n,t.dtype);for(let a=0;a<r.values.length;++a){const i=r.indexToLoc(a),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const s=t.locToIndex(o);r.values[a]=t.values[s]}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ug=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function T7(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const s=r-n+1,l=e-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(s-c)/s)*Math.sign(l-s/2),p=Math.max(n,Math.floor(e-l*c/s+d)),f=Math.min(r,Math.floor(e+(s-l)*c/s+d));T7(t,e,p,f)}const a=t[e];let i=n,o=r;for(al(t,n,e),Ug(t[r],a)>0&&al(t,n,r);i<o;){for(al(t,i,o),i++,o--;Ug(t[i],a)<0;)i=i+1;for(;Ug(t[o],a)>0;)o=o-1}Ug(t[n],a)===0?al(t,n,o):(o=o+1,al(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function _7(t,e,n,r,a){const i=e[e.length-1],[o,s]=[t.length/i,i],l=Er(n,o*r),u=Er("int32",o*r);for(let d=0;d<o;d++){const p=d*s,f=t.subarray(p,p+s);let g=new Array(f.length);f.forEach((x,w)=>g[w]={value:x,index:w}),r<g.length&&(T7(g,r),g=g.slice(0,r)),a&&g.sort(Ug);const y=d*r,v=l.subarray(y,y+r),b=u.subarray(y,y+r);for(let x=0;x<r;x++)v[x]=g[x].value,b[x]=g[x].index}const c=e.slice();return c[c.length-1]=r,[St(c,n,l),St(c,"int32",u)]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function R7(t,e,n,r){const a=Xt(e,n)[0],i=[1,n[0],1];for(let g=0;g<a;g++)i[0]*=n[g];i[1]=n[a];for(let g=a+1;g<n.length;g++)i[2]*=n[g];const o={},s=new Int32Array(n[a]),l=new Tr(i,r,t),u=[],c=i[0]===1&&i[2]===1;for(let g=0;g<n[a];g++){let y;if(c)y=t[g].toString();else{const v=[];for(let b=0;b<i[0];b++)for(let x=0;x<i[2];x++)v.push(l.get(b,g,x));y=v.join(",")}if(o[y]!==void 0)s[g]=o[y];else{const v=Object.keys(o).length;o[y]=v,s[g]=v,u.push(g)}}const d=i.slice();d[1]=Object.keys(o).length;const p=new Tr(d,r);u.forEach((g,y)=>{for(let v=0;v<i[0];v++)for(let b=0;b<i[2];b++)p.set(l.get(v,g,b),v,y,b)});const f=n.slice();return f[a]=d[1],{outputValues:p.values,outputShape:f,indices:s}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const H0e=Object.freeze(Object.defineProperty({__proto__:null,addImpl:z9,bincountImpl:mT,bincountReduceImpl:j9,castImpl:B9,ceilImpl:V9,concatImpl:U9,equalImpl:G9,expImpl:H9,expm1Impl:K9,floorImpl:X9,gatherNdImpl:Y9,gatherV2Impl:Q9,greaterEqualImpl:J9,greaterImpl:Z9,lessEqualImpl:t7,lessImpl:e7,linSpaceImpl:n7,logImpl:r7,maxImpl:a7,maximumImpl:i7,minimumImpl:o7,multiplyImpl:gT,negImpl:s7,notEqualImpl:l7,prodImpl:u7,raggedGatherImpl:d7,raggedTensorToTensorImpl:f7,rangeImpl:m7,rsqrtImpl:g7,scatterImpl:Zp,sigmoidImpl:P0e,simpleAbsImpl:F9,sliceImpl:b7,sparseFillEmptyRowsImpl:v7,sparseReshapeImpl:x7,sparseSegmentReductionImpl:bT,sqrtImpl:L0e,squaredDifferenceImpl:w7,stridedSliceImpl:k7,stringNGramsImpl:S7,stringSplitImpl:C7,stringToHashBucketFastImpl:I7,subImpl:E7,tileImpl:N7,topKImpl:_7,transposeImpl:yT,uniqueImpl:R7},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/EN("cpu",()=>new Pw,1);/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $7=pn(Sm,t=>t>=0?t:Math.exp(t)-1),q0e={kernelName:Sm,backendName:"cpu",kernelFunc:$7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function O7(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r;Ge([a],"leakyRelu");const o=be(a.shape),s=n.data.get(a.dataId).values,l=Er("float32",o);for(let u=0;u<s.length;u++)l[u]=s[u]<0?i*s[u]:s[u];return n.makeTensorInfo(a.shape,"float32",l)}const K0e={kernelName:ex,backendName:"cpu",kernelFunc:O7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const X0e=vr((t,e)=>t<0?e*t:t);function M7(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e;Ge([r,a],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,[s,l]=X0e(r.shape,a.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",s)}const Y0e={kernelName:vx,backendName:"cpu",kernelFunc:M7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const P7=pn(Ym,t=>Math.max(0,t)),Q0e={kernelName:Ym,backendName:"cpu",kernelFunc:P7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A7=pn(Qm,t=>Math.min(Math.max(0,t),6)),Z0e={kernelName:Qm,backendName:"cpu",kernelFunc:A7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function G2(t,e,n,r,a){if(n==="linear")return ws({inputs:{x:e},backend:t});if(n==="relu")return P7({inputs:{x:e},backend:t});if(n==="elu")return $7({inputs:{x:e},backend:t});if(n==="relu6")return A7({inputs:{x:e},backend:t});if(n==="prelu")return M7({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return O7({inputs:{x:e},backend:t,attrs:{alpha:a}});if(n==="sigmoid")return y7({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nn(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,o=be(a.shape),s=R3(i,o),l=be(s);V(o===l,()=>`The new shape (${s}) has ${l} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);const u=n.data.get(a.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}const J0e={kernelName:Ix,backendName:"cpu",kernelFunc:Nn};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function D7(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:o,transposeB:s}=r;Ge([a,i],"matMul");const l=a.shape.length,u=i.shape.length,c=o?a.shape[l-2]:a.shape[l-1],d=s?i.shape[u-1]:i.shape[u-2],p=o?a.shape[l-1]:a.shape[l-2],f=s?i.shape[u-2]:i.shape[u-1],g=a.shape.slice(0,-2),y=i.shape.slice(0,-2),v=be(g),b=be(y),x=zt(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,f]);V(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${a.shape} and ${i.shape} and transposeA=${o} and transposeB=${s} must match.`);const w=o?[v,c,p]:[v,p,c],S=s?[b,f,d]:[b,d,f],C=Nn({inputs:{x:a},backend:n,attrs:{shape:w}}),I=Nn({inputs:{x:i},backend:n,attrs:{shape:S}}),_=o?C.shape[1]:C.shape[2],T=o?C.shape[2]:C.shape[1],M=s?I.shape[1]:I.shape[2],P=Math.max(v,b),L=n.data.get(C.dataId).values,j=n.data.get(I.dataId).values,B=Ze(C.shape),K=Ze(I.shape),[X,Z,H]=o?[B[0],1,B[1]]:[B[0],B[1],1],[F,Y,Q]=s?[1,K[1],K[0]]:[K[1],1,K[0]],ne=T*M,se=St([P,T,M],C.dtype),pe=se.values,de=n.blockSize;for(let ie=0;ie<P;ie++)for(let xe=0;xe<T;xe+=de)for(let q=0;q<M;q+=de)for(let oe=0;oe<_;oe+=de){const he=Math.min(xe+de,T),Ie=Math.min(q+de,M),Ee=Math.min(oe+de,_);for(let _e=xe;_e<he;_e++)for(let Fe=q;Fe<Ie;Fe++){let Xe=0;for(let Oe=oe;Oe<Ee;Oe++){const lt=Math.min(ie,v-1)*X,Je=Math.min(ie,b-1)*Q,nt=L[lt+_e*Z+Oe*H],et=j[Oe*F+Fe*Y+Je];Xe+=nt*et}pe[ie*ne+(_e*M+Fe)]+=Xe}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(I),n.makeTensorInfo(x,se.dtype,se.values)}const e1e={kernelName:kv,backendName:"cpu",kernelFunc:D7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function t1e(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;let p,f,g;const y=[];p=D7({inputs:{a,b:i},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(f=Yp({inputs:{a:p,b:o},backend:n}),y.push(p),p=f),c&&(g=G2(n,p,c,s,d),y.push(p),p=g);for(const v of y)n.disposeIntermediateTensorInfo(v);return p}const n1e={kernelName:hg,backendName:"cpu",kernelFunc:t1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r1e=pn(cm,t=>Math.acos(t)),a1e={kernelName:cm,backendName:"cpu",kernelFunc:r1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const i1e=pn(dm,t=>Math.acosh(t)),o1e={kernelName:dm,backendName:"cpu",kernelFunc:i1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function s1e(t){const{inputs:e,backend:n}=t,r=e;Ge(e,"addN");const a=r.map(s=>n.data.get(s.dataId).values),i=St(r[0].shape,r[0].dtype),o=i.values;for(let s=0;s<r.length;s++){const l=a[s];for(let u=0;u<o.length;u++)o[u]+=l[u]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const l1e={kernelName:mv,backendName:"cpu",kernelFunc:s1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function u1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;Ge(a,"all");const s=Xt(i,a.shape);let l=s;const u=dr(l,a.shape.length);let c=a;u!=null&&(c=Ya({inputs:{x:a},backend:n,attrs:{perm:u}}),l=pr(l.length,a.shape.length)),Qr("all",l,c.shape.length);const[d,p]=Yr(c.shape,l),f=be(p),g=Xr(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<g.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];w=w&&C}g[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,g);if(o){const b=_r(d,s),x=Nn({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const c1e={kernelName:gv,backendName:"cpu",kernelFunc:u1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function d1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;Ge(a,"any");const s=Xt(i,a.shape);let l=s;const u=dr(l,a.shape.length);let c=a;u!=null&&(c=Ya({inputs:{x:a},backend:n,attrs:{perm:u}}),l=pr(l.length,a.shape.length)),Qr("any",l,c.shape.length);const[d,p]=Yr(c.shape,l),f=be(p),g=Xr(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<g.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];w=w||C}g[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,g);if(o){const b=_r(d,s),x=Nn({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const p1e={kernelName:yv,backendName:"cpu",kernelFunc:d1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;Ge(a,"argMax");let o=Xt(i,a.shape);const s=dr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=Ya({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=pr(o.length,l.shape.length)),o=[o[0]],Qr("argMax",o,l.shape.length);const[c,d]=Yr(l.shape,o),p=be(c),f=Xr(p,"int32"),g=be(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const b=v*g;let x=y[b],w=0;for(let S=0;S<g;++S){const C=y[b+S];C>x&&(x=C,w=S)}f[v]=w}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",f)}const f1e={kernelName:bv,backendName:"cpu",kernelFunc:h1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;Ge(a,"argMin");let o=Xt(i,a.shape);const s=dr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=Ya({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=pr(o.length,l.shape.length)),o=[o[0]],Qr("argMin",o,l.shape.length);const[c,d]=Yr(l.shape,o),p=be(c),f=Xr(p,"int32"),g=be(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const b=v*g;let x=y[b],w=0;for(let S=0;S<g;++S){const C=y[b+S];C<x&&(x=C,w=S)}f[v]=w}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",f)}const g1e={kernelName:vv,backendName:"cpu",kernelFunc:m1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const y1e=pn(pm,t=>Math.asin(t)),b1e={kernelName:pm,backendName:"cpu",kernelFunc:y1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const v1e=pn(hm,t=>Math.asinh(t)),x1e={kernelName:hm,backendName:"cpu",kernelFunc:v1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const w1e=pn(fm,t=>Math.atan(t)),k1e={kernelName:fm,backendName:"cpu",kernelFunc:w1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const S1e=vr((t,e)=>Math.atan2(t,e)),C1e=zr(gm,S1e),I1e={kernelName:gm,backendName:"cpu",kernelFunc:C1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const E1e=pn(mm,t=>Math.atanh(t)),N1e={kernelName:mm,backendName:"cpu",kernelFunc:E1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xT(t,e,n,r,a,i){const o=a.strideHeight,s=a.strideWidth,l=a.dilationHeight,u=a.dilationWidth,c=a.effectiveFilterHeight,d=a.effectiveFilterWidth,p=a.padInfo.top,f=a.padInfo.left,g=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=St(a.outShape,n),v=y.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],x=a.outShape[2]*a.outShape[3],w=a.outShape[3];for(let S=0;S<a.batchSize;++S){const C=S*b,I=S*r[0];for(let _=0;_<a.inChannels;++_)for(let T=0;T<a.outHeight;++T){const M=T*o-p,P=Math.max(0,M),L=Math.min(a.inHeight,c+M),j=C+T*x;for(let B=0;B<a.outWidth;++B){const K=B*s-f,X=Math.max(0,K),Z=Math.min(a.inWidth,d+K);let H=g,F=0,Y=0;for(let ne=P;ne<L;ne+=l){const se=I+ne*r[1];for(let pe=X;pe<Z;pe+=u){const de=se+pe*r[2],ie=t[de+_];i==="max"&&ie>H?H=ie:i==="avg"&&(F+=ie,Y++)}if(isNaN(H))break}const Q=j+B*w+_;v[Q]=i==="avg"?F/Y:H}}}return y}function L7(t,e,n,r,a=!1,i=!1){const o=St(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=r.padInfo.top,g=r.padInfo.left,y=St(e,n,t);for(let v=0;v<r.batchSize;++v)for(let b=0;b<r.inChannels;++b)for(let x=0;x<r.outHeight;++x){const w=x*s-f;let S=w;for(;S<0;)S+=u;const C=Math.min(r.inHeight,d+w);for(let I=0;I<r.outWidth;++I){const _=I*l-g;let T=_;for(;T<0;)T+=c;const M=Math.min(r.inWidth,p+_);let P=Number.NEGATIVE_INFINITY,L=-1;for(let j=S;j<C;j+=u){const B=j-w;for(let K=T;K<M;K+=c){const X=K-_,Z=y.get(v,j,K,b);Z>P&&(P=Z,a?L=i?((v*r.inHeight+j)*r.inWidth+K)*r.inChannels+b:(j*r.inWidth+K)*r.inChannels+b:L=B*p+X)}}o.set(L,v,x,I,b)}}return o}function F7(t,e,n,r,a,i){const o=a.strideDepth,s=a.strideHeight,l=a.strideWidth,u=a.dilationDepth,c=a.dilationHeight,d=a.dilationWidth,p=a.effectiveFilterDepth,f=a.effectiveFilterHeight,g=a.effectiveFilterWidth,y=a.padInfo.front,v=a.padInfo.top,b=a.padInfo.left,x=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=St(a.outShape,n),S=w.values,C=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],I=a.outShape[2]*a.outShape[3]*a.outShape[4],_=a.outShape[3]*a.outShape[4],T=a.outShape[4];for(let M=0;M<a.batchSize;++M){const P=M*C,L=M*r[0];for(let j=0;j<a.inChannels;++j)for(let B=0;B<a.outDepth;++B){const K=B*o-y;let X=K;for(;X<0;)X+=u;const Z=Math.min(a.inDepth,p+K),H=P+B*I;for(let F=0;F<a.outHeight;++F){const Y=F*s-v;let Q=Y;for(;Q<0;)Q+=c;const ne=Math.min(a.inHeight,f+Y),se=H+F*_;for(let pe=0;pe<a.outWidth;++pe){const de=pe*l-b;let ie=de;for(;ie<0;)ie+=d;const xe=Math.min(a.inWidth,g+de),q=se+pe*T;let oe=x,he=0,Ie=0;for(let _e=X;_e<Z;_e+=u){const Fe=L+_e*r[1];for(let Xe=Q;Xe<ne;Xe+=c){const Oe=Fe+Xe*r[2];for(let lt=ie;lt<xe;lt+=d){const Je=Oe+lt*r[3],nt=t[Je+j];if(i==="max"&&nt>oe?oe=nt:i==="avg"&&(he+=nt,Ie++),isNaN(oe))break}if(isNaN(oe))break}if(isNaN(oe))break}const Ee=q+j;S[Ee]=i==="avg"?he/Ie:oe}}}}return w}function T1e(t,e){const n=St(e.outShape,"int32"),r=e.strideDepth,a=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.front,f=e.padInfo.top,g=e.padInfo.left;for(let y=0;y<e.batchSize;++y)for(let v=0;v<e.inChannels;++v)for(let b=0;b<e.outDepth;++b){const x=b*r-p;let w=x;for(;w<0;)w+=o;const S=Math.min(e.inDepth,u+x);for(let C=0;C<e.outHeight;++C){const I=C*a-f;let _=I;for(;_<0;)_+=s;const T=Math.min(e.inHeight,c+I);for(let M=0;M<e.outWidth;++M){const P=M*i-g;let L=P;for(;L<0;)L+=l;const j=Math.min(e.inWidth,d+P);let B=Number.NEGATIVE_INFINITY,K=-1;for(let X=w;X<S;X+=o){const Z=X-x;for(let H=_;H<T;H+=s){const F=H-I;for(let Y=L;Y<j;Y+=l){const Q=Y-P,ne=t.get(y,X,H,Y,v);ne>=B&&(B=ne,K=Z*c*d+F*c+Q)}}}n.set(K,y,b,C,M,v)}}}return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;Ge(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(pa(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=oo(a.shape,i,o,u,s,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&vn(c.inShape,c.outShape))d=ws({inputs:{x:a},backend:n});else{const p=n.data.get(a.dataId).values,f=Ze(a.shape),g=xT(p,a.shape,a.dtype,f,c,"avg");d=n.makeTensorInfo(c.outShape,a.dtype,g.values)}return d}const R1e={kernelName:xv,backendName:"cpu",kernelFunc:_1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;Ge(a,"avgPool3d");const c=hl(a.shape,i,o,1,s,l,u),d=n.data.get(a.dataId).values,p=F7(d,a.shape,a.dtype,Ze(a.shape),c,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const O1e={kernelName:wv,backendName:"cpu",kernelFunc:$1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function M1e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;Ge([a,i],"avgPool3DGrad");const c=hl(i.shape,o,s,1,l,u),d=c.strideDepth,p=c.strideHeight,f=c.strideWidth,g=c.filterDepth,y=c.filterHeight,v=c.filterWidth,b=c.dilationDepth,x=c.dilationHeight,w=c.dilationWidth,S=c.effectiveFilterDepth,C=c.effectiveFilterHeight,I=c.effectiveFilterWidth,_=S-1-c.padInfo.front,T=I-1-c.padInfo.left,M=C-1-c.padInfo.top,P=St(i.shape,"float32"),L=1/(g*y*v),j=n.bufferSync(a);for(let B=0;B<c.batchSize;++B)for(let K=0;K<c.inChannels;++K)for(let X=0;X<c.inDepth;++X)for(let Z=0;Z<c.inHeight;++Z)for(let H=0;H<c.inWidth;++H){const F=X-_,Y=Z-M,Q=H-T;let ne=0;for(let se=0;se<S;se+=b){const pe=(F+se)/d;if(!(pe<0||pe>=c.outDepth||Math.floor(pe)!==pe))for(let de=0;de<C;de+=x){const ie=(Y+de)/p;if(!(ie<0||ie>=c.outHeight||Math.floor(ie)!==ie))for(let xe=0;xe<I;xe+=w){const q=(Q+xe)/f;if(q<0||q>=c.outWidth||Math.floor(q)!==q)continue;const oe=j.get(B,pe,ie,q,K);ne+=oe}}}P.set(ne*L,B,X,Z,H,K)}return n.makeTensorInfo(P.shape,P.dtype,P.values)}const P1e={kernelName:F3,backendName:"cpu",kernelFunc:M1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function A1e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i;Ge([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=oo(o.shape,s,l,1,u),d=c.strideHeight,p=c.strideWidth,f=c.filterHeight,g=c.filterWidth,y=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=x-1-c.padInfo.left,S=b-1-c.padInfo.top,C=St(o.shape,"float32"),I=1/(f*g),_=n.data.get(a.dataId).values,T=St(a.shape,"float32",_);for(let M=0;M<c.batchSize;++M)for(let P=0;P<c.inChannels;++P)for(let L=0;L<c.inHeight;++L)for(let j=0;j<c.inWidth;++j){const B=L-S,K=j-w;let X=0;for(let Z=0;Z<b;Z+=y){const H=(B+Z)/d;if(!(H<0||H>=c.outHeight||Math.floor(H)!==H))for(let F=0;F<x;F+=v){const Y=(K+F)/p;if(Y<0||Y>=c.outWidth||Math.floor(Y)!==Y)continue;const Q=T.get(M,H,Y,P);X+=Q}}C.set(X*I,M,L,j,P)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const D1e={kernelName:L3,backendName:"cpu",kernelFunc:A1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function L1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,scale:i,offset:o,mean:s,variance:l}=e;V(s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ge([a,s,l,i,o],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,p=n.data.get(l.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),g=o?n.data.get(o.dataId).values:new Float32Array([0]),y=new Float32Array(c.length),v=g.length,b=f.length,x=p.length,w=d.length;let S=0,C=0,I=0,_=0;for(let T=0;T<c.length;++T)y[T]=g[S++]+(c[T]-d[C++])*f[I++]/Math.sqrt(p[_++]+u),S>=v&&(S=0),C>=w&&(C=0),I>=b&&(I=0),_>=x&&(_=0);return n.makeTensorInfo(a.shape,a.dtype,y)}const F1e={kernelName:Xv,backendName:"cpu",kernelFunc:L1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function B1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:o}=r;Ge([a],"batchToSpaceND");const s=i.reduce((b,x)=>b*x),l=Bg(a.shape,i,s),u=zg(l.length,i.length),c=jg(a.shape,i,s),d=M4(o,i.length),p=P4(c,o,i.length),f=Nn({inputs:{x:a},backend:n,attrs:{shape:l}}),g=Ya({inputs:{x:f},backend:n,attrs:{perm:u}}),y=Nn({inputs:{x:g},backend:n,attrs:{shape:c}}),v=nd({inputs:{x:y},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}const z1e={kernelName:Sv,backendName:"cpu",kernelFunc:B1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function j1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o}=r,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=mT(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const V1e={kernelName:Cv,backendName:"cpu",kernelFunc:j1e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function U1e(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=zt(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const G1e={kernelName:Iv,backendName:"cpu",kernelFunc:U1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const W1e=pn(vm,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),H1e={kernelName:vm,backendName:"cpu",kernelFunc:W1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const q1e=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(be(e.shape)),a=n.data.get(e.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<s.length;u++){const c=s[u],d=l[u];r[u]=Math.hypot(c,d)}return n.makeOutput(r,e.shape,"float32")},K1e={kernelName:Nv,backendName:"cpu",kernelFunc:q1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jp(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const X1e={kernelName:Jv,backendName:"cpu",kernelFunc:Jp};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eh(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=Xt(a,e[0].shape)[0],o=e.map(y=>y.shape);R4(o,i);let s=vs(e.map(y=>y.shape),i);if(be(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(y=>be(y.shape)>0);if(l.length===1)return ws({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const y=l.map(S=>td({inputs:{input:S},backend:n})),v=l.map(S=>Jp({inputs:{input:S},backend:n})),b=eh({inputs:y,backend:n,attrs:{axis:i}}),x=eh({inputs:v,backend:n,attrs:{axis:i}}),w=gi({inputs:{real:b,imag:x},backend:n});return y.forEach(S=>n.disposeIntermediateTensorInfo(S)),v.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),w}const u=l.map(y=>{const v=[-1,be(y.shape.slice(i))];return Nn({inputs:{x:y},backend:n,attrs:{shape:v}})}),c=u.map(y=>({vals:n.data.get(y.dataId).values,shape:y.shape}));s=vs(u.map(y=>y.shape),1);const d=u[0].shape[0]===1,p=U9(c,s,e[0].dtype,d),f=vs(l.map(y=>y.shape),i),g=n.makeTensorInfo(f,e[0].dtype,p);return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const Y1e={kernelName:Tv,backendName:"cpu",kernelFunc:eh};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function B7(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r;Ge([a,i],"conv2d");const d=fl(l),p=Br(a.shape,i.shape,o,u,s,c,!1,d),f=p.filterHeight,g=p.filterWidth,y=p.dilationHeight,v=p.dilationWidth,b=p.padInfo.left,x=p.padInfo.top,w=p.dataFormat==="channelsLast",S=new Tr(p.outShape,a.dtype),C=Ze(a.shape),I=Ze(i.shape),_=C[0],T=w?C[1]:C[2],M=w?C[2]:1,P=w?1:C[1],L=S.strides[0],j=w?S.strides[1]:S.strides[2],B=w?S.strides[2]:1,K=w?1:S.strides[1],X=n.data.get(a.dataId).values,Z=n.data.get(i.dataId).values,H=S.values;for(let F=0;F<p.batchSize;++F){const Y=F*_,Q=F*L;for(let ne=0;ne<p.outHeight;++ne){const se=Q+ne*j,pe=ne*p.strideHeight-x;for(let de=0;de<f;++de){const ie=pe+de*y;if(ie<0||ie>=p.inHeight)continue;const xe=de*I[0],q=Y+ie*T;for(let oe=0;oe<p.outWidth;++oe){const he=se+oe*B,Ie=oe*p.strideWidth-b;for(let Ee=0;Ee<g;++Ee){const _e=Ie+Ee*v;if(_e<0||_e>=p.inWidth)continue;const Fe=xe+Ee*I[1],Xe=q+_e*M;let Oe=Fe;for(let lt=0;lt<p.inChannels;++lt){const Je=X[Xe+lt*P];for(let nt=0;nt<p.outChannels;++nt)H[he+nt*K]+=Je*Z[Oe+nt];Oe+=p.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,H)}const Q1e={kernelName:_v,backendName:"cpu",kernelFunc:B7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Z1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;Ge([a,i],"conv2dBackpropFilter");const d=fl(l),p=Br(a.shape,c,o,1,s,u,!1,d),{strideHeight:f,strideWidth:g,filterHeight:y,filterWidth:v}=p,b=p.dataFormat==="channelsLast",x=new Tr(p.filterShape,"float32"),w=p.padInfo.left,S=p.padInfo.top,C=n.data.get(a.dataId).values,I=n.data.get(i.dataId).values,_=new Tr(a.shape,a.dtype,C),T=new Tr(i.shape,i.dtype,I);for(let M=0;M<y;++M){const P=Math.max(0,Math.ceil((S-M)/f)),L=Math.min(p.outHeight,(p.inHeight+S-M)/f);for(let j=0;j<v;++j){const B=Math.max(0,Math.ceil((w-j)/g)),K=Math.min(p.outWidth,(p.inWidth+w-j)/g);for(let X=0;X<p.inChannels;++X)for(let Z=0;Z<p.outChannels;++Z){let H=0;for(let F=0;F<p.batchSize;++F)for(let Y=P;Y<L;++Y){const Q=M+Y*f-S;for(let ne=B;ne<K;++ne){const se=j+ne*g-w;b?H+=_.get(F,Q,se,X)*T.get(F,Y,ne,Z):H+=_.get(F,X,Q,se)*T.get(F,Z,Y,ne)}}x.set(H,M,j,X,Z)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const J1e={kernelName:Rv,backendName:"cpu",kernelFunc:Z1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eye(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r;Ge([a,i],"conv2dBackpropInput");const d=Ze(i.shape),p=Ze(a.shape);let f=fl(u);const g=Br(o,i.shape,s,1,l,c,!1,f),y=new Tr(g.inShape,"float32"),v=y.values,b=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,[w,S,C]=d,{batchSize:I,filterHeight:_,filterWidth:T,inChannels:M,inHeight:P,inWidth:L,outChannels:j,outHeight:B,outWidth:K,strideHeight:X,strideWidth:Z}=g;f=g.dataFormat;const H=_-1-g.padInfo.top,F=T-1-g.padInfo.left,Y=f==="channelsLast",Q=y.strides[0],ne=Y?y.strides[1]:y.strides[2],se=Y?y.strides[2]:1,pe=Y?1:y.strides[1],de=p[0],ie=Y?p[1]:p[2],xe=Y?p[2]:1,q=Y?1:p[1];for(let oe=0;oe<I;++oe)for(let he=0;he<M;++he)for(let Ie=0;Ie<P;++Ie){const Ee=Ie-H,_e=Math.max(0,Math.ceil(Ee/X)),Fe=Math.min(B,(_+Ee)/X);for(let Xe=0;Xe<L;++Xe){const Oe=Xe-F,lt=Math.max(0,Math.ceil(Oe/Z)),Je=Math.min(K,(T+Oe)/Z);let nt=0;for(let on=_e;on<Fe;++on){const jt=on*X-Ee;for(let Yt=lt;Yt<Je;++Yt){const Qt=Yt*Z-Oe,$t=de*oe+ie*on+xe*Yt,Ct=w*(_-1-jt)+S*(T-1-Qt)+C*he;for(let zn=0;zn<j;++zn){const Xn=b[$t+q*zn],za=x[Ct+zn];nt+=Xn*za}}}const et=Q*oe+ne*Ie+se*Xe+pe*he;v[et]=nt}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const tye={kernelName:$v,backendName:"cpu",kernelFunc:eye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r;Ge([a,i],"conv3d");const u=ku(a.shape,i.shape,o,l,s),{filterDepth:c,filterHeight:d,filterWidth:p,dilationDepth:f,dilationHeight:g,dilationWidth:y,padInfo:v}=u,b=v.front,x=v.left,w=v.top,S=new Tr(u.outShape,a.dtype),C=n.data.get(a.dataId).values,I=n.data.get(i.dataId).values,_=S.values,T=Ze(a.shape),M=Ze(i.shape);for(let P=0;P<u.batchSize;++P){const L=P*T[0],j=P*S.strides[0];for(let B=0;B<u.outDepth;++B){const K=j+B*S.strides[1],X=B*u.strideDepth-b;for(let Z=0;Z<c;++Z){const H=X+Z*f;if(H<0||H>=u.inDepth)continue;const F=Z*M[0],Y=L+H*T[1];for(let Q=0;Q<u.outHeight;++Q){const ne=K+Q*S.strides[2],se=Q*u.strideHeight-w;for(let pe=0;pe<d;++pe){const de=se+pe*g;if(de<0||de>=u.inHeight)continue;const ie=F+pe*M[1],xe=Y+de*T[2];for(let q=0;q<u.outWidth;++q){const oe=ne+q*u.outChannels,he=q*u.strideWidth-x;for(let Ie=0;Ie<p;++Ie){const Ee=he+Ie*y;if(Ee<0||Ee>=u.inWidth)continue;const _e=ie+Ie*M[2],Fe=xe+Ee*u.inChannels;let Xe=_e;for(let Oe=0;Oe<u.inChannels;++Oe){const lt=C[Fe+Oe];for(let Je=0;Je<u.outChannels;++Je)_[oe+Je]+=lt*I[Xe+Je];Xe+=u.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const rye={kernelName:Ov,backendName:"cpu",kernelFunc:nye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function aye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,filterShape:l}=r;Ge([a,i],"conv3dBackpropFilterV2");const u=Ze(a.shape),c=Ze(i.shape),d=ku(a.shape,l,o,1,s),p=d.strideDepth,f=d.strideHeight,g=d.strideWidth,y=d.filterDepth,v=d.filterHeight,b=d.filterWidth,x=new Tr(d.filterShape,"float32"),w=x.values,[S,C,I,_]=x.strides,T=n.data.get(i.dataId).values,[M,P,L,j]=c,B=n.data.get(a.dataId).values,[K,X,Z,H]=u,F=d.padInfo.front,Y=d.padInfo.left,Q=d.padInfo.top;for(let ne=0;ne<y;++ne){const se=Math.max(0,Math.ceil((F-ne)/p)),pe=Math.min(d.outDepth,(d.inDepth+F-ne)/p),de=ne*S;for(let ie=0;ie<v;++ie){const xe=Math.max(0,Math.ceil((Q-ie)/f)),q=Math.min(d.outHeight,(d.inHeight+Q-ie)/f),oe=ie*C+de;for(let he=0;he<b;++he){const Ie=Math.max(0,Math.ceil((Y-he)/g)),Ee=Math.min(d.outWidth,(d.inWidth+Y-he)/g),_e=he*I+oe;for(let Fe=0;Fe<d.inChannels;++Fe){const Xe=Fe*_+_e;for(let Oe=0;Oe<d.outChannels;++Oe){let lt=0;for(let Je=0;Je<d.batchSize;++Je){const nt=Je*K,et=Je*M;for(let on=se;on<pe;++on){const jt=(ne+on*p-F)*X+nt,Yt=on*P+et;for(let Qt=xe;Qt<q;++Qt){const $t=(ie+Qt*f-Q)*Z+jt,Ct=Qt*L+Yt;for(let zn=Ie;zn<Ee;++zn){const Xn=(he+zn*g-Y)*H+$t,za=zn*j+Ct;lt+=B[Xn+Fe]*T[za+Oe]}}}}w[Xe+Oe]=lt}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const iye={kernelName:B3,backendName:"cpu",kernelFunc:aye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oye(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:o,strides:s,inputShape:l}=r;Ge([a],"conv3dBackpropInputV2");const u=Ze(a.shape),c=Ze(i.shape),d=ku(l,i.shape,s,1,o),p=new Tr(d.inShape,"float32"),f=p.values,[g,y,v,b]=p.strides,x=n.data.get(a.dataId).values,[w,S,C,I]=u,_=n.data.get(i.dataId).values,[T,M,P,L]=c,{batchSize:j,filterDepth:B,filterHeight:K,filterWidth:X,inChannels:Z,inDepth:H,inHeight:F,inWidth:Y,outChannels:Q,outDepth:ne,outHeight:se,outWidth:pe,strideDepth:de,strideHeight:ie,strideWidth:xe}=d,q=B-1-d.padInfo.front,oe=K-1-d.padInfo.top,he=X-1-d.padInfo.left;for(let Ie=0;Ie<j;++Ie)for(let Ee=0;Ee<Z;++Ee)for(let _e=0;_e<H;++_e){const Fe=_e-q,Xe=Math.max(0,Math.ceil(Fe/de)),Oe=Math.min(ne,(B+Fe)/de);for(let lt=0;lt<F;++lt){const Je=lt-oe,nt=Math.max(0,Math.ceil(Je/ie)),et=Math.min(se,(K+Je)/ie);for(let on=0;on<Y;++on){const jt=on-he,Yt=Math.max(0,Math.ceil(jt/xe)),Qt=Math.min(pe,(X+jt)/xe);let $t=0;for(let Ct=Xe;Ct<Oe;++Ct){const zn=Ct*de-Fe;for(let Xn=nt;Xn<et;++Xn){const za=Xn*ie-Je;for(let _n=Yt;_n<Qt;++_n){const Qa=_n*xe-jt,yo=w*Ie+S*Ct+C*Xn+I*_n,bi=T*(B-1-zn)+M*(K-1-za)+P*(X-1-Qa)+L*Ee;for(let hn=0;hn<Q;++hn){const Za=x[yo+hn],vi=_[bi+hn];$t+=Za*vi}}}}f[g*Ie+y*_e+v*lt+b*on+Ee]=$t}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const sye={kernelName:Mv,backendName:"cpu",kernelFunc:oye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lye=pn(xm,t=>Math.cos(t)),uye={kernelName:xm,backendName:"cpu",kernelFunc:lye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cye=pn(wm,t=>Math.cosh(t)),dye={kernelName:wm,backendName:"cpu",kernelFunc:cye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pye(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,[c,d,p,f]=a.shape,g=i.shape[0],[y,v]=s,b=St([g,y,v,f],"float32"),x=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,S=n.data.get(a.dataId).values,C=Ze(a.shape),I=Ze(b.shape);for(let _=0;_<g;_++){const T=_*4,M=x[T],P=x[T+1],L=x[T+2],j=x[T+3],B=w[_];if(B>=c)continue;const K=y>1?(L-M)*(d-1)/(y-1):0,X=v>1?(j-P)*(p-1)/(v-1):0;for(let Z=0;Z<y;Z++){const H=y>1?M*(d-1)+Z*K:.5*(M+L)*(d-1);if(H<0||H>d-1){for(let F=0;F<v;F++)for(let Y=0;Y<f;Y++){const Q=Y+F*I[2]+Z*I[1]+_*I[0];b.values[Q]=u}continue}if(l==="bilinear"){const F=Math.floor(H),Y=Math.ceil(H),Q=H-F;for(let ne=0;ne<v;ne++){const se=v>1?P*(p-1)+ne*X:.5*(P+j)*(p-1);if(se<0||se>p-1){for(let xe=0;xe<f;xe++){const q=xe+ne*I[2]+Z*I[1]+_*I[0];b.values[q]=u}continue}const pe=Math.floor(se),de=Math.ceil(se),ie=se-pe;for(let xe=0;xe<f;xe++){let q=xe+pe*C[2]+F*C[1]+B*C[0];const oe=S[q];q=xe+de*C[2]+F*C[1]+B*C[0];const he=S[q];q=xe+pe*C[2]+Y*C[1]+B*C[0];const Ie=S[q];q=xe+de*C[2]+Y*C[1]+B*C[0];const Ee=S[q],_e=oe+(he-oe)*ie,Fe=Ie+(Ee-Ie)*ie;q=xe+ne*I[2]+Z*I[1]+_*I[0],b.values[q]=_e+(Fe-_e)*Q}}}else for(let F=0;F<v;++F){const Y=v>1?P*(p-1)+F*X:.5*(P+j)*(p-1);if(Y<0||Y>p-1){for(let se=0;se<f;se++){const pe=se+F*I[2]+Z*I[1]+_*I[0];b.values[pe]=u}continue}const Q=Math.round(Y),ne=Math.round(H);for(let se=0;se<f;se++){const pe=se+Q*C[2]+ne*C[1]+B*C[0],de=se+F*I[2]+Z*I[1]+_*I[0];b.values[de]=S[pe]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const hye={kernelName:Dv,backendName:"cpu",kernelFunc:pye};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;Ge(a,"cumprod");const l=dr([i],a.shape.length);let u=a;l!=null&&(u=Ya({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=pr(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Xa(u.dtype,"int32"),p=hv(be(u.shape),d),f=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],y=s?(b,x)=>b+g-x-1:(b,x)=>b+x;for(let b=0;b<f.length;b+=g)for(let x=0;x<g;x++){const w=y(b,x);if(x===0)p[w]=o?1:f[w];else{const S=y(b,x-1);p[w]=o?f[S]*p[S]:f[w]*p[S]}}const v=n.makeTensorInfo(u.shape,d,p);if(l!=null){const b=Rg(l),x=Ya({inputs:{x:v},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const mye={kernelName:Pv,backendName:"cpu",kernelFunc:fye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;Ge(a,"cumsum");const l=dr([i],a.shape.length);let u=a;l!=null&&(u=Ya({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=pr(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Xa(u.dtype,"int32"),p=Xr(be(u.shape),d),f=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],y=s?(b,x)=>b+g-x-1:(b,x)=>b+x;for(let b=0;b<f.length;b+=g)for(let x=0;x<g;x++){const w=y(b,x);if(x===0)p[w]=o?0:f[w];else{const S=y(b,x-1);p[w]=o?f[S]+p[S]:f[w]+p[S]}}const v=n.makeTensorInfo(u.shape,d,p);if(l!=null){const b=Rg(l),x=Ya({inputs:{x:v},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const yye={kernelName:Av,backendName:"cpu",kernelFunc:gye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o,binaryOutput:s}=r;if(a.shape.length===1){const l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=mT(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){const l=n.bufferSync(a),u=n.bufferSync(i),c=j9(l,u,o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const vye={kernelName:Lv,backendName:"cpu",kernelFunc:bye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:o}=r;V(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const s=a.shape[0],l=a.shape[1],u=a.shape[2],c=a.shape[3],d=l*i,p=u*i,f=c/(i*i),g=n.data.get(a.dataId).values,y=new Float32Array(s*d*p*f);let v=0;for(let b=0;b<s;++b)for(let x=0;x<d;++x){const w=Math.floor(x/i),S=x%i;for(let C=0;C<p;++C){const I=Math.floor(C/i),_=C%i,T=(S*i+_)*f;for(let M=0;M<f;++M){const P=M+T+c*(I+u*(w+l*b));y[v++]=g[P]}}}return n.makeTensorInfo([s,d,p,f],a.dtype,y)}const wye={kernelName:Fv,backendName:"cpu",kernelFunc:xye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function z7(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;Ge([a,i],"depthwiseConv2DNative");const c=Ze(a.shape),d=Ze(i.shape);let p=l;p==null&&(p=[1,1]),V(pa(o,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${p}'`);const f=Br(a.shape,i.shape,o,p,s,u,!0),{filterHeight:g,filterWidth:y,dilationHeight:v,dilationWidth:b,padInfo:x}=f,w=x.left,S=x.top,C=f.outChannels/f.inChannels,I=new Tr(f.outShape,a.dtype),_=n.data.get(a.dataId).values,T=n.data.get(i.dataId).values,M=I.values;for(let P=0;P<f.batchSize;++P){const L=P*c[0],j=P*I.strides[0];for(let B=0;B<f.outHeight;++B){const K=j+B*I.strides[1],X=B*f.strideHeight-S;for(let Z=0;Z<g;++Z){const H=X+Z*v;if(H<0||H>=f.inHeight)continue;const F=Z*d[0],Y=L+H*c[1];for(let Q=0;Q<f.outWidth;++Q){const ne=K+Q*I.strides[2],se=Q*f.strideWidth-w;for(let pe=0;pe<y;++pe){const de=se+pe*b;if(de<0||de>=f.inWidth)continue;const ie=F+pe*d[1],xe=Y+de*f.inChannels;let q=ne,oe=ie;for(let he=0;he<f.inChannels;++he){const Ie=_[xe+he];for(let Ee=0;Ee<C;++Ee)M[q+Ee]+=Ie*T[oe+Ee];q+=C,oe+=C}}}}}}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const kye={kernelName:Bv,backendName:"cpu",kernelFunc:z7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r;Ge([a,i],"depthwiseConv2dNativeBackpropFilter");const d=Br(a.shape,c,o,s,l,u,!0),{strideHeight:p,strideWidth:f,filterHeight:g,filterWidth:y}=d,v=new Tr(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=d.outChannels/d.inChannels,S=n.data.get(a.dataId).values,C=new Tr(a.shape,a.dtype,S),I=n.data.get(i.dataId).values,_=new Tr(i.shape,i.dtype,I);for(let T=0;T<g;++T){const M=Math.max(0,Math.ceil((x-T)/p)),P=Math.min(d.outHeight,(d.inHeight+x-T)/p);for(let L=0;L<y;++L){const j=Math.max(0,Math.ceil((b-L)/f)),B=Math.min(d.outWidth,(d.inWidth+b-L)/f);for(let K=0;K<d.outChannels;++K){const X=Math.trunc(K/w),Z=K%w;let H=0;for(let F=0;F<d.batchSize;++F)for(let Y=M;Y<P;++Y){const Q=T+Y*p-x;for(let ne=j;ne<B;++ne){const se=L+ne*f-b;H+=C.get(F,Q,se,X)*_.get(F,Y,ne,K)}}v.set(H,T,L,X,Z)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const Cye={kernelName:zv,backendName:"cpu",kernelFunc:Sye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Iye(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r;Ge([a,i],"depthwiseConv2DNativeBackpropInput");const d=Ze(a.shape),p=Ze(i.shape),f=Br(c,i.shape,o,s,l,u,!0),g=new Tr(f.inShape,"float32"),y=g.values,[v,b,x]=g.strides,w=n.data.get(a.dataId).values,[S,C,I]=d,_=n.data.get(i.dataId).values,[T,M,P]=p,{batchSize:L,filterHeight:j,filterWidth:B,inChannels:K,inHeight:X,inWidth:Z,outChannels:H,outHeight:F,outWidth:Y,strideHeight:Q,strideWidth:ne}=f,se=j-1-f.padInfo.top,pe=B-1-f.padInfo.left,de=H/K;for(let ie=0;ie<L;++ie)for(let xe=0;xe<K;++xe)for(let q=0;q<X;++q){const oe=q-se,he=Math.max(0,Math.ceil(oe/Q)),Ie=Math.min(F,(j+oe)/Q);for(let Ee=0;Ee<Z;++Ee){const _e=Ee-pe,Fe=Math.max(0,Math.ceil(_e/ne)),Xe=Math.min(Y,(B+_e)/ne);let Oe=0;for(let lt=he;lt<Ie;++lt){const Je=lt*Q-oe;for(let nt=Fe;nt<Xe;++nt){const et=nt*ne-_e,on=S*ie+C*lt+I*nt,jt=T*(j-1-Je)+M*(B-1-et)+P*xe;for(let Yt=0;Yt<de;++Yt){const Qt=xe*de+Yt,$t=w[on+Qt],Ct=_[jt+Yt];Oe+=$t*Ct}}}y[v*ie+b*q+x*Ee+xe]=Oe}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const Eye={kernelName:jv,backendName:"cpu",kernelFunc:Iye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nye(t){const{inputs:e,backend:n}=t,{x:r}=e,a=be(r.shape),i=n.data.get(r.dataId).values,o=St([a,a],r.dtype),s=o.values;for(let u=0;u<i.length;u++)s[u*a+u]=i[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const Tye={kernelName:Vv,backendName:"cpu",kernelFunc:Nye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _ye={kernelName:Uv,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a}=t,{strides:i,pad:o,dilations:s}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,d=l.data.get(a.dataId).values,p=a.shape.length,{batchSize:f,inHeight:g,inWidth:y,inChannels:v,outHeight:b,outWidth:x,padInfo:w,strideHeight:S,strideWidth:C,filterHeight:I,filterWidth:_,dilationHeight:T,dilationWidth:M,outShape:P}=Eg(r.shape,a.shape,i,o,"NHWC",s),L=be(P),j=P.length,B=Nr(r.dtype,L);for(let K=0;K<f;++K)for(let X=0;X<b;++X){const Z=X*S-w.top;for(let H=0;H<x;++H){const F=H*C-w.left;for(let Y=0;Y<v;++Y){let Q=Number.MIN_SAFE_INTEGER;for(let se=0;se<I;++se){const pe=Z+se*T;if(pe>=0&&pe<g)for(let de=0;de<_;++de){const ie=F+de*M;if(ie>=0&&ie<y){const xe=Bo([K,pe,ie,Y],c,Ze(r.shape)),q=Bo([se,de,Y],p,Ze(a.shape)),oe=u[xe]+d[q];oe>Q&&(Q=oe)}}}const ne=Bo([K,X,H,Y],j,Ze(P));B[ne]=Q}}}return{dataId:l.write(bu(B,r.dtype),P,r.dtype),shape:P,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Rye={kernelName:j3,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=Oi(r.shape,u.data.get(r.dataId).values),d=Oi(a.shape,u.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:I,dilationHeight:_,dilationWidth:T,outShape:M}=Eg(r.shape,a.shape,o,s,"NHWC",l);V(i.rank===M.length,()=>`Error in ${j3}, dy must have the same rank as output ${M.length}, but got ${i.rank}`);const P=Oi(M,u.data.get(i.dataId).values),L=O3(a.shape,a.dtype);for(let j=0;j<p;++j)for(let B=0;B<v;++B){const K=B*w-x.top;for(let X=0;X<b;++X){const Z=X*S-x.left;for(let H=0;H<y;++H){let F=Number.MIN_SAFE_INTEGER,Y=0,Q=0;for(let ne=0;ne<C;++ne){const se=K+ne*_;if(se>=0&&se<f)for(let pe=0;pe<I;++pe){const de=Z+pe*T;if(de>=0&&de<g){const ie=c[j][se][de][H]+d[ne][pe][H];ie>F&&(F=ie,Y=ne,Q=pe)}}}L[Y][Q][H]+=P[j][B][X][H]}}}return{dataId:u.write(bu(L,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $ye={kernelName:z3,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=Oi(r.shape,u.data.get(r.dataId).values),d=Oi(a.shape,u.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:I,dilationHeight:_,dilationWidth:T,outShape:M}=Eg(r.shape,a.shape,o,s,"NHWC",l);V(i.rank===M.length,()=>`Error in ${z3}, dy must have the same rank as output ${M.length}, but got ${i.rank}`);const P=Oi(M,u.data.get(i.dataId).values),L=O3(r.shape,r.dtype);for(let j=0;j<p;++j)for(let B=0;B<v;++B){const K=B*w-x.top;for(let X=0;X<b;++X){const Z=X*S-x.left;for(let H=0;H<y;++H){let F=Number.MIN_SAFE_INTEGER,Y=K<0?0:K,Q=Z<0?0:Z;for(let ne=0;ne<C;++ne){const se=K+ne*_;if(se>=0&&se<f)for(let pe=0;pe<I;++pe){const de=Z+pe*T;if(de>=0&&de<g){const ie=c[j][se][de][H]+d[ne][pe][H];ie>F&&(F=ie,Y=se,Q=de)}}}L[j][Y][Q][H]+=P[j][B][X][H]}}}return{dataId:u.write(bu(L,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gg(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;Ge(a,"sum");let s;a.dtype==="bool"?s=Ru({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):s=ws({inputs:{x:a},backend:n});const l=s.shape.length,u=Xt(i,s.shape),c=dr(u,l);let d=u,p=s;c!=null&&(p=Ya({inputs:{x:s},backend:n,attrs:{perm:c}}),d=pr(d.length,l)),Qr("sum",d,p.shape.length);const[f,g]=Yr(p.shape,d),y=Xa(p.dtype,"int32");let v=V2(n,f,y);const b=be(g),x=n.data.get(v.dataId).values,w=n.data.get(p.dataId).values;for(let S=0;S<x.length;++S){const C=S*b;let I=0;for(let _=0;_<b;++_)I+=w[C+_];x[S]=I}if(o){const S=_r(v.shape,u),C=v;v=Nn({inputs:{x:v},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(C)}return n.disposeIntermediateTensorInfo(s),c!=null&&n.disposeIntermediateTensorInfo(p),v}const Oye={kernelName:Mx,backendName:"cpu",kernelFunc:Gg};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mye(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:o,summedDims:s,idDims:l}=W4(a,i.length);q4(o.length,l,i);const{path:u,steps:c}=K4(s,l),d=c.length;let p=null,f=o.length;const g=[];for(let y=0;y<d;++y){for(const v of c[y]){const{permutationIndices:b,expandDims:x}=H4(f,l[v]);let w;X4(b)?w=i[v]:(w=Ya({inputs:{x:i[v]},backend:n,attrs:{perm:b}}),g.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);vn(w.shape,S)||(w=Nn({inputs:{x:w},backend:n,attrs:{shape:S}}),g.push(w)),p===null?p=w:(p=U2({inputs:{a:w,b:p},backend:n}),g.push(p))}y<d-1&&(u[y]>=0&&(p=Gg({inputs:{x:p},backend:n,attrs:{axis:u[y]-(o.length-f),keepDims:!1}}),g.push(p)),f--)}for(const y of g)y!==p&&n.disposeIntermediateTensorInfo(y);return p}const Pye={kernelName:Gv,backendName:"cpu",kernelFunc:Mye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Aye(t){const{inputs:e,backend:n}=t,{dy:r,y:a}=e;Ge([r,a],"eluGrad");const i=new Float32Array(be(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const u=o[l];u>=1?i[l]=s[l]:i[l]=s[l]*(u+1)}return n.makeTensorInfo(a.shape,"float32",i)}const Dye={kernelName:V3,backendName:"cpu",kernelFunc:Aye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Lye=L4,Fye=F4,Bye=B4,zye=z4,jye=j4,Vye=V4,Uye=pn(Cm,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+Lye*n);return e*(1-((((Vye*r+jye)*r+zye)*r+Bye)*r+Fye)*r*Math.exp(-n*n))}),Gye={kernelName:Cm,backendName:"cpu",kernelFunc:Uye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function W2(t){const{inputs:e,backend:n,attrs:r}=t,{input:a}=e,{dim:i}=r,o=a.shape.length,s=a.shape.slice();let l=i;return i<0&&(V(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),s.splice(l,0,1),Nn({inputs:{x:a},backend:n,attrs:{shape:s}})}const Wye={kernelName:Wv,backendName:"cpu",kernelFunc:W2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Hye=vr((t,e)=>t/e),wT=zr(km,Hye),kT={kernelName:km,backendName:"cpu",kernelFunc:wT};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function j7(t,e,n){const r=t.shape,a=r[0],i=r[1],o=n.data.get(t.dataId),s=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[a,i],c=be(u),d=Er("float32",c),p=Er("float32",c);for(let v=0;v<a;v++){const b=nd({inputs:{x:s},backend:n,attrs:{begin:[v,0],size:[1,i]}}),x=nd({inputs:{x:l},backend:n,attrs:{begin:[v,0],size:[1,i]}}),w=gi({inputs:{real:b,imag:x},backend:n}),{real:S,imag:C}=qye(w,e,n),I=yl(S,C);for(let _=0;_<i;_++){const T=U4(I,_);d[v*i+_]=T.real,p[v*i+_]=T.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w)}const f=n.makeTensorInfo(u,"float32",d),g=n.makeTensorInfo(u,"float32",p),y=gi({inputs:{real:f,imag:g},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}function qye(t,e,n){const r=be(t.shape),a=n.data.get(t.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(Kye(r)){const s=ST(i,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",s.real),c=n.makeTensorInfo(l,"float32",s.imag),d=n.makeTensorInfo([],"float32",sl(r,"float32")),p=ws({inputs:{x:d},backend:n}),f=kT.kernelFunc({inputs:{a:u,b:d},backend:n}),g=kT.kernelFunc({inputs:{a:c,b:p},backend:n}),y=n.data.get(f.dataId).values,v=n.data.get(g.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),{real:y,imag:v}}return s}else{const s=yl(i,o),l=Xye(s,r,e);return r9(l)}}function Kye(t){return(t&t-1)===0}function ST(t,e,n,r,a){if(n===1)return{real:t,imag:e};const i=yl(t,e),o=n/2,s=a9(i),l=s.real,u=s.imag,c=[l.length],d=a.makeTensorInfo(c,"float32",l),p=a.makeTensorInfo(c,"float32",u),f=gi({inputs:{real:d,imag:p},backend:a}),g=i9(i),y=g.real,v=g.imag,b=[y.length],x=a.makeTensorInfo(b,"float32",y),w=a.makeTensorInfo(b,"float32",v),S=gi({inputs:{real:x,imag:w},backend:a}),C=ST(l,u,o,r,a),I=C.real,_=C.imag,T=[I.length],M=a.makeTensorInfo(T,"float32",I),P=a.makeTensorInfo(T,"float32",_),L=gi({inputs:{real:M,imag:P},backend:a}),j=ST(y,v,o,r,a),B=j.real,K=j.imag,X=[B.length],Z=a.makeTensorInfo(X,"float32",B),H=a.makeTensorInfo(X,"float32",K),F=gi({inputs:{real:Z,imag:H},backend:a}),Y=s9(n,r),Q=[Y.real.length],ne=a.makeTensorInfo(Q,"float32",Y.real),se=a.makeTensorInfo(Q,"float32",Y.imag),pe=gi({inputs:{real:ne,imag:se},backend:a}),de=U2({inputs:{a:pe,b:F},backend:a}),ie=Yp({inputs:{a:L,b:de},backend:a}),xe=vT({inputs:{a:L,b:de},backend:a}),q=td({inputs:{input:ie},backend:a}),oe=td({inputs:{input:xe},backend:a}),he=Jp({inputs:{input:ie},backend:a}),Ie=Jp({inputs:{input:xe},backend:a}),Ee=eh({inputs:[q,oe],backend:a,attrs:{axis:0}}),_e=eh({inputs:[he,Ie],backend:a,attrs:{axis:0}}),Fe=a.data.get(Ee.dataId).values,Xe=a.data.get(_e.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(ne),a.disposeIntermediateTensorInfo(se),a.disposeIntermediateTensorInfo(pe),a.disposeIntermediateTensorInfo(de),a.disposeIntermediateTensorInfo(ie),a.disposeIntermediateTensorInfo(xe),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(he),a.disposeIntermediateTensorInfo(oe),a.disposeIntermediateTensorInfo(Ie),a.disposeIntermediateTensorInfo(Ee),a.disposeIntermediateTensorInfo(_e),{real:Fe,imag:Xe}}function Xye(t,e,n){const r=new Float32Array(e*2);for(let a=0;a<e;a++){let i=0,o=0;for(let s=0;s<e;s++){const l=l9(a*s,e,n),u=U4(t,s);i+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(i/=e,o/=e),o9(r,i,o,a)}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yye(t){const{inputs:e,backend:n}=t,{input:r}=e,a=be(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=Nn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=j7(s,!1,n),u=Nn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const Qye={kernelName:Hv,backendName:"cpu",kernelFunc:Yye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function CT(t){const{backend:e,attrs:n}=t,{shape:r,value:a,dtype:i}=n,o=i||Tp(a),s=Nr(o,be(r));return Jye(s,a,o),e.makeTensorInfo(r,o,s)}const Zye={kernelName:qv,backendName:"cpu",kernelFunc:CT};function Jye(t,e,n){t.fill(e)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ebe={kernelName:Kv,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,a=n,i=Er(r.dtype,be(r.shape)),[o,s,l,u]=r.shape,c=a.data.get(r.dataId).values;for(let d=0;d<o;d++){const p=d*l*s*u;for(let f=0;f<s;f++){const g=f*(l*u);for(let y=0;y<l;y++){const v=y*u;for(let b=0;b<u;b++){const x=Math.round(l-y-1),w=p+g+v+b;let S=c[w];if(x>=0&&x<l){const C=x*u,I=p+g+C+b;S=c[I]}i[w]=S}}}}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const tbe=vr((t,e)=>Math.floor(t/e)),nbe=zr(_m,tbe,null,"int32"),rbe={kernelName:_m,backendName:"cpu",kernelFunc:nbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function abe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:g}=r;let y=B7({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(o){const v=y;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const b=Nn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});y=Yp({inputs:{a:y,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else y=Yp({inputs:{a:y,b:o},backend:n});n.disposeIntermediateTensorInfo(v)}if(f){const v=y;if(c==="NCHW"&&f==="prelu"&&s.shape.length===1&&s.shape[0]!==1){const b=Nn({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});y=G2(n,y,f,b,g),n.disposeIntermediateTensorInfo(b)}else y=G2(n,y,f,s,g);n.disposeIntermediateTensorInfo(v)}return y}const ibe={kernelName:fg,backendName:"cpu",kernelFunc:abe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function obe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:g}=r;let y=z7({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(o){const v=y;y=Yp({inputs:{a:y,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(f){const v=y;y=G2(n,y,f,s,g),n.disposeIntermediateTensorInfo(v)}return y}const sbe={kernelName:mg,backendName:"cpu",kernelFunc:obe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lbe(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=be(r.shape),o=a.shape,s=o[o.length-1],[l,u,c,d]=c2(r,a);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(a.dataId).values,f=n.bufferSync(r),g=Y9(p,f,r.dtype,u,s,c,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,g.values)}const ube={kernelName:Qv,backendName:"cpu",kernelFunc:lbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:o,batchDims:s}=r;Ge([a,i],"gatherV2");const l=Xt(o,a.shape)[0],u=n.data.get(i.dataId).values,c=a.shape[l];for(let S=0;S<u.length;++S){const C=u[S];V(C<=c-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${c-1}]`)}let d=s;s==null&&(d=0);const p=be(i.shape),f=Z4(a,i,l,d),g=Nn({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),y=Nn({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,p/f.batchSize]}}),v=[f.batchSize,f.outerSize,p/f.batchSize,f.sliceSize],b=n.bufferSync(y),x=n.bufferSync(g),w=Q9(x,b,v);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(f.outputShape,w.dtype,w.values)}const dbe={kernelName:Yv,backendName:"cpu",kernelFunc:cbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pbe(t){const{inputs:e,backend:n}=t,{input:r}=e,a=be(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=Nn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=j7(s,!0,n),u=Nn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const hbe={kernelName:Zv,backendName:"cpu",kernelFunc:pbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fbe=pn(Mm,t=>Number.isFinite(t)?1:0,"bool"),mbe={kernelName:Mm,backendName:"cpu",kernelFunc:fbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gbe=pn(Pm,t=>Math.abs(t)===1/0?1:0,"bool"),ybe={kernelName:Pm,backendName:"cpu",kernelFunc:gbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const bbe=pn(Am,t=>Number.isNaN(t)?1:0,"bool"),vbe={kernelName:Am,backendName:"cpu",kernelFunc:bbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xbe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,o=n7(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}const wbe={kernelName:tx,backendName:"cpu",kernelFunc:xbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kbe=pn(Bm,t=>Math.log1p(t)),Sbe={kernelName:Bm,backendName:"cpu",kernelFunc:kbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Cbe=vr((t,e)=>t&&e),Ibe=zr(zm,Cbe,null,"bool"),Ebe={kernelName:zm,backendName:"cpu",kernelFunc:Ibe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Nbe=pn(jm,t=>t?0:1,"bool"),Tbe={kernelName:jm,backendName:"cpu",kernelFunc:Nbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _be=vr((t,e)=>t||e),Rbe=zr(Vm,_be,null,"bool"),$be={kernelName:Vm,backendName:"cpu",kernelFunc:Rbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Obe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:o,alpha:s,beta:l}=r;Ge(a,"LRN");const u=a.shape[3],c=u-1,d=n.data.get(a.dataId).values,p=be(a.shape),f=new Float32Array(p);function g(y){const v=y%u;let b=y-v+Math.max(0,v-i);const x=y-v+Math.min(v+i,c);let w=0;for(;b<=x;b++){const S=d[b];w+=S*S}return w}for(let y=0;y<p;y++){const v=g(y),b=d[y]*Math.pow(o+s*v,-l);f[y]=b}return n.makeTensorInfo(a.shape,a.dtype,f)}const Mbe={kernelName:nx,backendName:"cpu",kernelFunc:Obe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r;Ge(o,"LRNGrad");const d=be(o.shape),p=o.shape[3],f=n.data.get(o.dataId).values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,v=new Float32Array(d),b=d;for(let x=0;x<b;x++){const w=x%p,S=x-w+Math.max(0,w-s),C=x-w+Math.min(p,w+s+1);let I=0;for(let _=S;_<C;_++)I+=Math.pow(g[_],2);I=u*I+l;for(let _=S;_<C;_++){let T=-2*u*c*g[_]*y[x]/I;x===_&&(T+=Math.pow(I,-c)),T*=f[x],v[_]+=T}}return n.makeTensorInfo(o.shape,a.dtype,v)}const Abe={kernelName:U3,backendName:"cpu",kernelFunc:Pbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function V7(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:o}=r,s=n;let l=a.shape;const u=l.length,c=Xt(i,l);let d=c;const p=dr(d,u);let f=s.data.get(a.dataId).values;if(p!=null){const S=new Array(u);for(let C=0;C<S.length;C++)S[C]=l[p[C]];f=yT(f,l,a.dtype,p,S),d=pr(d.length,u),l=S}Ge(a,"max"),Qr("max",d,u);const[g,y]=Yr(l,d),v=be(y),b=a7(f,v,g,a.dtype),x=s.write(b,g,a.dtype);let w=g;return o&&(w=_r(g,c)),{dataId:x,shape:w,dtype:a.dtype}}const Dbe={kernelName:rx,backendName:"cpu",kernelFunc:V7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;Ge(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(pa(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=oo(a.shape,i,o,u,s,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&vn(c.inShape,c.outShape))d=ws({inputs:{x:a},backend:n});else{const p=n.data.get(a.dataId).values,f=Ze(a.shape),g=xT(p,a.shape,a.dtype,f,c,"max");d=n.makeTensorInfo(c.outShape,a.dtype,g.values)}return d}const Fbe={kernelName:ax,backendName:"cpu",kernelFunc:Lbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;Ge(a,"maxPool3d");const c=hl(a.shape,i,o,1,s,l,u),d=n.data.get(a.dataId).values,p=F7(d,a.shape,a.dtype,Ze(a.shape),c,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const zbe={kernelName:ix,backendName:"cpu",kernelFunc:Bbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;Ge([a,i],"maxPool3DGrad");const c=hl(i.shape,o,s,1,l,u),d=n.bufferSync(i),p=T1e(d,c),f=c.strideDepth,g=c.strideHeight,y=c.strideWidth,v=c.dilationDepth,b=c.dilationHeight,x=c.dilationWidth,w=c.effectiveFilterDepth,S=c.effectiveFilterHeight,C=c.effectiveFilterWidth,I=w-1-c.padInfo.front,_=C-1-c.padInfo.left,T=S-1-c.padInfo.top,M=St(i.shape,"float32"),P=n.bufferSync(a);for(let L=0;L<c.batchSize;++L)for(let j=0;j<c.inChannels;++j)for(let B=0;B<c.inDepth;++B)for(let K=0;K<c.inHeight;++K)for(let X=0;X<c.inWidth;++X){const Z=B-I,H=K-T,F=X-_;let Y=0;for(let Q=0;Q<w;Q+=v){const ne=(Z+Q)/f;if(!(ne<0||ne>=c.outDepth||Math.floor(ne)!==ne))for(let se=0;se<S;se+=b){const pe=(H+se)/g;if(!(pe<0||pe>=c.outHeight||Math.floor(pe)!==pe))for(let de=0;de<C;de+=x){const ie=(F+de)/y;if(ie<0||ie>=c.outWidth||Math.floor(ie)!==ie)continue;const xe=w*S*C-1-p.get(L,ne,pe,ie,j),q=Q*S*C+se*C+de,oe=xe===q?1:0;if(oe===0)continue;const he=P.get(L,ne,pe,ie,j);Y+=he*oe}}}M.set(Y,L,B,K,X,j)}return n.makeTensorInfo(M.shape,M.dtype,M.values)}const Vbe={kernelName:W3,backendName:"cpu",kernelFunc:jbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ube(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:o}=e,s=i;Ge([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,p=oo(s.shape,l,u,1,c,d),f=n.data.get(s.dataId).values,g=St(p.outShape,s.dtype,L7(f,s.shape,s.dtype,p).values),y=p.strideHeight,v=p.strideWidth,b=p.dilationHeight,x=p.dilationWidth,w=p.effectiveFilterHeight,S=p.effectiveFilterWidth,C=S-1-p.padInfo.left,I=w-1-p.padInfo.top,_=St(s.shape,"float32"),T=n.data.get(a.dataId).values,M=St(a.shape,"float32",T);for(let P=0;P<p.batchSize;++P)for(let L=0;L<p.inChannels;++L)for(let j=0;j<p.inHeight;++j)for(let B=0;B<p.inWidth;++B){const K=j-I,X=B-C;let Z=0;for(let H=0;H<w;H+=b){const F=(K+H)/y;if(!(F<0||F>=p.outHeight||Math.floor(F)!==F))for(let Y=0;Y<S;Y+=x){const Q=(X+Y)/v;if(Q<0||Q>=p.outWidth||Math.floor(Q)!==Q)continue;const ne=w*S-1-g.get(P,F,Q,L),se=H*S+Y,pe=ne===se?1:0;if(pe===0)continue;const de=M.get(P,F,Q,L);Z+=de*pe}}_.set(Z,P,j,B,L)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const Gbe={kernelName:G3,backendName:"cpu",kernelFunc:Ube};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wbe(t,e,n,r,a){const i=Ze(e),o=xT(t,e,n,i,a,"max"),s=L7(t,e,n,a,!0,r);return[o.values,s.values]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Hbe={kernelName:ox,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=e,l=n;Ge(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=oo(r.shape,a,i,[1,1],o),[d,p]=Wbe(u,r.shape,r.dtype,s,c),f=l.write(d,c.outShape,r.dtype),g=l.write(p,c.outShape,r.dtype);return[{dataId:f,shape:c.outShape,dtype:r.dtype},{dataId:g,shape:c.outShape,dtype:"int32"}]}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=Xt(i,a.shape),l=Yr(a.shape,s)[1],u=be(l),c=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(d);const p=Ru({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(p);const f=wT({inputs:{a:p,b:d},backend:n});c.push(f);const g=Gg({inputs:{x:f},backend:n,attrs:{axis:i,keepDims:o}});return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const Kbe={kernelName:sx,backendName:"cpu",kernelFunc:qbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;Ge(a,"min");const s=Xt(i,a.shape);let l=s;const u=dr(l,a.shape.length);let c=a;u!=null&&(c=Ya({inputs:{x:a},backend:n,attrs:{perm:u}}),l=pr(l.length,a.shape.length)),Qr("min",l,c.shape.length);const[d,p]=Yr(c.shape,l),f=be(p),g=Xr(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<g.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];(Number.isNaN(C)||C<w)&&(w=C)}g[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,g);if(o){const b=_r(d,s),x=Nn({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const Ybe={kernelName:lx,backendName:"cpu",kernelFunc:Xbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,mode:o}=r;Ge(a,"mirrorPad");const s=i.map((x,w)=>x[0]+a.shape[w]+x[1]),l=i.map(x=>x[0]),u=i.map((x,w)=>x[0]+a.shape[w]),c=o==="reflect"?0:1,d=n.data.get(a.dataId).values,p=a.shape.length,f=Ze(a.shape),g=be(s),y=s.length,v=Ze(s),b=Er(a.dtype,g);for(let x=0;x<g;x++){let w=Fc(x,y,v);for(let C=0;C<y;C++)w[C]<l[C]?w[C]=l[C]*2-w[C]-c:w[C]>=u[C]&&(w[C]=(u[C]-1)*2-w[C]+c);w=w.map((C,I)=>C-l[I]);const S=Bo(w,p,f);b[x]=d[S]}return{dataId:n.write(b,s,a.dtype),shape:s,dtype:a.dtype}}const Zbe={kernelName:ux,backendName:"cpu",kernelFunc:Qbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Jbe=vr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),eve=zr(Wm,Jbe),tve={kernelName:Wm,backendName:"cpu",kernelFunc:eve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function U7(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,o=a.shape.length;let s=i;if(s===-1&&(s=o-1),s!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${s}`);const l=Xt([s],a.shape),u=V7({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=_r(u.shape,l),d=Nn({inputs:{x:u},backend:n,attrs:{shape:c}}),p=vT({inputs:{a,b:d},backend:n}),f=q9({inputs:{x:p},backend:n}),g=Gg({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),y=Nn({inputs:{x:g},backend:n,attrs:{shape:c}}),v=wT({inputs:{a:f,b:y},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}const nve={kernelName:Dx,backendName:"cpu",kernelFunc:U7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rve(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:o,normalized:s}=r;Ge(a,"multinomial");const l=s?a:U7({inputs:{logits:a},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,p=[u,i],f=Xr(be(p),"int32");for(let g=0;g<u;++g){const y=g*c,v=new Float32Array(c-1);v[0]=d[y];for(let w=1;w<v.length;++w)v[w]=v[w-1]+d[y+w];const b=v2.alea(o.toString()),x=g*i;for(let w=0;w<i;++w){const S=b();f[x+w]=v.length;for(let C=0;C<v.length;C++)if(S<v[C]){f[x+w]=C;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",f)}const ave={kernelName:cx,backendName:"cpu",kernelFunc:rve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ive=T2;function ove(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r;Ge(a,"NonMaxSuppression");const u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:d}=ive(u,c,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const sve={kernelName:px,backendName:"cpu",kernelFunc:ove};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lve=_2;function uve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r;Ge(a,"NonMaxSuppressionPadded");const c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:p,validOutputs:f}=lve(c,d,o,s,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const cve={kernelName:hx,backendName:"cpu",kernelFunc:uve};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dve=R2;function pve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r;Ge(a,"NonMaxSuppressionWithScore");const c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,p=o,f=s,g=l,y=u,{selectedIndices:v,selectedScores:b}=dve(c,d,p,f,g,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const hve={kernelName:fx,backendName:"cpu",kernelFunc:pve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fve(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:o,onValue:s,offValue:l}=r;Ge(a,"oneHot");const u=be(a.shape),c=new Float32Array(u*o);c.fill(l);const d=n.data.get(a.dataId).values;for(let p=0;p<u;++p)d[p]>=0&&d[p]<o&&(c[p*o+d[p]]=s);return n.makeTensorInfo([...a.shape,o],i,c)}const mve={kernelName:gx,backendName:"cpu",kernelFunc:fve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function H2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const a=td({inputs:{input:r},backend:n}),i=H2({inputs:{x:a},backend:n}),o=Jp({inputs:{input:r},backend:n}),s=H2({inputs:{x:o},backend:n}),l=gi({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return CT({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const gve={kernelName:Qx,backendName:"cpu",kernelFunc:H2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function G7(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const a=td({inputs:{input:r},backend:n}),i=G7({inputs:{x:a},backend:n}),o=Jp({inputs:{input:r},backend:n}),s=H2({inputs:{x:o},backend:n}),l=gi({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return CT({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const yve={kernelName:mx,backendName:"cpu",kernelFunc:G7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function W7(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return W2({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{Kr(i,c.shape,"All tensors passed to stack must have matching shapes"),V(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const d=W2({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(d),d}),u=eh({inputs:l,backend:n,attrs:{axis:a}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const bve={kernelName:yx,backendName:"cpu",kernelFunc:W7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:o}=r;Ge(a,"pad");const s=i.map((b,x)=>b[0]+a.shape[x]+b[1]),l=i.map(b=>b[0]),u=n.data.get(a.dataId).values,c=be(a.shape),d=a.shape.length,p=Ze(a.shape),f=be(s),g=s.length,y=Ze(s),v=Er(a.dtype,f);o!==0&&v.fill(o);for(let b=0;b<c;b++){const x=Fc(b,d,p).map((S,C)=>S+l[C]),w=Bo(x,g,y);v[w]=u[b]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}const H7={kernelName:bx,backendName:"cpu",kernelFunc:vve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xve=vr((t,e)=>Math.pow(t,e)),wve=zr(Km,xve),kve={kernelName:Km,backendName:"cpu",kernelFunc:wve};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sve(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=e,s=a.map(v=>n.data.get(v.dataId).values),l=a.map(v=>v.shape),u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,[d,p,f]=d7(s,l,u,i.shape,i.dtype,c,o.shape),g=d.map(v=>n.makeTensorInfo([v.length],"int32",v)),y=n.makeTensorInfo(f,i.dtype,p);return g.concat([y])}const Cve={kernelName:wx,backendName:"cpu",kernelFunc:Sve};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ive(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,p=s.map(v=>n.data.get(v.dataId).values),f=s.map(v=>v.shape),[g,y]=f7(u,a.shape,c,i.shape,i.dtype,d,o.shape,p,f,l);return n.makeTensorInfo(g,i.dtype,y)}const Eve={kernelName:kx,backendName:"cpu",kernelFunc:Ive};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nve(t){const{backend:e,attrs:n}=t,{start:r,stop:a,dtype:i,step:o}=n,s=m7(r,a,o,i);return e.makeTensorInfo([s.length],i,s)}const Tve={kernelName:Sx,backendName:"cpu",kernelFunc:Nve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _ve=pn(Xm,t=>1/t),Rve={kernelName:Xm,backendName:"cpu",kernelFunc:_ve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $ve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r;Ge(a,"resizeBilinear");const l=Ze(a.shape),[u,c]=s,[d,p,f,g]=a.shape,y=n.data.get(a.dataId).values,v=new Float32Array(be([d,u,c,g])),b=[i&&u>1?p-1:p,i&&c>1?f-1:f],x=[i&&u>1?u-1:u,i&&c>1?c-1:c];let w=0;const S=b[0]/x[0],C=b[1]/x[1];for(let I=0;I<d;I++)for(let _=0;_<u;_++){let T;o?T=S*(_+.5)-.5:T=S*_;const M=Math.max(0,Math.floor(T)),P=T-M,L=Math.min(p-1,Math.ceil(T)),j=I*l[0]+M*l[1],B=I*l[0]+L*l[1];for(let K=0;K<c;K++){let X;o?X=C*(K+.5)-.5:X=C*K;const Z=Math.max(0,Math.floor(X)),H=X-Z,F=Math.min(f-1,Math.ceil(X)),Y=j+Z*l[2],Q=B+Z*l[2],ne=j+F*l[2],se=B+F*l[2];for(let pe=0;pe<g;pe++){const de=y[Y+pe],ie=y[Q+pe],xe=y[ne+pe],q=y[se+pe],oe=de+(xe-de)*H,he=ie+(q-ie)*H,Ie=oe+(he-oe)*P;v[w++]=Ie}}}return n.makeTensorInfo([d,u,c,g],"float32",v)}const Ove={kernelName:Nx,backendName:"cpu",kernelFunc:$ve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r;Ge([i,a],"resizeBilinearGrad");const s=Ze(a.shape),[l,u,c,d]=a.shape,[,p,f]=i.shape,g=new Float32Array(l*u*c*d),y=[o&&p>1?u-1:u,o&&f>1?c-1:c],v=[o&&p>1?p-1:p,o&&f>1?f-1:f],b=y[0]/v[0],x=y[1]/v[1],w=n.data.get(i.dataId).values;let S=0;for(let C=0;C<l;C++){const I=C*s[0];for(let _=0;_<p;_++){const T=_*b,M=Math.floor(T),P=Math.min(Math.ceil(T),u-1),L=I+M*s[1],j=I+P*s[1],B=T-M,K=1-B;for(let X=0;X<f;X++){const Z=X*x,H=Math.floor(Z),F=Math.min(Math.ceil(Z),c-1),Y=Z-H,Q=1-Y,ne=L+H*s[2],se=L+F*s[2],pe=j+H*s[2],de=j+F*s[2],ie=K*Q,xe=K*Y,q=B*Q,oe=B*Y;for(let he=0;he<d;he++){const Ie=w[S++];g[ne+he]+=Ie*ie,g[se+he]+=Ie*xe,g[pe+he]+=Ie*q,g[de+he]+=Ie*oe}}}}return n.makeTensorInfo([l,c,u,d],"float32",g)}const Pve={kernelName:q3,backendName:"cpu",kernelFunc:Mve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ave(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r;Ge(a,"resizeNearestNeighbor");const l=Ze(a.shape),[u,c]=s,[d,p,f,g]=a.shape,y=n.data.get(a.dataId).values,v=new Float32Array(d*u*c*g),b=[i&&u>1?p-1:p,i&&c>1?f-1:f],x=[i&&u>1?u-1:u,i&&c>1?c-1:c],w=b[0]/x[0],S=b[1]/x[1];let C=0;for(let I=0;I<d;I++){const _=I*l[0];for(let T=0;T<u;T++){const M=o?w*(T+.5):w*T;let P=Math.min(p-1,i?Math.round(M):Math.floor(M));o&&(P=Math.max(0,P));const L=_+P*l[1];for(let j=0;j<c;j++){const B=o?S*(j+.5):S*j;let K=Math.min(f-1,i?Math.round(B):Math.floor(B));o&&(K=Math.max(0,K));const X=L+K*l[2];for(let Z=0;Z<g;Z++){const H=y[X+Z];v[C++]=H}}}}return n.makeTensorInfo([d,u,c,g],a.dtype,v)}const Dve={kernelName:Ex,backendName:"cpu",kernelFunc:Ave};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r;Ge([i,a],"resizeNearestNeighborGrad");const s=Ze(a.shape),l=Ze(i.shape),[u,c,d,p]=a.shape,[,f,g]=i.shape,y=new Float32Array(u*c*d*p),v=n.data.get(i.dataId).values,b=[o&&f>1?c-1:c,o&&g>1?d-1:d],x=[o&&f>1?f-1:f,o&&g>1?g-1:g],w=b[0]/x[0],S=b[1]/x[1],C=1/w,I=1/S,_=Math.ceil(C)*2+2,T=Math.ceil(I)*2+2;for(let M=0;M<u;M++){const P=M*s[0];for(let L=0;L<c;L++){const j=P+L*s[1],B=Math.floor(L*C),K=Math.floor(B-_/2);for(let X=0;X<d;X++){const Z=j+X*s[2],H=Math.floor(X*I),F=Math.floor(H-T/2);for(let Y=0;Y<p;Y++){let Q=0;for(let ne=0;ne<_;ne++){const se=ne+K;if(se<0||se>=f)continue;const pe=P+se*l[1],de=se*w,ie=Math.min(c-1,o?Math.round(de):Math.floor(de));if(L===ie)for(let xe=0;xe<T;xe++){const q=xe+F;if(q<0||q>=g)continue;const oe=pe+q*l[2],he=q*S,Ie=Math.min(d-1,o?Math.round(he):Math.floor(he));X===Ie&&(Q+=v[oe+Y])}}y[Z+Y]=Q}}}}return n.makeTensorInfo(a.shape,a.dtype,y)}const Fve={kernelName:H3,backendName:"cpu",kernelFunc:Lve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r;Ge(a,"reverse");const o=a.shape.length,s=Xt(i,a.shape);if(o===0)return ws({inputs:{x:a},backend:n});const l=new Tr(a.shape,a.dtype),u=n.bufferSync(a);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),p=d.slice();s.forEach(f=>p[f]=a.shape[f]-1-p[f]),l.set(u.get(...p),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const zve={kernelName:Tx,backendName:"cpu",kernelFunc:Bve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jve={kernelName:Jx,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:o}=e,s=n,l=Er(r.dtype,be(r.shape)),[u,c,d,p]=r.shape,[f,g]=O4(o,c,d),y=255,v=Math.sin(a),b=Math.cos(a),x=s.data.get(r.dataId).values;for(let w=0;w<u;w++){const S=w*d*c*p;for(let C=0;C<c;C++){const I=C*(d*p);for(let _=0;_<d;_++){const T=_*p;for(let M=0;M<p;M++){const P=[u,C,_,M],L=P[2],j=P[1];let B=(L-f)*b-(j-g)*v,K=(L-f)*v+(j-g)*b;B=Math.round(B+f),K=Math.round(K+g);let X=i;if(typeof i!="number"&&(M===3?X=y:X=i[M]),B>=0&&B<d&&K>=0&&K<c){const H=K*(d*p),F=B*p,Y=S+H+F+M;X=x[Y]}const Z=S+I+T+M;l[Z]=X}}}}return{dataId:s.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Vve=pn(Zm,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),Uve={kernelName:Zm,backendName:"cpu",kernelFunc:Vve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gve(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Fp(i,a,o),p=!0,f=n.bufferSync(a),g=n.bufferSync(i),y=Zp(f,g,o,d,u,l,s,c,0,p);return n.makeTensorInfo(o,y.dtype,y.values)}const Wve={kernelName:_x,backendName:"cpu",kernelFunc:Gve};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hve(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<e?n=a+1:r=a;return r}function qve(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<=e?n=a+1:r=a;return r}function Kve(t,e,n,r,a,i){const o=Nr("int32",n*a);for(let s=0;s<n;++s){const l=t.slice(s*r,(s+1)*r),u=s*a;for(let c=0;c<a;++c)o[u+c]=i==="left"?Hve(l,e[c+u]):qve(l,e[c+u])}return o}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xve(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:o}=r,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=Kve(s,l,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",u)}const Yve={kernelName:Rx,backendName:"cpu",kernelFunc:Xve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qve(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e;Ge([r,a,i],"select");const o=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=Xa(a.dtype,i.dtype),d=Xr(be(a.shape),c);let p=0;const f=o===0||o>1||a.shape.length===1?1:be(a.shape.slice(1));for(let g=0;g<s.length;g++)for(let y=0;y<f;y++)s[g]===1?d[p++]=l[g]:d[p++]=u[g];return n.makeTensorInfo(a.shape,c,d)}const Zve={kernelName:$x,backendName:"cpu",kernelFunc:Qve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Jve=A4,exe=D4,txe=pn(eg,t=>t>=0?exe*t:Jve*(Math.exp(t)-1)),nxe={kernelName:eg,backendName:"cpu",kernelFunc:txe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rxe=pn(rg,t=>t<0?-1:t>0?1:0),axe={kernelName:rg,backendName:"cpu",kernelFunc:rxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ixe=pn(tg,t=>Math.sin(t)),oxe={kernelName:tg,backendName:"cpu",kernelFunc:ixe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sxe=pn(ng,t=>Math.sinh(t)),lxe={kernelName:ng,backendName:"cpu",kernelFunc:sxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const uxe=11920928955078125e-23,q7=Math.log(uxe)+2,cxe=pn(ig,t=>{const e=t>-q7,n=t<q7,r=Math.exp(t);let a;return n?a=r:e?a=t:a=Math.log(1+r),a}),dxe={kernelName:ig,backendName:"cpu",kernelFunc:cxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:o}=r;Ge([a],"spaceToBatchND");const s=be(i),l=[[0,0]];l.push(...o);for(let v=1+i.length;v<a.shape.length;++v)l.push([0,0]);const u=H7.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),c=Bg(u.shape,i,s,!1),d=zg(c.length,i.length,!1),p=jg(u.shape,i,s,!1),f=Nn({inputs:{x:u},backend:n,attrs:{shape:c}}),g=Ya({inputs:{x:f},backend:n,attrs:{perm:d}}),y=Nn({inputs:{x:g},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}const hxe={kernelName:Px,backendName:"cpu",kernelFunc:pxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fxe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${a.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],[d,p,f,g,y]=v7(s,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,f),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const mxe={kernelName:Lx,backendName:"cpu",kernelFunc:fxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gxe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[u,c,d]=x7(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const yxe={kernelName:Fx,backendName:"cpu",kernelFunc:gxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bxe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[u,c]=bT(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const vxe={kernelName:Bx,backendName:"cpu",kernelFunc:bxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xxe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[u,c]=bT(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const wxe={kernelName:zx,backendName:"cpu",kernelFunc:xxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kxe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=Fp(i,a,s),f=!1,g=n.bufferSync(a);let y;switch(i.dtype){case"bool":{const v=n.bufferSync(i),b=!!n.data.get(o.dataId).values[0];y=Zp(g,v,s,p,c,u,l,d,b,f);break}case"float32":{const v=n.bufferSync(i),b=n.data.get(o.dataId).values[0];y=Zp(g,v,s,p,c,u,l,d,b,f);break}case"int32":{const v=n.bufferSync(i),b=n.data.get(o.dataId).values[0];y=Zp(g,v,s,p,c,u,l,d,b,f);break}case"string":{const v=n.bufferSync(i),b=ll(n.data.get(o.dataId).values[0]);y=Zp(g,v,s,p,c,u,l,d,b,f);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(s,y.dtype,y.values)}const Sxe={kernelName:jx,backendName:"cpu",kernelFunc:kxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:o}=r,s=Xt(o,a.shape)[0],l=Y4(a,i,s),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return l.map(d=>{const p=[...c];p[s]=d;const f=nd({inputs:{x:a},backend:n,attrs:{begin:u,size:p}});return u[s]+=d,f})}const Ixe={kernelName:Ax,backendName:"cpu",kernelFunc:Cxe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Exe={kernelName:K3,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Ge(n,"square");const a=r.data.get(n.dataId).values,i=new Float32Array(a.length);for(let o=0;o<a.length;++o){const s=a[o];i[o]=s*s}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Nxe=pn(pg,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),Txe={kernelName:pg,backendName:"cpu",kernelFunc:Nxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _xe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r;Ge(a,"stridedSlice");const{finalShapeSparse:f,finalShape:g,isIdentity:y,sliceDim0:v,isSimpleSlice:b,begin:x,end:w,strides:S}=LN(a.shape,i,o,s,l,u,c,d,p);let C;if(y)C=Nn({inputs:{x:a},backend:n,attrs:{shape:g}});else if(v||b){V(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const I=MN(x,w,S),_=nd({inputs:{x:a},backend:n,attrs:{begin:x,size:I}});C=Nn({inputs:{x:_},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(_)}else{const I=n.bufferSync(a),_=k7(f,I,S,x);C=n.makeTensorInfo(g,_.dtype,_.values)}return C}const Rxe={kernelName:Vx,backendName:"cpu",kernelFunc:_xe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $xe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,p=n.data.get(c.dataId).values,f=n.data.get(d.dataId).values,[g,y]=S7(p,f,a,i,o,s,l,u);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}const Oxe={kernelName:Ux,backendName:"cpu",kernelFunc:$xe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mxe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,d]=C7(s,l,a),p=c.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const Pxe={kernelName:Gx,backendName:"cpu",kernelFunc:Mxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Axe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(i.dataId).values,s=I7(o,a);return n.makeTensorInfo(i.shape,"int32",s)}const Dxe={kernelName:Wx,backendName:"cpu",kernelFunc:Axe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Lxe=pn(ug,t=>Math.tan(t)),Fxe={kernelName:ug,backendName:"cpu",kernelFunc:Lxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Bxe=pn(cg,t=>Math.tanh(t)),zxe={kernelName:cg,backendName:"cpu",kernelFunc:Bxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;Ge(a,"tile");const o=N7(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const Vxe={kernelName:dg,backendName:"cpu",kernelFunc:jxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:o}=r;Ge(a,"topk");const s=n.data.get(a.dataId).values,[l,u]=_7(s,a.shape,a.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const Gxe={kernelName:Hx,backendName:"cpu",kernelFunc:Uxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wxe(t){const{inputs:e,attrs:n,backend:r}=t,{image:a,transforms:i}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=n,[c,d,p,f]=a.shape,[g,y]=u??[d,p],v=[c,g,y,f],b=Ze(a.shape),x=b[0],w=b[1],S=b[2],C=Ze(v),I=C[0],_=C[1],T=C[2],M=Er(a.dtype,be(v));M.fill(l);const P=r.data.get(a.dataId).values,L=r.data.get(i.dataId).values;for(let j=0;j<c;++j){const B=i.shape[0]===1?L:L.subarray(j*8,j*8+8);for(let K=0;K<g;++K)for(let X=0;X<y;++X)for(let Z=0;Z<f;++Z){let H;const F=B[6]*X+B[7]*K+1;if(F===0)continue;const Y=(B[0]*X+B[1]*K+B[2])/F,Q=(B[3]*X+B[4]*K+B[5])/F,ne=K7(Y,p,s),se=K7(Q,d,s);switch(o){case"nearest":H=Qxe(P,d,p,x,w,S,j,se,ne,Z,l);break;case"bilinear":H=Zxe(P,d,p,x,w,S,j,se,ne,Z,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const pe=j*I+K*_+X*T+Z;M[pe]=H}return r.makeTensorInfo(v,a.dtype,M)}return{dataId:r.write(M,v,a.dtype),shape:a.shape,dtype:a.dtype}}const Hxe={kernelName:qx,backendName:"cpu",kernelFunc:Wxe};function K7(t,e,n){switch(n){case"reflect":return qxe(t,e);case"wrap":return Kxe(t,e);case"nearest":return Yxe(t,e);case"constant":default:return Xxe(t)}}function qxe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return mu(0,n,e-1)}function Kxe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return mu(0,n,e-1)}function Xxe(t,e){return t}function Yxe(t,e){return mu(0,t,e-1)}function Wg(t,e,n,r,a,i,o,s,l,u,c){const d=o*r+s*a+l*i+u;return 0<=s&&s<e&&0<=l&&l<n?t[d]:c}function Qxe(t,e,n,r,a,i,o,s,l,u,c){const d=Math.round(s),p=Math.round(l);return Wg(t,e,n,r,a,i,o,d,p,u,c)}function Zxe(t,e,n,r,a,i,o,s,l,u,c){const d=Math.floor(s),p=Math.floor(l),f=d+1,g=p+1,y=(g-l)*Wg(t,e,n,r,a,i,o,d,p,u,c)+(l-p)*Wg(t,e,n,r,a,i,o,d,g,u,c),v=(g-l)*Wg(t,e,n,r,a,i,o,f,p,u,c)+(l-p)*Wg(t,e,n,r,a,i,o,f,g,u,c);return(f-s)*y+(s-d)*v}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jxe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;Ge(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:s,outputShape:l,indices:u}=R7(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const e2e={kernelName:Kx,backendName:"cpu",kernelFunc:Jxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function t2e(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a.shape.length,s=a.shape[i],l=new Array(o-1);let u=0;for(let f=0;f<o;f++)f!==i&&(l[u++]=a.shape[f]);const c=new Array(o).fill(0),d=a.shape.slice();d[i]=1;const p=new Array(s);for(let f=0;f<p.length;f++){c[i]=f;const g=nd({inputs:{x:a},backend:n,attrs:{begin:c,size:d}});p[f]=Nn({inputs:{x:g},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(g)}return p}const n2e={kernelName:Xx,backendName:"cpu",kernelFunc:t2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function r2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:o}=r;Ge(a,"unsortedSegmentSum");const s=a.shape.length,l=i.shape.length,u=[],c=[],d=s-l;let p=i;for(let g=0;g<d;++g){const y=W2({inputs:{input:p},backend:n,attrs:{dim:g+1}});p=y,c.push(y)}for(let g=0;g<o;++g){const y=sl(g,"int32"),v=n.makeTensorInfo([],"int32",y),b=W9({inputs:{a:v,b:p},backend:n}),x=Ru({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),w=U2({inputs:{a:x,b:a},backend:n}),S=Gg({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});u.push(S),c.push(v),c.push(b),c.push(x),c.push(w),c.push(S)}const f=W7({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),f}const a2e={kernelName:Yx,backendName:"cpu",kernelFunc:r2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const i2e=[n1e,Vge,a1e,o1e,Kge,l1e,c1e,p1e,f1e,g1e,b1e,x1e,k1e,I1e,N1e,R1e,O1e,P1e,D1e,e1e,F1e,z1e,V1e,G1e,Hge,Yge,H1e,Uge,K1e,Y1e,Q1e,J1e,tye,rye,iye,sye,uye,dye,hye,mye,yye,vye,wye,kye,Cye,Eye,Tye,_ye,Rye,$ye,Pye,q0e,Dye,Qge,Gye,Zge,Wye,e0e,Qye,Zye,ebe,n0e,rbe,ibe,sbe,ube,dbe,a0e,o0e,Gge,hbe,X1e,mbe,ybe,vbe,K0e,l0e,c0e,wbe,p0e,Sbe,Ebe,Tbe,$be,Mbe,Abe,Dbe,f0e,Fbe,zbe,Vbe,Gbe,Hbe,Kbe,Ybe,g0e,Zbe,tve,ave,b0e,x0e,sve,cve,hve,k0e,mve,yve,bve,H7,kve,Y0e,I0e,Cve,Eve,Tve,Wge,kT,Rve,Q0e,Z0e,J0e,Ove,Pve,Dve,Fve,zve,jve,Uve,M0e,Wve,Yve,Zve,nxe,A0e,axe,oxe,lxe,D0e,nve,dxe,hxe,mxe,yxe,vxe,wxe,Sxe,Ixe,B0e,Exe,j0e,Txe,Rxe,Oxe,Pxe,Dxe,W0e,Oye,Fxe,zxe,Vxe,Gxe,Hxe,S0e,e2e,n2e,a2e,gve];for(const t of i2e)n2(t);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rd={},q2={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function o2e(t,e){rd[t]=e}function Go(t,e){if(!(t in rd)||e!=null){const r=l2e(t,e);if(r!==null)rd[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=rd[t];return n==null||n.isContextLost()?(delete rd[t],Go(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),rd[t])}function s2e(t){if(typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function l2e(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??s2e(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete rd[t]},!1),fe().getBool("SOFTWARE_WEBGL_ENABLED")&&(q2.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",q2)||n.getContext("experimental-webgl",q2):n.getContext("webgl2",q2)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Hg;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Hg||(Hg={}));var Pi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Pi||(Pi={}));var Zr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Zr||(Zr={}));function qg(t,e){return[e,t]}function u2e(t,e){return t*e}function K2(t){const e=be(t),n=Math.ceil(e/4);return cv(n)}function th(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function c2e(t,e){const[n,r]=th(t,e);return n*r*4}function IT(t,e){const n=t;let r,a,i,o,s,l,u,c,d,p;return fe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,a=n.R16F,i=n.RGBA16F,o=n.RGBA32F,s=n.RED,u=4,c=1,d=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=t.RGBA,a=t.RGBA,i=t.RGBA,o=n.RGBA,s=t.RGBA,u=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:p}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function He(t,e){const n=e();return fe().getBool("DEBUG")&&d2e(t),n}function d2e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+m2e(t,e))}const p2e=596e-10,h2e=65504;function f2e(t){return!!(fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||p2e<Math.abs(t)&&Math.abs(t)<h2e)}function m2e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function X2(t,e){return vl(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function g2e(t,e){const n=vl(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(He(t,()=>t.shaderSource(n,e)),He(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function y2e(t,e){const n=vl(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(He(t,()=>t.shaderSource(n,e)),He(t,()=>t.compileShader(n)),fe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw X7(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const b2e=/ERROR: [0-9]+:([0-9]+):/g;function X7(t,e){const n=b2e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],a=t.split(`
`),i=a.length.toString().length+2,o=a.map((d,p)=>Lc((p+1).toString(),i)+d);let s=0;for(let d=0;d<o.length;d++)s=Math.max(o[d].length,s);const l=o.slice(0,r-1),u=o.slice(r-1,r),c=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Lc(u[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function v2e(t){return vl(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function x2e(t,e){if(He(t,()=>t.linkProgram(e)),!fe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function ET(t,e){if(He(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function w2e(t,e){const n=vl(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),He(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function k2e(t,e){const n=vl(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return He(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),He(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function S2e(t){return vl(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function C2e(t,e){const n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,a=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function I2e(t){return vl(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function Y7(t,e,n,r,a,i,o){const s=t.getAttribLocation(e,n);return s===-1?!1:(He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),He(t,()=>t.vertexAttribPointer(s,a,t.FLOAT,!1,i,o)),He(t,()=>t.enableVertexAttribArray(s)),!0)}function E2e(t,e,n){$2e(t,n),He(t,()=>t.activeTexture(t.TEXTURE0+n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function N2e(t,e,n){return vl(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function T2e(t,e,n){return t.getUniformLocation(e,n)}function _2e(t,e,n,r){He(t,()=>E2e(t,e,r)),He(t,()=>t.uniform1i(n,r))}function NT(t,e,n){He(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),He(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function Q7(t,e){He(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),He(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Y2(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+R2e(t,e))}function R2e(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function vl(t,e,n){const r=He(t,()=>e());if(r==null)throw new Error(n);return r}function $2e(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const a=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${a}.`)}}function nh(t,e=2){return be(t.slice(0,t.length-e))}function rh(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function TT(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[nh(t),...rh(t)]),e}function O2e(t,e=!1){let n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=fe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&fe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((s,l)=>l>=t.length-2?uv(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=ol(t).newShape);let a=be(t),i=null;t.length<=1&&a<=n?i=[1,a]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const s=nh(t);let l=2,u=2;t.length&&([l,u]=rh(t)),a=s*(l/2)*(u/2),i=cv(a).map(c=>c*2)}else i=cv(a);return i}function Q2(t){return t%2===0}function Z2(t,e){if(t=t.slice(-2),e=e.slice(-2),vn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||Q2(n)&&Q2(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Q2(t[0])&&Q2(e[0])}let _T,RT;function M2e(t){if(_T==null){const e=Go(t);_T=e.getParameter(e.MAX_TEXTURE_SIZE)}return _T}function P2e(t){if(RT==null){const e=Go(t);RT=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,RT)}function A2e(t){if(t===0)return 0;let e;const n=Go(t);return fo(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:fo(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function fo(t,e){return t.getExtension(e)!=null}function Z7(t){try{if(Go(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function D2e(t){if(t===0)return!1;const e=Go(t);if(t===1){if(!fo(e,"OES_texture_float"))return!1}else if(!fo(e,"EXT_color_buffer_float"))return!1;return $T(e)}function L2e(t){if(t===0)return!1;const e=Go(t);if(t===1){if(!fo(e,"OES_texture_float")||!fo(e,"WEBGL_color_buffer_float"))return!1}else{if(fo(e,"EXT_color_buffer_float"))return $T(e);const n="EXT_color_buffer_half_float";if(fo(e,n)){const r=e.getExtension(n);return F2e(e,r)}return!1}return $T(e)}function $T(t){const e=IT(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function F2e(t,e){const n=IT(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),s}function B2e(t){return t!==2?!1:Go(t).fenceSync!=null}function Kg(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&V(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ye=fe();Ye.registerFlag("HAS_WEBGL",()=>Ye.getNumber("WEBGL_VERSION")>0),Ye.registerFlag("WEBGL_VERSION",()=>Z7(2)?2:Z7(1)?1:0),Ye.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),Ye.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ye.get("WEBGL_VERSION")===2),Ye.registerFlag("WEBGL_CPU_FORWARD",()=>!0),Ye.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),Ye.registerFlag("WEBGL_PACK",()=>Ye.getBool("HAS_WEBGL")),Ye.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_CLIP",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_PACK_REDUCE",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_CONV_IM2COL",()=>Ye.getBool("WEBGL_PACK")),Ye.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>M2e(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>P2e(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Ye.getNumber("WEBGL_VERSION");return t===0?0:A2e(t)}),Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ye.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!uN()),Ye.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>D2e(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ye.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ye.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),Ye.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>L2e(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_FENCE_API_ENABLED",()=>B2e(Ye.getNumber("WEBGL_VERSION"))),Ye.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ye.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),Ye.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)}),Ye.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>uN()?1:-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)}),Ye.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),Ye.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),Ye.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),Ye.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),Ye.registerFlag("WEBGL_EXP_CONV",()=>!1),Ye.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ye.getBool("IS_TEST")),Ye.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),Ye.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),Ye.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pa(){let t,e,n,r,a,i,o,s,l,u;return fe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=fe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ad(t,e,n="index"){const r=Ze(e);return r.map((a,i)=>{const o=`int ${t[i]} = ${n} / ${a}`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${a}`:`index -= ${t[i]} * ${a}`;return`${o}; ${s};`}).join("")}function J2(t,e,n="index"){const r=Ze(e);return r.map((a,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${s};`}).join("")}function z2e(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]=`(${a[i+1]} * ${r[i+1]})`;return a}function j2e(t,e,n="index"){const r=t.map((i,o)=>o),a=z2e(r,e);return a.map((i,o)=>{const s=`int ${t[o]} = ${n} / ${a[o]}`,l=o===a.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${a[o]}`:`index -= ${t[o]} * ${a[o]}`;return`${s}; ${l};`}).join("")}function OT(t){const e=Ze(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function MT(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const J7=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const{getBroadcastDims:eB}=I9;function V2e(t,e,n){const r=[];if(t.forEach(p=>{const f=be(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?r.push(`uniform float ${p.name}${f>1?`[${f}]`:""};`):(r.push(`uniform sampler2D ${p.name};`),r.push(`uniform int offset${p.name};`)),n.enableShapeUniforms){const{uniformShape:g}=PT(n.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(g.length){case 1:r.push(`uniform int ${p.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${p.name}Shape;`);break}r.push(`uniform ivec2 ${p.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(p=>{r.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const a=r.join(`
`),i=t.map(p=>U2e(p,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,s=Pa(),l=H2e(s);let u,c,d=X2e(s);return e.isPacked?(u=G2e(e.logicalShape,o,n.enableShapeUniforms),c=K2e(s)):(u=W2e(e.logicalShape,o,n.enableShapeUniforms),c=q2e(s)),n.packedInputs&&(d+=J2e),[d,l,c,a,u,i,n.userCode].join(`
`)}function ah(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return dwe(t,e);case 1:return hwe(t,e);case 2:return mwe(t,e);case 3:return ywe(t,e);case 4:return vwe(t,e);case 5:return xwe(t);case 6:return wwe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function tB(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return cwe(t);case 1:return pwe(t,e);case 2:return fwe(t,e);case 3:return gwe(t,e);default:return bwe(t,e)}}function U2e(t,e,n=!1,r){let a="";n?a+=tB(t,r):a+=ah(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?a+=kwe(t,e):a+=Swe(t,e)),a}function G2e(t,e,n){switch(t.length){case 0:return nB();case 1:return ewe(t,e,n);case 2:return lwe(t,e,n);case 3:return nwe(t,e,n);default:return awe(t,e,n)}}function W2e(t,e,n){switch(t.length){case 0:return nB();case 1:return twe(t,e,n);case 2:return uwe(t,e,n);case 3:return rwe(t,e,n);case 4:return iwe(t,e,n);case 5:return owe(t,e);case 6:return swe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function H2e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function q2e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function K2e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function X2e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Y2e}
    ${Q2e}
    ${Z2e}
  `}const Y2e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Q2e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Z2e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,J2e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function nB(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function ewe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function twe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function nwe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[2]/2),i=a*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec3(b, r, c);
    }
  `}function rwe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${J2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=ad(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function awe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[t.length-1]/2),i=a*Math.ceil(t[t.length-2]/2);let o=i,s="",l="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],s=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+s,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${s}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec${t.length}(${l});
    }
  `}function iwe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${J2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=ad(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function owe(t,e){const n=ad(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function swe(t,e){const n=ad(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function lwe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(vn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const a=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec2(r, c);
    }
  `}function uwe(t,e,n){return vn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function id(t){return`offset${t}`}function cwe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Pa();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function dwe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[a,i]=t.shapeInfo.texShape;if(a===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=id(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[s,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${s}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function pwe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape,i=Pa();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function hwe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${ih(t)}
      }
    `;const a=t.shapeInfo.texShape,i=a[0],o=a[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=id(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${s});
      return sampleTexture(${n}, uv);
    }
  `}function fwe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],s=i[1],l=Pa();if(i!=null&&vn(n,i))return e?`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${a}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${a}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function mwe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&vn(n,i)){if(e)return`
      float ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=i[0],f=i[1];return`
    float ${a}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:s}=ol(n),l=o;if(l.length<n.length){const p=oh(t,l),f=["row","col"];return`
      ${ah(p,e)}
      float ${a}(int row, int col) {
        return ${a}(${sh(f,s)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${ih(t)}
      }
    `;const u=i[0],c=i[1],d=id(r);return c===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${a}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${a}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function gwe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const p=n.slice(1),f=[1,2],g=oh(t,p),y=["b","row","col"];return`
        ${tB(g,e)}
        vec4 ${a}(int b, int row, int col) {
          return ${a}(${sh(y,f)});
        }
      `}const s=Pa();if(e)return`
    vec4 ${a}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `;const l=o[0],u=o[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${a}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `}function ywe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:s,keptDims:l}=ol(n),u=s;if(u.length<n.length){const y=oh(t,u),v=["row","col","depth"];return`
        ${ah(y,e)}
        float ${a}(int row, int col, int depth) {
          return ${a}(${sh(v,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${ih(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],p=c[1],f=t.shapeInfo.flatOffset;if(p===i&&f==null)return e?`
      float ${a}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${a}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===o&&f==null)return e?`
      float ${a}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const g=id(r);return e?`
    float ${a}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${g};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${a}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${g};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function bwe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Pa();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,s=t.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=l[0],c=l[1],d=Math.ceil(i[o-1]/2);let p=d*Math.ceil(i[o-2]/2),f="int b, int row, int col",g=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let y=2;y<o-1;y++)f=`int b${y}, `+f,p*=i[o-y-1],g=`b${y} * ${p} + `+g;return`
    vec4 ${r}(${f}) {
      int index = ${g};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${a.texture2D}(${n}, uv);
    }
  `}function vwe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,{newShape:l,keptDims:u}=ol(n);if(l.length<n.length){const x=oh(t,l),w=["row","col","depth","depth2"];return`
      ${ah(x,e)}
      float ${a}(int row, int col, int depth, int depth2) {
        return ${a}(${sh(w,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${s}, ${o}, ${i}, 1)));
        ${ih(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1],g=`int stride2 = ${r}Shape[3];`,y=`int stride1 = ${r}Shape[2] * stride2;`,v=`int stride0 = ${r}Shape[1] * stride1;`;if(f===s&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        ${g}
        ${y}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===i&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const b=id(r);return e?`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${g}
      ${y}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${b});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${p}, ${f}, index + ${b});
      return sampleTexture(${r}, uv);
    }
  `}function xwe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e[4],i=e[3]*a,o=e[2]*i,s=e[1]*o,{newShape:l,keptDims:u}=ol(e);if(l.length<e.length){const y=oh(t,l),v=["row","col","depth","depth2","depth3"];return`
      ${ah(y)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${sh(v,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${s}, ${o}, ${i}, ${a})) +
          depth3;
        ${ih(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1];if(f===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=id(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} + depth * ${i} +
          depth2 * ${a} + depth3 + ${g};
      vec2 uv = uvFromFlat(${p}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function wwe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=ol(e);if(a.length<e.length){const v=oh(t,a),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${ah(v)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${sh(b,i)});
      }
    `}const o=e[5],s=e[4]*o,l=e[3]*s,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${s})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${ih(t)}
      }
    `;const d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,f=p[0],g=p[1];if(g===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${s}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=id(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${s} + depth3 * ${o} + depth4 + ${y};
      vec2 uv = uvFromFlat(${f}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function ih(t){const e=t.name,n=be(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function kwe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,s=eB(t.shapeInfo.logicalShape,e.logicalShape),l=Tn(o),u=o-i;let c;const d=["x","y","z","w","u","v"];i===0?c="":o<2&&s.length>=1?c="coords = 0;":c=s.map(v=>`coords.${d[v+u]} = 0;`).join(`
`);let p="";o<2&&i>0?p="coords":p=t.shapeInfo.logicalShape.map((v,b)=>`coords.${d[b+u]}`).join(", ");let f="return outputValue;";const g=be(t.shapeInfo.logicalShape)===1,y=be(e.logicalShape)===1;if(i===1&&!g&&!y)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!y)o===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(s.length){const v=i-2,b=i-1;s.indexOf(v)>-1&&s.indexOf(b)>-1?f="return vec4(outputValue.x);":s.indexOf(v)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(b)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${a}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${p});
      ${f}
    }
  `}function Swe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===l&&t.shapeInfo.flatOffset==null&&vn(o,i))return`
      float ${a}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Tn(l),c=eB(t.shapeInfo.logicalShape,e.logicalShape),d=l-s;let p;const f=["x","y","z","w","u","v"];s===0?p="":l<2&&c.length>=1?p="coords = 0;":p=c.map(y=>`coords.${f[y+d]} = 0;`).join(`
`);let g="";return l<2&&s>0?g="coords":g=t.shapeInfo.logicalShape.map((y,v)=>`coords.${f[v+d]}`).join(", "),`
    float ${a}() {
      ${u} coords = getOutputCoords();
      ${p}
      return get${r}(${g});
    }
  `}function Tn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function PT(t,e,n){const{newShape:r,keptDims:a}=ol(e),i=e.length,o=t&&i===3&&e[0]===1,s=o?e.slice(1):r,l=!t&&i>1&&!vn(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?s:e,keptDims:a}}function oh(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function sh(t,e){return e.map(n=>t[n]).join(", ")}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cwe(t,e,n,r){const a=n.map((c,d)=>{const p={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(p.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:p}}),i=a.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=V2e(a,o,e),l=y2e(t.gl,s),u=t.createProgram(l);return fe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:i,outShapeInfo:o},rB(t,e,u))}function rB(t,e,n){const r={},a={},i={},o=[];let s,l,u,c=null,d=null;d=t.getUniformLocation(n,"NAN",!1),fe().getNumber("WEBGL_VERSION")===1&&(c=t.getUniformLocation(n,"INFINITY",!1));const p=!1;for(let f=0;f<e.variableNames.length;f++){const g=e.variableNames[f];r[g]=t.getUniformLocation(n,g,p),r[`offset${g}`]=t.getUniformLocation(n,`offset${g}`,p),e.enableShapeUniforms&&(a[`${g}Shape`]=t.getUniformLocation(n,`${g}Shape`,p),i[`${g}TexShape`]=t.getUniformLocation(n,`${g}TexShape`,p))}return e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",p),u=t.getUniformLocation(n,"outShapeStrides",p),l=t.getUniformLocation(n,"outTexShape",p)),e.customUniforms&&e.customUniforms.forEach((f,g)=>{o[g]=t.getUniformLocation(n,f.name,p)}),{uniformLocations:r,customUniformLocations:o,infLoc:c,nanLoc:d,inShapesLocations:a,inTexShapesLocations:i,outShapeLocation:s,outShapeStridesLocation:u,outTexShapeLocation:l}}function aB(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const a=n.logicalShape,i=e[r],o=i.shape;if(!vn(a,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${a} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const s=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!vn(s,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${l} must match`)})}function Iwe(t,e,n,r,a){e.program.enableShapeUniforms||(aB(e.inShapeInfos,n),aB([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),fe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((l,u)=>{const c=e.program.variableNames[u],d=e.uniformLocations[c],p=e.uniformLocations[`offset${c}`],f=e.inShapesLocations[`${c}Shape`],g=e.inTexShapesLocations[`${c}TexShape`];if(f){const{uniformShape:y}=PT(e.program.packedInputs,l.shape,l.texData.texShape);switch(y.length){case 1:t.gl.uniform1iv(f,new Int32Array(y));break;case 2:t.gl.uniform2iv(f,new Int32Array(y));break;case 3:t.gl.uniform3iv(f,new Int32Array(y));break;case 4:t.gl.uniform4iv(f,new Int32Array(y));break}}if(g&&t.gl.uniform2i(g,l.texData.texShape[0],l.texData.texShape[1]),d!=null){if(l.isUniform){if(be(l.shape)<2)t.gl.uniform1f(d,l.uniformValues[0]);else{let y=l.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),t.gl.uniform1fv(d,y)}return}l.texData.slice!=null&&p!=null&&t.gl.uniform1i(p,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,d,u)}});const s=e.outShapeLocation;if(s)switch(r.shape.length){case 1:t.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(s,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Ze(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&a&&e.program.customUniforms.forEach((l,u)=>{const c=e.customUniformLocations[u],d=a[u];if(l.type==="float")t.gl.uniform1fv(c,d);else if(l.type==="vec2")t.gl.uniform2fv(c,d);else if(l.type==="vec3")t.gl.uniform3fv(c,d);else if(l.type==="vec4")t.gl.uniform4fv(c,d);else if(l.type==="int")t.gl.uniform1iv(c,d);else if(l.type==="ivec2")t.gl.uniform2iv(c,d);else if(l.type==="ivec3")t.gl.uniform3iv(c,d);else if(l.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}),t.executeProgram()}function Ewe(t,e,n){let r="";e.concat(n).forEach(o=>{const s=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=PT(t.packedInputs,o.shape,l);let p="",f="",g="";if(c.length===1&&t.packedInputs){const C=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${C[0]>1}_${C[1]>1}`}else if(c.length===2&&!t.packedInputs)f=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const C=Ze(c);g=`${C[0]===l[1]}_${C[C.length-1]===l[1]}`}const y=o.shape.length,v=c.length===2&&vn(o.shape,l),b=be(o.shape)===1,x=qc(o.shape,n.shape),w=!t.packedInputs&&y===n.shape.length&&vn(l,n.texData.texShape),S=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${y}_${w}_${u?d:""}_${c.length}_${b}_${x}_${v}_${p}_${f}_${g}_${S}_${s}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${s}`}});const a=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+a+`${fe().getNumber("WEBGL_VERSION")}`,i}function Aa(t){return fe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Nwe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Hg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Pa();this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?J2(["r","c","d"],e):ad(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Twe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Hg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Pa();this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?J2(["r","c","d"],e):ad(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class _we{constructor(e){this.variableNames=["A"],this.outTexUsage=Pi.DOWNLOAD;const n=Pa();this.outputShape=e,this.userCode=`
      ${J7}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Rwe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Pi.DOWNLOAD;const n=Pa();this.outputShape=e,this.userCode=`
      ${J7}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class $we{constructor(e,n=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Pa();this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length);let a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?MT():OT(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${r.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${r.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Owe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Pa();this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length);let a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){const l=o*2+s;a+=`
          localCoords = coords;
          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${s};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?MT():OT(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${a}

          ${r.output} = ${i};
        }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mwe(t){const e=Pa(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return g2e(t,n)}function Pwe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return w2e(t,e)}function Awe(t){const e=new Uint16Array([0,1,2,2,1,3]);return k2e(t,e)}function Xg(t,e,n,r,a,i){C2e(e,n);const o=S2e(t),s=t.TEXTURE_2D;return He(t,()=>t.bindTexture(s,o)),He(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),He(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),He(t,()=>t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)),He(t,()=>t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)),fe().getNumber("WEBGL_VERSION")===1?He(t,()=>t.texImage2D(s,0,r,e,n,0,a,i,null)):He(t,()=>t.texStorage2D(s,1,r,e,n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function iB(t){return t.internalFormatFloat}function Dwe(t,e,n,r){const[a,i]=qg(e,n);return Xg(t,a,i,iB(r),r.textureFormatFloat,t.FLOAT)}function oB(t){return t.internalFormatHalfFloat}function Lwe(t,e,n,r){const[a,i]=qg(e,n);return Xg(t,a,i,oB(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function sB(t){return t.downloadTextureFormat}function Fwe(t,e,n,r){const[a,i]=qg(e,n);return Xg(t,a,i,sB(r),t.RGBA,t.UNSIGNED_BYTE)}function lB(t){return t.internalFormatPackedFloat}function Bwe(t,e,n,r){const[a,i]=th(e,n);return Xg(t,a,i,lB(r),t.RGBA,t.FLOAT)}function uB(t){return t.internalFormatPackedHalfFloat}function zwe(t,e,n,r){const[a,i]=th(e,n);return Xg(t,a,i,uB(r),t.RGBA,r.textureTypeHalfFloat)}function jwe(t,e,n){return He(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Y7(t,e,"clipSpacePos",n,3,20,0)&&Y7(t,e,"uv",n,2,20,12)}function Vwe(t,e,n,r,a,i){He(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,s,l;a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),s=t.FLOAT,l=i.internalFormatPackedFloat),o.set(a),fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,s,o)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,s,o)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Uwe(t,e,n){He(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):fe().getNumber("WEBGL_VERSION")===2?He(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):He(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),He(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Gwe(t,e,n,r){const a=t.createBuffer();He(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,a));const i=4*4*e*n;return He(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)),He(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),He(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),a}function Wwe(t,e,n){const r=t,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function Hwe(t,e,n,r){const[a,i]=qg(e,n),o=4,s=new Uint8Array(u2e(e*n,o));return He(t,()=>t.readPixels(0,0,a,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function qwe(t,e,n,r,a,i,o,s){const l=t,u=new Float32Array(c2e(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function Kwe(t,e,n){const r=new Float32Array(e*n*4);return He(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class AT{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=fe().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,o2e(n,e)):this.gl=Go(n);let r="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),fe().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=X2(this.gl,i),fo(this.gl,o))this.textureHalfFloatExtension=X2(this.gl,o);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),fo(this.gl,a))this.colorBufferHalfFloatExtension=X2(this.gl,a);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",fo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(fo(this.gl,a))this.colorBufferHalfFloatExtension=this.gl.getExtension(a);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=Pwe(this.gl),this.indexBuffer=Awe(this.gl),this.framebuffer=I2e(this.gl),this.textureConfig=IT(this.gl,this.textureHalfFloatExtension)}get debug(){return fe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;He(e,()=>e.finish()),He(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),He(e,()=>e.deleteFramebuffer(this.framebuffer)),He(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),He(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),He(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),Dwe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),Lwe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),Fwe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),Uwe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,a){this.throwIfDisposed(),Vwe(this.gl,e,n,r,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),zwe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),Bwe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(Q7(this.gl,this.framebuffer),this.outputTexture=null),He(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Hwe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,a,i,o){return qwe(this.gl,e,n,r,a,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return Wwe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const a=Gwe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(fe().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=a.clientWaitSync(i,0,0);return o===a.ALREADY_SIGNALED||o===a.CONDITION_SATISFIED},n=i}else fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Kwe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=Mwe(n));const r=v2e(n);return He(n,()=>n.attachShader(r,this.vertexShader)),He(n,()=>n.attachShader(r,e)),x2e(n,r),this.debug&&ET(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=jwe(n,this.program,this.vertexBuffer)),r}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&He(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&ET(this.gl,this.program),He(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?N2e(this.gl,e,n):T2e(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),He(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),_2e(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[a,i]=th(n,r);this.setOutputMatrixTextureDriver(e,a,i)}setOutputMatrixWriteRegion(e,n,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,n)}setOutputPackedMatrixWriteRegion(e,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&ET(this.gl,this.program),Y2(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),He(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),He(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=X2(this.gl,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(a.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await _3(()=>this.disposed||this.isQueryAvailable(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),a=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=Xwe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in fe().platform&&(r=fe().platform.setTimeoutCustom.bind(fe().platform)),_3(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),NT(this.gl,e,this.framebuffer),this.debug&&Y2(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(NT(this.gl,this.outputTexture,this.framebuffer),this.debug&&Y2(this.gl)):Q7(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const a=this.gl;NT(a,e,this.framebuffer),this.debug&&Y2(a),this.outputTexture=e,He(a,()=>a.viewport(0,0,n,r)),He(a,()=>a.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,a){this.throwIfDisposed(),He(this.gl,()=>this.gl.scissor(e,n,r,a))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Xwe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const{addImpl:Ywe,bincountImpl:cB,bincountReduceImpl:Qwe,castImpl:Zwe,ceilImpl:Jwe,concatImpl:eke,equalImpl:tke,expImpl:nke,expm1Impl:rke,floorImpl:ake,gatherNdImpl:ike,gatherV2Impl:oke,greaterImpl:ske,greaterEqualImpl:lke,lessImpl:uke,lessEqualImpl:cke,linSpaceImpl:dke,logImpl:pke,maxImpl:hke,maximumImpl:fke,minimumImpl:mke,multiplyImpl:gke,negImpl:yke,notEqualImpl:bke,prodImpl:vke,raggedGatherImpl:xke,raggedTensorToTensorImpl:wke,rangeImpl:kke,rsqrtImpl:Ske,scatterImpl:Cke,sigmoidImpl:Ike,simpleAbsImpl:dB,sliceImpl:Eke,sparseFillEmptyRowsImpl:Nke,sparseReshapeImpl:Tke,sparseSegmentReductionImpl:pB,sqrtImpl:_ke,stridedSliceImpl:Rke,stringNGramsImpl:$ke,stringSplitImpl:Oke,stringToHashBucketFastImpl:Mke,subImpl:Pke,tileImpl:Ake,topKImpl:Dke,transposeImpl:DT,uniqueImpl:Lke}=H0e;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hB(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Da(t,e){return e===1?[t]:hB(t,e)}function Fke(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Bke{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Aa(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Da("rc",this.rank),r=Tn(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${a}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let i=`${r===0?"r":"rp1"}, ${a===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],a=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${a};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class fB{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length);let r="";for(let a=0;a<4;a++){let i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${a}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${a>0?"}":""}
      `}this.userCode=`
      ${zke(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?MT():OT(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function zke(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?j2e(["r","c","d"],"inputShape"):ad(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class jke{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,n,r){const a=gB(n,r),i=yB(e,a,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=mB(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].shift();return this.usedTextures[i].push(l),l}let s;return a===Zr.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===Zr.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===Zr.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===Zr.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===Zr.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,n,r,a){if(this.freeTextures==null)return;const i=gB(r,a),o=yB(n,i,a);o in this.freeTextures||(this.freeTextures[o]=[]);const s=mB(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,a),l=fe().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Vke(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F||e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function mB(t,e,n,r,a){const i=Uke(e,r);let o;if(a){const[l,u]=th(t[0],t[1]);o=l*u}else{const[l,u]=qg(t[0],t[1]);o=l*u}const s=Vke(n,i);return o*s}function Uke(t,e){switch(t){case Zr.PACKED_2X2_FLOAT32:return lB(e);case Zr.PACKED_2X2_FLOAT16:return uB(e);case Zr.UNPACKED_FLOAT32:return iB(e);case Zr.UNPACKED_FLOAT16:return oB(e);case Zr.PACKED_4X1_UNSIGNED_BYTE:return sB(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function Gke(t){return fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Zr.PACKED_2X2_FLOAT32:Zr.UNPACKED_FLOAT32:t?Zr.PACKED_2X2_FLOAT16:Zr.UNPACKED_FLOAT16}function gB(t,e){if(t===Pi.UPLOAD)return Zr.PACKED_2X2_FLOAT32;if(t===Pi.RENDER||t==null)return Gke(e);if(t===Pi.DOWNLOAD||t===Pi.PIXELS)return Zr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function yB(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class xl{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const mo="if (isnan(x)) return x;",Wke="return x;",bB="return abs(x);",Hke="return (x >= 0.0) ? x : (exp(x) - 1.0);",qke=mo+`
  return (x < 0.0) ? 0.0 : x;
`,Kke=mo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,lh="return x;",Xke="return 1.0 / (1.0 + exp(-1.0 * x));";/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Yke="return x;",Qke=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Zke=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Jke=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,eSe="return 1.0 / (1.0 + exp(-1.0 * x));";class od{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class tSe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length);const n=e.length,r=Da("rc",n),a=Tn(n),i=Fke(n,r),o=r.slice(-2),s=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${a} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${s}));
      }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nSe=k2,rSe=1e-7,aSe=1e-4,LT={};function iSe(t){return t in LT||(LT[t]={}),LT[t]}const oSe=fe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),sSe=600;function lSe(){return fe().global.screen==null?1024:fe().global.screen.height*fe().global.screen.width*window.devicePixelRatio*sSe/1024/1024}class Dw extends lv{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!fe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof AT)n=e;else{const r=Go(fe().getNumber("WEBGL_VERSION"),e);n=new AT(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Go(fe().getNumber("WEBGL_VERSION"));n=new AT(r),this.binaryCache=iSe(fe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new jke(this.gpgpu),this.numMBBeforeWarning=lSe(),this.texData=new T3(this,pl())}nextDataId(){return Dw.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,n,r){if((fe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||fe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:n,dtype:r,values:e,usage:Pi.UPLOAD,refCount:1}),a}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,a,i){if(fe().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:a,values:n,usage:Pi.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:a,complexTensorInfos:i,slice:o,shape:s,isPacked:l}=n;if(o!=null){let p;l?p=new od(s,lh):p=new xl(s,lh);const f=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:a}],a),g=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(a==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=di());let d;if(a==="complex64"){const p=this.readSync(i.real.dataId),f=this.readSync(i.imag.dataId);d=yl(p,f)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=di()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const g=this.pendingRead.get(e);return new Promise(y=>g.push(y))}const n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:o,complexTensorInfos:s,isPacked:l}=n;if(i!=null){let g;l?g=new od(a,lh):g=new xl(a,lh);const y=this.runWebGLProgram(g,[{dataId:e,shape:a,dtype:o}],o),v=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),v}if(r!=null)return this.convertAndCacheOnCPU(e);if(fe().getBool("DEBUG")&&!fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&fe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(o!=="complex64"&&fe().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const g=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(g.texture.texture,...K2(a))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const g=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),y=g[0],v=g[1];d=yl(y,v)}else if(u==null)d=this.getValuesFromTexture(e);else{const g=be(a);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,g)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const g=this.gpgpu.gl;He(g,()=>g.deleteBuffer(u))}const p=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(g=>g(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&pl().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const r=this.texData.get(e),{values:a,shape:i,slice:o,dtype:s,isPacked:l,texture:u}=r;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let f;l?f=new od(i,lh):f=new xl(i,lh);const g=this.runWebGLProgram(f,[{dataId:e,shape:i,dtype:s}],s),y=this.readToGPU(g,n);return this.disposeIntermediateTensorInfo(g),y}if(u==null)throw a!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=pl().makeTensorFromTensorInfo(c),p=this.texData.get(c.dataId);return Object.assign({tensorRef:d},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>ll(a));return St(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return St(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!f2e(r))throw fe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:a}=this.texData.get(e),i=be(n);if(fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),f=this.texData.get(p.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...K2(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(p),g}const o=fe().getBool("WEBGL_PACK")&&a===!0,s=o?TT(n):n,l=o?new Rwe(s):new _we(s),u=this.runWebGLProgram(l,[{shape:s,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let a=!1;this.programTimersStack==null?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=il(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=il(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,a&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);s.kernelMs=xD(l),s.getExtraProfileInfo=()=>l.map((u,c)=>({name:o[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:di(),endMs:null}}endTimer(e){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=di(),e)}async getQueryTime(e){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:a,usage:i,isPacked:o,slice:s}=this.texData.get(e),l=s&&s.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=oSe){return fe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&be(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Mi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return nSe(e.shape,n)}packedUnaryOp(e,n,r){const a=new od(e.shape,n),i=this.compileAndRun(a,[e],r);return pl().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const a=dB(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,a)}if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,bB,e.dtype);const n=new xl(e.shape,bB),r=this.compileAndRun(n,[e]);return pl().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&ds(r[0])){const i=r.map(o=>ps(o));a=this.write(i,e,n)}else a=this.write(r,e,n);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:n}}makeOutput(e,n,r){return pl().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new tSe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new Bke(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[nh(e.shape),...rh(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[nh(n),...rh(n)],o=new fB(i,r),s=!0,l=[r],u=this.runWebGLProgram(o,[a],e.dtype,l,s);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:a,shape:i,dtype:o}=r;if(n!=null){const p=be(i),f=n[0]*n[1]*4;V(p<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=TT(i);let l;a?l=new Twe(s):l=new Nwe(s);const u=!0,c=[n??K2(s)],d=this.runWebGLProgram(l,[{shape:s,dtype:o,dataId:e}],o,c,u,n);return{dtype:o,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,a,i=!1,o){const s=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(s.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Hg.DENSE){const b=o??K2(e.outputShape);l.texShape=b.map(x=>x*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),be(s.shape)===0)return l.values=Er(s.dtype,0),s;const u=[],c=n.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(b.dataId);if(x.texture==null){if(!e.packedInputs&&be(b.shape)<=fe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!x.isPacked!=!!e.packedInputs)b=x.isPacked?this.unpackTensor(b):this.packTensor(b),u.push(b),x=this.texData.get(b.dataId);else if(x.isPacked&&!Z2(x.shape,b.shape)){const w=b,S=b.shape;b.shape=x.shape,b=this.packedReshape(b,S),u.push(b),x=this.texData.get(b.dataId),w.shape=S}return{shape:b.shape,texData:x,isUniform:!1}});this.uploadToGPU(s.dataId);const d={shape:s.shape,texData:l,isUniform:!1},p=Ewe(e,c,d),f=this.getAndSaveBinary(p,()=>Cwe(this.gpgpu,e,c,d)),g=this.activeTimers!=null;let y;g&&(y=this.startTimer()),fe().get("ENGINE_COMPILE_ONLY")||Iwe(this.gpgpu,f,c,d,a),u.forEach(b=>this.disposeIntermediateTensorInfo(b)),g&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const v=fe().get("WEBGL_FLUSH_THRESHOLD");if(v>0){const b=di();b-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!fe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}compileAndRun(e,n,r,a,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,a,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(fe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ht(()=>{if(!fe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=fe().getBool("DEBUG");fe().set("DEBUG",!1);const n=this.abs(Ft(1e-8)).dataSync()[0];if(fe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?rSe:aSe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:a,values:i,texture:o,usage:s,isPacked:l}=n;if(o!=null)return;const u=this.activeTimers!=null;let c;u&&(c=di());let d=n.texShape;if(d==null&&(d=O2e(r,l),n.texShape=d),i!=null){const p=TT(r);let f,g=d[1],y=d[0];const v=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!v)&&([g,y]=th(d[0],d[1])),l?f=new Owe(p,v):f=new $we(p,v);const b=v?[y,g]:d,x=this.makeTensorInfo(b,a),w=this.texData.get(x.dataId);v?w.usage=Pi.PIXELS:w.usage=Pi.UPLOAD,w.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),g,y,i);const S=[[y,g]],C=!0,I=this.runWebGLProgram(f,[x],a,S,C),_=this.texData.get(I.dataId);n.texShape=_.texShape,n.isPacked=_.isPacked,n.usage=_.usage,fe().get("ENGINE_COMPILE_ONLY")?this.disposeData(I.dataId):(n.texture=_.texture,n.values=null,this.texData.delete(I.dataId)),this.disposeIntermediateTensorInfo(x),u&&(this.uploadWaitMs+=di()-c)}else{const p=this.acquireTexture(d,s,a,l);n.texture=p}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:a}=r;return this.releaseGPUData(e),n!=null&&(r.values=uSe(n,a)),r.values}acquireTexture(e,n,r,a){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,a)}computeBytes(e,n){return e[0]*e[1]*dv(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(a=>{try{this.checkCompletion_(n),a(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await ZF(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(X7(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:n,customUniformLocations:r,infLoc:a,nanLoc:i,inShapesLocations:o,inTexShapesLocations:s,outShapeLocation:l,outShapeStridesLocation:u,outTexShapeLocation:c}=rB(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=n,e.customUniformLocations=r,e.infLoc=a,e.nanLoc=i,e.inShapesLocations=o,e.inTexShapesLocations=s,e.outShapeLocation=l,e.outShapeStridesLocation=u,e.outTexShapeLocation=c}}}Dw.nextDataId=0;function uSe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/cN()&&EN("webgl",()=>new Dw,2);/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const FT=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class uh{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=zt(n,r),this.enableShapeUniforms=Aa(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Yg=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Qg{constructor(e,n,r,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=zt(n,r);const i=this.outputShape.length;this.enableShapeUniforms=Aa(i);let o="";if(a)if(i===0||be(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Tn(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const s=Da("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yi(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const cSe={kernelName:Om,backendName:"webgl",kernelFunc:yi};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ou(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=yi({inputs:{x:r},backend:n}),l=yi({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:l},i}const dSe={kernelName:Ev,backendName:"webgl",kernelFunc:Ou};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vB="return (a < 0.) ? b * a : a;",xB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function pSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",sl(i,"float32")),s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Qg(xB,a.shape,o.shape):new uh(vB,a.shape,o.shape),l=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const hSe={kernelName:ex,backendName:"webgl",kernelFunc:pSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wB="return (a < 0.) ? b * a : a;",kB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function fSe(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Qg(kB,r.shape,a.shape):new uh(wB,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}const mSe={kernelName:vx,backendName:"webgl",kernelFunc:fSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ch="if (isnan(x)) return x;";function qt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:i})=>{const{x:o}=a,s=i,l=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&n!=null){const d=s.texData.get(o.dataId),p=n(d.values,l);return s.makeTensorInfo(o.shape,l,p)}const u=fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new od(o.shape,e):c=new xl(o.shape,t),s.runWebGLProgram(c,[o],l)}}function Jr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:i}){return({inputs:o,backend:s})=>{const{a:l,b:u}=o,c=s;if(r&&l.dtype==="complex64"){const g=c.texData.get(l.dataId),y=c.texData.get(u.dataId),[v,b]=[[g.complexTensorInfos.real,y.complexTensorInfos.real],[g.complexTensorInfos.imag,y.complexTensorInfos.imag]].map(w=>{const[S,C]=w,I={dataId:S.dataId,dtype:S.dtype,shape:l.shape},_={dataId:C.dataId,dtype:C.dtype,shape:u.shape},T=new uh(t,l.shape,u.shape);return c.runWebGLProgram(T,[I,_],Xa(S.dtype,C.dtype))}),x=Ou({inputs:{real:v,imag:b},backend:c});return c.disposeIntermediateTensorInfo(v),c.disposeIntermediateTensorInfo(b),x}const d=i||Xa(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&a!=null){const g=c.texData.get(l.dataId).values,y=c.texData.get(u.dataId).values,v=l.dtype==="string"?ed(g):g,b=l.dtype==="string"?ed(y):y,[x,w]=a(l.shape,u.shape,v,b,d),S=c.makeTensorInfo(w,d),C=c.texData.get(S.dataId);return C.values=x,S}const p=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return p?f=new Qg(e,l.shape,u.shape,n):f=new uh(t,l.shape,u.shape),c.runWebGLProgram(f,[l,u],d)}}function Zg(t,e=!1){if(t==="linear")return e?Yke:Wke;if(t==="relu")return e?Zke:qke;if(t==="elu")return e?Qke:Hke;if(t==="relu6")return e?Jke:Kke;if(t==="prelu")return e?kB:wB;if(t==="leakyrelu")return e?xB:vB;if(t==="sigmoid")return e?eSe:Xke;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class SB{constructor(e,n,r,a=!1,i=!1,o=!1,s=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Aa(this.outputShape.length);const c=a?e[1]:e[2],d=Math.ceil(c/2),p=a?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",g=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],y=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",b="";s&&(l?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:u?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:v=`vec4 activation(vec4 x) {
          ${s}
        }`,b="result = activation(result);");const x=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let w="rc.x",S="rc.x";e[0]<n[0]?w=`int(min(float(rc.x), ${e[0]-1}.))`:n[0]<e[0]&&(S=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${d}; i++) {
          int batchA = ${w};
          int batchB = ${S};
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${g[0]} * ${y[0]});
          result += (${g[1]} * ${y[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${b}

        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const CB={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class IB{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=zt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const EB="return a * b;";function BT(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,i=Xa(r.dtype,a.dtype);if(r.dtype==="complex64"){const s=n.texData.get(r.dataId),l=n.texData.get(a.dataId),u=new IB(CB.REAL,r.shape,a.shape),c=new IB(CB.IMAG,r.shape,a.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:r.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:a.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:a.shape}],p=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),g=Ou({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}if(n.shouldExecuteOnCPU([r,a])){const s=n.texData.get(r.dataId),l=n.texData.get(a.dataId),[u,c]=gke(r.shape,a.shape,s.values,l.values,i),d=n.makeTensorInfo(c,i),p=n.texData.get(d.dataId);return p.values=u,d}let o;return fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new Qg(EB,r.shape,a.shape):o=new uh(EB,r.shape,a.shape),n.runWebGLProgram(o,[r,a],i)}const gSe={kernelName:Hm,backendName:"webgl",kernelFunc:BT};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ySe(t,e,n){const r=[nh(t.shape),...rh(t.shape)],a={dtype:t.dtype,shape:r,dataId:t.dataId},i=[nh(e),...rh(e)],o=new fB(i,r),s=!0,l=[r],u=n.runWebGLProgram(o,[a],t.dtype,l,s);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Le(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,o=n,s=be(a.shape),l=R3(i,s),u=be(l);V(s===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${a.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(a.dataId);return c.isPacked&&!Z2(a.shape,l)&&!(c.texture!==null&&Z2(c.shape,l))?ySe(a,l,o):(o.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype})}const bSe={kernelName:Ix,backendName:"webgl",kernelFunc:Le};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class NB{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:o}=e;this.outputShape=[a,o];const s=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${Dc(d)?d.toPrecision(2):d}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${s};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class vSe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:o}=e;this.outputShape=[a,o];let s="0.0",l="";n==="prod"?s="1.0":n==="min"?(s="1.0 / 1e-20",l="min"):n==="max"&&(s="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,d=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(s="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(s="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let g="";i%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${s};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${s});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xSe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=L2(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function sd(t,e,n,r){const a=xSe(t.shape);let i=t;for(let o=0;o<a.length;o++){const{inSize:s,windowSize:l,outSize:u}=a[o];let c,d;n==="mean"?c=o===0?new NB({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},s):new NB({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u}):c=new vSe({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},n),d=i,i=r.runWebGLProgram(c,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class wSe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const a=Tn(this.rank),i=kSe(n);this.userCode=`
    void main() {
      ${a} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function kSe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let a=0;a<t.length;a++)r[t[a]]=n[a];return r.join()}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class SSe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=Tn(this.rank),i=hB("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=i[c];const s=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`
    void main() {
      ${a} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ew(t,e,n){const r=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new SSe(t.shape,e):new wSe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function CSe(t,e,n,r){const a=e,i=t.shape.length,o=Xt(a,t.shape);let s=o;const l=dr(s,i),u=l!=null;let c=t;u&&(c=ew(t,l,r),s=pr(s.length,i)),Qr("sum",s,i);const[d,p]=Yr(c.shape,s);let f=d;n&&(f=_r(d,o));const g=be(p),y=be(t.shape)/g,v=Le({inputs:{x:c},attrs:{shape:[y,g]},backend:r}),b=o2(t.dtype),x=sd(v,b,"sum",r),w=Le({inputs:{x},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(x),u&&r.disposeIntermediateTensorInfo(c),w}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tw(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;return CSe(a,i,o,n)}const ISe={kernelName:Mx,backendName:"webgl",kernelFunc:tw};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function La(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{perm:i}=r,o=n,s=a.shape.length,l=new Array(s);for(let c=0;c<l.length;c++)l[c]=a.shape[i[c]];let u;if(o.shouldExecuteOnCPU([a])){const c=o.texData.get(a.dataId).values,d=DT(c,a.shape,a.dtype,i,l);u=o.makeTensorInfo(l,a.dtype);const p=o.texData.get(u.dataId);p.values=d}else u=ew(a,i,o);return u}const ESe={kernelName:Rp,backendName:"webgl",kernelFunc:La};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const TB=1e3;function nw({a:t,b:e,transposeA:n,transposeB:r,backend:a,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],p=r?e.shape[c-1]:e.shape[c-2],f=n?t.shape[u-1]:t.shape[u-2],g=r?e.shape[c-2]:e.shape[c-1],y=t.shape.slice(0,-2),v=e.shape.slice(0,-2),b=be(y),x=be(v),w=zt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,g]);V(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const S=n?[b,d,f]:[b,f,d],C=r?[x,g,p]:[x,p,g],I=Le({inputs:{x:t},backend:a,attrs:{shape:S}}),_=Le({inputs:{x:e},backend:a,attrs:{shape:C}}),T=[I,_],M=Math.max(b,x),P=n?I.shape[1]:I.shape[2],L=i!=null,j=o!=null,B=l==="leakyrelu",K=l!=null?Zg(l,!0):null,X=L||j||B||K!=null;let Z;if((f===1||g===1)&&P>TB&&X===!1){let F=I,Y=_;n&&(F=La({inputs:{x:I},backend:a,attrs:{perm:[0,2,1]}}),T.push(F)),r&&(Y=La({inputs:{x:_},backend:a,attrs:{perm:[0,2,1]}}),T.push(Y));const Q=g!==1,ne=g===1;let se=F;Q&&(se=Le({inputs:{x:F},backend:a,attrs:{shape:[M,P,1]}}),T.push(se));const pe=g===1?2:1;let de=Y;ne&&(de=Le({inputs:{x:Y},backend:a,attrs:{shape:[M,1,P]}}),T.push(de));const ie=BT({inputs:{a:se,b:de},backend:a});Z=tw({inputs:{x:ie},backend:a,attrs:{axis:pe,keepDims:!0}}),T.push(ie)}else{const F=Xa(t.dtype,e.dtype),Y=new SB(S,C,[M,f,g],n,r,L,K,j,B),Q=[I,_];if(i!=null&&Q.push(i),j&&Q.push(o),B){const ne=a.makeTensorInfo([],"float32",sl(s,"float32"));Q.push(ne),T.push(ne)}Z=a.runWebGLProgram(Y,Q,F)}const H=Le({inputs:{x:Z},backend:a,attrs:{shape:w}});T.push(Z);for(const F of T)a.disposeIntermediateTensorInfo(F);return H}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function NSe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return nw({a,b:i,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:d,activation:c})}const TSe={kernelName:hg,backendName:"webgl",kernelFunc:NSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _B="return abs(x);";function _Se(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=dB(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let a;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new od(r.shape,_B):a=new xl(r.shape,_B),n.runWebGLProgram(a,[r],r.dtype)}const RSe={kernelName:fv,backendName:"webgl",kernelFunc:_Se};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $Se=mo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,OSe=qt({opSnippet:$Se}),MSe={kernelName:cm,backendName:"webgl",kernelFunc:OSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const PSe=mo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,ASe=qt({opSnippet:PSe}),DSe={kernelName:dm,backendName:"webgl",kernelFunc:ASe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const RB="return a + b;",LSe=Jr({opSnippet:RB,packedOpSnippet:RB,supportsComplex:!0,cpuKernelImpl:Ywe}),FSe={kernelName:_p,backendName:"webgl",kernelFunc:LSe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class BSe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${a};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class zSe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${a};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rw(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return yi({inputs:{x:r[0]},backend:n});if(r.length>fe().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const s=Math.floor(r.length/2),l=rw({inputs:r.slice(0,s),backend:n}),u=rw({inputs:r.slice(s),backend:n});return rw({inputs:[l,u],backend:n})}const a=r.map(s=>s.dtype).reduce((s,l)=>Xa(s,l)),i=r.map(s=>s.shape),o=fe().getBool("WEBGL_PACK")?new zSe(r[0].shape,i):new BSe(r[0].shape,i);return n.runWebGLProgram(o,r,a)}const jSe={kernelName:mv,backendName:"webgl",kernelFunc:rw};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function VSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Xt(i,a.shape);let u=l;const c=dr(u,s);let d=a;c!=null&&(d=La({inputs:{x:a},backend:n,attrs:{perm:c}}),u=pr(u.length,s)),Qr("all",u,s);const[p,f]=Yr(d.shape,u),g=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=sd(y,y.dtype,"all",n);let b;if(o){const x=_r(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const USe={kernelName:gv,backendName:"webgl",kernelFunc:VSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function GSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Xt(i,a.shape);let u=l;const c=dr(u,s);let d=a;c!=null&&(d=La({inputs:{x:a},backend:n,attrs:{perm:c}}),u=pr(u.length,s)),Qr("any",u,s);const[p,f]=Yr(d.shape,u),g=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=sd(y,y.dtype,"any",n);let b;if(o){const x=_r(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const WSe={kernelName:yv,backendName:"webgl",kernelFunc:GSe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class HSe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:a,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const s=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${a};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${a}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${s} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class qSe{constructor(e,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,V(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");const s=this.outputShape,l=s.length,u=Tn(l),c=Da("coords",l);let d,p;if(o===1){p=l+1;const T=Tn(p);d=`
        ${T} sourceLocR = ${T}(${c.join()}, 0);
        ++${c[l-1]};
        ${T} sourceLocG = ${T}(${c.join()}, 0);
        ++${c[l-2]};
        ${T} sourceLocA = ${T}(${c.join()}, 0);
        --${c[l-1]};
        ${T} sourceLocB = ${T}(${c.join()}, 0);
        --${c[l-2]};`}else p=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,p),g="."+f[p-1],y=f.map(T=>"int "+T),v=Da("sourceLocR",p-1).concat("inIdx.r"),b=Da("sourceLocG",p-1).concat("inIdx.g"),x=Da("sourceLocB",p-1).concat("inIdx.b"),w=Da("sourceLocA",p-1).concat("inIdx.a"),S=r==="max"?"greaterThan":"lessThan",C=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${w.join()})));`,I=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,_=a?"":`
      float getBestIndicesAChannel(${y.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${y.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${_}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${s[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${s[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},
          sourceLocB${g}, sourceLocA${g}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${I};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${I};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${S}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $B(t,e,n,r=null){let a=e.shape[0],i=e.shape[1];r!=null&&(a=r.shape[0],i=r.shape[1]);const o=L2(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},l=new HSe(s,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=$B(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function OB(t,e,n,r=null){const a=r!=null?r.shape:e.shape,i=a[a.length-1],o=L2(i),s=new qSe(a,o,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(s,l,"int32");if(u.shape.length===e.shape.length){const c=OB(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function MB(t,e,n,r){const a=[n];if(Qr("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,e.shape.length),!fe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),s=o!==null&&o.isPacked;let l=e;s&&(l=t.unpackTensor(e),i.push(l));const[u,c]=Yr(l.shape,a),d=be(c),p=Le({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(p);const f=$B(t,p,r);i.push(f);const g=Le({inputs:{x:f},backend:t,attrs:{shape:u}});return i.forEach(y=>t.disposeIntermediateTensorInfo(y)),g}return OB(t,e,r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function KSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let o=Xt(i,a.shape);const s=dr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=La({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=pr(o.length,l.shape.length)),Qr("argMax",[o[0]],l.shape.length);const c=MB(n,l,o[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const XSe={kernelName:bv,backendName:"webgl",kernelFunc:KSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function YSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let o=Xt(i,a.shape);const s=dr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=La({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=pr(o.length,l.shape.length)),Qr("argMin",[o[0]],l.shape.length);const c=MB(n,l,o[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const QSe={kernelName:vv,backendName:"webgl",kernelFunc:YSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ZSe=mo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,JSe=qt({opSnippet:ZSe}),eCe={kernelName:pm,backendName:"webgl",kernelFunc:JSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const tCe=mo+"return log(x + sqrt(x * x + 1.0));",nCe=qt({opSnippet:tCe}),rCe={kernelName:hm,backendName:"webgl",kernelFunc:nCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const aCe=mo+`
  return atan(x);
`,iCe=qt({opSnippet:aCe}),oCe={kernelName:fm,backendName:"webgl",kernelFunc:iCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sCe=FT+`
  return atan(a, b);
`,lCe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Yg+`
  return result;
`,uCe=Jr({opSnippet:sCe,packedOpSnippet:lCe}),cCe={kernelName:gm,backendName:"webgl",kernelFunc:uCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dCe=mo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,pCe=qt({opSnippet:dCe}),hCe={kernelName:mm,backendName:"webgl",kernelFunc:pCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Jg{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const y=n==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,b=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let x="0.0";if(y||(x="-1.0 / 1e-20"),r){const T=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${l});
        const ivec2 pads = ivec2(${f}, ${g});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${T} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${a?i?v:b:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / count");const C=Math.floor(o/4)*4,I=o%4,_=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${l});
      const ivec2 pads = ivec2(${f}, ${g});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${_}
          }

          int xC = xCCorner + ${C};
          if (${I===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${I===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${I===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${_}
          }
        }
        setOutput(${S});
      }
    `}}class zT{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,p=e.dilationWidth,f=e.effectiveFilterDepth,g=e.effectiveFilterHeight,y=e.effectiveFilterWidth,v=e.padInfo.front,b=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const w=n==="avg";let S="0.0";if(w||(S="-1.0 / 1e-20"),r){const P=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${l}, ${u});
        const ivec3 pads = ivec3(${v}, ${b}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${g};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${y};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${P} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${a?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${g} * ${y} +
                      wR * ${y} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let I=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(I="avgValue / count");const _=Math.floor(o/4)*4,T=o%4,M=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${l}, ${u});
      const ivec3 pads = ivec3(${v}, ${b}, ${x});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${_}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${M}
            }

            int xC = xCCorner + ${_};
            if (${T===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${M}
            } else if (${T===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${M}
            } else if (${T===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${M}
            }
          }
          setOutput(${I});
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;Kg(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(pa(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=oo(a.shape,i,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&vn(c.inShape,c.outShape))return yi({inputs:{x:a},backend:n});const d=new Jg(c,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}const mCe={kernelName:xv,backendName:"webgl",kernelFunc:fCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],d=hl(a.shape,i,o,c,s,l,u),p=new zT(d,"avg",!1);return n.runWebGLProgram(p,[a],"float32")}const yCe={kernelName:wv,backendName:"webgl",kernelFunc:gCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class bCe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,d=u-1-e.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class vCe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,g=d-1-e.padInfo.front,y=p-1-e.padInfo.top,v=f-1-e.padInfo.left,b=1/(n*r*a);this.userCode=`
      const ivec3 pads = ivec3(${g}, ${y}, ${v});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],p=hl(o.shape,s,l,d,u,c),f=new vCe(p);return n.runWebGLProgram(f,[a],o.dtype)}const wCe={kernelName:F3,backendName:"webgl",kernelFunc:xCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i;Kg([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=oo(o.shape,s,l,1,u),d=new bCe(c);return n.runWebGLProgram(d,[a],o.dtype)}const SCe={kernelName:L3,backendName:"webgl",kernelFunc:kCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function CCe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:o,transposeB:s}=r;return nw({a,b:i,transposeA:o,transposeB:s,backend:n})}const ICe={kernelName:kv,backendName:"webgl",kernelFunc:CCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class ECe{constructor(e,n,r,a,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],zt(e,n),zt(e,r);let s="0.0";a!=null&&(zt(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="1.0";i!=null&&(zt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class NCe{constructor(e,n,r,a,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],zt(e,n),zt(e,r);let s="vec4(0.0)";a!=null&&(zt(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(zt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const TCe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:a,variance:i,offset:o,scale:s}=t;V(a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,a,i];let c=null;o!=null&&(c=o.shape,u.push(o));let d=null;s!=null&&(d=s.shape,u.push(s));const p=fe().getBool("WEBGL_PACK_NORMALIZATION")?new NCe(r.shape,a.shape,i.shape,c,d,l):new ECe(r.shape,a.shape,i.shape,c,d,l);return e.runWebGLProgram(p,u,u[0].dtype)},_Ce={kernelName:Xv,backendName:"webgl",kernelFunc:TCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class RCe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Tn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=$Ce(this.rank);let a;const i=e.map((o,s)=>`sourceLoc.${jT[s]} = start[${s}] + coords.${jT[s]};`);a=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${a}
        setOutput(getSource(${r}));
      }
    `}}const jT=["x","y","z","w","u","v"];function $Ce(t){if(t===1)return"sourceLoc";if(t<=6)return jT.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class OCe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Tn(this.rank),r=Da("coords",this.rank),a=Da("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${a.slice(-2).join()})`,o=`getChannel(getSource(${a.join()}), ${i})`,s=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${a[this.rank-1]};
        result.y = ${o};
        --${a[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${a[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${a[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${a[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${s}
        ${l}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function MCe(t,e,n,r){const a=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=t.dtype;let s=AN(e,Ze(t.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function dh(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:o}=r,[s,l]=DN(a,i,o);if(ON(a,s,l),be(l)===0)return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){const d=n.texData.get(a.dataId),p=Eke(d.values,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,p)}const{isPacked:u}=n.texData.get(a.dataId),c=PN(a.shape,s,l);if(u||!c){const d=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OCe(l):new RCe(l),p=[s];return n.runWebGLProgram(d,[a],a.dtype,p)}return n.uploadToGPU(a.dataId),MCe(a,s,l,n)}const PCe={kernelName:Ox,backendName:"webgl",kernelFunc:dh};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ACe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:o}=r;V(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((x,w)=>x*w),l=Bg(a.shape,i,s),u=zg(l.length,i.length),c=jg(a.shape,i,s),d=M4(o,i.length),p=P4(c,o,i.length),f=[],g=Le({inputs:{x:a},backend:n,attrs:{shape:l}}),y=La({inputs:{x:g},backend:n,attrs:{perm:u}}),v=Le({inputs:{x:y},backend:n,attrs:{shape:c}}),b=dh({inputs:{x:v},backend:n,attrs:{begin:d,size:p}});return f.push(g),f.push(y),f.push(v),f.forEach(x=>n.disposeIntermediateTensorInfo(x)),b},DCe={kernelName:Sv,backendName:"webgl",kernelFunc:ACe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function LCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o}=r,s=n.readSync(a.dataId),l=n.readSync(i.dataId),u=cB(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const FCe={kernelName:Cv,backendName:"webgl",kernelFunc:LCe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function BCe(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=zt(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const zCe={kernelName:Iv,backendName:"webgl",kernelFunc:BCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jCe="return float(a != b);",PB=Jr({opSnippet:jCe,cpuKernelImpl:bke,dtype:"bool"}),VCe={kernelName:qm,backendName:"webgl",kernelFunc:PB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function e0(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return yi({inputs:{x:a.complexTensorInfos.real},backend:n})}const UCe={kernelName:Cx,backendName:"webgl",kernelFunc:e0};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const GCe="return float(int(x));";function WCe(t,e){const n=new xl(t.shape,GCe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function VT(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return yi({inputs:{x:a},backend:n});const o=Cu(a.shape),s=VT({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),l=Ou({inputs:{real:s,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(s),l}if(a.dtype==="complex64"){const o=e0({inputs:{input:a},backend:n}),s=VT({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),s}if(!$3(a.dtype,i)){const o=yi({inputs:{x:a},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){const o=n.texData.get(a.dataId).values,[s,l,u]=Zwe(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,l,u)}if(i==="int32")return WCe(a,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",Er("bool",1)),s=PB({inputs:{a,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),s}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}const HCe={kernelName:ym,backendName:"webgl",kernelFunc:VT};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const AB="return ceil(x);",qCe=qt({opSnippet:AB,packedOpSnippet:AB,cpuKernelImpl:Jwe}),KCe={kernelName:bm,backendName:"webgl",kernelFunc:qCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class XCe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class YCe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function QCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{clipValueMin:i,clipValueMax:o}=r;let s;fe().getBool("WEBGL_PACK_CLIP")?s=new YCe(a.shape):s=new XCe(a.shape);const l=[[i],[o]];return n.runWebGLProgram(s,[a],a.dtype,l)}const ZCe={kernelName:vm,backendName:"webgl",kernelFunc:QCe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class JCe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function DB(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function eIe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=n.texData.get(r.dataId),i=new JCe(r.shape),o=[DB(r,a.complexTensorInfos.real),DB(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const tIe={kernelName:Nv,backendName:"webgl",kernelFunc:eIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class nIe{constructor(e){this.outputShape=[],this.outputShape=vs(e,1),this.variableNames=e.map((o,s)=>`T${s}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const s=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${s}));`)}const a=n.length,i=n[n.length-1];r.push(`else setOutput(getT${a}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class rIe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=vs(e,n);const r=this.outputShape,a=r.length,i=Tn(a),o=Da("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map((y,v)=>`T${v}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let y=1;y<l.length;y++)l[y]=l[y-1]+e[y][n];const u=s[n],c=s.slice(-2),d=s.join();let p=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let y=1;y<l.length;y++){const v=l[y-1];p+=`
        if (${u} < ${l[y]}  && ${u} >= ${l[y-1]}) {
          return getChannel(
            getT${y}(${aw(s,u,v)}),
            vec2(${aw(c,u,v)}));
        }`}const f=l.length,g=l[l.length-1];p+=`
        return getChannel(
          getT${f}(${aw(s,u,g)}),
          vec2(${aw(c,u,g)}));`,this.userCode=`
      float getValue(${s.map(y=>"int "+y)}) {
        ${p}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[a-1]} = ${o[a-1]} + 1;
        if (${o[a-1]} < ${r[a-1]}) {
          result.g = getValue(${o});
        }

        ${o[a-2]} = ${o[a-2]} + 1;
        if (${o[a-2]} < ${r[a-2]}) {
          result.a = getValue(${o});
        }

        ${o[a-1]} = ${o[a-1]} - 1;
        if (${o[a-2]} < ${r[a-2]} &&
            ${o[a-1]} < ${r[a-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function aw(t,e,n){const r=t.indexOf(e);return t.map((a,i)=>i===r?`${a} - ${n}`:a).join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function iw(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return yi({inputs:{x:a.complexTensorInfos.imag},backend:n})}const aIe={kernelName:Jv,backendName:"webgl",kernelFunc:iw};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function t0(t,e,n){const r=t[0].dtype;if(r==="complex64"){const d=t.map(v=>e0({inputs:{input:v},backend:n})),p=t.map(v=>iw({inputs:{input:v},backend:n})),f=t0(d,e,n),g=t0(p,e,n),y=Ou({inputs:{real:f,imag:g},backend:n});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}let a=n.shouldExecuteOnCPU(t);if(r==="string"&&(a=!0),a){const d=t.map(x=>{const w=[-1,be(x.shape.slice(e))];return Le({inputs:{x},backend:n,attrs:{shape:w}})}),p=d.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),f=vs(d.map(x=>x.shape),1),g=d[0].shape[0]===1,y=eke(p,f,r,g),v=vs(t.map(x=>x.shape),e),b=n.makeTensorInfo(v,r,y);return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const i=fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(t.length>i){const d=[];for(let f=0;f<t.length;f+=i){const g=t.slice(f,f+i);d.push(t0(g,e,n))}const p=t0(d,e,n);for(const f of d)n.disposeIntermediateTensorInfo(f);return p}if(fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].shape.length>1){const d=new rIe(t.map(p=>p.shape),e);return n.runWebGLProgram(d,t,r)}const{tensors2D:o,outShape:s}=iIe(t,e,n),l=new nIe(o.map(d=>d.shape)),u=n.runWebGLProgram(l,o,r);o.forEach(d=>n.disposeIntermediateTensorInfo(d));const c=Le({inputs:{x:u},attrs:{shape:s},backend:n});return n.disposeIntermediateTensorInfo(u),c}function iIe(t,e,n){const r=vs(t.map(a=>a.shape),e);return{tensors2D:t.map(a=>Le({inputs:{x:a},attrs:{shape:[-1,be(a.shape.slice(e))]},backend:n})),outShape:r}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function LB(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=Xt(a,e[0].shape)[0],o=e.map(u=>u.shape);R4(o,i);const s=vs(e.map(u=>u.shape),i);if(be(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(u=>be(u.shape)>0);return l.length===1?yi({inputs:{x:l[0]},backend:n}):t0(l,i,n)}const oIe={kernelName:Tv,backendName:"webgl",kernelFunc:LB};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class FB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,f=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4,v=e.dataFormat==="channelsLast",b=v?1:2,x=v?2:3,w=v?3:1;let S="",C="";r&&(a?S=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?S=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:S=`
          float activation(float x) {
            ${r}
          }
        `,C="result = activation(result);");const I=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${g}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${y===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${g}) *
                    getW(wR, wC, ${g}, d2);
              } else {
                dotProd +=
                    getX(batch, ${g}, xR, xC) *
                    getW(wR, wC, ${g}, d2);
              }

            } else if (${y===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${y===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2),
                getW(wR, wC, ${g} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1),
                  getX(batch, xR, xC, ${g} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC),
                  getX(batch, ${g} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${I}
        ${C}
        setOutput(result);
      }
    `}}class sIe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,p=e.filterHeight,f=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${s});
      const ivec3 pads = ivec3(${n}, ${r}, ${a});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${g}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${y===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${g}) *
                  getW(wF, wR, wC, ${g}, d2);
              } else if (${y===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${y===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1),
                  getX(batch, xF, xR, xC, ${g} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2),
                  getW(wF, wR, wC, ${g} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class BB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Aa(this.outputShape.length);const o=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<c;v++)p+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;p+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<c;v++)p+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(d+1)/2;v++){const b=v*2;if(p+=`
           xC = xCCorner + ${b*l};
           `,s===1){if(b<c&&(o%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,l===1&&b>0?p+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<c)){const x=o%2===0?uv(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:p+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):x===1?p+=`
                     xC${b+1} = xTexelC${b};
                     `:p+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<c&&(o%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<c&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<c&&(p+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<c&&(p+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<c&&(p+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let f="",g="";r&&(a?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,g="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${y}
         ${g}
         setOutput(result);
       }
     `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lIe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Aa(this.outputShape.length);const{dataFormat:r}=n,a=Pa(),i=r==="channelsLast",o=i?1:2,s=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${s}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${a.output} = result;
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ow(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function zB({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],p=n.outChannels,f=n.dataFormat==="channelsLast",g=!1,y=!1;let v;const b=[];if(i!=null){const x=ow(i.shape,f);x!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:x}}),b.push(i))}if(a!=null){const x=ow(a.shape,f);x!=null&&(a=Le({inputs:{x:a},backend:r,attrs:{shape:x}}),b.push(a))}if(!((d===1||p===1)&&c>TB)&&u.isPacked&&f&&u.texture!=null&&l[2]%2!==0&&vn(u.shape.slice(-3),l.slice(-3))){const x=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},S=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,V(Z2(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const C=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(C);const I=nw({a:w,b:C,backend:r,transposeA:g,transposeB:y,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o}),_=r.texData.get(I.dataId);V(_.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=S,_.shape=n.outShape,v=yi({inputs:{x:I},backend:r}),v.shape=n.outShape,b.push(I)}else{const x=n.outHeight*n.outWidth,w=Le({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,x,n.inChannels]:[n.batchSize,n.inChannels,x]}}),S=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=nw({a:f?w:S,b:f?S:w,transposeA:!f,transposeB:y,backend:r,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o});v=Le({inputs:{x:C},backend:r,attrs:{shape:n.outShape}}),b.push(w),b.push(S),b.push(C)}for(const x of b)r.disposeIntermediateTensorInfo(x);return v}function jB({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:p,dataFormat:f}=n,g=f==="channelsLast",y=l*u*c,v=p*d,b=[n.batchSize,y,v],x=!0,w=!1,S=[];if(i!=null){const F=ow(i.shape,g);F!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:F}}),S.push(i))}if(a!=null){const F=ow(a.shape,g);F!=null&&(a=Le({inputs:{x:a},backend:r,attrs:{shape:F}}),S.push(a))}const C=Le({inputs:{x:e},backend:r,attrs:{shape:[1,y,be(e.shape)/y]}});S.push(C);const I=new lIe(b,n),_=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],T=r.runWebGLProgram(I,[t],"float32",_),M=Le({inputs:{x:T},backend:r,attrs:{shape:b}});S.push(T),S.push(M);const P=a!=null,L=i!=null,j=s==="leakyrelu",B=s?Zg(s,!0):null,K=new SB(g?M.shape:C.shape,g?C.shape:M.shape,g?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],x,w,P,B,L,j),X=g?[M,C]:[C,M];if(a&&X.push(a),L&&X.push(i),j){const F=r.makeTensorInfo([],"float32",sl(o,"float32"));X.push(F),S.push(F)}const Z=r.runWebGLProgram(K,X,"float32"),H=Le({inputs:{x:Z},backend:r,attrs:{shape:n.outShape}});S.push(Z);for(const F of S)r.disposeIntermediateTensorInfo(F);return H}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=fl(l),p=Br(a.shape,i.shape,o,u,s,c,!1,d);let f;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))f=zB({x:a,filter:i,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const y=new BB(p),v=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];f=n.runWebGLProgram(y,[a,i],"float32",v)}else if(fe().getBool("WEBGL_CONV_IM2COL"))f=jB({x:a,filter:i,convInfo:p,backend:n});else{const y=new FB(p);f=n.runWebGLProgram(y,[a,i],"float32")}const g=Le({inputs:{x:f},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(f),g}const cIe={kernelName:_v,backendName:"webgl",kernelFunc:uIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class dIe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${o}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class pIe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",s=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=o?1:2,c=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class hIe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${a} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class fIe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=a-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${a}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${a} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=fl(l),p=Br(a.shape,c,o,1,s,u,!1,d),f=new dIe(p);return n.runWebGLProgram(f,[a,i],"float32")}const gIe={kernelName:Rv,backendName:"webgl",kernelFunc:mIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yIe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=fl(u),p=Br(o,i.shape,s,1,l,c,!1,d),f=new pIe(p);return n.runWebGLProgram(f,[a,i],"float32")}const bIe={kernelName:$v,backendName:"webgl",kernelFunc:yIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r,u=ku(a.shape,i.shape,o,l,s),c=new sIe(u);return n.runWebGLProgram(c,[a,i],"float32")}const xIe={kernelName:Ov,backendName:"webgl",kernelFunc:vIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,filterShape:l}=r,u=ku(a.shape,l,o,1,s),c=new hIe(u);return n.runWebGLProgram(c,[a,i],"float32")}const kIe={kernelName:B3,backendName:"webgl",kernelFunc:wIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function SIe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:o,strides:s,inputShape:l}=r,u=ku(l,i.shape,s,1,o),c=new fIe(u);return n.runWebGLProgram(c,[a,i],"float32")}const CIe={kernelName:Mv,backendName:"webgl",kernelFunc:SIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const IIe=ch+`
  return cos(x);
`,EIe=qt({opSnippet:IIe}),NIe={kernelName:xm,backendName:"webgl",kernelFunc:EIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const TIe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,_Ie=qt({opSnippet:TIe}),RIe={kernelName:wm,backendName:"webgl",kernelFunc:_Ie};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class $Ie{constructor(e,n,r,a,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,l,u]=e,[c]=n,[d,p]=r;this.outputShape=[c,d,p,u];const f=a==="bilinear"?1:0,[g,y]=[`${s-1}.0`,`${l-1}.0`],[v,b,x]=d>1?[`${(s-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[w,S,C]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${y} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${y}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${S};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${g} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${y} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const OIe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,c=new $Ie(a.shape,i.shape,s,l,u);return n.runWebGLProgram(c,[a,i,o],"float32")},MIe={kernelName:Dv,backendName:"webgl",kernelFunc:OIe};var n0;(function(t){t.Prod="*",t.Sum="+"})(n0||(n0={}));class VB{constructor(e,n,r,a){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===n0.Prod?"1.0":"0.0",s=r?o:`getX(${UB(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=a?`end != ${l-1}`:"end != 0",c=a?"end + 1":"end - 1"):(u=a?`end + pow2 < ${l}`:"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Tn(i)} coords = getOutputCoords();
        int end = ${GB(i,"coords",this.op)};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${GB(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${UB(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function UB(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function GB(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function WB(t,e,n,r,a,i){const o=e.shape.length,s=dr([r],o);let l=e;s!=null&&(l=La({inputs:{x:e},backend:n,attrs:{perm:s}}));const u=pr(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let d=yi({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(c))-1;p++){const f=new VB(t,l.shape,!1,i),g=[[p]],y=d;d=n.runWebGLProgram(f,[d],d.dtype,g),n.disposeIntermediateTensorInfo(y)}if(a){const p=new VB(t,l.shape,a,i),f=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(s!=null){const p=Rg(s),f=La({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),f}return d}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function PIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;return WB(n0.Prod,a,n,i,o,s)}const AIe={kernelName:Pv,backendName:"webgl",kernelFunc:PIe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function DIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;return WB(n0.Sum,a,n,i,o,s)}const LIe={kernelName:Av,backendName:"webgl",kernelFunc:DIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function FIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o,binaryOutput:s}=r;if(a.shape.length===1){const l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=cB(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){const l=n.bufferSync(a),u=n.bufferSync(i),c=Qwe(l,u,o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const BIe={kernelName:Lv,backendName:"webgl",kernelFunc:FIe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class zIe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:o}=r,s=a.shape[0],l=o==="NHWC"?a.shape[1]:a.shape[2],u=o==="NHWC"?a.shape[2]:a.shape[3],c=o==="NHWC"?a.shape[3]:a.shape[1],d=l*i,p=u*i,f=c/(i*i),g=o==="NHWC"?[s,d,p,f]:[s,f,d,p],y=new zIe(g,i,o);return n.runWebGLProgram(y,[a],a.dtype)}const VIe={kernelName:Fv,backendName:"webgl",kernelFunc:jIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class HB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Aa(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(a?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${s}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class qB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Aa(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,p=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<d;b++)f+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;f+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let b=0;b<d;b++)f+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(p+1)/2;b++){const x=b*2;if(f+=`
          xC = xCCorner + ${x*u};
          `,l===1){if(x<d&&(s%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,u===1&&x>0?f+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<d)){const w=s%2===0?uv(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,u>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:f+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):w===1?f+=`
                    xC${x+1} = xTexelC${x};
                    `:f+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<d&&(s%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<d&&(f+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<d&&(f+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<d&&(f+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let g="",y="";r&&(a?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:g=`vec4 activation(vec4 x) {
          ${r}
        }`,y="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${g}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${y}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function UIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),V(pa(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const d=Br(a.shape,i.shape,o,c,s,u,!0);let p;fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new qB(d):p=new HB(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[a,i],"float32",f)}const GIe={kernelName:Bv,backendName:"webgl",kernelFunc:UIe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class WIe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class HIe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r,d=Br(a.shape,c,o,s,l,u,!0),p=new WIe(d);return n.runWebGLProgram(p,[a,i],"float32")}const KIe={kernelName:zv,backendName:"webgl",kernelFunc:qIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function XIe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r,d=Br(c,i.shape,o,s,l,u,!0),p=new HIe(d);return n.runWebGLProgram(p,[a,i],"float32")}const YIe={kernelName:jv,backendName:"webgl",kernelFunc:XIe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class QIe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ZIe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=[...r.shape,...r.shape],i=be(r.shape),o=Le({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new QIe(i),l=n.runWebGLProgram(s,[o],o.dtype),u=Le({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const JIe={kernelName:Vv,backendName:"webgl",kernelFunc:ZIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class eEe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:a,strideHeight:i,strideWidth:o,filterHeight:s,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:d,left:p}=a;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r,u=Eg(a.shape,i.shape,o,s,"NHWC",l);let c;const d=new eEe(u);c=n.runWebGLProgram(d,[a,i],"float32");const p=Le({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),p}const nEe={kernelName:Uv,backendName:"webgl",kernelFunc:tEe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rEe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:o,summedDims:s,idDims:l}=W4(a,i.length);q4(o.length,l,i);const{path:u,steps:c}=K4(s,l),d=c.length;let p=null,f=o.length;const g=[];for(let y=0;y<d;++y){for(const v of c[y]){const{permutationIndices:b,expandDims:x}=H4(f,l[v]);let w;X4(b)?w=i[v]:(w=La({inputs:{x:i[v]},backend:n,attrs:{perm:b}}),g.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);vn(w.shape,S)||(w=Le({inputs:{x:w},backend:n,attrs:{shape:S}}),g.push(w)),p===null?p=w:(p=BT({inputs:{a:w,b:p},backend:n}),g.push(p))}y<d-1&&(u[y]>=0&&(p=tw({inputs:{x:p},backend:n,attrs:{axis:u[y]-(o.length-f),keepDims:!1}}),g.push(p)),f--)}for(const y of g)y!==p&&n.disposeIntermediateTensorInfo(y);return p}const aEe={kernelName:Gv,backendName:"webgl",kernelFunc:rEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const iEe="return (x >= 0.0) ? x : (exp(x) - 1.0);",oEe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,sEe=qt({opSnippet:iEe,packedOpSnippet:oEe}),lEe={kernelName:Sm,backendName:"webgl",kernelFunc:sEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const uEe="return (b >= 1.0) ? a : a * (b + 1.0);",cEe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,dEe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:a}=e,i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Qg(cEe,r.shape,a.shape):new uh(uEe,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)},pEe={kernelName:V3,backendName:"webgl",kernelFunc:dEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hEe=`
  return vec4(equal(a, b));
`,fEe="return float(a == b);",mEe=Jr({opSnippet:fEe,packedOpSnippet:hEe,dtype:"bool",cpuKernelImpl:tke}),gEe={kernelName:Im,backendName:"webgl",kernelFunc:mEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yEe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${L4};
  float a1 = ${F4};
  float a2 = ${B4};
  float a3 = ${z4};
  float a4 = ${j4};
  float a5 = ${V4};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,bEe=qt({opSnippet:yEe}),vEe={kernelName:Cm,backendName:"webgl",kernelFunc:bEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xEe=ch+`
  return exp(x);
`,wEe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,KB=qt({opSnippet:xEe,packedOpSnippet:wEe,cpuKernelImpl:nke,dtype:"float32"}),kEe={kernelName:Em,backendName:"webgl",kernelFunc:KB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function UT(t){const{inputs:e,attrs:n,backend:r}=t,{dim:a}=n,{input:i}=e,o=i.shape.length,s=i.shape.slice();let l=a;return a<0&&(V(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+a+1),s.splice(l,0,1),Le({inputs:{x:i},backend:r,attrs:{shape:s}})}const SEe={kernelName:Wv,backendName:"webgl",kernelFunc:UT};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const XB="return exp(x) - 1.0;",CEe=qt({opSnippet:XB,packedOpSnippet:XB,cpuKernelImpl:rke}),IEe={kernelName:Nm,backendName:"webgl",kernelFunc:CEe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class YB{constructor(e,n,r){this.variableNames=["real","imag"];const a=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${a}.0`:"1.0";let s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${s}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${a});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${a}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function QB(t,e,n){const r=n.texData.get(t.dataId),a=be(t.shape),i=t.shape[t.shape.length-1],o=a/i,s=Le({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=s.shape,u=new YB("real",l,e),c=new YB("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),g=Ou({inputs:{real:p,imag:f},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f);const y=Le({inputs:{x:g},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(g),y}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function EEe(t){const{inputs:e,backend:n}=t,{input:r}=e;return QB(r,!1,n)}const NEe={kernelName:Hv,backendName:"webgl",kernelFunc:EEe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class TEe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function r0(t){const{backend:e,attrs:n}=t,{shape:r,value:a}=n;let{dtype:i}=n;if(i=i||Tp(a),i==="string"){const o=Nr(i,be(r));return o.fill(a),e.makeTensorInfo(r,i,o)}else{const o=new TEe(r,a),s=[[a]];return e.runWebGLProgram(o,[],i,s)}}const _Ee={kernelName:qv,backendName:"webgl",kernelFunc:r0};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class REe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $Ee={kernelName:Kv,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,a=new REe(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ZB="return floor(x);",OEe=qt({opSnippet:ZB,packedOpSnippet:ZB,cpuKernelImpl:ake}),MEe={kernelName:Tm,backendName:"webgl",kernelFunc:OEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const PEe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,AEe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,DEe=Jr({opSnippet:PEe,packedOpSnippet:AEe,dtype:"int32"}),LEe={kernelName:_m,backendName:"webgl",kernelFunc:DEe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class FEe{constructor(e){this.variableNames=["A"];const n=Pa(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class BEe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Pa(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${a}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zEe={kernelName:Zx,backendName:"webgl",kernelFunc:jEe};let ph,GT=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function jEe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:a}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,[l,u]=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=[u,l],d=[u,l,i];if(s||o){const y=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(ph==null||y!==GT)&&(GT=y,ph=document.createElement("canvas").getContext("2d",{willReadFrequently:GT})),ph.canvas.width=l,ph.canvas.height=u,ph.drawImage(a,0,0,l,u),a=ph.canvas}const p=n.makeTensorInfo(c,"int32");n.texData.get(p.dataId).usage=Pi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);const f=fe().getBool("WEBGL_PACK")?new BEe(d):new FEe(d),g=n.runWebGLProgram(f,[p],"int32");return n.disposeData(p.dataId),g}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function VEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:g}=r,y=fl(c),v=Br(a.shape,i.shape,l,d,u,p,!1,y);let b;const x=[],w=o!=null,S=s!=null,C=f==="leakyrelu",I=()=>{const T=[a,i],M=(P,L)=>{if(L==="NCHW"&&P.shape.length===1&&P.shape[0]!==1){const j=Le({inputs:{x:P},backend:n,attrs:{shape:[P.shape[0],1,1]}});return x.push(j),j}return P};if(w&&T.push(M(o,c)),S&&T.push(M(s,c)),C){const P=n.makeTensorInfo([],"float32",sl(g,"float32"));T.push(P),x.push(P)}return T};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))b=zB({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:g});else if(v.strideWidth<=2&&y==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const T=f?Zg(f,!0):null,M=new BB(v,w,T,S,C),P=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],L=I();b=n.runWebGLProgram(M,L,"float32",P)}else if(fe().getBool("WEBGL_CONV_IM2COL"))b=jB({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:g});else{const T=f?Zg(f,!1):null,M=new FB(v,w,T,S,C),P=I();b=n.runWebGLProgram(M,P,"float32")}const _=Le({inputs:{x:b},backend:n,attrs:{shape:v.outShape}});return x.push(b),x.forEach(T=>n.disposeIntermediateTensorInfo(T)),_}const UEe={kernelName:fg,backendName:"webgl",kernelFunc:VEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function GEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,g=[];let y=c;y==null&&(y=[1,1]),V(pa(l,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${y}'`);const v=Br(a.shape,i.shape,l,y,u,d,!0),b=fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,x=p?Zg(p,b):null,w=[a,i],S=o!=null,C=s!=null,I=p==="leakyrelu";if(S&&w.push(o),C&&w.push(s),I){const P=n.makeTensorInfo([],"float32",sl(f,"float32"));w.push(P),g.push(P)}let _;b?_=new qB(v,S,x,C,I):_=new HB(v,S,x,C,I);const T=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],M=n.runWebGLProgram(_,w,"float32",T);return g.forEach(P=>n.disposeIntermediateTensorInfo(P)),M}const WEe={kernelName:mg,backendName:"webgl",kernelFunc:GEe};class HEe{constructor(e,n,r,a){this.sliceDim=e,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;const i=Tn(r.length);let o=`
    int index;`;for(let s=0;s<this.sliceDim;s++)o+=`
          index = round(getIndices(coords[0], ${s}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};
          flattenIndex += index * ${this.strides[s]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qEe(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=a.shape,o=i[i.length-1],s=be(r.shape),[l,u,c,d]=c2(r,a),p=Le({inputs:{x:a},backend:n,attrs:{shape:[u,o]}}),f=Le({inputs:{x:r},backend:n,attrs:{shape:[be(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,a])||r.dtype==="string"){const b=n.readSync(a.dataId),x=n.bufferSync(r),w=ike(b,x,r.dtype,u,o,c,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,w.values)}const g=new HEe(o,d,[u,c],r.shape),y=n.runWebGLProgram(g,[f,p],f.dtype),v=Le({inputs:{x:y},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),v}const KEe={kernelName:Qv,backendName:"webgl",kernelFunc:qEe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class XEe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Tn(this.rank),a=YEe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${a}));
      }
    `}}function YEe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<t.length;a++)a===2?r.push("index"):r.push(`${n[a]}`);return r.join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function JB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:o,batchDims:s}=r,l=Xt(o,a.shape)[0];if(fe().get("DEBUG")){const x=n.readSync(i.dataId),w=a.shape[l];for(let S=0;S<x.length;++S){const C=x[S];V(C<=w-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${w-1}]`)}}const u=Z4(a,i,l,s),c=be(i.shape),d=[],p=Le({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),f=Le({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(p),d.push(f);const g=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,i])||a.dtype==="string"){const x=n.bufferSync(f),w=n.bufferSync(p),S=oke(w,x,g);return d.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(u.outputShape,S.dtype,S.values)}const y=new XEe(p.shape,g),v=n.runWebGLProgram(y,[p,f],p.dtype);d.push(v);const b=Le({inputs:{x:v},backend:n,attrs:{shape:u.outputShape}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const QEe={kernelName:Yv,backendName:"webgl",kernelFunc:JB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ZEe="return float(a > b);",JEe=`
  return vec4(greaterThan(a, b));
`,e3e=Jr({opSnippet:ZEe,packedOpSnippet:JEe,cpuKernelImpl:ske,dtype:"bool"}),t3e={kernelName:Rm,backendName:"webgl",kernelFunc:e3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const n3e="return float(a >= b);",r3e=`
  return vec4(greaterThanEqual(a, b));
`,a3e=Jr({opSnippet:n3e,packedOpSnippet:r3e,dtype:"bool",cpuKernelImpl:lke}),i3e={kernelName:$m,backendName:"webgl",kernelFunc:a3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function o3e(t){const{inputs:e,backend:n}=t,{input:r}=e;return QB(r,!0,n)}const s3e={kernelName:Zv,backendName:"webgl",kernelFunc:o3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const l3e="return float(!isnan(x) && !isinf(x));",u3e=qt({opSnippet:l3e,dtype:"bool"}),c3e={kernelName:Mm,backendName:"webgl",kernelFunc:u3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const d3e="return float(isinf(x));",p3e=qt({opSnippet:d3e,dtype:"bool"}),h3e={kernelName:Pm,backendName:"webgl",kernelFunc:p3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const f3e="return float(isnan(x));",m3e=qt({opSnippet:f3e,dtype:"bool"}),g3e={kernelName:Am,backendName:"webgl",kernelFunc:m3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const y3e="return float(a < b);",b3e=`
  return vec4(lessThan(a, b));
`,v3e=Jr({opSnippet:y3e,packedOpSnippet:b3e,cpuKernelImpl:uke,dtype:"bool"}),x3e={kernelName:Dm,backendName:"webgl",kernelFunc:v3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const w3e="return float(a <= b);",k3e=`
  return vec4(lessThanEqual(a, b));
`,S3e=Jr({opSnippet:w3e,packedOpSnippet:k3e,cpuKernelImpl:cke,dtype:"bool"}),C3e={kernelName:Lm,backendName:"webgl",kernelFunc:S3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function I3e(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,o=dke(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}const E3e={kernelName:tx,backendName:"webgl",kernelFunc:I3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const N3e=ch+`
  return x < 0.0 ? 0./0. : log(x);
`,T3e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,_3e=qt({opSnippet:N3e,packedOpSnippet:T3e,cpuKernelImpl:pke}),R3e={kernelName:Fm,backendName:"webgl",kernelFunc:_3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $3e=ch+`
  return log(1.0 + x);
`,O3e=qt({opSnippet:$3e}),M3e={kernelName:Bm,backendName:"webgl",kernelFunc:O3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const P3e="return float(a >= 1.0 && b >= 1.0);",A3e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,D3e=Jr({opSnippet:P3e,packedOpSnippet:A3e,dtype:"bool"}),L3e={kernelName:zm,backendName:"webgl",kernelFunc:D3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const F3e="return float(!(x >= 1.0));",B3e=qt({opSnippet:F3e}),z3e={kernelName:jm,backendName:"webgl",kernelFunc:B3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const j3e="return float(a >= 1.0 || b >= 1.0);",V3e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,U3e=Jr({opSnippet:j3e,packedOpSnippet:V3e,dtype:"bool"}),G3e={kernelName:Vm,backendName:"webgl",kernelFunc:U3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class W3e{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[];const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${s}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class H3e{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const q3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:o,alpha:s,beta:l}=r,u=fe().getBool("WEBGL_PACK_NORMALIZATION")?new H3e(a.shape,i,o,s,l):new W3e(a.shape,i,o,s,l);return n.runWebGLProgram(u,[a],a.dtype)},K3e={kernelName:nx,backendName:"webgl",kernelFunc:q3e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class X3e{constructor(e,n,r,a,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${a}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${a})
                * float(${i})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Y3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r,d=new X3e(a.shape,s,l,u,c);return n.runWebGLProgram(d,[a,i,o],a.dtype)},Q3e={kernelName:U3,backendName:"webgl",kernelFunc:Y3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Z3e(t,e,n,r){const a=be(e),i=be(t.shape)/a,o=Le({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),s=sd(o,t.dtype,"max",r),l=Le({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ez(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:o}=r,s=a.shape.length,l=Xt(i,a.shape);let u=l;const c=dr(u,s),d=c!=null,p=n.shouldExecuteOnCPU([a]);let f=a;if(d){if(p){const x=n.texData.get(f.dataId).values,w=new Array(s);for(let I=0;I<w.length;I++)w[I]=a.shape[c[I]];const S=DT(x,a.shape,a.dtype,c,w);f=n.makeTensorInfo(w,a.dtype);const C=n.texData.get(f.dataId);C.values=S}else f=ew(a,c,n);u=pr(u.length,s)}Qr("max",u,s);const[g,y]=Yr(f.shape,u);let v=g;o&&(v=_r(g,l));let b;if(p){const x=n.texData.get(f.dataId).values,w=hke(x,be(y),v,a.dtype);b=n.makeTensorInfo(v,a.dtype);const S=n.texData.get(b.dataId);S.values=w}else b=Z3e(f,y,v,n);return d&&n.disposeIntermediateTensorInfo(f),b}const J3e={kernelName:rx,backendName:"webgl",kernelFunc:ez};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const eNe=FT+`
  return max(a, b);
`,tNe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Yg+`
  return result;
`,nNe=Jr({opSnippet:eNe,packedOpSnippet:tNe,cpuKernelImpl:fke}),rNe={kernelName:Um,backendName:"webgl",kernelFunc:nNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function aNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;Kg(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;V(pa(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=oo(a.shape,i,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&vn(c.inShape,c.outShape))return yi({inputs:{x:a},backend:n});const d=new Jg(c,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}const iNe={kernelName:ax,backendName:"webgl",kernelFunc:aNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=hl(a.shape,i,o,c,s,u,l),p=new zT(d,"max",!1);return n.runWebGLProgram(p,[a],a.dtype)}const sNe={kernelName:ix,backendName:"webgl",kernelFunc:oNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lNe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=i-1-e.padInfo.top,l=o-1-e.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class uNe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.front,p=u-1-e.padInfo.top,f=c-1-e.padInfo.left,g=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${g} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cNe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],p=hl(o.shape,s,l,d,u,c),f=new zT(p,"max",!0),g=n.runWebGLProgram(f,[o],o.dtype),y=new uNe(p),v=n.runWebGLProgram(y,[a,g],o.dtype);return n.disposeIntermediateTensorInfo(g),v}const dNe={kernelName:W3,backendName:"webgl",kernelFunc:cNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pNe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:o}=e,s=i;Kg([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,p=oo(s.shape,l,u,1,c,d),f=!0,g=new Jg(p,"max",f),y=n.runWebGLProgram(g,[s],s.dtype),v=new lNe(p),b=n.runWebGLProgram(v,[a,y],s.dtype);return n.disposeIntermediateTensorInfo(y),b}const hNe={kernelName:G3,backendName:"webgl",kernelFunc:pNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fNe(t,e,n,r){let a=new Jg(n,"max",!1);const i=r.runWebGLProgram(a,[t],"float32");a=new Jg(n,"max",!0,!0,e);const o=r.runWebGLProgram(a,[t],"float32");return[i,o]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mNe={kernelName:ox,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=e,l=n;V(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];V(pa(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=oo(r.shape,a,i,u,o),[d,p]=fNe(r,s,c,l);return[d,p]}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gNe(t,e,n,r){const a=be(e),i=be(t.shape)/a,o=Le({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),s=sd(o,"float32","mean",r),l=Le({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yNe={kernelName:sx,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:a,axis:i}=e,o=n,s=r.shape.length,l=Xt(i,r.shape);let u=l;const c=dr(u,s),d=c!=null,p=o.shouldExecuteOnCPU([r]),f=[];let g=r;if(d){if(p){const w=o.texData.get(g.dataId).values,S=new Array(s);for(let _=0;_<S.length;_++)S[_]=r.shape[c[_]];const C=DT(w,r.shape,r.dtype,c,S);g=o.makeTensorInfo(S,r.dtype);const I=o.texData.get(g.dataId);I.values=C}else g=ew(r,c,o);f.push(g),u=pr(u.length,s)}Qr("sum",u,s);const[y,v]=Yr(g.shape,u);let b=y;a&&(b=_r(y,l));const x=gNe(g,v,b,o);for(const w of f)o.disposeIntermediateTensorInfo(w);return x}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Xt(i,a.shape);let u=l;const c=dr(u,s);let d=a;c!=null&&(d=La({inputs:{x:a},backend:n,attrs:{perm:c}}),u=pr(u.length,a.shape.length)),Qr("min",u,s);const[p,f]=Yr(d.shape,u),g=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=sd(y,y.dtype,"min",n);let b;if(o){const x=_r(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const vNe={kernelName:lx,backendName:"webgl",kernelFunc:bNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xNe=FT+`
  return min(a, b);
`,wNe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Yg+`
  return result;
`,kNe=Jr({opSnippet:xNe,packedOpSnippet:wNe,cpuKernelImpl:mke}),SNe={kernelName:Gm,backendName:"webgl",kernelFunc:kNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class CNe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const a=e.length,i=Tn(a),o=n.map(c=>c[0]).join(","),s=n.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),u=r==="reflect"?0:1;if(a===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${a}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class INe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((g,y)=>g[0]+e[y]+g[1]);const a=e.length,i=Tn(a),o=n.map(g=>g[0]).join(","),s=n.map((g,y)=>g[0]+e[y]).join(","),l=Da("rc",a),u=Da("source",a),c=`${l[a-1]} < ${this.outputShape[a-1]}`,d=a===1?"source":`vec2(${u.slice(-2).join()})`,p=r==="reflect"?0:1;let f="";if(a===1){const g=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[a-1]} += 1;
        if(${c}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const g=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[a-1]} += 1;
        if(${c}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[a-2]} += 1;
        if(${l[a-2]} < ${this.outputShape[a-2]}) {
          ${g}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[a-1]} += 1;
          if(${c}) {
            ${g}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ENe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:a,mode:i}=n,o=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new INe(r.shape,a,i):new CNe(r.shape,a,i);return e.runWebGLProgram(o,[r],r.dtype)},NNe={kernelName:ux,backendName:"webgl",kernelFunc:ENe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const TNe=`if (b == 0.0) return NAN;
  return mod(a, b);`,_Ne=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Yg+`
  return result;
`,RNe=Jr({opSnippet:TNe,packedOpSnippet:_Ne}),$Ne={kernelName:Wm,backendName:"webgl",kernelFunc:RNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class ONe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const MNe=`
if (a == b) {
  return 1.0;
};
return a / b;`,PNe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,tz=Jr({opSnippet:MNe,packedOpSnippet:PNe,checkOutOfBounds:!0}),ANe={kernelName:km,backendName:"webgl",kernelFunc:tz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nz="return a - b;",rz=Jr({opSnippet:nz,packedOpSnippet:nz,supportsComplex:!0,cpuKernelImpl:Pke}),DNe={kernelName:lg,backendName:"webgl",kernelFunc:rz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function az(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,o=Xt([i],a.shape),s=ez({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=_r(s.shape,o),u=Le({inputs:{x:s},backend:n,attrs:{shape:l}}),c=rz({inputs:{a,b:u},backend:n}),d=KB({inputs:{x:c},backend:n}),p=tw({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),f=Le({inputs:{x:p},backend:n,attrs:{shape:l}}),g=tz({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}const LNe={kernelName:Dx,backendName:"webgl",kernelFunc:az};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function FNe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:o,normalized:s}=r,l=s?a:az({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new ONe(u,c,i),p=[[o]],f=n.runWebGLProgram(d,[l],"int32",p);return s||n.disposeIntermediateTensorInfo(l),f}const BNe={kernelName:cx,backendName:"webgl",kernelFunc:FNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zNe=mo+`
  return -x;
`,jNe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function VNe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,s]=yke(i.values,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,o)}let a;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new od(r.shape,jNe):a=new xl(r.shape,zNe),n.runWebGLProgram(a,[r],r.dtype)}const UNe={kernelName:dx,backendName:"webgl",kernelFunc:VNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const GNe=T2;function WNe(t){Mi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),{selectedIndices:d}=GNe(u,c,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const HNe={kernelName:px,backendName:"webgl",kernelFunc:WNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qNe=_2;function KNe(t){Mi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(a.dataId),d=n.readSync(i.dataId),{selectedIndices:p,validOutputs:f}=qNe(c,d,o,s,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const XNe={kernelName:hx,backendName:"webgl",kernelFunc:KNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const YNe=R2;function QNe(t){Mi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(a.dataId),d=n.readSync(i.dataId),p=o,f=s,g=l,y=u,{selectedIndices:v,selectedScores:b}=YNe(c,d,p,f,g,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const ZNe={kernelName:fx,backendName:"webgl",kernelFunc:QNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class JNe{constructor(e,n,r,a){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${a}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const e4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:o,onValue:s,offValue:l}=r,u=be(a.shape),c=new JNe(u,o,s,l),d=Le({inputs:{x:a},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(c,[d],i);n.disposeIntermediateTensorInfo(d);const f=[...a.shape,o],g=Le({inputs:{x:p},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(p),g},t4e={kernelName:gx,backendName:"webgl",kernelFunc:e4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sw(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const a=e0({inputs:{input:r},backend:n}),i=sw({inputs:{x:a},backend:n}),o=iw({inputs:{input:r},backend:n}),s=sw({inputs:{x:o},backend:n}),l=Ou({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return r0({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const n4e={kernelName:Qx,backendName:"webgl",kernelFunc:sw};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function iz(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const a=e0({inputs:{input:r},backend:n}),i=iz({inputs:{x:a},backend:n}),o=iw({inputs:{input:r},backend:n}),s=sw({inputs:{x:o},backend:n}),l=Ou({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return r0({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const r4e={kernelName:mx,backendName:"webgl",kernelFunc:iz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function a4e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return UT({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{Kr(i,c.shape,"All tensors passed to stack must have matching shapes"),V(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const d=UT({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(d),d}),u=LB({inputs:l,backend:n,attrs:{axis:a}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const i4e={kernelName:yx,backendName:"webgl",kernelFunc:a4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class o4e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const a=e.length,i=Tn(a),o=n.map(u=>u[0]).join(","),s=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);if(a===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class s4e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((y,v)=>y[0]+e[v]+y[1]);const a=e.length,i=Tn(a),o=n.map(y=>y[0]).join(","),s=n.map((y,v)=>y[0]+e[v]).join(","),l=Da("rc",a),u=Da("source",a),c=`${l[a-1]} < ${this.outputShape[a-1]}`,d=a===1?"source":`vec2(${u.slice(-2).join()})`,p=[`${i} rc = outputLoc;`,`${l[a-1]} += 1;
       if(${c}) {
      `,a===1?"":`}
       rc = outputLoc;
       ${l[a-2]} += 1;
       if(${l[a-2]} < ${this.outputShape[a-2]}) {`,a===1?"":`  ${l[a-1]} += 1;
         if(${c}) {`],f=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let y=0,v=a===1?2:4;y<v;y++)g+=`
        ${p[y]}
        if (${f}) {
          result[${y}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${y}] = getChannel(getX(${u.join()}), ${d});
        }
      `;g+=a===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const oz=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:o}=r;if(be(a.shape)===0){const u=i.map((c,d)=>c[0]+a.shape[d]+c[1]);return r0({backend:n,attrs:{shape:u,value:o,dtype:a.dtype}})}const s=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new s4e(a.shape,i,o):new o4e(a.shape,i,o),l=[[o]];return n.runWebGLProgram(s,[a],a.dtype,l)},l4e={kernelName:bx,backendName:"webgl",kernelFunc:oz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const u4e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,c4e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Yg+`
  return result;
`,d4e=Jr({opSnippet:u4e,packedOpSnippet:c4e}),p4e={kernelName:Km,backendName:"webgl",kernelFunc:d4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=[],u=Xt(i,a.shape);let c=u;const d=dr(c,s);let p=a;d!=null&&(p=La({inputs:{x:a},backend:n,attrs:{perm:d}}),c=pr(c.length,s),l.push(p)),Qr("prod",c,s);let f;if(n.shouldExecuteOnCPU([p])){const g=n.texData.get(p.dataId).values,{outVals:y,outShape:v,outDtype:b}=vke(p.shape,p.dtype,g,c);f=n.makeTensorInfo(v,b,y)}else{const[g,y]=Yr(p.shape,c),v=be(y),b=Le({inputs:{x:p},backend:n,attrs:{shape:[-1,v]}}),x=o2(a.dtype),w=sd(b,x,"prod",n);f=Le({inputs:{x:w},backend:n,attrs:{shape:g}}),l.push(b),l.push(w)}if(o){l.push(f);const g=_r(f.shape,u);f=Le({inputs:{x:f},backend:n,attrs:{shape:g}})}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),f}const f4e={kernelName:xx,backendName:"webgl",kernelFunc:h4e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m4e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:s}=r,l=a.map(b=>n.readSync(b.dataId)),u=a.map(b=>b.shape),c=n.readSync(i.dataId),d=n.readSync(o.dataId),[p,f,g]=xke(l,u,c,i.shape,i.dtype,d,o.shape,s),y=p.map(b=>n.makeTensorInfo([b.length],"int32",b)),v=n.makeTensorInfo(g,i.dtype,f);return y.concat([v])}const g4e={kernelName:wx,backendName:"webgl",kernelFunc:m4e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y4e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),d=n.readSync(o.dataId),p=s.map(v=>n.readSync(v.dataId)),f=s.map(v=>v.shape),[g,y]=wke(u,a.shape,c,i.shape,i.dtype,d,o.shape,p,f,l);return n.makeTensorInfo(g,i.dtype,y)}const b4e={kernelName:kx,backendName:"webgl",kernelFunc:y4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sz=t=>{const{backend:e,attrs:n}=t,{start:r,stop:a,step:i,dtype:o}=n,s=kke(r,a,i,o);return e.makeTensorInfo([s.length],o,s)},v4e={kernelName:Sx,backendName:"webgl",kernelFunc:sz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const x4e="return 1.0 / x;",w4e=qt({opSnippet:x4e}),k4e={kernelName:Xm,backendName:"webgl",kernelFunc:w4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const S4e=mo+`
  return (x < 0.0) ? 0.0 : x;
`,C4e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,I4e=qt({opSnippet:S4e,packedOpSnippet:C4e}),E4e={kernelName:Ym,backendName:"webgl",kernelFunc:I4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const N4e=mo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,T4e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,_4e=qt({opSnippet:N4e,packedOpSnippet:T4e}),R4e={kernelName:Qm,backendName:"webgl",kernelFunc:_4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class $4e{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];let p;i?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class O4e{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];let p;i?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function M4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,u]=s,c=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new O4e(a.shape,l,u,i,o):new $4e(a.shape,l,u,i,o);return n.runWebGLProgram(c,[a],"float32")}const P4e={kernelName:Nx,backendName:"webgl",kernelFunc:M4e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class A4e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,o,s]=e,l=[r&&o>1?a-1:a,r&&s>1?i-1:i],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],d=l[1]/u[1],p=1/c,f=1/d,g=Math.ceil(p)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${f});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${a-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function D4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r,s=new A4e(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const L4e={kernelName:q3,backendName:"webgl",kernelFunc:D4e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class F4e{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";let f;i?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class B4e{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";let f;i?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function z4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,u]=s,c=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new B4e(a.shape,l,u,i,o):new F4e(a.shape,l,u,i,o);return n.runWebGLProgram(c,[a],a.dtype)}const j4e={kernelName:Ex,backendName:"webgl",kernelFunc:z4e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class V4e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,o,s]=e,l=[r&&o>1?a-1:a,r&&s>1?i-1:i],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],d=l[1]/u[1],p=1/c,f=1/d,g=Math.ceil(p)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${f});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function U4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r,s=new V4e(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const G4e={kernelName:H3,backendName:"webgl",kernelFunc:U4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class W4e{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const a=s=>n.indexOf(s)!==-1&&e[s]!==1?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`,i=e.map((s,l)=>a(l)).join(","),o=Tn(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class H4e{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const a=Da("rc",r),i=`${a[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${a[r-2]} + 1 < ${this.outputShape[r-2]}`,s=Tn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(a.slice())};
          if(${i}){
            result.g = ${u(a.slice())};
          }
          if(${o}) {
            result.b = ${c(a.slice())};
            if(${i}) {
              result.a = ${d(a.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(g){return p(g)}function u(g){return g[r-1]="("+g[r-1]+" + 1)",p(g)}function c(g){return g[r-2]="("+g[r-2]+" + 1)",p(g)}function d(g){return g[r-1]="("+g[r-1]+" + 1)",g[r-2]="("+g[r-2]+" + 1)",p(g)}function p(g){const y=e.map((x,w)=>f(w,g)),v=y.join(","),b=y.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${b}))`}function f(g,y){return n.indexOf(g)!==-1&&e[g]!==1?`${e[g]} - ${y[g]} - 1`:`${y[g]}`}}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function q4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r,o=a.shape.length,s=Xt(i,a.shape);if(o===0)return yi({inputs:{x:a},backend:n});const l=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new H4e(a.shape,s):new W4e(a.shape,s);return n.runWebGLProgram(l,[a],a.dtype)}const K4e={kernelName:Tx,backendName:"webgl",kernelFunc:q4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class X4e{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],a=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Y4e={kernelName:Jx,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:o}=e,s=n,l=new X4e(r.shape,i),[u,c]=O4(o,r.shape[1],r.shape[2]),d=[[u,c,Math.sin(a),Math.cos(a)]];return s.runWebGLProgram(l,[r],r.dtype,d)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Q4e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Z4e=qt({opSnippet:Q4e}),J4e={kernelName:Zm,backendName:"webgl",kernelFunc:Z4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const eTe="return inversesqrt(x);",tTe=qt({opSnippet:eTe,cpuKernelImpl:Ske}),nTe={kernelName:Jm,backendName:"webgl",kernelFunc:tTe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lz{constructor(e,n,r,a,i,o,s=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const l=Tn(i.length),u=Tn(o.length);let c="";r===1?c="i":r===2&&(c="i, j");const d=`getIndices(${c})`;let p="";a===1?p="i":a===2&&(p="i, coords[1]");const f=`getUpdates(${p})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${f};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rTe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Fp(i,a,o),p=[d/u,u];if(d===0)return n.makeTensorInfo(o,a.dtype);const f=Le({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),g=Le({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),y=n.makeTensorInfo([],"float32",new Float32Array([0])),v=new lz(l,s,f.shape.length,g.shape.length,c,p),b=n.runWebGLProgram(v,[g,f,y],g.dtype),x=Le({inputs:{x:b},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(y),x}const aTe={kernelName:_x,backendName:"webgl",kernelFunc:rTe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class iTe{constructor(e,n,r,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,s=fe().getNumber("WEBGL_VERSION")===2?i:o,l=a==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${s}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oTe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:o}=r,s=new iTe(a.shape[0],a.shape[1],i.shape[1],o),l=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",l)}const sTe={kernelName:Rx,backendName:"webgl",kernelFunc:oTe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lTe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let a,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",a="resRC";else{const s=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${s[c]}`),c<e&&l.push(`${s[c]}`);a=l.join(),i=u.join()}const o=Tn(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${a});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uTe(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e,o=new lTe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],Xa(a.dtype,i.dtype))}const cTe={kernelName:$x,backendName:"webgl",kernelFunc:uTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dTe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${A4};
  float scale = ${D4};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,pTe=qt({opSnippet:dTe}),hTe={kernelName:eg,backendName:"webgl",kernelFunc:pTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fTe=ch+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,mTe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,gTe=qt({opSnippet:fTe,packedOpSnippet:mTe,cpuKernelImpl:Ike}),yTe={kernelName:ag,backendName:"webgl",kernelFunc:gTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const bTe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,vTe=qt({opSnippet:bTe}),xTe={kernelName:rg,backendName:"webgl",kernelFunc:vTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wTe=ch+`
  return sin(x);
`,kTe=qt({opSnippet:wTe}),STe={kernelName:tg,backendName:"webgl",kernelFunc:kTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const CTe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,ITe=qt({opSnippet:CTe}),ETe={kernelName:ng,backendName:"webgl",kernelFunc:ITe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const NTe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,TTe=qt({opSnippet:NTe}),_Te={kernelName:ig,backendName:"webgl",kernelFunc:TTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const RTe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:o}=r;V(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((b,x)=>b*x),l=[[0,0]];l.push(...o);for(let b=1+i.length;b<a.shape.length;++b)l.push([0,0]);const u=[],c=oz({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),d=Bg(c.shape,i,s,!1),p=zg(d.length,i.length,!1),f=jg(c.shape,i,s,!1),g=Le({inputs:{x:c},backend:n,attrs:{shape:d}}),y=La({inputs:{x:g},backend:n,attrs:{perm:p}}),v=Le({inputs:{x:y},backend:n,attrs:{shape:f}});return u.push(c),u.push(g),u.push(y),u.forEach(b=>n.disposeIntermediateTensorInfo(b)),v},$Te={kernelName:Px,backendName:"webgl",kernelFunc:RTe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function OTe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${a.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.readSync(r.dataId),l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],[d,p,f,g,y]=Nke(s,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,f),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const MTe={kernelName:Lx,backendName:"webgl",kernelFunc:OTe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function PTe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[u,c,d]=Tke(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const ATe={kernelName:Fx,backendName:"webgl",kernelFunc:PTe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function DTe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[u,c]=pB(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const LTe={kernelName:Bx,backendName:"webgl",kernelFunc:DTe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function FTe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[u,c]=pB(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const BTe={kernelName:zx,backendName:"webgl",kernelFunc:FTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zTe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=Fp(i,a,s),f=!1;if(i.dtype==="string"){const b=n.bufferSync(a),x=n.bufferSync(i),w=ll(n.readSync(o.dataId)[0]),S=Cke(b,x,s,p,c,u,l,d,w,f);return n.makeTensorInfo(s,S.dtype,S.values)}const g=new lz(u,l,a.shape.length,i.shape.length,d,[p,1],f),y=n.runWebGLProgram(g,[i,a,o],i.dtype),v=Le({inputs:{x:y},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(y),v}const jTe={kernelName:jx,backendName:"webgl",kernelFunc:zTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function VTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:o}=r,s=Xt(o,a.shape)[0],l=Y4(a,i,s),u=a.shape.length,c=new Array(u).fill(0),d=a.shape.slice();return l.map(p=>{const f=[...d];f[s]=p;const g=dh({inputs:{x:a},backend:n,attrs:{begin:c,size:f}});return c[s]+=p,g})}const UTe={kernelName:Ax,backendName:"webgl",kernelFunc:VTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const uz="return sqrt(x);",GTe=qt({opSnippet:uz,packedOpSnippet:uz,cpuKernelImpl:_ke}),WTe={kernelName:og,backendName:"webgl",kernelFunc:GTe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const HTe="return x * x;",qTe=qt({opSnippet:HTe}),KTe={kernelName:K3,backendName:"webgl",kernelFunc:qTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cz="return (a - b) * (a - b);",XTe=Jr({opSnippet:cz,packedOpSnippet:cz}),YTe={kernelName:sg,backendName:"webgl",kernelFunc:XTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function QTe({inputs:t,attrs:e,backend:n}){const{x:r}=t,a=mo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new xl(r.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}const ZTe={kernelName:pg,backendName:"webgl",kernelFunc:QTe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class JTe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const a=r.length,i=Tn(r.length),o=Tn(r.length);let s="";if(a===1)s="coords * strides + begin";else{let l=0;s=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function e_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:f,finalShape:g,isIdentity:y,sliceDim0:v,isSimpleSlice:b,begin:x,end:w,strides:S}=LN(a.shape,i,o,s,l,u,c,d,p);let C;if(y)C=Le({inputs:{x:a},backend:n,attrs:{shape:g}});else if(v||b){V(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const _=MN(x,w,S),T=dh({inputs:{x:a},backend:n,attrs:{begin:x,size:_}});C=Le({inputs:{x:T},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(T)}else if(n.shouldExecuteOnCPU([a])){const _=n.readSync(a.dataId),T=St(a.shape,a.dtype,_),M=Rke(f,T,S,x);C=n.makeTensorInfo(g,a.dtype,M.values)}else{const _=new JTe(x,S,f);C=n.runWebGLProgram(_,[a],a.dtype)}const I=Le({inputs:{x:C},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(C),I}const t_e={kernelName:Vx,backendName:"webgl",kernelFunc:e_e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function n_e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,p=n.readSync(c.dataId),f=n.readSync(d.dataId),[g,y]=$ke(p,f,a,i,o,s,l,u);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}const r_e={kernelName:Ux,backendName:"webgl",kernelFunc:n_e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function a_e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[u,c,d]=Oke(s,l,a),p=c.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const i_e={kernelName:Gx,backendName:"webgl",kernelFunc:a_e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function o_e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),s=Mke(o,a);return n.makeTensorInfo(i.shape,"int32",s)}const s_e={kernelName:Wx,backendName:"webgl",kernelFunc:o_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const l_e="return tan(x);",u_e=qt({opSnippet:l_e}),c_e={kernelName:ug,backendName:"webgl",kernelFunc:u_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const d_e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,p_e=qt({opSnippet:d_e}),h_e={kernelName:cg,backendName:"webgl",kernelFunc:p_e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class f_e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const a=Tn(this.rank),i=m_e(e);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function m_e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<t.length;a++)r.push(`imod(${n[a]}, ${t[a]})`);return r.join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;if(a.dtype==="string"||a.shape.length>5){const s=n.readSync(a.dataId),l=a.dtype==="string"?s.map(d=>ll(d)):s,u=St(a.shape,a.dtype,l),c=Ake(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}const o=new f_e(a.shape,i);return n.runWebGLProgram(o,[a],a.dtype)}const g_e={kernelName:dg,backendName:"webgl",kernelFunc:dz};class y_e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class b_e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ld(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function pz(t){let e=1;for(;e<t;)e*=2;return e}function v_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:o}=r,s=fe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=fe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=a.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([a])||c<s||i>l){const M=n.readSync(a.dataId),[P,L]=Dke(M,u,a.dtype,i,o);return[n.makeTensorInfo(P.shape,P.dtype,P.values),n.makeTensorInfo(L.shape,L.dtype,L.values)]}if(i===0)return u[u.length-1]=0,[n.makeTensorInfo(u,a.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[a,r0({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(a.dataId),p=d!==null&&d.isPacked,f=p?n.unpackTensor(a):a,g=be(u)/c,y=Le({inputs:{x:f},attrs:{shape:[g,c]},backend:n});p&&ld(n,f);const v=pz(i),b=pz(c);let x=null;const w=()=>x===null?[y,y]:[y,x],S=(M,P,L)=>{const j=w(),B=new y_e(L),K=[[c],[x===null?1:0],[Number.NEGATIVE_INFINITY],[M],[P]],X=x;x=n.runWebGLProgram(B,j,"int32",K),ld(n,X)};for(let M=1;M<v;M*=2){const P=M*2;for(let L=M;L>=1;L/=2)S(P,L,[g,b])}for(let M=b;M>v;M/=2){const P=w(),L=new b_e([g,M/2]),j=[[c],[x===null?1:0],[v]],B=x;x=n.runWebGLProgram(L,P,"int32",j),ld(n,B);const K=v/2,X=K*2;for(let Z=K;Z>=1;Z/=2)S(X,Z,x.shape)}let C=x;x=dh({inputs:{x},backend:n,attrs:{begin:0,size:[g,i]}}),ld(n,C);let I=JB({inputs:{x:y,indices:x},backend:n,attrs:{axis:1,batchDims:1}});ld(n,y);const _=u.slice(0,-1);_.push(i),C=x,x=Le({inputs:{x},attrs:{shape:_},backend:n}),ld(n,C);const T=I;return I=Le({inputs:{x:I},attrs:{shape:_},backend:n}),ld(n,T),[I,x]}const x_e={kernelName:Hx,backendName:"webgl",kernelFunc:v_e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class w_e{constructor(e,n,r,a,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s=r==="nearest"?1:2;let l;switch(a){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${s} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function k_e(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,transforms:i}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=r,[c,d,p,f]=a.shape,[g,y]=u??[d,p],v=[c,g,y,f],b=new w_e(d,p,o,s,l,v);return n.runWebGLProgram(b,[a,i],"float32")}const S_e={kernelName:qx,backendName:"webgl",kernelFunc:k_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function C_e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;Kg(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:s,outputShape:l,indices:u}=Lke(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const I_e={kernelName:Kx,backendName:"webgl",kernelFunc:C_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function E_e(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a,s=o.shape.length,l=a.shape[i],u=new Array(s-1);let c=0;for(let y=0;y<s;y++)y!==i&&(u[c++]=o.shape[y]);const d=[],p=new Array(s).fill(0),f=o.shape.slice();f[i]=1;const g=new Array(l);for(let y=0;y<g.length;y++){p[i]=y;const v=dh({inputs:{x:o},backend:n,attrs:{begin:p,size:f}}),b=Le({inputs:{x:v},backend:n,attrs:{shape:u}});g[y]=b,d.push(v)}return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const N_e={kernelName:Xx,backendName:"webgl",kernelFunc:E_e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class T_e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,a=e.batchSize,i=e.inSize,o=e.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,d=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let g="";i%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${g}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function __e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:o}=r,s=a.shape.length,l=[];let u=0;const c=dr([u],s);let d=a;c!=null&&(d=La({inputs:{x:a},backend:n,attrs:{perm:c}}),l.push(d),u=pr(1,s)[0]);const p=S9(d.shape,u,o),f=be([d.shape[u]]),g=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(g);const y=o2(a.dtype),v=(S,C,I,_,T)=>{const M=S.shape[0],P=S.shape[1],L=k9(P,T),j={windowSize:L,inSize:P,batchSize:M,numSegments:T},B=new T_e(j,C),K=n.compileAndRun(B,[S,I],_);if(l.push(K),K.shape[1]===T)return K;const X=sz({backend:n,attrs:{start:0,stop:T,step:1,dtype:"float32"}}),Z=dz({inputs:{x:X},backend:n,attrs:{reps:[P/L]}});return l.push(X),l.push(Z),v(K,C,Z,_,T)},b=v(g,"unsortedSegmentSum",i,y,o),x=Le({inputs:{x:b},backend:n,attrs:{shape:p}});let w=x;if(c!=null){l.push(x);const S=Rg(c);w=La({inputs:{x:w},backend:n,attrs:{perm:S}})}return l.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const R_e={kernelName:Yx,backendName:"webgl",kernelFunc:__e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $_e=[TSe,RSe,MSe,DSe,FSe,jSe,USe,WSe,XSe,QSe,eCe,rCe,oCe,cCe,hCe,mCe,yCe,wCe,SCe,ICe,_Ce,DCe,FCe,zCe,HCe,KCe,ZCe,dSe,tIe,oIe,cIe,gIe,bIe,xIe,kIe,CIe,NIe,RIe,MIe,AIe,LIe,BIe,VIe,GIe,KIe,YIe,JIe,nEe,aEe,lEe,pEe,gEe,vEe,kEe,SEe,IEe,NEe,_Ee,$Ee,MEe,LEe,zEe,UEe,WEe,KEe,QEe,t3e,i3e,cSe,s3e,aIe,c3e,h3e,g3e,hSe,x3e,C3e,E3e,R3e,M3e,L3e,z3e,G3e,K3e,Q3e,J3e,rNe,iNe,sNe,dNe,hNe,mNe,yNe,vNe,SNe,NNe,$Ne,BNe,gSe,UNe,HNe,XNe,ZNe,VCe,t4e,r4e,i4e,l4e,p4e,mSe,f4e,g4e,b4e,v4e,UCe,ANe,k4e,E4e,R4e,bSe,P4e,L4e,j4e,G4e,K4e,Y4e,J4e,nTe,aTe,sTe,cTe,hTe,yTe,xTe,STe,ETe,PCe,LNe,_Te,$Te,MTe,ATe,LTe,BTe,jTe,UTe,WTe,KTe,YTe,ZTe,t_e,r_e,i_e,s_e,DNe,ISe,c_e,h_e,g_e,x_e,S_e,ESe,I_e,N_e,R_e,n4e];for(const t of $_e)n2(t);async function O_e(){return await Fge({base:"pascal",quantizationBytes:2})}async function M_e(t,e){const n=await t.segment(e);return A_e(e,n)}function P_e(t,e,n,r,a){const i=document.createElement("canvas"),o=document.createElement("canvas"),s=i.getContext("2d"),l=o.getContext("2d");i.width=r,i.height=a,o.width=r,o.height=a,s.drawImage(e,0,0,r,a),l.putImageData(n,0,0);const u=s.getImageData(0,0,r,a),c=u.data,d=l.getImageData(0,0,r,a).data;for(let p=0,f=d.length;p<f;p+=4)d[p]===t[0]&&d[p+1]===t[1]&&d[p+2]===t[2]&&(c[p+3]=0);return s.putImageData(u,0,0),i.toDataURL()}function A_e(t,e){const{height:n,width:r,segmentationMap:a}=e,i=new ImageData(a,r,n);return P_e([0,0,0],t,i,r,n)}const D_e=()=>{const t=R.useRef(null),e=async n=>(t.current||(t.current=await O_e()),await M_e(t.current,n));return R.useEffect(()=>()=>{t.current&&t.current.dispose()},[]),{autoRemoveBackground:e}};async function L_e(t){try{const e=await fetch(t);if(!e.ok)throw new Error(e.statusText);const n=await e.json();return"@type"in n?n["@type"]!="sc:Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type of sc:Manifest but has a type of: "+n["@type"]),null):B_e(n):"type"in n?n.type!="Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a type of Manifest but has a type of: "+n.type),null):z_e(n):(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type or type value of Manifest"),null)}catch(e){return console.log("I was unable to get the Manifest you supplied due to: "+e),null}}function F_e(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}function B_e(t){var e,n,r;if("sequences"in t){let a=t.sequences;F_e(a)&&(a=[a]);let i=!1;for(const o of a)if("canvases"in o){i=!0;for(const s of o.canvases){const l=(r=(n=(e=s.images[0])==null?void 0:e.resource)==null?void 0:n.service)==null?void 0:r["@id"];if(l)return l}}else i||console.log("The manifest you supplied contains no canvases so there are no images to show.")}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function z_e(t){if("items"in t){const e=t.items;for(const n of e){const r=n.items[0].items[0].body.service[0]["@id"];if(r)return r}}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function hz(t,e){const n=window.getComputedStyle(t);return parseInt(n.getPropertyValue(e),10)}function j_e(t,e){const{width:n,height:r}=e,a=1080,i="0",o="default",s=".jpg",l=document.querySelector(".displayregioncontainer"),u=document.querySelector(".displayregion");if(!l||!u)throw new Error("Canvas or selection element not found");const{clientWidth:c,clientHeight:d}=l,p=n*d/r,f=(c-p)/2,g=n/p,y=9,v=hz(u,"left"),b=hz(u,"top"),x=Math.round(u.clientWidth+y),w=Math.round(u.clientHeight+y),S=Math.max(Math.round((v-f)*g),0),C=Math.max(Math.round(b*g),0),I=Math.min(Math.round(x*g),n),_=Math.min(Math.round(w*g),r),T=`${S},${C},${I},${_}`;return`${t}/${T}/${a},/${i}/${o}${s}`}const fz={fetchIIIFIdentifier:async t=>{try{return await L_e(t)}catch(e){return console.error(e),null}},getCroppedImagePath:async t=>{try{const e=t+"/info.json",n=await fetch(e);if(!n.ok)throw new Error(n.statusText);const r=await n.json();return j_e(t,r)}catch(e){console.error(e)}}};function V_e({imageList:t,handleImageClick:e}){return re.jsx(to,{margin:"my-4",className:"flex overflow-x-auto",style:{maxHeight:"200px",scrollSnapType:"x mandatory",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:t.map(n=>re.jsx("img",{src:n.thumbnail,alt:n.name,onClick:()=>e(n),style:{cursor:"pointer",marginRight:"10px",scrollSnapAlign:"start"},role:"presentation"},n.id))})}const U_e=R.lazy(()=>Tie(()=>import("./index-O5PoMrs5.js"),$w([]))),G_e={canvasBackgroundColor:"010A01",gestureSettingsTouch:{dragToPan:!1,dblClickToZoom:!1,dblClickDragToZoom:!1,flickEnabled:!1,pinchRotate:!0},informationPanel:{open:!1},openSeadragon:{loadTilesWithAjax:!0,showNavigationControl:!1,showHomeControl:!1,showFullPageControl:!1,showRotationControl:!1,showFlipControl:!1,showZoomControl:!1},showTitle:!1,showIIIFBadge:!1},W_e={colors:{primary:"#b990c1",accent:"#b990c1",secondary:"#EDECEA"}};function H_e(){const{t}=tu(),e=()=>voe.success(t("collectionToastSuccess")),{addToArtwork:n,imageLikeList:r}=bc(),[a,i]=R.useState(r[0]||null),[o,s]=R.useState(""),[l,u]=R.useState(""),[c,d]=R.useState([]),[p,f]=R.useState(""),[g,y]=R.useState(!0),{autoRemoveBackground:v}=D_e();R.useEffect(()=>{o&&setTimeout(()=>{u(document.querySelectorAll("canvas")[0].toDataURL())},1e3)},[o]),R.useEffect(()=>{a&&u(a?.image)},[a]);const b=I=>{i(I)},x=I=>{const _=new Image;_.src=I,v(_).then(T=>{f(T)})},w=async(I,_)=>{try{if(e(),g){const T=await fz.getCroppedImagePath(_);T&&n(I,T)}else n(I,_)}catch(T){console.error("Error:",T)}},S=I=>{I&&s(I)},C=()=>re.jsxs("h2",{className:"mt-4 text-xl",children:["\u{1F300} ",t("collectionLoading")]});return re.jsxs(to,{margin:"my-4",className:"flex flex-col flex-wrap gap-4 container justify-center content-center text-center mx-auto",children:[re.jsx("div",{className:"p-2",children:re.jsx("h1",{className:"text-xl",children:t("collectionTitle")})}),re.jsx(boe,{}),re.jsx(V_e,{imageList:r,handleImageClick:b}),a&&re.jsxs(to,{margin:"my-0",className:"space-y-4",children:[re.jsxs(to,{margin:"mb-4",className:"flex flex-wrap gap-4 container justify-center text-center mx-auto",children:[re.jsx("p",{className:"text-xl self-center",children:t("collectionSwitchLasso")}),re.jsx(cP,{checked:g,onChange:()=>y(!g)}),re.jsx("p",{className:"text-xl self-center",children:t("collectionSwitchViewer")}),re.jsx(yr,{className:"p-4 text-xl text-black w-2/3 mx-auto h-16",rounded:!0,inline:!0,onClick:()=>g?w(a?.id,a?.identifier):w("1",p),children:t("collectionAddText")})]}),g?re.jsx(R.Suspense,{fallback:C(),children:re.jsx(U_e,{iiifContent:a.url,options:G_e,customTheme:W_e,canvasIdCallback:S})}):re.jsxs(re.Fragment,{children:[re.jsx(Aoe,{value:c,src:l,onChange:I=>{d(I)},onComplete:I=>{I.length&&Roe(l,I,(_,T)=>{_||f(T.toDataURL())})}}),re.jsxs("div",{children:[p&&re.jsx(yr,{className:"p-4 text-xl text-black w-2/3 mx-auto h-16",rounded:!0,inline:!0,onClick:()=>x(p),children:t("collectionRemoveText")}),re.jsx("img",{className:"my-4 mx-auto",src:p,alt:""})]})]})]})]})}function q_e(){const{t}=tu();return re.jsxs(uP,{labels:!0,icons:!0,className:"left-0 bottom-0 fixed k-color-brand-primary text-center",innerClassName:"tabbar-inner",children:[re.jsx(Kf,{active:au({path:eo("/").pathname,end:!0}),to:"/",component:My,icon:re.jsx(_a,{material:re.jsx(YJ,{className:"w-10 h-10"}),className:`transition duration-300 ${au({path:eo("/").pathname,end:!0})&&"animate-pulse"}`}),label:t("start"),touchRipple:!1}),re.jsx(Kf,{active:au({path:eo("/selection").pathname,end:!0}),to:"/selection",component:My,icon:re.jsx(_a,{material:re.jsx(qJ,{className:"w-10 h-10"}),className:`transition duration-300 ${au({path:eo("/selection").pathname,end:!0})&&"animate-pulse"}`}),label:t("selection"),touchRipple:!1}),re.jsx(Kf,{active:au({path:eo("/collection").pathname,end:!0}),to:"/collection",component:My,icon:re.jsx(_a,{material:re.jsx(iee,{className:"w-10 h-10"}),className:`transition duration-300 ${au({path:eo("/collection").pathname,end:!0})&&"animate-pulse"}`}),label:t("collection"),touchRipple:!1}),re.jsx(Kf,{active:au({path:eo("/creation").pathname,end:!0}),to:"/creation",component:My,icon:re.jsx(_a,{material:re.jsx(JJ,{className:"w-10 h-10"}),className:`transition duration-300 ${au({path:eo("/creation").pathname,end:!0})&&"animate-pulse"}`}),label:t("artwork"),touchRipple:!1})]})}const K_e="/logos/bmbf_logo_de.jpg",X_e="/logos/bmbf_logo_en.jpg",Y_e="/logos/digitalwarenkombinat.png",Q_e="/logos/prototype_fund_logo.png",Z_e=()=>re.jsx(pp,{href:"https://prototypefund.de/",target:"_blank",children:re.jsx("img",{src:Q_e,alt:"Logo Protype Fund",className:"w-64 m-auto"})}),J_e=()=>{const{i18n:t}=tu();return re.jsx(pp,{href:"https://www.bmbf.de/",target:"_blank",children:re.jsx("img",{src:t.resolvedLanguage==="en"?X_e:K_e,alt:"Logo Bundesministerium f\xFCr Bildung und Forschung",className:"w-64 m-auto"})})},e5e=()=>re.jsx(pp,{href:"https://digitalwarenkombinat.de/",target:"_blank",children:re.jsx("img",{src:Y_e,alt:"Logo Digitalwarenkombinat",className:"w-64 m-auto"})});function t5e(t,e){const{t:n,i18n:r}=tu();return re.jsx(sP,{side:"right",opened:t,onBackdropClick:()=>e(!1),children:re.jsxs(Gy,{children:[re.jsx(jy,{right:re.jsx(fee,{onClick:()=>e(!1),className:"mr-4 w-10 h-10"})}),re.jsxs(to,{className:"space-y-4",children:[re.jsx("p",{className:"text-xl",children:n("sidebarChooseLanguage")}),re.jsx(yr,{onClick:()=>r.changeLanguage("de"),className:"p-4 text-xl text-black w-10 mr-2 h-10",rounded:!0,inline:!0,children:"DE"}),re.jsx(yr,{onClick:()=>r.changeLanguage("en"),className:"p-4 text-xl text-black w-10 h-10",rounded:!0,inline:!0,children:"EN"}),re.jsx("p",{children:n("sidebarAbout")}),re.jsx("p",{children:n("sidebarLegal")}),re.jsx(Z_e,{}),re.jsx(J_e,{}),re.jsx(e5e,{})]})]})})}function n5e(){const[t,e]=R.useState(!1);return re.jsxs(re.Fragment,{children:[re.jsx(J6,{theme:"material",children:re.jsxs(Gy,{children:[re.jsx(jy,{className:"top-0 sticky",transparent:!0,right:re.jsx(OJ,{onClick:()=>e(!0),className:"mr-4 w-10 h-10"})}),re.jsx("main",{className:"h-[calc(100%_-_192px)] overflow-auto",children:re.jsx(IX,{})}),re.jsx(q_e,{}),t5e(t,e)]})}),re.jsx(WX,{})]})}var mz={exports:{}},gz={exports:{}},yz={exports:{}},bz={exports:{}},vz={exports:{}},WT=Object.defineProperty,r5e=Object.getOwnPropertyDescriptor,a5e=Object.getOwnPropertyNames,i5e=Object.prototype.hasOwnProperty,xz=(t,e)=>{for(var n in e)WT(t,n,{get:e[n],enumerable:!0})},o5e=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of a5e(e))!i5e.call(t,a)&&a!==n&&WT(t,a,{get:()=>e[a],enumerable:!(r=r5e(e,a))||r.enumerable});return t},s5e=t=>o5e(WT({},"__esModule",{value:!0}),t),wz={};xz(wz,{FluidValue:()=>E5e,Globals:()=>kz,addFluidObserver:()=>N5e,callFluidObserver:()=>Jz,callFluidObservers:()=>I5e,clamp:()=>Lz,colorToRgba:()=>r_,colors:()=>y5e,createInterpolator:()=>a_,createStringInterpolator:()=>M5e,defineHidden:()=>c5e,deprecateDirectCall:()=>L5e,deprecateInterpolate:()=>A5e,each:()=>_z,eachProp:()=>p5e,easings:()=>k5e,flush:()=>Rz,flushCalls:()=>f5e,frameLoop:()=>Pz,getFluidObservers:()=>C5e,getFluidValue:()=>Zz,hasFluidValue:()=>S5e,hex3:()=>Vz,hex4:()=>Uz,hex6:()=>Gz,hex8:()=>Wz,hsl:()=>zz,hsla:()=>jz,is:()=>ks,isAnimatedString:()=>F5e,isEqual:()=>d5e,isSSR:()=>uw,noop:()=>Tz,onResize:()=>aj,onScroll:()=>H5e,once:()=>o_,prefix:()=>vw,raf:()=>Jt,removeFluidObserver:()=>T5e,rgb:()=>Fz,rgba:()=>Bz,setFluidGetter:()=>ej,toArray:()=>h5e,useConstant:()=>K5e,useForceUpdate:()=>Z5e,useIsomorphicLayoutEffect:()=>l_,useMemoOne:()=>J5e,useOnce:()=>nRe,usePrev:()=>aRe,useReducedMotion:()=>oRe});var l5e=s5e(wz),kz={};xz(kz,{assign:()=>Mz,colors:()=>Au,createStringInterpolator:()=>ZT,skipAnimation:()=>Oz,to:()=>$z,willAdvance:()=>JT});var HT=i0(),Jt=t=>a0(t,HT),qT=i0();Jt.write=t=>a0(t,qT);var lw=i0();Jt.onStart=t=>a0(t,lw);var KT=i0();Jt.onFrame=t=>a0(t,KT);var XT=i0();Jt.onFinish=t=>a0(t,XT);var hh=[];Jt.setTimeout=(t,e)=>{let n=Jt.now()+e,r=()=>{let i=hh.findIndex(o=>o.cancel==r);~i&&hh.splice(i,1),Pu-=~i?1:0},a={time:n,handler:t,cancel:r};return hh.splice(Sz(n),0,a),Pu+=1,Cz(),a};var Sz=t=>~(~hh.findIndex(e=>e.time>t)||~hh.length);Jt.cancel=t=>{lw.delete(t),KT.delete(t),XT.delete(t),HT.delete(t),qT.delete(t)},Jt.sync=t=>{QT=!0,Jt.batchedUpdates(t),QT=!1},Jt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...a){e=a,Jt.onStart(n)}return r.handler=t,r.cancel=()=>{lw.delete(n),e=null},r};var YT=typeof window<"u"?window.requestAnimationFrame:()=>{};Jt.use=t=>YT=t,Jt.now=typeof performance<"u"?()=>performance.now():Date.now,Jt.batchedUpdates=t=>t(),Jt.catch=console.error,Jt.frameLoop="always",Jt.advance=()=>{Jt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Ez()};var Mu=-1,Pu=0,QT=!1;function a0(t,e){QT?(e.delete(t),t(0)):(e.add(t),Cz())}function Cz(){Mu<0&&(Mu=0,Jt.frameLoop!=="demand"&&YT(Iz))}function u5e(){Mu=-1}function Iz(){~Mu&&(YT(Iz),Jt.batchedUpdates(Ez))}function Ez(){let t=Mu;Mu=Jt.now();let e=Sz(Mu);if(e&&(Nz(hh.splice(0,e),n=>n.handler()),Pu-=e),!Pu){u5e();return}lw.flush(),HT.flush(t?Math.min(64,Mu-t):16.667),KT.flush(),qT.flush(),XT.flush()}function i0(){let t=new Set,e=t;return{add(n){Pu+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Pu-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Pu-=e.size,Nz(e,r=>r(n)&&t.add(r)),Pu+=t.size,e=t)}}}function Nz(t,e){t.forEach(n=>{try{e(n)}catch(r){Jt.catch(r)}})}function Tz(){}var c5e=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),ks={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function d5e(t,e){if(ks.arr(t)){if(!ks.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var _z=(t,e)=>t.forEach(e);function p5e(t,e,n){if(ks.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(let r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var h5e=t=>ks.und(t)?[]:ks.arr(t)?t:[t];function Rz(t,e){if(t.size){let n=Array.from(t);t.clear(),_z(n,e)}}var f5e=(t,...e)=>Rz(t,n=>n(...e)),uw=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),ZT,$z,Au=null,Oz=!1,JT=Tz,Mz=t=>{t.to&&($z=t.to),t.now&&(Jt.now=t.now),t.colors!==void 0&&(Au=t.colors),t.skipAnimation!=null&&(Oz=t.skipAnimation),t.createStringInterpolator&&(ZT=t.createStringInterpolator),t.requestAnimationFrame&&Jt.use(t.requestAnimationFrame),t.batchedUpdates&&(Jt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(JT=t.willAdvance),t.frameLoop&&(Jt.frameLoop=t.frameLoop)},o0=new Set,go=[],e_=[],cw=0,Pz={get idle(){return!o0.size&&!go.length},start(t){cw>t.priority?(o0.add(t),Jt.onStart(m5e)):(Az(t),Jt(t_))},advance:t_,sort(t){if(cw)Jt.onFrame(()=>Pz.sort(t));else{let e=go.indexOf(t);~e&&(go.splice(e,1),Dz(t))}},clear(){go=[],o0.clear()}};function m5e(){o0.forEach(Az),o0.clear(),Jt(t_)}function Az(t){go.includes(t)||Dz(t)}function Dz(t){go.splice(g5e(go,e=>e.priority>t.priority),0,t)}function t_(t){let e=e_;for(let n=0;n<go.length;n++){let r=go[n];cw=r.priority,r.idle||(JT(r),r.advance(t),r.idle||e.push(r))}return cw=0,e_=go,e_.length=0,go=e,go.length>0}function g5e(t,e){let n=t.findIndex(e);return n<0?t.length:n}var Lz=(t,e,n)=>Math.min(Math.max(n,t),e),y5e={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Wo="[-+]?\\d*\\.?\\d+",dw=Wo+"%";function pw(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Fz=new RegExp("rgb"+pw(Wo,Wo,Wo)),Bz=new RegExp("rgba"+pw(Wo,Wo,Wo,Wo)),zz=new RegExp("hsl"+pw(Wo,dw,dw)),jz=new RegExp("hsla"+pw(Wo,dw,dw,Wo)),Vz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Uz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Gz=/^#([0-9a-fA-F]{6})$/,Wz=/^#([0-9a-fA-F]{8})$/;function b5e(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Gz.exec(t))?parseInt(e[1]+"ff",16)>>>0:Au&&Au[t]!==void 0?Au[t]:(e=Fz.exec(t))?(fh(e[1])<<24|fh(e[2])<<16|fh(e[3])<<8|255)>>>0:(e=Bz.exec(t))?(fh(e[1])<<24|fh(e[2])<<16|fh(e[3])<<8|Kz(e[4]))>>>0:(e=Vz.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Wz.exec(t))?parseInt(e[1],16)>>>0:(e=Uz.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=zz.exec(t))?(Hz(qz(e[1]),hw(e[2]),hw(e[3]))|255)>>>0:(e=jz.exec(t))?(Hz(qz(e[1]),hw(e[2]),hw(e[3]))|Kz(e[4]))>>>0:null}function n_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Hz(t,e,n){let r=n<.5?n*(1+e):n+e-n*e,a=2*n-r,i=n_(a,r,t+1/3),o=n_(a,r,t),s=n_(a,r,t-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(s*255)<<8}function fh(t){let e=parseInt(t,10);return e<0?0:e>255?255:e}function qz(t){return(parseFloat(t)%360+360)%360/360}function Kz(t){let e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function hw(t){let e=parseFloat(t);return e<0?0:e>100?1:e/100}function r_(t){let e=b5e(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,a=(e&65280)>>>8,i=(e&255)/255;return`rgba(${n}, ${r}, ${a}, ${i})`}var a_=(t,e,n)=>{if(ks.fun(t))return t;if(ks.arr(t))return a_({range:t,output:e,extrapolate:n});if(ks.str(t.output[0]))return ZT(t);let r=t,a=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{let c=x5e(u,i);return v5e(u,i[c],i[c+1],a[c],a[c+1],l,o,s,r.map)}};function v5e(t,e,n,r,a,i,o,s,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(s==="identity")return u;s==="clamp"&&(u=n)}return r===a?r:e===n?t<=e?r:a:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=i(u),r===-1/0?u=-u:a===1/0?u=u+r:u=u*(a-r)+r,u)}function x5e(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var w5e=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);let r=n*t,a=e==="end"?Math.floor(r):Math.ceil(r);return Lz(0,1,a/t)},fw=1.70158,mw=fw*1.525,Xz=fw+1,Yz=2*Math.PI/3,Qz=2*Math.PI/4.5,gw=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,k5e={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>Xz*t*t*t-fw*t*t,easeOutBack:t=>1+Xz*Math.pow(t-1,3)+fw*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((mw+1)*2*t-mw)/2:(Math.pow(2*t-2,2)*((mw+1)*(t*2-2)+mw)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*Yz),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*Yz)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Qz))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Qz)/2+1,easeInBounce:t=>1-gw(1-t),easeOutBounce:gw,easeInOutBounce:t=>t<.5?(1-gw(1-2*t))/2:(1+gw(2*t-1))/2,steps:w5e},s0=Symbol.for("FluidValue.get"),mh=Symbol.for("FluidValue.observers"),S5e=t=>!!(t&&t[s0]),Zz=t=>t&&t[s0]?t[s0]():t,C5e=t=>t[mh]||null;function Jz(t,e){t.eventObserved?t.eventObserved(e):t(e)}function I5e(t,e){let n=t[mh];n&&n.forEach(r=>{Jz(r,e)})}var E5e=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");ej(this,t)}},ej=(t,e)=>tj(t,s0,e);function N5e(t,e){if(t[s0]){let n=t[mh];n||tj(t,mh,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function T5e(t,e){let n=t[mh];if(n&&n.has(e)){let r=n.size-1;r?n.delete(e):t[mh]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var tj=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),yw=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_5e=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,nj=new RegExp(`(${yw.source})(%|[a-z]+)`,"i"),R5e=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,bw=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,rj=t=>{let[e,n]=$5e(t);if(!e||uw())return t;let r=window.getComputedStyle(document.documentElement).getPropertyValue(e);return r?r.trim():n&&n.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(n)||t:n&&bw.test(n)?rj(n):n||t},$5e=t=>{let e=bw.exec(t);if(!e)return[,];let[,n,r]=e;return[n,r]},i_,O5e=(t,e,n,r,a)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${a})`,M5e=t=>{i_||(i_=Au?new RegExp(`(${Object.keys(Au).join("|")})(?!\\w)`,"g"):/^\b$/);let e=t.output.map(a=>Zz(a).replace(bw,rj).replace(_5e,r_).replace(i_,r_)),n=e.map(a=>a.match(yw).map(Number)),r=n[0].map((a,i)=>n.map(o=>{if(!(i in o))throw Error('The arity of each "output" value must be equal');return o[i]})).map(a=>a_({...t,output:a}));return a=>{var i;let o=!nj.test(e[0])&&((i=e.find(l=>nj.test(l)))==null?void 0:i.replace(yw,"")),s=0;return e[0].replace(yw,()=>`${r[s++](a)}${o||""}`).replace(R5e,O5e)}},vw="react-spring: ",o_=t=>{let e=t,n=!1;if(typeof e!="function")throw new TypeError(`${vw}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},P5e=o_(console.warn);function A5e(){P5e(`${vw}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var D5e=o_(console.warn);function L5e(){D5e(`${vw}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function F5e(t){return ks.str(t)&&(t[0]=="#"||/\d/.test(t)||!uw()&&bw.test(t)||t in(Au||{}))}var gh,xw=new WeakMap,B5e=t=>t.forEach(({target:e,contentRect:n})=>{var r;return(r=xw.get(e))==null?void 0:r.forEach(a=>a(n))});function z5e(t,e){gh||typeof ResizeObserver<"u"&&(gh=new ResizeObserver(B5e));let n=xw.get(e);return n||(n=new Set,xw.set(e,n)),n.add(t),gh&&gh.observe(e),()=>{let r=xw.get(e);r&&(r.delete(t),!r.size&&gh&&gh.unobserve(e))}}var ww=new Set,l0,j5e=()=>{let t=()=>{ww.forEach(e=>e({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},V5e=t=>(ww.add(t),l0||(l0=j5e()),()=>{ww.delete(t),!ww.size&&l0&&(l0(),l0=void 0)}),aj=(t,{container:e=document.documentElement}={})=>e===document.documentElement?V5e(t):z5e(t,e),U5e=(t,e,n)=>e-t===0?1:(n-t)/(e-t),G5e={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},W5e=class{constructor(t,e){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=n=>{let r=this.info[n],{length:a,position:i}=G5e[n];r.current=this.container[`scroll${i}`],r.scrollLength=this.container["scroll"+a]-this.container["client"+a],r.progress=U5e(0,r.scrollLength,r.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=t,this.container=e,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},u0=new WeakMap,ij=new WeakMap,s_=new WeakMap,oj=t=>t===document.documentElement?window:t,H5e=(t,{container:e=document.documentElement}={})=>{let n=s_.get(e);n||(n=new Set,s_.set(e,n));let r=new W5e(t,e);if(n.add(r),!u0.has(e)){let i=()=>(n?.forEach(s=>s.advance()),!0);u0.set(e,i);let o=oj(e);window.addEventListener("resize",i,{passive:!0}),e!==document.documentElement&&ij.set(e,aj(i,{container:e})),o.addEventListener("scroll",i,{passive:!0})}let a=u0.get(e);return Jt(a),()=>{var i;Jt.cancel(a);let o=s_.get(e);if(!o||(o.delete(r),o.size))return;let s=u0.get(e);u0.delete(e),s&&(oj(e).removeEventListener("scroll",s),window.removeEventListener("resize",s),(i=ij.get(e))==null||i())}},q5e=R;function K5e(t){let e=(0,q5e.useRef)(null);return e.current===null&&(e.current=t()),e.current}var X5e=R,Y5e=R,sj=R,l_=uw()?sj.useEffect:sj.useLayoutEffect,Q5e=()=>{let t=(0,Y5e.useRef)(!1);return l_(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function Z5e(){let t=(0,X5e.useState)()[1],e=Q5e();return()=>{e.current&&t(Math.random())}}var u_=R;function J5e(t,e){let[n]=(0,u_.useState)(()=>({inputs:e,result:t()})),r=(0,u_.useRef)(),a=r.current,i=a;return i?e&&i.inputs&&eRe(e,i.inputs)||(i={inputs:e,result:t()}):i=n,(0,u_.useEffect)(()=>{r.current=i,a==n&&(n.inputs=n.result=void 0)},[i]),i.result}function eRe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var tRe=R,nRe=t=>(0,tRe.useEffect)(t,rRe),rRe=[],lj=R;function aRe(t){let e=(0,lj.useRef)();return(0,lj.useEffect)(()=>{e.current=t}),e.current}var iRe=R,oRe=()=>{let[t,e]=(0,iRe.useState)(null);return l_(()=>{let n=window.matchMedia("(prefers-reduced-motion)"),r=a=>{e(a.matches),Mz({skipAnimation:a.matches})};return r(n),n.addEventListener("change",r),()=>{n.removeEventListener("change",r)}},[]),t};vz.exports=l5e;var en=vz.exports,uj={exports:{}},sRe=Object.create,kw=Object.defineProperty,lRe=Object.getOwnPropertyDescriptor,uRe=Object.getOwnPropertyNames,cRe=Object.getPrototypeOf,dRe=Object.prototype.hasOwnProperty,pRe=(t,e)=>{for(var n in e)kw(t,n,{get:e[n],enumerable:!0})},cj=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of uRe(e))!dRe.call(t,a)&&a!==n&&kw(t,a,{get:()=>e[a],enumerable:!(r=lRe(e,a))||r.enumerable});return t},hRe=(t,e,n)=>(n=t!=null?sRe(cRe(t)):{},cj(e||!t||!t.__esModule?kw(n,"default",{value:t,enumerable:!0}):n,t)),fRe=t=>cj(kw({},"__esModule",{value:!0}),t),dj={};pRe(dj,{Animated:()=>c_,AnimatedArray:()=>h_,AnimatedObject:()=>Iw,AnimatedString:()=>Sw,AnimatedValue:()=>d0,createHost:()=>CRe,getAnimated:()=>hj,getAnimatedType:()=>vRe,getPayload:()=>mj,isAnimated:()=>pj,setAnimated:()=>fj});var mRe=fRe(dj),gRe=en,c0=Symbol.for("Animated:node"),pj=t=>!!t&&t[c0]===t,hj=t=>t&&t[c0],fj=(t,e)=>(0,gRe.defineHidden)(t,c0,e),mj=t=>t&&t[c0]&&t[c0].getPayload(),c_=class{constructor(){fj(this,this)}getPayload(){return this.payload||[]}},d_=en,d0=class extends c_{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,d_.is.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new d0(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return d_.is.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){let{done:t}=this;this.done=!1,d_.is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},p_=en,Sw=class extends d0{constructor(t){super(0),this._string=null,this._toString=(0,p_.createInterpolator)({output:[t,t]})}static create(t){return new Sw(t)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(t){if(p_.is.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=(0,p_.createInterpolator)({output:[this.getValue(),t]})),this._value=0,super.reset()}},yRe=en,ud=en,Cw={dependencies:null},Iw=class extends c_{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){let e={};return(0,ud.eachProp)(this.source,(n,r)=>{pj(n)?e[r]=n.getValue(t):(0,ud.hasFluidValue)(n)?e[r]=(0,ud.getFluidValue)(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&(0,ud.each)(this.payload,t=>t.reset())}_makePayload(t){if(t){let e=new Set;return(0,ud.eachProp)(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Cw.dependencies&&(0,ud.hasFluidValue)(t)&&Cw.dependencies.add(t);let e=mj(t);e&&(0,ud.each)(e,n=>this.add(n))}},h_=class extends Iw{constructor(t){super(t)}static create(t){return new h_(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){let e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(bRe)),!0)}};function bRe(t){return((0,yRe.isAnimatedString)(t)?Sw:d0).create(t)}var gj=en;function vRe(t){let e=hj(t);return e?e.constructor:gj.is.arr(t)?h_:(0,gj.isAnimatedString)(t)?Sw:d0}var yh=en,xRe=hRe(R),p0=R,Ai=en,yj=(t,e)=>{let n=!Ai.is.fun(t)||t.prototype&&t.prototype.isReactComponent;return(0,p0.forwardRef)((r,a)=>{let i=(0,p0.useRef)(null),o=n&&(0,p0.useCallback)(g=>{i.current=SRe(a,g)},[a]),[s,l]=kRe(r,e),u=(0,Ai.useForceUpdate)(),c=()=>{let g=i.current;n&&!g||(g?e.applyAnimatedValues(g,s.getValue(!0)):!1)===!1&&u()},d=new wRe(c,l),p=(0,p0.useRef)();(0,Ai.useIsomorphicLayoutEffect)(()=>(p.current=d,(0,Ai.each)(l,g=>(0,Ai.addFluidObserver)(g,d)),()=>{p.current&&((0,Ai.each)(p.current.deps,g=>(0,Ai.removeFluidObserver)(g,p.current)),Ai.raf.cancel(p.current.update))})),(0,p0.useEffect)(c,[]),(0,Ai.useOnce)(()=>()=>{let g=p.current;(0,Ai.each)(g.deps,y=>(0,Ai.removeFluidObserver)(y,g))});let f=e.getComponentProps(s.getValue());return xRe.createElement(t,{...f,ref:o})})},wRe=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ai.raf.write(this.update)}};function kRe(t,e){let n=new Set;return Cw.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Iw(t),Cw.dependencies=null,[t,n]}function SRe(t,e){return t&&(Ai.is.fun(t)?t(e):t.current=e),e}var bj=Symbol.for("AnimatedComponent"),CRe=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=a=>new Iw(a),getComponentProps:r=a=>a}={})=>{let a={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},i=o=>{let s=vj(o)||"Anonymous";return yh.is.str(o)?o=i[o]||(i[o]=yj(o,a)):o=o[bj]||(o[bj]=yj(o,a)),o.displayName=`Animated(${s})`,o};return(0,yh.eachProp)(t,(o,s)=>{yh.is.arr(t)&&(s=vj(o)),i[s]=i(o)}),{animated:i}},vj=t=>yh.is.str(t)?t:t&&yh.is.str(t.displayName)?t.displayName:yh.is.fun(t)&&t.name||null;uj.exports=mRe;var h0=uj.exports,xj={exports:{}},f_,wj;function IRe(){if(wj)return f_;wj=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,a=(u,c)=>{for(var d in c)t(u,d,{get:c[d],enumerable:!0})},i=(u,c,d,p)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of n(c))!r.call(u,f)&&f!==d&&t(u,f,{get:()=>c[f],enumerable:!(p=e(c,f))||p.enumerable});return u},o=u=>i(t({},"__esModule",{value:!0}),u),s={};a(s,{Any:()=>l}),f_=o(s);var l=class{};return f_}var kj;function ERe(){return kj||(kj=1,xj.exports=IRe()),xj.exports}(function(t){var e=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,s=(D,U)=>{for(var J in U)n(D,J,{get:U[J],enumerable:!0})},l=(D,U,J,ae)=>{if(U&&typeof U=="object"||typeof U=="function")for(let ve of a(U))!o.call(D,ve)&&ve!==J&&n(D,ve,{get:()=>U[ve],enumerable:!(ae=r(U,ve))||ae.enumerable});return D},u=(D,U,J)=>(l(D,U,"default"),J&&l(J,U,"default")),c=(D,U,J)=>(J=D!=null?e(i(D)):{},l(U||!D||!D.__esModule?n(J,"default",{value:D,enumerable:!0}):J,D)),d=D=>l(n({},"__esModule",{value:!0}),D),p={};s(p,{BailSignal:()=>Je,Controller:()=>ke,FrameValue:()=>Qt,Globals:()=>Ns.Globals,Interpolation:()=>Uu,Spring:()=>Es,SpringContext:()=>fn,SpringRef:()=>qo,SpringValue:()=>hn,Trail:()=>ba,Transition:()=>md,config:()=>ne,createInterpolator:()=>Ts.createInterpolator,easings:()=>Ts.easings,inferTo:()=>T,interpolate:()=>gd,to:()=>Fw,update:()=>Gu,useChain:()=>K,useInView:()=>ya,useIsomorphicLayoutEffect:()=>Ts.useIsomorphicLayoutEffect,useReducedMotion:()=>Ts.useReducedMotion,useResize:()=>wn,useScroll:()=>Cl,useSpring:()=>ga,useSpringRef:()=>ju,useSpringValue:()=>Ko,useSprings:()=>Li,useTrail:()=>tn,useTransition:()=>Sl}),t.exports=d(p);var f=en,g=en;function y(D,...U){return g.is.fun(D)?D(...U):D}var v=(D,U)=>D===!0||!!(U&&D&&(g.is.fun(D)?D(U):(0,g.toArray)(D).includes(U))),b=(D,U)=>g.is.obj(D)?U&&D[U]:D,x=(D,U)=>D.default===!0?D[U]:D.default?D.default[U]:void 0,w=D=>D,S=(D,U=w)=>{let J=C;D.default&&D.default!==!0&&(D=D.default,J=Object.keys(D));let ae={};for(let ve of J){let Ce=U(D[ve],ve);g.is.und(Ce)||(ae[ve]=Ce)}return ae},C=["config","onProps","onStart","onChange","onPause","onResume","onRest"],I={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function _(D){let U={},J=0;if((0,g.eachProp)(D,(ae,ve)=>{I[ve]||(U[ve]=ae,J++)}),J)return U}function T(D){let U=_(D);if(U){let J={to:U};return(0,g.eachProp)(D,(ae,ve)=>ve in U||(J[ve]=ae)),J}return{...D}}function M(D){return D=(0,g.getFluidValue)(D),g.is.arr(D)?D.map(M):(0,g.isAnimatedString)(D)?g.Globals.createStringInterpolator({range:[0,1],output:[D,D]})(1):D}function P(D){for(let U in D)return!0;return!1}function L(D){return g.is.fun(D)||g.is.arr(D)&&g.is.obj(D[0])}function j(D,U){var J;(J=D.ref)==null||J.delete(D),U?.delete(D)}function B(D,U){var J;U&&D.ref!==U&&((J=D.ref)==null||J.delete(D),U.add(D),D.ref=U)}function K(D,U,J=1e3){(0,f.useIsomorphicLayoutEffect)(()=>{if(U){let ae=0;(0,f.each)(D,(ve,Ce)=>{let Ae=ve.current;if(Ae.length){let $e=J*U[Ce];isNaN($e)?$e=ae:ae=$e,(0,f.each)(Ae,Te=>{(0,f.each)(Te.queue,je=>{let mt=je.delay;je.delay=rt=>$e+y(mt||0,rt)})}),ve.start()}})}else{let ae=Promise.resolve();(0,f.each)(D,ve=>{let Ce=ve.current;if(Ce.length){let Ae=Ce.map($e=>{let Te=$e.queue;return $e.queue=[],Te});ae=ae.then(()=>((0,f.each)(Ce,($e,Te)=>(0,f.each)(Ae[Te]||[],je=>$e.queue.push(je))),Promise.all(ve.start())))}})}})}var X=en,Z=R,H=en,F=en,Y=h0,Q=en,ne={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},se={...ne.default,mass:1,damping:1,easing:Q.easings.linear,clamp:!1},pe=class{constructor(){this.velocity=0,Object.assign(this,se)}};function de(D,U,J){J&&(J={...J},ie(J,U),U={...J,...U}),ie(D,U),Object.assign(D,U);for(let Ae in se)D[Ae]==null&&(D[Ae]=se[Ae]);let{frequency:ae,damping:ve}=D,{mass:Ce}=D;return Q.is.und(ae)||(ae<.01&&(ae=.01),ve<0&&(ve=0),D.tension=Math.pow(2*Math.PI/ae,2)*Ce,D.friction=4*Math.PI*ve*Ce/ae),D}function ie(D,U){if(!Q.is.und(U.decay))D.duration=void 0;else{let J=!Q.is.und(U.tension)||!Q.is.und(U.friction);(J||!Q.is.und(U.frequency)||!Q.is.und(U.damping)||!Q.is.und(U.mass))&&(D.duration=void 0,D.decay=void 0),J&&(D.frequency=void 0)}}var xe=[],q=class{constructor(){this.changed=!1,this.values=xe,this.toValues=null,this.fromValues=xe,this.config=new pe,this.immediate=!1}},oe=en;function he(D,{key:U,props:J,defaultProps:ae,state:ve,actions:Ce}){return new Promise((Ae,$e)=>{let Te,je,mt=v(J.cancel??ae?.cancel,U);if(mt)xt();else{oe.is.und(J.pause)||(ve.paused=v(J.pause,U));let Ke=ae?.pause;Ke!==!0&&(Ke=ve.paused||v(Ke,U)),Te=y(J.delay||0,U),Ke?(ve.resumeQueue.add(Rt),Ce.pause()):(Ce.resume(),Rt())}function rt(){ve.resumeQueue.add(Rt),ve.timeouts.delete(je),je.cancel(),Te=je.time-oe.raf.now()}function Rt(){Te>0&&!oe.Globals.skipAnimation?(ve.delayed=!0,je=oe.raf.setTimeout(xt,Te),ve.pauseQueue.add(rt),ve.timeouts.add(je)):xt()}function xt(){ve.delayed&&(ve.delayed=!1),ve.pauseQueue.delete(rt),ve.timeouts.delete(je),D<=(ve.cancelId||0)&&(mt=!0);try{Ce.start({...J,callId:D,cancel:mt},Ae)}catch(Ke){$e(Ke)}}})}var Ie=en,Ee=(D,U)=>U.length==1?U[0]:U.some(J=>J.cancelled)?Xe(D.get()):U.every(J=>J.noop)?_e(D.get()):Fe(D.get(),U.every(J=>J.finished)),_e=D=>({value:D,noop:!0,finished:!0,cancelled:!1}),Fe=(D,U,J=!1)=>({value:D,finished:U,cancelled:J}),Xe=D=>({value:D,cancelled:!0,finished:!1});function Oe(D,U,J,ae){let{callId:ve,parentId:Ce,onRest:Ae}=U,{asyncTo:$e,promise:Te}=J;return!Ce&&D===$e&&!U.reset?Te:J.promise=(async()=>{J.asyncId=ve,J.asyncTo=D;let je=S(U,(pt,at)=>at==="onRest"?void 0:pt),mt,rt,Rt=new Promise((pt,at)=>(mt=pt,rt=at)),xt=pt=>{let at=ve<=(J.cancelId||0)&&Xe(ae)||ve!==J.asyncId&&Fe(ae,!1);if(at)throw pt.result=at,rt(pt),pt},Ke=(pt,at)=>{let wt=new Je,st=new nt;return(async()=>{if(Ie.Globals.skipAnimation)throw lt(J),st.result=Fe(ae,!1),rt(st),st;xt(wt);let bt=Ie.is.obj(pt)?{...pt}:{...at,to:pt};bt.parentId=ve,(0,Ie.eachProp)(je,(Ja,Ut)=>{Ie.is.und(bt[Ut])&&(bt[Ut]=Ja)});let ar=await ae.start(bt);return xt(wt),J.paused&&await new Promise(Ja=>{J.resumeQueue.add(Ja)}),ar})()},ct;if(Ie.Globals.skipAnimation)return lt(J),Fe(ae,!1);try{let pt;Ie.is.arr(D)?pt=(async at=>{for(let wt of at)await Ke(wt)})(D):pt=Promise.resolve(D(Ke,ae.stop.bind(ae))),await Promise.all([pt.then(mt),Rt]),ct=Fe(ae.get(),!0,!1)}catch(pt){if(pt instanceof Je)ct=pt.result;else if(pt instanceof nt)ct=pt.result;else throw pt}finally{ve==J.asyncId&&(J.asyncId=Ce,J.asyncTo=Ce?$e:void 0,J.promise=Ce?Te:void 0)}return Ie.is.fun(Ae)&&Ie.raf.batchedUpdates(()=>{Ae(ct,ae,ae.item)}),ct})()}function lt(D,U){(0,Ie.flush)(D.timeouts,J=>J.cancel()),D.pauseQueue.clear(),D.resumeQueue.clear(),D.asyncId=D.asyncTo=D.promise=void 0,U&&(D.cancelId=U)}var Je=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},nt=class extends Error{constructor(){super("SkipAnimationSignal")}},et=en,on=h0,jt=D=>D instanceof Qt,Yt=1,Qt=class extends et.FluidValue{constructor(){super(...arguments),this.id=Yt++,this._priority=0}get priority(){return this._priority}set priority(D){this._priority!=D&&(this._priority=D,this._onPriorityChange(D))}get(){let D=(0,on.getAnimated)(this);return D&&D.getValue()}to(...D){return et.Globals.to(this,D)}interpolate(...D){return(0,et.deprecateInterpolate)(),et.Globals.to(this,D)}toJSON(){return this.get()}observerAdded(D){D==1&&this._attach()}observerRemoved(D){D==0&&this._detach()}_attach(){}_detach(){}_onChange(D,U=!1){(0,et.callFluidObservers)(this,{type:"change",parent:this,value:D,idle:U})}_onPriorityChange(D){this.idle||et.frameLoop.sort(this),(0,et.callFluidObservers)(this,{type:"priority",parent:this,priority:D})}},$t=Symbol.for("SpringPhase"),Ct=1,zn=2,Xn=4,za=D=>(D[$t]&Ct)>0,_n=D=>(D[$t]&zn)>0,Qa=D=>(D[$t]&Xn)>0,yo=(D,U)=>U?D[$t]|=zn|Ct:D[$t]&=~zn,bi=(D,U)=>U?D[$t]|=Xn:D[$t]&=~Xn,hn=class extends Qt{constructor(D,U){if(super(),this.animation=new q,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!F.is.und(D)||!F.is.und(U)){let J=F.is.obj(D)?{...D}:{...U,from:D};F.is.und(J.default)&&(J.default=!0),this.start(J)}}get idle(){return!(_n(this)||this._state.asyncTo)||Qa(this)}get goal(){return(0,F.getFluidValue)(this.animation.to)}get velocity(){let D=(0,Y.getAnimated)(this);return D instanceof Y.AnimatedValue?D.lastVelocity||0:D.getPayload().map(U=>U.lastVelocity||0)}get hasAnimated(){return za(this)}get isAnimating(){return _n(this)}get isPaused(){return Qa(this)}get isDelayed(){return this._state.delayed}advance(D){let U=!0,J=!1,ae=this.animation,{toValues:ve}=ae,{config:Ce}=ae,Ae=(0,Y.getPayload)(ae.to);!Ae&&(0,F.hasFluidValue)(ae.to)&&(ve=(0,F.toArray)((0,F.getFluidValue)(ae.to))),ae.values.forEach((je,mt)=>{if(je.done)return;let rt=je.constructor==Y.AnimatedString?1:Ae?Ae[mt].lastPosition:ve[mt],Rt=ae.immediate,xt=rt;if(!Rt){if(xt=je.lastPosition,Ce.tension<=0){je.done=!0;return}let Ke=je.elapsedTime+=D,ct=ae.fromValues[mt],pt=je.v0!=null?je.v0:je.v0=F.is.arr(Ce.velocity)?Ce.velocity[mt]:Ce.velocity,at,wt=Ce.precision||(ct==rt?.005:Math.min(1,Math.abs(rt-ct)*.001));if(F.is.und(Ce.duration))if(Ce.decay){let st=Ce.decay===!0?.998:Ce.decay,bt=Math.exp(-(1-st)*Ke);xt=ct+pt/(1-st)*(1-bt),Rt=Math.abs(je.lastPosition-xt)<=wt,at=pt*bt}else{at=je.lastVelocity==null?pt:je.lastVelocity;let st=Ce.restVelocity||wt/10,bt=Ce.clamp?0:Ce.bounce,ar=!F.is.und(bt),Ja=ct==rt?je.v0>0:ct<rt,Ut,Vn=!1,An=1,va=Math.ceil(D/An);for(let ja=0;ja<va&&(Ut=Math.abs(at)>st,!(!Ut&&(Rt=Math.abs(rt-xt)<=wt,Rt)));++ja){ar&&(Vn=xt==rt||xt>rt==Ja,Vn&&(at=-at*bt,xt=rt));let xo=-Ce.tension*1e-6*(xt-rt),wr=-Ce.friction*.001*at,ht=(xo+wr)/Ce.mass;at=at+ht*An,xt=xt+at*An}}else{let st=1;Ce.duration>0&&(this._memoizedDuration!==Ce.duration&&(this._memoizedDuration=Ce.duration,je.durationProgress>0&&(je.elapsedTime=Ce.duration*je.durationProgress,Ke=je.elapsedTime+=D)),st=(Ce.progress||0)+Ke/this._memoizedDuration,st=st>1?1:st<0?0:st,je.durationProgress=st),xt=ct+Ce.easing(st)*(rt-ct),at=(xt-je.lastPosition)/D,Rt=st==1}je.lastVelocity=at,Number.isNaN(xt)&&(console.warn("Got NaN while animating:",this),Rt=!0)}Ae&&!Ae[mt].done&&(Rt=!1),Rt?je.done=!0:U=!1,je.setValue(xt,Ce.round)&&(J=!0)});let $e=(0,Y.getAnimated)(this),Te=$e.getValue();if(U){let je=(0,F.getFluidValue)(ae.to);(Te!==je||J)&&!Ce.decay?($e.setValue(je),this._onChange(je)):J&&Ce.decay&&this._onChange(Te),this._stop()}else J&&this._onChange(Te)}set(D){return F.raf.batchedUpdates(()=>{this._stop(),this._focus(D),this._set(D)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(_n(this)){let{to:D,config:U}=this.animation;F.raf.batchedUpdates(()=>{this._onStart(),U.decay||this._set(D,!1),this._stop()})}return this}update(D){return(this.queue||(this.queue=[])).push(D),this}start(D,U){let J;return F.is.und(D)?(J=this.queue||[],this.queue=[]):J=[F.is.obj(D)?D:{...U,to:D}],Promise.all(J.map(ae=>this._update(ae))).then(ae=>Ee(this,ae))}stop(D){let{to:U}=this.animation;return this._focus(this.get()),lt(this._state,D&&this._lastCallId),F.raf.batchedUpdates(()=>this._stop(U,D)),this}reset(){this._update({reset:!0})}eventObserved(D){D.type=="change"?this._start():D.type=="priority"&&(this.priority=D.priority+1)}_prepareNode(D){let U=this.key||"",{to:J,from:ae}=D;J=F.is.obj(J)?J[U]:J,(J==null||L(J))&&(J=void 0),ae=F.is.obj(ae)?ae[U]:ae,ae==null&&(ae=void 0);let ve={to:J,from:ae};return za(this)||(D.reverse&&([J,ae]=[ae,J]),ae=(0,F.getFluidValue)(ae),F.is.und(ae)?(0,Y.getAnimated)(this)||this._set(J):this._set(ae)),ve}_update({...D},U){let{key:J,defaultProps:ae}=this;D.default&&Object.assign(ae,S(D,(Ae,$e)=>/^on/.test($e)?b(Ae,J):Ae)),fd(this,D,"onProps"),Ho(this,"onProps",D,this);let ve=this._prepareNode(D);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let Ce=this._state;return he(++this._lastCallId,{key:J,props:D,defaultProps:ae,state:Ce,actions:{pause:()=>{Qa(this)||(bi(this,!0),(0,F.flushCalls)(Ce.pauseQueue),Ho(this,"onPause",Fe(this,Za(this,this.animation.to)),this))},resume:()=>{Qa(this)&&(bi(this,!1),_n(this)&&this._resume(),(0,F.flushCalls)(Ce.resumeQueue),Ho(this,"onResume",Fe(this,Za(this,this.animation.to)),this))},start:this._merge.bind(this,ve)}}).then(Ae=>{if(D.loop&&Ae.finished&&!(U&&Ae.noop)){let $e=vi(D);if($e)return this._update($e,!0)}return Ae})}_merge(D,U,J){if(U.cancel)return this.stop(!0),J(Xe(this));let ae=!F.is.und(D.to),ve=!F.is.und(D.from);if(ae||ve)if(U.callId>this._lastToId)this._lastToId=U.callId;else return J(Xe(this));let{key:Ce,defaultProps:Ae,animation:$e}=this,{to:Te,from:je}=$e,{to:mt=Te,from:rt=je}=D;ve&&!ae&&(!U.default||F.is.und(mt))&&(mt=rt),U.reverse&&([mt,rt]=[rt,mt]);let Rt=!(0,F.isEqual)(rt,je);Rt&&($e.from=rt),rt=(0,F.getFluidValue)(rt);let xt=!(0,F.isEqual)(mt,Te);xt&&this._focus(mt);let Ke=L(U.to),{config:ct}=$e,{decay:pt,velocity:at}=ct;(ae||ve)&&(ct.velocity=0),U.config&&!Ke&&de(ct,y(U.config,Ce),U.config!==Ae.config?y(Ae.config,Ce):void 0);let wt=(0,Y.getAnimated)(this);if(!wt||F.is.und(mt))return J(Fe(this,!0));let st=F.is.und(U.reset)?ve&&!U.default:!F.is.und(rt)&&v(U.reset,Ce),bt=st?rt:this.get(),ar=M(mt),Ja=F.is.num(ar)||F.is.arr(ar)||(0,F.isAnimatedString)(ar),Ut=!Ke&&(!Ja||v(Ae.immediate||U.immediate,Ce));if(xt){let ja=(0,Y.getAnimatedType)(mt);if(ja!==wt.constructor)if(Ut)wt=this._set(ar);else throw Error(`Cannot animate between ${wt.constructor.name} and ${ja.name}, as the "to" prop suggests`)}let Vn=wt.constructor,An=(0,F.hasFluidValue)(mt),va=!1;if(!An){let ja=st||!za(this)&&Rt;(xt||ja)&&(va=(0,F.isEqual)(M(bt),ar),An=!va),(!(0,F.isEqual)($e.immediate,Ut)&&!Ut||!(0,F.isEqual)(ct.decay,pt)||!(0,F.isEqual)(ct.velocity,at))&&(An=!0)}if(va&&_n(this)&&($e.changed&&!st?An=!0:An||this._stop(Te)),!Ke&&((An||(0,F.hasFluidValue)(Te))&&($e.values=wt.getPayload(),$e.toValues=(0,F.hasFluidValue)(mt)?null:Vn==Y.AnimatedString?[1]:(0,F.toArray)(ar)),$e.immediate!=Ut&&($e.immediate=Ut,!Ut&&!st&&this._set(Te)),An)){let{onRest:ja}=$e;(0,F.each)(wl,wr=>fd(this,U,wr));let xo=Fe(this,Za(this,Te));(0,F.flushCalls)(this._pendingCalls,xo),this._pendingCalls.add(J),$e.changed&&F.raf.batchedUpdates(()=>{var wr;$e.changed=!st,ja?.(xo,this),st?y(Ae.onRest,xo):(wr=$e.onStart)==null||wr.call($e,xo,this)})}st&&this._set(bt),Ke?J(Oe(U.to,U,this._state,this)):An?this._start():_n(this)&&!xt?this._pendingCalls.add(J):J(_e(bt))}_focus(D){let U=this.animation;D!==U.to&&((0,F.getFluidObservers)(this)&&this._detach(),U.to=D,(0,F.getFluidObservers)(this)&&this._attach())}_attach(){let D=0,{to:U}=this.animation;(0,F.hasFluidValue)(U)&&((0,F.addFluidObserver)(U,this),jt(U)&&(D=U.priority+1)),this.priority=D}_detach(){let{to:D}=this.animation;(0,F.hasFluidValue)(D)&&(0,F.removeFluidObserver)(D,this)}_set(D,U=!0){let J=(0,F.getFluidValue)(D);if(!F.is.und(J)){let ae=(0,Y.getAnimated)(this);if(!ae||!(0,F.isEqual)(J,ae.getValue())){let ve=(0,Y.getAnimatedType)(J);!ae||ae.constructor!=ve?(0,Y.setAnimated)(this,ve.create(J)):ae.setValue(J),ae&&F.raf.batchedUpdates(()=>{this._onChange(J,U)})}}return(0,Y.getAnimated)(this)}_onStart(){let D=this.animation;D.changed||(D.changed=!0,Ho(this,"onStart",Fe(this,Za(this,D.to)),this))}_onChange(D,U){U||(this._onStart(),y(this.animation.onChange,D,this)),y(this.defaultProps.onChange,D,this),super._onChange(D,U)}_start(){let D=this.animation;(0,Y.getAnimated)(this).reset((0,F.getFluidValue)(D.to)),D.immediate||(D.fromValues=D.values.map(U=>U.lastPosition)),_n(this)||(yo(this,!0),Qa(this)||this._resume())}_resume(){F.Globals.skipAnimation?this.finish():F.frameLoop.start(this)}_stop(D,U){if(_n(this)){yo(this,!1);let J=this.animation;(0,F.each)(J.values,ve=>{ve.done=!0}),J.toValues&&(J.onChange=J.onPause=J.onResume=void 0),(0,F.callFluidObservers)(this,{type:"idle",parent:this});let ae=U?Xe(this.get()):Fe(this.get(),Za(this,D??J.to));(0,F.flushCalls)(this._pendingCalls,ae),J.changed&&(J.changed=!1,Ho(this,"onRest",ae,this))}}};function Za(D,U){let J=M(U),ae=M(D.get());return(0,F.isEqual)(ae,J)}function vi(D,U=D.loop,J=D.to){let ae=y(U);if(ae){let ve=ae!==!0&&T(ae),Ce=(ve||D).reverse,Ae=!ve||ve.reset;return xi({...D,loop:U,default:!1,pause:void 0,to:!Ce||L(J)?J:void 0,from:Ae?D.from:void 0,reset:Ae,...ve})}}function xi(D){let{to:U,from:J}=D=T(D),ae=new Set;return F.is.obj(U)&&ma(U,ae),F.is.obj(J)&&ma(J,ae),D.keys=ae.size?Array.from(ae):null,D}function Is(D){let U=xi(D);return F.is.und(U.default)&&(U.default=S(U)),U}function ma(D,U){(0,F.eachProp)(D,(J,ae)=>J!=null&&U.add(ae))}var wl=["onStart","onRest","onChange","onPause","onResume"];function fd(D,U,J){D.animation[J]=U[J]!==x(U,J)?b(U[J],D.key):void 0}function Ho(D,U,...J){var ae,ve,Ce,Ae;(ve=(ae=D.animation)[U])==null||ve.call(ae,...J),(Ae=(Ce=D.defaultProps)[U])==null||Ae.call(Ce,...J)}var Vt=en,ue=["onStart","onChange","onRest"],me=1,ke=class{constructor(D,U){this.id=me++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),U&&(this._flush=U),D&&this.start({default:!0,...D})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(D=>D.idle&&!D.isDelayed&&!D.isPaused)}get item(){return this._item}set item(D){this._item=D}get(){let D={};return this.each((U,J)=>D[J]=U.get()),D}set(D){for(let U in D){let J=D[U];Vt.is.und(J)||this.springs[U].set(J)}}update(D){return D&&this.queue.push(xi(D)),this}start(D){let{queue:U}=this;return D?U=(0,Vt.toArray)(D).map(xi):this.queue=[],this._flush?this._flush(this,U):(Ot(this,U),Me(this,U))}stop(D,U){if(D!==!!D&&(U=D),U){let J=this.springs;(0,Vt.each)((0,Vt.toArray)(U),ae=>J[ae].stop(!!D))}else lt(this._state,this._lastAsyncId),this.each(J=>J.stop(!!D));return this}pause(D){if(Vt.is.und(D))this.start({pause:!0});else{let U=this.springs;(0,Vt.each)((0,Vt.toArray)(D),J=>U[J].pause())}return this}resume(D){if(Vt.is.und(D))this.start({pause:!1});else{let U=this.springs;(0,Vt.each)((0,Vt.toArray)(D),J=>U[J].resume())}return this}each(D){(0,Vt.eachProp)(this.springs,D)}_onFrame(){let{onStart:D,onChange:U,onRest:J}=this._events,ae=this._active.size>0,ve=this._changed.size>0;(ae&&!this._started||ve&&!this._started)&&(this._started=!0,(0,Vt.flush)(D,([$e,Te])=>{Te.value=this.get(),$e(Te,this,this._item)}));let Ce=!ae&&this._started,Ae=ve||Ce&&J.size?this.get():null;ve&&U.size&&(0,Vt.flush)(U,([$e,Te])=>{Te.value=Ae,$e(Te,this,this._item)}),Ce&&(this._started=!1,(0,Vt.flush)(J,([$e,Te])=>{Te.value=Ae,$e(Te,this,this._item)}))}eventObserved(D){if(D.type=="change")this._changed.add(D.parent),D.idle||this._active.add(D.parent);else if(D.type=="idle")this._active.delete(D.parent);else return;Vt.raf.onFrame(this._onFrame)}};function Me(D,U){return Promise.all(U.map(J=>We(D,J))).then(J=>Ee(D,J))}async function We(D,U,J){let{keys:ae,to:ve,from:Ce,loop:Ae,onRest:$e,onResolve:Te}=U,je=Vt.is.obj(U.default)&&U.default;Ae&&(U.loop=!1),ve===!1&&(U.to=null),Ce===!1&&(U.from=null);let mt=Vt.is.arr(ve)||Vt.is.fun(ve)?ve:void 0;mt?(U.to=void 0,U.onRest=void 0,je&&(je.onRest=void 0)):(0,Vt.each)(ue,ct=>{let pt=U[ct];if(Vt.is.fun(pt)){let at=D._events[ct];U[ct]=({finished:wt,cancelled:st})=>{let bt=at.get(pt);bt?(wt||(bt.finished=!1),st&&(bt.cancelled=!0)):at.set(pt,{value:null,finished:wt||!1,cancelled:st||!1})},je&&(je[ct]=U[ct])}});let rt=D._state;U.pause===!rt.paused?(rt.paused=U.pause,(0,Vt.flushCalls)(U.pause?rt.pauseQueue:rt.resumeQueue)):rt.paused&&(U.pause=!0);let Rt=(ae||Object.keys(D.springs)).map(ct=>D.springs[ct].start(U)),xt=U.cancel===!0||x(U,"cancel")===!0;(mt||xt&&rt.asyncId)&&Rt.push(he(++D._lastAsyncId,{props:U,state:rt,actions:{pause:Vt.noop,resume:Vt.noop,start(ct,pt){xt?(lt(rt,D._lastAsyncId),pt(Xe(D))):(ct.onRest=$e,pt(Oe(mt,ct,rt,D)))}}})),rt.paused&&await new Promise(ct=>{rt.resumeQueue.add(ct)});let Ke=Ee(D,await Promise.all(Rt));if(Ae&&Ke.finished&&!(J&&Ke.noop)){let ct=vi(U,Ae,ve);if(ct)return Ot(D,[ct]),We(D,ct,!0)}return Te&&Vt.raf.batchedUpdates(()=>Te(Ke,D,D.item)),Ke}function yt(D,U){let J={...D.springs};return U&&(0,Vt.each)((0,Vt.toArray)(U),ae=>{Vt.is.und(ae.keys)&&(ae=xi(ae)),Vt.is.obj(ae.to)||(ae={...ae,to:void 0}),tt(J,ae,ve=>ot(ve))}),ut(D,J),J}function ut(D,U){(0,Vt.eachProp)(U,(J,ae)=>{D.springs[ae]||(D.springs[ae]=J,(0,Vt.addFluidObserver)(J,D))})}function ot(D,U){let J=new hn;return J.key=D,U&&(0,Vt.addFluidObserver)(J,U),J}function tt(D,U,J){U.keys&&(0,Vt.each)(U.keys,ae=>{(D[ae]||(D[ae]=J(ae)))._prepareNode(U)})}function Ot(D,U){(0,Vt.each)(U,J=>{tt(D.springs,J,ae=>ot(ae,D))})}var Pn=c(R),vt=R,un=en,fn=({children:D,...U})=>{let J=(0,vt.useContext)(Rr),ae=U.pause||!!J.pause,ve=U.immediate||!!J.immediate;U=(0,un.useMemoOne)(()=>({pause:ae,immediate:ve}),[ae,ve]);let{Provider:Ce}=Rr;return Pn.createElement(Ce,{value:U},D)},Rr=rr(fn,{});fn.Provider=Rr.Provider,fn.Consumer=Rr.Consumer;function rr(D,U){return Object.assign(D,Pn.createContext(U)),D.Provider._context=D,D.Consumer._context=D,D}var hr=en,qo=()=>{let D=[],U=function(ae){(0,hr.deprecateDirectCall)();let ve=[];return(0,hr.each)(D,(Ce,Ae)=>{if(hr.is.und(ae))ve.push(Ce.start());else{let $e=J(ae,Ce,Ae);$e&&ve.push(Ce.start($e))}}),ve};U.current=D,U.add=function(ae){D.includes(ae)||D.push(ae)},U.delete=function(ae){let ve=D.indexOf(ae);~ve&&D.splice(ve,1)},U.pause=function(){return(0,hr.each)(D,ae=>ae.pause(...arguments)),this},U.resume=function(){return(0,hr.each)(D,ae=>ae.resume(...arguments)),this},U.set=function(ae){(0,hr.each)(D,(ve,Ce)=>{let Ae=hr.is.fun(ae)?ae(Ce,ve):ae;Ae&&ve.set(Ae)})},U.start=function(ae){let ve=[];return(0,hr.each)(D,(Ce,Ae)=>{if(hr.is.und(ae))ve.push(Ce.start());else{let $e=this._getProps(ae,Ce,Ae);$e&&ve.push(Ce.start($e))}}),ve},U.stop=function(){return(0,hr.each)(D,ae=>ae.stop(...arguments)),this},U.update=function(ae){return(0,hr.each)(D,(ve,Ce)=>ve.update(this._getProps(ae,ve,Ce))),this};let J=function(ae,ve,Ce){return hr.is.fun(ae)?ae(Ce,ve):ae};return U._getProps=J,U};function Li(D,U,J){let ae=H.is.fun(U)&&U;ae&&!J&&(J=[]);let ve=(0,Z.useMemo)(()=>ae||arguments.length==3?qo():void 0,[]),Ce=(0,Z.useRef)(0),Ae=(0,H.useForceUpdate)(),$e=(0,Z.useMemo)(()=>({ctrls:[],queue:[],flush(at,wt){let st=yt(at,wt);return Ce.current>0&&!$e.queue.length&&!Object.keys(st).some(bt=>!at.springs[bt])?Me(at,wt):new Promise(bt=>{ut(at,st),$e.queue.push(()=>{bt(Me(at,wt))}),Ae()})}}),[]),Te=(0,Z.useRef)([...$e.ctrls]),je=[],mt=(0,H.usePrev)(D)||0;(0,Z.useMemo)(()=>{(0,H.each)(Te.current.slice(D,mt),at=>{j(at,ve),at.stop(!0)}),Te.current.length=D,rt(mt,D)},[D]),(0,Z.useMemo)(()=>{rt(0,Math.min(mt,D))},J);function rt(at,wt){for(let st=at;st<wt;st++){let bt=Te.current[st]||(Te.current[st]=new ke(null,$e.flush)),ar=ae?ae(st,bt):U[st];ar&&(je[st]=Is(ar))}}let Rt=Te.current.map((at,wt)=>yt(at,je[wt])),xt=(0,Z.useContext)(fn),Ke=(0,H.usePrev)(xt),ct=xt!==Ke&&P(xt);(0,H.useIsomorphicLayoutEffect)(()=>{Ce.current++,$e.ctrls=Te.current;let{queue:at}=$e;at.length&&($e.queue=[],(0,H.each)(at,wt=>wt())),(0,H.each)(Te.current,(wt,st)=>{ve?.add(wt),ct&&wt.start({default:xt});let bt=je[st];bt&&(B(wt,bt.ref),wt.ref?wt.queue.push(bt):wt.start(bt))})}),(0,H.useOnce)(()=>()=>{(0,H.each)($e.ctrls,at=>at.stop(!0))});let pt=Rt.map(at=>({...at}));return ve?[pt,ve]:pt}function ga(D,U){let J=X.is.fun(D),[[ae],ve]=Li(1,J?D:[D],J?U||[]:U);return J||arguments.length==2?[ae,ve]:ae}var bo=R,zu=()=>qo(),ju=()=>(0,bo.useState)(zu)[0],kl=en,Ko=(D,U)=>{let J=(0,kl.useConstant)(()=>new hn(D,U));return(0,kl.useOnce)(()=>()=>{J.stop()}),J},vo=en;function tn(D,U,J){let ae=vo.is.fun(U)&&U;ae&&!J&&(J=[]);let ve=!0,Ce,Ae=Li(D,($e,Te)=>{let je=ae?ae($e,Te):U;return Ce=je.ref,ve=ve&&je.reverse,je},J||[{}]);if((0,vo.useIsomorphicLayoutEffect)(()=>{(0,vo.each)(Ae[1].current,($e,Te)=>{let je=Ae[1].current[Te+(ve?1:-1)];if(B($e,Ce),$e.ref){je&&$e.update({to:je.springs});return}je?$e.start({to:je.springs}):$e.start()})},J),ae||arguments.length==3){let $e=Ce??Ae[1];return $e._getProps=(Te,je,mt)=>{let rt=vo.is.fun(Te)?Te(mt,je):Te;if(rt){let Rt=$e.current[mt+(rt.reverse?1:-1)];return Rt&&(rt.to=Rt.springs),rt}},Ae}return Ae[0]}var cn=c(R),xr=R,At=en;function Sl(D,U,J){let ae=At.is.fun(U)&&U,{reset:ve,sort:Ce,trail:Ae=0,expires:$e=!0,exitBeforeEnter:Te=!1,onDestroyed:je,ref:mt,config:rt}=ae?ae():U,Rt=(0,xr.useMemo)(()=>ae||arguments.length==3?qo():void 0,[]),xt=(0,At.toArray)(D),Ke=[],ct=(0,xr.useRef)(null),pt=ve?null:ct.current;(0,At.useIsomorphicLayoutEffect)(()=>{ct.current=Ke}),(0,At.useOnce)(()=>((0,At.each)(Ke,ht=>{Rt?.add(ht.ctrl),ht.ctrl.ref=Rt}),()=>{(0,At.each)(ct.current,ht=>{ht.expired&&clearTimeout(ht.expirationId),j(ht.ctrl,Rt),ht.ctrl.stop(!0)})}));let at=Lw(xt,ae?ae():U,pt),wt=ve&&ct.current||[];(0,At.useIsomorphicLayoutEffect)(()=>(0,At.each)(wt,({ctrl:ht,item:_t,key:kr})=>{j(ht,Rt),y(je,_t,kr)}));let st=[];if(pt&&(0,At.each)(pt,(ht,_t)=>{ht.expired?(clearTimeout(ht.expirationId),wt.push(ht)):(_t=st[_t]=at.indexOf(ht.key),~_t&&(Ke[_t]=ht))}),(0,At.each)(xt,(ht,_t)=>{Ke[_t]||(Ke[_t]={key:at[_t],item:ht,phase:"mount",ctrl:new ke},Ke[_t].ctrl.item=ht)}),st.length){let ht=-1,{leave:_t}=ae?ae():U;(0,At.each)(st,(kr,Sr)=>{let dn=pt[Sr];~kr?(ht=Ke.indexOf(dn),Ke[ht]={...dn,item:xt[kr]}):_t&&Ke.splice(++ht,0,dn)})}At.is.fun(Ce)&&Ke.sort((ht,_t)=>Ce(ht.item,_t.item));let bt=-Ae,ar=(0,At.useForceUpdate)(),Ja=S(U),Ut=new Map,Vn=(0,xr.useRef)(new Map),An=(0,xr.useRef)(!1);(0,At.each)(Ke,(ht,_t)=>{let kr=ht.key,Sr=ht.phase,dn=ae?ae():U,Rn,ea,wo=y(dn.delay||0,kr);if(Sr=="mount")Rn=dn.enter,ea="enter";else{let Va=at.indexOf(kr)<0;if(Sr!="leave")if(Va)Rn=dn.leave,ea="leave";else if(Rn=dn.update)ea="update";else return;else if(!Va)Rn=dn.enter,ea="enter";else return}if(Rn=y(Rn,ht.item,_t),Rn=At.is.obj(Rn)?T(Rn):{to:Rn},!Rn.config){let Va=rt||Ja.config;Rn.config=y(Va,ht.item,_t,ea)}bt+=Ae;let ta={...Ja,delay:wo+bt,ref:mt,immediate:dn.immediate,reset:!1,...Rn};if(ea=="enter"&&At.is.und(ta.from)){let Va=ae?ae():U,Rs=At.is.und(Va.initial)||pt?Va.from:Va.initial;ta.from=y(Rs,ht.item,_t)}let{onResolve:_s}=ta;ta.onResolve=Va=>{y(_s,Va);let Rs=ct.current,ir=Rs.find(na=>na.key===kr);if(ir&&!(Va.cancelled&&ir.phase!="update")&&ir.ctrl.idle){let na=Rs.every(nn=>nn.ctrl.idle);if(ir.phase=="leave"){let nn=y($e,ir.item);if(nn!==!1){let $s=nn===!0?0:nn;if(ir.expired=!0,!na&&$s>0){$s<=2147483647&&(ir.expirationId=setTimeout(ar,$s));return}}}na&&Rs.some(nn=>nn.expired)&&(Vn.current.delete(ir),Te&&(An.current=!0),ar())}};let Ch=yt(ht.ctrl,ta);ea==="leave"&&Te?Vn.current.set(ht,{phase:ea,springs:Ch,payload:ta}):Ut.set(ht,{phase:ea,springs:Ch,payload:ta})});let va=(0,xr.useContext)(fn),ja=(0,At.usePrev)(va),xo=va!==ja&&P(va);(0,At.useIsomorphicLayoutEffect)(()=>{xo&&(0,At.each)(Ke,ht=>{ht.ctrl.start({default:va})})},[va]),(0,At.each)(Ut,(ht,_t)=>{if(Vn.current.size){let kr=Ke.findIndex(Sr=>Sr.key===_t.key);Ke.splice(kr,1)}}),(0,At.useIsomorphicLayoutEffect)(()=>{(0,At.each)(Vn.current.size?Vn.current:Ut,({phase:ht,payload:_t},kr)=>{let{ctrl:Sr}=kr;kr.phase=ht,Rt?.add(Sr),xo&&ht=="enter"&&Sr.start({default:va}),_t&&(B(Sr,_t.ref),(Sr.ref||Rt)&&!An.current?Sr.update(_t):(Sr.start(_t),An.current&&(An.current=!1)))})},ve?void 0:J);let wr=ht=>cn.createElement(cn.Fragment,null,Ke.map((_t,kr)=>{let{springs:Sr}=Ut.get(_t)||_t.ctrl,dn=ht({...Sr},_t.item,_t,kr);return dn&&dn.type?cn.createElement(dn.type,{...dn.props,key:At.is.str(_t.key)||At.is.num(_t.key)?_t.key:_t.ctrl.id,ref:dn.ref}):dn}));return Rt?[wr,Rt]:wr}var kh=1;function Lw(D,{key:U,keys:J=U},ae){if(J===null){let ve=new Set;return D.map(Ce=>{let Ae=ae&&ae.find($e=>$e.item===Ce&&$e.phase!=="leave"&&!ve.has($e));return Ae?(ve.add(Ae),Ae.key):kh++})}return At.is.und(J)?D:At.is.fun(J)?D.map(J):(0,At.toArray)(J)}var Vu=en,Cl=({container:D,...U}={})=>{let[J,ae]=ga(()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...U}),[]);return(0,Vu.useIsomorphicLayoutEffect)(()=>{let ve=(0,Vu.onScroll)(({x:Ce,y:Ae})=>{ae.start({scrollX:Ce.current,scrollXProgress:Ce.progress,scrollY:Ae.current,scrollYProgress:Ae.progress})},{container:D?.current||void 0});return()=>{(0,Vu.each)(Object.values(J),Ce=>Ce.stop()),ve()}},[]),J},Fi=en,wn=({container:D,...U})=>{let[J,ae]=ga(()=>({width:0,height:0,...U}),[]);return(0,Fi.useIsomorphicLayoutEffect)(()=>{let ve=(0,Fi.onResize)(({width:Ce,height:Ae})=>{ae.start({width:Ce,height:Ae,immediate:J.width.get()===0||J.height.get()===0})},{container:D?.current||void 0});return()=>{(0,Fi.each)(Object.values(J),Ce=>Ce.stop()),ve()}},[]),J},mn=R,Bi=en,Vr={any:0,all:1};function ya(D,U){let[J,ae]=(0,mn.useState)(!1),ve=(0,mn.useRef)(),Ce=Bi.is.fun(D)&&D,Ae=Ce?Ce():{},{to:$e={},from:Te={},...je}=Ae,mt=Ce?U:D,[rt,Rt]=ga(()=>({from:Te,...je}),[]);return(0,Bi.useIsomorphicLayoutEffect)(()=>{let xt=ve.current,{root:Ke,once:ct,amount:pt="any",...at}=mt??{};if(!xt||ct&&J||typeof IntersectionObserver>"u")return;let wt=new WeakMap,st=()=>($e&&Rt.start($e),ae(!0),ct?void 0:()=>{Te&&Rt.start(Te),ae(!1)}),bt=Ja=>{Ja.forEach(Ut=>{let Vn=wt.get(Ut.target);if(Ut.isIntersecting!==!!Vn)if(Ut.isIntersecting){let An=st();Bi.is.fun(An)?wt.set(Ut.target,An):ar.unobserve(Ut.target)}else Vn&&(Vn(),wt.delete(Ut.target))})},ar=new IntersectionObserver(bt,{root:Ke&&Ke.current||void 0,threshold:typeof pt=="number"||Array.isArray(pt)?pt:Vr[pt],...at});return ar.observe(xt),()=>ar.unobserve(xt)},[mt]),Ce?[ve,rt]:[ve,J]}function Es({children:D,...U}){return D(ga(U))}var Il=en;function ba({items:D,children:U,...J}){let ae=tn(D.length,J);return D.map((ve,Ce)=>{let Ae=U(ve,Ce);return Il.is.fun(Ae)?Ae(ae[Ce]):Ae})}function md({items:D,children:U,...J}){return Sl(D,J)(U)}var v0=en,jn=en,Xo=h0,Uu=class extends Qt{constructor(D,U){super(),this.source=D,this.idle=!0,this._active=new Set,this.calc=(0,jn.createInterpolator)(...U);let J=this._get(),ae=(0,Xo.getAnimatedType)(J);(0,Xo.setAnimated)(this,ae.create(J))}advance(D){let U=this._get(),J=this.get();(0,jn.isEqual)(U,J)||((0,Xo.getAnimated)(this).setValue(U),this._onChange(U,this.idle)),!this.idle&&x0(this._active)&&Sh(this)}_get(){let D=jn.is.arr(this.source)?this.source.map(jn.getFluidValue):(0,jn.toArray)((0,jn.getFluidValue)(this.source));return this.calc(...D)}_start(){this.idle&&!x0(this._active)&&(this.idle=!1,(0,jn.each)((0,Xo.getPayload)(this),D=>{D.done=!1}),jn.Globals.skipAnimation?(jn.raf.batchedUpdates(()=>this.advance()),Sh(this)):jn.frameLoop.start(this))}_attach(){let D=1;(0,jn.each)((0,jn.toArray)(this.source),U=>{(0,jn.hasFluidValue)(U)&&(0,jn.addFluidObserver)(U,this),jt(U)&&(U.idle||this._active.add(U),D=Math.max(D,U.priority+1))}),this.priority=D,this._start()}_detach(){(0,jn.each)((0,jn.toArray)(this.source),D=>{(0,jn.hasFluidValue)(D)&&(0,jn.removeFluidObserver)(D,this)}),this._active.clear(),Sh(this)}eventObserved(D){D.type=="change"?D.idle?this.advance():(this._active.add(D.parent),this._start()):D.type=="idle"?this._active.delete(D.parent):D.type=="priority"&&(this.priority=(0,jn.toArray)(this.source).reduce((U,J)=>Math.max(U,(jt(J)?J.priority:0)+1),0))}};function wi(D){return D.idle!==!1}function x0(D){return!D.size||Array.from(D).every(wi)}function Sh(D){D.idle||(D.idle=!0,(0,jn.each)((0,Xo.getPayload)(D),U=>{U.done=!0}),(0,jn.callFluidObservers)(D,{type:"idle",parent:D}))}var Fw=(D,...U)=>new Uu(D,U),gd=(D,...U)=>((0,v0.deprecateInterpolate)(),new Uu(D,U)),Ns=en;Ns.Globals.assign({createStringInterpolator:Ns.createStringInterpolator,to:(D,U)=>new Uu(D,U)});var Gu=Ns.frameLoop.advance,Ts=en;u(p,ERe(),t.exports)})(bz);var NRe=bz.exports;yz.exports=NRe;var Sj=yz.exports;(function(t){var e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,i=(H,F)=>{for(var Y in F)e(H,Y,{get:F[Y],enumerable:!0})},o=(H,F,Y,Q)=>{if(F&&typeof F=="object"||typeof F=="function")for(let ne of r(F))!a.call(H,ne)&&ne!==Y&&e(H,ne,{get:()=>F[ne],enumerable:!(Q=n(F,ne))||Q.enumerable});return H},s=(H,F,Y)=>(o(H,F,"default"),Y&&o(Y,F,"default")),l=H=>o(e({},"__esModule",{value:!0}),H),u={};i(u,{a:()=>Z,animated:()=>Z}),t.exports=l(u);var c=Sj,d=Df,p=en,f=h0,g=/^--/;function y(H,F){return F==null||typeof F=="boolean"||F===""?"":typeof F=="number"&&F!==0&&!g.test(H)&&!(x.hasOwnProperty(H)&&x[H])?F+"px":(""+F).trim()}var v={};function b(H,F){if(!H.nodeType||!H.setAttribute)return!1;let Y=H.nodeName==="filter"||H.parentNode&&H.parentNode.nodeName==="filter",{style:Q,children:ne,scrollTop:se,scrollLeft:pe,viewBox:de,...ie}=F,xe=Object.values(ie),q=Object.keys(ie).map(oe=>Y||H.hasAttribute(oe)?oe:v[oe]||(v[oe]=oe.replace(/([A-Z])/g,he=>"-"+he.toLowerCase())));ne!==void 0&&(H.textContent=ne);for(let oe in Q)if(Q.hasOwnProperty(oe)){let he=y(oe,Q[oe]);g.test(oe)?H.style.setProperty(oe,he):H.style[oe]=he}q.forEach((oe,he)=>{H.setAttribute(oe,xe[he])}),se!==void 0&&(H.scrollTop=se),pe!==void 0&&(H.scrollLeft=pe),de!==void 0&&H.setAttribute("viewBox",de)}var x={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w=(H,F)=>H+F.charAt(0).toUpperCase()+F.substring(1),S=["Webkit","Ms","Moz","O"];x=Object.keys(x).reduce((H,F)=>(S.forEach(Y=>H[w(Y,F)]=H[F]),H),x);var C=h0,I=en,_=/^(matrix|translate|scale|rotate|skew)/,T=/^(translate)/,M=/^(rotate|skew)/,P=(H,F)=>I.is.num(H)&&H!==0?H+F:H,L=(H,F)=>I.is.arr(H)?H.every(Y=>L(Y,F)):I.is.num(H)?H===F:parseFloat(H)===F,j=class extends C.AnimatedObject{constructor({x:H,y:F,z:Y,...Q}){let ne=[],se=[];(H||F||Y)&&(ne.push([H||0,F||0,Y||0]),se.push(pe=>[`translate3d(${pe.map(de=>P(de,"px")).join(",")})`,L(pe,0)])),(0,I.eachProp)(Q,(pe,de)=>{if(de==="transform")ne.push([pe||""]),se.push(ie=>[ie,ie===""]);else if(_.test(de)){if(delete Q[de],I.is.und(pe))return;let ie=T.test(de)?"px":M.test(de)?"deg":"";ne.push((0,I.toArray)(pe)),se.push(de==="rotate3d"?([xe,q,oe,he])=>[`rotate3d(${xe},${q},${oe},${P(he,ie)})`,L(he,0)]:xe=>[`${de}(${xe.map(q=>P(q,ie)).join(",")})`,L(xe,de.startsWith("scale")?1:0)])}}),ne.length&&(Q.transform=new B(ne,se)),super(Q)}},B=class extends I.FluidValue{constructor(H,F){super(),this.inputs=H,this.transforms=F,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let H="",F=!0;return(0,I.each)(this.inputs,(Y,Q)=>{let ne=(0,I.getFluidValue)(Y[0]),[se,pe]=this.transforms[Q](I.is.arr(ne)?ne:Y.map(I.getFluidValue));H+=" "+se,F=F&&pe}),F?"none":H}observerAdded(H){H==1&&(0,I.each)(this.inputs,F=>(0,I.each)(F,Y=>(0,I.hasFluidValue)(Y)&&(0,I.addFluidObserver)(Y,this)))}observerRemoved(H){H==0&&(0,I.each)(this.inputs,F=>(0,I.each)(F,Y=>(0,I.hasFluidValue)(Y)&&(0,I.removeFluidObserver)(Y,this)))}eventObserved(H){H.type=="change"&&(this._value=null),(0,I.callFluidObservers)(this,H)}},K=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];s(u,Sj,t.exports),c.Globals.assign({batchedUpdates:d.unstable_batchedUpdates,createStringInterpolator:p.createStringInterpolator,colors:p.colors});var X=(0,f.createHost)(K,{applyAnimatedValues:b,createAnimatedStyle:H=>new j(H),getComponentProps:({scrollTop:H,scrollLeft:F,...Y})=>Y}),Z=X.animated})(gz);var TRe=gz.exports;mz.exports=TRe;var _Re=mz.exports;const{useState:RRe,useEffect:$Re}=R;function ORe(){const[t,e]=RRe({width:void 0,height:void 0});return $Re(()=>{function n(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),t}var MRe=ORe;const bh=R,{useSpring:PRe,animated:ARe}=_Re,DRe=MRe,Du={maxTilt:25,rotationPower:50,swipeThreshold:.5},m_={touchResponsive:{friction:50,tension:2e3},animateOut:{friction:30,tension:400},animateBack:{friction:10,tension:200}},Cj=(t,e)=>Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),LRe=t=>{const e=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:t.x/e,y:t.y/e}},f0=async(t,e,n,r)=>{const a=Cj(n,r),i=Cj(t.x,t.y),o=a*t.x,s=a*t.y,l=t.x*45,u=a/i;return e.start({xyrot:[o,s,l],config:{duration:u}}),await new Promise(c=>setTimeout(()=>{c()},u))},Ij=t=>new Promise(e=>{t.start({xyrot:[0,0,0],config:m_.animateBack,onRest:e})}),Ej=t=>{if(Math.abs(t.x)>Math.abs(t.y)){if(t.x>Du.swipeThreshold)return"right";if(t.x<-Du.swipeThreshold)return"left"}else{if(t.y>Du.swipeThreshold)return"down";if(t.y<-Du.swipeThreshold)return"up"}return"none"},FRe=ARe.div,BRe=bh.forwardRef(({flickOnSwipe:t=!0,children:e,onSwipe:n,onCardLeftScreen:r,className:a,preventSwipe:i=[],swipeRequirementType:o="velocity",swipeThreshold:s=Du.swipeThreshold,onSwipeRequirementFulfilled:l,onSwipeRequirementUnfulfilled:u},c)=>{const{width:d,height:p}=DRe(),[{xyrot:f},g]=PRe(()=>({xyrot:[0,0,0],config:m_.touchResponsive}));Du.swipeThreshold=s,bh.useImperativeHandle(c,()=>({async swipe(w="right"){n&&n(w);const S=1.3,C=(Math.random()-.5)/2;w==="right"?await f0({x:S,y:C},g,d,p):w==="left"?await f0({x:-S,y:C},g,d,p):w==="up"?await f0({x:C,y:-S},g,d,p):w==="down"&&await f0({x:C,y:S},g,d,p),r&&r(w)},async restoreCard(){await Ij(g)}}));const y=bh.useCallback(async(w,S)=>{const C=Ej({x:o==="velocity"?S.vx:S.dx,y:o==="velocity"?S.vy:S.dy});if(C!=="none"&&t&&!i.includes(C)){n&&n(C),await f0(o==="velocity"?{x:S.vx,y:S.vy}:LRe({x:S.dx,y:S.dy}),w,d,p),r&&r(C);return}Ij(w)},[o,t,i,n,r,d,p]);let v="none";const b=(w,S,C,I)=>{let _=I?w.touches[0].clientX-S.x:w.clientX-S.x,T=I?w.touches[0].clientY-S.y:w.clientY-S.y;S.x===0&&S.y===0&&(_=0,T=0);const M=-(_-C.dx)/(C.timeStamp-Date.now()),P=-(T-C.dy)/(C.timeStamp-Date.now());return{dx:_,dy:T,vx:M,vy:P,timeStamp:Date.now()}};bh.useLayoutEffect(()=>{let w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()},C=!1;const I=B=>{!B.srcElement.className.includes("pressable")&&B.cancelable&&B.preventDefault(),S=b(B,w,S,!0),w={x:B.touches[0].clientX,y:B.touches[0].clientY}};x.current.addEventListener("touchstart",I);const _=B=>{C=!0,S=b(B,w,S,!1),w={x:B.clientX,y:B.clientY}};x.current.addEventListener("mousedown",_);const T=B=>{if(l||u){const X=Ej({x:o==="velocity"?B.vx:B.dx,y:o==="velocity"?B.vy:B.dy});X!==v&&(v=X,v==="none"?u&&u():l&&l(X))}let K=B.vx*15;isNaN(K)&&(K=0),K=Math.max(Math.min(K,Du.maxTilt),-Du.maxTilt),g.start({xyrot:[B.dx,B.dy,K],config:m_.touchResponsive})},M=B=>{if(!C)return;const K=b(B,w,S,!1);S=K,T(K)};window.addEventListener("mousemove",M);const P=B=>{C&&(C=!1,y(g,S),w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()})};window.addEventListener("mouseup",P);const L=B=>{const K=b(B,w,S,!0);S=K,T(K)};x.current.addEventListener("touchmove",L);const j=B=>{y(g,S),w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()}};return x.current.addEventListener("touchend",j),()=>{x.current.removeEventListener("touchstart",I),x.current.removeEventListener("touchmove",L),x.current.removeEventListener("touchend",j),window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",P),x.current.removeEventListener("mousedown",_)}},[y,g,l,u]);const x=bh.useRef();return bh.createElement(FRe,{ref:x,className:a,style:{transform:f.to((w,S,C)=>`translate3d(${w}px, ${S}px, 0px) rotate(${C}deg)`)},children:e})});var zRe=BRe;const jRe=Wi(zRe);function Di(t){return e=>typeof e=="string"&&new RegExp(t.source,t.flags).test(e)}const VRe=Di(/^[1-9][0-9]*$/),g_=Di(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/),URe=Di(/^E[1-9][0-9]*$/),Ew=Di(/^Q[1-9][0-9]*$/),Nw=Di(/^P[1-9][0-9]*$/),Nj=Di(/^L[1-9][0-9]*$/),Tj=Di(/^L[1-9][0-9]*-F[1-9][0-9]*$/),_j=Di(/^L[1-9][0-9]*-S[1-9][0-9]*$/),GRe=Di(/^M[1-9][0-9]*$/),WRe=Di(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),HRe=Di(/^[0-9a-f]{40}$/),Rj=Di(/^\d+$/),$j=Di(/^(Q|P|L|M)[1-9][0-9]*$/);function qRe(t){if(typeof t!="string")return!1;const[e,n]=t.split("#");return g_(e)&&Nw(n)}function Oj(t){return typeof t!="string"?!1:t.startsWith("Item:")?Ew(t.substring(5)):t.startsWith("Lexeme:")?Nj(t.substring(7)):t.startsWith("Property:")?Nw(t.substring(9)):Ew(t)}function KRe(t){if(!$j(t))throw new Error(`invalid entity id: ${t}`);return t.replace(/^(Q|P|L|M)/,"")}function XRe(t,e){let n=`https://commons.wikimedia.org/wiki/Special:FilePath/${t}`;return typeof e=="number"&&(n+=`?width=${e}`),n}function YRe(t){const e=t.split(/[$-]/);if(e.length===6)return e[0].toUpperCase();if(e.length===7)return e.slice(0,2).join("-").toUpperCase();throw new Error(`invalid guid: ${t}`)}const QRe=Object.freeze(Object.defineProperty({__proto__:null,getEntityIdFromGuid:YRe,getImageUrl:XRe,getNumericId:KRe,isEntityId:g_,isEntityPageTitle:Oj,isEntitySchemaId:URe,isFormId:Tj,isGuid:WRe,isHash:HRe,isItemId:Ew,isLexemeId:Nj,isMediaInfoId:GRe,isNonNestedEntityId:$j,isNumericId:VRe,isPropertyClaimsId:qRe,isPropertyId:Nw,isRevisionId:Rj,isSenseId:_j},Symbol.toStringTag,{value:"Module"}));function Ss(t){return typeof t=="string"?[t]:Array.isArray(t)?[...t]:[]}function Mj(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}const Pj=t=>encodeURIComponent(t).replace(/[!'()*]/g,e$e),ZRe=t=>t.replace(/\s/g,"_");function JRe(t){return Array.from(new Set(t))}const e$e=t=>"%"+t.charCodeAt(0).toString(16);function Lu(t){if(t.length!==1||!Mj(t[0]))throw new Error(`Since wikibase-sdk v9.0.0, this function expects arguments to be passed in an object
    See https://github.com/maxlath/wikibase-sdk/blob/main/CHANGELOG.md`)}function m0(t,e){return typeof e=="string"&&t.includes(e)}function y_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function b_(t){return Object.entries(t)}function v_(t){typeof t=="object"&&(t=t.time);const e=t[0];let[n,r]=t.slice(1).split("T");n=n.replace(/-00/g,"-01");const a=`${n}T${r}`;return t$e(e,a)}const t$e=(t,e)=>{const n=e.split("-")[0];return t==="-"||n.length>4?n$e(t,e,n):new Date(e)},n$e=(t,e,n)=>{let r;return n.length===4?r=`${t}00${e}`:n.length===5?r=`${t}0${e}`:r=t+e,new Date(r)};function x_(t){return e=>{try{return t(e)}catch{e=typeof e=="string"?e:e.time;const n=e[0];let[r,a]=e.slice(1).split("T");if(!n||!r||!a)throw new Error("TimeInput is invalid: "+JSON.stringify(e));return r=r.replace(/-00/g,"-01"),`${n}${r}T${a}`}}}const r$e=t=>v_(t).getTime(),a$e=t=>v_(t).toISOString(),i$e=t=>{if(typeof t=="object"){const{time:e,precision:n}=t;n===9?t=e.replace("-01-01T","-00-00T"):n===10?t=e.replace("-01T","-00T"):t=e}return t.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")},Aj=x_(r$e),Dj=x_(a$e),Lj=x_(i$e),o$e=Object.freeze(Object.defineProperty({__proto__:null,wikibaseTimeToDateObject:v_,wikibaseTimeToEpochTime:Aj,wikibaseTimeToISOString:Dj,wikibaseTimeToSimpleDay:Lj},Symbol.toStringTag,{value:"Module"})),Fu=t=>t.value,s$e=(t,e)=>e.keepRichValues?t.value:t.value.text,vh=(t,e)=>u$e(t,e.entityPrefix),l$e={item:"Q",lexeme:"L",property:"P"},u$e=(t,e)=>{const{value:n}=t,r=n.id||l$e[n["entity-type"]]+n["numeric-id"];return typeof e=="string"?`${e}:${r}`:r},c$e=(t,e)=>{const{value:n}=t,r=parseFloat(n.amount);if(e.keepRichValues){const a={amount:parseFloat(n.amount),unit:n.unit.replace(/^https?:\/\/.*\/entity\//,"")};return n.upperBound!=null&&(a.upperBound=parseFloat(n.upperBound)),n.lowerBound!=null&&(a.lowerBound=parseFloat(n.lowerBound)),a}else return r},d$e=(t,e)=>e.keepRichValues?t.value:[t.value.latitude,t.value.longitude],p$e=(t,e)=>{let n;if(typeof e.timeConverter=="function"?n=e.timeConverter(t.value):n=h$e(e.timeConverter)(t.value),e.keepRichValues){const{timezone:r,before:a,after:i,precision:o,calendarmodel:s}=t.value;return{time:n,timezone:r,before:a,after:i,precision:o,calendarmodel:s}}else return n},h$e=(t="iso")=>{const e=f$e[t];if(!e)throw new Error(`invalid converter key: ${JSON.stringify(t).substring(0,100)}`);return e},f$e={iso:Dj,epoch:Aj,"simple-day":Lj,none:t=>typeof t=="string"?t:t.time},m$e={commonsMedia:Fu,"external-id":Fu,"geo-shape":Fu,"globe-coordinate":d$e,math:Fu,monolingualtext:s$e,"musical-notation":Fu,quantity:c$e,string:Fu,"tabular-data":Fu,time:p$e,url:Fu,"wikibase-entityid":vh,"wikibase-form":vh,"wikibase-item":vh,"wikibase-lexeme":vh,"wikibase-property":vh,"wikibase-sense":vh},Fj=t=>t.toLowerCase().replace(/[\s-]/g,""),Bj={};for(const[t,e]of Object.entries(m$e))Bj[Fj(t)]=e;function g$e(t,e,n,r){t=t||e.type;try{const a=Bj[Fj(t)];return a(e,n)}catch(a){throw a.message==="parsers[datatype] is not a function"&&(a.message=`${t} claim parser isn't implemented
      Claim id: ${r}
      Please report to https://github.com/maxlath/wikibase-sdk/issues`),a}}function w_(t){const e={};for(const n of t){const{rank:r}=n;e[r]=e[r]||[],e[r].push(n)}return e.preferred||e.normal||[]}function zj(t){return t.filter(e=>e.rank!=="deprecated")}function y$e(t){const e={};for(const[n,r]of b_(t))e[n]=w_(r);return e}const b$e=Object.freeze(Object.defineProperty({__proto__:null,nonDeprecatedPropertyClaims:zj,truthyClaims:y$e,truthyPropertyClaims:w_},Symbol.toStringTag,{value:"Module"}));function k_(t,e){const{propertyPrefix:n}=e,r={};for(let a in t){const i=t[a];n&&(a=n+":"+a),r[a]=S_(i,e)}return r}function S_(t,e){if(t==null||t.length===0)return[];const{keepNonTruthy:n,keepNonDeprecated:r,areSubSnaks:a}=Wj(e);return r?t=zj(t):n||a||(t=w_(t)),t=t.map(i=>C_(i,e)).filter(i=>i!==void 0),t[0]&&typeof t[0]!="object"?JRe(t):t}function jj(t,e){const{keepQualifiers:n,keepReferences:r,keepIds:a,keepHashes:i,keepTypes:o,keepSnaktypes:s,keepRanks:l}=Wj(e),{mainsnak:u,rank:c}=t;let d,p,f,g,y,v;if(u?(p=u.datatype,f=u.datavalue,g=u.snaktype):(f=t.datavalue,p=t.datatype,g=t.snaktype,t.hash?y=!0:v=!0),f)d=g$e(p,f,e,t.id);else if(g==="somevalue")d=e.somevalueValue;else if(g==="novalue")d=e.novalueValue;else throw new Error("no datavalue or special snaktype found");if(y){if(!(i||o||s))return d;const w={value:d};return i&&(w.hash=t.hash),o&&(w.type=p),s&&(w.snaktype=g),w}if(v)return o?{type:p,value:d}:d;if(!(n||r||a||o||s||l))return d;const b={value:d};o&&(b.type=p),s&&(b.snaktype=g),l&&(b.rank=c);const x=Tw(e);return x.keepHashes=i,n&&(b.qualifiers=Uj(t.qualifiers,x)),r&&(t.references=t.references||[],b.references=Gj(t.references,x)),a&&(b.id=t.id),b}function xh(t,e={}){return k_(t,e)}function Vj(t,e={}){return S_(t,e)}function C_(t,e={}){return jj(t,e)}function Uj(t,e={}){return k_(t,Tw(e))}function v$e(t,e={}){return S_(t,Tw(e))}function x$e(t,e={}){return jj(t,e)}function Gj(t,e={}){return t.map(n=>w$e(n,e))}function w$e(t,e={}){const n=Tw(e),r=k_(t.snaks,n);return n.keepHashes?{snaks:r,hash:t.hash}:r}const Tw=(t={})=>t.areSubSnaks?t:Object.assign({},t,{areSubSnaks:!0}),k$e=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],Wj=(t={})=>(t.keepAll&&k$e.forEach(e=>{t[e]==null&&(t[e]=!0)}),t);function g0(t){const e={};for(const[n,r]of b_(t))e[n]=r!=null?r.value:null;return e}function S$e(t){const e={};for(const[n,r]of b_(t))e[n]=r!=null?r.map(a=>a.value):[];return e}function Hj(t){return g0(t)}function qj(t){return g0(t)}function Kj(t){return S$e(t)}function Xj(t){return g0(t)}function Yj(t){return g0(t)}function Qj(t){return g0(t)}const Zj=(t,e={})=>{const{id:n,representations:r,grammaticalFeatures:a,claims:i}=t;if(!Tj(n))throw new Error("invalid form object");return{id:n,representations:Yj(r),grammaticalFeatures:a,claims:xh(i,e)}},Jj=(t,e={})=>t.map(n=>Zj(n,e)),eV=(t,e={})=>{const{id:n,glosses:r,claims:a}=t;if(!_j(n))throw new Error("invalid sense object");return{id:n,glosses:Qj(r),claims:xh(a,e)}};function tV(t,e={}){return t.map(n=>eV(n,e))}const I_={commonswiki:"commons",foundationwiki:"foundation",mediawikiwiki:"mediawiki",metawiki:"meta",outreachwiki:"outreach",sourceswiki:"sources",specieswiki:"species",wikidatawiki:"wikidata",wikifunctionswiki:"wikifunctions",wikimaniawiki:"wikimania"},E_=["aawiki","aawikibooks","aawiktionary","abwiki","abwiktionary","acewiki","adywiki","afwiki","afwikibooks","afwikiquote","afwiktionary","akwiki","akwikibooks","akwiktionary","alswiki","alswikibooks","alswikiquote","alswiktionary","altwiki","amiwiki","amwiki","amwikiquote","amwiktionary","angwiki","angwikibooks","angwikiquote","angwikisource","angwiktionary","anpwiki","anwiki","anwiktionary","arcwiki","arwiki","arwikibooks","arwikinews","arwikiquote","arwikisource","arwikiversity","arwiktionary","arywiki","arzwiki","astwiki","astwikibooks","astwikiquote","astwiktionary","aswiki","aswikibooks","aswikiquote","aswikisource","aswiktionary","atjwiki","avkwiki","avwiki","avwiktionary","awawiki","aywiki","aywikibooks","aywiktionary","azbwiki","azwiki","azwikibooks","azwikiquote","azwikisource","azwiktionary","banwiki","banwikisource","barwiki","bat_smgwiki","bawiki","bawikibooks","bbcwiki","bclwiki","bclwikiquote","bclwiktionary","be_x_oldwiki","bewiki","bewikibooks","bewikiquote","bewikisource","bewiktionary","bgwiki","bgwikibooks","bgwikinews","bgwikiquote","bgwikisource","bgwiktionary","bhwiki","bhwiktionary","biwiki","biwikibooks","biwiktionary","bjnwiki","bjnwikiquote","bjnwiktionary","blkwiki","blkwiktionary","bmwiki","bmwikibooks","bmwikiquote","bmwiktionary","bnwiki","bnwikibooks","bnwikiquote","bnwikisource","bnwikivoyage","bnwiktionary","bowiki","bowikibooks","bowiktionary","bpywiki","brwiki","brwikiquote","brwikisource","brwiktionary","bswiki","bswikibooks","bswikinews","bswikiquote","bswikisource","bswiktionary","btmwiktionary","bugwiki","bxrwiki","cawiki","cawikibooks","cawikinews","cawikiquote","cawikisource","cawiktionary","cbk_zamwiki","cdowiki","cebwiki","cewiki","chowiki","chrwiki","chrwiktionary","chwiki","chwikibooks","chwiktionary","chywiki","ckbwiki","ckbwiktionary","commonswiki","cowiki","cowikibooks","cowikiquote","cowiktionary","crhwiki","crwiki","crwikiquote","crwiktionary","csbwiki","csbwiktionary","cswiki","cswikibooks","cswikinews","cswikiquote","cswikisource","cswikiversity","cswiktionary","cuwiki","cvwiki","cvwikibooks","cywiki","cywikibooks","cywikiquote","cywikisource","cywiktionary","dagwiki","dawiki","dawikibooks","dawikiquote","dawikisource","dawiktionary","dewiki","dewikibooks","dewikinews","dewikiquote","dewikisource","dewikiversity","dewikivoyage","dewiktionary","dgawiki","dinwiki","diqwiki","diqwiktionary","dsbwiki","dtywiki","dvwiki","dvwiktionary","dzwiki","dzwiktionary","eewiki","elwiki","elwikibooks","elwikinews","elwikiquote","elwikisource","elwikiversity","elwikivoyage","elwiktionary","emlwiki","enwiki","enwikibooks","enwikinews","enwikiquote","enwikisource","enwikiversity","enwikivoyage","enwiktionary","eowiki","eowikibooks","eowikinews","eowikiquote","eowikisource","eowikivoyage","eowiktionary","eswiki","eswikibooks","eswikinews","eswikiquote","eswikisource","eswikiversity","eswikivoyage","eswiktionary","etwiki","etwikibooks","etwikiquote","etwikisource","etwiktionary","euwiki","euwikibooks","euwikiquote","euwikisource","euwiktionary","extwiki","fatwiki","fawiki","fawikibooks","fawikinews","fawikiquote","fawikisource","fawikivoyage","fawiktionary","ffwiki","fiu_vrowiki","fiwiki","fiwikibooks","fiwikinews","fiwikiquote","fiwikisource","fiwikiversity","fiwikivoyage","fiwiktionary","fjwiki","fjwiktionary","fonwiki","foundationwiki","fowiki","fowikisource","fowiktionary","frpwiki","frrwiki","frwiki","frwikibooks","frwikinews","frwikiquote","frwikisource","frwikiversity","frwikivoyage","frwiktionary","furwiki","fywiki","fywikibooks","fywiktionary","gagwiki","ganwiki","gawiki","gawikibooks","gawikiquote","gawiktionary","gcrwiki","gdwiki","gdwiktionary","glkwiki","glwiki","glwikibooks","glwikiquote","glwikisource","glwiktionary","gnwiki","gnwikibooks","gnwiktionary","gomwiki","gomwiktionary","gorwiki","gorwiktionary","gotwiki","gotwikibooks","gpewiki","gucwiki","gurwiki","guwiki","guwikibooks","guwikiquote","guwikisource","guwiktionary","guwwiki","guwwikinews","guwwikiquote","guwwiktionary","gvwiki","gvwiktionary","hakwiki","hawiki","hawiktionary","hawwiki","hewiki","hewikibooks","hewikinews","hewikiquote","hewikisource","hewikivoyage","hewiktionary","hifwiki","hifwiktionary","hiwiki","hiwikibooks","hiwikiquote","hiwikisource","hiwikiversity","hiwikivoyage","hiwiktionary","howiki","hrwiki","hrwikibooks","hrwikiquote","hrwikisource","hrwiktionary","hsbwiki","hsbwiktionary","htwiki","htwikisource","huwiki","huwikibooks","huwikinews","huwikiquote","huwikisource","huwiktionary","hywiki","hywikibooks","hywikiquote","hywikisource","hywiktionary","hywwiki","hzwiki","iawiki","iawikibooks","iawiktionary","idwiki","idwikibooks","idwikiquote","idwikisource","idwiktionary","iewiki","iewikibooks","iewiktionary","igwiki","igwikiquote","igwiktionary","iiwiki","ikwiki","ikwiktionary","ilowiki","inhwiki","iowiki","iowiktionary","iswiki","iswikibooks","iswikiquote","iswikisource","iswiktionary","itwiki","itwikibooks","itwikinews","itwikiquote","itwikisource","itwikiversity","itwikivoyage","itwiktionary","iuwiki","iuwiktionary","jamwiki","jawiki","jawikibooks","jawikinews","jawikiquote","jawikisource","jawikiversity","jawikivoyage","jawiktionary","jbowiki","jbowiktionary","jvwiki","jvwikisource","jvwiktionary","kaawiki","kabwiki","kawiki","kawikibooks","kawikiquote","kawiktionary","kbdwiki","kbdwiktionary","kbpwiki","kcgwiki","kcgwiktionary","kgwiki","kiwiki","kjwiki","kkwiki","kkwikibooks","kkwikiquote","kkwiktionary","klwiki","klwiktionary","kmwiki","kmwikibooks","kmwiktionary","knwiki","knwikibooks","knwikiquote","knwikisource","knwiktionary","koiwiki","kowiki","kowikibooks","kowikinews","kowikiquote","kowikisource","kowikiversity","kowiktionary","krcwiki","krwiki","krwikiquote","kshwiki","kswiki","kswikibooks","kswikiquote","kswiktionary","kuwiki","kuwikibooks","kuwikiquote","kuwiktionary","kvwiki","kwwiki","kwwikiquote","kwwiktionary","kywiki","kywikibooks","kywikiquote","kywiktionary","ladwiki","lawiki","lawikibooks","lawikiquote","lawikisource","lawiktionary","lbewiki","lbwiki","lbwikibooks","lbwikiquote","lbwiktionary","lezwiki","lfnwiki","lgwiki","lijwiki","lijwikisource","liwiki","liwikibooks","liwikinews","liwikiquote","liwikisource","liwiktionary","lldwiki","lmowiki","lmowiktionary","lnwiki","lnwikibooks","lnwiktionary","lowiki","lowiktionary","lrcwiki","ltgwiki","ltwiki","ltwikibooks","ltwikiquote","ltwikisource","ltwiktionary","lvwiki","lvwikibooks","lvwiktionary","madwiki","maiwiki","map_bmswiki","mdfwiki","mediawikiwiki","metawiki","mgwiki","mgwikibooks","mgwiktionary","mhrwiki","mhwiki","mhwiktionary","minwiki","minwiktionary","miwiki","miwikibooks","miwiktionary","mkwiki","mkwikibooks","mkwikisource","mkwiktionary","mlwiki","mlwikibooks","mlwikiquote","mlwikisource","mlwiktionary","mniwiki","mniwiktionary","mnwiki","mnwikibooks","mnwiktionary","mnwwiki","mnwwiktionary","mowiki","mowiktionary","mrjwiki","mrwiki","mrwikibooks","mrwikiquote","mrwikisource","mrwiktionary","mswiki","mswikibooks","mswiktionary","mtwiki","mtwiktionary","muswiki","mwlwiki","myvwiki","mywiki","mywikibooks","mywiktionary","mznwiki","nahwiki","nahwikibooks","nahwiktionary","napwiki","napwikisource","nawiki","nawikibooks","nawikiquote","nawiktionary","nds_nlwiki","ndswiki","ndswikibooks","ndswikiquote","ndswiktionary","newiki","newikibooks","newiktionary","newwiki","ngwiki","niawiki","niawiktionary","nlwiki","nlwikibooks","nlwikinews","nlwikiquote","nlwikisource","nlwikivoyage","nlwiktionary","nnwiki","nnwikiquote","nnwiktionary","novwiki","nowiki","nowikibooks","nowikinews","nowikiquote","nowikisource","nowiktionary","nqowiki","nrmwiki","nsowiki","nvwiki","nywiki","ocwiki","ocwikibooks","ocwiktionary","olowiki","omwiki","omwiktionary","orwiki","orwikisource","orwiktionary","oswiki","outreachwiki","pagwiki","pamwiki","papwiki","pawiki","pawikibooks","pawikisource","pawiktionary","pcdwiki","pcmwiki","pdcwiki","pflwiki","pihwiki","piwiki","piwiktionary","plwiki","plwikibooks","plwikinews","plwikiquote","plwikisource","plwikivoyage","plwiktionary","pmswiki","pmswikisource","pnbwiki","pnbwiktionary","pntwiki","pswiki","pswikibooks","pswikivoyage","pswiktionary","ptwiki","ptwikibooks","ptwikinews","ptwikiquote","ptwikisource","ptwikiversity","ptwikivoyage","ptwiktionary","pwnwiki","quwiki","quwikibooks","quwikiquote","quwiktionary","rmwiki","rmwikibooks","rmwiktionary","rmywiki","rnwiki","rnwiktionary","roa_rupwiki","roa_rupwiktionary","roa_tarawiki","rowiki","rowikibooks","rowikinews","rowikiquote","rowikisource","rowikivoyage","rowiktionary","ruewiki","ruwiki","ruwikibooks","ruwikinews","ruwikiquote","ruwikisource","ruwikiversity","ruwikivoyage","ruwiktionary","rwwiki","rwwiktionary","sahwiki","sahwikiquote","sahwikisource","satwiki","sawiki","sawikibooks","sawikiquote","sawikisource","sawiktionary","scnwiki","scnwiktionary","scowiki","scwiki","scwiktionary","sdwiki","sdwikinews","sdwiktionary","sewiki","sewikibooks","sgwiki","sgwiktionary","shiwiki","shnwiki","shnwikibooks","shnwikivoyage","shnwiktionary","shwiki","shwiktionary","shywiktionary","simplewiki","simplewikibooks","simplewikiquote","simplewiktionary","siwiki","siwikibooks","siwiktionary","skrwiki","skrwiktionary","skwiki","skwikibooks","skwikiquote","skwikisource","skwiktionary","slwiki","slwikibooks","slwikiquote","slwikisource","slwikiversity","slwiktionary","smnwiki","smwiki","smwiktionary","snwiki","snwiktionary","sourceswiki","sowiki","sowiktionary","specieswiki","sqwiki","sqwikibooks","sqwikinews","sqwikiquote","sqwiktionary","srnwiki","srwiki","srwikibooks","srwikinews","srwikiquote","srwikisource","srwiktionary","sswiki","sswiktionary","stqwiki","stwiki","stwiktionary","suwiki","suwikibooks","suwikiquote","suwikisource","suwiktionary","svwiki","svwikibooks","svwikinews","svwikiquote","svwikisource","svwikiversity","svwikivoyage","svwiktionary","swwiki","swwikibooks","swwiktionary","szlwiki","szywiki","tawiki","tawikibooks","tawikinews","tawikiquote","tawikisource","tawiktionary","taywiki","tcywiki","tetwiki","tewiki","tewikibooks","tewikiquote","tewikisource","tewiktionary","tgwiki","tgwikibooks","tgwiktionary","thwiki","thwikibooks","thwikinews","thwikiquote","thwikisource","thwiktionary","tiwiki","tiwiktionary","tkwiki","tkwikibooks","tkwikiquote","tkwiktionary","tlwiki","tlwikibooks","tlwikiquote","tlwiktionary","tlywiki","tnwiki","tnwiktionary","towiki","towiktionary","tpiwiki","tpiwiktionary","trvwiki","trwiki","trwikibooks","trwikinews","trwikiquote","trwikisource","trwikivoyage","trwiktionary","tswiki","tswiktionary","ttwiki","ttwikibooks","ttwikiquote","ttwiktionary","tumwiki","twwiki","twwiktionary","tyvwiki","tywiki","udmwiki","ugwiki","ugwikibooks","ugwikiquote","ugwiktionary","ukwiki","ukwikibooks","ukwikinews","ukwikiquote","ukwikisource","ukwikivoyage","ukwiktionary","urwiki","urwikibooks","urwikiquote","urwiktionary","uzwiki","uzwikibooks","uzwikiquote","uzwiktionary","vecwiki","vecwikisource","vecwiktionary","vepwiki","vewiki","viwiki","viwikibooks","viwikiquote","viwikisource","viwikivoyage","viwiktionary","vlswiki","vowiki","vowikibooks","vowikiquote","vowiktionary","warwiki","wawiki","wawikibooks","wawikisource","wawiktionary","wikidatawiki","wikifunctionswiki","wikimaniawiki","wowiki","wowikiquote","wowiktionary","wuuwiki","xalwiki","xhwiki","xhwikibooks","xhwiktionary","xmfwiki","yiwiki","yiwikisource","yiwiktionary","yowiki","yowikibooks","yowiktionary","yuewiktionary","zawiki","zawikibooks","zawikiquote","zawiktionary","zeawiki","zghwiki","zh_classicalwiki","zh_min_nanwiki","zh_min_nanwikibooks","zh_min_nanwikiquote","zh_min_nanwikisource","zh_min_nanwiktionary","zh_yuewiki","zhwiki","zhwikibooks","zhwikinews","zhwikiquote","zhwikisource","zhwikiversity","zhwikivoyage","zhwiktionary","zuwiki","zuwikibooks","zuwiktionary"],C$e="https://www.wikidata.org/wiki/";function nV({site:t,title:e}){if(Lu(arguments),!t)throw new Error("missing a site");if(!e)throw new Error("missing a title");if(y_(_w,t))return _w[t](e);const n=t.replace(/wiki$/,"");if(y_(_w,n))return _w[n](e);const{lang:r,project:a}=rV(t);return e=Pj(ZRe(e)),`https://${r}.${a}.org/wiki/${e}`}const cd=t=>e=>`https://${t}.wikimedia.org/wiki/${e}`,_w={commons:cd("commons"),foundation:cd("foundation"),mediawiki:t=>`https://www.mediawiki.org/wiki/${t}`,meta:cd("meta"),outreach:cd("outreach"),sources:t=>`https://wikisource.org/wiki/${t}`,species:cd("species"),wikidata:t=>{const e=I$e[t[0]];let n=e?`${e}:${t}`:t;return n=n.replace("-","#"),`${C$e}${n}`},wikifunctions:cd("wikifunctions"),wikimania:cd("wikimania")},I$e={E:"EntitySchema",L:"Lexeme",P:"Property"},E$e=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/;function rV(t){if(t.startsWith("http")){const e=t,n=e.match(E$e);if(!n)throw new Error(`invalid sitelink url: ${e}`);let[r,a,i]=n.slice(1);if(i=decodeURIComponent(i),r==="commons")return{lang:"en",project:"commons",key:"commons",title:i,url:e};if(!m0(T$e,a))throw new Error(`project is unknown: ${a}`);if(r==="www")return{lang:"en",project:a,key:a,title:i,url:e};const o=`${r.replace(/-/g,"_")}${a}`.replace("wikipedia","wiki");return{lang:r,project:a,key:o,title:i,url:e}}else{if(y_(I_,t))return{lang:"en",project:I_[t],key:t};if(!m0(E_,t))throw new Error(`site not found: ${t}. Updating wikibase-sdk to a more recent version might fix the issue.`);let[e,n,r]=t.split("wik");if(r!=null)throw new Error(`invalid sitelink key: ${t}`);e=e.replace(/_/g,"-");const a=iV[n];if(!a)throw new Error(`sitelink project not found: ${a}`);return{lang:e,project:a,key:t}}}const aV=t=>m0(E_,t),N$e=aV,iV={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"},T$e=[...Object.values(iV),...Object.values(I_)],_$e=Object.freeze(Object.defineProperty({__proto__:null,getSitelinkData:rV,getSitelinkUrl:nV,isSite:aV,isSitelinkKey:N$e},Symbol.toStringTag,{value:"Module"}));function oV(t,e={}){let{addUrl:n,keepBadges:r,keepAll:a}=e;return r=r||a,Object.keys(t).reduce(R$e({sitelinks:t,addUrl:n,keepBadges:r}),{})}const R$e=({sitelinks:t,addUrl:e,keepBadges:n})=>(r,a)=>{if(t[a]==null)return r[a]=t[a],r;const{title:i,badges:o}=t[a];return e||n?(r[a]={title:i},e&&(r[a].url=nV({site:a,title:i})),n&&(r[a].badges=o)):r[a]=i,r},$$e={labels:Hj,descriptions:qj,aliases:Kj,claims:xh,statements:xh,sitelinks:oV,lemmas:Xj,forms:Jj,senses:tV},sV=(t,e={})=>{const{type:n}=t,r={id:t.id,type:n,modified:t.modified};return n==="item"?(Fa(t,r,"labels"),Fa(t,r,"descriptions"),Fa(t,r,"aliases"),Fa(t,r,"claims",e),Fa(t,r,"sitelinks",e)):n==="property"?(r.datatype=t.datatype,Fa(t,r,"labels"),Fa(t,r,"descriptions"),Fa(t,r,"aliases"),Fa(t,r,"claims",e)):n==="lexeme"?(Fa(t,r,"lemmas"),r.lexicalCategory=t.lexicalCategory,r.language=t.language,Fa(t,r,"claims",e),Fa(t,r,"forms",e),Fa(t,r,"senses",e)):n==="mediainfo"&&(Fa(t,r,"labels"),Fa(t,r,"descriptions"),Fa(t,r,"statements",e)),r},Fa=(t,e,n,r)=>{t[n]!=null&&(e[n]=$$e[n](t[n],r))},lV=(t,e={})=>{t.entities&&(t=t.entities);const{entityPrefix:n}=e,r={};for(const[a,i]of Object.entries(t)){const o=n?`${n}:${a}`:a;r[o]=sV(i,e)}return r};function O$e(t){t=t.body||t;const{entities:e}=t;return lV(e)}function M$e(t){return t=t.body||t,t.query.search.map(e=>e.title)}const P$e=Object.freeze(Object.defineProperty({__proto__:null,entities:O$e,pagesTitles:M$e},Symbol.toStringTag,{value:"Module"}));function A$e(t,e={}){typeof t=="string"&&(t=JSON.parse(t));const{vars:n}=t.head,r=t.results.bindings;if(n.length===1&&e.minimize){const s=n[0];return r.map(l=>N_(l[s])).filter(l=>l!=null)}const{richVars:a,associatedVars:i,standaloneVars:o}=F$e(n);return r.map(s=>B$e(a,i,o,s))}function N_(t){if(!t||t.type==="bnode")return null;const{value:e}=t;if(t.type==="uri")return D$e(e);const n=(t.datatype||"").replace("http://www.w3.org/2001/XMLSchema#","");return n==="decimal"||n==="integer"||n==="float"||n==="double"?parseFloat(e):n==="boolean"?e==="true":e}function D$e(t){return t.match(/http.*\/entity\/statement\//)?L$e(t):t.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,"")}function L$e(t){t=t.replace(/^https?:\/\/.*\/entity\/statement\//,"");const e=t.split("-");return e[0]+"$"+e.slice(1).join("-")}function F$e(t){let e=t.filter(i=>{const o=new RegExp(`^${i}[A-Z]\\w+`);return t.some(s=>o.test(s))});e=e.filter(i=>!e.some(o=>i!==o&&i.startsWith(o)));const n=new RegExp(`^(${e.join("|")})[A-Z]`),r=t.filter(i=>n.test(i)),a=t.filter(i=>!e.includes(i)&&!n.test(i));return{richVars:e,associatedVars:r,standaloneVars:a}}function B$e(t,e,n,r){const a={};for(const i of t){const o={},s=N_(r[i]);s!=null&&(o.value=s);for(const l of e)l.startsWith(i)&&z$e(r,i,l,o);Object.keys(o).length>0&&(a[i]=o)}for(const i of n){const o=N_(r[i]);o!=null&&(a[i]=o)}return a}function z$e(t,e,n,r){let a=n.split(e)[1];a=a[0].toLowerCase()+a.slice(1),a=a==="altLabel"?"aliases":a;const i=t[n];i!=null&&(r[a]=i.value)}const j$e=Object.freeze(Object.defineProperty({__proto__:null,aliases:Kj,claim:C_,claims:xh,descriptions:qj,entities:lV,entity:sV,form:Zj,forms:Jj,glosses:Qj,labels:Hj,lemmas:Xj,propertyClaims:Vj,propertyQualifiers:v$e,propertySnaks:Vj,qualifier:x$e,qualifiers:Uj,references:Gj,representations:Yj,sense:eV,senses:tV,sitelinks:oV,snak:C_,snaks:xh,sparqlResults:A$e},Symbol.toStringTag,{value:"Module"})),V$e=/^\d+[|\d]*$/;function U$e(t){return function(e){Lu(arguments);for(const[f,g]of Object.entries(e))if(f.startsWith("sr")){const y=f.replace(/^sr/,"");if(e[y]!=null)throw new Error(`${y} and ${f} are the same`);e[y]=g}const{search:n,haswbstatement:r,format:a="json",limit:i,offset:o,profile:s,sort:l}=e;let{namespace:u,prop:c}=e;if(!(n||r))throw new Error('missing "search" or "haswbstatement" parameter');let d="";if(n&&(d+=n),r){const f=r instanceof Array?r:[r];for(const g of f)g[0]==="-"?d+=` -haswbstatement:${g.slice(1)}`:d+=` haswbstatement:${g}`}if(i!=null&&(typeof i!="number"||i<1))throw new Error(`invalid limit: ${i}`);if(o!=null&&(typeof o!="number"||o<0))throw new Error(`invalid offset: ${o}`);if(u instanceof Array?u=u.join("|"):typeof u=="number"&&(u=u.toString()),u&&!V$e.test(u))throw new Error(`invalid namespace: ${u}`);if(s!=null&&typeof s!="string")throw new Error(`invalid profile: ${s} (${typeof s}, expected string)`);if(l!=null&&typeof l!="string")throw new Error(`invalid sort: ${l} (${typeof l}, expected string)`);let p;if(c!=null){if(c instanceof Array&&(c=c.join("|")),typeof c!="string")throw new Error(`invalid prop: ${c} (${typeof c}, expected string)`);p=c.toString()}return t({action:"query",list:"search",srsearch:d.trim(),format:a,srnamespace:u,srlimit:i,sroffset:o,srqiprofile:s,srsort:l,srprop:p})}}function Rw(t,e){return function(n){if(!e(n))throw new Error(`invalid ${t}: ${n} (type: ${q$e(n)})`)}}const uV=Rw("entity id",g_),G$e=Rw("property id",Nw),W$e=Rw("entity page title",Oj),H$e=Rw("revision id",Rj);function q$e(t){const e=typeof t;if(e==="object"){if(t===null)return"null";if(t instanceof Array)return"array";if(t instanceof Promise)return"promise"}return e==="number"&&Number.isNaN(t)?"NaN":e}function cV(t){return function({ids:e,languages:n,props:r,format:a="json",redirects:i}){if(Lu(arguments),!(e&&e.length>0))throw new Error("no id provided");e=Ss(e),e.forEach(s=>uV(s)),e.length>50&&console.warn(`getEntities accepts 50 ids max to match Wikidata API limitations:
      this request won't get all the desired entities.
      You can use getManyEntities instead to generate several request urls
      to work around this limitation`);const o={action:"wbgetentities",ids:e.join("|"),format:a};return i===!1&&(o.redirects="no"),n&&(n=Ss(n),o.languages=n.join("|")),r&&r.length>0&&(o.props=Ss(r).join("|")),t(o)}}function K$e(t){return function({titles:e,sites:n,languages:r,props:a,format:i="json",redirects:o}){if(Lu(arguments),!(e&&e.length>0))throw new Error("no titles provided");n&&n.length>0||(n=["enwiki"]),e=Ss(e),n=Ss(n).map(X$e),a=Ss(a);const s={action:"wbgetentities",titles:e.join("|"),sites:n.join("|"),format:i};return n.length===1&&e.length===1&&(s.normalize=!0),r&&(r=Ss(r),s.languages=r.join("|")),a.length>0&&(s.props=a.join("|")),o===!1&&(s.redirects="no"),t(s)}}function X$e(t){return m0(E_,t)?t:t.replace(/-/g,"_")+"wiki"}function Y$e(t,e){return function({id:n,revision:r}){return Lu(arguments),uV(n),H$e(r),`${t}/${e}/index.php?title=Special:EntityData/${n}.json&revision=${r}`}}function Q$e(t){const e=cV(t);return function({ids:n,languages:r,props:a,format:i,redirects:o}){if(Lu(arguments),!(n instanceof Array))throw new Error("getManyEntities expects an array of ids");return Z$e(n).map(s=>e({ids:s,languages:r,props:a,format:i,redirects:o}))}}function Z$e(t){const e=[];for(;t.length>0;){const n=t.slice(0,50);t=t.slice(50),e.push(n)}return e}function dV(t){return function(e){const n=Pj(e);return`${t}?format=json&query=${n}`}}const J$e="FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ",eOe=t=>{const e=dV(t);return function(n){let{properties:r}=n;const{values:a,limit:i,caseInsensitive:o,keepProperties:s}=n,l=o?rOe:nOe,u=s?"":J$e;r=Ss(r),r.forEach(d=>G$e(d));let c=`SELECT DISTINCT ?subject WHERE { ${tOe(a,l,r,u)} }`;return i&&(c+=` LIMIT ${i}`),e(c)}},tOe=(t,e,n,r)=>(n=n.map(aOe).join("|"),t instanceof Array?"{ "+t.map(pV).map(a=>e(n,a,r)).join("} UNION {")+" }":e(n,pV(t),r)),pV=t=>(Ew(t)?t=`wd:${t}`:typeof t=="string"&&(t=`'${t}'`),t),nOe=(t,e,n)=>`?subject ${t} ${e} .
    ${n}`,rOe=(t,e,n)=>`?subject ${t} ?value .
    FILTER (lcase(?value) = ${e.toLowerCase()})
    ${n}`,aOe=t=>"wdt:"+t;function iOe(t){return function({ids:e,format:n,limit:r,start:a,end:i,prop:o,user:s,excludeuser:l,tag:u}){Lu(arguments),e=Ss(e),e.forEach(p=>W$e(p));const c=e.length===1,d={action:"query",prop:"revisions"};return d.titles=e.join("|"),d.format=n||"json",c&&(d.rvlimit=r||"max"),c&&a&&(d.rvstart=hV(a)),c&&i&&(d.rvend=hV(i)),o?d.rvprop=Ss(o).join("|"):d.rvprop="ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",d.rvslots="*",s&&(d.rvuser=s),l&&(d.rvexcludeuser=l),u&&(d.rvtag=u),t(d)}}const hV=t=>typeof t=="number"&&t<oOe?t:Math.trunc(new Date(t).getTime()/1e3),oOe=new Date("2000-01-01").getTime(),sOe=["item","property","lexeme","form","sense"],lOe=t=>function({search:e,language:n="en",uselang:r,limit:a="20",continue:i="0",format:o="json",type:s="item"}){if(Lu(arguments),r=r||n,!(e&&e.length>0))throw new Error("search can't be empty");if(!m0(sOe,s))throw new Error(`invalid type: ${s}`);return t({action:"wbsearchentities",search:e,language:n,limit:a,continue:i,format:o,uselang:r,type:s})},uOe=typeof location<"u"&&typeof document<"u";function cOe(t){return e=>{uOe&&(e=Object.assign(Object.assign({},e),{origin:"*"}));const n=Object.entries(e).filter(([,a])=>a!=null).map(([a,i])=>[a,String(i)]),r=new URLSearchParams(n).toString();return t+"?"+r}}const dOe=`Tip: if you just want to access functions that don't need an instance or a sparqlEndpoint,
those are also exposed directly on the module object. Exemple:
import { isItemId, simplify } from 'wikibase-sdk'`,pOe=Object.assign(Object.assign(Object.assign(Object.assign({simplify:j$e,parse:P$e},QRe),_$e),b$e),o$e);function hOe(t){if(!Mj(t))throw new Error("invalid config");const{instance:e,sparqlEndpoint:n}=t;let{wgScriptPath:r="w"}=t;if(r=r.replace(/^\//,""),!(e||n))throw new Error(`one of instance or sparqlEndpoint should be set at initialization.
${dOe}`);let a,i,o;if(e){fV("instance",e),i=e.replace(/\/$/,"").replace(`/${r}/api.php`,""),o=`${i}/${r}/api.php`;const l=cOe(o);a={searchEntities:lOe(l),cirrusSearchPages:U$e(l),getEntities:cV(l),getManyEntities:Q$e(l),getRevisions:iOe(l),getEntityRevision:Y$e(e,r),getEntitiesFromSitelinks:K$e(l)}}else a={searchEntities:dd("searchEntities"),cirrusSearchPages:dd("cirrusSearchPages"),getEntities:dd("getEntities"),getManyEntities:dd("getManyEntities"),getRevisions:dd("getRevisions"),getEntityRevision:dd("getEntityRevision"),getEntitiesFromSitelinks:dd("getEntitiesFromSitelinks")};let s;return n?(fV("sparqlEndpoint",n),s={sparqlQuery:dV(n),getReverseClaims:eOe(n)}):s={sparqlQuery:gV("sparqlQuery"),getReverseClaims:gV("getReverseClaims")},Object.assign(Object.assign(Object.assign({instance:{root:i,apiEndpoint:o}},pOe),a),s)}const fV=(t,e)=>{if(!(typeof e=="string"&&e.startsWith("http")))throw new Error(`invalid ${t}: ${e}`)},mV=t=>e=>()=>{throw new Error(`${e} requires ${t} to be set at initialization`)},gV=mV("a sparqlEndpoint"),dd=mV("an instance"),fOe={sparqlQuery:(t="")=>{const e=hOe({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"}),n=`
      SELECT ?item ?itemLabel ?artworkLabel ?countryLabel ?genreLabel ?year ?locationLabel ?creatorLabel ?materialLabel ?depictsLabel ?collectionLabel ?iiifManifest (MD5(CONCAT(str(?item),str(RAND()))) as ?random)
      WITH {    
        SELECT ?item (SAMPLE(?artwork) as ?artwork) (SAMPLE(?country) as ?country) (SAMPLE(?genre) as ?genre) (SAMPLE(YEAR(?inception)) as ?year) (SAMPLE(?location) as ?location) (SAMPLE(?creator) as ?creator) (SAMPLE(?material) as ?material) (SAMPLE(?depicts) as ?depicts) (SAMPLE(?collection) as ?collection) (SAMPLE(?iiifManifest) as ?iiifManifest)
        WHERE {
          ?item wdt:P6108 ?iiifManifest ;
                wdt:P195 ?collection ;
                wdt:P31 ?artwork .
                FILTER ( ?artwork = wd:Q3305213 || ?artwork = wd:Q93184 || ?artwork = wd:Q11060274 || ?artwork = wd:Q860861 || ?artwork = wd:Q125191 )
                ${t!==""?`FILTER ( ?material = ${t} )`:""}
                OPTIONAL {
                  ?item wdt:P495 ?countryOfOrigin.
                  FILTER(?countryOfOrigin = wd:Q31 || ?countryOfOrigin = wd:Q213 || ?countryOfOrigin = wd:Q35 || ?countryOfOrigin = wd:Q142 || ?countryOfOrigin = wd:Q36 || ?countryOfOrigin = wd:Q39 || ?countryOfOrigin = wd:Q32 || ?countryOfOrigin = wd:Q40 || ?countryOfOrigin = wd:Q55 || ?countryOfOrigin = wd:Q183 )
                }
                OPTIONAL {
                  ?collection wdt:P17 ?country.
                  FILTER(?country = wd:Q31 || ?country = wd:Q213 || ?country = wd:Q35 || ?country = wd:Q142 || ?country = wd:Q36 || ?country = wd:Q39 || ?country = wd:Q32 || ?country = wd:Q40 || ?country = wd:Q55 || ?country = wd:Q183 )
                }
                BIND(COALESCE(?countryOfOrigin, ?country) AS ?country)
                FILTER(BOUND(?country))

                OPTIONAL { ?item wdt:P136 ?genre. }
                OPTIONAL { ?item wdt:P571 ?inception. }
                OPTIONAL { ?item wdt:P276 ?location. }
                OPTIONAL { ?item wdt:P170 ?creator. }
                OPTIONAL { ?item wdt:P186 ?material. }
                OPTIONAL { ?item wdt:P180 ?depicts. }
        }
        GROUP BY ?item
        LIMIT 100
      } AS %result
      WHERE {
        INCLUDE %result.
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
      } ORDER BY ?random
    `;return e.sparqlQuery(n)}},mOe=()=>{const[t,e]=R.useState([]),[n,r]=R.useState(!0),[a,i]=R.useState(null);return R.useEffect(()=>{(async()=>{try{const o=await fetch(fOe.sparqlQuery());if(!o.ok)throw new Error(`Error: ${o.status} - ${o.statusText}`);const s=await o.json();e(s.results.bindings)}catch(o){i(o.message)}finally{r(!1)}})()},[]),{data:t,loading:n,error:a}},yV=({onClick:t,materialIcon:e})=>re.jsx(yr,{className:"p-4 text-xl text-black",onClick:t,rounded:!0,inline:!0,children:re.jsx(_a,{material:e})});function gOe(){const{t}=tu(),{addToImageList:e,imageList:n,removeFromImageList:r,likeImage:a}=bc(),{data:i}=mOe(),[o,s]=R.useState(0),l=R.useRef(o),u=R.useRef(null);R.useEffect(()=>{const y=async v=>{if(!v)return;const b=(await Promise.all(v.map(async x=>{var w,S,C,I,_;try{const T=await fz.fetchIIIFIdentifier(x.iiifManifest.value);return T?{id:x.item.value,name:((w=x.itemLabel)==null?void 0:w.value)||"",year:((S=x.year)==null?void 0:S.value)||"",country:((C=x.countryLabel)==null?void 0:C.value)||"",location:((I=x.locationLabel)==null?void 0:I.value)||"",creator:((_=x.creatorLabel)==null?void 0:_.value)||"",url:x.iiifManifest.value,identifier:T,image:`${T}/full/400,/0/default.jpg`,thumbnail:`${T}/full/100,100/0/default.jpg`}:null}catch(T){return console.error("Error processing image:",T),null}}))).filter(x=>x!==null);e(b)};i.length>0&&y(i)},[i,e]);const c=y=>{y==="right"&&o<n.length&&a(n[o]),r(n[o].id),s(v=>v+1)},d=y=>{var v;l.current>=y&&((v=u.current)==null||v.restoreCard())},p=async y=>{var v;o>=0&&o<n.length&&await((v=u.current)==null?void 0:v.swipe(y))},f=n[o],g=y=>!y.includes("http")&&y;return re.jsxs(to,{margin:"my-4",className:"flex flex-col flex-wrap gap-4 container justify-center content-center text-center mx-auto",children:[re.jsx("div",{className:"p-2",children:re.jsx("h1",{className:"text-xl",children:t("selectionTitle")})}),re.jsx("div",{className:"mx-auto h-2/3",children:re.jsx(nP,{className:"flex shadow-md shadow-[#BC13FE]/90",children:f&&re.jsxs(re.Fragment,{children:[re.jsx(jRe,{ref:u,className:"mb-4",onSwipe:y=>c(y),onCardLeftScreen:()=>d(o),preventSwipe:["up","down"],children:re.jsx("img",{alt:f.name,src:f.image})},f.id),re.jsxs("div",{className:"flex justify-between",children:[re.jsx(yV,{onClick:()=>p("left"),materialIcon:re.jsx(jJ,{className:"w-6 h-6"})}),re.jsx(yV,{onClick:()=>p("right"),materialIcon:re.jsx(GJ,{className:"w-6 h-6"})})]})]})})}),re.jsxs("div",{className:"mb-8 p-4 bg-white rounded h-1/3 opacity-90 max-w-lg w-3/4 text-center mx-auto shadow-md shadow-[#BC13FE]/90",children:[re.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:f?.name}),re.jsxs("p",{className:"text-gray-600",children:[t("selectionYear")," ",f?.year||t("selectionUnknown")]}),re.jsxs("p",{className:"text-gray-600",children:[t("selectionCreator")," ",g(f?.creator)||t("selectionUnknown")]}),re.jsxs("p",{className:"text-gray-600",children:[t("selectionLocation")," ",f?.location||t("selectionUnknown")]})]})]})}const yOe="/collage.webp",bOe="/logo_animated.svg",vOe=()=>re.jsx("img",{src:bOe,alt:"Logo GLAMorous Europe",className:"w-96 m-auto"}),xOe=()=>re.jsx("img",{src:yOe,alt:"Collage GLAMorous Europe",className:"w-96 m-auto",decoding:"async"});function wOe(){const{t}=tu(),{imageLikeList:e,resetState:n}=bc(),[r,a]=R.useState(!1),i=()=>{e.length>0?a(!0):window.location.href="/selection"},o=()=>{a(!1)},s=()=>{a(!1),n()};return re.jsxs(to,{margin:"mb-4",className:"flex flex-col flex-wrap gap-4 container justify-center content-center text-center mx-auto",children:[re.jsx(vOe,{}),re.jsx("h1",{className:"text-xl",children:t("startTitle")}),re.jsx(xOe,{}),re.jsx("p",{className:"text-xl",children:t("startSubtitle")}),re.jsx("p",{className:"text-xl",children:t("startText")}),re.jsx(yr,{large:!0,className:"text-xl w-1/2 mx-auto h-16",rounded:!0,inline:!0,onClick:i,children:t("startButtonText")}),r&&re.jsx(lP,{opened:r,onBackdropClick:()=>a(!1),children:re.jsxs(Gy,{children:[re.jsx(jy,{title:t("discardModalTitle"),right:re.jsx(NI,{preventScrollReset:!0,to:"/",onClick:o,children:t("discardModalCancel")})}),re.jsxs(to,{className:"space-y-4",children:[re.jsx("p",{children:t("discardModalMessage")}),re.jsx(yr,{className:"p-4 rounded-full text-xl bg-red-500 text-white",children:re.jsx(NI,{preventScrollReset:!0,to:"/selection",onClick:s,children:t("discardModalConfirm")})}),re.jsx(yr,{className:"p-4 rounded-full text-xl bg-red-500 text-white",onClick:o,children:t("discardModalNotConfirm")})]})]})})]})}const kOe=MX(EI(re.jsxs(dp,{path:"/",element:re.jsx(n5e,{}),children:[re.jsx(dp,{index:!0,element:re.jsx(wOe,{})}),re.jsx(dp,{path:"selection",element:re.jsx(gOe,{})}),re.jsx(dp,{path:"collection",element:re.jsx(H_e,{})}),re.jsx(dp,{path:"creation",element:re.jsx(Iie,{})})]})));function SOe(){return re.jsx(jX,{router:kOe})}const COe={artwork:"Meine Leinwand",artworkCanvasBrightness:"Helligkeit",artworkCanvasContrast:"Kontrast",artworkCanvasOpacity:"Deckkraft",artworkEmpty:"F\xFCge deine eigenen Bildausschnitte hinzu",artworkTitle:"Ziehe die Ausschnitte oder vorbereiteten Sticker in die Leinwand. Du kannst sie ver\xE4ndern und die Leinwand austauschen. Gestalte dein eigenes Kunstwerk und teile es mit deinen Freund:innen!",chooseLanguage:"Sprache w\xE4hlen:",collection:"Meine Sammlung",collectionAddText:"Ausschnitt hinzuf\xFCgen",collectionRemoveText:"Hintergrund entfernen",collectionClose:"Schlie\xDFen",collectionSwitchLasso:"Lassoauswahl",collectionSwitchViewer:"Zoomauswahl",collectionToastSuccess:"Ausschnitt hinzugef\xFCgt",collectionLoading:"Lade...",collectionTitle:"W\xE4hle Bildausschnitte aus deinen Lieblingsobjekten aus, um sie deiner Leinwand hinzuzuf\xFCgen.",discardModalCancel:"Abbrechen",discardModalConfirm:"Ja",discardModalMessage:"M\xF6chtest du deine bisherige Auswahl verwerfen?",discardModalNotConfirm:"Nein",discardModalTitle:"Bisherige Auswahl",selection:"Meine Auswahl",selectionCreator:"K\xFCnstler:in:",selectionLocation:"Sammlungsort:",selectionTitle:"W\xE4hle deine Lieblingsobjekte per Swipe oder Klick. F\xFCge sie somit zu deiner Sammlung hinzu.",selectionUnknown:"Unbekannt",selectionYear:"Entstehungsjahr:",sidebarAbout:"\xDCber uns",sidebarChooseLanguage:"Sprache",sidebarLegal:"Impressum",start:"Start",startButtonText:"Los geht's!",startSubtitle:"Durchst\xF6bere Kunstwerke aus Museen, Galerien, Bibliotheken und Archiven.",startText:"Sammle deine Lieblingsobjekte, w\xE4hle daraus Motive aus und gestalte dein ganz pers\xF6nliches Kunstwerk.",startTitle:"Entdecke mit GLAMorous Europe europ\xE4isches Kulturerbe!"},IOe={translation:COe},EOe={artwork:"My Canvas",artworkCanvasBrightness:"Brightness",artworkCanvasContrast:"Contrast",artworkCanvasOpacity:"Opacity",artworkEmpty:"Add your image details.",artworkTitle:"Drag the image details or prepared stickers onto the canvas. You can change them and replace the canvas. Create your own work of art and share it with your friends!",chooseLanguage:"Choose Language:",collection:"My Collection",collectionAddText:"Add choosen detail",collectionClose:"Close",collectionLoading:"Loading...",collectionSwitchLasso:"Select Lasso",collectionSwitchViewer:"Select zoom",collectionRemoveText:"Remove Background",collectionToastSuccess:"Added choosen detail",collectionTitle:"Select image details from your favorites to add them to your canvas.",discardModalCancel:"Close",discardModalConfirm:"Yes",discardModalMessage:"Would you like to discard your previous selection?",discardModalNotConfirm:"No",discardModalTitle:"Current selection",selection:"My Selection",selectionCreator:"Artist:",selectionLocation:"Location:",selectionTitle:"Select your favorites by swiping or clicking. This will add them to your collection.",selectionUnknown:"Unknown",selectionYear:"Year of creation:",sidebarAbout:"About",sidebarChooseLanguage:"Language",sidebarLegal:"Legal",start:"Start",startButtonText:"Let's go!",startSubtitle:"Explore works of art from museums, galleries, libraries and archives.",startText:"Collect your favorite objects, select details from them and create your very own work of art.",startTitle:"Dating European cultural heritage with GLAMorous Europe!"},NOe={translation:EOe};ia.init({interpolation:{escapeValue:!1},lng:"auto",fallbackLng:"de",resources:{de:{...IOe},en:{...NOe}}});const TOe={scrollAngleRanges:[{start:300},{end:60},{start:120,end:240}],ignoreContextMenu:!0};l6(document.getElementById("root")).render(re.jsx(W.StrictMode,{children:re.jsx(bK,{i18n:ia,children:re.jsx(dW,{backend:eH,options:TOe,children:re.jsx(SOe,{})})})}));export{gR as $,Hk as a,XU as b,KU as c,MR as d,Df as e,W as f,Ga as g,rF as h,Wi as i,s6 as j,R as r};function $w(t){return $w.viteFileDeps||($w.viteFileDeps=[]),t.map(e=>$w.viteFileDeps[e])}
