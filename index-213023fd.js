var Kx=Object.defineProperty;var Yx=(_r,Tr,Rr)=>Tr in _r?Kx(_r,Tr,{enumerable:!0,configurable:!0,writable:!0,value:Rr}):_r[Tr]=Rr;var ap=(_r,Tr,Rr)=>(Yx(_r,typeof Tr!="symbol"?Tr+"":Tr,Rr),Rr);function _mergeNamespaces(_r,Tr){for(var Rr=0;Rr<Tr.length;Rr++){const Ar=Tr[Rr];if(typeof Ar!="string"&&!Array.isArray(Ar)){for(const Pr in Ar)if(Pr!=="default"&&!(Pr in _r)){const Lr=Object.getOwnPropertyDescriptor(Ar,Pr);Lr&&Object.defineProperty(_r,Pr,Lr.get?Lr:{enumerable:!0,get:()=>Ar[Pr]})}}}return Object.freeze(Object.defineProperty(_r,Symbol.toStringTag,{value:"Module"}))}(function(){const Tr=document.createElement("link").relList;if(Tr&&Tr.supports&&Tr.supports("modulepreload"))return;for(const Pr of document.querySelectorAll('link[rel="modulepreload"]'))Ar(Pr);new MutationObserver(Pr=>{for(const Lr of Pr)if(Lr.type==="childList")for(const Mr of Lr.addedNodes)Mr.tagName==="LINK"&&Mr.rel==="modulepreload"&&Ar(Mr)}).observe(document,{childList:!0,subtree:!0});function Rr(Pr){const Lr={};return Pr.integrity&&(Lr.integrity=Pr.integrity),Pr.referrerPolicy&&(Lr.referrerPolicy=Pr.referrerPolicy),Pr.crossOrigin==="use-credentials"?Lr.credentials="include":Pr.crossOrigin==="anonymous"?Lr.credentials="omit":Lr.credentials="same-origin",Lr}function Ar(Pr){if(Pr.ep)return;Pr.ep=!0;const Lr=Rr(Pr);fetch(Pr.href,Lr)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(_r){return _r&&_r.__esModule&&Object.prototype.hasOwnProperty.call(_r,"default")?_r.default:_r}function getAugmentedNamespace(_r){if(_r.__esModule)return _r;var Tr=_r.default;if(typeof Tr=="function"){var Rr=function Ar(){return this instanceof Ar?Reflect.construct(Tr,arguments,this.constructor):Tr.apply(this,arguments)};Rr.prototype=Tr.prototype}else Rr={};return Object.defineProperty(Rr,"__esModule",{value:!0}),Object.keys(_r).forEach(function(Ar){var Pr=Object.getOwnPropertyDescriptor(_r,Ar);Object.defineProperty(Rr,Ar,Pr.get?Pr:{enumerable:!0,get:function(){return _r[Ar]}})}),Rr}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$5=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$3=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$4=Symbol.for("react.memo"),y$3=Symbol.for("react.lazy"),z$4=Symbol.iterator;function A$4(_r){return _r===null||typeof _r!="object"?null:(_r=z$4&&_r[z$4]||_r["@@iterator"],typeof _r=="function"?_r:null)}var B$4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$3=Object.assign,D$4={};function E$4(_r,Tr,Rr){this.props=_r,this.context=Tr,this.refs=D$4,this.updater=Rr||B$4}E$4.prototype.isReactComponent={};E$4.prototype.setState=function(_r,Tr){if(typeof _r!="object"&&typeof _r!="function"&&_r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_r,Tr,"setState")};E$4.prototype.forceUpdate=function(_r){this.updater.enqueueForceUpdate(this,_r,"forceUpdate")};function F$4(){}F$4.prototype=E$4.prototype;function G$5(_r,Tr,Rr){this.props=_r,this.context=Tr,this.refs=D$4,this.updater=Rr||B$4}var H$4=G$5.prototype=new F$4;H$4.constructor=G$5;C$3(H$4,E$4.prototype);H$4.isPureReactComponent=!0;var I$4=Array.isArray,J$3=Object.prototype.hasOwnProperty,K$5={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$5(_r,Tr,Rr){var Ar,Pr={},Lr=null,Mr=null;if(Tr!=null)for(Ar in Tr.ref!==void 0&&(Mr=Tr.ref),Tr.key!==void 0&&(Lr=""+Tr.key),Tr)J$3.call(Tr,Ar)&&!L$3.hasOwnProperty(Ar)&&(Pr[Ar]=Tr[Ar]);var Fr=arguments.length-2;if(Fr===1)Pr.children=Rr;else if(1<Fr){for(var zr=Array(Fr),Ur=0;Ur<Fr;Ur++)zr[Ur]=arguments[Ur+2];Pr.children=zr}if(_r&&_r.defaultProps)for(Ar in Fr=_r.defaultProps,Fr)Pr[Ar]===void 0&&(Pr[Ar]=Fr[Ar]);return{$$typeof:l$3,type:_r,key:Lr,ref:Mr,props:Pr,_owner:K$5.current}}function N$5(_r,Tr){return{$$typeof:l$3,type:_r.type,key:Tr,ref:_r.ref,props:_r.props,_owner:_r._owner}}function O$4(_r){return typeof _r=="object"&&_r!==null&&_r.$$typeof===l$3}function escape(_r){var Tr={"=":"=0",":":"=2"};return"$"+_r.replace(/[=:]/g,function(Rr){return Tr[Rr]})}var P$5=/\/+/g;function Q$5(_r,Tr){return typeof _r=="object"&&_r!==null&&_r.key!=null?escape(""+_r.key):Tr.toString(36)}function R$5(_r,Tr,Rr,Ar,Pr){var Lr=typeof _r;(Lr==="undefined"||Lr==="boolean")&&(_r=null);var Mr=!1;if(_r===null)Mr=!0;else switch(Lr){case"string":case"number":Mr=!0;break;case"object":switch(_r.$$typeof){case l$3:case n$3:Mr=!0}}if(Mr)return Mr=_r,Pr=Pr(Mr),_r=Ar===""?"."+Q$5(Mr,0):Ar,I$4(Pr)?(Rr="",_r!=null&&(Rr=_r.replace(P$5,"$&/")+"/"),R$5(Pr,Tr,Rr,"",function(Ur){return Ur})):Pr!=null&&(O$4(Pr)&&(Pr=N$5(Pr,Rr+(!Pr.key||Mr&&Mr.key===Pr.key?"":(""+Pr.key).replace(P$5,"$&/")+"/")+_r)),Tr.push(Pr)),1;if(Mr=0,Ar=Ar===""?".":Ar+":",I$4(_r))for(var Fr=0;Fr<_r.length;Fr++){Lr=_r[Fr];var zr=Ar+Q$5(Lr,Fr);Mr+=R$5(Lr,Tr,Rr,zr,Pr)}else if(zr=A$4(_r),typeof zr=="function")for(_r=zr.call(_r),Fr=0;!(Lr=_r.next()).done;)Lr=Lr.value,zr=Ar+Q$5(Lr,Fr++),Mr+=R$5(Lr,Tr,Rr,zr,Pr);else if(Lr==="object")throw Tr=String(_r),Error("Objects are not valid as a React child (found: "+(Tr==="[object Object]"?"object with keys {"+Object.keys(_r).join(", ")+"}":Tr)+"). If you meant to render a collection of children, use an array instead.");return Mr}function S$5(_r,Tr,Rr){if(_r==null)return _r;var Ar=[],Pr=0;return R$5(_r,Ar,"","",function(Lr){return Tr.call(Rr,Lr,Pr++)}),Ar}function T$4(_r){if(_r._status===-1){var Tr=_r._result;Tr=Tr(),Tr.then(function(Rr){(_r._status===0||_r._status===-1)&&(_r._status=1,_r._result=Rr)},function(Rr){(_r._status===0||_r._status===-1)&&(_r._status=2,_r._result=Rr)}),_r._status===-1&&(_r._status=0,_r._result=Tr)}if(_r._status===1)return _r._result.default;throw _r._result}var U$5={current:null},V$5={transition:null},W$5={ReactCurrentDispatcher:U$5,ReactCurrentBatchConfig:V$5,ReactCurrentOwner:K$5};react_production_min.Children={map:S$5,forEach:function(_r,Tr,Rr){S$5(_r,function(){Tr.apply(this,arguments)},Rr)},count:function(_r){var Tr=0;return S$5(_r,function(){Tr++}),Tr},toArray:function(_r){return S$5(_r,function(Tr){return Tr})||[]},only:function(_r){if(!O$4(_r))throw Error("React.Children.only expected to receive a single React element child.");return _r}};react_production_min.Component=E$4;react_production_min.Fragment=p$5;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$5;react_production_min.StrictMode=q$5;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$5;react_production_min.cloneElement=function(_r,Tr,Rr){if(_r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_r+".");var Ar=C$3({},_r.props),Pr=_r.key,Lr=_r.ref,Mr=_r._owner;if(Tr!=null){if(Tr.ref!==void 0&&(Lr=Tr.ref,Mr=K$5.current),Tr.key!==void 0&&(Pr=""+Tr.key),_r.type&&_r.type.defaultProps)var Fr=_r.type.defaultProps;for(zr in Tr)J$3.call(Tr,zr)&&!L$3.hasOwnProperty(zr)&&(Ar[zr]=Tr[zr]===void 0&&Fr!==void 0?Fr[zr]:Tr[zr])}var zr=arguments.length-2;if(zr===1)Ar.children=Rr;else if(1<zr){Fr=Array(zr);for(var Ur=0;Ur<zr;Ur++)Fr[Ur]=arguments[Ur+2];Ar.children=Fr}return{$$typeof:l$3,type:_r.type,key:Pr,ref:Lr,props:Ar,_owner:Mr}};react_production_min.createContext=function(_r){return _r={$$typeof:u$3,_currentValue:_r,_currentValue2:_r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_r.Provider={$$typeof:t$2,_context:_r},_r.Consumer=_r};react_production_min.createElement=M$5;react_production_min.createFactory=function(_r){var Tr=M$5.bind(null,_r);return Tr.type=_r,Tr};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_r){return{$$typeof:v$3,render:_r}};react_production_min.isValidElement=O$4;react_production_min.lazy=function(_r){return{$$typeof:y$3,_payload:{_status:-1,_result:_r},_init:T$4}};react_production_min.memo=function(_r,Tr){return{$$typeof:x$4,type:_r,compare:Tr===void 0?null:Tr}};react_production_min.startTransition=function(_r){var Tr=V$5.transition;V$5.transition={};try{_r()}finally{V$5.transition=Tr}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(_r,Tr){return U$5.current.useCallback(_r,Tr)};react_production_min.useContext=function(_r){return U$5.current.useContext(_r)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_r){return U$5.current.useDeferredValue(_r)};react_production_min.useEffect=function(_r,Tr){return U$5.current.useEffect(_r,Tr)};react_production_min.useId=function(){return U$5.current.useId()};react_production_min.useImperativeHandle=function(_r,Tr,Rr){return U$5.current.useImperativeHandle(_r,Tr,Rr)};react_production_min.useInsertionEffect=function(_r,Tr){return U$5.current.useInsertionEffect(_r,Tr)};react_production_min.useLayoutEffect=function(_r,Tr){return U$5.current.useLayoutEffect(_r,Tr)};react_production_min.useMemo=function(_r,Tr){return U$5.current.useMemo(_r,Tr)};react_production_min.useReducer=function(_r,Tr,Rr){return U$5.current.useReducer(_r,Tr,Rr)};react_production_min.useRef=function(_r){return U$5.current.useRef(_r)};react_production_min.useState=function(_r){return U$5.current.useState(_r)};react_production_min.useSyncExternalStore=function(_r,Tr,Rr){return U$5.current.useSyncExternalStore(_r,Tr,Rr)};react_production_min.useTransition=function(){return U$5.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React$1=getDefaultExportFromCjs$1(reactExports),$2AODx$react=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$4=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$2=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q$4(_r,Tr,Rr){var Ar,Pr={},Lr=null,Mr=null;Rr!==void 0&&(Lr=""+Rr),Tr.key!==void 0&&(Lr=""+Tr.key),Tr.ref!==void 0&&(Mr=Tr.ref);for(Ar in Tr)m$4.call(Tr,Ar)&&!p$4.hasOwnProperty(Ar)&&(Pr[Ar]=Tr[Ar]);if(_r&&_r.defaultProps)for(Ar in Tr=_r.defaultProps,Tr)Pr[Ar]===void 0&&(Pr[Ar]=Tr[Ar]);return{$$typeof:k$4,type:_r,key:Lr,ref:Mr,props:Pr,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$4;reactJsxRuntime_production_min.jsxs=q$4;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_r){function Tr(ys,ks){var Fs=ys.length;ys.push(ks);e:for(;0<Fs;){var Us=Fs-1>>>1,Vs=ys[Us];if(0<Pr(Vs,ks))ys[Us]=ks,ys[Fs]=Vs,Fs=Us;else break e}}function Rr(ys){return ys.length===0?null:ys[0]}function Ar(ys){if(ys.length===0)return null;var ks=ys[0],Fs=ys.pop();if(Fs!==ks){ys[0]=Fs;e:for(var Us=0,Vs=ys.length,ao=Vs>>>1;Us<ao;){var qs=2*(Us+1)-1,Qs=ys[qs],mo=qs+1,Xs=ys[mo];if(0>Pr(Qs,Fs))mo<Vs&&0>Pr(Xs,Qs)?(ys[Us]=Xs,ys[mo]=Fs,Us=mo):(ys[Us]=Qs,ys[qs]=Fs,Us=qs);else if(mo<Vs&&0>Pr(Xs,Fs))ys[Us]=Xs,ys[mo]=Fs,Us=mo;else break e}}return ks}function Pr(ys,ks){var Fs=ys.sortIndex-ks.sortIndex;return Fs!==0?Fs:ys.id-ks.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Lr=performance;_r.unstable_now=function(){return Lr.now()}}else{var Mr=Date,Fr=Mr.now();_r.unstable_now=function(){return Mr.now()-Fr}}var zr=[],Ur=[],Vr=1,Nr=null,Dr=3,jr=!1,Gr=!1,Wr=!1,qr=typeof setTimeout=="function"?setTimeout:null,Kr=typeof clearTimeout=="function"?clearTimeout:null,Xr=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Zr(ys){for(var ks=Rr(Ur);ks!==null;){if(ks.callback===null)Ar(Ur);else if(ks.startTime<=ys)Ar(Ur),ks.sortIndex=ks.expirationTime,Tr(zr,ks);else break;ks=Rr(Ur)}}function Jr(ys){if(Wr=!1,Zr(ys),!Gr)if(Rr(zr)!==null)Gr=!0,gs(_i);else{var ks=Rr(Ur);ks!==null&&fs(Jr,ks.startTime-ys)}}function _i(ys,ks){Gr=!1,Wr&&(Wr=!1,Kr(rs),rs=-1),jr=!0;var Fs=Dr;try{for(Zr(ks),Nr=Rr(zr);Nr!==null&&(!(Nr.expirationTime>ks)||ys&&!ls());){var Us=Nr.callback;if(typeof Us=="function"){Nr.callback=null,Dr=Nr.priorityLevel;var Vs=Us(Nr.expirationTime<=ks);ks=_r.unstable_now(),typeof Vs=="function"?Nr.callback=Vs:Nr===Rr(zr)&&Ar(zr),Zr(ks)}else Ar(zr);Nr=Rr(zr)}if(Nr!==null)var ao=!0;else{var qs=Rr(Ur);qs!==null&&fs(Jr,qs.startTime-ks),ao=!1}return ao}finally{Nr=null,Dr=Fs,jr=!1}}var es=!1,ts=null,rs=-1,ns=5,as=-1;function ls(){return!(_r.unstable_now()-as<ns)}function us(){if(ts!==null){var ys=_r.unstable_now();as=ys;var ks=!0;try{ks=ts(!0,ys)}finally{ks?xs():(es=!1,ts=null)}}else es=!1}var xs;if(typeof Xr=="function")xs=function(){Xr(us)};else if(typeof MessageChannel<"u"){var Ts=new MessageChannel,vs=Ts.port2;Ts.port1.onmessage=us,xs=function(){vs.postMessage(null)}}else xs=function(){qr(us,0)};function gs(ys){ts=ys,es||(es=!0,xs())}function fs(ys,ks){rs=qr(function(){ys(_r.unstable_now())},ks)}_r.unstable_IdlePriority=5,_r.unstable_ImmediatePriority=1,_r.unstable_LowPriority=4,_r.unstable_NormalPriority=3,_r.unstable_Profiling=null,_r.unstable_UserBlockingPriority=2,_r.unstable_cancelCallback=function(ys){ys.callback=null},_r.unstable_continueExecution=function(){Gr||jr||(Gr=!0,gs(_i))},_r.unstable_forceFrameRate=function(ys){0>ys||125<ys?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ns=0<ys?Math.floor(1e3/ys):5},_r.unstable_getCurrentPriorityLevel=function(){return Dr},_r.unstable_getFirstCallbackNode=function(){return Rr(zr)},_r.unstable_next=function(ys){switch(Dr){case 1:case 2:case 3:var ks=3;break;default:ks=Dr}var Fs=Dr;Dr=ks;try{return ys()}finally{Dr=Fs}},_r.unstable_pauseExecution=function(){},_r.unstable_requestPaint=function(){},_r.unstable_runWithPriority=function(ys,ks){switch(ys){case 1:case 2:case 3:case 4:case 5:break;default:ys=3}var Fs=Dr;Dr=ys;try{return ks()}finally{Dr=Fs}},_r.unstable_scheduleCallback=function(ys,ks,Fs){var Us=_r.unstable_now();switch(typeof Fs=="object"&&Fs!==null?(Fs=Fs.delay,Fs=typeof Fs=="number"&&0<Fs?Us+Fs:Us):Fs=Us,ys){case 1:var Vs=-1;break;case 2:Vs=250;break;case 5:Vs=1073741823;break;case 4:Vs=1e4;break;default:Vs=5e3}return Vs=Fs+Vs,ys={id:Vr++,callback:ks,priorityLevel:ys,startTime:Fs,expirationTime:Vs,sortIndex:-1},Fs>Us?(ys.sortIndex=Fs,Tr(Ur,ys),Rr(zr)===null&&ys===Rr(Ur)&&(Wr?(Kr(rs),rs=-1):Wr=!0,fs(Jr,Fs-Us))):(ys.sortIndex=Vs,Tr(zr,ys),Gr||jr||(Gr=!0,gs(_i))),ys},_r.unstable_shouldYield=ls,_r.unstable_wrapCallback=function(ys){var ks=Dr;return function(){var Fs=Dr;Dr=ks;try{return ys.apply(this,arguments)}finally{Dr=Fs}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$3(_r){for(var Tr="https://reactjs.org/docs/error-decoder.html?invariant="+_r,Rr=1;Rr<arguments.length;Rr++)Tr+="&args[]="+encodeURIComponent(arguments[Rr]);return"Minified React error #"+_r+"; visit "+Tr+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_r,Tr){ha(_r,Tr),ha(_r+"Capture",Tr)}function ha(_r,Tr){for(ea[_r]=Tr,_r=0;_r<Tr.length;_r++)da.add(Tr[_r])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_r){return ja.call(ma,_r)?!0:ja.call(la,_r)?!1:ka.test(_r)?ma[_r]=!0:(la[_r]=!0,!1)}function pa(_r,Tr,Rr,Ar){if(Rr!==null&&Rr.type===0)return!1;switch(typeof Tr){case"function":case"symbol":return!0;case"boolean":return Ar?!1:Rr!==null?!Rr.acceptsBooleans:(_r=_r.toLowerCase().slice(0,5),_r!=="data-"&&_r!=="aria-");default:return!1}}function qa(_r,Tr,Rr,Ar){if(Tr===null||typeof Tr>"u"||pa(_r,Tr,Rr,Ar))return!0;if(Ar)return!1;if(Rr!==null)switch(Rr.type){case 3:return!Tr;case 4:return Tr===!1;case 5:return isNaN(Tr);case 6:return isNaN(Tr)||1>Tr}return!1}function v$2(_r,Tr,Rr,Ar,Pr,Lr,Mr){this.acceptsBooleans=Tr===2||Tr===3||Tr===4,this.attributeName=Ar,this.attributeNamespace=Pr,this.mustUseProperty=Rr,this.propertyName=_r,this.type=Tr,this.sanitizeURL=Lr,this.removeEmptyString=Mr}var z$3={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_r){z$3[_r]=new v$2(_r,0,!1,_r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_r){var Tr=_r[0];z$3[Tr]=new v$2(Tr,1,!1,_r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_r){z$3[_r]=new v$2(_r,2,!1,_r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_r){z$3[_r]=new v$2(_r,2,!1,_r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_r){z$3[_r]=new v$2(_r,3,!1,_r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_r){z$3[_r]=new v$2(_r,3,!0,_r,null,!1,!1)});["capture","download"].forEach(function(_r){z$3[_r]=new v$2(_r,4,!1,_r,null,!1,!1)});["cols","rows","size","span"].forEach(function(_r){z$3[_r]=new v$2(_r,6,!1,_r,null,!1,!1)});["rowSpan","start"].forEach(function(_r){z$3[_r]=new v$2(_r,5,!1,_r.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_r){return _r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_r){var Tr=_r.replace(ra,sa);z$3[Tr]=new v$2(Tr,1,!1,_r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_r){var Tr=_r.replace(ra,sa);z$3[Tr]=new v$2(Tr,1,!1,_r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_r){var Tr=_r.replace(ra,sa);z$3[Tr]=new v$2(Tr,1,!1,_r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_r){z$3[_r]=new v$2(_r,1,!1,_r.toLowerCase(),null,!1,!1)});z$3.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_r){z$3[_r]=new v$2(_r,1,!1,_r.toLowerCase(),null,!0,!0)});function ta(_r,Tr,Rr,Ar){var Pr=z$3.hasOwnProperty(Tr)?z$3[Tr]:null;(Pr!==null?Pr.type!==0:Ar||!(2<Tr.length)||Tr[0]!=="o"&&Tr[0]!=="O"||Tr[1]!=="n"&&Tr[1]!=="N")&&(qa(Tr,Rr,Pr,Ar)&&(Rr=null),Ar||Pr===null?oa(Tr)&&(Rr===null?_r.removeAttribute(Tr):_r.setAttribute(Tr,""+Rr)):Pr.mustUseProperty?_r[Pr.propertyName]=Rr===null?Pr.type===3?!1:"":Rr:(Tr=Pr.attributeName,Ar=Pr.attributeNamespace,Rr===null?_r.removeAttribute(Tr):(Pr=Pr.type,Rr=Pr===3||Pr===4&&Rr===!0?"":""+Rr,Ar?_r.setAttributeNS(Ar,Tr,Rr):_r.setAttribute(Tr,Rr))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_r){return _r===null||typeof _r!="object"?null:(_r=Ja&&_r[Ja]||_r["@@iterator"],typeof _r=="function"?_r:null)}var A$3=Object.assign,La;function Ma(_r){if(La===void 0)try{throw Error()}catch(Rr){var Tr=Rr.stack.trim().match(/\n( *(at )?)/);La=Tr&&Tr[1]||""}return`
`+La+_r}var Na=!1;function Oa(_r,Tr){if(!_r||Na)return"";Na=!0;var Rr=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(Tr)if(Tr=function(){throw Error()},Object.defineProperty(Tr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Tr,[])}catch(Ur){var Ar=Ur}Reflect.construct(_r,[],Tr)}else{try{Tr.call()}catch(Ur){Ar=Ur}_r.call(Tr.prototype)}else{try{throw Error()}catch(Ur){Ar=Ur}_r()}}catch(Ur){if(Ur&&Ar&&typeof Ur.stack=="string"){for(var Pr=Ur.stack.split(`
`),Lr=Ar.stack.split(`
`),Mr=Pr.length-1,Fr=Lr.length-1;1<=Mr&&0<=Fr&&Pr[Mr]!==Lr[Fr];)Fr--;for(;1<=Mr&&0<=Fr;Mr--,Fr--)if(Pr[Mr]!==Lr[Fr]){if(Mr!==1||Fr!==1)do if(Mr--,Fr--,0>Fr||Pr[Mr]!==Lr[Fr]){var zr=`
`+Pr[Mr].replace(" at new "," at ");return _r.displayName&&zr.includes("<anonymous>")&&(zr=zr.replace("<anonymous>",_r.displayName)),zr}while(1<=Mr&&0<=Fr);break}}}finally{Na=!1,Error.prepareStackTrace=Rr}return(_r=_r?_r.displayName||_r.name:"")?Ma(_r):""}function Pa(_r){switch(_r.tag){case 5:return Ma(_r.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _r=Oa(_r.type,!1),_r;case 11:return _r=Oa(_r.type.render,!1),_r;case 1:return _r=Oa(_r.type,!0),_r;default:return""}}function Qa(_r){if(_r==null)return null;if(typeof _r=="function")return _r.displayName||_r.name||null;if(typeof _r=="string")return _r;switch(_r){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _r=="object")switch(_r.$$typeof){case Ca:return(_r.displayName||"Context")+".Consumer";case Ba:return(_r._context.displayName||"Context")+".Provider";case Da:var Tr=_r.render;return _r=_r.displayName,_r||(_r=Tr.displayName||Tr.name||"",_r=_r!==""?"ForwardRef("+_r+")":"ForwardRef"),_r;case Ga:return Tr=_r.displayName||null,Tr!==null?Tr:Qa(_r.type)||"Memo";case Ha:Tr=_r._payload,_r=_r._init;try{return Qa(_r(Tr))}catch{}}return null}function Ra(_r){var Tr=_r.type;switch(_r.tag){case 24:return"Cache";case 9:return(Tr.displayName||"Context")+".Consumer";case 10:return(Tr._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _r=Tr.render,_r=_r.displayName||_r.name||"",Tr.displayName||(_r!==""?"ForwardRef("+_r+")":"ForwardRef");case 7:return"Fragment";case 5:return Tr;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(Tr);case 8:return Tr===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof Tr=="function")return Tr.displayName||Tr.name||null;if(typeof Tr=="string")return Tr}return null}function Sa(_r){switch(typeof _r){case"boolean":case"number":case"string":case"undefined":return _r;case"object":return _r;default:return""}}function Ta(_r){var Tr=_r.type;return(_r=_r.nodeName)&&_r.toLowerCase()==="input"&&(Tr==="checkbox"||Tr==="radio")}function Ua(_r){var Tr=Ta(_r)?"checked":"value",Rr=Object.getOwnPropertyDescriptor(_r.constructor.prototype,Tr),Ar=""+_r[Tr];if(!_r.hasOwnProperty(Tr)&&typeof Rr<"u"&&typeof Rr.get=="function"&&typeof Rr.set=="function"){var Pr=Rr.get,Lr=Rr.set;return Object.defineProperty(_r,Tr,{configurable:!0,get:function(){return Pr.call(this)},set:function(Mr){Ar=""+Mr,Lr.call(this,Mr)}}),Object.defineProperty(_r,Tr,{enumerable:Rr.enumerable}),{getValue:function(){return Ar},setValue:function(Mr){Ar=""+Mr},stopTracking:function(){_r._valueTracker=null,delete _r[Tr]}}}}function Va(_r){_r._valueTracker||(_r._valueTracker=Ua(_r))}function Wa(_r){if(!_r)return!1;var Tr=_r._valueTracker;if(!Tr)return!0;var Rr=Tr.getValue(),Ar="";return _r&&(Ar=Ta(_r)?_r.checked?"true":"false":_r.value),_r=Ar,_r!==Rr?(Tr.setValue(_r),!0):!1}function Xa(_r){if(_r=_r||(typeof document<"u"?document:void 0),typeof _r>"u")return null;try{return _r.activeElement||_r.body}catch{return _r.body}}function Ya(_r,Tr){var Rr=Tr.checked;return A$3({},Tr,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Rr??_r._wrapperState.initialChecked})}function Za(_r,Tr){var Rr=Tr.defaultValue==null?"":Tr.defaultValue,Ar=Tr.checked!=null?Tr.checked:Tr.defaultChecked;Rr=Sa(Tr.value!=null?Tr.value:Rr),_r._wrapperState={initialChecked:Ar,initialValue:Rr,controlled:Tr.type==="checkbox"||Tr.type==="radio"?Tr.checked!=null:Tr.value!=null}}function ab(_r,Tr){Tr=Tr.checked,Tr!=null&&ta(_r,"checked",Tr,!1)}function bb(_r,Tr){ab(_r,Tr);var Rr=Sa(Tr.value),Ar=Tr.type;if(Rr!=null)Ar==="number"?(Rr===0&&_r.value===""||_r.value!=Rr)&&(_r.value=""+Rr):_r.value!==""+Rr&&(_r.value=""+Rr);else if(Ar==="submit"||Ar==="reset"){_r.removeAttribute("value");return}Tr.hasOwnProperty("value")?cb(_r,Tr.type,Rr):Tr.hasOwnProperty("defaultValue")&&cb(_r,Tr.type,Sa(Tr.defaultValue)),Tr.checked==null&&Tr.defaultChecked!=null&&(_r.defaultChecked=!!Tr.defaultChecked)}function db(_r,Tr,Rr){if(Tr.hasOwnProperty("value")||Tr.hasOwnProperty("defaultValue")){var Ar=Tr.type;if(!(Ar!=="submit"&&Ar!=="reset"||Tr.value!==void 0&&Tr.value!==null))return;Tr=""+_r._wrapperState.initialValue,Rr||Tr===_r.value||(_r.value=Tr),_r.defaultValue=Tr}Rr=_r.name,Rr!==""&&(_r.name=""),_r.defaultChecked=!!_r._wrapperState.initialChecked,Rr!==""&&(_r.name=Rr)}function cb(_r,Tr,Rr){(Tr!=="number"||Xa(_r.ownerDocument)!==_r)&&(Rr==null?_r.defaultValue=""+_r._wrapperState.initialValue:_r.defaultValue!==""+Rr&&(_r.defaultValue=""+Rr))}var eb=Array.isArray;function fb(_r,Tr,Rr,Ar){if(_r=_r.options,Tr){Tr={};for(var Pr=0;Pr<Rr.length;Pr++)Tr["$"+Rr[Pr]]=!0;for(Rr=0;Rr<_r.length;Rr++)Pr=Tr.hasOwnProperty("$"+_r[Rr].value),_r[Rr].selected!==Pr&&(_r[Rr].selected=Pr),Pr&&Ar&&(_r[Rr].defaultSelected=!0)}else{for(Rr=""+Sa(Rr),Tr=null,Pr=0;Pr<_r.length;Pr++){if(_r[Pr].value===Rr){_r[Pr].selected=!0,Ar&&(_r[Pr].defaultSelected=!0);return}Tr!==null||_r[Pr].disabled||(Tr=_r[Pr])}Tr!==null&&(Tr.selected=!0)}}function gb(_r,Tr){if(Tr.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$3({},Tr,{value:void 0,defaultValue:void 0,children:""+_r._wrapperState.initialValue})}function hb(_r,Tr){var Rr=Tr.value;if(Rr==null){if(Rr=Tr.children,Tr=Tr.defaultValue,Rr!=null){if(Tr!=null)throw Error(p$3(92));if(eb(Rr)){if(1<Rr.length)throw Error(p$3(93));Rr=Rr[0]}Tr=Rr}Tr==null&&(Tr=""),Rr=Tr}_r._wrapperState={initialValue:Sa(Rr)}}function ib(_r,Tr){var Rr=Sa(Tr.value),Ar=Sa(Tr.defaultValue);Rr!=null&&(Rr=""+Rr,Rr!==_r.value&&(_r.value=Rr),Tr.defaultValue==null&&_r.defaultValue!==Rr&&(_r.defaultValue=Rr)),Ar!=null&&(_r.defaultValue=""+Ar)}function jb(_r){var Tr=_r.textContent;Tr===_r._wrapperState.initialValue&&Tr!==""&&Tr!==null&&(_r.value=Tr)}function kb(_r){switch(_r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_r,Tr){return _r==null||_r==="http://www.w3.org/1999/xhtml"?kb(Tr):_r==="http://www.w3.org/2000/svg"&&Tr==="foreignObject"?"http://www.w3.org/1999/xhtml":_r}var mb,nb=function(_r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(Tr,Rr,Ar,Pr){MSApp.execUnsafeLocalFunction(function(){return _r(Tr,Rr,Ar,Pr)})}:_r}(function(_r,Tr){if(_r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _r)_r.innerHTML=Tr;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+Tr.valueOf().toString()+"</svg>",Tr=mb.firstChild;_r.firstChild;)_r.removeChild(_r.firstChild);for(;Tr.firstChild;)_r.appendChild(Tr.firstChild)}});function ob(_r,Tr){if(Tr){var Rr=_r.firstChild;if(Rr&&Rr===_r.lastChild&&Rr.nodeType===3){Rr.nodeValue=Tr;return}}_r.textContent=Tr}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_r){qb.forEach(function(Tr){Tr=Tr+_r.charAt(0).toUpperCase()+_r.substring(1),pb[Tr]=pb[_r]})});function rb(_r,Tr,Rr){return Tr==null||typeof Tr=="boolean"||Tr===""?"":Rr||typeof Tr!="number"||Tr===0||pb.hasOwnProperty(_r)&&pb[_r]?(""+Tr).trim():Tr+"px"}function sb(_r,Tr){_r=_r.style;for(var Rr in Tr)if(Tr.hasOwnProperty(Rr)){var Ar=Rr.indexOf("--")===0,Pr=rb(Rr,Tr[Rr],Ar);Rr==="float"&&(Rr="cssFloat"),Ar?_r.setProperty(Rr,Pr):_r[Rr]=Pr}}var tb=A$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_r,Tr){if(Tr){if(tb[_r]&&(Tr.children!=null||Tr.dangerouslySetInnerHTML!=null))throw Error(p$3(137,_r));if(Tr.dangerouslySetInnerHTML!=null){if(Tr.children!=null)throw Error(p$3(60));if(typeof Tr.dangerouslySetInnerHTML!="object"||!("__html"in Tr.dangerouslySetInnerHTML))throw Error(p$3(61))}if(Tr.style!=null&&typeof Tr.style!="object")throw Error(p$3(62))}}function vb(_r,Tr){if(_r.indexOf("-")===-1)return typeof Tr.is=="string";switch(_r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_r){return _r=_r.target||_r.srcElement||window,_r.correspondingUseElement&&(_r=_r.correspondingUseElement),_r.nodeType===3?_r.parentNode:_r}var yb=null,zb=null,Ab=null;function Bb(_r){if(_r=Cb(_r)){if(typeof yb!="function")throw Error(p$3(280));var Tr=_r.stateNode;Tr&&(Tr=Db(Tr),yb(_r.stateNode,_r.type,Tr))}}function Eb(_r){zb?Ab?Ab.push(_r):Ab=[_r]:zb=_r}function Fb(){if(zb){var _r=zb,Tr=Ab;if(Ab=zb=null,Bb(_r),Tr)for(_r=0;_r<Tr.length;_r++)Bb(Tr[_r])}}function Gb(_r,Tr){return _r(Tr)}function Hb(){}var Ib=!1;function Jb(_r,Tr,Rr){if(Ib)return _r(Tr,Rr);Ib=!0;try{return Gb(_r,Tr,Rr)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_r,Tr){var Rr=_r.stateNode;if(Rr===null)return null;var Ar=Db(Rr);if(Ar===null)return null;Rr=Ar[Tr];e:switch(Tr){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Ar=!Ar.disabled)||(_r=_r.type,Ar=!(_r==="button"||_r==="input"||_r==="select"||_r==="textarea")),_r=!Ar;break e;default:_r=!1}if(_r)return null;if(Rr&&typeof Rr!="function")throw Error(p$3(231,Tr,typeof Rr));return Rr}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_r,Tr,Rr,Ar,Pr,Lr,Mr,Fr,zr){var Ur=Array.prototype.slice.call(arguments,3);try{Tr.apply(Rr,Ur)}catch(Vr){this.onError(Vr)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_r){Ob=!0,Pb=_r}};function Tb(_r,Tr,Rr,Ar,Pr,Lr,Mr,Fr,zr){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_r,Tr,Rr,Ar,Pr,Lr,Mr,Fr,zr){if(Tb.apply(this,arguments),Ob){if(Ob){var Ur=Pb;Ob=!1,Pb=null}else throw Error(p$3(198));Qb||(Qb=!0,Rb=Ur)}}function Vb(_r){var Tr=_r,Rr=_r;if(_r.alternate)for(;Tr.return;)Tr=Tr.return;else{_r=Tr;do Tr=_r,Tr.flags&4098&&(Rr=Tr.return),_r=Tr.return;while(_r)}return Tr.tag===3?Rr:null}function Wb(_r){if(_r.tag===13){var Tr=_r.memoizedState;if(Tr===null&&(_r=_r.alternate,_r!==null&&(Tr=_r.memoizedState)),Tr!==null)return Tr.dehydrated}return null}function Xb(_r){if(Vb(_r)!==_r)throw Error(p$3(188))}function Yb(_r){var Tr=_r.alternate;if(!Tr){if(Tr=Vb(_r),Tr===null)throw Error(p$3(188));return Tr!==_r?null:_r}for(var Rr=_r,Ar=Tr;;){var Pr=Rr.return;if(Pr===null)break;var Lr=Pr.alternate;if(Lr===null){if(Ar=Pr.return,Ar!==null){Rr=Ar;continue}break}if(Pr.child===Lr.child){for(Lr=Pr.child;Lr;){if(Lr===Rr)return Xb(Pr),_r;if(Lr===Ar)return Xb(Pr),Tr;Lr=Lr.sibling}throw Error(p$3(188))}if(Rr.return!==Ar.return)Rr=Pr,Ar=Lr;else{for(var Mr=!1,Fr=Pr.child;Fr;){if(Fr===Rr){Mr=!0,Rr=Pr,Ar=Lr;break}if(Fr===Ar){Mr=!0,Ar=Pr,Rr=Lr;break}Fr=Fr.sibling}if(!Mr){for(Fr=Lr.child;Fr;){if(Fr===Rr){Mr=!0,Rr=Lr,Ar=Pr;break}if(Fr===Ar){Mr=!0,Ar=Lr,Rr=Pr;break}Fr=Fr.sibling}if(!Mr)throw Error(p$3(189))}}if(Rr.alternate!==Ar)throw Error(p$3(190))}if(Rr.tag!==3)throw Error(p$3(188));return Rr.stateNode.current===Rr?_r:Tr}function Zb(_r){return _r=Yb(_r),_r!==null?$b(_r):null}function $b(_r){if(_r.tag===5||_r.tag===6)return _r;for(_r=_r.child;_r!==null;){var Tr=$b(_r);if(Tr!==null)return Tr;_r=_r.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$3=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_r){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_r,void 0,(_r.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_r){return _r>>>=0,_r===0?32:31-(pc(_r)/qc|0)|0}var rc=64,sc=4194304;function tc(_r){switch(_r&-_r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _r}}function uc(_r,Tr){var Rr=_r.pendingLanes;if(Rr===0)return 0;var Ar=0,Pr=_r.suspendedLanes,Lr=_r.pingedLanes,Mr=Rr&268435455;if(Mr!==0){var Fr=Mr&~Pr;Fr!==0?Ar=tc(Fr):(Lr&=Mr,Lr!==0&&(Ar=tc(Lr)))}else Mr=Rr&~Pr,Mr!==0?Ar=tc(Mr):Lr!==0&&(Ar=tc(Lr));if(Ar===0)return 0;if(Tr!==0&&Tr!==Ar&&!(Tr&Pr)&&(Pr=Ar&-Ar,Lr=Tr&-Tr,Pr>=Lr||Pr===16&&(Lr&4194240)!==0))return Tr;if(Ar&4&&(Ar|=Rr&16),Tr=_r.entangledLanes,Tr!==0)for(_r=_r.entanglements,Tr&=Ar;0<Tr;)Rr=31-oc(Tr),Pr=1<<Rr,Ar|=_r[Rr],Tr&=~Pr;return Ar}function vc(_r,Tr){switch(_r){case 1:case 2:case 4:return Tr+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Tr+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_r,Tr){for(var Rr=_r.suspendedLanes,Ar=_r.pingedLanes,Pr=_r.expirationTimes,Lr=_r.pendingLanes;0<Lr;){var Mr=31-oc(Lr),Fr=1<<Mr,zr=Pr[Mr];zr===-1?(!(Fr&Rr)||Fr&Ar)&&(Pr[Mr]=vc(Fr,Tr)):zr<=Tr&&(_r.expiredLanes|=Fr),Lr&=~Fr}}function xc(_r){return _r=_r.pendingLanes&-1073741825,_r!==0?_r:_r&1073741824?1073741824:0}function yc(){var _r=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_r}function zc(_r){for(var Tr=[],Rr=0;31>Rr;Rr++)Tr.push(_r);return Tr}function Ac(_r,Tr,Rr){_r.pendingLanes|=Tr,Tr!==536870912&&(_r.suspendedLanes=0,_r.pingedLanes=0),_r=_r.eventTimes,Tr=31-oc(Tr),_r[Tr]=Rr}function Bc(_r,Tr){var Rr=_r.pendingLanes&~Tr;_r.pendingLanes=Tr,_r.suspendedLanes=0,_r.pingedLanes=0,_r.expiredLanes&=Tr,_r.mutableReadLanes&=Tr,_r.entangledLanes&=Tr,Tr=_r.entanglements;var Ar=_r.eventTimes;for(_r=_r.expirationTimes;0<Rr;){var Pr=31-oc(Rr),Lr=1<<Pr;Tr[Pr]=0,Ar[Pr]=-1,_r[Pr]=-1,Rr&=~Lr}}function Cc(_r,Tr){var Rr=_r.entangledLanes|=Tr;for(_r=_r.entanglements;Rr;){var Ar=31-oc(Rr),Pr=1<<Ar;Pr&Tr|_r[Ar]&Tr&&(_r[Ar]|=Tr),Rr&=~Pr}}var C$2=0;function Dc(_r){return _r&=-_r,1<_r?4<_r?_r&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_r,Tr){switch(_r){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(Tr.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(Tr.pointerId)}}function Tc(_r,Tr,Rr,Ar,Pr,Lr){return _r===null||_r.nativeEvent!==Lr?(_r={blockedOn:Tr,domEventName:Rr,eventSystemFlags:Ar,nativeEvent:Lr,targetContainers:[Pr]},Tr!==null&&(Tr=Cb(Tr),Tr!==null&&Fc(Tr)),_r):(_r.eventSystemFlags|=Ar,Tr=_r.targetContainers,Pr!==null&&Tr.indexOf(Pr)===-1&&Tr.push(Pr),_r)}function Uc(_r,Tr,Rr,Ar,Pr){switch(Tr){case"focusin":return Lc=Tc(Lc,_r,Tr,Rr,Ar,Pr),!0;case"dragenter":return Mc=Tc(Mc,_r,Tr,Rr,Ar,Pr),!0;case"mouseover":return Nc=Tc(Nc,_r,Tr,Rr,Ar,Pr),!0;case"pointerover":var Lr=Pr.pointerId;return Oc.set(Lr,Tc(Oc.get(Lr)||null,_r,Tr,Rr,Ar,Pr)),!0;case"gotpointercapture":return Lr=Pr.pointerId,Pc.set(Lr,Tc(Pc.get(Lr)||null,_r,Tr,Rr,Ar,Pr)),!0}return!1}function Vc(_r){var Tr=Wc(_r.target);if(Tr!==null){var Rr=Vb(Tr);if(Rr!==null){if(Tr=Rr.tag,Tr===13){if(Tr=Wb(Rr),Tr!==null){_r.blockedOn=Tr,Ic(_r.priority,function(){Gc(Rr)});return}}else if(Tr===3&&Rr.stateNode.current.memoizedState.isDehydrated){_r.blockedOn=Rr.tag===3?Rr.stateNode.containerInfo:null;return}}}_r.blockedOn=null}function Xc(_r){if(_r.blockedOn!==null)return!1;for(var Tr=_r.targetContainers;0<Tr.length;){var Rr=Yc(_r.domEventName,_r.eventSystemFlags,Tr[0],_r.nativeEvent);if(Rr===null){Rr=_r.nativeEvent;var Ar=new Rr.constructor(Rr.type,Rr);wb=Ar,Rr.target.dispatchEvent(Ar),wb=null}else return Tr=Cb(Rr),Tr!==null&&Fc(Tr),_r.blockedOn=Rr,!1;Tr.shift()}return!0}function Zc(_r,Tr,Rr){Xc(_r)&&Rr.delete(Tr)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_r,Tr){_r.blockedOn===Tr&&(_r.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_r){function Tr(Pr){return ad(Pr,_r)}if(0<Kc.length){ad(Kc[0],_r);for(var Rr=1;Rr<Kc.length;Rr++){var Ar=Kc[Rr];Ar.blockedOn===_r&&(Ar.blockedOn=null)}}for(Lc!==null&&ad(Lc,_r),Mc!==null&&ad(Mc,_r),Nc!==null&&ad(Nc,_r),Oc.forEach(Tr),Pc.forEach(Tr),Rr=0;Rr<Qc.length;Rr++)Ar=Qc[Rr],Ar.blockedOn===_r&&(Ar.blockedOn=null);for(;0<Qc.length&&(Rr=Qc[0],Rr.blockedOn===null);)Vc(Rr),Rr.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(_r,Tr,Rr,Ar){var Pr=C$2,Lr=cd.transition;cd.transition=null;try{C$2=1,fd(_r,Tr,Rr,Ar)}finally{C$2=Pr,cd.transition=Lr}}function gd(_r,Tr,Rr,Ar){var Pr=C$2,Lr=cd.transition;cd.transition=null;try{C$2=4,fd(_r,Tr,Rr,Ar)}finally{C$2=Pr,cd.transition=Lr}}function fd(_r,Tr,Rr,Ar){if(dd){var Pr=Yc(_r,Tr,Rr,Ar);if(Pr===null)hd(_r,Tr,Ar,id,Rr),Sc(_r,Ar);else if(Uc(Pr,_r,Tr,Rr,Ar))Ar.stopPropagation();else if(Sc(_r,Ar),Tr&4&&-1<Rc.indexOf(_r)){for(;Pr!==null;){var Lr=Cb(Pr);if(Lr!==null&&Ec(Lr),Lr=Yc(_r,Tr,Rr,Ar),Lr===null&&hd(_r,Tr,Ar,id,Rr),Lr===Pr)break;Pr=Lr}Pr!==null&&Ar.stopPropagation()}else hd(_r,Tr,Ar,null,Rr)}}var id=null;function Yc(_r,Tr,Rr,Ar){if(id=null,_r=xb(Ar),_r=Wc(_r),_r!==null)if(Tr=Vb(_r),Tr===null)_r=null;else if(Rr=Tr.tag,Rr===13){if(_r=Wb(Tr),_r!==null)return _r;_r=null}else if(Rr===3){if(Tr.stateNode.current.memoizedState.isDehydrated)return Tr.tag===3?Tr.stateNode.containerInfo:null;_r=null}else Tr!==_r&&(_r=null);return id=_r,null}function jd(_r){switch(_r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _r,Tr=ld,Rr=Tr.length,Ar,Pr="value"in kd?kd.value:kd.textContent,Lr=Pr.length;for(_r=0;_r<Rr&&Tr[_r]===Pr[_r];_r++);var Mr=Rr-_r;for(Ar=1;Ar<=Mr&&Tr[Rr-Ar]===Pr[Lr-Ar];Ar++);return md=Pr.slice(_r,1<Ar?1-Ar:void 0)}function od(_r){var Tr=_r.keyCode;return"charCode"in _r?(_r=_r.charCode,_r===0&&Tr===13&&(_r=13)):_r=Tr,_r===10&&(_r=13),32<=_r||_r===13?_r:0}function pd(){return!0}function qd(){return!1}function rd(_r){function Tr(Rr,Ar,Pr,Lr,Mr){this._reactName=Rr,this._targetInst=Pr,this.type=Ar,this.nativeEvent=Lr,this.target=Mr,this.currentTarget=null;for(var Fr in _r)_r.hasOwnProperty(Fr)&&(Rr=_r[Fr],this[Fr]=Rr?Rr(Lr):Lr[Fr]);return this.isDefaultPrevented=(Lr.defaultPrevented!=null?Lr.defaultPrevented:Lr.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$3(Tr.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Rr=this.nativeEvent;Rr&&(Rr.preventDefault?Rr.preventDefault():typeof Rr.returnValue!="unknown"&&(Rr.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var Rr=this.nativeEvent;Rr&&(Rr.stopPropagation?Rr.stopPropagation():typeof Rr.cancelBubble!="unknown"&&(Rr.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),Tr}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_r){return _r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$3({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$3({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_r){return _r.relatedTarget===void 0?_r.fromElement===_r.srcElement?_r.toElement:_r.fromElement:_r.relatedTarget},movementX:function(_r){return"movementX"in _r?_r.movementX:(_r!==yd&&(yd&&_r.type==="mousemove"?(wd=_r.screenX-yd.screenX,xd=_r.screenY-yd.screenY):xd=wd=0,yd=_r),wd)},movementY:function(_r){return"movementY"in _r?_r.movementY:xd}}),Bd=rd(Ad),Cd=A$3({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$3({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$3({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$3({},sd,{clipboardData:function(_r){return"clipboardData"in _r?_r.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$3({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_r){var Tr=this.nativeEvent;return Tr.getModifierState?Tr.getModifierState(_r):(_r=Od[_r])?!!Tr[_r]:!1}function zd(){return Pd}var Qd=A$3({},ud,{key:function(_r){if(_r.key){var Tr=Md[_r.key]||_r.key;if(Tr!=="Unidentified")return Tr}return _r.type==="keypress"?(_r=od(_r),_r===13?"Enter":String.fromCharCode(_r)):_r.type==="keydown"||_r.type==="keyup"?Nd[_r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_r){return _r.type==="keypress"?od(_r):0},keyCode:function(_r){return _r.type==="keydown"||_r.type==="keyup"?_r.keyCode:0},which:function(_r){return _r.type==="keypress"?od(_r):_r.type==="keydown"||_r.type==="keyup"?_r.keyCode:0}}),Rd=rd(Qd),Sd=A$3({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$3({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$3({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$3({},Ad,{deltaX:function(_r){return"deltaX"in _r?_r.deltaX:"wheelDeltaX"in _r?-_r.wheelDeltaX:0},deltaY:function(_r){return"deltaY"in _r?_r.deltaY:"wheelDeltaY"in _r?-_r.wheelDeltaY:"wheelDelta"in _r?-_r.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$2=null;ia&&"documentMode"in document&&(be$2=document.documentMode);var ce$2=ia&&"TextEvent"in window&&!be$2,de$1=ia&&(!ae$2||be$2&&8<be$2&&11>=be$2),ee$3=String.fromCharCode(32),fe$2=!1;function ge$2(_r,Tr){switch(_r){case"keyup":return $d.indexOf(Tr.keyCode)!==-1;case"keydown":return Tr.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(_r){return _r=_r.detail,typeof _r=="object"&&"data"in _r?_r.data:null}var ie$2=!1;function je$1(_r,Tr){switch(_r){case"compositionend":return he$2(Tr);case"keypress":return Tr.which!==32?null:(fe$2=!0,ee$3);case"textInput":return _r=Tr.data,_r===ee$3&&fe$2?null:_r;default:return null}}function ke$2(_r,Tr){if(ie$2)return _r==="compositionend"||!ae$2&&ge$2(_r,Tr)?(_r=nd(),md=ld=kd=null,ie$2=!1,_r):null;switch(_r){case"paste":return null;case"keypress":if(!(Tr.ctrlKey||Tr.altKey||Tr.metaKey)||Tr.ctrlKey&&Tr.altKey){if(Tr.char&&1<Tr.char.length)return Tr.char;if(Tr.which)return String.fromCharCode(Tr.which)}return null;case"compositionend":return de$1&&Tr.locale!=="ko"?null:Tr.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(_r){var Tr=_r&&_r.nodeName&&_r.nodeName.toLowerCase();return Tr==="input"?!!le$2[_r.type]:Tr==="textarea"}function ne$2(_r,Tr,Rr,Ar){Eb(Ar),Tr=oe$2(Tr,"onChange"),0<Tr.length&&(Rr=new td("onChange","change",null,Rr,Ar),_r.push({event:Rr,listeners:Tr}))}var pe$2=null,qe$1=null;function re$3(_r){se$2(_r,0)}function te$3(_r){var Tr=ue$1(_r);if(Wa(Tr))return _r}function ve$2(_r,Tr){if(_r==="change")return Tr}var we$2=!1;if(ia){var xe$2;if(ia){var ye$2="oninput"in document;if(!ye$2){var ze$2=document.createElement("div");ze$2.setAttribute("oninput","return;"),ye$2=typeof ze$2.oninput=="function"}xe$2=ye$2}else xe$2=!1;we$2=xe$2&&(!document.documentMode||9<document.documentMode)}function Ae$2(){pe$2&&(pe$2.detachEvent("onpropertychange",Be$2),qe$1=pe$2=null)}function Be$2(_r){if(_r.propertyName==="value"&&te$3(qe$1)){var Tr=[];ne$2(Tr,qe$1,_r,xb(_r)),Jb(re$3,Tr)}}function Ce$2(_r,Tr,Rr){_r==="focusin"?(Ae$2(),pe$2=Tr,qe$1=Rr,pe$2.attachEvent("onpropertychange",Be$2)):_r==="focusout"&&Ae$2()}function De$1(_r){if(_r==="selectionchange"||_r==="keyup"||_r==="keydown")return te$3(qe$1)}function Ee$2(_r,Tr){if(_r==="click")return te$3(Tr)}function Fe$2(_r,Tr){if(_r==="input"||_r==="change")return te$3(Tr)}function Ge$1(_r,Tr){return _r===Tr&&(_r!==0||1/_r===1/Tr)||_r!==_r&&Tr!==Tr}var He$2=typeof Object.is=="function"?Object.is:Ge$1;function Ie$2(_r,Tr){if(He$2(_r,Tr))return!0;if(typeof _r!="object"||_r===null||typeof Tr!="object"||Tr===null)return!1;var Rr=Object.keys(_r),Ar=Object.keys(Tr);if(Rr.length!==Ar.length)return!1;for(Ar=0;Ar<Rr.length;Ar++){var Pr=Rr[Ar];if(!ja.call(Tr,Pr)||!He$2(_r[Pr],Tr[Pr]))return!1}return!0}function Je$2(_r){for(;_r&&_r.firstChild;)_r=_r.firstChild;return _r}function Ke$1(_r,Tr){var Rr=Je$2(_r);_r=0;for(var Ar;Rr;){if(Rr.nodeType===3){if(Ar=_r+Rr.textContent.length,_r<=Tr&&Ar>=Tr)return{node:Rr,offset:Tr-_r};_r=Ar}e:{for(;Rr;){if(Rr.nextSibling){Rr=Rr.nextSibling;break e}Rr=Rr.parentNode}Rr=void 0}Rr=Je$2(Rr)}}function Le$2(_r,Tr){return _r&&Tr?_r===Tr?!0:_r&&_r.nodeType===3?!1:Tr&&Tr.nodeType===3?Le$2(_r,Tr.parentNode):"contains"in _r?_r.contains(Tr):_r.compareDocumentPosition?!!(_r.compareDocumentPosition(Tr)&16):!1:!1}function Me$2(){for(var _r=window,Tr=Xa();Tr instanceof _r.HTMLIFrameElement;){try{var Rr=typeof Tr.contentWindow.location.href=="string"}catch{Rr=!1}if(Rr)_r=Tr.contentWindow;else break;Tr=Xa(_r.document)}return Tr}function Ne$1(_r){var Tr=_r&&_r.nodeName&&_r.nodeName.toLowerCase();return Tr&&(Tr==="input"&&(_r.type==="text"||_r.type==="search"||_r.type==="tel"||_r.type==="url"||_r.type==="password")||Tr==="textarea"||_r.contentEditable==="true")}function Oe$1(_r){var Tr=Me$2(),Rr=_r.focusedElem,Ar=_r.selectionRange;if(Tr!==Rr&&Rr&&Rr.ownerDocument&&Le$2(Rr.ownerDocument.documentElement,Rr)){if(Ar!==null&&Ne$1(Rr)){if(Tr=Ar.start,_r=Ar.end,_r===void 0&&(_r=Tr),"selectionStart"in Rr)Rr.selectionStart=Tr,Rr.selectionEnd=Math.min(_r,Rr.value.length);else if(_r=(Tr=Rr.ownerDocument||document)&&Tr.defaultView||window,_r.getSelection){_r=_r.getSelection();var Pr=Rr.textContent.length,Lr=Math.min(Ar.start,Pr);Ar=Ar.end===void 0?Lr:Math.min(Ar.end,Pr),!_r.extend&&Lr>Ar&&(Pr=Ar,Ar=Lr,Lr=Pr),Pr=Ke$1(Rr,Lr);var Mr=Ke$1(Rr,Ar);Pr&&Mr&&(_r.rangeCount!==1||_r.anchorNode!==Pr.node||_r.anchorOffset!==Pr.offset||_r.focusNode!==Mr.node||_r.focusOffset!==Mr.offset)&&(Tr=Tr.createRange(),Tr.setStart(Pr.node,Pr.offset),_r.removeAllRanges(),Lr>Ar?(_r.addRange(Tr),_r.extend(Mr.node,Mr.offset)):(Tr.setEnd(Mr.node,Mr.offset),_r.addRange(Tr)))}}for(Tr=[],_r=Rr;_r=_r.parentNode;)_r.nodeType===1&&Tr.push({element:_r,left:_r.scrollLeft,top:_r.scrollTop});for(typeof Rr.focus=="function"&&Rr.focus(),Rr=0;Rr<Tr.length;Rr++)_r=Tr[Rr],_r.element.scrollLeft=_r.left,_r.element.scrollTop=_r.top}}var Pe$2=ia&&"documentMode"in document&&11>=document.documentMode,Qe$2=null,Re$2=null,Se$2=null,Te$2=!1;function Ue$1(_r,Tr,Rr){var Ar=Rr.window===Rr?Rr.document:Rr.nodeType===9?Rr:Rr.ownerDocument;Te$2||Qe$2==null||Qe$2!==Xa(Ar)||(Ar=Qe$2,"selectionStart"in Ar&&Ne$1(Ar)?Ar={start:Ar.selectionStart,end:Ar.selectionEnd}:(Ar=(Ar.ownerDocument&&Ar.ownerDocument.defaultView||window).getSelection(),Ar={anchorNode:Ar.anchorNode,anchorOffset:Ar.anchorOffset,focusNode:Ar.focusNode,focusOffset:Ar.focusOffset}),Se$2&&Ie$2(Se$2,Ar)||(Se$2=Ar,Ar=oe$2(Re$2,"onSelect"),0<Ar.length&&(Tr=new td("onSelect","select",null,Tr,Rr),_r.push({event:Tr,listeners:Ar}),Tr.target=Qe$2)))}function Ve$2(_r,Tr){var Rr={};return Rr[_r.toLowerCase()]=Tr.toLowerCase(),Rr["Webkit"+_r]="webkit"+Tr,Rr["Moz"+_r]="moz"+Tr,Rr}var We$1={animationend:Ve$2("Animation","AnimationEnd"),animationiteration:Ve$2("Animation","AnimationIteration"),animationstart:Ve$2("Animation","AnimationStart"),transitionend:Ve$2("Transition","TransitionEnd")},Xe$1={},Ye$2={};ia&&(Ye$2=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(_r){if(Xe$1[_r])return Xe$1[_r];if(!We$1[_r])return _r;var Tr=We$1[_r],Rr;for(Rr in Tr)if(Tr.hasOwnProperty(Rr)&&Rr in Ye$2)return Xe$1[_r]=Tr[Rr];return _r}var $e$2=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_r,Tr){df.set(_r,Tr),fa(Tr,[_r])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$2,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_r,Tr,Rr){var Ar=_r.type||"unknown-event";_r.currentTarget=Rr,Ub(Ar,Tr,void 0,_r),_r.currentTarget=null}function se$2(_r,Tr){Tr=(Tr&4)!==0;for(var Rr=0;Rr<_r.length;Rr++){var Ar=_r[Rr],Pr=Ar.event;Ar=Ar.listeners;e:{var Lr=void 0;if(Tr)for(var Mr=Ar.length-1;0<=Mr;Mr--){var Fr=Ar[Mr],zr=Fr.instance,Ur=Fr.currentTarget;if(Fr=Fr.listener,zr!==Lr&&Pr.isPropagationStopped())break e;nf(Pr,Fr,Ur),Lr=zr}else for(Mr=0;Mr<Ar.length;Mr++){if(Fr=Ar[Mr],zr=Fr.instance,Ur=Fr.currentTarget,Fr=Fr.listener,zr!==Lr&&Pr.isPropagationStopped())break e;nf(Pr,Fr,Ur),Lr=zr}}}if(Qb)throw _r=Rb,Qb=!1,Rb=null,_r}function D$3(_r,Tr){var Rr=Tr[of];Rr===void 0&&(Rr=Tr[of]=new Set);var Ar=_r+"__bubble";Rr.has(Ar)||(pf(Tr,_r,2,!1),Rr.add(Ar))}function qf(_r,Tr,Rr){var Ar=0;Tr&&(Ar|=4),pf(Rr,_r,Ar,Tr)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_r){if(!_r[rf]){_r[rf]=!0,da.forEach(function(Rr){Rr!=="selectionchange"&&(mf.has(Rr)||qf(Rr,!1,_r),qf(Rr,!0,_r))});var Tr=_r.nodeType===9?_r:_r.ownerDocument;Tr===null||Tr[rf]||(Tr[rf]=!0,qf("selectionchange",!1,Tr))}}function pf(_r,Tr,Rr,Ar){switch(jd(Tr)){case 1:var Pr=ed;break;case 4:Pr=gd;break;default:Pr=fd}Rr=Pr.bind(null,Tr,Rr,_r),Pr=void 0,!Lb||Tr!=="touchstart"&&Tr!=="touchmove"&&Tr!=="wheel"||(Pr=!0),Ar?Pr!==void 0?_r.addEventListener(Tr,Rr,{capture:!0,passive:Pr}):_r.addEventListener(Tr,Rr,!0):Pr!==void 0?_r.addEventListener(Tr,Rr,{passive:Pr}):_r.addEventListener(Tr,Rr,!1)}function hd(_r,Tr,Rr,Ar,Pr){var Lr=Ar;if(!(Tr&1)&&!(Tr&2)&&Ar!==null)e:for(;;){if(Ar===null)return;var Mr=Ar.tag;if(Mr===3||Mr===4){var Fr=Ar.stateNode.containerInfo;if(Fr===Pr||Fr.nodeType===8&&Fr.parentNode===Pr)break;if(Mr===4)for(Mr=Ar.return;Mr!==null;){var zr=Mr.tag;if((zr===3||zr===4)&&(zr=Mr.stateNode.containerInfo,zr===Pr||zr.nodeType===8&&zr.parentNode===Pr))return;Mr=Mr.return}for(;Fr!==null;){if(Mr=Wc(Fr),Mr===null)return;if(zr=Mr.tag,zr===5||zr===6){Ar=Lr=Mr;continue e}Fr=Fr.parentNode}}Ar=Ar.return}Jb(function(){var Ur=Lr,Vr=xb(Rr),Nr=[];e:{var Dr=df.get(_r);if(Dr!==void 0){var jr=td,Gr=_r;switch(_r){case"keypress":if(od(Rr)===0)break e;case"keydown":case"keyup":jr=Rd;break;case"focusin":Gr="focus",jr=Fd;break;case"focusout":Gr="blur",jr=Fd;break;case"beforeblur":case"afterblur":jr=Fd;break;case"click":if(Rr.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jr=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jr=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jr=Vd;break;case $e$2:case af:case bf:jr=Hd;break;case cf:jr=Xd;break;case"scroll":jr=vd;break;case"wheel":jr=Zd;break;case"copy":case"cut":case"paste":jr=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jr=Td}var Wr=(Tr&4)!==0,qr=!Wr&&_r==="scroll",Kr=Wr?Dr!==null?Dr+"Capture":null:Dr;Wr=[];for(var Xr=Ur,Zr;Xr!==null;){Zr=Xr;var Jr=Zr.stateNode;if(Zr.tag===5&&Jr!==null&&(Zr=Jr,Kr!==null&&(Jr=Kb(Xr,Kr),Jr!=null&&Wr.push(tf(Xr,Jr,Zr)))),qr)break;Xr=Xr.return}0<Wr.length&&(Dr=new jr(Dr,Gr,null,Rr,Vr),Nr.push({event:Dr,listeners:Wr}))}}if(!(Tr&7)){e:{if(Dr=_r==="mouseover"||_r==="pointerover",jr=_r==="mouseout"||_r==="pointerout",Dr&&Rr!==wb&&(Gr=Rr.relatedTarget||Rr.fromElement)&&(Wc(Gr)||Gr[uf]))break e;if((jr||Dr)&&(Dr=Vr.window===Vr?Vr:(Dr=Vr.ownerDocument)?Dr.defaultView||Dr.parentWindow:window,jr?(Gr=Rr.relatedTarget||Rr.toElement,jr=Ur,Gr=Gr?Wc(Gr):null,Gr!==null&&(qr=Vb(Gr),Gr!==qr||Gr.tag!==5&&Gr.tag!==6)&&(Gr=null)):(jr=null,Gr=Ur),jr!==Gr)){if(Wr=Bd,Jr="onMouseLeave",Kr="onMouseEnter",Xr="mouse",(_r==="pointerout"||_r==="pointerover")&&(Wr=Td,Jr="onPointerLeave",Kr="onPointerEnter",Xr="pointer"),qr=jr==null?Dr:ue$1(jr),Zr=Gr==null?Dr:ue$1(Gr),Dr=new Wr(Jr,Xr+"leave",jr,Rr,Vr),Dr.target=qr,Dr.relatedTarget=Zr,Jr=null,Wc(Vr)===Ur&&(Wr=new Wr(Kr,Xr+"enter",Gr,Rr,Vr),Wr.target=Zr,Wr.relatedTarget=qr,Jr=Wr),qr=Jr,jr&&Gr)t:{for(Wr=jr,Kr=Gr,Xr=0,Zr=Wr;Zr;Zr=vf(Zr))Xr++;for(Zr=0,Jr=Kr;Jr;Jr=vf(Jr))Zr++;for(;0<Xr-Zr;)Wr=vf(Wr),Xr--;for(;0<Zr-Xr;)Kr=vf(Kr),Zr--;for(;Xr--;){if(Wr===Kr||Kr!==null&&Wr===Kr.alternate)break t;Wr=vf(Wr),Kr=vf(Kr)}Wr=null}else Wr=null;jr!==null&&wf(Nr,Dr,jr,Wr,!1),Gr!==null&&qr!==null&&wf(Nr,qr,Gr,Wr,!0)}}e:{if(Dr=Ur?ue$1(Ur):window,jr=Dr.nodeName&&Dr.nodeName.toLowerCase(),jr==="select"||jr==="input"&&Dr.type==="file")var _i=ve$2;else if(me$1(Dr))if(we$2)_i=Fe$2;else{_i=De$1;var es=Ce$2}else(jr=Dr.nodeName)&&jr.toLowerCase()==="input"&&(Dr.type==="checkbox"||Dr.type==="radio")&&(_i=Ee$2);if(_i&&(_i=_i(_r,Ur))){ne$2(Nr,_i,Rr,Vr);break e}es&&es(_r,Dr,Ur),_r==="focusout"&&(es=Dr._wrapperState)&&es.controlled&&Dr.type==="number"&&cb(Dr,"number",Dr.value)}switch(es=Ur?ue$1(Ur):window,_r){case"focusin":(me$1(es)||es.contentEditable==="true")&&(Qe$2=es,Re$2=Ur,Se$2=null);break;case"focusout":Se$2=Re$2=Qe$2=null;break;case"mousedown":Te$2=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$2=!1,Ue$1(Nr,Rr,Vr);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$1(Nr,Rr,Vr)}var ts;if(ae$2)e:{switch(_r){case"compositionstart":var rs="onCompositionStart";break e;case"compositionend":rs="onCompositionEnd";break e;case"compositionupdate":rs="onCompositionUpdate";break e}rs=void 0}else ie$2?ge$2(_r,Rr)&&(rs="onCompositionEnd"):_r==="keydown"&&Rr.keyCode===229&&(rs="onCompositionStart");rs&&(de$1&&Rr.locale!=="ko"&&(ie$2||rs!=="onCompositionStart"?rs==="onCompositionEnd"&&ie$2&&(ts=nd()):(kd=Vr,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),es=oe$2(Ur,rs),0<es.length&&(rs=new Ld(rs,_r,null,Rr,Vr),Nr.push({event:rs,listeners:es}),ts?rs.data=ts:(ts=he$2(Rr),ts!==null&&(rs.data=ts)))),(ts=ce$2?je$1(_r,Rr):ke$2(_r,Rr))&&(Ur=oe$2(Ur,"onBeforeInput"),0<Ur.length&&(Vr=new Ld("onBeforeInput","beforeinput",null,Rr,Vr),Nr.push({event:Vr,listeners:Ur}),Vr.data=ts))}se$2(Nr,Tr)})}function tf(_r,Tr,Rr){return{instance:_r,listener:Tr,currentTarget:Rr}}function oe$2(_r,Tr){for(var Rr=Tr+"Capture",Ar=[];_r!==null;){var Pr=_r,Lr=Pr.stateNode;Pr.tag===5&&Lr!==null&&(Pr=Lr,Lr=Kb(_r,Rr),Lr!=null&&Ar.unshift(tf(_r,Lr,Pr)),Lr=Kb(_r,Tr),Lr!=null&&Ar.push(tf(_r,Lr,Pr))),_r=_r.return}return Ar}function vf(_r){if(_r===null)return null;do _r=_r.return;while(_r&&_r.tag!==5);return _r||null}function wf(_r,Tr,Rr,Ar,Pr){for(var Lr=Tr._reactName,Mr=[];Rr!==null&&Rr!==Ar;){var Fr=Rr,zr=Fr.alternate,Ur=Fr.stateNode;if(zr!==null&&zr===Ar)break;Fr.tag===5&&Ur!==null&&(Fr=Ur,Pr?(zr=Kb(Rr,Lr),zr!=null&&Mr.unshift(tf(Rr,zr,Fr))):Pr||(zr=Kb(Rr,Lr),zr!=null&&Mr.push(tf(Rr,zr,Fr)))),Rr=Rr.return}Mr.length!==0&&_r.push({event:Tr,listeners:Mr})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_r){return(typeof _r=="string"?_r:""+_r).replace(xf,`
`).replace(yf,"")}function Af(_r,Tr,Rr){if(Tr=zf(Tr),zf(_r)!==Tr&&Rr)throw Error(p$3(425))}function Bf(){}var Cf=null,Df=null;function Ef(_r,Tr){return _r==="textarea"||_r==="noscript"||typeof Tr.children=="string"||typeof Tr.children=="number"||typeof Tr.dangerouslySetInnerHTML=="object"&&Tr.dangerouslySetInnerHTML!==null&&Tr.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_r){return Hf.resolve(null).then(_r).catch(If)}:Ff;function If(_r){setTimeout(function(){throw _r})}function Kf(_r,Tr){var Rr=Tr,Ar=0;do{var Pr=Rr.nextSibling;if(_r.removeChild(Rr),Pr&&Pr.nodeType===8)if(Rr=Pr.data,Rr==="/$"){if(Ar===0){_r.removeChild(Pr),bd(Tr);return}Ar--}else Rr!=="$"&&Rr!=="$?"&&Rr!=="$!"||Ar++;Rr=Pr}while(Rr);bd(Tr)}function Lf(_r){for(;_r!=null;_r=_r.nextSibling){var Tr=_r.nodeType;if(Tr===1||Tr===3)break;if(Tr===8){if(Tr=_r.data,Tr==="$"||Tr==="$!"||Tr==="$?")break;if(Tr==="/$")return null}}return _r}function Mf(_r){_r=_r.previousSibling;for(var Tr=0;_r;){if(_r.nodeType===8){var Rr=_r.data;if(Rr==="$"||Rr==="$!"||Rr==="$?"){if(Tr===0)return _r;Tr--}else Rr==="/$"&&Tr++}_r=_r.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_r){var Tr=_r[Of];if(Tr)return Tr;for(var Rr=_r.parentNode;Rr;){if(Tr=Rr[uf]||Rr[Of]){if(Rr=Tr.alternate,Tr.child!==null||Rr!==null&&Rr.child!==null)for(_r=Mf(_r);_r!==null;){if(Rr=_r[Of])return Rr;_r=Mf(_r)}return Tr}_r=Rr,Rr=_r.parentNode}return null}function Cb(_r){return _r=_r[Of]||_r[uf],!_r||_r.tag!==5&&_r.tag!==6&&_r.tag!==13&&_r.tag!==3?null:_r}function ue$1(_r){if(_r.tag===5||_r.tag===6)return _r.stateNode;throw Error(p$3(33))}function Db(_r){return _r[Pf]||null}var Sf=[],Tf=-1;function Uf(_r){return{current:_r}}function E$3(_r){0>Tf||(_r.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$4(_r,Tr){Tf++,Sf[Tf]=_r.current,_r.current=Tr}var Vf={},H$3=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_r,Tr){var Rr=_r.type.contextTypes;if(!Rr)return Vf;var Ar=_r.stateNode;if(Ar&&Ar.__reactInternalMemoizedUnmaskedChildContext===Tr)return Ar.__reactInternalMemoizedMaskedChildContext;var Pr={},Lr;for(Lr in Rr)Pr[Lr]=Tr[Lr];return Ar&&(_r=_r.stateNode,_r.__reactInternalMemoizedUnmaskedChildContext=Tr,_r.__reactInternalMemoizedMaskedChildContext=Pr),Pr}function Zf(_r){return _r=_r.childContextTypes,_r!=null}function $f(){E$3(Wf),E$3(H$3)}function ag(_r,Tr,Rr){if(H$3.current!==Vf)throw Error(p$3(168));G$4(H$3,Tr),G$4(Wf,Rr)}function bg(_r,Tr,Rr){var Ar=_r.stateNode;if(Tr=Tr.childContextTypes,typeof Ar.getChildContext!="function")return Rr;Ar=Ar.getChildContext();for(var Pr in Ar)if(!(Pr in Tr))throw Error(p$3(108,Ra(_r)||"Unknown",Pr));return A$3({},Rr,Ar)}function cg(_r){return _r=(_r=_r.stateNode)&&_r.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$3.current,G$4(H$3,_r),G$4(Wf,Wf.current),!0}function dg(_r,Tr,Rr){var Ar=_r.stateNode;if(!Ar)throw Error(p$3(169));Rr?(_r=bg(_r,Tr,Xf),Ar.__reactInternalMemoizedMergedChildContext=_r,E$3(Wf),E$3(H$3),G$4(H$3,_r)):E$3(Wf),G$4(Wf,Rr)}var eg=null,fg=!1,gg=!1;function hg(_r){eg===null?eg=[_r]:eg.push(_r)}function ig(_r){fg=!0,hg(_r)}function jg(){if(!gg&&eg!==null){gg=!0;var _r=0,Tr=C$2;try{var Rr=eg;for(C$2=1;_r<Rr.length;_r++){var Ar=Rr[_r];do Ar=Ar(!0);while(Ar!==null)}eg=null,fg=!1}catch(Pr){throw eg!==null&&(eg=eg.slice(_r+1)),ac(fc,jg),Pr}finally{C$2=Tr,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_r,Tr){kg[lg++]=ng,kg[lg++]=mg,mg=_r,ng=Tr}function ug(_r,Tr,Rr){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_r;var Ar=rg;_r=sg;var Pr=32-oc(Ar)-1;Ar&=~(1<<Pr),Rr+=1;var Lr=32-oc(Tr)+Pr;if(30<Lr){var Mr=Pr-Pr%5;Lr=(Ar&(1<<Mr)-1).toString(32),Ar>>=Mr,Pr-=Mr,rg=1<<32-oc(Tr)+Pr|Rr<<Pr|Ar,sg=Lr+_r}else rg=1<<Lr|Rr<<Pr|Ar,sg=_r}function vg(_r){_r.return!==null&&(tg(_r,1),ug(_r,1,0))}function wg(_r){for(;_r===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_r===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$3=!1,zg=null;function Ag(_r,Tr){var Rr=Bg(5,null,null,0);Rr.elementType="DELETED",Rr.stateNode=Tr,Rr.return=_r,Tr=_r.deletions,Tr===null?(_r.deletions=[Rr],_r.flags|=16):Tr.push(Rr)}function Cg(_r,Tr){switch(_r.tag){case 5:var Rr=_r.type;return Tr=Tr.nodeType!==1||Rr.toLowerCase()!==Tr.nodeName.toLowerCase()?null:Tr,Tr!==null?(_r.stateNode=Tr,xg=_r,yg=Lf(Tr.firstChild),!0):!1;case 6:return Tr=_r.pendingProps===""||Tr.nodeType!==3?null:Tr,Tr!==null?(_r.stateNode=Tr,xg=_r,yg=null,!0):!1;case 13:return Tr=Tr.nodeType!==8?null:Tr,Tr!==null?(Rr=qg!==null?{id:rg,overflow:sg}:null,_r.memoizedState={dehydrated:Tr,treeContext:Rr,retryLane:1073741824},Rr=Bg(18,null,null,0),Rr.stateNode=Tr,Rr.return=_r,_r.child=Rr,xg=_r,yg=null,!0):!1;default:return!1}}function Dg(_r){return(_r.mode&1)!==0&&(_r.flags&128)===0}function Eg(_r){if(I$3){var Tr=yg;if(Tr){var Rr=Tr;if(!Cg(_r,Tr)){if(Dg(_r))throw Error(p$3(418));Tr=Lf(Rr.nextSibling);var Ar=xg;Tr&&Cg(_r,Tr)?Ag(Ar,Rr):(_r.flags=_r.flags&-4097|2,I$3=!1,xg=_r)}}else{if(Dg(_r))throw Error(p$3(418));_r.flags=_r.flags&-4097|2,I$3=!1,xg=_r}}}function Fg(_r){for(_r=_r.return;_r!==null&&_r.tag!==5&&_r.tag!==3&&_r.tag!==13;)_r=_r.return;xg=_r}function Gg(_r){if(_r!==xg)return!1;if(!I$3)return Fg(_r),I$3=!0,!1;var Tr;if((Tr=_r.tag!==3)&&!(Tr=_r.tag!==5)&&(Tr=_r.type,Tr=Tr!=="head"&&Tr!=="body"&&!Ef(_r.type,_r.memoizedProps)),Tr&&(Tr=yg)){if(Dg(_r))throw Hg(),Error(p$3(418));for(;Tr;)Ag(_r,Tr),Tr=Lf(Tr.nextSibling)}if(Fg(_r),_r.tag===13){if(_r=_r.memoizedState,_r=_r!==null?_r.dehydrated:null,!_r)throw Error(p$3(317));e:{for(_r=_r.nextSibling,Tr=0;_r;){if(_r.nodeType===8){var Rr=_r.data;if(Rr==="/$"){if(Tr===0){yg=Lf(_r.nextSibling);break e}Tr--}else Rr!=="$"&&Rr!=="$!"&&Rr!=="$?"||Tr++}_r=_r.nextSibling}yg=null}}else yg=xg?Lf(_r.stateNode.nextSibling):null;return!0}function Hg(){for(var _r=yg;_r;)_r=Lf(_r.nextSibling)}function Ig(){yg=xg=null,I$3=!1}function Jg(_r){zg===null?zg=[_r]:zg.push(_r)}var Kg=ua.ReactCurrentBatchConfig;function Lg(_r,Tr){if(_r&&_r.defaultProps){Tr=A$3({},Tr),_r=_r.defaultProps;for(var Rr in _r)Tr[Rr]===void 0&&(Tr[Rr]=_r[Rr]);return Tr}return Tr}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(_r){var Tr=Mg.current;E$3(Mg),_r._currentValue=Tr}function Sg(_r,Tr,Rr){for(;_r!==null;){var Ar=_r.alternate;if((_r.childLanes&Tr)!==Tr?(_r.childLanes|=Tr,Ar!==null&&(Ar.childLanes|=Tr)):Ar!==null&&(Ar.childLanes&Tr)!==Tr&&(Ar.childLanes|=Tr),_r===Rr)break;_r=_r.return}}function Tg(_r,Tr){Ng=_r,Pg=Og=null,_r=_r.dependencies,_r!==null&&_r.firstContext!==null&&(_r.lanes&Tr&&(Ug=!0),_r.firstContext=null)}function Vg(_r){var Tr=_r._currentValue;if(Pg!==_r)if(_r={context:_r,memoizedValue:Tr,next:null},Og===null){if(Ng===null)throw Error(p$3(308));Og=_r,Ng.dependencies={lanes:0,firstContext:_r}}else Og=Og.next=_r;return Tr}var Wg=null;function Xg(_r){Wg===null?Wg=[_r]:Wg.push(_r)}function Yg(_r,Tr,Rr,Ar){var Pr=Tr.interleaved;return Pr===null?(Rr.next=Rr,Xg(Tr)):(Rr.next=Pr.next,Pr.next=Rr),Tr.interleaved=Rr,Zg(_r,Ar)}function Zg(_r,Tr){_r.lanes|=Tr;var Rr=_r.alternate;for(Rr!==null&&(Rr.lanes|=Tr),Rr=_r,_r=_r.return;_r!==null;)_r.childLanes|=Tr,Rr=_r.alternate,Rr!==null&&(Rr.childLanes|=Tr),Rr=_r,_r=_r.return;return Rr.tag===3?Rr.stateNode:null}var $g=!1;function ah(_r){_r.updateQueue={baseState:_r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(_r,Tr){_r=_r.updateQueue,Tr.updateQueue===_r&&(Tr.updateQueue={baseState:_r.baseState,firstBaseUpdate:_r.firstBaseUpdate,lastBaseUpdate:_r.lastBaseUpdate,shared:_r.shared,effects:_r.effects})}function ch(_r,Tr){return{eventTime:_r,lane:Tr,tag:0,payload:null,callback:null,next:null}}function dh(_r,Tr,Rr){var Ar=_r.updateQueue;if(Ar===null)return null;if(Ar=Ar.shared,K$4&2){var Pr=Ar.pending;return Pr===null?Tr.next=Tr:(Tr.next=Pr.next,Pr.next=Tr),Ar.pending=Tr,Zg(_r,Rr)}return Pr=Ar.interleaved,Pr===null?(Tr.next=Tr,Xg(Ar)):(Tr.next=Pr.next,Pr.next=Tr),Ar.interleaved=Tr,Zg(_r,Rr)}function eh(_r,Tr,Rr){if(Tr=Tr.updateQueue,Tr!==null&&(Tr=Tr.shared,(Rr&4194240)!==0)){var Ar=Tr.lanes;Ar&=_r.pendingLanes,Rr|=Ar,Tr.lanes=Rr,Cc(_r,Rr)}}function fh(_r,Tr){var Rr=_r.updateQueue,Ar=_r.alternate;if(Ar!==null&&(Ar=Ar.updateQueue,Rr===Ar)){var Pr=null,Lr=null;if(Rr=Rr.firstBaseUpdate,Rr!==null){do{var Mr={eventTime:Rr.eventTime,lane:Rr.lane,tag:Rr.tag,payload:Rr.payload,callback:Rr.callback,next:null};Lr===null?Pr=Lr=Mr:Lr=Lr.next=Mr,Rr=Rr.next}while(Rr!==null);Lr===null?Pr=Lr=Tr:Lr=Lr.next=Tr}else Pr=Lr=Tr;Rr={baseState:Ar.baseState,firstBaseUpdate:Pr,lastBaseUpdate:Lr,shared:Ar.shared,effects:Ar.effects},_r.updateQueue=Rr;return}_r=Rr.lastBaseUpdate,_r===null?Rr.firstBaseUpdate=Tr:_r.next=Tr,Rr.lastBaseUpdate=Tr}function gh(_r,Tr,Rr,Ar){var Pr=_r.updateQueue;$g=!1;var Lr=Pr.firstBaseUpdate,Mr=Pr.lastBaseUpdate,Fr=Pr.shared.pending;if(Fr!==null){Pr.shared.pending=null;var zr=Fr,Ur=zr.next;zr.next=null,Mr===null?Lr=Ur:Mr.next=Ur,Mr=zr;var Vr=_r.alternate;Vr!==null&&(Vr=Vr.updateQueue,Fr=Vr.lastBaseUpdate,Fr!==Mr&&(Fr===null?Vr.firstBaseUpdate=Ur:Fr.next=Ur,Vr.lastBaseUpdate=zr))}if(Lr!==null){var Nr=Pr.baseState;Mr=0,Vr=Ur=zr=null,Fr=Lr;do{var Dr=Fr.lane,jr=Fr.eventTime;if((Ar&Dr)===Dr){Vr!==null&&(Vr=Vr.next={eventTime:jr,lane:0,tag:Fr.tag,payload:Fr.payload,callback:Fr.callback,next:null});e:{var Gr=_r,Wr=Fr;switch(Dr=Tr,jr=Rr,Wr.tag){case 1:if(Gr=Wr.payload,typeof Gr=="function"){Nr=Gr.call(jr,Nr,Dr);break e}Nr=Gr;break e;case 3:Gr.flags=Gr.flags&-65537|128;case 0:if(Gr=Wr.payload,Dr=typeof Gr=="function"?Gr.call(jr,Nr,Dr):Gr,Dr==null)break e;Nr=A$3({},Nr,Dr);break e;case 2:$g=!0}}Fr.callback!==null&&Fr.lane!==0&&(_r.flags|=64,Dr=Pr.effects,Dr===null?Pr.effects=[Fr]:Dr.push(Fr))}else jr={eventTime:jr,lane:Dr,tag:Fr.tag,payload:Fr.payload,callback:Fr.callback,next:null},Vr===null?(Ur=Vr=jr,zr=Nr):Vr=Vr.next=jr,Mr|=Dr;if(Fr=Fr.next,Fr===null){if(Fr=Pr.shared.pending,Fr===null)break;Dr=Fr,Fr=Dr.next,Dr.next=null,Pr.lastBaseUpdate=Dr,Pr.shared.pending=null}}while(1);if(Vr===null&&(zr=Nr),Pr.baseState=zr,Pr.firstBaseUpdate=Ur,Pr.lastBaseUpdate=Vr,Tr=Pr.shared.interleaved,Tr!==null){Pr=Tr;do Mr|=Pr.lane,Pr=Pr.next;while(Pr!==Tr)}else Lr===null&&(Pr.shared.lanes=0);hh|=Mr,_r.lanes=Mr,_r.memoizedState=Nr}}function ih(_r,Tr,Rr){if(_r=Tr.effects,Tr.effects=null,_r!==null)for(Tr=0;Tr<_r.length;Tr++){var Ar=_r[Tr],Pr=Ar.callback;if(Pr!==null){if(Ar.callback=null,Ar=Rr,typeof Pr!="function")throw Error(p$3(191,Pr));Pr.call(Ar)}}}var jh=new aa.Component().refs;function kh(_r,Tr,Rr,Ar){Tr=_r.memoizedState,Rr=Rr(Ar,Tr),Rr=Rr==null?Tr:A$3({},Tr,Rr),_r.memoizedState=Rr,_r.lanes===0&&(_r.updateQueue.baseState=Rr)}var nh={isMounted:function(_r){return(_r=_r._reactInternals)?Vb(_r)===_r:!1},enqueueSetState:function(_r,Tr,Rr){_r=_r._reactInternals;var Ar=L$2(),Pr=lh(_r),Lr=ch(Ar,Pr);Lr.payload=Tr,Rr!=null&&(Lr.callback=Rr),Tr=dh(_r,Lr,Pr),Tr!==null&&(mh(Tr,_r,Pr,Ar),eh(Tr,_r,Pr))},enqueueReplaceState:function(_r,Tr,Rr){_r=_r._reactInternals;var Ar=L$2(),Pr=lh(_r),Lr=ch(Ar,Pr);Lr.tag=1,Lr.payload=Tr,Rr!=null&&(Lr.callback=Rr),Tr=dh(_r,Lr,Pr),Tr!==null&&(mh(Tr,_r,Pr,Ar),eh(Tr,_r,Pr))},enqueueForceUpdate:function(_r,Tr){_r=_r._reactInternals;var Rr=L$2(),Ar=lh(_r),Pr=ch(Rr,Ar);Pr.tag=2,Tr!=null&&(Pr.callback=Tr),Tr=dh(_r,Pr,Ar),Tr!==null&&(mh(Tr,_r,Ar,Rr),eh(Tr,_r,Ar))}};function oh(_r,Tr,Rr,Ar,Pr,Lr,Mr){return _r=_r.stateNode,typeof _r.shouldComponentUpdate=="function"?_r.shouldComponentUpdate(Ar,Lr,Mr):Tr.prototype&&Tr.prototype.isPureReactComponent?!Ie$2(Rr,Ar)||!Ie$2(Pr,Lr):!0}function ph(_r,Tr,Rr){var Ar=!1,Pr=Vf,Lr=Tr.contextType;return typeof Lr=="object"&&Lr!==null?Lr=Vg(Lr):(Pr=Zf(Tr)?Xf:H$3.current,Ar=Tr.contextTypes,Lr=(Ar=Ar!=null)?Yf(_r,Pr):Vf),Tr=new Tr(Rr,Lr),_r.memoizedState=Tr.state!==null&&Tr.state!==void 0?Tr.state:null,Tr.updater=nh,_r.stateNode=Tr,Tr._reactInternals=_r,Ar&&(_r=_r.stateNode,_r.__reactInternalMemoizedUnmaskedChildContext=Pr,_r.__reactInternalMemoizedMaskedChildContext=Lr),Tr}function qh(_r,Tr,Rr,Ar){_r=Tr.state,typeof Tr.componentWillReceiveProps=="function"&&Tr.componentWillReceiveProps(Rr,Ar),typeof Tr.UNSAFE_componentWillReceiveProps=="function"&&Tr.UNSAFE_componentWillReceiveProps(Rr,Ar),Tr.state!==_r&&nh.enqueueReplaceState(Tr,Tr.state,null)}function rh(_r,Tr,Rr,Ar){var Pr=_r.stateNode;Pr.props=Rr,Pr.state=_r.memoizedState,Pr.refs=jh,ah(_r);var Lr=Tr.contextType;typeof Lr=="object"&&Lr!==null?Pr.context=Vg(Lr):(Lr=Zf(Tr)?Xf:H$3.current,Pr.context=Yf(_r,Lr)),Pr.state=_r.memoizedState,Lr=Tr.getDerivedStateFromProps,typeof Lr=="function"&&(kh(_r,Tr,Lr,Rr),Pr.state=_r.memoizedState),typeof Tr.getDerivedStateFromProps=="function"||typeof Pr.getSnapshotBeforeUpdate=="function"||typeof Pr.UNSAFE_componentWillMount!="function"&&typeof Pr.componentWillMount!="function"||(Tr=Pr.state,typeof Pr.componentWillMount=="function"&&Pr.componentWillMount(),typeof Pr.UNSAFE_componentWillMount=="function"&&Pr.UNSAFE_componentWillMount(),Tr!==Pr.state&&nh.enqueueReplaceState(Pr,Pr.state,null),gh(_r,Rr,Pr,Ar),Pr.state=_r.memoizedState),typeof Pr.componentDidMount=="function"&&(_r.flags|=4194308)}function sh(_r,Tr,Rr){if(_r=Rr.ref,_r!==null&&typeof _r!="function"&&typeof _r!="object"){if(Rr._owner){if(Rr=Rr._owner,Rr){if(Rr.tag!==1)throw Error(p$3(309));var Ar=Rr.stateNode}if(!Ar)throw Error(p$3(147,_r));var Pr=Ar,Lr=""+_r;return Tr!==null&&Tr.ref!==null&&typeof Tr.ref=="function"&&Tr.ref._stringRef===Lr?Tr.ref:(Tr=function(Mr){var Fr=Pr.refs;Fr===jh&&(Fr=Pr.refs={}),Mr===null?delete Fr[Lr]:Fr[Lr]=Mr},Tr._stringRef=Lr,Tr)}if(typeof _r!="string")throw Error(p$3(284));if(!Rr._owner)throw Error(p$3(290,_r))}return _r}function th(_r,Tr){throw _r=Object.prototype.toString.call(Tr),Error(p$3(31,_r==="[object Object]"?"object with keys {"+Object.keys(Tr).join(", ")+"}":_r))}function uh(_r){var Tr=_r._init;return Tr(_r._payload)}function vh(_r){function Tr(Kr,Xr){if(_r){var Zr=Kr.deletions;Zr===null?(Kr.deletions=[Xr],Kr.flags|=16):Zr.push(Xr)}}function Rr(Kr,Xr){if(!_r)return null;for(;Xr!==null;)Tr(Kr,Xr),Xr=Xr.sibling;return null}function Ar(Kr,Xr){for(Kr=new Map;Xr!==null;)Xr.key!==null?Kr.set(Xr.key,Xr):Kr.set(Xr.index,Xr),Xr=Xr.sibling;return Kr}function Pr(Kr,Xr){return Kr=wh(Kr,Xr),Kr.index=0,Kr.sibling=null,Kr}function Lr(Kr,Xr,Zr){return Kr.index=Zr,_r?(Zr=Kr.alternate,Zr!==null?(Zr=Zr.index,Zr<Xr?(Kr.flags|=2,Xr):Zr):(Kr.flags|=2,Xr)):(Kr.flags|=1048576,Xr)}function Mr(Kr){return _r&&Kr.alternate===null&&(Kr.flags|=2),Kr}function Fr(Kr,Xr,Zr,Jr){return Xr===null||Xr.tag!==6?(Xr=xh(Zr,Kr.mode,Jr),Xr.return=Kr,Xr):(Xr=Pr(Xr,Zr),Xr.return=Kr,Xr)}function zr(Kr,Xr,Zr,Jr){var _i=Zr.type;return _i===ya?Vr(Kr,Xr,Zr.props.children,Jr,Zr.key):Xr!==null&&(Xr.elementType===_i||typeof _i=="object"&&_i!==null&&_i.$$typeof===Ha&&uh(_i)===Xr.type)?(Jr=Pr(Xr,Zr.props),Jr.ref=sh(Kr,Xr,Zr),Jr.return=Kr,Jr):(Jr=yh(Zr.type,Zr.key,Zr.props,null,Kr.mode,Jr),Jr.ref=sh(Kr,Xr,Zr),Jr.return=Kr,Jr)}function Ur(Kr,Xr,Zr,Jr){return Xr===null||Xr.tag!==4||Xr.stateNode.containerInfo!==Zr.containerInfo||Xr.stateNode.implementation!==Zr.implementation?(Xr=zh(Zr,Kr.mode,Jr),Xr.return=Kr,Xr):(Xr=Pr(Xr,Zr.children||[]),Xr.return=Kr,Xr)}function Vr(Kr,Xr,Zr,Jr,_i){return Xr===null||Xr.tag!==7?(Xr=Ah(Zr,Kr.mode,Jr,_i),Xr.return=Kr,Xr):(Xr=Pr(Xr,Zr),Xr.return=Kr,Xr)}function Nr(Kr,Xr,Zr){if(typeof Xr=="string"&&Xr!==""||typeof Xr=="number")return Xr=xh(""+Xr,Kr.mode,Zr),Xr.return=Kr,Xr;if(typeof Xr=="object"&&Xr!==null){switch(Xr.$$typeof){case va:return Zr=yh(Xr.type,Xr.key,Xr.props,null,Kr.mode,Zr),Zr.ref=sh(Kr,null,Xr),Zr.return=Kr,Zr;case wa:return Xr=zh(Xr,Kr.mode,Zr),Xr.return=Kr,Xr;case Ha:var Jr=Xr._init;return Nr(Kr,Jr(Xr._payload),Zr)}if(eb(Xr)||Ka(Xr))return Xr=Ah(Xr,Kr.mode,Zr,null),Xr.return=Kr,Xr;th(Kr,Xr)}return null}function Dr(Kr,Xr,Zr,Jr){var _i=Xr!==null?Xr.key:null;if(typeof Zr=="string"&&Zr!==""||typeof Zr=="number")return _i!==null?null:Fr(Kr,Xr,""+Zr,Jr);if(typeof Zr=="object"&&Zr!==null){switch(Zr.$$typeof){case va:return Zr.key===_i?zr(Kr,Xr,Zr,Jr):null;case wa:return Zr.key===_i?Ur(Kr,Xr,Zr,Jr):null;case Ha:return _i=Zr._init,Dr(Kr,Xr,_i(Zr._payload),Jr)}if(eb(Zr)||Ka(Zr))return _i!==null?null:Vr(Kr,Xr,Zr,Jr,null);th(Kr,Zr)}return null}function jr(Kr,Xr,Zr,Jr,_i){if(typeof Jr=="string"&&Jr!==""||typeof Jr=="number")return Kr=Kr.get(Zr)||null,Fr(Xr,Kr,""+Jr,_i);if(typeof Jr=="object"&&Jr!==null){switch(Jr.$$typeof){case va:return Kr=Kr.get(Jr.key===null?Zr:Jr.key)||null,zr(Xr,Kr,Jr,_i);case wa:return Kr=Kr.get(Jr.key===null?Zr:Jr.key)||null,Ur(Xr,Kr,Jr,_i);case Ha:var es=Jr._init;return jr(Kr,Xr,Zr,es(Jr._payload),_i)}if(eb(Jr)||Ka(Jr))return Kr=Kr.get(Zr)||null,Vr(Xr,Kr,Jr,_i,null);th(Xr,Jr)}return null}function Gr(Kr,Xr,Zr,Jr){for(var _i=null,es=null,ts=Xr,rs=Xr=0,ns=null;ts!==null&&rs<Zr.length;rs++){ts.index>rs?(ns=ts,ts=null):ns=ts.sibling;var as=Dr(Kr,ts,Zr[rs],Jr);if(as===null){ts===null&&(ts=ns);break}_r&&ts&&as.alternate===null&&Tr(Kr,ts),Xr=Lr(as,Xr,rs),es===null?_i=as:es.sibling=as,es=as,ts=ns}if(rs===Zr.length)return Rr(Kr,ts),I$3&&tg(Kr,rs),_i;if(ts===null){for(;rs<Zr.length;rs++)ts=Nr(Kr,Zr[rs],Jr),ts!==null&&(Xr=Lr(ts,Xr,rs),es===null?_i=ts:es.sibling=ts,es=ts);return I$3&&tg(Kr,rs),_i}for(ts=Ar(Kr,ts);rs<Zr.length;rs++)ns=jr(ts,Kr,rs,Zr[rs],Jr),ns!==null&&(_r&&ns.alternate!==null&&ts.delete(ns.key===null?rs:ns.key),Xr=Lr(ns,Xr,rs),es===null?_i=ns:es.sibling=ns,es=ns);return _r&&ts.forEach(function(ls){return Tr(Kr,ls)}),I$3&&tg(Kr,rs),_i}function Wr(Kr,Xr,Zr,Jr){var _i=Ka(Zr);if(typeof _i!="function")throw Error(p$3(150));if(Zr=_i.call(Zr),Zr==null)throw Error(p$3(151));for(var es=_i=null,ts=Xr,rs=Xr=0,ns=null,as=Zr.next();ts!==null&&!as.done;rs++,as=Zr.next()){ts.index>rs?(ns=ts,ts=null):ns=ts.sibling;var ls=Dr(Kr,ts,as.value,Jr);if(ls===null){ts===null&&(ts=ns);break}_r&&ts&&ls.alternate===null&&Tr(Kr,ts),Xr=Lr(ls,Xr,rs),es===null?_i=ls:es.sibling=ls,es=ls,ts=ns}if(as.done)return Rr(Kr,ts),I$3&&tg(Kr,rs),_i;if(ts===null){for(;!as.done;rs++,as=Zr.next())as=Nr(Kr,as.value,Jr),as!==null&&(Xr=Lr(as,Xr,rs),es===null?_i=as:es.sibling=as,es=as);return I$3&&tg(Kr,rs),_i}for(ts=Ar(Kr,ts);!as.done;rs++,as=Zr.next())as=jr(ts,Kr,rs,as.value,Jr),as!==null&&(_r&&as.alternate!==null&&ts.delete(as.key===null?rs:as.key),Xr=Lr(as,Xr,rs),es===null?_i=as:es.sibling=as,es=as);return _r&&ts.forEach(function(us){return Tr(Kr,us)}),I$3&&tg(Kr,rs),_i}function qr(Kr,Xr,Zr,Jr){if(typeof Zr=="object"&&Zr!==null&&Zr.type===ya&&Zr.key===null&&(Zr=Zr.props.children),typeof Zr=="object"&&Zr!==null){switch(Zr.$$typeof){case va:e:{for(var _i=Zr.key,es=Xr;es!==null;){if(es.key===_i){if(_i=Zr.type,_i===ya){if(es.tag===7){Rr(Kr,es.sibling),Xr=Pr(es,Zr.props.children),Xr.return=Kr,Kr=Xr;break e}}else if(es.elementType===_i||typeof _i=="object"&&_i!==null&&_i.$$typeof===Ha&&uh(_i)===es.type){Rr(Kr,es.sibling),Xr=Pr(es,Zr.props),Xr.ref=sh(Kr,es,Zr),Xr.return=Kr,Kr=Xr;break e}Rr(Kr,es);break}else Tr(Kr,es);es=es.sibling}Zr.type===ya?(Xr=Ah(Zr.props.children,Kr.mode,Jr,Zr.key),Xr.return=Kr,Kr=Xr):(Jr=yh(Zr.type,Zr.key,Zr.props,null,Kr.mode,Jr),Jr.ref=sh(Kr,Xr,Zr),Jr.return=Kr,Kr=Jr)}return Mr(Kr);case wa:e:{for(es=Zr.key;Xr!==null;){if(Xr.key===es)if(Xr.tag===4&&Xr.stateNode.containerInfo===Zr.containerInfo&&Xr.stateNode.implementation===Zr.implementation){Rr(Kr,Xr.sibling),Xr=Pr(Xr,Zr.children||[]),Xr.return=Kr,Kr=Xr;break e}else{Rr(Kr,Xr);break}else Tr(Kr,Xr);Xr=Xr.sibling}Xr=zh(Zr,Kr.mode,Jr),Xr.return=Kr,Kr=Xr}return Mr(Kr);case Ha:return es=Zr._init,qr(Kr,Xr,es(Zr._payload),Jr)}if(eb(Zr))return Gr(Kr,Xr,Zr,Jr);if(Ka(Zr))return Wr(Kr,Xr,Zr,Jr);th(Kr,Zr)}return typeof Zr=="string"&&Zr!==""||typeof Zr=="number"?(Zr=""+Zr,Xr!==null&&Xr.tag===6?(Rr(Kr,Xr.sibling),Xr=Pr(Xr,Zr),Xr.return=Kr,Kr=Xr):(Rr(Kr,Xr),Xr=xh(Zr,Kr.mode,Jr),Xr.return=Kr,Kr=Xr),Mr(Kr)):Rr(Kr,Xr)}return qr}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(_r){if(_r===Dh)throw Error(p$3(174));return _r}function Ih(_r,Tr){switch(G$4(Gh,Tr),G$4(Fh,_r),G$4(Eh,Dh),_r=Tr.nodeType,_r){case 9:case 11:Tr=(Tr=Tr.documentElement)?Tr.namespaceURI:lb(null,"");break;default:_r=_r===8?Tr.parentNode:Tr,Tr=_r.namespaceURI||null,_r=_r.tagName,Tr=lb(Tr,_r)}E$3(Eh),G$4(Eh,Tr)}function Jh(){E$3(Eh),E$3(Fh),E$3(Gh)}function Kh(_r){Hh(Gh.current);var Tr=Hh(Eh.current),Rr=lb(Tr,_r.type);Tr!==Rr&&(G$4(Fh,_r),G$4(Eh,Rr))}function Lh(_r){Fh.current===_r&&(E$3(Eh),E$3(Fh))}var M$4=Uf(0);function Mh(_r){for(var Tr=_r;Tr!==null;){if(Tr.tag===13){var Rr=Tr.memoizedState;if(Rr!==null&&(Rr=Rr.dehydrated,Rr===null||Rr.data==="$?"||Rr.data==="$!"))return Tr}else if(Tr.tag===19&&Tr.memoizedProps.revealOrder!==void 0){if(Tr.flags&128)return Tr}else if(Tr.child!==null){Tr.child.return=Tr,Tr=Tr.child;continue}if(Tr===_r)break;for(;Tr.sibling===null;){if(Tr.return===null||Tr.return===_r)return null;Tr=Tr.return}Tr.sibling.return=Tr.return,Tr=Tr.sibling}return null}var Nh=[];function Oh(){for(var _r=0;_r<Nh.length;_r++)Nh[_r]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$4=null,O$3=null,P$4=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$4(){throw Error(p$3(321))}function Wh(_r,Tr){if(Tr===null)return!1;for(var Rr=0;Rr<Tr.length&&Rr<_r.length;Rr++)if(!He$2(_r[Rr],Tr[Rr]))return!1;return!0}function Xh(_r,Tr,Rr,Ar,Pr,Lr){if(Rh=Lr,N$4=Tr,Tr.memoizedState=null,Tr.updateQueue=null,Tr.lanes=0,Ph.current=_r===null||_r.memoizedState===null?Yh:Zh,_r=Rr(Ar,Pr),Th){Lr=0;do{if(Th=!1,Uh=0,25<=Lr)throw Error(p$3(301));Lr+=1,P$4=O$3=null,Tr.updateQueue=null,Ph.current=$h,_r=Rr(Ar,Pr)}while(Th)}if(Ph.current=ai,Tr=O$3!==null&&O$3.next!==null,Rh=0,P$4=O$3=N$4=null,Sh=!1,Tr)throw Error(p$3(300));return _r}function bi(){var _r=Uh!==0;return Uh=0,_r}function ci(){var _r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$4===null?N$4.memoizedState=P$4=_r:P$4=P$4.next=_r,P$4}function di(){if(O$3===null){var _r=N$4.alternate;_r=_r!==null?_r.memoizedState:null}else _r=O$3.next;var Tr=P$4===null?N$4.memoizedState:P$4.next;if(Tr!==null)P$4=Tr,O$3=_r;else{if(_r===null)throw Error(p$3(310));O$3=_r,_r={memoizedState:O$3.memoizedState,baseState:O$3.baseState,baseQueue:O$3.baseQueue,queue:O$3.queue,next:null},P$4===null?N$4.memoizedState=P$4=_r:P$4=P$4.next=_r}return P$4}function ei(_r,Tr){return typeof Tr=="function"?Tr(_r):Tr}function fi(_r){var Tr=di(),Rr=Tr.queue;if(Rr===null)throw Error(p$3(311));Rr.lastRenderedReducer=_r;var Ar=O$3,Pr=Ar.baseQueue,Lr=Rr.pending;if(Lr!==null){if(Pr!==null){var Mr=Pr.next;Pr.next=Lr.next,Lr.next=Mr}Ar.baseQueue=Pr=Lr,Rr.pending=null}if(Pr!==null){Lr=Pr.next,Ar=Ar.baseState;var Fr=Mr=null,zr=null,Ur=Lr;do{var Vr=Ur.lane;if((Rh&Vr)===Vr)zr!==null&&(zr=zr.next={lane:0,action:Ur.action,hasEagerState:Ur.hasEagerState,eagerState:Ur.eagerState,next:null}),Ar=Ur.hasEagerState?Ur.eagerState:_r(Ar,Ur.action);else{var Nr={lane:Vr,action:Ur.action,hasEagerState:Ur.hasEagerState,eagerState:Ur.eagerState,next:null};zr===null?(Fr=zr=Nr,Mr=Ar):zr=zr.next=Nr,N$4.lanes|=Vr,hh|=Vr}Ur=Ur.next}while(Ur!==null&&Ur!==Lr);zr===null?Mr=Ar:zr.next=Fr,He$2(Ar,Tr.memoizedState)||(Ug=!0),Tr.memoizedState=Ar,Tr.baseState=Mr,Tr.baseQueue=zr,Rr.lastRenderedState=Ar}if(_r=Rr.interleaved,_r!==null){Pr=_r;do Lr=Pr.lane,N$4.lanes|=Lr,hh|=Lr,Pr=Pr.next;while(Pr!==_r)}else Pr===null&&(Rr.lanes=0);return[Tr.memoizedState,Rr.dispatch]}function gi(_r){var Tr=di(),Rr=Tr.queue;if(Rr===null)throw Error(p$3(311));Rr.lastRenderedReducer=_r;var Ar=Rr.dispatch,Pr=Rr.pending,Lr=Tr.memoizedState;if(Pr!==null){Rr.pending=null;var Mr=Pr=Pr.next;do Lr=_r(Lr,Mr.action),Mr=Mr.next;while(Mr!==Pr);He$2(Lr,Tr.memoizedState)||(Ug=!0),Tr.memoizedState=Lr,Tr.baseQueue===null&&(Tr.baseState=Lr),Rr.lastRenderedState=Lr}return[Lr,Ar]}function hi(){}function ii(_r,Tr){var Rr=N$4,Ar=di(),Pr=Tr(),Lr=!He$2(Ar.memoizedState,Pr);if(Lr&&(Ar.memoizedState=Pr,Ug=!0),Ar=Ar.queue,ji(ki.bind(null,Rr,Ar,_r),[_r]),Ar.getSnapshot!==Tr||Lr||P$4!==null&&P$4.memoizedState.tag&1){if(Rr.flags|=2048,li(9,mi.bind(null,Rr,Ar,Pr,Tr),void 0,null),R$4===null)throw Error(p$3(349));Rh&30||ni(Rr,Tr,Pr)}return Pr}function ni(_r,Tr,Rr){_r.flags|=16384,_r={getSnapshot:Tr,value:Rr},Tr=N$4.updateQueue,Tr===null?(Tr={lastEffect:null,stores:null},N$4.updateQueue=Tr,Tr.stores=[_r]):(Rr=Tr.stores,Rr===null?Tr.stores=[_r]:Rr.push(_r))}function mi(_r,Tr,Rr,Ar){Tr.value=Rr,Tr.getSnapshot=Ar,oi(Tr)&&pi(_r)}function ki(_r,Tr,Rr){return Rr(function(){oi(Tr)&&pi(_r)})}function oi(_r){var Tr=_r.getSnapshot;_r=_r.value;try{var Rr=Tr();return!He$2(_r,Rr)}catch{return!0}}function pi(_r){var Tr=Zg(_r,1);Tr!==null&&mh(Tr,_r,1,-1)}function qi(_r){var Tr=ci();return typeof _r=="function"&&(_r=_r()),Tr.memoizedState=Tr.baseState=_r,_r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:_r},Tr.queue=_r,_r=_r.dispatch=ri.bind(null,N$4,_r),[Tr.memoizedState,_r]}function li(_r,Tr,Rr,Ar){return _r={tag:_r,create:Tr,destroy:Rr,deps:Ar,next:null},Tr=N$4.updateQueue,Tr===null?(Tr={lastEffect:null,stores:null},N$4.updateQueue=Tr,Tr.lastEffect=_r.next=_r):(Rr=Tr.lastEffect,Rr===null?Tr.lastEffect=_r.next=_r:(Ar=Rr.next,Rr.next=_r,_r.next=Ar,Tr.lastEffect=_r)),_r}function si(){return di().memoizedState}function ti(_r,Tr,Rr,Ar){var Pr=ci();N$4.flags|=_r,Pr.memoizedState=li(1|Tr,Rr,void 0,Ar===void 0?null:Ar)}function ui(_r,Tr,Rr,Ar){var Pr=di();Ar=Ar===void 0?null:Ar;var Lr=void 0;if(O$3!==null){var Mr=O$3.memoizedState;if(Lr=Mr.destroy,Ar!==null&&Wh(Ar,Mr.deps)){Pr.memoizedState=li(Tr,Rr,Lr,Ar);return}}N$4.flags|=_r,Pr.memoizedState=li(1|Tr,Rr,Lr,Ar)}function vi(_r,Tr){return ti(8390656,8,_r,Tr)}function ji(_r,Tr){return ui(2048,8,_r,Tr)}function wi(_r,Tr){return ui(4,2,_r,Tr)}function xi(_r,Tr){return ui(4,4,_r,Tr)}function yi(_r,Tr){if(typeof Tr=="function")return _r=_r(),Tr(_r),function(){Tr(null)};if(Tr!=null)return _r=_r(),Tr.current=_r,function(){Tr.current=null}}function zi(_r,Tr,Rr){return Rr=Rr!=null?Rr.concat([_r]):null,ui(4,4,yi.bind(null,Tr,_r),Rr)}function Ai(){}function Bi(_r,Tr){var Rr=di();Tr=Tr===void 0?null:Tr;var Ar=Rr.memoizedState;return Ar!==null&&Tr!==null&&Wh(Tr,Ar[1])?Ar[0]:(Rr.memoizedState=[_r,Tr],_r)}function Ci(_r,Tr){var Rr=di();Tr=Tr===void 0?null:Tr;var Ar=Rr.memoizedState;return Ar!==null&&Tr!==null&&Wh(Tr,Ar[1])?Ar[0]:(_r=_r(),Rr.memoizedState=[_r,Tr],_r)}function Di(_r,Tr,Rr){return Rh&21?(He$2(Rr,Tr)||(Rr=yc(),N$4.lanes|=Rr,hh|=Rr,_r.baseState=!0),Tr):(_r.baseState&&(_r.baseState=!1,Ug=!0),_r.memoizedState=Rr)}function Ei(_r,Tr){var Rr=C$2;C$2=Rr!==0&&4>Rr?Rr:4,_r(!0);var Ar=Qh.transition;Qh.transition={};try{_r(!1),Tr()}finally{C$2=Rr,Qh.transition=Ar}}function Fi(){return di().memoizedState}function Gi(_r,Tr,Rr){var Ar=lh(_r);if(Rr={lane:Ar,action:Rr,hasEagerState:!1,eagerState:null,next:null},Hi(_r))Ii(Tr,Rr);else if(Rr=Yg(_r,Tr,Rr,Ar),Rr!==null){var Pr=L$2();mh(Rr,_r,Ar,Pr),Ji(Rr,Tr,Ar)}}function ri(_r,Tr,Rr){var Ar=lh(_r),Pr={lane:Ar,action:Rr,hasEagerState:!1,eagerState:null,next:null};if(Hi(_r))Ii(Tr,Pr);else{var Lr=_r.alternate;if(_r.lanes===0&&(Lr===null||Lr.lanes===0)&&(Lr=Tr.lastRenderedReducer,Lr!==null))try{var Mr=Tr.lastRenderedState,Fr=Lr(Mr,Rr);if(Pr.hasEagerState=!0,Pr.eagerState=Fr,He$2(Fr,Mr)){var zr=Tr.interleaved;zr===null?(Pr.next=Pr,Xg(Tr)):(Pr.next=zr.next,zr.next=Pr),Tr.interleaved=Pr;return}}catch{}finally{}Rr=Yg(_r,Tr,Pr,Ar),Rr!==null&&(Pr=L$2(),mh(Rr,_r,Ar,Pr),Ji(Rr,Tr,Ar))}}function Hi(_r){var Tr=_r.alternate;return _r===N$4||Tr!==null&&Tr===N$4}function Ii(_r,Tr){Th=Sh=!0;var Rr=_r.pending;Rr===null?Tr.next=Tr:(Tr.next=Rr.next,Rr.next=Tr),_r.pending=Tr}function Ji(_r,Tr,Rr){if(Rr&4194240){var Ar=Tr.lanes;Ar&=_r.pendingLanes,Rr|=Ar,Tr.lanes=Rr,Cc(_r,Rr)}}var ai={readContext:Vg,useCallback:Q$4,useContext:Q$4,useEffect:Q$4,useImperativeHandle:Q$4,useInsertionEffect:Q$4,useLayoutEffect:Q$4,useMemo:Q$4,useReducer:Q$4,useRef:Q$4,useState:Q$4,useDebugValue:Q$4,useDeferredValue:Q$4,useTransition:Q$4,useMutableSource:Q$4,useSyncExternalStore:Q$4,useId:Q$4,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(_r,Tr){return ci().memoizedState=[_r,Tr===void 0?null:Tr],_r},useContext:Vg,useEffect:vi,useImperativeHandle:function(_r,Tr,Rr){return Rr=Rr!=null?Rr.concat([_r]):null,ti(4194308,4,yi.bind(null,Tr,_r),Rr)},useLayoutEffect:function(_r,Tr){return ti(4194308,4,_r,Tr)},useInsertionEffect:function(_r,Tr){return ti(4,2,_r,Tr)},useMemo:function(_r,Tr){var Rr=ci();return Tr=Tr===void 0?null:Tr,_r=_r(),Rr.memoizedState=[_r,Tr],_r},useReducer:function(_r,Tr,Rr){var Ar=ci();return Tr=Rr!==void 0?Rr(Tr):Tr,Ar.memoizedState=Ar.baseState=Tr,_r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:Tr},Ar.queue=_r,_r=_r.dispatch=Gi.bind(null,N$4,_r),[Ar.memoizedState,_r]},useRef:function(_r){var Tr=ci();return _r={current:_r},Tr.memoizedState=_r},useState:qi,useDebugValue:Ai,useDeferredValue:function(_r){return ci().memoizedState=_r},useTransition:function(){var _r=qi(!1),Tr=_r[0];return _r=Ei.bind(null,_r[1]),ci().memoizedState=_r,[Tr,_r]},useMutableSource:function(){},useSyncExternalStore:function(_r,Tr,Rr){var Ar=N$4,Pr=ci();if(I$3){if(Rr===void 0)throw Error(p$3(407));Rr=Rr()}else{if(Rr=Tr(),R$4===null)throw Error(p$3(349));Rh&30||ni(Ar,Tr,Rr)}Pr.memoizedState=Rr;var Lr={value:Rr,getSnapshot:Tr};return Pr.queue=Lr,vi(ki.bind(null,Ar,Lr,_r),[_r]),Ar.flags|=2048,li(9,mi.bind(null,Ar,Lr,Rr,Tr),void 0,null),Rr},useId:function(){var _r=ci(),Tr=R$4.identifierPrefix;if(I$3){var Rr=sg,Ar=rg;Rr=(Ar&~(1<<32-oc(Ar)-1)).toString(32)+Rr,Tr=":"+Tr+"R"+Rr,Rr=Uh++,0<Rr&&(Tr+="H"+Rr.toString(32)),Tr+=":"}else Rr=Vh++,Tr=":"+Tr+"r"+Rr.toString(32)+":";return _r.memoizedState=Tr},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(_r){var Tr=di();return Di(Tr,O$3.memoizedState,_r)},useTransition:function(){var _r=fi(ei)[0],Tr=di().memoizedState;return[_r,Tr]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(_r){var Tr=di();return O$3===null?Tr.memoizedState=_r:Di(Tr,O$3.memoizedState,_r)},useTransition:function(){var _r=gi(ei)[0],Tr=di().memoizedState;return[_r,Tr]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(_r,Tr){try{var Rr="",Ar=Tr;do Rr+=Pa(Ar),Ar=Ar.return;while(Ar);var Pr=Rr}catch(Lr){Pr=`
Error generating stack: `+Lr.message+`
`+Lr.stack}return{value:_r,source:Tr,stack:Pr,digest:null}}function Li(_r,Tr,Rr){return{value:_r,source:null,stack:Rr??null,digest:Tr??null}}function Mi(_r,Tr){try{console.error(Tr.value)}catch(Rr){setTimeout(function(){throw Rr})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(_r,Tr,Rr){Rr=ch(-1,Rr),Rr.tag=3,Rr.payload={element:null};var Ar=Tr.value;return Rr.callback=function(){Pi||(Pi=!0,Qi=Ar),Mi(_r,Tr)},Rr}function Ri(_r,Tr,Rr){Rr=ch(-1,Rr),Rr.tag=3;var Ar=_r.type.getDerivedStateFromError;if(typeof Ar=="function"){var Pr=Tr.value;Rr.payload=function(){return Ar(Pr)},Rr.callback=function(){Mi(_r,Tr)}}var Lr=_r.stateNode;return Lr!==null&&typeof Lr.componentDidCatch=="function"&&(Rr.callback=function(){Mi(_r,Tr),typeof Ar!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var Mr=Tr.stack;this.componentDidCatch(Tr.value,{componentStack:Mr!==null?Mr:""})}),Rr}function Ti(_r,Tr,Rr){var Ar=_r.pingCache;if(Ar===null){Ar=_r.pingCache=new Ni;var Pr=new Set;Ar.set(Tr,Pr)}else Pr=Ar.get(Tr),Pr===void 0&&(Pr=new Set,Ar.set(Tr,Pr));Pr.has(Rr)||(Pr.add(Rr),_r=Ui.bind(null,_r,Tr,Rr),Tr.then(_r,_r))}function Vi(_r){do{var Tr;if((Tr=_r.tag===13)&&(Tr=_r.memoizedState,Tr=Tr!==null?Tr.dehydrated!==null:!0),Tr)return _r;_r=_r.return}while(_r!==null);return null}function Wi(_r,Tr,Rr,Ar,Pr){return _r.mode&1?(_r.flags|=65536,_r.lanes=Pr,_r):(_r===Tr?_r.flags|=65536:(_r.flags|=128,Rr.flags|=131072,Rr.flags&=-52805,Rr.tag===1&&(Rr.alternate===null?Rr.tag=17:(Tr=ch(-1,1),Tr.tag=2,dh(Rr,Tr,1))),Rr.lanes|=1),_r)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(_r,Tr,Rr,Ar){Tr.child=_r===null?Ch(Tr,null,Rr,Ar):Bh(Tr,_r.child,Rr,Ar)}function Zi(_r,Tr,Rr,Ar,Pr){Rr=Rr.render;var Lr=Tr.ref;return Tg(Tr,Pr),Ar=Xh(_r,Tr,Rr,Ar,Lr,Pr),Rr=bi(),_r!==null&&!Ug?(Tr.updateQueue=_r.updateQueue,Tr.flags&=-2053,_r.lanes&=~Pr,$i(_r,Tr,Pr)):(I$3&&Rr&&vg(Tr),Tr.flags|=1,Yi(_r,Tr,Ar,Pr),Tr.child)}function aj(_r,Tr,Rr,Ar,Pr){if(_r===null){var Lr=Rr.type;return typeof Lr=="function"&&!bj(Lr)&&Lr.defaultProps===void 0&&Rr.compare===null&&Rr.defaultProps===void 0?(Tr.tag=15,Tr.type=Lr,cj(_r,Tr,Lr,Ar,Pr)):(_r=yh(Rr.type,null,Ar,Tr,Tr.mode,Pr),_r.ref=Tr.ref,_r.return=Tr,Tr.child=_r)}if(Lr=_r.child,!(_r.lanes&Pr)){var Mr=Lr.memoizedProps;if(Rr=Rr.compare,Rr=Rr!==null?Rr:Ie$2,Rr(Mr,Ar)&&_r.ref===Tr.ref)return $i(_r,Tr,Pr)}return Tr.flags|=1,_r=wh(Lr,Ar),_r.ref=Tr.ref,_r.return=Tr,Tr.child=_r}function cj(_r,Tr,Rr,Ar,Pr){if(_r!==null){var Lr=_r.memoizedProps;if(Ie$2(Lr,Ar)&&_r.ref===Tr.ref)if(Ug=!1,Tr.pendingProps=Ar=Lr,(_r.lanes&Pr)!==0)_r.flags&131072&&(Ug=!0);else return Tr.lanes=_r.lanes,$i(_r,Tr,Pr)}return dj(_r,Tr,Rr,Ar,Pr)}function ej(_r,Tr,Rr){var Ar=Tr.pendingProps,Pr=Ar.children,Lr=_r!==null?_r.memoizedState:null;if(Ar.mode==="hidden")if(!(Tr.mode&1))Tr.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$4(fj,gj),gj|=Rr;else{if(!(Rr&1073741824))return _r=Lr!==null?Lr.baseLanes|Rr:Rr,Tr.lanes=Tr.childLanes=1073741824,Tr.memoizedState={baseLanes:_r,cachePool:null,transitions:null},Tr.updateQueue=null,G$4(fj,gj),gj|=_r,null;Tr.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar=Lr!==null?Lr.baseLanes:Rr,G$4(fj,gj),gj|=Ar}else Lr!==null?(Ar=Lr.baseLanes|Rr,Tr.memoizedState=null):Ar=Rr,G$4(fj,gj),gj|=Ar;return Yi(_r,Tr,Pr,Rr),Tr.child}function hj(_r,Tr){var Rr=Tr.ref;(_r===null&&Rr!==null||_r!==null&&_r.ref!==Rr)&&(Tr.flags|=512,Tr.flags|=2097152)}function dj(_r,Tr,Rr,Ar,Pr){var Lr=Zf(Rr)?Xf:H$3.current;return Lr=Yf(Tr,Lr),Tg(Tr,Pr),Rr=Xh(_r,Tr,Rr,Ar,Lr,Pr),Ar=bi(),_r!==null&&!Ug?(Tr.updateQueue=_r.updateQueue,Tr.flags&=-2053,_r.lanes&=~Pr,$i(_r,Tr,Pr)):(I$3&&Ar&&vg(Tr),Tr.flags|=1,Yi(_r,Tr,Rr,Pr),Tr.child)}function ij(_r,Tr,Rr,Ar,Pr){if(Zf(Rr)){var Lr=!0;cg(Tr)}else Lr=!1;if(Tg(Tr,Pr),Tr.stateNode===null)jj(_r,Tr),ph(Tr,Rr,Ar),rh(Tr,Rr,Ar,Pr),Ar=!0;else if(_r===null){var Mr=Tr.stateNode,Fr=Tr.memoizedProps;Mr.props=Fr;var zr=Mr.context,Ur=Rr.contextType;typeof Ur=="object"&&Ur!==null?Ur=Vg(Ur):(Ur=Zf(Rr)?Xf:H$3.current,Ur=Yf(Tr,Ur));var Vr=Rr.getDerivedStateFromProps,Nr=typeof Vr=="function"||typeof Mr.getSnapshotBeforeUpdate=="function";Nr||typeof Mr.UNSAFE_componentWillReceiveProps!="function"&&typeof Mr.componentWillReceiveProps!="function"||(Fr!==Ar||zr!==Ur)&&qh(Tr,Mr,Ar,Ur),$g=!1;var Dr=Tr.memoizedState;Mr.state=Dr,gh(Tr,Ar,Mr,Pr),zr=Tr.memoizedState,Fr!==Ar||Dr!==zr||Wf.current||$g?(typeof Vr=="function"&&(kh(Tr,Rr,Vr,Ar),zr=Tr.memoizedState),(Fr=$g||oh(Tr,Rr,Fr,Ar,Dr,zr,Ur))?(Nr||typeof Mr.UNSAFE_componentWillMount!="function"&&typeof Mr.componentWillMount!="function"||(typeof Mr.componentWillMount=="function"&&Mr.componentWillMount(),typeof Mr.UNSAFE_componentWillMount=="function"&&Mr.UNSAFE_componentWillMount()),typeof Mr.componentDidMount=="function"&&(Tr.flags|=4194308)):(typeof Mr.componentDidMount=="function"&&(Tr.flags|=4194308),Tr.memoizedProps=Ar,Tr.memoizedState=zr),Mr.props=Ar,Mr.state=zr,Mr.context=Ur,Ar=Fr):(typeof Mr.componentDidMount=="function"&&(Tr.flags|=4194308),Ar=!1)}else{Mr=Tr.stateNode,bh(_r,Tr),Fr=Tr.memoizedProps,Ur=Tr.type===Tr.elementType?Fr:Lg(Tr.type,Fr),Mr.props=Ur,Nr=Tr.pendingProps,Dr=Mr.context,zr=Rr.contextType,typeof zr=="object"&&zr!==null?zr=Vg(zr):(zr=Zf(Rr)?Xf:H$3.current,zr=Yf(Tr,zr));var jr=Rr.getDerivedStateFromProps;(Vr=typeof jr=="function"||typeof Mr.getSnapshotBeforeUpdate=="function")||typeof Mr.UNSAFE_componentWillReceiveProps!="function"&&typeof Mr.componentWillReceiveProps!="function"||(Fr!==Nr||Dr!==zr)&&qh(Tr,Mr,Ar,zr),$g=!1,Dr=Tr.memoizedState,Mr.state=Dr,gh(Tr,Ar,Mr,Pr);var Gr=Tr.memoizedState;Fr!==Nr||Dr!==Gr||Wf.current||$g?(typeof jr=="function"&&(kh(Tr,Rr,jr,Ar),Gr=Tr.memoizedState),(Ur=$g||oh(Tr,Rr,Ur,Ar,Dr,Gr,zr)||!1)?(Vr||typeof Mr.UNSAFE_componentWillUpdate!="function"&&typeof Mr.componentWillUpdate!="function"||(typeof Mr.componentWillUpdate=="function"&&Mr.componentWillUpdate(Ar,Gr,zr),typeof Mr.UNSAFE_componentWillUpdate=="function"&&Mr.UNSAFE_componentWillUpdate(Ar,Gr,zr)),typeof Mr.componentDidUpdate=="function"&&(Tr.flags|=4),typeof Mr.getSnapshotBeforeUpdate=="function"&&(Tr.flags|=1024)):(typeof Mr.componentDidUpdate!="function"||Fr===_r.memoizedProps&&Dr===_r.memoizedState||(Tr.flags|=4),typeof Mr.getSnapshotBeforeUpdate!="function"||Fr===_r.memoizedProps&&Dr===_r.memoizedState||(Tr.flags|=1024),Tr.memoizedProps=Ar,Tr.memoizedState=Gr),Mr.props=Ar,Mr.state=Gr,Mr.context=zr,Ar=Ur):(typeof Mr.componentDidUpdate!="function"||Fr===_r.memoizedProps&&Dr===_r.memoizedState||(Tr.flags|=4),typeof Mr.getSnapshotBeforeUpdate!="function"||Fr===_r.memoizedProps&&Dr===_r.memoizedState||(Tr.flags|=1024),Ar=!1)}return kj(_r,Tr,Rr,Ar,Lr,Pr)}function kj(_r,Tr,Rr,Ar,Pr,Lr){hj(_r,Tr);var Mr=(Tr.flags&128)!==0;if(!Ar&&!Mr)return Pr&&dg(Tr,Rr,!1),$i(_r,Tr,Lr);Ar=Tr.stateNode,Xi.current=Tr;var Fr=Mr&&typeof Rr.getDerivedStateFromError!="function"?null:Ar.render();return Tr.flags|=1,_r!==null&&Mr?(Tr.child=Bh(Tr,_r.child,null,Lr),Tr.child=Bh(Tr,null,Fr,Lr)):Yi(_r,Tr,Fr,Lr),Tr.memoizedState=Ar.state,Pr&&dg(Tr,Rr,!0),Tr.child}function lj(_r){var Tr=_r.stateNode;Tr.pendingContext?ag(_r,Tr.pendingContext,Tr.pendingContext!==Tr.context):Tr.context&&ag(_r,Tr.context,!1),Ih(_r,Tr.containerInfo)}function mj(_r,Tr,Rr,Ar,Pr){return Ig(),Jg(Pr),Tr.flags|=256,Yi(_r,Tr,Rr,Ar),Tr.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(_r){return{baseLanes:_r,cachePool:null,transitions:null}}function pj(_r,Tr,Rr){var Ar=Tr.pendingProps,Pr=M$4.current,Lr=!1,Mr=(Tr.flags&128)!==0,Fr;if((Fr=Mr)||(Fr=_r!==null&&_r.memoizedState===null?!1:(Pr&2)!==0),Fr?(Lr=!0,Tr.flags&=-129):(_r===null||_r.memoizedState!==null)&&(Pr|=1),G$4(M$4,Pr&1),_r===null)return Eg(Tr),_r=Tr.memoizedState,_r!==null&&(_r=_r.dehydrated,_r!==null)?(Tr.mode&1?_r.data==="$!"?Tr.lanes=8:Tr.lanes=1073741824:Tr.lanes=1,null):(Mr=Ar.children,_r=Ar.fallback,Lr?(Ar=Tr.mode,Lr=Tr.child,Mr={mode:"hidden",children:Mr},!(Ar&1)&&Lr!==null?(Lr.childLanes=0,Lr.pendingProps=Mr):Lr=qj(Mr,Ar,0,null),_r=Ah(_r,Ar,Rr,null),Lr.return=Tr,_r.return=Tr,Lr.sibling=_r,Tr.child=Lr,Tr.child.memoizedState=oj(Rr),Tr.memoizedState=nj,_r):rj(Tr,Mr));if(Pr=_r.memoizedState,Pr!==null&&(Fr=Pr.dehydrated,Fr!==null))return sj(_r,Tr,Mr,Ar,Fr,Pr,Rr);if(Lr){Lr=Ar.fallback,Mr=Tr.mode,Pr=_r.child,Fr=Pr.sibling;var zr={mode:"hidden",children:Ar.children};return!(Mr&1)&&Tr.child!==Pr?(Ar=Tr.child,Ar.childLanes=0,Ar.pendingProps=zr,Tr.deletions=null):(Ar=wh(Pr,zr),Ar.subtreeFlags=Pr.subtreeFlags&14680064),Fr!==null?Lr=wh(Fr,Lr):(Lr=Ah(Lr,Mr,Rr,null),Lr.flags|=2),Lr.return=Tr,Ar.return=Tr,Ar.sibling=Lr,Tr.child=Ar,Ar=Lr,Lr=Tr.child,Mr=_r.child.memoizedState,Mr=Mr===null?oj(Rr):{baseLanes:Mr.baseLanes|Rr,cachePool:null,transitions:Mr.transitions},Lr.memoizedState=Mr,Lr.childLanes=_r.childLanes&~Rr,Tr.memoizedState=nj,Ar}return Lr=_r.child,_r=Lr.sibling,Ar=wh(Lr,{mode:"visible",children:Ar.children}),!(Tr.mode&1)&&(Ar.lanes=Rr),Ar.return=Tr,Ar.sibling=null,_r!==null&&(Rr=Tr.deletions,Rr===null?(Tr.deletions=[_r],Tr.flags|=16):Rr.push(_r)),Tr.child=Ar,Tr.memoizedState=null,Ar}function rj(_r,Tr){return Tr=qj({mode:"visible",children:Tr},_r.mode,0,null),Tr.return=_r,_r.child=Tr}function tj(_r,Tr,Rr,Ar){return Ar!==null&&Jg(Ar),Bh(Tr,_r.child,null,Rr),_r=rj(Tr,Tr.pendingProps.children),_r.flags|=2,Tr.memoizedState=null,_r}function sj(_r,Tr,Rr,Ar,Pr,Lr,Mr){if(Rr)return Tr.flags&256?(Tr.flags&=-257,Ar=Li(Error(p$3(422))),tj(_r,Tr,Mr,Ar)):Tr.memoizedState!==null?(Tr.child=_r.child,Tr.flags|=128,null):(Lr=Ar.fallback,Pr=Tr.mode,Ar=qj({mode:"visible",children:Ar.children},Pr,0,null),Lr=Ah(Lr,Pr,Mr,null),Lr.flags|=2,Ar.return=Tr,Lr.return=Tr,Ar.sibling=Lr,Tr.child=Ar,Tr.mode&1&&Bh(Tr,_r.child,null,Mr),Tr.child.memoizedState=oj(Mr),Tr.memoizedState=nj,Lr);if(!(Tr.mode&1))return tj(_r,Tr,Mr,null);if(Pr.data==="$!"){if(Ar=Pr.nextSibling&&Pr.nextSibling.dataset,Ar)var Fr=Ar.dgst;return Ar=Fr,Lr=Error(p$3(419)),Ar=Li(Lr,Ar,void 0),tj(_r,Tr,Mr,Ar)}if(Fr=(Mr&_r.childLanes)!==0,Ug||Fr){if(Ar=R$4,Ar!==null){switch(Mr&-Mr){case 4:Pr=2;break;case 16:Pr=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Pr=32;break;case 536870912:Pr=268435456;break;default:Pr=0}Pr=Pr&(Ar.suspendedLanes|Mr)?0:Pr,Pr!==0&&Pr!==Lr.retryLane&&(Lr.retryLane=Pr,Zg(_r,Pr),mh(Ar,_r,Pr,-1))}return uj(),Ar=Li(Error(p$3(421))),tj(_r,Tr,Mr,Ar)}return Pr.data==="$?"?(Tr.flags|=128,Tr.child=_r.child,Tr=vj.bind(null,_r),Pr._reactRetry=Tr,null):(_r=Lr.treeContext,yg=Lf(Pr.nextSibling),xg=Tr,I$3=!0,zg=null,_r!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_r.id,sg=_r.overflow,qg=Tr),Tr=rj(Tr,Ar.children),Tr.flags|=4096,Tr)}function wj(_r,Tr,Rr){_r.lanes|=Tr;var Ar=_r.alternate;Ar!==null&&(Ar.lanes|=Tr),Sg(_r.return,Tr,Rr)}function xj(_r,Tr,Rr,Ar,Pr){var Lr=_r.memoizedState;Lr===null?_r.memoizedState={isBackwards:Tr,rendering:null,renderingStartTime:0,last:Ar,tail:Rr,tailMode:Pr}:(Lr.isBackwards=Tr,Lr.rendering=null,Lr.renderingStartTime=0,Lr.last=Ar,Lr.tail=Rr,Lr.tailMode=Pr)}function yj(_r,Tr,Rr){var Ar=Tr.pendingProps,Pr=Ar.revealOrder,Lr=Ar.tail;if(Yi(_r,Tr,Ar.children,Rr),Ar=M$4.current,Ar&2)Ar=Ar&1|2,Tr.flags|=128;else{if(_r!==null&&_r.flags&128)e:for(_r=Tr.child;_r!==null;){if(_r.tag===13)_r.memoizedState!==null&&wj(_r,Rr,Tr);else if(_r.tag===19)wj(_r,Rr,Tr);else if(_r.child!==null){_r.child.return=_r,_r=_r.child;continue}if(_r===Tr)break e;for(;_r.sibling===null;){if(_r.return===null||_r.return===Tr)break e;_r=_r.return}_r.sibling.return=_r.return,_r=_r.sibling}Ar&=1}if(G$4(M$4,Ar),!(Tr.mode&1))Tr.memoizedState=null;else switch(Pr){case"forwards":for(Rr=Tr.child,Pr=null;Rr!==null;)_r=Rr.alternate,_r!==null&&Mh(_r)===null&&(Pr=Rr),Rr=Rr.sibling;Rr=Pr,Rr===null?(Pr=Tr.child,Tr.child=null):(Pr=Rr.sibling,Rr.sibling=null),xj(Tr,!1,Pr,Rr,Lr);break;case"backwards":for(Rr=null,Pr=Tr.child,Tr.child=null;Pr!==null;){if(_r=Pr.alternate,_r!==null&&Mh(_r)===null){Tr.child=Pr;break}_r=Pr.sibling,Pr.sibling=Rr,Rr=Pr,Pr=_r}xj(Tr,!0,Rr,null,Lr);break;case"together":xj(Tr,!1,null,null,void 0);break;default:Tr.memoizedState=null}return Tr.child}function jj(_r,Tr){!(Tr.mode&1)&&_r!==null&&(_r.alternate=null,Tr.alternate=null,Tr.flags|=2)}function $i(_r,Tr,Rr){if(_r!==null&&(Tr.dependencies=_r.dependencies),hh|=Tr.lanes,!(Rr&Tr.childLanes))return null;if(_r!==null&&Tr.child!==_r.child)throw Error(p$3(153));if(Tr.child!==null){for(_r=Tr.child,Rr=wh(_r,_r.pendingProps),Tr.child=Rr,Rr.return=Tr;_r.sibling!==null;)_r=_r.sibling,Rr=Rr.sibling=wh(_r,_r.pendingProps),Rr.return=Tr;Rr.sibling=null}return Tr.child}function zj(_r,Tr,Rr){switch(Tr.tag){case 3:lj(Tr),Ig();break;case 5:Kh(Tr);break;case 1:Zf(Tr.type)&&cg(Tr);break;case 4:Ih(Tr,Tr.stateNode.containerInfo);break;case 10:var Ar=Tr.type._context,Pr=Tr.memoizedProps.value;G$4(Mg,Ar._currentValue),Ar._currentValue=Pr;break;case 13:if(Ar=Tr.memoizedState,Ar!==null)return Ar.dehydrated!==null?(G$4(M$4,M$4.current&1),Tr.flags|=128,null):Rr&Tr.child.childLanes?pj(_r,Tr,Rr):(G$4(M$4,M$4.current&1),_r=$i(_r,Tr,Rr),_r!==null?_r.sibling:null);G$4(M$4,M$4.current&1);break;case 19:if(Ar=(Rr&Tr.childLanes)!==0,_r.flags&128){if(Ar)return yj(_r,Tr,Rr);Tr.flags|=128}if(Pr=Tr.memoizedState,Pr!==null&&(Pr.rendering=null,Pr.tail=null,Pr.lastEffect=null),G$4(M$4,M$4.current),Ar)break;return null;case 22:case 23:return Tr.lanes=0,ej(_r,Tr,Rr)}return $i(_r,Tr,Rr)}var Aj,Bj,Cj,Dj;Aj=function(_r,Tr){for(var Rr=Tr.child;Rr!==null;){if(Rr.tag===5||Rr.tag===6)_r.appendChild(Rr.stateNode);else if(Rr.tag!==4&&Rr.child!==null){Rr.child.return=Rr,Rr=Rr.child;continue}if(Rr===Tr)break;for(;Rr.sibling===null;){if(Rr.return===null||Rr.return===Tr)return;Rr=Rr.return}Rr.sibling.return=Rr.return,Rr=Rr.sibling}};Bj=function(){};Cj=function(_r,Tr,Rr,Ar){var Pr=_r.memoizedProps;if(Pr!==Ar){_r=Tr.stateNode,Hh(Eh.current);var Lr=null;switch(Rr){case"input":Pr=Ya(_r,Pr),Ar=Ya(_r,Ar),Lr=[];break;case"select":Pr=A$3({},Pr,{value:void 0}),Ar=A$3({},Ar,{value:void 0}),Lr=[];break;case"textarea":Pr=gb(_r,Pr),Ar=gb(_r,Ar),Lr=[];break;default:typeof Pr.onClick!="function"&&typeof Ar.onClick=="function"&&(_r.onclick=Bf)}ub(Rr,Ar);var Mr;Rr=null;for(Ur in Pr)if(!Ar.hasOwnProperty(Ur)&&Pr.hasOwnProperty(Ur)&&Pr[Ur]!=null)if(Ur==="style"){var Fr=Pr[Ur];for(Mr in Fr)Fr.hasOwnProperty(Mr)&&(Rr||(Rr={}),Rr[Mr]="")}else Ur!=="dangerouslySetInnerHTML"&&Ur!=="children"&&Ur!=="suppressContentEditableWarning"&&Ur!=="suppressHydrationWarning"&&Ur!=="autoFocus"&&(ea.hasOwnProperty(Ur)?Lr||(Lr=[]):(Lr=Lr||[]).push(Ur,null));for(Ur in Ar){var zr=Ar[Ur];if(Fr=Pr!=null?Pr[Ur]:void 0,Ar.hasOwnProperty(Ur)&&zr!==Fr&&(zr!=null||Fr!=null))if(Ur==="style")if(Fr){for(Mr in Fr)!Fr.hasOwnProperty(Mr)||zr&&zr.hasOwnProperty(Mr)||(Rr||(Rr={}),Rr[Mr]="");for(Mr in zr)zr.hasOwnProperty(Mr)&&Fr[Mr]!==zr[Mr]&&(Rr||(Rr={}),Rr[Mr]=zr[Mr])}else Rr||(Lr||(Lr=[]),Lr.push(Ur,Rr)),Rr=zr;else Ur==="dangerouslySetInnerHTML"?(zr=zr?zr.__html:void 0,Fr=Fr?Fr.__html:void 0,zr!=null&&Fr!==zr&&(Lr=Lr||[]).push(Ur,zr)):Ur==="children"?typeof zr!="string"&&typeof zr!="number"||(Lr=Lr||[]).push(Ur,""+zr):Ur!=="suppressContentEditableWarning"&&Ur!=="suppressHydrationWarning"&&(ea.hasOwnProperty(Ur)?(zr!=null&&Ur==="onScroll"&&D$3("scroll",_r),Lr||Fr===zr||(Lr=[])):(Lr=Lr||[]).push(Ur,zr))}Rr&&(Lr=Lr||[]).push("style",Rr);var Ur=Lr;(Tr.updateQueue=Ur)&&(Tr.flags|=4)}};Dj=function(_r,Tr,Rr,Ar){Rr!==Ar&&(Tr.flags|=4)};function Ej(_r,Tr){if(!I$3)switch(_r.tailMode){case"hidden":Tr=_r.tail;for(var Rr=null;Tr!==null;)Tr.alternate!==null&&(Rr=Tr),Tr=Tr.sibling;Rr===null?_r.tail=null:Rr.sibling=null;break;case"collapsed":Rr=_r.tail;for(var Ar=null;Rr!==null;)Rr.alternate!==null&&(Ar=Rr),Rr=Rr.sibling;Ar===null?Tr||_r.tail===null?_r.tail=null:_r.tail.sibling=null:Ar.sibling=null}}function S$4(_r){var Tr=_r.alternate!==null&&_r.alternate.child===_r.child,Rr=0,Ar=0;if(Tr)for(var Pr=_r.child;Pr!==null;)Rr|=Pr.lanes|Pr.childLanes,Ar|=Pr.subtreeFlags&14680064,Ar|=Pr.flags&14680064,Pr.return=_r,Pr=Pr.sibling;else for(Pr=_r.child;Pr!==null;)Rr|=Pr.lanes|Pr.childLanes,Ar|=Pr.subtreeFlags,Ar|=Pr.flags,Pr.return=_r,Pr=Pr.sibling;return _r.subtreeFlags|=Ar,_r.childLanes=Rr,Tr}function Fj(_r,Tr,Rr){var Ar=Tr.pendingProps;switch(wg(Tr),Tr.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$4(Tr),null;case 1:return Zf(Tr.type)&&$f(),S$4(Tr),null;case 3:return Ar=Tr.stateNode,Jh(),E$3(Wf),E$3(H$3),Oh(),Ar.pendingContext&&(Ar.context=Ar.pendingContext,Ar.pendingContext=null),(_r===null||_r.child===null)&&(Gg(Tr)?Tr.flags|=4:_r===null||_r.memoizedState.isDehydrated&&!(Tr.flags&256)||(Tr.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(_r,Tr),S$4(Tr),null;case 5:Lh(Tr);var Pr=Hh(Gh.current);if(Rr=Tr.type,_r!==null&&Tr.stateNode!=null)Cj(_r,Tr,Rr,Ar,Pr),_r.ref!==Tr.ref&&(Tr.flags|=512,Tr.flags|=2097152);else{if(!Ar){if(Tr.stateNode===null)throw Error(p$3(166));return S$4(Tr),null}if(_r=Hh(Eh.current),Gg(Tr)){Ar=Tr.stateNode,Rr=Tr.type;var Lr=Tr.memoizedProps;switch(Ar[Of]=Tr,Ar[Pf]=Lr,_r=(Tr.mode&1)!==0,Rr){case"dialog":D$3("cancel",Ar),D$3("close",Ar);break;case"iframe":case"object":case"embed":D$3("load",Ar);break;case"video":case"audio":for(Pr=0;Pr<lf.length;Pr++)D$3(lf[Pr],Ar);break;case"source":D$3("error",Ar);break;case"img":case"image":case"link":D$3("error",Ar),D$3("load",Ar);break;case"details":D$3("toggle",Ar);break;case"input":Za(Ar,Lr),D$3("invalid",Ar);break;case"select":Ar._wrapperState={wasMultiple:!!Lr.multiple},D$3("invalid",Ar);break;case"textarea":hb(Ar,Lr),D$3("invalid",Ar)}ub(Rr,Lr),Pr=null;for(var Mr in Lr)if(Lr.hasOwnProperty(Mr)){var Fr=Lr[Mr];Mr==="children"?typeof Fr=="string"?Ar.textContent!==Fr&&(Lr.suppressHydrationWarning!==!0&&Af(Ar.textContent,Fr,_r),Pr=["children",Fr]):typeof Fr=="number"&&Ar.textContent!==""+Fr&&(Lr.suppressHydrationWarning!==!0&&Af(Ar.textContent,Fr,_r),Pr=["children",""+Fr]):ea.hasOwnProperty(Mr)&&Fr!=null&&Mr==="onScroll"&&D$3("scroll",Ar)}switch(Rr){case"input":Va(Ar),db(Ar,Lr,!0);break;case"textarea":Va(Ar),jb(Ar);break;case"select":case"option":break;default:typeof Lr.onClick=="function"&&(Ar.onclick=Bf)}Ar=Pr,Tr.updateQueue=Ar,Ar!==null&&(Tr.flags|=4)}else{Mr=Pr.nodeType===9?Pr:Pr.ownerDocument,_r==="http://www.w3.org/1999/xhtml"&&(_r=kb(Rr)),_r==="http://www.w3.org/1999/xhtml"?Rr==="script"?(_r=Mr.createElement("div"),_r.innerHTML="<script><\/script>",_r=_r.removeChild(_r.firstChild)):typeof Ar.is=="string"?_r=Mr.createElement(Rr,{is:Ar.is}):(_r=Mr.createElement(Rr),Rr==="select"&&(Mr=_r,Ar.multiple?Mr.multiple=!0:Ar.size&&(Mr.size=Ar.size))):_r=Mr.createElementNS(_r,Rr),_r[Of]=Tr,_r[Pf]=Ar,Aj(_r,Tr,!1,!1),Tr.stateNode=_r;e:{switch(Mr=vb(Rr,Ar),Rr){case"dialog":D$3("cancel",_r),D$3("close",_r),Pr=Ar;break;case"iframe":case"object":case"embed":D$3("load",_r),Pr=Ar;break;case"video":case"audio":for(Pr=0;Pr<lf.length;Pr++)D$3(lf[Pr],_r);Pr=Ar;break;case"source":D$3("error",_r),Pr=Ar;break;case"img":case"image":case"link":D$3("error",_r),D$3("load",_r),Pr=Ar;break;case"details":D$3("toggle",_r),Pr=Ar;break;case"input":Za(_r,Ar),Pr=Ya(_r,Ar),D$3("invalid",_r);break;case"option":Pr=Ar;break;case"select":_r._wrapperState={wasMultiple:!!Ar.multiple},Pr=A$3({},Ar,{value:void 0}),D$3("invalid",_r);break;case"textarea":hb(_r,Ar),Pr=gb(_r,Ar),D$3("invalid",_r);break;default:Pr=Ar}ub(Rr,Pr),Fr=Pr;for(Lr in Fr)if(Fr.hasOwnProperty(Lr)){var zr=Fr[Lr];Lr==="style"?sb(_r,zr):Lr==="dangerouslySetInnerHTML"?(zr=zr?zr.__html:void 0,zr!=null&&nb(_r,zr)):Lr==="children"?typeof zr=="string"?(Rr!=="textarea"||zr!=="")&&ob(_r,zr):typeof zr=="number"&&ob(_r,""+zr):Lr!=="suppressContentEditableWarning"&&Lr!=="suppressHydrationWarning"&&Lr!=="autoFocus"&&(ea.hasOwnProperty(Lr)?zr!=null&&Lr==="onScroll"&&D$3("scroll",_r):zr!=null&&ta(_r,Lr,zr,Mr))}switch(Rr){case"input":Va(_r),db(_r,Ar,!1);break;case"textarea":Va(_r),jb(_r);break;case"option":Ar.value!=null&&_r.setAttribute("value",""+Sa(Ar.value));break;case"select":_r.multiple=!!Ar.multiple,Lr=Ar.value,Lr!=null?fb(_r,!!Ar.multiple,Lr,!1):Ar.defaultValue!=null&&fb(_r,!!Ar.multiple,Ar.defaultValue,!0);break;default:typeof Pr.onClick=="function"&&(_r.onclick=Bf)}switch(Rr){case"button":case"input":case"select":case"textarea":Ar=!!Ar.autoFocus;break e;case"img":Ar=!0;break e;default:Ar=!1}}Ar&&(Tr.flags|=4)}Tr.ref!==null&&(Tr.flags|=512,Tr.flags|=2097152)}return S$4(Tr),null;case 6:if(_r&&Tr.stateNode!=null)Dj(_r,Tr,_r.memoizedProps,Ar);else{if(typeof Ar!="string"&&Tr.stateNode===null)throw Error(p$3(166));if(Rr=Hh(Gh.current),Hh(Eh.current),Gg(Tr)){if(Ar=Tr.stateNode,Rr=Tr.memoizedProps,Ar[Of]=Tr,(Lr=Ar.nodeValue!==Rr)&&(_r=xg,_r!==null))switch(_r.tag){case 3:Af(Ar.nodeValue,Rr,(_r.mode&1)!==0);break;case 5:_r.memoizedProps.suppressHydrationWarning!==!0&&Af(Ar.nodeValue,Rr,(_r.mode&1)!==0)}Lr&&(Tr.flags|=4)}else Ar=(Rr.nodeType===9?Rr:Rr.ownerDocument).createTextNode(Ar),Ar[Of]=Tr,Tr.stateNode=Ar}return S$4(Tr),null;case 13:if(E$3(M$4),Ar=Tr.memoizedState,_r===null||_r.memoizedState!==null&&_r.memoizedState.dehydrated!==null){if(I$3&&yg!==null&&Tr.mode&1&&!(Tr.flags&128))Hg(),Ig(),Tr.flags|=98560,Lr=!1;else if(Lr=Gg(Tr),Ar!==null&&Ar.dehydrated!==null){if(_r===null){if(!Lr)throw Error(p$3(318));if(Lr=Tr.memoizedState,Lr=Lr!==null?Lr.dehydrated:null,!Lr)throw Error(p$3(317));Lr[Of]=Tr}else Ig(),!(Tr.flags&128)&&(Tr.memoizedState=null),Tr.flags|=4;S$4(Tr),Lr=!1}else zg!==null&&(Gj(zg),zg=null),Lr=!0;if(!Lr)return Tr.flags&65536?Tr:null}return Tr.flags&128?(Tr.lanes=Rr,Tr):(Ar=Ar!==null,Ar!==(_r!==null&&_r.memoizedState!==null)&&Ar&&(Tr.child.flags|=8192,Tr.mode&1&&(_r===null||M$4.current&1?T$3===0&&(T$3=3):uj())),Tr.updateQueue!==null&&(Tr.flags|=4),S$4(Tr),null);case 4:return Jh(),Bj(_r,Tr),_r===null&&sf(Tr.stateNode.containerInfo),S$4(Tr),null;case 10:return Rg(Tr.type._context),S$4(Tr),null;case 17:return Zf(Tr.type)&&$f(),S$4(Tr),null;case 19:if(E$3(M$4),Lr=Tr.memoizedState,Lr===null)return S$4(Tr),null;if(Ar=(Tr.flags&128)!==0,Mr=Lr.rendering,Mr===null)if(Ar)Ej(Lr,!1);else{if(T$3!==0||_r!==null&&_r.flags&128)for(_r=Tr.child;_r!==null;){if(Mr=Mh(_r),Mr!==null){for(Tr.flags|=128,Ej(Lr,!1),Ar=Mr.updateQueue,Ar!==null&&(Tr.updateQueue=Ar,Tr.flags|=4),Tr.subtreeFlags=0,Ar=Rr,Rr=Tr.child;Rr!==null;)Lr=Rr,_r=Ar,Lr.flags&=14680066,Mr=Lr.alternate,Mr===null?(Lr.childLanes=0,Lr.lanes=_r,Lr.child=null,Lr.subtreeFlags=0,Lr.memoizedProps=null,Lr.memoizedState=null,Lr.updateQueue=null,Lr.dependencies=null,Lr.stateNode=null):(Lr.childLanes=Mr.childLanes,Lr.lanes=Mr.lanes,Lr.child=Mr.child,Lr.subtreeFlags=0,Lr.deletions=null,Lr.memoizedProps=Mr.memoizedProps,Lr.memoizedState=Mr.memoizedState,Lr.updateQueue=Mr.updateQueue,Lr.type=Mr.type,_r=Mr.dependencies,Lr.dependencies=_r===null?null:{lanes:_r.lanes,firstContext:_r.firstContext}),Rr=Rr.sibling;return G$4(M$4,M$4.current&1|2),Tr.child}_r=_r.sibling}Lr.tail!==null&&B$3()>Hj&&(Tr.flags|=128,Ar=!0,Ej(Lr,!1),Tr.lanes=4194304)}else{if(!Ar)if(_r=Mh(Mr),_r!==null){if(Tr.flags|=128,Ar=!0,Rr=_r.updateQueue,Rr!==null&&(Tr.updateQueue=Rr,Tr.flags|=4),Ej(Lr,!0),Lr.tail===null&&Lr.tailMode==="hidden"&&!Mr.alternate&&!I$3)return S$4(Tr),null}else 2*B$3()-Lr.renderingStartTime>Hj&&Rr!==1073741824&&(Tr.flags|=128,Ar=!0,Ej(Lr,!1),Tr.lanes=4194304);Lr.isBackwards?(Mr.sibling=Tr.child,Tr.child=Mr):(Rr=Lr.last,Rr!==null?Rr.sibling=Mr:Tr.child=Mr,Lr.last=Mr)}return Lr.tail!==null?(Tr=Lr.tail,Lr.rendering=Tr,Lr.tail=Tr.sibling,Lr.renderingStartTime=B$3(),Tr.sibling=null,Rr=M$4.current,G$4(M$4,Ar?Rr&1|2:Rr&1),Tr):(S$4(Tr),null);case 22:case 23:return Ij(),Ar=Tr.memoizedState!==null,_r!==null&&_r.memoizedState!==null!==Ar&&(Tr.flags|=8192),Ar&&Tr.mode&1?gj&1073741824&&(S$4(Tr),Tr.subtreeFlags&6&&(Tr.flags|=8192)):S$4(Tr),null;case 24:return null;case 25:return null}throw Error(p$3(156,Tr.tag))}function Jj(_r,Tr){switch(wg(Tr),Tr.tag){case 1:return Zf(Tr.type)&&$f(),_r=Tr.flags,_r&65536?(Tr.flags=_r&-65537|128,Tr):null;case 3:return Jh(),E$3(Wf),E$3(H$3),Oh(),_r=Tr.flags,_r&65536&&!(_r&128)?(Tr.flags=_r&-65537|128,Tr):null;case 5:return Lh(Tr),null;case 13:if(E$3(M$4),_r=Tr.memoizedState,_r!==null&&_r.dehydrated!==null){if(Tr.alternate===null)throw Error(p$3(340));Ig()}return _r=Tr.flags,_r&65536?(Tr.flags=_r&-65537|128,Tr):null;case 19:return E$3(M$4),null;case 4:return Jh(),null;case 10:return Rg(Tr.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$4=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$4=null;function Mj(_r,Tr){var Rr=_r.ref;if(Rr!==null)if(typeof Rr=="function")try{Rr(null)}catch(Ar){W$4(_r,Tr,Ar)}else Rr.current=null}function Nj(_r,Tr,Rr){try{Rr()}catch(Ar){W$4(_r,Tr,Ar)}}var Oj=!1;function Pj(_r,Tr){if(Cf=dd,_r=Me$2(),Ne$1(_r)){if("selectionStart"in _r)var Rr={start:_r.selectionStart,end:_r.selectionEnd};else e:{Rr=(Rr=_r.ownerDocument)&&Rr.defaultView||window;var Ar=Rr.getSelection&&Rr.getSelection();if(Ar&&Ar.rangeCount!==0){Rr=Ar.anchorNode;var Pr=Ar.anchorOffset,Lr=Ar.focusNode;Ar=Ar.focusOffset;try{Rr.nodeType,Lr.nodeType}catch{Rr=null;break e}var Mr=0,Fr=-1,zr=-1,Ur=0,Vr=0,Nr=_r,Dr=null;t:for(;;){for(var jr;Nr!==Rr||Pr!==0&&Nr.nodeType!==3||(Fr=Mr+Pr),Nr!==Lr||Ar!==0&&Nr.nodeType!==3||(zr=Mr+Ar),Nr.nodeType===3&&(Mr+=Nr.nodeValue.length),(jr=Nr.firstChild)!==null;)Dr=Nr,Nr=jr;for(;;){if(Nr===_r)break t;if(Dr===Rr&&++Ur===Pr&&(Fr=Mr),Dr===Lr&&++Vr===Ar&&(zr=Mr),(jr=Nr.nextSibling)!==null)break;Nr=Dr,Dr=Nr.parentNode}Nr=jr}Rr=Fr===-1||zr===-1?null:{start:Fr,end:zr}}else Rr=null}Rr=Rr||{start:0,end:0}}else Rr=null;for(Df={focusedElem:_r,selectionRange:Rr},dd=!1,V$4=Tr;V$4!==null;)if(Tr=V$4,_r=Tr.child,(Tr.subtreeFlags&1028)!==0&&_r!==null)_r.return=Tr,V$4=_r;else for(;V$4!==null;){Tr=V$4;try{var Gr=Tr.alternate;if(Tr.flags&1024)switch(Tr.tag){case 0:case 11:case 15:break;case 1:if(Gr!==null){var Wr=Gr.memoizedProps,qr=Gr.memoizedState,Kr=Tr.stateNode,Xr=Kr.getSnapshotBeforeUpdate(Tr.elementType===Tr.type?Wr:Lg(Tr.type,Wr),qr);Kr.__reactInternalSnapshotBeforeUpdate=Xr}break;case 3:var Zr=Tr.stateNode.containerInfo;Zr.nodeType===1?Zr.textContent="":Zr.nodeType===9&&Zr.documentElement&&Zr.removeChild(Zr.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(Jr){W$4(Tr,Tr.return,Jr)}if(_r=Tr.sibling,_r!==null){_r.return=Tr.return,V$4=_r;break}V$4=Tr.return}return Gr=Oj,Oj=!1,Gr}function Qj(_r,Tr,Rr){var Ar=Tr.updateQueue;if(Ar=Ar!==null?Ar.lastEffect:null,Ar!==null){var Pr=Ar=Ar.next;do{if((Pr.tag&_r)===_r){var Lr=Pr.destroy;Pr.destroy=void 0,Lr!==void 0&&Nj(Tr,Rr,Lr)}Pr=Pr.next}while(Pr!==Ar)}}function Rj(_r,Tr){if(Tr=Tr.updateQueue,Tr=Tr!==null?Tr.lastEffect:null,Tr!==null){var Rr=Tr=Tr.next;do{if((Rr.tag&_r)===_r){var Ar=Rr.create;Rr.destroy=Ar()}Rr=Rr.next}while(Rr!==Tr)}}function Sj(_r){var Tr=_r.ref;if(Tr!==null){var Rr=_r.stateNode;switch(_r.tag){case 5:_r=Rr;break;default:_r=Rr}typeof Tr=="function"?Tr(_r):Tr.current=_r}}function Tj(_r){var Tr=_r.alternate;Tr!==null&&(_r.alternate=null,Tj(Tr)),_r.child=null,_r.deletions=null,_r.sibling=null,_r.tag===5&&(Tr=_r.stateNode,Tr!==null&&(delete Tr[Of],delete Tr[Pf],delete Tr[of],delete Tr[Qf],delete Tr[Rf])),_r.stateNode=null,_r.return=null,_r.dependencies=null,_r.memoizedProps=null,_r.memoizedState=null,_r.pendingProps=null,_r.stateNode=null,_r.updateQueue=null}function Uj(_r){return _r.tag===5||_r.tag===3||_r.tag===4}function Vj(_r){e:for(;;){for(;_r.sibling===null;){if(_r.return===null||Uj(_r.return))return null;_r=_r.return}for(_r.sibling.return=_r.return,_r=_r.sibling;_r.tag!==5&&_r.tag!==6&&_r.tag!==18;){if(_r.flags&2||_r.child===null||_r.tag===4)continue e;_r.child.return=_r,_r=_r.child}if(!(_r.flags&2))return _r.stateNode}}function Wj(_r,Tr,Rr){var Ar=_r.tag;if(Ar===5||Ar===6)_r=_r.stateNode,Tr?Rr.nodeType===8?Rr.parentNode.insertBefore(_r,Tr):Rr.insertBefore(_r,Tr):(Rr.nodeType===8?(Tr=Rr.parentNode,Tr.insertBefore(_r,Rr)):(Tr=Rr,Tr.appendChild(_r)),Rr=Rr._reactRootContainer,Rr!=null||Tr.onclick!==null||(Tr.onclick=Bf));else if(Ar!==4&&(_r=_r.child,_r!==null))for(Wj(_r,Tr,Rr),_r=_r.sibling;_r!==null;)Wj(_r,Tr,Rr),_r=_r.sibling}function Xj(_r,Tr,Rr){var Ar=_r.tag;if(Ar===5||Ar===6)_r=_r.stateNode,Tr?Rr.insertBefore(_r,Tr):Rr.appendChild(_r);else if(Ar!==4&&(_r=_r.child,_r!==null))for(Xj(_r,Tr,Rr),_r=_r.sibling;_r!==null;)Xj(_r,Tr,Rr),_r=_r.sibling}var X$4=null,Yj=!1;function Zj(_r,Tr,Rr){for(Rr=Rr.child;Rr!==null;)ak(_r,Tr,Rr),Rr=Rr.sibling}function ak(_r,Tr,Rr){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,Rr)}catch{}switch(Rr.tag){case 5:U$4||Mj(Rr,Tr);case 6:var Ar=X$4,Pr=Yj;X$4=null,Zj(_r,Tr,Rr),X$4=Ar,Yj=Pr,X$4!==null&&(Yj?(_r=X$4,Rr=Rr.stateNode,_r.nodeType===8?_r.parentNode.removeChild(Rr):_r.removeChild(Rr)):X$4.removeChild(Rr.stateNode));break;case 18:X$4!==null&&(Yj?(_r=X$4,Rr=Rr.stateNode,_r.nodeType===8?Kf(_r.parentNode,Rr):_r.nodeType===1&&Kf(_r,Rr),bd(_r)):Kf(X$4,Rr.stateNode));break;case 4:Ar=X$4,Pr=Yj,X$4=Rr.stateNode.containerInfo,Yj=!0,Zj(_r,Tr,Rr),X$4=Ar,Yj=Pr;break;case 0:case 11:case 14:case 15:if(!U$4&&(Ar=Rr.updateQueue,Ar!==null&&(Ar=Ar.lastEffect,Ar!==null))){Pr=Ar=Ar.next;do{var Lr=Pr,Mr=Lr.destroy;Lr=Lr.tag,Mr!==void 0&&(Lr&2||Lr&4)&&Nj(Rr,Tr,Mr),Pr=Pr.next}while(Pr!==Ar)}Zj(_r,Tr,Rr);break;case 1:if(!U$4&&(Mj(Rr,Tr),Ar=Rr.stateNode,typeof Ar.componentWillUnmount=="function"))try{Ar.props=Rr.memoizedProps,Ar.state=Rr.memoizedState,Ar.componentWillUnmount()}catch(Fr){W$4(Rr,Tr,Fr)}Zj(_r,Tr,Rr);break;case 21:Zj(_r,Tr,Rr);break;case 22:Rr.mode&1?(U$4=(Ar=U$4)||Rr.memoizedState!==null,Zj(_r,Tr,Rr),U$4=Ar):Zj(_r,Tr,Rr);break;default:Zj(_r,Tr,Rr)}}function bk(_r){var Tr=_r.updateQueue;if(Tr!==null){_r.updateQueue=null;var Rr=_r.stateNode;Rr===null&&(Rr=_r.stateNode=new Lj),Tr.forEach(function(Ar){var Pr=ck.bind(null,_r,Ar);Rr.has(Ar)||(Rr.add(Ar),Ar.then(Pr,Pr))})}}function dk(_r,Tr){var Rr=Tr.deletions;if(Rr!==null)for(var Ar=0;Ar<Rr.length;Ar++){var Pr=Rr[Ar];try{var Lr=_r,Mr=Tr,Fr=Mr;e:for(;Fr!==null;){switch(Fr.tag){case 5:X$4=Fr.stateNode,Yj=!1;break e;case 3:X$4=Fr.stateNode.containerInfo,Yj=!0;break e;case 4:X$4=Fr.stateNode.containerInfo,Yj=!0;break e}Fr=Fr.return}if(X$4===null)throw Error(p$3(160));ak(Lr,Mr,Pr),X$4=null,Yj=!1;var zr=Pr.alternate;zr!==null&&(zr.return=null),Pr.return=null}catch(Ur){W$4(Pr,Tr,Ur)}}if(Tr.subtreeFlags&12854)for(Tr=Tr.child;Tr!==null;)ek(Tr,_r),Tr=Tr.sibling}function ek(_r,Tr){var Rr=_r.alternate,Ar=_r.flags;switch(_r.tag){case 0:case 11:case 14:case 15:if(dk(Tr,_r),fk(_r),Ar&4){try{Qj(3,_r,_r.return),Rj(3,_r)}catch(Wr){W$4(_r,_r.return,Wr)}try{Qj(5,_r,_r.return)}catch(Wr){W$4(_r,_r.return,Wr)}}break;case 1:dk(Tr,_r),fk(_r),Ar&512&&Rr!==null&&Mj(Rr,Rr.return);break;case 5:if(dk(Tr,_r),fk(_r),Ar&512&&Rr!==null&&Mj(Rr,Rr.return),_r.flags&32){var Pr=_r.stateNode;try{ob(Pr,"")}catch(Wr){W$4(_r,_r.return,Wr)}}if(Ar&4&&(Pr=_r.stateNode,Pr!=null)){var Lr=_r.memoizedProps,Mr=Rr!==null?Rr.memoizedProps:Lr,Fr=_r.type,zr=_r.updateQueue;if(_r.updateQueue=null,zr!==null)try{Fr==="input"&&Lr.type==="radio"&&Lr.name!=null&&ab(Pr,Lr),vb(Fr,Mr);var Ur=vb(Fr,Lr);for(Mr=0;Mr<zr.length;Mr+=2){var Vr=zr[Mr],Nr=zr[Mr+1];Vr==="style"?sb(Pr,Nr):Vr==="dangerouslySetInnerHTML"?nb(Pr,Nr):Vr==="children"?ob(Pr,Nr):ta(Pr,Vr,Nr,Ur)}switch(Fr){case"input":bb(Pr,Lr);break;case"textarea":ib(Pr,Lr);break;case"select":var Dr=Pr._wrapperState.wasMultiple;Pr._wrapperState.wasMultiple=!!Lr.multiple;var jr=Lr.value;jr!=null?fb(Pr,!!Lr.multiple,jr,!1):Dr!==!!Lr.multiple&&(Lr.defaultValue!=null?fb(Pr,!!Lr.multiple,Lr.defaultValue,!0):fb(Pr,!!Lr.multiple,Lr.multiple?[]:"",!1))}Pr[Pf]=Lr}catch(Wr){W$4(_r,_r.return,Wr)}}break;case 6:if(dk(Tr,_r),fk(_r),Ar&4){if(_r.stateNode===null)throw Error(p$3(162));Pr=_r.stateNode,Lr=_r.memoizedProps;try{Pr.nodeValue=Lr}catch(Wr){W$4(_r,_r.return,Wr)}}break;case 3:if(dk(Tr,_r),fk(_r),Ar&4&&Rr!==null&&Rr.memoizedState.isDehydrated)try{bd(Tr.containerInfo)}catch(Wr){W$4(_r,_r.return,Wr)}break;case 4:dk(Tr,_r),fk(_r);break;case 13:dk(Tr,_r),fk(_r),Pr=_r.child,Pr.flags&8192&&(Lr=Pr.memoizedState!==null,Pr.stateNode.isHidden=Lr,!Lr||Pr.alternate!==null&&Pr.alternate.memoizedState!==null||(gk=B$3())),Ar&4&&bk(_r);break;case 22:if(Vr=Rr!==null&&Rr.memoizedState!==null,_r.mode&1?(U$4=(Ur=U$4)||Vr,dk(Tr,_r),U$4=Ur):dk(Tr,_r),fk(_r),Ar&8192){if(Ur=_r.memoizedState!==null,(_r.stateNode.isHidden=Ur)&&!Vr&&_r.mode&1)for(V$4=_r,Vr=_r.child;Vr!==null;){for(Nr=V$4=Vr;V$4!==null;){switch(Dr=V$4,jr=Dr.child,Dr.tag){case 0:case 11:case 14:case 15:Qj(4,Dr,Dr.return);break;case 1:Mj(Dr,Dr.return);var Gr=Dr.stateNode;if(typeof Gr.componentWillUnmount=="function"){Ar=Dr,Rr=Dr.return;try{Tr=Ar,Gr.props=Tr.memoizedProps,Gr.state=Tr.memoizedState,Gr.componentWillUnmount()}catch(Wr){W$4(Ar,Rr,Wr)}}break;case 5:Mj(Dr,Dr.return);break;case 22:if(Dr.memoizedState!==null){hk(Nr);continue}}jr!==null?(jr.return=Dr,V$4=jr):hk(Nr)}Vr=Vr.sibling}e:for(Vr=null,Nr=_r;;){if(Nr.tag===5){if(Vr===null){Vr=Nr;try{Pr=Nr.stateNode,Ur?(Lr=Pr.style,typeof Lr.setProperty=="function"?Lr.setProperty("display","none","important"):Lr.display="none"):(Fr=Nr.stateNode,zr=Nr.memoizedProps.style,Mr=zr!=null&&zr.hasOwnProperty("display")?zr.display:null,Fr.style.display=rb("display",Mr))}catch(Wr){W$4(_r,_r.return,Wr)}}}else if(Nr.tag===6){if(Vr===null)try{Nr.stateNode.nodeValue=Ur?"":Nr.memoizedProps}catch(Wr){W$4(_r,_r.return,Wr)}}else if((Nr.tag!==22&&Nr.tag!==23||Nr.memoizedState===null||Nr===_r)&&Nr.child!==null){Nr.child.return=Nr,Nr=Nr.child;continue}if(Nr===_r)break e;for(;Nr.sibling===null;){if(Nr.return===null||Nr.return===_r)break e;Vr===Nr&&(Vr=null),Nr=Nr.return}Vr===Nr&&(Vr=null),Nr.sibling.return=Nr.return,Nr=Nr.sibling}}break;case 19:dk(Tr,_r),fk(_r),Ar&4&&bk(_r);break;case 21:break;default:dk(Tr,_r),fk(_r)}}function fk(_r){var Tr=_r.flags;if(Tr&2){try{e:{for(var Rr=_r.return;Rr!==null;){if(Uj(Rr)){var Ar=Rr;break e}Rr=Rr.return}throw Error(p$3(160))}switch(Ar.tag){case 5:var Pr=Ar.stateNode;Ar.flags&32&&(ob(Pr,""),Ar.flags&=-33);var Lr=Vj(_r);Xj(_r,Lr,Pr);break;case 3:case 4:var Mr=Ar.stateNode.containerInfo,Fr=Vj(_r);Wj(_r,Fr,Mr);break;default:throw Error(p$3(161))}}catch(zr){W$4(_r,_r.return,zr)}_r.flags&=-3}Tr&4096&&(_r.flags&=-4097)}function ik(_r,Tr,Rr){V$4=_r,jk(_r)}function jk(_r,Tr,Rr){for(var Ar=(_r.mode&1)!==0;V$4!==null;){var Pr=V$4,Lr=Pr.child;if(Pr.tag===22&&Ar){var Mr=Pr.memoizedState!==null||Kj;if(!Mr){var Fr=Pr.alternate,zr=Fr!==null&&Fr.memoizedState!==null||U$4;Fr=Kj;var Ur=U$4;if(Kj=Mr,(U$4=zr)&&!Ur)for(V$4=Pr;V$4!==null;)Mr=V$4,zr=Mr.child,Mr.tag===22&&Mr.memoizedState!==null?kk(Pr):zr!==null?(zr.return=Mr,V$4=zr):kk(Pr);for(;Lr!==null;)V$4=Lr,jk(Lr),Lr=Lr.sibling;V$4=Pr,Kj=Fr,U$4=Ur}lk(_r)}else Pr.subtreeFlags&8772&&Lr!==null?(Lr.return=Pr,V$4=Lr):lk(_r)}}function lk(_r){for(;V$4!==null;){var Tr=V$4;if(Tr.flags&8772){var Rr=Tr.alternate;try{if(Tr.flags&8772)switch(Tr.tag){case 0:case 11:case 15:U$4||Rj(5,Tr);break;case 1:var Ar=Tr.stateNode;if(Tr.flags&4&&!U$4)if(Rr===null)Ar.componentDidMount();else{var Pr=Tr.elementType===Tr.type?Rr.memoizedProps:Lg(Tr.type,Rr.memoizedProps);Ar.componentDidUpdate(Pr,Rr.memoizedState,Ar.__reactInternalSnapshotBeforeUpdate)}var Lr=Tr.updateQueue;Lr!==null&&ih(Tr,Lr,Ar);break;case 3:var Mr=Tr.updateQueue;if(Mr!==null){if(Rr=null,Tr.child!==null)switch(Tr.child.tag){case 5:Rr=Tr.child.stateNode;break;case 1:Rr=Tr.child.stateNode}ih(Tr,Mr,Rr)}break;case 5:var Fr=Tr.stateNode;if(Rr===null&&Tr.flags&4){Rr=Fr;var zr=Tr.memoizedProps;switch(Tr.type){case"button":case"input":case"select":case"textarea":zr.autoFocus&&Rr.focus();break;case"img":zr.src&&(Rr.src=zr.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(Tr.memoizedState===null){var Ur=Tr.alternate;if(Ur!==null){var Vr=Ur.memoizedState;if(Vr!==null){var Nr=Vr.dehydrated;Nr!==null&&bd(Nr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$4||Tr.flags&512&&Sj(Tr)}catch(Dr){W$4(Tr,Tr.return,Dr)}}if(Tr===_r){V$4=null;break}if(Rr=Tr.sibling,Rr!==null){Rr.return=Tr.return,V$4=Rr;break}V$4=Tr.return}}function hk(_r){for(;V$4!==null;){var Tr=V$4;if(Tr===_r){V$4=null;break}var Rr=Tr.sibling;if(Rr!==null){Rr.return=Tr.return,V$4=Rr;break}V$4=Tr.return}}function kk(_r){for(;V$4!==null;){var Tr=V$4;try{switch(Tr.tag){case 0:case 11:case 15:var Rr=Tr.return;try{Rj(4,Tr)}catch(zr){W$4(Tr,Rr,zr)}break;case 1:var Ar=Tr.stateNode;if(typeof Ar.componentDidMount=="function"){var Pr=Tr.return;try{Ar.componentDidMount()}catch(zr){W$4(Tr,Pr,zr)}}var Lr=Tr.return;try{Sj(Tr)}catch(zr){W$4(Tr,Lr,zr)}break;case 5:var Mr=Tr.return;try{Sj(Tr)}catch(zr){W$4(Tr,Mr,zr)}}}catch(zr){W$4(Tr,Tr.return,zr)}if(Tr===_r){V$4=null;break}var Fr=Tr.sibling;if(Fr!==null){Fr.return=Tr.return,V$4=Fr;break}V$4=Tr.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$4=0,R$4=null,Y$4=null,Z$3=0,gj=0,fj=Uf(0),T$3=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$2(){return K$4&6?B$3():Bk!==-1?Bk:Bk=B$3()}function lh(_r){return _r.mode&1?K$4&2&&Z$3!==0?Z$3&-Z$3:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(_r=C$2,_r!==0||(_r=window.event,_r=_r===void 0?16:jd(_r.type)),_r):1}function mh(_r,Tr,Rr,Ar){if(50<zk)throw zk=0,Ak=null,Error(p$3(185));Ac(_r,Rr,Ar),(!(K$4&2)||_r!==R$4)&&(_r===R$4&&(!(K$4&2)&&(rk|=Rr),T$3===4&&Dk(_r,Z$3)),Ek(_r,Ar),Rr===1&&K$4===0&&!(Tr.mode&1)&&(Hj=B$3()+500,fg&&jg()))}function Ek(_r,Tr){var Rr=_r.callbackNode;wc(_r,Tr);var Ar=uc(_r,_r===R$4?Z$3:0);if(Ar===0)Rr!==null&&bc(Rr),_r.callbackNode=null,_r.callbackPriority=0;else if(Tr=Ar&-Ar,_r.callbackPriority!==Tr){if(Rr!=null&&bc(Rr),Tr===1)_r.tag===0?ig(Fk.bind(null,_r)):hg(Fk.bind(null,_r)),Jf(function(){!(K$4&6)&&jg()}),Rr=null;else{switch(Dc(Ar)){case 1:Rr=fc;break;case 4:Rr=gc;break;case 16:Rr=hc;break;case 536870912:Rr=jc;break;default:Rr=hc}Rr=Gk(Rr,Hk.bind(null,_r))}_r.callbackPriority=Tr,_r.callbackNode=Rr}}function Hk(_r,Tr){if(Bk=-1,Ck=0,K$4&6)throw Error(p$3(327));var Rr=_r.callbackNode;if(Ik()&&_r.callbackNode!==Rr)return null;var Ar=uc(_r,_r===R$4?Z$3:0);if(Ar===0)return null;if(Ar&30||Ar&_r.expiredLanes||Tr)Tr=Jk(_r,Ar);else{Tr=Ar;var Pr=K$4;K$4|=2;var Lr=Kk();(R$4!==_r||Z$3!==Tr)&&(vk=null,Hj=B$3()+500,Lk(_r,Tr));do try{Mk();break}catch(Fr){Nk(_r,Fr)}while(1);Qg(),nk.current=Lr,K$4=Pr,Y$4!==null?Tr=0:(R$4=null,Z$3=0,Tr=T$3)}if(Tr!==0){if(Tr===2&&(Pr=xc(_r),Pr!==0&&(Ar=Pr,Tr=Ok(_r,Pr))),Tr===1)throw Rr=qk,Lk(_r,0),Dk(_r,Ar),Ek(_r,B$3()),Rr;if(Tr===6)Dk(_r,Ar);else{if(Pr=_r.current.alternate,!(Ar&30)&&!Pk(Pr)&&(Tr=Jk(_r,Ar),Tr===2&&(Lr=xc(_r),Lr!==0&&(Ar=Lr,Tr=Ok(_r,Lr))),Tr===1))throw Rr=qk,Lk(_r,0),Dk(_r,Ar),Ek(_r,B$3()),Rr;switch(_r.finishedWork=Pr,_r.finishedLanes=Ar,Tr){case 0:case 1:throw Error(p$3(345));case 2:Qk(_r,uk,vk);break;case 3:if(Dk(_r,Ar),(Ar&130023424)===Ar&&(Tr=gk+500-B$3(),10<Tr)){if(uc(_r,0)!==0)break;if(Pr=_r.suspendedLanes,(Pr&Ar)!==Ar){L$2(),_r.pingedLanes|=_r.suspendedLanes&Pr;break}_r.timeoutHandle=Ff(Qk.bind(null,_r,uk,vk),Tr);break}Qk(_r,uk,vk);break;case 4:if(Dk(_r,Ar),(Ar&4194240)===Ar)break;for(Tr=_r.eventTimes,Pr=-1;0<Ar;){var Mr=31-oc(Ar);Lr=1<<Mr,Mr=Tr[Mr],Mr>Pr&&(Pr=Mr),Ar&=~Lr}if(Ar=Pr,Ar=B$3()-Ar,Ar=(120>Ar?120:480>Ar?480:1080>Ar?1080:1920>Ar?1920:3e3>Ar?3e3:4320>Ar?4320:1960*mk(Ar/1960))-Ar,10<Ar){_r.timeoutHandle=Ff(Qk.bind(null,_r,uk,vk),Ar);break}Qk(_r,uk,vk);break;case 5:Qk(_r,uk,vk);break;default:throw Error(p$3(329))}}}return Ek(_r,B$3()),_r.callbackNode===Rr?Hk.bind(null,_r):null}function Ok(_r,Tr){var Rr=tk;return _r.current.memoizedState.isDehydrated&&(Lk(_r,Tr).flags|=256),_r=Jk(_r,Tr),_r!==2&&(Tr=uk,uk=Rr,Tr!==null&&Gj(Tr)),_r}function Gj(_r){uk===null?uk=_r:uk.push.apply(uk,_r)}function Pk(_r){for(var Tr=_r;;){if(Tr.flags&16384){var Rr=Tr.updateQueue;if(Rr!==null&&(Rr=Rr.stores,Rr!==null))for(var Ar=0;Ar<Rr.length;Ar++){var Pr=Rr[Ar],Lr=Pr.getSnapshot;Pr=Pr.value;try{if(!He$2(Lr(),Pr))return!1}catch{return!1}}}if(Rr=Tr.child,Tr.subtreeFlags&16384&&Rr!==null)Rr.return=Tr,Tr=Rr;else{if(Tr===_r)break;for(;Tr.sibling===null;){if(Tr.return===null||Tr.return===_r)return!0;Tr=Tr.return}Tr.sibling.return=Tr.return,Tr=Tr.sibling}}return!0}function Dk(_r,Tr){for(Tr&=~sk,Tr&=~rk,_r.suspendedLanes|=Tr,_r.pingedLanes&=~Tr,_r=_r.expirationTimes;0<Tr;){var Rr=31-oc(Tr),Ar=1<<Rr;_r[Rr]=-1,Tr&=~Ar}}function Fk(_r){if(K$4&6)throw Error(p$3(327));Ik();var Tr=uc(_r,0);if(!(Tr&1))return Ek(_r,B$3()),null;var Rr=Jk(_r,Tr);if(_r.tag!==0&&Rr===2){var Ar=xc(_r);Ar!==0&&(Tr=Ar,Rr=Ok(_r,Ar))}if(Rr===1)throw Rr=qk,Lk(_r,0),Dk(_r,Tr),Ek(_r,B$3()),Rr;if(Rr===6)throw Error(p$3(345));return _r.finishedWork=_r.current.alternate,_r.finishedLanes=Tr,Qk(_r,uk,vk),Ek(_r,B$3()),null}function Rk(_r,Tr){var Rr=K$4;K$4|=1;try{return _r(Tr)}finally{K$4=Rr,K$4===0&&(Hj=B$3()+500,fg&&jg())}}function Sk(_r){xk!==null&&xk.tag===0&&!(K$4&6)&&Ik();var Tr=K$4;K$4|=1;var Rr=pk.transition,Ar=C$2;try{if(pk.transition=null,C$2=1,_r)return _r()}finally{C$2=Ar,pk.transition=Rr,K$4=Tr,!(K$4&6)&&jg()}}function Ij(){gj=fj.current,E$3(fj)}function Lk(_r,Tr){_r.finishedWork=null,_r.finishedLanes=0;var Rr=_r.timeoutHandle;if(Rr!==-1&&(_r.timeoutHandle=-1,Gf(Rr)),Y$4!==null)for(Rr=Y$4.return;Rr!==null;){var Ar=Rr;switch(wg(Ar),Ar.tag){case 1:Ar=Ar.type.childContextTypes,Ar!=null&&$f();break;case 3:Jh(),E$3(Wf),E$3(H$3),Oh();break;case 5:Lh(Ar);break;case 4:Jh();break;case 13:E$3(M$4);break;case 19:E$3(M$4);break;case 10:Rg(Ar.type._context);break;case 22:case 23:Ij()}Rr=Rr.return}if(R$4=_r,Y$4=_r=wh(_r.current,null),Z$3=gj=Tr,T$3=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(Tr=0;Tr<Wg.length;Tr++)if(Rr=Wg[Tr],Ar=Rr.interleaved,Ar!==null){Rr.interleaved=null;var Pr=Ar.next,Lr=Rr.pending;if(Lr!==null){var Mr=Lr.next;Lr.next=Pr,Ar.next=Mr}Rr.pending=Ar}Wg=null}return _r}function Nk(_r,Tr){do{var Rr=Y$4;try{if(Qg(),Ph.current=ai,Sh){for(var Ar=N$4.memoizedState;Ar!==null;){var Pr=Ar.queue;Pr!==null&&(Pr.pending=null),Ar=Ar.next}Sh=!1}if(Rh=0,P$4=O$3=N$4=null,Th=!1,Uh=0,ok.current=null,Rr===null||Rr.return===null){T$3=1,qk=Tr,Y$4=null;break}e:{var Lr=_r,Mr=Rr.return,Fr=Rr,zr=Tr;if(Tr=Z$3,Fr.flags|=32768,zr!==null&&typeof zr=="object"&&typeof zr.then=="function"){var Ur=zr,Vr=Fr,Nr=Vr.tag;if(!(Vr.mode&1)&&(Nr===0||Nr===11||Nr===15)){var Dr=Vr.alternate;Dr?(Vr.updateQueue=Dr.updateQueue,Vr.memoizedState=Dr.memoizedState,Vr.lanes=Dr.lanes):(Vr.updateQueue=null,Vr.memoizedState=null)}var jr=Vi(Mr);if(jr!==null){jr.flags&=-257,Wi(jr,Mr,Fr,Lr,Tr),jr.mode&1&&Ti(Lr,Ur,Tr),Tr=jr,zr=Ur;var Gr=Tr.updateQueue;if(Gr===null){var Wr=new Set;Wr.add(zr),Tr.updateQueue=Wr}else Gr.add(zr);break e}else{if(!(Tr&1)){Ti(Lr,Ur,Tr),uj();break e}zr=Error(p$3(426))}}else if(I$3&&Fr.mode&1){var qr=Vi(Mr);if(qr!==null){!(qr.flags&65536)&&(qr.flags|=256),Wi(qr,Mr,Fr,Lr,Tr),Jg(Ki(zr,Fr));break e}}Lr=zr=Ki(zr,Fr),T$3!==4&&(T$3=2),tk===null?tk=[Lr]:tk.push(Lr),Lr=Mr;do{switch(Lr.tag){case 3:Lr.flags|=65536,Tr&=-Tr,Lr.lanes|=Tr;var Kr=Oi(Lr,zr,Tr);fh(Lr,Kr);break e;case 1:Fr=zr;var Xr=Lr.type,Zr=Lr.stateNode;if(!(Lr.flags&128)&&(typeof Xr.getDerivedStateFromError=="function"||Zr!==null&&typeof Zr.componentDidCatch=="function"&&(Si===null||!Si.has(Zr)))){Lr.flags|=65536,Tr&=-Tr,Lr.lanes|=Tr;var Jr=Ri(Lr,Fr,Tr);fh(Lr,Jr);break e}}Lr=Lr.return}while(Lr!==null)}Tk(Rr)}catch(_i){Tr=_i,Y$4===Rr&&Rr!==null&&(Y$4=Rr=Rr.return);continue}break}while(1)}function Kk(){var _r=nk.current;return nk.current=ai,_r===null?ai:_r}function uj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),R$4===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$4,Z$3)}function Jk(_r,Tr){var Rr=K$4;K$4|=2;var Ar=Kk();(R$4!==_r||Z$3!==Tr)&&(vk=null,Lk(_r,Tr));do try{Uk();break}catch(Pr){Nk(_r,Pr)}while(1);if(Qg(),K$4=Rr,nk.current=Ar,Y$4!==null)throw Error(p$3(261));return R$4=null,Z$3=0,T$3}function Uk(){for(;Y$4!==null;)Vk(Y$4)}function Mk(){for(;Y$4!==null&&!cc();)Vk(Y$4)}function Vk(_r){var Tr=Wk(_r.alternate,_r,gj);_r.memoizedProps=_r.pendingProps,Tr===null?Tk(_r):Y$4=Tr,ok.current=null}function Tk(_r){var Tr=_r;do{var Rr=Tr.alternate;if(_r=Tr.return,Tr.flags&32768){if(Rr=Jj(Rr,Tr),Rr!==null){Rr.flags&=32767,Y$4=Rr;return}if(_r!==null)_r.flags|=32768,_r.subtreeFlags=0,_r.deletions=null;else{T$3=6,Y$4=null;return}}else if(Rr=Fj(Rr,Tr,gj),Rr!==null){Y$4=Rr;return}if(Tr=Tr.sibling,Tr!==null){Y$4=Tr;return}Y$4=Tr=_r}while(Tr!==null);T$3===0&&(T$3=5)}function Qk(_r,Tr,Rr){var Ar=C$2,Pr=pk.transition;try{pk.transition=null,C$2=1,Xk(_r,Tr,Rr,Ar)}finally{pk.transition=Pr,C$2=Ar}return null}function Xk(_r,Tr,Rr,Ar){do Ik();while(xk!==null);if(K$4&6)throw Error(p$3(327));Rr=_r.finishedWork;var Pr=_r.finishedLanes;if(Rr===null)return null;if(_r.finishedWork=null,_r.finishedLanes=0,Rr===_r.current)throw Error(p$3(177));_r.callbackNode=null,_r.callbackPriority=0;var Lr=Rr.lanes|Rr.childLanes;if(Bc(_r,Lr),_r===R$4&&(Y$4=R$4=null,Z$3=0),!(Rr.subtreeFlags&2064)&&!(Rr.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),Lr=(Rr.flags&15990)!==0,Rr.subtreeFlags&15990||Lr){Lr=pk.transition,pk.transition=null;var Mr=C$2;C$2=1;var Fr=K$4;K$4|=4,ok.current=null,Pj(_r,Rr),ek(Rr,_r),Oe$1(Df),dd=!!Cf,Df=Cf=null,_r.current=Rr,ik(Rr),dc(),K$4=Fr,C$2=Mr,pk.transition=Lr}else _r.current=Rr;if(wk&&(wk=!1,xk=_r,yk=Pr),Lr=_r.pendingLanes,Lr===0&&(Si=null),mc(Rr.stateNode),Ek(_r,B$3()),Tr!==null)for(Ar=_r.onRecoverableError,Rr=0;Rr<Tr.length;Rr++)Pr=Tr[Rr],Ar(Pr.value,{componentStack:Pr.stack,digest:Pr.digest});if(Pi)throw Pi=!1,_r=Qi,Qi=null,_r;return yk&1&&_r.tag!==0&&Ik(),Lr=_r.pendingLanes,Lr&1?_r===Ak?zk++:(zk=0,Ak=_r):zk=0,jg(),null}function Ik(){if(xk!==null){var _r=Dc(yk),Tr=pk.transition,Rr=C$2;try{if(pk.transition=null,C$2=16>_r?16:_r,xk===null)var Ar=!1;else{if(_r=xk,xk=null,yk=0,K$4&6)throw Error(p$3(331));var Pr=K$4;for(K$4|=4,V$4=_r.current;V$4!==null;){var Lr=V$4,Mr=Lr.child;if(V$4.flags&16){var Fr=Lr.deletions;if(Fr!==null){for(var zr=0;zr<Fr.length;zr++){var Ur=Fr[zr];for(V$4=Ur;V$4!==null;){var Vr=V$4;switch(Vr.tag){case 0:case 11:case 15:Qj(8,Vr,Lr)}var Nr=Vr.child;if(Nr!==null)Nr.return=Vr,V$4=Nr;else for(;V$4!==null;){Vr=V$4;var Dr=Vr.sibling,jr=Vr.return;if(Tj(Vr),Vr===Ur){V$4=null;break}if(Dr!==null){Dr.return=jr,V$4=Dr;break}V$4=jr}}}var Gr=Lr.alternate;if(Gr!==null){var Wr=Gr.child;if(Wr!==null){Gr.child=null;do{var qr=Wr.sibling;Wr.sibling=null,Wr=qr}while(Wr!==null)}}V$4=Lr}}if(Lr.subtreeFlags&2064&&Mr!==null)Mr.return=Lr,V$4=Mr;else e:for(;V$4!==null;){if(Lr=V$4,Lr.flags&2048)switch(Lr.tag){case 0:case 11:case 15:Qj(9,Lr,Lr.return)}var Kr=Lr.sibling;if(Kr!==null){Kr.return=Lr.return,V$4=Kr;break e}V$4=Lr.return}}var Xr=_r.current;for(V$4=Xr;V$4!==null;){Mr=V$4;var Zr=Mr.child;if(Mr.subtreeFlags&2064&&Zr!==null)Zr.return=Mr,V$4=Zr;else e:for(Mr=Xr;V$4!==null;){if(Fr=V$4,Fr.flags&2048)try{switch(Fr.tag){case 0:case 11:case 15:Rj(9,Fr)}}catch(_i){W$4(Fr,Fr.return,_i)}if(Fr===Mr){V$4=null;break e}var Jr=Fr.sibling;if(Jr!==null){Jr.return=Fr.return,V$4=Jr;break e}V$4=Fr.return}}if(K$4=Pr,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_r)}catch{}Ar=!0}return Ar}finally{C$2=Rr,pk.transition=Tr}}return!1}function Yk(_r,Tr,Rr){Tr=Ki(Rr,Tr),Tr=Oi(_r,Tr,1),_r=dh(_r,Tr,1),Tr=L$2(),_r!==null&&(Ac(_r,1,Tr),Ek(_r,Tr))}function W$4(_r,Tr,Rr){if(_r.tag===3)Yk(_r,_r,Rr);else for(;Tr!==null;){if(Tr.tag===3){Yk(Tr,_r,Rr);break}else if(Tr.tag===1){var Ar=Tr.stateNode;if(typeof Tr.type.getDerivedStateFromError=="function"||typeof Ar.componentDidCatch=="function"&&(Si===null||!Si.has(Ar))){_r=Ki(Rr,_r),_r=Ri(Tr,_r,1),Tr=dh(Tr,_r,1),_r=L$2(),Tr!==null&&(Ac(Tr,1,_r),Ek(Tr,_r));break}}Tr=Tr.return}}function Ui(_r,Tr,Rr){var Ar=_r.pingCache;Ar!==null&&Ar.delete(Tr),Tr=L$2(),_r.pingedLanes|=_r.suspendedLanes&Rr,R$4===_r&&(Z$3&Rr)===Rr&&(T$3===4||T$3===3&&(Z$3&130023424)===Z$3&&500>B$3()-gk?Lk(_r,0):sk|=Rr),Ek(_r,Tr)}function Zk(_r,Tr){Tr===0&&(_r.mode&1?(Tr=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):Tr=1);var Rr=L$2();_r=Zg(_r,Tr),_r!==null&&(Ac(_r,Tr,Rr),Ek(_r,Rr))}function vj(_r){var Tr=_r.memoizedState,Rr=0;Tr!==null&&(Rr=Tr.retryLane),Zk(_r,Rr)}function ck(_r,Tr){var Rr=0;switch(_r.tag){case 13:var Ar=_r.stateNode,Pr=_r.memoizedState;Pr!==null&&(Rr=Pr.retryLane);break;case 19:Ar=_r.stateNode;break;default:throw Error(p$3(314))}Ar!==null&&Ar.delete(Tr),Zk(_r,Rr)}var Wk;Wk=function(_r,Tr,Rr){if(_r!==null)if(_r.memoizedProps!==Tr.pendingProps||Wf.current)Ug=!0;else{if(!(_r.lanes&Rr)&&!(Tr.flags&128))return Ug=!1,zj(_r,Tr,Rr);Ug=!!(_r.flags&131072)}else Ug=!1,I$3&&Tr.flags&1048576&&ug(Tr,ng,Tr.index);switch(Tr.lanes=0,Tr.tag){case 2:var Ar=Tr.type;jj(_r,Tr),_r=Tr.pendingProps;var Pr=Yf(Tr,H$3.current);Tg(Tr,Rr),Pr=Xh(null,Tr,Ar,_r,Pr,Rr);var Lr=bi();return Tr.flags|=1,typeof Pr=="object"&&Pr!==null&&typeof Pr.render=="function"&&Pr.$$typeof===void 0?(Tr.tag=1,Tr.memoizedState=null,Tr.updateQueue=null,Zf(Ar)?(Lr=!0,cg(Tr)):Lr=!1,Tr.memoizedState=Pr.state!==null&&Pr.state!==void 0?Pr.state:null,ah(Tr),Pr.updater=nh,Tr.stateNode=Pr,Pr._reactInternals=Tr,rh(Tr,Ar,_r,Rr),Tr=kj(null,Tr,Ar,!0,Lr,Rr)):(Tr.tag=0,I$3&&Lr&&vg(Tr),Yi(null,Tr,Pr,Rr),Tr=Tr.child),Tr;case 16:Ar=Tr.elementType;e:{switch(jj(_r,Tr),_r=Tr.pendingProps,Pr=Ar._init,Ar=Pr(Ar._payload),Tr.type=Ar,Pr=Tr.tag=$k(Ar),_r=Lg(Ar,_r),Pr){case 0:Tr=dj(null,Tr,Ar,_r,Rr);break e;case 1:Tr=ij(null,Tr,Ar,_r,Rr);break e;case 11:Tr=Zi(null,Tr,Ar,_r,Rr);break e;case 14:Tr=aj(null,Tr,Ar,Lg(Ar.type,_r),Rr);break e}throw Error(p$3(306,Ar,""))}return Tr;case 0:return Ar=Tr.type,Pr=Tr.pendingProps,Pr=Tr.elementType===Ar?Pr:Lg(Ar,Pr),dj(_r,Tr,Ar,Pr,Rr);case 1:return Ar=Tr.type,Pr=Tr.pendingProps,Pr=Tr.elementType===Ar?Pr:Lg(Ar,Pr),ij(_r,Tr,Ar,Pr,Rr);case 3:e:{if(lj(Tr),_r===null)throw Error(p$3(387));Ar=Tr.pendingProps,Lr=Tr.memoizedState,Pr=Lr.element,bh(_r,Tr),gh(Tr,Ar,null,Rr);var Mr=Tr.memoizedState;if(Ar=Mr.element,Lr.isDehydrated)if(Lr={element:Ar,isDehydrated:!1,cache:Mr.cache,pendingSuspenseBoundaries:Mr.pendingSuspenseBoundaries,transitions:Mr.transitions},Tr.updateQueue.baseState=Lr,Tr.memoizedState=Lr,Tr.flags&256){Pr=Ki(Error(p$3(423)),Tr),Tr=mj(_r,Tr,Ar,Rr,Pr);break e}else if(Ar!==Pr){Pr=Ki(Error(p$3(424)),Tr),Tr=mj(_r,Tr,Ar,Rr,Pr);break e}else for(yg=Lf(Tr.stateNode.containerInfo.firstChild),xg=Tr,I$3=!0,zg=null,Rr=Ch(Tr,null,Ar,Rr),Tr.child=Rr;Rr;)Rr.flags=Rr.flags&-3|4096,Rr=Rr.sibling;else{if(Ig(),Ar===Pr){Tr=$i(_r,Tr,Rr);break e}Yi(_r,Tr,Ar,Rr)}Tr=Tr.child}return Tr;case 5:return Kh(Tr),_r===null&&Eg(Tr),Ar=Tr.type,Pr=Tr.pendingProps,Lr=_r!==null?_r.memoizedProps:null,Mr=Pr.children,Ef(Ar,Pr)?Mr=null:Lr!==null&&Ef(Ar,Lr)&&(Tr.flags|=32),hj(_r,Tr),Yi(_r,Tr,Mr,Rr),Tr.child;case 6:return _r===null&&Eg(Tr),null;case 13:return pj(_r,Tr,Rr);case 4:return Ih(Tr,Tr.stateNode.containerInfo),Ar=Tr.pendingProps,_r===null?Tr.child=Bh(Tr,null,Ar,Rr):Yi(_r,Tr,Ar,Rr),Tr.child;case 11:return Ar=Tr.type,Pr=Tr.pendingProps,Pr=Tr.elementType===Ar?Pr:Lg(Ar,Pr),Zi(_r,Tr,Ar,Pr,Rr);case 7:return Yi(_r,Tr,Tr.pendingProps,Rr),Tr.child;case 8:return Yi(_r,Tr,Tr.pendingProps.children,Rr),Tr.child;case 12:return Yi(_r,Tr,Tr.pendingProps.children,Rr),Tr.child;case 10:e:{if(Ar=Tr.type._context,Pr=Tr.pendingProps,Lr=Tr.memoizedProps,Mr=Pr.value,G$4(Mg,Ar._currentValue),Ar._currentValue=Mr,Lr!==null)if(He$2(Lr.value,Mr)){if(Lr.children===Pr.children&&!Wf.current){Tr=$i(_r,Tr,Rr);break e}}else for(Lr=Tr.child,Lr!==null&&(Lr.return=Tr);Lr!==null;){var Fr=Lr.dependencies;if(Fr!==null){Mr=Lr.child;for(var zr=Fr.firstContext;zr!==null;){if(zr.context===Ar){if(Lr.tag===1){zr=ch(-1,Rr&-Rr),zr.tag=2;var Ur=Lr.updateQueue;if(Ur!==null){Ur=Ur.shared;var Vr=Ur.pending;Vr===null?zr.next=zr:(zr.next=Vr.next,Vr.next=zr),Ur.pending=zr}}Lr.lanes|=Rr,zr=Lr.alternate,zr!==null&&(zr.lanes|=Rr),Sg(Lr.return,Rr,Tr),Fr.lanes|=Rr;break}zr=zr.next}}else if(Lr.tag===10)Mr=Lr.type===Tr.type?null:Lr.child;else if(Lr.tag===18){if(Mr=Lr.return,Mr===null)throw Error(p$3(341));Mr.lanes|=Rr,Fr=Mr.alternate,Fr!==null&&(Fr.lanes|=Rr),Sg(Mr,Rr,Tr),Mr=Lr.sibling}else Mr=Lr.child;if(Mr!==null)Mr.return=Lr;else for(Mr=Lr;Mr!==null;){if(Mr===Tr){Mr=null;break}if(Lr=Mr.sibling,Lr!==null){Lr.return=Mr.return,Mr=Lr;break}Mr=Mr.return}Lr=Mr}Yi(_r,Tr,Pr.children,Rr),Tr=Tr.child}return Tr;case 9:return Pr=Tr.type,Ar=Tr.pendingProps.children,Tg(Tr,Rr),Pr=Vg(Pr),Ar=Ar(Pr),Tr.flags|=1,Yi(_r,Tr,Ar,Rr),Tr.child;case 14:return Ar=Tr.type,Pr=Lg(Ar,Tr.pendingProps),Pr=Lg(Ar.type,Pr),aj(_r,Tr,Ar,Pr,Rr);case 15:return cj(_r,Tr,Tr.type,Tr.pendingProps,Rr);case 17:return Ar=Tr.type,Pr=Tr.pendingProps,Pr=Tr.elementType===Ar?Pr:Lg(Ar,Pr),jj(_r,Tr),Tr.tag=1,Zf(Ar)?(_r=!0,cg(Tr)):_r=!1,Tg(Tr,Rr),ph(Tr,Ar,Pr),rh(Tr,Ar,Pr,Rr),kj(null,Tr,Ar,!0,_r,Rr);case 19:return yj(_r,Tr,Rr);case 22:return ej(_r,Tr,Rr)}throw Error(p$3(156,Tr.tag))};function Gk(_r,Tr){return ac(_r,Tr)}function al(_r,Tr,Rr,Ar){this.tag=_r,this.key=Rr,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=Tr,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Ar,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_r,Tr,Rr,Ar){return new al(_r,Tr,Rr,Ar)}function bj(_r){return _r=_r.prototype,!(!_r||!_r.isReactComponent)}function $k(_r){if(typeof _r=="function")return bj(_r)?1:0;if(_r!=null){if(_r=_r.$$typeof,_r===Da)return 11;if(_r===Ga)return 14}return 2}function wh(_r,Tr){var Rr=_r.alternate;return Rr===null?(Rr=Bg(_r.tag,Tr,_r.key,_r.mode),Rr.elementType=_r.elementType,Rr.type=_r.type,Rr.stateNode=_r.stateNode,Rr.alternate=_r,_r.alternate=Rr):(Rr.pendingProps=Tr,Rr.type=_r.type,Rr.flags=0,Rr.subtreeFlags=0,Rr.deletions=null),Rr.flags=_r.flags&14680064,Rr.childLanes=_r.childLanes,Rr.lanes=_r.lanes,Rr.child=_r.child,Rr.memoizedProps=_r.memoizedProps,Rr.memoizedState=_r.memoizedState,Rr.updateQueue=_r.updateQueue,Tr=_r.dependencies,Rr.dependencies=Tr===null?null:{lanes:Tr.lanes,firstContext:Tr.firstContext},Rr.sibling=_r.sibling,Rr.index=_r.index,Rr.ref=_r.ref,Rr}function yh(_r,Tr,Rr,Ar,Pr,Lr){var Mr=2;if(Ar=_r,typeof _r=="function")bj(_r)&&(Mr=1);else if(typeof _r=="string")Mr=5;else e:switch(_r){case ya:return Ah(Rr.children,Pr,Lr,Tr);case za:Mr=8,Pr|=8;break;case Aa:return _r=Bg(12,Rr,Tr,Pr|2),_r.elementType=Aa,_r.lanes=Lr,_r;case Ea:return _r=Bg(13,Rr,Tr,Pr),_r.elementType=Ea,_r.lanes=Lr,_r;case Fa:return _r=Bg(19,Rr,Tr,Pr),_r.elementType=Fa,_r.lanes=Lr,_r;case Ia:return qj(Rr,Pr,Lr,Tr);default:if(typeof _r=="object"&&_r!==null)switch(_r.$$typeof){case Ba:Mr=10;break e;case Ca:Mr=9;break e;case Da:Mr=11;break e;case Ga:Mr=14;break e;case Ha:Mr=16,Ar=null;break e}throw Error(p$3(130,_r==null?_r:typeof _r,""))}return Tr=Bg(Mr,Rr,Tr,Pr),Tr.elementType=_r,Tr.type=Ar,Tr.lanes=Lr,Tr}function Ah(_r,Tr,Rr,Ar){return _r=Bg(7,_r,Ar,Tr),_r.lanes=Rr,_r}function qj(_r,Tr,Rr,Ar){return _r=Bg(22,_r,Ar,Tr),_r.elementType=Ia,_r.lanes=Rr,_r.stateNode={isHidden:!1},_r}function xh(_r,Tr,Rr){return _r=Bg(6,_r,null,Tr),_r.lanes=Rr,_r}function zh(_r,Tr,Rr){return Tr=Bg(4,_r.children!==null?_r.children:[],_r.key,Tr),Tr.lanes=Rr,Tr.stateNode={containerInfo:_r.containerInfo,pendingChildren:null,implementation:_r.implementation},Tr}function bl(_r,Tr,Rr,Ar,Pr){this.tag=Tr,this.containerInfo=_r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=Ar,this.onRecoverableError=Pr,this.mutableSourceEagerHydrationData=null}function cl(_r,Tr,Rr,Ar,Pr,Lr,Mr,Fr,zr){return _r=new bl(_r,Tr,Rr,Fr,zr),Tr===1?(Tr=1,Lr===!0&&(Tr|=8)):Tr=0,Lr=Bg(3,null,null,Tr),_r.current=Lr,Lr.stateNode=_r,Lr.memoizedState={element:Ar,isDehydrated:Rr,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(Lr),_r}function dl(_r,Tr,Rr){var Ar=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:Ar==null?null:""+Ar,children:_r,containerInfo:Tr,implementation:Rr}}function el(_r){if(!_r)return Vf;_r=_r._reactInternals;e:{if(Vb(_r)!==_r||_r.tag!==1)throw Error(p$3(170));var Tr=_r;do{switch(Tr.tag){case 3:Tr=Tr.stateNode.context;break e;case 1:if(Zf(Tr.type)){Tr=Tr.stateNode.__reactInternalMemoizedMergedChildContext;break e}}Tr=Tr.return}while(Tr!==null);throw Error(p$3(171))}if(_r.tag===1){var Rr=_r.type;if(Zf(Rr))return bg(_r,Rr,Tr)}return Tr}function fl(_r,Tr,Rr,Ar,Pr,Lr,Mr,Fr,zr){return _r=cl(Rr,Ar,!0,_r,Pr,Lr,Mr,Fr,zr),_r.context=el(null),Rr=_r.current,Ar=L$2(),Pr=lh(Rr),Lr=ch(Ar,Pr),Lr.callback=Tr??null,dh(Rr,Lr,Pr),_r.current.lanes=Pr,Ac(_r,Pr,Ar),Ek(_r,Ar),_r}function gl(_r,Tr,Rr,Ar){var Pr=Tr.current,Lr=L$2(),Mr=lh(Pr);return Rr=el(Rr),Tr.context===null?Tr.context=Rr:Tr.pendingContext=Rr,Tr=ch(Lr,Mr),Tr.payload={element:_r},Ar=Ar===void 0?null:Ar,Ar!==null&&(Tr.callback=Ar),_r=dh(Pr,Tr,Mr),_r!==null&&(mh(_r,Pr,Mr,Lr),eh(_r,Pr,Mr)),Mr}function hl(_r){if(_r=_r.current,!_r.child)return null;switch(_r.child.tag){case 5:return _r.child.stateNode;default:return _r.child.stateNode}}function il(_r,Tr){if(_r=_r.memoizedState,_r!==null&&_r.dehydrated!==null){var Rr=_r.retryLane;_r.retryLane=Rr!==0&&Rr<Tr?Rr:Tr}}function jl(_r,Tr){il(_r,Tr),(_r=_r.alternate)&&il(_r,Tr)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(_r){console.error(_r)};function ml(_r){this._internalRoot=_r}nl.prototype.render=ml.prototype.render=function(_r){var Tr=this._internalRoot;if(Tr===null)throw Error(p$3(409));gl(_r,Tr,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var _r=this._internalRoot;if(_r!==null){this._internalRoot=null;var Tr=_r.containerInfo;Sk(function(){gl(null,_r,null,null)}),Tr[uf]=null}};function nl(_r){this._internalRoot=_r}nl.prototype.unstable_scheduleHydration=function(_r){if(_r){var Tr=Hc();_r={blockedOn:null,target:_r,priority:Tr};for(var Rr=0;Rr<Qc.length&&Tr!==0&&Tr<Qc[Rr].priority;Rr++);Qc.splice(Rr,0,_r),Rr===0&&Vc(_r)}};function ol(_r){return!(!_r||_r.nodeType!==1&&_r.nodeType!==9&&_r.nodeType!==11)}function pl(_r){return!(!_r||_r.nodeType!==1&&_r.nodeType!==9&&_r.nodeType!==11&&(_r.nodeType!==8||_r.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(_r,Tr,Rr,Ar,Pr){if(Pr){if(typeof Ar=="function"){var Lr=Ar;Ar=function(){var Ur=hl(Mr);Lr.call(Ur)}}var Mr=fl(Tr,Ar,_r,0,null,!1,!1,"",ql);return _r._reactRootContainer=Mr,_r[uf]=Mr.current,sf(_r.nodeType===8?_r.parentNode:_r),Sk(),Mr}for(;Pr=_r.lastChild;)_r.removeChild(Pr);if(typeof Ar=="function"){var Fr=Ar;Ar=function(){var Ur=hl(zr);Fr.call(Ur)}}var zr=cl(_r,0,!1,null,null,!1,!1,"",ql);return _r._reactRootContainer=zr,_r[uf]=zr.current,sf(_r.nodeType===8?_r.parentNode:_r),Sk(function(){gl(Tr,zr,Rr,Ar)}),zr}function sl(_r,Tr,Rr,Ar,Pr){var Lr=Rr._reactRootContainer;if(Lr){var Mr=Lr;if(typeof Pr=="function"){var Fr=Pr;Pr=function(){var zr=hl(Mr);Fr.call(zr)}}gl(Tr,Mr,_r,Pr)}else Mr=rl(Rr,Tr,_r,Pr,Ar);return hl(Mr)}Ec=function(_r){switch(_r.tag){case 3:var Tr=_r.stateNode;if(Tr.current.memoizedState.isDehydrated){var Rr=tc(Tr.pendingLanes);Rr!==0&&(Cc(Tr,Rr|1),Ek(Tr,B$3()),!(K$4&6)&&(Hj=B$3()+500,jg()))}break;case 13:Sk(function(){var Ar=Zg(_r,1);if(Ar!==null){var Pr=L$2();mh(Ar,_r,1,Pr)}}),jl(_r,1)}};Fc=function(_r){if(_r.tag===13){var Tr=Zg(_r,134217728);if(Tr!==null){var Rr=L$2();mh(Tr,_r,134217728,Rr)}jl(_r,134217728)}};Gc=function(_r){if(_r.tag===13){var Tr=lh(_r),Rr=Zg(_r,Tr);if(Rr!==null){var Ar=L$2();mh(Rr,_r,Tr,Ar)}jl(_r,Tr)}};Hc=function(){return C$2};Ic=function(_r,Tr){var Rr=C$2;try{return C$2=_r,Tr()}finally{C$2=Rr}};yb=function(_r,Tr,Rr){switch(Tr){case"input":if(bb(_r,Rr),Tr=Rr.name,Rr.type==="radio"&&Tr!=null){for(Rr=_r;Rr.parentNode;)Rr=Rr.parentNode;for(Rr=Rr.querySelectorAll("input[name="+JSON.stringify(""+Tr)+'][type="radio"]'),Tr=0;Tr<Rr.length;Tr++){var Ar=Rr[Tr];if(Ar!==_r&&Ar.form===_r.form){var Pr=Db(Ar);if(!Pr)throw Error(p$3(90));Wa(Ar),bb(Ar,Pr)}}}break;case"textarea":ib(_r,Rr);break;case"select":Tr=Rr.value,Tr!=null&&fb(_r,!!Rr.multiple,Tr,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(_r){return _r=Zb(_r),_r===null?null:_r.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(_r,Tr){var Rr=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(Tr))throw Error(p$3(200));return dl(_r,Tr,null,Rr)};reactDom_production_min.createRoot=function(_r,Tr){if(!ol(_r))throw Error(p$3(299));var Rr=!1,Ar="",Pr=ll;return Tr!=null&&(Tr.unstable_strictMode===!0&&(Rr=!0),Tr.identifierPrefix!==void 0&&(Ar=Tr.identifierPrefix),Tr.onRecoverableError!==void 0&&(Pr=Tr.onRecoverableError)),Tr=cl(_r,1,!1,null,null,Rr,!1,Ar,Pr),_r[uf]=Tr.current,sf(_r.nodeType===8?_r.parentNode:_r),new ml(Tr)};reactDom_production_min.findDOMNode=function(_r){if(_r==null)return null;if(_r.nodeType===1)return _r;var Tr=_r._reactInternals;if(Tr===void 0)throw typeof _r.render=="function"?Error(p$3(188)):(_r=Object.keys(_r).join(","),Error(p$3(268,_r)));return _r=Zb(Tr),_r=_r===null?null:_r.stateNode,_r};reactDom_production_min.flushSync=function(_r){return Sk(_r)};reactDom_production_min.hydrate=function(_r,Tr,Rr){if(!pl(Tr))throw Error(p$3(200));return sl(null,_r,Tr,!0,Rr)};reactDom_production_min.hydrateRoot=function(_r,Tr,Rr){if(!ol(_r))throw Error(p$3(405));var Ar=Rr!=null&&Rr.hydratedSources||null,Pr=!1,Lr="",Mr=ll;if(Rr!=null&&(Rr.unstable_strictMode===!0&&(Pr=!0),Rr.identifierPrefix!==void 0&&(Lr=Rr.identifierPrefix),Rr.onRecoverableError!==void 0&&(Mr=Rr.onRecoverableError)),Tr=fl(Tr,null,_r,1,Rr??null,Pr,!1,Lr,Mr),_r[uf]=Tr.current,sf(_r),Ar)for(_r=0;_r<Ar.length;_r++)Rr=Ar[_r],Pr=Rr._getVersion,Pr=Pr(Rr._source),Tr.mutableSourceEagerHydrationData==null?Tr.mutableSourceEagerHydrationData=[Rr,Pr]:Tr.mutableSourceEagerHydrationData.push(Rr,Pr);return new nl(Tr)};reactDom_production_min.render=function(_r,Tr,Rr){if(!pl(Tr))throw Error(p$3(200));return sl(null,_r,Tr,!1,Rr)};reactDom_production_min.unmountComponentAtNode=function(_r){if(!pl(_r))throw Error(p$3(40));return _r._reactRootContainer?(Sk(function(){sl(null,null,_r,!1,function(){_r._reactRootContainer=null,_r[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_r,Tr,Rr,Ar){if(!pl(Rr))throw Error(p$3(200));if(_r==null||_r._reactInternals===void 0)throw Error(p$3(38));return sl(_r,Tr,Rr,!1,Ar)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_r){console.error(_r)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m$3=reactDomExports;createRoot=m$3.createRoot,m$3.hydrateRoot;/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$18(){return _extends$18=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$18.apply(this,arguments)}var Action;(function(_r){_r.Pop="POP",_r.Push="PUSH",_r.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(_r){_r===void 0&&(_r={});function Tr(Ar,Pr){let{pathname:Lr,search:Mr,hash:Fr}=Ar.location;return createLocation("",{pathname:Lr,search:Mr,hash:Fr},Pr.state&&Pr.state.usr||null,Pr.state&&Pr.state.key||"default")}function Rr(Ar,Pr){return typeof Pr=="string"?Pr:createPath(Pr)}return getUrlBasedHistory(Tr,Rr,null,_r)}function invariant(_r,Tr){if(_r===!1||_r===null||typeof _r>"u")throw new Error(Tr)}function warning$1(_r,Tr){if(!_r){typeof console<"u"&&console.warn(Tr);try{throw new Error(Tr)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(_r,Tr){return{usr:_r.state,key:_r.key,idx:Tr}}function createLocation(_r,Tr,Rr,Ar){return Rr===void 0&&(Rr=null),_extends$18({pathname:typeof _r=="string"?_r:_r.pathname,search:"",hash:""},typeof Tr=="string"?parsePath(Tr):Tr,{state:Rr,key:Tr&&Tr.key||Ar||createKey()})}function createPath(_r){let{pathname:Tr="/",search:Rr="",hash:Ar=""}=_r;return Rr&&Rr!=="?"&&(Tr+=Rr.charAt(0)==="?"?Rr:"?"+Rr),Ar&&Ar!=="#"&&(Tr+=Ar.charAt(0)==="#"?Ar:"#"+Ar),Tr}function parsePath(_r){let Tr={};if(_r){let Rr=_r.indexOf("#");Rr>=0&&(Tr.hash=_r.substr(Rr),_r=_r.substr(0,Rr));let Ar=_r.indexOf("?");Ar>=0&&(Tr.search=_r.substr(Ar),_r=_r.substr(0,Ar)),_r&&(Tr.pathname=_r)}return Tr}function getUrlBasedHistory(_r,Tr,Rr,Ar){Ar===void 0&&(Ar={});let{window:Pr=document.defaultView,v5Compat:Lr=!1}=Ar,Mr=Pr.history,Fr=Action.Pop,zr=null,Ur=Vr();Ur==null&&(Ur=0,Mr.replaceState(_extends$18({},Mr.state,{idx:Ur}),""));function Vr(){return(Mr.state||{idx:null}).idx}function Nr(){Fr=Action.Pop;let qr=Vr(),Kr=qr==null?null:qr-Ur;Ur=qr,zr&&zr({action:Fr,location:Wr.location,delta:Kr})}function Dr(qr,Kr){Fr=Action.Push;let Xr=createLocation(Wr.location,qr,Kr);Rr&&Rr(Xr,qr),Ur=Vr()+1;let Zr=getHistoryState(Xr,Ur),Jr=Wr.createHref(Xr);try{Mr.pushState(Zr,"",Jr)}catch(_i){if(_i instanceof DOMException&&_i.name==="DataCloneError")throw _i;Pr.location.assign(Jr)}Lr&&zr&&zr({action:Fr,location:Wr.location,delta:1})}function jr(qr,Kr){Fr=Action.Replace;let Xr=createLocation(Wr.location,qr,Kr);Rr&&Rr(Xr,qr),Ur=Vr();let Zr=getHistoryState(Xr,Ur),Jr=Wr.createHref(Xr);Mr.replaceState(Zr,"",Jr),Lr&&zr&&zr({action:Fr,location:Wr.location,delta:0})}function Gr(qr){let Kr=Pr.location.origin!=="null"?Pr.location.origin:Pr.location.href,Xr=typeof qr=="string"?qr:createPath(qr);return invariant(Kr,"No window.location.(origin|href) available to create URL for href: "+Xr),new URL(Xr,Kr)}let Wr={get action(){return Fr},get location(){return _r(Pr,Mr)},listen(qr){if(zr)throw new Error("A history only accepts one active listener");return Pr.addEventListener(PopStateEventType,Nr),zr=qr,()=>{Pr.removeEventListener(PopStateEventType,Nr),zr=null}},createHref(qr){return Tr(Pr,qr)},createURL:Gr,encodeLocation(qr){let Kr=Gr(qr);return{pathname:Kr.pathname,search:Kr.search,hash:Kr.hash}},push:Dr,replace:jr,go(qr){return Mr.go(qr)}};return Wr}var ResultType;(function(_r){_r.data="data",_r.deferred="deferred",_r.redirect="redirect",_r.error="error"})(ResultType||(ResultType={}));function matchRoutes(_r,Tr,Rr){Rr===void 0&&(Rr="/");let Ar=typeof Tr=="string"?parsePath(Tr):Tr,Pr=stripBasename(Ar.pathname||"/",Rr);if(Pr==null)return null;let Lr=flattenRoutes(_r);rankRouteBranches(Lr);let Mr=null;for(let Fr=0;Mr==null&&Fr<Lr.length;++Fr)Mr=matchRouteBranch(Lr[Fr],safelyDecodeURI(Pr));return Mr}function flattenRoutes(_r,Tr,Rr,Ar){Tr===void 0&&(Tr=[]),Rr===void 0&&(Rr=[]),Ar===void 0&&(Ar="");let Pr=(Lr,Mr,Fr)=>{let zr={relativePath:Fr===void 0?Lr.path||"":Fr,caseSensitive:Lr.caseSensitive===!0,childrenIndex:Mr,route:Lr};zr.relativePath.startsWith("/")&&(invariant(zr.relativePath.startsWith(Ar),'Absolute route path "'+zr.relativePath+'" nested under path '+('"'+Ar+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),zr.relativePath=zr.relativePath.slice(Ar.length));let Ur=joinPaths([Ar,zr.relativePath]),Vr=Rr.concat(zr);Lr.children&&Lr.children.length>0&&(invariant(Lr.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+Ur+'".')),flattenRoutes(Lr.children,Tr,Vr,Ur)),!(Lr.path==null&&!Lr.index)&&Tr.push({path:Ur,score:computeScore(Ur,Lr.index),routesMeta:Vr})};return _r.forEach((Lr,Mr)=>{var Fr;if(Lr.path===""||!((Fr=Lr.path)!=null&&Fr.includes("?")))Pr(Lr,Mr);else for(let zr of explodeOptionalSegments(Lr.path))Pr(Lr,Mr,zr)}),Tr}function explodeOptionalSegments(_r){let Tr=_r.split("/");if(Tr.length===0)return[];let[Rr,...Ar]=Tr,Pr=Rr.endsWith("?"),Lr=Rr.replace(/\?$/,"");if(Ar.length===0)return Pr?[Lr,""]:[Lr];let Mr=explodeOptionalSegments(Ar.join("/")),Fr=[];return Fr.push(...Mr.map(zr=>zr===""?Lr:[Lr,zr].join("/"))),Pr&&Fr.push(...Mr),Fr.map(zr=>_r.startsWith("/")&&zr===""?"/":zr)}function rankRouteBranches(_r){_r.sort((Tr,Rr)=>Tr.score!==Rr.score?Rr.score-Tr.score:compareIndexes(Tr.routesMeta.map(Ar=>Ar.childrenIndex),Rr.routesMeta.map(Ar=>Ar.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_r=>_r==="*";function computeScore(_r,Tr){let Rr=_r.split("/"),Ar=Rr.length;return Rr.some(isSplat)&&(Ar+=splatPenalty),Tr&&(Ar+=indexRouteValue),Rr.filter(Pr=>!isSplat(Pr)).reduce((Pr,Lr)=>Pr+(paramRe.test(Lr)?dynamicSegmentValue:Lr===""?emptySegmentValue:staticSegmentValue),Ar)}function compareIndexes(_r,Tr){return _r.length===Tr.length&&_r.slice(0,-1).every((Ar,Pr)=>Ar===Tr[Pr])?_r[_r.length-1]-Tr[Tr.length-1]:0}function matchRouteBranch(_r,Tr){let{routesMeta:Rr}=_r,Ar={},Pr="/",Lr=[];for(let Mr=0;Mr<Rr.length;++Mr){let Fr=Rr[Mr],zr=Mr===Rr.length-1,Ur=Pr==="/"?Tr:Tr.slice(Pr.length)||"/",Vr=matchPath({path:Fr.relativePath,caseSensitive:Fr.caseSensitive,end:zr},Ur);if(!Vr)return null;Object.assign(Ar,Vr.params);let Nr=Fr.route;Lr.push({params:Ar,pathname:joinPaths([Pr,Vr.pathname]),pathnameBase:normalizePathname(joinPaths([Pr,Vr.pathnameBase])),route:Nr}),Vr.pathnameBase!=="/"&&(Pr=joinPaths([Pr,Vr.pathnameBase]))}return Lr}function matchPath(_r,Tr){typeof _r=="string"&&(_r={path:_r,caseSensitive:!1,end:!0});let[Rr,Ar]=compilePath(_r.path,_r.caseSensitive,_r.end),Pr=Tr.match(Rr);if(!Pr)return null;let Lr=Pr[0],Mr=Lr.replace(/(.)\/+$/,"$1"),Fr=Pr.slice(1);return{params:Ar.reduce((Ur,Vr,Nr)=>{if(Vr==="*"){let Dr=Fr[Nr]||"";Mr=Lr.slice(0,Lr.length-Dr.length).replace(/(.)\/+$/,"$1")}return Ur[Vr]=safelyDecodeURIComponent(Fr[Nr]||"",Vr),Ur},{}),pathname:Lr,pathnameBase:Mr,pattern:_r}}function compilePath(_r,Tr,Rr){Tr===void 0&&(Tr=!1),Rr===void 0&&(Rr=!0),warning$1(_r==="*"||!_r.endsWith("*")||_r.endsWith("/*"),'Route path "'+_r+'" will be treated as if it were '+('"'+_r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+_r.replace(/\*$/,"/*")+'".'));let Ar=[],Pr="^"+_r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(Mr,Fr)=>(Ar.push(Fr),"/([^\\/]+)"));return _r.endsWith("*")?(Ar.push("*"),Pr+=_r==="*"||_r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):Rr?Pr+="\\/*$":_r!==""&&_r!=="/"&&(Pr+="(?:(?=\\/|$))"),[new RegExp(Pr,Tr?void 0:"i"),Ar]}function safelyDecodeURI(_r){try{return decodeURI(_r)}catch(Tr){return warning$1(!1,'The URL path "'+_r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+Tr+").")),_r}}function safelyDecodeURIComponent(_r,Tr){try{return decodeURIComponent(_r)}catch(Rr){return warning$1(!1,'The value for the URL param "'+Tr+'" will not be decoded because'+(' the string "'+_r+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+Rr+").")),_r}}function stripBasename(_r,Tr){if(Tr==="/")return _r;if(!_r.toLowerCase().startsWith(Tr.toLowerCase()))return null;let Rr=Tr.endsWith("/")?Tr.length-1:Tr.length,Ar=_r.charAt(Rr);return Ar&&Ar!=="/"?null:_r.slice(Rr)||"/"}function resolvePath(_r,Tr){Tr===void 0&&(Tr="/");let{pathname:Rr,search:Ar="",hash:Pr=""}=typeof _r=="string"?parsePath(_r):_r;return{pathname:Rr?Rr.startsWith("/")?Rr:resolvePathname(Rr,Tr):Tr,search:normalizeSearch(Ar),hash:normalizeHash(Pr)}}function resolvePathname(_r,Tr){let Rr=Tr.replace(/\/+$/,"").split("/");return _r.split("/").forEach(Pr=>{Pr===".."?Rr.length>1&&Rr.pop():Pr!=="."&&Rr.push(Pr)}),Rr.length>1?Rr.join("/"):"/"}function getInvalidPathError(_r,Tr,Rr,Ar){return"Cannot include a '"+_r+"' character in a manually specified "+("`to."+Tr+"` field ["+JSON.stringify(Ar)+"].  Please separate it out to the ")+("`to."+Rr+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(_r){return _r.filter((Tr,Rr)=>Rr===0||Tr.route.path&&Tr.route.path.length>0)}function resolveTo(_r,Tr,Rr,Ar){Ar===void 0&&(Ar=!1);let Pr;typeof _r=="string"?Pr=parsePath(_r):(Pr=_extends$18({},_r),invariant(!Pr.pathname||!Pr.pathname.includes("?"),getInvalidPathError("?","pathname","search",Pr)),invariant(!Pr.pathname||!Pr.pathname.includes("#"),getInvalidPathError("#","pathname","hash",Pr)),invariant(!Pr.search||!Pr.search.includes("#"),getInvalidPathError("#","search","hash",Pr)));let Lr=_r===""||Pr.pathname==="",Mr=Lr?"/":Pr.pathname,Fr;if(Ar||Mr==null)Fr=Rr;else{let Nr=Tr.length-1;if(Mr.startsWith("..")){let Dr=Mr.split("/");for(;Dr[0]==="..";)Dr.shift(),Nr-=1;Pr.pathname=Dr.join("/")}Fr=Nr>=0?Tr[Nr]:"/"}let zr=resolvePath(Pr,Fr),Ur=Mr&&Mr!=="/"&&Mr.endsWith("/"),Vr=(Lr||Mr===".")&&Rr.endsWith("/");return!zr.pathname.endsWith("/")&&(Ur||Vr)&&(zr.pathname+="/"),zr}const joinPaths=_r=>_r.join("/").replace(/\/\/+/g,"/"),normalizePathname=_r=>_r.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_r=>!_r||_r==="?"?"":_r.startsWith("?")?_r:"?"+_r,normalizeHash=_r=>!_r||_r==="#"?"":_r.startsWith("#")?_r:"#"+_r;function isRouteErrorResponse(_r){return _r!=null&&typeof _r.status=="number"&&typeof _r.statusText=="string"&&typeof _r.internal=="boolean"&&"data"in _r}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$17(){return _extends$17=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$17.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(_r,Tr){let{relative:Rr}=Tr===void 0?{}:Tr;useInRouterContext()||invariant(!1);let{basename:Ar,navigator:Pr}=reactExports.useContext(NavigationContext),{hash:Lr,pathname:Mr,search:Fr}=useResolvedPath(_r,{relative:Rr}),zr=Mr;return Ar!=="/"&&(zr=Mr==="/"?Ar:joinPaths([Ar,Mr])),Pr.createHref({pathname:zr,search:Fr,hash:Lr})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useMatch(_r){useInRouterContext()||invariant(!1);let{pathname:Tr}=useLocation();return reactExports.useMemo(()=>matchPath(_r,Tr),[Tr,_r])}function useIsomorphicLayoutEffect$1(_r){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(_r)}function useNavigate(){let{isDataRoute:_r}=reactExports.useContext(RouteContext);return _r?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let _r=reactExports.useContext(DataRouterContext),{basename:Tr,navigator:Rr}=reactExports.useContext(NavigationContext),{matches:Ar}=reactExports.useContext(RouteContext),{pathname:Pr}=useLocation(),Lr=JSON.stringify(getPathContributingMatches(Ar).map(zr=>zr.pathnameBase)),Mr=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{Mr.current=!0}),reactExports.useCallback(function(zr,Ur){if(Ur===void 0&&(Ur={}),!Mr.current)return;if(typeof zr=="number"){Rr.go(zr);return}let Vr=resolveTo(zr,JSON.parse(Lr),Pr,Ur.relative==="path");_r==null&&Tr!=="/"&&(Vr.pathname=Vr.pathname==="/"?Tr:joinPaths([Tr,Vr.pathname])),(Ur.replace?Rr.replace:Rr.push)(Vr,Ur.state,Ur)},[Tr,Rr,Lr,Pr,_r])}const OutletContext=reactExports.createContext(null);function useOutlet(_r){let Tr=reactExports.useContext(RouteContext).outlet;return Tr&&reactExports.createElement(OutletContext.Provider,{value:_r},Tr)}function useResolvedPath(_r,Tr){let{relative:Rr}=Tr===void 0?{}:Tr,{matches:Ar}=reactExports.useContext(RouteContext),{pathname:Pr}=useLocation(),Lr=JSON.stringify(getPathContributingMatches(Ar).map(Mr=>Mr.pathnameBase));return reactExports.useMemo(()=>resolveTo(_r,JSON.parse(Lr),Pr,Rr==="path"),[_r,Lr,Pr,Rr])}function useRoutes(_r,Tr){return useRoutesImpl(_r,Tr)}function useRoutesImpl(_r,Tr,Rr){useInRouterContext()||invariant(!1);let{navigator:Ar}=reactExports.useContext(NavigationContext),{matches:Pr}=reactExports.useContext(RouteContext),Lr=Pr[Pr.length-1],Mr=Lr?Lr.params:{};Lr&&Lr.pathname;let Fr=Lr?Lr.pathnameBase:"/";Lr&&Lr.route;let zr=useLocation(),Ur;if(Tr){var Vr;let Wr=typeof Tr=="string"?parsePath(Tr):Tr;Fr==="/"||(Vr=Wr.pathname)!=null&&Vr.startsWith(Fr)||invariant(!1),Ur=Wr}else Ur=zr;let Nr=Ur.pathname||"/",Dr=Fr==="/"?Nr:Nr.slice(Fr.length)||"/",jr=matchRoutes(_r,{pathname:Dr}),Gr=_renderMatches(jr&&jr.map(Wr=>Object.assign({},Wr,{params:Object.assign({},Mr,Wr.params),pathname:joinPaths([Fr,Ar.encodeLocation?Ar.encodeLocation(Wr.pathname).pathname:Wr.pathname]),pathnameBase:Wr.pathnameBase==="/"?Fr:joinPaths([Fr,Ar.encodeLocation?Ar.encodeLocation(Wr.pathnameBase).pathname:Wr.pathnameBase])})),Pr,Rr);return Tr&&Gr?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$17({pathname:"/",search:"",hash:"",state:null,key:"default"},Ur),navigationType:Action.Pop}},Gr):Gr}function DefaultErrorComponent(){let _r=useRouteError(),Tr=isRouteErrorResponse(_r)?_r.status+" "+_r.statusText:_r instanceof Error?_r.message:JSON.stringify(_r),Rr=_r instanceof Error?_r.stack:null,Pr={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},Lr=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},Tr),Rr?reactExports.createElement("pre",{style:Pr},Rr):null,Lr)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(Tr){super(Tr),this.state={location:Tr.location,revalidation:Tr.revalidation,error:Tr.error}}static getDerivedStateFromError(Tr){return{error:Tr}}static getDerivedStateFromProps(Tr,Rr){return Rr.location!==Tr.location||Rr.revalidation!=="idle"&&Tr.revalidation==="idle"?{error:Tr.error,location:Tr.location,revalidation:Tr.revalidation}:{error:Tr.error||Rr.error,location:Rr.location,revalidation:Tr.revalidation||Rr.revalidation}}componentDidCatch(Tr,Rr){console.error("React Router caught the following error during render",Tr,Rr)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(_r){let{routeContext:Tr,match:Rr,children:Ar}=_r,Pr=reactExports.useContext(DataRouterContext);return Pr&&Pr.static&&Pr.staticContext&&(Rr.route.errorElement||Rr.route.ErrorBoundary)&&(Pr.staticContext._deepestRenderedBoundaryId=Rr.route.id),reactExports.createElement(RouteContext.Provider,{value:Tr},Ar)}function _renderMatches(_r,Tr,Rr){var Ar;if(Tr===void 0&&(Tr=[]),Rr===void 0&&(Rr=null),_r==null){var Pr;if((Pr=Rr)!=null&&Pr.errors)_r=Rr.matches;else return null}let Lr=_r,Mr=(Ar=Rr)==null?void 0:Ar.errors;if(Mr!=null){let Fr=Lr.findIndex(zr=>zr.route.id&&(Mr==null?void 0:Mr[zr.route.id]));Fr>=0||invariant(!1),Lr=Lr.slice(0,Math.min(Lr.length,Fr+1))}return Lr.reduceRight((Fr,zr,Ur)=>{let Vr=zr.route.id?Mr==null?void 0:Mr[zr.route.id]:null,Nr=null;Rr&&(Nr=zr.route.errorElement||defaultErrorElement);let Dr=Tr.concat(Lr.slice(0,Ur+1)),jr=()=>{let Gr;return Vr?Gr=Nr:zr.route.Component?Gr=reactExports.createElement(zr.route.Component,null):zr.route.element?Gr=zr.route.element:Gr=Fr,reactExports.createElement(RenderedRoute,{match:zr,routeContext:{outlet:Fr,matches:Dr,isDataRoute:Rr!=null},children:Gr})};return Rr&&(zr.route.ErrorBoundary||zr.route.errorElement||Ur===0)?reactExports.createElement(RenderErrorBoundary,{location:Rr.location,revalidation:Rr.revalidation,component:Nr,error:Vr,children:jr(),routeContext:{outlet:null,matches:Dr,isDataRoute:!0}}):jr()},null)}var DataRouterHook$1=function(_r){return _r.UseBlocker="useBlocker",_r.UseRevalidator="useRevalidator",_r.UseNavigateStable="useNavigate",_r}(DataRouterHook$1||{}),DataRouterStateHook$1=function(_r){return _r.UseBlocker="useBlocker",_r.UseLoaderData="useLoaderData",_r.UseActionData="useActionData",_r.UseRouteError="useRouteError",_r.UseNavigation="useNavigation",_r.UseRouteLoaderData="useRouteLoaderData",_r.UseMatches="useMatches",_r.UseRevalidator="useRevalidator",_r.UseNavigateStable="useNavigate",_r.UseRouteId="useRouteId",_r}(DataRouterStateHook$1||{});function useDataRouterContext(_r){let Tr=reactExports.useContext(DataRouterContext);return Tr||invariant(!1),Tr}function useDataRouterState(_r){let Tr=reactExports.useContext(DataRouterStateContext);return Tr||invariant(!1),Tr}function useRouteContext(_r){let Tr=reactExports.useContext(RouteContext);return Tr||invariant(!1),Tr}function useCurrentRouteId(_r){let Tr=useRouteContext(),Rr=Tr.matches[Tr.matches.length-1];return Rr.route.id||invariant(!1),Rr.route.id}function useRouteError(){var _r;let Tr=reactExports.useContext(RouteErrorContext),Rr=useDataRouterState(DataRouterStateHook$1.UseRouteError),Ar=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return Tr||((_r=Rr.errors)==null?void 0:_r[Ar])}function useNavigateStable(){let{router:_r}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),Tr=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),Rr=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{Rr.current=!0}),reactExports.useCallback(function(Pr,Lr){Lr===void 0&&(Lr={}),Rr.current&&(typeof Pr=="number"?_r.navigate(Pr):_r.navigate(Pr,_extends$17({fromRouteId:Tr},Lr)))},[_r,Tr])}function Outlet(_r){return useOutlet(_r.context)}function Route(_r){invariant(!1)}function Router(_r){let{basename:Tr="/",children:Rr=null,location:Ar,navigationType:Pr=Action.Pop,navigator:Lr,static:Mr=!1}=_r;useInRouterContext()&&invariant(!1);let Fr=Tr.replace(/^\/*/,"/"),zr=reactExports.useMemo(()=>({basename:Fr,navigator:Lr,static:Mr}),[Fr,Lr,Mr]);typeof Ar=="string"&&(Ar=parsePath(Ar));let{pathname:Ur="/",search:Vr="",hash:Nr="",state:Dr=null,key:jr="default"}=Ar,Gr=reactExports.useMemo(()=>{let Wr=stripBasename(Ur,Fr);return Wr==null?null:{location:{pathname:Wr,search:Vr,hash:Nr,state:Dr,key:jr},navigationType:Pr}},[Fr,Ur,Vr,Nr,Dr,jr,Pr]);return Gr==null?null:reactExports.createElement(NavigationContext.Provider,{value:zr},reactExports.createElement(LocationContext.Provider,{children:Rr,value:Gr}))}function Routes(_r){let{children:Tr,location:Rr}=_r;return useRoutes(createRoutesFromChildren(Tr),Rr)}new Promise(()=>{});function createRoutesFromChildren(_r,Tr){Tr===void 0&&(Tr=[]);let Rr=[];return reactExports.Children.forEach(_r,(Ar,Pr)=>{if(!reactExports.isValidElement(Ar))return;let Lr=[...Tr,Pr];if(Ar.type===reactExports.Fragment){Rr.push.apply(Rr,createRoutesFromChildren(Ar.props.children,Lr));return}Ar.type!==Route&&invariant(!1),!Ar.props.index||!Ar.props.children||invariant(!1);let Mr={id:Ar.props.id||Lr.join("-"),caseSensitive:Ar.props.caseSensitive,element:Ar.props.element,Component:Ar.props.Component,index:Ar.props.index,path:Ar.props.path,loader:Ar.props.loader,action:Ar.props.action,errorElement:Ar.props.errorElement,ErrorBoundary:Ar.props.ErrorBoundary,hasErrorBoundary:Ar.props.ErrorBoundary!=null||Ar.props.errorElement!=null,shouldRevalidate:Ar.props.shouldRevalidate,handle:Ar.props.handle,lazy:Ar.props.lazy};Ar.props.children&&(Mr.children=createRoutesFromChildren(Ar.props.children,Lr)),Rr.push(Mr)}),Rr}/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$16(){return _extends$16=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$16.apply(this,arguments)}function _objectWithoutPropertiesLoose(_r,Tr){if(_r==null)return{};var Rr={},Ar=Object.keys(_r),Pr,Lr;for(Lr=0;Lr<Ar.length;Lr++)Pr=Ar[Lr],!(Tr.indexOf(Pr)>=0)&&(Rr[Pr]=_r[Pr]);return Rr}function isModifiedEvent(_r){return!!(_r.metaKey||_r.altKey||_r.ctrlKey||_r.shiftKey)}function shouldProcessLinkClick(_r,Tr){return _r.button===0&&(!Tr||Tr==="_self")&&!isModifiedEvent(_r)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],_excluded2=["aria-current","caseSensitive","className","end","style","to","children"],START_TRANSITION="startTransition",startTransitionImpl=$2AODx$react[START_TRANSITION];function BrowserRouter(_r){let{basename:Tr,children:Rr,future:Ar,window:Pr}=_r,Lr=reactExports.useRef();Lr.current==null&&(Lr.current=createBrowserHistory({window:Pr,v5Compat:!0}));let Mr=Lr.current,[Fr,zr]=reactExports.useState({action:Mr.action,location:Mr.location}),{v7_startTransition:Ur}=Ar||{},Vr=reactExports.useCallback(Nr=>{Ur&&startTransitionImpl?startTransitionImpl(()=>zr(Nr)):zr(Nr)},[zr,Ur]);return reactExports.useLayoutEffect(()=>Mr.listen(Vr),[Mr,Vr]),reactExports.createElement(Router,{basename:Tr,children:Rr,location:Fr.location,navigationType:Fr.action,navigator:Mr})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function(Tr,Rr){let{onClick:Ar,relative:Pr,reloadDocument:Lr,replace:Mr,state:Fr,target:zr,to:Ur,preventScrollReset:Vr}=Tr,Nr=_objectWithoutPropertiesLoose(Tr,_excluded),{basename:Dr}=reactExports.useContext(NavigationContext),jr,Gr=!1;if(typeof Ur=="string"&&ABSOLUTE_URL_REGEX.test(Ur)&&(jr=Ur,isBrowser$1))try{let Xr=new URL(window.location.href),Zr=Ur.startsWith("//")?new URL(Xr.protocol+Ur):new URL(Ur),Jr=stripBasename(Zr.pathname,Dr);Zr.origin===Xr.origin&&Jr!=null?Ur=Jr+Zr.search+Zr.hash:Gr=!0}catch{}let Wr=useHref(Ur,{relative:Pr}),qr=useLinkClickHandler(Ur,{replace:Mr,state:Fr,target:zr,preventScrollReset:Vr,relative:Pr});function Kr(Xr){Ar&&Ar(Xr),Xr.defaultPrevented||qr(Xr)}return reactExports.createElement("a",_extends$16({},Nr,{href:jr||Wr,onClick:Gr||Lr?Ar:Kr,ref:Rr,target:zr}))}),NavLink=reactExports.forwardRef(function(Tr,Rr){let{"aria-current":Ar="page",caseSensitive:Pr=!1,className:Lr="",end:Mr=!1,style:Fr,to:zr,children:Ur}=Tr,Vr=_objectWithoutPropertiesLoose(Tr,_excluded2),Nr=useResolvedPath(zr,{relative:Vr.relative}),Dr=useLocation(),jr=reactExports.useContext(DataRouterStateContext),{navigator:Gr}=reactExports.useContext(NavigationContext),Wr=Gr.encodeLocation?Gr.encodeLocation(Nr).pathname:Nr.pathname,qr=Dr.pathname,Kr=jr&&jr.navigation&&jr.navigation.location?jr.navigation.location.pathname:null;Pr||(qr=qr.toLowerCase(),Kr=Kr?Kr.toLowerCase():null,Wr=Wr.toLowerCase());let Xr=qr===Wr||!Mr&&qr.startsWith(Wr)&&qr.charAt(Wr.length)==="/",Zr=Kr!=null&&(Kr===Wr||!Mr&&Kr.startsWith(Wr)&&Kr.charAt(Wr.length)==="/"),Jr=Xr?Ar:void 0,_i;typeof Lr=="function"?_i=Lr({isActive:Xr,isPending:Zr}):_i=[Lr,Xr?"active":null,Zr?"pending":null].filter(Boolean).join(" ");let es=typeof Fr=="function"?Fr({isActive:Xr,isPending:Zr}):Fr;return reactExports.createElement(Link$1,_extends$16({},Vr,{"aria-current":Jr,className:_i,ref:Rr,style:es,to:zr}),typeof Ur=="function"?Ur({isActive:Xr,isPending:Zr}):Ur)});var DataRouterHook;(function(_r){_r.UseScrollRestoration="useScrollRestoration",_r.UseSubmit="useSubmit",_r.UseSubmitFetcher="useSubmitFetcher",_r.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(_r){_r.UseFetchers="useFetchers",_r.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(_r,Tr){let{target:Rr,replace:Ar,state:Pr,preventScrollReset:Lr,relative:Mr}=Tr===void 0?{}:Tr,Fr=useNavigate(),zr=useLocation(),Ur=useResolvedPath(_r,{relative:Mr});return reactExports.useCallback(Vr=>{if(shouldProcessLinkClick(Vr,Rr)){Vr.preventDefault();let Nr=Ar!==void 0?Ar:createPath(zr)===createPath(Ur);Fr(_r,{replace:Nr,state:Pr,preventScrollReset:Lr,relative:Mr})}},[zr,Fr,Ur,Ar,Pr,Rr,_r,Lr,Mr])}const App$2="",KonstaContext=React$1.createContext({theme:"material",dark:!0,touchRipple:!0});function useIsomorphicLayoutEffect(_r,Tr){return typeof window>"u"?reactExports.useEffect(_r,Tr):reactExports.useLayoutEffect(_r,Tr)}const useAutoTheme=function(_r,Tr){Tr===void 0&&(Tr=!0);const[Rr,Ar]=reactExports.useState(_r);return useIsomorphicLayoutEffect(()=>{if(Tr){if(_r==="ios"||_r==="material")Rr!==_r&&Ar(_r);else if(Rr==="parent"&&typeof window<"u"&&typeof document<"u"){const Pr=document.documentElement;Pr&&(Pr.classList.contains("ios")?Ar("ios"):(Pr.classList.contains("md")||Pr.classList.contains("material"))&&Ar("material"))}}},[_r]),Tr?Rr:_r},KonstaProvider=_r=>{const{theme:Tr,dark:Rr,touchRipple:Ar=!0,autoThemeDetection:Pr=!0,children:Lr}=_r,Mr=useAutoTheme(Tr,Pr);return React$1.createElement(KonstaContext.Provider,{value:{theme:Mr,dark:Rr,touchRipple:Ar}},Lr)};function cls(){const _r=[];for(var Tr=arguments.length,Rr=new Array(Tr),Ar=0;Ar<Tr;Ar++)Rr[Ar]=arguments[Ar];Rr.forEach(Lr=>{typeof Lr=="object"&&Lr.constructor===Object?Object.keys(Lr).forEach(Mr=>{Lr[Mr]&&_r.push(Mr)}):Array.isArray(Lr)?_r.push(...Lr):typeof Lr=="function"?_r.push(Lr()):Lr&&Lr.value?_r.push(Lr.value):Lr&&_r.push(Lr)});const Pr=[];return _r.forEach(Lr=>{Pr.indexOf(Lr)<0&&Pr.push(Lr)}),Pr.filter(Lr=>!!Lr).join(" ")}const positionClass=function(_r,Tr){return Tr===void 0&&(Tr=""),!Tr||typeof Tr!="string"?_r:["static","relative","absolute","fixed","sticky"].filter(Pr=>Tr.indexOf(Pr)>=0).length>0?"":_r},AppClasses=(_r,Tr,Rr)=>{const{safeAreas:Ar}=_r;return cls(Tr==="ios"&&"k-ios",Tr==="material"&&"k-material","k-app w-full h-full min-h-screen",Ar&&"safe-areas",positionClass("relative",Rr),Rr)};function _extends$15(){return _extends$15=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$15.apply(this,arguments)}const App$1=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,theme:Pr="material",dark:Lr=!0,touchRipple:Mr=!0,safeAreas:Fr=!0,children:zr,...Ur}=_r,Vr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Vr.current}));const Nr=Rr,Dr={...Ur},jr=useAutoTheme(Pr),Gr=AppClasses({..._r,safeAreas:Fr},jr,Ar);return React$1.createElement(KonstaProvider,{theme:jr,dark:Lr,touchRipple:Mr,autoThemeDetection:!1},React$1.createElement(Nr,_extends$15({ref:Vr,className:Gr},Dr),zr))});App$1.displayName="App";const propClasses=(_r,Tr,Rr)=>{if(typeof _r=="string")return _r;const Ar=[_r.common,_r[Tr]];return Rr&&_r[Rr]&&(typeof _r[Rr]=="string"?Ar.push(_r[Rr]):Ar.push(_r[Rr].common,_r[Rr][Tr])),Ar},themeClasses=(_r,Tr,Rr)=>{const Ar={},Pr=["common","ios","material"];return Object.keys(_r).forEach(Lr=>{const Mr=Lr==="base"?Rr:"";if(!(typeof _r[Lr]!="string"&&Object.keys(_r[Lr]).filter(Ur=>!Pr.includes(Ur)).length>0)){Ar[Lr]=cls(propClasses(_r[Lr],Tr),Mr);return}Ar[Lr]={};const zr=propClasses(_r[Lr],Tr);Ar[Lr].default=cls(zr,Mr),Object.keys(_r[Lr]).filter(Ur=>!Pr.includes(Ur)).forEach(Ur=>{Ar[Lr][Ur]=cls(zr,propClasses(_r[Lr],Tr,Ur),Mr)})}),Ar},useThemeClasses=function(_r){let{ios:Tr,material:Rr}=_r===void 0?{}:_r,Pr=reactExports.useContext(KonstaContext).theme||"ios";return Tr&&(Pr="ios"),Rr&&(Pr="material"),(Lr,Mr)=>themeClasses(Lr,Pr,Mr)},ActionsClasses=(_r,Tr)=>({base:{common:cls("transition-transform z-40 left-1/2 bottom-0 transform -translate-x-1/2 max-w-md w-full overflow-hidden",positionClass("fixed",Tr)),ios:"pt-2 px-2 pb-2-safe duration-300",material:"pb-safe last-child-hairline-b-none rounded-t-2xl duration-400 ease-material-in",opened:"",closed:"translate-y-full"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}});function _extends$14(){return _extends$14=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$14.apply(this,arguments)}const Actions=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,ios:Pr,material:Lr,opened:Mr,backdrop:Fr=!0,onBackdropClick:zr,children:Ur,...Vr}=_r,Nr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Nr.current}));const Dr=Mr?"opened":"closed",jr=Rr,Gr={...Vr},qr=useThemeClasses({ios:Pr,material:Lr})(ActionsClasses(_r,Ar),Ar);return React$1.createElement(React$1.Fragment,null,Fr&&React$1.createElement("div",{className:qr.backdrop[Dr],onClick:zr}),React$1.createElement(jr,_extends$14({ref:Nr,className:qr.base[Dr]},Gr),Ur))});Actions.displayName="Actions";const ActionsGroupClasses=_r=>{const{dividers:Tr}=_r;return{base:{common:"relative",ios:"mt-2 first:mt-0 last-child-hairline-b-none",material:cls(Tr&&"hairline-b")}}};function _extends$13(){return _extends$13=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$13.apply(this,arguments)}const ActionsGroup=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,ios:Pr,material:Lr,dividers:Mr=!0,children:Fr,...zr}=_r,Ur=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Ur.current}));const Vr=Rr,Nr={...zr},jr=useThemeClasses({ios:Pr,material:Lr})(ActionsGroupClasses({dividers:Mr,..._r}),Ar);return React$1.createElement(Vr,_extends$13({ref:Ur,className:jr.base},Nr),Fr)});ActionsGroup.displayName="ActionsGroup";const useTheme=function(_r){let{ios:Tr,material:Rr}=_r===void 0?{}:_r,Pr=reactExports.useContext(KonstaContext).theme||"ios";return Tr&&(Pr="ios"),Rr&&(Pr="material"),Pr};class TouchRipple{constructor(Tr,Rr,Ar){const Pr=this;if(!Tr)return;Pr.el=Tr;const{left:Lr,top:Mr,width:Fr,height:zr}=Tr.getBoundingClientRect(),Ur={x:Rr-Lr,y:Ar-Mr};let Vr=Math.max((zr**2+Fr**2)**.5,48);const Nr=Tr.classList.contains("k-touch-ripple-inset");Nr&&(Vr=Math.max(Math.min(Fr,zr),48));const Dr=typeof window<"u"&&window.getComputedStyle(Tr,null).getPropertyValue("overflow")==="hidden";if(!Nr&&Dr){const Gr=((Ur.x-Fr/2)**2+(Ur.y-zr/2)**2)**.5,Wr=(Vr/2+Gr)/(Vr/2);Pr.rippleTransform=`translate3d(0px, 0px, 0) scale(${Wr})`}else Pr.rippleTransform=`translate3d(${-Ur.x+Fr/2}px, ${-Ur.y+zr/2}px, 0) scale(1)`;Pr.rippleWaveEl=document.createElement("span"),Pr.rippleWaveEl.classList.add("k-touch-ripple-wave"),Pr.rippleWaveEl.setAttribute("hidden",""),Pr.rippleWaveEl.style=`
      width: ${Vr}px;
      height: ${Vr}px;
      margin-top:-${Vr/2}px;
      margin-left:-${Vr/2}px;
      left:${Ur.x}px;
      top:${Ur.y}px; --k-ripple-transform: ${Pr.rippleTransform}`,Tr.insertAdjacentElement("afterbegin",Pr.rippleWaveEl);const jr=()=>{Pr.rippleWaveEl.removeEventListener("animationend",jr),Pr.rippleWaveEl&&(Pr.rippleWaveEl.classList.contains("k-touch-ripple-wave-out")||(Pr.rippleWaveEl.classList.add("k-touch-ripple-wave-in"),Pr.shouldBeRemoved&&Pr.out()))};return Pr.rippleWaveEl.addEventListener("animationend",jr),Pr}destroy(){let Tr=this;Tr.rippleWaveEl&&Tr.el.removeChild(Tr.rippleWaveEl),Object.keys(Tr).forEach(Rr=>{Tr[Rr]=null,delete Tr[Rr]}),Tr=null}out(){const Tr=this,{rippleWaveEl:Rr}=this;clearTimeout(Tr.removeTimeout),Rr.classList.add("k-touch-ripple-wave-out"),Tr.removeTimeout=setTimeout(()=>{Tr.destroy()},300);const Ar=()=>{Tr.rippleWaveEl.removeEventListener("animationend",Ar),clearTimeout(Tr.removeTimeout),Tr.destroy()};Tr.rippleWaveEl.addEventListener("animationend",Ar)}remove(){const Tr=this;Tr.shouldBeRemoved||(Tr.removeTimeout=setTimeout(()=>{Tr.destroy()},400),Tr.shouldBeRemoved=!0,Tr.rippleWaveEl.classList.contains("k-touch-ripple-wave-in")&&Tr.out())}}const useTouchRipple=(_r,Tr,Rr)=>{const Ar=reactExports.useContext(KonstaContext);Rr||(Rr=_r);const Pr=reactExports.useRef(null),Lr=()=>{Pr.current&&Pr.current.remove(),Pr.current=null},Mr=jr=>{Pr.current=new TouchRipple(_r.current,jr.pageX,jr.pageY)},Fr=()=>{Lr()},zr=()=>{Lr()},Ur=()=>{if(!Ar.touchRipple)return;const jr=Rr.current;jr.addEventListener("pointerdown",Mr),jr.addEventListener("pointermove",Fr),jr.addEventListener("pointerup",zr),jr.addEventListener("pointercancel",zr),jr.addEventListener("contextmenu",zr)},Vr=()=>{const jr=Rr.current;jr.removeEventListener("pointerdown",Mr),jr.removeEventListener("pointermove",Fr),jr.removeEventListener("pointerup",zr),jr.removeEventListener("pointercancel",zr),jr.removeEventListener("contextmenu",zr)},Nr=()=>{!Rr||!Rr.current||!Tr||Ur()},Dr=()=>{!Rr||!Rr.current||!Tr||Vr()};reactExports.useEffect(()=>(Nr(),()=>Dr()))},useDarkClasses=()=>{const _r=reactExports.useContext(KonstaContext);return Tr=>_r.dark?Tr:""},ActionsButtonClasses=(_r,Tr,Rr)=>{const{fontSizeIos:Ar,fontSizeMaterial:Pr,bold:Lr,dividers:Mr}=_r;return{base:{common:cls("flex items-center w-full px-4 relative z-10 overflow-hidden",Mr&&"hairline-b"),ios:cls("h-14",Tr.textIos,Tr.bgIos,Tr.activeBgIos,Ar,"first:rounded-t-xl last:rounded-b-xl justify-center",Lr&&"font-semibold"),material:cls("h-12",Tr.textMaterial,Tr.bgMaterial,Tr.activeBgMaterial,Pr,"justify-start",Rr("dark:touch-ripple-white"),Lr&&"font-medium")}}},ActionsButtonColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:cls("bg-white",Tr("dark:bg-neutral-800")),bgMaterial:cls("bg-md-light-surface-3",Tr("dark:bg-md-dark-surface-3")),activeBgIos:cls("active:bg-neutral-200",Tr("dark:active:bg-neutral-700")),activeBgMaterial:"",textIos:"text-primary",textMaterial:cls("text-md-light-on-surface",Tr("dark:text-md-dark-on-surface")),..._r}};function _extends$12(){return _extends$12=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$12.apply(this,arguments)}const ActionsButton=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="button",className:Ar,colors:Pr,ios:Lr,material:Mr,bold:Fr,boldIos:zr=!1,boldMaterial:Ur=!1,fontSizeIos:Vr="text-xl",fontSizeMaterial:Nr="text-base",href:Dr,touchRipple:jr=!0,dividers:Gr=void 0,children:Wr,...qr}=_r,Kr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Kr.current}));let Xr=Rr;typeof _r.component>"u"&&(Dr||Dr==="")&&(Xr="a");const Zr={href:Dr,...qr},Jr=useTheme({ios:Lr,material:Mr}),_i=useThemeClasses({ios:Lr,material:Mr}),es=useDarkClasses();useTouchRipple(Kr,Jr==="material"&&jr);const ts=ActionsButtonColors(Pr,es),as=_i(ActionsButtonClasses({fontSizeIos:Vr,fontSizeMaterial:Nr,bold:typeof Fr>"u"?Jr==="ios"?zr:Ur:Fr,dividers:typeof Gr>"u"?Jr==="ios":Gr,..._r},ts,es),Ar);return React$1.createElement(Xr,_extends$12({ref:Kr,role:"button",tabIndex:"0",className:as.base},Zr),Wr)});ActionsButton.displayName="ActionsButton";const ActionsLabelClasses=(_r,Tr)=>{const{fontSizeIos:Rr,fontSizeMaterial:Ar,dividers:Pr}=_r;return{base:{common:cls(`flex items-center w-full px-4 relative z-10 overflow-hidden ${Tr.activeBg}`,Pr&&"hairline-b"),ios:cls("h-14",Tr.bgIos,Tr.textIos,Rr,"first:rounded-t-xl last:rounded-b-xl justify-center"),material:cls("h-12",Tr.bgMaterial,Tr.textMaterial,Ar,"font-medium","justify-start")}}},ActionsLabelColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:cls("bg-white",Tr("dark:bg-neutral-800")),bgMaterial:cls("bg-md-light-surface-3",Tr("dark:bg-md-dark-surface-3")),textIos:cls("text-black text-opacity-55",Tr("dark:text-white dark:text-opacity-55")),textMaterial:cls("text-md-light-primary",Tr("dark:text-md-dark-primary")),..._r}};function _extends$11(){return _extends$11=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$11.apply(this,arguments)}const ActionsLabel=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,ios:Lr,material:Mr,fontSizeIos:Fr="text-sm",fontSizeMaterial:zr="text-sm",dividers:Ur=void 0,children:Vr,...Nr}=_r,Dr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Dr.current}));const jr=Rr,Gr={...Nr},Wr=useTheme({ios:Lr,material:Mr}),qr=useThemeClasses({ios:Lr,material:Mr}),Kr=useDarkClasses(),Xr=ActionsLabelColors(Pr,Kr),Jr=qr(ActionsLabelClasses({fontSizeIos:Fr,fontSizeMaterial:zr,dividers:typeof Ur>"u"?Wr==="ios":Ur,..._r},Xr),Ar);return React$1.createElement(jr,_extends$11({ref:Dr,className:Jr.base},Gr),Vr)});ActionsLabel.displayName="ActionsLabel";const BadgeClasses=(_r,Tr)=>({base:{common:`${Tr.text} ${Tr.bg} inline-flex items-center justify-center rounded-full leading-none`,ios:"font-semibold",material:"font-medium",sm:"text-2xs min-w-4 min-h-4 px-0.5",md:"text-xs min-w-5 min-h-5 px-1.5 py-0.5"}}),BadgeColors=function(_r){return _r===void 0&&(_r={}),{bg:"bg-primary",text:"text-white",..._r}};function _extends$10(){return _extends$10=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$10.apply(this,arguments)}const Badge=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="span",className:Ar,colors:Pr,small:Lr,ios:Mr,material:Fr,children:zr,...Ur}=_r,Vr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Vr.current}));const Nr=Rr,Dr={...Ur},jr=useThemeClasses({ios:Mr,material:Fr}),Gr=BadgeColors(Pr),Wr=Lr?"sm":"md",qr=jr(BadgeClasses(_r,Gr),Ar);return React$1.createElement(Nr,_extends$10({ref:Vr,className:qr.base[Wr]},Dr),zr)});Badge.displayName="Badge";const BlockClasses=(_r,Tr,Rr)=>{const{inset:Ar,nested:Pr,margin:Lr,padding:Mr,strong:Fr,outline:zr}=_r;return{base:{common:cls("text-sm z-10",positionClass("relative",Rr),!Ar&&!Pr&&zr&&"hairline-t hairline-b",Ar&&zr&&"border",Ar&&"px-4",!Ar&&"pl-4-safe pr-4-safe",!Pr&&Lr,(Fr||zr)&&Mr),ios:cls(Tr.textIos,Fr&&Tr.strongBgIos,Ar&&zr&&Tr.outlineIos),material:cls(Tr.textMaterial,Fr&&Tr.strongBgMaterial,Ar&&zr&&Tr.outlineMaterial)},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"}}},BlockColors=function(_r,Tr){return _r===void 0&&(_r={}),{outlineIos:cls("border-black border-opacity-20",Tr("dark:border-white dark:border-opacity-15")),outlineMaterial:cls("border-md-light-outline",Tr("border-md-dark-outline")),strongBgIos:cls("bg-ios-light-surface-1",Tr("dark:bg-ios-dark-surface-1")),strongBgMaterial:cls("bg-md-light-surface-1",Tr("dark:bg-md-dark-surface-1")),textIos:"",textMaterial:cls("text-md-light-on-surface",Tr("dark:text-md-dark-on-surface")),..._r}};function _extends$$(){return _extends$$=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$$.apply(this,arguments)}const Block=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,margin:Lr="my-8",padding:Mr="py-4",inset:Fr,insetIos:zr,insetMaterial:Ur,strong:Vr,strongIos:Nr,strongMaterial:Dr,outline:jr,outlineIos:Gr,outlineMaterial:Wr,nested:qr,ios:Kr,material:Xr,children:Zr,...Jr}=_r,_i=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:_i.current}));const es=Rr,ts={...Jr},rs=useTheme({ios:Kr,material:Xr}),ns=useThemeClasses({ios:Kr,material:Xr}),as=useDarkClasses(),ls=BlockColors(Pr,as),us=typeof Vr>"u"?rs==="ios"?Nr:Dr:Vr,xs=typeof jr>"u"?rs==="ios"?Gr:Wr:jr,Ts=typeof Fr>"u"?rs==="ios"?zr:Ur:Fr,vs=ns(BlockClasses({..._r,margin:Lr,padding:Mr,inset:Ts,strong:us,outline:xs},ls,Ar)),gs=cls(vs.base,Ts&&vs.inset,Ar);return React$1.createElement(es,_extends$$({ref:_i,className:gs},ts),Zr)});Block.displayName="Block";const BlockFooterClasses=(_r,Tr)=>{const{inset:Rr}=_r;return{base:{common:cls("mb-8 flex items-center -mt-6 text-sm",Rr?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:Tr.textIos,material:Tr.textMaterial}}},BlockFooterColors=function(_r,Tr){return _r===void 0&&(_r={}),{textIos:cls("text-black text-opacity-75",Tr("dark:text-white dark:text-opacity-75")),textMaterial:cls("text-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant")),..._r}};function _extends$_(){return _extends$_=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$_.apply(this,arguments)}const BlockFooter=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,ios:Lr,material:Mr,inset:Fr,insetIos:zr,insetMaterial:Ur,children:Vr,...Nr}=_r,Dr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Dr.current}));const jr=useTheme(),Gr=typeof Fr>"u"?jr==="ios"?zr:Ur:Fr,Wr=Rr,qr={...Nr},Kr=useThemeClasses({ios:Lr,material:Mr}),Xr=useDarkClasses(),Zr=BlockFooterColors(Pr,Xr),Jr=Kr(BlockFooterClasses({..._r,inset:Gr},Zr),Ar);return React$1.createElement(Wr,_extends$_({ref:Dr,className:Jr.base},qr),Vr)});BlockFooter.displayName="BlockFooter";const BlockHeaderClasses=(_r,Tr)=>{const{inset:Rr}=_r;return{base:{common:cls("mt-8 flex items-center -mb-6 text-sm",Rr?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:Tr.textIos,material:Tr.textMaterial}}},BlockHeaderColors=function(_r,Tr){return _r===void 0&&(_r={}),{textIos:cls("text-black",Tr("dark:text-white")),textMaterial:cls("text-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant")),..._r}};function _extends$Z(){return _extends$Z=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$Z.apply(this,arguments)}const BlockHeader=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,ios:Lr,material:Mr,inset:Fr,insetIos:zr,insetMaterial:Ur,children:Vr,...Nr}=_r,Dr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Dr.current}));const jr=Rr,Gr={...Nr},Wr=useTheme(),qr=typeof Fr>"u"?Wr==="ios"?zr:Ur:Fr,Kr=useThemeClasses({ios:Lr,material:Mr}),Xr=useDarkClasses(),Zr=BlockHeaderColors(Pr,Xr),Jr=Kr(BlockHeaderClasses({..._r,inset:qr},Zr),Ar);return React$1.createElement(jr,_extends$Z({ref:Dr,className:Jr.base},Gr),Vr)});BlockHeader.displayName="BlockHeader";const BlockTitleClasses=(_r,Tr)=>{const{withBlock:Rr,medium:Ar,large:Pr}=_r;return{base:{common:`pl-4-safe pr-4-safe mt-8 flex justify-between items-center ${Rr?"-mb-6":"mb-2"}`,ios:cls(`font-semibold ${Tr.textIos}`,Pr&&"text-[1.5rem]",Ar&&"text-[1.125rem]",!Ar&&!Pr&&"text-[1rem]"),material:cls(`font-medium ${Tr.textMaterial}`,Pr&&"text-[1.375rem]",Ar&&"text-[1rem]",!Ar&&!Pr&&"text-[0.875rem]")}}},BlockTitleColors=function(_r,Tr){return _r===void 0&&(_r={}),{textIos:"",textMaterial:cls("text-md-light-primary",Tr("dark:text-md-dark-primary")),..._r}};function _extends$Y(){return _extends$Y=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$Y.apply(this,arguments)}const BlockTitle=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,withBlock:Lr=!0,medium:Mr,large:Fr,ios:zr,material:Ur,children:Vr,...Nr}=_r,Dr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Dr.current}));const jr=Rr,Gr={...Nr},Wr=useThemeClasses({ios:zr,material:Ur}),qr=useDarkClasses(),Kr=BlockTitleColors(Pr,qr),Xr=Wr(BlockTitleClasses({..._r,withBlock:Lr},Kr),Ar);return React$1.createElement(jr,_extends$Y({ref:Dr,className:Xr.base},Gr),Vr)});BlockTitle.displayName="BlockTitle";const BreadcrumbsClasses=_r=>{const{fontSizeIos:Tr,fontSizeMaterial:Rr}=_r;return{base:{common:"flex items-center justify-start overflow-auto whitespace-nowrap py-1 px-0 space-x-3 no-scrollbar rtl:space-x-reverse",ios:Tr,material:Rr}}};function _extends$X(){return _extends$X=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$X.apply(this,arguments)}const Breadcrumbs=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,fontSizeIos:Pr="text-[17px]",fontSizeMaterial:Lr="text-[14px]",ios:Mr,material:Fr,children:zr,...Ur}=_r,Vr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Vr.current}));const Nr=Rr,Dr={...Ur},Gr=useThemeClasses({ios:Mr,material:Fr})(BreadcrumbsClasses({..._r,fontSizeIos:Pr,fontSizeMaterial:Lr}),Ar);return React$1.createElement(Nr,_extends$X({ref:Vr,className:Gr.base},Dr),zr)});Breadcrumbs.displayName="Breadcrumbs";const BreadcrumbsItemClasses=(_r,Tr)=>{const{active:Rr}=_r;return{base:{common:cls("flex items-center overflow-hidden"),ios:cls(Tr.textIos,Tr.bgIos,Rr?Tr.textActiveIos:Tr.textIos,Rr&&"font-semibold"),material:cls("font-medium px-2 py-1 rounded-lg",Tr.bgMaterial,Rr?Tr.textActiveMaterial:Tr.textMaterial)}}},BreadcrumbsItemColors=function(_r,Tr){return _r===void 0&&(_r={}),{textIos:cls("text-black text-opacity-55",Tr("dark:text-white dark:text-opacity-55")),textMaterial:cls("text-md-light-on-secondary-container",Tr("dark:text-md-dark-on-secondary-container")),bgIos:"",bgMaterial:cls("bg-md-light-secondary-container",Tr("dark:bg-md-dark-secondary-container")),textActiveIos:cls("text-black",Tr("dark:text-white")),textActiveMaterial:cls("text-md-light-on-secondary-container",Tr("dark:text-md-dark-on-secondary-container")),..._r}};function _extends$W(){return _extends$W=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$W.apply(this,arguments)}const BreadcrumbsItem=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,ios:Pr,material:Lr,colors:Mr,active:Fr,children:zr,...Ur}=_r,Vr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Vr.current}));const Nr=Rr,Dr={...Ur},jr=useThemeClasses({ios:Pr,material:Lr}),Gr=useDarkClasses(),Wr=BreadcrumbsItemColors(Mr,Gr),qr=jr(BreadcrumbsItemClasses({..._r},Wr),Ar);return React$1.createElement(Nr,_extends$W({ref:Vr,className:qr.base,role:"menuitem",tabIndex:"0"},Dr),zr)});BreadcrumbsItem.displayName="BreadcrumbsItem";const BreadcrumbsSeparatorClasses=()=>({base:{common:"w-3 opacity-35 flex justify-center",ios:"",material:""},icon:{common:"rtl:rotate-180",ios:"h-3",material:"h-2.5"}});function _extends$V(){return _extends$V=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$V.apply(this,arguments)}const ChevronIcon=_r=>React$1.createElement("svg",_extends$V({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"14",viewBox:"0 0 12 20",fill:"currentcolor"},_r),React$1.createElement("path",{d:"M11.518406,10.5648622 C11.4831857,10.6163453 11.4426714,10.6653692 11.3968592,10.7111814 L2.5584348,19.5496058 C1.9753444,20.1326962 1.03186648,20.1345946 0.44199608,19.5447242 C-0.14379032,18.9589377 -0.14922592,18.0146258 0.43711448,17.4282854 L7.87507783,9.9903221 L0.4431923,2.5584366 C-0.1398981,1.9753462 -0.1417965,1.0318683 0.448074,0.4419979 C1.0338604,-0.1437886 1.9781723,-0.1492241 2.56451268,0.4371163 L11.4029371,9.2755407 C11.7556117,9.6282153 11.7969345,10.1725307 11.518406,10.5648622 Z"}));function _extends$U(){return _extends$U=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$U.apply(this,arguments)}const BreadcrumbsSeparator=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,ios:Pr,material:Lr,children:Mr,...Fr}=_r,zr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:zr.current}));const Ur=Rr,Vr={...Fr},Dr=useThemeClasses({ios:Pr,material:Lr})(BreadcrumbsSeparatorClasses({..._r}),Ar);return React$1.createElement(Ur,_extends$U({ref:zr,className:Dr.base},Vr),React$1.createElement(ChevronIcon,{className:Dr.icon}),Mr)});BreadcrumbsSeparator.displayName="BreadcrumbsSeparator";const BreadcrumbsCollapsedClasses=(_r,Tr)=>({base:{common:`flex items-center cursor-pointer space-x-0.75 rtl:space-x-reverse ${Tr.bg}`,ios:cls("rounded active:opacity-30 px-1.5 h-[1em] duration-300 active:duration-0",Tr.bgIos),material:cls("py-3 px-2 rounded-lg",Tr.bgMaterial)},dot:{common:`w-1 h-1 rounded-full ${Tr.dotBg}`,ios:Tr.dotBgIos,material:Tr.dotBgMaterial}}),BreadcrumbsCollapsedColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:cls("bg-black bg-opacity-15",Tr("dark:bg-white dark:bg-opacity-15")),bgMaterial:cls("bg-md-light-secondary-container",Tr("dark:bg-md-dark-secondary-container")),dotBgIos:cls("bg-black",Tr("dark:bg-white")),dotBgMaterial:cls("bg-md-light-primary",Tr("dark:bg-md-dark-primary")),..._r}};function _extends$T(){return _extends$T=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$T.apply(this,arguments)}const BreadcrumbsCollapsed=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,ios:Lr,material:Mr,children:Fr,...zr}=_r,Ur=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Ur.current}));const Vr=useDarkClasses(),Nr=BreadcrumbsCollapsedColors(Pr,Vr),Dr=Rr,jr={...zr},Wr=useThemeClasses({ios:Lr,material:Mr})(BreadcrumbsCollapsedClasses({..._r},Nr),Ar);return React$1.createElement(Dr,_extends$T({ref:Ur,role:"button",tabIndex:"0",className:Wr.base},jr),React$1.createElement("span",{className:Wr.dot}),React$1.createElement("span",{className:Wr.dot}),React$1.createElement("span",{className:Wr.dot}),Fr)});BreadcrumbsCollapsed.displayName="BreadcrumbsCollapsed";const ButtonClasses=(_r,Tr,Rr,Ar)=>{const{inline:Pr,segmented:Lr,segmentedStrong:Mr,segmentedActive:Fr,disabled:zr}=_r;return{base:{common:cls("flex text-center justify-center items-center appearance-none py-1 transition-colors focus:outline-none cursor-pointer select-none overflow-hidden z-10",Pr?"inline-flex":"w-full flex",positionClass("relative",Rr),zr&&"pointer-events-none",Mr&&Fr&&"k-segmented-strong-button-active"),ios:"uppercase duration-100 font-semibold px-2",material:"duration-300 font-medium px-4",square:{ios:Lr&&!Mr?"first:rounded-s last:rounded-e":"rounded",material:Lr&&!Mr?"first:rounded-lg-s last:rounded-lg-e":"rounded-lg"},rounded:Lr&&!Mr?"":"rounded-full"},style:{fill:{common:cls(zr&&cls(Tr.disabledBg,Tr.disabledText)),ios:cls(zr?cls(Tr.disabledBg,Tr.disabledText):`${Tr.fillTextIos} ${Tr.fillBgIos} ${Tr.fillActiveBgIos}`),material:cls(zr?cls(Tr.disabledBg,Tr.disabledText):cls(Tr.fillTextMaterial,Tr.fillBgMaterial,Tr.fillActiveBgMaterial,Tr.fillTouchRipple))},outline:{common:cls(zr?cls(Tr.disabledText,Tr.disabledBorder):cls("active:bg-opacity-15",Tr.touchRipple)),ios:cls(!Lr&&"border-2",!zr&&!Lr&&Tr.outlineBorderIos,!zr&&cls(Tr.textIos,Tr.activeBgIos)),material:cls(!Lr&&"border",!zr&&!Lr&&Tr.outlineBorderMaterial,!zr&&cls(Tr.textMaterial,Tr.activeBgMaterial))},clear:{common:cls(zr?Tr.disabledText:`active:bg-opacity-15 ${Tr.touchRipple}`),ios:!zr&&cls(Tr.textIos,Tr.activeBgIos),material:!zr&&cls(Tr.textMaterial,Tr.activeBgMaterial)},tonal:{common:zr?cls(Tr.disabledBg,Tr.disabledText):cls(Tr.touchRipple),ios:!zr&&cls(Tr.tonalTextIos,Tr.tonalBgIos,Tr.activeBgIos,"bg-opacity-15 active:bg-opacity-25"),material:!zr&&cls(Tr.tonalTextMaterial,Tr.tonalBgMaterial,Tr.activeBgMaterial)},segmentedStrong:cls("active:bg-black active:bg-opacity-10",Ar("dark:active:bg-white dark:active:bg-opacity-5 dark:touch-ripple-white")),segmentedStrongActive:"duration-0"},size:{small:{ios:"text-xs h-7",material:"text-sm h-8"},medium:{common:"text-sm",ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},raised:"shadow active:shadow-lg"}},ButtonColors=function(_r,Tr){return _r===void 0&&(_r={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:cls("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:cls("text-white"),fillTextMaterial:cls("text-md-light-on-primary",Tr("dark:text-md-dark-on-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillBgIos:"bg-primary",fillBgMaterial:cls("bg-md-light-primary",Tr("dark:bg-md-dark-primary")),fillTouchRipple:cls("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:cls("border-md-light-outline",Tr("dark:border-md-dark-outline")),tonalBgIos:"bg-primary",tonalBgMaterial:cls("bg-md-light-secondary-container",Tr("dark:bg-md-dark-secondary-container")),tonalTextIos:"text-primary",tonalTextMaterial:cls("text-md-light-on-secondary-container",Tr("dark:text-md-dark-on-secondary-container")),touchRipple:"touch-ripple-primary",disabledText:cls("text-black text-opacity-30",Tr("dark:text-white dark:text-opacity-30")),disabledBg:cls("bg-black bg-opacity-10",Tr("dark:bg-white dark:bg-opacity-10")),disabledBorder:cls("border-black border-opacity-10",Tr("dark:border-white dark:border-opacity-10")),..._r}};function _extends$S(){return _extends$S=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$S.apply(this,arguments)}const Button=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="button",className:Ar,colors:Pr,ios:Lr,material:Mr,disabled:Fr,href:zr,outline:Ur,outlineIos:Vr,outlineMaterial:Nr,clear:Dr,clearIos:jr,clearMaterial:Gr,tonal:Wr,tonalIos:qr,tonalMaterial:Kr,rounded:Xr,roundedIos:Zr,roundedMaterial:Jr,small:_i,smallIos:es,smallMaterial:ts,large:rs,largeIos:ns,largeMaterial:as,raised:ls,raisedIos:us,raisedMaterial:xs,inline:Ts,segmented:vs,segmentedStrong:gs,segmentedActive:fs,touchRipple:ys=!0,children:ks,...Fs}=_r,Us=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Us.current}));let Vs=Rr;typeof _r.component>"u"&&(zr||zr==="")&&(Vs="a");const ao={href:zr,...Fs},qs=useTheme({ios:Lr,material:Mr}),Qs=useThemeClasses({ios:Lr,material:Mr}),mo=useDarkClasses();useTouchRipple(Us,qs==="material"&&ys);const so=(Is=>{const Gs={};return Object.keys(Is).forEach(to=>{Gs[to]=typeof Is[to]>"u"?qs==="ios"?_r[`${to}Ios`]:_r[`${to}Material`]:Is[to]}),Gs})({outline:Ur,clear:Dr,tonal:Wr,rounded:Xr,small:_i,large:rs,raised:ls}),uo=so.large?"large":so.small?"small":"medium";let bo=so.outline?"outline":so.clear||vs&&!fs?"clear":so.tonal?"tonal":"fill";gs&&(bo="segmentedStrong"),gs&&fs&&(bo="segmentedStrongActive");const wo=ButtonColors(Pr,mo),Co=Qs(ButtonClasses({..._r,...so},wo,Ar,mo)),ds=cls(Co.base[so.rounded?"rounded":"square"],Co.style[bo],Co.size[uo],so.raised&&Co.raised,Ar);return React$1.createElement(Vs,_extends$S({ref:Us,className:ds,disabled:Fr,role:"button",tabIndex:"0"},ao),ks)});Button.displayName="Button";const CardClasses=(_r,Tr)=>{const{margin:Rr,headerDivider:Ar,footerDivider:Pr,contentWrapPadding:Lr}=_r;return{base:{common:cls(Rr,"overflow-hidden"),ios:cls("rounded-lg",Tr.bgIos,Tr.textIos),material:cls("rounded-2xl",Tr.bgMaterial,Tr.textMaterial),plain:"",raised:"shadow",outline:{common:cls("border"),ios:Tr.outlineIos,material:Tr.outlineMaterial}},header:{common:cls(Ar&&"border-b","p-4"),ios:cls(Ar&&Tr.outlineIos,_r.headerFontSizeIos),material:cls(Ar&&Tr.outlineMaterial,_r.headerFontSizeMaterial)},content:cls(Lr,"text-sm"),footer:{common:cls(Ar&&"border-t","text-sm p-4"),ios:cls(Tr.footerTextIos,Pr&&Tr.outlineIos),material:cls(Tr.footerTextMaterial,Pr&&Tr.outlineMaterial)}}},CardColors=function(_r,Tr){return _r===void 0&&(_r={}),{textIos:cls(""),textMaterial:cls("text-md-light-on-surface",Tr("dark:text-md-dark-on-surface")),bgIos:cls("bg-ios-light-surface-1",Tr("dark:bg-ios-dark-surface-1")),bgMaterial:cls("bg-md-light-surface-1",Tr("dark:bg-md-dark-surface-1")),footerTextIos:cls("text-black text-opacity-55",Tr("dark:text-white dark:text-opacity-55")),footerTextMaterial:cls("text-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant")),outlineIos:cls("border-black border-opacity-20",Tr("dark:border-white dark:border-opacity-20")),outlineMaterial:cls("border-md-light-outline",Tr("dark:border-md-dark-outline")),..._r}};function _extends$R(){return _extends$R=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$R.apply(this,arguments)}const Card=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,margin:Pr="m-4",colors:Lr,header:Mr,footer:Fr,ios:zr,material:Ur,headerFontSizeIos:Vr="text-[17px]",headerFontSizeMaterial:Nr="text-[22px]",contentWrap:Dr=!0,contentWrapPadding:jr="p-4",raised:Gr,raisedIos:Wr,raisedMaterial:qr,outline:Kr,outlineIos:Xr,outlineMaterial:Zr,headerDivider:Jr=!1,footerDivider:_i=!1,children:es,...ts}=_r,rs=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:rs.current}));const ns=Rr,as={...ts},ls=useTheme(),us=useThemeClasses({ios:zr,material:Ur}),xs=useDarkClasses(),Ts=CardColors(Lr,xs),vs=typeof Kr>"u"?ls==="ios"?Xr:Zr:Kr,gs=typeof Gr>"u"?ls==="ios"?Wr:qr:Gr,fs=vs?"outline":gs?"raised":"plain",ys=us(CardClasses({..._r,margin:Pr,contentWrapPadding:jr,headerDivider:Jr,footerDivider:_i,headerFontSizeIos:Vr,headerFontSizeMaterial:Nr,outline:vs,raised:gs},Ts),Ar);return React$1.createElement(ns,_extends$R({ref:rs,className:ys.base[fs]},as),Mr&&React$1.createElement("div",{className:ys.header},Mr),Dr?React$1.createElement("div",{className:ys.content},es):es,Fr&&React$1.createElement("div",{className:ys.footer},Fr))});Card.displayName="Card";const CheckboxClasses=(_r,Tr,Rr,Ar)=>({base:cls("cursor-pointer inline-flex align-middle",positionClass("relative",Rr),Ar("dark:touch-ripple-white")),iconWrap:{common:cls("flex items-center justify-center text-white",Ar("dark:text-black")),ios:"w-5.5 h-5.5 rounded-full border",material:"w-4.5 h-4.5 rounded-sm border-2",notChecked:{ios:Tr.borderIos,material:Tr.borderMaterial},checked:{ios:`${Tr.bgCheckedIos} ${Tr.borderCheckedIos}`,material:`${Tr.bgCheckedMaterial} ${Tr.borderCheckedMaterial}`}},icon:{notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:cls("bg-white w-3/4",Ar("dark:bg-black")),ios:"h-0.5 rounded-full",material:"h-0.5"},input:"hidden"}),CheckboxColors=function(_r,Tr){return _r===void 0&&(_r={}),{borderIos:cls("border-black border-opacity-30",Tr("dark:border-white dark:border-opacity-30")),borderMaterial:cls("border-md-light-outline",Tr("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:cls("bg-md-light-primary",Tr("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:cls("border-md-light-primary",Tr("dark:border-md-dark-primary")),..._r}};function _extends$Q(){return _extends$Q=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$Q.apply(this,arguments)}const CheckboxIcon=_r=>{const{ios:Tr,material:Rr,fill:Ar,...Pr}=_r;return useTheme({ios:Tr,material:Rr})==="ios"?React$1.createElement("svg",_extends$Q({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},Pr),React$1.createElement("path",{fill:Ar||"currentColor",fillRule:"evenodd",d:"M10.6461792,0.119820016 C11.0022676,0.346673312 11.1070333,0.819240884 10.88018,1.17532923 L5.59004012,9.47918548 C5.44456028,9.70754308 5.19802823,9.83254199 4.94596825,9.83309245 C4.59813173,9.83364386 4.39457446,9.67360825 4.28105047,9.53831563 L1.17887189,5.84128316 C0.907480501,5.5178515 0.949667479,5.03565214 1.27309914,4.76426075 C1.59653081,4.49286936 2.07873017,4.53505633 2.35012156,4.858488 L4.8346263,7.81909046 L9.59067001,0.353820775 C9.81752331,-0.00226757161 10.2900909,-0.10703328 10.6461792,0.119820016 Z",transform:"translate(4 5.483)"})):React$1.createElement("svg",_extends$Q({xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 18 14",fill:"currentcolor"},Pr),React$1.createElement("polygon",{fill:Ar,points:"6 11.17 1.83 7 .41 8.41 6 14 18 2 16.59 .59"}))};function _extends$P(){return _extends$P=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$P.apply(this,arguments)}const Checkbox=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="label",className:Ar,colors:Pr,defaultChecked:Lr,checked:Mr,indeterminate:Fr,name:zr,value:Ur,disabled:Vr,readOnly:Nr,onChange:Dr,ios:jr,material:Gr,touchRipple:Wr=!0,children:qr,...Kr}=_r,Xr=reactExports.useRef(null),Zr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Zr.current,inputEl:Xr.current}));const Jr=Rr,_i={...Kr},es=useTheme({ios:jr,material:Gr}),ts=useThemeClasses({ios:jr,material:Gr}),rs=useDarkClasses();useTouchRipple(Zr,es==="material"&&Wr);const ns=CheckboxColors(Pr,rs),as=Mr||Lr&&!Dr||Fr?"checked":"notChecked",ls=ts(CheckboxClasses(_r,ns,Ar,rs),Ar);return reactExports.useEffect(()=>{Xr.current&&(Xr.current.indeterminate=!!Fr)},[Fr]),React$1.createElement(Jr,_extends$P({ref:Zr,className:ls.base},_i),React$1.createElement("input",{ref:Xr,type:"checkbox",name:zr,value:Ur,disabled:Vr,readOnly:Nr,checked:Mr,defaultChecked:Lr,onChange:Dr,className:ls.input}),React$1.createElement("i",{className:ls.iconWrap[as]},Fr?React$1.createElement("span",{className:ls.indeterminateIcon}):React$1.createElement(CheckboxIcon,{ios:jr,material:Gr,className:ls.icon[as]})),qr)});Checkbox.displayName="Checkbox";const ChipClasses=(_r,Tr)=>({base:{common:"text-sm inline-flex items-center justify-center align-middle rounded-full px-3",ios:"rounded-full h-7",material:"rounded-lg h-8 font-medium",fill:{ios:cls(Tr.fillBg||Tr.fillBgIos,Tr.fillText||Tr.fillTextIos),material:cls(Tr.fillBg||Tr.fillBgMaterial,Tr.fillText||Tr.fillTextMaterial)},outline:{common:"border",ios:cls(Tr.outlineText||Tr.outlineTextIos,Tr.outlineBorder||Tr.outlineBorderIos),material:cls(Tr.outlineText||Tr.outlineTextMaterial,Tr.outlineBorder||Tr.outlineBorderMaterial)}},media:{common:"-my-1 me-1 select-none",ios:"-ms-3",material:"-ms-2"},deleteButton:"-me-2 -my-1 ms-1 h-full flex items-center justify-center w-6 cursor-pointer opacity-50 active:opacity-100 select-none"}),ChipColors=function(_r,Tr){return _r===void 0&&(_r={}),{fillTextIos:"text-current",fillTextMaterial:cls("text-md-light-on-secondary-container",Tr("dark:text-md-dark-on-secondary-container")),fillBgIos:cls("bg-black bg-opacity-10",Tr("dark:bg-white dark:bg-opacity-10")),fillBgMaterial:cls("bg-md-light-secondary-container",Tr("dark:bg-md-dark-secondary-container")),outlineTextIos:cls("text-current"),outlineTextMaterial:cls("text-md-light-on-surface",Tr("dark:text-md-dark-on-surface")),outlineBorderIos:cls("border-black border-opacity-20",Tr("dark:border-white dark:border-opacity-20")),outlineBorderMaterial:cls("border-md-light-outline",Tr("dark:border-md-dark-outline")),..._r}};function _extends$O(){return _extends$O=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$O.apply(this,arguments)}const DeleteIcon=_r=>{let{theme:Tr,...Rr}=_r;return Tr==="ios"?React$1.createElement("svg",_extends$O({xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 28 28",fill:"currentcolor"},Rr),React$1.createElement("path",{d:"M14,0 C21.7319865,0 28,6.2680135 28,14 C28,21.7319865 21.7319865,28 14,28 C6.2680135,28 0,21.7319865 0,14 C0,6.2680135 6.2680135,0 14,0 Z M18.9393398,6.93933983 L14,11.8786797 L9.06066017,6.93933983 L6.93933983,9.06066017 L11.8786797,14 L6.93933983,18.9393398 L9.06066017,21.0606602 L14,16.1213203 L18.9393398,21.0606602 L21.0606602,18.9393398 L16.1213203,14 L21.0606602,9.06066017 L18.9393398,6.93933983 Z"})):React$1.createElement("svg",_extends$O({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Rr),React$1.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.47 2 2 6.47 2 12C2 17.53 6.47 22 12 22C17.53 22 22 17.53 22 12C22 6.47 17.53 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM12 10.59L15.59 7L17 8.41L13.41 12L17 15.59L15.59 17L12 13.41L8.41 17L7 15.59L10.59 12L7 8.41L8.41 7L12 10.59Z",fill:"currentcolor"}))};function _extends$N(){return _extends$N=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$N.apply(this,arguments)}const Chip=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,media:Lr,deleteButton:Mr,onDelete:Fr,ios:zr,material:Ur,outline:Vr,children:Nr,...Dr}=_r,jr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:jr.current}));const Gr=Rr,Wr={...Dr},qr=useThemeClasses({ios:zr,material:Ur}),Kr=useTheme({ios:zr,material:Ur}),Xr=useDarkClasses(),Zr=Vr?"outline":"fill",Jr=ChipColors(Pr,Xr),_i=qr(ChipClasses(_r,Jr),Ar);return React$1.createElement(Gr,_extends$N({ref:jr,className:_i.base[Zr]},Wr),Lr&&React$1.createElement("div",{className:_i.media},Lr),Nr,Mr&&React$1.createElement("div",{className:_i.deleteButton,role:"button",tabIndex:"0",onClick:Fr},React$1.createElement(DeleteIcon,{theme:Kr,className:"h-4 w-4"})))});Chip.displayName="Chip";const DialogClasses=(_r,Tr,Rr,Ar)=>{let{hasButtons:Pr}=Ar;const{titleFontSizeMaterial:Lr,titleFontSizeIos:Mr,translucent:Fr,sizeIos:zr,sizeMaterial:Ur}=_r;return{base:{common:cls("left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40 max-h-full overflow-hidden duration-400",positionClass("fixed",Rr)),ios:cls("rounded-xl max-w-full",zr,Tr.bgIos,Fr&&"translucent"),material:cls("rounded-[1.75rem] p-6 max-w-[90%]",Ur,Tr.bgMaterial),opened:"",closed:"scale-[0.85] opacity-0 pointer-events-none"},contentWrap:{common:"flex flex-col items-center justify-center",material:"space-y-3",ios:cls("p-4 space-y-1 relative",Pr&&"hairline-b")},title:{common:cls("w-full"),ios:cls(Tr.titleIos,Mr,"font-semibold text-center"),material:cls(Tr.titleMaterial,Lr)},content:{common:cls("text-sm w-full"),ios:cls(Tr.contentTextIos,"text-center"),material:cls(Tr.contentTextMaterial)},buttons:{common:"flex items-center",ios:cls("justify-center last-child-hairline-r-none"),material:cls("justify-end pt-6 space-x-2 rtl:space-x-reverse")},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},DialogColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:cls("bg-white",Tr("dark:bg-neutral-800")),bgMaterial:cls("bg-md-light-surface-3",Tr("dark:bg-md-dark-surface-3")),titleIos:"",titleMaterial:cls("text-md-light-on-surface",Tr("dark:text-md-dark-on-surface")),contentTextIos:"",contentTextMaterial:cls("text-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant")),..._r}};function _extends$M(){return _extends$M=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$M.apply(this,arguments)}const Dialog=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,opened:Lr,backdrop:Mr=!0,onBackdropClick:Fr,translucent:zr=!0,sizeIos:Ur="w-[16.875rem]",sizeMaterial:Vr="w-[19.5rem]",titleFontSizeIos:Nr="text-[18px]",titleFontSizeMaterial:Dr="text-[24px]",title:jr,content:Gr,buttons:Wr,ios:qr,material:Kr,children:Xr,...Zr}=_r,Jr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Jr.current}));const _i=Lr?"opened":"closed",es=Rr,ts={...Zr},rs=useThemeClasses({ios:qr,material:Kr}),ns=useDarkClasses(),as=DialogColors(Pr,ns),ls=rs(DialogClasses({..._r,titleFontSizeIos:Nr,titleFontSizeMaterial:Dr,translucent:zr,sizeIos:Ur,sizeMaterial:Vr},as,Ar,{hasButtons:!!Wr}),Ar);return React$1.createElement(React$1.Fragment,null,Mr&&React$1.createElement("div",{className:ls.backdrop[_i],onClick:Fr}),React$1.createElement(es,_extends$M({ref:Jr,className:ls.base[_i]},ts),React$1.createElement("div",{className:ls.contentWrap},jr&&React$1.createElement("div",{className:ls.title},jr),(Gr||Xr)&&React$1.createElement("div",{className:ls.content},Gr,Xr)),Wr&&React$1.createElement("div",{className:ls.buttons},Wr)))});Dialog.displayName="Dialog";const DialogButtonClasses=(_r,Tr)=>{const{strong:Rr,disabled:Ar}=_r;return{base:{ios:cls("text-center text-[17px] flex items-center justify-center h-11 w-full hairline-r rtl:hairline-l relative first:rounded-bl-xl last:rounded-br-xl rtl:first:rounded-br-xl rtl:first:rounded-bl-none rtl:last:rounded-bl-xl rtl:last:rounded-br-none",Ar?Tr.disabledTextIos:Tr.textIos,Rr&&"font-semibold",!Ar&&Tr.activeBgIos)}}},DialogButtonColors=function(_r,Tr){return _r===void 0&&(_r={}),{activeBgIos:cls("active:bg-black active:bg-opacity-10",Tr("dark:active:bg-white dark:active:bg-opacity-10")),textIos:"text-primary",disabledTextIos:cls("text-black text-opacity-30",Tr("dark:text-white dark:text-opacity-30")),..._r}};function _extends$L(){return _extends$L=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$L.apply(this,arguments)}const DialogButton=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="button",className:Ar,colors:Pr,ios:Lr,material:Mr,disabled:Fr,strong:zr,strongIos:Ur,strongMaterial:Vr,children:Nr,...Dr}=_r,jr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:jr.current}));const Gr={...Dr},Wr=useTheme({ios:Lr,material:Mr}),qr=useThemeClasses({ios:Lr,material:Mr}),Kr=useDarkClasses(),Xr=DialogButtonColors(Pr,Kr),Zr=typeof zr>"u"?Wr==="ios"?Ur:Vr:zr,Jr=qr(DialogButtonClasses({..._r,strong:Zr},Xr),Ar),_i=Rr;return Wr==="ios"?React$1.createElement(_i,_extends$L({className:Jr.base,disabled:Fr,role:"button",tabIndex:"0"},Gr),Nr):React$1.createElement(Button,_extends$L({component:Rr,inline:!0,rounded:!0,disabled:Fr,clear:!Zr,className:Ar},Gr),Nr)});DialogButton.displayName="DialogButton";const FabClasses=(_r,Tr)=>({base:{common:"flex items-center justify-center space-x-2 rtl:!space-x-reverse cursor-pointer overflow-hidden select-none",ios:`h-12 duration-100 rounded-full shadow-lg ${Tr.bgIos} ${Tr.activeBgIos} ${Tr.textIos}`,material:`duration-300 rounded-2xl shadow ${Tr.bgMaterial} ${Tr.activeBgMaterial} ${Tr.textMaterial} ${Tr.touchRipple}`,iconOnly:{ios:"w-12",material:"w-14 h-14"},withText:{common:"px-4",material:"h-14"}},text:{common:"text-sm",ios:"font-semibold uppercase",material:"font-medium"},icon:{common:"h-1em w-1em",ios:"text-icon-ios",material:"text-icon-material"}}),FabColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:"bg-primary",bgMaterial:cls("bg-md-light-primary-container",Tr("dark:bg-md-dark-primary-container")),activeBgIos:"active:bg-ios-primary-shade",activeBgMaterial:"",textIos:"text-white",textMaterial:cls("text-md-light-on-primary-container",Tr("dark:text-md-dark-on-primary-container")),touchRipple:cls("touch-ripple-primary",Tr("dark:touch-ripple-white")),..._r}};function _extends$K(){return _extends$K=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$K.apply(this,arguments)}const Fab=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="a",className:Ar,colors:Pr,href:Lr,text:Mr,textPosition:Fr="after",icon:zr,ios:Ur,material:Vr,touchRipple:Nr=!0,children:Dr,...jr}=_r,Gr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Gr.current}));const Wr=Rr,qr={...jr},Kr=useTheme({ios:Ur,material:Vr}),Xr=useThemeClasses({ios:Ur,material:Vr}),Zr=useDarkClasses();useTouchRipple(Gr,Kr==="material"&&Nr);const Jr=FabColors(Pr,Zr),_i=Xr(FabClasses(_r,Jr),Ar);return React$1.createElement(Wr,_extends$K({className:Mr?_i.base.withText:_i.base.iconOnly,href:Lr,ref:Gr,role:"button",tabIndex:"0"},qr),Mr&&Fr==="before"&&React$1.createElement("span",{className:_i.text},Mr),zr&&React$1.createElement("span",{className:_i.icon},zr),Mr&&Fr==="after"&&React$1.createElement("span",{className:_i.text},Mr),Dr)});Fab.displayName="Fab";const IconClasses=(_r,Tr)=>({base:`${positionClass("relative",Tr)} inline-block not-italic`,badge:"absolute -end-1.5 -top-0.5"});function _extends$J(){return _extends$J=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$J.apply(this,arguments)}const Icon=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="i",className:Ar,ios:Pr,material:Lr,badge:Mr,badgeColors:Fr,children:zr,...Ur}=_r,Vr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Vr.current}));const Nr=Rr,Dr={...Ur},jr=useThemeClasses(),Gr=useTheme(),Wr=jr(IconClasses(_r,Ar),Ar);return React$1.createElement(Nr,_extends$J({ref:Vr,className:Wr.base},Dr),Gr==="ios"?Pr:Lr,typeof Mr<"u"&&Mr!==null&&React$1.createElement(Badge,{small:!0,className:Wr.badge,colors:Fr},Mr),zr)});Icon.displayName="Icon";const LinkClasses=(_r,Tr,Rr)=>{let{textColor:Ar,needsTouchRipple:Pr}=Tr;const{iconOnly:Lr,tabbar:Mr}=_r;return{base:{common:cls(!Mr&&Ar,"inline-flex space-x-1 rtl:!space-x-reverse justify-center items-center cursor-pointer select-none",Pr&&`touch-ripple-primary ${positionClass("relative",Rr)} z-10`),notTabbar:{ios:"active:opacity-30 duration-300 active:duration-0",material:Pr?"":"active:opacity-55"}},tabbar:{common:cls(positionClass("relative",Rr),"w-full h-full duration-300"),material:"font-medium text-sm z-10",active:"k-tabbar-link-active",inactive:""},toolbar:{common:cls("h-full max-h-12",Lr&&"k-touch-ripple-inset"),material:"px-3 text-sm font-medium"},navbar:{common:cls("h-full max-h-12",Lr&&"k-touch-ripple-inset"),material:"px-3"}}},LinkColors=function(_r,Tr){return _r===void 0&&(_r={}),{textIos:"text-primary",textMaterial:cls("text-md-light-primary",Tr("dark:text-md-dark-primary")),navbarTextIos:"text-primary",navbarTextMaterial:"",..._r}};function _extends$I(){return _extends$I=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$I.apply(this,arguments)}const Link=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="a",className:Ar,colors:Pr,navbar:Lr,toolbar:Mr,iconOnly:Fr,linkProps:zr={},tabbar:Ur,tabbarActive:Vr,touchRipple:Nr=void 0,ios:Dr,material:jr,onClick:Gr,children:Wr,...qr}=_r,Kr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Kr.current}));const Xr=Rr,Zr={...zr,...qr},Jr=useTheme({ios:Dr,material:jr}),_i=useThemeClasses({ios:Dr,material:jr}),es=useDarkClasses(),ts=Jr==="material"&&(Nr||(Mr||Ur||Lr)&&typeof Nr>"u");useTouchRipple(Kr,ts);const rs=LinkColors(Pr,es),ns=_r.navbar?Jr==="material"?rs.navbarTextMaterial:rs.navbarTextIos:Jr==="material"?rs.textMaterial:rs.textIos,as=Ur&&!Vr?rs.tabbarInactive:ns,ls=Vr?"active":"inactive",us=_i(LinkClasses(_r,{textColor:as,needsTouchRipple:ts},Ar)),xs=cls(us.base[Ur?"default":"notTabbar"],Mr&&us.toolbar,Lr&&us.navbar,Ur&&us.tabbar[ls],Ar);return React$1.createElement(Xr,_extends$I({ref:Kr,className:xs},Zr,{role:"link",tabIndex:"0",onClick:Gr}),Wr)});Link.displayName="Link";const ListClasses=(_r,Tr,Rr)=>{const{nested:Ar,margin:Pr,inset:Lr,strong:Mr,outline:Fr}=_r;return{base:{common:cls(!Ar&&Pr,!Lr&&!Ar&&Fr&&"hairline-t hairline-b",Lr&&Fr&&"border",positionClass("relative",Rr),"z-10"),ios:cls(Mr&&Tr.strongBgIos,Lr&&Fr&&Tr.outlineIos),material:cls(Mr&&Tr.strongBgMaterial,Lr&&Fr&&Tr.outlineMaterial)},ul:{common:cls(Lr&&"no-safe-areas","last-child-hairline-b-none")},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"},menuList:{common:"py-1"}}},ListColors=function(_r,Tr){return _r===void 0&&(_r={}),{outlineIos:cls("border-black border-opacity-20",Tr("dark:border-white dark:border-opacity-15")),outlineMaterial:cls("border-md-light-outline",Tr("border-md-dark-outline")),strongBgIos:cls("bg-ios-light-surface-1",Tr("dark:bg-ios-dark-surface-1")),strongBgMaterial:cls("bg-md-light-surface-1",Tr("dark:bg-md-dark-surface-1")),..._r}},ListDividersContext=React$1.createContext(!1);function _extends$H(){return _extends$H=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$H.apply(this,arguments)}const List=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,margin:Lr="my-8",nested:Mr,menuList:Fr,dividers:zr,dividersIos:Ur=!0,dividersMaterial:Vr=!1,inset:Nr,insetIos:Dr,insetMaterial:jr,strong:Gr,strongIos:Wr,strongMaterial:qr,outline:Kr,outlineIos:Xr,outlineMaterial:Zr,ios:Jr,material:_i,children:es,...ts}=_r,rs=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:rs.current}));const ns=Rr,as={...ts},ls=useTheme(),us=useThemeClasses({ios:Jr,material:_i}),xs=useDarkClasses(),Ts=typeof zr>"u"?ls==="ios"?Ur:Vr:zr,vs=typeof Gr>"u"?ls==="ios"?Wr:qr:Gr,gs=typeof Kr>"u"?ls==="ios"?Xr:Zr:Kr,fs=typeof Nr>"u"?ls==="ios"?Dr:jr:Nr,ys=ListColors(Pr,xs),ks=us(ListClasses({..._r,margin:Lr,inset:fs,strong:vs,outline:gs},ys,Ar)),Fs=cls(ks.base,fs&&ks.inset,Fr&&ks.menuList,Ar);return React$1.createElement(ListDividersContext.Provider,{value:Ts},React$1.createElement(ns,_extends$H({ref:rs,className:Fs},as),React$1.createElement("ul",{className:ks.ul},es)))});List.displayName="List";function _extends$G(){return _extends$G=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$G.apply(this,arguments)}const ListGroup=reactExports.forwardRef((_r,Tr)=>{const{children:Rr,...Ar}=_r,Pr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Pr.current}));const Lr={...Ar};return React$1.createElement("li",{ref:Pr},React$1.createElement(List,_extends$G({nested:!0},Lr),Rr))});ListGroup.displayName="ListGroup";const ListButtonClasses=(_r,Tr,Rr)=>{const{dividers:Ar}=_r;return{base:"",button:{common:cls(positionClass("relative",Rr),Ar&&"hairline-b active:hairline-transparent",`flex items-center justify-center px-4 space-x-1 w-full duration-300 active:duration-0 focus:outline-none ${Tr.touchRipple} overflow-hidden select-none`),ios:cls("h-11",Tr.textIos,Tr.activeBgIos,Tr.activeBgIos),material:cls("h-12",Tr.textMaterial,Tr.activeBgMaterial)}}},ListButtonColors=function(_r,Tr){return _r===void 0&&(_r={}),{textIos:"text-primary",textMaterial:cls("text-md-light-primary",Tr("dark:text-md-dark-primary")),activeBgIos:"active:bg-primary active:bg-opacity-15",activeBgMaterial:"",touchRipple:"touch-ripple-primary",..._r}},useListDividers=()=>reactExports.useContext(ListDividersContext);function _extends$F(){return _extends$F=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$F.apply(this,arguments)}const ListButton=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="li",className:Ar,colors:Pr,href:Lr,target:Mr,type:Fr,value:zr,linkComponent:Ur="a",linkProps:Vr={},ios:Nr,material:Dr,touchRipple:jr=!0,children:Gr,...Wr}=_r,qr=reactExports.useRef(null),Kr=reactExports.useRef(null),Xr=useListDividers();reactExports.useImperativeHandle(Tr,()=>({el:qr.current}));const Zr=Rr,Jr={...Wr},_i=useTheme({ios:Nr,material:Dr}),es=useThemeClasses({ios:Nr,material:Dr});useTouchRipple(Kr,_i==="material"&&jr);const ts=useDarkClasses(),rs=ListButtonColors(Pr,ts),ns=es(ListButtonClasses({..._r,dividers:Xr},rs,Ar),Ar),as=!!Lr||Lr==="",us={href:!as||Lr===!0||Lr===!1?void 0:Lr||"",target:Mr,type:Fr,value:zr,...Vr},xs=as?Ur:"button";return React$1.createElement(Zr,_extends$F({ref:qr,className:ns.base},Jr),React$1.createElement(xs,_extends$F({ref:Kr,className:ns.button},us),Gr))});ListButton.displayName="ListButton";const ListItemClasses=(_r,Tr,Rr)=>{let{className:Ar,isMediaItem:Pr,theme:Lr,textColor:Mr,needsTouchRipple:Fr,isMenuListItemActive:zr,autoStrongTitle:Ur}=Rr;const{menuListItem:Vr,dividers:Nr,mediaClassName:Dr="",mediaClass:jr="",innerClassName:Gr="",innerClass:Wr="",contentClassName:qr="",contentClass:Kr="",titleWrapClassName:Xr="",titleWrapClass:Zr="",titleFontSizeIos:Jr,titleFontSizeMaterial:_i,strongTitle:es,contacts:ts}=_r;return{base:{common:Vr?`${Mr} py-1`:"",material:ts&&"[&:nth-child(2)]:-mt-12"},itemContent:{common:cls(`flex items-center ${qr||Kr}`),ios:cls(!Vr&&cls(Tr.primaryTextIos,"ps-4-safe"),Vr&&"rounded-lg ml-2-safe mr-2-safe ps-2"),material:cls(!Vr&&cls(Tr.primaryTextMaterial,Pr?"ml-2-safe mr-2-safe rounded-2xl ps-2":"ps-4-safe",ts&&"ml-10"),Vr&&"rounded-full min-h-[3.5rem] ml-4-safe mr-4-safe ps-4"),link:cls("duration-300 active:duration-0 cursor-pointer select-none",Nr&&Lr==="ios"&&"active:hairline-transparent",Fr&&cls("relative overflow-hidden z-10",Tr.touchRipple),cls(zr?Lr==="ios"?Tr.menuListItemActiveBgIos:Tr.menuListItemActiveBgMaterial:Vr?Lr==="ios"?Tr.menuListItemBgIos:Tr.menuListItemBgMaterial:Lr==="ios"?Tr.activeBgIos:Tr.activeBgMaterial))},media:{common:`shrink-0 flex ${Dr||jr}`,ios:"py-2 me-4",material:cls("py-3",Vr?"me-3":"me-4")},inner:{common:cls("w-full relative",!Vr&&Nr&&"hairline-b",Gr||Wr),ios:"py-2.5 pe-4-safe",material:cls("py-3",Pr&&!Vr?"pe-2":"pe-4-safe")},titleWrap:{common:cls(`flex justify-between items-center ${Xr||Zr}`),ios:cls(!Vr&&Jr),material:cls(!Vr&&_i)},title:{common:"shrink",menuListItem:cls("text-sm",es===!0||Ur?"font-semibold":"font-medium"),strong:{common:"",ios:"font-semibold",material:"font-medium"}},after:{common:cls("shrink-0 ms-auto ps-1 flex items-center space-x-1"),ios:Tr.secondaryTextIos,material:cls(Tr.secondaryTextMaterial,"text-sm")},chevron:"opacity-20 shrink-0 ms-3 rtl:rotate-180",subtitle:"text-sm",text:{common:cls("text-sm line-clamp-2"),ios:Tr.secondaryTextIos,material:Tr.secondaryTextMaterial},header:{common:"text-xs mb-0.5",ios:Tr.secondaryTextIos,material:Tr.secondaryTextMaterial},footer:{common:cls("text-xs mt-0.5"),ios:Tr.secondaryTextIos,material:Tr.secondaryTextMaterial},groupTitle:{common:cls("pl-4-safe pr-4-safe py-1 flex items-center z-20",positionClass("relative",Ar)),ios:`h-8${Nr?" hairline-t":""} -mt-px ${Jr} ${Tr.secondaryTextIos} ${Tr.groupTitleBgIos} ${ts&&cls("font-semibold top-11-safe sticky",Tr.groupTitleContactsTextIos,Tr.groupTitleContactsBgIos)}`,material:`h-12 ${_i} ${Tr.secondaryTextMaterial} ${Tr.groupTitleBgMaterial} ${ts&&cls("pointer-events-none overflow-visible h-12 box-border text-xl font-medium flex max-w-full items-center px-4 top-16-safe sticky",Tr.groupTitleContactsTextMaterial,Tr.groupTitleContactsBgMaterial)}`}}},ListItemColors=function(_r,Tr){return _r===void 0&&(_r={}),{primaryTextIos:cls("text-black",Tr("dark:text-white")),primaryTextMaterial:cls("text-md-light-on-surface",Tr("dark:text-md-dark-on-surface")),secondaryTextIos:cls("text-black text-opacity-55",Tr("dark:text-white dark:text-opacity-55")),secondaryTextMaterial:cls("text-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant")),activeBgIos:cls("active:bg-black active:bg-opacity-10",Tr("dark:active:bg-white dark:active:bg-opacity-10")),activeBgMaterial:"",groupTitleBgIos:cls("bg-ios-light-surface-variant",Tr("dark:bg-ios-dark-surface-variant")),groupTitleBgMaterial:cls("bg-md-light-surface-2",Tr("dark:bg-md-dark-surface-2")),menuListItemTextIos:cls("text-black",Tr("dark:text-white")),menuListItemTextMaterial:cls("text-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant")),menuListItemBgIos:cls("active:bg-black active:bg-opacity-10",Tr("dark:active:bg-white dark:active:bg-opacity-10")),menuListItemBgMaterial:cls("bg-md-light-surface-1",Tr("dark:bg-md-dark-surface-1")),menuListItemActiveTextIos:cls("text-primary",Tr("dark:text-white")),menuListItemActiveTextMaterial:cls("text-md-light-on-secondary-container",Tr("dark:text-md-dark-on-secondary-container")),menuListItemActiveBgIos:cls("bg-primary bg-opacity-15",Tr("dark:bg-primary")),menuListItemActiveBgMaterial:cls("bg-md-light-secondary-container",Tr("dark:bg-md-dark-secondary-container")),touchRipple:cls("touch-ripple-black",Tr("dark:touch-ripple-white")),groupTitleContactsTextIos:cls("text-opacity-90",Tr("dark:text-opacity-90")),groupTitleContactsTextMaterial:cls("text-md-light-primary",Tr("dark:text-md-dark-primary")),groupTitleContactsBgIos:cls(Tr("dark:bg-[#323234]")),groupTitleContactsBgMaterial:cls("bg-transparent",Tr("dark:bg-transparent")),..._r}};function _extends$E(){return _extends$E=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$E.apply(this,arguments)}const ListItem=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="li",colors:Ar,className:Pr,mediaClassName:Lr="",innerClassName:Mr="",innerChildren:Fr,contentClassName:zr="",contentChildren:Ur,titleWrapClassName:Vr="",titleFontSizeIos:Nr="text-[17px]",titleFontSizeMaterial:Dr="text-[16px]",title:jr,subtitle:Gr,text:Wr,after:qr,media:Kr,header:Xr,footer:Zr,menuListItem:Jr,menuListItemActive:_i,groupTitle:es,strongTitle:ts="auto",label:rs,chevron:ns=void 0,chevronIos:as=!0,chevronMaterial:ls=!0,chevronIcon:us,href:xs,target:Ts,link:vs,linkComponent:gs="a",linkProps:fs={},dividers:ys,contacts:ks,ios:Fs,material:Us,touchRipple:Vs=!0,children:ao,...qs}=_r,Qs=reactExports.useRef(null),mo=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:mo.current}));const Xs=Rr,so={...qs},uo=typeof ys>"u"?useListDividers():ys,bo=useTheme({ios:Fs,material:Us}),wo=useThemeClasses({ios:Fs,material:Us}),Co=useDarkClasses(),ds=typeof ns>"u"?bo==="ios"?as:ls:ns,Is=ListItemColors(Ar,Co),Gs=Jr&&_i,to=Is[`${Gs?"menuListItemActiveText":Jr?"menuListItemText":"text"}${bo==="ios"?"Ios":"Material"}`],no=!!xs||xs===""||Jr||vs,Ro=!!rs,ro=bo==="material"&&(Ro||no)&&Vs;useTouchRipple(Qs,ro);const go=xs===!0||xs===!1||typeof xs>"u"?void 0:xs||"",No=no?gs:Ro?"label":"div",Do=no?{href:go,target:Ts,...fs}:{},To=jr&&(Gr||Wr),Wo=ts==="auto"&&To,ko=wo(ListItemClasses({..._r,titleFontSizeIos:Nr,titleFontSizeMaterial:Dr,dividers:uo,strongTitle:ts,mediaClassName:Lr,innerClassName:Mr,contentClassName:zr,titleWrapClassName:Vr},Is,{isMediaItem:To,theme:bo,textColor:to,needsTouchRipple:ro,isMenuListItemActive:Gs,darkClasses:Co,autoStrongTitle:Wo,className:Pr}),Pr),$a=no||Ro?ko.itemContent.link:ko.itemContent.default,Il=Jr?ko.title.menuListItem:ts===!0||Wo?ko.title.strong:ko.title.default;return es?React$1.createElement(Xs,{className:cls(ko.groupTitle,Pr)},jr,ao):React$1.createElement(Xs,_extends$E({ref:mo,className:ko.base},so),React$1.createElement(No,_extends$E({ref:Qs,className:$a},Do),Kr&&React$1.createElement("div",{className:ko.media},Kr),React$1.createElement("div",{className:ko.inner},Xr&&React$1.createElement("div",{className:ko.header},Xr),(jr||qr)&&React$1.createElement("div",{className:ko.titleWrap},jr&&React$1.createElement("div",{className:Il},jr),qr&&React$1.createElement("div",{className:ko.after},qr),no&&ds&&!Jr&&(us||React$1.createElement(ChevronIcon,{className:ko.chevron}))),Gr&&React$1.createElement("div",{className:ko.subtitle},Gr),Wr&&React$1.createElement("div",{className:ko.text},Wr),Zr&&React$1.createElement("div",{className:ko.footer},Zr),Fr),Ur),ao)});ListItem.displayName="ListItem";function _extends$D(){return _extends$D=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$D.apply(this,arguments)}const DropdownIcon=_r=>React$1.createElement("svg",_extends$D({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"5",viewBox:"0 0 8 5",fill:"currentcolor"},_r),React$1.createElement("polygon",{fillRule:"evenodd",points:"0 0 8 0 4 5"})),ListInputClasses=(_r,Tr,Rr)=>{let{isFloatingTransformed:Ar,isFocused:Pr,darkClasses:Lr,getLabelColor:Mr,hasLabel:Fr}=Rr;const{error:zr,type:Ur,outline:Vr,inputClassName:Nr="",inputClass:Dr=""}=_r;return{base:{common:"",ios:cls(Vr&&"my-4"),material:cls("py-2")},itemContent:{common:"relative",ios:cls(Vr&&"ml-4 mr-4 rounded-lg",!Vr&&Tr.bgIos),material:cls("min-h-[56px] ml-4 mr-4",Vr?cls("rounded"):cls(Tr.bgMaterial,"rounded-t relative "))},inner:{common:"",material:cls(Vr?"pt-4 pb-4":"pt-2 pb-2"),stacked:"",floating:""},label:{common:cls("duration-200 text-xs",Mr(),Vr&&"flex"),ios:cls(Vr&&"-mt-4"),material:cls(Vr&&"-mt-4"),stacked:"",floating:{common:cls("pointer-events-none duration-200 transform origin-left rtl:origin-right max-w-[66%]",Ar&&"scale-133"),ios:Ar?Vr?"translate-y-6":"translate-y-4":"",material:Ar?Vr?"translate-y-8":"translate-y-3":""}},labelText:{common:cls(Vr&&"relative p-1 block -m-1"),ios:cls(Vr&&cls("-top-1",Tr.outlineLabelBgIos)),material:cls(Vr&&cls("-top-2",Tr.outlineLabelBgMaterial))},inputWrap:{common:"relative",ios:cls((!Fr||Vr)&&"-mt-2.5","-mb-2.5"),stacked:"",floating:""},media:{material:""},titleWrap:{material:`duration-200 ${Mr()}`},input:{common:`block text-base appearance-none w-full focus:outline-none bg-transparent ${Nr||Dr}`,ios:"h-10",material:"h-6",notFloating:{common:cls("placeholder-black placeholder-opacity-30",Lr("dark:placeholder-white dark:placeholder-opacity-30")),material:cls(Ur==="textarea"&&"py-1"),ios:cls(Ur==="textarea"&&"py-2")},floating:Ar?"placeholder-transparent":cls("placeholder-black placeholder-opacity-30",Lr("dark:placeholder-white dark:placeholder-opacity-30"))},errorInfo:{common:"text-xs relative z-10",ios:"mt-1",material:""},error:Tr.errorText,info:"opacity-50",clearButton:{common:"absolute end-0 top-1/2 transform -translate-y-1/2 cursor-pointer",ios:cls("w-3.5 h-3.5 opacity-45 active:opacity-30",Tr.labelTextIos),material:cls("w-6 h-6 active:opacity-55",Tr.labelTextMaterial)},dropdown:"absolute end-0 top-1/2 transform -translate-y-1/2 pointer-events-none opacity-50",border:{common:"pointer-events-none absolute start-0 bottom-0 duration-200 w-full",ios:Vr&&cls(zr?Tr.errorBorder:Pr?Tr.outlineBorderFocusIos:Tr.outlineBorderIos,"h-full border rounded-lg -z-10"),material:cls(zr?Tr.errorBorder:Pr?Tr.outlineBorderFocusMaterial:Tr.outlineBorderMaterial,Vr&&cls("h-full border rounded -z-10",Pr&&"border-2"),!Vr&&cls("border-b h-px origin-bottom",Pr&&"scale-y-[2]"))}}},ListInputColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:"",bgMaterial:cls("bg-md-light-surface-variant",Tr("dark:bg-md-dark-surface-variant")),outlineBorderIos:cls("border-black border-opacity-30",Tr("dark:border-white dark:border-opacity-30")),outlineBorderFocusIos:"border-primary",outlineBorderMaterial:cls("border-md-light-on-surface",Tr("dark:border-md-dark-on-surface")),outlineBorderFocusMaterial:cls("border-md-light-primary",Tr("dark:border-md-dark-primary")),outlineLabelBgIos:cls("bg-ios-light-surface-1",Tr("dark:bg-ios-dark-surface-1")),outlineLabelBgMaterial:cls("bg-md-light-surface",Tr("dark:bg-md-dark-surface")),labelTextIos:"",labelTextFocusIos:"",labelTextMaterial:cls("text-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant")),labelTextFocusMaterial:cls("text-md-light-primary",Tr("dark:text-md-dark-primary")),errorText:"text-red-500",errorBorder:"border-red-500",..._r}};function _extends$C(){return _extends$C=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$C.apply(this,arguments)}const ListInput=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="li",className:Ar,colors:Pr,label:Lr,floatingLabel:Mr,outline:Fr,outlineIos:zr,outlineMaterial:Ur,media:Vr,input:Nr,info:Dr,error:jr,clearButton:Gr,dropdown:Wr,inputId:qr,inputStyle:Kr,inputClassName:Xr="",name:Zr,value:Jr,defaultValue:_i,type:es="text",inputMode:ts,readOnly:rs,required:ns,disabled:as,placeholder:ls,size:us,accept:xs,autoComplete:Ts,autoCorrect:vs,autoCapitalize:gs,spellCheck:fs,autoFocus:ys,autoSave:ks,max:Fs,min:Us,step:Vs,maxLength:ao,minLength:qs,multiple:Qs,pattern:mo,tabIndex:Xs,onInput:so,onChange:uo,onFocus:bo,onBlur:wo,onClear:Co,ios:ds,material:Is,children:Gs,...to}=_r,no=reactExports.useRef(null),Ro=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Ro.current,inputEl:no.current}));const[ro,go]=reactExports.useState(!1),No=useTheme({ios:ds,material:Is}),Do=useThemeClasses({ios:ds,material:Is}),To=useDarkClasses(),Wo=ListInputColors(Pr,To),ko=Lr&&Mr?"floating":"stacked",$a=ko==="floating"?"floating":"notFloating",Il=()=>{if(no.current)return no.current.value},Fl=Lr&&Mr&&!(()=>{const Zs=Il();return typeof Jr>"u"?Zs||Zs===0:Jr||Jr===0})()&&!ro,Kl=()=>jr?Wo.errorText:No==="material"?ro?Wo.labelTextFocusMaterial:Wo.labelTextMaterial:No==="ios"?ro?Wo.labelTextFocusIos:Wo.labelTextIos:"",cu=Zs=>{go(!0),bo&&bo(Zs)},Vo=Zs=>{go(!1),wo&&wo(Zs)},Bs=typeof Fr>"u"?No==="ios"?zr:Ur:Fr,Ws=Do(ListInputClasses({..._r,outline:Bs},Wo,{isFloatingTransformed:Fl,isFocused:ro,darkClasses:To,getLabelColor:Kl,inputClassName:Xr,hasLabel:!!Lr})),ms={...to},ps=()=>{if(Nr)return Nr;const Zs=es==="select"||es==="textarea"?es:"input",Eo=Zs==="input";return React$1.createElement(Zs,{id:qr,ref:no,className:Ws.input[$a],style:Kr,name:Zr,type:Eo?es:void 0,placeholder:ls,inputMode:ts,size:us,accept:xs,autoComplete:Ts,autoCorrect:vs,autoCapitalize:gs,spellCheck:fs,autoFocus:ys,autoSave:ks,disabled:as,max:Fs,maxLength:ao,min:Us,minLength:qs,step:Vs,multiple:Qs,readOnly:rs,required:ns,pattern:mo,tabIndex:Xs,value:Jr,defaultValue:_i,onInput:so,onChange:uo,onFocus:cu,onBlur:Vo},es==="select"?Gs:null)},Ps=React$1.createElement(React$1.Fragment,null,jr&&jr!==!0&&React$1.createElement("div",{className:cls(Ws.errorInfo,Ws.error)},jr),Dr&&!jr&&React$1.createElement("div",{className:cls(Ws.errorInfo,Ws.info)},Dr)),Ls=React$1.createElement(React$1.Fragment,null,Lr&&React$1.createElement("div",{className:Ws.label[ko]},React$1.createElement("div",{className:Ws.labelText},Lr)),React$1.createElement("div",{className:Ws.inputWrap[ko]},ps(),Gr&&React$1.createElement(DeleteIcon,{theme:No,onClick:Co,className:Ws.clearButton}),Wr&&React$1.createElement(DropdownIcon,{className:Ws.dropdown})),Ps);return React$1.createElement(ListItem,_extends$C({ref:Ro,component:Rr,media:Vr,className:Ws.base,title:null,mediaClassName:Ws.media,innerClassName:Ws.inner[ko],contentClassName:Ws.itemContent,titleWrapClassName:Ws.titleWrap,innerChildren:Ls,contentChildren:(Bs||No==="material")&&React$1.createElement("span",{className:Ws.border}),dividers:No==="material"||Bs?!1:void 0},ms),es!=="select"?Gs:null)});ListInput.displayName="ListInput";function _extends$B(){return _extends$B=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$B.apply(this,arguments)}const MenuList=reactExports.forwardRef((_r,Tr)=>{const{children:Rr,...Ar}=_r,Pr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Pr.current}));const Lr={...Ar};return React$1.createElement(List,_extends$B({ref:Pr,menuList:!0},Lr),Rr)});MenuList.displayName="MenuList";function _extends$A(){return _extends$A=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$A.apply(this,arguments)}const MenuListItem=reactExports.forwardRef((_r,Tr)=>{const{active:Rr,href:Ar,children:Pr,...Lr}=_r,Mr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Mr.current}));const Fr={...Lr};return React$1.createElement(ListItem,_extends$A({ref:Mr,menuListItem:!0,menuListItemActive:Rr,href:Ar||!1},Fr),Pr)});MenuListItem.displayName="MenuListItem";const MessageClasses=(_r,Tr)=>{const{type:Rr}=_r;return{message:{common:"max-w-[70%] box-border flex relative z-1 transform translate-z-0 mb-2 first:mt-2"},messageSent:{common:cls("self-end",Tr.messageSent)},messageReceived:{common:""},messageName:{common:"text-xs",ios:cls("mb-0.5 ms-4",Tr.messageNameIos),material:cls("ms-4 mb-0.5",Tr.messageNameMd)},messageHeader:{common:"text-xs",ios:cls("mb-0.5 ms-4",Tr.messageNameIos),material:cls("ms-4 mb-0.5",Tr.messageNameMd)},messageFooter:{common:"text-xs",ios:cls("mb-0.5 ms-4",Tr.messageNameIos),material:cls("ms-4 mb-0.5",Tr.messageNameMd)},messageAvatar:{common:cls("rounded-full relative bg-cover self-end shrink-0 me-1.5 w-8 h-8")},messageContent:{common:"flex flex-col"},messageBubble:{...Rr==="sent"&&{ios:cls("rounded-3xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",Tr.bubbleSentIos),material:cls("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4",Tr.bubbleSentMd)},...Rr==="received"&&{ios:cls("rounded-2xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",Tr.bubbleReceivedIos),material:cls("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4 ",Tr.bubbleReceivedMd)}},messageTextHeader:{common:"w-full text-left leading-tight text-sm opacity-80"},messageTextFooter:{common:"w-full text-left leading-tight text-sm opacity-80"},messageText:{common:"w-full text-left leading-tight"}}},MessageColors=function(_r,Tr){return _r===void 0&&(_r={}),{messageSent:"text-white",messageNameIos:cls("text-black text-opacity-45",Tr("dark:text-white dark:text-opacity-45")),messageNameMd:cls("text-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant")),bubbleSentIos:cls("bg-primary"),bubbleSentMd:cls("bg-md-light-primary",Tr("dark:bg-md-dark-primary dark:text-md-dark-on-primary")),bubbleReceivedIos:cls("bg-[#e5e5ea]",Tr("dark:bg-[#252525]")),bubbleReceivedMd:cls(Tr("dark:bg-md-dark-surface-variant"),"bg-[#e5e5ea]"),..._r}};function _extends$z(){return _extends$z=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$z.apply(this,arguments)}const Message=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,id:Lr,text:Mr,name:Fr,type:zr="sent",header:Ur,footer:Vr,textHeader:Nr,textFooter:Dr,avatar:jr,ios:Gr,material:Wr,children:qr,...Kr}=_r,Xr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Xr.current}));const Zr=useThemeClasses({ios:Gr,material:Wr}),Jr=useDarkClasses(),_i=MessageColors(Pr,Jr),es=Zr(MessageClasses({..._r},_i)),ts=Rr,rs={...Kr},ns=cls(Ar,es.message,{[es.messageSent]:zr==="sent",[es.messageReceived]:zr==="received"});return React$1.createElement(ts,_extends$z({id:Lr,ref:Xr,className:ns},rs),jr&&React$1.createElement("div",{className:es.messageAvatar},jr),React$1.createElement("div",{className:es.messageContent},Fr&&React$1.createElement("div",{className:es.messageName},Fr),Ur&&React$1.createElement("div",{className:es.messageHeader},Ur),React$1.createElement("div",{className:es.messageBubble},Nr&&React$1.createElement("div",{className:es.messageTextHeader},Nr),Mr&&React$1.createElement("div",{className:es.messageText},Mr),Dr&&React$1.createElement("div",{className:es.messageTextFooter},Dr)),Vr&&React$1.createElement("div",{className:es.messageFooter},Vr)))});Message.displayName="Message";const MessagebarClasses=(_r,Tr,Rr)=>{let{isFocused:Ar}=Rr;const{rightClassName:Pr="",rightClass:Lr="",leftClassName:Mr="",leftClass:Fr=""}=_r;return{base:{common:"fixed bottom-0 start-0 w-full"},toolbar:{material:Tr.bgMessage},left:{common:cls("mt-1 -ms-2",Mr||Fr),ios:cls("px-2",Tr.toolbarIconIos),material:cls("",Tr.toolbarIconMd)},right:{common:cls("mt-1 -me-2",Pr||Lr),ios:cls("px-2",Tr.toolbarIconIos)},messagebarArea:{common:"w-full"},messagebarInput:{common:cls("block w-full focus:outline-none resize-none",Ar&&"outline-offset-0"),ios:cls("border h-8 rounded-3xl px-4 leading-4 py-1.5",Tr.inputBgIos,Tr.borderIos,Tr.placeholderIos),material:cls("rounded-3xl h-12 px-4 py-4 leading-4 ",Tr.inputBgMd,Tr.placeholderMd)}}},MessagebarColors=function(_r,Tr){return _r===void 0&&(_r={}),{toolbarIconIos:cls("fill-primary",Tr("dark:fill-md-dark-primary")),toolbarIconMd:cls("fill-black"),inputBgIos:cls("bg-transparent"),borderIos:cls("border-[#c8c8cd]",Tr("dark:border-white dark:border-opacity-30")),inputBgMd:cls("bg-md-light-surface-2",Tr("dark:bg-md-dark-surface-variant")),placeholderIos:cls(Tr("dark:placeholder-white dark:placeholder-opacity-40")),placeholderMd:cls("placeholder-md-light-on-surface-variant",Tr("dark:placeholder-md-dark-on-surface-variant")),bgIos:cls("bg-white",Tr("dark:bg-black")),bgMaterial:cls("bg-md-light-surface",Tr("dark:bg-md-dark-surface")),..._r}},ToolbarClasses=(_r,Tr,Rr)=>{const{bgClassName:Ar="",bgClass:Pr="",outline:Lr,translucent:Mr,innerClassName:Fr="",innerClass:zr="",tabbar:Ur,tabbarIcons:Vr,top:Nr}=_r;return{base:{common:cls("w-full z-20",positionClass("relative",Rr),!Nr&&"pb-safe")},bg:{common:cls("absolute w-full h-full left-0 top-0",Lr&&(Nr?"hairline-b":"hairline-t"),Ar||Pr),ios:cls(Tr.bgIos,Mr&&"translucent"),material:cls(`${Tr.bgMaterial}`)},inner:{common:cls("flex relative justify-between items-center w-full overflow-hidden",Fr||zr),ios:cls("pl-2-safe pr-2-safe",Vr?"h-12.5":"h-11"),material:cls(Ur?"":"pl-2-safe pr-2-safe",Vr?"h-20":"h-14")},highlight:{common:cls(Nr?"bottom-0":"top-0","absolute left-0 w-full h-0.5 duration-200 pointer-events-none transition-transform"),ios:Tr.tabbarHighlightBgIos,material:Tr.tabbarHighlightBgMaterial}}},ToolbarColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:cls("bg-ios-light-surface-2",Tr("dark:bg-ios-dark-surface-2")),bgMaterial:cls("bg-md-light-surface-2",Tr("dark:bg-md-dark-surface-2")),tabbarHighlightBgIos:"bg-primary",tabbarHighlightBgMaterial:cls("bg-md-light-primary",Tr("dark:bg-md-dark-primary")),..._r}};function _extends$y(){return _extends$y=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$y.apply(this,arguments)}const Toolbar=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,translucent:Lr=!0,bgClassName:Mr="",innerClassName:Fr="",outline:zr,tabbar:Ur,tabbarIcons:Vr,tabbarLabels:Nr,top:Dr,ios:jr,material:Gr,children:Wr,...qr}=_r,Kr=reactExports.useRef(null),Xr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Xr.current}));const Zr=Rr,[Jr,_i]=reactExports.useState({transform:"",width:""}),es=useTheme({ios:jr,material:Gr}),ts=useThemeClasses({ios:jr,material:Gr}),rs=useDarkClasses(),ns={...qr},as=ToolbarColors(Pr,rs),us=ts(ToolbarClasses({..._r,outline:typeof zr>"u"?es==="ios":zr,translucent:Lr,bgClassName:Mr,innerClassName:Fr},as,Ar),Ar),xs=es==="material"&&Ur&&!Vr;return reactExports.useEffect(()=>{if(xs&&Kr.current){const Ts=Kr.current.previousElementSibling,vs=1/Ts.children.length*100,gs=[...Ts.children].indexOf(Ts.querySelector(".k-tabbar-link-active"));_i({...Jr,width:`${vs}%`,transform:`translateX(${gs*100}%)`})}},[Wr]),React$1.createElement(Zr,_extends$y({ref:Xr,className:us.base},ns),React$1.createElement("div",{className:us.bg}),React$1.createElement("div",{className:us.inner},Wr),xs&&React$1.createElement("span",{className:us.highlight,style:Jr,ref:Kr}))});Toolbar.displayName="Toolbar";function _extends$x(){return _extends$x=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$x.apply(this,arguments)}const Messagebar=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,id:Lr,style:Mr,name:Fr,placeholder:zr="Message",value:Ur,outline:Vr=!1,leftClassName:Nr="",rightClassName:Dr="",textareaId:jr,disabled:Gr,size:Wr,left:qr,right:Kr,ios:Xr,material:Zr,onInput:Jr,onChange:_i,onFocus:es,children:ts,...rs}=_r,ns=reactExports.useRef(null),as=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:ns.current,areaElRef:as.current}));const[ls,us]=reactExports.useState(!1),xs=useThemeClasses({ios:Xr,material:Zr}),Ts=useDarkClasses(),vs=MessagebarColors(Pr,Ts),gs=Fs=>{us(!0),es&&es(Fs)},fs=xs(MessagebarClasses({..._r},vs,{isFocused:ls})),ys=Rr,ks={...rs};return React$1.createElement(ys,_extends$x({ref:ns,id:Lr,style:Mr,className:fs.base},ks),React$1.createElement(Toolbar,{colors:vs,outline:Vr},qr&&React$1.createElement("div",{className:fs.left},qr),React$1.createElement("div",{className:fs.messagebarArea},React$1.createElement("textarea",{id:jr,ref:as,type:"textarea",className:fs.messagebarInput,placeholder:zr,name:Fr,size:Wr,disabled:Gr,onInput:Jr,onChange:_i,onFocus:gs,value:Ur})),Kr&&React$1.createElement("div",{className:fs.right},Kr)))});Messagebar.displayName="Messagebar";const MessagesClasses=()=>({base:{common:cls("flex flex-col relative z-1 px-2"),ios:"mb-12",material:"mb-16"}});function _extends$w(){return _extends$w=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$w.apply(this,arguments)}const Messages=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,id:Lr,ios:Mr,material:Fr,children:zr,...Ur}=_r,Vr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Vr.current}));const Dr=useThemeClasses({ios:Mr,material:Fr})(MessagesClasses({..._r})),jr=Rr,Gr={...Ur};return React$1.createElement(jr,_extends$w({id:Lr,className:Dr.base,ref:Vr},Gr),zr)});Messages.displayName="Messages";const MessagesTitleClasses=(_r,Tr)=>({base:{common:cls("text-center text-xs leading-none"),ios:cls("w-full mt-2.5",Tr.titleIos),material:cls("mt-4",Tr.titleMd)}}),MessagesTitleColors=function(_r,Tr){return _r===void 0&&(_r={}),{titleIos:cls("text-black text-opacity-45",Tr("dark:text-white dark:text-opacity-45")),titleMd:cls("text-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant")),..._r}};function _extends$v(){return _extends$v=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$v.apply(this,arguments)}const MessagesTitle=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,ios:Lr,material:Mr,id:Fr,children:zr,...Ur}=_r,Vr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Vr.current}));const Nr=useThemeClasses({ios:Lr,material:Mr}),Dr=useDarkClasses(),jr=MessagesTitleColors(Pr,Dr),Gr=Nr(MessagesTitleClasses({..._r},jr)),Wr=Rr,qr={...Ur};return React$1.createElement(Wr,_extends$v({id:Fr,className:Gr.base,ref:Vr},qr),zr)});MessagesTitle.displayName="MessagesTitle";const NavbarClasses=(_r,Tr,Rr)=>{const{outline:Ar,translucent:Pr,large:Lr,medium:Mr,transparent:Fr,left:zr,right:Ur,fontSizeIos:Vr,fontSizeMaterial:Nr,titleFontSizeIos:Dr,titleFontSizeMaterial:jr,titleLargeFontSizeIos:Gr,titleLargeFontSizeMaterial:Wr,titleMediumFontSizeIos:qr,titleMediumFontSizeMaterial:Kr,bgClassName:Xr="",bgClass:Zr="",subnavbarClassName:Jr="",subnavbarClass:_i="",innerClassName:es="",innerClass:ts="",leftClassName:rs="",leftClass:ns="",titleClassName:as="",titleClass:ls="",subtitleClassName:us="",subtitleClass:xs="",rightClassName:Ts="",rightClass:vs="",centerTitle:gs}=_r;return{base:{common:cls("w-full z-20 top-0 pt-safe",(Lr||Mr)&&"pointer-events-none",positionClass("sticky",Rr)),ios:cls(Vr,Tr.textIos),material:cls(Nr,Tr.textMaterial)},bg:{common:cls("absolute w-full h-full left-0 top-0",Ar&&"hairline-b",Xr||Zr),ios:cls(Tr.bgIos,Pr&&"translucent"),material:`${Tr.bgMaterial}`},subnavbar:{common:cls("relative flex items-center",Jr||_i,(Lr||Mr)&&"pointer-events-auto"),ios:"h-11 pl-2-safe pr-2-safe",material:"h-14 pl-4-safe pr-4-safe"},inner:{common:cls("flex relative items-center w-full overflow-hidden",es||ts,(Lr||Mr)&&"pointer-events-auto z-10"),ios:cls("pl-2-safe pr-2-safe h-11",!zr&&Ur?"justify-end":"justify-between"),material:"justify-start h-16 pl-safe pr-safe"},titleContainer:{common:cls("flex items-center px-4 relative",(Lr||Mr)&&"pointer-events-auto"),ios:cls(Mr&&cls(qr,"h-11 font-semibold"),Lr&&cls(Gr,"h-13 font-bold")),material:cls(Mr&&cls(Kr,"h-12 pb-4"),Lr&&cls(Wr,"h-[5.5rem]"))},left:{common:cls("flex justify-center items-center h-full",rs||ns),ios:"me-2 transform transform-gpu",material:"mx-1"},title:{common:cls("whitespace-nowrap leading-tight",as||ls,(Lr||Mr||Fr)&&"opacity-0",gs?"absolute top-1/2 left-1/2 transform-gpu -translate-x-1/2 -translate-y-1/2 text-center":"text-start"),ios:cls(`${Dr} font-semibold`,!gs&&"first:mx-2"),material:cls(`${jr} font-normal`,!gs&&"first:mx-4")},subtitle:{common:cls("font-normal leading-none",us||xs),ios:"text-2xs opacity-55",material:"text-sm opacity-85"},right:{common:cls("flex justify-center items-center h-full",Ts||vs),ios:cls("transform transform-gpu",gs?"ms-2":"ms-auto"),material:"ms-auto me-1"}}},NavbarColors=(_r,Tr)=>({bgIos:cls("bg-ios-light-surface-2",Tr("dark:bg-ios-dark-surface-2")),bgMaterial:cls("bg-md-light-surface-2",Tr("dark:bg-md-dark-surface-2")),textIos:cls("text-black",Tr("dark:text-white")),textMaterial:cls("text-md-light-on-surface",Tr("dark:text-md-dark-on-surface")),..._r});function _extends$u(){return _extends$u=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$u.apply(this,arguments)}const Navbar=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,bgClassName:Pr="",innerClassName:Lr="",leftClassName:Mr="",titleClassName:Fr="",subtitleClassName:zr="",rightClassName:Ur="",subnavbarClassName:Vr="",centerTitle:Nr,colors:Dr,translucent:jr=!0,outline:Gr,medium:Wr,large:qr,transparent:Kr,fontSizeIos:Xr="text-[17px]",fontSizeMaterial:Zr="text-[16px]",titleFontSizeIos:Jr="text-[17px]",titleFontSizeMaterial:_i="text-[22px]",titleMediumFontSizeIos:es="text-[24px]",titleMediumFontSizeMaterial:ts="text-[24px]",titleLargeFontSizeIos:rs="text-[34px]",titleLargeFontSizeMaterial:ns="text-[28px]",scrollEl:as,left:ls,title:us,subtitle:xs,right:Ts,subnavbar:vs,ios:gs,material:fs,children:ys,...ks}=_r,Fs=reactExports.useRef(null),Us=reactExports.useRef(0),Vs=reactExports.useRef(null),ao=reactExports.useRef(null),qs=reactExports.useRef(null),Qs=reactExports.useRef(null),mo=reactExports.useRef(null),Xs=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Fs.current}));const so=Rr,uo=useTheme({ios:gs,material:fs}),bo=useThemeClasses({ios:gs,material:fs}),wo=useDarkClasses(),Co={...ks},ds=NavbarColors(Dr,wo),Is=go=>{const{scrollTop:No}=go.target;if(!Kr&&!qr&&!Wr){Xs.current&&(Qs.current&&(Qs.current.style.opacity=""),Vs.current&&(Vs.current.style.opacity=""));return}const Do=Us.current,To=Math.max(Math.min(No/Do,1),0);Vs.current.style.opacity=Kr?-.5+To*1.5:"",(Wr||qr)&&(Vs.current.style.transform=`translateY(-${To*Do}px)`),qs.current&&(qs.current.style.transform=`translateY(-${To*Do}px)`,qs.current.style.opacity=1-To*2),Qs.current&&(Qs.current.style.opacity=-.5+To*1.5),(Wr||qr)&&mo.current&&(mo.current.style.transform=`translateY(-${To*Do}px)`)},Gs=()=>typeof as>"u"?Fs.current&&Fs.current.parentNode:as.current||as,to=()=>{if(!qr&&!Wr&&!Kr){Xs.current&&(Is({target:{scrollTop:0}}),Xs.current=!1);return}Xs.current=!0,qs.current?Us.current=qs.current.offsetHeight:Us.current=ao.current.offsetHeight;const go=Gs();go?(go.addEventListener("scroll",Is),Is({target:go})):Is({target:{scrollTop:0}})},no=()=>{const go=Gs();go&&go.removeEventListener("scroll",Is)};reactExports.useEffect(()=>(to(),no));const ro=bo(NavbarClasses({..._r,centerTitle:typeof Nr>"u"?uo==="ios":Nr,translucent:jr,outline:typeof Gr>"u"?uo==="ios":Gr,fontSizeIos:Xr,fontSizeMaterial:Zr,titleFontSizeIos:Jr,titleFontSizeMaterial:_i,titleMediumFontSizeIos:es,titleMediumFontSizeMaterial:ts,titleLargeFontSizeIos:rs,titleLargeFontSizeMaterial:ns,bgClassName:Pr,innerClassName:Lr,leftClassName:Mr,titleClassName:Fr,subtitleClassName:zr,rightClassName:Ur,subnavbarClassName:Vr},ds,Ar),Ar);return React$1.createElement(so,_extends$u({ref:Fs,className:ro.base},Co),React$1.createElement("div",{className:ro.bg,ref:Vs}),React$1.createElement("div",{className:ro.inner,ref:ao},ls&&React$1.createElement("div",{className:ro.left},ls),(us||xs)&&React$1.createElement("div",{className:ro.title,ref:Qs},us,xs&&React$1.createElement("div",{className:ro.subtitle},xs)),Ts&&React$1.createElement("div",{className:ro.right},Ts),ys),(qr||Wr)&&React$1.createElement("div",{className:ro.titleContainer,ref:qs},us),vs&&React$1.createElement("div",{className:ro.subnavbar,ref:mo},vs))});Navbar.displayName="Navbar";function _extends$t(){return _extends$t=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$t.apply(this,arguments)}const BackIcon=_r=>{let{theme:Tr,...Rr}=_r;return Tr==="ios"?React$1.createElement("svg",_extends$t({xmlns:"http://www.w3.org/2000/svg",width:"12",height:"20",viewBox:"0 0 12 20",fill:"currentcolor"},Rr),React$1.createElement("path",{d:"M0.18261596,9.4221638 C0.21783626,9.37068075 0.25835058,9.32165682 0.30416276,9.27584463 L9.1425872,0.4374202 C9.7256776,-0.14567018 10.6691555,-0.1475686 11.2590259,0.44230183 C11.8448123,1.02808827 11.8502479,1.97240019 11.2639075,2.55874056 L3.82594417,9.9967039 L11.2578297,17.4285894 C11.8409201,18.0116798 11.8428185,18.9551577 11.252948,19.5450281 C10.6671616,20.1308146 9.7228497,20.1362501 9.13650932,19.5499097 L0.2980849,10.7114853 C-0.0545897,10.3588107 -0.0959125,9.8144953 0.18261596,9.4221638 Z"})):React$1.createElement("svg",_extends$t({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentcolor"},Rr),React$1.createElement("polygon",{points:"16 7 3.83 7 9.42 1.41 8 0 0 8 8 16 9.41 14.59 3.83 9 16 9"}))},NavbarBackLinkClasses=()=>({base:{common:"cursor-pointer",material:"min-w-12 k-touch-ripple-inset"},icon:"rtl:rotate-180"});function _extends$s(){return _extends$s=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$s.apply(this,arguments)}const NavbarBackLink=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="a",className:Ar,text:Pr="Back",showText:Lr="auto",ios:Mr,material:Fr,onClick:zr,children:Ur,...Vr}=_r,Nr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Nr.current}));const Dr={...Vr},jr=useTheme({ios:Mr,material:Fr}),Gr=useThemeClasses({ios:Mr,material:Fr}),Wr=Lr==="auto"&&jr==="ios"||Lr===!0,qr=Gr(NavbarBackLinkClasses(),Ar);return React$1.createElement(Link,_extends$s({ref:Nr,component:Rr,className:qr.base,navbar:!0},Dr,{onClick:zr}),React$1.createElement("span",{className:qr.icon},React$1.createElement(BackIcon,{theme:jr})),Wr&&React$1.createElement("span",null,Pr),Ur)});NavbarBackLink.displayName="NavbarBackLink";const NotificationsClasses=(_r,Tr,Rr)=>{const{opened:Ar,translucent:Pr}=_r;return{base:{common:cls(positionClass("absolute",Rr),"z-50 transform transition-transform-opacity box-border duration-500",!Ar&&"-translate-y-full opacity-0 pointer-events-none transition duration-500","md:w-[568px] md:end-auto md:start-1/2 md:-ms-[256px]"),ios:cls("rounded-xl px-2.5 py-2.5 start-2 end-2 top-2 shadow-lg",Tr.bgIos,Pr&&"translucent"),material:cls("rounded-2xl py-5 px-4 start-4 end-4 top-4",Tr.bgMaterial)},content:{common:"",ios:"mt-2.5 ",material:cls("mt-2")},header:{common:cls("flex justify-start"),ios:"items-center",material:"items-start"},icon:{ios:cls("me-2"),material:"me-4"},contentTitle:{material:cls("flex flex-row items-center")},title:{ios:cls("tracking-wide text-[13px] uppercase",Tr.titleIos),material:cls("font-medium")},titleRightText:{ios:cls("me-1 ms-auto text-[13px]",Tr.titleRightIos),material:cls("ms-1 text-xs before:w-0.75 before:h-0.75 before:rounded-full before:inline-block before:align-middle before:me-1",Tr.titleRightMd)},button:{ios:cls("me-1 ms-auto cursor-pointer"),material:cls("ms-auto cursor-pointer")},deleteIcon:{ios:cls("w-5 h-5",Tr.deleteIconIos),material:cls("w-6 h-6",Tr.deleteIconMd)},subtitle:{ios:cls("text-[15px] font-semibold",Tr.subtitleIos),material:cls("text-sm")},text:{ios:cls("text-[15px]"),material:cls("text-sm",Tr.textMaterial)}}},NotificationsColors=(_r,Tr)=>({bgIos:cls("bg-white",Tr("dark:bg-[#1e1e1e]")),bgMaterial:cls("bg-md-light-surface-5",Tr("dark:bg-md-dark-surface-5")),titleIos:cls("text-black",Tr("dark:text-white")),titleRightIos:cls("text-opacity-45 text-black",Tr("dark:text-white dark:text-opacity-45")),titleRightMd:cls("text-md-light-on-surface-variant before:bg-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant before:dark:bg-md-dark-on-surface-variant")),subtitleIos:cls("text-black ",Tr("dark:text-white")),textMaterial:cls("text-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant ")),deleteIconIos:cls("fill-stone-400 active:fill-stone-200",Tr("dark:fill-stone-500 dark:active:fill-stone-700")),deleteIconMd:cls("text-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant")),..._r});function _extends$r(){return _extends$r=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$r.apply(this,arguments)}const Notification=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,button:Lr,icon:Mr,title:Fr,titleRightText:zr,subtitle:Ur,text:Vr,translucent:Nr=!0,opened:Dr,onClose:jr,ios:Gr,material:Wr,children:qr,...Kr}=_r,Xr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Xr.current}));const Zr=Rr,Jr={...Kr},_i=useTheme({ios:Gr,material:Wr}),es=useThemeClasses({ios:Gr,material:Wr}),ts=useDarkClasses(),rs=NotificationsColors(Pr,ts),ns=es(NotificationsClasses({..._r,translucent:Nr},rs,Ar),Ar);return _i==="ios"?React$1.createElement(Zr,_extends$r({ref:Xr,className:ns.base},Jr),React$1.createElement("div",{className:ns.header},Mr&&React$1.createElement("div",{className:ns.icon},Mr),Fr&&React$1.createElement("div",{className:ns.title},Fr),zr&&React$1.createElement("div",{className:ns.titleRightText},zr),Lr&&React$1.createElement("div",{className:ns.button,role:"button",tabIndex:"0",onClick:jr},React$1.createElement(DeleteIcon,{theme:_i,className:ns.deleteIcon}))),React$1.createElement("div",{className:ns.content},Ur&&React$1.createElement("div",{className:ns.subtitle},Ur),Vr&&React$1.createElement("div",{className:ns.text},Vr),qr)):React$1.createElement(Zr,_extends$r({ref:Xr,className:ns.base},Jr),React$1.createElement("div",{className:ns.header},Mr&&React$1.createElement("div",{className:ns.icon},Mr),React$1.createElement("div",{className:ns.contentWrapper},React$1.createElement("div",{className:ns.contentTitle},Fr&&React$1.createElement("div",{className:ns.title},Fr),zr&&React$1.createElement("div",{className:ns.titleRightText},zr)),React$1.createElement("div",{className:ns.content},Ur&&React$1.createElement("div",{className:ns.subtitle},Ur),Vr&&React$1.createElement("div",{className:ns.text},Vr),qr)),Lr&&React$1.createElement("div",{className:ns.button,role:"button",tabIndex:"0",onClick:jr},React$1.createElement(DeleteIcon,{theme:_i,className:ns.deleteIcon}))))});Notification.displayName="Notification";const PageClasses=(_r,Tr,Rr)=>({base:{common:cls("h-full w-full left-0 top-0 overflow-auto",positionClass("absolute",Rr)),ios:Tr.bgIos,material:Tr.bgMaterial}}),PageColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:cls("bg-ios-light-surface",Tr("dark:bg-ios-dark-surface")),bgMaterial:cls("bg-md-light-surface",Tr("dark:bg-md-dark-surface")),..._r}};function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$q.apply(this,arguments)}const Page=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,ios:Lr,material:Mr,children:Fr,...zr}=_r,Ur=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Ur.current}));const Vr=Rr,Nr={...zr},Dr=useThemeClasses({ios:Lr,material:Mr}),jr=useDarkClasses(),Gr=PageColors(Pr,jr),Wr=Dr(PageClasses(_r,Gr,Ar),Ar);return React$1.createElement(Vr,_extends$q({ref:Ur,className:Wr.base},Nr),Fr)});Page.displayName="Page";const PanelClasses=(_r,Tr,Rr)=>{const{size:Ar,floating:Pr}=_r;return{base:{common:cls("transition-transform transform duration-400 z-40 max-w-full overflow-hidden",Pr?"top-2-safe bottom-2-safe !h-auto":"top-0 max-h-full",Tr.bg,positionClass("fixed",Rr),Ar),ios:"",material:"ease-material-in"},left:{common:cls("no-safe-areas-right",Pr?"right-full -mr-2 rounded-2xl":"right-full"),material:cls(!Pr&&"rounded-r-2xl"),opened:"translate-x-full",closed:"-translate-x-2"},right:{common:cls("no-safe-areas-left",Pr?"left-full -ml-2 rounded-2xl":"left-full"),material:cls(!Pr&&"rounded-l-2xl"),opened:"-translate-x-full",closed:"translate-x-2"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},PanelColors=function(_r,Tr){return _r===void 0&&(_r={}),{bg:cls("bg-white",Tr("dark:bg-black")),..._r}};function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$p.apply(this,arguments)}const Panel=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,size:Lr="w-72 h-screen",side:Mr="left",opened:Fr,backdrop:zr=!0,floating:Ur=!1,onBackdropClick:Vr,ios:Nr,material:Dr,children:jr,...Gr}=_r,Wr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Wr.current}));const qr=Fr?"opened":"closed",Kr=Rr,Xr={...Gr},Zr=useThemeClasses({ios:Nr,material:Dr}),Jr=useDarkClasses(),_i=PanelColors(Pr,Jr),es=Zr(PanelClasses({..._r,size:Lr,floating:Ur},_i,Ar),Ar),ts=cls(es.base,es[Mr][qr]);return React$1.createElement(React$1.Fragment,null,zr&&React$1.createElement("div",{className:es.backdrop[qr],onClick:Vr}),React$1.createElement(Kr,_extends$p({ref:Wr,className:ts},Xr),jr))});Panel.displayName="Panel";const calcPopoverPosition=_r=>{let{popoverEl:Tr,targetEl:Rr,angleEl:Ar,needsAngle:Pr,targetX:Lr,targetY:Mr,targetWidth:Fr=0,targetHeight:zr=0,theme:Ur}=_r;Rr.current?Rr=Rr.current:Rr.value?Rr=Rr.value:Rr.el?Rr=Rr.el:Rr.$el&&(Rr=Rr.$el),typeof Rr=="string"&&(Rr=document.querySelector(Rr));let Vr=document.body.offsetWidth,Nr=document.body.offsetHeight;Vr===0&&(Vr=window.innerWidth),Nr===0&&(Nr=window.innerHeight);const[Dr,jr]=[Tr.offsetWidth,Tr.offsetHeight];let Gr=0,Wr,qr,Kr="";Pr&&(Gr=Ar.offsetWidth/2);let Xr,Zr;const Jr=window.getComputedStyle(Rr);let _i=parseInt(Jr.getPropertyValue("--k-safe-area-top"),10)||0,es=parseInt(Jr.getPropertyValue("--k-safe-area-left"),10)||0,ts=parseInt(Jr.getPropertyValue("--k-safe-area-right"),10)||0;if(Number.isNaN(_i)&&(_i=0),Number.isNaN(es)&&(es=0),Number.isNaN(ts)&&(ts=0),Rr){Fr=Rr.offsetWidth,zr=Rr.offsetHeight;const vs=Rr.getBoundingClientRect();Xr=vs.left,Zr=vs.top}else typeof Lr<"u"&&Mr!=="undefined"&&(Xr=Lr,Zr=Mr);let[rs,ns,as]=[0,0,0];const ls=Ur==="ios"?13:23;let us="top";jr+Gr<Zr-_i?ns=Zr-jr-Gr:jr+Gr<Nr-Zr-zr?(us="bottom",ns=Zr+zr+Gr):(us="middle",ns=zr/2+Zr-jr/2,as=ns,ns=Math.max(5,Math.min(ns,Nr-jr-5)),as-=ns),us==="top"||us==="bottom"?(rs=Fr/2+Xr-Dr/2,as=rs,rs=Math.max(5,Math.min(rs,Vr-Dr-5)),es&&(rs=Math.max(rs,es)),ts&&rs+Dr>Vr-5-ts&&(rs=Vr-5-ts-Dr),us==="top"&&(Kr="bottom"),us==="bottom"&&(Kr="top"),as-=rs,Wr=Dr/2-Gr+as,Wr=Math.max(Math.min(Wr,Dr-Gr*2-ls),ls)):us==="middle"&&(rs=Xr-Dr-Gr,Kr="right",(rs<5||rs+Dr+ts>Vr||rs<es)&&(rs<5&&(rs=Xr+Fr+Gr),rs+Dr+ts>Vr&&(rs=Vr-Dr-5-ts),rs<es&&(rs=es),Kr="left"),qr=jr/2-Gr+as,qr=Math.max(Math.min(qr,jr-Gr*2-ls),ls));const xs=us,Ts=rs<Xr?"left":"right";return{set:!0,angleTop:typeof qr>"u"?void 0:`${qr}px`,angleLeft:typeof Wr>"u"?void 0:`${Wr}px`,anglePosition:Kr,popoverTop:`${ns}px`,popoverLeft:`${rs}px`,popoverPosition:`${xs}-${Ts}`}},PopoverClasses=(_r,Tr,Rr)=>{const{size:Ar,translucent:Pr,angleClassName:Lr,angleClass:Mr}=_r;return{base:{common:cls("transition-transform-opacity z-40 no-safe-areas",positionClass("fixed",Rr),Ar),ios:"duration-300",material:"duration-400 ease-material-in",opened:"",closed:{common:"opacity-0 pointer-events-none",ios:"",material:"scale-x-90 scale-y-75"}},inner:{common:cls("overflow-hidden relative"),ios:cls("rounded-xl",Pr&&"translucent",Tr.bgIos),material:cls("rounded-[1.75rem]",Tr.bgMaterial)},angleWrap:{common:cls(Lr||Mr||"","pointer-events-none"),ios:cls("absolute w-6.5 h-6.5 z-50 overflow-hidden",Pr&&"opacity-80"),material:cls("absolute w-6.5 h-6.5 z-50 overflow-hidden"),bottom:"top-full",top:"bottom-full",left:"right-full",right:"left-full"},angleArrow:{common:cls("absolute rounded w-full h-full transform rotate-45"),ios:Tr.bgIos,material:Tr.bgMaterial,bottom:"-top-4.75",top:"top-4.75",left:"left-4.75",right:"-left-4.75"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}}},PopoverColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:cls("bg-ios-light-surface-3",Tr("dark:bg-ios-dark-surface-3")),bgMaterial:cls("bg-md-light-surface-3",Tr("dark:bg-md-dark-surface-3")),..._r}};function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$o.apply(this,arguments)}const Popover=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,angle:Pr=!0,angleClassName:Lr="",colors:Mr,size:Fr="w-64",opened:zr,backdrop:Ur=!0,onBackdropClick:Vr,target:Nr,targetX:Dr,targetY:jr,targetWidth:Gr,targetHeight:Wr,translucent:qr=!0,ios:Kr,material:Xr,children:Zr,style:Jr={},..._i}=_r,es=reactExports.useRef(null),ts=reactExports.useRef(null),[rs,ns]=reactExports.useState({set:!1,angleTop:0,angleLeft:0,anglePosition:"bottom",popoverTop:0,popoverLeft:0,popoverPosition:"top-left"});reactExports.useImperativeHandle(Tr,()=>({el:es.current}));const as=zr?"opened":"closed",ls=Rr,us={..._i},xs=useTheme({ios:Kr,material:Xr}),Ts=useThemeClasses({ios:Kr,material:Xr}),vs=useDarkClasses(),gs=PopoverColors(Mr,vs),fs=Ts(PopoverClasses({..._r,size:Fr,angleClassName:Lr,translucent:qr},gs,Ar),Ar),ys=()=>{!Nr||!es.current||!zr||ns(calcPopoverPosition({popoverEl:es.current,targetEl:Nr,angleEl:ts.current,needsAngle:Pr,targetX:Dr,targetY:jr,targetHeight:Wr,targetWidth:Gr,theme:xs}))},ks=()=>{typeof window>"u"||window.addEventListener("resize",ys)},Fs=()=>{typeof window>"u"||window.removeEventListener("resize",ys)};reactExports.useEffect(()=>(ks(),()=>Fs())),reactExports.useEffect(()=>{ys()},[zr]);const Us=rs.set?{...Jr||{},left:rs.popoverLeft,top:rs.popoverTop}:Jr,Vs=rs.set?{left:rs.angleLeft,top:rs.angleTop}:void 0,ao={"top-right":"origin-bottom-left","top-left":"origin-bottom-right","middle-left":"origin-right","middle-right":"origin-left","bottom-right":"origin-top-left","bottom-left":"origin-top-right"},qs=cls(fs.base[as],xs==="material"&&ao[rs.popoverPosition]);return React$1.createElement(React$1.Fragment,null,Ur&&React$1.createElement("div",{className:fs.backdrop[as],onClick:Vr}),React$1.createElement(ls,_extends$o({ref:es,className:qs,style:Us},us),Pr&&React$1.createElement("div",{ref:ts,style:Vs,className:fs.angleWrap[rs.anglePosition]},React$1.createElement("div",{className:fs.angleArrow[rs.anglePosition]})),React$1.createElement("div",{className:fs.inner},Zr)))});Popover.displayName="Popover";const PopupClasses=(_r,Tr,Rr)=>{const{size:Ar}=_r;return{base:{common:cls("left-1/2 top-1/2 transition-transform transform -translate-x-1/2 z-40 max-w-full max-h-full overflow-hidden md:no-safe-areas",Tr.bg,positionClass("fixed",Rr),Ar),ios:"duration-400 md:rounded-lg",material:" md:rounded-[1.75rem]",opened:{common:"-translate-y-1/2",material:cls("ease-material-in-popup duration-[600ms]")},closed:{common:"translate-y-full",material:"duration-400"}},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},PopupColors=function(_r,Tr){return _r===void 0&&(_r={}),{bg:cls("bg-white",Tr("dark:bg-black")),..._r}};function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$n.apply(this,arguments)}const Popup=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,size:Lr="w-screen h-screen md:w-160 md:h-160",opened:Mr,backdrop:Fr=!0,onBackdropClick:zr,ios:Ur,material:Vr,children:Nr,...Dr}=_r,jr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:jr.current}));const Gr=Mr?"opened":"closed",Wr=Rr,qr={...Dr},Kr=useThemeClasses({ios:Ur,material:Vr}),Xr=useDarkClasses(),Zr=PopupColors(Pr,Xr),Jr=Kr(PopupClasses({..._r,size:Lr},Zr,Ar),Ar);return React$1.createElement(React$1.Fragment,null,Fr&&React$1.createElement("div",{className:Jr.backdrop[Gr],onClick:zr}),React$1.createElement(Wr,_extends$n({ref:jr,className:Jr.base[Gr]},qr),Nr))});Popup.displayName="Popup";function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$m.apply(this,arguments)}const PreloaderIOS=_r=>React$1.createElement("svg",_extends$m({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},_r),React$1.createElement("path",{d:"M10,0 C10.5522847,0 11,0.44771525 11,1 L11,6 C11,6.55228475 10.5522847,7 10,7 C9.44771525,7 9,6.55228475 9,6 L9,1 C9,0.44771525 9.44771525,0 10,0 Z"}),React$1.createElement("path",{d:"M10,13 C10.5522847,13 11,13.4477153 11,14 L11,19 C11,19.5522847 10.5522847,20 10,20 C9.44771525,20 9,19.5522847 9,19 L9,14 C9,13.4477153 9.44771525,13 10,13 Z",opacity:".64"}),React$1.createElement("path",{d:"M13,10 C13,9.44771525 13.4477153,9 14,9 L19,9 C19.5522847,9 20,9.44771525 20,10 C20,10.5522847 19.5522847,11 19,11 L14,11 C13.4477153,11 13,10.5522847 13,10 Z",opacity:".82"}),React$1.createElement("path",{d:"M-3.8285687e-16,10 C-3.8285687e-16,9.44771525 0.44771525,9 1,9 L6,9 C6.55228475,9 7,9.44771525 7,10 C7,10.5522847 6.55228475,11 6,11 L1,11 C0.44771525,11 -3.8285687e-16,10.5522847 -3.8285687e-16,10 Z",opacity:".46"}),React$1.createElement("path",{d:"M2.92912627,2.92912627 C3.31965056,2.53860197 3.95281554,2.53860197 4.34333983,2.92912627 L7.87887373,6.46466017 C8.26939803,6.85518446 8.26939803,7.48834944 7.87887373,7.87887373 C7.48834944,8.26939803 6.85518446,8.26939803 6.46466017,7.87887373 L2.92912627,4.34333983 C2.53860197,3.95281554 2.53860197,3.31965056 2.92912627,2.92912627 Z",opacity:".37"}),React$1.createElement("path",{d:"M12.1211263,12.1211263 C12.5116506,11.730602 13.1448155,11.730602 13.5353398,12.1211263 L17.0708737,15.6566602 C17.461398,16.0471845 17.461398,16.6803494 17.0708737,17.0708737 C16.6803494,17.461398 16.0471845,17.461398 15.6566602,17.0708737 L12.1211263,13.5353398 C11.730602,13.1448155 11.730602,12.5116506 12.1211263,12.1211263 Z",opacity:".73"}),React$1.createElement("path",{d:"M12.1211263,7.87887373 C11.730602,7.48834944 11.730602,6.85518446 12.1211263,6.46466017 L15.6566602,2.92912627 C16.0471845,2.53860197 16.6803494,2.53860197 17.0708737,2.92912627 C17.461398,3.31965056 17.461398,3.95281554 17.0708737,4.34333983 L13.5353398,7.87887373 C13.1448155,8.26939803 12.5116506,8.26939803 12.1211263,7.87887373 Z",opacity:".91"}),React$1.createElement("path",{d:"M2.92912627,17.0708737 C2.53860197,16.6803494 2.53860197,16.0471845 2.92912627,15.6566602 L6.46466017,12.1211263 C6.85518446,11.730602 7.48834944,11.730602 7.87887373,12.1211263 C8.26939803,12.5116506 8.26939803,13.1448155 7.87887373,13.5353398 L4.34333983,17.0708737 C3.95281554,17.461398 3.31965056,17.461398 2.92912627,17.0708737 Z",opacity:".55"}));function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$l.apply(this,arguments)}const PreloaderMaterial=_r=>React$1.createElement("svg",_extends$l({viewBox:"0 0 36 36"},_r,{fill:"none",stroke:"currentcolor"}),React$1.createElement("circle",{cx:"18",cy:"18",r:"16"})),PreloaderClasses=(_r,Tr,Rr)=>{const{size:Ar}=_r;return{base:{common:cls(Rr==="ios"?"k-ios-preloader":"k-material-preloader",`inline-block ${Ar}`),ios:Tr.iconIos,material:`stroke-4 ${Tr.iconMaterial}`},inner:{common:"block w-full h-full"}}},PreloaderColors=function(_r,Tr){return _r===void 0&&(_r={}),{iconIos:"text-primary",iconMaterial:cls("text-md-light-primary",Tr("dark:text-md-dark-primary")),..._r}};function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$k.apply(this,arguments)}const Preloader=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="span",className:Ar,colors:Pr,size:Lr="w-8 h-8",ios:Mr,material:Fr,children:zr,...Ur}=_r,Vr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Vr.current}));const Nr=Rr,Dr={...Ur},jr=useTheme({ios:Mr,material:Fr}),Gr=useThemeClasses({ios:Mr,material:Fr}),Wr=useDarkClasses(),qr=PreloaderColors(Pr,Wr),Kr=jr==="ios"?PreloaderIOS:PreloaderMaterial,Xr=Gr(PreloaderClasses({..._r,size:Lr},qr,jr),Ar);return React$1.createElement(Nr,_extends$k({ref:Vr,className:Xr.base},Dr),React$1.createElement("span",{className:Xr.inner},React$1.createElement(Kr,{className:"w-full h-full"})),zr)});Preloader.displayName="Preloader";const ProgressbarClasses=_r=>({base:{common:"block h-1 bg-opacity-30 dark:bg-opacity-30 overflow-hidden rtl:rotate-180",ios:"bg-black rounded-full",material:_r.bgMaterial},inner:{common:"block duration-200 w-full h-full",ios:_r.bgIos,material:_r.bgMaterial}}),ProgressbarColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:"bg-primary",bgMaterial:cls("bg-md-light-primary",Tr("dark:bg-md-dark-primary")),..._r}};function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$j.apply(this,arguments)}const Progressbar=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="span",className:Ar,colors:Pr,ios:Lr,material:Mr,progress:Fr=0,children:zr,...Ur}=_r,Vr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Vr.current}));const Nr=Rr,Dr={...Ur},jr=useThemeClasses({ios:Lr,material:Mr}),Gr=useDarkClasses(),Wr=ProgressbarColors(Pr,Gr),qr=jr(ProgressbarClasses(Wr),Ar);return React$1.createElement(Nr,_extends$j({ref:Vr,className:qr.base},Dr),React$1.createElement("span",{className:qr.inner,style:{transform:`translateX(-${100-Fr/1*100}%)`}}),zr)});Progressbar.displayName="Progressbar";const RadioClasses=(_r,Tr,Rr,Ar)=>({base:cls("cursor-pointer inline-flex align-middle",positionClass("relative",Rr),Ar("dark:touch-ripple-white")),iconWrap:{common:"flex items-center justify-center rounded-full",ios:"w-5.5 h-5.5 border",material:"w-5 h-5 border-2",notChecked:{ios:Tr.borderIos,material:Tr.borderMaterial},checked:{ios:Tr.borderCheckedIos,material:Tr.borderCheckedMaterial}},icon:{ios:"text-primary",material:`w-3 h-3 rounded-full ${Tr.bgCheckedMaterial}`,notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:"bg-white w-3/4",ios:"h-0.25",material:"h-0.5"},input:{common:"hidden"}}),RadioColors=function(_r,Tr){return _r===void 0&&(_r={}),{borderIos:cls("border-black border-opacity-30",Tr("dark:border-white dark:border-opacity-30")),borderMaterial:cls("border-md-light-outline",Tr("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:cls("bg-md-light-primary",Tr("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:cls("border-md-light-primary",Tr("dark:border-md-dark-primary")),..._r}};function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$i.apply(this,arguments)}const Radio=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="label",className:Ar,colors:Pr,defaultChecked:Lr,checked:Mr,name:Fr,value:zr,disabled:Ur,readOnly:Vr,onChange:Nr,ios:Dr,material:jr,touchRipple:Gr=!0,children:Wr,...qr}=_r,Kr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Kr.current}));const Xr=Rr,Zr={...qr},Jr=useTheme({ios:Dr,material:jr}),_i=useThemeClasses({ios:Dr,material:jr}),es=useDarkClasses();useTouchRipple(Kr,Jr==="material"&&Gr);const ts=RadioColors(Pr,es),rs=Mr||Lr&&!Nr?"checked":"notChecked",ns=_i(RadioClasses(_r,ts,Ar,es),Ar);return React$1.createElement(Xr,_extends$i({ref:Kr,className:ns.base},Zr),React$1.createElement("input",{type:"radio",name:Fr,value:zr,disabled:Ur,readOnly:Vr,checked:Mr,defaultChecked:Lr,onChange:Nr,className:ns.input}),React$1.createElement("i",{className:ns.iconWrap[rs]},Jr==="ios"?React$1.createElement(CheckboxIcon,{className:ns.icon[rs]}):React$1.createElement("span",{className:ns.icon[rs]})),Wr)});Radio.displayName="Radio";const RangeClasses=(_r,Tr,Rr)=>({base:{common:"block relative select-none w-full self-center touch-pan-y",ios:"h-7",material:"h-5"},trackBg:{common:cls("absolute top-1/2 left-0 w-full transform -translate-y-1/2 bg-black bg-opacity-20",Rr("dark:bg-white dark:bg-opacity-20")),ios:"h-1 rounded-full",material:"h-0.5"},trackValue:{common:"absolute top-1/2 start-0 w-full transform -translate-y-1/2",ios:`h-1 rounded-full ${Tr.valueBgIos}`,material:`h-0.5 ${Tr.valueBgMaterial}`},input:{common:"appearance-none w-full bg-transparent cursor-pointer block focus:outline-none relative",ios:"h-7",material:"h-5"},inputThumb:{common:"range-thumb:relative range-thumb:appearance-none range-thumb:rounded-full range-thumb:border-none",ios:`range-thumb:w-7 range-thumb:h-7 range-thumb:-mt-3.5 ${Tr.thumbBgIos} range-thumb:shadow-ios-toggle`,material:`range-thumb:w-3 range-thumb:h-3 ${Tr.thumbBgMaterial} range-thumb:-mt-1.5 range-thumb:transform range-thumb:duration-200 active:range-thumb:scale-150`},inputTrack:{common:"range-track:appearance-none range-track:h-px"}}),RangeColors=function(_r,Tr){return _r===void 0&&(_r={}),{valueBgIos:"bg-primary",valueBgMaterial:cls("bg-md-light-primary",Tr("dark:bg-md-dark-primary")),thumbBgIos:"range-thumb:bg-white",thumbBgMaterial:cls("range-thumb:bg-md-light-primary",Tr("dark:range-thumb:bg-md-dark-primary")),..._r}};function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$h.apply(this,arguments)}const Range=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,ios:Lr,material:Mr,children:Fr,inputId:zr,name:Ur,value:Vr=void 0,defaultValue:Nr,readOnly:Dr,disabled:jr,step:Gr=1,min:Wr=0,max:qr=100,onInput:Kr,onChange:Xr,onFocus:Zr,onBlur:Jr,..._i}=_r,es=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:es.current}));const ts=Rr,rs={..._i},ns=useThemeClasses({ios:Lr,material:Mr}),as=useDarkClasses(),ls=RangeColors(Pr,as),us=ns(RangeClasses(_r,ls,as),Ar),xs=((Vr||0)-Wr)/(qr-Wr)*100;return React$1.createElement(ts,_extends$h({ref:es,className:us.base},rs),React$1.createElement("span",{className:us.trackBg}),React$1.createElement("span",{className:us.trackValue,style:{width:`${xs}%`}}),React$1.createElement("input",{className:cls(us.input,us.inputThumb,us.inputTrack),type:"range",id:zr,name:Ur,min:Wr,max:qr,step:Gr,value:Vr,defaultValue:Nr,readOnly:Dr,disabled:jr,onInput:Kr,onChange:Xr,onFocus:Zr,onBlur:Jr}))});Range.displayName="Range";const SearchbarClasses=(_r,Tr,Rr)=>{let{isEnabled:Ar,darkClasses:Pr}=Rr;return{base:{common:"relative flex overflow-hidden items-center",ios:"px-2 w-full",material:"px-0 py-2 -mx-2 w-[calc(100%+32px)]"},inner:{common:"w-full shrink-1 relative",ios:"transition-all duration-300"},searchIconWrap:{common:"absolute inset-y-0 flex items-center z-40",ios:"start-2",material:"start-4"},clearButton:{common:"absolute justify-center inset-y-0 flex items-center z-40 cursor-pointer end-0",ios:"w-8 h-8",material:"w-12 h-12"},input:{common:"block appearance-none  w-full py-2  focus:outline-none z-30",ios:cls("h-8 bg-black/10 pl-7 pr-7 rounded-lg text-base",Pr("dark:placeholder-white dark:placeholder-opacity-30 dark:bg-white/10"),Tr.placeholderIos,Tr.inputBgIos),material:cls("h-12 ps-12 pe-4 rounded-full",Tr.placeholderMaterial,Tr.inputBgMaterial)},deleteIcon:{common:"",ios:"w-3.5 h-3.5 opacity-45",material:"w-6 h-6 active:opacity-20"},searchIcon:{common:"",ios:cls("w-4 h-4 opacity-45"),material:cls("w-5 h-5 z-30",Ar?"opacity-0 transform rotate-90 scale-50 transition-transform-opacity  duration-400 ":"block transform transition-transform-opacity scale-100 rotate-0 duration-400")},cancelButton:{ios:cls("ps-2 flex items-center h-8 cursor-pointer bg-transparent text-primary shrink-0 z-40 transition-all duration-300 active:opacity-30",Ar?"":"opacity-0"),material:cls("absolute left-4 cursor-pointer",Ar?"z-40 transform scale-100 rotate-0 transition-transform-opacity  duration-400":"opacity-0 transform -rotate-90 scale-50 transition-transform-opacity duration-400")}}},SearchbarColors=function(_r,Tr){return _r===void 0&&(_r={}),{inputBgIos:"",inputBgMaterial:cls("bg-md-light-secondary-container",Tr("dark:bg-md-dark-secondary-container")),placeholderIos:"",placeholderMaterial:cls("placeholder-md-light-on-surface-variant",Tr("dark:placeholder-md-dark-on-surface-variant")),..._r}};function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$g.apply(this,arguments)}const SearchIcon=_r=>{let{theme:Tr,...Rr}=_r;return Tr==="ios"?React$1.createElement("svg",_extends$g({xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 56 56",fill:"currentcolor"},Rr),React$1.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"})):React$1.createElement("svg",_extends$g({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 56 56",fill:"currentcolor"},Rr),React$1.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"}))};function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$f.apply(this,arguments)}const Searchbar=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,placeholder:Lr="Search",value:Mr,inputId:Fr,inputStyle:zr,disableButton:Ur=!1,disableButtonText:Vr="Cancel",clearButton:Nr=!0,onInput:Dr,onChange:jr,onFocus:Gr,onBlur:Wr,onClear:qr,onDisable:Kr,ios:Xr,material:Zr,...Jr}=_r,_i=reactExports.useRef(null),es=reactExports.useRef(null),ts=reactExports.useRef(null),[rs,ns]=reactExports.useState(0),as=reactExports.useRef(null),ls=reactExports.useRef(!1);reactExports.useImperativeHandle(Tr,()=>({el:es.current,searchEl:_i.current}));const[us,xs]=reactExports.useState(!1),Ts=useTheme({ios:Xr,material:Zr}),vs=useThemeClasses({ios:Xr,material:Zr}),gs=useDarkClasses(),fs=SearchbarColors(Pr,gs),ys=uo=>{Dr&&Dr(uo)},ks=uo=>{jr&&jr(uo)},Fs=uo=>{xs(!0),Gr&&Gr(uo)},Us=uo=>{Wr&&Wr(uo)},Vs=()=>{Mr||(as.current=setTimeout(()=>{xs(!1)}))},ao=()=>{clearTimeout(as.current)},qs=uo=>{uo.preventDefault(),xs(!1),_i.current&&_i.current.blur(),Kr&&Kr(),qr&&qr()};reactExports.useEffect(()=>{ts.current&&ns(ts.current.offsetWidth),requestAnimationFrame(()=>{requestAnimationFrame(()=>{ls.current=!0})})},[]);const Qs=vs(SearchbarClasses({..._r},fs,{isEnabled:us,darkClasses:gs})),mo=Ts==="ios"?React$1.createElement("button",{type:"button",ref:ts,style:{marginRight:us?0:`-${rs}px`,transitionDuration:ls.current?"":"0ms"},className:Qs.cancelButton,onClick:qs,onPointerDown:uo=>uo.preventDefault()},Vr):React$1.createElement(BackIcon,{theme:Ts,onClick:qs,className:cls(Qs.cancelButton),onPointerDown:uo=>uo.preventDefault()}),Xs=Rr,so={...Jr};return React$1.createElement(Xs,_extends$f({ref:es,className:Qs.base},so,{onBlurCapture:Vs,onFocusCapture:ao}),React$1.createElement("div",{className:Qs.inner},React$1.createElement("span",{className:Qs.searchIconWrap},React$1.createElement(SearchIcon,{ios:Xr,material:Zr,className:Qs.searchIcon})),React$1.createElement("input",{id:Fr,ref:_i,className:cls(Qs.input),style:zr,type:"text",name:"search",placeholder:Lr,value:Mr,onInput:ys,onChange:ks,onFocus:Fs,onBlur:Us}),Mr&&Nr&&React$1.createElement("button",{className:Qs.clearButton,onClick:qr,type:"button"},React$1.createElement(DeleteIcon,{theme:Ts,className:Qs.deleteIcon}))),Ur&&mo)});Searchbar.displayName="Searchbar";const SegmentedClasses=(_r,Tr,Rr)=>{const{outline:Ar,rounded:Pr}=_r;return{base:{common:"flex justify-center items-center overflow-hidden w-full",square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},raised:Ar?"shadow":"shadow divide-x divide-black divide-opacity-10 rtl:divide-x-reverse",outline:{common:"",ios:`${Tr.borderIos} border-2`,material:`${Tr.borderMaterial} border`},outlineInner:{common:"-m-0.5 flex w-full justify-center items-center rtl:divide-x-reverse",ios:`divide-x-2 ${Tr.divideIos}`,material:`divide-x ${Tr.divideMaterial}`},strong:{common:cls("p-0.5 space-x-1 relative"),ios:Tr.strongBgIos,material:Tr.strongBgMaterial},strongHighlight:{common:cls("absolute start-0.5 top-0.5 bottom-0.5 !ms-0 pointer-events-none duration-200",Pr&&"rounded-full","bg-white shadow",Rr("dark:bg-opacity-15 dark:touch-ripple-white")),ios:cls(!Pr&&"rounded"),material:cls(!Pr&&"rounded-md")}}},SegmentedColors=function(_r,Tr){return _r===void 0&&(_r={}),{strongBgIos:cls("bg-black bg-opacity-5",Tr("dark:bg-white dark:bg-opacity-10")),strongBgMaterial:cls("bg-md-light-surface-variant",Tr("dark:bg-md-dark-surface-variant")),borderIos:"border-primary",borderMaterial:cls("border-md-light-outline",Tr("dark:border-md-dark-outline")),divideIos:"divide-primary",divideMaterial:cls("divide-md-light-outline",Tr("dark:divide-md-dark-outline")),..._r}};function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$e.apply(this,arguments)}const Segmented=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,ios:Lr,material:Mr,raised:Fr,outline:zr,strong:Ur,rounded:Vr,children:Nr,...Dr}=_r,jr=reactExports.useRef(null),Gr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:jr.current}));const[Wr,qr]=reactExports.useState({transform:"",width:""}),Kr=Rr,Xr={...Dr},Zr=useThemeClasses({ios:Lr,material:Mr}),Jr=useDarkClasses(),_i=SegmentedColors(Pr,Jr),es=Zr(SegmentedClasses(_r,_i,Jr)),ts=cls(Vr?es.base.rounded:es.base.square,Fr&&es.raised,zr&&es.outline,Ur&&es.strong,Ar);return reactExports.useEffect(()=>{if(Ur&&Gr.current){const rs=Gr.current.parentElement,ns=rs.children.length-1,as=[...rs.children].indexOf(rs.querySelector(".k-segmented-strong-button-active")),ls="4px";qr({...Wr,width:`calc((100% - 2px * 2 - ${ls} * (${ns} - 1)) / ${ns})`,transform:`translateX(calc((${as} * 100% + ${as} * ${ls}) * var(--k-rtl-reverse)))`})}},[Nr]),React$1.createElement(Kr,_extends$e({ref:jr,className:ts},Xr),zr?React$1.createElement("span",{className:es.outlineInner},Nr):Nr,Ur&&React$1.createElement("span",{ref:Gr,className:es.strongHighlight,style:Wr}))});Segmented.displayName="Segmented";function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$d.apply(this,arguments)}const SegmentedButton=reactExports.forwardRef((_r,Tr)=>{const{active:Rr,children:Ar,outline:Pr,strong:Lr,clear:Mr,rounded:Fr,...zr}=_r,Ur=reactExports.useRef(null);return reactExports.useImperativeHandle(Tr,()=>({el:Ur.current})),React$1.createElement(Button,_extends$d({ref:Ur,segmented:!0,segmentedActive:Rr,segmentedStrong:Lr,rounded:Fr&&Lr},zr),Ar)});SegmentedButton.displayName="SegmentedButton";const SheetClasses=(_r,Tr,Rr)=>({base:{common:cls("left-0 top-full transition-transform duration-400 z-40 overflow-hidden",positionClass("fixed",Rr)),ios:"",material:`rounded-t-2xl ease-material-in ${Tr.bgIos}`,opened:`-translate-y-full ${Tr.bgMaterial}`,closed:""},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}),SheetColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:cls("bg-white",Tr("dark:bg-black")),bgMaterial:cls("bg-md-light-surface",Tr("dark:bg-md-dark-surface")),..._r}};function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$c.apply(this,arguments)}const Sheet=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,opened:Lr,backdrop:Mr=!0,onBackdropClick:Fr,ios:zr,material:Ur,children:Vr,...Nr}=_r,Dr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Dr.current}));const jr=Lr?"opened":"closed",Gr=Rr,Wr={...Nr},qr=useThemeClasses({ios:zr,material:Ur}),Kr=useDarkClasses(),Xr=SheetColors(Pr,Kr),Zr=qr(SheetClasses(_r,Xr,Ar),Ar);return React$1.createElement(React$1.Fragment,null,Mr&&React$1.createElement("div",{className:Zr.backdrop[jr],onClick:Fr}),React$1.createElement(Gr,_extends$c({ref:Dr,className:Zr.base[jr]},Wr),Vr))});Sheet.displayName="Sheet";const StepperClasses=(_r,Tr)=>{const{buttonsOnly:Rr}=_r;return{base:`${Tr.text} inline-flex items-stretch`,raised:"shadow",size:{small:{ios:"h-6",material:"h-8"},medium:{ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},shape:{square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},button:{common:"relative flex items-center justify-center w-10 cursor-pointer overflow-hidden z-10 select-none"},buttonLeftShape:{square:{ios:"rounded-s",material:"rounded-s-lg"},rounded:"rounded-s-full"},buttonRightShape:{square:{ios:"rounded-e",material:"rounded-e-lg"},rounded:"rounded-e-full"},buttonStyle:{fill:{common:cls(Tr.fillTouchRipple,Rr&&"first:border-r border-black border-opacity-10 rtl:first:border-l rtl:first:border-r-0"),ios:cls(Tr.fillBgIos,Tr.fillTextIos,Tr.fillActiveBgIos),material:cls(Tr.fillBgMaterial,Tr.fillTextMaterial,Tr.fillActiveBgMaterial)},outline:{common:cls(Tr.touchRipple,"active:bg-opacity-15",Rr&&"first:border-r-0 rtl:last:border-r-0"),ios:cls("border-2",Tr.textIos,Tr.activeBgIos,Tr.outlineBorderIos,Rr&&"rtl:first:border-r-2"),material:cls("border",Tr.textMaterial,Tr.activeBgMaterial,Tr.outlineBorderMaterial,Rr&&"rtl:first:border-r")},clear:{common:`${Tr.touchRipple} active:bg-opacity-15 last:border-l rtl:last:border-l-0 rtl:first:border-l border-black border-opacity-10`,ios:cls(Tr.textIos,Tr.activeBgIos),material:cls(Tr.textMaterial,Tr.activeBgMaterial)}},input:{common:"focus:outline-none text-center appearance-none bg-transparent"},value:{common:"w-11 flex items-center justify-center font-medium",ios:`text-base ${Tr.textIos}`,material:`text-sm ${Tr.textMaterial}`,fill:{common:"",ios:`border-t-2 border-b-2 ${Tr.outlineBorderIos}`,material:`border-t border-b ${Tr.outlineBorderMaterial}`},outline:{common:"",ios:`border-t-2 border-b-2 ${Tr.outlineBorderIos}`,material:`border-t border-b ${Tr.outlineBorderMaterial}`},clear:"border-l border-black border-opacity-10"},hBar:"w-4 h-0.5 bg-current block",vBar:"w-0.5 h-4 bg-current block absolute inset-1/2 transform -translate-x-1/2 rtl:translate-x-1/2 -translate-y-1/2"}},StepperColors=function(_r,Tr){return _r===void 0&&(_r={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:cls("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:cls("text-white"),fillTextMaterial:cls("text-md-light-on-primary",Tr("dark:text-md-dark-on-primary")),fillBgIos:"bg-primary",fillBgMaterial:cls("bg-md-light-primary",Tr("dark:bg-md-dark-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillTouchRipple:cls("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:cls("border-md-light-outline",Tr("dark:border-md-dark-outline")),touchRipple:"touch-ripple-primary",..._r}};function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$b.apply(this,arguments)}const Stepper=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="span",className:Ar,colors:Pr,value:Lr=0,defaultValue:Mr,input:Fr=!1,inputType:zr="text",inputPlaceholder:Ur,inputDisabled:Vr,inputReadOnly:Nr,buttonsOnly:Dr,rounded:jr,roundedIos:Gr,roundedMaterial:Wr,small:qr,smallIos:Kr,smallMaterial:Xr,large:Zr,largeIos:Jr,largeMaterial:_i,raised:es,raisedIos:ts,raisedMaterial:rs,outline:ns,outlineIos:as,outlineMaterial:ls,onInput:us,onChange:xs,onFocus:Ts,onBlur:vs,onMinus:gs,onPlus:fs,ios:ys,material:ks,touchRipple:Fs=!0,children:Us,...Vs}=_r,ao=reactExports.useRef(null),qs=reactExports.useRef(null),Qs=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:ao.current}));const mo=Rr,Xs=useTheme({ios:ys,material:ks}),so=useThemeClasses({ios:ys,material:ks});useTouchRipple(qs,Xs==="material"&&Fs),useTouchRipple(Qs,Xs==="material"&&Fs);const uo=typeof jr>"u"?Xs==="ios"?Gr:Wr:jr,bo=typeof qr>"u"?Xs==="ios"?Kr:Xr:qr,wo=typeof Zr>"u"?Xs==="ios"?Jr:_i:Zr,Co=typeof es>"u"?Xs==="ios"?ts:rs:es,ds=typeof ns>"u"?Xs==="ios"?as:ls:ns,Is=useDarkClasses(),Gs=StepperColors(Pr,Is),to=wo?"large":bo?"small":"medium",no=ds&&Co?"clear":ds?"outline":"fill",Ro=uo?"rounded":"square",ro=so(StepperClasses({..._r,rounded:uo,small:bo,large:wo,raised:Co,outline:ds},Gs)),go={...Vs},No=cls(ro.base,Co&&ro.raised,ro.size[to],ro.shape[Ro],Ar),Do=cls(ro.button,ro.buttonStyle[no],ro.buttonLeftShape[Ro]),To=cls(ro.button,ro.buttonStyle[no],ro.buttonRightShape[Ro]),Wo=cls(Fr&&ro.input,ro.value[no]);return React$1.createElement(mo,_extends$b({ref:ao,className:No},go),React$1.createElement("span",{ref:qs,className:Do,role:"button",tabIndex:"0",onClick:gs},React$1.createElement("span",{className:ro.hBar})),Fr&&!Dr&&React$1.createElement("input",{className:Wo,placeholder:Ur,type:zr,value:Lr,defaultValue:Mr,disabled:Vr,readOnly:Nr,onInput:us,onChange:xs,onFocus:Ts,onBlur:vs}),!Fr&&!Dr&&React$1.createElement("span",{className:Wo},Lr),React$1.createElement("span",{ref:Qs,className:To,role:"button",tabIndex:"0",onClick:fs},React$1.createElement("span",{className:ro.hBar}),React$1.createElement("span",{className:ro.vBar})))});Stepper.displayName="Stepper";function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$a.apply(this,arguments)}const Tabbar=reactExports.forwardRef((_r,Tr)=>{const{labels:Rr,icons:Ar,children:Pr,...Lr}=_r,Mr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Mr.current}));const Fr={...Lr};return React$1.createElement(Toolbar,_extends$a({ref:Mr,tabbar:!0,tabbarIcons:Ar,tabbarLabels:Rr},Fr),Pr)});Tabbar.displayName="Tabbar";const TabbarLinkClasses=function(_r,Tr){let{hasIcon:Rr,hasLabel:Ar,active:Pr}=_r===void 0?{}:_r;return Tr===void 0&&(Tr={}),{content:{common:"flex flex-col items-center justify-center h-full",ios:cls("py-1",Pr?Tr.textActiveIos:Tr.textIos),material:cls("py-2",Rr&&Ar&&"space-y-1",Pr?Tr.textActiveMaterial:Tr.textMaterial)},iconContainer:{common:"flex items-center justify-center k-tabbar-link-icon relative",ios:cls("w-7 h-7"),material:cls("w-16 h-8 rounded-full")},iconBg:{common:"absolute left-0 top-0 w-full h-full rounded-full duration-200 -z-10 pointer-events-none",ios:cls(Pr?Tr.iconBgActiveIos:Tr.iconBgIos),material:cls(Pr?Tr.iconBgActiveMaterial:Tr.iconBgMaterial,!Pr&&"scale-x-[0.5] opacity-0")},label:{ios:cls(Rr?"text-xs font-medium":"",""),material:cls(Rr?"text-xs":"text-sm","font-medium")}}},TabbarLinkColors=function(_r,Tr){return _r===void 0&&(_r={}),{textIos:cls("text-black text-opacity-40",Tr("dark:text-white dark:text-opacity-55")),textActiveIos:"text-primary",textMaterial:cls("text-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant")),textActiveMaterial:cls("text-md-light-on-secondary-container",Tr("dark:text-md-dark-on-secondary-container")),iconBgIos:"",iconBgActiveIos:"",iconBgMaterial:"",iconBgActiveMaterial:cls("bg-md-light-secondary-container",Tr("dark:bg-md-dark-secondary-container")),..._r}};function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$9.apply(this,arguments)}const TabbarLink=reactExports.forwardRef((_r,Tr)=>{const{className:Rr,active:Ar,ios:Pr,material:Lr,colors:Mr,linkProps:Fr={},icon:zr,label:Ur,children:Vr,...Nr}=_r,Dr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Dr.current}));const jr={...Fr,...Nr},Gr=useDarkClasses(),Wr=TabbarLinkColors(Mr,Gr),qr=useThemeClasses({ios:Pr,material:Lr}),Kr=!!zr,Xr=Ur||Vr&&Vr.length,Zr=qr(TabbarLinkClasses({hasLabel:Xr,hasIcon:Kr,active:Ar},Wr));return React$1.createElement(Link,_extends$9({ref:Dr,tabbar:!0,tabbarActive:Ar,className:Rr},jr),React$1.createElement("span",{className:Zr.content},zr&&React$1.createElement("span",{className:Zr.iconContainer},React$1.createElement("span",{className:Zr.iconBg}),zr),(Ur||Vr&&Vr.length)&&React$1.createElement("span",{className:Zr.label},Ur,Vr)))});TabbarLink.displayName="TabbarLink";const TableClasses=()=>({base:{common:"w-full border-none p-0 m-0 border-collapse text-left table",ios:"",material:""}});function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$8.apply(this,arguments)}const Table=reactExports.forwardRef((_r,Tr)=>{const{className:Rr,ios:Ar,material:Pr,children:Lr,...Mr}=_r,Fr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Fr.current}));const Ur=useThemeClasses({ios:Ar,material:Pr})(TableClasses({..._r})),Vr={...Mr};return React$1.createElement("table",_extends$8({className:Ur.base,ref:Fr},Vr),Lr)});Table.displayName="Table";const TableBodyClasses=()=>({base:{common:"text-sm",ios:"",material:""}});function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$7.apply(this,arguments)}const TableBody=reactExports.forwardRef((_r,Tr)=>{const{className:Rr,ios:Ar,material:Pr,children:Lr,...Mr}=_r,Fr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Fr.current}));const Ur=useThemeClasses({ios:Ar,material:Pr})(TableBodyClasses({..._r})),Vr={...Mr};return React$1.createElement("tbody",_extends$7({className:Ur.base,ref:Fr},Vr),Lr)});TableBody.displayName="TableBody";const TableCellClasses=(_r,Tr,Rr)=>{const{header:Ar}=_r;return{base:{common:cls("align-middle",Rr),ios:cls(Ar?`text-xs font-semibold overflow-hidden whitespace-nowrap leading-4 h-11 bg-transparent ${Tr.textHeaderIos} py-0 px-4`:"h-11 relative py-0 px-4"),material:cls(Ar?`${Tr.textHeaderMaterial} px-6 py-0  text-xs font-medium overflow-hidden text-ellipsis whitespace-nowrap leading-4 h-14 bg-transparent`:"py-0 first:px-6 px-7 h-12")}}},TableCellColors=function(_r,Tr){return _r===void 0&&(_r={}),{textHeaderIos:cls("text-black/45",Tr("dark:text-white/55")),textHeaderMaterial:cls("text-md-light-on-surface-variant",Tr("dark:text-md-dark-on-surface-variant")),..._r}};function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$6.apply(this,arguments)}const TableCell=reactExports.forwardRef((_r,Tr)=>{const{className:Rr,colors:Ar,header:Pr,ios:Lr,material:Mr,children:Fr,...zr}=_r,Ur=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Ur.current}));const Vr=Pr?"th":"td",Nr=useThemeClasses({ios:Lr,material:Mr}),Dr=useDarkClasses(),jr=TableCellColors(Ar,Dr),Gr=Nr(TableCellClasses({..._r},jr,Rr)),Wr={...zr};return React$1.createElement(Vr,_extends$6({className:Gr.base,ref:Ur},Wr),Fr)});TableCell.displayName="TableCell";const TableHeadClasses=()=>({base:{common:"align-middle relative",ios:"hairline-b",material:""}});function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$5.apply(this,arguments)}const TableHead=reactExports.forwardRef((_r,Tr)=>{const{className:Rr,ios:Ar,material:Pr,children:Lr,...Mr}=_r,Fr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Fr.current}));const Ur=useThemeClasses({ios:Ar,material:Pr})(TableHeadClasses({..._r})),Vr={...Mr};return React$1.createElement("thead",_extends$5({className:Ur.base,ref:Fr},Vr),Lr)});TableHead.displayName="TableHead";const TableRowClasses=(_r,Tr)=>{const{header:Rr}=_r;return{base:{common:"align-middle relative",ios:Rr?"":cls(Tr.bgIos,"hairline-b last:hairline-transparent"),material:Rr?"":cls(Tr.bgMaterial,`border-t ${Tr.dividerMaterial}`)}}},TableRowColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:cls("hover:bg-black/5",Tr("dark:hover:bg-white/10")),bgMaterial:cls("hover:bg-md-light-secondary-container",Tr("dark:hover:bg-md-dark-secondary-container")),dividerMaterial:cls("border-md-light-outline",Tr("dark:border-md-dark-outline")),..._r}};function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$4.apply(this,arguments)}const TableRow=reactExports.forwardRef((_r,Tr)=>{const{className:Rr,colors:Ar,header:Pr,ios:Lr,material:Mr,children:Fr,...zr}=_r,Ur=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Ur.current}));const Vr=useThemeClasses({ios:Lr,material:Mr}),Nr=useDarkClasses(),Dr=TableRowColors(Ar,Nr),jr=Vr(TableRowClasses({..._r},Dr)),Gr={...zr};return React$1.createElement("tr",_extends$4({className:jr.base,ref:Ur},Gr),Fr)});TableRow.displayName="TableRow";const ToastClasses=(_r,Tr,Rr)=>{const{translucent:Ar,opened:Pr}=_r;return{base:{common:cls(positionClass("fixed",Rr),"z-50 transform transition-transform-opacity w-full sm:w-auto start-0 bottom-0 sm:max-w-lg",!Pr&&"translate-y-full opacity-0 pointer-events-none"),ios:cls("sm:rounded-lg duration-300",Tr.textIos,Tr.bgIos,Ar&&"translucent"),material:cls("sm:rounded-2xl duration-200",Tr.textMaterial,Tr.bgMaterial),left:"sm:start-4-safe sm:bottom-4-safe",right:"sm:end-4-safe sm:bottom-4-safe sm:start-auto",center:"sm:left-1/2 sm:bottom-4-safe sm:-translate-x-1/2"},content:{common:"flex items-center justify-between",ios:"pl-4-safe pr-4-safe pt-3 pb-3-safe sm:px-4 sm:py-3",material:"pl-6-safe pr-6-safe py-3.5 pb-3.5-safe sm:px-6 sm:py-3.5"},button:{common:"-my-2 shrink-0 ms-4",ios:"",material:"-me-2"}}},ToastColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:"bg-black",bgMaterial:cls("bg-md-light-surface-5",Tr("dark:bg-md-dark-surface-5")),textIos:"text-white",textMaterial:cls("text-md-light-primary",Tr("dark:text-md-dark-primary")),..._r}};function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$3.apply(this,arguments)}const Toast=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="div",className:Ar,colors:Pr,translucent:Lr=!0,button:Mr,position:Fr="left",opened:zr,ios:Ur,material:Vr,children:Nr,...Dr}=_r,jr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:jr.current}));const Gr=Rr,Wr={...Dr},qr=useThemeClasses({ios:Ur,material:Vr}),Kr=useDarkClasses(),Xr=ToastColors(Pr,Kr),Zr=qr(ToastClasses({..._r,translucent:Lr},Xr,Ar),Ar);return React$1.createElement(Gr,_extends$3({ref:jr,className:Zr.base[Fr]},Wr),React$1.createElement("div",{className:Zr.content},Nr,Mr&&React$1.createElement("div",{className:Zr.button},Mr)))});Toast.displayName="Toast";const ToggleClasses=(_r,Tr,Rr,Ar)=>({base:{common:cls(positionClass("relative",Rr),"cursor-pointer select-none inline-block align-middle relative duration-300 rounded-full group",Ar("dark:touch-ripple-white")),ios:"h-8 w-13 p-0.5",material:"w-13 h-8 border-2",notChecked:{ios:Tr.bgIos,material:cls(Tr.bgMaterial,Tr.borderMaterial)},checked:{ios:`${Tr.checkedBgIos}`,material:cls(Tr.checkedBgMaterial,Tr.checkedBorderMaterial)}},inner:{ios:cls("w-full h-full bg-white rounded-full block duration-300 transform",Ar("dark:bg-opacity-0")),notChecked:{},checked:{ios:"scale-0"}},thumbWrap:{common:"rounded-full absolute duration-300 transform",ios:"w-7 h-7 start-0.5 top-0.5",material:"w-6 h-6 start-0.5 top-0.5",checked:{ios:cls("translate-x-5 rtl:!-translate-x-5"),material:cls("translate-x-5 rtl:!-translate-x-5")},notChecked:""},thumb:{common:"w-full h-full rounded-full absolute duration-300 transform start-0 top-0",ios:"shadow-ios-toggle",material:"group-active:scale-[1.1]",checked:{ios:cls(Tr.checkedThumbBgIos),material:cls(Tr.checkedThumbBgMaterial)},notChecked:{ios:Tr.thumbBgIos,material:cls("scale-[0.666]",Tr.thumbBgMaterial)}},input:{common:"hidden"}}),ToggleColors=function(_r,Tr){return _r===void 0&&(_r={}),{bgIos:cls("bg-black bg-opacity-10",Tr("dark:bg-white dark:bg-opacity-20")),checkedBgIos:"bg-primary",thumbBgIos:"bg-white",checkedThumbBgIos:"bg-white",bgMaterial:cls("bg-md-light-surface-variant",Tr("dark:bg-md-dark-surface-variant")),checkedBgMaterial:cls("bg-md-light-primary",Tr("dark:bg-md-dark-primary")),borderMaterial:cls("border-md-light-outline",Tr("dark:border-md-dark-outline")),checkedBorderMaterial:cls("border-md-light-primary",Tr("dark:border-md-dark-primary")),thumbBgMaterial:cls("bg-md-light-outline",Tr("dark:bg-md-dark-outline")),checkedThumbBgMaterial:cls("bg-md-light-on-primary",Tr("dark:bg-md-dark-on-primary")),..._r}};function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$2.apply(this,arguments)}const Toggle=reactExports.forwardRef((_r,Tr)=>{const{component:Rr="label",className:Ar,colors:Pr,defaultChecked:Lr,checked:Mr,name:Fr,value:zr,disabled:Ur,readOnly:Vr,onChange:Nr,touchRipple:Dr=!0,ios:jr,material:Gr,children:Wr,...qr}=_r,Kr=reactExports.useRef(null),Xr=reactExports.useRef(null);reactExports.useImperativeHandle(Tr,()=>({el:Kr.current}));const Zr=Rr,Jr={...qr},_i=useTheme({ios:jr,material:Gr}),es=useThemeClasses({ios:jr,material:Gr}),ts=useDarkClasses();useTouchRipple(Xr,_i==="material"&&Dr,Kr);const rs=ToggleColors(Pr,ts),ns=Mr||Lr&&!Nr?"checked":"notChecked",as=es(ToggleClasses(_r,rs,Ar,ts),Ar);return React$1.createElement(Zr,_extends$2({ref:Kr,className:as.base[ns]},Jr),React$1.createElement("input",{type:"checkbox",name:Fr,value:zr,disabled:Ur,readOnly:Vr,checked:Mr,defaultChecked:Lr,onChange:Nr,className:as.input}),React$1.createElement("span",{className:as.inner[ns]}),React$1.createElement("span",{ref:Xr,className:as.thumbWrap[ns]},React$1.createElement("span",{className:as.thumb[ns]})),Wr)});Toggle.displayName="Toggle";var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React$1.createContext&&React$1.createContext(DefaultContext),__assign$3=globalThis&&globalThis.__assign||function(){return __assign$3=Object.assign||function(_r){for(var Tr,Rr=1,Ar=arguments.length;Rr<Ar;Rr++){Tr=arguments[Rr];for(var Pr in Tr)Object.prototype.hasOwnProperty.call(Tr,Pr)&&(_r[Pr]=Tr[Pr])}return _r},__assign$3.apply(this,arguments)},__rest$1=globalThis&&globalThis.__rest||function(_r,Tr){var Rr={};for(var Ar in _r)Object.prototype.hasOwnProperty.call(_r,Ar)&&Tr.indexOf(Ar)<0&&(Rr[Ar]=_r[Ar]);if(_r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Pr=0,Ar=Object.getOwnPropertySymbols(_r);Pr<Ar.length;Pr++)Tr.indexOf(Ar[Pr])<0&&Object.prototype.propertyIsEnumerable.call(_r,Ar[Pr])&&(Rr[Ar[Pr]]=_r[Ar[Pr]]);return Rr};function Tree2Element(_r){return _r&&_r.map(function(Tr,Rr){return React$1.createElement(Tr.tag,__assign$3({key:Rr},Tr.attr),Tree2Element(Tr.child))})}function GenIcon(_r){return function(Tr){return React$1.createElement(IconBase,__assign$3({attr:__assign$3({},_r.attr)},Tr),Tree2Element(_r.child))}}function IconBase(_r){var Tr=function(Rr){var Ar=_r.attr,Pr=_r.size,Lr=_r.title,Mr=__rest$1(_r,["attr","size","title"]),Fr=Pr||Rr.size||"1em",zr;return Rr.className&&(zr=Rr.className),_r.className&&(zr=(zr?zr+" ":"")+_r.className),React$1.createElement("svg",__assign$3({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},Rr.attr,Ar,Mr,{className:zr,style:__assign$3(__assign$3({color:_r.color||Rr.color},Rr.style),_r.style),height:Fr,width:Fr,xmlns:"http://www.w3.org/2000/svg"}),Lr&&React$1.createElement("title",null,Lr),_r.children)};return IconContext!==void 0?React$1.createElement(IconContext.Consumer,null,function(Rr){return Tr(Rr)}):Tr(DefaultContext)}function MdHome(_r){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}}]})(_r)}function MdCreate(_r){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 000-1.41l-2.34-2.34a.996.996 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}}]})(_r)}function MdCollections(_r){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4l2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z"}}]})(_r)}const LogoIcon="/logo.svg",Logo=()=>jsxRuntimeExports.jsx("img",{src:LogoIcon,alt:"Logo GLAMorous Europe",className:"bg-white h-16 w-16"});function Layout(){return jsxRuntimeExports.jsx(App$1,{theme:"material",children:jsxRuntimeExports.jsxs(Page,{className:"flex flex-col",children:[jsxRuntimeExports.jsx(Navbar,{centerTitle:!0,title:"GLAMorouS Europe",titleClassName:"neonFont text-white text-3xl",className:"top-0 sticky p-4",left:jsxRuntimeExports.jsx(Icon,{material:jsxRuntimeExports.jsx(Logo,{})})}),jsxRuntimeExports.jsxs(Tabbar,{labels:!0,icons:!0,className:"left-0 bottom-0 fixed",children:[jsxRuntimeExports.jsx(TabbarLink,{to:"/",active:useMatch({path:useResolvedPath("/").pathname,end:!0}),component:NavLink,icon:jsxRuntimeExports.jsx(Icon,{material:jsxRuntimeExports.jsx(MdHome,{className:"w-6 h-6"})})}),jsxRuntimeExports.jsx(TabbarLink,{active:useMatch({path:useResolvedPath("/collect").pathname,end:!0}),to:"/collect",component:NavLink,icon:jsxRuntimeExports.jsx(Icon,{material:jsxRuntimeExports.jsx(MdCollections,{className:"w-6 h-6"})})}),jsxRuntimeExports.jsx(TabbarLink,{active:useMatch({path:useResolvedPath("/create").pathname,end:!0}),to:"/create",component:NavLink,icon:jsxRuntimeExports.jsx(Icon,{material:jsxRuntimeExports.jsx(MdCreate,{className:"w-6 h-6"})})})]}),jsxRuntimeExports.jsx("main",{className:"flex-1",children:jsxRuntimeExports.jsx(Outlet,{})})]})})}const Collect$1="";function bind(_r,Tr){return function(){return _r.apply(Tr,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(_r=>Tr=>{const Rr=toString.call(Tr);return _r[Rr]||(_r[Rr]=Rr.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=_r=>(_r=_r.toLowerCase(),Tr=>kindOf(Tr)===_r),typeOfTest=_r=>Tr=>typeof Tr===_r,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(_r){return _r!==null&&!isUndefined(_r)&&_r.constructor!==null&&!isUndefined(_r.constructor)&&isFunction(_r.constructor.isBuffer)&&_r.constructor.isBuffer(_r)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(_r){let Tr;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?Tr=ArrayBuffer.isView(_r):Tr=_r&&_r.buffer&&isArrayBuffer(_r.buffer),Tr}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$2=_r=>_r!==null&&typeof _r=="object",isBoolean=_r=>_r===!0||_r===!1,isPlainObject$5=_r=>{if(kindOf(_r)!=="object")return!1;const Tr=getPrototypeOf(_r);return(Tr===null||Tr===Object.prototype||Object.getPrototypeOf(Tr)===null)&&!(Symbol.toStringTag in _r)&&!(Symbol.iterator in _r)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=_r=>isObject$2(_r)&&isFunction(_r.pipe),isFormData=_r=>{let Tr;return _r&&(typeof FormData=="function"&&_r instanceof FormData||isFunction(_r.append)&&((Tr=kindOf(_r))==="formdata"||Tr==="object"&&isFunction(_r.toString)&&_r.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=_r=>_r.trim?_r.trim():_r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(_r,Tr,{allOwnKeys:Rr=!1}={}){if(_r===null||typeof _r>"u")return;let Ar,Pr;if(typeof _r!="object"&&(_r=[_r]),isArray(_r))for(Ar=0,Pr=_r.length;Ar<Pr;Ar++)Tr.call(null,_r[Ar],Ar,_r);else{const Lr=Rr?Object.getOwnPropertyNames(_r):Object.keys(_r),Mr=Lr.length;let Fr;for(Ar=0;Ar<Mr;Ar++)Fr=Lr[Ar],Tr.call(null,_r[Fr],Fr,_r)}}function findKey(_r,Tr){Tr=Tr.toLowerCase();const Rr=Object.keys(_r);let Ar=Rr.length,Pr;for(;Ar-- >0;)if(Pr=Rr[Ar],Tr===Pr.toLowerCase())return Pr;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=_r=>!isUndefined(_r)&&_r!==_global;function merge$1(){const{caseless:_r}=isContextDefined(this)&&this||{},Tr={},Rr=(Ar,Pr)=>{const Lr=_r&&findKey(Tr,Pr)||Pr;isPlainObject$5(Tr[Lr])&&isPlainObject$5(Ar)?Tr[Lr]=merge$1(Tr[Lr],Ar):isPlainObject$5(Ar)?Tr[Lr]=merge$1({},Ar):isArray(Ar)?Tr[Lr]=Ar.slice():Tr[Lr]=Ar};for(let Ar=0,Pr=arguments.length;Ar<Pr;Ar++)arguments[Ar]&&forEach(arguments[Ar],Rr);return Tr}const extend=(_r,Tr,Rr,{allOwnKeys:Ar}={})=>(forEach(Tr,(Pr,Lr)=>{Rr&&isFunction(Pr)?_r[Lr]=bind(Pr,Rr):_r[Lr]=Pr},{allOwnKeys:Ar}),_r),stripBOM=_r=>(_r.charCodeAt(0)===65279&&(_r=_r.slice(1)),_r),inherits=(_r,Tr,Rr,Ar)=>{_r.prototype=Object.create(Tr.prototype,Ar),_r.prototype.constructor=_r,Object.defineProperty(_r,"super",{value:Tr.prototype}),Rr&&Object.assign(_r.prototype,Rr)},toFlatObject=(_r,Tr,Rr,Ar)=>{let Pr,Lr,Mr;const Fr={};if(Tr=Tr||{},_r==null)return Tr;do{for(Pr=Object.getOwnPropertyNames(_r),Lr=Pr.length;Lr-- >0;)Mr=Pr[Lr],(!Ar||Ar(Mr,_r,Tr))&&!Fr[Mr]&&(Tr[Mr]=_r[Mr],Fr[Mr]=!0);_r=Rr!==!1&&getPrototypeOf(_r)}while(_r&&(!Rr||Rr(_r,Tr))&&_r!==Object.prototype);return Tr},endsWith=(_r,Tr,Rr)=>{_r=String(_r),(Rr===void 0||Rr>_r.length)&&(Rr=_r.length),Rr-=Tr.length;const Ar=_r.indexOf(Tr,Rr);return Ar!==-1&&Ar===Rr},toArray=_r=>{if(!_r)return null;if(isArray(_r))return _r;let Tr=_r.length;if(!isNumber(Tr))return null;const Rr=new Array(Tr);for(;Tr-- >0;)Rr[Tr]=_r[Tr];return Rr},isTypedArray=(_r=>Tr=>_r&&Tr instanceof _r)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(_r,Tr)=>{const Ar=(_r&&_r[Symbol.iterator]).call(_r);let Pr;for(;(Pr=Ar.next())&&!Pr.done;){const Lr=Pr.value;Tr.call(_r,Lr[0],Lr[1])}},matchAll=(_r,Tr)=>{let Rr;const Ar=[];for(;(Rr=_r.exec(Tr))!==null;)Ar.push(Rr);return Ar},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=_r=>_r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(Rr,Ar,Pr){return Ar.toUpperCase()+Pr}),hasOwnProperty=(({hasOwnProperty:_r})=>(Tr,Rr)=>_r.call(Tr,Rr))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(_r,Tr)=>{const Rr=Object.getOwnPropertyDescriptors(_r),Ar={};forEach(Rr,(Pr,Lr)=>{let Mr;(Mr=Tr(Pr,Lr,_r))!==!1&&(Ar[Lr]=Mr||Pr)}),Object.defineProperties(_r,Ar)},freezeMethods=_r=>{reduceDescriptors(_r,(Tr,Rr)=>{if(isFunction(_r)&&["arguments","caller","callee"].indexOf(Rr)!==-1)return!1;const Ar=_r[Rr];if(isFunction(Ar)){if(Tr.enumerable=!1,"writable"in Tr){Tr.writable=!1;return}Tr.set||(Tr.set=()=>{throw Error("Can not rewrite read-only method '"+Rr+"'")})}})},toObjectSet=(_r,Tr)=>{const Rr={},Ar=Pr=>{Pr.forEach(Lr=>{Rr[Lr]=!0})};return isArray(_r)?Ar(_r):Ar(String(_r).split(Tr)),Rr},noop$1=()=>{},toFiniteNumber=(_r,Tr)=>(_r=+_r,Number.isFinite(_r)?_r:Tr),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(_r=16,Tr=ALPHABET.ALPHA_DIGIT)=>{let Rr="";const{length:Ar}=Tr;for(;_r--;)Rr+=Tr[Math.random()*Ar|0];return Rr};function isSpecCompliantForm(_r){return!!(_r&&isFunction(_r.append)&&_r[Symbol.toStringTag]==="FormData"&&_r[Symbol.iterator])}const toJSONObject=_r=>{const Tr=new Array(10),Rr=(Ar,Pr)=>{if(isObject$2(Ar)){if(Tr.indexOf(Ar)>=0)return;if(!("toJSON"in Ar)){Tr[Pr]=Ar;const Lr=isArray(Ar)?[]:{};return forEach(Ar,(Mr,Fr)=>{const zr=Rr(Mr,Pr+1);!isUndefined(zr)&&(Lr[Fr]=zr)}),Tr[Pr]=void 0,Lr}}return Ar};return Rr(_r,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=_r=>_r&&(isObject$2(_r)||isFunction(_r))&&isFunction(_r.then)&&isFunction(_r.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject:isObject$2,isPlainObject:isPlainObject$5,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge:merge$1,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(_r,Tr,Rr,Ar,Pr){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=_r,this.name="AxiosError",Tr&&(this.code=Tr),Rr&&(this.config=Rr),Ar&&(this.request=Ar),Pr&&(this.response=Pr)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(_r=>{descriptors[_r]={value:_r}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(_r,Tr,Rr,Ar,Pr,Lr)=>{const Mr=Object.create(prototype$1);return utils$1.toFlatObject(_r,Mr,function(zr){return zr!==Error.prototype},Fr=>Fr!=="isAxiosError"),AxiosError.call(Mr,_r.message,Tr,Rr,Ar,Pr),Mr.cause=_r,Mr.name=_r.name,Lr&&Object.assign(Mr,Lr),Mr};const httpAdapter=null;function isVisitable(_r){return utils$1.isPlainObject(_r)||utils$1.isArray(_r)}function removeBrackets(_r){return utils$1.endsWith(_r,"[]")?_r.slice(0,-2):_r}function renderKey(_r,Tr,Rr){return _r?_r.concat(Tr).map(function(Pr,Lr){return Pr=removeBrackets(Pr),!Rr&&Lr?"["+Pr+"]":Pr}).join(Rr?".":""):Tr}function isFlatArray(_r){return utils$1.isArray(_r)&&!_r.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(Tr){return/^is[A-Z]/.test(Tr)});function toFormData(_r,Tr,Rr){if(!utils$1.isObject(_r))throw new TypeError("target must be an object");Tr=Tr||new FormData,Rr=utils$1.toFlatObject(Rr,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Wr,qr){return!utils$1.isUndefined(qr[Wr])});const Ar=Rr.metaTokens,Pr=Rr.visitor||Vr,Lr=Rr.dots,Mr=Rr.indexes,zr=(Rr.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(Tr);if(!utils$1.isFunction(Pr))throw new TypeError("visitor must be a function");function Ur(Gr){if(Gr===null)return"";if(utils$1.isDate(Gr))return Gr.toISOString();if(!zr&&utils$1.isBlob(Gr))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(Gr)||utils$1.isTypedArray(Gr)?zr&&typeof Blob=="function"?new Blob([Gr]):Buffer.from(Gr):Gr}function Vr(Gr,Wr,qr){let Kr=Gr;if(Gr&&!qr&&typeof Gr=="object"){if(utils$1.endsWith(Wr,"{}"))Wr=Ar?Wr:Wr.slice(0,-2),Gr=JSON.stringify(Gr);else if(utils$1.isArray(Gr)&&isFlatArray(Gr)||(utils$1.isFileList(Gr)||utils$1.endsWith(Wr,"[]"))&&(Kr=utils$1.toArray(Gr)))return Wr=removeBrackets(Wr),Kr.forEach(function(Zr,Jr){!(utils$1.isUndefined(Zr)||Zr===null)&&Tr.append(Mr===!0?renderKey([Wr],Jr,Lr):Mr===null?Wr:Wr+"[]",Ur(Zr))}),!1}return isVisitable(Gr)?!0:(Tr.append(renderKey(qr,Wr,Lr),Ur(Gr)),!1)}const Nr=[],Dr=Object.assign(predicates,{defaultVisitor:Vr,convertValue:Ur,isVisitable});function jr(Gr,Wr){if(!utils$1.isUndefined(Gr)){if(Nr.indexOf(Gr)!==-1)throw Error("Circular reference detected in "+Wr.join("."));Nr.push(Gr),utils$1.forEach(Gr,function(Kr,Xr){(!(utils$1.isUndefined(Kr)||Kr===null)&&Pr.call(Tr,Kr,utils$1.isString(Xr)?Xr.trim():Xr,Wr,Dr))===!0&&jr(Kr,Wr?Wr.concat(Xr):[Xr])}),Nr.pop()}}if(!utils$1.isObject(_r))throw new TypeError("data must be an object");return jr(_r),Tr}function encode$2(_r){const Tr={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(_r).replace(/[!'()~]|%20|%00/g,function(Ar){return Tr[Ar]})}function AxiosURLSearchParams(_r,Tr){this._pairs=[],_r&&toFormData(_r,this,Tr)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(Tr,Rr){this._pairs.push([Tr,Rr])};prototype.toString=function(Tr){const Rr=Tr?function(Ar){return Tr.call(this,Ar,encode$2)}:encode$2;return this._pairs.map(function(Pr){return Rr(Pr[0])+"="+Rr(Pr[1])},"").join("&")};function encode$1(_r){return encodeURIComponent(_r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(_r,Tr,Rr){if(!Tr)return _r;const Ar=Rr&&Rr.encode||encode$1,Pr=Rr&&Rr.serialize;let Lr;if(Pr?Lr=Pr(Tr,Rr):Lr=utils$1.isURLSearchParams(Tr)?Tr.toString():new AxiosURLSearchParams(Tr,Rr).toString(Ar),Lr){const Mr=_r.indexOf("#");Mr!==-1&&(_r=_r.slice(0,Mr)),_r+=(_r.indexOf("?")===-1?"?":"&")+Lr}return _r}class InterceptorManager{constructor(){this.handlers=[]}use(Tr,Rr,Ar){return this.handlers.push({fulfilled:Tr,rejected:Rr,synchronous:Ar?Ar.synchronous:!1,runWhen:Ar?Ar.runWhen:null}),this.handlers.length-1}eject(Tr){this.handlers[Tr]&&(this.handlers[Tr]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(Tr){utils$1.forEach(this.handlers,function(Ar){Ar!==null&&Tr(Ar)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let _r;return typeof navigator<"u"&&((_r=navigator.product)==="ReactNative"||_r==="NativeScript"||_r==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(_r,Tr){return toFormData(_r,new platform$1.classes.URLSearchParams,Object.assign({visitor:function(Rr,Ar,Pr,Lr){return platform$1.isNode&&utils$1.isBuffer(Rr)?(this.append(Ar,Rr.toString("base64")),!1):Lr.defaultVisitor.apply(this,arguments)}},Tr))}function parsePropPath(_r){return utils$1.matchAll(/\w+|\[(\w*)]/g,_r).map(Tr=>Tr[0]==="[]"?"":Tr[1]||Tr[0])}function arrayToObject(_r){const Tr={},Rr=Object.keys(_r);let Ar;const Pr=Rr.length;let Lr;for(Ar=0;Ar<Pr;Ar++)Lr=Rr[Ar],Tr[Lr]=_r[Lr];return Tr}function formDataToJSON(_r){function Tr(Rr,Ar,Pr,Lr){let Mr=Rr[Lr++];const Fr=Number.isFinite(+Mr),zr=Lr>=Rr.length;return Mr=!Mr&&utils$1.isArray(Pr)?Pr.length:Mr,zr?(utils$1.hasOwnProp(Pr,Mr)?Pr[Mr]=[Pr[Mr],Ar]:Pr[Mr]=Ar,!Fr):((!Pr[Mr]||!utils$1.isObject(Pr[Mr]))&&(Pr[Mr]=[]),Tr(Rr,Ar,Pr[Mr],Lr)&&utils$1.isArray(Pr[Mr])&&(Pr[Mr]=arrayToObject(Pr[Mr])),!Fr)}if(utils$1.isFormData(_r)&&utils$1.isFunction(_r.entries)){const Rr={};return utils$1.forEachEntry(_r,(Ar,Pr)=>{Tr(parsePropPath(Ar),Pr,Rr,0)}),Rr}return null}function stringifySafely(_r,Tr,Rr){if(utils$1.isString(_r))try{return(Tr||JSON.parse)(_r),utils$1.trim(_r)}catch(Ar){if(Ar.name!=="SyntaxError")throw Ar}return(Rr||JSON.stringify)(_r)}const defaults$1={transitional:transitionalDefaults,adapter:platform$1.isNode?"http":"xhr",transformRequest:[function(Tr,Rr){const Ar=Rr.getContentType()||"",Pr=Ar.indexOf("application/json")>-1,Lr=utils$1.isObject(Tr);if(Lr&&utils$1.isHTMLForm(Tr)&&(Tr=new FormData(Tr)),utils$1.isFormData(Tr))return Pr&&Pr?JSON.stringify(formDataToJSON(Tr)):Tr;if(utils$1.isArrayBuffer(Tr)||utils$1.isBuffer(Tr)||utils$1.isStream(Tr)||utils$1.isFile(Tr)||utils$1.isBlob(Tr))return Tr;if(utils$1.isArrayBufferView(Tr))return Tr.buffer;if(utils$1.isURLSearchParams(Tr))return Rr.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),Tr.toString();let Fr;if(Lr){if(Ar.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(Tr,this.formSerializer).toString();if((Fr=utils$1.isFileList(Tr))||Ar.indexOf("multipart/form-data")>-1){const zr=this.env&&this.env.FormData;return toFormData(Fr?{"files[]":Tr}:Tr,zr&&new zr,this.formSerializer)}}return Lr||Pr?(Rr.setContentType("application/json",!1),stringifySafely(Tr)):Tr}],transformResponse:[function(Tr){const Rr=this.transitional||defaults$1.transitional,Ar=Rr&&Rr.forcedJSONParsing,Pr=this.responseType==="json";if(Tr&&utils$1.isString(Tr)&&(Ar&&!this.responseType||Pr)){const Mr=!(Rr&&Rr.silentJSONParsing)&&Pr;try{return JSON.parse(Tr)}catch(Fr){if(Mr)throw Fr.name==="SyntaxError"?AxiosError.from(Fr,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):Fr}}return Tr}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$1.classes.FormData,Blob:platform$1.classes.Blob},validateStatus:function(Tr){return Tr>=200&&Tr<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],_r=>{defaults$1.headers[_r]={}});const defaults$2=defaults$1,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=_r=>{const Tr={};let Rr,Ar,Pr;return _r&&_r.split(`
`).forEach(function(Mr){Pr=Mr.indexOf(":"),Rr=Mr.substring(0,Pr).trim().toLowerCase(),Ar=Mr.substring(Pr+1).trim(),!(!Rr||Tr[Rr]&&ignoreDuplicateOf[Rr])&&(Rr==="set-cookie"?Tr[Rr]?Tr[Rr].push(Ar):Tr[Rr]=[Ar]:Tr[Rr]=Tr[Rr]?Tr[Rr]+", "+Ar:Ar)}),Tr},$internals=Symbol("internals");function normalizeHeader(_r){return _r&&String(_r).trim().toLowerCase()}function normalizeValue(_r){return _r===!1||_r==null?_r:utils$1.isArray(_r)?_r.map(normalizeValue):String(_r)}function parseTokens(_r){const Tr=Object.create(null),Rr=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let Ar;for(;Ar=Rr.exec(_r);)Tr[Ar[1]]=Ar[2];return Tr}const isValidHeaderName=_r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(_r.trim());function matchHeaderValue(_r,Tr,Rr,Ar,Pr){if(utils$1.isFunction(Ar))return Ar.call(this,Tr,Rr);if(Pr&&(Tr=Rr),!!utils$1.isString(Tr)){if(utils$1.isString(Ar))return Tr.indexOf(Ar)!==-1;if(utils$1.isRegExp(Ar))return Ar.test(Tr)}}function formatHeader(_r){return _r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(Tr,Rr,Ar)=>Rr.toUpperCase()+Ar)}function buildAccessors(_r,Tr){const Rr=utils$1.toCamelCase(" "+Tr);["get","set","has"].forEach(Ar=>{Object.defineProperty(_r,Ar+Rr,{value:function(Pr,Lr,Mr){return this[Ar].call(this,Tr,Pr,Lr,Mr)},configurable:!0})})}class AxiosHeaders{constructor(Tr){Tr&&this.set(Tr)}set(Tr,Rr,Ar){const Pr=this;function Lr(Fr,zr,Ur){const Vr=normalizeHeader(zr);if(!Vr)throw new Error("header name must be a non-empty string");const Nr=utils$1.findKey(Pr,Vr);(!Nr||Pr[Nr]===void 0||Ur===!0||Ur===void 0&&Pr[Nr]!==!1)&&(Pr[Nr||zr]=normalizeValue(Fr))}const Mr=(Fr,zr)=>utils$1.forEach(Fr,(Ur,Vr)=>Lr(Ur,Vr,zr));return utils$1.isPlainObject(Tr)||Tr instanceof this.constructor?Mr(Tr,Rr):utils$1.isString(Tr)&&(Tr=Tr.trim())&&!isValidHeaderName(Tr)?Mr(parseHeaders(Tr),Rr):Tr!=null&&Lr(Rr,Tr,Ar),this}get(Tr,Rr){if(Tr=normalizeHeader(Tr),Tr){const Ar=utils$1.findKey(this,Tr);if(Ar){const Pr=this[Ar];if(!Rr)return Pr;if(Rr===!0)return parseTokens(Pr);if(utils$1.isFunction(Rr))return Rr.call(this,Pr,Ar);if(utils$1.isRegExp(Rr))return Rr.exec(Pr);throw new TypeError("parser must be boolean|regexp|function")}}}has(Tr,Rr){if(Tr=normalizeHeader(Tr),Tr){const Ar=utils$1.findKey(this,Tr);return!!(Ar&&this[Ar]!==void 0&&(!Rr||matchHeaderValue(this,this[Ar],Ar,Rr)))}return!1}delete(Tr,Rr){const Ar=this;let Pr=!1;function Lr(Mr){if(Mr=normalizeHeader(Mr),Mr){const Fr=utils$1.findKey(Ar,Mr);Fr&&(!Rr||matchHeaderValue(Ar,Ar[Fr],Fr,Rr))&&(delete Ar[Fr],Pr=!0)}}return utils$1.isArray(Tr)?Tr.forEach(Lr):Lr(Tr),Pr}clear(Tr){const Rr=Object.keys(this);let Ar=Rr.length,Pr=!1;for(;Ar--;){const Lr=Rr[Ar];(!Tr||matchHeaderValue(this,this[Lr],Lr,Tr,!0))&&(delete this[Lr],Pr=!0)}return Pr}normalize(Tr){const Rr=this,Ar={};return utils$1.forEach(this,(Pr,Lr)=>{const Mr=utils$1.findKey(Ar,Lr);if(Mr){Rr[Mr]=normalizeValue(Pr),delete Rr[Lr];return}const Fr=Tr?formatHeader(Lr):String(Lr).trim();Fr!==Lr&&delete Rr[Lr],Rr[Fr]=normalizeValue(Pr),Ar[Fr]=!0}),this}concat(...Tr){return this.constructor.concat(this,...Tr)}toJSON(Tr){const Rr=Object.create(null);return utils$1.forEach(this,(Ar,Pr)=>{Ar!=null&&Ar!==!1&&(Rr[Pr]=Tr&&utils$1.isArray(Ar)?Ar.join(", "):Ar)}),Rr}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([Tr,Rr])=>Tr+": "+Rr).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(Tr){return Tr instanceof this?Tr:new this(Tr)}static concat(Tr,...Rr){const Ar=new this(Tr);return Rr.forEach(Pr=>Ar.set(Pr)),Ar}static accessor(Tr){const Ar=(this[$internals]=this[$internals]={accessors:{}}).accessors,Pr=this.prototype;function Lr(Mr){const Fr=normalizeHeader(Mr);Ar[Fr]||(buildAccessors(Pr,Mr),Ar[Fr]=!0)}return utils$1.isArray(Tr)?Tr.forEach(Lr):Lr(Tr),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:_r},Tr)=>{let Rr=Tr[0].toUpperCase()+Tr.slice(1);return{get:()=>_r,set(Ar){this[Rr]=Ar}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(_r,Tr){const Rr=this||defaults$2,Ar=Tr||Rr,Pr=AxiosHeaders$1.from(Ar.headers);let Lr=Ar.data;return utils$1.forEach(_r,function(Fr){Lr=Fr.call(Rr,Lr,Pr.normalize(),Tr?Tr.status:void 0)}),Pr.normalize(),Lr}function isCancel(_r){return!!(_r&&_r.__CANCEL__)}function CanceledError(_r,Tr,Rr){AxiosError.call(this,_r??"canceled",AxiosError.ERR_CANCELED,Tr,Rr),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(_r,Tr,Rr){const Ar=Rr.config.validateStatus;!Rr.status||!Ar||Ar(Rr.status)?_r(Rr):Tr(new AxiosError("Request failed with status code "+Rr.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(Rr.status/100)-4],Rr.config,Rr.request,Rr))}const cookies=platform$1.isStandardBrowserEnv?function(){return{write:function(Rr,Ar,Pr,Lr,Mr,Fr){const zr=[];zr.push(Rr+"="+encodeURIComponent(Ar)),utils$1.isNumber(Pr)&&zr.push("expires="+new Date(Pr).toGMTString()),utils$1.isString(Lr)&&zr.push("path="+Lr),utils$1.isString(Mr)&&zr.push("domain="+Mr),Fr===!0&&zr.push("secure"),document.cookie=zr.join("; ")},read:function(Rr){const Ar=document.cookie.match(new RegExp("(^|;\\s*)("+Rr+")=([^;]*)"));return Ar?decodeURIComponent(Ar[3]):null},remove:function(Rr){this.write(Rr,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(_r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(_r)}function combineURLs(_r,Tr){return Tr?_r.replace(/\/+$/,"")+"/"+Tr.replace(/^\/+/,""):_r}function buildFullPath(_r,Tr){return _r&&!isAbsoluteURL(Tr)?combineURLs(_r,Tr):Tr}const isURLSameOrigin=platform$1.isStandardBrowserEnv?function(){const Tr=/(msie|trident)/i.test(navigator.userAgent),Rr=document.createElement("a");let Ar;function Pr(Lr){let Mr=Lr;return Tr&&(Rr.setAttribute("href",Mr),Mr=Rr.href),Rr.setAttribute("href",Mr),{href:Rr.href,protocol:Rr.protocol?Rr.protocol.replace(/:$/,""):"",host:Rr.host,search:Rr.search?Rr.search.replace(/^\?/,""):"",hash:Rr.hash?Rr.hash.replace(/^#/,""):"",hostname:Rr.hostname,port:Rr.port,pathname:Rr.pathname.charAt(0)==="/"?Rr.pathname:"/"+Rr.pathname}}return Ar=Pr(window.location.href),function(Mr){const Fr=utils$1.isString(Mr)?Pr(Mr):Mr;return Fr.protocol===Ar.protocol&&Fr.host===Ar.host}}():function(){return function(){return!0}}();function parseProtocol(_r){const Tr=/^([-+\w]{1,25})(:?\/\/|:)/.exec(_r);return Tr&&Tr[1]||""}function speedometer(_r,Tr){_r=_r||10;const Rr=new Array(_r),Ar=new Array(_r);let Pr=0,Lr=0,Mr;return Tr=Tr!==void 0?Tr:1e3,function(zr){const Ur=Date.now(),Vr=Ar[Lr];Mr||(Mr=Ur),Rr[Pr]=zr,Ar[Pr]=Ur;let Nr=Lr,Dr=0;for(;Nr!==Pr;)Dr+=Rr[Nr++],Nr=Nr%_r;if(Pr=(Pr+1)%_r,Pr===Lr&&(Lr=(Lr+1)%_r),Ur-Mr<Tr)return;const jr=Vr&&Ur-Vr;return jr?Math.round(Dr*1e3/jr):void 0}}function progressEventReducer(_r,Tr){let Rr=0;const Ar=speedometer(50,250);return Pr=>{const Lr=Pr.loaded,Mr=Pr.lengthComputable?Pr.total:void 0,Fr=Lr-Rr,zr=Ar(Fr),Ur=Lr<=Mr;Rr=Lr;const Vr={loaded:Lr,total:Mr,progress:Mr?Lr/Mr:void 0,bytes:Fr,rate:zr||void 0,estimated:zr&&Mr&&Ur?(Mr-Lr)/zr:void 0,event:Pr};Vr[Tr?"download":"upload"]=!0,_r(Vr)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(_r){return new Promise(function(Rr,Ar){let Pr=_r.data;const Lr=AxiosHeaders$1.from(_r.headers).normalize(),Mr=_r.responseType;let Fr;function zr(){_r.cancelToken&&_r.cancelToken.unsubscribe(Fr),_r.signal&&_r.signal.removeEventListener("abort",Fr)}utils$1.isFormData(Pr)&&(platform$1.isStandardBrowserEnv||platform$1.isStandardBrowserWebWorkerEnv?Lr.setContentType(!1):Lr.setContentType("multipart/form-data;",!1));let Ur=new XMLHttpRequest;if(_r.auth){const jr=_r.auth.username||"",Gr=_r.auth.password?unescape(encodeURIComponent(_r.auth.password)):"";Lr.set("Authorization","Basic "+btoa(jr+":"+Gr))}const Vr=buildFullPath(_r.baseURL,_r.url);Ur.open(_r.method.toUpperCase(),buildURL(Vr,_r.params,_r.paramsSerializer),!0),Ur.timeout=_r.timeout;function Nr(){if(!Ur)return;const jr=AxiosHeaders$1.from("getAllResponseHeaders"in Ur&&Ur.getAllResponseHeaders()),Wr={data:!Mr||Mr==="text"||Mr==="json"?Ur.responseText:Ur.response,status:Ur.status,statusText:Ur.statusText,headers:jr,config:_r,request:Ur};settle(function(Kr){Rr(Kr),zr()},function(Kr){Ar(Kr),zr()},Wr),Ur=null}if("onloadend"in Ur?Ur.onloadend=Nr:Ur.onreadystatechange=function(){!Ur||Ur.readyState!==4||Ur.status===0&&!(Ur.responseURL&&Ur.responseURL.indexOf("file:")===0)||setTimeout(Nr)},Ur.onabort=function(){Ur&&(Ar(new AxiosError("Request aborted",AxiosError.ECONNABORTED,_r,Ur)),Ur=null)},Ur.onerror=function(){Ar(new AxiosError("Network Error",AxiosError.ERR_NETWORK,_r,Ur)),Ur=null},Ur.ontimeout=function(){let Gr=_r.timeout?"timeout of "+_r.timeout+"ms exceeded":"timeout exceeded";const Wr=_r.transitional||transitionalDefaults;_r.timeoutErrorMessage&&(Gr=_r.timeoutErrorMessage),Ar(new AxiosError(Gr,Wr.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,_r,Ur)),Ur=null},platform$1.isStandardBrowserEnv){const jr=(_r.withCredentials||isURLSameOrigin(Vr))&&_r.xsrfCookieName&&cookies.read(_r.xsrfCookieName);jr&&Lr.set(_r.xsrfHeaderName,jr)}Pr===void 0&&Lr.setContentType(null),"setRequestHeader"in Ur&&utils$1.forEach(Lr.toJSON(),function(Gr,Wr){Ur.setRequestHeader(Wr,Gr)}),utils$1.isUndefined(_r.withCredentials)||(Ur.withCredentials=!!_r.withCredentials),Mr&&Mr!=="json"&&(Ur.responseType=_r.responseType),typeof _r.onDownloadProgress=="function"&&Ur.addEventListener("progress",progressEventReducer(_r.onDownloadProgress,!0)),typeof _r.onUploadProgress=="function"&&Ur.upload&&Ur.upload.addEventListener("progress",progressEventReducer(_r.onUploadProgress)),(_r.cancelToken||_r.signal)&&(Fr=jr=>{Ur&&(Ar(!jr||jr.type?new CanceledError(null,_r,Ur):jr),Ur.abort(),Ur=null)},_r.cancelToken&&_r.cancelToken.subscribe(Fr),_r.signal&&(_r.signal.aborted?Fr():_r.signal.addEventListener("abort",Fr)));const Dr=parseProtocol(Vr);if(Dr&&platform$1.protocols.indexOf(Dr)===-1){Ar(new AxiosError("Unsupported protocol "+Dr+":",AxiosError.ERR_BAD_REQUEST,_r));return}Ur.send(Pr||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,(_r,Tr)=>{if(_r){try{Object.defineProperty(_r,"name",{value:Tr})}catch{}Object.defineProperty(_r,"adapterName",{value:Tr})}});const adapters={getAdapter:_r=>{_r=utils$1.isArray(_r)?_r:[_r];const{length:Tr}=_r;let Rr,Ar;for(let Pr=0;Pr<Tr&&(Rr=_r[Pr],!(Ar=utils$1.isString(Rr)?knownAdapters[Rr.toLowerCase()]:Rr));Pr++);if(!Ar)throw Ar===!1?new AxiosError(`Adapter ${Rr} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils$1.hasOwnProp(knownAdapters,Rr)?`Adapter '${Rr}' is not available in the build`:`Unknown adapter '${Rr}'`);if(!utils$1.isFunction(Ar))throw new TypeError("adapter is not a function");return Ar},adapters:knownAdapters};function throwIfCancellationRequested(_r){if(_r.cancelToken&&_r.cancelToken.throwIfRequested(),_r.signal&&_r.signal.aborted)throw new CanceledError(null,_r)}function dispatchRequest(_r){return throwIfCancellationRequested(_r),_r.headers=AxiosHeaders$1.from(_r.headers),_r.data=transformData.call(_r,_r.transformRequest),["post","put","patch"].indexOf(_r.method)!==-1&&_r.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(_r.adapter||defaults$2.adapter)(_r).then(function(Ar){return throwIfCancellationRequested(_r),Ar.data=transformData.call(_r,_r.transformResponse,Ar),Ar.headers=AxiosHeaders$1.from(Ar.headers),Ar},function(Ar){return isCancel(Ar)||(throwIfCancellationRequested(_r),Ar&&Ar.response&&(Ar.response.data=transformData.call(_r,_r.transformResponse,Ar.response),Ar.response.headers=AxiosHeaders$1.from(Ar.response.headers))),Promise.reject(Ar)})}const headersToObject=_r=>_r instanceof AxiosHeaders$1?_r.toJSON():_r;function mergeConfig$1(_r,Tr){Tr=Tr||{};const Rr={};function Ar(Ur,Vr,Nr){return utils$1.isPlainObject(Ur)&&utils$1.isPlainObject(Vr)?utils$1.merge.call({caseless:Nr},Ur,Vr):utils$1.isPlainObject(Vr)?utils$1.merge({},Vr):utils$1.isArray(Vr)?Vr.slice():Vr}function Pr(Ur,Vr,Nr){if(utils$1.isUndefined(Vr)){if(!utils$1.isUndefined(Ur))return Ar(void 0,Ur,Nr)}else return Ar(Ur,Vr,Nr)}function Lr(Ur,Vr){if(!utils$1.isUndefined(Vr))return Ar(void 0,Vr)}function Mr(Ur,Vr){if(utils$1.isUndefined(Vr)){if(!utils$1.isUndefined(Ur))return Ar(void 0,Ur)}else return Ar(void 0,Vr)}function Fr(Ur,Vr,Nr){if(Nr in Tr)return Ar(Ur,Vr);if(Nr in _r)return Ar(void 0,Ur)}const zr={url:Lr,method:Lr,data:Lr,baseURL:Mr,transformRequest:Mr,transformResponse:Mr,paramsSerializer:Mr,timeout:Mr,timeoutMessage:Mr,withCredentials:Mr,adapter:Mr,responseType:Mr,xsrfCookieName:Mr,xsrfHeaderName:Mr,onUploadProgress:Mr,onDownloadProgress:Mr,decompress:Mr,maxContentLength:Mr,maxBodyLength:Mr,beforeRedirect:Mr,transport:Mr,httpAgent:Mr,httpsAgent:Mr,cancelToken:Mr,socketPath:Mr,responseEncoding:Mr,validateStatus:Fr,headers:(Ur,Vr)=>Pr(headersToObject(Ur),headersToObject(Vr),!0)};return utils$1.forEach(Object.keys(Object.assign({},_r,Tr)),function(Vr){const Nr=zr[Vr]||Pr,Dr=Nr(_r[Vr],Tr[Vr],Vr);utils$1.isUndefined(Dr)&&Nr!==Fr||(Rr[Vr]=Dr)}),Rr}const VERSION="1.5.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((_r,Tr)=>{validators$1[_r]=function(Ar){return typeof Ar===_r||"a"+(Tr<1?"n ":" ")+_r}});const deprecatedWarnings={};validators$1.transitional=function(Tr,Rr,Ar){function Pr(Lr,Mr){return"[Axios v"+VERSION+"] Transitional option '"+Lr+"'"+Mr+(Ar?". "+Ar:"")}return(Lr,Mr,Fr)=>{if(Tr===!1)throw new AxiosError(Pr(Mr," has been removed"+(Rr?" in "+Rr:"")),AxiosError.ERR_DEPRECATED);return Rr&&!deprecatedWarnings[Mr]&&(deprecatedWarnings[Mr]=!0,console.warn(Pr(Mr," has been deprecated since v"+Rr+" and will be removed in the near future"))),Tr?Tr(Lr,Mr,Fr):!0}};function assertOptions(_r,Tr,Rr){if(typeof _r!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const Ar=Object.keys(_r);let Pr=Ar.length;for(;Pr-- >0;){const Lr=Ar[Pr],Mr=Tr[Lr];if(Mr){const Fr=_r[Lr],zr=Fr===void 0||Mr(Fr,Lr,_r);if(zr!==!0)throw new AxiosError("option "+Lr+" must be "+zr,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(Rr!==!0)throw new AxiosError("Unknown option "+Lr,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(Tr){this.defaults=Tr,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(Tr,Rr){typeof Tr=="string"?(Rr=Rr||{},Rr.url=Tr):Rr=Tr||{},Rr=mergeConfig$1(this.defaults,Rr);const{transitional:Ar,paramsSerializer:Pr,headers:Lr}=Rr;Ar!==void 0&&validator.assertOptions(Ar,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),Pr!=null&&(utils$1.isFunction(Pr)?Rr.paramsSerializer={serialize:Pr}:validator.assertOptions(Pr,{encode:validators.function,serialize:validators.function},!0)),Rr.method=(Rr.method||this.defaults.method||"get").toLowerCase();let Mr=Lr&&utils$1.merge(Lr.common,Lr[Rr.method]);Lr&&utils$1.forEach(["delete","get","head","post","put","patch","common"],Gr=>{delete Lr[Gr]}),Rr.headers=AxiosHeaders$1.concat(Mr,Lr);const Fr=[];let zr=!0;this.interceptors.request.forEach(function(Wr){typeof Wr.runWhen=="function"&&Wr.runWhen(Rr)===!1||(zr=zr&&Wr.synchronous,Fr.unshift(Wr.fulfilled,Wr.rejected))});const Ur=[];this.interceptors.response.forEach(function(Wr){Ur.push(Wr.fulfilled,Wr.rejected)});let Vr,Nr=0,Dr;if(!zr){const Gr=[dispatchRequest.bind(this),void 0];for(Gr.unshift.apply(Gr,Fr),Gr.push.apply(Gr,Ur),Dr=Gr.length,Vr=Promise.resolve(Rr);Nr<Dr;)Vr=Vr.then(Gr[Nr++],Gr[Nr++]);return Vr}Dr=Fr.length;let jr=Rr;for(Nr=0;Nr<Dr;){const Gr=Fr[Nr++],Wr=Fr[Nr++];try{jr=Gr(jr)}catch(qr){Wr.call(this,qr);break}}try{Vr=dispatchRequest.call(this,jr)}catch(Gr){return Promise.reject(Gr)}for(Nr=0,Dr=Ur.length;Nr<Dr;)Vr=Vr.then(Ur[Nr++],Ur[Nr++]);return Vr}getUri(Tr){Tr=mergeConfig$1(this.defaults,Tr);const Rr=buildFullPath(Tr.baseURL,Tr.url);return buildURL(Rr,Tr.params,Tr.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(Tr){Axios.prototype[Tr]=function(Rr,Ar){return this.request(mergeConfig$1(Ar||{},{method:Tr,url:Rr,data:(Ar||{}).data}))}});utils$1.forEach(["post","put","patch"],function(Tr){function Rr(Ar){return function(Lr,Mr,Fr){return this.request(mergeConfig$1(Fr||{},{method:Tr,headers:Ar?{"Content-Type":"multipart/form-data"}:{},url:Lr,data:Mr}))}}Axios.prototype[Tr]=Rr(),Axios.prototype[Tr+"Form"]=Rr(!0)});const Axios$1=Axios;class CancelToken{constructor(Tr){if(typeof Tr!="function")throw new TypeError("executor must be a function.");let Rr;this.promise=new Promise(function(Lr){Rr=Lr});const Ar=this;this.promise.then(Pr=>{if(!Ar._listeners)return;let Lr=Ar._listeners.length;for(;Lr-- >0;)Ar._listeners[Lr](Pr);Ar._listeners=null}),this.promise.then=Pr=>{let Lr;const Mr=new Promise(Fr=>{Ar.subscribe(Fr),Lr=Fr}).then(Pr);return Mr.cancel=function(){Ar.unsubscribe(Lr)},Mr},Tr(function(Lr,Mr,Fr){Ar.reason||(Ar.reason=new CanceledError(Lr,Mr,Fr),Rr(Ar.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(Tr){if(this.reason){Tr(this.reason);return}this._listeners?this._listeners.push(Tr):this._listeners=[Tr]}unsubscribe(Tr){if(!this._listeners)return;const Rr=this._listeners.indexOf(Tr);Rr!==-1&&this._listeners.splice(Rr,1)}static source(){let Tr;return{token:new CancelToken(function(Pr){Tr=Pr}),cancel:Tr}}}const CancelToken$1=CancelToken;function spread(_r){return function(Rr){return _r.apply(null,Rr)}}function isAxiosError(_r){return utils$1.isObject(_r)&&_r.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([_r,Tr])=>{HttpStatusCode[Tr]=_r});const HttpStatusCode$1=HttpStatusCode;function createInstance(_r){const Tr=new Axios$1(_r),Rr=bind(Axios$1.prototype.request,Tr);return utils$1.extend(Rr,Axios$1.prototype,Tr,{allOwnKeys:!0}),utils$1.extend(Rr,Tr,null,{allOwnKeys:!0}),Rr.create=function(Pr){return createInstance(mergeConfig$1(_r,Pr))},Rr}const axios=createInstance(defaults$2);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(Tr){return Promise.all(Tr)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=_r=>formDataToJSON(utils$1.isHTMLForm(_r)?new FormData(_r):_r);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;var cjs$5={exports:{}},reactSpring_web_production_min={exports:{}},cjs$4={exports:{}},reactSpring_core_production_min={exports:{}},cjs$3={exports:{}},Y$3=Object.defineProperty,ut$1=Object.getOwnPropertyDescriptor,lt$1=Object.getOwnPropertyNames,ct$1=Object.prototype.hasOwnProperty,ke$1=(_r,Tr)=>{for(var Rr in Tr)Y$3(_r,Rr,{get:Tr[Rr],enumerable:!0})},dt$1=(_r,Tr,Rr,Ar)=>{if(Tr&&typeof Tr=="object"||typeof Tr=="function")for(let Pr of lt$1(Tr))!ct$1.call(_r,Pr)&&Pr!==Rr&&Y$3(_r,Pr,{get:()=>Tr[Pr],enumerable:!(Ar=ut$1(Tr,Pr))||Ar.enumerable});return _r},pt$1=_r=>dt$1(Y$3({},"__esModule",{value:!0}),_r),Jt$1={};ke$1(Jt$1,{FluidValue:()=>ge$1,Globals:()=>x$3,addFluidObserver:()=>Mt$1,callFluidObserver:()=>Ke,callFluidObservers:()=>At$1,clamp:()=>ue,colorToRgba:()=>G$3,colors:()=>Et$1,createInterpolator:()=>H$2,createStringInterpolator:()=>Vt$1,defineHidden:()=>bt$1,deprecateDirectCall:()=>Ut$1,deprecateInterpolate:()=>Pt$1,each:()=>ze$1,eachProp:()=>ht$1,easings:()=>kt$1,flush:()=>Le$1,flushCalls:()=>gt$1,frameLoop:()=>Pe$1,getFluidObservers:()=>Rt$1,getFluidValue:()=>ve$1,hasFluidValue:()=>St$1,hex3:()=>me,hex4:()=>be$1,hex6:()=>xe$1,hex8:()=>he$1,hsl:()=>de,hsla:()=>pe$1,is:()=>l$1,isAnimatedString:()=>$t$1,isEqual:()=>xt$1,isSSR:()=>h$2,noop:()=>ae$1,onResize:()=>Te$1,onScroll:()=>jt$1,once:()=>Fe$1,prefix:()=>W$3,raf:()=>f$2,removeFluidObserver:()=>Ct$1,rgb:()=>le$1,rgba:()=>ce$1,setFluidGetter:()=>_e,toArray:()=>yt$1,useConstant:()=>Dt$1,useForceUpdate:()=>Wt$1,useIsomorphicLayoutEffect:()=>C$1,useMemoOne:()=>Kt$1,useOnce:()=>Nt$1,usePrev:()=>Xt$1,useReducedMotion:()=>Yt$1});var reactSpring_shared_production_min=pt$1(Jt$1),x$3={};ke$1(x$3,{assign:()=>fe$1,colors:()=>d$3,createStringInterpolator:()=>V$3,skipAnimation:()=>qe,to:()=>Ve$1,willAdvance:()=>q$3});var ee$2=k$3(),f$2=_r=>I$2(_r,ee$2),te$2=k$3();f$2.write=_r=>I$2(_r,te$2);var L$1=k$3();f$2.onStart=_r=>I$2(_r,L$1);var re$2=k$3();f$2.onFrame=_r=>I$2(_r,re$2);var ne$1=k$3();f$2.onFinish=_r=>I$2(_r,ne$1);var w$1=[];f$2.setTimeout=(_r,Tr)=>{let Rr=f$2.now()+Tr,Ar=()=>{let Lr=w$1.findIndex(Mr=>Mr.cancel==Ar);~Lr&&w$1.splice(Lr,1),b$2-=~Lr?1:0},Pr={time:Rr,handler:_r,cancel:Ar};return w$1.splice(Se$1(Rr),0,Pr),b$2+=1,Re$1(),Pr};var Se$1=_r=>~(~w$1.findIndex(Tr=>Tr.time>_r)||~w$1.length);f$2.cancel=_r=>{L$1.delete(_r),re$2.delete(_r),ne$1.delete(_r),ee$2.delete(_r),te$2.delete(_r)};f$2.sync=_r=>{J$2=!0,f$2.batchedUpdates(_r),J$2=!1};f$2.throttle=_r=>{let Tr;function Rr(){try{_r(...Tr)}finally{Tr=null}}function Ar(...Pr){Tr=Pr,f$2.onStart(Rr)}return Ar.handler=_r,Ar.cancel=()=>{L$1.delete(Rr),Tr=null},Ar};var oe$1=typeof window<"u"?window.requestAnimationFrame:()=>{};f$2.use=_r=>oe$1=_r;f$2.now=typeof performance<"u"?()=>performance.now():Date.now;f$2.batchedUpdates=_r=>_r();f$2.catch=console.error;f$2.frameLoop="always";f$2.advance=()=>{f$2.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Me$1()};var m$2=-1,b$2=0,J$2=!1;function I$2(_r,Tr){J$2?(Tr.delete(_r),_r(0)):(Tr.add(_r),Re$1())}function Re$1(){m$2<0&&(m$2=0,f$2.frameLoop!=="demand"&&oe$1(Ae$1))}function mt$1(){m$2=-1}function Ae$1(){~m$2&&(oe$1(Ae$1),f$2.batchedUpdates(Me$1))}function Me$1(){let _r=m$2;m$2=f$2.now();let Tr=Se$1(m$2);if(Tr&&(Ce$1(w$1.splice(0,Tr),Rr=>Rr.handler()),b$2-=Tr),!b$2){mt$1();return}L$1.flush(),ee$2.flush(_r?Math.min(64,m$2-_r):16.667),re$2.flush(),te$2.flush(),ne$1.flush()}function k$3(){let _r=new Set,Tr=_r;return{add(Rr){b$2+=Tr==_r&&!_r.has(Rr)?1:0,_r.add(Rr)},delete(Rr){return b$2-=Tr==_r&&_r.has(Rr)?1:0,_r.delete(Rr)},flush(Rr){Tr.size&&(_r=new Set,b$2-=Tr.size,Ce$1(Tr,Ar=>Ar(Rr)&&_r.add(Ar)),b$2+=_r.size,Tr=_r)}}}function Ce$1(_r,Tr){_r.forEach(Rr=>{try{Tr(Rr)}catch(Ar){f$2.catch(Ar)}})}function ae$1(){}var bt$1=(_r,Tr,Rr)=>Object.defineProperty(_r,Tr,{value:Rr,writable:!0,configurable:!0}),l$1={arr:Array.isArray,obj:_r=>!!_r&&_r.constructor.name==="Object",fun:_r=>typeof _r=="function",str:_r=>typeof _r=="string",num:_r=>typeof _r=="number",und:_r=>_r===void 0};function xt$1(_r,Tr){if(l$1.arr(_r)){if(!l$1.arr(Tr)||_r.length!==Tr.length)return!1;for(let Rr=0;Rr<_r.length;Rr++)if(_r[Rr]!==Tr[Rr])return!1;return!0}return _r===Tr}var ze$1=(_r,Tr)=>_r.forEach(Tr);function ht$1(_r,Tr,Rr){if(l$1.arr(_r)){for(let Ar=0;Ar<_r.length;Ar++)Tr.call(Rr,_r[Ar],`${Ar}`);return}for(let Ar in _r)_r.hasOwnProperty(Ar)&&Tr.call(Rr,_r[Ar],Ar)}var yt$1=_r=>l$1.und(_r)?[]:l$1.arr(_r)?_r:[_r];function Le$1(_r,Tr){if(_r.size){let Rr=Array.from(_r);_r.clear(),ze$1(Rr,Tr)}}var gt$1=(_r,...Tr)=>Le$1(_r,Rr=>Rr(...Tr)),h$2=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),V$3,Ve$1,d$3=null,qe=!1,q$3=ae$1,fe$1=_r=>{_r.to&&(Ve$1=_r.to),_r.now&&(f$2.now=_r.now),_r.colors!==void 0&&(d$3=_r.colors),_r.skipAnimation!=null&&(qe=_r.skipAnimation),_r.createStringInterpolator&&(V$3=_r.createStringInterpolator),_r.requestAnimationFrame&&f$2.use(_r.requestAnimationFrame),_r.batchedUpdates&&(f$2.batchedUpdates=_r.batchedUpdates),_r.willAdvance&&(q$3=_r.willAdvance),_r.frameLoop&&(f$2.frameLoop=_r.frameLoop)},S$3=new Set,c$2=[],ie$1=[],P$3=0,Pe$1={get idle(){return!S$3.size&&!c$2.length},start(_r){P$3>_r.priority?(S$3.add(_r),f$2.onStart(vt$1)):(Qe$1(_r),f$2(se$1))},advance:se$1,sort(_r){if(P$3)f$2.onFrame(()=>Pe$1.sort(_r));else{let Tr=c$2.indexOf(_r);~Tr&&(c$2.splice(Tr,1),Ue(_r))}},clear(){c$2=[],S$3.clear()}};function vt$1(){S$3.forEach(Qe$1),S$3.clear(),f$2(se$1)}function Qe$1(_r){c$2.includes(_r)||Ue(_r)}function Ue(_r){c$2.splice(wt$1(c$2,Tr=>Tr.priority>_r.priority),0,_r)}function se$1(_r){let Tr=ie$1;for(let Rr=0;Rr<c$2.length;Rr++){let Ar=c$2[Rr];P$3=Ar.priority,Ar.idle||(q$3(Ar),Ar.advance(_r),Ar.idle||Tr.push(Ar))}return P$3=0,ie$1=c$2,ie$1.length=0,c$2=Tr,c$2.length>0}function wt$1(_r,Tr){let Rr=_r.findIndex(Tr);return Rr<0?_r.length:Rr}var ue=(_r,Tr,Rr)=>Math.min(Math.max(Rr,_r),Tr),Et$1={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},p$2="[-+]?\\d*\\.?\\d+",Q$3=p$2+"%";function U$3(..._r){return"\\(\\s*("+_r.join(")\\s*,\\s*(")+")\\s*\\)"}var le$1=new RegExp("rgb"+U$3(p$2,p$2,p$2)),ce$1=new RegExp("rgba"+U$3(p$2,p$2,p$2,p$2)),de=new RegExp("hsl"+U$3(p$2,Q$3,Q$3)),pe$1=new RegExp("hsla"+U$3(p$2,Q$3,Q$3,p$2)),me=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,be$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,xe$1=/^#([0-9a-fA-F]{6})$/,he$1=/^#([0-9a-fA-F]{8})$/;function Be$1(_r){let Tr;return typeof _r=="number"?_r>>>0===_r&&_r>=0&&_r<=4294967295?_r:null:(Tr=xe$1.exec(_r))?parseInt(Tr[1]+"ff",16)>>>0:d$3&&d$3[_r]!==void 0?d$3[_r]:(Tr=le$1.exec(_r))?(E$2(Tr[1])<<24|E$2(Tr[2])<<16|E$2(Tr[3])<<8|255)>>>0:(Tr=ce$1.exec(_r))?(E$2(Tr[1])<<24|E$2(Tr[2])<<16|E$2(Tr[3])<<8|He$1(Tr[4]))>>>0:(Tr=me.exec(_r))?parseInt(Tr[1]+Tr[1]+Tr[2]+Tr[2]+Tr[3]+Tr[3]+"ff",16)>>>0:(Tr=he$1.exec(_r))?parseInt(Tr[1],16)>>>0:(Tr=be$1.exec(_r))?parseInt(Tr[1]+Tr[1]+Tr[2]+Tr[2]+Tr[3]+Tr[3]+Tr[4]+Tr[4],16)>>>0:(Tr=de.exec(_r))?($e$1(Ge(Tr[1]),$$1(Tr[2]),$$1(Tr[3]))|255)>>>0:(Tr=pe$1.exec(_r))?($e$1(Ge(Tr[1]),$$1(Tr[2]),$$1(Tr[3]))|He$1(Tr[4]))>>>0:null}function ye$1(_r,Tr,Rr){return Rr<0&&(Rr+=1),Rr>1&&(Rr-=1),Rr<1/6?_r+(Tr-_r)*6*Rr:Rr<1/2?Tr:Rr<2/3?_r+(Tr-_r)*(2/3-Rr)*6:_r}function $e$1(_r,Tr,Rr){let Ar=Rr<.5?Rr*(1+Tr):Rr+Tr-Rr*Tr,Pr=2*Rr-Ar,Lr=ye$1(Pr,Ar,_r+1/3),Mr=ye$1(Pr,Ar,_r),Fr=ye$1(Pr,Ar,_r-1/3);return Math.round(Lr*255)<<24|Math.round(Mr*255)<<16|Math.round(Fr*255)<<8}function E$2(_r){let Tr=parseInt(_r,10);return Tr<0?0:Tr>255?255:Tr}function Ge(_r){return(parseFloat(_r)%360+360)%360/360}function He$1(_r){let Tr=parseFloat(_r);return Tr<0?0:Tr>1?255:Math.round(Tr*255)}function $$1(_r){let Tr=parseFloat(_r);return Tr<0?0:Tr>100?1:Tr/100}function G$3(_r){let Tr=Be$1(_r);if(Tr===null)return _r;Tr=Tr||0;let Rr=(Tr&4278190080)>>>24,Ar=(Tr&16711680)>>>16,Pr=(Tr&65280)>>>8,Lr=(Tr&255)/255;return`rgba(${Rr}, ${Ar}, ${Pr}, ${Lr})`}var H$2=(_r,Tr,Rr)=>{if(l$1.fun(_r))return _r;if(l$1.arr(_r))return H$2({range:_r,output:Tr,extrapolate:Rr});if(l$1.str(_r.output[0]))return V$3(_r);let Ar=_r,Pr=Ar.output,Lr=Ar.range||[0,1],Mr=Ar.extrapolateLeft||Ar.extrapolate||"extend",Fr=Ar.extrapolateRight||Ar.extrapolate||"extend",zr=Ar.easing||(Ur=>Ur);return Ur=>{let Vr=Tt$1(Ur,Lr);return Ft$1(Ur,Lr[Vr],Lr[Vr+1],Pr[Vr],Pr[Vr+1],zr,Mr,Fr,Ar.map)}};function Ft$1(_r,Tr,Rr,Ar,Pr,Lr,Mr,Fr,zr){let Ur=zr?zr(_r):_r;if(Ur<Tr){if(Mr==="identity")return Ur;Mr==="clamp"&&(Ur=Tr)}if(Ur>Rr){if(Fr==="identity")return Ur;Fr==="clamp"&&(Ur=Rr)}return Ar===Pr?Ar:Tr===Rr?_r<=Tr?Ar:Pr:(Tr===-1/0?Ur=-Ur:Rr===1/0?Ur=Ur-Tr:Ur=(Ur-Tr)/(Rr-Tr),Ur=Lr(Ur),Ar===-1/0?Ur=-Ur:Pr===1/0?Ur=Ur+Ar:Ur=Ur*(Pr-Ar)+Ar,Ur)}function Tt$1(_r,Tr){for(var Rr=1;Rr<Tr.length-1&&!(Tr[Rr]>=_r);++Rr);return Rr-1}var It$1=(_r,Tr="end")=>Rr=>{Rr=Tr==="end"?Math.min(Rr,.999):Math.max(Rr,.001);let Ar=Rr*_r,Pr=Tr==="end"?Math.floor(Ar):Math.ceil(Ar);return ue(0,1,Pr/_r)},D$2=1.70158,B$2=D$2*1.525,je=D$2+1,De=2*Math.PI/3,We=2*Math.PI/4.5,j$3=_r=>_r<1/2.75?7.5625*_r*_r:_r<2/2.75?7.5625*(_r-=1.5/2.75)*_r+.75:_r<2.5/2.75?7.5625*(_r-=2.25/2.75)*_r+.9375:7.5625*(_r-=2.625/2.75)*_r+.984375,kt$1={linear:_r=>_r,easeInQuad:_r=>_r*_r,easeOutQuad:_r=>1-(1-_r)*(1-_r),easeInOutQuad:_r=>_r<.5?2*_r*_r:1-Math.pow(-2*_r+2,2)/2,easeInCubic:_r=>_r*_r*_r,easeOutCubic:_r=>1-Math.pow(1-_r,3),easeInOutCubic:_r=>_r<.5?4*_r*_r*_r:1-Math.pow(-2*_r+2,3)/2,easeInQuart:_r=>_r*_r*_r*_r,easeOutQuart:_r=>1-Math.pow(1-_r,4),easeInOutQuart:_r=>_r<.5?8*_r*_r*_r*_r:1-Math.pow(-2*_r+2,4)/2,easeInQuint:_r=>_r*_r*_r*_r*_r,easeOutQuint:_r=>1-Math.pow(1-_r,5),easeInOutQuint:_r=>_r<.5?16*_r*_r*_r*_r*_r:1-Math.pow(-2*_r+2,5)/2,easeInSine:_r=>1-Math.cos(_r*Math.PI/2),easeOutSine:_r=>Math.sin(_r*Math.PI/2),easeInOutSine:_r=>-(Math.cos(Math.PI*_r)-1)/2,easeInExpo:_r=>_r===0?0:Math.pow(2,10*_r-10),easeOutExpo:_r=>_r===1?1:1-Math.pow(2,-10*_r),easeInOutExpo:_r=>_r===0?0:_r===1?1:_r<.5?Math.pow(2,20*_r-10)/2:(2-Math.pow(2,-20*_r+10))/2,easeInCirc:_r=>1-Math.sqrt(1-Math.pow(_r,2)),easeOutCirc:_r=>Math.sqrt(1-Math.pow(_r-1,2)),easeInOutCirc:_r=>_r<.5?(1-Math.sqrt(1-Math.pow(2*_r,2)))/2:(Math.sqrt(1-Math.pow(-2*_r+2,2))+1)/2,easeInBack:_r=>je*_r*_r*_r-D$2*_r*_r,easeOutBack:_r=>1+je*Math.pow(_r-1,3)+D$2*Math.pow(_r-1,2),easeInOutBack:_r=>_r<.5?Math.pow(2*_r,2)*((B$2+1)*2*_r-B$2)/2:(Math.pow(2*_r-2,2)*((B$2+1)*(_r*2-2)+B$2)+2)/2,easeInElastic:_r=>_r===0?0:_r===1?1:-Math.pow(2,10*_r-10)*Math.sin((_r*10-10.75)*De),easeOutElastic:_r=>_r===0?0:_r===1?1:Math.pow(2,-10*_r)*Math.sin((_r*10-.75)*De)+1,easeInOutElastic:_r=>_r===0?0:_r===1?1:_r<.5?-(Math.pow(2,20*_r-10)*Math.sin((20*_r-11.125)*We))/2:Math.pow(2,-20*_r+10)*Math.sin((20*_r-11.125)*We)/2+1,easeInBounce:_r=>1-j$3(1-_r),easeOutBounce:j$3,easeInOutBounce:_r=>_r<.5?(1-j$3(1-2*_r))/2:(1+j$3(2*_r-1))/2,steps:It$1},O$2=Symbol.for("FluidValue.get"),y$2=Symbol.for("FluidValue.observers"),St$1=_r=>!!(_r&&_r[O$2]),ve$1=_r=>_r&&_r[O$2]?_r[O$2]():_r,Rt$1=_r=>_r[y$2]||null;function Ke(_r,Tr){_r.eventObserved?_r.eventObserved(Tr):_r(Tr)}function At$1(_r,Tr){let Rr=_r[y$2];Rr&&Rr.forEach(Ar=>{Ke(Ar,Tr)})}var ge$1=class{constructor(Tr){if(!Tr&&!(Tr=this.get))throw Error("Unknown getter");_e(this,Tr)}},_e=(_r,Tr)=>Ne(_r,O$2,Tr);function Mt$1(_r,Tr){if(_r[O$2]){let Rr=_r[y$2];Rr||Ne(_r,y$2,Rr=new Set),Rr.has(Tr)||(Rr.add(Tr),_r.observerAdded&&_r.observerAdded(Rr.size,Tr))}return Tr}function Ct$1(_r,Tr){let Rr=_r[y$2];if(Rr&&Rr.has(Tr)){let Ar=Rr.size-1;Ar?Rr.delete(Tr):_r[y$2]=null,_r.observerRemoved&&_r.observerRemoved(Ar,Tr)}}var Ne=(_r,Tr,Rr)=>Object.defineProperty(_r,Tr,{value:Rr,writable:!0,configurable:!0}),R$3=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Ze=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,we$1=new RegExp(`(${R$3.source})(%|[a-z]+)`,"i"),Xe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,g$2=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Ee$1=_r=>{let[Tr,Rr]=zt$1(_r);if(!Tr||h$2())return _r;let Ar=window.getComputedStyle(document.documentElement).getPropertyValue(Tr);return Ar?Ar.trim():Rr&&Rr.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(Rr)||_r:Rr&&g$2.test(Rr)?Ee$1(Rr):Rr||_r},zt$1=_r=>{let Tr=g$2.exec(_r);if(!Tr)return[,];let[,Rr,Ar]=Tr;return[Rr,Ar]},Oe,Lt$1=(_r,Tr,Rr,Ar,Pr)=>`rgba(${Math.round(Tr)}, ${Math.round(Rr)}, ${Math.round(Ar)}, ${Pr})`,Vt$1=_r=>{Oe||(Oe=d$3?new RegExp(`(${Object.keys(d$3).join("|")})(?!\\w)`,"g"):/^\b$/);let Tr=_r.output.map(Pr=>ve$1(Pr).replace(g$2,Ee$1).replace(Ze,G$3).replace(Oe,G$3)),Rr=Tr.map(Pr=>Pr.match(R$3).map(Number)),Ar=Rr[0].map((Pr,Lr)=>Rr.map(Mr=>{if(!(Lr in Mr))throw Error('The arity of each "output" value must be equal');return Mr[Lr]})).map(Pr=>H$2({..._r,output:Pr}));return Pr=>{var Fr;let Lr=!we$1.test(Tr[0])&&((Fr=Tr.find(zr=>we$1.test(zr)))==null?void 0:Fr.replace(R$3,"")),Mr=0;return Tr[0].replace(R$3,()=>`${Ar[Mr++](Pr)}${Lr||""}`).replace(Xe,Lt$1)}},W$3="react-spring: ",Fe$1=_r=>{let Tr=_r,Rr=!1;if(typeof Tr!="function")throw new TypeError(`${W$3}once requires a function parameter`);return(...Ar)=>{Rr||(Tr(...Ar),Rr=!0)}},qt$1=Fe$1(console.warn);function Pt$1(){qt$1(`${W$3}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Qt$1=Fe$1(console.warn);function Ut$1(){Qt$1(`${W$3}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function $t$1(_r){return l$1.str(_r)&&(_r[0]=="#"||/\d/.test(_r)||!h$2()&&g$2.test(_r)||_r in(d$3||{}))}var F$3,K$3=new WeakMap,Gt$1=_r=>_r.forEach(({target:Tr,contentRect:Rr})=>{var Ar;return(Ar=K$3.get(Tr))==null?void 0:Ar.forEach(Pr=>Pr(Rr))});function Ye$1(_r,Tr){F$3||typeof ResizeObserver<"u"&&(F$3=new ResizeObserver(Gt$1));let Rr=K$3.get(Tr);return Rr||(Rr=new Set,K$3.set(Tr,Rr)),Rr.add(_r),F$3&&F$3.observe(Tr),()=>{let Ar=K$3.get(Tr);Ar&&(Ar.delete(_r),!Ar.size&&F$3&&F$3.unobserve(Tr))}}var _$1=new Set,A$2,Ht$1=()=>{let _r=()=>{_$1.forEach(Tr=>Tr({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",_r),()=>{window.removeEventListener("resize",_r)}},Je$1=_r=>(_$1.add(_r),A$2||(A$2=Ht$1()),()=>{_$1.delete(_r),!_$1.size&&A$2&&(A$2(),A$2=void 0)}),Te$1=(_r,{container:Tr=document.documentElement}={})=>Tr===document.documentElement?Je$1(_r):Ye$1(_r,Tr),et$1=(_r,Tr,Rr)=>Tr-_r===0?1:(Rr-_r)/(Tr-_r),Bt$1={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},N$3=class{constructor(Tr,Rr){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=Ar=>{let Pr=this.info[Ar],{length:Lr,position:Mr}=Bt$1[Ar];Pr.current=this.container[`scroll${Mr}`],Pr.scrollLength=this.container["scroll"+Lr]-this.container["client"+Lr],Pr.progress=et$1(0,Pr.scrollLength,Pr.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=Tr,this.container=Rr,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},M$3=new WeakMap,tt$1=new WeakMap,Ie$1=new WeakMap,rt$1=_r=>_r===document.documentElement?window:_r,jt$1=(_r,{container:Tr=document.documentElement}={})=>{let Rr=Ie$1.get(Tr);Rr||(Rr=new Set,Ie$1.set(Tr,Rr));let Ar=new N$3(_r,Tr);if(Rr.add(Ar),!M$3.has(Tr)){let Lr=()=>(Rr==null||Rr.forEach(Fr=>Fr.advance()),!0);M$3.set(Tr,Lr);let Mr=rt$1(Tr);window.addEventListener("resize",Lr,{passive:!0}),Tr!==document.documentElement&&tt$1.set(Tr,Te$1(Lr,{container:Tr})),Mr.addEventListener("scroll",Lr,{passive:!0})}let Pr=M$3.get(Tr);return f$2(Pr),()=>{var Fr;f$2.cancel(Pr);let Lr=Ie$1.get(Tr);if(!Lr||(Lr.delete(Ar),Lr.size))return;let Mr=M$3.get(Tr);M$3.delete(Tr),Mr&&(rt$1(Tr).removeEventListener("scroll",Mr),window.removeEventListener("resize",Mr),(Fr=tt$1.get(Tr))==null||Fr())}},nt$1=reactExports;function Dt$1(_r){let Tr=(0,nt$1.useRef)(null);return Tr.current===null&&(Tr.current=_r()),Tr.current}var ft$1=reactExports,ot$1=reactExports,Z$2=reactExports,C$1=h$2()?Z$2.useEffect:Z$2.useLayoutEffect,at$1=()=>{let _r=(0,ot$1.useRef)(!1);return C$1(()=>(_r.current=!0,()=>{_r.current=!1}),[]),_r};function Wt$1(){let _r=(0,ft$1.useState)()[1],Tr=at$1();return()=>{Tr.current&&_r(Math.random())}}var T$2=reactExports;function Kt$1(_r,Tr){let[Rr]=(0,T$2.useState)(()=>({inputs:Tr,result:_r()})),Ar=(0,T$2.useRef)(),Pr=Ar.current,Lr=Pr;return Lr?Tr&&Lr.inputs&&_t$1(Tr,Lr.inputs)||(Lr={inputs:Tr,result:_r()}):Lr=Rr,(0,T$2.useEffect)(()=>{Ar.current=Lr,Pr==Rr&&(Rr.inputs=Rr.result=void 0)},[Lr]),Lr.result}function _t$1(_r,Tr){if(_r.length!==Tr.length)return!1;for(let Rr=0;Rr<_r.length;Rr++)if(_r[Rr]!==Tr[Rr])return!1;return!0}var it$1=reactExports,Nt$1=_r=>(0,it$1.useEffect)(_r,Zt$1),Zt$1=[],X$3=reactExports;function Xt$1(_r){let Tr=(0,X$3.useRef)();return(0,X$3.useEffect)(()=>{Tr.current=_r}),Tr.current}var st$1=reactExports,Yt$1=()=>{let[_r,Tr]=(0,st$1.useState)(null);return C$1(()=>{let Rr=window.matchMedia("(prefers-reduced-motion)"),Ar=Pr=>{Tr(Pr.matches),fe$1({skipAnimation:Pr.matches})};return Ar(Rr),Rr.addEventListener("change",Ar),()=>{Rr.removeEventListener("change",Ar)}},[]),_r};cjs$3.exports=reactSpring_shared_production_min;var cjsExports$3=cjs$3.exports,cjs$2={exports:{}},D$1=Object.create,T$1=Object.defineProperty,K$2=Object.getOwnPropertyDescriptor,M$2=Object.getOwnPropertyNames,q$2=Object.getPrototypeOf,z$2=Object.prototype.hasOwnProperty,G$2=(_r,Tr)=>{for(var Rr in Tr)T$1(_r,Rr,{get:Tr[Rr],enumerable:!0})},E$1=(_r,Tr,Rr,Ar)=>{if(Tr&&typeof Tr=="object"||typeof Tr=="function")for(let Pr of M$2(Tr))!z$2.call(_r,Pr)&&Pr!==Rr&&T$1(_r,Pr,{get:()=>Tr[Pr],enumerable:!(Ar=K$2(Tr,Pr))||Ar.enumerable});return _r},J$1=(_r,Tr,Rr)=>(Rr=_r!=null?D$1(q$2(_r)):{},E$1(Tr||!_r||!_r.__esModule?T$1(Rr,"default",{value:_r,enumerable:!0}):Rr,_r)),Q$2=_r=>E$1(T$1({},"__esModule",{value:!0}),_r),re$1={};G$2(re$1,{Animated:()=>h$1,AnimatedArray:()=>g$1,AnimatedObject:()=>p$1,AnimatedString:()=>m$1,AnimatedValue:()=>d$2,createHost:()=>te$1,getAnimated:()=>v$1,getAnimatedType:()=>Y$2,getPayload:()=>k$2,isAnimated:()=>S$2,setAnimated:()=>N$2});var reactSpring_animated_production_min=Q$2(re$1),O$1=cjsExports$3,b$1=Symbol.for("Animated:node"),S$2=_r=>!!_r&&_r[b$1]===_r,v$1=_r=>_r&&_r[b$1],N$2=(_r,Tr)=>(0,O$1.defineHidden)(_r,b$1,Tr),k$2=_r=>_r&&_r[b$1]&&_r[b$1].getPayload(),h$1=class{constructor(){N$2(this,this)}getPayload(){return this.payload||[]}},P$2=cjsExports$3,d$2=class extends h$1{constructor(Tr){super(),this._value=Tr,this.done=!0,this.durationProgress=0,P$2.is.num(this._value)&&(this.lastPosition=this._value)}static create(Tr){return new d$2(Tr)}getPayload(){return[this]}getValue(){return this._value}setValue(Tr,Rr){return P$2.is.num(Tr)&&(this.lastPosition=Tr,Rr&&(Tr=Math.round(Tr/Rr)*Rr,this.done&&(this.lastPosition=Tr))),this._value===Tr?!1:(this._value=Tr,!0)}reset(){let{done:Tr}=this;this.done=!1,P$2.is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,Tr&&(this.lastVelocity=null),this.v0=null)}},x$2=cjsExports$3,m$1=class extends d$2{constructor(Tr){super(0),this._string=null,this._toString=(0,x$2.createInterpolator)({output:[Tr,Tr]})}static create(Tr){return new m$1(Tr)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(Tr){if(x$2.is.str(Tr)){if(Tr==this._string)return!1;this._string=Tr,this._value=1}else if(super.setValue(Tr))this._string=null;else return!1;return!0}reset(Tr){Tr&&(this._toString=(0,x$2.createInterpolator)({output:[this.getValue(),Tr]})),this._value=0,super.reset()}},U$2=cjsExports$3,u$2=cjsExports$3,V$2={dependencies:null},p$1=class extends h$1{constructor(Tr){super(),this.source=Tr,this.setValue(Tr)}getValue(Tr){let Rr={};return(0,u$2.eachProp)(this.source,(Ar,Pr)=>{S$2(Ar)?Rr[Pr]=Ar.getValue(Tr):(0,u$2.hasFluidValue)(Ar)?Rr[Pr]=(0,u$2.getFluidValue)(Ar):Tr||(Rr[Pr]=Ar)}),Rr}setValue(Tr){this.source=Tr,this.payload=this._makePayload(Tr)}reset(){this.payload&&(0,u$2.each)(this.payload,Tr=>Tr.reset())}_makePayload(Tr){if(Tr){let Rr=new Set;return(0,u$2.eachProp)(Tr,this._addToPayload,Rr),Array.from(Rr)}}_addToPayload(Tr){V$2.dependencies&&(0,u$2.hasFluidValue)(Tr)&&V$2.dependencies.add(Tr);let Rr=k$2(Tr);Rr&&(0,u$2.each)(Rr,Ar=>this.add(Ar))}},g$1=class extends p$1{constructor(Tr){super(Tr)}static create(Tr){return new g$1(Tr)}getValue(){return this.source.map(Tr=>Tr.getValue())}setValue(Tr){let Rr=this.getPayload();return Tr.length==Rr.length?Rr.map((Ar,Pr)=>Ar.setValue(Tr[Pr])).some(Boolean):(super.setValue(Tr.map(X$2)),!0)}};function X$2(_r){return((0,U$2.isAnimatedString)(_r)?m$1:d$2).create(_r)}var _=cjsExports$3;function Y$2(_r){let Tr=v$1(_r);return Tr?Tr.constructor:_.is.arr(_r)?g$1:(0,_.isAnimatedString)(_r)?m$1:d$2}var f$1=cjsExports$3,j$2=J$1(reactExports),c$1=reactExports,o$2=cjsExports$3,R$2=(_r,Tr)=>{let Rr=!o$2.is.fun(_r)||_r.prototype&&_r.prototype.isReactComponent;return(0,c$1.forwardRef)((Ar,Pr)=>{let Lr=(0,c$1.useRef)(null),Mr=Rr&&(0,c$1.useCallback)(Gr=>{Lr.current=ee$1(Pr,Gr)},[Pr]),[Fr,zr]=Z$1(Ar,Tr),Ur=(0,o$2.useForceUpdate)(),Vr=()=>{let Gr=Lr.current;Rr&&!Gr||(Gr?Tr.applyAnimatedValues(Gr,Fr.getValue(!0)):!1)===!1&&Ur()},Nr=new F$2(Vr,zr),Dr=(0,c$1.useRef)();(0,o$2.useIsomorphicLayoutEffect)(()=>(Dr.current=Nr,(0,o$2.each)(zr,Gr=>(0,o$2.addFluidObserver)(Gr,Nr)),()=>{Dr.current&&((0,o$2.each)(Dr.current.deps,Gr=>(0,o$2.removeFluidObserver)(Gr,Dr.current)),o$2.raf.cancel(Dr.current.update))})),(0,c$1.useEffect)(Vr,[]),(0,o$2.useOnce)(()=>()=>{let Gr=Dr.current;(0,o$2.each)(Gr.deps,Wr=>(0,o$2.removeFluidObserver)(Wr,Gr))});let jr=Tr.getComponentProps(Fr.getValue());return j$2.createElement(_r,{...jr,ref:Mr})})},F$2=class{constructor(Tr,Rr){this.update=Tr,this.deps=Rr}eventObserved(Tr){Tr.type=="change"&&o$2.raf.write(this.update)}};function Z$1(_r,Tr){let Rr=new Set;return V$2.dependencies=Rr,_r.style&&(_r={..._r,style:Tr.createAnimatedStyle(_r.style)}),_r=new p$1(_r),V$2.dependencies=null,[_r,Rr]}function ee$1(_r,Tr){return _r&&(o$2.is.fun(_r)?_r(Tr):_r.current=Tr),Tr}var I$1=Symbol.for("AnimatedComponent"),te$1=(_r,{applyAnimatedValues:Tr=()=>!1,createAnimatedStyle:Rr=Pr=>new p$1(Pr),getComponentProps:Ar=Pr=>Pr}={})=>{let Pr={applyAnimatedValues:Tr,createAnimatedStyle:Rr,getComponentProps:Ar},Lr=Mr=>{let Fr=W$2(Mr)||"Anonymous";return f$1.is.str(Mr)?Mr=Lr[Mr]||(Lr[Mr]=R$2(Mr,Pr)):Mr=Mr[I$1]||(Mr[I$1]=R$2(Mr,Pr)),Mr.displayName=`Animated(${Fr})`,Mr};return(0,f$1.eachProp)(_r,(Mr,Fr)=>{f$1.is.arr(_r)&&(Fr=W$2(Mr)),Lr[Fr]=Lr(Mr)}),{animated:Lr}},W$2=_r=>f$1.is.str(_r)?_r:_r&&f$1.is.str(_r.displayName)?_r.displayName:f$1.is.fun(_r)&&_r.name||null;cjs$2.exports=reactSpring_animated_production_min;var cjsExports$2=cjs$2.exports,cjs$1={exports:{}},reactSpring_types_production_min,hasRequiredReactSpring_types_production_min;function requireReactSpring_types_production_min(){if(hasRequiredReactSpring_types_production_min)return reactSpring_types_production_min;hasRequiredReactSpring_types_production_min=1;var _r=Object.defineProperty,Tr=Object.getOwnPropertyDescriptor,Rr=Object.getOwnPropertyNames,Ar=Object.prototype.hasOwnProperty,Pr=(Ur,Vr)=>{for(var Nr in Vr)_r(Ur,Nr,{get:Vr[Nr],enumerable:!0})},Lr=(Ur,Vr,Nr,Dr)=>{if(Vr&&typeof Vr=="object"||typeof Vr=="function")for(let jr of Rr(Vr))!Ar.call(Ur,jr)&&jr!==Nr&&_r(Ur,jr,{get:()=>Vr[jr],enumerable:!(Dr=Tr(Vr,jr))||Dr.enumerable});return Ur},Mr=Ur=>Lr(_r({},"__esModule",{value:!0}),Ur),Fr={};Pr(Fr,{Any:()=>zr}),reactSpring_types_production_min=Mr(Fr);var zr=class{};return reactSpring_types_production_min}var hasRequiredCjs;function requireCjs(){return hasRequiredCjs||(hasRequiredCjs=1,cjs$1.exports=requireReactSpring_types_production_min()),cjs$1.exports}(function(_r){var Tr=Object.create,Rr=Object.defineProperty,Ar=Object.getOwnPropertyDescriptor,Pr=Object.getOwnPropertyNames,Lr=Object.getPrototypeOf,Mr=Object.prototype.hasOwnProperty,Fr=(ss,Es)=>{for(var $s in Es)Rr(ss,$s,{get:Es[$s],enumerable:!0})},zr=(ss,Es,$s,ws)=>{if(Es&&typeof Es=="object"||typeof Es=="function")for(let Cs of Pr(Es))!Mr.call(ss,Cs)&&Cs!==$s&&Rr(ss,Cs,{get:()=>Es[Cs],enumerable:!(ws=Ar(Es,Cs))||ws.enumerable});return ss},Ur=(ss,Es,$s)=>(zr(ss,Es,"default"),$s&&zr($s,Es,"default")),Vr=(ss,Es,$s)=>($s=ss!=null?Tr(Lr(ss)):{},zr(Es||!ss||!ss.__esModule?Rr($s,"default",{value:ss,enumerable:!0}):$s,ss)),Nr=ss=>zr(Rr({},"__esModule",{value:!0}),ss),Dr={};Fr(Dr,{BailSignal:()=>no,Controller:()=>Go,FrameValue:()=>To,Globals:()=>os.Globals,Interpolation:()=>As,Spring:()=>gp,SpringContext:()=>Ru,SpringRef:()=>Dl,SpringValue:()=>Bs,Trail:()=>yp,Transition:()=>Ju,config:()=>Us,createInterpolator:()=>_s.createInterpolator,easings:()=>_s.easings,inferTo:()=>rs,interpolate:()=>bs,to:()=>vo,update:()=>cs,useChain:()=>Ts,useInView:()=>tu,useIsomorphicLayoutEffect:()=>_s.useIsomorphicLayoutEffect,useReducedMotion:()=>_s.useReducedMotion,useResize:()=>pp,useScroll:()=>Bl,useSpring:()=>Ou,useSpringRef:()=>cp,useSpringValue:()=>Rp,useSprings:()=>Hu,useTrail:()=>fp,useTransition:()=>hp}),_r.exports=Nr(Dr);var jr=cjsExports$3,Gr=cjsExports$3;function Wr(ss,...Es){return Gr.is.fun(ss)?ss(...Es):ss}var qr=(ss,Es)=>ss===!0||!!(Es&&ss&&(Gr.is.fun(ss)?ss(Es):(0,Gr.toArray)(ss).includes(Es))),Kr=(ss,Es)=>Gr.is.obj(ss)?Es&&ss[Es]:ss,Xr=(ss,Es)=>ss.default===!0?ss[Es]:ss.default?ss.default[Es]:void 0,Zr=ss=>ss,Jr=(ss,Es=Zr)=>{let $s=_i;ss.default&&ss.default!==!0&&(ss=ss.default,$s=Object.keys(ss));let ws={};for(let Cs of $s){let Ms=Es(ss[Cs],Cs);Gr.is.und(Ms)||(ws[Cs]=Ms)}return ws},_i=["config","onProps","onStart","onChange","onPause","onResume","onRest"],es={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function ts(ss){let Es={},$s=0;if((0,Gr.eachProp)(ss,(ws,Cs)=>{es[Cs]||(Es[Cs]=ws,$s++)}),$s)return Es}function rs(ss){let Es=ts(ss);if(Es){let $s={to:Es};return(0,Gr.eachProp)(ss,(ws,Cs)=>Cs in Es||($s[Cs]=ws)),$s}return{...ss}}function ns(ss){return ss=(0,Gr.getFluidValue)(ss),Gr.is.arr(ss)?ss.map(ns):(0,Gr.isAnimatedString)(ss)?Gr.Globals.createStringInterpolator({range:[0,1],output:[ss,ss]})(1):ss}function as(ss){for(let Es in ss)return!0;return!1}function ls(ss){return Gr.is.fun(ss)||Gr.is.arr(ss)&&Gr.is.obj(ss[0])}function us(ss,Es){var $s;($s=ss.ref)==null||$s.delete(ss),Es==null||Es.delete(ss)}function xs(ss,Es){var $s;Es&&ss.ref!==Es&&(($s=ss.ref)==null||$s.delete(ss),Es.add(ss),ss.ref=Es)}function Ts(ss,Es,$s=1e3){(0,jr.useIsomorphicLayoutEffect)(()=>{if(Es){let ws=0;(0,jr.each)(ss,(Cs,Ms)=>{let Hs=Cs.current;if(Hs.length){let lo=$s*Es[Ms];isNaN(lo)?lo=ws:ws=lo,(0,jr.each)(Hs,Io=>{(0,jr.each)(Io.queue,Oo=>{let qo=Oo.delay;Oo.delay=Mo=>lo+Wr(qo||0,Mo)})}),Cs.start()}})}else{let ws=Promise.resolve();(0,jr.each)(ss,Cs=>{let Ms=Cs.current;if(Ms.length){let Hs=Ms.map(lo=>{let Io=lo.queue;return lo.queue=[],Io});ws=ws.then(()=>((0,jr.each)(Ms,(lo,Io)=>(0,jr.each)(Hs[Io]||[],Oo=>lo.queue.push(Oo))),Promise.all(Cs.start())))}})}})}var vs=cjsExports$3,gs=reactExports,fs=cjsExports$3,ys=cjsExports$3,ks=cjsExports$2,Fs=cjsExports$3,Us={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Vs={...Us.default,mass:1,damping:1,easing:Fs.easings.linear,clamp:!1},ao=class{constructor(){this.velocity=0,Object.assign(this,Vs)}};function qs(ss,Es,$s){$s&&($s={...$s},Qs($s,Es),Es={...$s,...Es}),Qs(ss,Es),Object.assign(ss,Es);for(let Hs in Vs)ss[Hs]==null&&(ss[Hs]=Vs[Hs]);let{frequency:ws,damping:Cs}=ss,{mass:Ms}=ss;return Fs.is.und(ws)||(ws<.01&&(ws=.01),Cs<0&&(Cs=0),ss.tension=Math.pow(2*Math.PI/ws,2)*Ms,ss.friction=4*Math.PI*Cs*Ms/ws),ss}function Qs(ss,Es){if(!Fs.is.und(Es.decay))ss.duration=void 0;else{let $s=!Fs.is.und(Es.tension)||!Fs.is.und(Es.friction);($s||!Fs.is.und(Es.frequency)||!Fs.is.und(Es.damping)||!Fs.is.und(Es.mass))&&(ss.duration=void 0,ss.decay=void 0),$s&&(ss.frequency=void 0)}}var mo=[],Xs=class{constructor(){this.changed=!1,this.values=mo,this.toValues=null,this.fromValues=mo,this.config=new ao,this.immediate=!1}},so=cjsExports$3;function uo(ss,{key:Es,props:$s,defaultProps:ws,state:Cs,actions:Ms}){return new Promise((Hs,lo)=>{let Io,Oo,qo=qr($s.cancel??(ws==null?void 0:ws.cancel),Es);if(qo)Xo();else{so.is.und($s.pause)||(Cs.paused=qr($s.pause,Es));let Ko=ws==null?void 0:ws.pause;Ko!==!0&&(Ko=Cs.paused||qr(Ko,Es)),Io=Wr($s.delay||0,Es),Ko?(Cs.resumeQueue.add(Qo),Ms.pause()):(Ms.resume(),Qo())}function Mo(){Cs.resumeQueue.add(Qo),Cs.timeouts.delete(Oo),Oo.cancel(),Io=Oo.time-so.raf.now()}function Qo(){Io>0&&!so.Globals.skipAnimation?(Cs.delayed=!0,Oo=so.raf.setTimeout(Xo,Io),Cs.pauseQueue.add(Mo),Cs.timeouts.add(Oo)):Xo()}function Xo(){Cs.delayed&&(Cs.delayed=!1),Cs.pauseQueue.delete(Mo),Cs.timeouts.delete(Oo),ss<=(Cs.cancelId||0)&&(qo=!0);try{Ms.start({...$s,callId:ss,cancel:qo},Hs)}catch(Ko){lo(Ko)}}})}var bo=cjsExports$3,wo=(ss,Es)=>Es.length==1?Es[0]:Es.some($s=>$s.cancelled)?Is(ss.get()):Es.every($s=>$s.noop)?Co(ss.get()):ds(ss.get(),Es.every($s=>$s.finished)),Co=ss=>({value:ss,noop:!0,finished:!0,cancelled:!1}),ds=(ss,Es,$s=!1)=>({value:ss,finished:Es,cancelled:$s}),Is=ss=>({value:ss,cancelled:!0,finished:!1});function Gs(ss,Es,$s,ws){let{callId:Cs,parentId:Ms,onRest:Hs}=Es,{asyncTo:lo,promise:Io}=$s;return!Ms&&ss===lo&&!Es.reset?Io:$s.promise=(async()=>{$s.asyncId=Cs,$s.asyncTo=ss;let Oo=Jr(Es,(jo,zo)=>zo==="onRest"?void 0:jo),qo,Mo,Qo=new Promise((jo,zo)=>(qo=jo,Mo=zo)),Xo=jo=>{let zo=Cs<=($s.cancelId||0)&&Is(ws)||Cs!==$s.asyncId&&ds(ws,!1);if(zo)throw jo.result=zo,Mo(jo),jo},Ko=(jo,zo)=>{let Jo=new no,Ho=new Ro;return(async()=>{if(bo.Globals.skipAnimation)throw to($s),Ho.result=ds(ws,!1),Mo(Ho),Ho;Xo(Jo);let yl=bo.is.obj(jo)?{...jo}:{...zo,to:jo};yl.parentId=Cs,(0,bo.eachProp)(Oo,(Vl,Rl)=>{bo.is.und(yl[Rl])&&(yl[Rl]=Vl)});let _l=await ws.start(yl);return Xo(Jo),$s.paused&&await new Promise(Vl=>{$s.resumeQueue.add(Vl)}),_l})()},Uo;if(bo.Globals.skipAnimation)return to($s),ds(ws,!1);try{let jo;bo.is.arr(ss)?jo=(async zo=>{for(let Jo of zo)await Ko(Jo)})(ss):jo=Promise.resolve(ss(Ko,ws.stop.bind(ws))),await Promise.all([jo.then(qo),Qo]),Uo=ds(ws.get(),!0,!1)}catch(jo){if(jo instanceof no)Uo=jo.result;else if(jo instanceof Ro)Uo=jo.result;else throw jo}finally{Cs==$s.asyncId&&($s.asyncId=Ms,$s.asyncTo=Ms?lo:void 0,$s.promise=Ms?Io:void 0)}return bo.is.fun(Hs)&&bo.raf.batchedUpdates(()=>{Hs(Uo,ws,ws.item)}),Uo})()}function to(ss,Es){(0,bo.flush)(ss.timeouts,$s=>$s.cancel()),ss.pauseQueue.clear(),ss.resumeQueue.clear(),ss.asyncId=ss.asyncTo=ss.promise=void 0,Es&&(ss.cancelId=Es)}var no=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Ro=class extends Error{constructor(){super("SkipAnimationSignal")}},ro=cjsExports$3,go=cjsExports$2,No=ss=>ss instanceof To,Do=1,To=class extends ro.FluidValue{constructor(){super(...arguments),this.id=Do++,this._priority=0}get priority(){return this._priority}set priority(ss){this._priority!=ss&&(this._priority=ss,this._onPriorityChange(ss))}get(){let ss=(0,go.getAnimated)(this);return ss&&ss.getValue()}to(...ss){return ro.Globals.to(this,ss)}interpolate(...ss){return(0,ro.deprecateInterpolate)(),ro.Globals.to(this,ss)}toJSON(){return this.get()}observerAdded(ss){ss==1&&this._attach()}observerRemoved(ss){ss==0&&this._detach()}_attach(){}_detach(){}_onChange(ss,Es=!1){(0,ro.callFluidObservers)(this,{type:"change",parent:this,value:ss,idle:Es})}_onPriorityChange(ss){this.idle||ro.frameLoop.sort(this),(0,ro.callFluidObservers)(this,{type:"priority",parent:this,priority:ss})}},Wo=Symbol.for("SpringPhase"),ko=1,$a=2,Il=4,eu=ss=>(ss[Wo]&ko)>0,Fl=ss=>(ss[Wo]&$a)>0,Kl=ss=>(ss[Wo]&Il)>0,cu=(ss,Es)=>Es?ss[Wo]|=$a|ko:ss[Wo]&=~$a,Vo=(ss,Es)=>Es?ss[Wo]|=Il:ss[Wo]&=~Il,Bs=class extends To{constructor(ss,Es){if(super(),this.animation=new Xs,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ys.is.und(ss)||!ys.is.und(Es)){let $s=ys.is.obj(ss)?{...ss}:{...Es,from:ss};ys.is.und($s.default)&&($s.default=!0),this.start($s)}}get idle(){return!(Fl(this)||this._state.asyncTo)||Kl(this)}get goal(){return(0,ys.getFluidValue)(this.animation.to)}get velocity(){let ss=(0,ks.getAnimated)(this);return ss instanceof ks.AnimatedValue?ss.lastVelocity||0:ss.getPayload().map(Es=>Es.lastVelocity||0)}get hasAnimated(){return eu(this)}get isAnimating(){return Fl(this)}get isPaused(){return Kl(this)}get isDelayed(){return this._state.delayed}advance(ss){let Es=!0,$s=!1,ws=this.animation,{toValues:Cs}=ws,{config:Ms}=ws,Hs=(0,ks.getPayload)(ws.to);!Hs&&(0,ys.hasFluidValue)(ws.to)&&(Cs=(0,ys.toArray)((0,ys.getFluidValue)(ws.to))),ws.values.forEach((Oo,qo)=>{if(Oo.done)return;let Mo=Oo.constructor==ks.AnimatedString?1:Hs?Hs[qo].lastPosition:Cs[qo],Qo=ws.immediate,Xo=Mo;if(!Qo){if(Xo=Oo.lastPosition,Ms.tension<=0){Oo.done=!0;return}let Ko=Oo.elapsedTime+=ss,Uo=ws.fromValues[qo],jo=Oo.v0!=null?Oo.v0:Oo.v0=ys.is.arr(Ms.velocity)?Ms.velocity[qo]:Ms.velocity,zo,Jo=Ms.precision||(Uo==Mo?.005:Math.min(1,Math.abs(Mo-Uo)*.001));if(ys.is.und(Ms.duration))if(Ms.decay){let Ho=Ms.decay===!0?.998:Ms.decay,yl=Math.exp(-(1-Ho)*Ko);Xo=Uo+jo/(1-Ho)*(1-yl),Qo=Math.abs(Oo.lastPosition-Xo)<=Jo,zo=jo*yl}else{zo=Oo.lastVelocity==null?jo:Oo.lastVelocity;let Ho=Ms.restVelocity||Jo/10,yl=Ms.clamp?0:Ms.bounce,_l=!ys.is.und(yl),Vl=Uo==Mo?Oo.v0>0:Uo<Mo,Rl,Ql=!1,Wl=1,mu=Math.ceil(ss/Wl);for(let fu=0;fu<mu&&(Rl=Math.abs(zo)>Ho,!(!Rl&&(Qo=Math.abs(Mo-Xo)<=Jo,Qo)));++fu){_l&&(Ql=Xo==Mo||Xo>Mo==Vl,Ql&&(zo=-zo*yl,Xo=Mo));let wu=-Ms.tension*1e-6*(Xo-Mo),ou=-Ms.friction*.001*zo,xl=(wu+ou)/Ms.mass;zo=zo+xl*Wl,Xo=Xo+zo*Wl}}else{let Ho=1;Ms.duration>0&&(this._memoizedDuration!==Ms.duration&&(this._memoizedDuration=Ms.duration,Oo.durationProgress>0&&(Oo.elapsedTime=Ms.duration*Oo.durationProgress,Ko=Oo.elapsedTime+=ss)),Ho=(Ms.progress||0)+Ko/this._memoizedDuration,Ho=Ho>1?1:Ho<0?0:Ho,Oo.durationProgress=Ho),Xo=Uo+Ms.easing(Ho)*(Mo-Uo),zo=(Xo-Oo.lastPosition)/ss,Qo=Ho==1}Oo.lastVelocity=zo,Number.isNaN(Xo)&&(console.warn("Got NaN while animating:",this),Qo=!0)}Hs&&!Hs[qo].done&&(Qo=!1),Qo?Oo.done=!0:Es=!1,Oo.setValue(Xo,Ms.round)&&($s=!0)});let lo=(0,ks.getAnimated)(this),Io=lo.getValue();if(Es){let Oo=(0,ys.getFluidValue)(ws.to);(Io!==Oo||$s)&&!Ms.decay?(lo.setValue(Oo),this._onChange(Oo)):$s&&Ms.decay&&this._onChange(Io),this._stop()}else $s&&this._onChange(Io)}set(ss){return ys.raf.batchedUpdates(()=>{this._stop(),this._focus(ss),this._set(ss)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Fl(this)){let{to:ss,config:Es}=this.animation;ys.raf.batchedUpdates(()=>{this._onStart(),Es.decay||this._set(ss,!1),this._stop()})}return this}update(ss){return(this.queue||(this.queue=[])).push(ss),this}start(ss,Es){let $s;return ys.is.und(ss)?($s=this.queue||[],this.queue=[]):$s=[ys.is.obj(ss)?ss:{...Es,to:ss}],Promise.all($s.map(ws=>this._update(ws))).then(ws=>wo(this,ws))}stop(ss){let{to:Es}=this.animation;return this._focus(this.get()),to(this._state,ss&&this._lastCallId),ys.raf.batchedUpdates(()=>this._stop(Es,ss)),this}reset(){this._update({reset:!0})}eventObserved(ss){ss.type=="change"?this._start():ss.type=="priority"&&(this.priority=ss.priority+1)}_prepareNode(ss){let Es=this.key||"",{to:$s,from:ws}=ss;$s=ys.is.obj($s)?$s[Es]:$s,($s==null||ls($s))&&($s=void 0),ws=ys.is.obj(ws)?ws[Es]:ws,ws==null&&(ws=void 0);let Cs={to:$s,from:ws};return eu(this)||(ss.reverse&&([$s,ws]=[ws,$s]),ws=(0,ys.getFluidValue)(ws),ys.is.und(ws)?(0,ks.getAnimated)(this)||this._set($s):this._set(ws)),Cs}_update({...ss},Es){let{key:$s,defaultProps:ws}=this;ss.default&&Object.assign(ws,Jr(ss,(Hs,lo)=>/^on/.test(lo)?Kr(Hs,$s):Hs)),Eo(this,ss,"onProps"),yo(this,"onProps",ss,this);let Cs=this._prepareNode(ss);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let Ms=this._state;return uo(++this._lastCallId,{key:$s,props:ss,defaultProps:ws,state:Ms,actions:{pause:()=>{Kl(this)||(Vo(this,!0),(0,ys.flushCalls)(Ms.pauseQueue),yo(this,"onPause",ds(this,Ws(this,this.animation.to)),this))},resume:()=>{Kl(this)&&(Vo(this,!1),Fl(this)&&this._resume(),(0,ys.flushCalls)(Ms.resumeQueue),yo(this,"onResume",ds(this,Ws(this,this.animation.to)),this))},start:this._merge.bind(this,Cs)}}).then(Hs=>{if(ss.loop&&Hs.finished&&!(Es&&Hs.noop)){let lo=ms(ss);if(lo)return this._update(lo,!0)}return Hs})}_merge(ss,Es,$s){if(Es.cancel)return this.stop(!0),$s(Is(this));let ws=!ys.is.und(ss.to),Cs=!ys.is.und(ss.from);if(ws||Cs)if(Es.callId>this._lastToId)this._lastToId=Es.callId;else return $s(Is(this));let{key:Ms,defaultProps:Hs,animation:lo}=this,{to:Io,from:Oo}=lo,{to:qo=Io,from:Mo=Oo}=ss;Cs&&!ws&&(!Es.default||ys.is.und(qo))&&(qo=Mo),Es.reverse&&([qo,Mo]=[Mo,qo]);let Qo=!(0,ys.isEqual)(Mo,Oo);Qo&&(lo.from=Mo),Mo=(0,ys.getFluidValue)(Mo);let Xo=!(0,ys.isEqual)(qo,Io);Xo&&this._focus(qo);let Ko=ls(Es.to),{config:Uo}=lo,{decay:jo,velocity:zo}=Uo;(ws||Cs)&&(Uo.velocity=0),Es.config&&!Ko&&qs(Uo,Wr(Es.config,Ms),Es.config!==Hs.config?Wr(Hs.config,Ms):void 0);let Jo=(0,ks.getAnimated)(this);if(!Jo||ys.is.und(qo))return $s(ds(this,!0));let Ho=ys.is.und(Es.reset)?Cs&&!Es.default:!ys.is.und(Mo)&&qr(Es.reset,Ms),yl=Ho?Mo:this.get(),_l=ns(qo),Vl=ys.is.num(_l)||ys.is.arr(_l)||(0,ys.isAnimatedString)(_l),Rl=!Ko&&(!Vl||qr(Hs.immediate||Es.immediate,Ms));if(Xo){let fu=(0,ks.getAnimatedType)(qo);if(fu!==Jo.constructor)if(Rl)Jo=this._set(_l);else throw Error(`Cannot animate between ${Jo.constructor.name} and ${fu.name}, as the "to" prop suggests`)}let Ql=Jo.constructor,Wl=(0,ys.hasFluidValue)(qo),mu=!1;if(!Wl){let fu=Ho||!eu(this)&&Qo;(Xo||fu)&&(mu=(0,ys.isEqual)(ns(yl),_l),Wl=!mu),(!(0,ys.isEqual)(lo.immediate,Rl)&&!Rl||!(0,ys.isEqual)(Uo.decay,jo)||!(0,ys.isEqual)(Uo.velocity,zo))&&(Wl=!0)}if(mu&&Fl(this)&&(lo.changed&&!Ho?Wl=!0:Wl||this._stop(Io)),!Ko&&((Wl||(0,ys.hasFluidValue)(Io))&&(lo.values=Jo.getPayload(),lo.toValues=(0,ys.hasFluidValue)(qo)?null:Ql==ks.AnimatedString?[1]:(0,ys.toArray)(_l)),lo.immediate!=Rl&&(lo.immediate=Rl,!Rl&&!Ho&&this._set(Io)),Wl)){let{onRest:fu}=lo;(0,ys.each)(Zs,ou=>Eo(this,Es,ou));let wu=ds(this,Ws(this,Io));(0,ys.flushCalls)(this._pendingCalls,wu),this._pendingCalls.add($s),lo.changed&&ys.raf.batchedUpdates(()=>{var ou;lo.changed=!Ho,fu==null||fu(wu,this),Ho?Wr(Hs.onRest,wu):(ou=lo.onStart)==null||ou.call(lo,wu,this)})}Ho&&this._set(yl),Ko?$s(Gs(Es.to,Es,this._state,this)):Wl?this._start():Fl(this)&&!Xo?this._pendingCalls.add($s):$s(Co(yl))}_focus(ss){let Es=this.animation;ss!==Es.to&&((0,ys.getFluidObservers)(this)&&this._detach(),Es.to=ss,(0,ys.getFluidObservers)(this)&&this._attach())}_attach(){let ss=0,{to:Es}=this.animation;(0,ys.hasFluidValue)(Es)&&((0,ys.addFluidObserver)(Es,this),No(Es)&&(ss=Es.priority+1)),this.priority=ss}_detach(){let{to:ss}=this.animation;(0,ys.hasFluidValue)(ss)&&(0,ys.removeFluidObserver)(ss,this)}_set(ss,Es=!0){let $s=(0,ys.getFluidValue)(ss);if(!ys.is.und($s)){let ws=(0,ks.getAnimated)(this);if(!ws||!(0,ys.isEqual)($s,ws.getValue())){let Cs=(0,ks.getAnimatedType)($s);!ws||ws.constructor!=Cs?(0,ks.setAnimated)(this,Cs.create($s)):ws.setValue($s),ws&&ys.raf.batchedUpdates(()=>{this._onChange($s,Es)})}}return(0,ks.getAnimated)(this)}_onStart(){let ss=this.animation;ss.changed||(ss.changed=!0,yo(this,"onStart",ds(this,Ws(this,ss.to)),this))}_onChange(ss,Es){Es||(this._onStart(),Wr(this.animation.onChange,ss,this)),Wr(this.defaultProps.onChange,ss,this),super._onChange(ss,Es)}_start(){let ss=this.animation;(0,ks.getAnimated)(this).reset((0,ys.getFluidValue)(ss.to)),ss.immediate||(ss.fromValues=ss.values.map(Es=>Es.lastPosition)),Fl(this)||(cu(this,!0),Kl(this)||this._resume())}_resume(){ys.Globals.skipAnimation?this.finish():ys.frameLoop.start(this)}_stop(ss,Es){if(Fl(this)){cu(this,!1);let $s=this.animation;(0,ys.each)($s.values,Cs=>{Cs.done=!0}),$s.toValues&&($s.onChange=$s.onPause=$s.onResume=void 0),(0,ys.callFluidObservers)(this,{type:"idle",parent:this});let ws=Es?Is(this.get()):ds(this.get(),Ws(this,ss??$s.to));(0,ys.flushCalls)(this._pendingCalls,ws),$s.changed&&($s.changed=!1,yo(this,"onRest",ws,this))}}};function Ws(ss,Es){let $s=ns(Es),ws=ns(ss.get());return(0,ys.isEqual)(ws,$s)}function ms(ss,Es=ss.loop,$s=ss.to){let ws=Wr(Es);if(ws){let Cs=ws!==!0&&rs(ws),Ms=(Cs||ss).reverse,Hs=!Cs||Cs.reset;return ps({...ss,loop:Es,default:!1,pause:void 0,to:!Ms||ls($s)?$s:void 0,from:Hs?ss.from:void 0,reset:Hs,...Cs})}}function ps(ss){let{to:Es,from:$s}=ss=rs(ss),ws=new Set;return ys.is.obj(Es)&&Ls(Es,ws),ys.is.obj($s)&&Ls($s,ws),ss.keys=ws.size?Array.from(ws):null,ss}function Ps(ss){let Es=ps(ss);return ys.is.und(Es.default)&&(Es.default=Jr(Es)),Es}function Ls(ss,Es){(0,ys.eachProp)(ss,($s,ws)=>$s!=null&&Es.add(ws))}var Zs=["onStart","onRest","onChange","onPause","onResume"];function Eo(ss,Es,$s){ss.animation[$s]=Es[$s]!==Xr(Es,$s)?Kr(Es[$s],ss.key):void 0}function yo(ss,Es,...$s){var ws,Cs,Ms,Hs;(Cs=(ws=ss.animation)[Es])==null||Cs.call(ws,...$s),(Hs=(Ms=ss.defaultProps)[Es])==null||Hs.call(Ms,...$s)}var io=cjsExports$3,Lo=["onStart","onChange","onRest"],Yo=1,Go=class{constructor(ss,Es){this.id=Yo++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),Es&&(this._flush=Es),ss&&this.start({default:!0,...ss})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(ss=>ss.idle&&!ss.isDelayed&&!ss.isPaused)}get item(){return this._item}set item(ss){this._item=ss}get(){let ss={};return this.each((Es,$s)=>ss[$s]=Es.get()),ss}set(ss){for(let Es in ss){let $s=ss[Es];io.is.und($s)||this.springs[Es].set($s)}}update(ss){return ss&&this.queue.push(ps(ss)),this}start(ss){let{queue:Es}=this;return ss?Es=(0,io.toArray)(ss).map(ps):this.queue=[],this._flush?this._flush(this,Es):(_f(this,Es),Ks(this,Es))}stop(ss,Es){if(ss!==!!ss&&(Es=ss),Es){let $s=this.springs;(0,io.each)((0,io.toArray)(Es),ws=>$s[ws].stop(!!ss))}else to(this._state,this._lastAsyncId),this.each($s=>$s.stop(!!ss));return this}pause(ss){if(io.is.und(ss))this.start({pause:!0});else{let Es=this.springs;(0,io.each)((0,io.toArray)(ss),$s=>Es[$s].pause())}return this}resume(ss){if(io.is.und(ss))this.start({pause:!1});else{let Es=this.springs;(0,io.each)((0,io.toArray)(ss),$s=>Es[$s].resume())}return this}each(ss){(0,io.eachProp)(this.springs,ss)}_onFrame(){let{onStart:ss,onChange:Es,onRest:$s}=this._events,ws=this._active.size>0,Cs=this._changed.size>0;(ws&&!this._started||Cs&&!this._started)&&(this._started=!0,(0,io.flush)(ss,([lo,Io])=>{Io.value=this.get(),lo(Io,this,this._item)}));let Ms=!ws&&this._started,Hs=Cs||Ms&&$s.size?this.get():null;Cs&&Es.size&&(0,io.flush)(Es,([lo,Io])=>{Io.value=Hs,lo(Io,this,this._item)}),Ms&&(this._started=!1,(0,io.flush)($s,([lo,Io])=>{Io.value=Hs,lo(Io,this,this._item)}))}eventObserved(ss){if(ss.type=="change")this._changed.add(ss.parent),ss.idle||this._active.add(ss.parent);else if(ss.type=="idle")this._active.delete(ss.parent);else return;io.raf.onFrame(this._onFrame)}};function Ks(ss,Es){return Promise.all(Es.map($s=>$o(ss,$s))).then($s=>wo(ss,$s))}async function $o(ss,Es,$s){let{keys:ws,to:Cs,from:Ms,loop:Hs,onRest:lo,onResolve:Io}=Es,Oo=io.is.obj(Es.default)&&Es.default;Hs&&(Es.loop=!1),Cs===!1&&(Es.to=null),Ms===!1&&(Es.from=null);let qo=io.is.arr(Cs)||io.is.fun(Cs)?Cs:void 0;qo?(Es.to=void 0,Es.onRest=void 0,Oo&&(Oo.onRest=void 0)):(0,io.each)(Lo,Uo=>{let jo=Es[Uo];if(io.is.fun(jo)){let zo=ss._events[Uo];Es[Uo]=({finished:Jo,cancelled:Ho})=>{let yl=zo.get(jo);yl?(Jo||(yl.finished=!1),Ho&&(yl.cancelled=!0)):zo.set(jo,{value:null,finished:Jo||!1,cancelled:Ho||!1})},Oo&&(Oo[Uo]=Es[Uo])}});let Mo=ss._state;Es.pause===!Mo.paused?(Mo.paused=Es.pause,(0,io.flushCalls)(Es.pause?Mo.pauseQueue:Mo.resumeQueue)):Mo.paused&&(Es.pause=!0);let Qo=(ws||Object.keys(ss.springs)).map(Uo=>ss.springs[Uo].start(Es)),Xo=Es.cancel===!0||Xr(Es,"cancel")===!0;(qo||Xo&&Mo.asyncId)&&Qo.push(uo(++ss._lastAsyncId,{props:Es,state:Mo,actions:{pause:io.noop,resume:io.noop,start(Uo,jo){Xo?(to(Mo,ss._lastAsyncId),jo(Is(ss))):(Uo.onRest=lo,jo(Gs(qo,Uo,Mo,ss)))}}})),Mo.paused&&await new Promise(Uo=>{Mo.resumeQueue.add(Uo)});let Ko=wo(ss,await Promise.all(Qo));if(Hs&&Ko.finished&&!($s&&Ko.noop)){let Uo=ms(Es,Hs,Cs);if(Uo)return _f(ss,[Uo]),$o(ss,Uo,!0)}return Io&&io.raf.batchedUpdates(()=>Io(Ko,ss,ss.item)),Ko}function So(ss,Es){let $s={...ss.springs};return Es&&(0,io.each)((0,io.toArray)(Es),ws=>{io.is.und(ws.keys)&&(ws=ps(ws)),io.is.obj(ws.to)||(ws={...ws,to:void 0}),ju($s,ws,Cs=>xu(Cs))}),Yl(ss,$s),$s}function Yl(ss,Es){(0,io.eachProp)(Es,($s,ws)=>{ss.springs[ws]||(ss.springs[ws]=$s,(0,io.addFluidObserver)($s,ss))})}function xu(ss,Es){let $s=new Bs;return $s.key=ss,Es&&(0,io.addFluidObserver)($s,Es),$s}function ju(ss,Es,$s){Es.keys&&(0,io.each)(Es.keys,ws=>{(ss[ws]||(ss[ws]=$s(ws)))._prepareNode(Es)})}function _f(ss,Es){(0,io.each)(Es,$s=>{ju(ss.springs,$s,ws=>xu(ws,ss))})}var zu=Vr(reactExports),_h=reactExports,ep=cjsExports$3,Ru=({children:ss,...Es})=>{let $s=(0,_h.useContext)(Su),ws=Es.pause||!!$s.pause,Cs=Es.immediate||!!$s.immediate;Es=(0,ep.useMemoOne)(()=>({pause:ws,immediate:Cs}),[ws,Cs]);let{Provider:Ms}=Su;return zu.createElement(Ms,{value:Es},ss)},Su=lp(Ru,{});Ru.Provider=Su.Provider,Ru.Consumer=Su.Consumer;function lp(ss,Es){return Object.assign(ss,zu.createContext(Es)),ss.Provider._context=ss,ss.Consumer._context=ss,ss}var du=cjsExports$3,Dl=()=>{let ss=[],Es=function(ws){(0,du.deprecateDirectCall)();let Cs=[];return(0,du.each)(ss,(Ms,Hs)=>{if(du.is.und(ws))Cs.push(Ms.start());else{let lo=$s(ws,Ms,Hs);lo&&Cs.push(Ms.start(lo))}}),Cs};Es.current=ss,Es.add=function(ws){ss.includes(ws)||ss.push(ws)},Es.delete=function(ws){let Cs=ss.indexOf(ws);~Cs&&ss.splice(Cs,1)},Es.pause=function(){return(0,du.each)(ss,ws=>ws.pause(...arguments)),this},Es.resume=function(){return(0,du.each)(ss,ws=>ws.resume(...arguments)),this},Es.set=function(ws){(0,du.each)(ss,(Cs,Ms)=>{let Hs=du.is.fun(ws)?ws(Ms,Cs):ws;Hs&&Cs.set(Hs)})},Es.start=function(ws){let Cs=[];return(0,du.each)(ss,(Ms,Hs)=>{if(du.is.und(ws))Cs.push(Ms.start());else{let lo=this._getProps(ws,Ms,Hs);lo&&Cs.push(Ms.start(lo))}}),Cs},Es.stop=function(){return(0,du.each)(ss,ws=>ws.stop(...arguments)),this},Es.update=function(ws){return(0,du.each)(ss,(Cs,Ms)=>Cs.update(this._getProps(ws,Cs,Ms))),this};let $s=function(ws,Cs,Ms){return du.is.fun(ws)?ws(Ms,Cs):ws};return Es._getProps=$s,Es};function Hu(ss,Es,$s){let ws=fs.is.fun(Es)&&Es;ws&&!$s&&($s=[]);let Cs=(0,gs.useMemo)(()=>ws||arguments.length==3?Dl():void 0,[]),Ms=(0,gs.useRef)(0),Hs=(0,fs.useForceUpdate)(),lo=(0,gs.useMemo)(()=>({ctrls:[],queue:[],flush(zo,Jo){let Ho=So(zo,Jo);return Ms.current>0&&!lo.queue.length&&!Object.keys(Ho).some(yl=>!zo.springs[yl])?Ks(zo,Jo):new Promise(yl=>{Yl(zo,Ho),lo.queue.push(()=>{yl(Ks(zo,Jo))}),Hs()})}}),[]),Io=(0,gs.useRef)([...lo.ctrls]),Oo=[],qo=(0,fs.usePrev)(ss)||0;(0,gs.useMemo)(()=>{(0,fs.each)(Io.current.slice(ss,qo),zo=>{us(zo,Cs),zo.stop(!0)}),Io.current.length=ss,Mo(qo,ss)},[ss]),(0,gs.useMemo)(()=>{Mo(0,Math.min(qo,ss))},$s);function Mo(zo,Jo){for(let Ho=zo;Ho<Jo;Ho++){let yl=Io.current[Ho]||(Io.current[Ho]=new Go(null,lo.flush)),_l=ws?ws(Ho,yl):Es[Ho];_l&&(Oo[Ho]=Ps(_l))}}let Qo=Io.current.map((zo,Jo)=>So(zo,Oo[Jo])),Xo=(0,gs.useContext)(Ru),Ko=(0,fs.usePrev)(Xo),Uo=Xo!==Ko&&as(Xo);(0,fs.useIsomorphicLayoutEffect)(()=>{Ms.current++,lo.ctrls=Io.current;let{queue:zo}=lo;zo.length&&(lo.queue=[],(0,fs.each)(zo,Jo=>Jo())),(0,fs.each)(Io.current,(Jo,Ho)=>{Cs==null||Cs.add(Jo),Uo&&Jo.start({default:Xo});let yl=Oo[Ho];yl&&(xs(Jo,yl.ref),Jo.ref?Jo.queue.push(yl):Jo.start(yl))})}),(0,fs.useOnce)(()=>()=>{(0,fs.each)(lo.ctrls,zo=>zo.stop(!0))});let jo=Qo.map(zo=>({...zo}));return Cs?[jo,Cs]:jo}function Ou(ss,Es){let $s=vs.is.fun(ss),[[ws],Cs]=Hu(1,$s?ss:[ss],$s?Es||[]:Es);return $s||arguments.length==2?[ws,Cs]:ws}var tp=reactExports,up=()=>Dl(),cp=()=>(0,tp.useState)(up)[0],dp=cjsExports$3,Rp=(ss,Es)=>{let $s=(0,dp.useConstant)(()=>new Bs(ss,Es));return(0,dp.useOnce)(()=>()=>{$s.stop()}),$s},Zu=cjsExports$3;function fp(ss,Es,$s){let ws=Zu.is.fun(Es)&&Es;ws&&!$s&&($s=[]);let Cs=!0,Ms,Hs=Hu(ss,(lo,Io)=>{let Oo=ws?ws(lo,Io):Es;return Ms=Oo.ref,Cs=Cs&&Oo.reverse,Oo},$s||[{}]);if((0,Zu.useIsomorphicLayoutEffect)(()=>{(0,Zu.each)(Hs[1].current,(lo,Io)=>{let Oo=Hs[1].current[Io+(Cs?1:-1)];if(xs(lo,Ms),lo.ref){Oo&&lo.update({to:Oo.springs});return}Oo?lo.start({to:Oo.springs}):lo.start()})},$s),ws||arguments.length==3){let lo=Ms??Hs[1];return lo._getProps=(Io,Oo,qo)=>{let Mo=Zu.is.fun(Io)?Io(qo,Oo):Io;if(Mo){let Qo=lo.current[qo+(Mo.reverse?1:-1)];return Qo&&(Mo.to=Qo.springs),Mo}},Hs}return Hs[0]}var Qu=Vr(reactExports),Vu=reactExports,Ol=cjsExports$3;function hp(ss,Es,$s){let ws=Ol.is.fun(Es)&&Es,{reset:Cs,sort:Ms,trail:Hs=0,expires:lo=!0,exitBeforeEnter:Io=!1,onDestroyed:Oo,ref:qo,config:Mo}=ws?ws():Es,Qo=(0,Vu.useMemo)(()=>ws||arguments.length==3?Dl():void 0,[]),Xo=(0,Ol.toArray)(ss),Ko=[],Uo=(0,Vu.useRef)(null),jo=Cs?null:Uo.current;(0,Ol.useIsomorphicLayoutEffect)(()=>{Uo.current=Ko}),(0,Ol.useOnce)(()=>((0,Ol.each)(Ko,xl=>{Qo==null||Qo.add(xl.ctrl),xl.ctrl.ref=Qo}),()=>{(0,Ol.each)(Uo.current,xl=>{xl.expired&&clearTimeout(xl.expirationId),us(xl.ctrl,Qo),xl.ctrl.stop(!0)})}));let zo=Ip(Xo,ws?ws():Es,jo),Jo=Cs&&Uo.current||[];(0,Ol.useIsomorphicLayoutEffect)(()=>(0,Ol.each)(Jo,({ctrl:xl,item:Pl,key:Jl})=>{us(xl,Qo),Wr(Oo,Pl,Jl)}));let Ho=[];if(jo&&(0,Ol.each)(jo,(xl,Pl)=>{xl.expired?(clearTimeout(xl.expirationId),Jo.push(xl)):(Pl=Ho[Pl]=zo.indexOf(xl.key),~Pl&&(Ko[Pl]=xl))}),(0,Ol.each)(Xo,(xl,Pl)=>{Ko[Pl]||(Ko[Pl]={key:zo[Pl],item:xl,phase:"mount",ctrl:new Go},Ko[Pl].ctrl.item=xl)}),Ho.length){let xl=-1,{leave:Pl}=ws?ws():Es;(0,Ol.each)(Ho,(Jl,hu)=>{let gu=jo[hu];~Jl?(xl=Ko.indexOf(gu),Ko[xl]={...gu,item:Xo[Jl]}):Pl&&Ko.splice(++xl,0,gu)})}Ol.is.fun(Ms)&&Ko.sort((xl,Pl)=>Ms(xl.item,Pl.item));let yl=-Hs,_l=(0,Ol.useForceUpdate)(),Vl=Jr(Es),Rl=new Map,Ql=(0,Vu.useRef)(new Map),Wl=(0,Vu.useRef)(!1);(0,Ol.each)(Ko,(xl,Pl)=>{let Jl=xl.key,hu=xl.phase,gu=ws?ws():Es,pu,au,vm=Wr(gu.delay||0,Jl);if(hu=="mount")pu=gu.enter,au="enter";else{let oo=zo.indexOf(Jl)<0;if(hu!="leave")if(oo)pu=gu.leave,au="leave";else if(pu=gu.update)au="update";else return;else if(!oo)pu=gu.enter,au="enter";else return}if(pu=Wr(pu,xl.item,Pl),pu=Ol.is.obj(pu)?rs(pu):{to:pu},!pu.config){let oo=Mo||Vl.config;pu.config=Wr(oo,xl.item,Pl,au)}yl+=Hs;let vp={...Vl,delay:vm+yl,ref:qo,immediate:gu.immediate,reset:!1,...pu};if(au=="enter"&&Ol.is.und(vp.from)){let oo=ws?ws():Es,co=Ol.is.und(oo.initial)||jo?oo.from:oo.initial;vp.from=Wr(co,xl.item,Pl)}let{onResolve:Kp}=vp;vp.onResolve=oo=>{Wr(Kp,oo);let co=Uo.current,Ao=co.find(xa=>xa.key===Jl);if(Ao&&!(oo.cancelled&&Ao.phase!="update")&&Ao.ctrl.idle){let xa=co.every($l=>$l.ctrl.idle);if(Ao.phase=="leave"){let $l=Wr(lo,Ao.item);if($l!==!1){let nu=$l===!0?0:$l;if(Ao.expired=!0,!xa&&nu>0){nu<=2147483647&&(Ao.expirationId=setTimeout(_l,nu));return}}}xa&&co.some($l=>$l.expired)&&(Ql.current.delete(Ao),Io&&(Wl.current=!0),_l())}};let Js=So(xl.ctrl,vp);au==="leave"&&Io?Ql.current.set(xl,{phase:au,springs:Js,payload:vp}):Rl.set(xl,{phase:au,springs:Js,payload:vp})});let mu=(0,Vu.useContext)(Ru),fu=(0,Ol.usePrev)(mu),wu=mu!==fu&&as(mu);(0,Ol.useIsomorphicLayoutEffect)(()=>{wu&&(0,Ol.each)(Ko,xl=>{xl.ctrl.start({default:mu})})},[mu]),(0,Ol.each)(Rl,(xl,Pl)=>{if(Ql.current.size){let Jl=Ko.findIndex(hu=>hu.key===Pl.key);Ko.splice(Jl,1)}}),(0,Ol.useIsomorphicLayoutEffect)(()=>{(0,Ol.each)(Ql.current.size?Ql.current:Rl,({phase:xl,payload:Pl},Jl)=>{let{ctrl:hu}=Jl;Jl.phase=xl,Qo==null||Qo.add(hu),wu&&xl=="enter"&&hu.start({default:mu}),Pl&&(xs(hu,Pl.ref),(hu.ref||Qo)&&!Wl.current?hu.update(Pl):(hu.start(Pl),Wl.current&&(Wl.current=!1)))})},Cs?void 0:$s);let ou=xl=>Qu.createElement(Qu.Fragment,null,Ko.map((Pl,Jl)=>{let{springs:hu}=Rl.get(Pl)||Pl.ctrl,gu=xl({...hu},Pl.item,Pl,Jl);return gu&&gu.type?Qu.createElement(gu.type,{...gu.props,key:Ol.is.str(Pl.key)||Ol.is.num(Pl.key)?Pl.key:Pl.ctrl.id,ref:gu.ref}):gu}));return Qo?[ou,Qo]:ou}var Ap=1;function Ip(ss,{key:Es,keys:$s=Es},ws){if($s===null){let Cs=new Set;return ss.map(Ms=>{let Hs=ws&&ws.find(lo=>lo.item===Ms&&lo.phase!=="leave"&&!Cs.has(lo));return Hs?(Cs.add(Hs),Hs.key):Ap++})}return Ol.is.und($s)?ss:Ol.is.fun($s)?ss.map($s):(0,Ol.toArray)($s)}var Ml=cjsExports$3,Bl=({container:ss,...Es}={})=>{let[$s,ws]=Ou(()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...Es}),[]);return(0,Ml.useIsomorphicLayoutEffect)(()=>{let Cs=(0,Ml.onScroll)(({x:Ms,y:Hs})=>{ws.start({scrollX:Ms.current,scrollXProgress:Ms.progress,scrollY:Hs.current,scrollYProgress:Hs.progress})},{container:(ss==null?void 0:ss.current)||void 0});return()=>{(0,Ml.each)(Object.values($s),Ms=>Ms.stop()),Cs()}},[]),$s},Nu=cjsExports$3,pp=({container:ss,...Es})=>{let[$s,ws]=Ou(()=>({width:0,height:0,...Es}),[]);return(0,Nu.useIsomorphicLayoutEffect)(()=>{let Cs=(0,Nu.onResize)(({width:Ms,height:Hs})=>{ws.start({width:Ms,height:Hs,immediate:$s.width.get()===0||$s.height.get()===0})},{container:(ss==null?void 0:ss.current)||void 0});return()=>{(0,Nu.each)(Object.values($s),Ms=>Ms.stop()),Cs()}},[]),$s},mp=reactExports,Fu=cjsExports$3,Pp={any:0,all:1};function tu(ss,Es){let[$s,ws]=(0,mp.useState)(!1),Cs=(0,mp.useRef)(),Ms=Fu.is.fun(ss)&&ss,Hs=Ms?Ms():{},{to:lo={},from:Io={},...Oo}=Hs,qo=Ms?Es:ss,[Mo,Qo]=Ou(()=>({from:Io,...Oo}),[]);return(0,Fu.useIsomorphicLayoutEffect)(()=>{let Xo=Cs.current,{root:Ko,once:Uo,amount:jo="any",...zo}=qo??{};if(!Xo||Uo&&$s||typeof IntersectionObserver>"u")return;let Jo=new WeakMap,Ho=()=>(lo&&Qo.start(lo),ws(!0),Uo?void 0:()=>{Io&&Qo.start(Io),ws(!1)}),yl=Vl=>{Vl.forEach(Rl=>{let Ql=Jo.get(Rl.target);if(Rl.isIntersecting!==!!Ql)if(Rl.isIntersecting){let Wl=Ho();Fu.is.fun(Wl)?Jo.set(Rl.target,Wl):_l.unobserve(Rl.target)}else Ql&&(Ql(),Jo.delete(Rl.target))})},_l=new IntersectionObserver(yl,{root:Ko&&Ko.current||void 0,threshold:typeof jo=="number"||Array.isArray(jo)?jo:Pp[jo],...zo});return _l.observe(Xo),()=>_l.unobserve(Xo)},[qo]),Ms?[Cs,Mo]:[Cs,$s]}function gp({children:ss,...Es}){return ss(Ou(Es))}var iu=cjsExports$3;function yp({items:ss,children:Es,...$s}){let ws=fp(ss.length,$s);return ss.map((Cs,Ms)=>{let Hs=Es(Cs,Ms);return iu.is.fun(Hs)?Hs(ws[Ms]):Hs})}function Ju({items:ss,children:Es,...$s}){return hp(ss,$s)(Es)}var Nl=cjsExports$3,zl=cjsExports$3,Eu=cjsExports$2,As=class extends To{constructor(ss,Es){super(),this.source=ss,this.idle=!0,this._active=new Set,this.calc=(0,zl.createInterpolator)(...Es);let $s=this._get(),ws=(0,Eu.getAnimatedType)($s);(0,Eu.setAnimated)(this,ws.create($s))}advance(ss){let Es=this._get(),$s=this.get();(0,zl.isEqual)(Es,$s)||((0,Eu.getAnimated)(this).setValue(Es),this._onChange(Es,this.idle)),!this.idle&&zs(this._active)&&eo(this)}_get(){let ss=zl.is.arr(this.source)?this.source.map(zl.getFluidValue):(0,zl.toArray)((0,zl.getFluidValue)(this.source));return this.calc(...ss)}_start(){this.idle&&!zs(this._active)&&(this.idle=!1,(0,zl.each)((0,Eu.getPayload)(this),ss=>{ss.done=!1}),zl.Globals.skipAnimation?(zl.raf.batchedUpdates(()=>this.advance()),eo(this)):zl.frameLoop.start(this))}_attach(){let ss=1;(0,zl.each)((0,zl.toArray)(this.source),Es=>{(0,zl.hasFluidValue)(Es)&&(0,zl.addFluidObserver)(Es,this),No(Es)&&(Es.idle||this._active.add(Es),ss=Math.max(ss,Es.priority+1))}),this.priority=ss,this._start()}_detach(){(0,zl.each)((0,zl.toArray)(this.source),ss=>{(0,zl.hasFluidValue)(ss)&&(0,zl.removeFluidObserver)(ss,this)}),this._active.clear(),eo(this)}eventObserved(ss){ss.type=="change"?ss.idle?this.advance():(this._active.add(ss.parent),this._start()):ss.type=="idle"?this._active.delete(ss.parent):ss.type=="priority"&&(this.priority=(0,zl.toArray)(this.source).reduce((Es,$s)=>Math.max(Es,(No($s)?$s.priority:0)+1),0))}};function Ds(ss){return ss.idle!==!1}function zs(ss){return!ss.size||Array.from(ss).every(Ds)}function eo(ss){ss.idle||(ss.idle=!0,(0,zl.each)((0,Eu.getPayload)(ss),Es=>{Es.done=!0}),(0,zl.callFluidObservers)(ss,{type:"idle",parent:ss}))}var vo=(ss,...Es)=>new As(ss,Es),bs=(ss,...Es)=>((0,Nl.deprecateInterpolate)(),new As(ss,Es)),os=cjsExports$3;os.Globals.assign({createStringInterpolator:os.createStringInterpolator,to:(ss,Es)=>new As(ss,Es)});var cs=os.frameLoop.advance,_s=cjsExports$3;Ur(Dr,requireCjs(),_r.exports)})(reactSpring_core_production_min);var reactSpring_core_production_minExports=reactSpring_core_production_min.exports;cjs$4.exports=reactSpring_core_production_minExports;var cjsExports$1=cjs$4.exports;(function(_r){var Tr=Object.defineProperty,Rr=Object.getOwnPropertyDescriptor,Ar=Object.getOwnPropertyNames,Pr=Object.prototype.hasOwnProperty,Lr=(fs,ys)=>{for(var ks in ys)Tr(fs,ks,{get:ys[ks],enumerable:!0})},Mr=(fs,ys,ks,Fs)=>{if(ys&&typeof ys=="object"||typeof ys=="function")for(let Us of Ar(ys))!Pr.call(fs,Us)&&Us!==ks&&Tr(fs,Us,{get:()=>ys[Us],enumerable:!(Fs=Rr(ys,Us))||Fs.enumerable});return fs},Fr=(fs,ys,ks)=>(Mr(fs,ys,"default"),ks&&Mr(ks,ys,"default")),zr=fs=>Mr(Tr({},"__esModule",{value:!0}),fs),Ur={};Lr(Ur,{a:()=>gs,animated:()=>gs}),_r.exports=zr(Ur);var Vr=cjsExports$1,Nr=reactDomExports,Dr=cjsExports$3,jr=cjsExports$2,Gr=/^--/;function Wr(fs,ys){return ys==null||typeof ys=="boolean"||ys===""?"":typeof ys=="number"&&ys!==0&&!Gr.test(fs)&&!(Xr.hasOwnProperty(fs)&&Xr[fs])?ys+"px":(""+ys).trim()}var qr={};function Kr(fs,ys){if(!fs.nodeType||!fs.setAttribute)return!1;let ks=fs.nodeName==="filter"||fs.parentNode&&fs.parentNode.nodeName==="filter",{style:Fs,children:Us,scrollTop:Vs,scrollLeft:ao,viewBox:qs,...Qs}=ys,mo=Object.values(Qs),Xs=Object.keys(Qs).map(so=>ks||fs.hasAttribute(so)?so:qr[so]||(qr[so]=so.replace(/([A-Z])/g,uo=>"-"+uo.toLowerCase())));Us!==void 0&&(fs.textContent=Us);for(let so in Fs)if(Fs.hasOwnProperty(so)){let uo=Wr(so,Fs[so]);Gr.test(so)?fs.style.setProperty(so,uo):fs.style[so]=uo}Xs.forEach((so,uo)=>{fs.setAttribute(so,mo[uo])}),Vs!==void 0&&(fs.scrollTop=Vs),ao!==void 0&&(fs.scrollLeft=ao),qs!==void 0&&fs.setAttribute("viewBox",qs)}var Xr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zr=(fs,ys)=>fs+ys.charAt(0).toUpperCase()+ys.substring(1),Jr=["Webkit","Ms","Moz","O"];Xr=Object.keys(Xr).reduce((fs,ys)=>(Jr.forEach(ks=>fs[Zr(ks,ys)]=fs[ys]),fs),Xr);var _i=cjsExports$2,es=cjsExports$3,ts=/^(matrix|translate|scale|rotate|skew)/,rs=/^(translate)/,ns=/^(rotate|skew)/,as=(fs,ys)=>es.is.num(fs)&&fs!==0?fs+ys:fs,ls=(fs,ys)=>es.is.arr(fs)?fs.every(ks=>ls(ks,ys)):es.is.num(fs)?fs===ys:parseFloat(fs)===ys,us=class extends _i.AnimatedObject{constructor({x:fs,y:ys,z:ks,...Fs}){let Us=[],Vs=[];(fs||ys||ks)&&(Us.push([fs||0,ys||0,ks||0]),Vs.push(ao=>[`translate3d(${ao.map(qs=>as(qs,"px")).join(",")})`,ls(ao,0)])),(0,es.eachProp)(Fs,(ao,qs)=>{if(qs==="transform")Us.push([ao||""]),Vs.push(Qs=>[Qs,Qs===""]);else if(ts.test(qs)){if(delete Fs[qs],es.is.und(ao))return;let Qs=rs.test(qs)?"px":ns.test(qs)?"deg":"";Us.push((0,es.toArray)(ao)),Vs.push(qs==="rotate3d"?([mo,Xs,so,uo])=>[`rotate3d(${mo},${Xs},${so},${as(uo,Qs)})`,ls(uo,0)]:mo=>[`${qs}(${mo.map(Xs=>as(Xs,Qs)).join(",")})`,ls(mo,qs.startsWith("scale")?1:0)])}}),Us.length&&(Fs.transform=new xs(Us,Vs)),super(Fs)}},xs=class extends es.FluidValue{constructor(fs,ys){super(),this.inputs=fs,this.transforms=ys,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let fs="",ys=!0;return(0,es.each)(this.inputs,(ks,Fs)=>{let Us=(0,es.getFluidValue)(ks[0]),[Vs,ao]=this.transforms[Fs](es.is.arr(Us)?Us:ks.map(es.getFluidValue));fs+=" "+Vs,ys=ys&&ao}),ys?"none":fs}observerAdded(fs){fs==1&&(0,es.each)(this.inputs,ys=>(0,es.each)(ys,ks=>(0,es.hasFluidValue)(ks)&&(0,es.addFluidObserver)(ks,this)))}observerRemoved(fs){fs==0&&(0,es.each)(this.inputs,ys=>(0,es.each)(ys,ks=>(0,es.hasFluidValue)(ks)&&(0,es.removeFluidObserver)(ks,this)))}eventObserved(fs){fs.type=="change"&&(this._value=null),(0,es.callFluidObservers)(this,fs)}},Ts=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Fr(Ur,cjsExports$1,_r.exports),Vr.Globals.assign({batchedUpdates:Nr.unstable_batchedUpdates,createStringInterpolator:Dr.createStringInterpolator,colors:Dr.colors});var vs=(0,jr.createHost)(Ts,{applyAnimatedValues:Kr,createAnimatedStyle:fs=>new us(fs),getComponentProps:({scrollTop:fs,scrollLeft:ys,...ks})=>ks}),gs=vs.animated})(reactSpring_web_production_min);var reactSpring_web_production_minExports=reactSpring_web_production_min.exports;cjs$5.exports=reactSpring_web_production_minExports;var cjsExports=cjs$5.exports;const{useState,useEffect}=reactExports;function useWindowSize$1(){const[_r,Tr]=useState({width:void 0,height:void 0});return useEffect(()=>{function Rr(){Tr({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",Rr),Rr(),()=>window.removeEventListener("resize",Rr)},[]),_r}var useWindowSize_1=useWindowSize$1;const React=reactExports,{useSpring,animated}=cjsExports,useWindowSize=useWindowSize_1,settings={maxTilt:25,rotationPower:50,swipeThreshold:.5},physics={touchResponsive:{friction:50,tension:2e3},animateOut:{friction:30,tension:400},animateBack:{friction:10,tension:200}},pythagoras=(_r,Tr)=>Math.sqrt(Math.pow(_r,2)+Math.pow(Tr,2)),normalize$1=_r=>{const Tr=Math.sqrt(Math.pow(_r.x,2)+Math.pow(_r.y,2));return{x:_r.x/Tr,y:_r.y/Tr}},animateOut=async(_r,Tr,Rr,Ar)=>{const Pr=pythagoras(Rr,Ar),Lr=pythagoras(_r.x,_r.y),Mr=Pr*_r.x,Fr=Pr*_r.y,zr=_r.x*45,Ur=Pr/Lr;return Tr.start({xyrot:[Mr,Fr,zr],config:{duration:Ur}}),await new Promise(Vr=>setTimeout(()=>{Vr()},Ur))},animateBack=_r=>new Promise(Tr=>{_r.start({xyrot:[0,0,0],config:physics.animateBack,onRest:Tr})}),getSwipeDirection=_r=>{if(Math.abs(_r.x)>Math.abs(_r.y)){if(_r.x>settings.swipeThreshold)return"right";if(_r.x<-settings.swipeThreshold)return"left"}else{if(_r.y>settings.swipeThreshold)return"down";if(_r.y<-settings.swipeThreshold)return"up"}return"none"},AnimatedDiv=animated.div,TinderCard=React.forwardRef(({flickOnSwipe:_r=!0,children:Tr,onSwipe:Rr,onCardLeftScreen:Ar,className:Pr,preventSwipe:Lr=[],swipeRequirementType:Mr="velocity",swipeThreshold:Fr=settings.swipeThreshold,onSwipeRequirementFulfilled:zr,onSwipeRequirementUnfulfilled:Ur},Vr)=>{const{width:Nr,height:Dr}=useWindowSize(),[{xyrot:jr},Gr]=useSpring(()=>({xyrot:[0,0,0],config:physics.touchResponsive}));settings.swipeThreshold=Fr,React.useImperativeHandle(Vr,()=>({async swipe(Zr="right"){Rr&&Rr(Zr);const Jr=1.3,_i=(Math.random()-.5)/2;Zr==="right"?await animateOut({x:Jr,y:_i},Gr,Nr,Dr):Zr==="left"?await animateOut({x:-Jr,y:_i},Gr,Nr,Dr):Zr==="up"?await animateOut({x:_i,y:-Jr},Gr,Nr,Dr):Zr==="down"&&await animateOut({x:_i,y:Jr},Gr,Nr,Dr),Ar&&Ar(Zr)},async restoreCard(){await animateBack(Gr)}}));const Wr=React.useCallback(async(Zr,Jr)=>{const _i=getSwipeDirection({x:Mr==="velocity"?Jr.vx:Jr.dx,y:Mr==="velocity"?Jr.vy:Jr.dy});if(_i!=="none"&&_r&&!Lr.includes(_i)){Rr&&Rr(_i),await animateOut(Mr==="velocity"?{x:Jr.vx,y:Jr.vy}:normalize$1({x:Jr.dx,y:Jr.dy}),Zr,Nr,Dr),Ar&&Ar(_i);return}animateBack(Zr)},[Mr,_r,Lr,Rr,Ar,Nr,Dr]);let qr="none";const Kr=(Zr,Jr,_i,es)=>{let ts=es?Zr.touches[0].clientX-Jr.x:Zr.clientX-Jr.x,rs=es?Zr.touches[0].clientY-Jr.y:Zr.clientY-Jr.y;Jr.x===0&&Jr.y===0&&(ts=0,rs=0);const ns=-(ts-_i.dx)/(_i.timeStamp-Date.now()),as=-(rs-_i.dy)/(_i.timeStamp-Date.now());return{dx:ts,dy:rs,vx:ns,vy:as,timeStamp:Date.now()}};React.useLayoutEffect(()=>{let Zr={x:0,y:0},Jr={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()},_i=!1;Xr.current.addEventListener("touchstart",ts=>{!ts.srcElement.className.includes("pressable")&&ts.cancelable&&ts.preventDefault(),Jr=Kr(ts,Zr,Jr,!0),Zr={x:ts.touches[0].clientX,y:ts.touches[0].clientY}}),Xr.current.addEventListener("mousedown",ts=>{_i=!0,Jr=Kr(ts,Zr,Jr,!1),Zr={x:ts.clientX,y:ts.clientY}});const es=ts=>{if(zr||Ur){const ns=getSwipeDirection({x:Mr==="velocity"?ts.vx:ts.dx,y:Mr==="velocity"?ts.vy:ts.dy});ns!==qr&&(qr=ns,qr==="none"?Ur&&Ur():zr&&zr(ns))}let rs=ts.vx*15;isNaN(rs)&&(rs=0),rs=Math.max(Math.min(rs,settings.maxTilt),-settings.maxTilt),Gr.start({xyrot:[ts.dx,ts.dy,rs],config:physics.touchResponsive})};window.addEventListener("mousemove",ts=>{if(!_i)return;const rs=Kr(ts,Zr,Jr,!1);Jr=rs,es(rs)}),window.addEventListener("mouseup",ts=>{_i&&(_i=!1,Wr(Gr,Jr),Zr={x:0,y:0},Jr={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()})}),Xr.current.addEventListener("touchmove",ts=>{const rs=Kr(ts,Zr,Jr,!0);Jr=rs,es(rs)}),Xr.current.addEventListener("touchend",ts=>{Wr(Gr,Jr),Zr={x:0,y:0},Jr={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()}})});const Xr=React.useRef();return React.createElement(AnimatedDiv,{ref:Xr,className:Pr,style:{transform:jr.to((Zr,Jr,_i)=>`translate3d(${Zr}px, ${Jr}px, 0px) rotate(${_i}deg)`)},children:Tr})});var reactTinderCard=TinderCard;const TinderCard$1=getDefaultExportFromCjs$1(reactTinderCard);var __defProp=Object.defineProperty,__defNormalProp=(_r,Tr,Rr)=>Tr in _r?__defProp(_r,Tr,{enumerable:!0,configurable:!0,writable:!0,value:Rr}):_r[Tr]=Rr,__publicField=(_r,Tr,Rr)=>(__defNormalProp(_r,typeof Tr!="symbol"?Tr+"":Tr,Rr),Rr);const EMPTY=[];Object.freeze(EMPTY);const emptyAnnotationPage={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:EMPTY,motivation:null,label:null,thumbnail:EMPTY,summary:null,requiredStatement:null,metadata:EMPTY,rights:null,provider:EMPTY,items:EMPTY,seeAlso:EMPTY,homepage:EMPTY,logo:EMPTY,rendering:EMPTY,service:EMPTY},emptyCanvas={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:EMPTY,motivation:null,thumbnail:EMPTY,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:EMPTY,rights:null,navDate:null,provider:EMPTY,items:EMPTY,annotations:EMPTY,seeAlso:EMPTY,homepage:EMPTY,logo:EMPTY,partOf:EMPTY,rendering:EMPTY,service:EMPTY,duration:0,height:0,width:0},emptyCollection={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:EMPTY,motivation:null,thumbnail:EMPTY,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:EMPTY,rights:null,navDate:null,provider:EMPTY,items:EMPTY,annotations:EMPTY,seeAlso:EMPTY,homepage:EMPTY,logo:EMPTY,partOf:EMPTY,rendering:EMPTY,service:EMPTY,services:EMPTY},emptyManifest={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:EMPTY,behavior:EMPTY,homepage:EMPTY,items:EMPTY,label:null,logo:EMPTY,metadata:EMPTY,motivation:null,navDate:null,provider:EMPTY,partOf:EMPTY,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:EMPTY,requiredStatement:null,rights:null,seeAlso:EMPTY,service:EMPTY,services:EMPTY,start:null,structures:EMPTY,summary:null,thumbnail:EMPTY,viewingDirection:"left-to-right"},emptyRange={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:EMPTY,motivation:null,thumbnail:EMPTY,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:EMPTY,rights:null,navDate:null,provider:EMPTY,items:EMPTY,annotations:EMPTY,seeAlso:EMPTY,homepage:EMPTY,logo:EMPTY,partOf:EMPTY,rendering:EMPTY,service:EMPTY,start:null,supplementary:null,viewingDirection:"left-to-right"},emptyAgent={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:EMPTY,seeAlso:EMPTY,homepage:EMPTY};function ensureArray$1(_r){return Array.isArray(_r)?_r:[_r]}const types$1=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];function identifyResource$1(_r){if(typeof _r>"u"||_r===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(_r))throw new Error("Array is not a valid entity");if(typeof _r!="object")throw new Error(`${typeof _r} is not a valid entity`);if(typeof _r.type=="string"){const Tr=types$1.indexOf(_r.type);if(Tr!==-1)return types$1[Tr]}if(_r.profile)return"Service";throw new Error("Resource type is not known")}class Traverse$1{constructor(Tr,Rr={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],...Tr},this.options={allowUndefinedReturn:!1,...Rr}}static all(Tr){return new Traverse$1({collection:[Tr],manifest:[Tr],canvas:[Tr],annotationCollection:[Tr],annotationPage:[Tr],annotation:[Tr],contentResource:[Tr],choice:[Tr],range:[Tr],service:[Tr]})}traverseDescriptive(Tr){return Tr.thumbnail&&(Tr.thumbnail=Tr.thumbnail.map(Rr=>this.traverseType(Rr,this.traversals.contentResource))),Tr.provider&&(Tr.provider=Tr.provider.map(Rr=>this.traverseAgent(Rr))),Tr}traverseLinking(Tr){return Tr.seeAlso&&(Tr.seeAlso=Tr.seeAlso.map(Rr=>this.traverseType(Rr,this.traversals.contentResource))),Tr.service&&(Tr.service=ensureArray$1(Tr.service).map(Rr=>this.traverseType(Rr,this.traversals.service))),Tr.services&&(Tr.services=Tr.services.map(Rr=>this.traverseType(Rr,this.traversals.service))),Tr.logo&&(Tr.logo=Tr.logo.map(Rr=>this.traverseType(Rr,this.traversals.contentResource))),Tr.homepage&&(Tr.homepage=Tr.homepage.map(Rr=>this.traverseType(Rr,this.traversals.contentResource))),Tr.partOf&&(Tr.partOf=Tr.partOf.map(Rr=>typeof Rr=="string"||!Rr.type?this.traverseType(Rr,this.traversals.contentResource):Rr.type==="Canvas"?this.traverseType(Rr,this.traversals.canvas):Rr.type==="AnnotationCollection"?this.traverseType(Rr,this.traversals.annotationCollection):Rr.type==="Collection"?this.traverseType(Rr,this.traversals.collection):this.traverseType(Rr,this.traversals.contentResource))),Tr.start&&(Tr.start=Tr.start?this.traverseType(Tr.start,this.traversals.canvas):null),Tr.rendering&&(Tr.rendering=Tr.rendering.map(Rr=>this.traverseType(Rr,this.traversals.contentResource))),Tr.supplementary&&(Tr.supplementary=Tr.supplementary.map(Rr=>this.traverseType(Rr,this.traversals.contentResource))),Tr}traverseCollectionItems(Tr){return Tr.items&&Tr.items.map(Rr=>Rr.type==="Collection"?this.traverseCollection(Rr):this.traverseManifest(Rr)),Tr}traverseCollection(Tr){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(Tr))))),this.traversals.collection)}traverseManifestItems(Tr){return Tr.items&&(Tr.items=Tr.items.map(Rr=>this.traverseCanvas(Rr))),Tr}traverseManifestStructures(Tr){return Tr.structures&&(Tr.structures=Tr.structures.map(Rr=>this.traverseRange(Rr))),Tr}traverseManifest(Tr){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(Tr)))))),this.traversals.manifest)}traverseCanvasItems(Tr){return Tr.items=(Tr.items||[]).map(Rr=>this.traverseAnnotationPage(Rr)),Tr}traverseInlineAnnotationPages(Tr){return typeof Tr=="string"||!Tr||Tr.annotations&&(Tr.annotations=Tr.annotations.map(Rr=>this.traverseAnnotationPage(Rr))),Tr}traverseCanvas(Tr){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(Tr))))),this.traversals.canvas)}traverseAnnotationPageItems(Tr){return Tr.items&&(Tr.items=Tr.items.map(Rr=>this.traverseAnnotation(Rr))),Tr}traverseAnnotationPage(Tr){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(Tr))),this.traversals.annotationPage)}traverseAnnotationBody(Tr){return Array.isArray(Tr.body)?Tr.body=Tr.body.map(Rr=>this.traverseContentResource(Rr)):Tr.body&&(Tr.body=this.traverseContentResource(Tr.body)),Tr}traversePosterCanvas(Tr){return Tr.posterCanvas&&(Tr.posterCanvas=this.traverseCanvas(Tr.posterCanvas)),Tr.placeholderCanvas&&(Tr.placeholderCanvas=this.traverseCanvas(Tr.placeholderCanvas)),Tr.accompanyingCanvas&&(Tr.accompanyingCanvas=this.traverseCanvas(Tr.accompanyingCanvas)),Tr}traverseAnnotation(Tr){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(Tr)),this.traversals.annotation)}traverseContentResourceLinking(Tr){return typeof Tr=="string"||!Tr||Tr&&Tr.service&&(Tr.service=ensureArray$1(Tr.service||[]).map(Rr=>this.traverseType(Rr,this.traversals.service))),Tr}traverseContentResource(Tr){return Tr.type==="Choice"&&(Tr.items=Tr.items.map(Rr=>this.traverseContentResource(Rr))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(Tr)),this.traversals.contentResource)}traverseRangeRanges(Tr){return Tr.items&&(Tr.items=Tr.items.map(Rr=>typeof Rr=="string"?this.traverseCanvas({id:Rr,type:"Canvas"}):Rr.type==="Manifest"?this.traverseManifest(Rr):this.traverseRange(Rr))),Tr}traverseRange(Tr){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(Tr)))),this.traversals.range)}traverseAgent(Tr){return this.traverseType(this.traverseDescriptive(this.traverseLinking(Tr)),this.traversals.agent)}traverseType(Tr,Rr){return Rr.reduce((Ar,Pr)=>{const Lr=Pr(Ar);return typeof Lr>"u"&&!this.options.allowUndefinedReturn?Ar:Lr},Tr)}traverseService(Tr){return this.traverseType(Tr,this.traversals.service)}traverseUnknown(Tr){const Rr=identifyResource$1(Tr);switch(Rr){case"Collection":return this.traverseCollection(Tr);case"Manifest":return this.traverseManifest(Tr);case"Canvas":return this.traverseCanvas(Tr);case"AnnotationPage":return this.traverseAnnotationPage(Tr);case"Annotation":return this.traverseAnnotation(Tr);case"ContentResource":return this.traverseContentResource(Tr);case"Range":return this.traverseRange(Tr);case"Service":return this.traverseService(Tr);case"Agent":return this.traverseAgent(Tr);default:throw new Error(`Unknown or unsupported resource type of ${Rr}`)}}}const types=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];function identifyResource(_r){if(typeof _r>"u"||_r===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(_r))throw new Error("Array is not a valid entity");if(typeof _r!="object")throw new Error(`${typeof _r} is not a valid entity`);if(typeof _r["@type"]=="string"){const Tr=types.indexOf(_r["@type"]);if(Tr!==-1)return types[Tr]}if(_r.profile)return"Service";if(_r.format||_r["@type"])return"ContentResource";throw new Error("Resource type is not known")}class Traverse{constructor(Tr,Rr={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...Tr},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...Rr}}static all(Tr){return new Traverse({collection:[Tr],manifest:[Tr],canvas:[Tr],annotationList:[Tr],sequence:[Tr],annotation:[Tr],contentResource:[Tr],choice:[Tr],range:[Tr],service:[Tr],layer:[Tr]})}traverseCollection(Tr){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(Tr))),this.traversals.collection)}traverseCollectionItems(Tr){if(this.options.mergeMemberProperties){const Rr=[...(Tr.manifests||[]).map(Ar=>typeof Ar=="string"?{"@id":Ar,"@type":"sc:Manifest"}:Ar),...(Tr.collections||[]).map(Ar=>typeof Ar=="string"?{"@id":Ar,"@type":"sc:Collection"}:Ar),...Tr.members||[]];delete Tr.collections,delete Tr.manifests,Tr.members=Rr}return Tr.manifests&&(Tr.manifests=Tr.manifests.map(Rr=>this.traverseManifest(typeof Rr=="string"?{"@id":Rr,"@type":"sc:Manifest"}:Rr))),Tr.collections&&(Tr.collections=Tr.collections.map(Rr=>this.traverseCollection(typeof Rr=="string"?{"@id":Rr,"@type":"sc:Collection"}:Rr))),Tr.members&&(Tr.members=Tr.members.map(Rr=>typeof Rr=="string"?Rr:this.traverseUnknown(Rr))),Tr}traverseManifest(Tr){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(Tr))),this.traversals.manifest)}traverseManifestItems(Tr){return Tr.sequences&&(Tr.sequences=Tr.sequences.map(Rr=>this.traverseSequence(Rr))),Tr.structures&&(Tr.structures=Tr.structures.map(Rr=>this.traverseRange(Rr))),Tr}traverseSequence(Tr){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(Tr))),this.traversals.sequence)}traverseSequenceItems(Tr){return Tr.canvases&&(Tr.canvases=Tr.canvases.map(Rr=>this.traverseCanvas(Rr))),Tr}traverseCanvas(Tr){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(Tr))),this.traversals.canvas)}traverseCanvasItems(Tr){return Tr.images&&(Tr.images=Tr.images.map(Rr=>this.traverseAnnotation(Rr))),Tr.otherContent&&(Tr.otherContent=Tr.otherContent.map(Rr=>this.traverseAnnotationList(Rr))),Tr}traverseRange(Tr){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(Tr))),this.traversals.range)}traverseRangeItems(Tr){if(this.options.mergeMemberProperties){const Rr=[...(Tr.ranges||[]).map(Ar=>typeof Ar=="string"?{"@id":Ar,"@type":"sc:Range"}:Ar),...(Tr.canvases||[]).map(Ar=>typeof Ar=="string"?{"@id":Ar,"@type":"sc:Canvas"}:Ar),...Tr.members||[]];delete Tr.ranges,delete Tr.canvases,Tr.members=Rr.length?Rr.map(Ar=>this.traverseUnknown(Ar)):void 0}return Tr}traverseAnnotationList(Tr){const Rr=typeof Tr=="string"?{"@id":Tr,"@type":"sc:AnnotationList"}:Tr;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(Rr)),this.traversals.annotationList)}traverseAnnotationListItems(Tr){return Tr.resources&&(Tr.resources=Tr.resources.map(Rr=>this.traverseAnnotation(Rr))),Tr}traverseAnnotation(Tr){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(Tr))),this.traversals.annotation)}traverseAnnotationItems(Tr){return Tr.resource&&(Array.isArray(Tr.resource)?Tr.resource=Tr.resource.map(Rr=>this.traverseContentResource(Rr)):Tr.resource=this.traverseContentResource(Tr.resource)),Tr.on,Tr}traverseLayer(Tr){return this.traverseType(this.traverseLinking(this.traverseLayerItems(Tr)),this.traversals.layer)}traverseLayerItems(Tr){return Tr.otherContent&&(Tr.otherContent=Tr.otherContent.map(Rr=>this.traverseAnnotationList(Rr))),Tr}traverseChoice(Tr){return this.traverseType(this.traverseChoiceItems(Tr),this.traversals.choice)}traverseChoiceItems(Tr){return Tr.default&&Tr.default!=="rdf:nil"&&(Tr.default=this.traverseContentResource(Tr.default)),Tr.item&&Tr.item!=="rdf:nil"&&(Tr.item=Tr.item.map(Rr=>this.traverseContentResource(Rr))),Tr}traverseService(Tr){return this.traverseType(this.traverseLinking(Tr),this.traversals.service)}traverseContentResource(Tr){return Tr["@type"]==="oa:Choice"?this.traverseChoice(Tr):this.traverseType(this.traverseDescriptive(this.traverseLinking(Tr)),this.traversals.contentResource)}traverseUnknown(Tr){if(!Tr["@type"]||typeof Tr=="string")return Tr;switch(identifyResource(Tr)){case"sc:Collection":return this.traverseCollection(Tr);case"sc:Manifest":return this.traverseManifest(Tr);case"sc:Canvas":return this.traverseCanvas(Tr);case"sc:Sequence":return this.traverseSequence(Tr);case"sc:Range":return this.traverseRange(Tr);case"oa:Annotation":return this.traverseAnnotation(Tr);case"sc:AnnotationList":return this.traverseAnnotationList(Tr);case"sc:Layer":return this.traverseLayer(Tr);case"Service":return this.traverseService(Tr);case"oa:Choice":return this.traverseChoice(Tr);case"ContentResource":return this.traverseContentResource(Tr)}return Tr.profile?this.traverseService(Tr):Tr}traverseImageResource(Tr){const Rr=Array.isArray(Tr),Ar=Array.isArray(Tr)?Tr:[Tr],Pr=[];for(const Lr of Ar)typeof Lr=="string"?Pr.push(this.traverseContentResource({"@id":Lr,"@type":"dctypes:Image"})):Pr.push(this.traverseContentResource(Lr));return!Rr&&!this.options.convertPropsToArray?Pr[0]:Pr}traverseDescriptive(Tr){return Tr.thumbnail&&(Tr.thumbnail=this.traverseImageResource(Tr.thumbnail)),Tr.logo&&(Tr.logo=this.traverseImageResource(Tr.logo)),Tr}traverseOneOrMoreServices(Tr){const Rr=Array.isArray(Tr),Ar=Array.isArray(Tr)?Tr:[Tr],Pr=[];for(const Lr of Ar)Pr.push(this.traverseService(Lr));return!Rr&&!this.options.convertPropsToArray?Pr[0]:Pr}traverseLinking(Tr){return Tr.related&&(Tr.related=this.traverseOneOrManyType(Tr.related,this.traversals.contentResource)),Tr.rendering&&(Tr.rendering=this.traverseOneOrManyType(Tr.rendering,this.traversals.contentResource)),Tr.service&&(Tr.service=this.traverseOneOrMoreServices(Tr.service)),Tr.seeAlso&&(Tr.seeAlso=this.traverseOneOrManyType(Tr.seeAlso,this.traversals.contentResource)),Tr.within&&(typeof Tr.within=="string"||(Tr.within=this.traverseOneOrManyType(Tr.within,this.traversals.contentResource))),Tr.startCanvas&&(typeof Tr.startCanvas=="string"?Tr.startCanvas=this.traverseType({"@id":Tr.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):Tr.startCanvas&&this.traverseType(Tr.startCanvas,this.traversals.canvas)),Tr.contentLayer&&(typeof Tr.contentLayer=="string"?Tr.contentLayer=this.traverseLayer({"@id":Tr.contentLayer,"@type":"sc:Layer"}):Tr.contentLayer=this.traverseLayer(Tr.contentLayer)),Tr}traverseOneOrManyType(Tr,Rr){if(!Array.isArray(Tr))if(this.options.convertPropsToArray)Tr=[Tr];else return this.traverseType(Tr,Rr);return Tr.map(Ar=>this.traverseType(Ar,Rr))}traverseType(Tr,Rr){return Rr.reduce((Ar,Pr)=>{const Lr=Pr(Ar);return typeof Lr>"u"&&!this.options.allowUndefinedReturn?Ar:Lr},Tr)}}const STANFORD_IIIF_IMAGE_COMPLIANCE_0="http://library.stanford.edu/iiif/image-api/compliance.html#level0",STANFORD_IIIF_IMAGE_COMPLIANCE_1="http://library.stanford.edu/iiif/image-api/compliance.html#level1",STANFORD_IIIF_IMAGE_COMPLIANCE_2="http://library.stanford.edu/iiif/image-api/compliance.html#level2",STANFORD_IIIF_IMAGE_CONFORMANCE_0="http://library.stanford.edu/iiif/image-api/conformance.html#level0",STANFORD_IIIF_IMAGE_CONFORMANCE_1="http://library.stanford.edu/iiif/image-api/conformance.html#level1",STANFORD_IIIF_IMAGE_CONFORMANCE_2="http://library.stanford.edu/iiif/image-api/conformance.html#level2",STANFORD_IIIF_1_IMAGE_COMPLIANCE_0="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",STANFORD_IIIF_1_IMAGE_COMPLIANCE_1="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",STANFORD_IIIF_1_IMAGE_COMPLIANCE_2="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",STANFORD_IIIF_1_IMAGE_CONFORMANCE_0="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",STANFORD_IIIF_1_IMAGE_CONFORMANCE_1="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",STANFORD_IIIF_1_IMAGE_CONFORMANCE_2="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",IIIF_1_IMAGE_LEVEL_0="http://iiif.io/api/image/1/level0.json",IIIF_1_IMAGE_LEVEL_0_PROFILE="http://iiif.io/api/image/1/profiles/level0.json",IIIF_1_IMAGE_LEVEL_1="http://iiif.io/api/image/1/level1.json",IIIF_1_IMAGE_LEVEL_1_PROFILE="http://iiif.io/api/image/1/profiles/level1.json",IIIF_1_IMAGE_LEVEL_2="http://iiif.io/api/image/1/level2.json",IIIF_1_IMAGE_LEVEL_2_PROFILE="http://iiif.io/api/image/1/profiles/level2.json",IIIF_2_IMAGE_LEVEL_0="http://iiif.io/api/image/2/level0.json",IIIF_2_IMAGE_LEVEL_0_PROFILE="http://iiif.io/api/image/2/profiles/level0.json",IIIF_2_IMAGE_LEVEL_1="http://iiif.io/api/image/2/level1.json",IIIF_2_IMAGE_LEVEL_1_PROFILE="http://iiif.io/api/image/2/profiles/level1.json",IIIF_2_IMAGE_LEVEL_2="http://iiif.io/api/image/2/level2.json",IIIF_2_IMAGE_LEVEL_2_PROFILE="http://iiif.io/api/image/2/profiles/level2.json",IIIF_3_IMAGE_LEVEL_0="level0",IIIF_3_IMAGE_LEVEL_1="level1",IIIF_3_IMAGE_LEVEL_2="level2",IIIF_2_IMAGE_LEVEL_0_NO_JSON="http://iiif.io/api/image/2/level0",IIIF_2_IMAGE_LEVEL_1_NO_JSON="http://iiif.io/api/image/2/level1",IIIF_2_IMAGE_LEVEL_2_NO_JSON="http://iiif.io/api/image/2/level2",level1Support=[IIIF_2_IMAGE_LEVEL_1_NO_JSON,IIIF_2_IMAGE_LEVEL_2_NO_JSON,STANFORD_IIIF_IMAGE_COMPLIANCE_1,STANFORD_IIIF_IMAGE_COMPLIANCE_2,STANFORD_IIIF_IMAGE_CONFORMANCE_1,STANFORD_IIIF_IMAGE_CONFORMANCE_2,STANFORD_IIIF_1_IMAGE_COMPLIANCE_1,STANFORD_IIIF_1_IMAGE_COMPLIANCE_2,STANFORD_IIIF_1_IMAGE_CONFORMANCE_1,STANFORD_IIIF_1_IMAGE_CONFORMANCE_2,IIIF_1_IMAGE_LEVEL_1,IIIF_1_IMAGE_LEVEL_1_PROFILE,IIIF_1_IMAGE_LEVEL_2,IIIF_1_IMAGE_LEVEL_2_PROFILE,IIIF_2_IMAGE_LEVEL_1,IIIF_2_IMAGE_LEVEL_1_PROFILE,IIIF_2_IMAGE_LEVEL_2,IIIF_2_IMAGE_LEVEL_2_PROFILE,IIIF_3_IMAGE_LEVEL_1,IIIF_3_IMAGE_LEVEL_2],imageServiceProfiles=[IIIF_2_IMAGE_LEVEL_0_NO_JSON,IIIF_2_IMAGE_LEVEL_1_NO_JSON,IIIF_2_IMAGE_LEVEL_2_NO_JSON,STANFORD_IIIF_IMAGE_COMPLIANCE_0,STANFORD_IIIF_IMAGE_COMPLIANCE_1,STANFORD_IIIF_IMAGE_COMPLIANCE_2,STANFORD_IIIF_IMAGE_CONFORMANCE_0,STANFORD_IIIF_IMAGE_CONFORMANCE_1,STANFORD_IIIF_IMAGE_CONFORMANCE_2,STANFORD_IIIF_1_IMAGE_COMPLIANCE_0,STANFORD_IIIF_1_IMAGE_COMPLIANCE_1,STANFORD_IIIF_1_IMAGE_COMPLIANCE_2,STANFORD_IIIF_1_IMAGE_CONFORMANCE_0,STANFORD_IIIF_1_IMAGE_CONFORMANCE_1,STANFORD_IIIF_1_IMAGE_CONFORMANCE_2,IIIF_1_IMAGE_LEVEL_0,IIIF_1_IMAGE_LEVEL_0_PROFILE,IIIF_1_IMAGE_LEVEL_1,IIIF_1_IMAGE_LEVEL_1_PROFILE,IIIF_1_IMAGE_LEVEL_2,IIIF_1_IMAGE_LEVEL_2_PROFILE,IIIF_2_IMAGE_LEVEL_0,IIIF_2_IMAGE_LEVEL_0_PROFILE,IIIF_2_IMAGE_LEVEL_1,IIIF_2_IMAGE_LEVEL_1_PROFILE,IIIF_2_IMAGE_LEVEL_2,IIIF_2_IMAGE_LEVEL_2_PROFILE,IIIF_3_IMAGE_LEVEL_0,IIIF_3_IMAGE_LEVEL_1,IIIF_3_IMAGE_LEVEL_2],configuration={attributionLabel:"Attribution",lang:"none",providerId:"http://example.org/provider",providerName:"Unknown"};function convertLanguageMapping(_r,Tr="none"){if(!_r)return{};const Rr=Array.isArray(_r)?_r:[_r],Ar={};for(const Pr of Rr){if(typeof Pr=="string"){Ar[Tr]=Ar[Tr]?Ar[Tr]:[],Ar[Tr].push(Pr||"");continue}if(!Pr["@language"]){Ar[Tr]=Ar[Tr]?Ar[Tr]:[],Ar[Tr].push(Pr["@value"]||"");continue}const Lr=Pr["@language"];Ar[Lr]=Ar[Lr]?Ar[Lr]:[],Ar[Lr].push(Pr["@value"]||"")}return Ar}function getProfile(_r){if(Array.isArray(_r))return getProfile(_r.find(Tr=>typeof Tr=="string"));if(imageServiceProfiles.indexOf(_r)!==-1)return"level2";if(level1Support.indexOf(_r)!==-1)return"level1";if(typeof _r=="string")return _r}function getTypeFromContext(_r){const Tr=Array.isArray(_r)?_r:[_r];for(const Rr of Tr)switch(Rr){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}function getTypeFromProfile(_r){switch(_r){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}function removePrefix(_r){for(const Tr of["sc","oa","dcterms","dctypes","iiif"])if(_r.startsWith(`${Tr}:`))return _r.slice(Tr.length+1);return _r}const knownTypes=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function getNewType(_r){const Tr=_r["@id"]||_r.id;let Rr=_r["@type"]||_r.type;const Ar=_r.profile||void 0,Pr=_r["@context"]||void 0;if(Ar){const Lr=getTypeFromProfile(Ar);if(Lr)return Lr}if(Pr){const Lr=getTypeFromContext(Pr);if(Lr)return Lr}if(Rr){if(Array.isArray(Rr)){if(Rr.indexOf("oa:CssStylesheet")!==-1)return"CssStylesheet";if(Rr.indexOf("cnt:ContentAsText")!==-1)return"TextualBody";Rr=Rr[0]}for(const Lr of["sc","oa","dcterms","dctypes","iiif"])if(Rr.startsWith(`${Lr}:`)){Rr=Rr.slice(Lr.length+1);break}switch(Rr){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(Rr&&knownTypes.indexOf(Rr)!==-1)return Rr;if(_r.format){if(_r.format.startsWith("image/"))return"Image";if(_r.format.startsWith("text/")||_r.format==="application/pdf")return"Text";if(_r.format.startsWith("application/"))return"Dataset"}return Tr&&(Tr.endsWith(".jpg")||Tr.endsWith(".png")||Tr.endsWith(".jpeg"))?"Image":Rr||"unknown"}const licenseRegex=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm;function extractLicense(_r){const Tr=_r.match(licenseRegex);return Tr?Tr[0]:_r}function fixLicense(_r,Tr="Rights/License",Rr="none"){let Ar=null;const Pr=[],Lr=Array.isArray(_r)?_r:[_r];for(const Mr of Lr){const Fr=Mr?extractLicense(Mr):void 0;if(Fr&&(Fr.indexOf("creativecommons.org")!==-1||Fr.indexOf("rightsstatements.org")!==-1)){Fr.startsWith("https://")?Ar=`http://${Fr.slice(8)}`:Ar=Fr;continue}Fr&&Pr.push({label:{[Rr]:[Tr]},value:{[Rr]:[Fr]}})}return[Ar,Pr]}const removeContexts=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function fixContext(_r){if(_r){const Tr=Array.isArray(_r)?_r:[_r],Rr=[];for(const Ar of Tr)Ar==="http://iiif.io/api/presentation/2/context.json"&&Rr.push("http://iiif.io/api/presentation/3/context.json"),removeContexts.indexOf(Ar)===-1&&Rr.push(Ar);if(Tr.length)return Rr.length===1?Rr[0]:Rr}}function convertMetadata(_r){return _r?_r.map(Tr=>({label:convertLanguageMapping(Tr.label),value:convertLanguageMapping(Tr.value)})):[]}function removeUndefinedProperties(_r){for(const Tr in _r)(typeof _r[Tr]>"u"||_r[Tr]===null)&&delete _r[Tr];return _r}let mintedIdCounter=0;function mintNewIdFromResource(_r,Tr){const Rr=encodeURI(_r.id||_r["@id"]||"").trim();return Rr&&Tr?`${Rr}/${Tr}`:Rr||(mintedIdCounter++,`http://example.org/${_r["@type"]}${Tr?`/${Tr}`:""}/${mintedIdCounter}`)}function technicalProperties$2(_r){const Tr=[..._r.behavior||[]];_r.viewingHint&&Tr.push(_r.viewingHint);let Rr;return Array.isArray(_r.motivation)?Rr=_r.motivation.map(removePrefix):_r.motivation&&(Rr=removePrefix(_r.motivation)),{"@context":_r["@context"]?fixContext(_r["@context"]):void 0,id:(_r["@id"]||mintNewIdFromResource(_r)).trim(),type:getNewType(_r),behavior:Tr.length?Tr:void 0,height:_r.height?_r.height:void 0,width:_r.width?_r.width:void 0,motivation:Rr,viewingDirection:_r.viewingDirection,profile:_r.profile,format:_r.format?_r.format:void 0,duration:void 0,timeMode:void 0}}function descriptiveProperties$2(_r){const[Tr,Rr]=fixLicense(_r.license),Ar=[..._r.metadata?convertMetadata(_r.metadata):[],...Rr];return{rights:Tr,metadata:Ar.length?Ar:void 0,label:_r.label?convertLanguageMapping(_r.label):void 0,requiredStatement:_r.attribution?{label:convertLanguageMapping(configuration.attributionLabel),value:convertLanguageMapping(_r.attribution)}:void 0,navDate:_r.navDate,summary:_r.description?convertLanguageMapping(_r.description):void 0,thumbnail:_r.thumbnail}}function parseWithin(_r){if(!_r.within)return;const Tr=Array.isArray(_r.within)?_r.within:[_r.within],Rr=[];for(const Ar of Tr)if(typeof Ar=="string"){if(Ar)switch(_r["@type"]){case"sc:Manifest":Rr.push({id:Ar,type:"Collection"});break}}else Ar["@id"]&&Rr.push({id:Ar["@id"],type:getNewType(Ar)});return Rr.length?Rr:void 0}function linkingProperties$2(_r){const Tr=_r.related?Array.isArray(_r.related)?_r.related:[_r.related]:[],Rr=_r.contentLayer;return{provider:_r.logo||Tr.length?[{id:configuration.providerId,type:"Agent",homepage:Tr.length?[Tr[0]]:void 0,logo:_r.logo?Array.isArray(_r.logo)?_r.logo:[_r.logo]:void 0,label:convertLanguageMapping(configuration.providerName)}]:void 0,partOf:parseWithin(_r),rendering:_r.rendering,seeAlso:_r.seeAlso,start:_r.startCanvas,service:_r.service?ensureArray$1(_r.service):void 0,supplementary:Rr?[Rr]:void 0}}function embeddedContentProperties(_r){return{chars:_r.chars,format:_r.format?_r.format:void 0,language:_r.language}}function upgradeCollection(_r){return removeUndefinedProperties({...technicalProperties$2(_r),...descriptiveProperties$2(_r),...linkingProperties$2(_r),items:_r.members})}function upgradeManifest(_r){const Tr=[],Rr=[];for(const Pr of _r.sequences||[])Pr.canvases.length&&Tr.push(...Pr.canvases),Pr.behavior&&Rr.push(...Pr.behavior);const Ar=technicalProperties$2(_r);return Rr.length&&(Ar.behavior?Ar.behavior.push(...Rr):Ar.behavior=Rr),removeUndefinedProperties({...Ar,...descriptiveProperties$2(_r),...linkingProperties$2(_r),items:Tr,structures:_r.structures})}function upgradeCanvas(_r){return removeUndefinedProperties({...technicalProperties$2(_r),...descriptiveProperties$2(_r),...linkingProperties$2(_r),annotations:_r.otherContent&&_r.otherContent.length?_r.otherContent:void 0,items:_r.images&&_r.images.length?[{id:mintNewIdFromResource(_r,"annotation-page"),type:"AnnotationPage",items:_r.images}]:void 0})}function upgradeAnnotationList(_r){return removeUndefinedProperties({...technicalProperties$2(_r),...descriptiveProperties$2(_r),...linkingProperties$2(_r),items:_r.resources&&_r.resources.length?_r.resources:void 0})}function upgradeSequence(_r){return!_r.canvases||_r.canvases.length===0?{canvases:[],behavior:[]}:{canvases:_r.canvases,behavior:_r.viewingHint?[_r.viewingHint]:[]}}function upgradeAnnotation(_r){function Tr(Rr){if(Array.isArray(Rr)){if(Rr.length>1)return{type:"List",items:Rr.map(Tr)};Rr=Rr[0]}if(typeof Rr=="string")return encodeURI(Rr).trim();if("@type"in Rr){let Ar;if(typeof Rr.full=="string")Ar=Rr.full;else if(Rr.full["@type"]==="dctypes:Image")Ar={id:Rr.full["@id"],type:"Image"};else if(Rr.full["@type"]==="sc:Canvas")Ar={id:Rr.full["@id"],type:"Canvas"};else throw new Error(`Unsupported source type on annotation: ${Rr.full["@type"]}`);return{type:"SpecificResource",source:Ar,selector:upgradeSelector(Rr.selector)}}else return encodeURI(Rr["@id"]).trim()}return removeUndefinedProperties({...technicalProperties$2(_r),...descriptiveProperties$2(_r),...linkingProperties$2(_r),target:Tr(_r.on),body:Array.isArray(_r.resource)?_r.resource.map(upgradeContentResource):upgradeContentResource(_r.resource)})}function upgradeContentResource(_r){const Tr=_r;return removeUndefinedProperties({...technicalProperties$2(Tr),...descriptiveProperties$2(Tr),...linkingProperties$2(Tr),...embeddedContentProperties(Tr)})}function upgradeChoice(_r){const Tr=[];return _r.default&&_r.default!=="rdf:nil"&&Tr.push(_r.default),_r.item&&_r.item!=="rdf:nil"&&Tr.push(..._r.item),{...technicalProperties$2(_r),...descriptiveProperties$2(_r),items:Tr}}function upgradeRange(_r){return removeUndefinedProperties({...technicalProperties$2(_r),...descriptiveProperties$2(_r),...linkingProperties$2(_r),items:_r.members})}function upgradeService(_r){const{"@id":Tr,"@type":Rr,"@context":Ar,profile:Pr,...Lr}=_r,Mr={};return Tr&&(Mr["@id"]=Tr),Mr["@type"]=getNewType(_r),Mr["@type"]==="unknown"&&(Ar&&Ar.length&&(Mr["@context"]=Ar),Mr["@type"]="Service"),Pr&&(Mr.profile=getProfile(Pr)),removeUndefinedProperties({...Mr,...Lr})}function upgradeLayer(_r){return removeUndefinedProperties({...technicalProperties$2(_r),...descriptiveProperties$2(_r),...linkingProperties$2(_r)})}const presentation2to3=new Traverse({collection:[upgradeCollection],manifest:[upgradeManifest],canvas:[upgradeCanvas],annotationList:[upgradeAnnotationList],sequence:[upgradeSequence],annotation:[upgradeAnnotation],contentResource:[upgradeContentResource],choice:[upgradeChoice],range:[upgradeRange],service:[upgradeService],layer:[upgradeLayer]});function convertPresentation2(_r){return _r&&_r["@context"]&&(_r["@context"]==="http://iiif.io/api/presentation/2/context.json"||_r["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")!==-1||_r["@context"]==="http://www.shared-canvas.org/ns/context.json")||_r["@context"]==="http://iiif.io/api/image/2/context.json"?presentation2to3.traverseUnknown(_r):_r}function upgradeSelector(_r){if((Array.isArray(_r["@type"])&&_r["@type"].includes("oa:SvgSelector")||_r["@type"]=="oa:SvgSelector")&&("chars"in _r||"value"in _r))return{type:"SvgSelector",value:"chars"in _r?_r.chars:_r.value};if(_r["@type"]==="oa:FragmentSelector")return{type:"FragmentSelector",value:_r.value};if(_r["@type"]==="oa:Choice")return[upgradeSelector(_r.default),...(Array.isArray(_r.item)?_r.item:[_r.item]).map(upgradeSelector)];if(_r["@type"]=="iiif:ImageApiSelector")return{type:"ImageApiSelector",region:"region"in _r?_r.region:void 0,rotation:"rotation"in _r?_r.rotation:void 0};throw new Error(`Unsupported selector type: ${_r["@type"]}`)}function getDefaultEntities$1(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function getResource(_r,Tr){if(typeof _r=="string")return{id:_r,type:Tr};if(!_r.id)throw new Error(`Invalid resource does not have an ID (${Tr})`);return _r}function mapToEntities(_r){return(Tr,Rr)=>{const Ar=_r[Tr]?_r[Tr]:{};return Pr=>{const Lr=getResource(Pr,Rr||Tr);return Lr&&Lr.id&&Tr?(Ar[Lr.id]=Ar[Lr.id]?mergeEntities(Ar[Lr.id],Lr):Object.assign({},Lr),{id:Lr.id,type:Tr==="ContentResource"?Tr:Lr.type}):Lr}}}function merge(_r,Tr){if(!Tr)return _r;if(Array.isArray(_r)){if(!Array.isArray(Tr))throw new Error("Cannot merge array with non-array");const Rr=[..._r];for(const Ar of Tr)if(Ar!=null)if(Array.isArray(Ar))Rr.push(Ar);else if(typeof Ar=="object"&&Ar.id&&Ar.type){const Pr=Rr.findIndex(Lr=>Lr.id===Ar.id&&Lr.type===Ar.type);Pr>=0&&(Rr[Pr]=merge(Rr[Pr],Ar))}else _r.indexOf(Ar)===-1&&Rr.push(Ar);return Rr}else if(typeof _r=="object"){if(Array.isArray(Tr)||typeof Tr!="object")throw new Error("Cannot merge object with non-object");const Rr={..._r};for(const[Ar,Pr]of Object.entries(Tr)){const Lr=Rr[Ar];Lr===EMPTY||!Lr?Rr[Ar]=Pr:Rr[Ar]=merge(Lr,Pr)}return Rr}else if(_r)return _r;return Tr}function mergeEntities(_r,Tr){if(typeof _r=="string")return _r;if(Tr.id!==_r.id||Tr.type!==_r.type)throw new Error("Can only merge entities with identical identifiers and type!");return merge({..._r},Tr)}function recordTypeInMapping(_r){return(Tr,Rr)=>Ar=>{const{id:Pr,type:Lr}=getResource(Ar,Rr||Tr);if(typeof Pr>"u")throw new Error("Found invalid entity without an ID.");return Tr==="ContentResource"?_r[Pr]=Tr:_r[Pr]=Lr,Ar}}function hash$1(_r){const Tr=JSON.stringify(_r);let Rr=5381,Ar=Tr.length;for(;Ar;)Rr=Rr*33^Tr.charCodeAt(--Ar);const Lr=(Rr>>>0).toString(16);return Lr.length%2?"0"+Lr:Lr}function addMissingIdToContentResource(_r){return Tr=>typeof Tr=="string"?{id:Tr,type:_r}:Tr.id?Tr.type?Tr:{type:_r,...Tr}:{id:`vault://${hash$1(Tr)}`,type:_r,...Tr}}function ensureDefaultFields(_r){return Tr=>({..._r,...Tr})}function ensureArray(_r){return Array.isArray(_r)?_r:[_r]}function ensureArrayOnAnnotation(_r){return _r.body&&(_r.body=ensureArray(_r.body)),_r.seeAlso&&(_r.seeAlso=ensureArray(_r.seeAlso)),_r.body&&(_r.body=ensureArray(_r.body)),_r.audience&&(_r.audience=ensureArray(_r.audience)),_r.accessibility&&(_r.accessibility=ensureArray(_r.accessibility)),_r.motivation&&(_r.motivation=ensureArray(_r.motivation)),_r}function normalize(_r){const Tr=convertPresentation2(_r),Rr=getDefaultEntities$1(),Ar={},Pr=mapToEntities(Rr),Lr=recordTypeInMapping(Ar),Fr=new Traverse$1({collection:[ensureDefaultFields(emptyCollection),Lr("Collection"),Pr("Collection")],manifest:[ensureDefaultFields(emptyManifest),Lr("Manifest"),Pr("Manifest")],canvas:[ensureDefaultFields(emptyCanvas),Lr("Canvas"),Pr("Canvas")],annotationPage:[addMissingIdToContentResource("AnnotationPage"),ensureDefaultFields(emptyAnnotationPage),Lr("AnnotationPage"),Pr("AnnotationPage")],annotation:[addMissingIdToContentResource("Annotation"),ensureArrayOnAnnotation,Lr("Annotation"),Pr("Annotation")],contentResource:[addMissingIdToContentResource("ContentResource"),Lr("ContentResource"),Pr("ContentResource")],range:[ensureDefaultFields(emptyRange),Lr("Range","Canvas"),Pr("Range","Canvas")],agent:[ensureDefaultFields(emptyAgent),Lr("Agent"),Pr("Agent")]}).traverseUnknown(Tr);return{entities:Rr,resource:Fr,mapping:Ar}}const UNSET="__$UNSET$__",UNWRAP="__$UNWRAP$__";function resolveIfExists$1(_r,Tr){const Rr=_r.requests[Tr],Ar=_r.mapping[Tr];if(!(!Ar||Rr&&Rr.resourceUri&&!_r.entities[Ar][Rr.resourceUri]))return _r.entities[Ar][Rr?Rr.resourceUri:Tr]}function serializedFieldsToObject(_r){const Tr={};for(const[Rr,Ar]of _r){if(Rr===UNWRAP&&Ar!==UNSET)return Ar;Ar!==UNSET&&typeof Ar<"u"&&Ar!==null&&(Tr[Rr]=Ar)}return Tr}function serialize(_r,Tr,Rr){if(!Tr.type||!Tr.id)throw new Error("Unknown entity");if(!Rr[Tr.type])throw new Error(`Serializer not found for ${Tr.type}`);function Ar(Pr){const Lr=Rr[Pr.type];if(!Lr)return UNSET;const Mr=resolveIfExists$1(_r,Pr.id)||(Pr.id&&Pr.type?Pr:null);if(!Mr)return UNSET;const Fr=Lr(Mr,_r,{isTopLevel:Tr.id===Pr.id});let zr=Fr.next();for(;!zr.done;){const Ur=zr.value;let Vr=UNSET;if(Ur)if(Array.isArray(Ur)){const Nr=[];for(const Dr of Ur)Nr.push(Ar(Dr));Vr=Nr}else Vr=Ar(Ur);zr=Fr.next(Vr)}return zr.value===UNSET?UNSET:serializedFieldsToObject(zr.value)}return Ar(Tr)}function languageString2to3(_r){if(!_r)return;const Tr=Object.keys(_r);if(Tr.length!==0){if(Tr.length===1){const Rr=Tr[0];if(!Rr)return"";const Ar=(_r[Rr]||[]).join("");return Rr==="@none"||Rr==="none"||Rr==="en"?Ar:{"@language":Rr,"@value":Ar}}return Tr.map(Rr=>({"@language":Rr,"@value":(_r[Rr]||[]).join("")}))}}function parseCanvasTarget(_r){return Array.isArray(_r)?_r.map(Tr=>parseCanvasTarget(Tr)):typeof _r=="string"?_r:_r.type&&_r.type==="Canvas"?_r.id:_r}function unNestArray(_r,Tr=!1){if(_r)return _r.length>1&&!Tr?_r:_r[0]||void 0}function convertService(_r){if(_r){if(typeof _r=="string")return{"@id":_r};if("@id"in _r){const Tr={..._r};return delete Tr["@type"],Tr}return{"@context":"http://iiif.io/api/image/2/context.json","@id":_r.id,profile:`http://iiif.io/api/image/2/profiles/${_r.profile}.json`}}}function technicalProperties$1(_r,Tr){return[["@id",_r.id],["@type",Tr],["format",_r.format],["height",_r.height],["width",_r.width],["viewingDirection",_r.viewingDirection!=="left-to-right"?_r.viewingDirection:void 0]]}function*descriptiveProperties$1(_r){const Tr=_r.provider?yield _r.provider[0]:void 0;return[["label",languageString2to3(_r.label)],["metadata",_r.metadata&&_r.metadata.length?_r.metadata.map(Rr=>({label:languageString2to3(Rr.label)||"",value:languageString2to3(Rr.value)||""})):void 0],["description",languageString2to3(_r.summary)],["thumbnail",unNestArray(yield _r.thumbnail)],["navDate",_r.navDate],["logo",Tr?unNestArray(Tr.logo):void 0],["homepage",Tr?Tr.homepage:void 0],["attribution",_r.requiredStatement?languageString2to3(_r.requiredStatement.value):void 0]]}function*linkingProperties$1(_r){return[["seeAlso",unNestArray(yield _r.seeAlso)],["service",unNestArray((_r.service||[]).map(convertService))],["rendering",unNestArray(yield _r.rendering)],["startCanvas",_r.start?_r.start.id:void 0]]}const serializeConfigPresentation2={Manifest:function*(_r){return[...technicalProperties$1(_r,"sc:Manifest"),...yield*descriptiveProperties$1(_r),...yield*linkingProperties$1(_r),["sequences",[{"@id":`${_r.id}/sequence0`,"@type":"sc:Sequence",canvases:yield _r.items}]],["structures",yield _r.structures]]},Canvas:function*(_r){const Rr=(yield _r.items)[0];return[...technicalProperties$1(_r,"sc:Canvas"),...yield*descriptiveProperties$1(_r),...yield*linkingProperties$1(_r),["images",Rr?[Rr.resources]:void 0],["annotations",_r.annotations&&_r.annotations.length?unNestArray(yield _r.annotations):void 0]]},AnnotationPage:function*(_r){return[...technicalProperties$1(_r,"sc:AnnotationList"),...yield*descriptiveProperties$1(_r),["resources",_r.items&&_r.items.length?unNestArray(yield _r.items):void 0]]},Annotation:function*(_r){return[["@id",_r.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",parseCanvasTarget(_r.target)],["resource",unNestArray(yield _r.body,!0)]]},ContentResource:function*(_r){switch(_r.type){case"Image":return[...technicalProperties$1(_r,"dctypes:Image"),...yield*descriptiveProperties$1(_r),...yield*linkingProperties$1(_r)];case"Text":case"Dataset":default:return[...technicalProperties$1(_r,void 0),...yield*descriptiveProperties$1(_r)]}},AnnotationCollection:function*(_r){return[["@id",_r.id],["@type","sc:Layer"],["label",languageString2to3(_r.label)]]},Collection:function*(_r){return[...technicalProperties$1(_r,"sc:Collection"),...yield*descriptiveProperties$1(_r),...yield*linkingProperties$1(_r),["members",yield*_r.items]]},Range:function*(_r){const Tr=[],Rr=[];if(_r.items)for(const Ar of _r.items){const Pr=yield Ar;Tr.push({"@id":Ar.id,"@type":Ar.type,label:Pr?Pr.label:void 0,within:_r.id}),Ar.type==="Canvas"&&Rr.push(Ar.id)}return[...technicalProperties$1(_r,"sc:Range"),...yield*descriptiveProperties$1(_r),...yield*linkingProperties$1(_r),["canvases",Rr.length===Tr.length?Rr:void 0],["members",Rr.length!==Tr.length?Tr:void 0]]}};function technicalProperties(_r){var Tr;return[["id",(Tr=_r.id)!=null&&Tr.startsWith("vault://")?void 0:_r.id],["type",_r.type],["format",_r.format],["profile",_r.profile],["height",_r.height],["width",_r.width],["duration",_r.duration||void 0],["viewingDirection",_r.viewingDirection!=="left-to-right"?_r.viewingDirection:void 0],["behavior",_r.behavior&&_r.behavior.length?_r.behavior:void 0],["timeMode",_r.timeMode],["motivation",Array.isArray(_r.motivation)?_r.motivation[0]:_r.motivation]]}function filterEmpty(_r){if(!(!_r||_r.length===0))return _r}function service2compat(_r){if(_r&&_r.type&&_r.type==="ImageService2"){const{id:Tr,type:Rr,profile:Ar,...Pr}=_r,Lr=typeof Ar=="string"?Ar:Array.isArray(Ar)?Ar.find(Mr=>typeof Mr=="string"):"";return{"@id":Tr,"@type":Rr,profile:Lr?Lr.startsWith("http")?Lr:`http://iiif.io/api/image/2/${Lr}.json`:"http://iiif.io/api/image/2/level0.json",...Pr}}return _r}function filterService2Compat(_r){if(!(!_r||_r.length===0))return _r.map(service2compat)}function*descriptiveProperties(_r){return[["label",_r.label],["metadata",filterEmpty(_r.metadata)],["summary",_r.summary],["requiredStatement",_r.requiredStatement],["rights",_r.rights],["navDate",_r.navDate],["language",_r.language],["thumbnail",filterEmpty(yield _r.thumbnail)],["placeholderCanvas",yield _r.placeholderCanvas],["accompanyingCanvas",yield _r.accompanyingCanvas],["provider",filterEmpty(yield _r.provider)]]}function*linkingProperties(_r){return[["seeAlso",filterEmpty(yield _r.seeAlso)],["service",filterService2Compat(_r.service)],["services",filterService2Compat(_r.services)],["rendering",filterEmpty(yield _r.rendering)],["supplementary",filterEmpty(yield _r.supplementary)],["homepage",filterEmpty(yield _r.homepage)],["logo",filterEmpty(yield _r.logo)],["partOf",filterEmpty(yield _r.partOf)],["start",_r.start]]}const serializeConfigPresentation3={Manifest:function*(_r,Tr,{isTopLevel:Rr}){return Rr?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(_r),...yield*descriptiveProperties(_r),...yield*linkingProperties(_r),["items",yield _r.items],["structures",filterEmpty(yield _r.structures)],["annotations",filterEmpty(yield _r.annotations)]]:[...technicalProperties(_r),...yield*descriptiveProperties(_r)]},Canvas:function*(_r){return[...technicalProperties(_r),...yield*descriptiveProperties(_r),...yield*linkingProperties(_r),["items",yield _r.items],["annotations",filterEmpty(yield _r.annotations)]]},Agent:function*(_r){return[["id",_r.id],["type","Agent"],["label",_r.label],...yield*linkingProperties(_r)]},AnnotationPage:function*(_r){return[...Object.entries(_r).map(([Rr,Ar])=>[Rr,Array.isArray(Ar)?filterEmpty(Ar):Ar]).filter(([Rr,Ar])=>Rr!=="items"),...yield*linkingProperties(_r),["items",yield _r.items]]},Service:function*(_r){return[[UNWRAP,service2compat(_r)]]},Annotation:function*(_r){const Tr=Object.entries(_r).map(([Ar,Pr])=>Ar==="motivation"?[Ar,Array.isArray(Pr)?Pr[0]:Pr]:[Ar,Array.isArray(Pr)?filterEmpty(Pr):Pr]).filter(([Ar])=>Ar!=="body"),Rr=yield _r.body;return[...Tr,["body",Rr.length===1?Rr[0]:Rr]]},ContentResource:function*(_r){return[...technicalProperties(_r),...yield*descriptiveProperties(_r),...yield*linkingProperties(_r),["annotations",filterEmpty(yield _r.annotations)],["items",filterEmpty(yield _r.items)]]},AnnotationCollection:function*(_r){return[["id",_r.id],["type","AnnotationCollection"],["label",_r.label]]},Collection:function*(_r,Tr,{isTopLevel:Rr}){return Rr?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(_r),...yield*descriptiveProperties(_r),...yield*linkingProperties(_r),["items",filterEmpty(yield _r.items)]]:[...technicalProperties(_r),...yield*descriptiveProperties(_r)]},Range:function*(_r){const Tr=[];for(const Rr of _r.items)Rr.type==="Range"?Tr.push(yield Rr):Tr.push(Rr);return[...technicalProperties(_r),...yield*descriptiveProperties(_r),...yield*linkingProperties(_r),["items",Tr],["annotations",filterEmpty(yield _r.annotations)]]}};function n$1(_r){return _r==null}function t$1(_r){throw new Error("Argument "+_r+" is empty.")}function o$1(_r){return typeof _r=="string"||typeof _r=="symbol"}function u$1(_r){return!o$1(_r)}function a$1(_r){throw new Error("Argument "+_r+" is invalid, it should be an action type of type: string | symbol")}function s$1(_r,Tr){return n$1(_r)&&t$1(1),u$1(_r)&&a$1(1),Object.assign(function(){var Rr=Tr!=null?Tr.apply(void 0,arguments):void 0;return Object.assign({type:_r},Rr)},{getType:function(){return _r},toString:function(){return _r}})}function y$1(_r,Tr,Rr){return n$1(_r)&&t$1(1),u$1(_r)&&a$1(1),function(){return s$1(_r,function(){var Ar=arguments.length<=0?void 0:arguments[0],Pr=arguments.length<=1?void 0:arguments[1];return Tr==null&&Rr==null||(Ar=Tr!=null?Tr.apply(void 0,arguments):void 0,Pr=Rr!=null?Rr.apply(void 0,arguments):void 0),Object.assign({},Ar!==void 0&&{payload:Ar},{},Pr!==void 0&&{meta:Pr})})}}function _typeof(_r){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Tr){return typeof Tr}:function(Tr){return Tr&&typeof Symbol=="function"&&Tr.constructor===Symbol&&Tr!==Symbol.prototype?"symbol":typeof Tr},_typeof(_r)}function _toPrimitive$1(_r,Tr){if(_typeof(_r)!=="object"||_r===null)return _r;var Rr=_r[Symbol.toPrimitive];if(Rr!==void 0){var Ar=Rr.call(_r,Tr||"default");if(_typeof(Ar)!=="object")return Ar;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Tr==="string"?String:Number)(_r)}function _toPropertyKey$1(_r){var Tr=_toPrimitive$1(_r,"string");return _typeof(Tr)==="symbol"?Tr:String(Tr)}function _defineProperty$1(_r,Tr,Rr){return Tr=_toPropertyKey$1(Tr),Tr in _r?Object.defineProperty(_r,Tr,{value:Rr,enumerable:!0,configurable:!0,writable:!0}):_r[Tr]=Rr,_r}function ownKeys$1(_r,Tr){var Rr=Object.keys(_r);if(Object.getOwnPropertySymbols){var Ar=Object.getOwnPropertySymbols(_r);Tr&&(Ar=Ar.filter(function(Pr){return Object.getOwnPropertyDescriptor(_r,Pr).enumerable})),Rr.push.apply(Rr,Ar)}return Rr}function _objectSpread2$1(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr]!=null?arguments[Tr]:{};Tr%2?ownKeys$1(Object(Rr),!0).forEach(function(Ar){_defineProperty$1(_r,Ar,Rr[Ar])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_r,Object.getOwnPropertyDescriptors(Rr)):ownKeys$1(Object(Rr)).forEach(function(Ar){Object.defineProperty(_r,Ar,Object.getOwnPropertyDescriptor(Rr,Ar))})}return _r}function formatProdErrorMessage(_r){return"Minified Redux error #"+_r+"; visit https://redux.js.org/Errors?code="+_r+" for the full message or use the non-minified dev environment for full errors. "}var $$observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject$4(_r){if(typeof _r!="object"||_r===null)return!1;for(var Tr=_r;Object.getPrototypeOf(Tr)!==null;)Tr=Object.getPrototypeOf(Tr);return Object.getPrototypeOf(_r)===Tr}function createStore$1(_r,Tr,Rr){var Ar;if(typeof Tr=="function"&&typeof Rr=="function"||typeof Rr=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage(0));if(typeof Tr=="function"&&typeof Rr>"u"&&(Rr=Tr,Tr=void 0),typeof Rr<"u"){if(typeof Rr!="function")throw new Error(formatProdErrorMessage(1));return Rr(createStore$1)(_r,Tr)}if(typeof _r!="function")throw new Error(formatProdErrorMessage(2));var Pr=_r,Lr=Tr,Mr=[],Fr=Mr,zr=!1;function Ur(){Fr===Mr&&(Fr=Mr.slice())}function Vr(){if(zr)throw new Error(formatProdErrorMessage(3));return Lr}function Nr(Wr){if(typeof Wr!="function")throw new Error(formatProdErrorMessage(4));if(zr)throw new Error(formatProdErrorMessage(5));var qr=!0;return Ur(),Fr.push(Wr),function(){if(qr){if(zr)throw new Error(formatProdErrorMessage(6));qr=!1,Ur();var Xr=Fr.indexOf(Wr);Fr.splice(Xr,1),Mr=null}}}function Dr(Wr){if(!isPlainObject$4(Wr))throw new Error(formatProdErrorMessage(7));if(typeof Wr.type>"u")throw new Error(formatProdErrorMessage(8));if(zr)throw new Error(formatProdErrorMessage(9));try{zr=!0,Lr=Pr(Lr,Wr)}finally{zr=!1}for(var qr=Mr=Fr,Kr=0;Kr<qr.length;Kr++){var Xr=qr[Kr];Xr()}return Wr}function jr(Wr){if(typeof Wr!="function")throw new Error(formatProdErrorMessage(10));Pr=Wr,Dr({type:ActionTypes.REPLACE})}function Gr(){var Wr,qr=Nr;return Wr={subscribe:function(Xr){if(typeof Xr!="object"||Xr===null)throw new Error(formatProdErrorMessage(11));function Zr(){Xr.next&&Xr.next(Vr())}Zr();var Jr=qr(Zr);return{unsubscribe:Jr}}},Wr[$$observable]=function(){return this},Wr}return Dr({type:ActionTypes.INIT}),Ar={dispatch:Dr,subscribe:Nr,getState:Vr,replaceReducer:jr},Ar[$$observable]=Gr,Ar}function assertReducerShape(_r){Object.keys(_r).forEach(function(Tr){var Rr=_r[Tr],Ar=Rr(void 0,{type:ActionTypes.INIT});if(typeof Ar>"u")throw new Error(formatProdErrorMessage(12));if(typeof Rr(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage(13))})}function combineReducers(_r){for(var Tr=Object.keys(_r),Rr={},Ar=0;Ar<Tr.length;Ar++){var Pr=Tr[Ar];typeof _r[Pr]=="function"&&(Rr[Pr]=_r[Pr])}var Lr=Object.keys(Rr),Mr;try{assertReducerShape(Rr)}catch(Fr){Mr=Fr}return function(zr,Ur){if(zr===void 0&&(zr={}),Mr)throw Mr;for(var Vr=!1,Nr={},Dr=0;Dr<Lr.length;Dr++){var jr=Lr[Dr],Gr=Rr[jr],Wr=zr[jr],qr=Gr(Wr,Ur);if(typeof qr>"u")throw Ur&&Ur.type,new Error(formatProdErrorMessage(14));Nr[jr]=qr,Vr=Vr||qr!==Wr}return Vr=Vr||Lr.length!==Object.keys(zr).length,Vr?Nr:zr}}function compose(){for(var _r=arguments.length,Tr=new Array(_r),Rr=0;Rr<_r;Rr++)Tr[Rr]=arguments[Rr];return Tr.length===0?function(Ar){return Ar}:Tr.length===1?Tr[0]:Tr.reduce(function(Ar,Pr){return function(){return Ar(Pr.apply(void 0,arguments))}})}function applyMiddleware(){for(var _r=arguments.length,Tr=new Array(_r),Rr=0;Rr<_r;Rr++)Tr[Rr]=arguments[Rr];return function(Ar){return function(){var Pr=Ar.apply(void 0,arguments),Lr=function(){throw new Error(formatProdErrorMessage(15))},Mr={getState:Pr.getState,dispatch:function(){return Lr.apply(void 0,arguments)}},Fr=Tr.map(function(zr){return zr(Mr)});return Lr=compose.apply(void 0,Fr)(Pr.dispatch),_objectSpread2$1(_objectSpread2$1({},Pr),{},{dispatch:Lr})}}}const IMPORT_ENTITIES="@iiif/IMPORT_ENTITIES",MODIFY_ENTITY_FIELD="@iiif/MODIFY_ENTITY_FIELD",REORDER_ENTITY_FIELD="@iiif/REORDER_ENTITY_FIELD",ADD_REFERENCE="@iiif/ADD_REFERENCE",REMOVE_REFERENCE="@iiif/REMOVE_REFERENCE",importEntities=y$1(IMPORT_ENTITIES)(),modifyEntityField=y$1(MODIFY_ENTITY_FIELD)(),reorderEntityField=y$1(REORDER_ENTITY_FIELD)(),addReference=y$1(ADD_REFERENCE)(),removeReference=y$1(REMOVE_REFERENCE)(),entityActions={importEntities,modifyEntityField,reorderEntityField,addReference,removeReference},ADD_MAPPING="@iiif/ADD_MAPPING",ADD_MAPPINGS="@iiif/ADD_MAPPINGS",addMapping=y$1(ADD_MAPPING)(),addMappings=y$1(ADD_MAPPINGS)(),SET_META_VALUE="@iiif/SET_META_VALUE",SET_META_VALUE_DYNAMIC="@iiif/SET_META_VALUE_DYNAMIC",UNSET_META_VALUE="@iiif/UNSET_META_VALUE",setMetaValue=y$1(SET_META_VALUE)(),setMetaValueDynamic=y$1(SET_META_VALUE_DYNAMIC)(),unsetMetaValue=y$1(UNSET_META_VALUE)(),metaActions={setMetaValue,setMetaValueDynamic,unsetMetaValue},RESOURCE_ERROR="RESOURCE_ERROR",RESOURCE_LOADING="RESOURCE_LOADING",RESOURCE_READY="RESOURCE_READY",REQUEST_RESOURCE="@iiif/REQUEST_RESOURCE",REQUEST_ERROR="@iiif/REQUEST_ERROR",REQUEST_MISMATCH="@iiif/REQUEST_MISMATCH",REQUEST_COMPLETE="@iiif/REQUEST_COMPLETE",REQUEST_OFFLINE_RESOURCE="@iiif/REQUEST_OFFLINE_RESOURCE",requestResource=y$1(REQUEST_RESOURCE)(),requestError=y$1(REQUEST_ERROR)(),requestMismatch=y$1(REQUEST_MISMATCH)(),requestComplete=y$1(REQUEST_COMPLETE)();y$1(REQUEST_OFFLINE_RESOURCE)();const BATCH_ACTIONS="@iiif/BATCH",BATCH_IMPORT="@iiif/BATCH_IMPORT",batchActions=y$1(BATCH_ACTIONS)();y$1(BATCH_IMPORT)();const actionListFromResource=(_r,Tr)=>{const{entities:Rr,resource:Ar,mapping:Pr}=normalize(Tr);if(Ar.id===void 0)return[requestError({id:_r,message:"ID is not defined in resource."})];const Lr=[importEntities({entities:Rr}),addMappings({mapping:Pr})];return Ar.id!==_r&&(Lr.push(addMapping({id:_r,type:Ar.type})),Lr.push(requestMismatch({requestId:_r,actualId:Ar.id}))),Lr.push(requestComplete({id:_r})),Lr},safeIsNaN=Number.isNaN||function(Tr){return typeof Tr=="number"&&Tr!==Tr};function isEqual(_r,Tr){return!!(_r===Tr||safeIsNaN(_r)&&safeIsNaN(Tr))}function areInputsEqual(_r,Tr){if(!Array.isArray(_r)||!Array.isArray(Tr))return _r===Tr;if(_r.length!==Tr.length)return!1;for(let Rr=0;Rr<_r.length;Rr++)if(!isEqual(_r[Rr],Tr[Rr]))return!1;return!0}function resolveIfExists(_r,Tr){const Rr=_r.iiif.requests[Tr],Ar=_r.iiif.mapping[Tr];if(!(!Ar||!_r.iiif.entities[Ar][Rr.resourceUri]))return _r.iiif.entities[Ar][Rr.resourceUri]}function createFetchHelper(_r,Tr,{waitTimeout:Rr=30}={}){return async(Ar,Pr)=>{const Lr=_r.getState(),Mr=Lr.iiif.requests[Ar];if(Mr)switch(Mr.loadingState){case RESOURCE_ERROR:break;case RESOURCE_LOADING:{let Fr,zr=!1;try{const Ur=await Promise.race([new Promise((Vr,Nr)=>{zr||(Fr=_r.subscribe(()=>{const Dr=_r.getState();if(Dr.iiif.requests[Ar].loadingState===RESOURCE_ERROR){Nr();return}if(Dr.iiif.requests[Ar].loadingState===RESOURCE_READY){const jr=resolveIfExists(Dr,Ar);jr?Vr(jr):Nr()}}))}),new Promise((Vr,Nr)=>setTimeout(()=>{zr=!0,Nr()},Rr*60))]);if(Fr&&Fr(),Ur)return Ur}catch{Fr&&Fr();break}break}case RESOURCE_READY:{const Fr=resolveIfExists(Lr,Ar);if(Fr)return Fr;break}}_r.dispatch(requestResource({id:Ar}));try{const Fr=await Tr(Ar,Pr);!Fr.id&&!Fr["@id"]&&(Fr["@type"]&&(Fr["@id"]=Ar),Fr.id=Ar);const zr=actionListFromResource(Ar,Fr);return _r.dispatch(batchActions({actions:zr})),resolveIfExists(_r.getState(),Ar)}catch(Fr){throw _r.dispatch(requestError({id:Ar,message:Fr.toString()})),Fr}}}function getDefaultEntities(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}const mappingReducer=(_r={},Tr)=>{switch(Tr.type){case ADD_MAPPING:return{..._r,[Tr.payload.id]:Tr.payload.type};case ADD_MAPPINGS:return{..._r,...Tr.payload.mapping};default:return _r}};function isReferenceList(_r,Tr,Rr,Ar){return!(!_r[Rr]||!_r[Rr][Tr]||!_r[Rr][Tr][Ar]||!Array.isArray(_r[Rr][Tr][Ar]))}function quickMerge(_r,Tr){const Rr={},Ar=[];for(const[Pr,Lr]of Object.entries(_r||{})){Ar.push(Pr);const Mr=(Tr||{})[Pr];if(!Mr||Mr.length===0){Rr[Pr]=Lr;continue}Rr[Pr]=Mr}for(const[Pr,Lr]of Object.entries(Tr||{}))Ar.indexOf(Pr)===-1&&(Rr[Pr]=Lr);return Rr}const entitiesReducer=(_r=getDefaultEntities(),Tr)=>{var Rr;switch(Tr.type){case MODIFY_ENTITY_FIELD:{if(!_r[Tr.payload.type]||!_r[Tr.payload.type][Tr.payload.id])return _r;const Ar=_r[Tr.payload.type][Tr.payload.id];return typeof Ar=="string"?_r:{..._r,[Tr.payload.type]:{..._r[Tr.payload.type],[Tr.payload.id]:{...Ar,[Tr.payload.key]:Tr.payload.value}}}}case REORDER_ENTITY_FIELD:{if(!isReferenceList(_r,Tr.payload.id,Tr.payload.type,Tr.payload.key))return _r;const Ar=_r[Tr.payload.type][Tr.payload.id];if(typeof Ar=="string")return _r;const Pr=Array.from(Ar[Tr.payload.key]),[Lr]=Pr.splice(Tr.payload.startIndex,1);return Pr.splice(Tr.payload.endIndex,0,Lr),{..._r,[Tr.payload.type]:{..._r[Tr.payload.type],[Tr.payload.id]:{...Ar,[Tr.payload.key]:Pr}}}}case IMPORT_ENTITIES:{const Ar=Object.keys(Tr.payload.entities),Pr={..._r};for(const Lr of Ar){const Mr=Tr.payload.entities[Lr],Fr={..._r[Lr]||{}};let zr=!1;const Ur=Object.keys(Mr||{})||[];if(Mr&&Ur){for(const Vr of Ur)zr=!0,Fr[Vr]=_r[Lr][Vr]?quickMerge(_r[Lr][Vr],Mr[Vr]):Mr[Vr];zr&&(Pr[Lr]=Fr)}}return Pr}case ADD_REFERENCE:{if(!isReferenceList(_r,Tr.payload.id,Tr.payload.type,Tr.payload.key))return _r;const Ar=_r[Tr.payload.type][Tr.payload.id],Pr=Array.from(Ar[Tr.payload.key]);return Pr.splice(Tr.payload.index||Pr.length+1,0,Tr.payload.reference),{..._r,[Tr.payload.type]:{..._r[Tr.payload.type],[Tr.payload.id]:{...Ar,[Tr.payload.key]:Pr}}}}case REMOVE_REFERENCE:{if(!isReferenceList(_r,Tr.payload.id,Tr.payload.type,Tr.payload.key))return _r;const Ar=_r[Tr.payload.type][Tr.payload.id],Pr=Array.from(Ar[Tr.payload.key]),Lr=Tr.payload.index||Pr.findIndex(Mr=>Mr&&Mr.id===Tr.payload.reference.id);return Lr===-1||((Rr=Pr[Lr])==null?void 0:Rr.id)!==Tr.payload.reference.id?_r:(Pr.splice(Lr,1),{..._r,[Tr.payload.type]:{..._r[Tr.payload.type],[Tr.payload.id]:{...Ar,[Tr.payload.key]:Pr}}})}default:return _r}},requestReducer=(_r={},Tr)=>{switch(Tr.type){case REQUEST_RESOURCE:case REQUEST_OFFLINE_RESOURCE:return{..._r,[Tr.payload.id]:{requestUri:Tr.payload.id,loadingState:RESOURCE_LOADING,uriMismatch:!1,resourceUri:Tr.payload.id}};case REQUEST_MISMATCH:return{..._r,[Tr.payload.requestId]:{..._r[Tr.payload.requestId]||{},uriMismatch:!0,resourceUri:Tr.payload.actualId},[Tr.payload.actualId]:{requestUri:Tr.payload.requestId,loadingState:_r[Tr.payload.requestId].loadingState,uriMismatch:!0,resourceUri:Tr.payload.actualId}};case REQUEST_ERROR:return{..._r,[Tr.payload.id]:{..._r[Tr.payload.id]||{},loadingState:RESOURCE_ERROR,error:Tr.payload.message}};case REQUEST_COMPLETE:return{..._r,[Tr.payload.id]:{..._r[Tr.payload.id]||{},loadingState:RESOURCE_READY,error:void 0}}}return _r},metaReducer=(_r={},Tr)=>{const{id:Rr,updateValue:Ar,value:Pr,meta:Lr,key:Mr}=Tr&&Tr.payload||{};switch(Tr.type){case SET_META_VALUE:return{..._r,[Rr]:{..._r[Rr]||{},[Lr]:{..._r[Rr]?_r[Rr][Lr]||{}:{},[Mr]:Pr}}};case SET_META_VALUE_DYNAMIC:return{..._r,[Rr]:{..._r[Rr]||{},[Lr]:{..._r[Rr]?_r[Rr][Lr]||{}:{},[Mr]:_r[Rr]&&_r[Rr][Lr]?Ar(_r[Rr][Lr][Mr]):Ar(void 0)}}};case UNSET_META_VALUE:return _r[Rr]&&_r[Rr][Lr]&&_r[Rr][Lr][Mr]?{..._r,[Rr]:{..._r[Rr]||{},[Lr]:{..._r[Rr]?_r[Rr][Lr]||{}:{},[Mr]:void 0}}}:_r;default:return _r}};function createBatchReducer(_r){return(Tr,Rr)=>Rr&&Rr.type===BATCH_ACTIONS?Rr.payload.actions.reduce(_r,Tr):Rr&&Rr.type===BATCH_IMPORT?Rr.payload.state:_r(Tr,Rr)}const reducers=combineReducers({mapping:mappingReducer,entities:entitiesReducer,requests:requestReducer,meta:metaReducer}),composeEnhancers=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose;function createStore(_r={}){const{enableDevtools:Tr=!0,iiifStoreName:Rr="iiif",defaultState:Ar={},extraMiddleware:Pr=[],customReducers:Lr={}}=_r,Mr=combineReducers({[Rr]:reducers,...Lr});return createStore$1(createBatchReducer(Mr),Ar,Tr?composeEnhancers(applyMiddleware(...Pr)):compose(applyMiddleware(...Pr)))}function mitt(_r){return{all:_r=_r||new Map,on:function(Tr,Rr){var Ar=_r.get(Tr);Ar?Ar.push(Rr):_r.set(Tr,[Rr])},off:function(Tr,Rr){var Ar=_r.get(Tr);Ar&&(Rr?Ar.splice(Ar.indexOf(Rr)>>>0,1):_r.set(Tr,[]))},emit:function(Tr,Rr){var Ar=_r.get(Tr);Ar&&Ar.slice().map(function(Pr){Pr(Rr)}),(Ar=_r.get("*"))&&Ar.slice().map(function(Pr){Pr(Tr,Rr)})}}}class Vault{constructor(Tr,Rr){ap(this,"options");ap(this,"store");ap(this,"emitter");ap(this,"isBatching",!1);ap(this,"batchQueue",[]);ap(this,"remoteFetcher");ap(this,"staticFetcher");ap(this,"defaultFetcher",Tr=>fetch(Tr).then(Rr=>Rr.json()));ap(this,"middleware",Tr=>Rr=>Ar=>{if(Ar.type===BATCH_ACTIONS){for(const Mr of Ar.payload.actions)this.emitter.emit(Mr.type,{realAction:Mr,state:Tr.getState()});const Lr=Rr(Ar);for(const Mr of Ar.payload.actions)this.emitter.emit(`after:${Ar.type}`,{action:Ar,state:Lr});return Lr}this.emitter.emit(Ar.type,{action:Ar,state:Tr.getState()});const Pr=Rr(Ar);return this.emitter.emit(`after:${Ar.type}`,{action:Ar,state:Pr}),Pr});this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},Tr||{}),this.store=Rr||createStore({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter=mitt(),this.remoteFetcher=createFetchHelper(this.store,this.options.customFetcher),this.staticFetcher=createFetchHelper(this.store,(Ar,Pr)=>Pr)}batch(Tr){this.isBatching=!0;try{Tr(this),this.store.dispatch(batchActions({actions:this.batchQueue}))}catch(Rr){throw this.batchQueue=[],this.isBatching=!1,Rr}this.batchQueue=[],this.isBatching=!1}async asyncBatch(Tr){this.isBatching=!0;try{await Tr(this),this.store.dispatch(batchActions({actions:this.batchQueue}))}catch(Rr){throw this.batchQueue=[],this.isBatching=!1,Rr}this.batchQueue=[],this.isBatching=!1}modifyEntityField(Tr,Rr,Ar){this.dispatch(entityActions.modifyEntityField({id:Tr.id,type:Tr.type,key:Rr,value:Ar}))}dispatch(Tr){this.isBatching?this.batchQueue.push(Tr):this.store.dispatch(Tr)}serialize(Tr,Rr){return serialize(this.getState().iiif,Tr,Rr)}toPresentation2(Tr){return this.serialize(Tr,serializeConfigPresentation2)}toPresentation3(Tr){return this.serialize(Tr,serializeConfigPresentation3)}hydrate(Tr,Rr){return this.get(Tr,Rr,{skipSelfReturn:!1})}get(Tr,Rr,Ar={}){typeof Rr!="string"&&(Ar=Rr||{},Rr=void 0);const{skipSelfReturn:Pr=!0}=Ar||{};if(Array.isArray(Tr))return Tr.map(Ur=>this.get(Ur,Ar));const Lr=this.getState();if(typeof Tr=="string"){const Ur=Rr||Lr.iiif.mapping[Tr];if(!Ur)return Pr?null:{id:Tr,type:"unknown"};Tr={id:Tr,type:Ur}}const Mr=Rr||Tr.type,Fr=Tr.id,zr=Lr.iiif.entities[Mr];if(!zr){const Ur=Lr.iiif.requests[Fr];return Ur&&Ur.resourceUri!==Fr?this.get(Ur.resourceUri,Ar):Pr?null:Tr}return zr[Tr.id]||(Pr?null:Tr)}select(Tr){return Tr(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(Tr,Rr){const Ar=typeof Tr=="string"?Tr:Tr.id;return this.load(Ar,Rr)}loadCollection(Tr,Rr){const Ar=typeof Tr=="string"?Tr:Tr.id;return this.load(Ar,Rr)}load(Tr,Rr){const Ar=typeof Tr=="string"?Tr:Tr.id;return Rr?this.staticFetcher(Ar,Rr):this.remoteFetcher(Ar)}areInputsEqual(Tr,Rr){return areInputsEqual(Tr,Rr)}subscribe(Tr,Rr,Ar){typeof Ar>"u"&&(typeof Rr>"u"||Rr===!1||Rr===!0)&&(Ar=Rr,Rr=Tr,Tr=Lr=>Lr);let Pr=Ar?null:Tr(this.store.getState());return Ar||Rr(Pr,this),this.store.subscribe(()=>{const Lr=this.store.getState(),Mr=Tr(Lr);Pr!==Mr&&!areInputsEqual(Pr,Mr)&&Rr(Mr,this),Pr=Mr})}async ensureLoaded(Tr){const Rr=typeof Tr=="string"?Tr:Tr.id;this.requestStatus(Rr)||await this.load(Rr)}requestStatus(Tr){return this.select(Rr=>Rr.iiif.requests[Tr])}getResourceMeta(Tr,Rr){const Ar=this.getState().iiif.meta[Tr];if(Ar)return Rr?Ar[Rr]:Ar}setMetaValue([Tr,Rr,Ar],Pr){this.dispatch(typeof Pr=="function"?metaActions.setMetaValueDynamic({id:Tr,meta:Rr,key:Ar,updateValue:Pr}):metaActions.setMetaValue({id:Tr,meta:Rr,key:Ar,value:Pr}))}}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends$1.apply(this,arguments)}function $e42e1063c40fb3ef$export$b9ecd428b558ff10(_r,Tr,{checkForDefaultPrevented:Rr=!0}={}){return function(Pr){if(_r==null||_r(Pr),Rr===!1||!Pr.defaultPrevented)return Tr==null?void 0:Tr(Pr)}}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(_r,Tr=[]){let Rr=[];function Ar(Lr,Mr){const Fr=reactExports.createContext(Mr),zr=Rr.length;Rr=[...Rr,Mr];function Ur(Nr){const{scope:Dr,children:jr,...Gr}=Nr,Wr=(Dr==null?void 0:Dr[_r][zr])||Fr,qr=reactExports.useMemo(()=>Gr,Object.values(Gr));return reactExports.createElement(Wr.Provider,{value:qr},jr)}function Vr(Nr,Dr){const jr=(Dr==null?void 0:Dr[_r][zr])||Fr,Gr=reactExports.useContext(jr);if(Gr)return Gr;if(Mr!==void 0)return Mr;throw new Error(`\`${Nr}\` must be used within \`${Lr}\``)}return Ur.displayName=Lr+"Provider",[Ur,Vr]}const Pr=()=>{const Lr=Rr.map(Mr=>reactExports.createContext(Mr));return function(Fr){const zr=(Fr==null?void 0:Fr[_r])||Lr;return reactExports.useMemo(()=>({[`__scope${_r}`]:{...Fr,[_r]:zr}}),[Fr,zr])}};return Pr.scopeName=_r,[Ar,$c512c27ab02ef895$var$composeContextScopes(Pr,...Tr)]}function $c512c27ab02ef895$var$composeContextScopes(..._r){const Tr=_r[0];if(_r.length===1)return Tr;const Rr=()=>{const Ar=_r.map(Pr=>({useScope:Pr(),scopeName:Pr.scopeName}));return function(Lr){const Mr=Ar.reduce((Fr,{useScope:zr,scopeName:Ur})=>{const Nr=zr(Lr)[`__scope${Ur}`];return{...Fr,...Nr}},{});return reactExports.useMemo(()=>({[`__scope${Tr.scopeName}`]:Mr}),[Mr])}};return Rr.scopeName=Tr.scopeName,Rr}function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_r){const Tr=reactExports.useRef(_r);return reactExports.useEffect(()=>{Tr.current=_r}),reactExports.useMemo(()=>(...Rr)=>{var Ar;return(Ar=Tr.current)===null||Ar===void 0?void 0:Ar.call(Tr,...Rr)},[])}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop:_r,defaultProp:Tr,onChange:Rr=()=>{}}){const[Ar,Pr]=$71cd76cc60e0454e$var$useUncontrolledState({defaultProp:Tr,onChange:Rr}),Lr=_r!==void 0,Mr=Lr?_r:Ar,Fr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Rr),zr=reactExports.useCallback(Ur=>{if(Lr){const Nr=typeof Ur=="function"?Ur(_r):Ur;Nr!==_r&&Fr(Nr)}else Pr(Ur)},[Lr,_r,Pr,Fr]);return[Mr,zr]}function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp:_r,onChange:Tr}){const Rr=reactExports.useState(_r),[Ar]=Rr,Pr=reactExports.useRef(Ar),Lr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Tr);return reactExports.useEffect(()=>{Pr.current!==Ar&&(Lr(Ar),Pr.current=Ar)},[Ar,Pr,Lr]),Rr}const $9f79659886946c16$export$e5c5a5f917a5871c=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};function $6ed0406888f73fc4$var$setRef(_r,Tr){typeof _r=="function"?_r(Tr):_r!=null&&(_r.current=Tr)}function $6ed0406888f73fc4$export$43e446d32b3d21af(..._r){return Tr=>_r.forEach(Rr=>$6ed0406888f73fc4$var$setRef(Rr,Tr))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(..._r){return reactExports.useCallback($6ed0406888f73fc4$export$43e446d32b3d21af(..._r),_r)}const $5e63c961fc1ce211$export$8c6ed5c666ac1360=reactExports.forwardRef((_r,Tr)=>{const{children:Rr,...Ar}=_r,Pr=reactExports.Children.toArray(Rr),Lr=Pr.find($5e63c961fc1ce211$var$isSlottable);if(Lr){const Mr=Lr.props.children,Fr=Pr.map(zr=>zr===Lr?reactExports.Children.count(Mr)>1?reactExports.Children.only(null):reactExports.isValidElement(Mr)?Mr.props.children:null:zr);return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},Ar,{ref:Tr}),reactExports.isValidElement(Mr)?reactExports.cloneElement(Mr,void 0,Fr):null)}return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},Ar,{ref:Tr}),Rr)});$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=reactExports.forwardRef((_r,Tr)=>{const{children:Rr,...Ar}=_r;return reactExports.isValidElement(Rr)?reactExports.cloneElement(Rr,{...$5e63c961fc1ce211$var$mergeProps(Ar,Rr.props),ref:Tr?$6ed0406888f73fc4$export$43e446d32b3d21af(Tr,Rr.ref):Rr.ref}):reactExports.Children.count(Rr)>1?reactExports.Children.only(null):null});$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:_r})=>reactExports.createElement(reactExports.Fragment,null,_r);function $5e63c961fc1ce211$var$isSlottable(_r){return reactExports.isValidElement(_r)&&_r.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(_r,Tr){const Rr={...Tr};for(const Ar in Tr){const Pr=_r[Ar],Lr=Tr[Ar];/^on[A-Z]/.test(Ar)?Pr&&Lr?Rr[Ar]=(...Fr)=>{Lr(...Fr),Pr(...Fr)}:Pr&&(Rr[Ar]=Pr):Ar==="style"?Rr[Ar]={...Pr,...Lr}:Ar==="className"&&(Rr[Ar]=[Pr,Lr].filter(Boolean).join(" "))}return{..._r,...Rr}}const $8927f6f2acc4f386$var$NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$8927f6f2acc4f386$export$250ffa63cdc0d034=$8927f6f2acc4f386$var$NODES.reduce((_r,Tr)=>{const Rr=reactExports.forwardRef((Ar,Pr)=>{const{asChild:Lr,...Mr}=Ar,Fr=Lr?$5e63c961fc1ce211$export$8c6ed5c666ac1360:Tr;return reactExports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),reactExports.createElement(Fr,_extends$1({},Mr,{ref:Pr}))});return Rr.displayName=`Primitive.${Tr}`,{..._r,[Tr]:Rr}},{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(_r,Tr){_r&&reactDomExports.flushSync(()=>_r.dispatchEvent(Tr))}function $fe963b355347cc68$export$3e6543de14f8614f(_r,Tr){return reactExports.useReducer((Rr,Ar)=>{const Pr=Tr[Rr][Ar];return Pr??Rr},_r)}const $921a889cee6df7e8$export$99c2b779aa4e8b8b=_r=>{const{present:Tr,children:Rr}=_r,Ar=$921a889cee6df7e8$var$usePresence(Tr),Pr=typeof Rr=="function"?Rr({present:Ar.isPresent}):reactExports.Children.only(Rr),Lr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Ar.ref,Pr.ref);return typeof Rr=="function"||Ar.isPresent?reactExports.cloneElement(Pr,{ref:Lr}):null};$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";function $921a889cee6df7e8$var$usePresence(_r){const[Tr,Rr]=reactExports.useState(),Ar=reactExports.useRef({}),Pr=reactExports.useRef(_r),Lr=reactExports.useRef("none"),Mr=_r?"mounted":"unmounted",[Fr,zr]=$fe963b355347cc68$export$3e6543de14f8614f(Mr,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const Ur=$921a889cee6df7e8$var$getAnimationName(Ar.current);Lr.current=Fr==="mounted"?Ur:"none"},[Fr]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const Ur=Ar.current,Vr=Pr.current;if(Vr!==_r){const Dr=Lr.current,jr=$921a889cee6df7e8$var$getAnimationName(Ur);_r?zr("MOUNT"):jr==="none"||(Ur==null?void 0:Ur.display)==="none"?zr("UNMOUNT"):zr(Vr&&Dr!==jr?"ANIMATION_OUT":"UNMOUNT"),Pr.current=_r}},[_r,zr]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(Tr){const Ur=Nr=>{const jr=$921a889cee6df7e8$var$getAnimationName(Ar.current).includes(Nr.animationName);Nr.target===Tr&&jr&&reactDomExports.flushSync(()=>zr("ANIMATION_END"))},Vr=Nr=>{Nr.target===Tr&&(Lr.current=$921a889cee6df7e8$var$getAnimationName(Ar.current))};return Tr.addEventListener("animationstart",Vr),Tr.addEventListener("animationcancel",Ur),Tr.addEventListener("animationend",Ur),()=>{Tr.removeEventListener("animationstart",Vr),Tr.removeEventListener("animationcancel",Ur),Tr.removeEventListener("animationend",Ur)}}else zr("ANIMATION_END")},[Tr,zr]),{isPresent:["mounted","unmountSuspended"].includes(Fr),ref:reactExports.useCallback(Ur=>{Ur&&(Ar.current=getComputedStyle(Ur)),Rr(Ur)},[])}}function $921a889cee6df7e8$var$getAnimationName(_r){return(_r==null?void 0:_r.animationName)||"none"}const $1746a345f3d73bb7$var$useReactId=$2AODx$react["useId".toString()]||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(_r){const[Tr,Rr]=reactExports.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{_r||Rr(Ar=>Ar??String($1746a345f3d73bb7$var$count++))},[_r]),_r||(Tr?`radix-${Tr}`:"")}const $409067139f391064$var$COLLAPSIBLE_NAME="Collapsible",[$409067139f391064$var$createCollapsibleContext,$409067139f391064$export$952b32dcbe73087a]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($409067139f391064$var$COLLAPSIBLE_NAME),[$409067139f391064$var$CollapsibleProvider,$409067139f391064$var$useCollapsibleContext]=$409067139f391064$var$createCollapsibleContext($409067139f391064$var$COLLAPSIBLE_NAME),$409067139f391064$export$6eb0f7ddcda6131f=reactExports.forwardRef((_r,Tr)=>{const{__scopeCollapsible:Rr,open:Ar,defaultOpen:Pr,disabled:Lr,onOpenChange:Mr,...Fr}=_r,[zr=!1,Ur]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Ar,defaultProp:Pr,onChange:Mr});return reactExports.createElement($409067139f391064$var$CollapsibleProvider,{scope:Rr,disabled:Lr,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),open:zr,onOpenToggle:reactExports.useCallback(()=>Ur(Vr=>!Vr),[Ur])},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-state":$409067139f391064$var$getState(zr),"data-disabled":Lr?"":void 0},Fr,{ref:Tr})))}),$409067139f391064$var$TRIGGER_NAME="CollapsibleTrigger",$409067139f391064$export$c135dce7b15bbbdc=reactExports.forwardRef((_r,Tr)=>{const{__scopeCollapsible:Rr,...Ar}=_r,Pr=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$TRIGGER_NAME,Rr);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button","aria-controls":Pr.contentId,"aria-expanded":Pr.open||!1,"data-state":$409067139f391064$var$getState(Pr.open),"data-disabled":Pr.disabled?"":void 0,disabled:Pr.disabled},Ar,{ref:Tr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onClick,Pr.onOpenToggle)}))}),$409067139f391064$var$CONTENT_NAME="CollapsibleContent",$409067139f391064$export$aadde00976f34151=reactExports.forwardRef((_r,Tr)=>{const{forceMount:Rr,...Ar}=_r,Pr=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$CONTENT_NAME,_r.__scopeCollapsible);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:Rr||Pr.open},({present:Lr})=>reactExports.createElement($409067139f391064$var$CollapsibleContentImpl,_extends$1({},Ar,{ref:Tr,present:Lr})))}),$409067139f391064$var$CollapsibleContentImpl=reactExports.forwardRef((_r,Tr)=>{const{__scopeCollapsible:Rr,present:Ar,children:Pr,...Lr}=_r,Mr=$409067139f391064$var$useCollapsibleContext($409067139f391064$var$CONTENT_NAME,Rr),[Fr,zr]=reactExports.useState(Ar),Ur=reactExports.useRef(null),Vr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Ur),Nr=reactExports.useRef(0),Dr=Nr.current,jr=reactExports.useRef(0),Gr=jr.current,Wr=Mr.open||Fr,qr=reactExports.useRef(Wr),Kr=reactExports.useRef();return reactExports.useEffect(()=>{const Xr=requestAnimationFrame(()=>qr.current=!1);return()=>cancelAnimationFrame(Xr)},[]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const Xr=Ur.current;if(Xr){Kr.current=Kr.current||{transitionDuration:Xr.style.transitionDuration,animationName:Xr.style.animationName},Xr.style.transitionDuration="0s",Xr.style.animationName="none";const Zr=Xr.getBoundingClientRect();Nr.current=Zr.height,jr.current=Zr.width,qr.current||(Xr.style.transitionDuration=Kr.current.transitionDuration,Xr.style.animationName=Kr.current.animationName),zr(Ar)}},[Mr.open,Ar]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-state":$409067139f391064$var$getState(Mr.open),"data-disabled":Mr.disabled?"":void 0,id:Mr.contentId,hidden:!Wr},Lr,{ref:Vr,style:{"--radix-collapsible-content-height":Dr?`${Dr}px`:void 0,"--radix-collapsible-content-width":Gr?`${Gr}px`:void 0,..._r.style}}),Wr&&Pr)});function $409067139f391064$var$getState(_r){return _r?"open":"closed"}const $409067139f391064$export$be92b6f5f03c0fe9=$409067139f391064$export$6eb0f7ddcda6131f,$409067139f391064$export$41fb9f06171c75f4=$409067139f391064$export$c135dce7b15bbbdc,$409067139f391064$export$7c6e2c02157bb7d2=$409067139f391064$export$aadde00976f34151,ErrorBoundaryContext=reactExports.createContext(null),initialState={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(Tr){super(Tr),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState}static getDerivedStateFromError(Tr){return{didCatch:!0,error:Tr}}resetErrorBoundary(){const{error:Tr}=this.state;if(Tr!==null){for(var Rr,Ar,Pr=arguments.length,Lr=new Array(Pr),Mr=0;Mr<Pr;Mr++)Lr[Mr]=arguments[Mr];(Rr=(Ar=this.props).onReset)===null||Rr===void 0||Rr.call(Ar,{args:Lr,reason:"imperative-api"}),this.setState(initialState)}}componentDidCatch(Tr,Rr){var Ar,Pr;(Ar=(Pr=this.props).onError)===null||Ar===void 0||Ar.call(Pr,Tr,Rr)}componentDidUpdate(Tr,Rr){const{didCatch:Ar}=this.state,{resetKeys:Pr}=this.props;if(Ar&&Rr.error!==null&&hasArrayChanged(Tr.resetKeys,Pr)){var Lr,Mr;(Lr=(Mr=this.props).onReset)===null||Lr===void 0||Lr.call(Mr,{next:Pr,prev:Tr.resetKeys,reason:"keys"}),this.setState(initialState)}}render(){const{children:Tr,fallbackRender:Rr,FallbackComponent:Ar,fallback:Pr}=this.props,{didCatch:Lr,error:Mr}=this.state;let Fr=Tr;if(Lr){const zr={error:Mr,resetErrorBoundary:this.resetErrorBoundary};if(reactExports.isValidElement(Pr))Fr=Pr;else if(typeof Rr=="function")Fr=Rr(zr);else if(Ar)Fr=reactExports.createElement(Ar,zr);else throw Mr}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:Lr,error:Mr,resetErrorBoundary:this.resetErrorBoundary}},Fr)}}function hasArrayChanged(){let _r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Tr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _r.length!==Tr.length||_r.some((Rr,Ar)=>!Object.is(Rr,Tr[Ar]))}var e="colors",t="sizes",r="space",n={gap:r,gridGap:r,columnGap:r,gridColumnGap:r,rowGap:r,gridRowGap:r,inset:r,insetBlock:r,insetBlockEnd:r,insetBlockStart:r,insetInline:r,insetInlineEnd:r,insetInlineStart:r,margin:r,marginTop:r,marginRight:r,marginBottom:r,marginLeft:r,marginBlock:r,marginBlockEnd:r,marginBlockStart:r,marginInline:r,marginInlineEnd:r,marginInlineStart:r,padding:r,paddingTop:r,paddingRight:r,paddingBottom:r,paddingLeft:r,paddingBlock:r,paddingBlockEnd:r,paddingBlockStart:r,paddingInline:r,paddingInlineEnd:r,paddingInlineStart:r,top:r,right:r,bottom:r,left:r,scrollMargin:r,scrollMarginTop:r,scrollMarginRight:r,scrollMarginBottom:r,scrollMarginLeft:r,scrollMarginX:r,scrollMarginY:r,scrollMarginBlock:r,scrollMarginBlockEnd:r,scrollMarginBlockStart:r,scrollMarginInline:r,scrollMarginInlineEnd:r,scrollMarginInlineStart:r,scrollPadding:r,scrollPaddingTop:r,scrollPaddingRight:r,scrollPaddingBottom:r,scrollPaddingLeft:r,scrollPaddingX:r,scrollPaddingY:r,scrollPaddingBlock:r,scrollPaddingBlockEnd:r,scrollPaddingBlockStart:r,scrollPaddingInline:r,scrollPaddingInlineEnd:r,scrollPaddingInlineStart:r,fontSize:"fontSizes",background:e,backgroundColor:e,backgroundImage:e,borderImage:e,border:e,borderBlock:e,borderBlockEnd:e,borderBlockStart:e,borderBottom:e,borderBottomColor:e,borderColor:e,borderInline:e,borderInlineEnd:e,borderInlineStart:e,borderLeft:e,borderLeftColor:e,borderRight:e,borderRightColor:e,borderTop:e,borderTopColor:e,caretColor:e,color:e,columnRuleColor:e,fill:e,outline:e,outlineColor:e,stroke:e,textDecorationColor:e,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:t,minBlockSize:t,maxBlockSize:t,inlineSize:t,minInlineSize:t,maxInlineSize:t,width:t,minWidth:t,maxWidth:t,height:t,minHeight:t,maxHeight:t,flexBasis:t,gridTemplateColumns:t,gridTemplateRows:t,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},i=(_r,Tr)=>typeof Tr=="function"?{"()":Function.prototype.toString.call(Tr)}:Tr,o=()=>{const _r=Object.create(null);return(Tr,Rr,...Ar)=>{const Pr=(Lr=>JSON.stringify(Lr,i))(Tr);return Pr in _r?_r[Pr]:_r[Pr]=Rr(Tr,...Ar)}},l=Symbol.for("sxs.internal"),s=(_r,Tr)=>Object.defineProperties(_r,Object.getOwnPropertyDescriptors(Tr)),a=_r=>{for(const Tr in _r)return!0;return!1},{hasOwnProperty:c}=Object.prototype,d$1=_r=>_r.includes("-")?_r:_r.replace(/[A-Z]/g,Tr=>"-"+Tr.toLowerCase()),g=/\s+(?![^()]*\))/,p=_r=>Tr=>_r(...typeof Tr=="string"?String(Tr).split(g):[Tr]),u={appearance:_r=>({WebkitAppearance:_r,appearance:_r}),backfaceVisibility:_r=>({WebkitBackfaceVisibility:_r,backfaceVisibility:_r}),backdropFilter:_r=>({WebkitBackdropFilter:_r,backdropFilter:_r}),backgroundClip:_r=>({WebkitBackgroundClip:_r,backgroundClip:_r}),boxDecorationBreak:_r=>({WebkitBoxDecorationBreak:_r,boxDecorationBreak:_r}),clipPath:_r=>({WebkitClipPath:_r,clipPath:_r}),content:_r=>({content:_r.includes('"')||_r.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(_r)?_r:`"${_r}"`}),hyphens:_r=>({WebkitHyphens:_r,hyphens:_r}),maskImage:_r=>({WebkitMaskImage:_r,maskImage:_r}),maskSize:_r=>({WebkitMaskSize:_r,maskSize:_r}),tabSize:_r=>({MozTabSize:_r,tabSize:_r}),textSizeAdjust:_r=>({WebkitTextSizeAdjust:_r,textSizeAdjust:_r}),userSelect:_r=>({WebkitUserSelect:_r,userSelect:_r}),marginBlock:p((_r,Tr)=>({marginBlockStart:_r,marginBlockEnd:Tr||_r})),marginInline:p((_r,Tr)=>({marginInlineStart:_r,marginInlineEnd:Tr||_r})),maxSize:p((_r,Tr)=>({maxBlockSize:_r,maxInlineSize:Tr||_r})),minSize:p((_r,Tr)=>({minBlockSize:_r,minInlineSize:Tr||_r})),paddingBlock:p((_r,Tr)=>({paddingBlockStart:_r,paddingBlockEnd:Tr||_r})),paddingInline:p((_r,Tr)=>({paddingInlineStart:_r,paddingInlineEnd:Tr||_r}))},h=/([\d.]+)([^]*)/,f=(_r,Tr)=>_r.length?_r.reduce((Rr,Ar)=>(Rr.push(...Tr.map(Pr=>Pr.includes("&")?Pr.replace(/&/g,/[ +>|~]/.test(Ar)&&/&.*&/.test(Pr)?`:is(${Ar})`:Ar):Ar+" "+Pr)),Rr),[]):Tr,m=(_r,Tr)=>_r in b&&typeof Tr=="string"?Tr.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(Rr,Ar,Pr,Lr)=>Ar+(Pr==="stretch"?`-moz-available${Lr};${d$1(_r)}:${Ar}-webkit-fill-available`:`-moz-fit-content${Lr};${d$1(_r)}:${Ar}fit-content`)+Lr):String(Tr),b={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},S$1=_r=>_r?_r+"-":"",k$1=(_r,Tr,Rr)=>_r.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(Ar,Pr,Lr,Mr,Fr)=>Mr=="$"==!!Lr?Ar:(Pr||Mr=="--"?"calc(":"")+"var(--"+(Mr==="$"?S$1(Tr)+(Fr.includes("$")?"":S$1(Rr))+Fr.replace(/\$/g,"-"):Fr)+")"+(Pr||Mr=="--"?"*"+(Pr||"")+(Lr||"1")+")":"")),y=/\s*,\s*(?![^()]*\))/,B$1=Object.prototype.toString,$=(_r,Tr,Rr,Ar,Pr)=>{let Lr,Mr,Fr;const zr=(Ur,Vr,Nr)=>{let Dr,jr;const Gr=Wr=>{for(Dr in Wr){const Xr=Dr.charCodeAt(0)===64,Zr=Xr&&Array.isArray(Wr[Dr])?Wr[Dr]:[Wr[Dr]];for(jr of Zr){const Jr=/[A-Z]/.test(Kr=Dr)?Kr:Kr.replace(/-[^]/g,es=>es[1].toUpperCase()),_i=typeof jr=="object"&&jr&&jr.toString===B$1&&(!Ar.utils[Jr]||!Vr.length);if(Jr in Ar.utils&&!_i){const es=Ar.utils[Jr];if(es!==Mr){Mr=es,Gr(es(jr)),Mr=null;continue}}else if(Jr in u){const es=u[Jr];if(es!==Fr){Fr=es,Gr(es(jr)),Fr=null;continue}}if(Xr&&(qr=Dr.slice(1)in Ar.media?"@media "+Ar.media[Dr.slice(1)]:Dr,Dr=qr.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(es,ts,rs,ns,as,ls)=>{const us=h.test(ts),xs=.0625*(us?-1:1),[Ts,vs]=us?[ns,ts]:[ts,ns];return"("+(rs[0]==="="?"":rs[0]===">"===us?"max-":"min-")+Ts+":"+(rs[0]!=="="&&rs.length===1?vs.replace(h,(gs,fs,ys)=>Number(fs)+xs*(rs===">"?1:-1)+ys):vs)+(as?") and ("+(as[0]===">"?"min-":"max-")+Ts+":"+(as.length===1?ls.replace(h,(gs,fs,ys)=>Number(fs)+xs*(as===">"?-1:1)+ys):ls):"")+")"})),_i){const es=Xr?Nr.concat(Dr):[...Nr],ts=Xr?[...Vr]:f(Vr,Dr.split(y));Lr!==void 0&&Pr(x$1(...Lr)),Lr=void 0,zr(jr,ts,es)}else Lr===void 0&&(Lr=[[],Vr,Nr]),Dr=Xr||Dr.charCodeAt(0)!==36?Dr:`--${S$1(Ar.prefix)}${Dr.slice(1).replace(/\$/g,"-")}`,jr=_i?jr:typeof jr=="number"?jr&&Jr in I?String(jr)+"px":String(jr):k$1(m(Jr,jr??""),Ar.prefix,Ar.themeMap[Jr]),Lr[0].push(`${Xr?`${Dr} `:`${d$1(Dr)}:`}${jr}`)}}var qr,Kr};Gr(Ur),Lr!==void 0&&Pr(x$1(...Lr)),Lr=void 0};zr(_r,Tr,Rr)},x$1=(_r,Tr,Rr)=>`${Rr.map(Ar=>`${Ar}{`).join("")}${Tr.length?`${Tr.join(",")}{`:""}${_r.join(";")}${Tr.length?"}":""}${Array(Rr.length?Rr.length+1:0).join("}")}`,I={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},R$1=_r=>String.fromCharCode(_r+(_r>25?39:97)),z$1=_r=>(Tr=>{let Rr,Ar="";for(Rr=Math.abs(Tr);Rr>52;Rr=Rr/52|0)Ar=R$1(Rr%52)+Ar;return R$1(Rr%52)+Ar})(((Tr,Rr)=>{let Ar=Rr.length;for(;Ar;)Tr=33*Tr^Rr.charCodeAt(--Ar);return Tr})(5381,JSON.stringify(_r))>>>0),W$1=["themed","global","styled","onevar","resonevar","allvar","inline"],j$1=_r=>{if(_r.href&&!_r.href.startsWith(location.origin))return!1;try{return!!_r.cssRules}catch{return!1}},E=_r=>{let Tr;const Rr=()=>{const{cssRules:Pr}=Tr.sheet;return[].map.call(Pr,(Lr,Mr)=>{const{cssText:Fr}=Lr;let zr="";if(Fr.startsWith("--sxs"))return"";if(Pr[Mr-1]&&(zr=Pr[Mr-1].cssText).startsWith("--sxs")){if(!Lr.cssRules.length)return"";for(const Ur in Tr.rules)if(Tr.rules[Ur].group===Lr)return`--sxs{--sxs:${[...Tr.rules[Ur].cache].join(" ")}}${Fr}`;return Lr.cssRules.length?`${zr}${Fr}`:""}return Fr}).join("")},Ar=()=>{if(Tr){const{rules:Fr,sheet:zr}=Tr;if(!zr.deleteRule){for(;Object(Object(zr.cssRules)[0]).type===3;)zr.cssRules.splice(0,1);zr.cssRules=[]}for(const Ur in Fr)delete Fr[Ur]}const Pr=Object(_r).styleSheets||[];for(const Fr of Pr)if(j$1(Fr)){for(let zr=0,Ur=Fr.cssRules;Ur[zr];++zr){const Vr=Object(Ur[zr]);if(Vr.type!==1)continue;const Nr=Object(Ur[zr+1]);if(Nr.type!==4)continue;++zr;const{cssText:Dr}=Vr;if(!Dr.startsWith("--sxs"))continue;const jr=Dr.slice(14,-3).trim().split(/\s+/),Gr=W$1[jr[0]];Gr&&(Tr||(Tr={sheet:Fr,reset:Ar,rules:{},toString:Rr}),Tr.rules[Gr]={group:Nr,index:zr,cache:new Set(jr)})}if(Tr)break}if(!Tr){const Fr=(zr,Ur)=>({type:Ur,cssRules:[],insertRule(Vr,Nr){this.cssRules.splice(Nr,0,Fr(Vr,{import:3,undefined:1}[(Vr.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return zr==="@media{}"?`@media{${[].map.call(this.cssRules,Vr=>Vr.cssText).join("")}}`:zr}});Tr={sheet:_r?(_r.head||_r).appendChild(document.createElement("style")).sheet:Fr("","text/css"),rules:{},reset:Ar,toString:Rr}}const{sheet:Lr,rules:Mr}=Tr;for(let Fr=W$1.length-1;Fr>=0;--Fr){const zr=W$1[Fr];if(!Mr[zr]){const Ur=W$1[Fr+1],Vr=Mr[Ur]?Mr[Ur].index:Lr.cssRules.length;Lr.insertRule("@media{}",Vr),Lr.insertRule(`--sxs{--sxs:${Fr}}`,Vr),Mr[zr]={group:Lr.cssRules[Vr+1],index:Vr,cache:new Set([Fr])}}v(Mr[zr])}};return Ar(),Tr},v=_r=>{const Tr=_r.group;let Rr=Tr.cssRules.length;_r.apply=Ar=>{try{Tr.insertRule(Ar,Rr),++Rr}catch{}}},T=Symbol(),w=o(),M$1=(_r,Tr)=>w(_r,()=>(...Rr)=>{let Ar={type:null,composers:new Set};for(const Pr of Rr)if(Pr!=null)if(Pr[l]){Ar.type==null&&(Ar.type=Pr[l].type);for(const Lr of Pr[l].composers)Ar.composers.add(Lr)}else Pr.constructor!==Object||Pr.$$typeof?Ar.type==null&&(Ar.type=Pr):Ar.composers.add(C(Pr,_r));return Ar.type==null&&(Ar.type="span"),Ar.composers.size||Ar.composers.add(["PJLV",{},[],[],{},[]]),P$1(_r,Ar,Tr)}),C=({variants:_r,compoundVariants:Tr,defaultVariants:Rr,...Ar},Pr)=>{const Lr=`${S$1(Pr.prefix)}c-${z$1(Ar)}`,Mr=[],Fr=[],zr=Object.create(null),Ur=[];for(const Dr in Rr)zr[Dr]=String(Rr[Dr]);if(typeof _r=="object"&&_r)for(const Dr in _r){Vr=zr,Nr=Dr,c.call(Vr,Nr)||(zr[Dr]="undefined");const jr=_r[Dr];for(const Gr in jr){const Wr={[Dr]:String(Gr)};String(Gr)==="undefined"&&Ur.push(Dr);const qr=jr[Gr],Kr=[Wr,qr,!a(qr)];Mr.push(Kr)}}var Vr,Nr;if(typeof Tr=="object"&&Tr)for(const Dr of Tr){let{css:jr,...Gr}=Dr;jr=typeof jr=="object"&&jr||{};for(const qr in Gr)Gr[qr]=String(Gr[qr]);const Wr=[Gr,jr,!a(jr)];Fr.push(Wr)}return[Lr,Ar,Mr,Fr,zr,Ur]},P$1=(_r,Tr,Rr)=>{const[Ar,Pr,Lr,Mr]=L(Tr.composers),Fr=typeof Tr.type=="function"||Tr.type.$$typeof?(Nr=>{function Dr(){for(let jr=0;jr<Dr[T].length;jr++){const[Gr,Wr]=Dr[T][jr];Nr.rules[Gr].apply(Wr)}return Dr[T]=[],null}return Dr[T]=[],Dr.rules={},W$1.forEach(jr=>Dr.rules[jr]={apply:Gr=>Dr[T].push([jr,Gr])}),Dr})(Rr):null,zr=(Fr||Rr).rules,Ur=`.${Ar}${Pr.length>1?`:where(.${Pr.slice(1).join(".")})`:""}`,Vr=Nr=>{Nr=typeof Nr=="object"&&Nr||A$1;const{css:Dr,...jr}=Nr,Gr={};for(const Kr in Lr)if(delete jr[Kr],Kr in Nr){let Xr=Nr[Kr];typeof Xr=="object"&&Xr?Gr[Kr]={"@initial":Lr[Kr],...Xr}:(Xr=String(Xr),Gr[Kr]=Xr!=="undefined"||Mr.has(Kr)?Xr:Lr[Kr])}else Gr[Kr]=Lr[Kr];const Wr=new Set([...Pr]);for(const[Kr,Xr,Zr,Jr]of Tr.composers){Rr.rules.styled.cache.has(Kr)||(Rr.rules.styled.cache.add(Kr),$(Xr,[`.${Kr}`],[],_r,ts=>{zr.styled.apply(ts)}));const _i=O(Zr,Gr,_r.media),es=O(Jr,Gr,_r.media,!0);for(const ts of _i)if(ts!==void 0)for(const[rs,ns,as]of ts){const ls=`${Kr}-${z$1(ns)}-${rs}`;Wr.add(ls);const us=(as?Rr.rules.resonevar:Rr.rules.onevar).cache,xs=as?zr.resonevar:zr.onevar;us.has(ls)||(us.add(ls),$(ns,[`.${ls}`],[],_r,Ts=>{xs.apply(Ts)}))}for(const ts of es)if(ts!==void 0)for(const[rs,ns]of ts){const as=`${Kr}-${z$1(ns)}-${rs}`;Wr.add(as),Rr.rules.allvar.cache.has(as)||(Rr.rules.allvar.cache.add(as),$(ns,[`.${as}`],[],_r,ls=>{zr.allvar.apply(ls)}))}}if(typeof Dr=="object"&&Dr){const Kr=`${Ar}-i${z$1(Dr)}-css`;Wr.add(Kr),Rr.rules.inline.cache.has(Kr)||(Rr.rules.inline.cache.add(Kr),$(Dr,[`.${Kr}`],[],_r,Xr=>{zr.inline.apply(Xr)}))}for(const Kr of String(Nr.className||"").trim().split(/\s+/))Kr&&Wr.add(Kr);const qr=jr.className=[...Wr].join(" ");return{type:Tr.type,className:qr,selector:Ur,props:jr,toString:()=>qr,deferredInjector:Fr}};return s(Vr,{className:Ar,selector:Ur,[l]:Tr,toString:()=>(Rr.rules.styled.cache.has(Ar)||Vr(),Ar)})},L=_r=>{let Tr="";const Rr=[],Ar={},Pr=[];for(const[Lr,,,,Mr,Fr]of _r){Tr===""&&(Tr=Lr),Rr.push(Lr),Pr.push(...Fr);for(const zr in Mr){const Ur=Mr[zr];(Ar[zr]===void 0||Ur!=="undefined"||Fr.includes(Ur))&&(Ar[zr]=Ur)}}return[Tr,Rr,Ar,new Set(Pr)]},O=(_r,Tr,Rr,Ar)=>{const Pr=[];e:for(let[Lr,Mr,Fr]of _r){if(Fr)continue;let zr,Ur=0,Vr=!1;for(zr in Lr){const Nr=Lr[zr];let Dr=Tr[zr];if(Dr!==Nr){if(typeof Dr!="object"||!Dr)continue e;{let jr,Gr,Wr=0;for(const qr in Dr){if(Nr===String(Dr[qr])){if(qr!=="@initial"){const Kr=qr.slice(1);(Gr=Gr||[]).push(Kr in Rr?Rr[Kr]:qr.replace(/^@media ?/,"")),Vr=!0}Ur+=Wr,jr=!0}++Wr}if(Gr&&Gr.length&&(Mr={["@media "+Gr.join(", ")]:Mr}),!jr)continue e}}}(Pr[Ur]=Pr[Ur]||[]).push([Ar?"cv":`${zr}-${Lr[zr]}`,Mr,Vr])}return Pr},A$1={},N$1=o(),D=(_r,Tr)=>N$1(_r,()=>(...Rr)=>{const Ar=()=>{for(let Pr of Rr){Pr=typeof Pr=="object"&&Pr||{};let Lr=z$1(Pr);if(!Tr.rules.global.cache.has(Lr)){if(Tr.rules.global.cache.add(Lr),"@import"in Pr){let Mr=[].indexOf.call(Tr.sheet.cssRules,Tr.rules.themed.group)-1;for(let Fr of[].concat(Pr["@import"]))Fr=Fr.includes('"')||Fr.includes("'")?Fr:`"${Fr}"`,Tr.sheet.insertRule(`@import ${Fr};`,Mr++);delete Pr["@import"]}$(Pr,[],[],_r,Mr=>{Tr.rules.global.apply(Mr)})}}return""};return s(Ar,{toString:Ar})}),H$1=o(),V$1=(_r,Tr)=>H$1(_r,()=>Rr=>{const Ar=`${S$1(_r.prefix)}k-${z$1(Rr)}`,Pr=()=>{if(!Tr.rules.global.cache.has(Ar)){Tr.rules.global.cache.add(Ar);const Lr=[];$(Rr,[],[],_r,Fr=>Lr.push(Fr));const Mr=`@keyframes ${Ar}{${Lr.join("")}}`;Tr.rules.global.apply(Mr)}return Ar};return s(Pr,{get name(){return Pr()},toString:Pr})}),G$1=class{constructor(Tr,Rr,Ar,Pr){this.token=Tr==null?"":String(Tr),this.value=Rr==null?"":String(Rr),this.scale=Ar==null?"":String(Ar),this.prefix=Pr==null?"":String(Pr)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+S$1(this.prefix)+S$1(this.scale)+this.token}toString(){return this.computedValue}},F$1=o(),J=(_r,Tr)=>F$1(_r,()=>(Rr,Ar)=>{Ar=typeof Rr=="object"&&Rr||Object(Ar);const Pr=`.${Rr=(Rr=typeof Rr=="string"?Rr:"")||`${S$1(_r.prefix)}t-${z$1(Ar)}`}`,Lr={},Mr=[];for(const zr in Ar){Lr[zr]={};for(const Ur in Ar[zr]){const Vr=`--${S$1(_r.prefix)}${zr}-${Ur}`,Nr=k$1(String(Ar[zr][Ur]),_r.prefix,zr);Lr[zr][Ur]=new G$1(Ur,Nr,zr,_r.prefix),Mr.push(`${Vr}:${Nr}`)}}const Fr=()=>{if(Mr.length&&!Tr.rules.themed.cache.has(Rr)){Tr.rules.themed.cache.add(Rr);const zr=`${Ar===_r.theme?":root,":""}.${Rr}{${Mr.join(";")}}`;Tr.rules.themed.apply(zr)}return Rr};return{...Lr,get className(){return Fr()},selector:Pr,toString:Fr}}),U$1=o(),X$1,Y$1=o(),q$1=_r=>{const Tr=(Rr=>{let Ar=!1;const Pr=U$1(Rr,Lr=>{Ar=!0;const Mr="prefix"in(Lr=typeof Lr=="object"&&Lr||{})?String(Lr.prefix):"",Fr=typeof Lr.media=="object"&&Lr.media||{},zr=typeof Lr.root=="object"?Lr.root||null:globalThis.document||null,Ur=typeof Lr.theme=="object"&&Lr.theme||{},Vr={prefix:Mr,media:Fr,theme:Ur,themeMap:typeof Lr.themeMap=="object"&&Lr.themeMap||{...n},utils:typeof Lr.utils=="object"&&Lr.utils||{}},Nr=E(zr),Dr={css:M$1(Vr,Nr),globalCss:D(Vr,Nr),keyframes:V$1(Vr,Nr),createTheme:J(Vr,Nr),reset(){Nr.reset(),Dr.theme.toString()},theme:{},sheet:Nr,config:Vr,prefix:Mr,getCssText:Nr.toString,toString:Nr.toString};return String(Dr.theme=Dr.createTheme(Ur)),Dr});return Ar||Pr.reset(),Pr})(_r);return Tr.styled=(({config:Rr,sheet:Ar})=>Y$1(Rr,()=>{const Pr=M$1(Rr,Ar);return(...Lr)=>{const Mr=Pr(...Lr),Fr=Mr[l].type,zr=React$1.forwardRef((Ur,Vr)=>{const Nr=Ur&&Ur.as||Fr,{props:Dr,deferredInjector:jr}=Mr(Ur);return delete Dr.as,Dr.ref=Vr,jr?React$1.createElement(React$1.Fragment,null,React$1.createElement(Nr,Dr),React$1.createElement(jr,null)):React$1.createElement(Nr,Dr)});return zr.className=Mr.className,zr.displayName=`Styled.${Fr.displayName||Fr.name||Fr}`,zr.selector=Mr.selector,zr.toString=()=>Mr.selector,zr[l]=Mr[l],zr}}))(Tr),Tr},K$1=()=>X$1||(X$1=q$1()),Q$1=(..._r)=>K$1().createTheme(..._r);function $e02a7d9cb1dc128c$export$c74125a8e3af6bb2(_r){const Tr=_r+"CollectionProvider",[Rr,Ar]=$c512c27ab02ef895$export$50c7b4e9d9f19c1(Tr),[Pr,Lr]=Rr(Tr,{collectionRef:{current:null},itemMap:new Map}),Mr=jr=>{const{scope:Gr,children:Wr}=jr,qr=React$1.useRef(null),Kr=React$1.useRef(new Map).current;return React$1.createElement(Pr,{scope:Gr,itemMap:Kr,collectionRef:qr},Wr)},Fr=_r+"CollectionSlot",zr=React$1.forwardRef((jr,Gr)=>{const{scope:Wr,children:qr}=jr,Kr=Lr(Fr,Wr),Xr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Gr,Kr.collectionRef);return React$1.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{ref:Xr},qr)}),Ur=_r+"CollectionItemSlot",Vr="data-radix-collection-item",Nr=React$1.forwardRef((jr,Gr)=>{const{scope:Wr,children:qr,...Kr}=jr,Xr=React$1.useRef(null),Zr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Gr,Xr),Jr=Lr(Ur,Wr);return React$1.useEffect(()=>(Jr.itemMap.set(Xr,{ref:Xr,...Kr}),()=>void Jr.itemMap.delete(Xr))),React$1.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{[Vr]:"",ref:Zr},qr)});function Dr(jr){const Gr=Lr(_r+"CollectionConsumer",jr);return React$1.useCallback(()=>{const qr=Gr.collectionRef.current;if(!qr)return[];const Kr=Array.from(qr.querySelectorAll(`[${Vr}]`));return Array.from(Gr.itemMap.values()).sort((Jr,_i)=>Kr.indexOf(Jr.ref.current)-Kr.indexOf(_i.ref.current))},[Gr.collectionRef,Gr.itemMap])}return[{Provider:Mr,Slot:zr,ItemSlot:Nr},Dr,Ar]}const $f631663db3294ace$var$DirectionContext=reactExports.createContext(void 0);function $f631663db3294ace$export$b39126d51d94e6f3(_r){const Tr=reactExports.useContext($f631663db3294ace$var$DirectionContext);return _r||Tr||"ltr"}const $d7bdfb9eb0fdf311$var$ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",$d7bdfb9eb0fdf311$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d7bdfb9eb0fdf311$var$GROUP_NAME="RovingFocusGroup",[$d7bdfb9eb0fdf311$var$Collection,$d7bdfb9eb0fdf311$var$useCollection,$d7bdfb9eb0fdf311$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($d7bdfb9eb0fdf311$var$GROUP_NAME),[$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext,$d7bdfb9eb0fdf311$export$c7109489551a4f4]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($d7bdfb9eb0fdf311$var$GROUP_NAME,[$d7bdfb9eb0fdf311$var$createCollectionScope]),[$d7bdfb9eb0fdf311$var$RovingFocusProvider,$d7bdfb9eb0fdf311$var$useRovingFocusContext]=$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext($d7bdfb9eb0fdf311$var$GROUP_NAME),$d7bdfb9eb0fdf311$export$8699f7c8af148338=reactExports.forwardRef((_r,Tr)=>reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Provider,{scope:_r.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Slot,{scope:_r.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusGroupImpl,_extends$1({},_r,{ref:Tr}))))),$d7bdfb9eb0fdf311$var$RovingFocusGroupImpl=reactExports.forwardRef((_r,Tr)=>{const{__scopeRovingFocusGroup:Rr,orientation:Ar,loop:Pr=!1,dir:Lr,currentTabStopId:Mr,defaultCurrentTabStopId:Fr,onCurrentTabStopIdChange:zr,onEntryFocus:Ur,...Vr}=_r,Nr=reactExports.useRef(null),Dr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Nr),jr=$f631663db3294ace$export$b39126d51d94e6f3(Lr),[Gr=null,Wr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Mr,defaultProp:Fr,onChange:zr}),[qr,Kr]=reactExports.useState(!1),Xr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Ur),Zr=$d7bdfb9eb0fdf311$var$useCollection(Rr),Jr=reactExports.useRef(!1),[_i,es]=reactExports.useState(0);return reactExports.useEffect(()=>{const ts=Nr.current;if(ts)return ts.addEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,Xr),()=>ts.removeEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,Xr)},[Xr]),reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusProvider,{scope:Rr,orientation:Ar,dir:jr,loop:Pr,currentTabStopId:Gr,onItemFocus:reactExports.useCallback(ts=>Wr(ts),[Wr]),onItemShiftTab:reactExports.useCallback(()=>Kr(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>es(ts=>ts+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>es(ts=>ts-1),[])},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({tabIndex:qr||_i===0?-1:0,"data-orientation":Ar},Vr,{ref:Dr,style:{outline:"none",..._r.style},onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onMouseDown,()=>{Jr.current=!0}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onFocus,ts=>{const rs=!Jr.current;if(ts.target===ts.currentTarget&&rs&&!qr){const ns=new CustomEvent($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,$d7bdfb9eb0fdf311$var$EVENT_OPTIONS);if(ts.currentTarget.dispatchEvent(ns),!ns.defaultPrevented){const as=Zr().filter(vs=>vs.focusable),ls=as.find(vs=>vs.active),us=as.find(vs=>vs.id===Gr),Ts=[ls,us,...as].filter(Boolean).map(vs=>vs.ref.current);$d7bdfb9eb0fdf311$var$focusFirst(Ts)}}Jr.current=!1}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onBlur,()=>Kr(!1))})))}),$d7bdfb9eb0fdf311$var$ITEM_NAME="RovingFocusGroupItem",$d7bdfb9eb0fdf311$export$ab9df7c53fe8454=reactExports.forwardRef((_r,Tr)=>{const{__scopeRovingFocusGroup:Rr,focusable:Ar=!0,active:Pr=!1,tabStopId:Lr,...Mr}=_r,Fr=$1746a345f3d73bb7$export$f680877a34711e37(),zr=Lr||Fr,Ur=$d7bdfb9eb0fdf311$var$useRovingFocusContext($d7bdfb9eb0fdf311$var$ITEM_NAME,Rr),Vr=Ur.currentTabStopId===zr,Nr=$d7bdfb9eb0fdf311$var$useCollection(Rr),{onFocusableItemAdd:Dr,onFocusableItemRemove:jr}=Ur;return reactExports.useEffect(()=>{if(Ar)return Dr(),()=>jr()},[Ar,Dr,jr]),reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.ItemSlot,{scope:Rr,id:zr,focusable:Ar,active:Pr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({tabIndex:Vr?0:-1,"data-orientation":Ur.orientation},Mr,{ref:Tr,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onMouseDown,Gr=>{Ar?Ur.onItemFocus(zr):Gr.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onFocus,()=>Ur.onItemFocus(zr)),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onKeyDown,Gr=>{if(Gr.key==="Tab"&&Gr.shiftKey){Ur.onItemShiftTab();return}if(Gr.target!==Gr.currentTarget)return;const Wr=$d7bdfb9eb0fdf311$var$getFocusIntent(Gr,Ur.orientation,Ur.dir);if(Wr!==void 0){Gr.preventDefault();let Kr=Nr().filter(Xr=>Xr.focusable).map(Xr=>Xr.ref.current);if(Wr==="last")Kr.reverse();else if(Wr==="prev"||Wr==="next"){Wr==="prev"&&Kr.reverse();const Xr=Kr.indexOf(Gr.currentTarget);Kr=Ur.loop?$d7bdfb9eb0fdf311$var$wrapArray(Kr,Xr+1):Kr.slice(Xr+1)}setTimeout(()=>$d7bdfb9eb0fdf311$var$focusFirst(Kr))}})})))}),$d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $d7bdfb9eb0fdf311$var$getDirectionAwareKey(_r,Tr){return Tr!=="rtl"?_r:_r==="ArrowLeft"?"ArrowRight":_r==="ArrowRight"?"ArrowLeft":_r}function $d7bdfb9eb0fdf311$var$getFocusIntent(_r,Tr,Rr){const Ar=$d7bdfb9eb0fdf311$var$getDirectionAwareKey(_r.key,Rr);if(!(Tr==="vertical"&&["ArrowLeft","ArrowRight"].includes(Ar))&&!(Tr==="horizontal"&&["ArrowUp","ArrowDown"].includes(Ar)))return $d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT[Ar]}function $d7bdfb9eb0fdf311$var$focusFirst(_r){const Tr=document.activeElement;for(const Rr of _r)if(Rr===Tr||(Rr.focus(),document.activeElement!==Tr))return}function $d7bdfb9eb0fdf311$var$wrapArray(_r,Tr){return _r.map((Rr,Ar)=>_r[(Tr+Ar)%_r.length])}const $d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9=$d7bdfb9eb0fdf311$export$8699f7c8af148338,$d7bdfb9eb0fdf311$export$6d08773d2e66f8f2=$d7bdfb9eb0fdf311$export$ab9df7c53fe8454,$69cb30bb0017df05$var$TABS_NAME="Tabs",[$69cb30bb0017df05$var$createTabsContext,$69cb30bb0017df05$export$355f5bd209d7b13a]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($69cb30bb0017df05$var$TABS_NAME,[$d7bdfb9eb0fdf311$export$c7109489551a4f4]),$69cb30bb0017df05$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),[$69cb30bb0017df05$var$TabsProvider,$69cb30bb0017df05$var$useTabsContext]=$69cb30bb0017df05$var$createTabsContext($69cb30bb0017df05$var$TABS_NAME),$69cb30bb0017df05$export$b2539bed5023c21c=reactExports.forwardRef((_r,Tr)=>{const{__scopeTabs:Rr,value:Ar,onValueChange:Pr,defaultValue:Lr,orientation:Mr="horizontal",dir:Fr,activationMode:zr="automatic",...Ur}=_r,Vr=$f631663db3294ace$export$b39126d51d94e6f3(Fr),[Nr,Dr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Ar,onChange:Pr,defaultProp:Lr});return reactExports.createElement($69cb30bb0017df05$var$TabsProvider,{scope:Rr,baseId:$1746a345f3d73bb7$export$f680877a34711e37(),value:Nr,onValueChange:Dr,orientation:Mr,dir:Vr,activationMode:zr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({dir:Vr,"data-orientation":Mr},Ur,{ref:Tr})))}),$69cb30bb0017df05$var$TAB_LIST_NAME="TabsList",$69cb30bb0017df05$export$9712d22edc0d78c1=reactExports.forwardRef((_r,Tr)=>{const{__scopeTabs:Rr,loop:Ar=!0,...Pr}=_r,Lr=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$TAB_LIST_NAME,Rr),Mr=$69cb30bb0017df05$var$useRovingFocusGroupScope(Rr);return reactExports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends$1({asChild:!0},Mr,{orientation:Lr.orientation,dir:Lr.dir,loop:Ar}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"tablist","aria-orientation":Lr.orientation},Pr,{ref:Tr})))}),$69cb30bb0017df05$var$TRIGGER_NAME="TabsTrigger",$69cb30bb0017df05$export$8114b9fdfdf9f3ba=reactExports.forwardRef((_r,Tr)=>{const{__scopeTabs:Rr,value:Ar,disabled:Pr=!1,...Lr}=_r,Mr=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$TRIGGER_NAME,Rr),Fr=$69cb30bb0017df05$var$useRovingFocusGroupScope(Rr),zr=$69cb30bb0017df05$var$makeTriggerId(Mr.baseId,Ar),Ur=$69cb30bb0017df05$var$makeContentId(Mr.baseId,Ar),Vr=Ar===Mr.value;return reactExports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends$1({asChild:!0},Fr,{focusable:!Pr,active:Vr}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"tab","aria-selected":Vr,"aria-controls":Ur,"data-state":Vr?"active":"inactive","data-disabled":Pr?"":void 0,disabled:Pr,id:zr},Lr,{ref:Tr,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onMouseDown,Nr=>{!Pr&&Nr.button===0&&Nr.ctrlKey===!1?Mr.onValueChange(Ar):Nr.preventDefault()}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onKeyDown,Nr=>{[" ","Enter"].includes(Nr.key)&&Mr.onValueChange(Ar)}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onFocus,()=>{const Nr=Mr.activationMode!=="manual";!Vr&&!Pr&&Nr&&Mr.onValueChange(Ar)})})))}),$69cb30bb0017df05$var$CONTENT_NAME="TabsContent",$69cb30bb0017df05$export$bd905d70e8fd2ebb=reactExports.forwardRef((_r,Tr)=>{const{__scopeTabs:Rr,value:Ar,forceMount:Pr,children:Lr,...Mr}=_r,Fr=$69cb30bb0017df05$var$useTabsContext($69cb30bb0017df05$var$CONTENT_NAME,Rr),zr=$69cb30bb0017df05$var$makeTriggerId(Fr.baseId,Ar),Ur=$69cb30bb0017df05$var$makeContentId(Fr.baseId,Ar),Vr=Ar===Fr.value,Nr=reactExports.useRef(Vr);return reactExports.useEffect(()=>{const Dr=requestAnimationFrame(()=>Nr.current=!1);return()=>cancelAnimationFrame(Dr)},[]),reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:Pr||Vr},({present:Dr})=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-state":Vr?"active":"inactive","data-orientation":Fr.orientation,role:"tabpanel","aria-labelledby":zr,hidden:!Dr,id:Ur,tabIndex:0},Mr,{ref:Tr,style:{..._r.style,animationDuration:Nr.current?"0s":void 0}}),Dr&&Lr))});function $69cb30bb0017df05$var$makeTriggerId(_r,Tr){return`${_r}-trigger-${Tr}`}function $69cb30bb0017df05$var$makeContentId(_r,Tr){return`${_r}-content-${Tr}`}const $69cb30bb0017df05$export$be92b6f5f03c0fe9=$69cb30bb0017df05$export$b2539bed5023c21c,$69cb30bb0017df05$export$54c2e3dc7acea9f5=$69cb30bb0017df05$export$9712d22edc0d78c1,$69cb30bb0017df05$export$41fb9f06171c75f4=$69cb30bb0017df05$export$8114b9fdfdf9f3ba,$69cb30bb0017df05$export$7c6e2c02157bb7d2=$69cb30bb0017df05$export$bd905d70e8fd2ebb;var lib$5={},Parser$3={},Tokenizer={},decode={},decodeDataHtml={};Object.defineProperty(decodeDataHtml,"__esModule",{value:!0});decodeDataHtml.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(_r){return _r.charCodeAt(0)}));var decodeDataXml={};Object.defineProperty(decodeDataXml,"__esModule",{value:!0});decodeDataXml.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(_r){return _r.charCodeAt(0)}));var decode_codepoint={};(function(_r){var Tr;Object.defineProperty(_r,"__esModule",{value:!0}),_r.replaceCodePoint=_r.fromCodePoint=void 0;var Rr=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);_r.fromCodePoint=(Tr=String.fromCodePoint)!==null&&Tr!==void 0?Tr:function(Lr){var Mr="";return Lr>65535&&(Lr-=65536,Mr+=String.fromCharCode(Lr>>>10&1023|55296),Lr=56320|Lr&1023),Mr+=String.fromCharCode(Lr),Mr};function Ar(Lr){var Mr;return Lr>=55296&&Lr<=57343||Lr>1114111?65533:(Mr=Rr.get(Lr))!==null&&Mr!==void 0?Mr:Lr}_r.replaceCodePoint=Ar;function Pr(Lr){return(0,_r.fromCodePoint)(Ar(Lr))}_r.default=Pr})(decode_codepoint);(function(_r){var Tr=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ls,us,xs,Ts){Ts===void 0&&(Ts=xs);var vs=Object.getOwnPropertyDescriptor(us,xs);(!vs||("get"in vs?!us.__esModule:vs.writable||vs.configurable))&&(vs={enumerable:!0,get:function(){return us[xs]}}),Object.defineProperty(ls,Ts,vs)}:function(ls,us,xs,Ts){Ts===void 0&&(Ts=xs),ls[Ts]=us[xs]}),Rr=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ls,us){Object.defineProperty(ls,"default",{enumerable:!0,value:us})}:function(ls,us){ls.default=us}),Ar=commonjsGlobal&&commonjsGlobal.__importStar||function(ls){if(ls&&ls.__esModule)return ls;var us={};if(ls!=null)for(var xs in ls)xs!=="default"&&Object.prototype.hasOwnProperty.call(ls,xs)&&Tr(us,ls,xs);return Rr(us,ls),us},Pr=commonjsGlobal&&commonjsGlobal.__importDefault||function(ls){return ls&&ls.__esModule?ls:{default:ls}};Object.defineProperty(_r,"__esModule",{value:!0}),_r.decodeXML=_r.decodeHTMLStrict=_r.decodeHTMLAttribute=_r.decodeHTML=_r.determineBranch=_r.EntityDecoder=_r.DecodingMode=_r.BinTrieFlags=_r.fromCodePoint=_r.replaceCodePoint=_r.decodeCodePoint=_r.xmlDecodeTree=_r.htmlDecodeTree=void 0;var Lr=Pr(decodeDataHtml);_r.htmlDecodeTree=Lr.default;var Mr=Pr(decodeDataXml);_r.xmlDecodeTree=Mr.default;var Fr=Ar(decode_codepoint);_r.decodeCodePoint=Fr.default;var zr=decode_codepoint;Object.defineProperty(_r,"replaceCodePoint",{enumerable:!0,get:function(){return zr.replaceCodePoint}}),Object.defineProperty(_r,"fromCodePoint",{enumerable:!0,get:function(){return zr.fromCodePoint}});var Ur;(function(ls){ls[ls.NUM=35]="NUM",ls[ls.SEMI=59]="SEMI",ls[ls.EQUALS=61]="EQUALS",ls[ls.ZERO=48]="ZERO",ls[ls.NINE=57]="NINE",ls[ls.LOWER_A=97]="LOWER_A",ls[ls.LOWER_F=102]="LOWER_F",ls[ls.LOWER_X=120]="LOWER_X",ls[ls.LOWER_Z=122]="LOWER_Z",ls[ls.UPPER_A=65]="UPPER_A",ls[ls.UPPER_F=70]="UPPER_F",ls[ls.UPPER_Z=90]="UPPER_Z"})(Ur||(Ur={}));var Vr=32,Nr;(function(ls){ls[ls.VALUE_LENGTH=49152]="VALUE_LENGTH",ls[ls.BRANCH_LENGTH=16256]="BRANCH_LENGTH",ls[ls.JUMP_TABLE=127]="JUMP_TABLE"})(Nr=_r.BinTrieFlags||(_r.BinTrieFlags={}));function Dr(ls){return ls>=Ur.ZERO&&ls<=Ur.NINE}function jr(ls){return ls>=Ur.UPPER_A&&ls<=Ur.UPPER_F||ls>=Ur.LOWER_A&&ls<=Ur.LOWER_F}function Gr(ls){return ls>=Ur.UPPER_A&&ls<=Ur.UPPER_Z||ls>=Ur.LOWER_A&&ls<=Ur.LOWER_Z||Dr(ls)}function Wr(ls){return ls===Ur.EQUALS||Gr(ls)}var qr;(function(ls){ls[ls.EntityStart=0]="EntityStart",ls[ls.NumericStart=1]="NumericStart",ls[ls.NumericDecimal=2]="NumericDecimal",ls[ls.NumericHex=3]="NumericHex",ls[ls.NamedEntity=4]="NamedEntity"})(qr||(qr={}));var Kr;(function(ls){ls[ls.Legacy=0]="Legacy",ls[ls.Strict=1]="Strict",ls[ls.Attribute=2]="Attribute"})(Kr=_r.DecodingMode||(_r.DecodingMode={}));var Xr=function(){function ls(us,xs,Ts){this.decodeTree=us,this.emitCodePoint=xs,this.errors=Ts,this.state=qr.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Kr.Strict}return ls.prototype.startEntity=function(us){this.decodeMode=us,this.state=qr.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},ls.prototype.write=function(us,xs){switch(this.state){case qr.EntityStart:return us.charCodeAt(xs)===Ur.NUM?(this.state=qr.NumericStart,this.consumed+=1,this.stateNumericStart(us,xs+1)):(this.state=qr.NamedEntity,this.stateNamedEntity(us,xs));case qr.NumericStart:return this.stateNumericStart(us,xs);case qr.NumericDecimal:return this.stateNumericDecimal(us,xs);case qr.NumericHex:return this.stateNumericHex(us,xs);case qr.NamedEntity:return this.stateNamedEntity(us,xs)}},ls.prototype.stateNumericStart=function(us,xs){return xs>=us.length?-1:(us.charCodeAt(xs)|Vr)===Ur.LOWER_X?(this.state=qr.NumericHex,this.consumed+=1,this.stateNumericHex(us,xs+1)):(this.state=qr.NumericDecimal,this.stateNumericDecimal(us,xs))},ls.prototype.addToNumericResult=function(us,xs,Ts,vs){if(xs!==Ts){var gs=Ts-xs;this.result=this.result*Math.pow(vs,gs)+parseInt(us.substr(xs,gs),vs),this.consumed+=gs}},ls.prototype.stateNumericHex=function(us,xs){for(var Ts=xs;xs<us.length;){var vs=us.charCodeAt(xs);if(Dr(vs)||jr(vs))xs+=1;else return this.addToNumericResult(us,Ts,xs,16),this.emitNumericEntity(vs,3)}return this.addToNumericResult(us,Ts,xs,16),-1},ls.prototype.stateNumericDecimal=function(us,xs){for(var Ts=xs;xs<us.length;){var vs=us.charCodeAt(xs);if(Dr(vs))xs+=1;else return this.addToNumericResult(us,Ts,xs,10),this.emitNumericEntity(vs,2)}return this.addToNumericResult(us,Ts,xs,10),-1},ls.prototype.emitNumericEntity=function(us,xs){var Ts;if(this.consumed<=xs)return(Ts=this.errors)===null||Ts===void 0||Ts.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(us===Ur.SEMI)this.consumed+=1;else if(this.decodeMode===Kr.Strict)return 0;return this.emitCodePoint((0,Fr.replaceCodePoint)(this.result),this.consumed),this.errors&&(us!==Ur.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},ls.prototype.stateNamedEntity=function(us,xs){for(var Ts=this.decodeTree,vs=Ts[this.treeIndex],gs=(vs&Nr.VALUE_LENGTH)>>14;xs<us.length;xs++,this.excess++){var fs=us.charCodeAt(xs);if(this.treeIndex=Jr(Ts,vs,this.treeIndex+Math.max(1,gs),fs),this.treeIndex<0)return this.result===0||this.decodeMode===Kr.Attribute&&(gs===0||Wr(fs))?0:this.emitNotTerminatedNamedEntity();if(vs=Ts[this.treeIndex],gs=(vs&Nr.VALUE_LENGTH)>>14,gs!==0){if(fs===Ur.SEMI)return this.emitNamedEntityData(this.treeIndex,gs,this.consumed+this.excess);this.decodeMode!==Kr.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},ls.prototype.emitNotTerminatedNamedEntity=function(){var us,xs=this,Ts=xs.result,vs=xs.decodeTree,gs=(vs[Ts]&Nr.VALUE_LENGTH)>>14;return this.emitNamedEntityData(Ts,gs,this.consumed),(us=this.errors)===null||us===void 0||us.missingSemicolonAfterCharacterReference(),this.consumed},ls.prototype.emitNamedEntityData=function(us,xs,Ts){var vs=this.decodeTree;return this.emitCodePoint(xs===1?vs[us]&~Nr.VALUE_LENGTH:vs[us+1],Ts),xs===3&&this.emitCodePoint(vs[us+2],Ts),Ts},ls.prototype.end=function(){var us;switch(this.state){case qr.NamedEntity:return this.result!==0&&(this.decodeMode!==Kr.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case qr.NumericDecimal:return this.emitNumericEntity(0,2);case qr.NumericHex:return this.emitNumericEntity(0,3);case qr.NumericStart:return(us=this.errors)===null||us===void 0||us.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case qr.EntityStart:return 0}},ls}();_r.EntityDecoder=Xr;function Zr(ls){var us="",xs=new Xr(ls,function(Ts){return us+=(0,Fr.fromCodePoint)(Ts)});return function(vs,gs){for(var fs=0,ys=0;(ys=vs.indexOf("&",ys))>=0;){us+=vs.slice(fs,ys),xs.startEntity(gs);var ks=xs.write(vs,ys+1);if(ks<0){fs=ys+xs.end();break}fs=ys+ks,ys=ks===0?fs+1:fs}var Fs=us+vs.slice(fs);return us="",Fs}}function Jr(ls,us,xs,Ts){var vs=(us&Nr.BRANCH_LENGTH)>>7,gs=us&Nr.JUMP_TABLE;if(vs===0)return gs!==0&&Ts===gs?xs:-1;if(gs){var fs=Ts-gs;return fs<0||fs>=vs?-1:ls[xs+fs]-1}for(var ys=xs,ks=ys+vs-1;ys<=ks;){var Fs=ys+ks>>>1,Us=ls[Fs];if(Us<Ts)ys=Fs+1;else if(Us>Ts)ks=Fs-1;else return ls[Fs+vs]}return-1}_r.determineBranch=Jr;var _i=Zr(Lr.default),es=Zr(Mr.default);function ts(ls,us){return us===void 0&&(us=Kr.Legacy),_i(ls,us)}_r.decodeHTML=ts;function rs(ls){return _i(ls,Kr.Attribute)}_r.decodeHTMLAttribute=rs;function ns(ls){return _i(ls,Kr.Strict)}_r.decodeHTMLStrict=ns;function as(ls){return es(ls,Kr.Strict)}_r.decodeXML=as})(decode);(function(_r){Object.defineProperty(_r,"__esModule",{value:!0}),_r.QuoteType=void 0;var Tr=decode,Rr;(function(Dr){Dr[Dr.Tab=9]="Tab",Dr[Dr.NewLine=10]="NewLine",Dr[Dr.FormFeed=12]="FormFeed",Dr[Dr.CarriageReturn=13]="CarriageReturn",Dr[Dr.Space=32]="Space",Dr[Dr.ExclamationMark=33]="ExclamationMark",Dr[Dr.Number=35]="Number",Dr[Dr.Amp=38]="Amp",Dr[Dr.SingleQuote=39]="SingleQuote",Dr[Dr.DoubleQuote=34]="DoubleQuote",Dr[Dr.Dash=45]="Dash",Dr[Dr.Slash=47]="Slash",Dr[Dr.Zero=48]="Zero",Dr[Dr.Nine=57]="Nine",Dr[Dr.Semi=59]="Semi",Dr[Dr.Lt=60]="Lt",Dr[Dr.Eq=61]="Eq",Dr[Dr.Gt=62]="Gt",Dr[Dr.Questionmark=63]="Questionmark",Dr[Dr.UpperA=65]="UpperA",Dr[Dr.LowerA=97]="LowerA",Dr[Dr.UpperF=70]="UpperF",Dr[Dr.LowerF=102]="LowerF",Dr[Dr.UpperZ=90]="UpperZ",Dr[Dr.LowerZ=122]="LowerZ",Dr[Dr.LowerX=120]="LowerX",Dr[Dr.OpeningSquareBracket=91]="OpeningSquareBracket"})(Rr||(Rr={}));var Ar;(function(Dr){Dr[Dr.Text=1]="Text",Dr[Dr.BeforeTagName=2]="BeforeTagName",Dr[Dr.InTagName=3]="InTagName",Dr[Dr.InSelfClosingTag=4]="InSelfClosingTag",Dr[Dr.BeforeClosingTagName=5]="BeforeClosingTagName",Dr[Dr.InClosingTagName=6]="InClosingTagName",Dr[Dr.AfterClosingTagName=7]="AfterClosingTagName",Dr[Dr.BeforeAttributeName=8]="BeforeAttributeName",Dr[Dr.InAttributeName=9]="InAttributeName",Dr[Dr.AfterAttributeName=10]="AfterAttributeName",Dr[Dr.BeforeAttributeValue=11]="BeforeAttributeValue",Dr[Dr.InAttributeValueDq=12]="InAttributeValueDq",Dr[Dr.InAttributeValueSq=13]="InAttributeValueSq",Dr[Dr.InAttributeValueNq=14]="InAttributeValueNq",Dr[Dr.BeforeDeclaration=15]="BeforeDeclaration",Dr[Dr.InDeclaration=16]="InDeclaration",Dr[Dr.InProcessingInstruction=17]="InProcessingInstruction",Dr[Dr.BeforeComment=18]="BeforeComment",Dr[Dr.CDATASequence=19]="CDATASequence",Dr[Dr.InSpecialComment=20]="InSpecialComment",Dr[Dr.InCommentLike=21]="InCommentLike",Dr[Dr.BeforeSpecialS=22]="BeforeSpecialS",Dr[Dr.SpecialStartSequence=23]="SpecialStartSequence",Dr[Dr.InSpecialTag=24]="InSpecialTag",Dr[Dr.BeforeEntity=25]="BeforeEntity",Dr[Dr.BeforeNumericEntity=26]="BeforeNumericEntity",Dr[Dr.InNamedEntity=27]="InNamedEntity",Dr[Dr.InNumericEntity=28]="InNumericEntity",Dr[Dr.InHexEntity=29]="InHexEntity"})(Ar||(Ar={}));function Pr(Dr){return Dr===Rr.Space||Dr===Rr.NewLine||Dr===Rr.Tab||Dr===Rr.FormFeed||Dr===Rr.CarriageReturn}function Lr(Dr){return Dr===Rr.Slash||Dr===Rr.Gt||Pr(Dr)}function Mr(Dr){return Dr>=Rr.Zero&&Dr<=Rr.Nine}function Fr(Dr){return Dr>=Rr.LowerA&&Dr<=Rr.LowerZ||Dr>=Rr.UpperA&&Dr<=Rr.UpperZ}function zr(Dr){return Dr>=Rr.UpperA&&Dr<=Rr.UpperF||Dr>=Rr.LowerA&&Dr<=Rr.LowerF}var Ur;(function(Dr){Dr[Dr.NoValue=0]="NoValue",Dr[Dr.Unquoted=1]="Unquoted",Dr[Dr.Single=2]="Single",Dr[Dr.Double=3]="Double"})(Ur=_r.QuoteType||(_r.QuoteType={}));var Vr={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},Nr=function(){function Dr(jr,Gr){var Wr=jr.xmlMode,qr=Wr===void 0?!1:Wr,Kr=jr.decodeEntities,Xr=Kr===void 0?!0:Kr;this.cbs=Gr,this.state=Ar.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=Ar.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=qr,this.decodeEntities=Xr,this.entityTrie=qr?Tr.xmlDecodeTree:Tr.htmlDecodeTree}return Dr.prototype.reset=function(){this.state=Ar.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=Ar.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},Dr.prototype.write=function(jr){this.offset+=this.buffer.length,this.buffer=jr,this.parse()},Dr.prototype.end=function(){this.running&&this.finish()},Dr.prototype.pause=function(){this.running=!1},Dr.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},Dr.prototype.getIndex=function(){return this.index},Dr.prototype.getSectionStart=function(){return this.sectionStart},Dr.prototype.stateText=function(jr){jr===Rr.Lt||!this.decodeEntities&&this.fastForwardTo(Rr.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=Ar.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&jr===Rr.Amp&&(this.state=Ar.BeforeEntity)},Dr.prototype.stateSpecialStartSequence=function(jr){var Gr=this.sequenceIndex===this.currentSequence.length,Wr=Gr?Lr(jr):(jr|32)===this.currentSequence[this.sequenceIndex];if(!Wr)this.isSpecial=!1;else if(!Gr){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=Ar.InTagName,this.stateInTagName(jr)},Dr.prototype.stateInSpecialTag=function(jr){if(this.sequenceIndex===this.currentSequence.length){if(jr===Rr.Gt||Pr(jr)){var Gr=this.index-this.currentSequence.length;if(this.sectionStart<Gr){var Wr=this.index;this.index=Gr,this.cbs.ontext(this.sectionStart,Gr),this.index=Wr}this.isSpecial=!1,this.sectionStart=Gr+2,this.stateInClosingTagName(jr);return}this.sequenceIndex=0}(jr|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Vr.TitleEnd?this.decodeEntities&&jr===Rr.Amp&&(this.state=Ar.BeforeEntity):this.fastForwardTo(Rr.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(jr===Rr.Lt)},Dr.prototype.stateCDATASequence=function(jr){jr===Vr.Cdata[this.sequenceIndex]?++this.sequenceIndex===Vr.Cdata.length&&(this.state=Ar.InCommentLike,this.currentSequence=Vr.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=Ar.InDeclaration,this.stateInDeclaration(jr))},Dr.prototype.fastForwardTo=function(jr){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===jr)return!0;return this.index=this.buffer.length+this.offset-1,!1},Dr.prototype.stateInCommentLike=function(jr){jr===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Vr.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=Ar.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):jr!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},Dr.prototype.isTagStartChar=function(jr){return this.xmlMode?!Lr(jr):Fr(jr)},Dr.prototype.startSpecial=function(jr,Gr){this.isSpecial=!0,this.currentSequence=jr,this.sequenceIndex=Gr,this.state=Ar.SpecialStartSequence},Dr.prototype.stateBeforeTagName=function(jr){if(jr===Rr.ExclamationMark)this.state=Ar.BeforeDeclaration,this.sectionStart=this.index+1;else if(jr===Rr.Questionmark)this.state=Ar.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(jr)){var Gr=jr|32;this.sectionStart=this.index,!this.xmlMode&&Gr===Vr.TitleEnd[2]?this.startSpecial(Vr.TitleEnd,3):this.state=!this.xmlMode&&Gr===Vr.ScriptEnd[2]?Ar.BeforeSpecialS:Ar.InTagName}else jr===Rr.Slash?this.state=Ar.BeforeClosingTagName:(this.state=Ar.Text,this.stateText(jr))},Dr.prototype.stateInTagName=function(jr){Lr(jr)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=Ar.BeforeAttributeName,this.stateBeforeAttributeName(jr))},Dr.prototype.stateBeforeClosingTagName=function(jr){Pr(jr)||(jr===Rr.Gt?this.state=Ar.Text:(this.state=this.isTagStartChar(jr)?Ar.InClosingTagName:Ar.InSpecialComment,this.sectionStart=this.index))},Dr.prototype.stateInClosingTagName=function(jr){(jr===Rr.Gt||Pr(jr))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=Ar.AfterClosingTagName,this.stateAfterClosingTagName(jr))},Dr.prototype.stateAfterClosingTagName=function(jr){(jr===Rr.Gt||this.fastForwardTo(Rr.Gt))&&(this.state=Ar.Text,this.baseState=Ar.Text,this.sectionStart=this.index+1)},Dr.prototype.stateBeforeAttributeName=function(jr){jr===Rr.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=Ar.InSpecialTag,this.sequenceIndex=0):this.state=Ar.Text,this.baseState=this.state,this.sectionStart=this.index+1):jr===Rr.Slash?this.state=Ar.InSelfClosingTag:Pr(jr)||(this.state=Ar.InAttributeName,this.sectionStart=this.index)},Dr.prototype.stateInSelfClosingTag=function(jr){jr===Rr.Gt?(this.cbs.onselfclosingtag(this.index),this.state=Ar.Text,this.baseState=Ar.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Pr(jr)||(this.state=Ar.BeforeAttributeName,this.stateBeforeAttributeName(jr))},Dr.prototype.stateInAttributeName=function(jr){(jr===Rr.Eq||Lr(jr))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=Ar.AfterAttributeName,this.stateAfterAttributeName(jr))},Dr.prototype.stateAfterAttributeName=function(jr){jr===Rr.Eq?this.state=Ar.BeforeAttributeValue:jr===Rr.Slash||jr===Rr.Gt?(this.cbs.onattribend(Ur.NoValue,this.index),this.state=Ar.BeforeAttributeName,this.stateBeforeAttributeName(jr)):Pr(jr)||(this.cbs.onattribend(Ur.NoValue,this.index),this.state=Ar.InAttributeName,this.sectionStart=this.index)},Dr.prototype.stateBeforeAttributeValue=function(jr){jr===Rr.DoubleQuote?(this.state=Ar.InAttributeValueDq,this.sectionStart=this.index+1):jr===Rr.SingleQuote?(this.state=Ar.InAttributeValueSq,this.sectionStart=this.index+1):Pr(jr)||(this.sectionStart=this.index,this.state=Ar.InAttributeValueNq,this.stateInAttributeValueNoQuotes(jr))},Dr.prototype.handleInAttributeValue=function(jr,Gr){jr===Gr||!this.decodeEntities&&this.fastForwardTo(Gr)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(Gr===Rr.DoubleQuote?Ur.Double:Ur.Single,this.index),this.state=Ar.BeforeAttributeName):this.decodeEntities&&jr===Rr.Amp&&(this.baseState=this.state,this.state=Ar.BeforeEntity)},Dr.prototype.stateInAttributeValueDoubleQuotes=function(jr){this.handleInAttributeValue(jr,Rr.DoubleQuote)},Dr.prototype.stateInAttributeValueSingleQuotes=function(jr){this.handleInAttributeValue(jr,Rr.SingleQuote)},Dr.prototype.stateInAttributeValueNoQuotes=function(jr){Pr(jr)||jr===Rr.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(Ur.Unquoted,this.index),this.state=Ar.BeforeAttributeName,this.stateBeforeAttributeName(jr)):this.decodeEntities&&jr===Rr.Amp&&(this.baseState=this.state,this.state=Ar.BeforeEntity)},Dr.prototype.stateBeforeDeclaration=function(jr){jr===Rr.OpeningSquareBracket?(this.state=Ar.CDATASequence,this.sequenceIndex=0):this.state=jr===Rr.Dash?Ar.BeforeComment:Ar.InDeclaration},Dr.prototype.stateInDeclaration=function(jr){(jr===Rr.Gt||this.fastForwardTo(Rr.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=Ar.Text,this.sectionStart=this.index+1)},Dr.prototype.stateInProcessingInstruction=function(jr){(jr===Rr.Gt||this.fastForwardTo(Rr.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=Ar.Text,this.sectionStart=this.index+1)},Dr.prototype.stateBeforeComment=function(jr){jr===Rr.Dash?(this.state=Ar.InCommentLike,this.currentSequence=Vr.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=Ar.InDeclaration},Dr.prototype.stateInSpecialComment=function(jr){(jr===Rr.Gt||this.fastForwardTo(Rr.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=Ar.Text,this.sectionStart=this.index+1)},Dr.prototype.stateBeforeSpecialS=function(jr){var Gr=jr|32;Gr===Vr.ScriptEnd[3]?this.startSpecial(Vr.ScriptEnd,4):Gr===Vr.StyleEnd[3]?this.startSpecial(Vr.StyleEnd,4):(this.state=Ar.InTagName,this.stateInTagName(jr))},Dr.prototype.stateBeforeEntity=function(jr){this.entityExcess=1,this.entityResult=0,jr===Rr.Number?this.state=Ar.BeforeNumericEntity:jr===Rr.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=Ar.InNamedEntity,this.stateInNamedEntity(jr))},Dr.prototype.stateInNamedEntity=function(jr){if(this.entityExcess+=1,this.trieIndex=(0,Tr.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,jr),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var Gr=this.trieCurrent&Tr.BinTrieFlags.VALUE_LENGTH;if(Gr){var Wr=(Gr>>14)-1;if(!this.allowLegacyEntity()&&jr!==Rr.Semi)this.trieIndex+=Wr;else{var qr=this.index-this.entityExcess+1;qr>this.sectionStart&&this.emitPartial(this.sectionStart,qr),this.entityResult=this.trieIndex,this.trieIndex+=Wr,this.entityExcess=0,this.sectionStart=this.index+1,Wr===0&&this.emitNamedEntity()}}},Dr.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var jr=(this.entityTrie[this.entityResult]&Tr.BinTrieFlags.VALUE_LENGTH)>>14;switch(jr){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~Tr.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},Dr.prototype.stateBeforeNumericEntity=function(jr){(jr|32)===Rr.LowerX?(this.entityExcess++,this.state=Ar.InHexEntity):(this.state=Ar.InNumericEntity,this.stateInNumericEntity(jr))},Dr.prototype.emitNumericEntity=function(jr){var Gr=this.index-this.entityExcess-1,Wr=Gr+2+ +(this.state===Ar.InHexEntity);Wr!==this.index&&(Gr>this.sectionStart&&this.emitPartial(this.sectionStart,Gr),this.sectionStart=this.index+Number(jr),this.emitCodePoint((0,Tr.replaceCodePoint)(this.entityResult))),this.state=this.baseState},Dr.prototype.stateInNumericEntity=function(jr){jr===Rr.Semi?this.emitNumericEntity(!0):Mr(jr)?(this.entityResult=this.entityResult*10+(jr-Rr.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},Dr.prototype.stateInHexEntity=function(jr){jr===Rr.Semi?this.emitNumericEntity(!0):Mr(jr)?(this.entityResult=this.entityResult*16+(jr-Rr.Zero),this.entityExcess++):zr(jr)?(this.entityResult=this.entityResult*16+((jr|32)-Rr.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},Dr.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===Ar.Text||this.baseState===Ar.InSpecialTag)},Dr.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===Ar.Text||this.state===Ar.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===Ar.InAttributeValueDq||this.state===Ar.InAttributeValueSq||this.state===Ar.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},Dr.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},Dr.prototype.parse=function(){for(;this.shouldContinue();){var jr=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case Ar.Text:{this.stateText(jr);break}case Ar.SpecialStartSequence:{this.stateSpecialStartSequence(jr);break}case Ar.InSpecialTag:{this.stateInSpecialTag(jr);break}case Ar.CDATASequence:{this.stateCDATASequence(jr);break}case Ar.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(jr);break}case Ar.InAttributeName:{this.stateInAttributeName(jr);break}case Ar.InCommentLike:{this.stateInCommentLike(jr);break}case Ar.InSpecialComment:{this.stateInSpecialComment(jr);break}case Ar.BeforeAttributeName:{this.stateBeforeAttributeName(jr);break}case Ar.InTagName:{this.stateInTagName(jr);break}case Ar.InClosingTagName:{this.stateInClosingTagName(jr);break}case Ar.BeforeTagName:{this.stateBeforeTagName(jr);break}case Ar.AfterAttributeName:{this.stateAfterAttributeName(jr);break}case Ar.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(jr);break}case Ar.BeforeAttributeValue:{this.stateBeforeAttributeValue(jr);break}case Ar.BeforeClosingTagName:{this.stateBeforeClosingTagName(jr);break}case Ar.AfterClosingTagName:{this.stateAfterClosingTagName(jr);break}case Ar.BeforeSpecialS:{this.stateBeforeSpecialS(jr);break}case Ar.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(jr);break}case Ar.InSelfClosingTag:{this.stateInSelfClosingTag(jr);break}case Ar.InDeclaration:{this.stateInDeclaration(jr);break}case Ar.BeforeDeclaration:{this.stateBeforeDeclaration(jr);break}case Ar.BeforeComment:{this.stateBeforeComment(jr);break}case Ar.InProcessingInstruction:{this.stateInProcessingInstruction(jr);break}case Ar.InNamedEntity:{this.stateInNamedEntity(jr);break}case Ar.BeforeEntity:{this.stateBeforeEntity(jr);break}case Ar.InHexEntity:{this.stateInHexEntity(jr);break}case Ar.InNumericEntity:{this.stateInNumericEntity(jr);break}default:this.stateBeforeNumericEntity(jr)}this.index++}this.cleanup()},Dr.prototype.finish=function(){this.state===Ar.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},Dr.prototype.handleTrailingData=function(){var jr=this.buffer.length+this.offset;this.state===Ar.InCommentLike?this.currentSequence===Vr.CdataEnd?this.cbs.oncdata(this.sectionStart,jr,0):this.cbs.oncomment(this.sectionStart,jr,0):this.state===Ar.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===Ar.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===Ar.InTagName||this.state===Ar.BeforeAttributeName||this.state===Ar.BeforeAttributeValue||this.state===Ar.AfterAttributeName||this.state===Ar.InAttributeName||this.state===Ar.InAttributeValueSq||this.state===Ar.InAttributeValueDq||this.state===Ar.InAttributeValueNq||this.state===Ar.InClosingTagName||this.cbs.ontext(this.sectionStart,jr)},Dr.prototype.emitPartial=function(jr,Gr){this.baseState!==Ar.Text&&this.baseState!==Ar.InSpecialTag?this.cbs.onattribdata(jr,Gr):this.cbs.ontext(jr,Gr)},Dr.prototype.emitCodePoint=function(jr){this.baseState!==Ar.Text&&this.baseState!==Ar.InSpecialTag?this.cbs.onattribentity(jr):this.cbs.ontextentity(jr)},Dr}();_r.default=Nr})(Tokenizer);var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(_r,Tr,Rr,Ar){Ar===void 0&&(Ar=Rr);var Pr=Object.getOwnPropertyDescriptor(Tr,Rr);(!Pr||("get"in Pr?!Tr.__esModule:Pr.writable||Pr.configurable))&&(Pr={enumerable:!0,get:function(){return Tr[Rr]}}),Object.defineProperty(_r,Ar,Pr)}:function(_r,Tr,Rr,Ar){Ar===void 0&&(Ar=Rr),_r[Ar]=Tr[Rr]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(_r,Tr){Object.defineProperty(_r,"default",{enumerable:!0,value:Tr})}:function(_r,Tr){_r.default=Tr}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(_r){if(_r&&_r.__esModule)return _r;var Tr={};if(_r!=null)for(var Rr in _r)Rr!=="default"&&Object.prototype.hasOwnProperty.call(_r,Rr)&&__createBinding$1(Tr,_r,Rr);return __setModuleDefault$1(Tr,_r),Tr};Object.defineProperty(Parser$3,"__esModule",{value:!0});Parser$3.Parser=void 0;var Tokenizer_js_1=__importStar$1(Tokenizer),decode_js_1=decode,formTags=new Set(["input","option","optgroup","select","button","datalist","textarea"]),pTag=new Set(["p"]),tableSectionTags=new Set(["thead","tbody"]),ddtTags=new Set(["dd","dt"]),rtpTags=new Set(["rt","rp"]),openImpliesClose=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",pTag],["h1",pTag],["h2",pTag],["h3",pTag],["h4",pTag],["h5",pTag],["h6",pTag],["select",formTags],["input",formTags],["output",formTags],["button",formTags],["datalist",formTags],["textarea",formTags],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",ddtTags],["dt",ddtTags],["address",pTag],["article",pTag],["aside",pTag],["blockquote",pTag],["details",pTag],["div",pTag],["dl",pTag],["fieldset",pTag],["figcaption",pTag],["figure",pTag],["footer",pTag],["form",pTag],["header",pTag],["hr",pTag],["main",pTag],["nav",pTag],["ol",pTag],["pre",pTag],["section",pTag],["table",pTag],["ul",pTag],["rt",rtpTags],["rp",rtpTags],["tbody",tableSectionTags],["tfoot",tableSectionTags]]),voidElements=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),foreignContextElements=new Set(["math","svg"]),htmlIntegrationElements=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),reNameEnd=/\s|\//,Parser$2=function(){function _r(Tr,Rr){Rr===void 0&&(Rr={});var Ar,Pr,Lr,Mr,Fr;this.options=Rr,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=Tr??{},this.lowerCaseTagNames=(Ar=Rr.lowerCaseTags)!==null&&Ar!==void 0?Ar:!Rr.xmlMode,this.lowerCaseAttributeNames=(Pr=Rr.lowerCaseAttributeNames)!==null&&Pr!==void 0?Pr:!Rr.xmlMode,this.tokenizer=new((Lr=Rr.Tokenizer)!==null&&Lr!==void 0?Lr:Tokenizer_js_1.default)(this.options,this),(Fr=(Mr=this.cbs).onparserinit)===null||Fr===void 0||Fr.call(Mr,this)}return _r.prototype.ontext=function(Tr,Rr){var Ar,Pr,Lr=this.getSlice(Tr,Rr);this.endIndex=Rr-1,(Pr=(Ar=this.cbs).ontext)===null||Pr===void 0||Pr.call(Ar,Lr),this.startIndex=Rr},_r.prototype.ontextentity=function(Tr){var Rr,Ar,Pr=this.tokenizer.getSectionStart();this.endIndex=Pr-1,(Ar=(Rr=this.cbs).ontext)===null||Ar===void 0||Ar.call(Rr,(0,decode_js_1.fromCodePoint)(Tr)),this.startIndex=Pr},_r.prototype.isVoidElement=function(Tr){return!this.options.xmlMode&&voidElements.has(Tr)},_r.prototype.onopentagname=function(Tr,Rr){this.endIndex=Rr;var Ar=this.getSlice(Tr,Rr);this.lowerCaseTagNames&&(Ar=Ar.toLowerCase()),this.emitOpenTag(Ar)},_r.prototype.emitOpenTag=function(Tr){var Rr,Ar,Pr,Lr;this.openTagStart=this.startIndex,this.tagname=Tr;var Mr=!this.options.xmlMode&&openImpliesClose.get(Tr);if(Mr)for(;this.stack.length>0&&Mr.has(this.stack[this.stack.length-1]);){var Fr=this.stack.pop();(Ar=(Rr=this.cbs).onclosetag)===null||Ar===void 0||Ar.call(Rr,Fr,!0)}this.isVoidElement(Tr)||(this.stack.push(Tr),foreignContextElements.has(Tr)?this.foreignContext.push(!0):htmlIntegrationElements.has(Tr)&&this.foreignContext.push(!1)),(Lr=(Pr=this.cbs).onopentagname)===null||Lr===void 0||Lr.call(Pr,Tr),this.cbs.onopentag&&(this.attribs={})},_r.prototype.endOpenTag=function(Tr){var Rr,Ar;this.startIndex=this.openTagStart,this.attribs&&((Ar=(Rr=this.cbs).onopentag)===null||Ar===void 0||Ar.call(Rr,this.tagname,this.attribs,Tr),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},_r.prototype.onopentagend=function(Tr){this.endIndex=Tr,this.endOpenTag(!1),this.startIndex=Tr+1},_r.prototype.onclosetag=function(Tr,Rr){var Ar,Pr,Lr,Mr,Fr,zr;this.endIndex=Rr;var Ur=this.getSlice(Tr,Rr);if(this.lowerCaseTagNames&&(Ur=Ur.toLowerCase()),(foreignContextElements.has(Ur)||htmlIntegrationElements.has(Ur))&&this.foreignContext.pop(),this.isVoidElement(Ur))!this.options.xmlMode&&Ur==="br"&&((Pr=(Ar=this.cbs).onopentagname)===null||Pr===void 0||Pr.call(Ar,"br"),(Mr=(Lr=this.cbs).onopentag)===null||Mr===void 0||Mr.call(Lr,"br",{},!0),(zr=(Fr=this.cbs).onclosetag)===null||zr===void 0||zr.call(Fr,"br",!1));else{var Vr=this.stack.lastIndexOf(Ur);if(Vr!==-1)if(this.cbs.onclosetag)for(var Nr=this.stack.length-Vr;Nr--;)this.cbs.onclosetag(this.stack.pop(),Nr!==0);else this.stack.length=Vr;else!this.options.xmlMode&&Ur==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=Rr+1},_r.prototype.onselfclosingtag=function(Tr){this.endIndex=Tr,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=Tr+1):this.onopentagend(Tr)},_r.prototype.closeCurrentTag=function(Tr){var Rr,Ar,Pr=this.tagname;this.endOpenTag(Tr),this.stack[this.stack.length-1]===Pr&&((Ar=(Rr=this.cbs).onclosetag)===null||Ar===void 0||Ar.call(Rr,Pr,!Tr),this.stack.pop())},_r.prototype.onattribname=function(Tr,Rr){this.startIndex=Tr;var Ar=this.getSlice(Tr,Rr);this.attribname=this.lowerCaseAttributeNames?Ar.toLowerCase():Ar},_r.prototype.onattribdata=function(Tr,Rr){this.attribvalue+=this.getSlice(Tr,Rr)},_r.prototype.onattribentity=function(Tr){this.attribvalue+=(0,decode_js_1.fromCodePoint)(Tr)},_r.prototype.onattribend=function(Tr,Rr){var Ar,Pr;this.endIndex=Rr,(Pr=(Ar=this.cbs).onattribute)===null||Pr===void 0||Pr.call(Ar,this.attribname,this.attribvalue,Tr===Tokenizer_js_1.QuoteType.Double?'"':Tr===Tokenizer_js_1.QuoteType.Single?"'":Tr===Tokenizer_js_1.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},_r.prototype.getInstructionName=function(Tr){var Rr=Tr.search(reNameEnd),Ar=Rr<0?Tr:Tr.substr(0,Rr);return this.lowerCaseTagNames&&(Ar=Ar.toLowerCase()),Ar},_r.prototype.ondeclaration=function(Tr,Rr){this.endIndex=Rr;var Ar=this.getSlice(Tr,Rr);if(this.cbs.onprocessinginstruction){var Pr=this.getInstructionName(Ar);this.cbs.onprocessinginstruction("!".concat(Pr),"!".concat(Ar))}this.startIndex=Rr+1},_r.prototype.onprocessinginstruction=function(Tr,Rr){this.endIndex=Rr;var Ar=this.getSlice(Tr,Rr);if(this.cbs.onprocessinginstruction){var Pr=this.getInstructionName(Ar);this.cbs.onprocessinginstruction("?".concat(Pr),"?".concat(Ar))}this.startIndex=Rr+1},_r.prototype.oncomment=function(Tr,Rr,Ar){var Pr,Lr,Mr,Fr;this.endIndex=Rr,(Lr=(Pr=this.cbs).oncomment)===null||Lr===void 0||Lr.call(Pr,this.getSlice(Tr,Rr-Ar)),(Fr=(Mr=this.cbs).oncommentend)===null||Fr===void 0||Fr.call(Mr),this.startIndex=Rr+1},_r.prototype.oncdata=function(Tr,Rr,Ar){var Pr,Lr,Mr,Fr,zr,Ur,Vr,Nr,Dr,jr;this.endIndex=Rr;var Gr=this.getSlice(Tr,Rr-Ar);this.options.xmlMode||this.options.recognizeCDATA?((Lr=(Pr=this.cbs).oncdatastart)===null||Lr===void 0||Lr.call(Pr),(Fr=(Mr=this.cbs).ontext)===null||Fr===void 0||Fr.call(Mr,Gr),(Ur=(zr=this.cbs).oncdataend)===null||Ur===void 0||Ur.call(zr)):((Nr=(Vr=this.cbs).oncomment)===null||Nr===void 0||Nr.call(Vr,"[CDATA[".concat(Gr,"]]")),(jr=(Dr=this.cbs).oncommentend)===null||jr===void 0||jr.call(Dr)),this.startIndex=Rr+1},_r.prototype.onend=function(){var Tr,Rr;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var Ar=this.stack.length;Ar>0;this.cbs.onclosetag(this.stack[--Ar],!0));}(Rr=(Tr=this.cbs).onend)===null||Rr===void 0||Rr.call(Tr)},_r.prototype.reset=function(){var Tr,Rr,Ar,Pr;(Rr=(Tr=this.cbs).onreset)===null||Rr===void 0||Rr.call(Tr),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(Pr=(Ar=this.cbs).onparserinit)===null||Pr===void 0||Pr.call(Ar,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},_r.prototype.parseComplete=function(Tr){this.reset(),this.end(Tr)},_r.prototype.getSlice=function(Tr,Rr){for(;Tr-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var Ar=this.buffers[0].slice(Tr-this.bufferOffset,Rr-this.bufferOffset);Rr-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),Ar+=this.buffers[0].slice(0,Rr-this.bufferOffset);return Ar},_r.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},_r.prototype.write=function(Tr){var Rr,Ar;if(this.ended){(Ar=(Rr=this.cbs).onerror)===null||Ar===void 0||Ar.call(Rr,new Error(".write() after done!"));return}this.buffers.push(Tr),this.tokenizer.running&&(this.tokenizer.write(Tr),this.writeIndex++)},_r.prototype.end=function(Tr){var Rr,Ar;if(this.ended){(Ar=(Rr=this.cbs).onerror)===null||Ar===void 0||Ar.call(Rr,new Error(".end() after done!"));return}Tr&&this.write(Tr),this.ended=!0,this.tokenizer.end()},_r.prototype.pause=function(){this.tokenizer.pause()},_r.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},_r.prototype.parseChunk=function(Tr){this.write(Tr)},_r.prototype.done=function(Tr){this.end(Tr)},_r}();Parser$3.Parser=Parser$2;var lib$4={},lib$3={};(function(_r){Object.defineProperty(_r,"__esModule",{value:!0}),_r.Doctype=_r.CDATA=_r.Tag=_r.Style=_r.Script=_r.Comment=_r.Directive=_r.Text=_r.Root=_r.isTag=_r.ElementType=void 0;var Tr;(function(Ar){Ar.Root="root",Ar.Text="text",Ar.Directive="directive",Ar.Comment="comment",Ar.Script="script",Ar.Style="style",Ar.Tag="tag",Ar.CDATA="cdata",Ar.Doctype="doctype"})(Tr=_r.ElementType||(_r.ElementType={}));function Rr(Ar){return Ar.type===Tr.Tag||Ar.type===Tr.Script||Ar.type===Tr.Style}_r.isTag=Rr,_r.Root=Tr.Root,_r.Text=Tr.Text,_r.Directive=Tr.Directive,_r.Comment=Tr.Comment,_r.Script=Tr.Script,_r.Style=Tr.Style,_r.Tag=Tr.Tag,_r.CDATA=Tr.CDATA,_r.Doctype=Tr.Doctype})(lib$3);var node$1={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var _r=function(Tr,Rr){return _r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ar,Pr){Ar.__proto__=Pr}||function(Ar,Pr){for(var Lr in Pr)Object.prototype.hasOwnProperty.call(Pr,Lr)&&(Ar[Lr]=Pr[Lr])},_r(Tr,Rr)};return function(Tr,Rr){if(typeof Rr!="function"&&Rr!==null)throw new TypeError("Class extends value "+String(Rr)+" is not a constructor or null");_r(Tr,Rr);function Ar(){this.constructor=Tr}Tr.prototype=Rr===null?Object.create(Rr):(Ar.prototype=Rr.prototype,new Ar)}}(),__assign$2=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$2=Object.assign||function(_r){for(var Tr,Rr=1,Ar=arguments.length;Rr<Ar;Rr++){Tr=arguments[Rr];for(var Pr in Tr)Object.prototype.hasOwnProperty.call(Tr,Pr)&&(_r[Pr]=Tr[Pr])}return _r},__assign$2.apply(this,arguments)};Object.defineProperty(node$1,"__esModule",{value:!0});node$1.cloneNode=node$1.hasChildren=node$1.isDocument=node$1.isDirective=node$1.isComment=node$1.isText=node$1.isCDATA=node$1.isTag=node$1.Element=node$1.Document=node$1.CDATA=node$1.NodeWithChildren=node$1.ProcessingInstruction=node$1.Comment=node$1.Text=node$1.DataNode=node$1.Node=void 0;var domelementtype_1$1=lib$3,Node$6=function(){function _r(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(_r.prototype,"parentNode",{get:function(){return this.parent},set:function(Tr){this.parent=Tr},enumerable:!1,configurable:!0}),Object.defineProperty(_r.prototype,"previousSibling",{get:function(){return this.prev},set:function(Tr){this.prev=Tr},enumerable:!1,configurable:!0}),Object.defineProperty(_r.prototype,"nextSibling",{get:function(){return this.next},set:function(Tr){this.next=Tr},enumerable:!1,configurable:!0}),_r.prototype.cloneNode=function(Tr){return Tr===void 0&&(Tr=!1),cloneNode$1(this,Tr)},_r}();node$1.Node=Node$6;var DataNode=function(_r){__extends(Tr,_r);function Tr(Rr){var Ar=_r.call(this)||this;return Ar.data=Rr,Ar}return Object.defineProperty(Tr.prototype,"nodeValue",{get:function(){return this.data},set:function(Rr){this.data=Rr},enumerable:!1,configurable:!0}),Tr}(Node$6);node$1.DataNode=DataNode;var Text=function(_r){__extends(Tr,_r);function Tr(){var Rr=_r!==null&&_r.apply(this,arguments)||this;return Rr.type=domelementtype_1$1.ElementType.Text,Rr}return Object.defineProperty(Tr.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),Tr}(DataNode);node$1.Text=Text;var Comment$5=function(_r){__extends(Tr,_r);function Tr(){var Rr=_r!==null&&_r.apply(this,arguments)||this;return Rr.type=domelementtype_1$1.ElementType.Comment,Rr}return Object.defineProperty(Tr.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),Tr}(DataNode);node$1.Comment=Comment$5;var ProcessingInstruction=function(_r){__extends(Tr,_r);function Tr(Rr,Ar){var Pr=_r.call(this,Ar)||this;return Pr.name=Rr,Pr.type=domelementtype_1$1.ElementType.Directive,Pr}return Object.defineProperty(Tr.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Tr}(DataNode);node$1.ProcessingInstruction=ProcessingInstruction;var NodeWithChildren=function(_r){__extends(Tr,_r);function Tr(Rr){var Ar=_r.call(this)||this;return Ar.children=Rr,Ar}return Object.defineProperty(Tr.prototype,"firstChild",{get:function(){var Rr;return(Rr=this.children[0])!==null&&Rr!==void 0?Rr:null},enumerable:!1,configurable:!0}),Object.defineProperty(Tr.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(Tr.prototype,"childNodes",{get:function(){return this.children},set:function(Rr){this.children=Rr},enumerable:!1,configurable:!0}),Tr}(Node$6);node$1.NodeWithChildren=NodeWithChildren;var CDATA=function(_r){__extends(Tr,_r);function Tr(){var Rr=_r!==null&&_r.apply(this,arguments)||this;return Rr.type=domelementtype_1$1.ElementType.CDATA,Rr}return Object.defineProperty(Tr.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),Tr}(NodeWithChildren);node$1.CDATA=CDATA;var Document$4=function(_r){__extends(Tr,_r);function Tr(){var Rr=_r!==null&&_r.apply(this,arguments)||this;return Rr.type=domelementtype_1$1.ElementType.Root,Rr}return Object.defineProperty(Tr.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),Tr}(NodeWithChildren);node$1.Document=Document$4;var Element$1=function(_r){__extends(Tr,_r);function Tr(Rr,Ar,Pr,Lr){Pr===void 0&&(Pr=[]),Lr===void 0&&(Lr=Rr==="script"?domelementtype_1$1.ElementType.Script:Rr==="style"?domelementtype_1$1.ElementType.Style:domelementtype_1$1.ElementType.Tag);var Mr=_r.call(this,Pr)||this;return Mr.name=Rr,Mr.attribs=Ar,Mr.type=Lr,Mr}return Object.defineProperty(Tr.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(Tr.prototype,"tagName",{get:function(){return this.name},set:function(Rr){this.name=Rr},enumerable:!1,configurable:!0}),Object.defineProperty(Tr.prototype,"attributes",{get:function(){var Rr=this;return Object.keys(this.attribs).map(function(Ar){var Pr,Lr;return{name:Ar,value:Rr.attribs[Ar],namespace:(Pr=Rr["x-attribsNamespace"])===null||Pr===void 0?void 0:Pr[Ar],prefix:(Lr=Rr["x-attribsPrefix"])===null||Lr===void 0?void 0:Lr[Ar]}})},enumerable:!1,configurable:!0}),Tr}(NodeWithChildren);node$1.Element=Element$1;function isTag(_r){return(0,domelementtype_1$1.isTag)(_r)}node$1.isTag=isTag;function isCDATA(_r){return _r.type===domelementtype_1$1.ElementType.CDATA}node$1.isCDATA=isCDATA;function isText(_r){return _r.type===domelementtype_1$1.ElementType.Text}node$1.isText=isText;function isComment(_r){return _r.type===domelementtype_1$1.ElementType.Comment}node$1.isComment=isComment;function isDirective(_r){return _r.type===domelementtype_1$1.ElementType.Directive}node$1.isDirective=isDirective;function isDocument(_r){return _r.type===domelementtype_1$1.ElementType.Root}node$1.isDocument=isDocument;function hasChildren(_r){return Object.prototype.hasOwnProperty.call(_r,"children")}node$1.hasChildren=hasChildren;function cloneNode$1(_r,Tr){Tr===void 0&&(Tr=!1);var Rr;if(isText(_r))Rr=new Text(_r.data);else if(isComment(_r))Rr=new Comment$5(_r.data);else if(isTag(_r)){var Ar=Tr?cloneChildren(_r.children):[],Pr=new Element$1(_r.name,__assign$2({},_r.attribs),Ar);Ar.forEach(function(zr){return zr.parent=Pr}),_r.namespace!=null&&(Pr.namespace=_r.namespace),_r["x-attribsNamespace"]&&(Pr["x-attribsNamespace"]=__assign$2({},_r["x-attribsNamespace"])),_r["x-attribsPrefix"]&&(Pr["x-attribsPrefix"]=__assign$2({},_r["x-attribsPrefix"])),Rr=Pr}else if(isCDATA(_r)){var Ar=Tr?cloneChildren(_r.children):[],Lr=new CDATA(Ar);Ar.forEach(function(Ur){return Ur.parent=Lr}),Rr=Lr}else if(isDocument(_r)){var Ar=Tr?cloneChildren(_r.children):[],Mr=new Document$4(Ar);Ar.forEach(function(Ur){return Ur.parent=Mr}),_r["x-mode"]&&(Mr["x-mode"]=_r["x-mode"]),Rr=Mr}else if(isDirective(_r)){var Fr=new ProcessingInstruction(_r.name,_r.data);_r["x-name"]!=null&&(Fr["x-name"]=_r["x-name"],Fr["x-publicId"]=_r["x-publicId"],Fr["x-systemId"]=_r["x-systemId"]),Rr=Fr}else throw new Error("Not implemented yet: ".concat(_r.type));return Rr.startIndex=_r.startIndex,Rr.endIndex=_r.endIndex,_r.sourceCodeLocation!=null&&(Rr.sourceCodeLocation=_r.sourceCodeLocation),Rr}node$1.cloneNode=cloneNode$1;function cloneChildren(_r){for(var Tr=_r.map(function(Ar){return cloneNode$1(Ar,!0)}),Rr=1;Rr<Tr.length;Rr++)Tr[Rr].prev=Tr[Rr-1],Tr[Rr-1].next=Tr[Rr];return Tr}(function(_r){var Tr=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Fr,zr,Ur,Vr){Vr===void 0&&(Vr=Ur);var Nr=Object.getOwnPropertyDescriptor(zr,Ur);(!Nr||("get"in Nr?!zr.__esModule:Nr.writable||Nr.configurable))&&(Nr={enumerable:!0,get:function(){return zr[Ur]}}),Object.defineProperty(Fr,Vr,Nr)}:function(Fr,zr,Ur,Vr){Vr===void 0&&(Vr=Ur),Fr[Vr]=zr[Ur]}),Rr=commonjsGlobal&&commonjsGlobal.__exportStar||function(Fr,zr){for(var Ur in Fr)Ur!=="default"&&!Object.prototype.hasOwnProperty.call(zr,Ur)&&Tr(zr,Fr,Ur)};Object.defineProperty(_r,"__esModule",{value:!0}),_r.DomHandler=void 0;var Ar=lib$3,Pr=node$1;Rr(node$1,_r);var Lr={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},Mr=function(){function Fr(zr,Ur,Vr){this.dom=[],this.root=new Pr.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof Ur=="function"&&(Vr=Ur,Ur=Lr),typeof zr=="object"&&(Ur=zr,zr=void 0),this.callback=zr??null,this.options=Ur??Lr,this.elementCB=Vr??null}return Fr.prototype.onparserinit=function(zr){this.parser=zr},Fr.prototype.onreset=function(){this.dom=[],this.root=new Pr.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},Fr.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},Fr.prototype.onerror=function(zr){this.handleCallback(zr)},Fr.prototype.onclosetag=function(){this.lastNode=null;var zr=this.tagStack.pop();this.options.withEndIndices&&(zr.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(zr)},Fr.prototype.onopentag=function(zr,Ur){var Vr=this.options.xmlMode?Ar.ElementType.Tag:void 0,Nr=new Pr.Element(zr,Ur,void 0,Vr);this.addNode(Nr),this.tagStack.push(Nr)},Fr.prototype.ontext=function(zr){var Ur=this.lastNode;if(Ur&&Ur.type===Ar.ElementType.Text)Ur.data+=zr,this.options.withEndIndices&&(Ur.endIndex=this.parser.endIndex);else{var Vr=new Pr.Text(zr);this.addNode(Vr),this.lastNode=Vr}},Fr.prototype.oncomment=function(zr){if(this.lastNode&&this.lastNode.type===Ar.ElementType.Comment){this.lastNode.data+=zr;return}var Ur=new Pr.Comment(zr);this.addNode(Ur),this.lastNode=Ur},Fr.prototype.oncommentend=function(){this.lastNode=null},Fr.prototype.oncdatastart=function(){var zr=new Pr.Text(""),Ur=new Pr.CDATA([zr]);this.addNode(Ur),zr.parent=Ur,this.lastNode=zr},Fr.prototype.oncdataend=function(){this.lastNode=null},Fr.prototype.onprocessinginstruction=function(zr,Ur){var Vr=new Pr.ProcessingInstruction(zr,Ur);this.addNode(Vr)},Fr.prototype.handleCallback=function(zr){if(typeof this.callback=="function")this.callback(zr,this.dom);else if(zr)throw zr},Fr.prototype.addNode=function(zr){var Ur=this.tagStack[this.tagStack.length-1],Vr=Ur.children[Ur.children.length-1];this.options.withStartIndices&&(zr.startIndex=this.parser.startIndex),this.options.withEndIndices&&(zr.endIndex=this.parser.endIndex),Ur.children.push(zr),Vr&&(zr.prev=Vr,Vr.next=zr),zr.parent=Ur,this.lastNode=null},Fr}();_r.DomHandler=Mr,_r.default=Mr})(lib$4);var lib$2={},stringify$5={},lib$1={},lib={},encode={},encodeHtml={};Object.defineProperty(encodeHtml,"__esModule",{value:!0});function restoreDiff(_r){for(var Tr=1;Tr<_r.length;Tr++)_r[Tr][0]+=_r[Tr-1][0]+1;return _r}encodeHtml.default=new Map(restoreDiff([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(restoreDiff([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(restoreDiff([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(restoreDiff([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var _escape={};(function(_r){Object.defineProperty(_r,"__esModule",{value:!0}),_r.escapeText=_r.escapeAttribute=_r.escapeUTF8=_r.escape=_r.encodeXML=_r.getCodePoint=_r.xmlReplacer=void 0,_r.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var Tr=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);_r.getCodePoint=String.prototype.codePointAt!=null?function(Pr,Lr){return Pr.codePointAt(Lr)}:function(Pr,Lr){return(Pr.charCodeAt(Lr)&64512)===55296?(Pr.charCodeAt(Lr)-55296)*1024+Pr.charCodeAt(Lr+1)-56320+65536:Pr.charCodeAt(Lr)};function Rr(Pr){for(var Lr="",Mr=0,Fr;(Fr=_r.xmlReplacer.exec(Pr))!==null;){var zr=Fr.index,Ur=Pr.charCodeAt(zr),Vr=Tr.get(Ur);Vr!==void 0?(Lr+=Pr.substring(Mr,zr)+Vr,Mr=zr+1):(Lr+="".concat(Pr.substring(Mr,zr),"&#x").concat((0,_r.getCodePoint)(Pr,zr).toString(16),";"),Mr=_r.xmlReplacer.lastIndex+=+((Ur&64512)===55296))}return Lr+Pr.substr(Mr)}_r.encodeXML=Rr,_r.escape=Rr;function Ar(Pr,Lr){return function(Fr){for(var zr,Ur=0,Vr="";zr=Pr.exec(Fr);)Ur!==zr.index&&(Vr+=Fr.substring(Ur,zr.index)),Vr+=Lr.get(zr[0].charCodeAt(0)),Ur=zr.index+1;return Vr+Fr.substring(Ur)}}_r.escapeUTF8=Ar(/[&<>'"]/g,Tr),_r.escapeAttribute=Ar(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),_r.escapeText=Ar(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(_escape);var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(_r){return _r&&_r.__esModule?_r:{default:_r}};Object.defineProperty(encode,"__esModule",{value:!0});encode.encodeNonAsciiHTML=encode.encodeHTML=void 0;var encode_html_js_1=__importDefault$1(encodeHtml),escape_js_1=_escape,htmlReplacer=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function encodeHTML(_r){return encodeHTMLTrieRe(htmlReplacer,_r)}encode.encodeHTML=encodeHTML;function encodeNonAsciiHTML(_r){return encodeHTMLTrieRe(escape_js_1.xmlReplacer,_r)}encode.encodeNonAsciiHTML=encodeNonAsciiHTML;function encodeHTMLTrieRe(_r,Tr){for(var Rr="",Ar=0,Pr;(Pr=_r.exec(Tr))!==null;){var Lr=Pr.index;Rr+=Tr.substring(Ar,Lr);var Mr=Tr.charCodeAt(Lr),Fr=encode_html_js_1.default.get(Mr);if(typeof Fr=="object"){if(Lr+1<Tr.length){var zr=Tr.charCodeAt(Lr+1),Ur=typeof Fr.n=="number"?Fr.n===zr?Fr.o:void 0:Fr.n.get(zr);if(Ur!==void 0){Rr+=Ur,Ar=_r.lastIndex+=1;continue}}Fr=Fr.v}if(Fr!==void 0)Rr+=Fr,Ar=Lr+1;else{var Vr=(0,escape_js_1.getCodePoint)(Tr,Lr);Rr+="&#x".concat(Vr.toString(16),";"),Ar=_r.lastIndex+=+(Vr!==Mr)}}return Rr+Tr.substr(Ar)}(function(_r){Object.defineProperty(_r,"__esModule",{value:!0}),_r.decodeXMLStrict=_r.decodeHTML5Strict=_r.decodeHTML4Strict=_r.decodeHTML5=_r.decodeHTML4=_r.decodeHTMLAttribute=_r.decodeHTMLStrict=_r.decodeHTML=_r.decodeXML=_r.DecodingMode=_r.EntityDecoder=_r.encodeHTML5=_r.encodeHTML4=_r.encodeNonAsciiHTML=_r.encodeHTML=_r.escapeText=_r.escapeAttribute=_r.escapeUTF8=_r.escape=_r.encodeXML=_r.encode=_r.decodeStrict=_r.decode=_r.EncodingMode=_r.EntityLevel=void 0;var Tr=decode,Rr=encode,Ar=_escape,Pr;(function(Dr){Dr[Dr.XML=0]="XML",Dr[Dr.HTML=1]="HTML"})(Pr=_r.EntityLevel||(_r.EntityLevel={}));var Lr;(function(Dr){Dr[Dr.UTF8=0]="UTF8",Dr[Dr.ASCII=1]="ASCII",Dr[Dr.Extensive=2]="Extensive",Dr[Dr.Attribute=3]="Attribute",Dr[Dr.Text=4]="Text"})(Lr=_r.EncodingMode||(_r.EncodingMode={}));function Mr(Dr,jr){jr===void 0&&(jr=Pr.XML);var Gr=typeof jr=="number"?jr:jr.level;if(Gr===Pr.HTML){var Wr=typeof jr=="object"?jr.mode:void 0;return(0,Tr.decodeHTML)(Dr,Wr)}return(0,Tr.decodeXML)(Dr)}_r.decode=Mr;function Fr(Dr,jr){var Gr;jr===void 0&&(jr=Pr.XML);var Wr=typeof jr=="number"?{level:jr}:jr;return(Gr=Wr.mode)!==null&&Gr!==void 0||(Wr.mode=Tr.DecodingMode.Strict),Mr(Dr,Wr)}_r.decodeStrict=Fr;function zr(Dr,jr){jr===void 0&&(jr=Pr.XML);var Gr=typeof jr=="number"?{level:jr}:jr;return Gr.mode===Lr.UTF8?(0,Ar.escapeUTF8)(Dr):Gr.mode===Lr.Attribute?(0,Ar.escapeAttribute)(Dr):Gr.mode===Lr.Text?(0,Ar.escapeText)(Dr):Gr.level===Pr.HTML?Gr.mode===Lr.ASCII?(0,Rr.encodeNonAsciiHTML)(Dr):(0,Rr.encodeHTML)(Dr):(0,Ar.encodeXML)(Dr)}_r.encode=zr;var Ur=_escape;Object.defineProperty(_r,"encodeXML",{enumerable:!0,get:function(){return Ur.encodeXML}}),Object.defineProperty(_r,"escape",{enumerable:!0,get:function(){return Ur.escape}}),Object.defineProperty(_r,"escapeUTF8",{enumerable:!0,get:function(){return Ur.escapeUTF8}}),Object.defineProperty(_r,"escapeAttribute",{enumerable:!0,get:function(){return Ur.escapeAttribute}}),Object.defineProperty(_r,"escapeText",{enumerable:!0,get:function(){return Ur.escapeText}});var Vr=encode;Object.defineProperty(_r,"encodeHTML",{enumerable:!0,get:function(){return Vr.encodeHTML}}),Object.defineProperty(_r,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return Vr.encodeNonAsciiHTML}}),Object.defineProperty(_r,"encodeHTML4",{enumerable:!0,get:function(){return Vr.encodeHTML}}),Object.defineProperty(_r,"encodeHTML5",{enumerable:!0,get:function(){return Vr.encodeHTML}});var Nr=decode;Object.defineProperty(_r,"EntityDecoder",{enumerable:!0,get:function(){return Nr.EntityDecoder}}),Object.defineProperty(_r,"DecodingMode",{enumerable:!0,get:function(){return Nr.DecodingMode}}),Object.defineProperty(_r,"decodeXML",{enumerable:!0,get:function(){return Nr.decodeXML}}),Object.defineProperty(_r,"decodeHTML",{enumerable:!0,get:function(){return Nr.decodeHTML}}),Object.defineProperty(_r,"decodeHTMLStrict",{enumerable:!0,get:function(){return Nr.decodeHTMLStrict}}),Object.defineProperty(_r,"decodeHTMLAttribute",{enumerable:!0,get:function(){return Nr.decodeHTMLAttribute}}),Object.defineProperty(_r,"decodeHTML4",{enumerable:!0,get:function(){return Nr.decodeHTML}}),Object.defineProperty(_r,"decodeHTML5",{enumerable:!0,get:function(){return Nr.decodeHTML}}),Object.defineProperty(_r,"decodeHTML4Strict",{enumerable:!0,get:function(){return Nr.decodeHTMLStrict}}),Object.defineProperty(_r,"decodeHTML5Strict",{enumerable:!0,get:function(){return Nr.decodeHTMLStrict}}),Object.defineProperty(_r,"decodeXMLStrict",{enumerable:!0,get:function(){return Nr.decodeXML}})})(lib);var foreignNames={};Object.defineProperty(foreignNames,"__esModule",{value:!0});foreignNames.attributeNames=foreignNames.elementNames=void 0;foreignNames.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(_r){return[_r.toLowerCase(),_r]}));foreignNames.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(_r){return[_r.toLowerCase(),_r]}));var __assign$1=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$1=Object.assign||function(_r){for(var Tr,Rr=1,Ar=arguments.length;Rr<Ar;Rr++){Tr=arguments[Rr];for(var Pr in Tr)Object.prototype.hasOwnProperty.call(Tr,Pr)&&(_r[Pr]=Tr[Pr])}return _r},__assign$1.apply(this,arguments)},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(_r,Tr,Rr,Ar){Ar===void 0&&(Ar=Rr);var Pr=Object.getOwnPropertyDescriptor(Tr,Rr);(!Pr||("get"in Pr?!Tr.__esModule:Pr.writable||Pr.configurable))&&(Pr={enumerable:!0,get:function(){return Tr[Rr]}}),Object.defineProperty(_r,Ar,Pr)}:function(_r,Tr,Rr,Ar){Ar===void 0&&(Ar=Rr),_r[Ar]=Tr[Rr]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(_r,Tr){Object.defineProperty(_r,"default",{enumerable:!0,value:Tr})}:function(_r,Tr){_r.default=Tr}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(_r){if(_r&&_r.__esModule)return _r;var Tr={};if(_r!=null)for(var Rr in _r)Rr!=="default"&&Object.prototype.hasOwnProperty.call(_r,Rr)&&__createBinding(Tr,_r,Rr);return __setModuleDefault(Tr,_r),Tr};Object.defineProperty(lib$1,"__esModule",{value:!0});lib$1.render=void 0;var ElementType=__importStar(lib$3),entities_1=lib,foreignNames_js_1=foreignNames,unencodedElements=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function replaceQuotes(_r){return _r.replace(/"/g,"&quot;")}function formatAttributes(_r,Tr){var Rr;if(_r){var Ar=((Rr=Tr.encodeEntities)!==null&&Rr!==void 0?Rr:Tr.decodeEntities)===!1?replaceQuotes:Tr.xmlMode||Tr.encodeEntities!=="utf8"?entities_1.encodeXML:entities_1.escapeAttribute;return Object.keys(_r).map(function(Pr){var Lr,Mr,Fr=(Lr=_r[Pr])!==null&&Lr!==void 0?Lr:"";return Tr.xmlMode==="foreign"&&(Pr=(Mr=foreignNames_js_1.attributeNames.get(Pr))!==null&&Mr!==void 0?Mr:Pr),!Tr.emptyAttrs&&!Tr.xmlMode&&Fr===""?Pr:"".concat(Pr,'="').concat(Ar(Fr),'"')}).join(" ")}}var singleTag=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function render(_r,Tr){Tr===void 0&&(Tr={});for(var Rr=("length"in _r)?_r:[_r],Ar="",Pr=0;Pr<Rr.length;Pr++)Ar+=renderNode(Rr[Pr],Tr);return Ar}lib$1.render=render;lib$1.default=render;function renderNode(_r,Tr){switch(_r.type){case ElementType.Root:return render(_r.children,Tr);case ElementType.Doctype:case ElementType.Directive:return renderDirective(_r);case ElementType.Comment:return renderComment(_r);case ElementType.CDATA:return renderCdata(_r);case ElementType.Script:case ElementType.Style:case ElementType.Tag:return renderTag(_r,Tr);case ElementType.Text:return renderText(_r,Tr)}}var foreignModeIntegrationPoints=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),foreignElements=new Set(["svg","math"]);function renderTag(_r,Tr){var Rr;Tr.xmlMode==="foreign"&&(_r.name=(Rr=foreignNames_js_1.elementNames.get(_r.name))!==null&&Rr!==void 0?Rr:_r.name,_r.parent&&foreignModeIntegrationPoints.has(_r.parent.name)&&(Tr=__assign$1(__assign$1({},Tr),{xmlMode:!1}))),!Tr.xmlMode&&foreignElements.has(_r.name)&&(Tr=__assign$1(__assign$1({},Tr),{xmlMode:"foreign"}));var Ar="<".concat(_r.name),Pr=formatAttributes(_r.attribs,Tr);return Pr&&(Ar+=" ".concat(Pr)),_r.children.length===0&&(Tr.xmlMode?Tr.selfClosingTags!==!1:Tr.selfClosingTags&&singleTag.has(_r.name))?(Tr.xmlMode||(Ar+=" "),Ar+="/>"):(Ar+=">",_r.children.length>0&&(Ar+=render(_r.children,Tr)),(Tr.xmlMode||!singleTag.has(_r.name))&&(Ar+="</".concat(_r.name,">"))),Ar}function renderDirective(_r){return"<".concat(_r.data,">")}function renderText(_r,Tr){var Rr,Ar=_r.data||"";return((Rr=Tr.encodeEntities)!==null&&Rr!==void 0?Rr:Tr.decodeEntities)!==!1&&!(!Tr.xmlMode&&_r.parent&&unencodedElements.has(_r.parent.name))&&(Ar=Tr.xmlMode||Tr.encodeEntities!=="utf8"?(0,entities_1.encodeXML)(Ar):(0,entities_1.escapeText)(Ar)),Ar}function renderCdata(_r){return"<![CDATA[".concat(_r.children[0].data,"]]>")}function renderComment(_r){return"<!--".concat(_r.data,"-->")}var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(_r){return _r&&_r.__esModule?_r:{default:_r}};Object.defineProperty(stringify$5,"__esModule",{value:!0});stringify$5.innerText=stringify$5.textContent=stringify$5.getText=stringify$5.getInnerHTML=stringify$5.getOuterHTML=void 0;var domhandler_1$3=lib$4,dom_serializer_1=__importDefault(lib$1),domelementtype_1=lib$3;function getOuterHTML(_r,Tr){return(0,dom_serializer_1.default)(_r,Tr)}stringify$5.getOuterHTML=getOuterHTML;function getInnerHTML(_r,Tr){return(0,domhandler_1$3.hasChildren)(_r)?_r.children.map(function(Rr){return getOuterHTML(Rr,Tr)}).join(""):""}stringify$5.getInnerHTML=getInnerHTML;function getText(_r){return Array.isArray(_r)?_r.map(getText).join(""):(0,domhandler_1$3.isTag)(_r)?_r.name==="br"?`
`:getText(_r.children):(0,domhandler_1$3.isCDATA)(_r)?getText(_r.children):(0,domhandler_1$3.isText)(_r)?_r.data:""}stringify$5.getText=getText;function textContent(_r){return Array.isArray(_r)?_r.map(textContent).join(""):(0,domhandler_1$3.hasChildren)(_r)&&!(0,domhandler_1$3.isComment)(_r)?textContent(_r.children):(0,domhandler_1$3.isText)(_r)?_r.data:""}stringify$5.textContent=textContent;function innerText(_r){return Array.isArray(_r)?_r.map(innerText).join(""):(0,domhandler_1$3.hasChildren)(_r)&&(_r.type===domelementtype_1.ElementType.Tag||(0,domhandler_1$3.isCDATA)(_r))?innerText(_r.children):(0,domhandler_1$3.isText)(_r)?_r.data:""}stringify$5.innerText=innerText;var traversal={};Object.defineProperty(traversal,"__esModule",{value:!0});traversal.prevElementSibling=traversal.nextElementSibling=traversal.getName=traversal.hasAttrib=traversal.getAttributeValue=traversal.getSiblings=traversal.getParent=traversal.getChildren=void 0;var domhandler_1$2=lib$4;function getChildren(_r){return(0,domhandler_1$2.hasChildren)(_r)?_r.children:[]}traversal.getChildren=getChildren;function getParent(_r){return _r.parent||null}traversal.getParent=getParent;function getSiblings(_r){var Tr,Rr,Ar=getParent(_r);if(Ar!=null)return getChildren(Ar);for(var Pr=[_r],Lr=_r.prev,Mr=_r.next;Lr!=null;)Pr.unshift(Lr),Tr=Lr,Lr=Tr.prev;for(;Mr!=null;)Pr.push(Mr),Rr=Mr,Mr=Rr.next;return Pr}traversal.getSiblings=getSiblings;function getAttributeValue(_r,Tr){var Rr;return(Rr=_r.attribs)===null||Rr===void 0?void 0:Rr[Tr]}traversal.getAttributeValue=getAttributeValue;function hasAttrib(_r,Tr){return _r.attribs!=null&&Object.prototype.hasOwnProperty.call(_r.attribs,Tr)&&_r.attribs[Tr]!=null}traversal.hasAttrib=hasAttrib;function getName(_r){return _r.name}traversal.getName=getName;function nextElementSibling(_r){for(var Tr,Rr=_r.next;Rr!==null&&!(0,domhandler_1$2.isTag)(Rr);)Tr=Rr,Rr=Tr.next;return Rr}traversal.nextElementSibling=nextElementSibling;function prevElementSibling(_r){for(var Tr,Rr=_r.prev;Rr!==null&&!(0,domhandler_1$2.isTag)(Rr);)Tr=Rr,Rr=Tr.prev;return Rr}traversal.prevElementSibling=prevElementSibling;var manipulation={};Object.defineProperty(manipulation,"__esModule",{value:!0});manipulation.prepend=manipulation.prependChild=manipulation.append=manipulation.appendChild=manipulation.replaceElement=manipulation.removeElement=void 0;function removeElement(_r){if(_r.prev&&(_r.prev.next=_r.next),_r.next&&(_r.next.prev=_r.prev),_r.parent){var Tr=_r.parent.children,Rr=Tr.lastIndexOf(_r);Rr>=0&&Tr.splice(Rr,1)}_r.next=null,_r.prev=null,_r.parent=null}manipulation.removeElement=removeElement;function replaceElement(_r,Tr){var Rr=Tr.prev=_r.prev;Rr&&(Rr.next=Tr);var Ar=Tr.next=_r.next;Ar&&(Ar.prev=Tr);var Pr=Tr.parent=_r.parent;if(Pr){var Lr=Pr.children;Lr[Lr.lastIndexOf(_r)]=Tr,_r.parent=null}}manipulation.replaceElement=replaceElement;function appendChild(_r,Tr){if(removeElement(Tr),Tr.next=null,Tr.parent=_r,_r.children.push(Tr)>1){var Rr=_r.children[_r.children.length-2];Rr.next=Tr,Tr.prev=Rr}else Tr.prev=null}manipulation.appendChild=appendChild;function append(_r,Tr){removeElement(Tr);var Rr=_r.parent,Ar=_r.next;if(Tr.next=Ar,Tr.prev=_r,_r.next=Tr,Tr.parent=Rr,Ar){if(Ar.prev=Tr,Rr){var Pr=Rr.children;Pr.splice(Pr.lastIndexOf(Ar),0,Tr)}}else Rr&&Rr.children.push(Tr)}manipulation.append=append;function prependChild(_r,Tr){if(removeElement(Tr),Tr.parent=_r,Tr.prev=null,_r.children.unshift(Tr)!==1){var Rr=_r.children[1];Rr.prev=Tr,Tr.next=Rr}else Tr.next=null}manipulation.prependChild=prependChild;function prepend(_r,Tr){removeElement(Tr);var Rr=_r.parent;if(Rr){var Ar=Rr.children;Ar.splice(Ar.indexOf(_r),0,Tr)}_r.prev&&(_r.prev.next=Tr),Tr.parent=Rr,Tr.prev=_r.prev,Tr.next=_r,_r.prev=Tr}manipulation.prepend=prepend;var querying={};Object.defineProperty(querying,"__esModule",{value:!0});querying.findAll=querying.existsOne=querying.findOne=querying.findOneChild=querying.find=querying.filter=void 0;var domhandler_1$1=lib$4;function filter$1(_r,Tr,Rr,Ar){return Rr===void 0&&(Rr=!0),Ar===void 0&&(Ar=1/0),find(_r,Array.isArray(Tr)?Tr:[Tr],Rr,Ar)}querying.filter=filter$1;function find(_r,Tr,Rr,Ar){for(var Pr=[],Lr=[Tr],Mr=[0];;){if(Mr[0]>=Lr[0].length){if(Mr.length===1)return Pr;Lr.shift(),Mr.shift();continue}var Fr=Lr[0][Mr[0]++];if(_r(Fr)&&(Pr.push(Fr),--Ar<=0))return Pr;Rr&&(0,domhandler_1$1.hasChildren)(Fr)&&Fr.children.length>0&&(Mr.unshift(0),Lr.unshift(Fr.children))}}querying.find=find;function findOneChild(_r,Tr){return Tr.find(_r)}querying.findOneChild=findOneChild;function findOne(_r,Tr,Rr){Rr===void 0&&(Rr=!0);for(var Ar=null,Pr=0;Pr<Tr.length&&!Ar;Pr++){var Lr=Tr[Pr];if((0,domhandler_1$1.isTag)(Lr))_r(Lr)?Ar=Lr:Rr&&Lr.children.length>0&&(Ar=findOne(_r,Lr.children,!0));else continue}return Ar}querying.findOne=findOne;function existsOne(_r,Tr){return Tr.some(function(Rr){return(0,domhandler_1$1.isTag)(Rr)&&(_r(Rr)||existsOne(_r,Rr.children))})}querying.existsOne=existsOne;function findAll(_r,Tr){for(var Rr=[],Ar=[Tr],Pr=[0];;){if(Pr[0]>=Ar[0].length){if(Ar.length===1)return Rr;Ar.shift(),Pr.shift();continue}var Lr=Ar[0][Pr[0]++];(0,domhandler_1$1.isTag)(Lr)&&(_r(Lr)&&Rr.push(Lr),Lr.children.length>0&&(Pr.unshift(0),Ar.unshift(Lr.children)))}}querying.findAll=findAll;var legacy={};Object.defineProperty(legacy,"__esModule",{value:!0});legacy.getElementsByTagType=legacy.getElementsByTagName=legacy.getElementById=legacy.getElements=legacy.testElement=void 0;var domhandler_1=lib$4,querying_js_1=querying,Checks={tag_name:function(_r){return typeof _r=="function"?function(Tr){return(0,domhandler_1.isTag)(Tr)&&_r(Tr.name)}:_r==="*"?domhandler_1.isTag:function(Tr){return(0,domhandler_1.isTag)(Tr)&&Tr.name===_r}},tag_type:function(_r){return typeof _r=="function"?function(Tr){return _r(Tr.type)}:function(Tr){return Tr.type===_r}},tag_contains:function(_r){return typeof _r=="function"?function(Tr){return(0,domhandler_1.isText)(Tr)&&_r(Tr.data)}:function(Tr){return(0,domhandler_1.isText)(Tr)&&Tr.data===_r}}};function getAttribCheck(_r,Tr){return typeof Tr=="function"?function(Rr){return(0,domhandler_1.isTag)(Rr)&&Tr(Rr.attribs[_r])}:function(Rr){return(0,domhandler_1.isTag)(Rr)&&Rr.attribs[_r]===Tr}}function combineFuncs(_r,Tr){return function(Rr){return _r(Rr)||Tr(Rr)}}function compileTest(_r){var Tr=Object.keys(_r).map(function(Rr){var Ar=_r[Rr];return Object.prototype.hasOwnProperty.call(Checks,Rr)?Checks[Rr](Ar):getAttribCheck(Rr,Ar)});return Tr.length===0?null:Tr.reduce(combineFuncs)}function testElement(_r,Tr){var Rr=compileTest(_r);return Rr?Rr(Tr):!0}legacy.testElement=testElement;function getElements(_r,Tr,Rr,Ar){Ar===void 0&&(Ar=1/0);var Pr=compileTest(_r);return Pr?(0,querying_js_1.filter)(Pr,Tr,Rr,Ar):[]}legacy.getElements=getElements;function getElementById(_r,Tr,Rr){return Rr===void 0&&(Rr=!0),Array.isArray(Tr)||(Tr=[Tr]),(0,querying_js_1.findOne)(getAttribCheck("id",_r),Tr,Rr)}legacy.getElementById=getElementById;function getElementsByTagName(_r,Tr,Rr,Ar){return Rr===void 0&&(Rr=!0),Ar===void 0&&(Ar=1/0),(0,querying_js_1.filter)(Checks.tag_name(_r),Tr,Rr,Ar)}legacy.getElementsByTagName=getElementsByTagName;function getElementsByTagType(_r,Tr,Rr,Ar){return Rr===void 0&&(Rr=!0),Ar===void 0&&(Ar=1/0),(0,querying_js_1.filter)(Checks.tag_type(_r),Tr,Rr,Ar)}legacy.getElementsByTagType=getElementsByTagType;var helpers$1={};(function(_r){Object.defineProperty(_r,"__esModule",{value:!0}),_r.uniqueSort=_r.compareDocumentPosition=_r.DocumentPosition=_r.removeSubsets=void 0;var Tr=lib$4;function Rr(Mr){for(var Fr=Mr.length;--Fr>=0;){var zr=Mr[Fr];if(Fr>0&&Mr.lastIndexOf(zr,Fr-1)>=0){Mr.splice(Fr,1);continue}for(var Ur=zr.parent;Ur;Ur=Ur.parent)if(Mr.includes(Ur)){Mr.splice(Fr,1);break}}return Mr}_r.removeSubsets=Rr;var Ar;(function(Mr){Mr[Mr.DISCONNECTED=1]="DISCONNECTED",Mr[Mr.PRECEDING=2]="PRECEDING",Mr[Mr.FOLLOWING=4]="FOLLOWING",Mr[Mr.CONTAINS=8]="CONTAINS",Mr[Mr.CONTAINED_BY=16]="CONTAINED_BY"})(Ar=_r.DocumentPosition||(_r.DocumentPosition={}));function Pr(Mr,Fr){var zr=[],Ur=[];if(Mr===Fr)return 0;for(var Vr=(0,Tr.hasChildren)(Mr)?Mr:Mr.parent;Vr;)zr.unshift(Vr),Vr=Vr.parent;for(Vr=(0,Tr.hasChildren)(Fr)?Fr:Fr.parent;Vr;)Ur.unshift(Vr),Vr=Vr.parent;for(var Nr=Math.min(zr.length,Ur.length),Dr=0;Dr<Nr&&zr[Dr]===Ur[Dr];)Dr++;if(Dr===0)return Ar.DISCONNECTED;var jr=zr[Dr-1],Gr=jr.children,Wr=zr[Dr],qr=Ur[Dr];return Gr.indexOf(Wr)>Gr.indexOf(qr)?jr===Fr?Ar.FOLLOWING|Ar.CONTAINED_BY:Ar.FOLLOWING:jr===Mr?Ar.PRECEDING|Ar.CONTAINS:Ar.PRECEDING}_r.compareDocumentPosition=Pr;function Lr(Mr){return Mr=Mr.filter(function(Fr,zr,Ur){return!Ur.includes(Fr,zr+1)}),Mr.sort(function(Fr,zr){var Ur=Pr(Fr,zr);return Ur&Ar.PRECEDING?-1:Ur&Ar.FOLLOWING?1:0}),Mr}_r.uniqueSort=Lr})(helpers$1);var feeds={};Object.defineProperty(feeds,"__esModule",{value:!0});feeds.getFeed=void 0;var stringify_js_1=stringify$5,legacy_js_1=legacy;function getFeed(_r){var Tr=getOneElement(isValidFeed,_r);return Tr?Tr.name==="feed"?getAtomFeed(Tr):getRssFeed(Tr):null}feeds.getFeed=getFeed;function getAtomFeed(_r){var Tr,Rr=_r.children,Ar={type:"atom",items:(0,legacy_js_1.getElementsByTagName)("entry",Rr).map(function(Mr){var Fr,zr=Mr.children,Ur={media:getMediaElements(zr)};addConditionally(Ur,"id","id",zr),addConditionally(Ur,"title","title",zr);var Vr=(Fr=getOneElement("link",zr))===null||Fr===void 0?void 0:Fr.attribs.href;Vr&&(Ur.link=Vr);var Nr=fetch$1("summary",zr)||fetch$1("content",zr);Nr&&(Ur.description=Nr);var Dr=fetch$1("updated",zr);return Dr&&(Ur.pubDate=new Date(Dr)),Ur})};addConditionally(Ar,"id","id",Rr),addConditionally(Ar,"title","title",Rr);var Pr=(Tr=getOneElement("link",Rr))===null||Tr===void 0?void 0:Tr.attribs.href;Pr&&(Ar.link=Pr),addConditionally(Ar,"description","subtitle",Rr);var Lr=fetch$1("updated",Rr);return Lr&&(Ar.updated=new Date(Lr)),addConditionally(Ar,"author","email",Rr,!0),Ar}function getRssFeed(_r){var Tr,Rr,Ar=(Rr=(Tr=getOneElement("channel",_r.children))===null||Tr===void 0?void 0:Tr.children)!==null&&Rr!==void 0?Rr:[],Pr={type:_r.name.substr(0,3),id:"",items:(0,legacy_js_1.getElementsByTagName)("item",_r.children).map(function(Mr){var Fr=Mr.children,zr={media:getMediaElements(Fr)};addConditionally(zr,"id","guid",Fr),addConditionally(zr,"title","title",Fr),addConditionally(zr,"link","link",Fr),addConditionally(zr,"description","description",Fr);var Ur=fetch$1("pubDate",Fr)||fetch$1("dc:date",Fr);return Ur&&(zr.pubDate=new Date(Ur)),zr})};addConditionally(Pr,"title","title",Ar),addConditionally(Pr,"link","link",Ar),addConditionally(Pr,"description","description",Ar);var Lr=fetch$1("lastBuildDate",Ar);return Lr&&(Pr.updated=new Date(Lr)),addConditionally(Pr,"author","managingEditor",Ar,!0),Pr}var MEDIA_KEYS_STRING=["url","type","lang"],MEDIA_KEYS_INT=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function getMediaElements(_r){return(0,legacy_js_1.getElementsByTagName)("media:content",_r).map(function(Tr){for(var Rr=Tr.attribs,Ar={medium:Rr.medium,isDefault:!!Rr.isDefault},Pr=0,Lr=MEDIA_KEYS_STRING;Pr<Lr.length;Pr++){var Mr=Lr[Pr];Rr[Mr]&&(Ar[Mr]=Rr[Mr])}for(var Fr=0,zr=MEDIA_KEYS_INT;Fr<zr.length;Fr++){var Mr=zr[Fr];Rr[Mr]&&(Ar[Mr]=parseInt(Rr[Mr],10))}return Rr.expression&&(Ar.expression=Rr.expression),Ar})}function getOneElement(_r,Tr){return(0,legacy_js_1.getElementsByTagName)(_r,Tr,!0,1)[0]}function fetch$1(_r,Tr,Rr){return Rr===void 0&&(Rr=!1),(0,stringify_js_1.textContent)((0,legacy_js_1.getElementsByTagName)(_r,Tr,Rr,1)).trim()}function addConditionally(_r,Tr,Rr,Ar,Pr){Pr===void 0&&(Pr=!1);var Lr=fetch$1(Rr,Ar,Pr);Lr&&(_r[Tr]=Lr)}function isValidFeed(_r){return _r==="rss"||_r==="feed"||_r==="rdf:RDF"}(function(_r){var Tr=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Pr,Lr,Mr,Fr){Fr===void 0&&(Fr=Mr);var zr=Object.getOwnPropertyDescriptor(Lr,Mr);(!zr||("get"in zr?!Lr.__esModule:zr.writable||zr.configurable))&&(zr={enumerable:!0,get:function(){return Lr[Mr]}}),Object.defineProperty(Pr,Fr,zr)}:function(Pr,Lr,Mr,Fr){Fr===void 0&&(Fr=Mr),Pr[Fr]=Lr[Mr]}),Rr=commonjsGlobal&&commonjsGlobal.__exportStar||function(Pr,Lr){for(var Mr in Pr)Mr!=="default"&&!Object.prototype.hasOwnProperty.call(Lr,Mr)&&Tr(Lr,Pr,Mr)};Object.defineProperty(_r,"__esModule",{value:!0}),_r.hasChildren=_r.isDocument=_r.isComment=_r.isText=_r.isCDATA=_r.isTag=void 0,Rr(stringify$5,_r),Rr(traversal,_r),Rr(manipulation,_r),Rr(querying,_r),Rr(legacy,_r),Rr(helpers$1,_r),Rr(feeds,_r);var Ar=lib$4;Object.defineProperty(_r,"isTag",{enumerable:!0,get:function(){return Ar.isTag}}),Object.defineProperty(_r,"isCDATA",{enumerable:!0,get:function(){return Ar.isCDATA}}),Object.defineProperty(_r,"isText",{enumerable:!0,get:function(){return Ar.isText}}),Object.defineProperty(_r,"isComment",{enumerable:!0,get:function(){return Ar.isComment}}),Object.defineProperty(_r,"isDocument",{enumerable:!0,get:function(){return Ar.isDocument}}),Object.defineProperty(_r,"hasChildren",{enumerable:!0,get:function(){return Ar.hasChildren}})})(lib$2);(function(_r){var Tr=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Kr,Xr,Zr,Jr){Jr===void 0&&(Jr=Zr);var _i=Object.getOwnPropertyDescriptor(Xr,Zr);(!_i||("get"in _i?!Xr.__esModule:_i.writable||_i.configurable))&&(_i={enumerable:!0,get:function(){return Xr[Zr]}}),Object.defineProperty(Kr,Jr,_i)}:function(Kr,Xr,Zr,Jr){Jr===void 0&&(Jr=Zr),Kr[Jr]=Xr[Zr]}),Rr=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(Kr,Xr){Object.defineProperty(Kr,"default",{enumerable:!0,value:Xr})}:function(Kr,Xr){Kr.default=Xr}),Ar=commonjsGlobal&&commonjsGlobal.__importStar||function(Kr){if(Kr&&Kr.__esModule)return Kr;var Xr={};if(Kr!=null)for(var Zr in Kr)Zr!=="default"&&Object.prototype.hasOwnProperty.call(Kr,Zr)&&Tr(Xr,Kr,Zr);return Rr(Xr,Kr),Xr},Pr=commonjsGlobal&&commonjsGlobal.__importDefault||function(Kr){return Kr&&Kr.__esModule?Kr:{default:Kr}};Object.defineProperty(_r,"__esModule",{value:!0}),_r.DomUtils=_r.parseFeed=_r.getFeed=_r.ElementType=_r.Tokenizer=_r.createDomStream=_r.parseDOM=_r.parseDocument=_r.DefaultHandler=_r.DomHandler=_r.Parser=void 0;var Lr=Parser$3,Mr=Parser$3;Object.defineProperty(_r,"Parser",{enumerable:!0,get:function(){return Mr.Parser}});var Fr=lib$4,zr=lib$4;Object.defineProperty(_r,"DomHandler",{enumerable:!0,get:function(){return zr.DomHandler}}),Object.defineProperty(_r,"DefaultHandler",{enumerable:!0,get:function(){return zr.DomHandler}});function Ur(Kr,Xr){var Zr=new Fr.DomHandler(void 0,Xr);return new Lr.Parser(Zr,Xr).end(Kr),Zr.root}_r.parseDocument=Ur;function Vr(Kr,Xr){return Ur(Kr,Xr).children}_r.parseDOM=Vr;function Nr(Kr,Xr,Zr){var Jr=new Fr.DomHandler(Kr,Xr,Zr);return new Lr.Parser(Jr,Xr)}_r.createDomStream=Nr;var Dr=Tokenizer;Object.defineProperty(_r,"Tokenizer",{enumerable:!0,get:function(){return Pr(Dr).default}}),_r.ElementType=Ar(lib$3);var jr=lib$2,Gr=lib$2;Object.defineProperty(_r,"getFeed",{enumerable:!0,get:function(){return Gr.getFeed}});var Wr={xmlMode:!0};function qr(Kr,Xr){return Xr===void 0&&(Xr=Wr),(0,jr.getFeed)(Vr(Kr,Xr))}_r.parseFeed=qr,_r.DomUtils=Ar(lib$2)})(lib$5);var escapeStringRegexp$1=_r=>{if(typeof _r!="string")throw new TypeError("Expected a string");return _r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},isPlainObject$3={};Object.defineProperty(isPlainObject$3,"__esModule",{value:!0});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function isObject$1(_r){return Object.prototype.toString.call(_r)==="[object Object]"}function isPlainObject$2(_r){var Tr,Rr;return isObject$1(_r)===!1?!1:(Tr=_r.constructor,Tr===void 0?!0:(Rr=Tr.prototype,!(isObject$1(Rr)===!1||Rr.hasOwnProperty("isPrototypeOf")===!1)))}isPlainObject$3.isPlainObject=isPlainObject$2;var isMergeableObject=function(Tr){return isNonNullObject(Tr)&&!isSpecial(Tr)};function isNonNullObject(_r){return!!_r&&typeof _r=="object"}function isSpecial(_r){var Tr=Object.prototype.toString.call(_r);return Tr==="[object RegExp]"||Tr==="[object Date]"||isReactElement(_r)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(_r){return _r.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(_r){return Array.isArray(_r)?[]:{}}function cloneUnlessOtherwiseSpecified(_r,Tr){return Tr.clone!==!1&&Tr.isMergeableObject(_r)?deepmerge$1(emptyTarget(_r),_r,Tr):_r}function defaultArrayMerge(_r,Tr,Rr){return _r.concat(Tr).map(function(Ar){return cloneUnlessOtherwiseSpecified(Ar,Rr)})}function getMergeFunction(_r,Tr){if(!Tr.customMerge)return deepmerge$1;var Rr=Tr.customMerge(_r);return typeof Rr=="function"?Rr:deepmerge$1}function getEnumerableOwnPropertySymbols(_r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(_r).filter(function(Tr){return Object.propertyIsEnumerable.call(_r,Tr)}):[]}function getKeys(_r){return Object.keys(_r).concat(getEnumerableOwnPropertySymbols(_r))}function propertyIsOnObject(_r,Tr){try{return Tr in _r}catch{return!1}}function propertyIsUnsafe(_r,Tr){return propertyIsOnObject(_r,Tr)&&!(Object.hasOwnProperty.call(_r,Tr)&&Object.propertyIsEnumerable.call(_r,Tr))}function mergeObject(_r,Tr,Rr){var Ar={};return Rr.isMergeableObject(_r)&&getKeys(_r).forEach(function(Pr){Ar[Pr]=cloneUnlessOtherwiseSpecified(_r[Pr],Rr)}),getKeys(Tr).forEach(function(Pr){propertyIsUnsafe(_r,Pr)||(propertyIsOnObject(_r,Pr)&&Rr.isMergeableObject(Tr[Pr])?Ar[Pr]=getMergeFunction(Pr,Rr)(_r[Pr],Tr[Pr],Rr):Ar[Pr]=cloneUnlessOtherwiseSpecified(Tr[Pr],Rr))}),Ar}function deepmerge$1(_r,Tr,Rr){Rr=Rr||{},Rr.arrayMerge=Rr.arrayMerge||defaultArrayMerge,Rr.isMergeableObject=Rr.isMergeableObject||isMergeableObject,Rr.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var Ar=Array.isArray(Tr),Pr=Array.isArray(_r),Lr=Ar===Pr;return Lr?Ar?Rr.arrayMerge(_r,Tr,Rr):mergeObject(_r,Tr,Rr):cloneUnlessOtherwiseSpecified(Tr,Rr)}deepmerge$1.all=function(Tr,Rr){if(!Array.isArray(Tr))throw new Error("first argument should be an array");return Tr.reduce(function(Ar,Pr){return deepmerge$1(Ar,Pr,Rr)},{})};var deepmerge_1=deepmerge$1,cjs=deepmerge_1,parseSrcset$1={exports:{}};(function(_r){(function(Tr,Rr){_r.exports?_r.exports=Rr():Tr.parseSrcset=Rr()})(commonjsGlobal,function(){return function(Tr){function Rr(Jr){return Jr===" "||Jr==="	"||Jr===`
`||Jr==="\f"||Jr==="\r"}function Ar(Jr){var _i,es=Jr.exec(Tr.substring(qr));if(es)return _i=es[0],qr+=_i.length,_i}for(var Pr=Tr.length,Lr=/^[ \t\n\r\u000c]+/,Mr=/^[, \t\n\r\u000c]+/,Fr=/^[^ \t\n\r\u000c]+/,zr=/[,]+$/,Ur=/^\d+$/,Vr=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,Nr,Dr,jr,Gr,Wr,qr=0,Kr=[];;){if(Ar(Mr),qr>=Pr)return Kr;Nr=Ar(Fr),Dr=[],Nr.slice(-1)===","?(Nr=Nr.replace(zr,""),Zr()):Xr()}function Xr(){for(Ar(Lr),jr="",Gr="in descriptor";;){if(Wr=Tr.charAt(qr),Gr==="in descriptor")if(Rr(Wr))jr&&(Dr.push(jr),jr="",Gr="after descriptor");else if(Wr===","){qr+=1,jr&&Dr.push(jr),Zr();return}else if(Wr==="(")jr=jr+Wr,Gr="in parens";else if(Wr===""){jr&&Dr.push(jr),Zr();return}else jr=jr+Wr;else if(Gr==="in parens")if(Wr===")")jr=jr+Wr,Gr="in descriptor";else if(Wr===""){Dr.push(jr),Zr();return}else jr=jr+Wr;else if(Gr==="after descriptor"&&!Rr(Wr))if(Wr===""){Zr();return}else Gr="in descriptor",qr-=1;qr+=1}}function Zr(){var Jr=!1,_i,es,ts,rs,ns={},as,ls,us,xs,Ts;for(rs=0;rs<Dr.length;rs++)as=Dr[rs],ls=as[as.length-1],us=as.substring(0,as.length-1),xs=parseInt(us,10),Ts=parseFloat(us),Ur.test(us)&&ls==="w"?((_i||es)&&(Jr=!0),xs===0?Jr=!0:_i=xs):Vr.test(us)&&ls==="x"?((_i||es||ts)&&(Jr=!0),Ts<0?Jr=!0:es=Ts):Ur.test(us)&&ls==="h"?((ts||es)&&(Jr=!0),xs===0?Jr=!0:ts=xs):Jr=!0;Jr?console&&console.log&&console.log("Invalid srcset descriptor found in '"+Tr+"' at '"+as+"'."):(ns.url=Nr,_i&&(ns.w=_i),es&&(ns.d=es),ts&&(ns.h=ts),Kr.push(ns))}}})})(parseSrcset$1);var parseSrcsetExports=parseSrcset$1.exports,picocolors_browser={exports:{}},x=String,create=function(){return{isColorSupported:!1,reset:x,bold:x,dim:x,italic:x,underline:x,inverse:x,hidden:x,strikethrough:x,black:x,red:x,green:x,yellow:x,blue:x,magenta:x,cyan:x,white:x,gray:x,bgBlack:x,bgRed:x,bgGreen:x,bgYellow:x,bgBlue:x,bgMagenta:x,bgCyan:x,bgWhite:x}};picocolors_browser.exports=create();picocolors_browser.exports.createColors=create;var picocolors_browserExports=picocolors_browser.exports;const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1);let pico=picocolors_browserExports,terminalHighlight$1=require$$2,CssSyntaxError$3=class qv extends Error{constructor(Tr,Rr,Ar,Pr,Lr,Mr){super(Tr),this.name="CssSyntaxError",this.reason=Tr,Lr&&(this.file=Lr),Pr&&(this.source=Pr),Mr&&(this.plugin=Mr),typeof Rr<"u"&&typeof Ar<"u"&&(typeof Rr=="number"?(this.line=Rr,this.column=Ar):(this.line=Rr.line,this.column=Rr.column,this.endLine=Ar.line,this.endColumn=Ar.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,qv)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(Tr){if(!this.source)return"";let Rr=this.source;Tr==null&&(Tr=pico.isColorSupported),terminalHighlight$1&&Tr&&(Rr=terminalHighlight$1(Rr));let Ar=Rr.split(/\r?\n/),Pr=Math.max(this.line-3,0),Lr=Math.min(this.line+2,Ar.length),Mr=String(Lr).length,Fr,zr;if(Tr){let{bold:Ur,gray:Vr,red:Nr}=pico.createColors(!0);Fr=Dr=>Ur(Nr(Dr)),zr=Dr=>Vr(Dr)}else Fr=zr=Ur=>Ur;return Ar.slice(Pr,Lr).map((Ur,Vr)=>{let Nr=Pr+1+Vr,Dr=" "+(" "+Nr).slice(-Mr)+" | ";if(Nr===this.line){let jr=zr(Dr.replace(/\d/g," "))+Ur.slice(0,this.column-1).replace(/[^\t]/g," ");return Fr(">")+zr(Dr)+Ur+`
 `+jr+Fr("^")}return" "+zr(Dr)+Ur}).join(`
`)}toString(){let Tr=this.showSourceCode();return Tr&&(Tr=`

`+Tr+`
`),this.name+": "+this.message+Tr}};var cssSyntaxError=CssSyntaxError$3;CssSyntaxError$3.default=CssSyntaxError$3;var symbols={};symbols.isClean=Symbol("isClean");symbols.my=Symbol("my");const DEFAULT_RAW={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function capitalize(_r){return _r[0].toUpperCase()+_r.slice(1)}let Stringifier$2=class{constructor(Tr){this.builder=Tr}atrule(Tr,Rr){let Ar="@"+Tr.name,Pr=Tr.params?this.rawValue(Tr,"params"):"";if(typeof Tr.raws.afterName<"u"?Ar+=Tr.raws.afterName:Pr&&(Ar+=" "),Tr.nodes)this.block(Tr,Ar+Pr);else{let Lr=(Tr.raws.between||"")+(Rr?";":"");this.builder(Ar+Pr+Lr,Tr)}}beforeAfter(Tr,Rr){let Ar;Tr.type==="decl"?Ar=this.raw(Tr,null,"beforeDecl"):Tr.type==="comment"?Ar=this.raw(Tr,null,"beforeComment"):Rr==="before"?Ar=this.raw(Tr,null,"beforeRule"):Ar=this.raw(Tr,null,"beforeClose");let Pr=Tr.parent,Lr=0;for(;Pr&&Pr.type!=="root";)Lr+=1,Pr=Pr.parent;if(Ar.includes(`
`)){let Mr=this.raw(Tr,null,"indent");if(Mr.length)for(let Fr=0;Fr<Lr;Fr++)Ar+=Mr}return Ar}block(Tr,Rr){let Ar=this.raw(Tr,"between","beforeOpen");this.builder(Rr+Ar+"{",Tr,"start");let Pr;Tr.nodes&&Tr.nodes.length?(this.body(Tr),Pr=this.raw(Tr,"after")):Pr=this.raw(Tr,"after","emptyBody"),Pr&&this.builder(Pr),this.builder("}",Tr,"end")}body(Tr){let Rr=Tr.nodes.length-1;for(;Rr>0&&Tr.nodes[Rr].type==="comment";)Rr-=1;let Ar=this.raw(Tr,"semicolon");for(let Pr=0;Pr<Tr.nodes.length;Pr++){let Lr=Tr.nodes[Pr],Mr=this.raw(Lr,"before");Mr&&this.builder(Mr),this.stringify(Lr,Rr!==Pr||Ar)}}comment(Tr){let Rr=this.raw(Tr,"left","commentLeft"),Ar=this.raw(Tr,"right","commentRight");this.builder("/*"+Rr+Tr.text+Ar+"*/",Tr)}decl(Tr,Rr){let Ar=this.raw(Tr,"between","colon"),Pr=Tr.prop+Ar+this.rawValue(Tr,"value");Tr.important&&(Pr+=Tr.raws.important||" !important"),Rr&&(Pr+=";"),this.builder(Pr,Tr)}document(Tr){this.body(Tr)}raw(Tr,Rr,Ar){let Pr;if(Ar||(Ar=Rr),Rr&&(Pr=Tr.raws[Rr],typeof Pr<"u"))return Pr;let Lr=Tr.parent;if(Ar==="before"&&(!Lr||Lr.type==="root"&&Lr.first===Tr||Lr&&Lr.type==="document"))return"";if(!Lr)return DEFAULT_RAW[Ar];let Mr=Tr.root();if(Mr.rawCache||(Mr.rawCache={}),typeof Mr.rawCache[Ar]<"u")return Mr.rawCache[Ar];if(Ar==="before"||Ar==="after")return this.beforeAfter(Tr,Ar);{let Fr="raw"+capitalize(Ar);this[Fr]?Pr=this[Fr](Mr,Tr):Mr.walk(zr=>{if(Pr=zr.raws[Rr],typeof Pr<"u")return!1})}return typeof Pr>"u"&&(Pr=DEFAULT_RAW[Ar]),Mr.rawCache[Ar]=Pr,Pr}rawBeforeClose(Tr){let Rr;return Tr.walk(Ar=>{if(Ar.nodes&&Ar.nodes.length>0&&typeof Ar.raws.after<"u")return Rr=Ar.raws.after,Rr.includes(`
`)&&(Rr=Rr.replace(/[^\n]+$/,"")),!1}),Rr&&(Rr=Rr.replace(/\S/g,"")),Rr}rawBeforeComment(Tr,Rr){let Ar;return Tr.walkComments(Pr=>{if(typeof Pr.raws.before<"u")return Ar=Pr.raws.before,Ar.includes(`
`)&&(Ar=Ar.replace(/[^\n]+$/,"")),!1}),typeof Ar>"u"?Ar=this.raw(Rr,null,"beforeDecl"):Ar&&(Ar=Ar.replace(/\S/g,"")),Ar}rawBeforeDecl(Tr,Rr){let Ar;return Tr.walkDecls(Pr=>{if(typeof Pr.raws.before<"u")return Ar=Pr.raws.before,Ar.includes(`
`)&&(Ar=Ar.replace(/[^\n]+$/,"")),!1}),typeof Ar>"u"?Ar=this.raw(Rr,null,"beforeRule"):Ar&&(Ar=Ar.replace(/\S/g,"")),Ar}rawBeforeOpen(Tr){let Rr;return Tr.walk(Ar=>{if(Ar.type!=="decl"&&(Rr=Ar.raws.between,typeof Rr<"u"))return!1}),Rr}rawBeforeRule(Tr){let Rr;return Tr.walk(Ar=>{if(Ar.nodes&&(Ar.parent!==Tr||Tr.first!==Ar)&&typeof Ar.raws.before<"u")return Rr=Ar.raws.before,Rr.includes(`
`)&&(Rr=Rr.replace(/[^\n]+$/,"")),!1}),Rr&&(Rr=Rr.replace(/\S/g,"")),Rr}rawColon(Tr){let Rr;return Tr.walkDecls(Ar=>{if(typeof Ar.raws.between<"u")return Rr=Ar.raws.between.replace(/[^\s:]/g,""),!1}),Rr}rawEmptyBody(Tr){let Rr;return Tr.walk(Ar=>{if(Ar.nodes&&Ar.nodes.length===0&&(Rr=Ar.raws.after,typeof Rr<"u"))return!1}),Rr}rawIndent(Tr){if(Tr.raws.indent)return Tr.raws.indent;let Rr;return Tr.walk(Ar=>{let Pr=Ar.parent;if(Pr&&Pr!==Tr&&Pr.parent&&Pr.parent===Tr&&typeof Ar.raws.before<"u"){let Lr=Ar.raws.before.split(`
`);return Rr=Lr[Lr.length-1],Rr=Rr.replace(/\S/g,""),!1}}),Rr}rawSemicolon(Tr){let Rr;return Tr.walk(Ar=>{if(Ar.nodes&&Ar.nodes.length&&Ar.last.type==="decl"&&(Rr=Ar.raws.semicolon,typeof Rr<"u"))return!1}),Rr}rawValue(Tr,Rr){let Ar=Tr[Rr],Pr=Tr.raws[Rr];return Pr&&Pr.value===Ar?Pr.raw:Ar}root(Tr){this.body(Tr),Tr.raws.after&&this.builder(Tr.raws.after)}rule(Tr){this.block(Tr,this.rawValue(Tr,"selector")),Tr.raws.ownSemicolon&&this.builder(Tr.raws.ownSemicolon,Tr,"end")}stringify(Tr,Rr){if(!this[Tr.type])throw new Error("Unknown AST node type "+Tr.type+". Maybe you need to change PostCSS stringifier.");this[Tr.type](Tr,Rr)}};var stringifier=Stringifier$2;Stringifier$2.default=Stringifier$2;let Stringifier$1=stringifier;function stringify$4(_r,Tr){new Stringifier$1(Tr).stringify(_r)}var stringify_1=stringify$4;stringify$4.default=stringify$4;let{isClean:isClean$2,my:my$2}=symbols,CssSyntaxError$2=cssSyntaxError,Stringifier=stringifier,stringify$3=stringify_1;function cloneNode(_r,Tr){let Rr=new _r.constructor;for(let Ar in _r){if(!Object.prototype.hasOwnProperty.call(_r,Ar)||Ar==="proxyCache")continue;let Pr=_r[Ar],Lr=typeof Pr;Ar==="parent"&&Lr==="object"?Tr&&(Rr[Ar]=Tr):Ar==="source"?Rr[Ar]=Pr:Array.isArray(Pr)?Rr[Ar]=Pr.map(Mr=>cloneNode(Mr,Rr)):(Lr==="object"&&Pr!==null&&(Pr=cloneNode(Pr)),Rr[Ar]=Pr)}return Rr}let Node$5=class{constructor(Tr={}){this.raws={},this[isClean$2]=!1,this[my$2]=!0;for(let Rr in Tr)if(Rr==="nodes"){this.nodes=[];for(let Ar of Tr[Rr])typeof Ar.clone=="function"?this.append(Ar.clone()):this.append(Ar)}else this[Rr]=Tr[Rr]}addToError(Tr){if(Tr.postcssNode=this,Tr.stack&&this.source&&/\n\s{4}at /.test(Tr.stack)){let Rr=this.source;Tr.stack=Tr.stack.replace(/\n\s{4}at /,`$&${Rr.input.from}:${Rr.start.line}:${Rr.start.column}$&`)}return Tr}after(Tr){return this.parent.insertAfter(this,Tr),this}assign(Tr={}){for(let Rr in Tr)this[Rr]=Tr[Rr];return this}before(Tr){return this.parent.insertBefore(this,Tr),this}cleanRaws(Tr){delete this.raws.before,delete this.raws.after,Tr||delete this.raws.between}clone(Tr={}){let Rr=cloneNode(this);for(let Ar in Tr)Rr[Ar]=Tr[Ar];return Rr}cloneAfter(Tr={}){let Rr=this.clone(Tr);return this.parent.insertAfter(this,Rr),Rr}cloneBefore(Tr={}){let Rr=this.clone(Tr);return this.parent.insertBefore(this,Rr),Rr}error(Tr,Rr={}){if(this.source){let{end:Ar,start:Pr}=this.rangeBy(Rr);return this.source.input.error(Tr,{column:Pr.column,line:Pr.line},{column:Ar.column,line:Ar.line},Rr)}return new CssSyntaxError$2(Tr)}getProxyProcessor(){return{get(Tr,Rr){return Rr==="proxyOf"?Tr:Rr==="root"?()=>Tr.root().toProxy():Tr[Rr]},set(Tr,Rr,Ar){return Tr[Rr]===Ar||(Tr[Rr]=Ar,(Rr==="prop"||Rr==="value"||Rr==="name"||Rr==="params"||Rr==="important"||Rr==="text")&&Tr.markDirty()),!0}}}markDirty(){if(this[isClean$2]){this[isClean$2]=!1;let Tr=this;for(;Tr=Tr.parent;)Tr[isClean$2]=!1}}next(){if(!this.parent)return;let Tr=this.parent.index(this);return this.parent.nodes[Tr+1]}positionBy(Tr,Rr){let Ar=this.source.start;if(Tr.index)Ar=this.positionInside(Tr.index,Rr);else if(Tr.word){Rr=this.toString();let Pr=Rr.indexOf(Tr.word);Pr!==-1&&(Ar=this.positionInside(Pr,Rr))}return Ar}positionInside(Tr,Rr){let Ar=Rr||this.toString(),Pr=this.source.start.column,Lr=this.source.start.line;for(let Mr=0;Mr<Tr;Mr++)Ar[Mr]===`
`?(Pr=1,Lr+=1):Pr+=1;return{column:Pr,line:Lr}}prev(){if(!this.parent)return;let Tr=this.parent.index(this);return this.parent.nodes[Tr-1]}rangeBy(Tr){let Rr={column:this.source.start.column,line:this.source.start.line},Ar=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:Rr.column+1,line:Rr.line};if(Tr.word){let Pr=this.toString(),Lr=Pr.indexOf(Tr.word);Lr!==-1&&(Rr=this.positionInside(Lr,Pr),Ar=this.positionInside(Lr+Tr.word.length,Pr))}else Tr.start?Rr={column:Tr.start.column,line:Tr.start.line}:Tr.index&&(Rr=this.positionInside(Tr.index)),Tr.end?Ar={column:Tr.end.column,line:Tr.end.line}:Tr.endIndex?Ar=this.positionInside(Tr.endIndex):Tr.index&&(Ar=this.positionInside(Tr.index+1));return(Ar.line<Rr.line||Ar.line===Rr.line&&Ar.column<=Rr.column)&&(Ar={column:Rr.column+1,line:Rr.line}),{end:Ar,start:Rr}}raw(Tr,Rr){return new Stringifier().raw(this,Tr,Rr)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...Tr){if(this.parent){let Rr=this,Ar=!1;for(let Pr of Tr)Pr===this?Ar=!0:Ar?(this.parent.insertAfter(Rr,Pr),Rr=Pr):this.parent.insertBefore(Rr,Pr);Ar||this.remove()}return this}root(){let Tr=this;for(;Tr.parent&&Tr.parent.type!=="document";)Tr=Tr.parent;return Tr}toJSON(Tr,Rr){let Ar={},Pr=Rr==null;Rr=Rr||new Map;let Lr=0;for(let Mr in this){if(!Object.prototype.hasOwnProperty.call(this,Mr)||Mr==="parent"||Mr==="proxyCache")continue;let Fr=this[Mr];if(Array.isArray(Fr))Ar[Mr]=Fr.map(zr=>typeof zr=="object"&&zr.toJSON?zr.toJSON(null,Rr):zr);else if(typeof Fr=="object"&&Fr.toJSON)Ar[Mr]=Fr.toJSON(null,Rr);else if(Mr==="source"){let zr=Rr.get(Fr.input);zr==null&&(zr=Lr,Rr.set(Fr.input,Lr),Lr++),Ar[Mr]={end:Fr.end,inputId:zr,start:Fr.start}}else Ar[Mr]=Fr}return Pr&&(Ar.inputs=[...Rr.keys()].map(Mr=>Mr.toJSON())),Ar}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(Tr=stringify$3){Tr.stringify&&(Tr=Tr.stringify);let Rr="";return Tr(this,Ar=>{Rr+=Ar}),Rr}warn(Tr,Rr,Ar){let Pr={node:this};for(let Lr in Ar)Pr[Lr]=Ar[Lr];return Tr.warn(Rr,Pr)}get proxyOf(){return this}};var node=Node$5;Node$5.default=Node$5;let Node$4=node,Declaration$4=class extends Node$4{constructor(Tr){Tr&&typeof Tr.value<"u"&&typeof Tr.value!="string"&&(Tr={...Tr,value:String(Tr.value)}),super(Tr),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var declaration=Declaration$4;Declaration$4.default=Declaration$4;let urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",customAlphabet=(_r,Tr=21)=>(Rr=Tr)=>{let Ar="",Pr=Rr;for(;Pr--;)Ar+=_r[Math.random()*_r.length|0];return Ar},nanoid$1=(_r=21)=>{let Tr="",Rr=_r;for(;Rr--;)Tr+=urlAlphabet[Math.random()*64|0];return Tr};var nonSecure={nanoid:nanoid$1,customAlphabet};let{SourceMapConsumer:SourceMapConsumer$2,SourceMapGenerator:SourceMapGenerator$2}=require$$2,{existsSync,readFileSync}=require$$2,{dirname:dirname$1,join}=require$$2;function fromBase64(_r){return Buffer?Buffer.from(_r,"base64").toString():window.atob(_r)}let PreviousMap$2=class{constructor(Tr,Rr){if(Rr.map===!1)return;this.loadAnnotation(Tr),this.inline=this.startWith(this.annotation,"data:");let Ar=Rr.map?Rr.map.prev:void 0,Pr=this.loadMap(Rr.from,Ar);!this.mapFile&&Rr.from&&(this.mapFile=Rr.from),this.mapFile&&(this.root=dirname$1(this.mapFile)),Pr&&(this.text=Pr)}consumer(){return this.consumerCache||(this.consumerCache=new SourceMapConsumer$2(this.text)),this.consumerCache}decodeInline(Tr){let Rr=/^data:application\/json;charset=utf-?8;base64,/,Ar=/^data:application\/json;base64,/,Pr=/^data:application\/json;charset=utf-?8,/,Lr=/^data:application\/json,/;if(Pr.test(Tr)||Lr.test(Tr))return decodeURIComponent(Tr.substr(RegExp.lastMatch.length));if(Rr.test(Tr)||Ar.test(Tr))return fromBase64(Tr.substr(RegExp.lastMatch.length));let Mr=Tr.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+Mr)}getAnnotationURL(Tr){return Tr.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(Tr){return typeof Tr!="object"?!1:typeof Tr.mappings=="string"||typeof Tr._mappings=="string"||Array.isArray(Tr.sections)}loadAnnotation(Tr){let Rr=Tr.match(/\/\*\s*# sourceMappingURL=/gm);if(!Rr)return;let Ar=Tr.lastIndexOf(Rr.pop()),Pr=Tr.indexOf("*/",Ar);Ar>-1&&Pr>-1&&(this.annotation=this.getAnnotationURL(Tr.substring(Ar,Pr)))}loadFile(Tr){if(this.root=dirname$1(Tr),existsSync(Tr))return this.mapFile=Tr,readFileSync(Tr,"utf-8").toString().trim()}loadMap(Tr,Rr){if(Rr===!1)return!1;if(Rr){if(typeof Rr=="string")return Rr;if(typeof Rr=="function"){let Ar=Rr(Tr);if(Ar){let Pr=this.loadFile(Ar);if(!Pr)throw new Error("Unable to load previous source map: "+Ar.toString());return Pr}}else{if(Rr instanceof SourceMapConsumer$2)return SourceMapGenerator$2.fromSourceMap(Rr).toString();if(Rr instanceof SourceMapGenerator$2)return Rr.toString();if(this.isMap(Rr))return JSON.stringify(Rr);throw new Error("Unsupported previous source map format: "+Rr.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let Ar=this.annotation;return Tr&&(Ar=join(dirname$1(Tr),Ar)),this.loadFile(Ar)}}}startWith(Tr,Rr){return Tr?Tr.substr(0,Rr.length)===Rr:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var previousMap=PreviousMap$2;PreviousMap$2.default=PreviousMap$2;let{SourceMapConsumer:SourceMapConsumer$1,SourceMapGenerator:SourceMapGenerator$1}=require$$2,{fileURLToPath,pathToFileURL:pathToFileURL$1}=require$$2,{isAbsolute,resolve:resolve$1}=require$$2,{nanoid}=nonSecure,terminalHighlight=require$$2,CssSyntaxError$1=cssSyntaxError,PreviousMap$1=previousMap,fromOffsetCache=Symbol("fromOffsetCache"),sourceMapAvailable$1=!!(SourceMapConsumer$1&&SourceMapGenerator$1),pathAvailable$1=!!(resolve$1&&isAbsolute),Input$4=class{constructor(Tr,Rr={}){if(Tr===null||typeof Tr>"u"||typeof Tr=="object"&&!Tr.toString)throw new Error(`PostCSS received ${Tr} instead of CSS string`);if(this.css=Tr.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,Rr.from&&(!pathAvailable$1||/^\w+:\/\//.test(Rr.from)||isAbsolute(Rr.from)?this.file=Rr.from:this.file=resolve$1(Rr.from)),pathAvailable$1&&sourceMapAvailable$1){let Ar=new PreviousMap$1(this.css,Rr);if(Ar.text){this.map=Ar;let Pr=Ar.consumer().file;!this.file&&Pr&&(this.file=this.mapResolve(Pr))}}this.file||(this.id="<input css "+nanoid(6)+">"),this.map&&(this.map.file=this.from)}error(Tr,Rr,Ar,Pr={}){let Lr,Mr,Fr;if(Rr&&typeof Rr=="object"){let Ur=Rr,Vr=Ar;if(typeof Ur.offset=="number"){let Nr=this.fromOffset(Ur.offset);Rr=Nr.line,Ar=Nr.col}else Rr=Ur.line,Ar=Ur.column;if(typeof Vr.offset=="number"){let Nr=this.fromOffset(Vr.offset);Mr=Nr.line,Fr=Nr.col}else Mr=Vr.line,Fr=Vr.column}else if(!Ar){let Ur=this.fromOffset(Rr);Rr=Ur.line,Ar=Ur.col}let zr=this.origin(Rr,Ar,Mr,Fr);return zr?Lr=new CssSyntaxError$1(Tr,zr.endLine===void 0?zr.line:{column:zr.column,line:zr.line},zr.endLine===void 0?zr.column:{column:zr.endColumn,line:zr.endLine},zr.source,zr.file,Pr.plugin):Lr=new CssSyntaxError$1(Tr,Mr===void 0?Rr:{column:Ar,line:Rr},Mr===void 0?Ar:{column:Fr,line:Mr},this.css,this.file,Pr.plugin),Lr.input={column:Ar,endColumn:Fr,endLine:Mr,line:Rr,source:this.css},this.file&&(pathToFileURL$1&&(Lr.input.url=pathToFileURL$1(this.file).toString()),Lr.input.file=this.file),Lr}fromOffset(Tr){let Rr,Ar;if(this[fromOffsetCache])Ar=this[fromOffsetCache];else{let Lr=this.css.split(`
`);Ar=new Array(Lr.length);let Mr=0;for(let Fr=0,zr=Lr.length;Fr<zr;Fr++)Ar[Fr]=Mr,Mr+=Lr[Fr].length+1;this[fromOffsetCache]=Ar}Rr=Ar[Ar.length-1];let Pr=0;if(Tr>=Rr)Pr=Ar.length-1;else{let Lr=Ar.length-2,Mr;for(;Pr<Lr;)if(Mr=Pr+(Lr-Pr>>1),Tr<Ar[Mr])Lr=Mr-1;else if(Tr>=Ar[Mr+1])Pr=Mr+1;else{Pr=Mr;break}}return{col:Tr-Ar[Pr]+1,line:Pr+1}}mapResolve(Tr){return/^\w+:\/\//.test(Tr)?Tr:resolve$1(this.map.consumer().sourceRoot||this.map.root||".",Tr)}origin(Tr,Rr,Ar,Pr){if(!this.map)return!1;let Lr=this.map.consumer(),Mr=Lr.originalPositionFor({column:Rr,line:Tr});if(!Mr.source)return!1;let Fr;typeof Ar=="number"&&(Fr=Lr.originalPositionFor({column:Pr,line:Ar}));let zr;isAbsolute(Mr.source)?zr=pathToFileURL$1(Mr.source):zr=new URL(Mr.source,this.map.consumer().sourceRoot||pathToFileURL$1(this.map.mapFile));let Ur={column:Mr.column,endColumn:Fr&&Fr.column,endLine:Fr&&Fr.line,line:Mr.line,url:zr.toString()};if(zr.protocol==="file:")if(fileURLToPath)Ur.file=fileURLToPath(zr);else throw new Error("file: protocol is not available in this PostCSS build");let Vr=Lr.sourceContentFor(Mr.source);return Vr&&(Ur.source=Vr),Ur}toJSON(){let Tr={};for(let Rr of["hasBOM","css","file","id"])this[Rr]!=null&&(Tr[Rr]=this[Rr]);return this.map&&(Tr.map={...this.map},Tr.map.consumerCache&&(Tr.map.consumerCache=void 0)),Tr}get from(){return this.file||this.id}};var input=Input$4;Input$4.default=Input$4;terminalHighlight&&terminalHighlight.registerInput&&terminalHighlight.registerInput(Input$4);let{SourceMapConsumer,SourceMapGenerator}=require$$2,{dirname,relative,resolve,sep}=require$$2,{pathToFileURL}=require$$2,Input$3=input,sourceMapAvailable=!!(SourceMapConsumer&&SourceMapGenerator),pathAvailable=!!(dirname&&resolve&&relative&&sep),MapGenerator$2=class{constructor(Tr,Rr,Ar,Pr){this.stringify=Tr,this.mapOpts=Ar.map||{},this.root=Rr,this.opts=Ar,this.css=Pr,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let Tr;this.isInline()?Tr="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?Tr=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?Tr=this.mapOpts.annotation(this.opts.to,this.root):Tr=this.outputFile()+".map";let Rr=`
`;this.css.includes(`\r
`)&&(Rr=`\r
`),this.css+=Rr+"/*# sourceMappingURL="+Tr+" */"}applyPrevMaps(){for(let Tr of this.previous()){let Rr=this.toUrl(this.path(Tr.file)),Ar=Tr.root||dirname(Tr.file),Pr;this.mapOpts.sourcesContent===!1?(Pr=new SourceMapConsumer(Tr.text),Pr.sourcesContent&&(Pr.sourcesContent=Pr.sourcesContent.map(()=>null))):Pr=Tr.consumer(),this.map.applySourceMap(Pr,Rr,this.toUrl(this.path(Ar)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let Tr;for(let Rr=this.root.nodes.length-1;Rr>=0;Rr--)Tr=this.root.nodes[Rr],Tr.type==="comment"&&Tr.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(Rr)}else this.css&&(this.css=this.css.replace(/(\n)?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),pathAvailable&&sourceMapAvailable&&this.isMap())return this.generateMap();{let Tr="";return this.stringify(this.root,Rr=>{Tr+=Rr}),[Tr]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let Tr=this.previous()[0].consumer();Tr.file=this.outputFile(),this.map=SourceMapGenerator.fromSourceMap(Tr)}else this.map=new SourceMapGenerator({file:this.outputFile()}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new SourceMapGenerator({file:this.outputFile()});let Tr=1,Rr=1,Ar="<no source>",Pr={generated:{column:0,line:0},original:{column:0,line:0},source:""},Lr,Mr;this.stringify(this.root,(Fr,zr,Ur)=>{if(this.css+=Fr,zr&&Ur!=="end"&&(Pr.generated.line=Tr,Pr.generated.column=Rr-1,zr.source&&zr.source.start?(Pr.source=this.sourcePath(zr),Pr.original.line=zr.source.start.line,Pr.original.column=zr.source.start.column-1,this.map.addMapping(Pr)):(Pr.source=Ar,Pr.original.line=1,Pr.original.column=0,this.map.addMapping(Pr))),Lr=Fr.match(/\n/g),Lr?(Tr+=Lr.length,Mr=Fr.lastIndexOf(`
`),Rr=Fr.length-Mr):Rr+=Fr.length,zr&&Ur!=="start"){let Vr=zr.parent||{raws:{}};(!(zr.type==="decl"||zr.type==="atrule"&&!zr.nodes)||zr!==Vr.last||Vr.raws.semicolon)&&(zr.source&&zr.source.end?(Pr.source=this.sourcePath(zr),Pr.original.line=zr.source.end.line,Pr.original.column=zr.source.end.column-1,Pr.generated.line=Tr,Pr.generated.column=Rr-2,this.map.addMapping(Pr)):(Pr.source=Ar,Pr.original.line=1,Pr.original.column=0,Pr.generated.line=Tr,Pr.generated.column=Rr-1,this.map.addMapping(Pr)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(Tr=>Tr.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let Tr=this.mapOpts.annotation;return typeof Tr<"u"&&Tr!==!0?!1:this.previous().length?this.previous().some(Rr=>Rr.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(Tr=>Tr.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(Tr){if(this.mapOpts.absolute||Tr.charCodeAt(0)===60||/^\w+:\/\//.test(Tr))return Tr;let Rr=this.memoizedPaths.get(Tr);if(Rr)return Rr;let Ar=this.opts.to?dirname(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(Ar=dirname(resolve(Ar,this.mapOpts.annotation)));let Pr=relative(Ar,Tr);return this.memoizedPaths.set(Tr,Pr),Pr}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(Tr=>{if(Tr.source&&Tr.source.input.map){let Rr=Tr.source.input.map;this.previousMaps.includes(Rr)||this.previousMaps.push(Rr)}});else{let Tr=new Input$3(this.css,this.opts);Tr.map&&this.previousMaps.push(Tr.map)}return this.previousMaps}setSourcesContent(){let Tr={};if(this.root)this.root.walk(Rr=>{if(Rr.source){let Ar=Rr.source.input.from;if(Ar&&!Tr[Ar]){Tr[Ar]=!0;let Pr=this.usesFileUrls?this.toFileUrl(Ar):this.toUrl(this.path(Ar));this.map.setSourceContent(Pr,Rr.source.input.css)}}});else if(this.css){let Rr=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(Rr,this.css)}}sourcePath(Tr){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(Tr.source.input.from):this.toUrl(this.path(Tr.source.input.from))}toBase64(Tr){return Buffer?Buffer.from(Tr).toString("base64"):window.btoa(unescape(encodeURIComponent(Tr)))}toFileUrl(Tr){let Rr=this.memoizedFileURLs.get(Tr);if(Rr)return Rr;if(pathToFileURL){let Ar=pathToFileURL(Tr).toString();return this.memoizedFileURLs.set(Tr,Ar),Ar}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(Tr){let Rr=this.memoizedURLs.get(Tr);if(Rr)return Rr;sep==="\\"&&(Tr=Tr.replace(/\\/g,"/"));let Ar=encodeURI(Tr).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(Tr,Ar),Ar}};var mapGenerator=MapGenerator$2;let Node$3=node,Comment$4=class extends Node$3{constructor(Tr){super(Tr),this.type="comment"}};var comment=Comment$4;Comment$4.default=Comment$4;let{isClean:isClean$1,my:my$1}=symbols,Declaration$3=declaration,Comment$3=comment,Node$2=node,parse$9,Rule$4,AtRule$4,Root$6;function cleanSource(_r){return _r.map(Tr=>(Tr.nodes&&(Tr.nodes=cleanSource(Tr.nodes)),delete Tr.source,Tr))}function markDirtyUp(_r){if(_r[isClean$1]=!1,_r.proxyOf.nodes)for(let Tr of _r.proxyOf.nodes)markDirtyUp(Tr)}let Container$7=class Kv extends Node$2{append(...Tr){for(let Rr of Tr){let Ar=this.normalize(Rr,this.last);for(let Pr of Ar)this.proxyOf.nodes.push(Pr)}return this.markDirty(),this}cleanRaws(Tr){if(super.cleanRaws(Tr),this.nodes)for(let Rr of this.nodes)Rr.cleanRaws(Tr)}each(Tr){if(!this.proxyOf.nodes)return;let Rr=this.getIterator(),Ar,Pr;for(;this.indexes[Rr]<this.proxyOf.nodes.length&&(Ar=this.indexes[Rr],Pr=Tr(this.proxyOf.nodes[Ar],Ar),Pr!==!1);)this.indexes[Rr]+=1;return delete this.indexes[Rr],Pr}every(Tr){return this.nodes.every(Tr)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let Tr=this.lastEach;return this.indexes[Tr]=0,Tr}getProxyProcessor(){return{get(Tr,Rr){return Rr==="proxyOf"?Tr:Tr[Rr]?Rr==="each"||typeof Rr=="string"&&Rr.startsWith("walk")?(...Ar)=>Tr[Rr](...Ar.map(Pr=>typeof Pr=="function"?(Lr,Mr)=>Pr(Lr.toProxy(),Mr):Pr)):Rr==="every"||Rr==="some"?Ar=>Tr[Rr]((Pr,...Lr)=>Ar(Pr.toProxy(),...Lr)):Rr==="root"?()=>Tr.root().toProxy():Rr==="nodes"?Tr.nodes.map(Ar=>Ar.toProxy()):Rr==="first"||Rr==="last"?Tr[Rr].toProxy():Tr[Rr]:Tr[Rr]},set(Tr,Rr,Ar){return Tr[Rr]===Ar||(Tr[Rr]=Ar,(Rr==="name"||Rr==="params"||Rr==="selector")&&Tr.markDirty()),!0}}}index(Tr){return typeof Tr=="number"?Tr:(Tr.proxyOf&&(Tr=Tr.proxyOf),this.proxyOf.nodes.indexOf(Tr))}insertAfter(Tr,Rr){let Ar=this.index(Tr),Pr=this.normalize(Rr,this.proxyOf.nodes[Ar]).reverse();Ar=this.index(Tr);for(let Mr of Pr)this.proxyOf.nodes.splice(Ar+1,0,Mr);let Lr;for(let Mr in this.indexes)Lr=this.indexes[Mr],Ar<Lr&&(this.indexes[Mr]=Lr+Pr.length);return this.markDirty(),this}insertBefore(Tr,Rr){let Ar=this.index(Tr),Pr=Ar===0?"prepend":!1,Lr=this.normalize(Rr,this.proxyOf.nodes[Ar],Pr).reverse();Ar=this.index(Tr);for(let Fr of Lr)this.proxyOf.nodes.splice(Ar,0,Fr);let Mr;for(let Fr in this.indexes)Mr=this.indexes[Fr],Ar<=Mr&&(this.indexes[Fr]=Mr+Lr.length);return this.markDirty(),this}normalize(Tr,Rr){if(typeof Tr=="string")Tr=cleanSource(parse$9(Tr).nodes);else if(Array.isArray(Tr)){Tr=Tr.slice(0);for(let Pr of Tr)Pr.parent&&Pr.parent.removeChild(Pr,"ignore")}else if(Tr.type==="root"&&this.type!=="document"){Tr=Tr.nodes.slice(0);for(let Pr of Tr)Pr.parent&&Pr.parent.removeChild(Pr,"ignore")}else if(Tr.type)Tr=[Tr];else if(Tr.prop){if(typeof Tr.value>"u")throw new Error("Value field is missed in node creation");typeof Tr.value!="string"&&(Tr.value=String(Tr.value)),Tr=[new Declaration$3(Tr)]}else if(Tr.selector)Tr=[new Rule$4(Tr)];else if(Tr.name)Tr=[new AtRule$4(Tr)];else if(Tr.text)Tr=[new Comment$3(Tr)];else throw new Error("Unknown node type in node creation");return Tr.map(Pr=>(Pr[my$1]||Kv.rebuild(Pr),Pr=Pr.proxyOf,Pr.parent&&Pr.parent.removeChild(Pr),Pr[isClean$1]&&markDirtyUp(Pr),typeof Pr.raws.before>"u"&&Rr&&typeof Rr.raws.before<"u"&&(Pr.raws.before=Rr.raws.before.replace(/\S/g,"")),Pr.parent=this.proxyOf,Pr))}prepend(...Tr){Tr=Tr.reverse();for(let Rr of Tr){let Ar=this.normalize(Rr,this.first,"prepend").reverse();for(let Pr of Ar)this.proxyOf.nodes.unshift(Pr);for(let Pr in this.indexes)this.indexes[Pr]=this.indexes[Pr]+Ar.length}return this.markDirty(),this}push(Tr){return Tr.parent=this,this.proxyOf.nodes.push(Tr),this}removeAll(){for(let Tr of this.proxyOf.nodes)Tr.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(Tr){Tr=this.index(Tr),this.proxyOf.nodes[Tr].parent=void 0,this.proxyOf.nodes.splice(Tr,1);let Rr;for(let Ar in this.indexes)Rr=this.indexes[Ar],Rr>=Tr&&(this.indexes[Ar]=Rr-1);return this.markDirty(),this}replaceValues(Tr,Rr,Ar){return Ar||(Ar=Rr,Rr={}),this.walkDecls(Pr=>{Rr.props&&!Rr.props.includes(Pr.prop)||Rr.fast&&!Pr.value.includes(Rr.fast)||(Pr.value=Pr.value.replace(Tr,Ar))}),this.markDirty(),this}some(Tr){return this.nodes.some(Tr)}walk(Tr){return this.each((Rr,Ar)=>{let Pr;try{Pr=Tr(Rr,Ar)}catch(Lr){throw Rr.addToError(Lr)}return Pr!==!1&&Rr.walk&&(Pr=Rr.walk(Tr)),Pr})}walkAtRules(Tr,Rr){return Rr?Tr instanceof RegExp?this.walk((Ar,Pr)=>{if(Ar.type==="atrule"&&Tr.test(Ar.name))return Rr(Ar,Pr)}):this.walk((Ar,Pr)=>{if(Ar.type==="atrule"&&Ar.name===Tr)return Rr(Ar,Pr)}):(Rr=Tr,this.walk((Ar,Pr)=>{if(Ar.type==="atrule")return Rr(Ar,Pr)}))}walkComments(Tr){return this.walk((Rr,Ar)=>{if(Rr.type==="comment")return Tr(Rr,Ar)})}walkDecls(Tr,Rr){return Rr?Tr instanceof RegExp?this.walk((Ar,Pr)=>{if(Ar.type==="decl"&&Tr.test(Ar.prop))return Rr(Ar,Pr)}):this.walk((Ar,Pr)=>{if(Ar.type==="decl"&&Ar.prop===Tr)return Rr(Ar,Pr)}):(Rr=Tr,this.walk((Ar,Pr)=>{if(Ar.type==="decl")return Rr(Ar,Pr)}))}walkRules(Tr,Rr){return Rr?Tr instanceof RegExp?this.walk((Ar,Pr)=>{if(Ar.type==="rule"&&Tr.test(Ar.selector))return Rr(Ar,Pr)}):this.walk((Ar,Pr)=>{if(Ar.type==="rule"&&Ar.selector===Tr)return Rr(Ar,Pr)}):(Rr=Tr,this.walk((Ar,Pr)=>{if(Ar.type==="rule")return Rr(Ar,Pr)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Container$7.registerParse=_r=>{parse$9=_r};Container$7.registerRule=_r=>{Rule$4=_r};Container$7.registerAtRule=_r=>{AtRule$4=_r};Container$7.registerRoot=_r=>{Root$6=_r};var container=Container$7;Container$7.default=Container$7;Container$7.rebuild=_r=>{_r.type==="atrule"?Object.setPrototypeOf(_r,AtRule$4.prototype):_r.type==="rule"?Object.setPrototypeOf(_r,Rule$4.prototype):_r.type==="decl"?Object.setPrototypeOf(_r,Declaration$3.prototype):_r.type==="comment"?Object.setPrototypeOf(_r,Comment$3.prototype):_r.type==="root"&&Object.setPrototypeOf(_r,Root$6.prototype),_r[my$1]=!0,_r.nodes&&_r.nodes.forEach(Tr=>{Container$7.rebuild(Tr)})};let Container$6=container,LazyResult$4,Processor$3,Document$3=class extends Container$6{constructor(Tr){super({type:"document",...Tr}),this.nodes||(this.nodes=[])}toResult(Tr={}){return new LazyResult$4(new Processor$3,this,Tr).stringify()}};Document$3.registerLazyResult=_r=>{LazyResult$4=_r};Document$3.registerProcessor=_r=>{Processor$3=_r};var document$1=Document$3;Document$3.default=Document$3;let Warning$2=class{constructor(Tr,Rr={}){if(this.type="warning",this.text=Tr,Rr.node&&Rr.node.source){let Ar=Rr.node.rangeBy(Rr);this.line=Ar.start.line,this.column=Ar.start.column,this.endLine=Ar.end.line,this.endColumn=Ar.end.column}for(let Ar in Rr)this[Ar]=Rr[Ar]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var warning=Warning$2;Warning$2.default=Warning$2;let Warning$1=warning,Result$3=class{constructor(Tr,Rr,Ar){this.processor=Tr,this.messages=[],this.root=Rr,this.opts=Ar,this.css=void 0,this.map=void 0}toString(){return this.css}warn(Tr,Rr={}){Rr.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(Rr.plugin=this.lastPlugin.postcssPlugin);let Ar=new Warning$1(Tr,Rr);return this.messages.push(Ar),Ar}warnings(){return this.messages.filter(Tr=>Tr.type==="warning")}get content(){return this.css}};var result=Result$3;Result$3.default=Result$3;const SINGLE_QUOTE="'".charCodeAt(0),DOUBLE_QUOTE='"'.charCodeAt(0),BACKSLASH="\\".charCodeAt(0),SLASH="/".charCodeAt(0),NEWLINE=`
`.charCodeAt(0),SPACE=" ".charCodeAt(0),FEED="\f".charCodeAt(0),TAB="	".charCodeAt(0),CR="\r".charCodeAt(0),OPEN_SQUARE="[".charCodeAt(0),CLOSE_SQUARE="]".charCodeAt(0),OPEN_PARENTHESES="(".charCodeAt(0),CLOSE_PARENTHESES=")".charCodeAt(0),OPEN_CURLY="{".charCodeAt(0),CLOSE_CURLY="}".charCodeAt(0),SEMICOLON=";".charCodeAt(0),ASTERISK="*".charCodeAt(0),COLON=":".charCodeAt(0),AT="@".charCodeAt(0),RE_AT_END=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET=/.[\n"'(/\\]/,RE_HEX_ESCAPE=/[\da-f]/i;var tokenize=function(Tr,Rr={}){let Ar=Tr.css.valueOf(),Pr=Rr.ignoreErrors,Lr,Mr,Fr,zr,Ur,Vr,Nr,Dr,jr,Gr,Wr=Ar.length,qr=0,Kr=[],Xr=[];function Zr(){return qr}function Jr(rs){throw Tr.error("Unclosed "+rs,qr)}function _i(){return Xr.length===0&&qr>=Wr}function es(rs){if(Xr.length)return Xr.pop();if(qr>=Wr)return;let ns=rs?rs.ignoreUnclosed:!1;switch(Lr=Ar.charCodeAt(qr),Lr){case NEWLINE:case SPACE:case TAB:case CR:case FEED:{Mr=qr;do Mr+=1,Lr=Ar.charCodeAt(Mr);while(Lr===SPACE||Lr===NEWLINE||Lr===TAB||Lr===CR||Lr===FEED);Gr=["space",Ar.slice(qr,Mr)],qr=Mr-1;break}case OPEN_SQUARE:case CLOSE_SQUARE:case OPEN_CURLY:case CLOSE_CURLY:case COLON:case SEMICOLON:case CLOSE_PARENTHESES:{let as=String.fromCharCode(Lr);Gr=[as,as,qr];break}case OPEN_PARENTHESES:{if(Dr=Kr.length?Kr.pop()[1]:"",jr=Ar.charCodeAt(qr+1),Dr==="url"&&jr!==SINGLE_QUOTE&&jr!==DOUBLE_QUOTE&&jr!==SPACE&&jr!==NEWLINE&&jr!==TAB&&jr!==FEED&&jr!==CR){Mr=qr;do{if(Vr=!1,Mr=Ar.indexOf(")",Mr+1),Mr===-1)if(Pr||ns){Mr=qr;break}else Jr("bracket");for(Nr=Mr;Ar.charCodeAt(Nr-1)===BACKSLASH;)Nr-=1,Vr=!Vr}while(Vr);Gr=["brackets",Ar.slice(qr,Mr+1),qr,Mr],qr=Mr}else Mr=Ar.indexOf(")",qr+1),zr=Ar.slice(qr,Mr+1),Mr===-1||RE_BAD_BRACKET.test(zr)?Gr=["(","(",qr]:(Gr=["brackets",zr,qr,Mr],qr=Mr);break}case SINGLE_QUOTE:case DOUBLE_QUOTE:{Fr=Lr===SINGLE_QUOTE?"'":'"',Mr=qr;do{if(Vr=!1,Mr=Ar.indexOf(Fr,Mr+1),Mr===-1)if(Pr||ns){Mr=qr+1;break}else Jr("string");for(Nr=Mr;Ar.charCodeAt(Nr-1)===BACKSLASH;)Nr-=1,Vr=!Vr}while(Vr);Gr=["string",Ar.slice(qr,Mr+1),qr,Mr],qr=Mr;break}case AT:{RE_AT_END.lastIndex=qr+1,RE_AT_END.test(Ar),RE_AT_END.lastIndex===0?Mr=Ar.length-1:Mr=RE_AT_END.lastIndex-2,Gr=["at-word",Ar.slice(qr,Mr+1),qr,Mr],qr=Mr;break}case BACKSLASH:{for(Mr=qr,Ur=!0;Ar.charCodeAt(Mr+1)===BACKSLASH;)Mr+=1,Ur=!Ur;if(Lr=Ar.charCodeAt(Mr+1),Ur&&Lr!==SLASH&&Lr!==SPACE&&Lr!==NEWLINE&&Lr!==TAB&&Lr!==CR&&Lr!==FEED&&(Mr+=1,RE_HEX_ESCAPE.test(Ar.charAt(Mr)))){for(;RE_HEX_ESCAPE.test(Ar.charAt(Mr+1));)Mr+=1;Ar.charCodeAt(Mr+1)===SPACE&&(Mr+=1)}Gr=["word",Ar.slice(qr,Mr+1),qr,Mr],qr=Mr;break}default:{Lr===SLASH&&Ar.charCodeAt(qr+1)===ASTERISK?(Mr=Ar.indexOf("*/",qr+2)+1,Mr===0&&(Pr||ns?Mr=Ar.length:Jr("comment")),Gr=["comment",Ar.slice(qr,Mr+1),qr,Mr],qr=Mr):(RE_WORD_END.lastIndex=qr+1,RE_WORD_END.test(Ar),RE_WORD_END.lastIndex===0?Mr=Ar.length-1:Mr=RE_WORD_END.lastIndex-2,Gr=["word",Ar.slice(qr,Mr+1),qr,Mr],Kr.push(Gr),qr=Mr);break}}return qr++,Gr}function ts(rs){Xr.push(rs)}return{back:ts,endOfFile:_i,nextToken:es,position:Zr}};let Container$5=container,AtRule$3=class extends Container$5{constructor(Tr){super(Tr),this.type="atrule"}append(...Tr){return this.proxyOf.nodes||(this.nodes=[]),super.append(...Tr)}prepend(...Tr){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...Tr)}};var atRule=AtRule$3;AtRule$3.default=AtRule$3;Container$5.registerAtRule(AtRule$3);let Container$4=container,LazyResult$3,Processor$2,Root$5=class extends Container$4{constructor(Tr){super(Tr),this.type="root",this.nodes||(this.nodes=[])}normalize(Tr,Rr,Ar){let Pr=super.normalize(Tr);if(Rr){if(Ar==="prepend")this.nodes.length>1?Rr.raws.before=this.nodes[1].raws.before:delete Rr.raws.before;else if(this.first!==Rr)for(let Lr of Pr)Lr.raws.before=Rr.raws.before}return Pr}removeChild(Tr,Rr){let Ar=this.index(Tr);return!Rr&&Ar===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[Ar].raws.before),super.removeChild(Tr)}toResult(Tr={}){return new LazyResult$3(new Processor$2,this,Tr).stringify()}};Root$5.registerLazyResult=_r=>{LazyResult$3=_r};Root$5.registerProcessor=_r=>{Processor$2=_r};var root=Root$5;Root$5.default=Root$5;Container$4.registerRoot(Root$5);let list$2={comma(_r){return list$2.split(_r,[","],!0)},space(_r){let Tr=[" ",`
`,"	"];return list$2.split(_r,Tr)},split(_r,Tr,Rr){let Ar=[],Pr="",Lr=!1,Mr=0,Fr=!1,zr="",Ur=!1;for(let Vr of _r)Ur?Ur=!1:Vr==="\\"?Ur=!0:Fr?Vr===zr&&(Fr=!1):Vr==='"'||Vr==="'"?(Fr=!0,zr=Vr):Vr==="("?Mr+=1:Vr===")"?Mr>0&&(Mr-=1):Mr===0&&Tr.includes(Vr)&&(Lr=!0),Lr?(Pr!==""&&Ar.push(Pr.trim()),Pr="",Lr=!1):Pr+=Vr;return(Rr||Pr!=="")&&Ar.push(Pr.trim()),Ar}};var list_1=list$2;list$2.default=list$2;let Container$3=container,list$1=list_1,Rule$3=class extends Container$3{constructor(Tr){super(Tr),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return list$1.comma(this.selector)}set selectors(Tr){let Rr=this.selector?this.selector.match(/,\s*/):null,Ar=Rr?Rr[0]:","+this.raw("between","beforeOpen");this.selector=Tr.join(Ar)}};var rule=Rule$3;Rule$3.default=Rule$3;Container$3.registerRule(Rule$3);let Declaration$2=declaration,tokenizer=tokenize,Comment$2=comment,AtRule$2=atRule,Root$4=root,Rule$2=rule;const SAFE_COMMENT_NEIGHBOR={empty:!0,space:!0};function findLastWithPosition(_r){for(let Tr=_r.length-1;Tr>=0;Tr--){let Rr=_r[Tr],Ar=Rr[3]||Rr[2];if(Ar)return Ar}}let Parser$1=class{constructor(Tr){this.input=Tr,this.root=new Root$4,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:Tr,start:{column:1,line:1,offset:0}}}atrule(Tr){let Rr=new AtRule$2;Rr.name=Tr[1].slice(1),Rr.name===""&&this.unnamedAtrule(Rr,Tr),this.init(Rr,Tr[2]);let Ar,Pr,Lr,Mr=!1,Fr=!1,zr=[],Ur=[];for(;!this.tokenizer.endOfFile();){if(Tr=this.tokenizer.nextToken(),Ar=Tr[0],Ar==="("||Ar==="["?Ur.push(Ar==="("?")":"]"):Ar==="{"&&Ur.length>0?Ur.push("}"):Ar===Ur[Ur.length-1]&&Ur.pop(),Ur.length===0)if(Ar===";"){Rr.source.end=this.getPosition(Tr[2]),Rr.source.end.offset++,this.semicolon=!0;break}else if(Ar==="{"){Fr=!0;break}else if(Ar==="}"){if(zr.length>0){for(Lr=zr.length-1,Pr=zr[Lr];Pr&&Pr[0]==="space";)Pr=zr[--Lr];Pr&&(Rr.source.end=this.getPosition(Pr[3]||Pr[2]),Rr.source.end.offset++)}this.end(Tr);break}else zr.push(Tr);else zr.push(Tr);if(this.tokenizer.endOfFile()){Mr=!0;break}}Rr.raws.between=this.spacesAndCommentsFromEnd(zr),zr.length?(Rr.raws.afterName=this.spacesAndCommentsFromStart(zr),this.raw(Rr,"params",zr),Mr&&(Tr=zr[zr.length-1],Rr.source.end=this.getPosition(Tr[3]||Tr[2]),Rr.source.end.offset++,this.spaces=Rr.raws.between,Rr.raws.between="")):(Rr.raws.afterName="",Rr.params=""),Fr&&(Rr.nodes=[],this.current=Rr)}checkMissedSemicolon(Tr){let Rr=this.colon(Tr);if(Rr===!1)return;let Ar=0,Pr;for(let Lr=Rr-1;Lr>=0&&(Pr=Tr[Lr],!(Pr[0]!=="space"&&(Ar+=1,Ar===2)));Lr--);throw this.input.error("Missed semicolon",Pr[0]==="word"?Pr[3]+1:Pr[2])}colon(Tr){let Rr=0,Ar,Pr,Lr;for(let[Mr,Fr]of Tr.entries()){if(Ar=Fr,Pr=Ar[0],Pr==="("&&(Rr+=1),Pr===")"&&(Rr-=1),Rr===0&&Pr===":")if(!Lr)this.doubleColon(Ar);else{if(Lr[0]==="word"&&Lr[1]==="progid")continue;return Mr}Lr=Ar}return!1}comment(Tr){let Rr=new Comment$2;this.init(Rr,Tr[2]),Rr.source.end=this.getPosition(Tr[3]||Tr[2]),Rr.source.end.offset++;let Ar=Tr[1].slice(2,-2);if(/^\s*$/.test(Ar))Rr.text="",Rr.raws.left=Ar,Rr.raws.right="";else{let Pr=Ar.match(/^(\s*)([^]*\S)(\s*)$/);Rr.text=Pr[2],Rr.raws.left=Pr[1],Rr.raws.right=Pr[3]}}createTokenizer(){this.tokenizer=tokenizer(this.input)}decl(Tr,Rr){let Ar=new Declaration$2;this.init(Ar,Tr[0][2]);let Pr=Tr[Tr.length-1];for(Pr[0]===";"&&(this.semicolon=!0,Tr.pop()),Ar.source.end=this.getPosition(Pr[3]||Pr[2]||findLastWithPosition(Tr)),Ar.source.end.offset++;Tr[0][0]!=="word";)Tr.length===1&&this.unknownWord(Tr),Ar.raws.before+=Tr.shift()[1];for(Ar.source.start=this.getPosition(Tr[0][2]),Ar.prop="";Tr.length;){let Ur=Tr[0][0];if(Ur===":"||Ur==="space"||Ur==="comment")break;Ar.prop+=Tr.shift()[1]}Ar.raws.between="";let Lr;for(;Tr.length;)if(Lr=Tr.shift(),Lr[0]===":"){Ar.raws.between+=Lr[1];break}else Lr[0]==="word"&&/\w/.test(Lr[1])&&this.unknownWord([Lr]),Ar.raws.between+=Lr[1];(Ar.prop[0]==="_"||Ar.prop[0]==="*")&&(Ar.raws.before+=Ar.prop[0],Ar.prop=Ar.prop.slice(1));let Mr=[],Fr;for(;Tr.length&&(Fr=Tr[0][0],!(Fr!=="space"&&Fr!=="comment"));)Mr.push(Tr.shift());this.precheckMissedSemicolon(Tr);for(let Ur=Tr.length-1;Ur>=0;Ur--){if(Lr=Tr[Ur],Lr[1].toLowerCase()==="!important"){Ar.important=!0;let Vr=this.stringFrom(Tr,Ur);Vr=this.spacesFromEnd(Tr)+Vr,Vr!==" !important"&&(Ar.raws.important=Vr);break}else if(Lr[1].toLowerCase()==="important"){let Vr=Tr.slice(0),Nr="";for(let Dr=Ur;Dr>0;Dr--){let jr=Vr[Dr][0];if(Nr.trim().indexOf("!")===0&&jr!=="space")break;Nr=Vr.pop()[1]+Nr}Nr.trim().indexOf("!")===0&&(Ar.important=!0,Ar.raws.important=Nr,Tr=Vr)}if(Lr[0]!=="space"&&Lr[0]!=="comment")break}Tr.some(Ur=>Ur[0]!=="space"&&Ur[0]!=="comment")&&(Ar.raws.between+=Mr.map(Ur=>Ur[1]).join(""),Mr=[]),this.raw(Ar,"value",Mr.concat(Tr),Rr),Ar.value.includes(":")&&!Rr&&this.checkMissedSemicolon(Tr)}doubleColon(Tr){throw this.input.error("Double colon",{offset:Tr[2]},{offset:Tr[2]+Tr[1].length})}emptyRule(Tr){let Rr=new Rule$2;this.init(Rr,Tr[2]),Rr.selector="",Rr.raws.between="",this.current=Rr}end(Tr){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(Tr[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(Tr)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(Tr){if(this.spaces+=Tr[1],this.current.nodes){let Rr=this.current.nodes[this.current.nodes.length-1];Rr&&Rr.type==="rule"&&!Rr.raws.ownSemicolon&&(Rr.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(Tr){let Rr=this.input.fromOffset(Tr);return{column:Rr.col,line:Rr.line,offset:Tr}}init(Tr,Rr){this.current.push(Tr),Tr.source={input:this.input,start:this.getPosition(Rr)},Tr.raws.before=this.spaces,this.spaces="",Tr.type!=="comment"&&(this.semicolon=!1)}other(Tr){let Rr=!1,Ar=null,Pr=!1,Lr=null,Mr=[],Fr=Tr[1].startsWith("--"),zr=[],Ur=Tr;for(;Ur;){if(Ar=Ur[0],zr.push(Ur),Ar==="("||Ar==="[")Lr||(Lr=Ur),Mr.push(Ar==="("?")":"]");else if(Fr&&Pr&&Ar==="{")Lr||(Lr=Ur),Mr.push("}");else if(Mr.length===0)if(Ar===";")if(Pr){this.decl(zr,Fr);return}else break;else if(Ar==="{"){this.rule(zr);return}else if(Ar==="}"){this.tokenizer.back(zr.pop()),Rr=!0;break}else Ar===":"&&(Pr=!0);else Ar===Mr[Mr.length-1]&&(Mr.pop(),Mr.length===0&&(Lr=null));Ur=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(Rr=!0),Mr.length>0&&this.unclosedBracket(Lr),Rr&&Pr){if(!Fr)for(;zr.length&&(Ur=zr[zr.length-1][0],!(Ur!=="space"&&Ur!=="comment"));)this.tokenizer.back(zr.pop());this.decl(zr,Fr)}else this.unknownWord(zr)}parse(){let Tr;for(;!this.tokenizer.endOfFile();)switch(Tr=this.tokenizer.nextToken(),Tr[0]){case"space":this.spaces+=Tr[1];break;case";":this.freeSemicolon(Tr);break;case"}":this.end(Tr);break;case"comment":this.comment(Tr);break;case"at-word":this.atrule(Tr);break;case"{":this.emptyRule(Tr);break;default:this.other(Tr);break}this.endFile()}precheckMissedSemicolon(){}raw(Tr,Rr,Ar,Pr){let Lr,Mr,Fr=Ar.length,zr="",Ur=!0,Vr,Nr;for(let Dr=0;Dr<Fr;Dr+=1)Lr=Ar[Dr],Mr=Lr[0],Mr==="space"&&Dr===Fr-1&&!Pr?Ur=!1:Mr==="comment"?(Nr=Ar[Dr-1]?Ar[Dr-1][0]:"empty",Vr=Ar[Dr+1]?Ar[Dr+1][0]:"empty",!SAFE_COMMENT_NEIGHBOR[Nr]&&!SAFE_COMMENT_NEIGHBOR[Vr]?zr.slice(-1)===","?Ur=!1:zr+=Lr[1]:Ur=!1):zr+=Lr[1];if(!Ur){let Dr=Ar.reduce((jr,Gr)=>jr+Gr[1],"");Tr.raws[Rr]={raw:Dr,value:zr}}Tr[Rr]=zr}rule(Tr){Tr.pop();let Rr=new Rule$2;this.init(Rr,Tr[0][2]),Rr.raws.between=this.spacesAndCommentsFromEnd(Tr),this.raw(Rr,"selector",Tr),this.current=Rr}spacesAndCommentsFromEnd(Tr){let Rr,Ar="";for(;Tr.length&&(Rr=Tr[Tr.length-1][0],!(Rr!=="space"&&Rr!=="comment"));)Ar=Tr.pop()[1]+Ar;return Ar}spacesAndCommentsFromStart(Tr){let Rr,Ar="";for(;Tr.length&&(Rr=Tr[0][0],!(Rr!=="space"&&Rr!=="comment"));)Ar+=Tr.shift()[1];return Ar}spacesFromEnd(Tr){let Rr,Ar="";for(;Tr.length&&(Rr=Tr[Tr.length-1][0],Rr==="space");)Ar=Tr.pop()[1]+Ar;return Ar}stringFrom(Tr,Rr){let Ar="";for(let Pr=Rr;Pr<Tr.length;Pr++)Ar+=Tr[Pr][1];return Tr.splice(Rr,Tr.length-Rr),Ar}unclosedBlock(){let Tr=this.current.source.start;throw this.input.error("Unclosed block",Tr.line,Tr.column)}unclosedBracket(Tr){throw this.input.error("Unclosed bracket",{offset:Tr[2]},{offset:Tr[2]+1})}unexpectedClose(Tr){throw this.input.error("Unexpected }",{offset:Tr[2]},{offset:Tr[2]+1})}unknownWord(Tr){throw this.input.error("Unknown word",{offset:Tr[0][2]},{offset:Tr[0][2]+Tr[0][1].length})}unnamedAtrule(Tr,Rr){throw this.input.error("At-rule without name",{offset:Rr[2]},{offset:Rr[2]+Rr[1].length})}};var parser$1=Parser$1;let Container$2=container,Parser=parser$1,Input$2=input;function parse$8(_r,Tr){let Rr=new Input$2(_r,Tr),Ar=new Parser(Rr);try{Ar.parse()}catch(Pr){throw Pr}return Ar.root}var parse_1=parse$8;parse$8.default=parse$8;Container$2.registerParse(parse$8);let{isClean,my}=symbols,MapGenerator$1=mapGenerator,stringify$2=stringify_1,Container$1=container,Document$2=document$1,Result$2=result,parse$7=parse_1,Root$3=root;const TYPE_TO_CLASS_NAME={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},PLUGIN_PROPS={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN=0;function isPromise$1(_r){return typeof _r=="object"&&typeof _r.then=="function"}function getEvents(_r){let Tr=!1,Rr=TYPE_TO_CLASS_NAME[_r.type];return _r.type==="decl"?Tr=_r.prop.toLowerCase():_r.type==="atrule"&&(Tr=_r.name.toLowerCase()),Tr&&_r.append?[Rr,Rr+"-"+Tr,CHILDREN,Rr+"Exit",Rr+"Exit-"+Tr]:Tr?[Rr,Rr+"-"+Tr,Rr+"Exit",Rr+"Exit-"+Tr]:_r.append?[Rr,CHILDREN,Rr+"Exit"]:[Rr,Rr+"Exit"]}function toStack(_r){let Tr;return _r.type==="document"?Tr=["Document",CHILDREN,"DocumentExit"]:_r.type==="root"?Tr=["Root",CHILDREN,"RootExit"]:Tr=getEvents(_r),{eventIndex:0,events:Tr,iterator:0,node:_r,visitorIndex:0,visitors:[]}}function cleanMarks(_r){return _r[isClean]=!1,_r.nodes&&_r.nodes.forEach(Tr=>cleanMarks(Tr)),_r}let postcss$1={},LazyResult$2=class Yv{constructor(Tr,Rr,Ar){this.stringified=!1,this.processed=!1;let Pr;if(typeof Rr=="object"&&Rr!==null&&(Rr.type==="root"||Rr.type==="document"))Pr=cleanMarks(Rr);else if(Rr instanceof Yv||Rr instanceof Result$2)Pr=cleanMarks(Rr.root),Rr.map&&(typeof Ar.map>"u"&&(Ar.map={}),Ar.map.inline||(Ar.map.inline=!1),Ar.map.prev=Rr.map);else{let Lr=parse$7;Ar.syntax&&(Lr=Ar.syntax.parse),Ar.parser&&(Lr=Ar.parser),Lr.parse&&(Lr=Lr.parse);try{Pr=Lr(Rr,Ar)}catch(Mr){this.processed=!0,this.error=Mr}Pr&&!Pr[my]&&Container$1.rebuild(Pr)}this.result=new Result$2(Tr,Pr,Ar),this.helpers={...postcss$1,postcss:postcss$1,result:this.result},this.plugins=this.processor.plugins.map(Lr=>typeof Lr=="object"&&Lr.prepare?{...Lr,...Lr.prepare(this.result)}:Lr)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(Tr){return this.async().catch(Tr)}finally(Tr){return this.async().then(Tr,Tr)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(Tr,Rr){let Ar=this.result.lastPlugin;try{Rr&&Rr.addToError(Tr),this.error=Tr,Tr.name==="CssSyntaxError"&&!Tr.plugin?(Tr.plugin=Ar.postcssPlugin,Tr.setMessage()):Ar.postcssVersion}catch(Pr){console&&console.error&&console.error(Pr)}return Tr}prepareVisitors(){this.listeners={};let Tr=(Rr,Ar,Pr)=>{this.listeners[Ar]||(this.listeners[Ar]=[]),this.listeners[Ar].push([Rr,Pr])};for(let Rr of this.plugins)if(typeof Rr=="object")for(let Ar in Rr){if(!PLUGIN_PROPS[Ar]&&/^[A-Z]/.test(Ar))throw new Error(`Unknown event ${Ar} in ${Rr.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!NOT_VISITORS[Ar])if(typeof Rr[Ar]=="object")for(let Pr in Rr[Ar])Pr==="*"?Tr(Rr,Ar,Rr[Ar][Pr]):Tr(Rr,Ar+"-"+Pr.toLowerCase(),Rr[Ar][Pr]);else typeof Rr[Ar]=="function"&&Tr(Rr,Ar,Rr[Ar])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let Tr=0;Tr<this.plugins.length;Tr++){let Rr=this.plugins[Tr],Ar=this.runOnRoot(Rr);if(isPromise$1(Ar))try{await Ar}catch(Pr){throw this.handleError(Pr)}}if(this.prepareVisitors(),this.hasListener){let Tr=this.result.root;for(;!Tr[isClean];){Tr[isClean]=!0;let Rr=[toStack(Tr)];for(;Rr.length>0;){let Ar=this.visitTick(Rr);if(isPromise$1(Ar))try{await Ar}catch(Pr){let Lr=Rr[Rr.length-1].node;throw this.handleError(Pr,Lr)}}}if(this.listeners.OnceExit)for(let[Rr,Ar]of this.listeners.OnceExit){this.result.lastPlugin=Rr;try{if(Tr.type==="document"){let Pr=Tr.nodes.map(Lr=>Ar(Lr,this.helpers));await Promise.all(Pr)}else await Ar(Tr,this.helpers)}catch(Pr){throw this.handleError(Pr)}}}return this.processed=!0,this.stringify()}runOnRoot(Tr){this.result.lastPlugin=Tr;try{if(typeof Tr=="object"&&Tr.Once){if(this.result.root.type==="document"){let Rr=this.result.root.nodes.map(Ar=>Tr.Once(Ar,this.helpers));return isPromise$1(Rr[0])?Promise.all(Rr):Rr}return Tr.Once(this.result.root,this.helpers)}else if(typeof Tr=="function")return Tr(this.result.root,this.result)}catch(Rr){throw this.handleError(Rr)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let Tr=this.result.opts,Rr=stringify$2;Tr.syntax&&(Rr=Tr.syntax.stringify),Tr.stringifier&&(Rr=Tr.stringifier),Rr.stringify&&(Rr=Rr.stringify);let Pr=new MapGenerator$1(Rr,this.result.root,this.result.opts).generate();return this.result.css=Pr[0],this.result.map=Pr[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let Tr of this.plugins){let Rr=this.runOnRoot(Tr);if(isPromise$1(Rr))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let Tr=this.result.root;for(;!Tr[isClean];)Tr[isClean]=!0,this.walkSync(Tr);if(this.listeners.OnceExit)if(Tr.type==="document")for(let Rr of Tr.nodes)this.visitSync(this.listeners.OnceExit,Rr);else this.visitSync(this.listeners.OnceExit,Tr)}return this.result}then(Tr,Rr){return this.async().then(Tr,Rr)}toString(){return this.css}visitSync(Tr,Rr){for(let[Ar,Pr]of Tr){this.result.lastPlugin=Ar;let Lr;try{Lr=Pr(Rr,this.helpers)}catch(Mr){throw this.handleError(Mr,Rr.proxyOf)}if(Rr.type!=="root"&&Rr.type!=="document"&&!Rr.parent)return!0;if(isPromise$1(Lr))throw this.getAsyncError()}}visitTick(Tr){let Rr=Tr[Tr.length-1],{node:Ar,visitors:Pr}=Rr;if(Ar.type!=="root"&&Ar.type!=="document"&&!Ar.parent){Tr.pop();return}if(Pr.length>0&&Rr.visitorIndex<Pr.length){let[Mr,Fr]=Pr[Rr.visitorIndex];Rr.visitorIndex+=1,Rr.visitorIndex===Pr.length&&(Rr.visitors=[],Rr.visitorIndex=0),this.result.lastPlugin=Mr;try{return Fr(Ar.toProxy(),this.helpers)}catch(zr){throw this.handleError(zr,Ar)}}if(Rr.iterator!==0){let Mr=Rr.iterator,Fr;for(;Fr=Ar.nodes[Ar.indexes[Mr]];)if(Ar.indexes[Mr]+=1,!Fr[isClean]){Fr[isClean]=!0,Tr.push(toStack(Fr));return}Rr.iterator=0,delete Ar.indexes[Mr]}let Lr=Rr.events;for(;Rr.eventIndex<Lr.length;){let Mr=Lr[Rr.eventIndex];if(Rr.eventIndex+=1,Mr===CHILDREN){Ar.nodes&&Ar.nodes.length&&(Ar[isClean]=!0,Rr.iterator=Ar.getIterator());return}else if(this.listeners[Mr]){Rr.visitors=this.listeners[Mr];return}}Tr.pop()}walkSync(Tr){Tr[isClean]=!0;let Rr=getEvents(Tr);for(let Ar of Rr)if(Ar===CHILDREN)Tr.nodes&&Tr.each(Pr=>{Pr[isClean]||this.walkSync(Pr)});else{let Pr=this.listeners[Ar];if(Pr&&this.visitSync(Pr,Tr.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};LazyResult$2.registerPostcss=_r=>{postcss$1=_r};var lazyResult=LazyResult$2;LazyResult$2.default=LazyResult$2;Root$3.registerLazyResult(LazyResult$2);Document$2.registerLazyResult(LazyResult$2);let MapGenerator=mapGenerator,stringify$1=stringify_1,parse$6=parse_1;const Result$1=result;let NoWorkResult$1=class{constructor(Tr,Rr,Ar){Rr=Rr.toString(),this.stringified=!1,this._processor=Tr,this._css=Rr,this._opts=Ar,this._map=void 0;let Pr,Lr=stringify$1;this.result=new Result$1(this._processor,Pr,this._opts),this.result.css=Rr;let Mr=this;Object.defineProperty(this.result,"root",{get(){return Mr.root}});let Fr=new MapGenerator(Lr,Pr,this._opts,Rr);if(Fr.isMap()){let[zr,Ur]=Fr.generate();zr&&(this.result.css=zr),Ur&&(this.result.map=Ur)}}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(Tr){return this.async().catch(Tr)}finally(Tr){return this.async().then(Tr,Tr)}sync(){if(this.error)throw this.error;return this.result}then(Tr,Rr){return this.async().then(Tr,Rr)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let Tr,Rr=parse$6;try{Tr=Rr(this._css,this._opts)}catch(Ar){this.error=Ar}if(this.error)throw this.error;return this._root=Tr,Tr}get[Symbol.toStringTag](){return"NoWorkResult"}};var noWorkResult=NoWorkResult$1;NoWorkResult$1.default=NoWorkResult$1;let NoWorkResult=noWorkResult,LazyResult$1=lazyResult,Document$1=document$1,Root$2=root,Processor$1=class{constructor(Tr=[]){this.version="8.4.30",this.plugins=this.normalize(Tr)}normalize(Tr){let Rr=[];for(let Ar of Tr)if(Ar.postcss===!0?Ar=Ar():Ar.postcss&&(Ar=Ar.postcss),typeof Ar=="object"&&Array.isArray(Ar.plugins))Rr=Rr.concat(Ar.plugins);else if(typeof Ar=="object"&&Ar.postcssPlugin)Rr.push(Ar);else if(typeof Ar=="function")Rr.push(Ar);else if(!(typeof Ar=="object"&&(Ar.parse||Ar.stringify)))throw new Error(Ar+" is not a PostCSS plugin");return Rr}process(Tr,Rr={}){return this.plugins.length===0&&typeof Rr.parser>"u"&&typeof Rr.stringifier>"u"&&typeof Rr.syntax>"u"?new NoWorkResult(this,Tr,Rr):new LazyResult$1(this,Tr,Rr)}use(Tr){return this.plugins=this.plugins.concat(this.normalize([Tr])),this}};var processor=Processor$1;Processor$1.default=Processor$1;Root$2.registerProcessor(Processor$1);Document$1.registerProcessor(Processor$1);let Declaration$1=declaration,PreviousMap=previousMap,Comment$1=comment,AtRule$1=atRule,Input$1=input,Root$1=root,Rule$1=rule;function fromJSON$1(_r,Tr){if(Array.isArray(_r))return _r.map(Pr=>fromJSON$1(Pr));let{inputs:Rr,...Ar}=_r;if(Rr){Tr=[];for(let Pr of Rr){let Lr={...Pr,__proto__:Input$1.prototype};Lr.map&&(Lr.map={...Lr.map,__proto__:PreviousMap.prototype}),Tr.push(Lr)}}if(Ar.nodes&&(Ar.nodes=_r.nodes.map(Pr=>fromJSON$1(Pr,Tr))),Ar.source){let{inputId:Pr,...Lr}=Ar.source;Ar.source=Lr,Pr!=null&&(Ar.source.input=Tr[Pr])}if(Ar.type==="root")return new Root$1(Ar);if(Ar.type==="decl")return new Declaration$1(Ar);if(Ar.type==="rule")return new Rule$1(Ar);if(Ar.type==="comment")return new Comment$1(Ar);if(Ar.type==="atrule")return new AtRule$1(Ar);throw new Error("Unknown node type: "+_r.type)}var fromJSON_1=fromJSON$1;fromJSON$1.default=fromJSON$1;let CssSyntaxError=cssSyntaxError,Declaration=declaration,LazyResult=lazyResult,Container=container,Processor=processor,stringify=stringify_1,fromJSON=fromJSON_1,Document=document$1,Warning=warning,Comment=comment,AtRule=atRule,Result=result,Input=input,parse$5=parse_1,list=list_1,Rule=rule,Root=root,Node$1=node;function postcss(..._r){return _r.length===1&&Array.isArray(_r[0])&&(_r=_r[0]),new Processor(_r)}postcss.plugin=function(Tr,Rr){let Ar=!1;function Pr(...Mr){console&&console.warn&&!Ar&&(Ar=!0,console.warn(Tr+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),{}.LANG&&{}.LANG.startsWith("cn")&&console.warn(Tr+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let Fr=Rr(...Mr);return Fr.postcssPlugin=Tr,Fr.postcssVersion=new Processor().version,Fr}let Lr;return Object.defineProperty(Pr,"postcss",{get(){return Lr||(Lr=Pr()),Lr}}),Pr.process=function(Mr,Fr,zr){return postcss([Pr(zr)]).process(Mr,Fr)},Pr};postcss.stringify=stringify;postcss.parse=parse$5;postcss.fromJSON=fromJSON;postcss.list=list;postcss.comment=_r=>new Comment(_r);postcss.atRule=_r=>new AtRule(_r);postcss.decl=_r=>new Declaration(_r);postcss.rule=_r=>new Rule(_r);postcss.root=_r=>new Root(_r);postcss.document=_r=>new Document(_r);postcss.CssSyntaxError=CssSyntaxError;postcss.Declaration=Declaration;postcss.Container=Container;postcss.Processor=Processor;postcss.Document=Document;postcss.Comment=Comment;postcss.Warning=Warning;postcss.AtRule=AtRule;postcss.Result=Result;postcss.Input=Input;postcss.Rule=Rule;postcss.Root=Root;postcss.Node=Node$1;LazyResult.registerPostcss(postcss);var postcss_1=postcss;postcss.default=postcss;const htmlparser=lib$5,escapeStringRegexp=escapeStringRegexp$1,{isPlainObject:isPlainObject$1}=isPlainObject$3,deepmerge=cjs,parseSrcset=parseSrcsetExports,{parse:postcssParse}=postcss_1,mediaTags=["img","audio","video","picture","svg","object","map","iframe","embed"],vulnerableTags=["script","style"];function each(_r,Tr){_r&&Object.keys(_r).forEach(function(Rr){Tr(_r[Rr],Rr)})}function has(_r,Tr){return{}.hasOwnProperty.call(_r,Tr)}function filter(_r,Tr){const Rr=[];return each(_r,function(Ar){Tr(Ar)&&Rr.push(Ar)}),Rr}function isEmptyObject(_r){for(const Tr in _r)if(has(_r,Tr))return!1;return!0}function stringifySrcset(_r){return _r.map(function(Tr){if(!Tr.url)throw new Error("URL missing");return Tr.url+(Tr.w?` ${Tr.w}w`:"")+(Tr.h?` ${Tr.h}h`:"")+(Tr.d?` ${Tr.d}x`:"")}).join(", ")}var sanitizeHtml_1=sanitizeHtml;const VALID_HTML_ATTRIBUTE_NAME=/^[^\0\t\n\f\r /<=>]+$/;function sanitizeHtml(_r,Tr,Rr){if(_r==null)return"";typeof _r=="number"&&(_r=_r.toString());let Ar="",Pr="";function Lr(vs,gs){const fs=this;this.tag=vs,this.attribs=gs||{},this.tagPosition=Ar.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(qr.length){const ys=qr[qr.length-1];ys.text+=fs.text}},this.updateParentNodeMediaChildren=function(){qr.length&&mediaTags.includes(this.tag)&&qr[qr.length-1].mediaChildren.push(this.tag)}}Tr=Object.assign({},sanitizeHtml.defaults,Tr),Tr.parser=Object.assign({},htmlParserDefaults,Tr.parser);const Mr=function(vs){return Tr.allowedTags===!1||(Tr.allowedTags||[]).indexOf(vs)>-1};vulnerableTags.forEach(function(vs){Mr(vs)&&!Tr.allowVulnerableTags&&console.warn(`

 Your \`allowedTags\` option includes, \`${vs}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});const Fr=Tr.nonTextTags||["script","style","textarea","option"];let zr,Ur;Tr.allowedAttributes&&(zr={},Ur={},each(Tr.allowedAttributes,function(vs,gs){zr[gs]=[];const fs=[];vs.forEach(function(ys){typeof ys=="string"&&ys.indexOf("*")>=0?fs.push(escapeStringRegexp(ys).replace(/\\\*/g,".*")):zr[gs].push(ys)}),fs.length&&(Ur[gs]=new RegExp("^("+fs.join("|")+")$"))}));const Vr={},Nr={},Dr={};each(Tr.allowedClasses,function(vs,gs){if(zr&&(has(zr,gs)||(zr[gs]=[]),zr[gs].push("class")),Vr[gs]=vs,Array.isArray(vs)){const fs=[];Vr[gs]=[],Dr[gs]=[],vs.forEach(function(ys){typeof ys=="string"&&ys.indexOf("*")>=0?fs.push(escapeStringRegexp(ys).replace(/\\\*/g,".*")):ys instanceof RegExp?Dr[gs].push(ys):Vr[gs].push(ys)}),fs.length&&(Nr[gs]=new RegExp("^("+fs.join("|")+")$"))}});const jr={};let Gr;each(Tr.transformTags,function(vs,gs){let fs;typeof vs=="function"?fs=vs:typeof vs=="string"&&(fs=sanitizeHtml.simpleTransform(vs)),gs==="*"?Gr=fs:jr[gs]=fs});let Wr,qr,Kr,Xr,Zr,Jr,_i=!1;ts();const es=new htmlparser.Parser({onopentag:function(vs,gs){if(Tr.enforceHtmlBoundary&&vs==="html"&&ts(),Zr){Jr++;return}const fs=new Lr(vs,gs);qr.push(fs);let ys=!1;const ks=!!fs.text;let Fs;if(has(jr,vs)&&(Fs=jr[vs](vs,gs),fs.attribs=gs=Fs.attribs,Fs.text!==void 0&&(fs.innerText=Fs.text),vs!==Fs.tagName&&(fs.name=vs=Fs.tagName,Xr[Wr]=Fs.tagName)),Gr&&(Fs=Gr(vs,gs),fs.attribs=gs=Fs.attribs,vs!==Fs.tagName&&(fs.name=vs=Fs.tagName,Xr[Wr]=Fs.tagName)),(!Mr(vs)||Tr.disallowedTagsMode==="recursiveEscape"&&!isEmptyObject(Kr)||Tr.nestingLimit!=null&&Wr>=Tr.nestingLimit)&&(ys=!0,Kr[Wr]=!0,Tr.disallowedTagsMode==="discard"&&Fr.indexOf(vs)!==-1&&(Zr=!0,Jr=1),Kr[Wr]=!0),Wr++,ys){if(Tr.disallowedTagsMode==="discard")return;Pr=Ar,Ar=""}Ar+="<"+vs,vs==="script"&&(Tr.allowedScriptHostnames||Tr.allowedScriptDomains)&&(fs.innerText=""),(!zr||has(zr,vs)||zr["*"])&&each(gs,function(Us,Vs){if(!VALID_HTML_ATTRIBUTE_NAME.test(Vs)){delete fs.attribs[Vs];return}if(Us===""&&(Tr.nonBooleanAttributes.includes(Vs)||Tr.nonBooleanAttributes.includes("*"))){delete fs.attribs[Vs];return}let ao=!1;if(!zr||has(zr,vs)&&zr[vs].indexOf(Vs)!==-1||zr["*"]&&zr["*"].indexOf(Vs)!==-1||has(Ur,vs)&&Ur[vs].test(Vs)||Ur["*"]&&Ur["*"].test(Vs))ao=!0;else if(zr&&zr[vs]){for(const qs of zr[vs])if(isPlainObject$1(qs)&&qs.name&&qs.name===Vs){ao=!0;let Qs="";if(qs.multiple===!0){const mo=Us.split(" ");for(const Xs of mo)qs.values.indexOf(Xs)!==-1&&(Qs===""?Qs=Xs:Qs+=" "+Xs)}else qs.values.indexOf(Us)>=0&&(Qs=Us);Us=Qs}}if(ao){if(Tr.allowedSchemesAppliedToAttributes.indexOf(Vs)!==-1&&ns(vs,Us)){delete fs.attribs[Vs];return}if(vs==="script"&&Vs==="src"){let qs=!0;try{const Qs=as(Us);if(Tr.allowedScriptHostnames||Tr.allowedScriptDomains){const mo=(Tr.allowedScriptHostnames||[]).find(function(so){return so===Qs.url.hostname}),Xs=(Tr.allowedScriptDomains||[]).find(function(so){return Qs.url.hostname===so||Qs.url.hostname.endsWith(`.${so}`)});qs=mo||Xs}}catch{qs=!1}if(!qs){delete fs.attribs[Vs];return}}if(vs==="iframe"&&Vs==="src"){let qs=!0;try{const Qs=as(Us);if(Qs.isRelativeUrl)qs=has(Tr,"allowIframeRelativeUrls")?Tr.allowIframeRelativeUrls:!Tr.allowedIframeHostnames&&!Tr.allowedIframeDomains;else if(Tr.allowedIframeHostnames||Tr.allowedIframeDomains){const mo=(Tr.allowedIframeHostnames||[]).find(function(so){return so===Qs.url.hostname}),Xs=(Tr.allowedIframeDomains||[]).find(function(so){return Qs.url.hostname===so||Qs.url.hostname.endsWith(`.${so}`)});qs=mo||Xs}}catch{qs=!1}if(!qs){delete fs.attribs[Vs];return}}if(Vs==="srcset")try{let qs=parseSrcset(Us);if(qs.forEach(function(Qs){ns("srcset",Qs.url)&&(Qs.evil=!0)}),qs=filter(qs,function(Qs){return!Qs.evil}),qs.length)Us=stringifySrcset(filter(qs,function(Qs){return!Qs.evil})),fs.attribs[Vs]=Us;else{delete fs.attribs[Vs];return}}catch{delete fs.attribs[Vs];return}if(Vs==="class"){const qs=Vr[vs],Qs=Vr["*"],mo=Nr[vs],Xs=Dr[vs],so=Nr["*"],uo=[mo,so].concat(Xs).filter(function(bo){return bo});if(qs&&Qs?Us=Ts(Us,deepmerge(qs,Qs),uo):Us=Ts(Us,qs||Qs,uo),!Us.length){delete fs.attribs[Vs];return}}if(Vs==="style"){if(Tr.parseStyleAttributes)try{const qs=postcssParse(vs+" {"+Us+"}"),Qs=ls(qs,Tr.allowedStyles);if(Us=us(Qs),Us.length===0){delete fs.attribs[Vs];return}}catch{typeof window<"u"&&console.warn('Failed to parse "'+vs+" {"+Us+`}", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547`),delete fs.attribs[Vs];return}else if(Tr.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.")}Ar+=" "+Vs,Us&&Us.length&&(Ar+='="'+rs(Us,!0)+'"')}else delete fs.attribs[Vs]}),Tr.selfClosing.indexOf(vs)!==-1?Ar+=" />":(Ar+=">",fs.innerText&&!ks&&!Tr.textFilter&&(Ar+=rs(fs.innerText),_i=!0)),ys&&(Ar=Pr+rs(Ar),Pr="")},ontext:function(vs){if(Zr)return;const gs=qr[qr.length-1];let fs;if(gs&&(fs=gs.tag,vs=gs.innerText!==void 0?gs.innerText:vs),Tr.disallowedTagsMode==="discard"&&(fs==="script"||fs==="style"))Ar+=vs;else{const ys=rs(vs,!1);Tr.textFilter&&!_i?Ar+=Tr.textFilter(ys,fs):_i||(Ar+=ys)}if(qr.length){const ys=qr[qr.length-1];ys.text+=vs}},onclosetag:function(vs,gs){if(Zr)if(Jr--,!Jr)Zr=!1;else return;const fs=qr.pop();if(!fs)return;if(fs.tag!==vs){qr.push(fs);return}Zr=Tr.enforceHtmlBoundary?vs==="html":!1,Wr--;const ys=Kr[Wr];if(ys){if(delete Kr[Wr],Tr.disallowedTagsMode==="discard"){fs.updateParentNodeText();return}Pr=Ar,Ar=""}if(Xr[Wr]&&(vs=Xr[Wr],delete Xr[Wr]),Tr.exclusiveFilter&&Tr.exclusiveFilter(fs)){Ar=Ar.substr(0,fs.tagPosition);return}if(fs.updateParentNodeMediaChildren(),fs.updateParentNodeText(),Tr.selfClosing.indexOf(vs)!==-1||gs&&!Mr(vs)&&["escape","recursiveEscape"].indexOf(Tr.disallowedTagsMode)>=0){ys&&(Ar=Pr,Pr="");return}Ar+="</"+vs+">",ys&&(Ar=Pr+rs(Ar),Pr=""),_i=!1}},Tr.parser);return es.write(_r),es.end(),Ar;function ts(){Ar="",Wr=0,qr=[],Kr={},Xr={},Zr=!1,Jr=0}function rs(vs,gs){return typeof vs!="string"&&(vs=vs+""),Tr.parser.decodeEntities&&(vs=vs.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),gs&&(vs=vs.replace(/"/g,"&quot;"))),vs=vs.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),gs&&(vs=vs.replace(/"/g,"&quot;")),vs}function ns(vs,gs){for(gs=gs.replace(/[\x00-\x20]+/g,"");;){const ks=gs.indexOf("<!--");if(ks===-1)break;const Fs=gs.indexOf("-->",ks+4);if(Fs===-1)break;gs=gs.substring(0,ks)+gs.substring(Fs+3)}const fs=gs.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!fs)return gs.match(/^[/\\]{2}/)?!Tr.allowProtocolRelative:!1;const ys=fs[1].toLowerCase();return has(Tr.allowedSchemesByTag,vs)?Tr.allowedSchemesByTag[vs].indexOf(ys)===-1:!Tr.allowedSchemes||Tr.allowedSchemes.indexOf(ys)===-1}function as(vs){if(vs=vs.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),vs.startsWith("relative:"))throw new Error("relative: exploit attempt");let gs="relative://relative-site";for(let ks=0;ks<100;ks++)gs+=`/${ks}`;const fs=new URL(vs,gs);return{isRelativeUrl:fs&&fs.hostname==="relative-site"&&fs.protocol==="relative:",url:fs}}function ls(vs,gs){if(!gs)return vs;const fs=vs.nodes[0];let ys;return gs[fs.selector]&&gs["*"]?ys=deepmerge(gs[fs.selector],gs["*"]):ys=gs[fs.selector]||gs["*"],ys&&(vs.nodes[0].nodes=fs.nodes.reduce(xs(ys),[])),vs}function us(vs){return vs.nodes[0].nodes.reduce(function(gs,fs){return gs.push(`${fs.prop}:${fs.value}${fs.important?" !important":""}`),gs},[]).join(";")}function xs(vs){return function(gs,fs){return has(vs,fs.prop)&&vs[fs.prop].some(function(ks){return ks.test(fs.value)})&&gs.push(fs),gs}}function Ts(vs,gs,fs){return gs?(vs=vs.split(/\s+/),vs.filter(function(ys){return gs.indexOf(ys)!==-1||fs.some(function(ks){return ks.test(ys)})}).join(" ")):vs}}const htmlParserDefaults={decodeEntities:!0};sanitizeHtml.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0};sanitizeHtml.simpleTransform=function(_r,Tr,Rr){return Rr=Rr===void 0?!0:Rr,Tr=Tr||{},function(Ar,Pr){let Lr;if(Rr)for(Lr in Tr)Pr[Lr]=Tr[Lr];else Pr=Tr;return{tagName:_r,attribs:Pr}}};const Ye=getDefaultExportFromCjs$1(sanitizeHtml_1);function getDefaultExportFromCjs(_r){return _r&&_r.__esModule&&Object.prototype.hasOwnProperty.call(_r,"default")?_r.default:_r}var urlToolkit={exports:{}};(function(_r,Tr){(function(Rr){var Ar=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,Pr=/^(?=([^\/?#]*))\1([^]*)$/,Lr=/(?:\/|^)\.(?=\/)/g,Mr=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Fr={buildAbsoluteURL:function(zr,Ur,Vr){if(Vr=Vr||{},zr=zr.trim(),Ur=Ur.trim(),!Ur){if(!Vr.alwaysNormalize)return zr;var Nr=Fr.parseURL(zr);if(!Nr)throw new Error("Error trying to parse base URL.");return Nr.path=Fr.normalizePath(Nr.path),Fr.buildURLFromParts(Nr)}var Dr=Fr.parseURL(Ur);if(!Dr)throw new Error("Error trying to parse relative URL.");if(Dr.scheme)return Vr.alwaysNormalize?(Dr.path=Fr.normalizePath(Dr.path),Fr.buildURLFromParts(Dr)):Ur;var jr=Fr.parseURL(zr);if(!jr)throw new Error("Error trying to parse base URL.");if(!jr.netLoc&&jr.path&&jr.path[0]!=="/"){var Gr=Pr.exec(jr.path);jr.netLoc=Gr[1],jr.path=Gr[2]}jr.netLoc&&!jr.path&&(jr.path="/");var Wr={scheme:jr.scheme,netLoc:Dr.netLoc,path:null,params:Dr.params,query:Dr.query,fragment:Dr.fragment};if(!Dr.netLoc&&(Wr.netLoc=jr.netLoc,Dr.path[0]!=="/"))if(!Dr.path)Wr.path=jr.path,Dr.params||(Wr.params=jr.params,Dr.query||(Wr.query=jr.query));else{var qr=jr.path,Kr=qr.substring(0,qr.lastIndexOf("/")+1)+Dr.path;Wr.path=Fr.normalizePath(Kr)}return Wr.path===null&&(Wr.path=Vr.alwaysNormalize?Fr.normalizePath(Dr.path):Dr.path),Fr.buildURLFromParts(Wr)},parseURL:function(zr){var Ur=Ar.exec(zr);return Ur?{scheme:Ur[1]||"",netLoc:Ur[2]||"",path:Ur[3]||"",params:Ur[4]||"",query:Ur[5]||"",fragment:Ur[6]||""}:null},normalizePath:function(zr){for(zr=zr.split("").reverse().join("").replace(Lr,"");zr.length!==(zr=zr.replace(Mr,"")).length;);return zr.split("").reverse().join("")},buildURLFromParts:function(zr){return zr.scheme+zr.netLoc+zr.path+zr.params+zr.query+zr.fragment}};_r.exports=Fr})()})(urlToolkit);var urlToolkitExports=urlToolkit.exports;function ownKeys(_r,Tr){var Rr=Object.keys(_r);if(Object.getOwnPropertySymbols){var Ar=Object.getOwnPropertySymbols(_r);Tr&&(Ar=Ar.filter(function(Pr){return Object.getOwnPropertyDescriptor(_r,Pr).enumerable})),Rr.push.apply(Rr,Ar)}return Rr}function _objectSpread2(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr]!=null?arguments[Tr]:{};Tr%2?ownKeys(Object(Rr),!0).forEach(function(Ar){_defineProperty(_r,Ar,Rr[Ar])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_r,Object.getOwnPropertyDescriptors(Rr)):ownKeys(Object(Rr)).forEach(function(Ar){Object.defineProperty(_r,Ar,Object.getOwnPropertyDescriptor(Rr,Ar))})}return _r}function _defineProperty(_r,Tr,Rr){return Tr=_toPropertyKey(Tr),Tr in _r?Object.defineProperty(_r,Tr,{value:Rr,enumerable:!0,configurable:!0,writable:!0}):_r[Tr]=Rr,_r}function _extends(){return _extends=Object.assign?Object.assign.bind():function(_r){for(var Tr=1;Tr<arguments.length;Tr++){var Rr=arguments[Tr];for(var Ar in Rr)Object.prototype.hasOwnProperty.call(Rr,Ar)&&(_r[Ar]=Rr[Ar])}return _r},_extends.apply(this,arguments)}function _toPrimitive(_r,Tr){if(typeof _r!="object"||_r===null)return _r;var Rr=_r[Symbol.toPrimitive];if(Rr!==void 0){var Ar=Rr.call(_r,Tr||"default");if(typeof Ar!="object")return Ar;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Tr==="string"?String:Number)(_r)}function _toPropertyKey(_r){var Tr=_toPrimitive(_r,"string");return typeof Tr=="symbol"?Tr:String(Tr)}const isFiniteNumber=Number.isFinite||function(_r){return typeof _r=="number"&&isFinite(_r)};let Events=function(_r){return _r.MEDIA_ATTACHING="hlsMediaAttaching",_r.MEDIA_ATTACHED="hlsMediaAttached",_r.MEDIA_DETACHING="hlsMediaDetaching",_r.MEDIA_DETACHED="hlsMediaDetached",_r.BUFFER_RESET="hlsBufferReset",_r.BUFFER_CODECS="hlsBufferCodecs",_r.BUFFER_CREATED="hlsBufferCreated",_r.BUFFER_APPENDING="hlsBufferAppending",_r.BUFFER_APPENDED="hlsBufferAppended",_r.BUFFER_EOS="hlsBufferEos",_r.BUFFER_FLUSHING="hlsBufferFlushing",_r.BUFFER_FLUSHED="hlsBufferFlushed",_r.MANIFEST_LOADING="hlsManifestLoading",_r.MANIFEST_LOADED="hlsManifestLoaded",_r.MANIFEST_PARSED="hlsManifestParsed",_r.LEVEL_SWITCHING="hlsLevelSwitching",_r.LEVEL_SWITCHED="hlsLevelSwitched",_r.LEVEL_LOADING="hlsLevelLoading",_r.LEVEL_LOADED="hlsLevelLoaded",_r.LEVEL_UPDATED="hlsLevelUpdated",_r.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",_r.LEVELS_UPDATED="hlsLevelsUpdated",_r.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",_r.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",_r.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",_r.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",_r.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",_r.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",_r.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",_r.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",_r.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",_r.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",_r.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",_r.CUES_PARSED="hlsCuesParsed",_r.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",_r.INIT_PTS_FOUND="hlsInitPtsFound",_r.FRAG_LOADING="hlsFragLoading",_r.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",_r.FRAG_LOADED="hlsFragLoaded",_r.FRAG_DECRYPTED="hlsFragDecrypted",_r.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",_r.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",_r.FRAG_PARSING_METADATA="hlsFragParsingMetadata",_r.FRAG_PARSED="hlsFragParsed",_r.FRAG_BUFFERED="hlsFragBuffered",_r.FRAG_CHANGED="hlsFragChanged",_r.FPS_DROP="hlsFpsDrop",_r.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",_r.ERROR="hlsError",_r.DESTROYING="hlsDestroying",_r.KEY_LOADING="hlsKeyLoading",_r.KEY_LOADED="hlsKeyLoaded",_r.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",_r.BACK_BUFFER_REACHED="hlsBackBufferReached",_r}({}),ErrorTypes=function(_r){return _r.NETWORK_ERROR="networkError",_r.MEDIA_ERROR="mediaError",_r.KEY_SYSTEM_ERROR="keySystemError",_r.MUX_ERROR="muxError",_r.OTHER_ERROR="otherError",_r}({}),ErrorDetails=function(_r){return _r.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",_r.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",_r.KEY_SYSTEM_NO_SESSION="keySystemNoSession",_r.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",_r.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",_r.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",_r.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",_r.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",_r.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",_r.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",_r.MANIFEST_LOAD_ERROR="manifestLoadError",_r.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",_r.MANIFEST_PARSING_ERROR="manifestParsingError",_r.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",_r.LEVEL_EMPTY_ERROR="levelEmptyError",_r.LEVEL_LOAD_ERROR="levelLoadError",_r.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",_r.LEVEL_PARSING_ERROR="levelParsingError",_r.LEVEL_SWITCH_ERROR="levelSwitchError",_r.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",_r.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",_r.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",_r.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",_r.FRAG_LOAD_ERROR="fragLoadError",_r.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",_r.FRAG_DECRYPT_ERROR="fragDecryptError",_r.FRAG_PARSING_ERROR="fragParsingError",_r.FRAG_GAP="fragGap",_r.REMUX_ALLOC_ERROR="remuxAllocError",_r.KEY_LOAD_ERROR="keyLoadError",_r.KEY_LOAD_TIMEOUT="keyLoadTimeOut",_r.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",_r.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",_r.BUFFER_APPEND_ERROR="bufferAppendError",_r.BUFFER_APPENDING_ERROR="bufferAppendingError",_r.BUFFER_STALLED_ERROR="bufferStalledError",_r.BUFFER_FULL_ERROR="bufferFullError",_r.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",_r.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",_r.INTERNAL_EXCEPTION="internalException",_r.INTERNAL_ABORTED="aborted",_r.UNKNOWN="unknown",_r}({});const noop=function(){},fakeLogger={trace:noop,debug:noop,log:noop,warn:noop,info:noop,error:noop};let exportedLogger=fakeLogger;function consolePrintFn(_r){const Tr=self.console[_r];return Tr?Tr.bind(self.console,`[${_r}] >`):noop}function exportLoggerFunctions(_r,...Tr){Tr.forEach(function(Rr){exportedLogger[Rr]=_r[Rr]?_r[Rr].bind(_r):consolePrintFn(Rr)})}function enableLogs(_r,Tr){if(self.console&&_r===!0||typeof _r=="object"){exportLoggerFunctions(_r,"debug","log","info","warn","error");try{exportedLogger.log(`Debug logs enabled for "${Tr}" in hls.js version 1.4.12`)}catch{exportedLogger=fakeLogger}}else exportedLogger=fakeLogger}const logger=exportedLogger,DECIMAL_RESOLUTION_REGEX=/^(\d+)x(\d+)$/,ATTR_LIST_REGEX=/(.+?)=(".*?"|.*?)(?:,|$)/g;class AttrList{constructor(Tr){typeof Tr=="string"&&(Tr=AttrList.parseAttrList(Tr));for(const Rr in Tr)Tr.hasOwnProperty(Rr)&&(Rr.substring(0,2)==="X-"&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(Rr)),this[Rr]=Tr[Rr])}decimalInteger(Tr){const Rr=parseInt(this[Tr],10);return Rr>Number.MAX_SAFE_INTEGER?1/0:Rr}hexadecimalInteger(Tr){if(this[Tr]){let Rr=(this[Tr]||"0x").slice(2);Rr=(Rr.length&1?"0":"")+Rr;const Ar=new Uint8Array(Rr.length/2);for(let Pr=0;Pr<Rr.length/2;Pr++)Ar[Pr]=parseInt(Rr.slice(Pr*2,Pr*2+2),16);return Ar}else return null}hexadecimalIntegerAsNumber(Tr){const Rr=parseInt(this[Tr],16);return Rr>Number.MAX_SAFE_INTEGER?1/0:Rr}decimalFloatingPoint(Tr){return parseFloat(this[Tr])}optionalFloat(Tr,Rr){const Ar=this[Tr];return Ar?parseFloat(Ar):Rr}enumeratedString(Tr){return this[Tr]}bool(Tr){return this[Tr]==="YES"}decimalResolution(Tr){const Rr=DECIMAL_RESOLUTION_REGEX.exec(this[Tr]);if(Rr!==null)return{width:parseInt(Rr[1],10),height:parseInt(Rr[2],10)}}static parseAttrList(Tr){let Rr;const Ar={},Pr='"';for(ATTR_LIST_REGEX.lastIndex=0;(Rr=ATTR_LIST_REGEX.exec(Tr))!==null;){let Lr=Rr[2];Lr.indexOf(Pr)===0&&Lr.lastIndexOf(Pr)===Lr.length-1&&(Lr=Lr.slice(1,-1));const Mr=Rr[1].trim();Ar[Mr]=Lr}return Ar}}function isDateRangeCueAttribute(_r){return _r!=="ID"&&_r!=="CLASS"&&_r!=="START-DATE"&&_r!=="DURATION"&&_r!=="END-DATE"&&_r!=="END-ON-NEXT"}function isSCTE35Attribute(_r){return _r==="SCTE35-OUT"||_r==="SCTE35-IN"}class DateRange{constructor(Tr,Rr){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,Rr){const Ar=Rr.attr;for(const Pr in Ar)if(Object.prototype.hasOwnProperty.call(Tr,Pr)&&Tr[Pr]!==Ar[Pr]){logger.warn(`DATERANGE tag attribute: "${Pr}" does not match for tags with ID: "${Tr.ID}"`),this._badValueForSameId=Pr;break}Tr=_extends(new AttrList({}),Ar,Tr)}if(this.attr=Tr,this._startDate=new Date(Tr["START-DATE"]),"END-DATE"in this.attr){const Ar=new Date(this.attr["END-DATE"]);isFiniteNumber(Ar.getTime())&&(this._endDate=Ar)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const Tr=this.duration;return Tr!==null?new Date(this._startDate.getTime()+Tr*1e3):null}get duration(){if("DURATION"in this.attr){const Tr=this.attr.decimalFloatingPoint("DURATION");if(isFiniteNumber(Tr))return Tr}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&isFiniteNumber(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class LoadStats{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var ElementaryStreamTypes={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class BaseSegment{constructor(Tr){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[ElementaryStreamTypes.AUDIO]:null,[ElementaryStreamTypes.VIDEO]:null,[ElementaryStreamTypes.AUDIOVIDEO]:null},this.baseurl=Tr}setByteRange(Tr,Rr){const Ar=Tr.split("@",2),Pr=[];Ar.length===1?Pr[0]=Rr?Rr.byteRangeEndOffset:0:Pr[0]=parseInt(Ar[1]),Pr[1]=parseInt(Ar[0])+Pr[0],this._byteRange=Pr}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=urlToolkitExports.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(Tr){this._url=Tr}}class Fragment extends BaseSegment{constructor(Tr,Rr){super(Rr),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new LoadStats,this.urlId=0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.type=Tr}get decryptdata(){const{levelkeys:Tr}=this;if(!Tr&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const Rr=this.levelkeys.identity;if(Rr)this._decryptdata=Rr.getDecryptData(this.sn);else{const Ar=Object.keys(this.levelkeys);if(Ar.length===1)return this._decryptdata=this.levelkeys[Ar[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!isFiniteNumber(this.programDateTime))return null;const Tr=isFiniteNumber(this.duration)?this.duration:0;return this.programDateTime+Tr*1e3}get encrypted(){var Tr;if((Tr=this._decryptdata)!=null&&Tr.encrypted)return!0;if(this.levelkeys){const Rr=Object.keys(this.levelkeys),Ar=Rr.length;if(Ar>1||Ar===1&&this.levelkeys[Rr[0]].encrypted)return!0}return!1}setKeyFormat(Tr){if(this.levelkeys){const Rr=this.levelkeys[Tr];Rr&&!this._decryptdata&&(this._decryptdata=Rr.getDecryptData(this.sn))}}abortRequests(){var Tr,Rr;(Tr=this.loader)==null||Tr.abort(),(Rr=this.keyLoader)==null||Rr.abort()}setElementaryStreamInfo(Tr,Rr,Ar,Pr,Lr,Mr=!1){const{elementaryStreams:Fr}=this,zr=Fr[Tr];if(!zr){Fr[Tr]={startPTS:Rr,endPTS:Ar,startDTS:Pr,endDTS:Lr,partial:Mr};return}zr.startPTS=Math.min(zr.startPTS,Rr),zr.endPTS=Math.max(zr.endPTS,Ar),zr.startDTS=Math.min(zr.startDTS,Pr),zr.endDTS=Math.max(zr.endDTS,Lr)}clearElementaryStreamInfo(){const{elementaryStreams:Tr}=this;Tr[ElementaryStreamTypes.AUDIO]=null,Tr[ElementaryStreamTypes.VIDEO]=null,Tr[ElementaryStreamTypes.AUDIOVIDEO]=null}}class Part extends BaseSegment{constructor(Tr,Rr,Ar,Pr,Lr){super(Ar),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new LoadStats,this.duration=Tr.decimalFloatingPoint("DURATION"),this.gap=Tr.bool("GAP"),this.independent=Tr.bool("INDEPENDENT"),this.relurl=Tr.enumeratedString("URI"),this.fragment=Rr,this.index=Pr;const Mr=Tr.enumeratedString("BYTERANGE");Mr&&this.setByteRange(Mr,Lr),Lr&&(this.fragOffset=Lr.fragOffset+Lr.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:Tr}=this;return!!(Tr.audio||Tr.video||Tr.audiovideo)}}const DEFAULT_TARGET_DURATION=10;class LevelDetails{constructor(Tr){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=Tr}reloaded(Tr){if(!Tr){this.advanced=!0,this.updated=!0;return}const Rr=this.lastPartSn-Tr.lastPartSn,Ar=this.lastPartIndex-Tr.lastPartIndex;this.updated=this.endSN!==Tr.endSN||!!Ar||!!Rr||!this.live,this.advanced=this.endSN>Tr.endSN||Rr>0||Rr===0&&Ar>0,this.updated||this.advanced?this.misses=Math.floor(Tr.misses*.6):this.misses=Tr.misses+1,this.availabilityDelay=Tr.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?isFiniteNumber(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||DEFAULT_TARGET_DURATION}get drift(){const Tr=this.driftEndTime-this.driftStartTime;return Tr>0?(this.driftEnd-this.driftStart)*1e3/Tr:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var Tr;return(Tr=this.partList)!=null&&Tr.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var Tr;return(Tr=this.fragments)!=null&&Tr.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var Tr;return(Tr=this.partList)!=null&&Tr.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var Tr;return(Tr=this.partList)!=null&&Tr.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function base64Decode(_r){return Uint8Array.from(atob(_r),Tr=>Tr.charCodeAt(0))}function getKeyIdBytes(_r){const Tr=strToUtf8array(_r).subarray(0,16),Rr=new Uint8Array(16);return Rr.set(Tr,16-Tr.length),Rr}function changeEndianness(_r){const Tr=function(Ar,Pr,Lr){const Mr=Ar[Pr];Ar[Pr]=Ar[Lr],Ar[Lr]=Mr};Tr(_r,0,3),Tr(_r,1,2),Tr(_r,4,5),Tr(_r,6,7)}function convertDataUriToArrayBytes(_r){const Tr=_r.split(":");let Rr=null;if(Tr[0]==="data"&&Tr.length===2){const Ar=Tr[1].split(";"),Pr=Ar[Ar.length-1].split(",");if(Pr.length===2){const Lr=Pr[0]==="base64",Mr=Pr[1];Lr?(Ar.splice(-1,1),Rr=base64Decode(Mr)):Rr=getKeyIdBytes(Mr)}}return Rr}function strToUtf8array(_r){return Uint8Array.from(unescape(encodeURIComponent(_r)),Tr=>Tr.charCodeAt(0))}var KeySystems={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},KeySystemFormats={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function keySystemFormatToKeySystemDomain(_r){switch(_r){case KeySystemFormats.FAIRPLAY:return KeySystems.FAIRPLAY;case KeySystemFormats.PLAYREADY:return KeySystems.PLAYREADY;case KeySystemFormats.WIDEVINE:return KeySystems.WIDEVINE;case KeySystemFormats.CLEARKEY:return KeySystems.CLEARKEY}}var KeySystemIds={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function keySystemIdToKeySystemDomain(_r){if(_r===KeySystemIds.WIDEVINE)return KeySystems.WIDEVINE}function keySystemDomainToKeySystemFormat(_r){switch(_r){case KeySystems.FAIRPLAY:return KeySystemFormats.FAIRPLAY;case KeySystems.PLAYREADY:return KeySystemFormats.PLAYREADY;case KeySystems.WIDEVINE:return KeySystemFormats.WIDEVINE;case KeySystems.CLEARKEY:return KeySystemFormats.CLEARKEY}}function getKeySystemsForConfig(_r){const{drmSystems:Tr,widevineLicenseUrl:Rr}=_r,Ar=Tr?[KeySystems.FAIRPLAY,KeySystems.WIDEVINE,KeySystems.PLAYREADY,KeySystems.CLEARKEY].filter(Pr=>!!Tr[Pr]):[];return!Ar[KeySystems.WIDEVINE]&&Rr&&Ar.push(KeySystems.WIDEVINE),Ar}const requestMediaKeySystemAccess=function(){return typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function getSupportedMediaKeySystemConfigurations(_r,Tr,Rr,Ar){let Pr;switch(_r){case KeySystems.FAIRPLAY:Pr=["cenc","sinf"];break;case KeySystems.WIDEVINE:case KeySystems.PLAYREADY:Pr=["cenc"];break;case KeySystems.CLEARKEY:Pr=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${_r}`)}return createMediaKeySystemConfigurations(Pr,Tr,Rr,Ar)}function createMediaKeySystemConfigurations(_r,Tr,Rr,Ar){return[{initDataTypes:_r,persistentState:Ar.persistentState||"not-allowed",distinctiveIdentifier:Ar.distinctiveIdentifier||"not-allowed",sessionTypes:Ar.sessionTypes||[Ar.sessionType||"temporary"],audioCapabilities:Tr.map(Lr=>({contentType:`audio/mp4; codecs="${Lr}"`,robustness:Ar.audioRobustness||"",encryptionScheme:Ar.audioEncryptionScheme||null})),videoCapabilities:Rr.map(Lr=>({contentType:`video/mp4; codecs="${Lr}"`,robustness:Ar.videoRobustness||"",encryptionScheme:Ar.videoEncryptionScheme||null}))}]}function sliceUint8(_r,Tr,Rr){return Uint8Array.prototype.slice?_r.slice(Tr,Rr):new Uint8Array(Array.prototype.slice.call(_r,Tr,Rr))}const isHeader$2=(_r,Tr)=>Tr+10<=_r.length&&_r[Tr]===73&&_r[Tr+1]===68&&_r[Tr+2]===51&&_r[Tr+3]<255&&_r[Tr+4]<255&&_r[Tr+6]<128&&_r[Tr+7]<128&&_r[Tr+8]<128&&_r[Tr+9]<128,isFooter=(_r,Tr)=>Tr+10<=_r.length&&_r[Tr]===51&&_r[Tr+1]===68&&_r[Tr+2]===73&&_r[Tr+3]<255&&_r[Tr+4]<255&&_r[Tr+6]<128&&_r[Tr+7]<128&&_r[Tr+8]<128&&_r[Tr+9]<128,getID3Data=(_r,Tr)=>{const Rr=Tr;let Ar=0;for(;isHeader$2(_r,Tr);){Ar+=10;const Pr=readSize(_r,Tr+6);Ar+=Pr,isFooter(_r,Tr+10)&&(Ar+=10),Tr+=Ar}if(Ar>0)return _r.subarray(Rr,Rr+Ar)},readSize=(_r,Tr)=>{let Rr=0;return Rr=(_r[Tr]&127)<<21,Rr|=(_r[Tr+1]&127)<<14,Rr|=(_r[Tr+2]&127)<<7,Rr|=_r[Tr+3]&127,Rr},canParse$2=(_r,Tr)=>isHeader$2(_r,Tr)&&readSize(_r,Tr+6)+10<=_r.length-Tr,getTimeStamp=_r=>{const Tr=getID3Frames(_r);for(let Rr=0;Rr<Tr.length;Rr++){const Ar=Tr[Rr];if(isTimeStampFrame(Ar))return readTimeStamp(Ar)}},isTimeStampFrame=_r=>_r&&_r.key==="PRIV"&&_r.info==="com.apple.streaming.transportStreamTimestamp",getFrameData=_r=>{const Tr=String.fromCharCode(_r[0],_r[1],_r[2],_r[3]),Rr=readSize(_r,4),Ar=10;return{type:Tr,size:Rr,data:_r.subarray(Ar,Ar+Rr)}},getID3Frames=_r=>{let Tr=0;const Rr=[];for(;isHeader$2(_r,Tr);){const Ar=readSize(_r,Tr+6);Tr+=10;const Pr=Tr+Ar;for(;Tr+8<Pr;){const Lr=getFrameData(_r.subarray(Tr)),Mr=decodeFrame(Lr);Mr&&Rr.push(Mr),Tr+=Lr.size+10}isFooter(_r,Tr)&&(Tr+=10)}return Rr},decodeFrame=_r=>_r.type==="PRIV"?decodePrivFrame(_r):_r.type[0]==="W"?decodeURLFrame(_r):decodeTextFrame(_r),decodePrivFrame=_r=>{if(_r.size<2)return;const Tr=utf8ArrayToStr(_r.data,!0),Rr=new Uint8Array(_r.data.subarray(Tr.length+1));return{key:_r.type,info:Tr,data:Rr.buffer}},decodeTextFrame=_r=>{if(_r.size<2)return;if(_r.type==="TXXX"){let Rr=1;const Ar=utf8ArrayToStr(_r.data.subarray(Rr),!0);Rr+=Ar.length+1;const Pr=utf8ArrayToStr(_r.data.subarray(Rr));return{key:_r.type,info:Ar,data:Pr}}const Tr=utf8ArrayToStr(_r.data.subarray(1));return{key:_r.type,data:Tr}},decodeURLFrame=_r=>{if(_r.type==="WXXX"){if(_r.size<2)return;let Rr=1;const Ar=utf8ArrayToStr(_r.data.subarray(Rr),!0);Rr+=Ar.length+1;const Pr=utf8ArrayToStr(_r.data.subarray(Rr));return{key:_r.type,info:Ar,data:Pr}}const Tr=utf8ArrayToStr(_r.data);return{key:_r.type,data:Tr}},readTimeStamp=_r=>{if(_r.data.byteLength===8){const Tr=new Uint8Array(_r.data),Rr=Tr[3]&1;let Ar=(Tr[4]<<23)+(Tr[5]<<15)+(Tr[6]<<7)+Tr[7];return Ar/=45,Rr&&(Ar+=4772185884e-2),Math.round(Ar)}},utf8ArrayToStr=(_r,Tr=!1)=>{const Rr=getTextDecoder();if(Rr){const Ur=Rr.decode(_r);if(Tr){const Vr=Ur.indexOf("\0");return Vr!==-1?Ur.substring(0,Vr):Ur}return Ur.replace(/\0/g,"")}const Ar=_r.length;let Pr,Lr,Mr,Fr="",zr=0;for(;zr<Ar;){if(Pr=_r[zr++],Pr===0&&Tr)return Fr;if(Pr===0||Pr===3)continue;switch(Pr>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:Fr+=String.fromCharCode(Pr);break;case 12:case 13:Lr=_r[zr++],Fr+=String.fromCharCode((Pr&31)<<6|Lr&63);break;case 14:Lr=_r[zr++],Mr=_r[zr++],Fr+=String.fromCharCode((Pr&15)<<12|(Lr&63)<<6|(Mr&63)<<0);break}}return Fr};let decoder;function getTextDecoder(){return!decoder&&typeof self.TextDecoder<"u"&&(decoder=new self.TextDecoder("utf-8")),decoder}const Hex={hexDump:function(_r){let Tr="";for(let Rr=0;Rr<_r.length;Rr++){let Ar=_r[Rr].toString(16);Ar.length<2&&(Ar="0"+Ar),Tr+=Ar}return Tr}},UINT32_MAX$1=Math.pow(2,32)-1,push=[].push,RemuxerTrackIdConfig={video:1,audio:2,id3:3,text:4};function bin2str(_r){return String.fromCharCode.apply(null,_r)}function readUint16(_r,Tr){const Rr=_r[Tr]<<8|_r[Tr+1];return Rr<0?65536+Rr:Rr}function readUint32(_r,Tr){const Rr=readSint32(_r,Tr);return Rr<0?4294967296+Rr:Rr}function readSint32(_r,Tr){return _r[Tr]<<24|_r[Tr+1]<<16|_r[Tr+2]<<8|_r[Tr+3]}function writeUint32(_r,Tr,Rr){_r[Tr]=Rr>>24,_r[Tr+1]=Rr>>16&255,_r[Tr+2]=Rr>>8&255,_r[Tr+3]=Rr&255}function findBox(_r,Tr){const Rr=[];if(!Tr.length)return Rr;const Ar=_r.byteLength;for(let Pr=0;Pr<Ar;){const Lr=readUint32(_r,Pr),Mr=bin2str(_r.subarray(Pr+4,Pr+8)),Fr=Lr>1?Pr+Lr:Ar;if(Mr===Tr[0])if(Tr.length===1)Rr.push(_r.subarray(Pr+8,Fr));else{const zr=findBox(_r.subarray(Pr+8,Fr),Tr.slice(1));zr.length&&push.apply(Rr,zr)}Pr=Fr}return Rr}function parseSegmentIndex(_r){const Tr=[],Rr=_r[0];let Ar=8;const Pr=readUint32(_r,Ar);Ar+=4;const Lr=0,Mr=0;Rr===0?Ar+=8:Ar+=16,Ar+=2;let Fr=_r.length+Mr;const zr=readUint16(_r,Ar);Ar+=2;for(let Ur=0;Ur<zr;Ur++){let Vr=Ar;const Nr=readUint32(_r,Vr);Vr+=4;const Dr=Nr&2147483647;if((Nr&2147483648)>>>31===1)return logger.warn("SIDX has hierarchical references (not supported)"),null;const Gr=readUint32(_r,Vr);Vr+=4,Tr.push({referenceSize:Dr,subsegmentDuration:Gr,info:{duration:Gr/Pr,start:Fr,end:Fr+Dr-1}}),Fr+=Dr,Vr+=4,Ar=Vr}return{earliestPresentationTime:Lr,timescale:Pr,version:Rr,referencesCount:zr,references:Tr}}function parseInitSegment(_r){const Tr=[],Rr=findBox(_r,["moov","trak"]);for(let Pr=0;Pr<Rr.length;Pr++){const Lr=Rr[Pr],Mr=findBox(Lr,["tkhd"])[0];if(Mr){let Fr=Mr[0],zr=Fr===0?12:20;const Ur=readUint32(Mr,zr),Vr=findBox(Lr,["mdia","mdhd"])[0];if(Vr){Fr=Vr[0],zr=Fr===0?12:20;const Nr=readUint32(Vr,zr),Dr=findBox(Lr,["mdia","hdlr"])[0];if(Dr){const jr=bin2str(Dr.subarray(8,12)),Gr={soun:ElementaryStreamTypes.AUDIO,vide:ElementaryStreamTypes.VIDEO}[jr];if(Gr){const Wr=findBox(Lr,["mdia","minf","stbl","stsd"])[0];let qr;Wr&&(qr=bin2str(Wr.subarray(12,16))),Tr[Ur]={timescale:Nr,type:Gr},Tr[Gr]={timescale:Nr,id:Ur,codec:qr}}}}}}return findBox(_r,["moov","mvex","trex"]).forEach(Pr=>{const Lr=readUint32(Pr,4),Mr=Tr[Lr];Mr&&(Mr.default={duration:readUint32(Pr,12),flags:readUint32(Pr,20)})}),Tr}function patchEncyptionData(_r,Tr){if(!_r||!Tr)return _r;const Rr=Tr.keyId;return Rr&&Tr.isCommonEncryption&&findBox(_r,["moov","trak"]).forEach(Pr=>{const Mr=findBox(Pr,["mdia","minf","stbl","stsd"])[0].subarray(8);let Fr=findBox(Mr,["enca"]);const zr=Fr.length>0;zr||(Fr=findBox(Mr,["encv"])),Fr.forEach(Ur=>{const Vr=zr?Ur.subarray(28):Ur.subarray(78);findBox(Vr,["sinf"]).forEach(Dr=>{const jr=parseSinf(Dr);if(jr){const Gr=jr.subarray(8,24);Gr.some(Wr=>Wr!==0)||(logger.log(`[eme] Patching keyId in 'enc${zr?"a":"v"}>sinf>>tenc' box: ${Hex.hexDump(Gr)} -> ${Hex.hexDump(Rr)}`),jr.set(Rr,8))}})})}),_r}function parseSinf(_r){const Tr=findBox(_r,["schm"])[0];if(Tr){const Rr=bin2str(Tr.subarray(4,8));if(Rr==="cbcs"||Rr==="cenc")return findBox(_r,["schi","tenc"])[0]}return logger.error("[eme] missing 'schm' box"),null}function getStartDTS(_r,Tr){return findBox(Tr,["moof","traf"]).reduce((Rr,Ar)=>{const Pr=findBox(Ar,["tfdt"])[0],Lr=Pr[0],Mr=findBox(Ar,["tfhd"]).reduce((Fr,zr)=>{const Ur=readUint32(zr,4),Vr=_r[Ur];if(Vr){let Nr=readUint32(Pr,4);if(Lr===1){if(Nr===UINT32_MAX$1)return logger.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),Fr;Nr*=UINT32_MAX$1+1,Nr+=readUint32(Pr,8)}const Dr=Vr.timescale||9e4,jr=Nr/Dr;if(isFinite(jr)&&(Fr===null||jr<Fr))return jr}return Fr},null);return Mr!==null&&isFinite(Mr)&&(Rr===null||Mr<Rr)?Mr:Rr},null)}function getDuration(_r,Tr){let Rr=0,Ar=0,Pr=0;const Lr=findBox(_r,["moof","traf"]);for(let Mr=0;Mr<Lr.length;Mr++){const Fr=Lr[Mr],zr=findBox(Fr,["tfhd"])[0],Ur=readUint32(zr,4),Vr=Tr[Ur];if(!Vr)continue;const Nr=Vr.default,Dr=readUint32(zr,0)|(Nr==null?void 0:Nr.flags);let jr=Nr==null?void 0:Nr.duration;Dr&8&&(Dr&2?jr=readUint32(zr,12):jr=readUint32(zr,8));const Gr=Vr.timescale||9e4,Wr=findBox(Fr,["trun"]);for(let qr=0;qr<Wr.length;qr++){if(Rr=computeRawDurationFromSamples(Wr[qr]),!Rr&&jr){const Kr=readUint32(Wr[qr],4);Rr=jr*Kr}Vr.type===ElementaryStreamTypes.VIDEO?Ar+=Rr/Gr:Vr.type===ElementaryStreamTypes.AUDIO&&(Pr+=Rr/Gr)}}if(Ar===0&&Pr===0){let Mr=0;const Fr=findBox(_r,["sidx"]);for(let zr=0;zr<Fr.length;zr++){const Ur=parseSegmentIndex(Fr[zr]);Ur!=null&&Ur.references&&(Mr+=Ur.references.reduce((Vr,Nr)=>Vr+Nr.info.duration||0,0))}return Mr}return Ar||Pr}function computeRawDurationFromSamples(_r){const Tr=readUint32(_r,0);let Rr=8;Tr&1&&(Rr+=4),Tr&4&&(Rr+=4);let Ar=0;const Pr=readUint32(_r,4);for(let Lr=0;Lr<Pr;Lr++){if(Tr&256){const Mr=readUint32(_r,Rr);Ar+=Mr,Rr+=4}Tr&512&&(Rr+=4),Tr&1024&&(Rr+=4),Tr&2048&&(Rr+=4)}return Ar}function offsetStartDTS(_r,Tr,Rr){findBox(Tr,["moof","traf"]).forEach(Ar=>{findBox(Ar,["tfhd"]).forEach(Pr=>{const Lr=readUint32(Pr,4),Mr=_r[Lr];if(!Mr)return;const Fr=Mr.timescale||9e4;findBox(Ar,["tfdt"]).forEach(zr=>{const Ur=zr[0];let Vr=readUint32(zr,4);if(Ur===0)Vr-=Rr*Fr,Vr=Math.max(Vr,0),writeUint32(zr,4,Vr);else{Vr*=Math.pow(2,32),Vr+=readUint32(zr,8),Vr-=Rr*Fr,Vr=Math.max(Vr,0);const Nr=Math.floor(Vr/(UINT32_MAX$1+1)),Dr=Math.floor(Vr%(UINT32_MAX$1+1));writeUint32(zr,4,Nr),writeUint32(zr,8,Dr)}})})})}function segmentValidRange(_r){const Tr={valid:null,remainder:null},Rr=findBox(_r,["moof"]);if(Rr){if(Rr.length<2)return Tr.remainder=_r,Tr}else return Tr;const Ar=Rr[Rr.length-1];return Tr.valid=sliceUint8(_r,0,Ar.byteOffset-8),Tr.remainder=sliceUint8(_r,Ar.byteOffset-8),Tr}function appendUint8Array(_r,Tr){const Rr=new Uint8Array(_r.length+Tr.length);return Rr.set(_r),Rr.set(Tr,_r.length),Rr}function parseSamples(_r,Tr){const Rr=[],Ar=Tr.samples,Pr=Tr.timescale,Lr=Tr.id;let Mr=!1;return findBox(Ar,["moof"]).map(zr=>{const Ur=zr.byteOffset-8;findBox(zr,["traf"]).map(Nr=>{const Dr=findBox(Nr,["tfdt"]).map(jr=>{const Gr=jr[0];let Wr=readUint32(jr,4);return Gr===1&&(Wr*=Math.pow(2,32),Wr+=readUint32(jr,8)),Wr/Pr})[0];return Dr!==void 0&&(_r=Dr),findBox(Nr,["tfhd"]).map(jr=>{const Gr=readUint32(jr,4),Wr=readUint32(jr,0)&16777215,qr=(Wr&1)!==0,Kr=(Wr&2)!==0,Xr=(Wr&8)!==0;let Zr=0;const Jr=(Wr&16)!==0;let _i=0;const es=(Wr&32)!==0;let ts=8;Gr===Lr&&(qr&&(ts+=8),Kr&&(ts+=4),Xr&&(Zr=readUint32(jr,ts),ts+=4),Jr&&(_i=readUint32(jr,ts),ts+=4),es&&(ts+=4),Tr.type==="video"&&(Mr=isHEVC(Tr.codec)),findBox(Nr,["trun"]).map(rs=>{const ns=rs[0],as=readUint32(rs,0)&16777215,ls=(as&1)!==0;let us=0;const xs=(as&4)!==0,Ts=(as&256)!==0;let vs=0;const gs=(as&512)!==0;let fs=0;const ys=(as&1024)!==0,ks=(as&2048)!==0;let Fs=0;const Us=readUint32(rs,4);let Vs=8;ls&&(us=readUint32(rs,Vs),Vs+=4),xs&&(Vs+=4);let ao=us+Ur;for(let qs=0;qs<Us;qs++){if(Ts?(vs=readUint32(rs,Vs),Vs+=4):vs=Zr,gs?(fs=readUint32(rs,Vs),Vs+=4):fs=_i,ys&&(Vs+=4),ks&&(ns===0?Fs=readUint32(rs,Vs):Fs=readSint32(rs,Vs),Vs+=4),Tr.type===ElementaryStreamTypes.VIDEO){let Qs=0;for(;Qs<fs;){const mo=readUint32(Ar,ao);if(ao+=4,isSEIMessage(Mr,Ar[ao])){const Xs=Ar.subarray(ao,ao+mo);parseSEIMessageFromNALu(Xs,Mr?2:1,_r+Fs/Pr,Rr)}ao+=mo,Qs+=mo+4}}_r+=vs/Pr}}))})})}),Rr}function isHEVC(_r){if(!_r)return!1;const Tr=_r.indexOf("."),Rr=Tr<0?_r:_r.substring(0,Tr);return Rr==="hvc1"||Rr==="hev1"||Rr==="dvh1"||Rr==="dvhe"}function isSEIMessage(_r,Tr){if(_r){const Rr=Tr>>1&63;return Rr===39||Rr===40}else return(Tr&31)===6}function parseSEIMessageFromNALu(_r,Tr,Rr,Ar){const Pr=discardEPB(_r);let Lr=0;Lr+=Tr;let Mr=0,Fr=0,zr=!1,Ur=0;for(;Lr<Pr.length;){Mr=0;do{if(Lr>=Pr.length)break;Ur=Pr[Lr++],Mr+=Ur}while(Ur===255);Fr=0;do{if(Lr>=Pr.length)break;Ur=Pr[Lr++],Fr+=Ur}while(Ur===255);const Vr=Pr.length-Lr;if(!zr&&Mr===4&&Lr<Pr.length){if(zr=!0,Pr[Lr++]===181){const Dr=readUint16(Pr,Lr);if(Lr+=2,Dr===49){const jr=readUint32(Pr,Lr);if(Lr+=4,jr===1195456820){const Gr=Pr[Lr++];if(Gr===3){const Wr=Pr[Lr++],qr=31&Wr,Kr=64&Wr,Xr=Kr?2+qr*3:0,Zr=new Uint8Array(Xr);if(Kr){Zr[0]=Wr;for(let Jr=1;Jr<Xr;Jr++)Zr[Jr]=Pr[Lr++]}Ar.push({type:Gr,payloadType:Mr,pts:Rr,bytes:Zr})}}}}}else if(Mr===5&&Fr<Vr){if(zr=!0,Fr>16){const Nr=[];for(let Gr=0;Gr<16;Gr++){const Wr=Pr[Lr++].toString(16);Nr.push(Wr.length==1?"0"+Wr:Wr),(Gr===3||Gr===5||Gr===7||Gr===9)&&Nr.push("-")}const Dr=Fr-16,jr=new Uint8Array(Dr);for(let Gr=0;Gr<Dr;Gr++)jr[Gr]=Pr[Lr++];Ar.push({payloadType:Mr,pts:Rr,uuid:Nr.join(""),userData:utf8ArrayToStr(jr),userDataBytes:jr})}}else if(Fr<Vr)Lr+=Fr;else if(Fr>Vr)break}}function discardEPB(_r){const Tr=_r.byteLength,Rr=[];let Ar=1;for(;Ar<Tr-2;)_r[Ar]===0&&_r[Ar+1]===0&&_r[Ar+2]===3?(Rr.push(Ar+2),Ar+=2):Ar++;if(Rr.length===0)return _r;const Pr=Tr-Rr.length,Lr=new Uint8Array(Pr);let Mr=0;for(Ar=0;Ar<Pr;Mr++,Ar++)Mr===Rr[0]&&(Mr++,Rr.shift()),Lr[Ar]=_r[Mr];return Lr}function parseEmsg(_r){const Tr=_r[0];let Rr="",Ar="",Pr=0,Lr=0,Mr=0,Fr=0,zr=0,Ur=0;if(Tr===0){for(;bin2str(_r.subarray(Ur,Ur+1))!=="\0";)Rr+=bin2str(_r.subarray(Ur,Ur+1)),Ur+=1;for(Rr+=bin2str(_r.subarray(Ur,Ur+1)),Ur+=1;bin2str(_r.subarray(Ur,Ur+1))!=="\0";)Ar+=bin2str(_r.subarray(Ur,Ur+1)),Ur+=1;Ar+=bin2str(_r.subarray(Ur,Ur+1)),Ur+=1,Pr=readUint32(_r,12),Lr=readUint32(_r,16),Fr=readUint32(_r,20),zr=readUint32(_r,24),Ur=28}else if(Tr===1){Ur+=4,Pr=readUint32(_r,Ur),Ur+=4;const Nr=readUint32(_r,Ur);Ur+=4;const Dr=readUint32(_r,Ur);for(Ur+=4,Mr=2**32*Nr+Dr,Number.isSafeInteger(Mr)||(Mr=Number.MAX_SAFE_INTEGER,logger.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),Fr=readUint32(_r,Ur),Ur+=4,zr=readUint32(_r,Ur),Ur+=4;bin2str(_r.subarray(Ur,Ur+1))!=="\0";)Rr+=bin2str(_r.subarray(Ur,Ur+1)),Ur+=1;for(Rr+=bin2str(_r.subarray(Ur,Ur+1)),Ur+=1;bin2str(_r.subarray(Ur,Ur+1))!=="\0";)Ar+=bin2str(_r.subarray(Ur,Ur+1)),Ur+=1;Ar+=bin2str(_r.subarray(Ur,Ur+1)),Ur+=1}const Vr=_r.subarray(Ur,_r.byteLength);return{schemeIdUri:Rr,value:Ar,timeScale:Pr,presentationTime:Mr,presentationTimeDelta:Lr,eventDuration:Fr,id:zr,payload:Vr}}function mp4Box(_r,...Tr){const Rr=Tr.length;let Ar=8,Pr=Rr;for(;Pr--;)Ar+=Tr[Pr].byteLength;const Lr=new Uint8Array(Ar);for(Lr[0]=Ar>>24&255,Lr[1]=Ar>>16&255,Lr[2]=Ar>>8&255,Lr[3]=Ar&255,Lr.set(_r,4),Pr=0,Ar=8;Pr<Rr;Pr++)Lr.set(Tr[Pr],Ar),Ar+=Tr[Pr].byteLength;return Lr}function mp4pssh(_r,Tr,Rr){if(_r.byteLength!==16)throw new RangeError("Invalid system id");let Ar,Pr;if(Tr){Ar=1,Pr=new Uint8Array(Tr.length*16);for(let Fr=0;Fr<Tr.length;Fr++){const zr=Tr[Fr];if(zr.byteLength!==16)throw new RangeError("Invalid key");Pr.set(zr,Fr*16)}}else Ar=0,Pr=new Uint8Array;let Lr;Ar>0?(Lr=new Uint8Array(4),Tr.length>0&&new DataView(Lr.buffer).setUint32(0,Tr.length,!1)):Lr=new Uint8Array;const Mr=new Uint8Array(4);return Rr&&Rr.byteLength>0&&new DataView(Mr.buffer).setUint32(0,Rr.byteLength,!1),mp4Box([112,115,115,104],new Uint8Array([Ar,0,0,0]),_r,Lr,Pr,Mr,Rr||new Uint8Array)}function parsePssh(_r){if(!(_r instanceof ArrayBuffer)||_r.byteLength<32)return null;const Tr={version:0,systemId:"",kids:null,data:null},Rr=new DataView(_r),Ar=Rr.getUint32(0);if(_r.byteLength!==Ar&&Ar>44||Rr.getUint32(4)!==1886614376||(Tr.version=Rr.getUint32(8)>>>24,Tr.version>1))return null;Tr.systemId=Hex.hexDump(new Uint8Array(_r,12,16));const Lr=Rr.getUint32(28);if(Tr.version===0){if(Ar-32<Lr)return null;Tr.data=new Uint8Array(_r,32,Lr)}else if(Tr.version===1){Tr.kids=[];for(let Mr=0;Mr<Lr;Mr++)Tr.kids.push(new Uint8Array(_r,32+Mr*16,16))}return Tr}let keyUriToKeyIdMap={};class LevelKey{static clearKeyUriToKeyIdMap(){keyUriToKeyIdMap={}}constructor(Tr,Rr,Ar,Pr=[1],Lr=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=Tr,this.uri=Rr,this.keyFormat=Ar,this.keyFormatVersions=Pr,this.iv=Lr,this.encrypted=Tr?Tr!=="NONE":!1,this.isCommonEncryption=this.encrypted&&Tr!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case KeySystemFormats.FAIRPLAY:case KeySystemFormats.WIDEVINE:case KeySystemFormats.PLAYREADY:case KeySystemFormats.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(Tr){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof Tr!="number"&&(this.method==="AES-128"&&!this.iv&&logger.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),Tr=0);const Ar=createInitializationVector(Tr);return new LevelKey(this.method,this.uri,"identity",this.keyFormatVersions,Ar)}const Rr=convertDataUriToArrayBytes(this.uri);if(Rr)switch(this.keyFormat){case KeySystemFormats.WIDEVINE:this.pssh=Rr,Rr.length>=22&&(this.keyId=Rr.subarray(Rr.length-22,Rr.length-6));break;case KeySystemFormats.PLAYREADY:{const Ar=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=mp4pssh(Ar,null,Rr);const Pr=new Uint16Array(Rr.buffer,Rr.byteOffset,Rr.byteLength/2),Lr=String.fromCharCode.apply(null,Array.from(Pr)),Mr=Lr.substring(Lr.indexOf("<"),Lr.length),Ur=new DOMParser().parseFromString(Mr,"text/xml").getElementsByTagName("KID")[0];if(Ur){const Vr=Ur.childNodes[0]?Ur.childNodes[0].nodeValue:Ur.getAttribute("VALUE");if(Vr){const Nr=base64Decode(Vr).subarray(0,16);changeEndianness(Nr),this.keyId=Nr}}break}default:{let Ar=Rr.subarray(0,16);if(Ar.length!==16){const Pr=new Uint8Array(16);Pr.set(Ar,16-Ar.length),Ar=Pr}this.keyId=Ar;break}}if(!this.keyId||this.keyId.byteLength!==16){let Ar=keyUriToKeyIdMap[this.uri];if(!Ar){const Pr=Object.keys(keyUriToKeyIdMap).length%Number.MAX_SAFE_INTEGER;Ar=new Uint8Array(16),new DataView(Ar.buffer,12,4).setUint32(0,Pr),keyUriToKeyIdMap[this.uri]=Ar}this.keyId=Ar}return this}}function createInitializationVector(_r){const Tr=new Uint8Array(16);for(let Rr=12;Rr<16;Rr++)Tr[Rr]=_r>>8*(15-Rr)&255;return Tr}const VARIABLE_REPLACEMENT_REGEX=/\{\$([a-zA-Z0-9-_]+)\}/g;function hasVariableReferences(_r){return VARIABLE_REPLACEMENT_REGEX.test(_r)}function substituteVariablesInAttributes(_r,Tr,Rr){if(_r.variableList!==null||_r.hasVariableRefs)for(let Ar=Rr.length;Ar--;){const Pr=Rr[Ar],Lr=Tr[Pr];Lr&&(Tr[Pr]=substituteVariables(_r,Lr))}}function substituteVariables(_r,Tr){if(_r.variableList!==null||_r.hasVariableRefs){const Rr=_r.variableList;return Tr.replace(VARIABLE_REPLACEMENT_REGEX,Ar=>{const Pr=Ar.substring(2,Ar.length-1),Lr=Rr==null?void 0:Rr[Pr];return Lr===void 0?(_r.playlistParsingError||(_r.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${Pr}"`)),Ar):Lr})}return Tr}function addVariableDefinition(_r,Tr,Rr){let Ar=_r.variableList;Ar||(_r.variableList=Ar={});let Pr,Lr;if("QUERYPARAM"in Tr){Pr=Tr.QUERYPARAM;try{const Mr=new self.URL(Rr).searchParams;if(Mr.has(Pr))Lr=Mr.get(Pr);else throw new Error(`"${Pr}" does not match any query parameter in URI: "${Rr}"`)}catch(Mr){_r.playlistParsingError||(_r.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${Mr.message}`))}}else Pr=Tr.NAME,Lr=Tr.VALUE;Pr in Ar?_r.playlistParsingError||(_r.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${Pr}"`)):Ar[Pr]=Lr||""}function importVariableDefinition(_r,Tr,Rr){const Ar=Tr.IMPORT;if(Rr&&Ar in Rr){let Pr=_r.variableList;Pr||(_r.variableList=Pr={}),Pr[Ar]=Rr[Ar]}else _r.playlistParsingError||(_r.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${Ar}"`))}function getMediaSource(){if(!(typeof self>"u"))return self.MediaSource||self.WebKitMediaSource}const sampleEntryCodesISO={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},MediaSource$2=getMediaSource();function isCodecType(_r,Tr){const Rr=sampleEntryCodesISO[Tr];return!!Rr&&Rr[_r.slice(0,4)]===!0}function isCodecSupportedInMp4(_r,Tr){var Rr;return(Rr=MediaSource$2==null?void 0:MediaSource$2.isTypeSupported(`${Tr||"video"}/mp4;codecs="${_r}"`))!=null?Rr:!1}const MASTER_PLAYLIST_REGEX=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,MASTER_PLAYLIST_MEDIA_REGEX=/#EXT-X-MEDIA:(.*)/g,IS_MEDIA_PLAYLIST=/^#EXT(?:INF|-X-TARGETDURATION):/m,LEVEL_PLAYLIST_REGEX_FAST=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),LEVEL_PLAYLIST_REGEX_SLOW=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class M3U8Parser{static findGroup(Tr,Rr){for(let Ar=0;Ar<Tr.length;Ar++){const Pr=Tr[Ar];if(Pr.id===Rr)return Pr}}static convertAVC1ToAVCOTI(Tr){const Rr=Tr.split(".");if(Rr.length>2){let Ar=Rr.shift()+".";return Ar+=parseInt(Rr.shift()).toString(16),Ar+=("000"+parseInt(Rr.shift()).toString(16)).slice(-4),Ar}return Tr}static resolve(Tr,Rr){return urlToolkitExports.buildAbsoluteURL(Rr,Tr,{alwaysNormalize:!0})}static isMediaPlaylist(Tr){return IS_MEDIA_PLAYLIST.test(Tr)}static parseMasterPlaylist(Tr,Rr){const Ar=hasVariableReferences(Tr),Pr={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Ar},Lr=[];MASTER_PLAYLIST_REGEX.lastIndex=0;let Mr;for(;(Mr=MASTER_PLAYLIST_REGEX.exec(Tr))!=null;)if(Mr[1]){var Fr;const Ur=new AttrList(Mr[1]);substituteVariablesInAttributes(Pr,Ur,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const Vr=substituteVariables(Pr,Mr[2]),Nr={attrs:Ur,bitrate:Ur.decimalInteger("AVERAGE-BANDWIDTH")||Ur.decimalInteger("BANDWIDTH"),name:Ur.NAME,url:M3U8Parser.resolve(Vr,Rr)},Dr=Ur.decimalResolution("RESOLUTION");Dr&&(Nr.width=Dr.width,Nr.height=Dr.height),setCodecs((Ur.CODECS||"").split(/[ ,]+/).filter(jr=>jr),Nr),Nr.videoCodec&&Nr.videoCodec.indexOf("avc1")!==-1&&(Nr.videoCodec=M3U8Parser.convertAVC1ToAVCOTI(Nr.videoCodec)),(Fr=Nr.unknownCodecs)!=null&&Fr.length||Lr.push(Nr),Pr.levels.push(Nr)}else if(Mr[3]){const Ur=Mr[3],Vr=Mr[4];switch(Ur){case"SESSION-DATA":{const Nr=new AttrList(Vr);substituteVariablesInAttributes(Pr,Nr,["DATA-ID","LANGUAGE","VALUE","URI"]);const Dr=Nr["DATA-ID"];Dr&&(Pr.sessionData===null&&(Pr.sessionData={}),Pr.sessionData[Dr]=Nr);break}case"SESSION-KEY":{const Nr=parseKey(Vr,Rr,Pr);Nr.encrypted&&Nr.isSupported()?(Pr.sessionKeys===null&&(Pr.sessionKeys=[]),Pr.sessionKeys.push(Nr)):logger.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${Vr}"`);break}case"DEFINE":{{const Nr=new AttrList(Vr);substituteVariablesInAttributes(Pr,Nr,["NAME","VALUE","QUERYPARAM"]),addVariableDefinition(Pr,Nr,Rr)}break}case"CONTENT-STEERING":{const Nr=new AttrList(Vr);substituteVariablesInAttributes(Pr,Nr,["SERVER-URI","PATHWAY-ID"]),Pr.contentSteering={uri:M3U8Parser.resolve(Nr["SERVER-URI"],Rr),pathwayId:Nr["PATHWAY-ID"]||"."};break}case"START":{Pr.startTimeOffset=parseStartTimeOffset(Vr);break}}}const zr=Lr.length>0&&Lr.length<Pr.levels.length;return Pr.levels=zr?Lr:Pr.levels,Pr.levels.length===0&&(Pr.playlistParsingError=new Error("no levels found in manifest")),Pr}static parseMasterPlaylistMedia(Tr,Rr,Ar){let Pr;const Lr={},Mr=Ar.levels,Fr={AUDIO:Mr.map(Ur=>({id:Ur.attrs.AUDIO,audioCodec:Ur.audioCodec})),SUBTITLES:Mr.map(Ur=>({id:Ur.attrs.SUBTITLES,textCodec:Ur.textCodec})),"CLOSED-CAPTIONS":[]};let zr=0;for(MASTER_PLAYLIST_MEDIA_REGEX.lastIndex=0;(Pr=MASTER_PLAYLIST_MEDIA_REGEX.exec(Tr))!==null;){const Ur=new AttrList(Pr[1]),Vr=Ur.TYPE;if(Vr){const Nr=Fr[Vr],Dr=Lr[Vr]||[];Lr[Vr]=Dr,substituteVariablesInAttributes(Ar,Ur,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const jr={attrs:Ur,bitrate:0,id:zr++,groupId:Ur["GROUP-ID"]||"",instreamId:Ur["INSTREAM-ID"],name:Ur.NAME||Ur.LANGUAGE||"",type:Vr,default:Ur.bool("DEFAULT"),autoselect:Ur.bool("AUTOSELECT"),forced:Ur.bool("FORCED"),lang:Ur.LANGUAGE,url:Ur.URI?M3U8Parser.resolve(Ur.URI,Rr):""};if(Nr!=null&&Nr.length){const Gr=M3U8Parser.findGroup(Nr,jr.groupId)||Nr[0];assignCodec(jr,Gr,"audioCodec"),assignCodec(jr,Gr,"textCodec")}Dr.push(jr)}}return Lr}static parseLevelPlaylist(Tr,Rr,Ar,Pr,Lr,Mr){const Fr=new LevelDetails(Rr),zr=Fr.fragments;let Ur=null,Vr=0,Nr=0,Dr=0,jr=0,Gr=null,Wr=new Fragment(Pr,Rr),qr,Kr,Xr,Zr=-1,Jr=!1;for(LEVEL_PLAYLIST_REGEX_FAST.lastIndex=0,Fr.m3u8=Tr,Fr.hasVariableRefs=hasVariableReferences(Tr);(qr=LEVEL_PLAYLIST_REGEX_FAST.exec(Tr))!==null;){Jr&&(Jr=!1,Wr=new Fragment(Pr,Rr),Wr.start=Dr,Wr.sn=Vr,Wr.cc=jr,Wr.level=Ar,Ur&&(Wr.initSegment=Ur,Wr.rawProgramDateTime=Ur.rawProgramDateTime,Ur.rawProgramDateTime=null));const rs=qr[1];if(rs){Wr.duration=parseFloat(rs);const ns=(" "+qr[2]).slice(1);Wr.title=ns||null,Wr.tagList.push(ns?["INF",rs,ns]:["INF",rs])}else if(qr[3]){if(isFiniteNumber(Wr.duration)){Wr.start=Dr,Xr&&setFragLevelKeys(Wr,Xr,Fr),Wr.sn=Vr,Wr.level=Ar,Wr.cc=jr,Wr.urlId=Lr,zr.push(Wr);const ns=(" "+qr[3]).slice(1);Wr.relurl=substituteVariables(Fr,ns),assignProgramDateTime(Wr,Gr),Gr=Wr,Dr+=Wr.duration,Vr++,Nr=0,Jr=!0}}else if(qr[4]){const ns=(" "+qr[4]).slice(1);Gr?Wr.setByteRange(ns,Gr):Wr.setByteRange(ns)}else if(qr[5])Wr.rawProgramDateTime=(" "+qr[5]).slice(1),Wr.tagList.push(["PROGRAM-DATE-TIME",Wr.rawProgramDateTime]),Zr===-1&&(Zr=zr.length);else{if(qr=qr[0].match(LEVEL_PLAYLIST_REGEX_SLOW),!qr){logger.warn("No matches on slow regex match for level playlist!");continue}for(Kr=1;Kr<qr.length&&!(typeof qr[Kr]<"u");Kr++);const ns=(" "+qr[Kr]).slice(1),as=(" "+qr[Kr+1]).slice(1),ls=qr[Kr+2]?(" "+qr[Kr+2]).slice(1):"";switch(ns){case"PLAYLIST-TYPE":Fr.type=as.toUpperCase();break;case"MEDIA-SEQUENCE":Vr=Fr.startSN=parseInt(as);break;case"SKIP":{const us=new AttrList(as);substituteVariablesInAttributes(Fr,us,["RECENTLY-REMOVED-DATERANGES"]);const xs=us.decimalInteger("SKIPPED-SEGMENTS");if(isFiniteNumber(xs)){Fr.skippedSegments=xs;for(let vs=xs;vs--;)zr.unshift(null);Vr+=xs}const Ts=us.enumeratedString("RECENTLY-REMOVED-DATERANGES");Ts&&(Fr.recentlyRemovedDateranges=Ts.split("	"));break}case"TARGETDURATION":Fr.targetduration=Math.max(parseInt(as),1);break;case"VERSION":Fr.version=parseInt(as);break;case"EXTM3U":break;case"ENDLIST":Fr.live=!1;break;case"#":(as||ls)&&Wr.tagList.push(ls?[as,ls]:[as]);break;case"DISCONTINUITY":jr++,Wr.tagList.push(["DIS"]);break;case"GAP":Wr.gap=!0,Wr.tagList.push([ns]);break;case"BITRATE":Wr.tagList.push([ns,as]);break;case"DATERANGE":{const us=new AttrList(as);substituteVariablesInAttributes(Fr,us,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),substituteVariablesInAttributes(Fr,us,us.clientAttrs);const xs=new DateRange(us,Fr.dateRanges[us.ID]);xs.isValid||Fr.skippedSegments?Fr.dateRanges[xs.id]=xs:logger.warn(`Ignoring invalid DATERANGE tag: "${as}"`),Wr.tagList.push(["EXT-X-DATERANGE",as]);break}case"DEFINE":{{const us=new AttrList(as);substituteVariablesInAttributes(Fr,us,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in us?importVariableDefinition(Fr,us,Mr):addVariableDefinition(Fr,us,Rr)}break}case"DISCONTINUITY-SEQUENCE":jr=parseInt(as);break;case"KEY":{const us=parseKey(as,Rr,Fr);if(us.isSupported()){if(us.method==="NONE"){Xr=void 0;break}Xr||(Xr={}),Xr[us.keyFormat]&&(Xr=_extends({},Xr)),Xr[us.keyFormat]=us}else logger.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${as}"`);break}case"START":Fr.startTimeOffset=parseStartTimeOffset(as);break;case"MAP":{const us=new AttrList(as);if(substituteVariablesInAttributes(Fr,us,["BYTERANGE","URI"]),Wr.duration){const xs=new Fragment(Pr,Rr);setInitSegment(xs,us,Ar,Xr),Ur=xs,Wr.initSegment=Ur,Ur.rawProgramDateTime&&!Wr.rawProgramDateTime&&(Wr.rawProgramDateTime=Ur.rawProgramDateTime)}else setInitSegment(Wr,us,Ar,Xr),Ur=Wr,Jr=!0;break}case"SERVER-CONTROL":{const us=new AttrList(as);Fr.canBlockReload=us.bool("CAN-BLOCK-RELOAD"),Fr.canSkipUntil=us.optionalFloat("CAN-SKIP-UNTIL",0),Fr.canSkipDateRanges=Fr.canSkipUntil>0&&us.bool("CAN-SKIP-DATERANGES"),Fr.partHoldBack=us.optionalFloat("PART-HOLD-BACK",0),Fr.holdBack=us.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const us=new AttrList(as);Fr.partTarget=us.decimalFloatingPoint("PART-TARGET");break}case"PART":{let us=Fr.partList;us||(us=Fr.partList=[]);const xs=Nr>0?us[us.length-1]:void 0,Ts=Nr++,vs=new AttrList(as);substituteVariablesInAttributes(Fr,vs,["BYTERANGE","URI"]);const gs=new Part(vs,Wr,Rr,Ts,xs);us.push(gs),Wr.duration+=gs.duration;break}case"PRELOAD-HINT":{const us=new AttrList(as);substituteVariablesInAttributes(Fr,us,["URI"]),Fr.preloadHint=us;break}case"RENDITION-REPORT":{const us=new AttrList(as);substituteVariablesInAttributes(Fr,us,["URI"]),Fr.renditionReports=Fr.renditionReports||[],Fr.renditionReports.push(us);break}default:logger.warn(`line parsed but not handled: ${qr}`);break}}}Gr&&!Gr.relurl?(zr.pop(),Dr-=Gr.duration,Fr.partList&&(Fr.fragmentHint=Gr)):Fr.partList&&(assignProgramDateTime(Wr,Gr),Wr.cc=jr,Fr.fragmentHint=Wr,Xr&&setFragLevelKeys(Wr,Xr,Fr));const _i=zr.length,es=zr[0],ts=zr[_i-1];if(Dr+=Fr.skippedSegments*Fr.targetduration,Dr>0&&_i&&ts){Fr.averagetargetduration=Dr/_i;const rs=ts.sn;Fr.endSN=rs!=="initSegment"?rs:0,Fr.live||(ts.endList=!0),es&&(Fr.startCC=es.cc)}else Fr.endSN=0,Fr.startCC=0;return Fr.fragmentHint&&(Dr+=Fr.fragmentHint.duration),Fr.totalduration=Dr,Fr.endCC=jr,Zr>0&&backfillProgramDateTimes(zr,Zr),Fr}}function parseKey(_r,Tr,Rr){var Ar,Pr;const Lr=new AttrList(_r);substituteVariablesInAttributes(Rr,Lr,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const Mr=(Ar=Lr.METHOD)!=null?Ar:"",Fr=Lr.URI,zr=Lr.hexadecimalInteger("IV"),Ur=Lr.KEYFORMATVERSIONS,Vr=(Pr=Lr.KEYFORMAT)!=null?Pr:"identity";Fr&&Lr.IV&&!zr&&logger.error(`Invalid IV: ${Lr.IV}`);const Nr=Fr?M3U8Parser.resolve(Fr,Tr):"",Dr=(Ur||"1").split("/").map(Number).filter(Number.isFinite);return new LevelKey(Mr,Nr,Vr,Dr,zr)}function parseStartTimeOffset(_r){const Rr=new AttrList(_r).decimalFloatingPoint("TIME-OFFSET");return isFiniteNumber(Rr)?Rr:null}function setCodecs(_r,Tr){["video","audio","text"].forEach(Rr=>{const Ar=_r.filter(Pr=>isCodecType(Pr,Rr));if(Ar.length){const Pr=Ar.filter(Lr=>Lr.lastIndexOf("avc1",0)===0||Lr.lastIndexOf("mp4a",0)===0);Tr[`${Rr}Codec`]=Pr.length>0?Pr[0]:Ar[0],_r=_r.filter(Lr=>Ar.indexOf(Lr)===-1)}}),Tr.unknownCodecs=_r}function assignCodec(_r,Tr,Rr){const Ar=Tr[Rr];Ar&&(_r[Rr]=Ar)}function backfillProgramDateTimes(_r,Tr){let Rr=_r[Tr];for(let Ar=Tr;Ar--;){const Pr=_r[Ar];if(!Pr)return;Pr.programDateTime=Rr.programDateTime-Pr.duration*1e3,Rr=Pr}}function assignProgramDateTime(_r,Tr){_r.rawProgramDateTime?_r.programDateTime=Date.parse(_r.rawProgramDateTime):Tr!=null&&Tr.programDateTime&&(_r.programDateTime=Tr.endProgramDateTime),isFiniteNumber(_r.programDateTime)||(_r.programDateTime=null,_r.rawProgramDateTime=null)}function setInitSegment(_r,Tr,Rr,Ar){_r.relurl=Tr.URI,Tr.BYTERANGE&&_r.setByteRange(Tr.BYTERANGE),_r.level=Rr,_r.sn="initSegment",Ar&&(_r.levelkeys=Ar),_r.initSegment=null}function setFragLevelKeys(_r,Tr,Rr){_r.levelkeys=Tr;const{encryptedFragments:Ar}=Rr;(!Ar.length||Ar[Ar.length-1].levelkeys!==Tr)&&Object.keys(Tr).some(Pr=>Tr[Pr].isCommonEncryption)&&Ar.push(_r)}var PlaylistContextType={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},PlaylistLevelType={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function mapContextToLevelType(_r){const{type:Tr}=_r;switch(Tr){case PlaylistContextType.AUDIO_TRACK:return PlaylistLevelType.AUDIO;case PlaylistContextType.SUBTITLE_TRACK:return PlaylistLevelType.SUBTITLE;default:return PlaylistLevelType.MAIN}}function getResponseUrl(_r,Tr){let Rr=_r.url;return(Rr===void 0||Rr.indexOf("data:")===0)&&(Rr=Tr.url),Rr}class PlaylistLoader{constructor(Tr){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=Tr,this.registerListeners()}startLoad(Tr){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:Tr}=this;Tr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.on(Events.LEVEL_LOADING,this.onLevelLoading,this),Tr.on(Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),Tr.on(Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:Tr}=this;Tr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.off(Events.LEVEL_LOADING,this.onLevelLoading,this),Tr.off(Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),Tr.off(Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(Tr){const Rr=this.hls.config,Ar=Rr.pLoader,Pr=Rr.loader,Lr=Ar||Pr,Mr=new Lr(Rr);return this.loaders[Tr.type]=Mr,Mr}getInternalLoader(Tr){return this.loaders[Tr.type]}resetInternalLoader(Tr){this.loaders[Tr]&&delete this.loaders[Tr]}destroyInternalLoaders(){for(const Tr in this.loaders){const Rr=this.loaders[Tr];Rr&&Rr.destroy(),this.resetInternalLoader(Tr)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(Tr,Rr){const{url:Ar}=Rr;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:PlaylistContextType.MANIFEST,url:Ar,deliveryDirectives:null})}onLevelLoading(Tr,Rr){const{id:Ar,level:Pr,url:Lr,deliveryDirectives:Mr}=Rr;this.load({id:Ar,level:Pr,responseType:"text",type:PlaylistContextType.LEVEL,url:Lr,deliveryDirectives:Mr})}onAudioTrackLoading(Tr,Rr){const{id:Ar,groupId:Pr,url:Lr,deliveryDirectives:Mr}=Rr;this.load({id:Ar,groupId:Pr,level:null,responseType:"text",type:PlaylistContextType.AUDIO_TRACK,url:Lr,deliveryDirectives:Mr})}onSubtitleTrackLoading(Tr,Rr){const{id:Ar,groupId:Pr,url:Lr,deliveryDirectives:Mr}=Rr;this.load({id:Ar,groupId:Pr,level:null,responseType:"text",type:PlaylistContextType.SUBTITLE_TRACK,url:Lr,deliveryDirectives:Mr})}load(Tr){var Rr;const Ar=this.hls.config;let Pr=this.getInternalLoader(Tr);if(Pr){const Ur=Pr.context;if(Ur&&Ur.url===Tr.url){logger.trace("[playlist-loader]: playlist request ongoing");return}logger.log(`[playlist-loader]: aborting previous loader for type: ${Tr.type}`),Pr.abort()}let Lr;if(Tr.type===PlaylistContextType.MANIFEST?Lr=Ar.manifestLoadPolicy.default:Lr=_extends({},Ar.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),Pr=this.createInternalLoader(Tr),(Rr=Tr.deliveryDirectives)!=null&&Rr.part){let Ur;if(Tr.type===PlaylistContextType.LEVEL&&Tr.level!==null?Ur=this.hls.levels[Tr.level].details:Tr.type===PlaylistContextType.AUDIO_TRACK&&Tr.id!==null?Ur=this.hls.audioTracks[Tr.id].details:Tr.type===PlaylistContextType.SUBTITLE_TRACK&&Tr.id!==null&&(Ur=this.hls.subtitleTracks[Tr.id].details),Ur){const Vr=Ur.partTarget,Nr=Ur.targetduration;if(Vr&&Nr){const Dr=Math.max(Vr*3,Nr*.8)*1e3;Lr=_extends({},Lr,{maxTimeToFirstByteMs:Math.min(Dr,Lr.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(Dr,Lr.maxTimeToFirstByteMs)})}}}const Mr=Lr.errorRetry||Lr.timeoutRetry||{},Fr={loadPolicy:Lr,timeout:Lr.maxLoadTimeMs,maxRetry:Mr.maxNumRetry||0,retryDelay:Mr.retryDelayMs||0,maxRetryDelay:Mr.maxRetryDelayMs||0},zr={onSuccess:(Ur,Vr,Nr,Dr)=>{const jr=this.getInternalLoader(Nr);this.resetInternalLoader(Nr.type);const Gr=Ur.data;if(Gr.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(Ur,Nr,new Error("no EXTM3U delimiter"),Dr||null,Vr);return}Vr.parsing.start=performance.now(),M3U8Parser.isMediaPlaylist(Gr)?this.handleTrackOrLevelPlaylist(Ur,Vr,Nr,Dr||null,jr):this.handleMasterPlaylist(Ur,Vr,Nr,Dr)},onError:(Ur,Vr,Nr,Dr)=>{this.handleNetworkError(Vr,Nr,!1,Ur,Dr)},onTimeout:(Ur,Vr,Nr)=>{this.handleNetworkError(Vr,Nr,!0,void 0,Ur)}};Pr.load(Tr,Fr,zr)}handleMasterPlaylist(Tr,Rr,Ar,Pr){const Lr=this.hls,Mr=Tr.data,Fr=getResponseUrl(Tr,Ar),zr=M3U8Parser.parseMasterPlaylist(Mr,Fr);if(zr.playlistParsingError){this.handleManifestParsingError(Tr,Ar,zr.playlistParsingError,Pr,Rr);return}const{contentSteering:Ur,levels:Vr,sessionData:Nr,sessionKeys:Dr,startTimeOffset:jr,variableList:Gr}=zr;this.variableList=Gr;const{AUDIO:Wr=[],SUBTITLES:qr,"CLOSED-CAPTIONS":Kr}=M3U8Parser.parseMasterPlaylistMedia(Mr,Fr,zr);Wr.length&&!Wr.some(Zr=>!Zr.url)&&Vr[0].audioCodec&&!Vr[0].attrs.AUDIO&&(logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),Wr.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new AttrList({}),bitrate:0,url:""})),Lr.trigger(Events.MANIFEST_LOADED,{levels:Vr,audioTracks:Wr,subtitles:qr,captions:Kr,contentSteering:Ur,url:Fr,stats:Rr,networkDetails:Pr,sessionData:Nr,sessionKeys:Dr,startTimeOffset:jr,variableList:Gr})}handleTrackOrLevelPlaylist(Tr,Rr,Ar,Pr,Lr){const Mr=this.hls,{id:Fr,level:zr,type:Ur}=Ar,Vr=getResponseUrl(Tr,Ar),Nr=isFiniteNumber(Fr)?Fr:0,Dr=isFiniteNumber(zr)?zr:Nr,jr=mapContextToLevelType(Ar),Gr=M3U8Parser.parseLevelPlaylist(Tr.data,Vr,Dr,jr,Nr,this.variableList);if(Ur===PlaylistContextType.MANIFEST){const Wr={attrs:new AttrList({}),bitrate:0,details:Gr,name:"",url:Vr};Mr.trigger(Events.MANIFEST_LOADED,{levels:[Wr],audioTracks:[],url:Vr,stats:Rr,networkDetails:Pr,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}Rr.parsing.end=performance.now(),Ar.levelDetails=Gr,this.handlePlaylistLoaded(Gr,Tr,Rr,Ar,Pr,Lr)}handleManifestParsingError(Tr,Rr,Ar,Pr,Lr){this.hls.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.MANIFEST_PARSING_ERROR,fatal:Rr.type===PlaylistContextType.MANIFEST,url:Tr.url,err:Ar,error:Ar,reason:Ar.message,response:Tr,context:Rr,networkDetails:Pr,stats:Lr})}handleNetworkError(Tr,Rr,Ar=!1,Pr,Lr){let Mr=`A network ${Ar?"timeout":"error"+(Pr?" (status "+Pr.code+")":"")} occurred while loading ${Tr.type}`;Tr.type===PlaylistContextType.LEVEL?Mr+=`: ${Tr.level} id: ${Tr.id}`:(Tr.type===PlaylistContextType.AUDIO_TRACK||Tr.type===PlaylistContextType.SUBTITLE_TRACK)&&(Mr+=` id: ${Tr.id} group-id: "${Tr.groupId}"`);const Fr=new Error(Mr);logger.warn(`[playlist-loader]: ${Mr}`);let zr=ErrorDetails.UNKNOWN,Ur=!1;const Vr=this.getInternalLoader(Tr);switch(Tr.type){case PlaylistContextType.MANIFEST:zr=Ar?ErrorDetails.MANIFEST_LOAD_TIMEOUT:ErrorDetails.MANIFEST_LOAD_ERROR,Ur=!0;break;case PlaylistContextType.LEVEL:zr=Ar?ErrorDetails.LEVEL_LOAD_TIMEOUT:ErrorDetails.LEVEL_LOAD_ERROR,Ur=!1;break;case PlaylistContextType.AUDIO_TRACK:zr=Ar?ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:ErrorDetails.AUDIO_TRACK_LOAD_ERROR,Ur=!1;break;case PlaylistContextType.SUBTITLE_TRACK:zr=Ar?ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:ErrorDetails.SUBTITLE_LOAD_ERROR,Ur=!1;break}Vr&&this.resetInternalLoader(Tr.type);const Nr={type:ErrorTypes.NETWORK_ERROR,details:zr,fatal:Ur,url:Tr.url,loader:Vr,context:Tr,error:Fr,networkDetails:Rr,stats:Lr};if(Pr){const Dr=(Rr==null?void 0:Rr.url)||Tr.url;Nr.response=_objectSpread2({url:Dr,data:void 0},Pr)}this.hls.trigger(Events.ERROR,Nr)}handlePlaylistLoaded(Tr,Rr,Ar,Pr,Lr,Mr){const Fr=this.hls,{type:zr,level:Ur,id:Vr,groupId:Nr,deliveryDirectives:Dr}=Pr,jr=getResponseUrl(Rr,Pr),Gr=mapContextToLevelType(Pr),Wr=typeof Pr.level=="number"&&Gr===PlaylistLevelType.MAIN?Ur:void 0;if(!Tr.fragments.length){const Kr=new Error("No Segments found in Playlist");Fr.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:jr,error:Kr,reason:Kr.message,response:Rr,context:Pr,level:Wr,parent:Gr,networkDetails:Lr,stats:Ar});return}Tr.targetduration||(Tr.playlistParsingError=new Error("Missing Target Duration"));const qr=Tr.playlistParsingError;if(qr){Fr.trigger(Events.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.LEVEL_PARSING_ERROR,fatal:!1,url:jr,error:qr,reason:qr.message,response:Rr,context:Pr,level:Wr,parent:Gr,networkDetails:Lr,stats:Ar});return}switch(Tr.live&&Mr&&(Mr.getCacheAge&&(Tr.ageHeader=Mr.getCacheAge()||0),(!Mr.getCacheAge||isNaN(Tr.ageHeader))&&(Tr.ageHeader=0)),zr){case PlaylistContextType.MANIFEST:case PlaylistContextType.LEVEL:Fr.trigger(Events.LEVEL_LOADED,{details:Tr,level:Wr||0,id:Vr||0,stats:Ar,networkDetails:Lr,deliveryDirectives:Dr});break;case PlaylistContextType.AUDIO_TRACK:Fr.trigger(Events.AUDIO_TRACK_LOADED,{details:Tr,id:Vr||0,groupId:Nr||"",stats:Ar,networkDetails:Lr,deliveryDirectives:Dr});break;case PlaylistContextType.SUBTITLE_TRACK:Fr.trigger(Events.SUBTITLE_TRACK_LOADED,{details:Tr,id:Vr||0,groupId:Nr||"",stats:Ar,networkDetails:Lr,deliveryDirectives:Dr});break}}}function sendAddTrackEvent(_r,Tr){let Rr;try{Rr=new Event("addtrack")}catch{Rr=document.createEvent("Event"),Rr.initEvent("addtrack",!1,!1)}Rr.track=_r,Tr.dispatchEvent(Rr)}function addCueToTrack(_r,Tr){const Rr=_r.mode;if(Rr==="disabled"&&(_r.mode="hidden"),_r.cues&&!_r.cues.getCueById(Tr.id))try{if(_r.addCue(Tr),!_r.cues.getCueById(Tr.id))throw new Error(`addCue is failed for: ${Tr}`)}catch(Ar){logger.debug(`[texttrack-utils]: ${Ar}`);try{const Pr=new self.TextTrackCue(Tr.startTime,Tr.endTime,Tr.text);Pr.id=Tr.id,_r.addCue(Pr)}catch(Pr){logger.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${Pr}`)}}Rr==="disabled"&&(_r.mode=Rr)}function clearCurrentCues(_r){const Tr=_r.mode;if(Tr==="disabled"&&(_r.mode="hidden"),_r.cues)for(let Rr=_r.cues.length;Rr--;)_r.removeCue(_r.cues[Rr]);Tr==="disabled"&&(_r.mode=Tr)}function removeCuesInRange(_r,Tr,Rr,Ar){const Pr=_r.mode;if(Pr==="disabled"&&(_r.mode="hidden"),_r.cues&&_r.cues.length>0){const Lr=getCuesInRange(_r.cues,Tr,Rr);for(let Mr=0;Mr<Lr.length;Mr++)(!Ar||Ar(Lr[Mr]))&&_r.removeCue(Lr[Mr])}Pr==="disabled"&&(_r.mode=Pr)}function getFirstCueIndexAfterTime(_r,Tr){if(Tr<_r[0].startTime)return 0;const Rr=_r.length-1;if(Tr>_r[Rr].endTime)return-1;let Ar=0,Pr=Rr;for(;Ar<=Pr;){const Lr=Math.floor((Pr+Ar)/2);if(Tr<_r[Lr].startTime)Pr=Lr-1;else if(Tr>_r[Lr].startTime&&Ar<Rr)Ar=Lr+1;else return Lr}return _r[Ar].startTime-Tr<Tr-_r[Pr].startTime?Ar:Pr}function getCuesInRange(_r,Tr,Rr){const Ar=[],Pr=getFirstCueIndexAfterTime(_r,Tr);if(Pr>-1)for(let Lr=Pr,Mr=_r.length;Lr<Mr;Lr++){const Fr=_r[Lr];if(Fr.startTime>=Tr&&Fr.endTime<=Rr)Ar.push(Fr);else if(Fr.startTime>Rr)return Ar}return Ar}var MetadataSchema={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const MIN_CUE_DURATION=.25;function getCueClass(){if(!(typeof self>"u"))return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}const MAX_CUE_ENDTIME=(()=>{const _r=getCueClass();try{new _r(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function dateRangeDateToTimelineSeconds(_r,Tr){return _r.getTime()/1e3-Tr}function hexToArrayBuffer(_r){return Uint8Array.from(_r.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class ID3TrackController{constructor(Tr){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=Tr,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:Tr}=this;Tr.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Tr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.on(Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),Tr.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Tr.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:Tr}=this;Tr.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Tr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.off(Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),Tr.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Tr.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(Tr,Rr){this.media=Rr.media}onMediaDetaching(){this.id3Track&&(clearCurrentCues(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(Tr){const Rr=this.getID3Track(Tr.textTracks);return Rr.mode="hidden",Rr}getID3Track(Tr){if(this.media){for(let Rr=0;Rr<Tr.length;Rr++){const Ar=Tr[Rr];if(Ar.kind==="metadata"&&Ar.label==="id3")return sendAddTrackEvent(Ar,this.media),Ar}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(Tr,Rr){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:Ar,enableID3MetadataCues:Pr}}}=this;if(!Ar&&!Pr)return;const{samples:Lr}=Rr;this.id3Track||(this.id3Track=this.createTrack(this.media));const Mr=getCueClass();for(let Fr=0;Fr<Lr.length;Fr++){const zr=Lr[Fr].type;if(zr===MetadataSchema.emsg&&!Ar||!Pr)continue;const Ur=getID3Frames(Lr[Fr].data);if(Ur){const Vr=Lr[Fr].pts;let Nr=Vr+Lr[Fr].duration;Nr>MAX_CUE_ENDTIME&&(Nr=MAX_CUE_ENDTIME),Nr-Vr<=0&&(Nr=Vr+MIN_CUE_DURATION);for(let jr=0;jr<Ur.length;jr++){const Gr=Ur[jr];if(!isTimeStampFrame(Gr)){this.updateId3CueEnds(Vr,zr);const Wr=new Mr(Vr,Nr,"");Wr.value=Gr,zr&&(Wr.type=zr),this.id3Track.addCue(Wr)}}}}}updateId3CueEnds(Tr,Rr){var Ar;const Pr=(Ar=this.id3Track)==null?void 0:Ar.cues;if(Pr)for(let Lr=Pr.length;Lr--;){const Mr=Pr[Lr];Mr.type===Rr&&Mr.startTime<Tr&&Mr.endTime===MAX_CUE_ENDTIME&&(Mr.endTime=Tr)}}onBufferFlushing(Tr,{startOffset:Rr,endOffset:Ar,type:Pr}){const{id3Track:Lr,hls:Mr}=this;if(!Mr)return;const{config:{enableEmsgMetadataCues:Fr,enableID3MetadataCues:zr}}=Mr;if(Lr&&(Fr||zr)){let Ur;Pr==="audio"?Ur=Vr=>Vr.type===MetadataSchema.audioId3&&zr:Pr==="video"?Ur=Vr=>Vr.type===MetadataSchema.emsg&&Fr:Ur=Vr=>Vr.type===MetadataSchema.audioId3&&zr||Vr.type===MetadataSchema.emsg&&Fr,removeCuesInRange(Lr,Rr,Ar,Ur)}}onLevelUpdated(Tr,{details:Rr}){if(!this.media||!Rr.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:Ar,id3Track:Pr}=this,{dateRanges:Lr}=Rr,Mr=Object.keys(Lr);if(Pr){const Vr=Object.keys(Ar).filter(Nr=>!Mr.includes(Nr));for(let Nr=Vr.length;Nr--;){const Dr=Vr[Nr];Object.keys(Ar[Dr].cues).forEach(jr=>{Pr.removeCue(Ar[Dr].cues[jr])}),delete Ar[Dr]}}const Fr=Rr.fragments[Rr.fragments.length-1];if(Mr.length===0||!isFiniteNumber(Fr==null?void 0:Fr.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const zr=Fr.programDateTime/1e3-Fr.start,Ur=getCueClass();for(let Vr=0;Vr<Mr.length;Vr++){const Nr=Mr[Vr],Dr=Lr[Nr],jr=Ar[Nr],Gr=(jr==null?void 0:jr.cues)||{};let Wr=(jr==null?void 0:jr.durationKnown)||!1;const qr=dateRangeDateToTimelineSeconds(Dr.startDate,zr);let Kr=MAX_CUE_ENDTIME;const Xr=Dr.endDate;if(Xr)Kr=dateRangeDateToTimelineSeconds(Xr,zr),Wr=!0;else if(Dr.endOnNext&&!Wr){const Jr=Mr.reduce((_i,es)=>{const ts=Lr[es];return ts.class===Dr.class&&ts.id!==es&&ts.startDate>Dr.startDate&&_i.push(ts),_i},[]).sort((_i,es)=>_i.startDate.getTime()-es.startDate.getTime())[0];Jr&&(Kr=dateRangeDateToTimelineSeconds(Jr.startDate,zr),Wr=!0)}const Zr=Object.keys(Dr.attr);for(let Jr=0;Jr<Zr.length;Jr++){const _i=Zr[Jr];if(!isDateRangeCueAttribute(_i))continue;let es=Gr[_i];if(es)Wr&&!jr.durationKnown&&(es.endTime=Kr);else{let ts=Dr.attr[_i];es=new Ur(qr,Kr,""),isSCTE35Attribute(_i)&&(ts=hexToArrayBuffer(ts)),es.value={key:_i,data:ts},es.type=MetadataSchema.dateRange,es.id=Nr,this.id3Track.addCue(es),Gr[_i]=es}}Ar[Nr]={cues:Gr,dateRange:Dr,durationKnown:Wr}}}}class LatencyController{constructor(Tr){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=Tr,this.config=Tr.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:Tr,levelDetails:Rr}=this;return Tr.liveMaxLatencyDuration!==void 0?Tr.liveMaxLatencyDuration:Rr?Tr.liveMaxLatencyDurationCount*Rr.targetduration:0}get targetLatency(){const{levelDetails:Tr}=this;if(Tr===null)return null;const{holdBack:Rr,partHoldBack:Ar,targetduration:Pr}=Tr,{liveSyncDuration:Lr,liveSyncDurationCount:Mr,lowLatencyMode:Fr}=this.config,zr=this.hls.userConfig;let Ur=Fr&&Ar||Rr;(zr.liveSyncDuration||zr.liveSyncDurationCount||Ur===0)&&(Ur=Lr!==void 0?Lr:Mr*Pr);const Vr=Pr,Nr=1;return Ur+Math.min(this.stallCount*Nr,Vr)}get liveSyncPosition(){const Tr=this.estimateLiveEdge(),Rr=this.targetLatency,Ar=this.levelDetails;if(Tr===null||Rr===null||Ar===null)return null;const Pr=Ar.edge,Lr=Tr-Rr-this.edgeStalled,Mr=Pr-Ar.totalduration,Fr=Pr-(this.config.lowLatencyMode&&Ar.partTarget||Ar.targetduration);return Math.min(Math.max(Mr,Lr),Fr)}get drift(){const{levelDetails:Tr}=this;return Tr===null?1:Tr.drift}get edgeStalled(){const{levelDetails:Tr}=this;if(Tr===null)return 0;const Rr=(this.config.lowLatencyMode&&Tr.partTarget||Tr.targetduration)*3;return Math.max(Tr.age-Rr,0)}get forwardBufferLength(){const{media:Tr,levelDetails:Rr}=this;if(!Tr||!Rr)return 0;const Ar=Tr.buffered.length;return(Ar?Tr.buffered.end(Ar-1):Rr.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(Events.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(Events.ERROR,this.onError,this)}onMediaAttached(Tr,Rr){this.media=Rr.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(Tr,{details:Rr}){this.levelDetails=Rr,Rr.advanced&&this.timeupdate(),!Rr.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(Tr,Rr){var Ar;Rr.details===ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,(Ar=this.levelDetails)!=null&&Ar.live&&logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:Tr,levelDetails:Rr}=this;if(!Tr||!Rr)return;this.currentTime=Tr.currentTime;const Ar=this.computeLatency();if(Ar===null)return;this._latency=Ar;const{lowLatencyMode:Pr,maxLiveSyncPlaybackRate:Lr}=this.config;if(!Pr||Lr===1)return;const Mr=this.targetLatency;if(Mr===null)return;const Fr=Ar-Mr,zr=Math.min(this.maxLatency,Mr+Rr.targetduration),Ur=Fr<zr;if(Rr.live&&Ur&&Fr>.05&&this.forwardBufferLength>1){const Vr=Math.min(2,Math.max(1,Lr)),Nr=Math.round(2/(1+Math.exp(-.75*Fr-this.edgeStalled))*20)/20;Tr.playbackRate=Math.min(Vr,Math.max(1,Nr))}else Tr.playbackRate!==1&&Tr.playbackRate!==0&&(Tr.playbackRate=1)}estimateLiveEdge(){const{levelDetails:Tr}=this;return Tr===null?null:Tr.edge+Tr.age}computeLatency(){const Tr=this.estimateLiveEdge();return Tr===null?null:Tr-this.currentTime}}const HdcpLevels=["NONE","TYPE-0","TYPE-1",null];var HlsSkip={No:"",Yes:"YES",v2:"v2"};function getSkipValue(_r,Tr){const{canSkipUntil:Rr,canSkipDateRanges:Ar,endSN:Pr}=_r,Lr=Tr!==void 0?Tr-Pr:0;return Rr&&Lr<Rr?Ar?HlsSkip.v2:HlsSkip.Yes:HlsSkip.No}class HlsUrlParameters{constructor(Tr,Rr,Ar){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=Tr,this.part=Rr,this.skip=Ar}addDirectives(Tr){const Rr=new self.URL(Tr);return this.msn!==void 0&&Rr.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&Rr.searchParams.set("_HLS_part",this.part.toString()),this.skip&&Rr.searchParams.set("_HLS_skip",this.skip),Rr.href}}class Level{constructor(Tr){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[Tr.url],this._attrs=[Tr.attrs],this.bitrate=Tr.bitrate,Tr.details&&(this.details=Tr.details),this.id=Tr.id||0,this.name=Tr.name,this.width=Tr.width||0,this.height=Tr.height||0,this.audioCodec=Tr.audioCodec,this.videoCodec=Tr.videoCodec,this.unknownCodecs=Tr.unknownCodecs,this.codecSet=[Tr.videoCodec,Tr.audioCodec].filter(Rr=>Rr).join(",").replace(/\.[^.,]+/g,"")}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get attrs(){return this._attrs[this._urlId]}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get uri(){return this.url[this._urlId]||""}get urlId(){return this._urlId}set urlId(Tr){const Rr=Tr%this.url.length;this._urlId!==Rr&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=Rr)}get audioGroupId(){var Tr;return(Tr=this.audioGroupIds)==null?void 0:Tr[this.urlId]}get textGroupId(){var Tr;return(Tr=this.textGroupIds)==null?void 0:Tr[this.urlId]}addFallback(Tr){this.url.push(Tr.url),this._attrs.push(Tr.attrs)}}function updateFromToPTS(_r,Tr){const Rr=Tr.startPTS;if(isFiniteNumber(Rr)){let Ar=0,Pr;Tr.sn>_r.sn?(Ar=Rr-_r.start,Pr=_r):(Ar=_r.start-Rr,Pr=Tr),Pr.duration!==Ar&&(Pr.duration=Ar)}else Tr.sn>_r.sn?_r.cc===Tr.cc&&_r.minEndPTS?Tr.start=_r.start+(_r.minEndPTS-_r.start):Tr.start=_r.start+_r.duration:Tr.start=Math.max(_r.start-Tr.duration,0)}function updateFragPTSDTS(_r,Tr,Rr,Ar,Pr,Lr){Ar-Rr<=0&&(logger.warn("Fragment should have a positive duration",Tr),Ar=Rr+Tr.duration,Lr=Pr+Tr.duration);let Fr=Rr,zr=Ar;const Ur=Tr.startPTS,Vr=Tr.endPTS;if(isFiniteNumber(Ur)){const qr=Math.abs(Ur-Rr);isFiniteNumber(Tr.deltaPTS)?Tr.deltaPTS=Math.max(qr,Tr.deltaPTS):Tr.deltaPTS=qr,Fr=Math.max(Rr,Ur),Rr=Math.min(Rr,Ur),Pr=Math.min(Pr,Tr.startDTS),zr=Math.min(Ar,Vr),Ar=Math.max(Ar,Vr),Lr=Math.max(Lr,Tr.endDTS)}const Nr=Rr-Tr.start;Tr.start!==0&&(Tr.start=Rr),Tr.duration=Ar-Tr.start,Tr.startPTS=Rr,Tr.maxStartPTS=Fr,Tr.startDTS=Pr,Tr.endPTS=Ar,Tr.minEndPTS=zr,Tr.endDTS=Lr;const Dr=Tr.sn;if(!_r||Dr<_r.startSN||Dr>_r.endSN)return 0;let jr;const Gr=Dr-_r.startSN,Wr=_r.fragments;for(Wr[Gr]=Tr,jr=Gr;jr>0;jr--)updateFromToPTS(Wr[jr],Wr[jr-1]);for(jr=Gr;jr<Wr.length-1;jr++)updateFromToPTS(Wr[jr],Wr[jr+1]);return _r.fragmentHint&&updateFromToPTS(Wr[Wr.length-1],_r.fragmentHint),_r.PTSKnown=_r.alignedSliding=!0,Nr}function mergeDetails(_r,Tr){let Rr=null;const Ar=_r.fragments;for(let zr=Ar.length-1;zr>=0;zr--){const Ur=Ar[zr].initSegment;if(Ur){Rr=Ur;break}}_r.fragmentHint&&delete _r.fragmentHint.endPTS;let Pr=0,Lr;if(mapFragmentIntersection(_r,Tr,(zr,Ur)=>{zr.relurl&&(Pr=zr.cc-Ur.cc),isFiniteNumber(zr.startPTS)&&isFiniteNumber(zr.endPTS)&&(Ur.start=Ur.startPTS=zr.startPTS,Ur.startDTS=zr.startDTS,Ur.maxStartPTS=zr.maxStartPTS,Ur.endPTS=zr.endPTS,Ur.endDTS=zr.endDTS,Ur.minEndPTS=zr.minEndPTS,Ur.duration=zr.endPTS-zr.startPTS,Ur.duration&&(Lr=Ur),Tr.PTSKnown=Tr.alignedSliding=!0),Ur.elementaryStreams=zr.elementaryStreams,Ur.loader=zr.loader,Ur.stats=zr.stats,Ur.urlId=zr.urlId,zr.initSegment&&(Ur.initSegment=zr.initSegment,Rr=zr.initSegment)}),Rr&&(Tr.fragmentHint?Tr.fragments.concat(Tr.fragmentHint):Tr.fragments).forEach(Ur=>{var Vr;(!Ur.initSegment||Ur.initSegment.relurl===((Vr=Rr)==null?void 0:Vr.relurl))&&(Ur.initSegment=Rr)}),Tr.skippedSegments)if(Tr.deltaUpdateFailed=Tr.fragments.some(zr=>!zr),Tr.deltaUpdateFailed){logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let zr=Tr.skippedSegments;zr--;)Tr.fragments.shift();Tr.startSN=Tr.fragments[0].sn,Tr.startCC=Tr.fragments[0].cc}else Tr.canSkipDateRanges&&(Tr.dateRanges=mergeDateRanges(_r.dateRanges,Tr.dateRanges,Tr.recentlyRemovedDateranges));const Mr=Tr.fragments;if(Pr){logger.warn("discontinuity sliding from playlist, take drift into account");for(let zr=0;zr<Mr.length;zr++)Mr[zr].cc+=Pr}Tr.skippedSegments&&(Tr.startCC=Tr.fragments[0].cc),mapPartIntersection(_r.partList,Tr.partList,(zr,Ur)=>{Ur.elementaryStreams=zr.elementaryStreams,Ur.stats=zr.stats}),Lr?updateFragPTSDTS(Tr,Lr,Lr.startPTS,Lr.endPTS,Lr.startDTS,Lr.endDTS):adjustSliding(_r,Tr),Mr.length&&(Tr.totalduration=Tr.edge-Mr[0].start),Tr.driftStartTime=_r.driftStartTime,Tr.driftStart=_r.driftStart;const Fr=Tr.advancedDateTime;if(Tr.advanced&&Fr){const zr=Tr.edge;Tr.driftStart||(Tr.driftStartTime=Fr,Tr.driftStart=zr),Tr.driftEndTime=Fr,Tr.driftEnd=zr}else Tr.driftEndTime=_r.driftEndTime,Tr.driftEnd=_r.driftEnd,Tr.advancedDateTime=_r.advancedDateTime}function mergeDateRanges(_r,Tr,Rr){const Ar=_extends({},_r);return Rr&&Rr.forEach(Pr=>{delete Ar[Pr]}),Object.keys(Tr).forEach(Pr=>{const Lr=new DateRange(Tr[Pr].attr,Ar[Pr]);Lr.isValid?Ar[Pr]=Lr:logger.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(Tr[Pr].attr)}"`)}),Ar}function mapPartIntersection(_r,Tr,Rr){if(_r&&Tr){let Ar=0;for(let Pr=0,Lr=_r.length;Pr<=Lr;Pr++){const Mr=_r[Pr],Fr=Tr[Pr+Ar];Mr&&Fr&&Mr.index===Fr.index&&Mr.fragment.sn===Fr.fragment.sn?Rr(Mr,Fr):Ar--}}}function mapFragmentIntersection(_r,Tr,Rr){const Ar=Tr.skippedSegments,Pr=Math.max(_r.startSN,Tr.startSN)-Tr.startSN,Lr=(_r.fragmentHint?1:0)+(Ar?Tr.endSN:Math.min(_r.endSN,Tr.endSN))-Tr.startSN,Mr=Tr.startSN-_r.startSN,Fr=Tr.fragmentHint?Tr.fragments.concat(Tr.fragmentHint):Tr.fragments,zr=_r.fragmentHint?_r.fragments.concat(_r.fragmentHint):_r.fragments;for(let Ur=Pr;Ur<=Lr;Ur++){const Vr=zr[Mr+Ur];let Nr=Fr[Ur];Ar&&!Nr&&Ur<Ar&&(Nr=Tr.fragments[Ur]=Vr),Vr&&Nr&&Rr(Vr,Nr)}}function adjustSliding(_r,Tr){const Rr=Tr.startSN+Tr.skippedSegments-_r.startSN,Ar=_r.fragments;Rr<0||Rr>=Ar.length||addSliding(Tr,Ar[Rr].start)}function addSliding(_r,Tr){if(Tr){const Rr=_r.fragments;for(let Ar=_r.skippedSegments;Ar<Rr.length;Ar++)Rr[Ar].start+=Tr;_r.fragmentHint&&(_r.fragmentHint.start+=Tr)}}function computeReloadInterval(_r,Tr=1/0){let Rr=1e3*_r.targetduration;if(_r.updated){const Ar=_r.fragments,Pr=4;if(Ar.length&&Rr*Pr>Tr){const Lr=Ar[Ar.length-1].duration*1e3;Lr<Rr&&(Rr=Lr)}}else Rr/=2;return Math.round(Rr)}function getFragmentWithSN(_r,Tr,Rr){if(!(_r!=null&&_r.details))return null;const Ar=_r.details;let Pr=Ar.fragments[Tr-Ar.startSN];return Pr||(Pr=Ar.fragmentHint,Pr&&Pr.sn===Tr)?Pr:Tr<Ar.startSN&&Rr&&Rr.sn===Tr?Rr:null}function getPartWith(_r,Tr,Rr){var Ar;return _r!=null&&_r.details?findPart((Ar=_r.details)==null?void 0:Ar.partList,Tr,Rr):null}function findPart(_r,Tr,Rr){if(_r)for(let Ar=_r.length;Ar--;){const Pr=_r[Ar];if(Pr.index===Rr&&Pr.fragment.sn===Tr)return Pr}return null}function isTimeoutError(_r){switch(_r.details){case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_TIMEOUT:case ErrorDetails.LEVEL_LOAD_TIMEOUT:case ErrorDetails.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function getRetryConfig(_r,Tr){const Rr=isTimeoutError(Tr);return _r.default[`${Rr?"timeout":"error"}Retry`]}function getRetryDelay(_r,Tr){const Rr=_r.backoff==="linear"?1:Math.pow(2,Tr);return Math.min(Rr*_r.retryDelayMs,_r.maxRetryDelayMs)}function getLoaderConfigWithoutReties(_r){return _objectSpread2(_objectSpread2({},_r),{errorRetry:null,timeoutRetry:null})}function shouldRetry(_r,Tr,Rr,Ar){return!!_r&&Tr<_r.maxNumRetry&&(retryForHttpStatus(Ar)||!!Rr)}function retryForHttpStatus(_r){return _r===0&&navigator.onLine===!1||!!_r&&(_r<400||_r>499)}const BinarySearch={search:function(_r,Tr){let Rr=0,Ar=_r.length-1,Pr=null,Lr=null;for(;Rr<=Ar;){Pr=(Rr+Ar)/2|0,Lr=_r[Pr];const Mr=Tr(Lr);if(Mr>0)Rr=Pr+1;else if(Mr<0)Ar=Pr-1;else return Lr}return null}};function findFragmentByPDT(_r,Tr,Rr){if(Tr===null||!Array.isArray(_r)||!_r.length||!isFiniteNumber(Tr))return null;const Ar=_r[0].programDateTime;if(Tr<(Ar||0))return null;const Pr=_r[_r.length-1].endProgramDateTime;if(Tr>=(Pr||0))return null;Rr=Rr||0;for(let Lr=0;Lr<_r.length;++Lr){const Mr=_r[Lr];if(pdtWithinToleranceTest(Tr,Rr,Mr))return Mr}return null}function findFragmentByPTS(_r,Tr,Rr=0,Ar=0){let Pr=null;if(_r?Pr=Tr[_r.sn-Tr[0].sn+1]||null:Rr===0&&Tr[0].start===0&&(Pr=Tr[0]),Pr&&fragmentWithinToleranceTest(Rr,Ar,Pr)===0)return Pr;const Lr=BinarySearch.search(Tr,fragmentWithinToleranceTest.bind(null,Rr,Ar));return Lr&&(Lr!==_r||!Pr)?Lr:Pr}function fragmentWithinToleranceTest(_r=0,Tr=0,Rr){if(Rr.start<=_r&&Rr.start+Rr.duration>_r)return 0;const Ar=Math.min(Tr,Rr.duration+(Rr.deltaPTS?Rr.deltaPTS:0));return Rr.start+Rr.duration-Ar<=_r?1:Rr.start-Ar>_r&&Rr.start?-1:0}function pdtWithinToleranceTest(_r,Tr,Rr){const Ar=Math.min(Tr,Rr.duration+(Rr.deltaPTS?Rr.deltaPTS:0))*1e3;return(Rr.endProgramDateTime||0)-Ar>_r}function findFragWithCC(_r,Tr){return BinarySearch.search(_r,Rr=>Rr.cc<Tr?1:Rr.cc>Tr?-1:0)}const RENDITION_PENALTY_DURATION_MS=3e5;var NetworkErrorAction={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},ErrorActionFlags={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class ErrorController{constructor(Tr){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=Tr,this.log=logger.log.bind(logger,"[info]:"),this.warn=logger.warn.bind(logger,"[warning]:"),this.error=logger.error.bind(logger,"[error]:"),this.registerListeners()}registerListeners(){const Tr=this.hls;Tr.on(Events.ERROR,this.onError,this),Tr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const Tr=this.hls;Tr&&(Tr.off(Events.ERROR,this.onError,this),Tr.off(Events.ERROR,this.onErrorOut,this),Tr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(Tr){this.playlistError=0}stopLoad(){}getVariantLevelIndex(Tr){return(Tr==null?void 0:Tr.type)===PlaylistLevelType.MAIN?Tr.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(Tr,Rr){var Ar,Pr;if(Rr.fatal)return;const Lr=this.hls,Mr=Rr.context;switch(Rr.details){case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:Rr.errorAction=this.getFragRetryOrSwitchAction(Rr);return;case ErrorDetails.FRAG_PARSING_ERROR:if((Ar=Rr.frag)!=null&&Ar.gap){Rr.errorAction={action:NetworkErrorAction.DoNothing,flags:ErrorActionFlags.None};return}case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_DECRYPT_ERROR:{Rr.errorAction=this.getFragRetryOrSwitchAction(Rr),Rr.errorAction.action=NetworkErrorAction.SendAlternateToPenaltyBox;return}case ErrorDetails.LEVEL_EMPTY_ERROR:case ErrorDetails.LEVEL_PARSING_ERROR:{var Fr,zr;const Ur=Rr.parent===PlaylistLevelType.MAIN?Rr.level:Lr.loadLevel;Rr.details===ErrorDetails.LEVEL_EMPTY_ERROR&&((Fr=Rr.context)!=null&&(zr=Fr.levelDetails)!=null&&zr.live)?Rr.errorAction=this.getPlaylistRetryOrSwitchAction(Rr,Ur):(Rr.levelRetry=!1,Rr.errorAction=this.getLevelSwitchAction(Rr,Ur))}return;case ErrorDetails.LEVEL_LOAD_ERROR:case ErrorDetails.LEVEL_LOAD_TIMEOUT:typeof(Mr==null?void 0:Mr.level)=="number"&&(Rr.errorAction=this.getPlaylistRetryOrSwitchAction(Rr,Mr.level));return;case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case ErrorDetails.SUBTITLE_LOAD_ERROR:case ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:if(Mr){const Ur=Lr.levels[Lr.loadLevel];if(Ur&&(Mr.type===PlaylistContextType.AUDIO_TRACK&&Mr.groupId===Ur.audioGroupId||Mr.type===PlaylistContextType.SUBTITLE_TRACK&&Mr.groupId===Ur.textGroupId)){Rr.errorAction=this.getPlaylistRetryOrSwitchAction(Rr,Lr.loadLevel),Rr.errorAction.action=NetworkErrorAction.SendAlternateToPenaltyBox,Rr.errorAction.flags=ErrorActionFlags.MoveAllAlternatesMatchingHost;return}}return;case ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const Ur=Lr.levels[Lr.loadLevel],Vr=Ur==null?void 0:Ur.attrs["HDCP-LEVEL"];Vr&&(Rr.errorAction={action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.MoveAllAlternatesMatchingHDCP,hdcpLevel:Vr})}return;case ErrorDetails.BUFFER_ADD_CODEC_ERROR:case ErrorDetails.REMUX_ALLOC_ERROR:Rr.errorAction=this.getLevelSwitchAction(Rr,(Pr=Rr.level)!=null?Pr:Lr.loadLevel);return;case ErrorDetails.INTERNAL_EXCEPTION:case ErrorDetails.BUFFER_APPENDING_ERROR:case ErrorDetails.BUFFER_APPEND_ERROR:case ErrorDetails.BUFFER_FULL_ERROR:case ErrorDetails.LEVEL_SWITCH_ERROR:case ErrorDetails.BUFFER_STALLED_ERROR:case ErrorDetails.BUFFER_SEEK_OVER_HOLE:case ErrorDetails.BUFFER_NUDGE_ON_STALL:Rr.errorAction={action:NetworkErrorAction.DoNothing,flags:ErrorActionFlags.None};return}if(Rr.type===ErrorTypes.KEY_SYSTEM_ERROR){const Ur=this.getVariantLevelIndex(Rr.frag);Rr.levelRetry=!1,Rr.errorAction=this.getLevelSwitchAction(Rr,Ur);return}}getPlaylistRetryOrSwitchAction(Tr,Rr){var Ar;const Pr=this.hls,Lr=getRetryConfig(Pr.config.playlistLoadPolicy,Tr),Mr=this.playlistError++,Fr=(Ar=Tr.response)==null?void 0:Ar.code;if(shouldRetry(Lr,Mr,isTimeoutError(Tr),Fr))return{action:NetworkErrorAction.RetryRequest,flags:ErrorActionFlags.None,retryConfig:Lr,retryCount:Mr};const Ur=this.getLevelSwitchAction(Tr,Rr);return Lr&&(Ur.retryConfig=Lr,Ur.retryCount=Mr),Ur}getFragRetryOrSwitchAction(Tr){const Rr=this.hls,Ar=this.getVariantLevelIndex(Tr.frag),Pr=Rr.levels[Ar],{fragLoadPolicy:Lr,keyLoadPolicy:Mr}=Rr.config,Fr=getRetryConfig(Tr.details.startsWith("key")?Mr:Lr,Tr),zr=Rr.levels.reduce((Nr,Dr)=>Nr+Dr.fragmentError,0);if(Pr){var Ur;Tr.details!==ErrorDetails.FRAG_GAP&&Pr.fragmentError++;const Nr=(Ur=Tr.response)==null?void 0:Ur.code;if(shouldRetry(Fr,zr,isTimeoutError(Tr),Nr))return{action:NetworkErrorAction.RetryRequest,flags:ErrorActionFlags.None,retryConfig:Fr,retryCount:zr}}const Vr=this.getLevelSwitchAction(Tr,Ar);return Fr&&(Vr.retryConfig=Fr,Vr.retryCount=zr),Vr}getLevelSwitchAction(Tr,Rr){const Ar=this.hls;Rr==null&&(Rr=Ar.loadLevel);const Pr=this.hls.levels[Rr];if(Pr&&(Pr.loadError++,Ar.autoLevelEnabled)){var Lr,Mr;let Fr=-1;const{levels:zr,loadLevel:Ur,minAutoLevel:Vr,maxAutoLevel:Nr}=Ar,Dr=(Lr=Tr.frag)==null?void 0:Lr.type,{type:jr,groupId:Gr}=(Mr=Tr.context)!=null?Mr:{};for(let Wr=zr.length;Wr--;){const qr=(Wr+Ur)%zr.length;if(qr!==Ur&&qr>=Vr&&qr<=Nr&&zr[qr].loadError===0){const Kr=zr[qr];if(Tr.details===ErrorDetails.FRAG_GAP&&Tr.frag){const Xr=zr[qr].details;if(Xr){const Zr=findFragmentByPTS(Tr.frag,Xr.fragments,Tr.frag.start);if(Zr!=null&&Zr.gap)continue}}else{if(jr===PlaylistContextType.AUDIO_TRACK&&Gr===Kr.audioGroupId||jr===PlaylistContextType.SUBTITLE_TRACK&&Gr===Kr.textGroupId)continue;if(Dr===PlaylistLevelType.AUDIO&&Pr.audioGroupId===Kr.audioGroupId||Dr===PlaylistLevelType.SUBTITLE&&Pr.textGroupId===Kr.textGroupId)continue}Fr=qr;break}}if(Fr>-1&&Ar.loadLevel!==Fr)return Tr.levelRetry=!0,this.playlistError=0,{action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.None,nextAutoLevel:Fr}}return{action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.MoveAllAlternatesMatchingHost}}onErrorOut(Tr,Rr){var Ar;switch((Ar=Rr.errorAction)==null?void 0:Ar.action){case NetworkErrorAction.DoNothing:break;case NetworkErrorAction.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(Rr),!Rr.errorAction.resolved&&Rr.details!==ErrorDetails.FRAG_GAP&&(Rr.fatal=!0);break}if(Rr.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(Tr){const Rr=this.hls,Ar=Tr.errorAction;if(!Ar)return;const{flags:Pr,hdcpLevel:Lr,nextAutoLevel:Mr}=Ar;switch(Pr){case ErrorActionFlags.None:this.switchLevel(Tr,Mr);break;case ErrorActionFlags.MoveAllAlternatesMatchingHost:Ar.resolved||(Ar.resolved=this.redundantFailover(Tr));break;case ErrorActionFlags.MoveAllAlternatesMatchingHDCP:Lr&&(Rr.maxHdcpLevel=HdcpLevels[HdcpLevels.indexOf(Lr)-1],Ar.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${Rr.maxHdcpLevel}" or lower`);break}Ar.resolved||this.switchLevel(Tr,Mr)}switchLevel(Tr,Rr){Rr!==void 0&&Tr.errorAction&&(this.warn(`switching to level ${Rr} after ${Tr.details}`),this.hls.nextAutoLevel=Rr,Tr.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}redundantFailover(Tr){const{hls:Rr,penalizedRenditions:Ar}=this,Pr=Tr.parent===PlaylistLevelType.MAIN?Tr.level:Rr.loadLevel,Lr=Rr.levels[Pr],Mr=Lr.url.length,Fr=Tr.frag?Tr.frag.urlId:Lr.urlId;Lr.urlId===Fr&&(!Tr.frag||Lr.details)&&this.penalizeRendition(Lr,Tr);for(let zr=1;zr<Mr;zr++){const Ur=(Fr+zr)%Mr,Vr=Ar[Ur];if(!Vr||checkExpired(Vr,Tr,Ar[Fr]))return this.warn(`Switching to Redundant Stream ${Ur+1}/${Mr}: "${Lr.url[Ur]}" after ${Tr.details}`),this.playlistError=0,Rr.levels.forEach(Nr=>{Nr.urlId=Ur}),Rr.nextLoadLevel=Pr,!0}return!1}penalizeRendition(Tr,Rr){const{penalizedRenditions:Ar}=this,Pr=Ar[Tr.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};Pr.lastErrorPerfMs=performance.now(),Pr.errors.push(Rr),Pr.details=Tr.details,Ar[Tr.urlId]=Pr}}function checkExpired(_r,Tr,Rr){if(performance.now()-_r.lastErrorPerfMs>RENDITION_PENALTY_DURATION_MS)return!0;const Ar=_r.details;if(Tr.details===ErrorDetails.FRAG_GAP&&Ar&&Tr.frag){const Pr=Tr.frag.start,Lr=findFragmentByPTS(null,Ar.fragments,Pr);if(Lr&&!Lr.gap)return!0}if(Rr&&_r.errors.length<Rr.errors.length){const Pr=_r.errors[_r.errors.length-1];if(Ar&&Pr.frag&&Tr.frag&&Math.abs(Pr.frag.start-Tr.frag.start)>Ar.targetduration*3)return!0}return!1}class BasePlaylistController{constructor(Tr,Rr){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=logger.log.bind(logger,`${Rr}:`),this.warn=logger.warn.bind(logger,`${Rr}:`),this.hls=Tr}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){clearTimeout(this.timer),this.timer=-1}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(Tr,Rr){const Ar=Rr==null?void 0:Rr.renditionReports;if(Ar){let Pr=-1;for(let Lr=0;Lr<Ar.length;Lr++){const Mr=Ar[Lr];let Fr;try{Fr=new self.URL(Mr.URI,Rr.url).href}catch(zr){logger.warn(`Could not construct new URL for Rendition Report: ${zr}`),Fr=Mr.URI||""}if(Fr===Tr){Pr=Lr;break}else Fr===Tr.substring(0,Fr.length)&&(Pr=Lr)}if(Pr!==-1){const Lr=Ar[Pr],Mr=parseInt(Lr["LAST-MSN"])||(Rr==null?void 0:Rr.lastPartSn);let Fr=parseInt(Lr["LAST-PART"])||(Rr==null?void 0:Rr.lastPartIndex);if(this.hls.config.lowLatencyMode){const zr=Math.min(Rr.age-Rr.partTarget,Rr.targetduration);Fr>=0&&zr>Rr.partTarget&&(Fr+=1)}return new HlsUrlParameters(Mr,Fr>=0?Fr:void 0,HlsSkip.No)}}}loadPlaylist(Tr){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(Tr){return this.canLoad&&!!Tr&&!!Tr.url&&(!Tr.details||Tr.details.live)}shouldReloadPlaylist(Tr){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(Tr)}playlistLoaded(Tr,Rr,Ar){const{details:Pr,stats:Lr}=Rr,Mr=self.performance.now(),Fr=Lr.loading.first?Math.max(0,Mr-Lr.loading.first):0;if(Pr.advancedDateTime=Date.now()-Fr,Pr.live||Ar!=null&&Ar.live){if(Pr.reloaded(Ar),Ar&&this.log(`live playlist ${Tr} ${Pr.advanced?"REFRESHED "+Pr.lastPartSn+"-"+Pr.lastPartIndex:Pr.updated?"UPDATED":"MISSED"}`),Ar&&Pr.fragments.length>0&&mergeDetails(Ar,Pr),!this.canLoad||!Pr.live)return;let zr,Ur,Vr;if(Pr.canBlockReload&&Pr.endSN&&Pr.advanced){const qr=this.hls.config.lowLatencyMode,Kr=Pr.lastPartSn,Xr=Pr.endSN,Zr=Pr.lastPartIndex,Jr=Zr!==-1,_i=Kr===Xr,es=qr?0:Zr;Jr?(Ur=_i?Xr+1:Kr,Vr=_i?es:Zr+1):Ur=Xr+1;const ts=Pr.age,rs=ts+Pr.ageHeader;let ns=Math.min(rs-Pr.partTarget,Pr.targetduration*1.5);if(ns>0){if(Ar&&ns>Ar.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${Ar.tuneInGoal} to: ${ns} with playlist age: ${Pr.age}`),ns=0;else{const as=Math.floor(ns/Pr.targetduration);if(Ur+=as,Vr!==void 0){const ls=Math.round(ns%Pr.targetduration/Pr.partTarget);Vr+=ls}this.log(`CDN Tune-in age: ${Pr.ageHeader}s last advanced ${ts.toFixed(2)}s goal: ${ns} skip sn ${as} to part ${Vr}`)}Pr.tuneInGoal=ns}if(zr=this.getDeliveryDirectives(Pr,Rr.deliveryDirectives,Ur,Vr),qr||!_i){this.loadPlaylist(zr);return}}else(Pr.canBlockReload||Pr.canSkipUntil)&&(zr=this.getDeliveryDirectives(Pr,Rr.deliveryDirectives,Ur,Vr));const Nr=this.hls.mainForwardBufferInfo,Dr=Nr?Nr.end-Nr.len:0,jr=(Pr.edge-Dr)*1e3,Gr=computeReloadInterval(Pr,jr);Pr.updated&&Mr>this.requestScheduled+Gr&&(this.requestScheduled=Lr.loading.start),Ur!==void 0&&Pr.canBlockReload?this.requestScheduled=Lr.loading.first+Gr-(Pr.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+Gr<Mr?this.requestScheduled=Mr:this.requestScheduled-Mr<=0&&(this.requestScheduled+=Gr);let Wr=this.requestScheduled-Mr;Wr=Math.max(0,Wr),this.log(`reload live playlist ${Tr} in ${Math.round(Wr)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(zr),Wr)}else this.clearTimer()}getDeliveryDirectives(Tr,Rr,Ar,Pr){let Lr=getSkipValue(Tr,Ar);return Rr!=null&&Rr.skip&&Tr.deltaUpdateFailed&&(Ar=Rr.msn,Pr=Rr.part,Lr=HlsSkip.No),new HlsUrlParameters(Ar,Pr,Lr)}checkRetry(Tr){const Rr=Tr.details,Ar=isTimeoutError(Tr),Pr=Tr.errorAction,{action:Lr,retryCount:Mr=0,retryConfig:Fr}=Pr||{},zr=!!Pr&&!!Fr&&(Lr===NetworkErrorAction.RetryRequest||!Pr.resolved&&Lr===NetworkErrorAction.SendAlternateToPenaltyBox);if(zr){var Ur;if(this.requestScheduled=-1,Mr>=Fr.maxNumRetry)return!1;if(Ar&&(Ur=Tr.context)!=null&&Ur.deliveryDirectives)this.warn(`Retrying playlist loading ${Mr+1}/${Fr.maxNumRetry} after "${Rr}" without delivery-directives`),this.loadPlaylist();else{const Vr=getRetryDelay(Fr,Mr);this.timer=self.setTimeout(()=>this.loadPlaylist(),Vr),this.warn(`Retrying playlist loading ${Mr+1}/${Fr.maxNumRetry} after "${Rr}" in ${Vr}ms`)}Tr.levelRetry=!0,Pr.resolved=!0}return zr}}let chromeOrFirefox;class LevelController extends BasePlaylistController{constructor(Tr,Rr){super(Tr,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=Rr,this._registerListeners()}_registerListeners(){const{hls:Tr}=this;Tr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),Tr.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),Tr.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Tr.on(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),Tr.on(Events.FRAG_LOADED,this.onFragLoaded,this),Tr.on(Events.ERROR,this.onError,this)}_unregisterListeners(){const{hls:Tr}=this;Tr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),Tr.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),Tr.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Tr.off(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),Tr.off(Events.FRAG_LOADED,this.onFragLoaded,this),Tr.off(Events.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}startLoad(){this._levels.forEach(Rr=>{Rr.loadError=0,Rr.fragmentError=0}),super.startLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]}onManifestLoading(Tr,Rr){this.resetLevels()}onManifestLoaded(Tr,Rr){const Ar=[],Pr={};let Lr;Rr.levels.forEach(Mr=>{var Fr;const zr=Mr.attrs;((Fr=Mr.audioCodec)==null?void 0:Fr.indexOf("mp4a.40.34"))!==-1&&(chromeOrFirefox||(chromeOrFirefox=/chrome|firefox/i.test(navigator.userAgent)),chromeOrFirefox&&(Mr.audioCodec=void 0));const{AUDIO:Ur,CODECS:Vr,"FRAME-RATE":Nr,"PATHWAY-ID":Dr,RESOLUTION:jr,SUBTITLES:Gr}=zr,qr=`${`${Dr||"."}-`}${Mr.bitrate}-${jr}-${Nr}-${Vr}`;Lr=Pr[qr],Lr?Lr.addFallback(Mr):(Lr=new Level(Mr),Pr[qr]=Lr,Ar.push(Lr)),addGroupId(Lr,"audio",Ur),addGroupId(Lr,"text",Gr)}),this.filterAndSortMediaOptions(Ar,Rr)}filterAndSortMediaOptions(Tr,Rr){let Ar=[],Pr=[],Lr=!1,Mr=!1,Fr=!1,zr=Tr.filter(({audioCodec:jr,videoCodec:Gr,width:Wr,height:qr,unknownCodecs:Kr})=>(Lr||(Lr=!!(Wr&&qr)),Mr||(Mr=!!Gr),Fr||(Fr=!!jr),!(Kr!=null&&Kr.length)&&(!jr||isCodecSupportedInMp4(jr,"audio"))&&(!Gr||isCodecSupportedInMp4(Gr,"video"))));if((Lr||Mr)&&Fr&&(zr=zr.filter(({videoCodec:jr,width:Gr,height:Wr})=>!!jr||!!(Gr&&Wr))),zr.length===0){Promise.resolve().then(()=>{if(this.hls){const jr=new Error("no level with compatible codecs found in manifest");this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:Rr.url,error:jr,reason:jr.message})}});return}Rr.audioTracks&&(Ar=Rr.audioTracks.filter(jr=>!jr.audioCodec||isCodecSupportedInMp4(jr.audioCodec,"audio")),assignTrackIdsByGroup(Ar)),Rr.subtitles&&(Pr=Rr.subtitles,assignTrackIdsByGroup(Pr));const Ur=zr.slice(0);zr.sort((jr,Gr)=>jr.attrs["HDCP-LEVEL"]!==Gr.attrs["HDCP-LEVEL"]?(jr.attrs["HDCP-LEVEL"]||"")>(Gr.attrs["HDCP-LEVEL"]||"")?1:-1:jr.bitrate!==Gr.bitrate?jr.bitrate-Gr.bitrate:jr.attrs["FRAME-RATE"]!==Gr.attrs["FRAME-RATE"]?jr.attrs.decimalFloatingPoint("FRAME-RATE")-Gr.attrs.decimalFloatingPoint("FRAME-RATE"):jr.attrs.SCORE!==Gr.attrs.SCORE?jr.attrs.decimalFloatingPoint("SCORE")-Gr.attrs.decimalFloatingPoint("SCORE"):Lr&&jr.height!==Gr.height?jr.height-Gr.height:0);let Vr=Ur[0];if(this.steering&&(zr=this.steering.filterParsedLevels(zr),zr.length!==Ur.length)){for(let jr=0;jr<Ur.length;jr++)if(Ur[jr].pathwayId===zr[0].pathwayId){Vr=Ur[jr];break}}this._levels=zr;for(let jr=0;jr<zr.length;jr++)if(zr[jr]===Vr){this._firstLevel=jr,this.log(`manifest loaded, ${zr.length} level(s) found, first bitrate: ${Vr.bitrate}`);break}const Nr=Fr&&!Mr,Dr={levels:zr,audioTracks:Ar,subtitleTracks:Pr,sessionData:Rr.sessionData,sessionKeys:Rr.sessionKeys,firstLevel:this._firstLevel,stats:Rr.stats,audio:Fr,video:Mr,altAudio:!Nr&&Ar.some(jr=>!!jr.url)};this.hls.trigger(Events.MANIFEST_PARSED,Dr),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(Tr){const Rr=this._levels;if(Rr.length===0)return;if(Tr<0||Tr>=Rr.length){const Vr=new Error("invalid level idx"),Nr=Tr<0;if(this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.LEVEL_SWITCH_ERROR,level:Tr,fatal:Nr,error:Vr,reason:Vr.message}),Nr)return;Tr=Math.min(Tr,Rr.length-1)}const Ar=this.currentLevelIndex,Pr=this.currentLevel,Lr=Pr?Pr.attrs["PATHWAY-ID"]:void 0,Mr=Rr[Tr],Fr=Mr.attrs["PATHWAY-ID"];if(this.currentLevelIndex=Tr,this.currentLevel=Mr,Ar===Tr&&Mr.details&&Pr&&Lr===Fr)return;this.log(`Switching to level ${Tr}${Fr?" with Pathway "+Fr:""} from level ${Ar}${Lr?" with Pathway "+Lr:""}`);const zr=_extends({},Mr,{level:Tr,maxBitrate:Mr.maxBitrate,attrs:Mr.attrs,uri:Mr.uri,urlId:Mr.urlId});delete zr._attrs,delete zr._urlId,this.hls.trigger(Events.LEVEL_SWITCHING,zr);const Ur=Mr.details;if(!Ur||Ur.live){const Vr=this.switchParams(Mr.uri,Pr==null?void 0:Pr.details);this.loadPlaylist(Vr)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(Tr){this.manualLevelIndex=Tr,this._startLevel===void 0&&(this._startLevel=Tr),Tr!==-1&&(this.level=Tr)}get firstLevel(){return this._firstLevel}set firstLevel(Tr){this._firstLevel=Tr}get startLevel(){if(this._startLevel===void 0){const Tr=this.hls.config.startLevel;return Tr!==void 0?Tr:this._firstLevel}else return this._startLevel}set startLevel(Tr){this._startLevel=Tr}onError(Tr,Rr){Rr.fatal||!Rr.context||Rr.context.type===PlaylistContextType.LEVEL&&Rr.context.level===this.level&&this.checkRetry(Rr)}onFragLoaded(Tr,{frag:Rr}){if(Rr!==void 0&&Rr.type===PlaylistLevelType.MAIN){const Ar=this._levels[Rr.level];Ar!==void 0&&(Ar.loadError=0)}}onLevelLoaded(Tr,Rr){var Ar;const{level:Pr,details:Lr}=Rr,Mr=this._levels[Pr];if(!Mr){var Fr;this.warn(`Invalid level index ${Pr}`),(Fr=Rr.deliveryDirectives)!=null&&Fr.skip&&(Lr.deltaUpdateFailed=!0);return}Pr===this.currentLevelIndex?(Mr.fragmentError===0&&(Mr.loadError=0),this.playlistLoaded(Pr,Rr,Mr.details)):(Ar=Rr.deliveryDirectives)!=null&&Ar.skip&&(Lr.deltaUpdateFailed=!0)}onAudioTrackSwitched(Tr,Rr){const Ar=this.currentLevel;if(!Ar)return;const Pr=this.hls.audioTracks[Rr.id].groupId;if(Ar.audioGroupIds&&Ar.audioGroupId!==Pr){let Lr=-1;for(let Mr=0;Mr<Ar.audioGroupIds.length;Mr++)if(Ar.audioGroupIds[Mr]===Pr){Lr=Mr;break}Lr!==-1&&Lr!==Ar.urlId&&(Ar.urlId=Lr,this.canLoad&&this.startLoad())}}loadPlaylist(Tr){super.loadPlaylist();const Rr=this.currentLevelIndex,Ar=this.currentLevel;if(Ar&&this.shouldLoadPlaylist(Ar)){const Pr=Ar.urlId;let Lr=Ar.uri;if(Tr)try{Lr=Tr.addDirectives(Lr)}catch(Fr){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Fr}`)}const Mr=Ar.attrs["PATHWAY-ID"];this.log(`Loading level index ${Rr}${(Tr==null?void 0:Tr.msn)!==void 0?" at sn "+Tr.msn+" part "+Tr.part:""} with${Mr?" Pathway "+Mr:""} URI ${Pr+1}/${Ar.url.length} ${Lr}`),this.clearTimer(),this.hls.trigger(Events.LEVEL_LOADING,{url:Lr,level:Rr,id:Pr,deliveryDirectives:Tr||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(Tr){this.level=Tr,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=Tr)}removeLevel(Tr,Rr){const Ar=(Lr,Mr)=>Mr!==Rr,Pr=this._levels.filter((Lr,Mr)=>Mr!==Tr?!0:Lr.url.length>1&&Rr!==void 0?(Lr.url=Lr.url.filter(Ar),Lr.audioGroupIds&&(Lr.audioGroupIds=Lr.audioGroupIds.filter(Ar)),Lr.textGroupIds&&(Lr.textGroupIds=Lr.textGroupIds.filter(Ar)),Lr.urlId=0,!0):(this.steering&&this.steering.removeLevel(Lr),!1));this.hls.trigger(Events.LEVELS_UPDATED,{levels:Pr})}onLevelsUpdated(Tr,{levels:Rr}){Rr.forEach((Ar,Pr)=>{const{details:Lr}=Ar;Lr!=null&&Lr.fragments&&Lr.fragments.forEach(Mr=>{Mr.level=Pr})}),this._levels=Rr}}function addGroupId(_r,Tr,Rr){Rr&&(Tr==="audio"?(_r.audioGroupIds||(_r.audioGroupIds=[]),_r.audioGroupIds[_r.url.length-1]=Rr):Tr==="text"&&(_r.textGroupIds||(_r.textGroupIds=[]),_r.textGroupIds[_r.url.length-1]=Rr))}function assignTrackIdsByGroup(_r){const Tr={};_r.forEach(Rr=>{const Ar=Rr.groupId||"";Rr.id=Tr[Ar]=Tr[Ar]||0,Tr[Ar]++})}var FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class FragmentTracker{constructor(Tr){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=Tr,this._registerListeners()}_registerListeners(){const{hls:Tr}=this;Tr.on(Events.BUFFER_APPENDED,this.onBufferAppended,this),Tr.on(Events.FRAG_BUFFERED,this.onFragBuffered,this),Tr.on(Events.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:Tr}=this;Tr.off(Events.BUFFER_APPENDED,this.onBufferAppended,this),Tr.off(Events.FRAG_BUFFERED,this.onFragBuffered,this),Tr.off(Events.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(Tr,Rr){const Ar=this.activePartLists[Rr];if(Ar)for(let Pr=Ar.length;Pr--;){const Lr=Ar[Pr];if(!Lr)break;const Mr=Lr.end;if(Lr.start<=Tr&&Mr!==null&&Tr<=Mr)return Lr}return this.getBufferedFrag(Tr,Rr)}getBufferedFrag(Tr,Rr){const{fragments:Ar}=this,Pr=Object.keys(Ar);for(let Lr=Pr.length;Lr--;){const Mr=Ar[Pr[Lr]];if((Mr==null?void 0:Mr.body.type)===Rr&&Mr.buffered){const Fr=Mr.body;if(Fr.start<=Tr&&Tr<=Fr.end)return Fr}}return null}detectEvictedFragments(Tr,Rr,Ar,Pr){this.timeRanges&&(this.timeRanges[Tr]=Rr);const Lr=(Pr==null?void 0:Pr.fragment.sn)||-1;Object.keys(this.fragments).forEach(Mr=>{const Fr=this.fragments[Mr];if(!Fr||Lr>=Fr.body.sn)return;if(!Fr.buffered&&!Fr.loaded){Fr.body.type===Ar&&this.removeFragment(Fr.body);return}const zr=Fr.range[Tr];zr&&zr.time.some(Ur=>{const Vr=!this.isTimeBuffered(Ur.startPTS,Ur.endPTS,Rr);return Vr&&this.removeFragment(Fr.body),Vr})})}detectPartialFragments(Tr){const Rr=this.timeRanges,{frag:Ar,part:Pr}=Tr;if(!Rr||Ar.sn==="initSegment")return;const Lr=getFragmentKey(Ar),Mr=this.fragments[Lr];if(!Mr||Mr.buffered&&Ar.gap)return;const Fr=!Ar.relurl;Object.keys(Rr).forEach(zr=>{const Ur=Ar.elementaryStreams[zr];if(!Ur)return;const Vr=Rr[zr],Nr=Fr||Ur.partial===!0;Mr.range[zr]=this.getBufferedTimes(Ar,Pr,Nr,Vr)}),Mr.loaded=null,Object.keys(Mr.range).length?(Mr.buffered=!0,(Mr.body.endList=Ar.endList||Mr.body.endList)&&(this.endListFragments[Mr.body.type]=Mr),isPartial(Mr)||this.removeParts(Ar.sn-1,Ar.type)):this.removeFragment(Mr.body)}removeParts(Tr,Rr){const Ar=this.activePartLists[Rr];Ar&&(this.activePartLists[Rr]=Ar.filter(Pr=>Pr.fragment.sn>=Tr))}fragBuffered(Tr,Rr){const Ar=getFragmentKey(Tr);let Pr=this.fragments[Ar];!Pr&&Rr&&(Pr=this.fragments[Ar]={body:Tr,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},Tr.gap&&(this.hasGaps=!0)),Pr&&(Pr.loaded=null,Pr.buffered=!0)}getBufferedTimes(Tr,Rr,Ar,Pr){const Lr={time:[],partial:Ar},Mr=Tr.start,Fr=Tr.end,zr=Tr.minEndPTS||Fr,Ur=Tr.maxStartPTS||Mr;for(let Vr=0;Vr<Pr.length;Vr++){const Nr=Pr.start(Vr)-this.bufferPadding,Dr=Pr.end(Vr)+this.bufferPadding;if(Ur>=Nr&&zr<=Dr){Lr.time.push({startPTS:Math.max(Mr,Pr.start(Vr)),endPTS:Math.min(Fr,Pr.end(Vr))});break}else if(Mr<Dr&&Fr>Nr)Lr.partial=!0,Lr.time.push({startPTS:Math.max(Mr,Pr.start(Vr)),endPTS:Math.min(Fr,Pr.end(Vr))});else if(Fr<=Nr)break}return Lr}getPartialFragment(Tr){let Rr=null,Ar,Pr,Lr,Mr=0;const{bufferPadding:Fr,fragments:zr}=this;return Object.keys(zr).forEach(Ur=>{const Vr=zr[Ur];Vr&&isPartial(Vr)&&(Pr=Vr.body.start-Fr,Lr=Vr.body.end+Fr,Tr>=Pr&&Tr<=Lr&&(Ar=Math.min(Tr-Pr,Lr-Tr),Mr<=Ar&&(Rr=Vr.body,Mr=Ar)))}),Rr}isEndListAppended(Tr){const Rr=this.endListFragments[Tr];return Rr!==void 0&&(Rr.buffered||isPartial(Rr))}getState(Tr){const Rr=getFragmentKey(Tr),Ar=this.fragments[Rr];return Ar?Ar.buffered?isPartial(Ar)?FragmentState.PARTIAL:FragmentState.OK:FragmentState.APPENDING:FragmentState.NOT_LOADED}isTimeBuffered(Tr,Rr,Ar){let Pr,Lr;for(let Mr=0;Mr<Ar.length;Mr++){if(Pr=Ar.start(Mr)-this.bufferPadding,Lr=Ar.end(Mr)+this.bufferPadding,Tr>=Pr&&Rr<=Lr)return!0;if(Rr<=Pr)return!1}return!1}onFragLoaded(Tr,Rr){const{frag:Ar,part:Pr}=Rr;if(Ar.sn==="initSegment"||Ar.bitrateTest)return;const Lr=Pr?null:Rr,Mr=getFragmentKey(Ar);this.fragments[Mr]={body:Ar,appendedPTS:null,loaded:Lr,buffered:!1,range:Object.create(null)}}onBufferAppended(Tr,Rr){const{frag:Ar,part:Pr,timeRanges:Lr}=Rr;if(Ar.sn==="initSegment")return;const Mr=Ar.type;if(Pr){let Fr=this.activePartLists[Mr];Fr||(this.activePartLists[Mr]=Fr=[]),Fr.push(Pr)}this.timeRanges=Lr,Object.keys(Lr).forEach(Fr=>{const zr=Lr[Fr];this.detectEvictedFragments(Fr,zr,Mr,Pr)})}onFragBuffered(Tr,Rr){this.detectPartialFragments(Rr)}hasFragment(Tr){const Rr=getFragmentKey(Tr);return!!this.fragments[Rr]}hasParts(Tr){var Rr;return!!((Rr=this.activePartLists[Tr])!=null&&Rr.length)}removeFragmentsInRange(Tr,Rr,Ar,Pr,Lr){Pr&&!this.hasGaps||Object.keys(this.fragments).forEach(Mr=>{const Fr=this.fragments[Mr];if(!Fr)return;const zr=Fr.body;zr.type!==Ar||Pr&&!zr.gap||zr.start<Rr&&zr.end>Tr&&(Fr.buffered||Lr)&&this.removeFragment(zr)})}removeFragment(Tr){const Rr=getFragmentKey(Tr);Tr.stats.loaded=0,Tr.clearElementaryStreamInfo();const Ar=this.activePartLists[Tr.type];if(Ar){const Pr=Tr.sn;this.activePartLists[Tr.type]=Ar.filter(Lr=>Lr.fragment.sn!==Pr)}delete this.fragments[Rr],Tr.endList&&delete this.endListFragments[Tr.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function isPartial(_r){var Tr,Rr,Ar;return _r.buffered&&(_r.body.gap||((Tr=_r.range.video)==null?void 0:Tr.partial)||((Rr=_r.range.audio)==null?void 0:Rr.partial)||((Ar=_r.range.audiovideo)==null?void 0:Ar.partial))}function getFragmentKey(_r){return`${_r.type}_${_r.level}_${_r.urlId}_${_r.sn}`}const MIN_CHUNK_SIZE=Math.pow(2,17);class FragmentLoader{constructor(Tr){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=Tr}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(Tr,Rr){const Ar=Tr.url;if(!Ar)return Promise.reject(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:Tr,error:new Error(`Fragment does not have a ${Ar?"part list":"url"}`),networkDetails:null}));this.abort();const Pr=this.config,Lr=Pr.fLoader,Mr=Pr.loader;return new Promise((Fr,zr)=>{if(this.loader&&this.loader.destroy(),Tr.gap)if(Tr.tagList.some(jr=>jr[0]==="GAP")){zr(createGapLoadError(Tr));return}else Tr.gap=!1;const Ur=this.loader=Tr.loader=Lr?new Lr(Pr):new Mr(Pr),Vr=createLoaderContext(Tr),Nr=getLoaderConfigWithoutReties(Pr.fragLoadPolicy.default),Dr={loadPolicy:Nr,timeout:Nr.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Tr.sn==="initSegment"?1/0:MIN_CHUNK_SIZE};Tr.stats=Ur.stats,Ur.load(Vr,Dr,{onSuccess:(jr,Gr,Wr,qr)=>{this.resetLoader(Tr,Ur);let Kr=jr.data;Wr.resetIV&&Tr.decryptdata&&(Tr.decryptdata.iv=new Uint8Array(Kr.slice(0,16)),Kr=Kr.slice(16)),Fr({frag:Tr,part:null,payload:Kr,networkDetails:qr})},onError:(jr,Gr,Wr,qr)=>{this.resetLoader(Tr,Ur),zr(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:Tr,response:_objectSpread2({url:Ar,data:void 0},jr),error:new Error(`HTTP Error ${jr.code} ${jr.text}`),networkDetails:Wr,stats:qr}))},onAbort:(jr,Gr,Wr)=>{this.resetLoader(Tr,Ur),zr(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:Tr,error:new Error("Aborted"),networkDetails:Wr,stats:jr}))},onTimeout:(jr,Gr,Wr)=>{this.resetLoader(Tr,Ur),zr(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:Tr,error:new Error(`Timeout after ${Dr.timeout}ms`),networkDetails:Wr,stats:jr}))},onProgress:(jr,Gr,Wr,qr)=>{Rr&&Rr({frag:Tr,part:null,payload:Wr,networkDetails:qr})}})})}loadPart(Tr,Rr,Ar){this.abort();const Pr=this.config,Lr=Pr.fLoader,Mr=Pr.loader;return new Promise((Fr,zr)=>{if(this.loader&&this.loader.destroy(),Tr.gap||Rr.gap){zr(createGapLoadError(Tr,Rr));return}const Ur=this.loader=Tr.loader=Lr?new Lr(Pr):new Mr(Pr),Vr=createLoaderContext(Tr,Rr),Nr=getLoaderConfigWithoutReties(Pr.fragLoadPolicy.default),Dr={loadPolicy:Nr,timeout:Nr.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:MIN_CHUNK_SIZE};Rr.stats=Ur.stats,Ur.load(Vr,Dr,{onSuccess:(jr,Gr,Wr,qr)=>{this.resetLoader(Tr,Ur),this.updateStatsFromPart(Tr,Rr);const Kr={frag:Tr,part:Rr,payload:jr.data,networkDetails:qr};Ar(Kr),Fr(Kr)},onError:(jr,Gr,Wr,qr)=>{this.resetLoader(Tr,Ur),zr(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:Tr,part:Rr,response:_objectSpread2({url:Vr.url,data:void 0},jr),error:new Error(`HTTP Error ${jr.code} ${jr.text}`),networkDetails:Wr,stats:qr}))},onAbort:(jr,Gr,Wr)=>{Tr.stats.aborted=Rr.stats.aborted,this.resetLoader(Tr,Ur),zr(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:Tr,part:Rr,error:new Error("Aborted"),networkDetails:Wr,stats:jr}))},onTimeout:(jr,Gr,Wr)=>{this.resetLoader(Tr,Ur),zr(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:Tr,part:Rr,error:new Error(`Timeout after ${Dr.timeout}ms`),networkDetails:Wr,stats:jr}))}})})}updateStatsFromPart(Tr,Rr){const Ar=Tr.stats,Pr=Rr.stats,Lr=Pr.total;if(Ar.loaded+=Pr.loaded,Lr){const zr=Math.round(Tr.duration/Rr.duration),Ur=Math.min(Math.round(Ar.loaded/Lr),zr),Nr=(zr-Ur)*Math.round(Ar.loaded/Ur);Ar.total=Ar.loaded+Nr}else Ar.total=Math.max(Ar.loaded,Ar.total);const Mr=Ar.loading,Fr=Pr.loading;Mr.start?Mr.first+=Fr.first-Fr.start:(Mr.start=Fr.start,Mr.first=Fr.first),Mr.end=Fr.end}resetLoader(Tr,Rr){Tr.loader=null,this.loader===Rr&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),Rr.destroy()}}function createLoaderContext(_r,Tr=null){const Rr=Tr||_r,Ar={frag:_r,part:Tr,responseType:"arraybuffer",url:Rr.url,headers:{},rangeStart:0,rangeEnd:0},Pr=Rr.byteRangeStartOffset,Lr=Rr.byteRangeEndOffset;if(isFiniteNumber(Pr)&&isFiniteNumber(Lr)){var Mr;let Fr=Pr,zr=Lr;if(_r.sn==="initSegment"&&((Mr=_r.decryptdata)==null?void 0:Mr.method)==="AES-128"){const Ur=Lr-Pr;Ur%16&&(zr=Lr+(16-Ur%16)),Pr!==0&&(Ar.resetIV=!0,Fr=Pr-16)}Ar.rangeStart=Fr,Ar.rangeEnd=zr}return Ar}function createGapLoadError(_r,Tr){const Rr=new Error(`GAP ${_r.gap?"tag":"attribute"} found`),Ar={type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_GAP,fatal:!1,frag:_r,error:Rr,networkDetails:null};return Tr&&(Ar.part=Tr),(Tr||_r).stats.aborted=!0,new LoadError(Ar)}class LoadError extends Error{constructor(Tr){super(Tr.error.message),this.data=void 0,this.data=Tr}}class KeyLoader{constructor(Tr){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=Tr}abort(Tr){for(const Rr in this.keyUriToKeyInfo){const Ar=this.keyUriToKeyInfo[Rr].loader;if(Ar){if(Tr&&Tr!==Ar.context.frag.type)return;Ar.abort()}}}detach(){for(const Tr in this.keyUriToKeyInfo){const Rr=this.keyUriToKeyInfo[Tr];(Rr.mediaKeySessionContext||Rr.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[Tr]}}destroy(){this.detach();for(const Tr in this.keyUriToKeyInfo){const Rr=this.keyUriToKeyInfo[Tr].loader;Rr&&Rr.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(Tr,Rr=ErrorDetails.KEY_LOAD_ERROR,Ar,Pr,Lr){return new LoadError({type:ErrorTypes.NETWORK_ERROR,details:Rr,fatal:!1,frag:Tr,response:Lr,error:Ar,networkDetails:Pr})}loadClear(Tr,Rr){if(this.emeController&&this.config.emeEnabled){const{sn:Ar,cc:Pr}=Tr;for(let Lr=0;Lr<Rr.length;Lr++){const Mr=Rr[Lr];if(Pr<=Mr.cc&&(Ar==="initSegment"||Mr.sn==="initSegment"||Ar<Mr.sn)){this.emeController.selectKeySystemFormat(Mr).then(Fr=>{Mr.setKeyFormat(Fr)});break}}}}load(Tr){return!Tr.decryptdata&&Tr.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(Tr).then(Rr=>this.loadInternal(Tr,Rr)):this.loadInternal(Tr)}loadInternal(Tr,Rr){var Ar,Pr;Rr&&Tr.setKeyFormat(Rr);const Lr=Tr.decryptdata;if(!Lr){const Ur=new Error(Rr?`Expected frag.decryptdata to be defined after setting format ${Rr}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(Tr,ErrorDetails.KEY_LOAD_ERROR,Ur))}const Mr=Lr.uri;if(!Mr)return Promise.reject(this.createKeyLoadError(Tr,ErrorDetails.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${Mr}"`)));let Fr=this.keyUriToKeyInfo[Mr];if((Ar=Fr)!=null&&Ar.decryptdata.key)return Lr.key=Fr.decryptdata.key,Promise.resolve({frag:Tr,keyInfo:Fr});if((Pr=Fr)!=null&&Pr.keyLoadPromise){var zr;switch((zr=Fr.mediaKeySessionContext)==null?void 0:zr.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return Fr.keyLoadPromise.then(Ur=>(Lr.key=Ur.keyInfo.decryptdata.key,{frag:Tr,keyInfo:Fr}))}}switch(Fr=this.keyUriToKeyInfo[Mr]={decryptdata:Lr,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},Lr.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return Lr.keyFormat==="identity"?this.loadKeyHTTP(Fr,Tr):this.loadKeyEME(Fr,Tr);case"AES-128":return this.loadKeyHTTP(Fr,Tr);default:return Promise.reject(this.createKeyLoadError(Tr,ErrorDetails.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${Lr.method}"`)))}}loadKeyEME(Tr,Rr){const Ar={frag:Rr,keyInfo:Tr};if(this.emeController&&this.config.emeEnabled){const Pr=this.emeController.loadKey(Ar);if(Pr)return(Tr.keyLoadPromise=Pr.then(Lr=>(Tr.mediaKeySessionContext=Lr,Ar))).catch(Lr=>{throw Tr.keyLoadPromise=null,Lr})}return Promise.resolve(Ar)}loadKeyHTTP(Tr,Rr){const Ar=this.config,Pr=Ar.loader,Lr=new Pr(Ar);return Rr.keyLoader=Tr.loader=Lr,Tr.keyLoadPromise=new Promise((Mr,Fr)=>{const zr={keyInfo:Tr,frag:Rr,responseType:"arraybuffer",url:Tr.decryptdata.uri},Ur=Ar.keyLoadPolicy.default,Vr={loadPolicy:Ur,timeout:Ur.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},Nr={onSuccess:(Dr,jr,Gr,Wr)=>{const{frag:qr,keyInfo:Kr,url:Xr}=Gr;if(!qr.decryptdata||Kr!==this.keyUriToKeyInfo[Xr])return Fr(this.createKeyLoadError(qr,ErrorDetails.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),Wr));Kr.decryptdata.key=qr.decryptdata.key=new Uint8Array(Dr.data),qr.keyLoader=null,Kr.loader=null,Mr({frag:qr,keyInfo:Kr})},onError:(Dr,jr,Gr,Wr)=>{this.resetLoader(jr),Fr(this.createKeyLoadError(Rr,ErrorDetails.KEY_LOAD_ERROR,new Error(`HTTP Error ${Dr.code} loading key ${Dr.text}`),Gr,_objectSpread2({url:zr.url,data:void 0},Dr)))},onTimeout:(Dr,jr,Gr)=>{this.resetLoader(jr),Fr(this.createKeyLoadError(Rr,ErrorDetails.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),Gr))},onAbort:(Dr,jr,Gr)=>{this.resetLoader(jr),Fr(this.createKeyLoadError(Rr,ErrorDetails.INTERNAL_ABORTED,new Error("key loading aborted"),Gr))}};Lr.load(zr,Vr,Nr)})}resetLoader(Tr){const{frag:Rr,keyInfo:Ar,url:Pr}=Tr,Lr=Ar.loader;Rr.keyLoader===Lr&&(Rr.keyLoader=null,Ar.loader=null),delete this.keyUriToKeyInfo[Pr],Lr&&Lr.destroy()}}class TaskLoop{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(Tr){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,Tr),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}const noopBuffered={length:0,start:()=>0,end:()=>0};class BufferHelper{static isBuffered(Tr,Rr){try{if(Tr){const Ar=BufferHelper.getBuffered(Tr);for(let Pr=0;Pr<Ar.length;Pr++)if(Rr>=Ar.start(Pr)&&Rr<=Ar.end(Pr))return!0}}catch{}return!1}static bufferInfo(Tr,Rr,Ar){try{if(Tr){const Pr=BufferHelper.getBuffered(Tr),Lr=[];let Mr;for(Mr=0;Mr<Pr.length;Mr++)Lr.push({start:Pr.start(Mr),end:Pr.end(Mr)});return this.bufferedInfo(Lr,Rr,Ar)}}catch{}return{len:0,start:Rr,end:Rr,nextStart:void 0}}static bufferedInfo(Tr,Rr,Ar){Rr=Math.max(0,Rr),Tr.sort(function(Ur,Vr){const Nr=Ur.start-Vr.start;return Nr||Vr.end-Ur.end});let Pr=[];if(Ar)for(let Ur=0;Ur<Tr.length;Ur++){const Vr=Pr.length;if(Vr){const Nr=Pr[Vr-1].end;Tr[Ur].start-Nr<Ar?Tr[Ur].end>Nr&&(Pr[Vr-1].end=Tr[Ur].end):Pr.push(Tr[Ur])}else Pr.push(Tr[Ur])}else Pr=Tr;let Lr=0,Mr,Fr=Rr,zr=Rr;for(let Ur=0;Ur<Pr.length;Ur++){const Vr=Pr[Ur].start,Nr=Pr[Ur].end;if(Rr+Ar>=Vr&&Rr<Nr)Fr=Vr,zr=Nr,Lr=zr-Rr;else if(Rr+Ar<Vr){Mr=Vr;break}}return{len:Lr,start:Fr||0,end:zr||0,nextStart:Mr}}static getBuffered(Tr){try{return Tr.buffered}catch(Rr){return logger.log("failed to get media.buffered",Rr),noopBuffered}}}class ChunkMetadata{constructor(Tr,Rr,Ar,Pr=0,Lr=-1,Mr=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=getNewPerformanceTiming(),this.buffering={audio:getNewPerformanceTiming(),video:getNewPerformanceTiming(),audiovideo:getNewPerformanceTiming()},this.level=Tr,this.sn=Rr,this.id=Ar,this.size=Pr,this.part=Lr,this.partial=Mr}}function getNewPerformanceTiming(){return{start:0,executeStart:0,executeEnd:0,end:0}}function findFirstFragWithCC(_r,Tr){let Rr=null;for(let Ar=0,Pr=_r.length;Ar<Pr;Ar++){const Lr=_r[Ar];if(Lr&&Lr.cc===Tr){Rr=Lr;break}}return Rr}function shouldAlignOnDiscontinuities(_r,Tr,Rr){return!!(Tr.details&&(Rr.endCC>Rr.startCC||_r&&_r.cc<Rr.startCC))}function findDiscontinuousReferenceFrag(_r,Tr,Rr=0){const Ar=_r.fragments,Pr=Tr.fragments;if(!Pr.length||!Ar.length){logger.log("No fragments to align");return}const Lr=findFirstFragWithCC(Ar,Pr[0].cc);if(!Lr||Lr&&!Lr.startPTS){logger.log("No frag in previous level to align on");return}return Lr}function adjustFragmentStart(_r,Tr){if(_r){const Rr=_r.start+Tr;_r.start=_r.startPTS=Rr,_r.endPTS=Rr+_r.duration}}function adjustSlidingStart(_r,Tr){const Rr=Tr.fragments;for(let Ar=0,Pr=Rr.length;Ar<Pr;Ar++)adjustFragmentStart(Rr[Ar],_r);Tr.fragmentHint&&adjustFragmentStart(Tr.fragmentHint,_r),Tr.alignedSliding=!0}function alignStream(_r,Tr,Rr){Tr&&(alignDiscontinuities(_r,Rr,Tr),!Rr.alignedSliding&&Tr.details&&alignPDT(Rr,Tr.details),!Rr.alignedSliding&&Tr.details&&!Rr.skippedSegments&&adjustSliding(Tr.details,Rr))}function alignDiscontinuities(_r,Tr,Rr){if(shouldAlignOnDiscontinuities(_r,Rr,Tr)){const Ar=findDiscontinuousReferenceFrag(Rr.details,Tr);Ar&&isFiniteNumber(Ar.start)&&(logger.log(`Adjusting PTS using last level due to CC increase within current level ${Tr.url}`),adjustSlidingStart(Ar.start,Tr))}}function alignPDT(_r,Tr){if(!Tr.fragments.length||!_r.hasProgramDateTime||!Tr.hasProgramDateTime)return;const Rr=Tr.fragments[0].programDateTime,Ar=_r.fragments[0].programDateTime,Pr=(Ar-Rr)/1e3+Tr.fragments[0].start;Pr&&isFiniteNumber(Pr)&&(logger.log(`Adjusting PTS using programDateTime delta ${Ar-Rr}ms, sliding:${Pr.toFixed(3)} ${_r.url} `),adjustSlidingStart(Pr,_r))}function alignMediaPlaylistByPDT(_r,Tr){if(!_r.hasProgramDateTime||!Tr.hasProgramDateTime)return;const Rr=_r.fragments,Ar=Tr.fragments;if(!Rr.length||!Ar.length)return;const Pr=Math.round(Ar.length/2)-1,Lr=Ar[Pr],Mr=findFirstFragWithCC(Rr,Lr.cc)||Rr[Math.round(Rr.length/2)-1],Fr=Lr.programDateTime,zr=Mr.programDateTime;if(Fr===null||zr===null)return;const Ur=(zr-Fr)/1e3-(Mr.start-Lr.start);adjustSlidingStart(Ur,_r)}class AESCrypto{constructor(Tr,Rr){this.subtle=void 0,this.aesIV=void 0,this.subtle=Tr,this.aesIV=Rr}decrypt(Tr,Rr){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},Rr,Tr)}}class FastAESKey{constructor(Tr,Rr){this.subtle=void 0,this.key=void 0,this.subtle=Tr,this.key=Rr}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function removePadding(_r){const Tr=_r.byteLength,Rr=Tr&&new DataView(_r.buffer).getUint8(Tr-1);return Rr?sliceUint8(_r,0,Tr-Rr):_r}class AESDecryptor{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(Tr){const Rr=new DataView(Tr),Ar=new Uint32Array(4);for(let Pr=0;Pr<4;Pr++)Ar[Pr]=Rr.getUint32(Pr*4);return Ar}initTable(){const Tr=this.sBox,Rr=this.invSBox,Ar=this.subMix,Pr=Ar[0],Lr=Ar[1],Mr=Ar[2],Fr=Ar[3],zr=this.invSubMix,Ur=zr[0],Vr=zr[1],Nr=zr[2],Dr=zr[3],jr=new Uint32Array(256);let Gr=0,Wr=0,qr=0;for(qr=0;qr<256;qr++)qr<128?jr[qr]=qr<<1:jr[qr]=qr<<1^283;for(qr=0;qr<256;qr++){let Kr=Wr^Wr<<1^Wr<<2^Wr<<3^Wr<<4;Kr=Kr>>>8^Kr&255^99,Tr[Gr]=Kr,Rr[Kr]=Gr;const Xr=jr[Gr],Zr=jr[Xr],Jr=jr[Zr];let _i=jr[Kr]*257^Kr*16843008;Pr[Gr]=_i<<24|_i>>>8,Lr[Gr]=_i<<16|_i>>>16,Mr[Gr]=_i<<8|_i>>>24,Fr[Gr]=_i,_i=Jr*16843009^Zr*65537^Xr*257^Gr*16843008,Ur[Kr]=_i<<24|_i>>>8,Vr[Kr]=_i<<16|_i>>>16,Nr[Kr]=_i<<8|_i>>>24,Dr[Kr]=_i,Gr?(Gr=Xr^jr[jr[jr[Jr^Xr]]],Wr^=jr[jr[Wr]]):Gr=Wr=1}}expandKey(Tr){const Rr=this.uint8ArrayToUint32Array_(Tr);let Ar=!0,Pr=0;for(;Pr<Rr.length&&Ar;)Ar=Rr[Pr]===this.key[Pr],Pr++;if(Ar)return;this.key=Rr;const Lr=this.keySize=Rr.length;if(Lr!==4&&Lr!==6&&Lr!==8)throw new Error("Invalid aes key size="+Lr);const Mr=this.ksRows=(Lr+6+1)*4;let Fr,zr;const Ur=this.keySchedule=new Uint32Array(Mr),Vr=this.invKeySchedule=new Uint32Array(Mr),Nr=this.sBox,Dr=this.rcon,jr=this.invSubMix,Gr=jr[0],Wr=jr[1],qr=jr[2],Kr=jr[3];let Xr,Zr;for(Fr=0;Fr<Mr;Fr++){if(Fr<Lr){Xr=Ur[Fr]=Rr[Fr];continue}Zr=Xr,Fr%Lr===0?(Zr=Zr<<8|Zr>>>24,Zr=Nr[Zr>>>24]<<24|Nr[Zr>>>16&255]<<16|Nr[Zr>>>8&255]<<8|Nr[Zr&255],Zr^=Dr[Fr/Lr|0]<<24):Lr>6&&Fr%Lr===4&&(Zr=Nr[Zr>>>24]<<24|Nr[Zr>>>16&255]<<16|Nr[Zr>>>8&255]<<8|Nr[Zr&255]),Ur[Fr]=Xr=(Ur[Fr-Lr]^Zr)>>>0}for(zr=0;zr<Mr;zr++)Fr=Mr-zr,zr&3?Zr=Ur[Fr]:Zr=Ur[Fr-4],zr<4||Fr<=4?Vr[zr]=Zr:Vr[zr]=Gr[Nr[Zr>>>24]]^Wr[Nr[Zr>>>16&255]]^qr[Nr[Zr>>>8&255]]^Kr[Nr[Zr&255]],Vr[zr]=Vr[zr]>>>0}networkToHostOrderSwap(Tr){return Tr<<24|(Tr&65280)<<8|(Tr&16711680)>>8|Tr>>>24}decrypt(Tr,Rr,Ar){const Pr=this.keySize+6,Lr=this.invKeySchedule,Mr=this.invSBox,Fr=this.invSubMix,zr=Fr[0],Ur=Fr[1],Vr=Fr[2],Nr=Fr[3],Dr=this.uint8ArrayToUint32Array_(Ar);let jr=Dr[0],Gr=Dr[1],Wr=Dr[2],qr=Dr[3];const Kr=new Int32Array(Tr),Xr=new Int32Array(Kr.length);let Zr,Jr,_i,es,ts,rs,ns,as,ls,us,xs,Ts,vs,gs;const fs=this.networkToHostOrderSwap;for(;Rr<Kr.length;){for(ls=fs(Kr[Rr]),us=fs(Kr[Rr+1]),xs=fs(Kr[Rr+2]),Ts=fs(Kr[Rr+3]),ts=ls^Lr[0],rs=Ts^Lr[1],ns=xs^Lr[2],as=us^Lr[3],vs=4,gs=1;gs<Pr;gs++)Zr=zr[ts>>>24]^Ur[rs>>16&255]^Vr[ns>>8&255]^Nr[as&255]^Lr[vs],Jr=zr[rs>>>24]^Ur[ns>>16&255]^Vr[as>>8&255]^Nr[ts&255]^Lr[vs+1],_i=zr[ns>>>24]^Ur[as>>16&255]^Vr[ts>>8&255]^Nr[rs&255]^Lr[vs+2],es=zr[as>>>24]^Ur[ts>>16&255]^Vr[rs>>8&255]^Nr[ns&255]^Lr[vs+3],ts=Zr,rs=Jr,ns=_i,as=es,vs=vs+4;Zr=Mr[ts>>>24]<<24^Mr[rs>>16&255]<<16^Mr[ns>>8&255]<<8^Mr[as&255]^Lr[vs],Jr=Mr[rs>>>24]<<24^Mr[ns>>16&255]<<16^Mr[as>>8&255]<<8^Mr[ts&255]^Lr[vs+1],_i=Mr[ns>>>24]<<24^Mr[as>>16&255]<<16^Mr[ts>>8&255]<<8^Mr[rs&255]^Lr[vs+2],es=Mr[as>>>24]<<24^Mr[ts>>16&255]<<16^Mr[rs>>8&255]<<8^Mr[ns&255]^Lr[vs+3],Xr[Rr]=fs(Zr^jr),Xr[Rr+1]=fs(es^Gr),Xr[Rr+2]=fs(_i^Wr),Xr[Rr+3]=fs(Jr^qr),jr=ls,Gr=us,Wr=xs,qr=Ts,Rr=Rr+4}return Xr.buffer}}const CHUNK_SIZE=16;class Decrypter{constructor(Tr,{removePKCS7Padding:Rr=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=Tr.enableSoftwareAES,this.removePKCS7Padding=Rr,Rr)try{const Ar=self.crypto;Ar&&(this.subtle=Ar.subtle||Ar.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:Tr,remainderData:Rr}=this;if(!Tr||Rr)return this.reset(),null;const Ar=new Uint8Array(Tr);return this.reset(),this.removePKCS7Padding?removePadding(Ar):Ar}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(Tr,Rr,Ar){return this.useSoftware?new Promise((Pr,Lr)=>{this.softwareDecrypt(new Uint8Array(Tr),Rr,Ar);const Mr=this.flush();Mr?Pr(Mr.buffer):Lr(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(Tr),Rr,Ar)}softwareDecrypt(Tr,Rr,Ar){const{currentIV:Pr,currentResult:Lr,remainderData:Mr}=this;this.logOnce("JS AES decrypt"),Mr&&(Tr=appendUint8Array(Mr,Tr),this.remainderData=null);const Fr=this.getValidChunk(Tr);if(!Fr.length)return null;Pr&&(Ar=Pr);let zr=this.softwareDecrypter;zr||(zr=this.softwareDecrypter=new AESDecryptor),zr.expandKey(Rr);const Ur=Lr;return this.currentResult=zr.decrypt(Fr.buffer,0,Ar),this.currentIV=sliceUint8(Fr,-16).buffer,Ur||null}webCryptoDecrypt(Tr,Rr,Ar){const Pr=this.subtle;return(this.key!==Rr||!this.fastAesKey)&&(this.key=Rr,this.fastAesKey=new FastAESKey(Pr,Rr)),this.fastAesKey.expandKey().then(Lr=>Pr?(this.logOnce("WebCrypto AES decrypt"),new AESCrypto(Pr,new Uint8Array(Ar)).decrypt(Tr.buffer,Lr)):Promise.reject(new Error("web crypto not initialized"))).catch(Lr=>(logger.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${Lr.name}: ${Lr.message}`),this.onWebCryptoError(Tr,Rr,Ar)))}onWebCryptoError(Tr,Rr,Ar){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(Tr,Rr,Ar);const Pr=this.flush();if(Pr)return Pr.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(Tr){let Rr=Tr;const Ar=Tr.length-Tr.length%CHUNK_SIZE;return Ar!==Tr.length&&(Rr=sliceUint8(Tr,0,Ar),this.remainderData=sliceUint8(Tr,Ar)),Rr}logOnce(Tr){this.logEnabled&&(logger.log(`[decrypter]: ${Tr}`),this.logEnabled=!1)}}const TimeRanges={toString:function(_r){let Tr="";const Rr=_r.length;for(let Ar=0;Ar<Rr;Ar++)Tr+=`[${_r.start(Ar).toFixed(3)}-${_r.end(Ar).toFixed(3)}]`;return Tr}},State={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class BaseStreamController extends TaskLoop{constructor(Tr,Rr,Ar,Pr,Lr){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=State.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=Lr,this.logPrefix=Pr,this.log=logger.log.bind(logger,`${Pr}:`),this.warn=logger.warn.bind(logger,`${Pr}:`),this.hls=Tr,this.fragmentLoader=new FragmentLoader(Tr.config),this.keyLoader=Ar,this.fragmentTracker=Rr,this.config=Tr.config,this.decrypter=new Decrypter(Tr.config),Tr.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(Tr){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const Tr=this.fragCurrent;Tr!=null&&Tr.loader&&(Tr.abortRequests(),this.fragmentTracker.removeFragment(Tr)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=State.STOPPED}_streamEnded(Tr,Rr){if(Rr.live||Tr.nextStart||!Tr.end||!this.media)return!1;const Ar=Rr.partList;if(Ar!=null&&Ar.length){const Lr=Ar[Ar.length-1];return BufferHelper.isBuffered(this.media,Lr.start+Lr.duration/2)}const Pr=Rr.fragments[Rr.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(Pr)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var Tr;return(Tr=this.levels[this.levelLastLoaded])==null?void 0:Tr.details}}onMediaAttached(Tr,Rr){const Ar=this.media=this.mediaBuffer=Rr.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),Ar.addEventListener("seeking",this.onvseeking),Ar.addEventListener("ended",this.onvended);const Pr=this.config;this.levels&&Pr.autoStartLoad&&this.state===State.STOPPED&&this.startLoad(Pr.startPosition)}onMediaDetaching(){const Tr=this.media;Tr!=null&&Tr.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Tr&&this.onvseeking&&this.onvended&&(Tr.removeEventListener("seeking",this.onvseeking),Tr.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:Tr,fragCurrent:Rr,media:Ar,mediaBuffer:Pr,state:Lr}=this,Mr=Ar?Ar.currentTime:0,Fr=BufferHelper.bufferInfo(Pr||Ar,Mr,Tr.maxBufferHole);if(this.log(`media seeking to ${isFiniteNumber(Mr)?Mr.toFixed(3):Mr}, state: ${Lr}`),this.state===State.ENDED)this.resetLoadingState();else if(Rr){const zr=Tr.maxFragLookUpTolerance,Ur=Rr.start-zr,Vr=Rr.start+Rr.duration+zr;if(!Fr.len||Vr<Fr.start||Ur>Fr.end){const Nr=Mr>Vr;(Mr<Ur||Nr)&&(Nr&&Rr.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),Rr.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}Ar&&(this.fragmentTracker.removeFragmentsInRange(Mr,1/0,this.playlistType,!0),this.lastCurrentTime=Mr),!this.loadedmetadata&&!Fr.len&&(this.nextLoadPosition=this.startPosition=Mr),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(Tr,Rr){this.startTimeOffset=Rr.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this.state=State.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(Tr,Rr,Ar){this._loadFragForPlayback(Tr,Rr,Ar)}_loadFragForPlayback(Tr,Rr,Ar){const Pr=Lr=>{if(this.fragContextChanged(Tr)){this.warn(`Fragment ${Tr.sn}${Lr.part?" p: "+Lr.part.index:""} of level ${Tr.level} was dropped during download.`),this.fragmentTracker.removeFragment(Tr);return}Tr.stats.chunkCount++,this._handleFragmentLoadProgress(Lr)};this._doFragLoad(Tr,Rr,Ar,Pr).then(Lr=>{if(!Lr)return;const Mr=this.state;if(this.fragContextChanged(Tr)){(Mr===State.FRAG_LOADING||!this.fragCurrent&&Mr===State.PARSING)&&(this.fragmentTracker.removeFragment(Tr),this.state=State.IDLE);return}"payload"in Lr&&(this.log(`Loaded fragment ${Tr.sn} of level ${Tr.level}`),this.hls.trigger(Events.FRAG_LOADED,Lr)),this._handleFragmentLoadComplete(Lr)}).catch(Lr=>{this.state===State.STOPPED||this.state===State.ERROR||(this.warn(Lr),this.resetFragmentLoading(Tr))})}clearTrackerIfNeeded(Tr){var Rr;const{fragmentTracker:Ar}=this;if(Ar.getState(Tr)===FragmentState.APPENDING){const Lr=Tr.type,Mr=this.getFwdBufferInfo(this.mediaBuffer,Lr),Fr=Math.max(Tr.duration,Mr?Mr.len:this.config.maxBufferLength);this.reduceMaxBufferLength(Fr)&&Ar.removeFragment(Tr)}else((Rr=this.mediaBuffer)==null?void 0:Rr.buffered.length)===0?Ar.removeAllFragments():Ar.hasParts(Tr.type)&&(Ar.detectPartialFragments({frag:Tr,part:null,stats:Tr.stats,id:Tr.type}),Ar.getState(Tr)===FragmentState.PARTIAL&&Ar.removeFragment(Tr))}checkLiveUpdate(Tr){if(Tr.updated&&!Tr.live){const Rr=Tr.fragments[Tr.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:Rr,part:null,stats:Rr.stats,id:Rr.type})}Tr.fragments[0]||(Tr.deltaUpdateFailed=!0)}flushMainBuffer(Tr,Rr,Ar=null){if(!(Tr-Rr))return;const Pr={startOffset:Tr,endOffset:Rr,type:Ar};this.hls.trigger(Events.BUFFER_FLUSHING,Pr)}_loadInitSegment(Tr,Rr){this._doFragLoad(Tr,Rr).then(Ar=>{if(!Ar||this.fragContextChanged(Tr)||!this.levels)throw new Error("init load aborted");return Ar}).then(Ar=>{const{hls:Pr}=this,{payload:Lr}=Ar,Mr=Tr.decryptdata;if(Lr&&Lr.byteLength>0&&Mr&&Mr.key&&Mr.iv&&Mr.method==="AES-128"){const Fr=self.performance.now();return this.decrypter.decrypt(new Uint8Array(Lr),Mr.key.buffer,Mr.iv.buffer).catch(zr=>{throw Pr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!1,error:zr,reason:zr.message,frag:Tr}),zr}).then(zr=>{const Ur=self.performance.now();return Pr.trigger(Events.FRAG_DECRYPTED,{frag:Tr,payload:zr,stats:{tstart:Fr,tdecrypt:Ur}}),Ar.payload=zr,Ar})}return Ar}).then(Ar=>{const{fragCurrent:Pr,hls:Lr,levels:Mr}=this;if(!Mr)throw new Error("init load aborted, missing levels");const Fr=Tr.stats;this.state=State.IDLE,Rr.fragmentError=0,Tr.data=new Uint8Array(Ar.payload),Fr.parsing.start=Fr.buffering.start=self.performance.now(),Fr.parsing.end=Fr.buffering.end=self.performance.now(),Ar.frag===Pr&&Lr.trigger(Events.FRAG_BUFFERED,{stats:Fr,frag:Pr,part:null,id:Tr.type}),this.tick()}).catch(Ar=>{this.state===State.STOPPED||this.state===State.ERROR||(this.warn(Ar),this.resetFragmentLoading(Tr))})}fragContextChanged(Tr){const{fragCurrent:Rr}=this;return!Tr||!Rr||Tr.level!==Rr.level||Tr.sn!==Rr.sn||Tr.urlId!==Rr.urlId}fragBufferedComplete(Tr,Rr){var Ar,Pr,Lr,Mr;const Fr=this.mediaBuffer?this.mediaBuffer:this.media;this.log(`Buffered ${Tr.type} sn: ${Tr.sn}${Rr?" part: "+Rr.index:""} of ${this.playlistType===PlaylistLevelType.MAIN?"level":"track"} ${Tr.level} (frag:[${((Ar=Tr.startPTS)!=null?Ar:NaN).toFixed(3)}-${((Pr=Tr.endPTS)!=null?Pr:NaN).toFixed(3)}] > buffer:${Fr?TimeRanges.toString(BufferHelper.getBuffered(Fr)):"(detached)"})`),this.state=State.IDLE,Fr&&(!this.loadedmetadata&&Tr.type==PlaylistLevelType.MAIN&&Fr.buffered.length&&((Lr=this.fragCurrent)==null?void 0:Lr.sn)===((Mr=this.fragPrevious)==null?void 0:Mr.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(Tr){const{transmuxer:Rr}=this;if(!Rr)return;const{frag:Ar,part:Pr,partsLoaded:Lr}=Tr,Mr=!Lr||Lr.length===0||Lr.some(zr=>!zr),Fr=new ChunkMetadata(Ar.level,Ar.sn,Ar.stats.chunkCount+1,0,Pr?Pr.index:-1,!Mr);Rr.flush(Fr)}_handleFragmentLoadProgress(Tr){}_doFragLoad(Tr,Rr,Ar=null,Pr){var Lr;const Mr=Rr==null?void 0:Rr.details;if(!this.levels||!Mr)throw new Error(`frag load aborted, missing level${Mr?"":" detail"}s`);let Fr=null;if(Tr.encrypted&&!((Lr=Tr.decryptdata)!=null&&Lr.key)?(this.log(`Loading key for ${Tr.sn} of [${Mr.startSN}-${Mr.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${Tr.level}`),this.state=State.KEY_LOADING,this.fragCurrent=Tr,Fr=this.keyLoader.load(Tr).then(Vr=>{if(!this.fragContextChanged(Vr.frag))return this.hls.trigger(Events.KEY_LOADED,Vr),this.state===State.KEY_LOADING&&(this.state=State.IDLE),Vr}),this.hls.trigger(Events.KEY_LOADING,{frag:Tr}),this.fragCurrent===null&&(Fr=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!Tr.encrypted&&Mr.encryptedFragments.length&&this.keyLoader.loadClear(Tr,Mr.encryptedFragments),Ar=Math.max(Tr.start,Ar||0),this.config.lowLatencyMode&&Tr.sn!=="initSegment"){const Vr=Mr.partList;if(Vr&&Pr){Ar>Tr.end&&Mr.fragmentHint&&(Tr=Mr.fragmentHint);const Nr=this.getNextPart(Vr,Tr,Ar);if(Nr>-1){const Dr=Vr[Nr];this.log(`Loading part sn: ${Tr.sn} p: ${Dr.index} cc: ${Tr.cc} of playlist [${Mr.startSN}-${Mr.endSN}] parts [0-${Nr}-${Vr.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${Tr.level}, target: ${parseFloat(Ar.toFixed(3))}`),this.nextLoadPosition=Dr.start+Dr.duration,this.state=State.FRAG_LOADING;let jr;return Fr?jr=Fr.then(Gr=>!Gr||this.fragContextChanged(Gr.frag)?null:this.doFragPartsLoad(Tr,Dr,Rr,Pr)).catch(Gr=>this.handleFragLoadError(Gr)):jr=this.doFragPartsLoad(Tr,Dr,Rr,Pr).catch(Gr=>this.handleFragLoadError(Gr)),this.hls.trigger(Events.FRAG_LOADING,{frag:Tr,part:Dr,targetBufferTime:Ar}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):jr}else if(!Tr.url||this.loadedEndOfParts(Vr,Ar))return Promise.resolve(null)}}this.log(`Loading fragment ${Tr.sn} cc: ${Tr.cc} ${Mr?"of ["+Mr.startSN+"-"+Mr.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${Tr.level}, target: ${parseFloat(Ar.toFixed(3))}`),isFiniteNumber(Tr.sn)&&!this.bitrateTest&&(this.nextLoadPosition=Tr.start+Tr.duration),this.state=State.FRAG_LOADING;const zr=this.config.progressive;let Ur;return zr&&Fr?Ur=Fr.then(Vr=>!Vr||this.fragContextChanged(Vr==null?void 0:Vr.frag)?null:this.fragmentLoader.load(Tr,Pr)).catch(Vr=>this.handleFragLoadError(Vr)):Ur=Promise.all([this.fragmentLoader.load(Tr,zr?Pr:void 0),Fr]).then(([Vr])=>(!zr&&Vr&&Pr&&Pr(Vr),Vr)).catch(Vr=>this.handleFragLoadError(Vr)),this.hls.trigger(Events.FRAG_LOADING,{frag:Tr,targetBufferTime:Ar}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):Ur}doFragPartsLoad(Tr,Rr,Ar,Pr){return new Promise((Lr,Mr)=>{var Fr;const zr=[],Ur=(Fr=Ar.details)==null?void 0:Fr.partList,Vr=Nr=>{this.fragmentLoader.loadPart(Tr,Nr,Pr).then(Dr=>{zr[Nr.index]=Dr;const jr=Dr.part;this.hls.trigger(Events.FRAG_LOADED,Dr);const Gr=getPartWith(Ar,Tr.sn,Nr.index+1)||findPart(Ur,Tr.sn,Nr.index+1);if(Gr)Vr(Gr);else return Lr({frag:Tr,part:jr,partsLoaded:zr})}).catch(Mr)};Vr(Rr)})}handleFragLoadError(Tr){if("data"in Tr){const Rr=Tr.data;Tr.data&&Rr.details===ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(Rr.frag,Rr.part):this.hls.trigger(Events.ERROR,Rr)}else this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,err:Tr,error:Tr,fatal:!0});return null}_handleTransmuxerFlush(Tr){const Rr=this.getCurrentContext(Tr);if(!Rr||this.state!==State.PARSING){!this.fragCurrent&&this.state!==State.STOPPED&&this.state!==State.ERROR&&(this.state=State.IDLE);return}const{frag:Ar,part:Pr,level:Lr}=Rr,Mr=self.performance.now();Ar.stats.parsing.end=Mr,Pr&&(Pr.stats.parsing.end=Mr),this.updateLevelTiming(Ar,Pr,Lr,Tr.partial)}getCurrentContext(Tr){const{levels:Rr,fragCurrent:Ar}=this,{level:Pr,sn:Lr,part:Mr}=Tr;if(!(Rr!=null&&Rr[Pr]))return this.warn(`Levels object was unset while buffering fragment ${Lr} of level ${Pr}. The current chunk will not be buffered.`),null;const Fr=Rr[Pr],zr=Mr>-1?getPartWith(Fr,Lr,Mr):null,Ur=zr?zr.fragment:getFragmentWithSN(Fr,Lr,Ar);return Ur?(Ar&&Ar!==Ur&&(Ur.stats=Ar.stats),{frag:Ur,part:zr,level:Fr}):null}bufferFragmentData(Tr,Rr,Ar,Pr,Lr){var Mr;if(!Tr||this.state!==State.PARSING)return;const{data1:Fr,data2:zr}=Tr;let Ur=Fr;if(Fr&&zr&&(Ur=appendUint8Array(Fr,zr)),!((Mr=Ur)!=null&&Mr.length))return;const Vr={type:Tr.type,frag:Rr,part:Ar,chunkMeta:Pr,parent:Rr.type,data:Ur};if(this.hls.trigger(Events.BUFFER_APPENDING,Vr),Tr.dropped&&Tr.independent&&!Ar){if(Lr)return;this.flushBufferGap(Rr)}}flushBufferGap(Tr){const Rr=this.media;if(!Rr)return;if(!BufferHelper.isBuffered(Rr,Rr.currentTime)){this.flushMainBuffer(0,Tr.start);return}const Ar=Rr.currentTime,Pr=BufferHelper.bufferInfo(Rr,Ar,0),Lr=Tr.duration,Mr=Math.min(this.config.maxFragLookUpTolerance*2,Lr*.25),Fr=Math.max(Math.min(Tr.start-Mr,Pr.end-Mr),Ar+Mr);Tr.start-Fr>Mr&&this.flushMainBuffer(Fr,Tr.start)}getFwdBufferInfo(Tr,Rr){const Ar=this.getLoadPosition();return isFiniteNumber(Ar)?this.getFwdBufferInfoAtPos(Tr,Ar,Rr):null}getFwdBufferInfoAtPos(Tr,Rr,Ar){const{config:{maxBufferHole:Pr}}=this,Lr=BufferHelper.bufferInfo(Tr,Rr,Pr);if(Lr.len===0&&Lr.nextStart!==void 0){const Mr=this.fragmentTracker.getBufferedFrag(Rr,Ar);if(Mr&&Lr.nextStart<Mr.end)return BufferHelper.bufferInfo(Tr,Rr,Math.max(Lr.nextStart,Pr))}return Lr}getMaxBufferLength(Tr){const{config:Rr}=this;let Ar;return Tr?Ar=Math.max(8*Rr.maxBufferSize/Tr,Rr.maxBufferLength):Ar=Rr.maxBufferLength,Math.min(Ar,Rr.maxMaxBufferLength)}reduceMaxBufferLength(Tr){const Rr=this.config,Ar=Tr||Rr.maxBufferLength;return Rr.maxMaxBufferLength>=Ar?(Rr.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${Rr.maxMaxBufferLength}s`),!0):!1}getAppendedFrag(Tr,Rr=PlaylistLevelType.MAIN){const Ar=this.fragmentTracker.getAppendedFrag(Tr,PlaylistLevelType.MAIN);return Ar&&"fragment"in Ar?Ar.fragment:Ar}getNextFragment(Tr,Rr){const Ar=Rr.fragments,Pr=Ar.length;if(!Pr)return null;const{config:Lr}=this,Mr=Ar[0].start;let Fr;if(Rr.live){const zr=Lr.initialLiveManifestSize;if(Pr<zr)return this.warn(`Not enough fragments to start playback (have: ${Pr}, need: ${zr})`),null;!Rr.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(Fr=this.getInitialLiveFragment(Rr,Ar),this.startPosition=Fr?this.hls.liveSyncPosition||Fr.start:Tr)}else Tr<=Mr&&(Fr=Ar[0]);if(!Fr){const zr=Lr.lowLatencyMode?Rr.partEnd:Rr.fragmentEnd;Fr=this.getFragmentAtPosition(Tr,zr,Rr)}return this.mapToInitFragWhenRequired(Fr)}isLoopLoading(Tr,Rr){const Ar=this.fragmentTracker.getState(Tr);return(Ar===FragmentState.OK||Ar===FragmentState.PARTIAL&&!!Tr.gap)&&this.nextLoadPosition>Rr}getNextFragmentLoopLoading(Tr,Rr,Ar,Pr,Lr){const Mr=Tr.gap,Fr=this.getNextFragment(this.nextLoadPosition,Rr);if(Fr===null)return Fr;if(Tr=Fr,Mr&&Tr&&!Tr.gap&&Ar.nextStart){const zr=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,Ar.nextStart,Pr);if(zr!==null&&Ar.len+zr.len>=Lr)return this.log(`buffer full after gaps in "${Pr}" playlist starting at sn: ${Tr.sn}`),null}return Tr}mapToInitFragWhenRequired(Tr){return Tr!=null&&Tr.initSegment&&!(Tr!=null&&Tr.initSegment.data)&&!this.bitrateTest?Tr.initSegment:Tr}getNextPart(Tr,Rr,Ar){let Pr=-1,Lr=!1,Mr=!0;for(let Fr=0,zr=Tr.length;Fr<zr;Fr++){const Ur=Tr[Fr];if(Mr=Mr&&!Ur.independent,Pr>-1&&Ar<Ur.start)break;const Vr=Ur.loaded;Vr?Pr=-1:(Lr||Ur.independent||Mr)&&Ur.fragment===Rr&&(Pr=Fr),Lr=Vr}return Pr}loadedEndOfParts(Tr,Rr){const Ar=Tr[Tr.length-1];return Ar&&Rr>Ar.start&&Ar.loaded}getInitialLiveFragment(Tr,Rr){const Ar=this.fragPrevious;let Pr=null;if(Ar){if(Tr.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${Ar.programDateTime}`),Pr=findFragmentByPDT(Rr,Ar.endProgramDateTime,this.config.maxFragLookUpTolerance)),!Pr){const Lr=Ar.sn+1;if(Lr>=Tr.startSN&&Lr<=Tr.endSN){const Mr=Rr[Lr-Tr.startSN];Ar.cc===Mr.cc&&(Pr=Mr,this.log(`Live playlist, switching playlist, load frag with next SN: ${Pr.sn}`))}Pr||(Pr=findFragWithCC(Rr,Ar.cc),Pr&&this.log(`Live playlist, switching playlist, load frag with same CC: ${Pr.sn}`))}}else{const Lr=this.hls.liveSyncPosition;Lr!==null&&(Pr=this.getFragmentAtPosition(Lr,this.bitrateTest?Tr.fragmentEnd:Tr.edge,Tr))}return Pr}getFragmentAtPosition(Tr,Rr,Ar){const{config:Pr}=this;let{fragPrevious:Lr}=this,{fragments:Mr,endSN:Fr}=Ar;const{fragmentHint:zr}=Ar,Ur=Pr.maxFragLookUpTolerance,Vr=Ar.partList,Nr=!!(Pr.lowLatencyMode&&Vr!=null&&Vr.length&&zr);Nr&&zr&&!this.bitrateTest&&(Mr=Mr.concat(zr),Fr=zr.sn);let Dr;if(Tr<Rr){const jr=Tr>Rr-Ur?0:Ur;Dr=findFragmentByPTS(Lr,Mr,Tr,jr)}else Dr=Mr[Mr.length-1];if(Dr){const jr=Dr.sn-Ar.startSN,Gr=this.fragmentTracker.getState(Dr);if((Gr===FragmentState.OK||Gr===FragmentState.PARTIAL&&Dr.gap)&&(Lr=Dr),Lr&&Dr.sn===Lr.sn&&(!Nr||Vr[0].fragment.sn>Dr.sn)&&Lr&&Dr.level===Lr.level){const qr=Mr[jr+1];Dr.sn<Fr&&this.fragmentTracker.getState(qr)!==FragmentState.OK?Dr=qr:Dr=null}}return Dr}synchronizeToLiveEdge(Tr){const{config:Rr,media:Ar}=this;if(!Ar)return;const Pr=this.hls.liveSyncPosition,Lr=Ar.currentTime,Mr=Tr.fragments[0].start,Fr=Tr.edge,zr=Lr>=Mr-Rr.maxFragLookUpTolerance&&Lr<=Fr;if(Pr!==null&&Ar.duration>Pr&&(Lr<Pr||!zr)){const Ur=Rr.liveMaxLatencyDuration!==void 0?Rr.liveMaxLatencyDuration:Rr.liveMaxLatencyDurationCount*Tr.targetduration;(!zr&&Ar.readyState<4||Lr<Fr-Ur)&&(this.loadedmetadata||(this.nextLoadPosition=Pr),Ar.readyState&&(this.warn(`Playback: ${Lr.toFixed(3)} is located too far from the end of live sliding playlist: ${Fr}, reset currentTime to : ${Pr.toFixed(3)}`),Ar.currentTime=Pr))}}alignPlaylists(Tr,Rr){const{levels:Ar,levelLastLoaded:Pr,fragPrevious:Lr}=this,Mr=Pr!==null?Ar[Pr]:null,Fr=Tr.fragments.length;if(!Fr)return this.warn("No fragments in live playlist"),0;const zr=Tr.fragments[0].start,Ur=!Rr,Vr=Tr.alignedSliding&&isFiniteNumber(zr);if(Ur||!Vr&&!zr){alignStream(Lr,Mr,Tr);const Nr=Tr.fragments[0].start;return this.log(`Live playlist sliding: ${Nr.toFixed(2)} start-sn: ${Rr?Rr.startSN:"na"}->${Tr.startSN} prev-sn: ${Lr?Lr.sn:"na"} fragments: ${Fr}`),Nr}return zr}waitForCdnTuneIn(Tr){return Tr.live&&Tr.canBlockReload&&Tr.partTarget&&Tr.tuneInGoal>Math.max(Tr.partHoldBack,Tr.partTarget*3)}setStartPosition(Tr,Rr){let Ar=this.startPosition;if(Ar<Rr&&(Ar=-1),Ar===-1||this.lastCurrentTime===-1){const Pr=this.startTimeOffset!==null,Lr=Pr?this.startTimeOffset:Tr.startTimeOffset;Lr!==null&&isFiniteNumber(Lr)?(Ar=Rr+Lr,Lr<0&&(Ar+=Tr.totalduration),Ar=Math.min(Math.max(Rr,Ar),Rr+Tr.totalduration),this.log(`Start time offset ${Lr} found in ${Pr?"multivariant":"media"} playlist, adjust startPosition to ${Ar}`),this.startPosition=Ar):Tr.live?Ar=this.hls.liveSyncPosition||Rr:this.startPosition=Ar=0,this.lastCurrentTime=Ar}this.nextLoadPosition=Ar}getLoadPosition(){const{media:Tr}=this;let Rr=0;return this.loadedmetadata&&Tr?Rr=Tr.currentTime:this.nextLoadPosition&&(Rr=this.nextLoadPosition),Rr}handleFragLoadAborted(Tr,Rr){this.transmuxer&&Tr.sn!=="initSegment"&&Tr.stats.aborted&&(this.warn(`Fragment ${Tr.sn}${Rr?" part "+Rr.index:""} of level ${Tr.level} was aborted`),this.resetFragmentLoading(Tr))}resetFragmentLoading(Tr){(!this.fragCurrent||!this.fragContextChanged(Tr)&&this.state!==State.FRAG_LOADING_WAITING_RETRY)&&(this.state=State.IDLE)}onFragmentOrKeyLoadError(Tr,Rr){if(Rr.chunkMeta&&!Rr.frag){const Nr=this.getCurrentContext(Rr.chunkMeta);Nr&&(Rr.frag=Nr.frag)}const Ar=Rr.frag;if(!Ar||Ar.type!==Tr||!this.levels)return;if(this.fragContextChanged(Ar)){var Pr;this.warn(`Frag load error must match current frag to retry ${Ar.url} > ${(Pr=this.fragCurrent)==null?void 0:Pr.url}`);return}const Lr=Rr.details===ErrorDetails.FRAG_GAP;Lr&&this.fragmentTracker.fragBuffered(Ar,!0);const Mr=Rr.errorAction,{action:Fr,retryCount:zr=0,retryConfig:Ur}=Mr||{};if(Mr&&Fr===NetworkErrorAction.RetryRequest&&Ur){var Vr;this.resetStartWhenNotLoaded((Vr=this.levelLastLoaded)!=null?Vr:Ar.level);const Nr=getRetryDelay(Ur,zr);this.warn(`Fragment ${Ar.sn} of ${Tr} ${Ar.level} errored with ${Rr.details}, retrying loading ${zr+1}/${Ur.maxNumRetry} in ${Nr}ms`),Mr.resolved=!0,this.retryDate=self.performance.now()+Nr,this.state=State.FRAG_LOADING_WAITING_RETRY}else Ur&&Mr?(this.resetFragmentErrors(Tr),zr<Ur.maxNumRetry?Lr||(Mr.resolved=!0):logger.warn(`${Rr.details} reached or exceeded max retry (${zr})`)):(Mr==null?void 0:Mr.action)===NetworkErrorAction.SendAlternateToPenaltyBox?this.state=State.WAITING_LEVEL:this.state=State.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(Tr){if(this.state===State.PARSING||this.state===State.PARSED){const Rr=Tr.parent,Ar=this.getFwdBufferInfo(this.mediaBuffer,Rr),Pr=Ar&&Ar.len>.5;Pr&&this.reduceMaxBufferLength(Ar.len);const Lr=!Pr;return Lr&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${Rr} buffer`),Tr.frag&&(this.fragmentTracker.removeFragment(Tr.frag),this.nextLoadPosition=Tr.frag.start),this.resetLoadingState(),Lr}return!1}resetFragmentErrors(Tr){Tr===PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==State.STOPPED&&(this.state=State.IDLE)}afterBufferFlushed(Tr,Rr,Ar){if(!Tr)return;const Pr=BufferHelper.getBuffered(Tr);this.fragmentTracker.detectEvictedFragments(Rr,Pr,Ar),this.state===State.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=State.IDLE}resetStartWhenNotLoaded(Tr){if(!this.loadedmetadata){this.startFragRequested=!1;const Rr=this.levels?this.levels[Tr].details:null;Rr!=null&&Rr.live?(this.startPosition=-1,this.setStartPosition(Rr,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(Tr){var Rr;this.warn(`The loading context changed while buffering fragment ${Tr.sn} of level ${Tr.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded((Rr=this.levelLastLoaded)!=null?Rr:Tr.level),this.resetLoadingState()}removeUnbufferedFrags(Tr=0){this.fragmentTracker.removeFragmentsInRange(Tr,1/0,this.playlistType,!1,!0)}updateLevelTiming(Tr,Rr,Ar,Pr){var Lr;const Mr=Ar.details;if(!Mr){this.warn("level.details undefined");return}if(Object.keys(Tr.elementaryStreams).reduce((zr,Ur)=>{const Vr=Tr.elementaryStreams[Ur];if(Vr){const Nr=Vr.endPTS-Vr.startPTS;if(Nr<=0)return this.warn(`Could not parse fragment ${Tr.sn} ${Ur} duration reliably (${Nr})`),zr||!1;const Dr=Pr?0:updateFragPTSDTS(Mr,Tr,Vr.startPTS,Vr.endPTS,Vr.startDTS,Vr.endDTS);return this.hls.trigger(Events.LEVEL_PTS_UPDATED,{details:Mr,level:Ar,drift:Dr,type:Ur,frag:Tr,start:Vr.startPTS,end:Vr.endPTS}),!0}return zr},!1))Ar.fragmentError=0;else if(((Lr=this.transmuxer)==null?void 0:Lr.error)===null){const zr=new Error(`Found no media in fragment ${Tr.sn} of level ${Tr.level} resetting transmuxer to fallback to playlist timing`);if(Ar.fragmentError===0&&(Ar.fragmentError++,Tr.gap=!0,this.fragmentTracker.removeFragment(Tr),this.fragmentTracker.fragBuffered(Tr,!0)),this.warn(zr.message),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:zr,frag:Tr,reason:`Found no media in msn ${Tr.sn} of level "${Ar.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=State.PARSED,this.hls.trigger(Events.FRAG_PARSED,{frag:Tr,part:Rr})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(Tr){if(Tr.event==="demuxerWorker"){var Rr,Ar,Pr;this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded((Rr=(Ar=this.levelLastLoaded)!=null?Ar:(Pr=this.fragCurrent)==null?void 0:Pr.level)!=null?Rr:0),this.resetLoadingState()}}set state(Tr){const Rr=this._state;Rr!==Tr&&(this._state=Tr,this.log(`${Rr}->${Tr}`))}get state(){return this._state}}function getSourceBuffer(){return self.SourceBuffer||self.WebKitSourceBuffer}function isSupported(){const _r=getMediaSource();if(!_r)return!1;const Tr=getSourceBuffer(),Rr=_r&&typeof _r.isTypeSupported=="function"&&_r.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),Ar=!Tr||Tr.prototype&&typeof Tr.prototype.appendBuffer=="function"&&typeof Tr.prototype.remove=="function";return!!Rr&&!!Ar}function changeTypeSupported(){var _r;const Tr=getSourceBuffer();return typeof(Tr==null||(_r=Tr.prototype)==null?void 0:_r.changeType)=="function"}function hasUMDWorker(){return typeof __HLS_WORKER_BUNDLE__=="function"}function injectWorker(){const _r=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),Tr=self.URL.createObjectURL(_r);return{worker:new self.Worker(Tr),objectURL:Tr}}function loadWorker(_r){const Tr=new self.URL(_r,self.location.href).href;return{worker:new self.Worker(Tr),scriptURL:Tr}}function dummyTrack(_r="",Tr=9e4){return{type:_r,id:-1,pid:-1,inputTimeScale:Tr,sequenceNumber:-1,samples:[],dropped:0}}class BaseAudioDemuxer{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(Tr,Rr,Ar,Pr){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(Tr){this.initPTS=Tr,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(Tr,Rr){return!1}appendFrame(Tr,Rr,Ar){}demux(Tr,Rr){this.cachedData&&(Tr=appendUint8Array(this.cachedData,Tr),this.cachedData=null);let Ar=getID3Data(Tr,0),Pr=Ar?Ar.length:0,Lr;const Mr=this._audioTrack,Fr=this._id3Track,zr=Ar?getTimeStamp(Ar):void 0,Ur=Tr.length;for((this.basePTS===null||this.frameIndex===0&&isFiniteNumber(zr))&&(this.basePTS=initPTSFn(zr,Rr,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),Ar&&Ar.length>0&&Fr.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:Ar,type:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});Pr<Ur;){if(this.canParse(Tr,Pr)){const Vr=this.appendFrame(Mr,Tr,Pr);Vr?(this.frameIndex++,this.lastPTS=Vr.sample.pts,Pr+=Vr.length,Lr=Pr):Pr=Ur}else canParse$2(Tr,Pr)?(Ar=getID3Data(Tr,Pr),Fr.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:Ar,type:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),Pr+=Ar.length,Lr=Pr):Pr++;if(Pr===Ur&&Lr!==Ur){const Vr=sliceUint8(Tr,Lr);this.cachedData?this.cachedData=appendUint8Array(this.cachedData,Vr):this.cachedData=Vr}}return{audioTrack:Mr,videoTrack:dummyTrack(),id3Track:Fr,textTrack:dummyTrack()}}demuxSampleAes(Tr,Rr,Ar){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(Tr){const Rr=this.cachedData;return Rr&&(this.cachedData=null,this.demux(Rr,0)),{audioTrack:this._audioTrack,videoTrack:dummyTrack(),id3Track:this._id3Track,textTrack:dummyTrack()}}destroy(){}}const initPTSFn=(_r,Tr,Rr)=>{if(isFiniteNumber(_r))return _r*90;const Ar=Rr?Rr.baseTime*9e4/Rr.timescale:0;return Tr*9e4+Ar};function getAudioConfig(_r,Tr,Rr,Ar){let Pr,Lr,Mr,Fr;const zr=navigator.userAgent.toLowerCase(),Ur=Ar,Vr=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Pr=((Tr[Rr+2]&192)>>>6)+1;const Nr=(Tr[Rr+2]&60)>>>2;if(Nr>Vr.length-1){_r.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:`invalid ADTS sampling index:${Nr}`});return}return Mr=(Tr[Rr+2]&1)<<2,Mr|=(Tr[Rr+3]&192)>>>6,logger.log(`manifest codec:${Ar}, ADTS type:${Pr}, samplingIndex:${Nr}`),/firefox/i.test(zr)?Nr>=6?(Pr=5,Fr=new Array(4),Lr=Nr-3):(Pr=2,Fr=new Array(2),Lr=Nr):zr.indexOf("android")!==-1?(Pr=2,Fr=new Array(2),Lr=Nr):(Pr=5,Fr=new Array(4),Ar&&(Ar.indexOf("mp4a.40.29")!==-1||Ar.indexOf("mp4a.40.5")!==-1)||!Ar&&Nr>=6?Lr=Nr-3:((Ar&&Ar.indexOf("mp4a.40.2")!==-1&&(Nr>=6&&Mr===1||/vivaldi/i.test(zr))||!Ar&&Mr===1)&&(Pr=2,Fr=new Array(2)),Lr=Nr)),Fr[0]=Pr<<3,Fr[0]|=(Nr&14)>>1,Fr[1]|=(Nr&1)<<7,Fr[1]|=Mr<<3,Pr===5&&(Fr[1]|=(Lr&14)>>1,Fr[2]=(Lr&1)<<7,Fr[2]|=8,Fr[3]=0),{config:Fr,samplerate:Vr[Nr],channelCount:Mr,codec:"mp4a.40."+Pr,manifestCodec:Ur}}function isHeaderPattern$1(_r,Tr){return _r[Tr]===255&&(_r[Tr+1]&246)===240}function getHeaderLength(_r,Tr){return _r[Tr+1]&1?7:9}function getFullFrameLength(_r,Tr){return(_r[Tr+3]&3)<<11|_r[Tr+4]<<3|(_r[Tr+5]&224)>>>5}function canGetFrameLength(_r,Tr){return Tr+5<_r.length}function isHeader$1(_r,Tr){return Tr+1<_r.length&&isHeaderPattern$1(_r,Tr)}function canParse$1(_r,Tr){return canGetFrameLength(_r,Tr)&&isHeaderPattern$1(_r,Tr)&&getFullFrameLength(_r,Tr)<=_r.length-Tr}function probe$1(_r,Tr){if(isHeader$1(_r,Tr)){const Rr=getHeaderLength(_r,Tr);if(Tr+Rr>=_r.length)return!1;const Ar=getFullFrameLength(_r,Tr);if(Ar<=Rr)return!1;const Pr=Tr+Ar;return Pr===_r.length||isHeader$1(_r,Pr)}return!1}function initTrackConfig(_r,Tr,Rr,Ar,Pr){if(!_r.samplerate){const Lr=getAudioConfig(Tr,Rr,Ar,Pr);if(!Lr)return;_r.config=Lr.config,_r.samplerate=Lr.samplerate,_r.channelCount=Lr.channelCount,_r.codec=Lr.codec,_r.manifestCodec=Lr.manifestCodec,logger.log(`parsed codec:${_r.codec}, rate:${Lr.samplerate}, channels:${Lr.channelCount}`)}}function getFrameDuration(_r){return 1024*9e4/_r}function parseFrameHeader(_r,Tr){const Rr=getHeaderLength(_r,Tr);if(Tr+Rr<=_r.length){const Ar=getFullFrameLength(_r,Tr)-Rr;if(Ar>0)return{headerLength:Rr,frameLength:Ar}}}function appendFrame$1(_r,Tr,Rr,Ar,Pr){const Lr=getFrameDuration(_r.samplerate),Mr=Ar+Pr*Lr,Fr=parseFrameHeader(Tr,Rr);let zr;if(Fr){const{frameLength:Nr,headerLength:Dr}=Fr,jr=Dr+Nr,Gr=Math.max(0,Rr+jr-Tr.length);Gr?(zr=new Uint8Array(jr-Dr),zr.set(Tr.subarray(Rr+Dr,Tr.length),0)):zr=Tr.subarray(Rr+Dr,Rr+jr);const Wr={unit:zr,pts:Mr};return Gr||_r.samples.push(Wr),{sample:Wr,length:jr,missing:Gr}}const Ur=Tr.length-Rr;return zr=new Uint8Array(Ur),zr.set(Tr.subarray(Rr,Tr.length),0),{sample:{unit:zr,pts:Mr},length:Ur,missing:-1}}class AACDemuxer extends BaseAudioDemuxer{constructor(Tr,Rr){super(),this.observer=void 0,this.config=void 0,this.observer=Tr,this.config=Rr}resetInitSegment(Tr,Rr,Ar,Pr){super.resetInitSegment(Tr,Rr,Ar,Pr),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:Rr,duration:Pr,inputTimeScale:9e4,dropped:0}}static probe(Tr){if(!Tr)return!1;let Ar=(getID3Data(Tr,0)||[]).length;for(let Pr=Tr.length;Ar<Pr;Ar++)if(probe$1(Tr,Ar))return logger.log("ADTS sync word found !"),!0;return!1}canParse(Tr,Rr){return canParse$1(Tr,Rr)}appendFrame(Tr,Rr,Ar){initTrackConfig(Tr,this.observer,Rr,Ar,Tr.manifestCodec);const Pr=appendFrame$1(Tr,Rr,Ar,this.basePTS,this.frameIndex);if(Pr&&Pr.missing===0)return Pr}}const emsgSchemePattern=/\/emsg[-/]ID3/i;class MP4Demuxer{constructor(Tr,Rr){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=Rr}resetTimeStamp(){}resetInitSegment(Tr,Rr,Ar,Pr){const Lr=this.videoTrack=dummyTrack("video",1),Mr=this.audioTrack=dummyTrack("audio",1),Fr=this.txtTrack=dummyTrack("text",1);if(this.id3Track=dummyTrack("id3",1),this.timeOffset=0,!(Tr!=null&&Tr.byteLength))return;const zr=parseInitSegment(Tr);if(zr.video){const{id:Ur,timescale:Vr,codec:Nr}=zr.video;Lr.id=Ur,Lr.timescale=Fr.timescale=Vr,Lr.codec=Nr}if(zr.audio){const{id:Ur,timescale:Vr,codec:Nr}=zr.audio;Mr.id=Ur,Mr.timescale=Vr,Mr.codec=Nr}Fr.id=RemuxerTrackIdConfig.text,Lr.sampleDuration=0,Lr.duration=Mr.duration=Pr}resetContiguity(){this.remainderData=null}static probe(Tr){return Tr=Tr.length>16384?Tr.subarray(0,16384):Tr,findBox(Tr,["moof"]).length>0}demux(Tr,Rr){this.timeOffset=Rr;let Ar=Tr;const Pr=this.videoTrack,Lr=this.txtTrack;if(this.config.progressive){this.remainderData&&(Ar=appendUint8Array(this.remainderData,Tr));const Fr=segmentValidRange(Ar);this.remainderData=Fr.remainder,Pr.samples=Fr.valid||new Uint8Array}else Pr.samples=Ar;const Mr=this.extractID3Track(Pr,Rr);return Lr.samples=parseSamples(Rr,Pr),{videoTrack:Pr,audioTrack:this.audioTrack,id3Track:Mr,textTrack:this.txtTrack}}flush(){const Tr=this.timeOffset,Rr=this.videoTrack,Ar=this.txtTrack;Rr.samples=this.remainderData||new Uint8Array,this.remainderData=null;const Pr=this.extractID3Track(Rr,this.timeOffset);return Ar.samples=parseSamples(Tr,Rr),{videoTrack:Rr,audioTrack:dummyTrack(),id3Track:Pr,textTrack:dummyTrack()}}extractID3Track(Tr,Rr){const Ar=this.id3Track;if(Tr.samples.length){const Pr=findBox(Tr.samples,["emsg"]);Pr&&Pr.forEach(Lr=>{const Mr=parseEmsg(Lr);if(emsgSchemePattern.test(Mr.schemeIdUri)){const Fr=isFiniteNumber(Mr.presentationTime)?Mr.presentationTime/Mr.timeScale:Rr+Mr.presentationTimeDelta/Mr.timeScale;let zr=Mr.eventDuration===4294967295?Number.POSITIVE_INFINITY:Mr.eventDuration/Mr.timeScale;zr<=.001&&(zr=Number.POSITIVE_INFINITY);const Ur=Mr.payload;Ar.samples.push({data:Ur,len:Ur.byteLength,dts:Fr,pts:Fr,type:MetadataSchema.emsg,duration:zr})}})}return Ar}demuxSampleAes(Tr,Rr,Ar){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}let chromeVersion$1=null;const BitratesMap=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot=[0,1,1,4];function appendFrame(_r,Tr,Rr,Ar,Pr){if(Rr+24>Tr.length)return;const Lr=parseHeader(Tr,Rr);if(Lr&&Rr+Lr.frameLength<=Tr.length){const Mr=Lr.samplesPerFrame*9e4/Lr.sampleRate,Fr=Ar+Pr*Mr,zr={unit:Tr.subarray(Rr,Rr+Lr.frameLength),pts:Fr,dts:Fr};return _r.config=[],_r.channelCount=Lr.channelCount,_r.samplerate=Lr.sampleRate,_r.samples.push(zr),{sample:zr,length:Lr.frameLength,missing:0}}}function parseHeader(_r,Tr){const Rr=_r[Tr+1]>>3&3,Ar=_r[Tr+1]>>1&3,Pr=_r[Tr+2]>>4&15,Lr=_r[Tr+2]>>2&3;if(Rr!==1&&Pr!==0&&Pr!==15&&Lr!==3){const Mr=_r[Tr+2]>>1&1,Fr=_r[Tr+3]>>6,zr=Rr===3?3-Ar:Ar===3?3:4,Ur=BitratesMap[zr*14+Pr-1]*1e3,Nr=SamplingRateMap[(Rr===3?0:Rr===2?1:2)*3+Lr],Dr=Fr===3?1:2,jr=SamplesCoefficients[Rr][Ar],Gr=BytesInSlot[Ar],Wr=jr*8*Gr,qr=Math.floor(jr*Ur/Nr+Mr)*Gr;if(chromeVersion$1===null){const Zr=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);chromeVersion$1=Zr?parseInt(Zr[1]):0}return!!chromeVersion$1&&chromeVersion$1<=87&&Ar===2&&Ur>=224e3&&Fr===0&&(_r[Tr+3]=_r[Tr+3]|128),{sampleRate:Nr,channelCount:Dr,frameLength:qr,samplesPerFrame:Wr}}}function isHeaderPattern(_r,Tr){return _r[Tr]===255&&(_r[Tr+1]&224)===224&&(_r[Tr+1]&6)!==0}function isHeader(_r,Tr){return Tr+1<_r.length&&isHeaderPattern(_r,Tr)}function canParse(_r,Tr){return isHeaderPattern(_r,Tr)&&4<=_r.length-Tr}function probe(_r,Tr){if(Tr+1<_r.length&&isHeaderPattern(_r,Tr)){const Ar=parseHeader(_r,Tr);let Pr=4;Ar!=null&&Ar.frameLength&&(Pr=Ar.frameLength);const Lr=Tr+Pr;return Lr===_r.length||isHeader(_r,Lr)}return!1}class ExpGolomb{constructor(Tr){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=Tr,this.bytesAvailable=Tr.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const Tr=this.data,Rr=this.bytesAvailable,Ar=Tr.byteLength-Rr,Pr=new Uint8Array(4),Lr=Math.min(4,Rr);if(Lr===0)throw new Error("no bytes available");Pr.set(Tr.subarray(Ar,Ar+Lr)),this.word=new DataView(Pr.buffer).getUint32(0),this.bitsAvailable=Lr*8,this.bytesAvailable-=Lr}skipBits(Tr){let Rr;Tr=Math.min(Tr,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>Tr?(this.word<<=Tr,this.bitsAvailable-=Tr):(Tr-=this.bitsAvailable,Rr=Tr>>3,Tr-=Rr<<3,this.bytesAvailable-=Rr,this.loadWord(),this.word<<=Tr,this.bitsAvailable-=Tr)}readBits(Tr){let Rr=Math.min(this.bitsAvailable,Tr);const Ar=this.word>>>32-Rr;if(Tr>32&&logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=Rr,this.bitsAvailable>0)this.word<<=Rr;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return Rr=Tr-Rr,Rr>0&&this.bitsAvailable?Ar<<Rr|this.readBits(Rr):Ar}skipLZ(){let Tr;for(Tr=0;Tr<this.bitsAvailable;++Tr)if(this.word&2147483648>>>Tr)return this.word<<=Tr,this.bitsAvailable-=Tr,Tr;return this.loadWord(),Tr+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const Tr=this.skipLZ();return this.readBits(Tr+1)-1}readEG(){const Tr=this.readUEG();return 1&Tr?1+Tr>>>1:-1*(Tr>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(Tr){let Rr=8,Ar=8,Pr;for(let Lr=0;Lr<Tr;Lr++)Ar!==0&&(Pr=this.readEG(),Ar=(Rr+Pr+256)%256),Rr=Ar===0?Rr:Ar}readSPS(){let Tr=0,Rr=0,Ar=0,Pr=0,Lr,Mr,Fr;const zr=this.readUByte.bind(this),Ur=this.readBits.bind(this),Vr=this.readUEG.bind(this),Nr=this.readBoolean.bind(this),Dr=this.skipBits.bind(this),jr=this.skipEG.bind(this),Gr=this.skipUEG.bind(this),Wr=this.skipScalingList.bind(this);zr();const qr=zr();if(Ur(5),Dr(3),zr(),Gr(),qr===100||qr===110||qr===122||qr===244||qr===44||qr===83||qr===86||qr===118||qr===128){const es=Vr();if(es===3&&Dr(1),Gr(),Gr(),Dr(1),Nr())for(Mr=es!==3?8:12,Fr=0;Fr<Mr;Fr++)Nr()&&(Fr<6?Wr(16):Wr(64))}Gr();const Kr=Vr();if(Kr===0)Vr();else if(Kr===1)for(Dr(1),jr(),jr(),Lr=Vr(),Fr=0;Fr<Lr;Fr++)jr();Gr(),Dr(1);const Xr=Vr(),Zr=Vr(),Jr=Ur(1);Jr===0&&Dr(1),Dr(1),Nr()&&(Tr=Vr(),Rr=Vr(),Ar=Vr(),Pr=Vr());let _i=[1,1];if(Nr()&&Nr())switch(zr()){case 1:_i=[1,1];break;case 2:_i=[12,11];break;case 3:_i=[10,11];break;case 4:_i=[16,11];break;case 5:_i=[40,33];break;case 6:_i=[24,11];break;case 7:_i=[20,11];break;case 8:_i=[32,11];break;case 9:_i=[80,33];break;case 10:_i=[18,11];break;case 11:_i=[15,11];break;case 12:_i=[64,33];break;case 13:_i=[160,99];break;case 14:_i=[4,3];break;case 15:_i=[3,2];break;case 16:_i=[2,1];break;case 255:{_i=[zr()<<8|zr(),zr()<<8|zr()];break}}return{width:Math.ceil((Xr+1)*16-Tr*2-Rr*2),height:(2-Jr)*(Zr+1)*16-(Jr?2:4)*(Ar+Pr),pixelRatio:_i}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class SampleAesDecrypter{constructor(Tr,Rr,Ar){this.keyData=void 0,this.decrypter=void 0,this.keyData=Ar,this.decrypter=new Decrypter(Rr,{removePKCS7Padding:!1})}decryptBuffer(Tr){return this.decrypter.decrypt(Tr,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(Tr,Rr,Ar){const Pr=Tr[Rr].unit;if(Pr.length<=16)return;const Lr=Pr.subarray(16,Pr.length-Pr.length%16),Mr=Lr.buffer.slice(Lr.byteOffset,Lr.byteOffset+Lr.length);this.decryptBuffer(Mr).then(Fr=>{const zr=new Uint8Array(Fr);Pr.set(zr,16),this.decrypter.isSync()||this.decryptAacSamples(Tr,Rr+1,Ar)})}decryptAacSamples(Tr,Rr,Ar){for(;;Rr++){if(Rr>=Tr.length){Ar();return}if(!(Tr[Rr].unit.length<32)&&(this.decryptAacSample(Tr,Rr,Ar),!this.decrypter.isSync()))return}}getAvcEncryptedData(Tr){const Rr=Math.floor((Tr.length-48)/160)*16+16,Ar=new Int8Array(Rr);let Pr=0;for(let Lr=32;Lr<Tr.length-16;Lr+=160,Pr+=16)Ar.set(Tr.subarray(Lr,Lr+16),Pr);return Ar}getAvcDecryptedUnit(Tr,Rr){const Ar=new Uint8Array(Rr);let Pr=0;for(let Lr=32;Lr<Tr.length-16;Lr+=160,Pr+=16)Tr.set(Ar.subarray(Pr,Pr+16),Lr);return Tr}decryptAvcSample(Tr,Rr,Ar,Pr,Lr){const Mr=discardEPB(Lr.data),Fr=this.getAvcEncryptedData(Mr);this.decryptBuffer(Fr.buffer).then(zr=>{Lr.data=this.getAvcDecryptedUnit(Mr,zr),this.decrypter.isSync()||this.decryptAvcSamples(Tr,Rr,Ar+1,Pr)})}decryptAvcSamples(Tr,Rr,Ar,Pr){if(Tr instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;Rr++,Ar=0){if(Rr>=Tr.length){Pr();return}const Lr=Tr[Rr].units;for(;!(Ar>=Lr.length);Ar++){const Mr=Lr[Ar];if(!(Mr.data.length<=48||Mr.type!==1&&Mr.type!==5)&&(this.decryptAvcSample(Tr,Rr,Ar,Pr,Mr),!this.decrypter.isSync()))return}}}}const PACKET_LENGTH=188;class TSDemuxer{constructor(Tr,Rr,Ar){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=Tr,this.config=Rr,this.typeSupported=Ar}static probe(Tr){const Rr=TSDemuxer.syncOffset(Tr);return Rr>0&&logger.warn(`MPEG2-TS detected but first sync word found @ offset ${Rr}`),Rr!==-1}static syncOffset(Tr){const Rr=Tr.length;let Ar=Math.min(PACKET_LENGTH*5,Tr.length-PACKET_LENGTH)+1,Pr=0;for(;Pr<Ar;){let Lr=!1,Mr=-1,Fr=0;for(let zr=Pr;zr<Rr;zr+=PACKET_LENGTH)if(Tr[zr]===71){if(Fr++,Mr===-1&&(Mr=zr,Mr!==0&&(Ar=Math.min(Mr+PACKET_LENGTH*99,Tr.length-PACKET_LENGTH)+1)),Lr||(Lr=parsePID(Tr,zr)===0),Lr&&Fr>1&&(Mr===0&&Fr>2||zr+PACKET_LENGTH>Ar))return Mr}else{if(Fr)return-1;break}Pr++}return-1}static createTrack(Tr,Rr){return{container:Tr==="video"||Tr==="audio"?"video/mp2t":void 0,type:Tr,id:RemuxerTrackIdConfig[Tr],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:Tr==="audio"?Rr:void 0}}resetInitSegment(Tr,Rr,Ar,Pr){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=TSDemuxer.createTrack("video"),this._audioTrack=TSDemuxer.createTrack("audio",Pr),this._id3Track=TSDemuxer.createTrack("id3"),this._txtTrack=TSDemuxer.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=Rr,this.videoCodec=Ar,this._duration=Pr}resetTimeStamp(){}resetContiguity(){const{_audioTrack:Tr,_avcTrack:Rr,_id3Track:Ar}=this;Tr&&(Tr.pesData=null),Rr&&(Rr.pesData=null),Ar&&(Ar.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null}demux(Tr,Rr,Ar=!1,Pr=!1){Ar||(this.sampleAes=null);let Lr;const Mr=this._avcTrack,Fr=this._audioTrack,zr=this._id3Track,Ur=this._txtTrack;let Vr=Mr.pid,Nr=Mr.pesData,Dr=Fr.pid,jr=zr.pid,Gr=Fr.pesData,Wr=zr.pesData,qr=null,Kr=this.pmtParsed,Xr=this._pmtId,Zr=Tr.length;if(this.remainderData&&(Tr=appendUint8Array(this.remainderData,Tr),Zr=Tr.length,this.remainderData=null),Zr<PACKET_LENGTH&&!Pr)return this.remainderData=Tr,{audioTrack:Fr,videoTrack:Mr,id3Track:zr,textTrack:Ur};const Jr=Math.max(0,TSDemuxer.syncOffset(Tr));Zr-=(Zr-Jr)%PACKET_LENGTH,Zr<Tr.byteLength&&!Pr&&(this.remainderData=new Uint8Array(Tr.buffer,Zr,Tr.buffer.byteLength-Zr));let _i=0;for(let ts=Jr;ts<Zr;ts+=PACKET_LENGTH)if(Tr[ts]===71){const rs=!!(Tr[ts+1]&64),ns=parsePID(Tr,ts),as=(Tr[ts+3]&48)>>4;let ls;if(as>1){if(ls=ts+5+Tr[ts+4],ls===ts+PACKET_LENGTH)continue}else ls=ts+4;switch(ns){case Vr:rs&&(Nr&&(Lr=parsePES(Nr))&&this.parseAVCPES(Mr,Ur,Lr,!1),Nr={data:[],size:0}),Nr&&(Nr.data.push(Tr.subarray(ls,ts+PACKET_LENGTH)),Nr.size+=ts+PACKET_LENGTH-ls);break;case Dr:if(rs){if(Gr&&(Lr=parsePES(Gr)))switch(Fr.segmentCodec){case"aac":this.parseAACPES(Fr,Lr);break;case"mp3":this.parseMPEGPES(Fr,Lr);break}Gr={data:[],size:0}}Gr&&(Gr.data.push(Tr.subarray(ls,ts+PACKET_LENGTH)),Gr.size+=ts+PACKET_LENGTH-ls);break;case jr:rs&&(Wr&&(Lr=parsePES(Wr))&&this.parseID3PES(zr,Lr),Wr={data:[],size:0}),Wr&&(Wr.data.push(Tr.subarray(ls,ts+PACKET_LENGTH)),Wr.size+=ts+PACKET_LENGTH-ls);break;case 0:rs&&(ls+=Tr[ls]+1),Xr=this._pmtId=parsePAT(Tr,ls);break;case Xr:{rs&&(ls+=Tr[ls]+1);const us=parsePMT(Tr,ls,this.typeSupported,Ar);Vr=us.avc,Vr>0&&(Mr.pid=Vr),Dr=us.audio,Dr>0&&(Fr.pid=Dr,Fr.segmentCodec=us.segmentCodec),jr=us.id3,jr>0&&(zr.pid=jr),qr!==null&&!Kr&&(logger.warn(`MPEG-TS PMT found at ${ts} after unknown PID '${qr}'. Backtracking to sync byte @${Jr} to parse all TS packets.`),qr=null,ts=Jr-188),Kr=this.pmtParsed=!0;break}case 17:case 8191:break;default:qr=ns;break}}else _i++;if(_i>0){const ts=new Error(`Found ${_i} TS packet/s that do not start with 0x47`);this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:ts,reason:ts.message})}Mr.pesData=Nr,Fr.pesData=Gr,zr.pesData=Wr;const es={audioTrack:Fr,videoTrack:Mr,id3Track:zr,textTrack:Ur};return Pr&&this.extractRemainingSamples(es),es}flush(){const{remainderData:Tr}=this;this.remainderData=null;let Rr;return Tr?Rr=this.demux(Tr,-1,!1,!0):Rr={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(Rr),this.sampleAes?this.decrypt(Rr,this.sampleAes):Rr}extractRemainingSamples(Tr){const{audioTrack:Rr,videoTrack:Ar,id3Track:Pr,textTrack:Lr}=Tr,Mr=Ar.pesData,Fr=Rr.pesData,zr=Pr.pesData;let Ur;if(Mr&&(Ur=parsePES(Mr))?(this.parseAVCPES(Ar,Lr,Ur,!0),Ar.pesData=null):Ar.pesData=Mr,Fr&&(Ur=parsePES(Fr))){switch(Rr.segmentCodec){case"aac":this.parseAACPES(Rr,Ur);break;case"mp3":this.parseMPEGPES(Rr,Ur);break}Rr.pesData=null}else Fr!=null&&Fr.size&&logger.log("last AAC PES packet truncated,might overlap between fragments"),Rr.pesData=Fr;zr&&(Ur=parsePES(zr))?(this.parseID3PES(Pr,Ur),Pr.pesData=null):Pr.pesData=zr}demuxSampleAes(Tr,Rr,Ar){const Pr=this.demux(Tr,Ar,!0,!this.config.progressive),Lr=this.sampleAes=new SampleAesDecrypter(this.observer,this.config,Rr);return this.decrypt(Pr,Lr)}decrypt(Tr,Rr){return new Promise(Ar=>{const{audioTrack:Pr,videoTrack:Lr}=Tr;Pr.samples&&Pr.segmentCodec==="aac"?Rr.decryptAacSamples(Pr.samples,0,()=>{Lr.samples?Rr.decryptAvcSamples(Lr.samples,0,0,()=>{Ar(Tr)}):Ar(Tr)}):Lr.samples&&Rr.decryptAvcSamples(Lr.samples,0,0,()=>{Ar(Tr)})})}destroy(){this._duration=0}parseAVCPES(Tr,Rr,Ar,Pr){const Lr=this.parseAVCNALu(Tr,Ar.data);let Mr=this.avcSample,Fr,zr=!1;Ar.data=null,Mr&&Lr.length&&!Tr.audFound&&(pushAccessUnit(Mr,Tr),Mr=this.avcSample=createAVCSample(!1,Ar.pts,Ar.dts,"")),Lr.forEach(Ur=>{var Vr;switch(Ur.type){case 1:{let Dr=!1;Fr=!0;const jr=Ur.data;if(zr&&jr.length>4){const Gr=new ExpGolomb(jr).readSliceType();(Gr===2||Gr===4||Gr===7||Gr===9)&&(Dr=!0)}if(Dr){var Nr;(Nr=Mr)!=null&&Nr.frame&&!Mr.key&&(pushAccessUnit(Mr,Tr),Mr=this.avcSample=null)}Mr||(Mr=this.avcSample=createAVCSample(!0,Ar.pts,Ar.dts,"")),Mr.frame=!0,Mr.key=Dr;break}case 5:Fr=!0,(Vr=Mr)!=null&&Vr.frame&&!Mr.key&&(pushAccessUnit(Mr,Tr),Mr=this.avcSample=null),Mr||(Mr=this.avcSample=createAVCSample(!0,Ar.pts,Ar.dts,"")),Mr.key=!0,Mr.frame=!0;break;case 6:{Fr=!0,parseSEIMessageFromNALu(Ur.data,1,Ar.pts,Rr.samples);break}case 7:if(Fr=!0,zr=!0,!Tr.sps){const Dr=Ur.data,Gr=new ExpGolomb(Dr).readSPS();Tr.width=Gr.width,Tr.height=Gr.height,Tr.pixelRatio=Gr.pixelRatio,Tr.sps=[Dr],Tr.duration=this._duration;const Wr=Dr.subarray(1,4);let qr="avc1.";for(let Kr=0;Kr<3;Kr++){let Xr=Wr[Kr].toString(16);Xr.length<2&&(Xr="0"+Xr),qr+=Xr}Tr.codec=qr}break;case 8:Fr=!0,Tr.pps||(Tr.pps=[Ur.data]);break;case 9:Fr=!1,Tr.audFound=!0,Mr&&pushAccessUnit(Mr,Tr),Mr=this.avcSample=createAVCSample(!1,Ar.pts,Ar.dts,"");break;case 12:Fr=!0;break;default:Fr=!1,Mr&&(Mr.debug+="unknown NAL "+Ur.type+" ");break}Mr&&Fr&&Mr.units.push(Ur)}),Pr&&Mr&&(pushAccessUnit(Mr,Tr),this.avcSample=null)}getLastNalUnit(Tr){var Rr;let Ar=this.avcSample,Pr;if((!Ar||Ar.units.length===0)&&(Ar=Tr[Tr.length-1]),(Rr=Ar)!=null&&Rr.units){const Lr=Ar.units;Pr=Lr[Lr.length-1]}return Pr}parseAVCNALu(Tr,Rr){const Ar=Rr.byteLength;let Pr=Tr.naluState||0;const Lr=Pr,Mr=[];let Fr=0,zr,Ur,Vr,Nr=-1,Dr=0;for(Pr===-1&&(Nr=0,Dr=Rr[0]&31,Pr=0,Fr=1);Fr<Ar;){if(zr=Rr[Fr++],!Pr){Pr=zr?0:1;continue}if(Pr===1){Pr=zr?0:2;continue}if(!zr)Pr=3;else if(zr===1){if(Nr>=0){const jr={data:Rr.subarray(Nr,Fr-Pr-1),type:Dr};Mr.push(jr)}else{const jr=this.getLastNalUnit(Tr.samples);if(jr&&(Lr&&Fr<=4-Lr&&jr.state&&(jr.data=jr.data.subarray(0,jr.data.byteLength-Lr)),Ur=Fr-Pr-1,Ur>0)){const Gr=new Uint8Array(jr.data.byteLength+Ur);Gr.set(jr.data,0),Gr.set(Rr.subarray(0,Ur),jr.data.byteLength),jr.data=Gr,jr.state=0}}Fr<Ar?(Vr=Rr[Fr]&31,Nr=Fr,Dr=Vr,Pr=0):Pr=-1}else Pr=0}if(Nr>=0&&Pr>=0){const jr={data:Rr.subarray(Nr,Ar),type:Dr,state:Pr};Mr.push(jr)}if(Mr.length===0){const jr=this.getLastNalUnit(Tr.samples);if(jr){const Gr=new Uint8Array(jr.data.byteLength+Rr.byteLength);Gr.set(jr.data,0),Gr.set(Rr,jr.data.byteLength),jr.data=Gr}}return Tr.naluState=Pr,Mr}parseAACPES(Tr,Rr){let Ar=0;const Pr=this.aacOverFlow;let Lr=Rr.data;if(Pr){this.aacOverFlow=null;const Nr=Pr.missing,Dr=Pr.sample.unit.byteLength;if(Nr===-1){const jr=new Uint8Array(Dr+Lr.byteLength);jr.set(Pr.sample.unit,0),jr.set(Lr,Dr),Lr=jr}else{const jr=Dr-Nr;Pr.sample.unit.set(Lr.subarray(0,Nr),jr),Tr.samples.push(Pr.sample),Ar=Pr.missing}}let Mr,Fr;for(Mr=Ar,Fr=Lr.length;Mr<Fr-1&&!isHeader$1(Lr,Mr);Mr++);if(Mr!==Ar){let Nr;const Dr=Mr<Fr-1;Dr?Nr=`AAC PES did not start with ADTS header,offset:${Mr}`:Nr="No ADTS header found in AAC PES";const jr=new Error(Nr);if(logger.warn(`parsing error: ${Nr}`),this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,levelRetry:Dr,error:jr,reason:Nr}),!Dr)return}initTrackConfig(Tr,this.observer,Lr,Mr,this.audioCodec);let zr;if(Rr.pts!==void 0)zr=Rr.pts;else if(Pr){const Nr=getFrameDuration(Tr.samplerate);zr=Pr.sample.pts+Nr}else{logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let Ur=0,Vr;for(;Mr<Fr;)if(Vr=appendFrame$1(Tr,Lr,Mr,zr,Ur),Mr+=Vr.length,Vr.missing){this.aacOverFlow=Vr;break}else for(Ur++;Mr<Fr-1&&!isHeader$1(Lr,Mr);Mr++);}parseMPEGPES(Tr,Rr){const Ar=Rr.data,Pr=Ar.length;let Lr=0,Mr=0;const Fr=Rr.pts;if(Fr===void 0){logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;Mr<Pr;)if(isHeader(Ar,Mr)){const zr=appendFrame(Tr,Ar,Mr,Fr,Lr);if(zr)Mr+=zr.length,Lr++;else break}else Mr++}parseID3PES(Tr,Rr){if(Rr.pts===void 0){logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const Ar=_extends({},Rr,{type:this._avcTrack?MetadataSchema.emsg:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});Tr.samples.push(Ar)}}function createAVCSample(_r,Tr,Rr,Ar){return{key:_r,frame:!1,pts:Tr,dts:Rr,units:[],debug:Ar,length:0}}function parsePID(_r,Tr){return((_r[Tr+1]&31)<<8)+_r[Tr+2]}function parsePAT(_r,Tr){return(_r[Tr+10]&31)<<8|_r[Tr+11]}function parsePMT(_r,Tr,Rr,Ar){const Pr={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},Lr=(_r[Tr+1]&15)<<8|_r[Tr+2],Mr=Tr+3+Lr-4,Fr=(_r[Tr+10]&15)<<8|_r[Tr+11];for(Tr+=12+Fr;Tr<Mr;){const zr=parsePID(_r,Tr);switch(_r[Tr]){case 207:if(!Ar){logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:Pr.audio===-1&&(Pr.audio=zr);break;case 21:Pr.id3===-1&&(Pr.id3=zr);break;case 219:if(!Ar){logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:Pr.avc===-1&&(Pr.avc=zr);break;case 3:case 4:Rr.mpeg!==!0&&Rr.mp3!==!0?logger.log("MPEG audio found, not supported in this browser"):Pr.audio===-1&&(Pr.audio=zr,Pr.segmentCodec="mp3");break;case 36:logger.warn("Unsupported HEVC stream type found");break}Tr+=((_r[Tr+3]&15)<<8|_r[Tr+4])+5}return Pr}function parsePES(_r){let Tr=0,Rr,Ar,Pr,Lr,Mr;const Fr=_r.data;if(!_r||_r.size===0)return null;for(;Fr[0].length<19&&Fr.length>1;){const Ur=new Uint8Array(Fr[0].length+Fr[1].length);Ur.set(Fr[0]),Ur.set(Fr[1],Fr[0].length),Fr[0]=Ur,Fr.splice(1,1)}if(Rr=Fr[0],(Rr[0]<<16)+(Rr[1]<<8)+Rr[2]===1){if(Ar=(Rr[4]<<8)+Rr[5],Ar&&Ar>_r.size-6)return null;const Ur=Rr[7];Ur&192&&(Lr=(Rr[9]&14)*536870912+(Rr[10]&255)*4194304+(Rr[11]&254)*16384+(Rr[12]&255)*128+(Rr[13]&254)/2,Ur&64?(Mr=(Rr[14]&14)*536870912+(Rr[15]&255)*4194304+(Rr[16]&254)*16384+(Rr[17]&255)*128+(Rr[18]&254)/2,Lr-Mr>60*9e4&&(logger.warn(`${Math.round((Lr-Mr)/9e4)}s delta between PTS and DTS, align them`),Lr=Mr)):Mr=Lr),Pr=Rr[8];let Vr=Pr+9;if(_r.size<=Vr)return null;_r.size-=Vr;const Nr=new Uint8Array(_r.size);for(let Dr=0,jr=Fr.length;Dr<jr;Dr++){Rr=Fr[Dr];let Gr=Rr.byteLength;if(Vr)if(Vr>Gr){Vr-=Gr;continue}else Rr=Rr.subarray(Vr),Gr-=Vr,Vr=0;Nr.set(Rr,Tr),Tr+=Gr}return Ar&&(Ar-=Pr+3),{data:Nr,pts:Lr,dts:Mr,len:Ar}}return null}function pushAccessUnit(_r,Tr){if(_r.units.length&&_r.frame){if(_r.pts===void 0){const Rr=Tr.samples,Ar=Rr.length;if(Ar){const Pr=Rr[Ar-1];_r.pts=Pr.pts,_r.dts=Pr.dts}else{Tr.dropped++;return}}Tr.samples.push(_r)}_r.debug.length&&logger.log(_r.pts+"/"+_r.dts+":"+_r.debug)}class MP3Demuxer extends BaseAudioDemuxer{resetInitSegment(Tr,Rr,Ar,Pr){super.resetInitSegment(Tr,Rr,Ar,Pr),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:Rr,duration:Pr,inputTimeScale:9e4,dropped:0}}static probe(Tr){if(!Tr)return!1;let Ar=(getID3Data(Tr,0)||[]).length;for(let Pr=Tr.length;Ar<Pr;Ar++)if(probe(Tr,Ar))return logger.log("MPEG Audio sync word found !"),!0;return!1}canParse(Tr,Rr){return canParse(Tr,Rr)}appendFrame(Tr,Rr,Ar){if(this.basePTS!==null)return appendFrame(Tr,Rr,Ar,this.basePTS,this.frameIndex)}}class AAC{static getSilentFrame(Tr,Rr){switch(Tr){case"mp4a.40.2":if(Rr===1)return new Uint8Array([0,200,0,128,35,128]);if(Rr===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(Rr===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(Rr===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(Rr===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(Rr===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(Rr===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(Rr===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(Rr===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const UINT32_MAX=Math.pow(2,32)-1;class MP4{static init(){MP4.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let Tr;for(Tr in MP4.types)MP4.types.hasOwnProperty(Tr)&&(MP4.types[Tr]=[Tr.charCodeAt(0),Tr.charCodeAt(1),Tr.charCodeAt(2),Tr.charCodeAt(3)]);const Rr=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Ar=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);MP4.HDLR_TYPES={video:Rr,audio:Ar};const Pr=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Lr=new Uint8Array([0,0,0,0,0,0,0,0]);MP4.STTS=MP4.STSC=MP4.STCO=Lr,MP4.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),MP4.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),MP4.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),MP4.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const Mr=new Uint8Array([105,115,111,109]),Fr=new Uint8Array([97,118,99,49]),zr=new Uint8Array([0,0,0,1]);MP4.FTYP=MP4.box(MP4.types.ftyp,Mr,zr,Mr,Fr),MP4.DINF=MP4.box(MP4.types.dinf,MP4.box(MP4.types.dref,Pr))}static box(Tr,...Rr){let Ar=8,Pr=Rr.length;const Lr=Pr;for(;Pr--;)Ar+=Rr[Pr].byteLength;const Mr=new Uint8Array(Ar);for(Mr[0]=Ar>>24&255,Mr[1]=Ar>>16&255,Mr[2]=Ar>>8&255,Mr[3]=Ar&255,Mr.set(Tr,4),Pr=0,Ar=8;Pr<Lr;Pr++)Mr.set(Rr[Pr],Ar),Ar+=Rr[Pr].byteLength;return Mr}static hdlr(Tr){return MP4.box(MP4.types.hdlr,MP4.HDLR_TYPES[Tr])}static mdat(Tr){return MP4.box(MP4.types.mdat,Tr)}static mdhd(Tr,Rr){Rr*=Tr;const Ar=Math.floor(Rr/(UINT32_MAX+1)),Pr=Math.floor(Rr%(UINT32_MAX+1));return MP4.box(MP4.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Tr>>24&255,Tr>>16&255,Tr>>8&255,Tr&255,Ar>>24,Ar>>16&255,Ar>>8&255,Ar&255,Pr>>24,Pr>>16&255,Pr>>8&255,Pr&255,85,196,0,0]))}static mdia(Tr){return MP4.box(MP4.types.mdia,MP4.mdhd(Tr.timescale,Tr.duration),MP4.hdlr(Tr.type),MP4.minf(Tr))}static mfhd(Tr){return MP4.box(MP4.types.mfhd,new Uint8Array([0,0,0,0,Tr>>24,Tr>>16&255,Tr>>8&255,Tr&255]))}static minf(Tr){return Tr.type==="audio"?MP4.box(MP4.types.minf,MP4.box(MP4.types.smhd,MP4.SMHD),MP4.DINF,MP4.stbl(Tr)):MP4.box(MP4.types.minf,MP4.box(MP4.types.vmhd,MP4.VMHD),MP4.DINF,MP4.stbl(Tr))}static moof(Tr,Rr,Ar){return MP4.box(MP4.types.moof,MP4.mfhd(Tr),MP4.traf(Ar,Rr))}static moov(Tr){let Rr=Tr.length;const Ar=[];for(;Rr--;)Ar[Rr]=MP4.trak(Tr[Rr]);return MP4.box.apply(null,[MP4.types.moov,MP4.mvhd(Tr[0].timescale,Tr[0].duration)].concat(Ar).concat(MP4.mvex(Tr)))}static mvex(Tr){let Rr=Tr.length;const Ar=[];for(;Rr--;)Ar[Rr]=MP4.trex(Tr[Rr]);return MP4.box.apply(null,[MP4.types.mvex,...Ar])}static mvhd(Tr,Rr){Rr*=Tr;const Ar=Math.floor(Rr/(UINT32_MAX+1)),Pr=Math.floor(Rr%(UINT32_MAX+1)),Lr=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Tr>>24&255,Tr>>16&255,Tr>>8&255,Tr&255,Ar>>24,Ar>>16&255,Ar>>8&255,Ar&255,Pr>>24,Pr>>16&255,Pr>>8&255,Pr&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return MP4.box(MP4.types.mvhd,Lr)}static sdtp(Tr){const Rr=Tr.samples||[],Ar=new Uint8Array(4+Rr.length);let Pr,Lr;for(Pr=0;Pr<Rr.length;Pr++)Lr=Rr[Pr].flags,Ar[Pr+4]=Lr.dependsOn<<4|Lr.isDependedOn<<2|Lr.hasRedundancy;return MP4.box(MP4.types.sdtp,Ar)}static stbl(Tr){return MP4.box(MP4.types.stbl,MP4.stsd(Tr),MP4.box(MP4.types.stts,MP4.STTS),MP4.box(MP4.types.stsc,MP4.STSC),MP4.box(MP4.types.stsz,MP4.STSZ),MP4.box(MP4.types.stco,MP4.STCO))}static avc1(Tr){let Rr=[],Ar=[],Pr,Lr,Mr;for(Pr=0;Pr<Tr.sps.length;Pr++)Lr=Tr.sps[Pr],Mr=Lr.byteLength,Rr.push(Mr>>>8&255),Rr.push(Mr&255),Rr=Rr.concat(Array.prototype.slice.call(Lr));for(Pr=0;Pr<Tr.pps.length;Pr++)Lr=Tr.pps[Pr],Mr=Lr.byteLength,Ar.push(Mr>>>8&255),Ar.push(Mr&255),Ar=Ar.concat(Array.prototype.slice.call(Lr));const Fr=MP4.box(MP4.types.avcC,new Uint8Array([1,Rr[3],Rr[4],Rr[5],255,224|Tr.sps.length].concat(Rr).concat([Tr.pps.length]).concat(Ar))),zr=Tr.width,Ur=Tr.height,Vr=Tr.pixelRatio[0],Nr=Tr.pixelRatio[1];return MP4.box(MP4.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,zr>>8&255,zr&255,Ur>>8&255,Ur&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Fr,MP4.box(MP4.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),MP4.box(MP4.types.pasp,new Uint8Array([Vr>>24,Vr>>16&255,Vr>>8&255,Vr&255,Nr>>24,Nr>>16&255,Nr>>8&255,Nr&255])))}static esds(Tr){const Rr=Tr.config.length;return new Uint8Array([0,0,0,0,3,23+Rr,0,1,0,4,15+Rr,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([Rr]).concat(Tr.config).concat([6,1,2]))}static mp4a(Tr){const Rr=Tr.samplerate;return MP4.box(MP4.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,Tr.channelCount,0,16,0,0,0,0,Rr>>8&255,Rr&255,0,0]),MP4.box(MP4.types.esds,MP4.esds(Tr)))}static mp3(Tr){const Rr=Tr.samplerate;return MP4.box(MP4.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,Tr.channelCount,0,16,0,0,0,0,Rr>>8&255,Rr&255,0,0]))}static stsd(Tr){return Tr.type==="audio"?Tr.segmentCodec==="mp3"&&Tr.codec==="mp3"?MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp3(Tr)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp4a(Tr)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.avc1(Tr))}static tkhd(Tr){const Rr=Tr.id,Ar=Tr.duration*Tr.timescale,Pr=Tr.width,Lr=Tr.height,Mr=Math.floor(Ar/(UINT32_MAX+1)),Fr=Math.floor(Ar%(UINT32_MAX+1));return MP4.box(MP4.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Rr>>24&255,Rr>>16&255,Rr>>8&255,Rr&255,0,0,0,0,Mr>>24,Mr>>16&255,Mr>>8&255,Mr&255,Fr>>24,Fr>>16&255,Fr>>8&255,Fr&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,Pr>>8&255,Pr&255,0,0,Lr>>8&255,Lr&255,0,0]))}static traf(Tr,Rr){const Ar=MP4.sdtp(Tr),Pr=Tr.id,Lr=Math.floor(Rr/(UINT32_MAX+1)),Mr=Math.floor(Rr%(UINT32_MAX+1));return MP4.box(MP4.types.traf,MP4.box(MP4.types.tfhd,new Uint8Array([0,0,0,0,Pr>>24,Pr>>16&255,Pr>>8&255,Pr&255])),MP4.box(MP4.types.tfdt,new Uint8Array([1,0,0,0,Lr>>24,Lr>>16&255,Lr>>8&255,Lr&255,Mr>>24,Mr>>16&255,Mr>>8&255,Mr&255])),MP4.trun(Tr,Ar.length+16+20+8+16+8+8),Ar)}static trak(Tr){return Tr.duration=Tr.duration||4294967295,MP4.box(MP4.types.trak,MP4.tkhd(Tr),MP4.mdia(Tr))}static trex(Tr){const Rr=Tr.id;return MP4.box(MP4.types.trex,new Uint8Array([0,0,0,0,Rr>>24,Rr>>16&255,Rr>>8&255,Rr&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(Tr,Rr){const Ar=Tr.samples||[],Pr=Ar.length,Lr=12+16*Pr,Mr=new Uint8Array(Lr);let Fr,zr,Ur,Vr,Nr,Dr;for(Rr+=8+Lr,Mr.set([Tr.type==="video"?1:0,0,15,1,Pr>>>24&255,Pr>>>16&255,Pr>>>8&255,Pr&255,Rr>>>24&255,Rr>>>16&255,Rr>>>8&255,Rr&255],0),Fr=0;Fr<Pr;Fr++)zr=Ar[Fr],Ur=zr.duration,Vr=zr.size,Nr=zr.flags,Dr=zr.cts,Mr.set([Ur>>>24&255,Ur>>>16&255,Ur>>>8&255,Ur&255,Vr>>>24&255,Vr>>>16&255,Vr>>>8&255,Vr&255,Nr.isLeading<<2|Nr.dependsOn,Nr.isDependedOn<<6|Nr.hasRedundancy<<4|Nr.paddingValue<<1|Nr.isNonSync,Nr.degradPrio&61440,Nr.degradPrio&15,Dr>>>24&255,Dr>>>16&255,Dr>>>8&255,Dr&255],12+16*Fr);return MP4.box(MP4.types.trun,Mr)}static initSegment(Tr){MP4.types||MP4.init();const Rr=MP4.moov(Tr),Ar=new Uint8Array(MP4.FTYP.byteLength+Rr.byteLength);return Ar.set(MP4.FTYP),Ar.set(Rr,MP4.FTYP.byteLength),Ar}}MP4.types=void 0;MP4.HDLR_TYPES=void 0;MP4.STTS=void 0;MP4.STSC=void 0;MP4.STCO=void 0;MP4.STSZ=void 0;MP4.VMHD=void 0;MP4.SMHD=void 0;MP4.STSD=void 0;MP4.FTYP=void 0;MP4.DINF=void 0;const MPEG_TS_CLOCK_FREQ_HZ=9e4;function toTimescaleFromBase(_r,Tr,Rr=1,Ar=!1){const Pr=_r*Tr*Rr;return Ar?Math.round(Pr):Pr}function toTimescaleFromScale(_r,Tr,Rr=1,Ar=!1){return toTimescaleFromBase(_r,Tr,1/Rr,Ar)}function toMsFromMpegTsClock(_r,Tr=!1){return toTimescaleFromBase(_r,1e3,1/MPEG_TS_CLOCK_FREQ_HZ,Tr)}function toMpegTsClockFromTimescale(_r,Tr=1){return toTimescaleFromBase(_r,MPEG_TS_CLOCK_FREQ_HZ,1/Tr)}const MAX_SILENT_FRAME_DURATION=10*1e3,AAC_SAMPLES_PER_FRAME=1024,MPEG_AUDIO_SAMPLE_PER_FRAME=1152;let chromeVersion=null,safariWebkitVersion=null;class MP4Remuxer{constructor(Tr,Rr,Ar,Pr=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=Tr,this.config=Rr,this.typeSupported=Ar,this.ISGenerated=!1,chromeVersion===null){const Mr=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);chromeVersion=Mr?parseInt(Mr[1]):0}if(safariWebkitVersion===null){const Lr=navigator.userAgent.match(/Safari\/(\d+)/i);safariWebkitVersion=Lr?parseInt(Lr[1]):0}}destroy(){}resetTimeStamp(Tr){logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=Tr}resetNextTimestamp(){logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1}getVideoStartPts(Tr){let Rr=!1;const Ar=Tr.reduce((Pr,Lr)=>{const Mr=Lr.pts-Pr;return Mr<-4294967296?(Rr=!0,normalizePts(Pr,Lr.pts)):Mr>0?Pr:Lr.pts},Tr[0].pts);return Rr&&logger.debug("PTS rollover detected"),Ar}remux(Tr,Rr,Ar,Pr,Lr,Mr,Fr,zr){let Ur,Vr,Nr,Dr,jr,Gr,Wr=Lr,qr=Lr;const Kr=Tr.pid>-1,Xr=Rr.pid>-1,Zr=Rr.samples.length,Jr=Tr.samples.length>0,_i=Fr&&Zr>0||Zr>1;if((!Kr||Jr)&&(!Xr||_i)||this.ISGenerated||Fr){this.ISGenerated||(Nr=this.generateIS(Tr,Rr,Lr,Mr));const ts=this.isVideoContiguous;let rs=-1,ns;if(_i&&(rs=findKeyframeIndex(Rr.samples),!ts&&this.config.forceKeyFrameOnDiscontinuity))if(Gr=!0,rs>0){logger.warn(`[mp4-remuxer]: Dropped ${rs} out of ${Zr} video samples due to a missing keyframe`);const as=this.getVideoStartPts(Rr.samples);Rr.samples=Rr.samples.slice(rs),Rr.dropped+=rs,qr+=(Rr.samples[0].pts-as)/Rr.inputTimeScale,ns=qr}else rs===-1&&(logger.warn(`[mp4-remuxer]: No keyframe found out of ${Zr} video samples`),Gr=!1);if(this.ISGenerated){if(Jr&&_i){const as=this.getVideoStartPts(Rr.samples),us=(normalizePts(Tr.samples[0].pts,as)-as)/Rr.inputTimeScale;Wr+=Math.max(0,us),qr+=Math.max(0,-us)}if(Jr){if(Tr.samplerate||(logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),Nr=this.generateIS(Tr,Rr,Lr,Mr)),Vr=this.remuxAudio(Tr,Wr,this.isAudioContiguous,Mr,Xr||_i||zr===PlaylistLevelType.AUDIO?qr:void 0),_i){const as=Vr?Vr.endPTS-Vr.startPTS:0;Rr.inputTimeScale||(logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),Nr=this.generateIS(Tr,Rr,Lr,Mr)),Ur=this.remuxVideo(Rr,qr,ts,as)}}else _i&&(Ur=this.remuxVideo(Rr,qr,ts,0));Ur&&(Ur.firstKeyFrame=rs,Ur.independent=rs!==-1,Ur.firstKeyFramePTS=ns)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(Ar.samples.length&&(jr=flushTextTrackMetadataCueSamples(Ar,Lr,this._initPTS,this._initDTS)),Pr.samples.length&&(Dr=flushTextTrackUserdataCueSamples(Pr,Lr,this._initPTS))),{audio:Vr,video:Ur,initSegment:Nr,independent:Gr,text:Dr,id3:jr}}generateIS(Tr,Rr,Ar,Pr){const Lr=Tr.samples,Mr=Rr.samples,Fr=this.typeSupported,zr={},Ur=this._initPTS;let Vr=!Ur||Pr,Nr="audio/mp4",Dr,jr,Gr;if(Vr&&(Dr=jr=1/0),Tr.config&&Lr.length){switch(Tr.timescale=Tr.samplerate,Tr.segmentCodec){case"mp3":Fr.mpeg?(Nr="audio/mpeg",Tr.codec=""):Fr.mp3&&(Tr.codec="mp3");break}zr.audio={id:"audio",container:Nr,codec:Tr.codec,initSegment:Tr.segmentCodec==="mp3"&&Fr.mpeg?new Uint8Array(0):MP4.initSegment([Tr]),metadata:{channelCount:Tr.channelCount}},Vr&&(Gr=Tr.inputTimeScale,!Ur||Gr!==Ur.timescale?Dr=jr=Lr[0].pts-Math.round(Gr*Ar):Vr=!1)}if(Rr.sps&&Rr.pps&&Mr.length&&(Rr.timescale=Rr.inputTimeScale,zr.video={id:"main",container:"video/mp4",codec:Rr.codec,initSegment:MP4.initSegment([Rr]),metadata:{width:Rr.width,height:Rr.height}},Vr))if(Gr=Rr.inputTimeScale,!Ur||Gr!==Ur.timescale){const Wr=this.getVideoStartPts(Mr),qr=Math.round(Gr*Ar);jr=Math.min(jr,normalizePts(Mr[0].dts,Wr)-qr),Dr=Math.min(Dr,Wr-qr)}else Vr=!1;if(Object.keys(zr).length)return this.ISGenerated=!0,Vr?(this._initPTS={baseTime:Dr,timescale:Gr},this._initDTS={baseTime:jr,timescale:Gr}):Dr=Gr=void 0,{tracks:zr,initPTS:Dr,timescale:Gr}}remuxVideo(Tr,Rr,Ar,Pr){const Lr=Tr.inputTimeScale,Mr=Tr.samples,Fr=[],zr=Mr.length,Ur=this._initPTS;let Vr=this.nextAvcDts,Nr=8,Dr=this.videoSampleDuration,jr,Gr,Wr=Number.POSITIVE_INFINITY,qr=Number.NEGATIVE_INFINITY,Kr=!1;if(!Ar||Vr===null){const ys=Rr*Lr,ks=Mr[0].pts-normalizePts(Mr[0].dts,Mr[0].pts);Vr=ys-ks}const Xr=Ur.baseTime*Lr/Ur.timescale;for(let ys=0;ys<zr;ys++){const ks=Mr[ys];ks.pts=normalizePts(ks.pts-Xr,Vr),ks.dts=normalizePts(ks.dts-Xr,Vr),ks.dts<Mr[ys>0?ys-1:ys].dts&&(Kr=!0)}Kr&&Mr.sort(function(ys,ks){const Fs=ys.dts-ks.dts,Us=ys.pts-ks.pts;return Fs||Us}),jr=Mr[0].dts,Gr=Mr[Mr.length-1].dts;const Zr=Gr-jr,Jr=Zr?Math.round(Zr/(zr-1)):Dr||Tr.inputTimeScale/30;if(Ar){const ys=jr-Vr,ks=ys>Jr,Fs=ys<-1;if((ks||Fs)&&(ks?logger.warn(`AVC: ${toMsFromMpegTsClock(ys,!0)} ms (${ys}dts) hole between fragments detected, filling it`):logger.warn(`AVC: ${toMsFromMpegTsClock(-ys,!0)} ms (${ys}dts) overlapping between fragments detected`),!Fs||Vr>=Mr[0].pts)){jr=Vr;const Us=Mr[0].pts-ys;Mr[0].dts=jr,Mr[0].pts=Us,logger.log(`Video: First PTS/DTS adjusted: ${toMsFromMpegTsClock(Us,!0)}/${toMsFromMpegTsClock(jr,!0)}, delta: ${toMsFromMpegTsClock(ys,!0)} ms`)}}jr=Math.max(0,jr);let _i=0,es=0;for(let ys=0;ys<zr;ys++){const ks=Mr[ys],Fs=ks.units,Us=Fs.length;let Vs=0;for(let ao=0;ao<Us;ao++)Vs+=Fs[ao].data.length;es+=Vs,_i+=Us,ks.length=Vs,ks.dts=Math.max(ks.dts,jr),Wr=Math.min(ks.pts,Wr),qr=Math.max(ks.pts,qr)}Gr=Mr[zr-1].dts;const ts=es+4*_i+8;let rs;try{rs=new Uint8Array(ts)}catch(ys){this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MUX_ERROR,details:ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,error:ys,bytes:ts,reason:`fail allocating video mdat ${ts}`});return}const ns=new DataView(rs.buffer);ns.setUint32(0,ts),rs.set(MP4.types.mdat,4);let as=!1,ls=Number.POSITIVE_INFINITY,us=Number.POSITIVE_INFINITY,xs=Number.NEGATIVE_INFINITY,Ts=Number.NEGATIVE_INFINITY;for(let ys=0;ys<zr;ys++){const ks=Mr[ys],Fs=ks.units;let Us=0;for(let qs=0,Qs=Fs.length;qs<Qs;qs++){const mo=Fs[qs],Xs=mo.data,so=mo.data.byteLength;ns.setUint32(Nr,so),Nr+=4,rs.set(Xs,Nr),Nr+=so,Us+=4+so}let Vs;if(ys<zr-1)Dr=Mr[ys+1].dts-ks.dts,Vs=Mr[ys+1].pts-ks.pts;else{const qs=this.config,Qs=ys>0?ks.dts-Mr[ys-1].dts:Jr;if(Vs=ys>0?ks.pts-Mr[ys-1].pts:Jr,qs.stretchShortVideoTrack&&this.nextAudioPts!==null){const mo=Math.floor(qs.maxBufferHole*Lr),Xs=(Pr?Wr+Pr*Lr:this.nextAudioPts)-ks.pts;Xs>mo?(Dr=Xs-Qs,Dr<0?Dr=Qs:as=!0,logger.log(`[mp4-remuxer]: It is approximately ${Xs/90} ms to the next segment; using duration ${Dr/90} ms for the last video frame.`)):Dr=Qs}else Dr=Qs}const ao=Math.round(ks.pts-ks.dts);ls=Math.min(ls,Dr),xs=Math.max(xs,Dr),us=Math.min(us,Vs),Ts=Math.max(Ts,Vs),Fr.push(new Mp4Sample(ks.key,Dr,Us,ao))}if(Fr.length){if(chromeVersion){if(chromeVersion<70){const ys=Fr[0].flags;ys.dependsOn=2,ys.isNonSync=0}}else if(safariWebkitVersion&&Ts-us<xs-ls&&Jr/xs<.025&&Fr[0].cts===0){logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let ys=jr;for(let ks=0,Fs=Fr.length;ks<Fs;ks++){const Us=ys+Fr[ks].duration,Vs=ys+Fr[ks].cts;if(ks<Fs-1){const ao=Us+Fr[ks+1].cts;Fr[ks].duration=ao-Vs}else Fr[ks].duration=ks?Fr[ks-1].duration:Jr;Fr[ks].cts=0,ys=Us}}}Dr=as||!Dr?Jr:Dr,this.nextAvcDts=Vr=Gr+Dr,this.videoSampleDuration=Dr,this.isVideoContiguous=!0;const vs=MP4.moof(Tr.sequenceNumber++,jr,_extends({},Tr,{samples:Fr})),gs="video",fs={data1:vs,data2:rs,startPTS:Wr/Lr,endPTS:(qr+Dr)/Lr,startDTS:jr/Lr,endDTS:Vr/Lr,type:gs,hasAudio:!1,hasVideo:!0,nb:Fr.length,dropped:Tr.dropped};return Tr.samples=[],Tr.dropped=0,fs}remuxAudio(Tr,Rr,Ar,Pr,Lr){const Mr=Tr.inputTimeScale,Fr=Tr.samplerate?Tr.samplerate:Mr,zr=Mr/Fr,Ur=Tr.segmentCodec==="aac"?AAC_SAMPLES_PER_FRAME:MPEG_AUDIO_SAMPLE_PER_FRAME,Vr=Ur*zr,Nr=this._initPTS,Dr=Tr.segmentCodec==="mp3"&&this.typeSupported.mpeg,jr=[],Gr=Lr!==void 0;let Wr=Tr.samples,qr=Dr?0:8,Kr=this.nextAudioPts||-1;const Xr=Rr*Mr,Zr=Nr.baseTime*Mr/Nr.timescale;if(this.isAudioContiguous=Ar=Ar||Wr.length&&Kr>0&&(Pr&&Math.abs(Xr-Kr)<9e3||Math.abs(normalizePts(Wr[0].pts-Zr,Xr)-Kr)<20*Vr),Wr.forEach(function(gs){gs.pts=normalizePts(gs.pts-Zr,Xr)}),!Ar||Kr<0){if(Wr=Wr.filter(gs=>gs.pts>=0),!Wr.length)return;Lr===0?Kr=0:Pr&&!Gr?Kr=Math.max(0,Xr):Kr=Wr[0].pts}if(Tr.segmentCodec==="aac"){const gs=this.config.maxAudioFramesDrift;for(let fs=0,ys=Kr;fs<Wr.length;fs++){const ks=Wr[fs],Fs=ks.pts,Us=Fs-ys,Vs=Math.abs(1e3*Us/Mr);if(Us<=-gs*Vr&&Gr)fs===0&&(logger.warn(`Audio frame @ ${(Fs/Mr).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*Us/Mr)} ms.`),this.nextAudioPts=Kr=ys=Fs);else if(Us>=gs*Vr&&Vs<MAX_SILENT_FRAME_DURATION&&Gr){let ao=Math.round(Us/Vr);ys=Fs-ao*Vr,ys<0&&(ao--,ys+=Vr),fs===0&&(this.nextAudioPts=Kr=ys),logger.warn(`[mp4-remuxer]: Injecting ${ao} audio frame @ ${(ys/Mr).toFixed(3)}s due to ${Math.round(1e3*Us/Mr)} ms gap.`);for(let qs=0;qs<ao;qs++){const Qs=Math.max(ys,0);let mo=AAC.getSilentFrame(Tr.manifestCodec||Tr.codec,Tr.channelCount);mo||(logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),mo=ks.unit.subarray()),Wr.splice(fs,0,{unit:mo,pts:Qs}),ys+=Vr,fs++}}ks.pts=ys,ys+=Vr}}let Jr=null,_i=null,es,ts=0,rs=Wr.length;for(;rs--;)ts+=Wr[rs].unit.byteLength;for(let gs=0,fs=Wr.length;gs<fs;gs++){const ys=Wr[gs],ks=ys.unit;let Fs=ys.pts;if(_i!==null){const Vs=jr[gs-1];Vs.duration=Math.round((Fs-_i)/zr)}else if(Ar&&Tr.segmentCodec==="aac"&&(Fs=Kr),Jr=Fs,ts>0){ts+=qr;try{es=new Uint8Array(ts)}catch(Vs){this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MUX_ERROR,details:ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,error:Vs,bytes:ts,reason:`fail allocating audio mdat ${ts}`});return}Dr||(new DataView(es.buffer).setUint32(0,ts),es.set(MP4.types.mdat,4))}else return;es.set(ks,qr);const Us=ks.byteLength;qr+=Us,jr.push(new Mp4Sample(!0,Ur,Us,0)),_i=Fs}const ns=jr.length;if(!ns)return;const as=jr[jr.length-1];this.nextAudioPts=Kr=_i+zr*as.duration;const ls=Dr?new Uint8Array(0):MP4.moof(Tr.sequenceNumber++,Jr/zr,_extends({},Tr,{samples:jr}));Tr.samples=[];const us=Jr/Mr,xs=Kr/Mr,vs={data1:ls,data2:es,startPTS:us,endPTS:xs,startDTS:us,endDTS:xs,type:"audio",hasAudio:!0,hasVideo:!1,nb:ns};return this.isAudioContiguous=!0,vs}remuxEmptyAudio(Tr,Rr,Ar,Pr){const Lr=Tr.inputTimeScale,Mr=Tr.samplerate?Tr.samplerate:Lr,Fr=Lr/Mr,zr=this.nextAudioPts,Ur=this._initDTS,Vr=Ur.baseTime*9e4/Ur.timescale,Nr=(zr!==null?zr:Pr.startDTS*Lr)+Vr,Dr=Pr.endDTS*Lr+Vr,jr=Fr*AAC_SAMPLES_PER_FRAME,Gr=Math.ceil((Dr-Nr)/jr),Wr=AAC.getSilentFrame(Tr.manifestCodec||Tr.codec,Tr.channelCount);if(logger.warn("[mp4-remuxer]: remux empty Audio"),!Wr){logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const qr=[];for(let Kr=0;Kr<Gr;Kr++){const Xr=Nr+Kr*jr;qr.push({unit:Wr,pts:Xr,dts:Xr})}return Tr.samples=qr,this.remuxAudio(Tr,Rr,Ar,!1)}}function normalizePts(_r,Tr){let Rr;if(Tr===null)return _r;for(Tr<_r?Rr=-8589934592:Rr=8589934592;Math.abs(_r-Tr)>4294967296;)_r+=Rr;return _r}function findKeyframeIndex(_r){for(let Tr=0;Tr<_r.length;Tr++)if(_r[Tr].key)return Tr;return-1}function flushTextTrackMetadataCueSamples(_r,Tr,Rr,Ar){const Pr=_r.samples.length;if(!Pr)return;const Lr=_r.inputTimeScale;for(let Fr=0;Fr<Pr;Fr++){const zr=_r.samples[Fr];zr.pts=normalizePts(zr.pts-Rr.baseTime*Lr/Rr.timescale,Tr*Lr)/Lr,zr.dts=normalizePts(zr.dts-Ar.baseTime*Lr/Ar.timescale,Tr*Lr)/Lr}const Mr=_r.samples;return _r.samples=[],{samples:Mr}}function flushTextTrackUserdataCueSamples(_r,Tr,Rr){const Ar=_r.samples.length;if(!Ar)return;const Pr=_r.inputTimeScale;for(let Mr=0;Mr<Ar;Mr++){const Fr=_r.samples[Mr];Fr.pts=normalizePts(Fr.pts-Rr.baseTime*Pr/Rr.timescale,Tr*Pr)/Pr}_r.samples.sort((Mr,Fr)=>Mr.pts-Fr.pts);const Lr=_r.samples;return _r.samples=[],{samples:Lr}}class Mp4Sample{constructor(Tr,Rr,Ar,Pr){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=Rr,this.size=Ar,this.cts=Pr,this.flags=new Mp4SampleFlags(Tr)}}class Mp4SampleFlags{constructor(Tr){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=Tr?2:1,this.isNonSync=Tr?0:1}}class PassThroughRemuxer{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(Tr){this.initPTS=Tr,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(Tr,Rr,Ar,Pr){this.audioCodec=Rr,this.videoCodec=Ar,this.generateInitSegment(patchEncyptionData(Tr,Pr)),this.emitInitSegment=!0}generateInitSegment(Tr){let{audioCodec:Rr,videoCodec:Ar}=this;if(!(Tr!=null&&Tr.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const Pr=this.initData=parseInitSegment(Tr);Rr||(Rr=getParsedTrackCodec(Pr.audio,ElementaryStreamTypes.AUDIO)),Ar||(Ar=getParsedTrackCodec(Pr.video,ElementaryStreamTypes.VIDEO));const Lr={};Pr.audio&&Pr.video?Lr.audiovideo={container:"video/mp4",codec:Rr+","+Ar,initSegment:Tr,id:"main"}:Pr.audio?Lr.audio={container:"audio/mp4",codec:Rr,initSegment:Tr,id:"audio"}:Pr.video?Lr.video={container:"video/mp4",codec:Ar,initSegment:Tr,id:"main"}:logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=Lr}remux(Tr,Rr,Ar,Pr,Lr,Mr){var Fr,zr;let{initPTS:Ur,lastEndTime:Vr}=this;const Nr={audio:void 0,video:void 0,text:Pr,id3:Ar,initSegment:void 0};isFiniteNumber(Vr)||(Vr=this.lastEndTime=Lr||0);const Dr=Rr.samples;if(!(Dr!=null&&Dr.length))return Nr;const jr={initPTS:void 0,timescale:1};let Gr=this.initData;if((Fr=Gr)!=null&&Fr.length||(this.generateInitSegment(Dr),Gr=this.initData),!((zr=Gr)!=null&&zr.length))return logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),Nr;this.emitInitSegment&&(jr.tracks=this.initTracks,this.emitInitSegment=!1);const Wr=getDuration(Dr,Gr),qr=getStartDTS(Gr,Dr),Kr=qr===null?Lr:qr;(isInvalidInitPts(Ur,Kr,Lr,Wr)||jr.timescale!==Ur.timescale&&Mr)&&(jr.initPTS=Kr-Lr,Ur&&Ur.timescale===1&&logger.warn(`Adjusting initPTS by ${jr.initPTS-Ur.baseTime}`),this.initPTS=Ur={baseTime:jr.initPTS,timescale:1});const Xr=Tr?Kr-Ur.baseTime/Ur.timescale:Vr,Zr=Xr+Wr;offsetStartDTS(Gr,Dr,Ur.baseTime/Ur.timescale),Wr>0?this.lastEndTime=Zr:(logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const Jr=!!Gr.audio,_i=!!Gr.video;let es="";Jr&&(es+="audio"),_i&&(es+="video");const ts={data1:Dr,startPTS:Xr,startDTS:Xr,endPTS:Zr,endDTS:Zr,type:es,hasAudio:Jr,hasVideo:_i,nb:1,dropped:0};return Nr.audio=ts.type==="audio"?ts:void 0,Nr.video=ts.type!=="audio"?ts:void 0,Nr.initSegment=jr,Nr.id3=flushTextTrackMetadataCueSamples(Ar,Lr,Ur,Ur),Pr.samples.length&&(Nr.text=flushTextTrackUserdataCueSamples(Pr,Lr,Ur)),Nr}}function isInvalidInitPts(_r,Tr,Rr,Ar){if(_r===null)return!0;const Pr=Math.max(Ar,1),Lr=Tr-_r.baseTime/_r.timescale;return Math.abs(Lr-Rr)>Pr}function getParsedTrackCodec(_r,Tr){const Rr=_r==null?void 0:_r.codec;return Rr&&Rr.length>4?Rr:Rr==="hvc1"||Rr==="hev1"?"hvc1.1.6.L120.90":Rr==="av01"?"av01.0.04M.08":Rr==="avc1"||Tr===ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}let now;try{now=self.performance.now.bind(self.performance)}catch{logger.debug("Unable to use Performance API on this environment"),now=typeof self<"u"&&self.Date.now}const muxConfig=[{demux:MP4Demuxer,remux:PassThroughRemuxer},{demux:TSDemuxer,remux:MP4Remuxer},{demux:AACDemuxer,remux:MP4Remuxer},{demux:MP3Demuxer,remux:MP4Remuxer}];class Transmuxer{constructor(Tr,Rr,Ar,Pr,Lr){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=Tr,this.typeSupported=Rr,this.config=Ar,this.vendor=Pr,this.id=Lr}configure(Tr){this.transmuxConfig=Tr,this.decrypter&&this.decrypter.reset()}push(Tr,Rr,Ar,Pr){const Lr=Ar.transmuxing;Lr.executeStart=now();let Mr=new Uint8Array(Tr);const{currentTransmuxState:Fr,transmuxConfig:zr}=this;Pr&&(this.currentTransmuxState=Pr);const{contiguous:Ur,discontinuity:Vr,trackSwitch:Nr,accurateTimeOffset:Dr,timeOffset:jr,initSegmentChange:Gr}=Pr||Fr,{audioCodec:Wr,videoCodec:qr,defaultInitPts:Kr,duration:Xr,initSegmentData:Zr}=zr,Jr=getEncryptionType(Mr,Rr);if(Jr&&Jr.method==="AES-128"){const rs=this.getDecrypter();if(rs.isSync()){let ns=rs.softwareDecrypt(Mr,Jr.key.buffer,Jr.iv.buffer);if(Ar.part>-1&&(ns=rs.flush()),!ns)return Lr.executeEnd=now(),emptyResult(Ar);Mr=new Uint8Array(ns)}else return this.decryptionPromise=rs.webCryptoDecrypt(Mr,Jr.key.buffer,Jr.iv.buffer).then(ns=>{const as=this.push(ns,null,Ar);return this.decryptionPromise=null,as}),this.decryptionPromise}const _i=this.needsProbing(Vr,Nr);if(_i){const rs=this.configureTransmuxer(Mr);if(rs)return logger.warn(`[transmuxer] ${rs.message}`),this.observer.emit(Events.ERROR,Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:rs,reason:rs.message}),Lr.executeEnd=now(),emptyResult(Ar)}(Vr||Nr||Gr||_i)&&this.resetInitSegment(Zr,Wr,qr,Xr,Rr),(Vr||Gr||_i)&&this.resetInitialTimestamp(Kr),Ur||this.resetContiguity();const es=this.transmux(Mr,Jr,jr,Dr,Ar),ts=this.currentTransmuxState;return ts.contiguous=!0,ts.discontinuity=!1,ts.trackSwitch=!1,Lr.executeEnd=now(),es}flush(Tr){const Rr=Tr.transmuxing;Rr.executeStart=now();const{decrypter:Ar,currentTransmuxState:Pr,decryptionPromise:Lr}=this;if(Lr)return Lr.then(()=>this.flush(Tr));const Mr=[],{timeOffset:Fr}=Pr;if(Ar){const Nr=Ar.flush();Nr&&Mr.push(this.push(Nr,null,Tr))}const{demuxer:zr,remuxer:Ur}=this;if(!zr||!Ur)return Rr.executeEnd=now(),[emptyResult(Tr)];const Vr=zr.flush(Fr);return isPromise(Vr)?Vr.then(Nr=>(this.flushRemux(Mr,Nr,Tr),Mr)):(this.flushRemux(Mr,Vr,Tr),Mr)}flushRemux(Tr,Rr,Ar){const{audioTrack:Pr,videoTrack:Lr,id3Track:Mr,textTrack:Fr}=Rr,{accurateTimeOffset:zr,timeOffset:Ur}=this.currentTransmuxState;logger.log(`[transmuxer.ts]: Flushed fragment ${Ar.sn}${Ar.part>-1?" p: "+Ar.part:""} of level ${Ar.level}`);const Vr=this.remuxer.remux(Pr,Lr,Mr,Fr,Ur,zr,!0,this.id);Tr.push({remuxResult:Vr,chunkMeta:Ar}),Ar.transmuxing.executeEnd=now()}resetInitialTimestamp(Tr){const{demuxer:Rr,remuxer:Ar}=this;!Rr||!Ar||(Rr.resetTimeStamp(Tr),Ar.resetTimeStamp(Tr))}resetContiguity(){const{demuxer:Tr,remuxer:Rr}=this;!Tr||!Rr||(Tr.resetContiguity(),Rr.resetNextTimestamp())}resetInitSegment(Tr,Rr,Ar,Pr,Lr){const{demuxer:Mr,remuxer:Fr}=this;!Mr||!Fr||(Mr.resetInitSegment(Tr,Rr,Ar,Pr),Fr.resetInitSegment(Tr,Rr,Ar,Lr))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(Tr,Rr,Ar,Pr,Lr){let Mr;return Rr&&Rr.method==="SAMPLE-AES"?Mr=this.transmuxSampleAes(Tr,Rr,Ar,Pr,Lr):Mr=this.transmuxUnencrypted(Tr,Ar,Pr,Lr),Mr}transmuxUnencrypted(Tr,Rr,Ar,Pr){const{audioTrack:Lr,videoTrack:Mr,id3Track:Fr,textTrack:zr}=this.demuxer.demux(Tr,Rr,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(Lr,Mr,Fr,zr,Rr,Ar,!1,this.id),chunkMeta:Pr}}transmuxSampleAes(Tr,Rr,Ar,Pr,Lr){return this.demuxer.demuxSampleAes(Tr,Rr,Ar).then(Mr=>({remuxResult:this.remuxer.remux(Mr.audioTrack,Mr.videoTrack,Mr.id3Track,Mr.textTrack,Ar,Pr,!1,this.id),chunkMeta:Lr}))}configureTransmuxer(Tr){const{config:Rr,observer:Ar,typeSupported:Pr,vendor:Lr}=this;let Mr;for(let Nr=0,Dr=muxConfig.length;Nr<Dr;Nr++)if(muxConfig[Nr].demux.probe(Tr)){Mr=muxConfig[Nr];break}if(!Mr)return new Error("Failed to find demuxer by probing fragment data");const Fr=this.demuxer,zr=this.remuxer,Ur=Mr.remux,Vr=Mr.demux;(!zr||!(zr instanceof Ur))&&(this.remuxer=new Ur(Ar,Rr,Pr,Lr)),(!Fr||!(Fr instanceof Vr))&&(this.demuxer=new Vr(Ar,Rr,Pr),this.probe=Vr.probe)}needsProbing(Tr,Rr){return!this.demuxer||!this.remuxer||Tr||Rr}getDecrypter(){let Tr=this.decrypter;return Tr||(Tr=this.decrypter=new Decrypter(this.config)),Tr}}function getEncryptionType(_r,Tr){let Rr=null;return _r.byteLength>0&&Tr!=null&&Tr.key!=null&&Tr.iv!==null&&Tr.method!=null&&(Rr=Tr),Rr}const emptyResult=_r=>({remuxResult:{},chunkMeta:_r});function isPromise(_r){return"then"in _r&&_r.then instanceof Function}class TransmuxConfig{constructor(Tr,Rr,Ar,Pr,Lr){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=Tr,this.videoCodec=Rr,this.initSegmentData=Ar,this.duration=Pr,this.defaultInitPts=Lr||null}}class TransmuxState{constructor(Tr,Rr,Ar,Pr,Lr,Mr){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=Tr,this.contiguous=Rr,this.accurateTimeOffset=Ar,this.trackSwitch=Pr,this.timeOffset=Lr,this.initSegmentChange=Mr}}var eventemitter3={exports:{}};(function(_r){var Tr=Object.prototype.hasOwnProperty,Rr="~";function Ar(){}Object.create&&(Ar.prototype=Object.create(null),new Ar().__proto__||(Rr=!1));function Pr(zr,Ur,Vr){this.fn=zr,this.context=Ur,this.once=Vr||!1}function Lr(zr,Ur,Vr,Nr,Dr){if(typeof Vr!="function")throw new TypeError("The listener must be a function");var jr=new Pr(Vr,Nr||zr,Dr),Gr=Rr?Rr+Ur:Ur;return zr._events[Gr]?zr._events[Gr].fn?zr._events[Gr]=[zr._events[Gr],jr]:zr._events[Gr].push(jr):(zr._events[Gr]=jr,zr._eventsCount++),zr}function Mr(zr,Ur){--zr._eventsCount===0?zr._events=new Ar:delete zr._events[Ur]}function Fr(){this._events=new Ar,this._eventsCount=0}Fr.prototype.eventNames=function(){var Ur=[],Vr,Nr;if(this._eventsCount===0)return Ur;for(Nr in Vr=this._events)Tr.call(Vr,Nr)&&Ur.push(Rr?Nr.slice(1):Nr);return Object.getOwnPropertySymbols?Ur.concat(Object.getOwnPropertySymbols(Vr)):Ur},Fr.prototype.listeners=function(Ur){var Vr=Rr?Rr+Ur:Ur,Nr=this._events[Vr];if(!Nr)return[];if(Nr.fn)return[Nr.fn];for(var Dr=0,jr=Nr.length,Gr=new Array(jr);Dr<jr;Dr++)Gr[Dr]=Nr[Dr].fn;return Gr},Fr.prototype.listenerCount=function(Ur){var Vr=Rr?Rr+Ur:Ur,Nr=this._events[Vr];return Nr?Nr.fn?1:Nr.length:0},Fr.prototype.emit=function(Ur,Vr,Nr,Dr,jr,Gr){var Wr=Rr?Rr+Ur:Ur;if(!this._events[Wr])return!1;var qr=this._events[Wr],Kr=arguments.length,Xr,Zr;if(qr.fn){switch(qr.once&&this.removeListener(Ur,qr.fn,void 0,!0),Kr){case 1:return qr.fn.call(qr.context),!0;case 2:return qr.fn.call(qr.context,Vr),!0;case 3:return qr.fn.call(qr.context,Vr,Nr),!0;case 4:return qr.fn.call(qr.context,Vr,Nr,Dr),!0;case 5:return qr.fn.call(qr.context,Vr,Nr,Dr,jr),!0;case 6:return qr.fn.call(qr.context,Vr,Nr,Dr,jr,Gr),!0}for(Zr=1,Xr=new Array(Kr-1);Zr<Kr;Zr++)Xr[Zr-1]=arguments[Zr];qr.fn.apply(qr.context,Xr)}else{var Jr=qr.length,_i;for(Zr=0;Zr<Jr;Zr++)switch(qr[Zr].once&&this.removeListener(Ur,qr[Zr].fn,void 0,!0),Kr){case 1:qr[Zr].fn.call(qr[Zr].context);break;case 2:qr[Zr].fn.call(qr[Zr].context,Vr);break;case 3:qr[Zr].fn.call(qr[Zr].context,Vr,Nr);break;case 4:qr[Zr].fn.call(qr[Zr].context,Vr,Nr,Dr);break;default:if(!Xr)for(_i=1,Xr=new Array(Kr-1);_i<Kr;_i++)Xr[_i-1]=arguments[_i];qr[Zr].fn.apply(qr[Zr].context,Xr)}}return!0},Fr.prototype.on=function(Ur,Vr,Nr){return Lr(this,Ur,Vr,Nr,!1)},Fr.prototype.once=function(Ur,Vr,Nr){return Lr(this,Ur,Vr,Nr,!0)},Fr.prototype.removeListener=function(Ur,Vr,Nr,Dr){var jr=Rr?Rr+Ur:Ur;if(!this._events[jr])return this;if(!Vr)return Mr(this,jr),this;var Gr=this._events[jr];if(Gr.fn)Gr.fn===Vr&&(!Dr||Gr.once)&&(!Nr||Gr.context===Nr)&&Mr(this,jr);else{for(var Wr=0,qr=[],Kr=Gr.length;Wr<Kr;Wr++)(Gr[Wr].fn!==Vr||Dr&&!Gr[Wr].once||Nr&&Gr[Wr].context!==Nr)&&qr.push(Gr[Wr]);qr.length?this._events[jr]=qr.length===1?qr[0]:qr:Mr(this,jr)}return this},Fr.prototype.removeAllListeners=function(Ur){var Vr;return Ur?(Vr=Rr?Rr+Ur:Ur,this._events[Vr]&&Mr(this,Vr)):(this._events=new Ar,this._eventsCount=0),this},Fr.prototype.off=Fr.prototype.removeListener,Fr.prototype.addListener=Fr.prototype.on,Fr.prefixed=Rr,Fr.EventEmitter=Fr,_r.exports=Fr})(eventemitter3);var eventemitter3Exports=eventemitter3.exports,EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);const MediaSource$1=getMediaSource()||{isTypeSupported:()=>!1};class TransmuxerInterface{constructor(Tr,Rr,Ar,Pr){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const Lr=Tr.config;this.hls=Tr,this.id=Rr,this.useWorker=!!Lr.enableWorker,this.onTransmuxComplete=Ar,this.onFlush=Pr;const Mr=(Ur,Vr)=>{Vr=Vr||{},Vr.frag=this.frag,Vr.id=this.id,Ur===Events.ERROR&&(this.error=Vr.error),this.hls.trigger(Ur,Vr)};this.observer=new EventEmitter,this.observer.on(Events.FRAG_DECRYPTED,Mr),this.observer.on(Events.ERROR,Mr);const Fr={mp4:MediaSource$1.isTypeSupported("video/mp4"),mpeg:MediaSource$1.isTypeSupported("audio/mpeg"),mp3:MediaSource$1.isTypeSupported('audio/mp4; codecs="mp3"')},zr=navigator.vendor;if(this.useWorker&&typeof Worker<"u"&&(Lr.workerPath||hasUMDWorker())){try{Lr.workerPath?(logger.log(`loading Web Worker ${Lr.workerPath} for "${Rr}"`),this.workerContext=loadWorker(Lr.workerPath)):(logger.log(`injecting Web Worker for "${Rr}"`),this.workerContext=injectWorker()),this.onwmsg=Nr=>this.onWorkerMessage(Nr);const{worker:Vr}=this.workerContext;Vr.addEventListener("message",this.onwmsg),Vr.onerror=Nr=>{const Dr=new Error(`${Nr.message}  (${Nr.filename}:${Nr.lineno})`);Lr.enableWorker=!1,logger.warn(`Error in "${Rr}" Web Worker, fallback to inline`),this.hls.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:Dr})},Vr.postMessage({cmd:"init",typeSupported:Fr,vendor:zr,id:Rr,config:JSON.stringify(Lr)})}catch(Vr){logger.warn(`Error setting up "${Rr}" Web Worker, fallback to inline`,Vr),this.resetWorker(),this.error=null,this.transmuxer=new Transmuxer(this.observer,Fr,Lr,zr,Rr)}return}this.transmuxer=new Transmuxer(this.observer,Fr,Lr,zr,Rr)}resetWorker(){if(this.workerContext){const{worker:Tr,objectURL:Rr}=this.workerContext;Rr&&self.URL.revokeObjectURL(Rr),Tr.removeEventListener("message",this.onwmsg),Tr.onerror=null,Tr.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const Rr=this.transmuxer;Rr&&(Rr.destroy(),this.transmuxer=null)}const Tr=this.observer;Tr&&Tr.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(Tr,Rr,Ar,Pr,Lr,Mr,Fr,zr,Ur,Vr){var Nr,Dr;Ur.transmuxing.start=self.performance.now();const{transmuxer:jr}=this,Gr=Mr?Mr.start:Lr.start,Wr=Lr.decryptdata,qr=this.frag,Kr=!(qr&&Lr.cc===qr.cc),Xr=!(qr&&Ur.level===qr.level),Zr=qr?Ur.sn-qr.sn:-1,Jr=this.part?Ur.part-this.part.index:-1,_i=Zr===0&&Ur.id>1&&Ur.id===(qr==null?void 0:qr.stats.chunkCount),es=!Xr&&(Zr===1||Zr===0&&(Jr===1||_i&&Jr<=0)),ts=self.performance.now();(Xr||Zr||Lr.stats.parsing.start===0)&&(Lr.stats.parsing.start=ts),Mr&&(Jr||!es)&&(Mr.stats.parsing.start=ts);const rs=!(qr&&((Nr=Lr.initSegment)==null?void 0:Nr.url)===((Dr=qr.initSegment)==null?void 0:Dr.url)),ns=new TransmuxState(Kr,es,zr,Xr,Gr,rs);if(!es||Kr||rs){logger.log(`[transmuxer-interface, ${Lr.type}]: Starting new transmux session for sn: ${Ur.sn} p: ${Ur.part} level: ${Ur.level} id: ${Ur.id}
        discontinuity: ${Kr}
        trackSwitch: ${Xr}
        contiguous: ${es}
        accurateTimeOffset: ${zr}
        timeOffset: ${Gr}
        initSegmentChange: ${rs}`);const as=new TransmuxConfig(Ar,Pr,Rr,Fr,Vr);this.configureTransmuxer(as)}if(this.frag=Lr,this.part=Mr,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:Tr,decryptdata:Wr,chunkMeta:Ur,state:ns},Tr instanceof ArrayBuffer?[Tr]:[]);else if(jr){const as=jr.push(Tr,Wr,Ur,ns);isPromise(as)?(jr.async=!0,as.then(ls=>{this.handleTransmuxComplete(ls)}).catch(ls=>{this.transmuxerError(ls,Ur,"transmuxer-interface push error")})):(jr.async=!1,this.handleTransmuxComplete(as))}}flush(Tr){Tr.transmuxing.start=self.performance.now();const{transmuxer:Rr}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:Tr});else if(Rr){let Ar=Rr.flush(Tr);isPromise(Ar)||Rr.async?(isPromise(Ar)||(Ar=Promise.resolve(Ar)),Ar.then(Lr=>{this.handleFlushResult(Lr,Tr)}).catch(Lr=>{this.transmuxerError(Lr,Tr,"transmuxer-interface flush error")})):this.handleFlushResult(Ar,Tr)}}transmuxerError(Tr,Rr,Ar){this.hls&&(this.error=Tr,this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:Rr,fatal:!1,error:Tr,err:Tr,reason:Ar}))}handleFlushResult(Tr,Rr){Tr.forEach(Ar=>{this.handleTransmuxComplete(Ar)}),this.onFlush(Rr)}onWorkerMessage(Tr){const Rr=Tr.data,Ar=this.hls;switch(Rr.event){case"init":{var Pr;const Lr=(Pr=this.workerContext)==null?void 0:Pr.objectURL;Lr&&self.URL.revokeObjectURL(Lr);break}case"transmuxComplete":{this.handleTransmuxComplete(Rr.data);break}case"flush":{this.onFlush(Rr.data);break}case"workerLog":logger[Rr.data.logType]&&logger[Rr.data.logType](Rr.data.message);break;default:{Rr.data=Rr.data||{},Rr.data.frag=this.frag,Rr.data.id=this.id,Ar.trigger(Rr.event,Rr.data);break}}}configureTransmuxer(Tr){const{transmuxer:Rr}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:Tr}):Rr&&Rr.configure(Tr)}handleTransmuxComplete(Tr){Tr.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(Tr)}}const STALL_MINIMUM_DURATION_MS=250,MAX_START_GAP_JUMP=2,SKIP_BUFFER_HOLE_STEP_SECONDS=.1,SKIP_BUFFER_RANGE_START=.05;class GapController{constructor(Tr,Rr,Ar,Pr){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=Tr,this.media=Rr,this.fragmentTracker=Ar,this.hls=Pr}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(Tr,Rr){const{config:Ar,media:Pr,stalled:Lr}=this;if(Pr===null)return;const{currentTime:Mr,seeking:Fr}=Pr,zr=this.seeking&&!Fr,Ur=!this.seeking&&Fr;if(this.seeking=Fr,Mr!==Tr){if(this.moved=!0,Lr!==null){if(this.stallReported){const Kr=self.performance.now()-Lr;logger.warn(`playback not stuck anymore @${Mr}, after ${Math.round(Kr)}ms`),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if(Ur||zr){this.stalled=null;return}if(Pr.paused&&!Fr||Pr.ended||Pr.playbackRate===0||!BufferHelper.getBuffered(Pr).length)return;const Vr=BufferHelper.bufferInfo(Pr,Mr,0),Nr=Vr.len>0,Dr=Vr.nextStart||0;if(!Nr&&!Dr)return;if(Fr){const Kr=Vr.len>MAX_START_GAP_JUMP,Xr=!Dr||Rr&&Rr.start<=Mr||Dr-Mr>MAX_START_GAP_JUMP&&!this.fragmentTracker.getPartialFragment(Mr);if(Kr||Xr)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var jr;const Kr=Math.max(Dr,Vr.start||0)-Mr,Xr=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,Jr=(Xr==null||(jr=Xr.details)==null?void 0:jr.live)?Xr.details.targetduration*2:MAX_START_GAP_JUMP,_i=this.fragmentTracker.getPartialFragment(Mr);if(Kr>0&&(Kr<=Jr||_i)){this._trySkipBufferHole(_i);return}}const Gr=self.performance.now();if(Lr===null){this.stalled=Gr;return}const Wr=Gr-Lr;if(!Fr&&Wr>=STALL_MINIMUM_DURATION_MS&&(this._reportStall(Vr),!this.media))return;const qr=BufferHelper.bufferInfo(Pr,Mr,Ar.maxBufferHole);this._tryFixBufferStall(qr,Wr)}_tryFixBufferStall(Tr,Rr){const{config:Ar,fragmentTracker:Pr,media:Lr}=this;if(Lr===null)return;const Mr=Lr.currentTime,Fr=Pr.getPartialFragment(Mr);Fr&&(this._trySkipBufferHole(Fr)||!this.media)||(Tr.len>Ar.maxBufferHole||Tr.nextStart&&Tr.nextStart-Mr<Ar.maxBufferHole)&&Rr>Ar.highBufferWatchdogPeriod*1e3&&(logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(Tr){const{hls:Rr,media:Ar,stallReported:Pr}=this;if(!Pr&&Ar){this.stallReported=!0;const Lr=new Error(`Playback stalling at @${Ar.currentTime} due to low buffer (${JSON.stringify(Tr)})`);logger.warn(Lr.message),Rr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,error:Lr,buffer:Tr.len})}}_trySkipBufferHole(Tr){const{config:Rr,hls:Ar,media:Pr}=this;if(Pr===null)return 0;const Lr=Pr.currentTime,Mr=BufferHelper.bufferInfo(Pr,Lr,0),Fr=Lr<Mr.start?Mr.start:Mr.nextStart;if(Fr){const zr=Mr.len<=Rr.maxBufferHole,Ur=Mr.len>0&&Mr.len<1&&Pr.readyState<3,Vr=Fr-Lr;if(Vr>0&&(zr||Ur)){if(Vr>Rr.maxBufferHole){const{fragmentTracker:Dr}=this;let jr=!1;if(Lr===0){const Gr=Dr.getAppendedFrag(0,PlaylistLevelType.MAIN);Gr&&Fr<Gr.end&&(jr=!0)}if(!jr){const Gr=Tr||Dr.getAppendedFrag(Lr,PlaylistLevelType.MAIN);if(Gr){let Wr=!1,qr=Gr.end;for(;qr<Fr;){const Kr=Dr.getPartialFragment(qr);if(Kr)qr+=Kr.duration;else{Wr=!0;break}}if(Wr)return 0}}}const Nr=Math.max(Fr+SKIP_BUFFER_RANGE_START,Lr+SKIP_BUFFER_HOLE_STEP_SECONDS);if(logger.warn(`skipping hole, adjusting currentTime from ${Lr} to ${Nr}`),this.moved=!0,this.stalled=null,Pr.currentTime=Nr,Tr&&!Tr.gap){const Dr=new Error(`fragment loaded with buffer holes, seeking from ${Lr} to ${Nr}`);Ar.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:Dr,reason:Dr.message,frag:Tr})}return Nr}}return 0}_tryNudgeBuffer(){const{config:Tr,hls:Rr,media:Ar,nudgeRetry:Pr}=this;if(Ar===null)return;const Lr=Ar.currentTime;if(this.nudgeRetry++,Pr<Tr.nudgeMaxRetry){const Mr=Lr+(Pr+1)*Tr.nudgeOffset,Fr=new Error(`Nudging 'currentTime' from ${Lr} to ${Mr}`);logger.warn(Fr.message),Ar.currentTime=Mr,Rr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_NUDGE_ON_STALL,error:Fr,fatal:!1})}else{const Mr=new Error(`Playhead still not moving while enough data buffered @${Lr} after ${Tr.nudgeMaxRetry} nudges`);logger.error(Mr.message),Rr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_STALLED_ERROR,error:Mr,fatal:!0})}}}const TICK_INTERVAL$2=100;class StreamController extends BaseStreamController{constructor(Tr,Rr,Ar){super(Tr,Rr,Ar,"[stream-controller]",PlaylistLevelType.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:Tr}=this;Tr.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Tr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),Tr.on(Events.LEVEL_LOADING,this.onLevelLoading,this),Tr.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),Tr.on(Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),Tr.on(Events.ERROR,this.onError,this),Tr.on(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),Tr.on(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),Tr.on(Events.BUFFER_CREATED,this.onBufferCreated,this),Tr.on(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),Tr.on(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Tr.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:Tr}=this;Tr.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Tr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),Tr.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),Tr.off(Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),Tr.off(Events.ERROR,this.onError,this),Tr.off(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),Tr.off(Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),Tr.off(Events.BUFFER_CREATED,this.onBufferCreated,this),Tr.off(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),Tr.off(Events.LEVELS_UPDATED,this.onLevelsUpdated,this),Tr.off(Events.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()}startLoad(Tr){if(this.levels){const{lastCurrentTime:Rr,hls:Ar}=this;if(this.stopLoad(),this.setInterval(TICK_INTERVAL$2),this.level=-1,!this.startFragRequested){let Pr=Ar.startLevel;Pr===-1&&(Ar.config.testBandwidth&&this.levels.length>1?(Pr=0,this.bitrateTest=!0):Pr=Ar.nextAutoLevel),this.level=Ar.nextLoadLevel=Pr,this.loadedmetadata=!1}Rr>0&&Tr===-1&&(this.log(`Override startPosition with lastCurrentTime @${Rr.toFixed(3)}`),Tr=Rr),this.state=State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=Tr,this.tick()}else this._forceStartLoad=!0,this.state=State.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case State.WAITING_LEVEL:{var Tr;const{levels:Ar,level:Pr}=this,Lr=Ar==null||(Tr=Ar[Pr])==null?void 0:Tr.details;if(Lr&&(!Lr.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(Lr))break;this.state=State.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=State.IDLE;break}break}case State.FRAG_LOADING_WAITING_RETRY:{var Rr;const Ar=self.performance.now(),Pr=this.retryDate;(!Pr||Ar>=Pr||(Rr=this.media)!=null&&Rr.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=State.IDLE)}break}this.state===State.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:Tr,levelLastLoaded:Rr,levels:Ar,media:Pr}=this,{config:Lr,nextLoadLevel:Mr}=Tr;if(Rr===null||!Pr&&(this.startFragRequested||!Lr.startFragPrefetch)||this.altAudio&&this.audioOnly||!(Ar!=null&&Ar[Mr]))return;const Fr=Ar[Mr],zr=this.getMainFwdBufferInfo();if(zr===null)return;const Ur=this.getLevelDetails();if(Ur&&this._streamEnded(zr,Ur)){const qr={};this.altAudio&&(qr.type="video"),this.hls.trigger(Events.BUFFER_EOS,qr),this.state=State.ENDED;return}Tr.loadLevel!==Mr&&Tr.manualLevel===-1&&this.log(`Adapting to level ${Mr} from level ${this.level}`),this.level=Tr.nextLoadLevel=Mr;const Vr=Fr.details;if(!Vr||this.state===State.WAITING_LEVEL||Vr.live&&this.levelLastLoaded!==Mr){this.level=Mr,this.state=State.WAITING_LEVEL;return}const Nr=zr.len,Dr=this.getMaxBufferLength(Fr.maxBitrate);if(Nr>=Dr)return;this.backtrackFragment&&this.backtrackFragment.start>zr.end&&(this.backtrackFragment=null);const jr=this.backtrackFragment?this.backtrackFragment.start:zr.end;let Gr=this.getNextFragment(jr,Vr);if(this.couldBacktrack&&!this.fragPrevious&&Gr&&Gr.sn!=="initSegment"&&this.fragmentTracker.getState(Gr)!==FragmentState.OK){var Wr;const Kr=((Wr=this.backtrackFragment)!=null?Wr:Gr).sn-Vr.startSN,Xr=Vr.fragments[Kr-1];Xr&&Gr.cc===Xr.cc&&(Gr=Xr,this.fragmentTracker.removeFragment(Xr))}else this.backtrackFragment&&zr.len&&(this.backtrackFragment=null);if(Gr&&this.isLoopLoading(Gr,jr)){if(!Gr.gap){const Kr=this.audioOnly&&!this.altAudio?ElementaryStreamTypes.AUDIO:ElementaryStreamTypes.VIDEO,Xr=(Kr===ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;Xr&&this.afterBufferFlushed(Xr,Kr,PlaylistLevelType.MAIN)}Gr=this.getNextFragmentLoopLoading(Gr,Vr,zr,PlaylistLevelType.MAIN,Dr)}Gr&&(Gr.initSegment&&!Gr.initSegment.data&&!this.bitrateTest&&(Gr=Gr.initSegment),this.loadFragment(Gr,Fr,jr))}loadFragment(Tr,Rr,Ar){const Pr=this.fragmentTracker.getState(Tr);this.fragCurrent=Tr,Pr===FragmentState.NOT_LOADED||Pr===FragmentState.PARTIAL?Tr.sn==="initSegment"?this._loadInitSegment(Tr,Rr):this.bitrateTest?(this.log(`Fragment ${Tr.sn} of level ${Tr.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(Tr,Rr)):(this.startFragRequested=!0,super.loadFragment(Tr,Rr,Ar)):this.clearTrackerIfNeeded(Tr)}getBufferedFrag(Tr){return this.fragmentTracker.getBufferedFrag(Tr,PlaylistLevelType.MAIN)}followingBufferedFrag(Tr){return Tr?this.getBufferedFrag(Tr.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:Tr,media:Rr}=this;if(Rr!=null&&Rr.readyState){let Ar;const Pr=this.getAppendedFrag(Rr.currentTime);Pr&&Pr.start>1&&this.flushMainBuffer(0,Pr.start-1);const Lr=this.getLevelDetails();if(Lr!=null&&Lr.live){const Fr=this.getMainFwdBufferInfo();if(!Fr||Fr.len<Lr.targetduration*2)return}if(!Rr.paused&&Tr){const Fr=this.hls.nextLoadLevel,zr=Tr[Fr],Ur=this.fragLastKbps;Ur&&this.fragCurrent?Ar=this.fragCurrent.duration*zr.maxBitrate/(1e3*Ur)+1:Ar=0}else Ar=0;const Mr=this.getBufferedFrag(Rr.currentTime+Ar);if(Mr){const Fr=this.followingBufferedFrag(Mr);if(Fr){this.abortCurrentFrag();const zr=Fr.maxStartPTS?Fr.maxStartPTS:Fr.start,Ur=Fr.duration,Vr=Math.max(Mr.end,zr+Math.min(Math.max(Ur-this.config.maxFragLookUpTolerance,Ur*.5),Ur*.75));this.flushMainBuffer(Vr,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const Tr=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,Tr&&(Tr.abortRequests(),this.fragmentTracker.removeFragment(Tr)),this.state){case State.KEY_LOADING:case State.FRAG_LOADING:case State.FRAG_LOADING_WAITING_RETRY:case State.PARSING:case State.PARSED:this.state=State.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(Tr,Rr){super.flushMainBuffer(Tr,Rr,this.altAudio?"video":null)}onMediaAttached(Tr,Rr){super.onMediaAttached(Tr,Rr);const Ar=Rr.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),Ar.addEventListener("playing",this.onvplaying),Ar.addEventListener("seeked",this.onvseeked),this.gapController=new GapController(this.config,Ar,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:Tr}=this;Tr&&this.onvplaying&&this.onvseeked&&(Tr.removeEventListener("playing",this.onvplaying),Tr.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const Tr=this.media,Rr=Tr?Tr.currentTime:null;isFiniteNumber(Rr)&&this.log(`Media seeked to ${Rr.toFixed(3)}`);const Ar=this.getMainFwdBufferInfo();if(Ar===null||Ar.len===0){this.warn(`Main forward buffer length on "seeked" event ${Ar?Ar.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1}onManifestParsed(Tr,Rr){let Ar=!1,Pr=!1,Lr;Rr.levels.forEach(Mr=>{Lr=Mr.audioCodec,Lr&&(Lr.indexOf("mp4a.40.2")!==-1&&(Ar=!0),Lr.indexOf("mp4a.40.5")!==-1&&(Pr=!0))}),this.audioCodecSwitch=Ar&&Pr&&!changeTypeSupported(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=Rr.levels,this.startFragRequested=!1}onLevelLoading(Tr,Rr){const{levels:Ar}=this;if(!Ar||this.state!==State.IDLE)return;const Pr=Ar[Rr.level];(!Pr.details||Pr.details.live&&this.levelLastLoaded!==Rr.level||this.waitForCdnTuneIn(Pr.details))&&(this.state=State.WAITING_LEVEL)}onLevelLoaded(Tr,Rr){var Ar;const{levels:Pr}=this,Lr=Rr.level,Mr=Rr.details,Fr=Mr.totalduration;if(!Pr){this.warn(`Levels were reset while loading level ${Lr}`);return}this.log(`Level ${Lr} loaded [${Mr.startSN},${Mr.endSN}]${Mr.lastPartSn?`[part-${Mr.lastPartSn}-${Mr.lastPartIndex}]`:""}, cc [${Mr.startCC}, ${Mr.endCC}] duration:${Fr}`);const zr=Pr[Lr],Ur=this.fragCurrent;Ur&&(this.state===State.FRAG_LOADING||this.state===State.FRAG_LOADING_WAITING_RETRY)&&(Ur.level!==Rr.level||Ur.urlId!==zr.urlId)&&Ur.loader&&this.abortCurrentFrag();let Vr=0;if(Mr.live||(Ar=zr.details)!=null&&Ar.live){if(this.checkLiveUpdate(Mr),Mr.deltaUpdateFailed)return;Vr=this.alignPlaylists(Mr,zr.details)}if(zr.details=Mr,this.levelLastLoaded=Lr,this.hls.trigger(Events.LEVEL_UPDATED,{details:Mr,level:Lr}),this.state===State.WAITING_LEVEL){if(this.waitForCdnTuneIn(Mr))return;this.state=State.IDLE}this.startFragRequested?Mr.live&&this.synchronizeToLiveEdge(Mr):this.setStartPosition(Mr,Vr),this.tick()}_handleFragmentLoadProgress(Tr){var Rr;const{frag:Ar,part:Pr,payload:Lr}=Tr,{levels:Mr}=this;if(!Mr){this.warn(`Levels were reset while fragment load was in progress. Fragment ${Ar.sn} of level ${Ar.level} will not be buffered`);return}const Fr=Mr[Ar.level],zr=Fr.details;if(!zr){this.warn(`Dropping fragment ${Ar.sn} of level ${Ar.level} after level details were reset`),this.fragmentTracker.removeFragment(Ar);return}const Ur=Fr.videoCodec,Vr=zr.PTSKnown||!zr.live,Nr=(Rr=Ar.initSegment)==null?void 0:Rr.data,Dr=this._getAudioCodec(Fr),jr=this.transmuxer=this.transmuxer||new TransmuxerInterface(this.hls,PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),Gr=Pr?Pr.index:-1,Wr=Gr!==-1,qr=new ChunkMetadata(Ar.level,Ar.sn,Ar.stats.chunkCount,Lr.byteLength,Gr,Wr),Kr=this.initPTS[Ar.cc];jr.push(Lr,Nr,Dr,Ur,Ar,Pr,zr.totalduration,Vr,qr,Kr)}onAudioTrackSwitching(Tr,Rr){const Ar=this.altAudio;if(!!!Rr.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const Mr=this.fragCurrent;Mr&&(this.log("Switching to main audio track, cancel main fragment load"),Mr.abortRequests(),this.fragmentTracker.removeFragment(Mr)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const Lr=this.hls;Ar&&(Lr.trigger(Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),Lr.trigger(Events.AUDIO_TRACK_SWITCHED,Rr)}}onAudioTrackSwitched(Tr,Rr){const Ar=Rr.id,Pr=!!this.hls.audioTracks[Ar].url;if(Pr){const Lr=this.videoBuffer;Lr&&this.mediaBuffer!==Lr&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=Lr)}this.altAudio=Pr,this.tick()}onBufferCreated(Tr,Rr){const Ar=Rr.tracks;let Pr,Lr,Mr=!1;for(const Fr in Ar){const zr=Ar[Fr];if(zr.id==="main"){if(Lr=Fr,Pr=zr,Fr==="video"){const Ur=Ar[Fr];Ur&&(this.videoBuffer=Ur.buffer)}}else Mr=!0}Mr&&Pr?(this.log(`Alternate track found, use ${Lr}.buffered to schedule main fragment loading`),this.mediaBuffer=Pr.buffer):this.mediaBuffer=this.media}onFragBuffered(Tr,Rr){const{frag:Ar,part:Pr}=Rr;if(Ar&&Ar.type!==PlaylistLevelType.MAIN)return;if(this.fragContextChanged(Ar)){this.warn(`Fragment ${Ar.sn}${Pr?" p: "+Pr.index:""} of level ${Ar.level} finished buffering, but was aborted. state: ${this.state}`),this.state===State.PARSED&&(this.state=State.IDLE);return}const Lr=Pr?Pr.stats:Ar.stats;this.fragLastKbps=Math.round(8*Lr.total/(Lr.buffering.end-Lr.loading.first)),Ar.sn!=="initSegment"&&(this.fragPrevious=Ar),this.fragBufferedComplete(Ar,Pr)}onError(Tr,Rr){var Ar;if(Rr.fatal){this.state=State.ERROR;return}switch(Rr.details){case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_PARSING_ERROR:case ErrorDetails.FRAG_DECRYPT_ERROR:case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(PlaylistLevelType.MAIN,Rr);break;case ErrorDetails.LEVEL_LOAD_ERROR:case ErrorDetails.LEVEL_LOAD_TIMEOUT:case ErrorDetails.LEVEL_PARSING_ERROR:!Rr.levelRetry&&this.state===State.WAITING_LEVEL&&((Ar=Rr.context)==null?void 0:Ar.type)===PlaylistContextType.LEVEL&&(this.state=State.IDLE);break;case ErrorDetails.BUFFER_FULL_ERROR:if(!Rr.parent||Rr.parent!=="main")return;this.reduceLengthAndFlushBuffer(Rr)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case ErrorDetails.INTERNAL_EXCEPTION:this.recoverWorkerError(Rr);break}}checkBuffer(){const{media:Tr,gapController:Rr}=this;if(!(!Tr||!Rr||!Tr.readyState)){if(this.loadedmetadata||!BufferHelper.getBuffered(Tr).length){const Ar=this.state!==State.IDLE?this.fragCurrent:null;Rr.poll(this.lastCurrentTime,Ar)}this.lastCurrentTime=Tr.currentTime}}onFragLoadEmergencyAborted(){this.state=State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(Tr,{type:Rr}){if(Rr!==ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){const Ar=(Rr===ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(Ar,Rr,PlaylistLevelType.MAIN)}}onLevelsUpdated(Tr,Rr){this.levels=Rr.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:Tr}=this;if(!Tr)return;const Rr=Tr.currentTime;let Ar=this.startPosition;if(Ar>=0&&Rr<Ar){if(Tr.seeking){this.log(`could not seek to ${Ar}, already seeking at ${Rr}`);return}const Pr=BufferHelper.getBuffered(Tr),Mr=(Pr.length?Pr.start(0):0)-Ar;Mr>0&&(Mr<this.config.maxBufferHole||Mr<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${Mr} to match buffer start`),Ar+=Mr,this.startPosition=Ar),this.log(`seek to target start position ${Ar} from current time ${Rr}`),Tr.currentTime=Ar}}_getAudioCodec(Tr){let Rr=this.config.defaultAudioCodec||Tr.audioCodec;return this.audioCodecSwap&&Rr&&(this.log("Swapping audio codec"),Rr.indexOf("mp4a.40.5")!==-1?Rr="mp4a.40.2":Rr="mp4a.40.5"),Rr}_loadBitrateTestFrag(Tr,Rr){Tr.bitrateTest=!0,this._doFragLoad(Tr,Rr).then(Ar=>{const{hls:Pr}=this;if(!Ar||this.fragContextChanged(Tr))return;Rr.fragmentError=0,this.state=State.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const Lr=Tr.stats;Lr.parsing.start=Lr.parsing.end=Lr.buffering.start=Lr.buffering.end=self.performance.now(),Pr.trigger(Events.FRAG_LOADED,Ar),Tr.bitrateTest=!1})}_handleTransmuxComplete(Tr){var Rr;const Ar="main",{hls:Pr}=this,{remuxResult:Lr,chunkMeta:Mr}=Tr,Fr=this.getCurrentContext(Mr);if(!Fr){this.resetWhenMissingContext(Mr);return}const{frag:zr,part:Ur,level:Vr}=Fr,{video:Nr,text:Dr,id3:jr,initSegment:Gr}=Lr,{details:Wr}=Vr,qr=this.altAudio?void 0:Lr.audio;if(this.fragContextChanged(zr)){this.fragmentTracker.removeFragment(zr);return}if(this.state=State.PARSING,Gr){if(Gr!=null&&Gr.tracks){const Zr=zr.initSegment||zr;this._bufferInitSegment(Vr,Gr.tracks,Zr,Mr),Pr.trigger(Events.FRAG_PARSING_INIT_SEGMENT,{frag:Zr,id:Ar,tracks:Gr.tracks})}const Kr=Gr.initPTS,Xr=Gr.timescale;isFiniteNumber(Kr)&&(this.initPTS[zr.cc]={baseTime:Kr,timescale:Xr},Pr.trigger(Events.INIT_PTS_FOUND,{frag:zr,id:Ar,initPTS:Kr,timescale:Xr}))}if(Nr&&Wr&&zr.sn!=="initSegment"){const Kr=Wr.fragments[zr.sn-1-Wr.startSN],Xr=zr.sn===Wr.startSN,Zr=!Kr||zr.cc>Kr.cc;if(Lr.independent!==!1){const{startPTS:Jr,endPTS:_i,startDTS:es,endDTS:ts}=Nr;if(Ur)Ur.elementaryStreams[Nr.type]={startPTS:Jr,endPTS:_i,startDTS:es,endDTS:ts};else if(Nr.firstKeyFrame&&Nr.independent&&Mr.id===1&&!Zr&&(this.couldBacktrack=!0),Nr.dropped&&Nr.independent){const rs=this.getMainFwdBufferInfo(),ns=(rs?rs.end:this.getLoadPosition())+this.config.maxBufferHole,as=Nr.firstKeyFramePTS?Nr.firstKeyFramePTS:Jr;if(!Xr&&ns<as-this.config.maxBufferHole&&!Zr){this.backtrack(zr);return}else Zr&&(zr.gap=!0);zr.setElementaryStreamInfo(Nr.type,zr.start,_i,zr.start,ts,!0)}zr.setElementaryStreamInfo(Nr.type,Jr,_i,es,ts),this.backtrackFragment&&(this.backtrackFragment=zr),this.bufferFragmentData(Nr,zr,Ur,Mr,Xr||Zr)}else if(Xr||Zr)zr.gap=!0;else{this.backtrack(zr);return}}if(qr){const{startPTS:Kr,endPTS:Xr,startDTS:Zr,endDTS:Jr}=qr;Ur&&(Ur.elementaryStreams[ElementaryStreamTypes.AUDIO]={startPTS:Kr,endPTS:Xr,startDTS:Zr,endDTS:Jr}),zr.setElementaryStreamInfo(ElementaryStreamTypes.AUDIO,Kr,Xr,Zr,Jr),this.bufferFragmentData(qr,zr,Ur,Mr)}if(Wr&&jr!=null&&(Rr=jr.samples)!=null&&Rr.length){const Kr={id:Ar,frag:zr,details:Wr,samples:jr.samples};Pr.trigger(Events.FRAG_PARSING_METADATA,Kr)}if(Wr&&Dr){const Kr={id:Ar,frag:zr,details:Wr,samples:Dr.samples};Pr.trigger(Events.FRAG_PARSING_USERDATA,Kr)}}_bufferInitSegment(Tr,Rr,Ar,Pr){if(this.state!==State.PARSING)return;this.audioOnly=!!Rr.audio&&!Rr.video,this.altAudio&&!this.audioOnly&&delete Rr.audio;const{audio:Lr,video:Mr,audiovideo:Fr}=Rr;if(Lr){let zr=Tr.audioCodec;const Ur=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(zr&&(zr.indexOf("mp4a.40.5")!==-1?zr="mp4a.40.2":zr="mp4a.40.5"),Lr.metadata.channelCount!==1&&Ur.indexOf("firefox")===-1&&(zr="mp4a.40.5")),Ur.indexOf("android")!==-1&&Lr.container!=="audio/mpeg"&&(zr="mp4a.40.2",this.log(`Android: force audio codec to ${zr}`)),Tr.audioCodec&&Tr.audioCodec!==zr&&this.log(`Swapping manifest audio codec "${Tr.audioCodec}" for "${zr}"`),Lr.levelCodec=zr,Lr.id="main",this.log(`Init audio buffer, container:${Lr.container}, codecs[selected/level/parsed]=[${zr||""}/${Tr.audioCodec||""}/${Lr.codec}]`)}Mr&&(Mr.levelCodec=Tr.videoCodec,Mr.id="main",this.log(`Init video buffer, container:${Mr.container}, codecs[level/parsed]=[${Tr.videoCodec||""}/${Mr.codec}]`)),Fr&&this.log(`Init audiovideo buffer, container:${Fr.container}, codecs[level/parsed]=[${Tr.attrs.CODECS||""}/${Fr.codec}]`),this.hls.trigger(Events.BUFFER_CODECS,Rr),Object.keys(Rr).forEach(zr=>{const Vr=Rr[zr].initSegment;Vr!=null&&Vr.byteLength&&this.hls.trigger(Events.BUFFER_APPENDING,{type:zr,data:Vr,frag:Ar,part:null,chunkMeta:Pr,parent:Ar.type})}),this.tick()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,PlaylistLevelType.MAIN)}backtrack(Tr){this.couldBacktrack=!0,this.backtrackFragment=Tr,this.resetTransmuxer(),this.flushBufferGap(Tr),this.fragmentTracker.removeFragment(Tr),this.fragPrevious=null,this.nextLoadPosition=Tr.start,this.state=State.IDLE}checkFragmentChanged(){const Tr=this.media;let Rr=null;if(Tr&&Tr.readyState>1&&Tr.seeking===!1){const Ar=Tr.currentTime;if(BufferHelper.isBuffered(Tr,Ar)?Rr=this.getAppendedFrag(Ar):BufferHelper.isBuffered(Tr,Ar+.1)&&(Rr=this.getAppendedFrag(Ar+.1)),Rr){this.backtrackFragment=null;const Pr=this.fragPlaying,Lr=Rr.level;(!Pr||Rr.sn!==Pr.sn||Pr.level!==Lr||Rr.urlId!==Pr.urlId)&&(this.fragPlaying=Rr,this.hls.trigger(Events.FRAG_CHANGED,{frag:Rr}),(!Pr||Pr.level!==Lr)&&this.hls.trigger(Events.LEVEL_SWITCHED,{level:Lr}))}}}get nextLevel(){const Tr=this.nextBufferedFrag;return Tr?Tr.level:-1}get currentFrag(){const Tr=this.media;return Tr?this.fragPlaying||this.getAppendedFrag(Tr.currentTime):null}get currentProgramDateTime(){const Tr=this.media;if(Tr){const Rr=Tr.currentTime,Ar=this.currentFrag;if(Ar&&isFiniteNumber(Rr)&&isFiniteNumber(Ar.programDateTime)){const Pr=Ar.programDateTime+(Rr-Ar.start)*1e3;return new Date(Pr)}}return null}get currentLevel(){const Tr=this.currentFrag;return Tr?Tr.level:-1}get nextBufferedFrag(){const Tr=this.currentFrag;return Tr?this.followingBufferedFrag(Tr):null}get forceStartLoad(){return this._forceStartLoad}}class EWMA{constructor(Tr,Rr=0,Ar=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=Tr,this.alpha_=Tr?Math.exp(Math.log(.5)/Tr):0,this.estimate_=Rr,this.totalWeight_=Ar}sample(Tr,Rr){const Ar=Math.pow(this.alpha_,Tr);this.estimate_=Rr*(1-Ar)+Ar*this.estimate_,this.totalWeight_+=Tr}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const Tr=1-Math.pow(this.alpha_,this.totalWeight_);if(Tr)return this.estimate_/Tr}return this.estimate_}}class EwmaBandWidthEstimator{constructor(Tr,Rr,Ar,Pr=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=Ar,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new EWMA(Tr),this.fast_=new EWMA(Rr),this.defaultTTFB_=Pr,this.ttfb_=new EWMA(Tr)}update(Tr,Rr){const{slow_:Ar,fast_:Pr,ttfb_:Lr}=this;Ar.halfLife!==Tr&&(this.slow_=new EWMA(Tr,Ar.getEstimate(),Ar.getTotalWeight())),Pr.halfLife!==Rr&&(this.fast_=new EWMA(Rr,Pr.getEstimate(),Pr.getTotalWeight())),Lr.halfLife!==Tr&&(this.ttfb_=new EWMA(Tr,Lr.getEstimate(),Lr.getTotalWeight()))}sample(Tr,Rr){Tr=Math.max(Tr,this.minDelayMs_);const Ar=8*Rr,Pr=Tr/1e3,Lr=Ar/Pr;this.fast_.sample(Pr,Lr),this.slow_.sample(Pr,Lr)}sampleTTFB(Tr){const Rr=Tr/1e3,Ar=Math.sqrt(2)*Math.exp(-Math.pow(Rr,2)/2);this.ttfb_.sample(Ar,Math.max(Tr,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}class AbrController{constructor(Tr){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=Tr;const Rr=Tr.config;this.bwEstimator=new EwmaBandWidthEstimator(Rr.abrEwmaSlowVoD,Rr.abrEwmaFastVoD,Rr.abrEwmaDefaultEstimate),this.registerListeners()}registerListeners(){const{hls:Tr}=this;Tr.on(Events.FRAG_LOADING,this.onFragLoading,this),Tr.on(Events.FRAG_LOADED,this.onFragLoaded,this),Tr.on(Events.FRAG_BUFFERED,this.onFragBuffered,this),Tr.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),Tr.on(Events.LEVEL_LOADED,this.onLevelLoaded,this)}unregisterListeners(){const{hls:Tr}=this;Tr.off(Events.FRAG_LOADING,this.onFragLoading,this),Tr.off(Events.FRAG_LOADED,this.onFragLoaded,this),Tr.off(Events.FRAG_BUFFERED,this.onFragBuffered,this),Tr.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),Tr.off(Events.LEVEL_LOADED,this.onLevelLoaded,this)}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null}onFragLoading(Tr,Rr){var Ar;const Pr=Rr.frag;this.ignoreFragment(Pr)||(this.fragCurrent=Pr,this.partCurrent=(Ar=Rr.part)!=null?Ar:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))}onLevelSwitching(Tr,Rr){this.clearTimer()}getTimeToLoadFrag(Tr,Rr,Ar,Pr){const Lr=Tr+Ar/Rr,Mr=Pr?this.lastLevelLoadSec:0;return Lr+Mr}onLevelLoaded(Tr,Rr){const Ar=this.hls.config,{total:Pr,bwEstimate:Lr}=Rr.stats;isFiniteNumber(Pr)&&isFiniteNumber(Lr)&&(this.lastLevelLoadSec=8*Pr/Lr),Rr.details.live?this.bwEstimator.update(Ar.abrEwmaSlowLive,Ar.abrEwmaFastLive):this.bwEstimator.update(Ar.abrEwmaSlowVoD,Ar.abrEwmaFastVoD)}_abandonRulesCheck(){const{fragCurrent:Tr,partCurrent:Rr,hls:Ar}=this,{autoLevelEnabled:Pr,media:Lr}=Ar;if(!Tr||!Lr)return;const Mr=performance.now(),Fr=Rr?Rr.stats:Tr.stats,zr=Rr?Rr.duration:Tr.duration,Ur=Mr-Fr.loading.start;if(Fr.aborted||Fr.loaded&&Fr.loaded===Fr.total||Tr.level===0){this.clearTimer(),this._nextAutoLevel=-1;return}if(!Pr||Lr.paused||!Lr.playbackRate||!Lr.readyState)return;const Vr=Ar.mainForwardBufferInfo;if(Vr===null)return;const Nr=this.bwEstimator.getEstimateTTFB(),Dr=Math.abs(Lr.playbackRate);if(Ur<=Math.max(Nr,1e3*(zr/(Dr*2))))return;const jr=Vr.len/Dr;if(jr>=2*zr/Dr)return;const Gr=Fr.loading.first?Fr.loading.first-Fr.loading.start:-1,Wr=Fr.loaded&&Gr>-1,qr=this.bwEstimator.getEstimate(),{levels:Kr,minAutoLevel:Xr}=Ar,Zr=Kr[Tr.level],Jr=Fr.total||Math.max(Fr.loaded,Math.round(zr*Zr.maxBitrate/8));let _i=Ur-Gr;_i<1&&Wr&&(_i=Math.min(Ur,Fr.loaded*8/qr));const es=Wr?Fr.loaded*1e3/_i:0,ts=es?(Jr-Fr.loaded)/es:Jr*8/qr+Nr/1e3;if(ts<=jr)return;const rs=es?es*8:qr;let ns=Number.POSITIVE_INFINITY,as;for(as=Tr.level-1;as>Xr;as--){const ls=Kr[as].maxBitrate;if(ns=this.getTimeToLoadFrag(Nr/1e3,rs,zr*ls,!Kr[as].details),ns<jr)break}ns>=ts||ns>zr*10||(Ar.nextLoadLevel=as,Wr?this.bwEstimator.sample(Ur-Math.min(Nr,Gr),Fr.loaded):this.bwEstimator.sampleTTFB(Ur),this.clearTimer(),logger.warn(`[abr] Fragment ${Tr.sn}${Rr?" part "+Rr.index:""} of level ${Tr.level} is loading too slowly;
      Time to underbuffer: ${jr.toFixed(3)} s
      Estimated load time for current fragment: ${ts.toFixed(3)} s
      Estimated load time for down switch fragment: ${ns.toFixed(3)} s
      TTFB estimate: ${Gr}
      Current BW estimate: ${isFiniteNumber(qr)?(qr/1024).toFixed(3):"Unknown"} Kb/s
      New BW estimate: ${(this.bwEstimator.getEstimate()/1024).toFixed(3)} Kb/s
      Aborting and switching to level ${as}`),Tr.loader&&(this.fragCurrent=this.partCurrent=null,Tr.abortRequests()),Ar.trigger(Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:Tr,part:Rr,stats:Fr}))}onFragLoaded(Tr,{frag:Rr,part:Ar}){const Pr=Ar?Ar.stats:Rr.stats;if(Rr.type===PlaylistLevelType.MAIN&&this.bwEstimator.sampleTTFB(Pr.loading.first-Pr.loading.start),!this.ignoreFragment(Rr)){if(this.clearTimer(),this.lastLoadedFragLevel=Rr.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){const Lr=Ar?Ar.duration:Rr.duration,Mr=this.hls.levels[Rr.level],Fr=(Mr.loaded?Mr.loaded.bytes:0)+Pr.loaded,zr=(Mr.loaded?Mr.loaded.duration:0)+Lr;Mr.loaded={bytes:Fr,duration:zr},Mr.realBitrate=Math.round(8*Fr/zr)}if(Rr.bitrateTest){const Lr={stats:Pr,frag:Rr,part:Ar,id:Rr.type};this.onFragBuffered(Events.FRAG_BUFFERED,Lr),Rr.bitrateTest=!1}}}onFragBuffered(Tr,Rr){const{frag:Ar,part:Pr}=Rr,Lr=Pr!=null&&Pr.stats.loaded?Pr.stats:Ar.stats;if(Lr.aborted||this.ignoreFragment(Ar))return;const Mr=Lr.parsing.end-Lr.loading.start-Math.min(Lr.loading.first-Lr.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(Mr,Lr.loaded),Lr.bwEstimate=this.bwEstimator.getEstimate(),Ar.bitrateTest?this.bitrateTestDelay=Mr/1e3:this.bitrateTestDelay=0}ignoreFragment(Tr){return Tr.type!==PlaylistLevelType.MAIN||Tr.sn==="initSegment"}clearTimer(){self.clearInterval(this.timer)}get nextAutoLevel(){const Tr=this._nextAutoLevel,Rr=this.bwEstimator;if(Tr!==-1&&!Rr.canEstimate())return Tr;let Ar=this.getNextABRAutoLevel();if(Tr!==-1){const Pr=this.hls.levels;if(Pr.length>Math.max(Tr,Ar)&&Pr[Tr].loadError<=Pr[Ar].loadError)return Tr}return Tr!==-1&&(Ar=Math.min(Tr,Ar)),Ar}getNextABRAutoLevel(){const{fragCurrent:Tr,partCurrent:Rr,hls:Ar}=this,{maxAutoLevel:Pr,config:Lr,minAutoLevel:Mr,media:Fr}=Ar,zr=Rr?Rr.duration:Tr?Tr.duration:0,Ur=Fr&&Fr.playbackRate!==0?Math.abs(Fr.playbackRate):1,Vr=this.bwEstimator?this.bwEstimator.getEstimate():Lr.abrEwmaDefaultEstimate,Nr=Ar.mainForwardBufferInfo,Dr=(Nr?Nr.len:0)/Ur;let jr=this.findBestLevel(Vr,Mr,Pr,Dr,Lr.abrBandWidthFactor,Lr.abrBandWidthUpFactor);if(jr>=0)return jr;logger.trace(`[abr] ${Dr?"rebuffering expected":"buffer is empty"}, finding optimal quality level`);let Gr=zr?Math.min(zr,Lr.maxStarvationDelay):Lr.maxStarvationDelay,Wr=Lr.abrBandWidthFactor,qr=Lr.abrBandWidthUpFactor;if(!Dr){const Kr=this.bitrateTestDelay;Kr&&(Gr=(zr?Math.min(zr,Lr.maxLoadingDelay):Lr.maxLoadingDelay)-Kr,logger.trace(`[abr] bitrate test took ${Math.round(1e3*Kr)}ms, set first fragment max fetchDuration to ${Math.round(1e3*Gr)} ms`),Wr=qr=1)}return jr=this.findBestLevel(Vr,Mr,Pr,Dr+Gr,Wr,qr),Math.max(jr,0)}findBestLevel(Tr,Rr,Ar,Pr,Lr,Mr){var Fr;const{fragCurrent:zr,partCurrent:Ur,lastLoadedFragLevel:Vr}=this,{levels:Nr}=this.hls,Dr=Nr[Vr],jr=!!(Dr!=null&&(Fr=Dr.details)!=null&&Fr.live),Gr=Dr==null?void 0:Dr.codecSet,Wr=Ur?Ur.duration:zr?zr.duration:0,qr=this.bwEstimator.getEstimateTTFB()/1e3;let Kr=Rr,Xr=-1;for(let Zr=Ar;Zr>=Rr;Zr--){const Jr=Nr[Zr];if(!Jr||Gr&&Jr.codecSet!==Gr){Jr&&(Kr=Math.min(Zr,Kr),Xr=Math.max(Zr,Xr));continue}Xr!==-1&&logger.trace(`[abr] Skipped level(s) ${Kr}-${Xr} with CODECS:"${Nr[Xr].attrs.CODECS}"; not compatible with "${Dr.attrs.CODECS}"`);const _i=Jr.details,es=(Ur?_i==null?void 0:_i.partTarget:_i==null?void 0:_i.averagetargetduration)||Wr;let ts;Zr<=Vr?ts=Lr*Tr:ts=Mr*Tr;const rs=Nr[Zr].maxBitrate,ns=this.getTimeToLoadFrag(qr,ts,rs*es,_i===void 0);if(logger.trace(`[abr] level:${Zr} adjustedbw-bitrate:${Math.round(ts-rs)} avgDuration:${es.toFixed(1)} maxFetchDuration:${Pr.toFixed(1)} fetchDuration:${ns.toFixed(1)}`),ts>rs&&(ns===0||!isFiniteNumber(ns)||jr&&!this.bitrateTestDelay||ns<Pr))return Zr}return-1}set nextAutoLevel(Tr){this._nextAutoLevel=Tr}}class ChunkCache{constructor(){this.chunks=[],this.dataLength=0}push(Tr){this.chunks.push(Tr),this.dataLength+=Tr.length}flush(){const{chunks:Tr,dataLength:Rr}=this;let Ar;if(Tr.length)Tr.length===1?Ar=Tr[0]:Ar=concatUint8Arrays(Tr,Rr);else return new Uint8Array(0);return this.reset(),Ar}reset(){this.chunks.length=0,this.dataLength=0}}function concatUint8Arrays(_r,Tr){const Rr=new Uint8Array(Tr);let Ar=0;for(let Pr=0;Pr<_r.length;Pr++){const Lr=_r[Pr];Rr.set(Lr,Ar),Ar+=Lr.length}return Rr}const TICK_INTERVAL$1=100;class AudioStreamController extends BaseStreamController{constructor(Tr,Rr,Ar){super(Tr,Rr,Ar,"[audio-stream-controller]",PlaylistLevelType.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:Tr}=this;Tr.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Tr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),Tr.on(Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),Tr.on(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),Tr.on(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),Tr.on(Events.ERROR,this.onError,this),Tr.on(Events.BUFFER_RESET,this.onBufferReset,this),Tr.on(Events.BUFFER_CREATED,this.onBufferCreated,this),Tr.on(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),Tr.on(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),Tr.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:Tr}=this;Tr.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Tr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),Tr.off(Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),Tr.off(Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),Tr.off(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),Tr.off(Events.ERROR,this.onError,this),Tr.off(Events.BUFFER_RESET,this.onBufferReset,this),Tr.off(Events.BUFFER_CREATED,this.onBufferCreated,this),Tr.off(Events.BUFFER_FLUSHED,this.onBufferFlushed,this),Tr.off(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),Tr.off(Events.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(Tr,{frag:Rr,id:Ar,initPTS:Pr,timescale:Lr}){if(Ar==="main"){const Mr=Rr.cc;this.initPTS[Rr.cc]={baseTime:Pr,timescale:Lr},this.log(`InitPTS for cc: ${Mr} found from main: ${Pr}`),this.videoTrackCC=Mr,this.state===State.WAITING_INIT_PTS&&this.tick()}}startLoad(Tr){if(!this.levels){this.startPosition=Tr,this.state=State.STOPPED;return}const Rr=this.lastCurrentTime;this.stopLoad(),this.setInterval(TICK_INTERVAL$1),Rr>0&&Tr===-1?(this.log(`Override startPosition with lastCurrentTime @${Rr.toFixed(3)}`),Tr=Rr,this.state=State.IDLE):(this.loadedmetadata=!1,this.state=State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=Tr,this.tick()}doTick(){switch(this.state){case State.IDLE:this.doTickIdle();break;case State.WAITING_TRACK:{var Tr;const{levels:Ar,trackId:Pr}=this,Lr=Ar==null||(Tr=Ar[Pr])==null?void 0:Tr.details;if(Lr){if(this.waitForCdnTuneIn(Lr))break;this.state=State.WAITING_INIT_PTS}break}case State.FRAG_LOADING_WAITING_RETRY:{var Rr;const Ar=performance.now(),Pr=this.retryDate;(!Pr||Ar>=Pr||(Rr=this.media)!=null&&Rr.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=State.IDLE);break}case State.WAITING_INIT_PTS:{const Ar=this.waitingData;if(Ar){const{frag:Pr,part:Lr,cache:Mr,complete:Fr}=Ar;if(this.initPTS[Pr.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=State.FRAG_LOADING;const zr=Mr.flush(),Ur={frag:Pr,part:Lr,payload:zr,networkDetails:null};this._handleFragmentLoadProgress(Ur),Fr&&super._handleFragmentLoadComplete(Ur)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${Pr.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const zr=this.getLoadPosition(),Ur=BufferHelper.bufferInfo(this.mediaBuffer,zr,this.config.maxBufferHole);fragmentWithinToleranceTest(Ur.end,this.config.maxFragLookUpTolerance,Pr)<0&&(this.log(`Waiting fragment cc (${Pr.cc}) @ ${Pr.start} cancelled because another fragment at ${Ur.end} is needed`),this.clearWaitingFragment())}}else this.state=State.IDLE}}this.onTickEnd()}clearWaitingFragment(){const Tr=this.waitingData;Tr&&(this.fragmentTracker.removeFragment(Tr.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=State.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:Tr}=this;Tr!=null&&Tr.readyState&&(this.lastCurrentTime=Tr.currentTime)}doTickIdle(){const{hls:Tr,levels:Rr,media:Ar,trackId:Pr}=this,Lr=Tr.config;if(!(Rr!=null&&Rr[Pr])||!Ar&&(this.startFragRequested||!Lr.startFragPrefetch))return;const Mr=Rr[Pr],Fr=Mr.details;if(!Fr||Fr.live&&this.levelLastLoaded!==Pr||this.waitForCdnTuneIn(Fr)){this.state=State.WAITING_TRACK;return}const zr=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&zr&&(this.bufferFlushed=!1,this.afterBufferFlushed(zr,ElementaryStreamTypes.AUDIO,PlaylistLevelType.AUDIO));const Ur=this.getFwdBufferInfo(zr,PlaylistLevelType.AUDIO);if(Ur===null)return;const{bufferedTrack:Vr,switchingTrack:Nr}=this;if(!Nr&&this._streamEnded(Ur,Fr)){Tr.trigger(Events.BUFFER_EOS,{type:"audio"}),this.state=State.ENDED;return}const Dr=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,PlaylistLevelType.MAIN),jr=Ur.len,Gr=this.getMaxBufferLength(Dr==null?void 0:Dr.len);if(jr>=Gr&&!Nr)return;const qr=Fr.fragments[0].start;let Kr=Ur.end;if(Nr&&Ar){const _i=this.getLoadPosition();Vr&&Nr.attrs!==Vr.attrs&&(Kr=_i),Fr.PTSKnown&&_i<qr&&(Ur.end>qr||Ur.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),Ar.currentTime=qr+.05)}let Xr=this.getNextFragment(Kr,Fr),Zr=!1;if(Xr&&this.isLoopLoading(Xr,Kr)&&(Zr=!!Xr.gap,Xr=this.getNextFragmentLoopLoading(Xr,Fr,Ur,PlaylistLevelType.MAIN,Gr)),!Xr){this.bufferFlushed=!0;return}const Jr=Dr&&Xr.start>Dr.end+Fr.targetduration;if(Jr||!(Dr!=null&&Dr.len)&&Ur.len){const _i=this.getAppendedFrag(Xr.start,PlaylistLevelType.MAIN);if(_i===null||(Zr||(Zr=!!_i.gap||!!Jr&&Dr.len===0),Jr&&!Zr||Zr&&Ur.nextStart&&Ur.nextStart<_i.end))return}this.loadFragment(Xr,Mr,Kr)}getMaxBufferLength(Tr){const Rr=super.getMaxBufferLength();return Tr?Math.min(Math.max(Rr,Tr),this.config.maxMaxBufferLength):Rr}onMediaDetaching(){this.videoBuffer=null,super.onMediaDetaching()}onAudioTracksUpdated(Tr,{audioTracks:Rr}){this.resetTransmuxer(),this.levels=Rr.map(Ar=>new Level(Ar))}onAudioTrackSwitching(Tr,Rr){const Ar=!!Rr.url;this.trackId=Rr.id;const{fragCurrent:Pr}=this;Pr&&(Pr.abortRequests(),this.removeUnbufferedFrags(Pr.start)),this.resetLoadingState(),Ar?this.setInterval(TICK_INTERVAL$1):this.resetTransmuxer(),Ar?(this.switchingTrack=Rr,this.state=State.IDLE):(this.switchingTrack=null,this.bufferedTrack=Rr,this.state=State.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(Tr,Rr){this.mainDetails=Rr.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(Tr,Rr){var Ar;if(this.mainDetails==null){this.cachedTrackLoadedData=Rr;return}const{levels:Pr}=this,{details:Lr,id:Mr}=Rr;if(!Pr){this.warn(`Audio tracks were reset while loading level ${Mr}`);return}this.log(`Track ${Mr} loaded [${Lr.startSN},${Lr.endSN}]${Lr.lastPartSn?`[part-${Lr.lastPartSn}-${Lr.lastPartIndex}]`:""},duration:${Lr.totalduration}`);const Fr=Pr[Mr];let zr=0;if(Lr.live||(Ar=Fr.details)!=null&&Ar.live){this.checkLiveUpdate(Lr);const Ur=this.mainDetails;if(Lr.deltaUpdateFailed||!Ur)return;!Fr.details&&Lr.hasProgramDateTime&&Ur.hasProgramDateTime?(alignMediaPlaylistByPDT(Lr,Ur),zr=Lr.fragments[0].start):zr=this.alignPlaylists(Lr,Fr.details)}Fr.details=Lr,this.levelLastLoaded=Mr,!this.startFragRequested&&(this.mainDetails||!Lr.live)&&this.setStartPosition(Fr.details,zr),this.state===State.WAITING_TRACK&&!this.waitForCdnTuneIn(Lr)&&(this.state=State.IDLE),this.tick()}_handleFragmentLoadProgress(Tr){var Rr;const{frag:Ar,part:Pr,payload:Lr}=Tr,{config:Mr,trackId:Fr,levels:zr}=this;if(!zr){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${Ar.sn} of level ${Ar.level} will not be buffered`);return}const Ur=zr[Fr];if(!Ur){this.warn("Audio track is undefined on fragment load progress");return}const Vr=Ur.details;if(!Vr){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(Ar.start);return}const Nr=Mr.defaultAudioCodec||Ur.audioCodec||"mp4a.40.2";let Dr=this.transmuxer;Dr||(Dr=this.transmuxer=new TransmuxerInterface(this.hls,PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const jr=this.initPTS[Ar.cc],Gr=(Rr=Ar.initSegment)==null?void 0:Rr.data;if(jr!==void 0){const qr=Pr?Pr.index:-1,Kr=qr!==-1,Xr=new ChunkMetadata(Ar.level,Ar.sn,Ar.stats.chunkCount,Lr.byteLength,qr,Kr);Dr.push(Lr,Gr,Nr,"",Ar,Pr,Vr.totalduration,!1,Xr,jr)}else{this.log(`Unknown video PTS for cc ${Ar.cc}, waiting for video PTS before demuxing audio frag ${Ar.sn} of [${Vr.startSN} ,${Vr.endSN}],track ${Fr}`);const{cache:Wr}=this.waitingData=this.waitingData||{frag:Ar,part:Pr,cache:new ChunkCache,complete:!1};Wr.push(new Uint8Array(Lr)),this.waitingVideoCC=this.videoTrackCC,this.state=State.WAITING_INIT_PTS}}_handleFragmentLoadComplete(Tr){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(Tr)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(Tr,Rr){const Ar=Rr.tracks.audio;Ar&&(this.mediaBuffer=Ar.buffer||null),Rr.tracks.video&&(this.videoBuffer=Rr.tracks.video.buffer||null)}onFragBuffered(Tr,Rr){const{frag:Ar,part:Pr}=Rr;if(Ar.type!==PlaylistLevelType.AUDIO){if(!this.loadedmetadata&&Ar.type===PlaylistLevelType.MAIN){const Lr=this.videoBuffer||this.media;Lr&&BufferHelper.getBuffered(Lr).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(Ar)){this.warn(`Fragment ${Ar.sn}${Pr?" p: "+Pr.index:""} of level ${Ar.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Ar.sn!=="initSegment"){this.fragPrevious=Ar;const Lr=this.switchingTrack;Lr&&(this.bufferedTrack=Lr,this.switchingTrack=null,this.hls.trigger(Events.AUDIO_TRACK_SWITCHED,_objectSpread2({},Lr)))}this.fragBufferedComplete(Ar,Pr)}onError(Tr,Rr){var Ar;if(Rr.fatal){this.state=State.ERROR;return}switch(Rr.details){case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_PARSING_ERROR:case ErrorDetails.FRAG_DECRYPT_ERROR:case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(PlaylistLevelType.AUDIO,Rr);break;case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case ErrorDetails.LEVEL_PARSING_ERROR:!Rr.levelRetry&&this.state===State.WAITING_TRACK&&((Ar=Rr.context)==null?void 0:Ar.type)===PlaylistContextType.AUDIO_TRACK&&(this.state=State.IDLE);break;case ErrorDetails.BUFFER_FULL_ERROR:if(!Rr.parent||Rr.parent!=="audio")return;this.reduceLengthAndFlushBuffer(Rr)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case ErrorDetails.INTERNAL_EXCEPTION:this.recoverWorkerError(Rr);break}}onBufferFlushed(Tr,{type:Rr}){Rr===ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===State.ENDED&&(this.state=State.IDLE))}_handleTransmuxComplete(Tr){var Rr;const Ar="audio",{hls:Pr}=this,{remuxResult:Lr,chunkMeta:Mr}=Tr,Fr=this.getCurrentContext(Mr);if(!Fr){this.resetWhenMissingContext(Mr);return}const{frag:zr,part:Ur,level:Vr}=Fr,{details:Nr}=Vr,{audio:Dr,text:jr,id3:Gr,initSegment:Wr}=Lr;if(this.fragContextChanged(zr)||!Nr){this.fragmentTracker.removeFragment(zr);return}if(this.state=State.PARSING,this.switchingTrack&&Dr&&this.completeAudioSwitch(this.switchingTrack),Wr!=null&&Wr.tracks){const qr=zr.initSegment||zr;this._bufferInitSegment(Wr.tracks,qr,Mr),Pr.trigger(Events.FRAG_PARSING_INIT_SEGMENT,{frag:qr,id:Ar,tracks:Wr.tracks})}if(Dr){const{startPTS:qr,endPTS:Kr,startDTS:Xr,endDTS:Zr}=Dr;Ur&&(Ur.elementaryStreams[ElementaryStreamTypes.AUDIO]={startPTS:qr,endPTS:Kr,startDTS:Xr,endDTS:Zr}),zr.setElementaryStreamInfo(ElementaryStreamTypes.AUDIO,qr,Kr,Xr,Zr),this.bufferFragmentData(Dr,zr,Ur,Mr)}if(Gr!=null&&(Rr=Gr.samples)!=null&&Rr.length){const qr=_extends({id:Ar,frag:zr,details:Nr},Gr);Pr.trigger(Events.FRAG_PARSING_METADATA,qr)}if(jr){const qr=_extends({id:Ar,frag:zr,details:Nr},jr);Pr.trigger(Events.FRAG_PARSING_USERDATA,qr)}}_bufferInitSegment(Tr,Rr,Ar){if(this.state!==State.PARSING)return;Tr.video&&delete Tr.video;const Pr=Tr.audio;if(!Pr)return;Pr.levelCodec=Pr.codec,Pr.id="audio",this.log(`Init audio buffer, container:${Pr.container}, codecs[parsed]=[${Pr.codec}]`),this.hls.trigger(Events.BUFFER_CODECS,Tr);const Lr=Pr.initSegment;if(Lr!=null&&Lr.byteLength){const Mr={type:"audio",frag:Rr,part:null,chunkMeta:Ar,parent:Rr.type,data:Lr};this.hls.trigger(Events.BUFFER_APPENDING,Mr)}this.tick()}loadFragment(Tr,Rr,Ar){const Pr=this.fragmentTracker.getState(Tr);if(this.fragCurrent=Tr,this.switchingTrack||Pr===FragmentState.NOT_LOADED||Pr===FragmentState.PARTIAL){var Lr;Tr.sn==="initSegment"?this._loadInitSegment(Tr,Rr):(Lr=Rr.details)!=null&&Lr.live&&!this.initPTS[Tr.cc]?(this.log(`Waiting for video PTS in continuity counter ${Tr.cc} of live stream before loading audio fragment ${Tr.sn} of level ${this.trackId}`),this.state=State.WAITING_INIT_PTS):(this.startFragRequested=!0,super.loadFragment(Tr,Rr,Ar))}else this.clearTrackerIfNeeded(Tr)}completeAudioSwitch(Tr){const{hls:Rr,media:Ar,bufferedTrack:Pr}=this,Lr=Pr==null?void 0:Pr.attrs,Mr=Tr.attrs;Ar&&Lr&&(Lr.CHANNELS!==Mr.CHANNELS||Lr.NAME!==Mr.NAME||Lr.LANGUAGE!==Mr.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=Tr,this.switchingTrack=null,Rr.trigger(Events.AUDIO_TRACK_SWITCHED,_objectSpread2({},Tr))}}class AudioTrackController extends BasePlaylistController{constructor(Tr){super(Tr,"[audio-track-controller]"),this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:Tr}=this;Tr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),Tr.on(Events.LEVEL_LOADING,this.onLevelLoading,this),Tr.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),Tr.on(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),Tr.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:Tr}=this;Tr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),Tr.off(Events.LEVEL_LOADING,this.onLevelLoading,this),Tr.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),Tr.off(Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),Tr.off(Events.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(Tr,Rr){this.tracks=Rr.audioTracks||[]}onAudioTrackLoaded(Tr,Rr){const{id:Ar,groupId:Pr,details:Lr}=Rr,Mr=this.tracksInGroup[Ar];if(!Mr||Mr.groupId!==Pr){this.warn(`Track with id:${Ar} and group:${Pr} not found in active group ${Mr.groupId}`);return}const Fr=Mr.details;Mr.details=Rr.details,this.log(`audio-track ${Ar} "${Mr.name}" lang:${Mr.lang} group:${Pr} loaded [${Lr.startSN}-${Lr.endSN}]`),Ar===this.trackId&&this.playlistLoaded(Ar,Rr,Fr)}onLevelLoading(Tr,Rr){this.switchLevel(Rr.level)}onLevelSwitching(Tr,Rr){this.switchLevel(Rr.level)}switchLevel(Tr){const Rr=this.hls.levels[Tr];if(!(Rr!=null&&Rr.audioGroupIds))return;const Ar=Rr.audioGroupIds[Rr.urlId];if(this.groupId!==Ar){this.groupId=Ar||null;const Pr=this.tracks.filter(Mr=>!Ar||Mr.groupId===Ar);this.selectDefaultTrack&&!Pr.some(Mr=>Mr.default)&&(this.selectDefaultTrack=!1),this.tracksInGroup=Pr;const Lr={audioTracks:Pr};this.log(`Updating audio tracks, ${Pr.length} track(s) found in group:${Ar}`),this.hls.trigger(Events.AUDIO_TRACKS_UPDATED,Lr),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}onError(Tr,Rr){Rr.fatal||!Rr.context||Rr.context.type===PlaylistContextType.AUDIO_TRACK&&Rr.context.id===this.trackId&&Rr.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(Rr))}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(Tr){this.selectDefaultTrack=!1,this.setAudioTrack(Tr)}setAudioTrack(Tr){const Rr=this.tracksInGroup;if(Tr<0||Tr>=Rr.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();const Ar=this.currentTrack;Rr[this.trackId];const Pr=Rr[Tr],{groupId:Lr,name:Mr}=Pr;if(this.log(`Switching to audio-track ${Tr} "${Mr}" lang:${Pr.lang} group:${Lr}`),this.trackId=Tr,this.currentTrack=Pr,this.selectDefaultTrack=!1,this.hls.trigger(Events.AUDIO_TRACK_SWITCHING,_objectSpread2({},Pr)),Pr.details&&!Pr.details.live)return;const Fr=this.switchParams(Pr.url,Ar==null?void 0:Ar.details);this.loadPlaylist(Fr)}selectInitialTrack(){const Tr=this.tracksInGroup,Rr=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(Rr!==-1)this.setAudioTrack(Rr);else{const Ar=new Error(`No track found for running audio group-ID: ${this.groupId} track count: ${Tr.length}`);this.warn(Ar.message),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:Ar})}}findTrackId(Tr){const Rr=this.tracksInGroup;for(let Ar=0;Ar<Rr.length;Ar++){const Pr=Rr[Ar];if((!this.selectDefaultTrack||Pr.default)&&(!Tr||Tr.attrs["STABLE-RENDITION-ID"]!==void 0&&Tr.attrs["STABLE-RENDITION-ID"]===Pr.attrs["STABLE-RENDITION-ID"]||Tr.name===Pr.name&&Tr.lang===Pr.lang))return Pr.id}return-1}loadPlaylist(Tr){super.loadPlaylist();const Rr=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(Rr)){const Ar=Rr.id,Pr=Rr.groupId;let Lr=Rr.url;if(Tr)try{Lr=Tr.addDirectives(Lr)}catch(Mr){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Mr}`)}this.log(`loading audio-track playlist ${Ar} "${Rr.name}" lang:${Rr.lang} group:${Pr}`),this.clearTimer(),this.hls.trigger(Events.AUDIO_TRACK_LOADING,{url:Lr,id:Ar,groupId:Pr,deliveryDirectives:Tr||null})}}}function subtitleOptionsIdentical(_r,Tr){if(_r.length!==Tr.length)return!1;for(let Rr=0;Rr<_r.length;Rr++)if(!subtitleAttributesIdentical(_r[Rr].attrs,Tr[Rr].attrs))return!1;return!0}function subtitleAttributesIdentical(_r,Tr){const Rr=_r["STABLE-RENDITION-ID"];return Rr?Rr===Tr["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some(Ar=>_r[Ar]!==Tr[Ar])}const TICK_INTERVAL=500;class SubtitleStreamController extends BaseStreamController{constructor(Tr,Rr,Ar){super(Tr,Rr,Ar,"[subtitle-stream-controller]",PlaylistLevelType.SUBTITLE),this.levels=[],this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null}_registerListeners(){const{hls:Tr}=this;Tr.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Tr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.on(Events.LEVEL_LOADED,this.onLevelLoaded,this),Tr.on(Events.ERROR,this.onError,this),Tr.on(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),Tr.on(Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),Tr.on(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),Tr.on(Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),Tr.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Tr.on(Events.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:Tr}=this;Tr.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Tr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.off(Events.LEVEL_LOADED,this.onLevelLoaded,this),Tr.off(Events.ERROR,this.onError,this),Tr.off(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),Tr.off(Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),Tr.off(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),Tr.off(Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),Tr.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Tr.off(Events.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(Tr){this.stopLoad(),this.state=State.IDLE,this.setInterval(TICK_INTERVAL),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=Tr,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(Tr,Rr){this.mainDetails=Rr.details}onSubtitleFragProcessed(Tr,Rr){const{frag:Ar,success:Pr}=Rr;if(this.fragPrevious=Ar,this.state=State.IDLE,!Pr)return;const Lr=this.tracksBuffered[this.currentTrackId];if(!Lr)return;let Mr;const Fr=Ar.start;for(let Ur=0;Ur<Lr.length;Ur++)if(Fr>=Lr[Ur].start&&Fr<=Lr[Ur].end){Mr=Lr[Ur];break}const zr=Ar.start+Ar.duration;Mr?Mr.end=zr:(Mr={start:Fr,end:zr},Lr.push(Mr)),this.fragmentTracker.fragBuffered(Ar)}onBufferFlushing(Tr,Rr){const{startOffset:Ar,endOffset:Pr}=Rr;if(Ar===0&&Pr!==Number.POSITIVE_INFINITY){const Lr=Pr-1;if(Lr<=0)return;Rr.endOffsetSubtitles=Math.max(0,Lr),this.tracksBuffered.forEach(Mr=>{for(let Fr=0;Fr<Mr.length;){if(Mr[Fr].end<=Lr){Mr.shift();continue}else if(Mr[Fr].start<Lr)Mr[Fr].start=Lr;else break;Fr++}}),this.fragmentTracker.removeFragmentsInRange(Ar,Lr,PlaylistLevelType.SUBTITLE)}}onFragBuffered(Tr,Rr){if(!this.loadedmetadata&&Rr.frag.type===PlaylistLevelType.MAIN){var Ar;(Ar=this.media)!=null&&Ar.buffered.length&&(this.loadedmetadata=!0)}}onError(Tr,Rr){const Ar=Rr.frag;(Ar==null?void 0:Ar.type)===PlaylistLevelType.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==State.STOPPED&&(this.state=State.IDLE))}onSubtitleTracksUpdated(Tr,{subtitleTracks:Rr}){if(subtitleOptionsIdentical(this.levels,Rr)){this.levels=Rr.map(Ar=>new Level(Ar));return}this.tracksBuffered=[],this.levels=Rr.map(Ar=>{const Pr=new Level(Ar);return this.tracksBuffered[Pr.id]=[],Pr}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,PlaylistLevelType.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(Tr,Rr){if(this.currentTrackId=Rr.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}const Ar=this.levels[this.currentTrackId];Ar!=null&&Ar.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,Ar&&this.setInterval(TICK_INTERVAL)}onSubtitleTrackLoaded(Tr,Rr){var Ar;const{details:Pr,id:Lr}=Rr,{currentTrackId:Mr,levels:Fr}=this;if(!Fr.length)return;const zr=Fr[Mr];if(Lr>=Fr.length||Lr!==Mr||!zr)return;this.mediaBuffer=this.mediaBufferTimeRanges;let Ur=0;if(Pr.live||(Ar=zr.details)!=null&&Ar.live){const Vr=this.mainDetails;if(Pr.deltaUpdateFailed||!Vr)return;const Nr=Vr.fragments[0];zr.details?(Ur=this.alignPlaylists(Pr,zr.details),Ur===0&&Nr&&(Ur=Nr.start,addSliding(Pr,Ur))):Pr.hasProgramDateTime&&Vr.hasProgramDateTime?(alignMediaPlaylistByPDT(Pr,Vr),Ur=Pr.fragments[0].start):Nr&&(Ur=Nr.start,addSliding(Pr,Ur))}zr.details=Pr,this.levelLastLoaded=Lr,!this.startFragRequested&&(this.mainDetails||!Pr.live)&&this.setStartPosition(zr.details,Ur),this.tick(),Pr.live&&!this.fragCurrent&&this.media&&this.state===State.IDLE&&(findFragmentByPTS(null,Pr.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),zr.details=void 0))}_handleFragmentLoadComplete(Tr){const{frag:Rr,payload:Ar}=Tr,Pr=Rr.decryptdata,Lr=this.hls;if(!this.fragContextChanged(Rr)&&Ar&&Ar.byteLength>0&&Pr&&Pr.key&&Pr.iv&&Pr.method==="AES-128"){const Mr=performance.now();this.decrypter.decrypt(new Uint8Array(Ar),Pr.key.buffer,Pr.iv.buffer).catch(Fr=>{throw Lr.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!1,error:Fr,reason:Fr.message,frag:Rr}),Fr}).then(Fr=>{const zr=performance.now();Lr.trigger(Events.FRAG_DECRYPTED,{frag:Rr,payload:Fr,stats:{tstart:Mr,tdecrypt:zr}})}).catch(Fr=>{this.warn(`${Fr.name}: ${Fr.message}`),this.state=State.IDLE})}}doTick(){if(!this.media){this.state=State.IDLE;return}if(this.state===State.IDLE){const{currentTrackId:Tr,levels:Rr}=this,Ar=Rr[Tr];if(!Rr.length||!Ar||!Ar.details)return;const{config:Pr}=this,Lr=this.getLoadPosition(),Mr=BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],Lr,Pr.maxBufferHole),{end:Fr,len:zr}=Mr,Ur=this.getFwdBufferInfo(this.media,PlaylistLevelType.MAIN),Vr=Ar.details,Nr=this.getMaxBufferLength(Ur==null?void 0:Ur.len)+Vr.levelTargetDuration;if(zr>Nr)return;const Dr=Vr.fragments,jr=Dr.length,Gr=Vr.edge;let Wr=null;const qr=this.fragPrevious;if(Fr<Gr){const Kr=Pr.maxFragLookUpTolerance,Xr=Fr>Gr-Kr?0:Kr;Wr=findFragmentByPTS(qr,Dr,Math.max(Dr[0].start,Fr),Xr),!Wr&&qr&&qr.start<Dr[0].start&&(Wr=Dr[0])}else Wr=Dr[jr-1];if(!Wr)return;if(Wr=this.mapToInitFragWhenRequired(Wr),Wr.sn!=="initSegment"){const Kr=Wr.sn-Vr.startSN,Xr=Dr[Kr-1];Xr&&Xr.cc===Wr.cc&&this.fragmentTracker.getState(Xr)===FragmentState.NOT_LOADED&&(Wr=Xr)}this.fragmentTracker.getState(Wr)===FragmentState.NOT_LOADED&&this.loadFragment(Wr,Ar,Fr)}}getMaxBufferLength(Tr){const Rr=super.getMaxBufferLength();return Tr?Math.max(Rr,Tr):Rr}loadFragment(Tr,Rr,Ar){this.fragCurrent=Tr,Tr.sn==="initSegment"?this._loadInitSegment(Tr,Rr):(this.startFragRequested=!0,super.loadFragment(Tr,Rr,Ar))}get mediaBufferTimeRanges(){return new BufferableInstance(this.tracksBuffered[this.currentTrackId]||[])}}class BufferableInstance{constructor(Tr){this.buffered=void 0;const Rr=(Ar,Pr,Lr)=>{if(Pr=Pr>>>0,Pr>Lr-1)throw new DOMException(`Failed to execute '${Ar}' on 'TimeRanges': The index provided (${Pr}) is greater than the maximum bound (${Lr})`);return Tr[Pr][Ar]};this.buffered={get length(){return Tr.length},end(Ar){return Rr("end",Ar,Tr.length)},start(Ar){return Rr("start",Ar,Tr.length)}}}}class SubtitleTrackController extends BasePlaylistController{constructor(Tr){super(Tr,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.trackChangeListener=()=>this.onTextTracksChanged(),this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(Tr){this._subtitleDisplay=Tr,this.trackId>-1&&this.toggleTrackModes(this.trackId)}registerListeners(){const{hls:Tr}=this;Tr.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Tr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),Tr.on(Events.LEVEL_LOADING,this.onLevelLoading,this),Tr.on(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),Tr.on(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),Tr.on(Events.ERROR,this.onError,this)}unregisterListeners(){const{hls:Tr}=this;Tr.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Tr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),Tr.off(Events.LEVEL_LOADING,this.onLevelLoading,this),Tr.off(Events.LEVEL_SWITCHING,this.onLevelSwitching,this),Tr.off(Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),Tr.off(Events.ERROR,this.onError,this)}onMediaAttached(Tr,Rr){this.media=Rr.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(Tr){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,Tr)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),filterSubtitleTracks(this.media.textTracks).forEach(Rr=>{clearCurrentCues(Rr)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(Tr,Rr){this.tracks=Rr.subtitleTracks}onSubtitleTrackLoaded(Tr,Rr){const{id:Ar,details:Pr}=Rr,{trackId:Lr}=this,Mr=this.tracksInGroup[Lr];if(!Mr){this.warn(`Invalid subtitle track id ${Ar}`);return}const Fr=Mr.details;Mr.details=Rr.details,this.log(`subtitle track ${Ar} loaded [${Pr.startSN}-${Pr.endSN}]`),Ar===this.trackId&&this.playlistLoaded(Ar,Rr,Fr)}onLevelLoading(Tr,Rr){this.switchLevel(Rr.level)}onLevelSwitching(Tr,Rr){this.switchLevel(Rr.level)}switchLevel(Tr){const Rr=this.hls.levels[Tr];if(!(Rr!=null&&Rr.textGroupIds))return;const Ar=Rr.textGroupIds[Rr.urlId],Pr=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==Ar){const Lr=this.tracks.filter(zr=>!Ar||zr.groupId===Ar);this.tracksInGroup=Lr;const Mr=this.findTrackId(Pr==null?void 0:Pr.name)||this.findTrackId();this.groupId=Ar||null;const Fr={subtitleTracks:Lr};this.log(`Updating subtitle tracks, ${Lr.length} track(s) found in "${Ar}" group-id`),this.hls.trigger(Events.SUBTITLE_TRACKS_UPDATED,Fr),Mr!==-1&&this.setSubtitleTrack(Mr,Pr)}else this.shouldReloadPlaylist(Pr)&&this.setSubtitleTrack(this.trackId,Pr)}findTrackId(Tr){const Rr=this.tracksInGroup;for(let Ar=0;Ar<Rr.length;Ar++){const Pr=Rr[Ar];if((!this.selectDefaultTrack||Pr.default)&&(!Tr||Tr===Pr.name))return Pr.id}return-1}onError(Tr,Rr){Rr.fatal||!Rr.context||Rr.context.type===PlaylistContextType.SUBTITLE_TRACK&&Rr.context.id===this.trackId&&Rr.context.groupId===this.groupId&&this.checkRetry(Rr)}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(Tr){this.selectDefaultTrack=!1;const Rr=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(Tr,Rr)}loadPlaylist(Tr){super.loadPlaylist();const Rr=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(Rr)){const Ar=Rr.id,Pr=Rr.groupId;let Lr=Rr.url;if(Tr)try{Lr=Tr.addDirectives(Lr)}catch(Mr){this.warn(`Could not construct new URL with HLS Delivery Directives: ${Mr}`)}this.log(`Loading subtitle playlist for id ${Ar}`),this.hls.trigger(Events.SUBTITLE_TRACK_LOADING,{url:Lr,id:Ar,groupId:Pr,deliveryDirectives:Tr||null})}}toggleTrackModes(Tr){const{media:Rr,trackId:Ar}=this;if(!Rr)return;const Pr=filterSubtitleTracks(Rr.textTracks),Lr=Pr.filter(Fr=>Fr.groupId===this.groupId);if(Tr===-1)[].slice.call(Pr).forEach(Fr=>{Fr.mode="disabled"});else{const Fr=Lr[Ar];Fr&&(Fr.mode="disabled")}const Mr=Lr[Tr];Mr&&(Mr.mode=this.subtitleDisplay?"showing":"hidden")}setSubtitleTrack(Tr,Rr){var Ar;const Pr=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=Tr;return}if(this.trackId!==Tr&&this.toggleTrackModes(Tr),this.trackId===Tr&&(Tr===-1||(Ar=Pr[Tr])!=null&&Ar.details)||Tr<-1||Tr>=Pr.length)return;this.clearTimer();const Lr=Pr[Tr];if(this.log(`Switching to subtitle-track ${Tr}`+(Lr?` "${Lr.name}" lang:${Lr.lang} group:${Lr.groupId}`:"")),this.trackId=Tr,Lr){const{id:Mr,groupId:Fr="",name:zr,type:Ur,url:Vr}=Lr;this.hls.trigger(Events.SUBTITLE_TRACK_SWITCH,{id:Mr,groupId:Fr,name:zr,type:Ur,url:Vr});const Nr=this.switchParams(Lr.url,Rr==null?void 0:Rr.details);this.loadPlaylist(Nr)}else this.hls.trigger(Events.SUBTITLE_TRACK_SWITCH,{id:Tr})}onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let Tr=-1;const Rr=filterSubtitleTracks(this.media.textTracks);for(let Ar=0;Ar<Rr.length;Ar++)if(Rr[Ar].mode==="hidden")Tr=Ar;else if(Rr[Ar].mode==="showing"){Tr=Ar;break}this.subtitleTrack!==Tr&&(this.subtitleTrack=Tr)}}function filterSubtitleTracks(_r){const Tr=[];for(let Rr=0;Rr<_r.length;Rr++){const Ar=_r[Rr];(Ar.kind==="subtitles"||Ar.kind==="captions")&&Ar.label&&Tr.push(_r[Rr])}return Tr}class BufferOperationQueue{constructor(Tr){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=Tr}append(Tr,Rr){const Ar=this.queues[Rr];Ar.push(Tr),Ar.length===1&&this.buffers[Rr]&&this.executeNext(Rr)}insertAbort(Tr,Rr){this.queues[Rr].unshift(Tr),this.executeNext(Rr)}appendBlocker(Tr){let Rr;const Ar=new Promise(Lr=>{Rr=Lr}),Pr={execute:Rr,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(Pr,Tr),Ar}executeNext(Tr){const{buffers:Rr,queues:Ar}=this,Pr=Rr[Tr],Lr=Ar[Tr];if(Lr.length){const Mr=Lr[0];try{Mr.execute()}catch(Fr){logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),Mr.onError(Fr),Pr!=null&&Pr.updating||(Lr.shift(),this.executeNext(Tr))}}}shiftAndExecuteNext(Tr){this.queues[Tr].shift(),this.executeNext(Tr)}current(Tr){return this.queues[Tr][0]}}const MediaSource=getMediaSource(),VIDEO_CODEC_PROFILE_REPACE=/([ha]vc.)(?:\.[^.,]+)+/;class BufferController{constructor(Tr){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=()=>{const{media:Rr,mediaSource:Ar}=this;logger.log("[buffer-controller]: Media source opened"),Rr&&(Rr.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(Events.MEDIA_ATTACHED,{media:Rr})),Ar&&Ar.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=()=>{logger.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=()=>{const{media:Rr,_objectUrl:Ar}=this;Rr&&Rr.src!==Ar&&logger.error(`Media element src was set while attaching MediaSource (${Ar} > ${Rr.src})`)},this.hls=Tr,this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null}registerListeners(){const{hls:Tr}=this;Tr.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Tr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),Tr.on(Events.BUFFER_RESET,this.onBufferReset,this),Tr.on(Events.BUFFER_APPENDING,this.onBufferAppending,this),Tr.on(Events.BUFFER_CODECS,this.onBufferCodecs,this),Tr.on(Events.BUFFER_EOS,this.onBufferEos,this),Tr.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Tr.on(Events.LEVEL_UPDATED,this.onLevelUpdated,this),Tr.on(Events.FRAG_PARSED,this.onFragParsed,this),Tr.on(Events.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:Tr}=this;Tr.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Tr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),Tr.off(Events.BUFFER_RESET,this.onBufferReset,this),Tr.off(Events.BUFFER_APPENDING,this.onBufferAppending,this),Tr.off(Events.BUFFER_CODECS,this.onBufferCodecs,this),Tr.off(Events.BUFFER_EOS,this.onBufferEos,this),Tr.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Tr.off(Events.LEVEL_UPDATED,this.onLevelUpdated,this),Tr.off(Events.FRAG_PARSED,this.onFragParsed,this),Tr.off(Events.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new BufferOperationQueue(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(Tr,Rr){let Ar=2;(Rr.audio&&!Rr.video||!Rr.altAudio)&&(Ar=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=Ar,logger.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(Tr,Rr){const Ar=this.media=Rr.media;if(Ar&&MediaSource){const Pr=this.mediaSource=new MediaSource;Pr.addEventListener("sourceopen",this._onMediaSourceOpen),Pr.addEventListener("sourceended",this._onMediaSourceEnded),Pr.addEventListener("sourceclose",this._onMediaSourceClose),Ar.src=self.URL.createObjectURL(Pr),this._objectUrl=Ar.src,Ar.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:Tr,mediaSource:Rr,_objectUrl:Ar}=this;if(Rr){if(logger.log("[buffer-controller]: media source detaching"),Rr.readyState==="open")try{Rr.endOfStream()}catch(Pr){logger.warn(`[buffer-controller]: onMediaDetaching: ${Pr.message} while calling endOfStream`)}this.onBufferReset(),Rr.removeEventListener("sourceopen",this._onMediaSourceOpen),Rr.removeEventListener("sourceended",this._onMediaSourceEnded),Rr.removeEventListener("sourceclose",this._onMediaSourceClose),Tr&&(Tr.removeEventListener("emptied",this._onMediaEmptied),Ar&&self.URL.revokeObjectURL(Ar),Tr.src===Ar?(Tr.removeAttribute("src"),Tr.load()):logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(Events.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(Tr=>{const Rr=this.sourceBuffer[Tr];try{Rr&&(this.removeBufferListeners(Tr),this.mediaSource&&this.mediaSource.removeSourceBuffer(Rr),this.sourceBuffer[Tr]=void 0)}catch(Ar){logger.warn(`[buffer-controller]: Failed to reset the ${Tr} buffer`,Ar)}}),this._initSourceBuffer()}onBufferCodecs(Tr,Rr){const Ar=this.getSourceBufferTypes().length;Object.keys(Rr).forEach(Pr=>{if(Ar){const Lr=this.tracks[Pr];if(Lr&&typeof Lr.buffer.changeType=="function"){const{id:Mr,codec:Fr,levelCodec:zr,container:Ur,metadata:Vr}=Rr[Pr],Nr=(Lr.levelCodec||Lr.codec).replace(VIDEO_CODEC_PROFILE_REPACE,"$1"),Dr=(zr||Fr).replace(VIDEO_CODEC_PROFILE_REPACE,"$1");if(Nr!==Dr){const jr=`${Ur};codecs=${zr||Fr}`;this.appendChangeType(Pr,jr),logger.log(`[buffer-controller]: switching codec ${Nr} to ${Dr}`),this.tracks[Pr]={buffer:Lr.buffer,codec:Fr,container:Ur,levelCodec:zr,metadata:Vr,id:Mr}}}}else this.pendingTracks[Pr]=Rr[Pr]}),!Ar&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())}appendChangeType(Tr,Rr){const{operationQueue:Ar}=this,Pr={execute:()=>{const Lr=this.sourceBuffer[Tr];Lr&&(logger.log(`[buffer-controller]: changing ${Tr} sourceBuffer type to ${Rr}`),Lr.changeType(Rr)),Ar.shiftAndExecuteNext(Tr)},onStart:()=>{},onComplete:()=>{},onError:Lr=>{logger.warn(`[buffer-controller]: Failed to change ${Tr} SourceBuffer type`,Lr)}};Ar.append(Pr,Tr)}onBufferAppending(Tr,Rr){const{hls:Ar,operationQueue:Pr,tracks:Lr}=this,{data:Mr,type:Fr,frag:zr,part:Ur,chunkMeta:Vr}=Rr,Nr=Vr.buffering[Fr],Dr=self.performance.now();Nr.start=Dr;const jr=zr.stats.buffering,Gr=Ur?Ur.stats.buffering:null;jr.start===0&&(jr.start=Dr),Gr&&Gr.start===0&&(Gr.start=Dr);const Wr=Lr.audio;let qr=!1;Fr==="audio"&&(Wr==null?void 0:Wr.container)==="audio/mpeg"&&(qr=!this.lastMpegAudioChunk||Vr.id===1||this.lastMpegAudioChunk.sn!==Vr.sn,this.lastMpegAudioChunk=Vr);const Kr=zr.start,Xr={execute:()=>{if(Nr.executeStart=self.performance.now(),qr){const Zr=this.sourceBuffer[Fr];if(Zr){const Jr=Kr-Zr.timestampOffset;Math.abs(Jr)>=.1&&(logger.log(`[buffer-controller]: Updating audio SourceBuffer timestampOffset to ${Kr} (delta: ${Jr}) sn: ${zr.sn})`),Zr.timestampOffset=Kr)}}this.appendExecutor(Mr,Fr)},onStart:()=>{},onComplete:()=>{const Zr=self.performance.now();Nr.executeEnd=Nr.end=Zr,jr.first===0&&(jr.first=Zr),Gr&&Gr.first===0&&(Gr.first=Zr);const{sourceBuffer:Jr}=this,_i={};for(const es in Jr)_i[es]=BufferHelper.getBuffered(Jr[es]);this.appendError=0,this.hls.trigger(Events.BUFFER_APPENDED,{type:Fr,frag:zr,part:Ur,chunkMeta:Vr,parent:zr.type,timeRanges:_i})},onError:Zr=>{logger.error(`[buffer-controller]: Error encountered while trying to append to the ${Fr} SourceBuffer`,Zr);const Jr={type:ErrorTypes.MEDIA_ERROR,parent:zr.type,details:ErrorDetails.BUFFER_APPEND_ERROR,frag:zr,part:Ur,chunkMeta:Vr,error:Zr,err:Zr,fatal:!1};Zr.code===DOMException.QUOTA_EXCEEDED_ERR?Jr.details=ErrorDetails.BUFFER_FULL_ERROR:(this.appendError++,Jr.details=ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>Ar.config.appendErrorMaxRetry&&(logger.error(`[buffer-controller]: Failed ${Ar.config.appendErrorMaxRetry} times to append segment in sourceBuffer`),Jr.fatal=!0)),Ar.trigger(Events.ERROR,Jr)}};Pr.append(Xr,Fr)}onBufferFlushing(Tr,Rr){const{operationQueue:Ar}=this,Pr=Lr=>({execute:this.removeExecutor.bind(this,Lr,Rr.startOffset,Rr.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(Events.BUFFER_FLUSHED,{type:Lr})},onError:Mr=>{logger.warn(`[buffer-controller]: Failed to remove from ${Lr} SourceBuffer`,Mr)}});Rr.type?Ar.append(Pr(Rr.type),Rr.type):this.getSourceBufferTypes().forEach(Lr=>{Ar.append(Pr(Lr),Lr)})}onFragParsed(Tr,Rr){const{frag:Ar,part:Pr}=Rr,Lr=[],Mr=Pr?Pr.elementaryStreams:Ar.elementaryStreams;Mr[ElementaryStreamTypes.AUDIOVIDEO]?Lr.push("audiovideo"):(Mr[ElementaryStreamTypes.AUDIO]&&Lr.push("audio"),Mr[ElementaryStreamTypes.VIDEO]&&Lr.push("video"));const Fr=()=>{const zr=self.performance.now();Ar.stats.buffering.end=zr,Pr&&(Pr.stats.buffering.end=zr);const Ur=Pr?Pr.stats:Ar.stats;this.hls.trigger(Events.FRAG_BUFFERED,{frag:Ar,part:Pr,stats:Ur,id:Ar.type})};Lr.length===0&&logger.warn(`Fragments must have at least one ElementaryStreamType set. type: ${Ar.type} level: ${Ar.level} sn: ${Ar.sn}`),this.blockBuffers(Fr,Lr)}onFragChanged(Tr,Rr){this.flushBackBuffer()}onBufferEos(Tr,Rr){this.getSourceBufferTypes().reduce((Pr,Lr)=>{const Mr=this.sourceBuffer[Lr];return Mr&&(!Rr.type||Rr.type===Lr)&&(Mr.ending=!0,Mr.ended||(Mr.ended=!0,logger.log(`[buffer-controller]: ${Lr} sourceBuffer now EOS`))),Pr&&!!(!Mr||Mr.ended)},!0)&&(logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(Lr=>{const Mr=this.sourceBuffer[Lr];Mr&&(Mr.ending=!1)});const{mediaSource:Pr}=this;if(!Pr||Pr.readyState!=="open"){Pr&&logger.info(`[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: ${Pr.readyState}`);return}logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),Pr.endOfStream()}))}onLevelUpdated(Tr,{details:Rr}){Rr.fragments.length&&(this.details=Rr,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}flushBackBuffer(){const{hls:Tr,details:Rr,media:Ar,sourceBuffer:Pr}=this;if(!Ar||Rr===null)return;const Lr=this.getSourceBufferTypes();if(!Lr.length)return;const Mr=Rr.live&&Tr.config.liveBackBufferLength!==null?Tr.config.liveBackBufferLength:Tr.config.backBufferLength;if(!isFiniteNumber(Mr)||Mr<0)return;const Fr=Ar.currentTime,zr=Rr.levelTargetDuration,Ur=Math.max(Mr,zr),Vr=Math.floor(Fr/zr)*zr-Ur;Lr.forEach(Nr=>{const Dr=Pr[Nr];if(Dr){const jr=BufferHelper.getBuffered(Dr);if(jr.length>0&&Vr>jr.start(0)){if(Tr.trigger(Events.BACK_BUFFER_REACHED,{bufferEnd:Vr}),Rr.live)Tr.trigger(Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:Vr});else if(Dr.ended&&jr.end(jr.length-1)-Fr<zr*2){logger.info(`[buffer-controller]: Cannot flush ${Nr} back buffer while SourceBuffer is in ended state`);return}Tr.trigger(Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Vr,type:Nr})}}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:Tr,hls:Rr,media:Ar,mediaSource:Pr}=this,Lr=Tr.fragments[0].start+Tr.totalduration,Mr=Ar.duration,Fr=isFiniteNumber(Pr.duration)?Pr.duration:0;Tr.live&&Rr.config.liveDurationInfinity?(logger.log("[buffer-controller]: Media Source duration is set to Infinity"),Pr.duration=1/0,this.updateSeekableRange(Tr)):(Lr>Fr&&Lr>Mr||!isFiniteNumber(Mr))&&(logger.log(`[buffer-controller]: Updating Media Source duration to ${Lr.toFixed(3)}`),Pr.duration=Lr)}updateSeekableRange(Tr){const Rr=this.mediaSource,Ar=Tr.fragments;if(Ar.length&&Tr.live&&Rr!=null&&Rr.setLiveSeekableRange){const Lr=Math.max(0,Ar[0].start),Mr=Math.max(Lr,Lr+Tr.totalduration);Rr.setLiveSeekableRange(Lr,Mr)}}checkPendingTracks(){const{bufferCodecEventsExpected:Tr,operationQueue:Rr,pendingTracks:Ar}=this,Pr=Object.keys(Ar).length;if(Pr&&!Tr||Pr===2){this.createSourceBuffers(Ar),this.pendingTracks={};const Lr=this.getSourceBufferTypes();if(Lr.length)this.hls.trigger(Events.BUFFER_CREATED,{tracks:this.tracks}),Lr.forEach(Mr=>{Rr.executeNext(Mr)});else{const Mr=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:Mr,reason:Mr.message})}}}createSourceBuffers(Tr){const{sourceBuffer:Rr,mediaSource:Ar}=this;if(!Ar)throw Error("createSourceBuffers called when mediaSource was null");for(const Pr in Tr)if(!Rr[Pr]){const Lr=Tr[Pr];if(!Lr)throw Error(`source buffer exists for track ${Pr}, however track does not`);const Mr=Lr.levelCodec||Lr.codec,Fr=`${Lr.container};codecs=${Mr}`;logger.log(`[buffer-controller]: creating sourceBuffer(${Fr})`);try{const zr=Rr[Pr]=Ar.addSourceBuffer(Fr),Ur=Pr;this.addBufferListener(Ur,"updatestart",this._onSBUpdateStart),this.addBufferListener(Ur,"updateend",this._onSBUpdateEnd),this.addBufferListener(Ur,"error",this._onSBUpdateError),this.tracks[Pr]={buffer:zr,codec:Mr,container:Lr.container,levelCodec:Lr.levelCodec,metadata:Lr.metadata,id:Lr.id}}catch(zr){logger.error(`[buffer-controller]: error while trying to add sourceBuffer: ${zr.message}`),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:zr,mimeType:Fr})}}}_onSBUpdateStart(Tr){const{operationQueue:Rr}=this;Rr.current(Tr).onStart()}_onSBUpdateEnd(Tr){const{operationQueue:Rr}=this;Rr.current(Tr).onComplete(),Rr.shiftAndExecuteNext(Tr)}_onSBUpdateError(Tr,Rr){const Ar=new Error(`${Tr} SourceBuffer error`);logger.error(`[buffer-controller]: ${Ar}`,Rr),this.hls.trigger(Events.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_APPENDING_ERROR,error:Ar,fatal:!1});const Pr=this.operationQueue.current(Tr);Pr&&Pr.onError(Rr)}removeExecutor(Tr,Rr,Ar){const{media:Pr,mediaSource:Lr,operationQueue:Mr,sourceBuffer:Fr}=this,zr=Fr[Tr];if(!Pr||!Lr||!zr){logger.warn(`[buffer-controller]: Attempting to remove from the ${Tr} SourceBuffer, but it does not exist`),Mr.shiftAndExecuteNext(Tr);return}const Ur=isFiniteNumber(Pr.duration)?Pr.duration:1/0,Vr=isFiniteNumber(Lr.duration)?Lr.duration:1/0,Nr=Math.max(0,Rr),Dr=Math.min(Ar,Ur,Vr);Dr>Nr&&!zr.ending?(zr.ended=!1,logger.log(`[buffer-controller]: Removing [${Nr},${Dr}] from the ${Tr} SourceBuffer`),zr.remove(Nr,Dr)):Mr.shiftAndExecuteNext(Tr)}appendExecutor(Tr,Rr){const{operationQueue:Ar,sourceBuffer:Pr}=this,Lr=Pr[Rr];if(!Lr){logger.warn(`[buffer-controller]: Attempting to append to the ${Rr} SourceBuffer, but it does not exist`),Ar.shiftAndExecuteNext(Rr);return}Lr.ended=!1,Lr.appendBuffer(Tr)}blockBuffers(Tr,Rr=this.getSourceBufferTypes()){if(!Rr.length){logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(Tr);return}const{operationQueue:Ar}=this,Pr=Rr.map(Lr=>Ar.appendBlocker(Lr));Promise.all(Pr).then(()=>{Tr(),Rr.forEach(Lr=>{const Mr=this.sourceBuffer[Lr];Mr!=null&&Mr.updating||Ar.shiftAndExecuteNext(Lr)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(Tr,Rr,Ar){const Pr=this.sourceBuffer[Tr];if(!Pr)return;const Lr=Ar.bind(this,Tr);this.listeners[Tr].push({event:Rr,listener:Lr}),Pr.addEventListener(Rr,Lr)}removeBufferListeners(Tr){const Rr=this.sourceBuffer[Tr];Rr&&this.listeners[Tr].forEach(Ar=>{Rr.removeEventListener(Ar.event,Ar.listener)})}}const specialCea608CharsCodes={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},getCharForByte=function(Tr){let Rr=Tr;return specialCea608CharsCodes.hasOwnProperty(Tr)&&(Rr=specialCea608CharsCodes[Tr]),String.fromCharCode(Rr)},NR_ROWS=15,NR_COLS=100,rowsLowCh1={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},rowsHighCh1={17:2,18:4,21:6,22:8,23:10,19:13,20:15},rowsLowCh2={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},rowsHighCh2={25:2,26:4,29:6,30:8,31:10,27:13,28:15},backgroundColors=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class CaptionsLogger{constructor(){this.time=null,this.verboseLevel=0}log(Tr,Rr){if(this.verboseLevel>=Tr){const Ar=typeof Rr=="function"?Rr():Rr;logger.log(`${this.time} [${Tr}] ${Ar}`)}}}const numArrayToHexArray=function(Tr){const Rr=[];for(let Ar=0;Ar<Tr.length;Ar++)Rr.push(Tr[Ar].toString(16));return Rr};class PenState{constructor(Tr,Rr,Ar,Pr,Lr){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=Tr||"white",this.underline=Rr||!1,this.italics=Ar||!1,this.background=Pr||"black",this.flash=Lr||!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(Tr){const Rr=["foreground","underline","italics","background","flash"];for(let Ar=0;Ar<Rr.length;Ar++){const Pr=Rr[Ar];Tr.hasOwnProperty(Pr)&&(this[Pr]=Tr[Pr])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(Tr){return this.foreground===Tr.foreground&&this.underline===Tr.underline&&this.italics===Tr.italics&&this.background===Tr.background&&this.flash===Tr.flash}copy(Tr){this.foreground=Tr.foreground,this.underline=Tr.underline,this.italics=Tr.italics,this.background=Tr.background,this.flash=Tr.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class StyledUnicodeChar{constructor(Tr,Rr,Ar,Pr,Lr,Mr){this.uchar=void 0,this.penState=void 0,this.uchar=Tr||" ",this.penState=new PenState(Rr,Ar,Pr,Lr,Mr)}reset(){this.uchar=" ",this.penState.reset()}setChar(Tr,Rr){this.uchar=Tr,this.penState.copy(Rr)}setPenState(Tr){this.penState.copy(Tr)}equals(Tr){return this.uchar===Tr.uchar&&this.penState.equals(Tr.penState)}copy(Tr){this.uchar=Tr.uchar,this.penState.copy(Tr.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Row{constructor(Tr){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(let Rr=0;Rr<NR_COLS;Rr++)this.chars.push(new StyledUnicodeChar);this.logger=Tr,this.pos=0,this.currPenState=new PenState}equals(Tr){let Rr=!0;for(let Ar=0;Ar<NR_COLS;Ar++)if(!this.chars[Ar].equals(Tr.chars[Ar])){Rr=!1;break}return Rr}copy(Tr){for(let Rr=0;Rr<NR_COLS;Rr++)this.chars[Rr].copy(Tr.chars[Rr])}isEmpty(){let Tr=!0;for(let Rr=0;Rr<NR_COLS;Rr++)if(!this.chars[Rr].isEmpty()){Tr=!1;break}return Tr}setCursor(Tr){this.pos!==Tr&&(this.pos=Tr),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>NR_COLS&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=NR_COLS)}moveCursor(Tr){const Rr=this.pos+Tr;if(Tr>1)for(let Ar=this.pos+1;Ar<Rr+1;Ar++)this.chars[Ar].setPenState(this.currPenState);this.setCursor(Rr)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(Tr){Tr>=144&&this.backSpace();const Rr=getCharForByte(Tr);if(this.pos>=NR_COLS){this.logger.log(0,()=>"Cannot insert "+Tr.toString(16)+" ("+Rr+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(Rr,this.currPenState),this.moveCursor(1)}clearFromPos(Tr){let Rr;for(Rr=Tr;Rr<NR_COLS;Rr++)this.chars[Rr].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const Tr=[];let Rr=!0;for(let Ar=0;Ar<NR_COLS;Ar++){const Pr=this.chars[Ar].uchar;Pr!==" "&&(Rr=!1),Tr.push(Pr)}return Rr?"":Tr.join("")}setPenStyles(Tr){this.currPenState.setStyles(Tr),this.chars[this.pos].setPenState(this.currPenState)}}class CaptionScreen{constructor(Tr){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(let Rr=0;Rr<NR_ROWS;Rr++)this.rows.push(new Row(Tr));this.logger=Tr,this.currRow=NR_ROWS-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}reset(){for(let Tr=0;Tr<NR_ROWS;Tr++)this.rows[Tr].clear();this.currRow=NR_ROWS-1}equals(Tr){let Rr=!0;for(let Ar=0;Ar<NR_ROWS;Ar++)if(!this.rows[Ar].equals(Tr.rows[Ar])){Rr=!1;break}return Rr}copy(Tr){for(let Rr=0;Rr<NR_ROWS;Rr++)this.rows[Rr].copy(Tr.rows[Rr])}isEmpty(){let Tr=!0;for(let Rr=0;Rr<NR_ROWS;Rr++)if(!this.rows[Rr].isEmpty()){Tr=!1;break}return Tr}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(Tr){this.rows[this.currRow].insertChar(Tr)}setPen(Tr){this.rows[this.currRow].setPenStyles(Tr)}moveCursor(Tr){this.rows[this.currRow].moveCursor(Tr)}setCursor(Tr){this.logger.log(2,"setCursor: "+Tr),this.rows[this.currRow].setCursor(Tr)}setPAC(Tr){this.logger.log(2,()=>"pacData = "+JSON.stringify(Tr));let Rr=Tr.row-1;if(this.nrRollUpRows&&Rr<this.nrRollUpRows-1&&(Rr=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==Rr){for(let Fr=0;Fr<NR_ROWS;Fr++)this.rows[Fr].clear();const Lr=this.currRow+1-this.nrRollUpRows,Mr=this.lastOutputScreen;if(Mr){const Fr=Mr.rows[Lr].cueStartTime,zr=this.logger.time;if(Fr&&zr!==null&&Fr<zr)for(let Ur=0;Ur<this.nrRollUpRows;Ur++)this.rows[Rr-this.nrRollUpRows+Ur+1].copy(Mr.rows[Lr+Ur])}}this.currRow=Rr;const Ar=this.rows[this.currRow];if(Tr.indent!==null){const Lr=Tr.indent,Mr=Math.max(Lr-1,0);Ar.setCursor(Tr.indent),Tr.color=Ar.chars[Mr].penState.foreground}const Pr={foreground:Tr.color,underline:Tr.underline,italics:Tr.italics,background:"black",flash:!1};this.setPen(Pr)}setBkgData(Tr){this.logger.log(2,()=>"bkgData = "+JSON.stringify(Tr)),this.backSpace(),this.setPen(Tr),this.insertChar(32)}setRollUpRows(Tr){this.nrRollUpRows=Tr}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const Tr=this.currRow+1-this.nrRollUpRows,Rr=this.rows.splice(Tr,1)[0];Rr.clear(),this.rows.splice(this.currRow,0,Rr),this.logger.log(2,"Rolling up")}getDisplayText(Tr){Tr=Tr||!1;const Rr=[];let Ar="",Pr=-1;for(let Lr=0;Lr<NR_ROWS;Lr++){const Mr=this.rows[Lr].getTextString();Mr&&(Pr=Lr+1,Tr?Rr.push("Row "+Pr+": '"+Mr+"'"):Rr.push(Mr.trim()))}return Rr.length>0&&(Tr?Ar="["+Rr.join(" | ")+"]":Ar=Rr.join(`
`)),Ar}getTextAndFormat(){return this.rows}}class Cea608Channel{constructor(Tr,Rr,Ar){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=Tr,this.outputFilter=Rr,this.mode=null,this.verbose=0,this.displayedMemory=new CaptionScreen(Ar),this.nonDisplayedMemory=new CaptionScreen(Ar),this.lastOutputScreen=new CaptionScreen(Ar),this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=Ar}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(Tr){this.outputFilter=Tr}setPAC(Tr){this.writeScreen.setPAC(Tr)}setBkgData(Tr){this.writeScreen.setBkgData(Tr)}setMode(Tr){Tr!==this.mode&&(this.mode=Tr,this.logger.log(2,()=>"MODE="+Tr),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=Tr)}insertChars(Tr){for(let Ar=0;Ar<Tr.length;Ar++)this.writeScreen.insertChar(Tr[Ar]);const Rr=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>Rr+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(Tr){this.logger.log(2,"RU("+Tr+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(Tr)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const Tr=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=Tr,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(Tr){this.logger.log(2,"TO("+Tr+") - Tab Offset"),this.writeScreen.moveCursor(Tr)}ccMIDROW(Tr){const Rr={flash:!1};if(Rr.underline=Tr%2===1,Rr.italics=Tr>=46,Rr.italics)Rr.foreground="white";else{const Ar=Math.floor(Tr/2)-16,Pr=["white","green","blue","cyan","red","yellow","magenta"];Rr.foreground=Pr[Ar]}this.logger.log(2,"MIDROW: "+JSON.stringify(Rr)),this.writeScreen.setPen(Rr)}outputDataUpdate(Tr=!1){const Rr=this.logger.time;Rr!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=Rr:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,Rr,this.lastOutputScreen),Tr&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:Rr),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(Tr){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,Tr,this.displayedMemory),this.cueStartTime=Tr))}}class Cea608Parser{constructor(Tr,Rr,Ar){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;const Pr=new CaptionsLogger;this.channels=[null,new Cea608Channel(Tr,Rr,Pr),new Cea608Channel(Tr+1,Ar,Pr)],this.cmdHistory=createCmdHistory(),this.logger=Pr}getHandler(Tr){return this.channels[Tr].getHandler()}setHandler(Tr,Rr){this.channels[Tr].setHandler(Rr)}addData(Tr,Rr){let Ar,Pr,Lr,Mr=!1;this.logger.time=Tr;for(let Fr=0;Fr<Rr.length;Fr+=2)if(Pr=Rr[Fr]&127,Lr=Rr[Fr+1]&127,!(Pr===0&&Lr===0)){if(this.logger.log(3,"["+numArrayToHexArray([Rr[Fr],Rr[Fr+1]])+"] -> ("+numArrayToHexArray([Pr,Lr])+")"),Ar=this.parseCmd(Pr,Lr),Ar||(Ar=this.parseMidrow(Pr,Lr)),Ar||(Ar=this.parsePAC(Pr,Lr)),Ar||(Ar=this.parseBackgroundAttributes(Pr,Lr)),!Ar&&(Mr=this.parseChars(Pr,Lr),Mr)){const zr=this.currentChannel;zr&&zr>0?this.channels[zr].insertChars(Mr):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!Ar&&!Mr&&this.logger.log(2,"Couldn't parse cleaned data "+numArrayToHexArray([Pr,Lr])+" orig: "+numArrayToHexArray([Rr[Fr],Rr[Fr+1]]))}}parseCmd(Tr,Rr){const{cmdHistory:Ar}=this,Pr=(Tr===20||Tr===28||Tr===21||Tr===29)&&Rr>=32&&Rr<=47,Lr=(Tr===23||Tr===31)&&Rr>=33&&Rr<=35;if(!(Pr||Lr))return!1;if(hasCmdRepeated(Tr,Rr,Ar))return setLastCmd(null,null,Ar),this.logger.log(3,"Repeated command ("+numArrayToHexArray([Tr,Rr])+") is dropped"),!0;const Mr=Tr===20||Tr===21||Tr===23?1:2,Fr=this.channels[Mr];return Tr===20||Tr===21||Tr===28||Tr===29?Rr===32?Fr.ccRCL():Rr===33?Fr.ccBS():Rr===34?Fr.ccAOF():Rr===35?Fr.ccAON():Rr===36?Fr.ccDER():Rr===37?Fr.ccRU(2):Rr===38?Fr.ccRU(3):Rr===39?Fr.ccRU(4):Rr===40?Fr.ccFON():Rr===41?Fr.ccRDC():Rr===42?Fr.ccTR():Rr===43?Fr.ccRTD():Rr===44?Fr.ccEDM():Rr===45?Fr.ccCR():Rr===46?Fr.ccENM():Rr===47&&Fr.ccEOC():Fr.ccTO(Rr-32),setLastCmd(Tr,Rr,Ar),this.currentChannel=Mr,!0}parseMidrow(Tr,Rr){let Ar=0;if((Tr===17||Tr===25)&&Rr>=32&&Rr<=47){if(Tr===17?Ar=1:Ar=2,Ar!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const Pr=this.channels[Ar];return Pr?(Pr.ccMIDROW(Rr),this.logger.log(3,"MIDROW ("+numArrayToHexArray([Tr,Rr])+")"),!0):!1}return!1}parsePAC(Tr,Rr){let Ar;const Pr=this.cmdHistory,Lr=(Tr>=17&&Tr<=23||Tr>=25&&Tr<=31)&&Rr>=64&&Rr<=127,Mr=(Tr===16||Tr===24)&&Rr>=64&&Rr<=95;if(!(Lr||Mr))return!1;if(hasCmdRepeated(Tr,Rr,Pr))return setLastCmd(null,null,Pr),!0;const Fr=Tr<=23?1:2;Rr>=64&&Rr<=95?Ar=Fr===1?rowsLowCh1[Tr]:rowsLowCh2[Tr]:Ar=Fr===1?rowsHighCh1[Tr]:rowsHighCh2[Tr];const zr=this.channels[Fr];return zr?(zr.setPAC(this.interpretPAC(Ar,Rr)),setLastCmd(Tr,Rr,Pr),this.currentChannel=Fr,!0):!1}interpretPAC(Tr,Rr){let Ar;const Pr={color:null,italics:!1,indent:null,underline:!1,row:Tr};return Rr>95?Ar=Rr-96:Ar=Rr-64,Pr.underline=(Ar&1)===1,Ar<=13?Pr.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(Ar/2)]:Ar<=15?(Pr.italics=!0,Pr.color="white"):Pr.indent=Math.floor((Ar-16)/2)*4,Pr}parseChars(Tr,Rr){let Ar,Pr=null,Lr=null;if(Tr>=25?(Ar=2,Lr=Tr-8):(Ar=1,Lr=Tr),Lr>=17&&Lr<=19){let Mr;Lr===17?Mr=Rr+80:Lr===18?Mr=Rr+112:Mr=Rr+144,this.logger.log(2,"Special char '"+getCharForByte(Mr)+"' in channel "+Ar),Pr=[Mr]}else Tr>=32&&Tr<=127&&(Pr=Rr===0?[Tr]:[Tr,Rr]);if(Pr){const Mr=numArrayToHexArray(Pr);this.logger.log(3,"Char codes =  "+Mr.join(",")),setLastCmd(Tr,Rr,this.cmdHistory)}return Pr}parseBackgroundAttributes(Tr,Rr){const Ar=(Tr===16||Tr===24)&&Rr>=32&&Rr<=47,Pr=(Tr===23||Tr===31)&&Rr>=45&&Rr<=47;if(!(Ar||Pr))return!1;let Lr;const Mr={};Tr===16||Tr===24?(Lr=Math.floor((Rr-32)/2),Mr.background=backgroundColors[Lr],Rr%2===1&&(Mr.background=Mr.background+"_semi")):Rr===45?Mr.background="transparent":(Mr.foreground="black",Rr===47&&(Mr.underline=!0));const Fr=Tr<=23?1:2;return this.channels[Fr].setBkgData(Mr),setLastCmd(Tr,Rr,this.cmdHistory),!0}reset(){for(let Tr=0;Tr<Object.keys(this.channels).length;Tr++){const Rr=this.channels[Tr];Rr&&Rr.reset()}this.cmdHistory=createCmdHistory()}cueSplitAtTime(Tr){for(let Rr=0;Rr<this.channels.length;Rr++){const Ar=this.channels[Rr];Ar&&Ar.cueSplitAtTime(Tr)}}}function setLastCmd(_r,Tr,Rr){Rr.a=_r,Rr.b=Tr}function hasCmdRepeated(_r,Tr,Rr){return Rr.a===_r&&Rr.b===Tr}function createCmdHistory(){return{a:null,b:null}}class OutputFilter{constructor(Tr,Rr){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=Tr,this.trackName=Rr}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(Tr,Rr,Ar){(this.startTime===null||this.startTime>Tr)&&(this.startTime=Tr),this.endTime=Rr,this.screen=Ar,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var VTTCue=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;const _r=["","lr","rl"],Tr=["start","middle","end","left","right"];function Rr(Fr,zr){if(typeof zr!="string"||!Array.isArray(Fr))return!1;const Ur=zr.toLowerCase();return~Fr.indexOf(Ur)?Ur:!1}function Ar(Fr){return Rr(_r,Fr)}function Pr(Fr){return Rr(Tr,Fr)}function Lr(Fr,...zr){let Ur=1;for(;Ur<arguments.length;Ur++){const Vr=arguments[Ur];for(const Nr in Vr)Fr[Nr]=Vr[Nr]}return Fr}function Mr(Fr,zr,Ur){const Vr=this,Nr={enumerable:!0};Vr.hasBeenReset=!1;let Dr="",jr=!1,Gr=Fr,Wr=zr,qr=Ur,Kr=null,Xr="",Zr=!0,Jr="auto",_i="start",es=50,ts="middle",rs=50,ns="middle";Object.defineProperty(Vr,"id",Lr({},Nr,{get:function(){return Dr},set:function(as){Dr=""+as}})),Object.defineProperty(Vr,"pauseOnExit",Lr({},Nr,{get:function(){return jr},set:function(as){jr=!!as}})),Object.defineProperty(Vr,"startTime",Lr({},Nr,{get:function(){return Gr},set:function(as){if(typeof as!="number")throw new TypeError("Start time must be set to a number.");Gr=as,this.hasBeenReset=!0}})),Object.defineProperty(Vr,"endTime",Lr({},Nr,{get:function(){return Wr},set:function(as){if(typeof as!="number")throw new TypeError("End time must be set to a number.");Wr=as,this.hasBeenReset=!0}})),Object.defineProperty(Vr,"text",Lr({},Nr,{get:function(){return qr},set:function(as){qr=""+as,this.hasBeenReset=!0}})),Object.defineProperty(Vr,"region",Lr({},Nr,{get:function(){return Kr},set:function(as){Kr=as,this.hasBeenReset=!0}})),Object.defineProperty(Vr,"vertical",Lr({},Nr,{get:function(){return Xr},set:function(as){const ls=Ar(as);if(ls===!1)throw new SyntaxError("An invalid or illegal string was specified.");Xr=ls,this.hasBeenReset=!0}})),Object.defineProperty(Vr,"snapToLines",Lr({},Nr,{get:function(){return Zr},set:function(as){Zr=!!as,this.hasBeenReset=!0}})),Object.defineProperty(Vr,"line",Lr({},Nr,{get:function(){return Jr},set:function(as){if(typeof as!="number"&&as!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");Jr=as,this.hasBeenReset=!0}})),Object.defineProperty(Vr,"lineAlign",Lr({},Nr,{get:function(){return _i},set:function(as){const ls=Pr(as);if(!ls)throw new SyntaxError("An invalid or illegal string was specified.");_i=ls,this.hasBeenReset=!0}})),Object.defineProperty(Vr,"position",Lr({},Nr,{get:function(){return es},set:function(as){if(as<0||as>100)throw new Error("Position must be between 0 and 100.");es=as,this.hasBeenReset=!0}})),Object.defineProperty(Vr,"positionAlign",Lr({},Nr,{get:function(){return ts},set:function(as){const ls=Pr(as);if(!ls)throw new SyntaxError("An invalid or illegal string was specified.");ts=ls,this.hasBeenReset=!0}})),Object.defineProperty(Vr,"size",Lr({},Nr,{get:function(){return rs},set:function(as){if(as<0||as>100)throw new Error("Size must be between 0 and 100.");rs=as,this.hasBeenReset=!0}})),Object.defineProperty(Vr,"align",Lr({},Nr,{get:function(){return ns},set:function(as){const ls=Pr(as);if(!ls)throw new SyntaxError("An invalid or illegal string was specified.");ns=ls,this.hasBeenReset=!0}})),Vr.displayState=void 0}return Mr.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},Mr}();class StringDecoder{decode(Tr,Rr){if(!Tr)return"";if(typeof Tr!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(Tr))}}function parseTimeStamp(_r){function Tr(Ar,Pr,Lr,Mr){return(Ar|0)*3600+(Pr|0)*60+(Lr|0)+parseFloat(Mr||0)}const Rr=_r.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return Rr?parseFloat(Rr[2])>59?Tr(Rr[2],Rr[3],0,Rr[4]):Tr(Rr[1],Rr[2],Rr[3],Rr[4]):null}class Settings{constructor(){this.values=Object.create(null)}set(Tr,Rr){!this.get(Tr)&&Rr!==""&&(this.values[Tr]=Rr)}get(Tr,Rr,Ar){return Ar?this.has(Tr)?this.values[Tr]:Rr[Ar]:this.has(Tr)?this.values[Tr]:Rr}has(Tr){return Tr in this.values}alt(Tr,Rr,Ar){for(let Pr=0;Pr<Ar.length;++Pr)if(Rr===Ar[Pr]){this.set(Tr,Rr);break}}integer(Tr,Rr){/^-?\d+$/.test(Rr)&&this.set(Tr,parseInt(Rr,10))}percent(Tr,Rr){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(Rr)){const Ar=parseFloat(Rr);if(Ar>=0&&Ar<=100)return this.set(Tr,Ar),!0}return!1}}function parseOptions(_r,Tr,Rr,Ar){const Pr=Ar?_r.split(Ar):[_r];for(const Lr in Pr){if(typeof Pr[Lr]!="string")continue;const Mr=Pr[Lr].split(Rr);if(Mr.length!==2)continue;const Fr=Mr[0],zr=Mr[1];Tr(Fr,zr)}}const defaults=new VTTCue(0,0,""),center=defaults.align==="middle"?"middle":"center";function parseCue$1(_r,Tr,Rr){const Ar=_r;function Pr(){const Fr=parseTimeStamp(_r);if(Fr===null)throw new Error("Malformed timestamp: "+Ar);return _r=_r.replace(/^[^\sa-zA-Z-]+/,""),Fr}function Lr(Fr,zr){const Ur=new Settings;parseOptions(Fr,function(Dr,jr){let Gr;switch(Dr){case"region":for(let Wr=Rr.length-1;Wr>=0;Wr--)if(Rr[Wr].id===jr){Ur.set(Dr,Rr[Wr].region);break}break;case"vertical":Ur.alt(Dr,jr,["rl","lr"]);break;case"line":Gr=jr.split(","),Ur.integer(Dr,Gr[0]),Ur.percent(Dr,Gr[0])&&Ur.set("snapToLines",!1),Ur.alt(Dr,Gr[0],["auto"]),Gr.length===2&&Ur.alt("lineAlign",Gr[1],["start",center,"end"]);break;case"position":Gr=jr.split(","),Ur.percent(Dr,Gr[0]),Gr.length===2&&Ur.alt("positionAlign",Gr[1],["start",center,"end","line-left","line-right","auto"]);break;case"size":Ur.percent(Dr,jr);break;case"align":Ur.alt(Dr,jr,["start",center,"end","left","right"]);break}},/:/,/\s/),zr.region=Ur.get("region",null),zr.vertical=Ur.get("vertical","");let Vr=Ur.get("line","auto");Vr==="auto"&&defaults.line===-1&&(Vr=-1),zr.line=Vr,zr.lineAlign=Ur.get("lineAlign","start"),zr.snapToLines=Ur.get("snapToLines",!0),zr.size=Ur.get("size",100),zr.align=Ur.get("align",center);let Nr=Ur.get("position","auto");Nr==="auto"&&defaults.position===50&&(Nr=zr.align==="start"||zr.align==="left"?0:zr.align==="end"||zr.align==="right"?100:50),zr.position=Nr}function Mr(){_r=_r.replace(/^\s+/,"")}if(Mr(),Tr.startTime=Pr(),Mr(),_r.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+Ar);_r=_r.slice(3),Mr(),Tr.endTime=Pr(),Mr(),Lr(_r,Tr)}function fixLineBreaks(_r){return _r.replace(/<br(?: \/)?>/gi,`
`)}class VTTParser{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new StringDecoder,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(Tr){const Rr=this;Tr&&(Rr.buffer+=Rr.decoder.decode(Tr,{stream:!0}));function Ar(){let Lr=Rr.buffer,Mr=0;for(Lr=fixLineBreaks(Lr);Mr<Lr.length&&Lr[Mr]!=="\r"&&Lr[Mr]!==`
`;)++Mr;const Fr=Lr.slice(0,Mr);return Lr[Mr]==="\r"&&++Mr,Lr[Mr]===`
`&&++Mr,Rr.buffer=Lr.slice(Mr),Fr}function Pr(Lr){parseOptions(Lr,function(Mr,Fr){},/:/)}try{let Lr="";if(Rr.state==="INITIAL"){if(!/\r\n|\n/.test(Rr.buffer))return this;Lr=Ar();const Fr=Lr.match(/^()?WEBVTT([ \t].*)?$/);if(!(Fr!=null&&Fr[0]))throw new Error("Malformed WebVTT signature.");Rr.state="HEADER"}let Mr=!1;for(;Rr.buffer;){if(!/\r\n|\n/.test(Rr.buffer))return this;switch(Mr?Mr=!1:Lr=Ar(),Rr.state){case"HEADER":/:/.test(Lr)?Pr(Lr):Lr||(Rr.state="ID");continue;case"NOTE":Lr||(Rr.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Lr)){Rr.state="NOTE";break}if(!Lr)continue;if(Rr.cue=new VTTCue(0,0,""),Rr.state="CUE",Lr.indexOf("-->")===-1){Rr.cue.id=Lr;continue}case"CUE":if(!Rr.cue){Rr.state="BADCUE";continue}try{parseCue$1(Lr,Rr.cue,Rr.regionList)}catch{Rr.cue=null,Rr.state="BADCUE";continue}Rr.state="CUETEXT";continue;case"CUETEXT":{const Fr=Lr.indexOf("-->")!==-1;if(!Lr||Fr&&(Mr=!0)){Rr.oncue&&Rr.cue&&Rr.oncue(Rr.cue),Rr.cue=null,Rr.state="ID";continue}if(Rr.cue===null)continue;Rr.cue.text&&(Rr.cue.text+=`
`),Rr.cue.text+=Lr}continue;case"BADCUE":Lr||(Rr.state="ID")}}}catch{Rr.state==="CUETEXT"&&Rr.cue&&Rr.oncue&&Rr.oncue(Rr.cue),Rr.cue=null,Rr.state=Rr.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const Tr=this;try{if((Tr.cue||Tr.state==="HEADER")&&(Tr.buffer+=`

`,Tr.parse()),Tr.state==="INITIAL"||Tr.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(Rr){Tr.onparsingerror&&Tr.onparsingerror(Rr)}return Tr.onflush&&Tr.onflush(),this}}const LINEBREAKS=/\r\n|\n\r|\n|\r/g,startsWith=function(Tr,Rr,Ar=0){return Tr.slice(Ar,Ar+Rr.length)===Rr},cueString2millis=function(Tr){let Rr=parseInt(Tr.slice(-3));const Ar=parseInt(Tr.slice(-6,-4)),Pr=parseInt(Tr.slice(-9,-7)),Lr=Tr.length>9?parseInt(Tr.substring(0,Tr.indexOf(":"))):0;if(!isFiniteNumber(Rr)||!isFiniteNumber(Ar)||!isFiniteNumber(Pr)||!isFiniteNumber(Lr))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${Tr}`);return Rr+=1e3*Ar,Rr+=60*1e3*Pr,Rr+=60*60*1e3*Lr,Rr},hash=function(Tr){let Rr=5381,Ar=Tr.length;for(;Ar;)Rr=Rr*33^Tr.charCodeAt(--Ar);return(Rr>>>0).toString()};function generateCueId(_r,Tr,Rr){return hash(_r.toString())+hash(Tr.toString())+hash(Rr)}const calculateOffset=function(Tr,Rr,Ar){let Pr=Tr[Rr],Lr=Tr[Pr.prevCC];if(!Lr||!Lr.new&&Pr.new){Tr.ccOffset=Tr.presentationOffset=Pr.start,Pr.new=!1;return}for(;(Mr=Lr)!=null&&Mr.new;){var Mr;Tr.ccOffset+=Pr.start-Lr.start,Pr.new=!1,Pr=Lr,Lr=Tr[Pr.prevCC]}Tr.presentationOffset=Ar};function parseWebVTT(_r,Tr,Rr,Ar,Pr,Lr,Mr){const Fr=new VTTParser,zr=utf8ArrayToStr(new Uint8Array(_r)).trim().replace(LINEBREAKS,`
`).split(`
`),Ur=[],Vr=Tr?toMpegTsClockFromTimescale(Tr.baseTime,Tr.timescale):0;let Nr="00:00.000",Dr=0,jr=0,Gr,Wr=!0;Fr.oncue=function(qr){const Kr=Rr[Ar];let Xr=Rr.ccOffset;const Zr=(Dr-Vr)/9e4;if(Kr!=null&&Kr.new&&(jr!==void 0?Xr=Rr.ccOffset=Kr.start:calculateOffset(Rr,Ar,Zr)),Zr){if(!Tr){Gr=new Error("Missing initPTS for VTT MPEGTS");return}Xr=Zr-Rr.presentationOffset}const Jr=qr.endTime-qr.startTime,_i=normalizePts((qr.startTime+Xr-jr)*9e4,Pr*9e4)/9e4;qr.startTime=Math.max(_i,0),qr.endTime=Math.max(_i+Jr,0);const es=qr.text.trim();qr.text=decodeURIComponent(encodeURIComponent(es)),qr.id||(qr.id=generateCueId(qr.startTime,qr.endTime,es)),qr.endTime>0&&Ur.push(qr)},Fr.onparsingerror=function(qr){Gr=qr},Fr.onflush=function(){if(Gr){Mr(Gr);return}Lr(Ur)},zr.forEach(qr=>{if(Wr)if(startsWith(qr,"X-TIMESTAMP-MAP=")){Wr=!1,qr.slice(16).split(",").forEach(Kr=>{startsWith(Kr,"LOCAL:")?Nr=Kr.slice(6):startsWith(Kr,"MPEGTS:")&&(Dr=parseInt(Kr.slice(7)))});try{jr=cueString2millis(Nr)/1e3}catch(Kr){Gr=Kr}return}else qr===""&&(Wr=!1);Fr.parse(qr+`
`)}),Fr.flush()}const IMSC1_CODEC="stpp.ttml.im1t",HMSF_REGEX=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,TIME_UNIT_REGEX=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,textAlignToLineAlign={left:"start",center:"center",right:"end",start:"start",end:"end"};function parseIMSC1(_r,Tr,Rr,Ar){const Pr=findBox(new Uint8Array(_r),["mdat"]);if(Pr.length===0){Ar(new Error("Could not parse IMSC1 mdat"));return}const Lr=Pr.map(Fr=>utf8ArrayToStr(Fr)),Mr=toTimescaleFromScale(Tr.baseTime,1,Tr.timescale);try{Lr.forEach(Fr=>Rr(parseTTML(Fr,Mr)))}catch(Fr){Ar(Fr)}}function parseTTML(_r,Tr){const Pr=new DOMParser().parseFromString(_r,"text/xml").getElementsByTagName("tt")[0];if(!Pr)throw new Error("Invalid ttml");const Lr={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},Mr=Object.keys(Lr).reduce((Nr,Dr)=>(Nr[Dr]=Pr.getAttribute(`ttp:${Dr}`)||Lr[Dr],Nr),{}),Fr=Pr.getAttribute("xml:space")!=="preserve",zr=collectionToDictionary(getElementCollection(Pr,"styling","style")),Ur=collectionToDictionary(getElementCollection(Pr,"layout","region")),Vr=getElementCollection(Pr,"body","[begin]");return[].map.call(Vr,Nr=>{const Dr=getTextContent(Nr,Fr);if(!Dr||!Nr.hasAttribute("begin"))return null;const jr=parseTtmlTime(Nr.getAttribute("begin"),Mr),Gr=parseTtmlTime(Nr.getAttribute("dur"),Mr);let Wr=parseTtmlTime(Nr.getAttribute("end"),Mr);if(jr===null)throw timestampParsingError(Nr);if(Wr===null){if(Gr===null)throw timestampParsingError(Nr);Wr=jr+Gr}const qr=new VTTCue(jr-Tr,Wr-Tr,Dr);qr.id=generateCueId(qr.startTime,qr.endTime,qr.text);const Kr=Ur[Nr.getAttribute("region")],Xr=zr[Nr.getAttribute("style")],Zr=getTtmlStyles(Kr,Xr,zr),{textAlign:Jr}=Zr;if(Jr){const _i=textAlignToLineAlign[Jr];_i&&(qr.lineAlign=_i),qr.align=Jr}return _extends(qr,Zr),qr}).filter(Nr=>Nr!==null)}function getElementCollection(_r,Tr,Rr){const Ar=_r.getElementsByTagName(Tr)[0];return Ar?[].slice.call(Ar.querySelectorAll(Rr)):[]}function collectionToDictionary(_r){return _r.reduce((Tr,Rr)=>{const Ar=Rr.getAttribute("xml:id");return Ar&&(Tr[Ar]=Rr),Tr},{})}function getTextContent(_r,Tr){return[].slice.call(_r.childNodes).reduce((Rr,Ar,Pr)=>{var Lr;return Ar.nodeName==="br"&&Pr?Rr+`
`:(Lr=Ar.childNodes)!=null&&Lr.length?getTextContent(Ar,Tr):Tr?Rr+Ar.textContent.trim().replace(/\s+/g," "):Rr+Ar.textContent},"")}function getTtmlStyles(_r,Tr,Rr){const Ar="http://www.w3.org/ns/ttml#styling";let Pr=null;const Lr=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],Mr=_r!=null&&_r.hasAttribute("style")?_r.getAttribute("style"):null;return Mr&&Rr.hasOwnProperty(Mr)&&(Pr=Rr[Mr]),Lr.reduce((Fr,zr)=>{const Ur=getAttributeNS(Tr,Ar,zr)||getAttributeNS(_r,Ar,zr)||getAttributeNS(Pr,Ar,zr);return Ur&&(Fr[zr]=Ur),Fr},{})}function getAttributeNS(_r,Tr,Rr){return _r&&_r.hasAttributeNS(Tr,Rr)?_r.getAttributeNS(Tr,Rr):null}function timestampParsingError(_r){return new Error(`Could not parse ttml timestamp ${_r}`)}function parseTtmlTime(_r,Tr){if(!_r)return null;let Rr=parseTimeStamp(_r);return Rr===null&&(HMSF_REGEX.test(_r)?Rr=parseHoursMinutesSecondsFrames(_r,Tr):TIME_UNIT_REGEX.test(_r)&&(Rr=parseTimeUnits(_r,Tr))),Rr}function parseHoursMinutesSecondsFrames(_r,Tr){const Rr=HMSF_REGEX.exec(_r),Ar=(Rr[4]|0)+(Rr[5]|0)/Tr.subFrameRate;return(Rr[1]|0)*3600+(Rr[2]|0)*60+(Rr[3]|0)+Ar/Tr.frameRate}function parseTimeUnits(_r,Tr){const Rr=TIME_UNIT_REGEX.exec(_r),Ar=Number(Rr[1]);switch(Rr[2]){case"h":return Ar*3600;case"m":return Ar*60;case"ms":return Ar*1e3;case"f":return Ar/Tr.frameRate;case"t":return Ar/Tr.tickRate}return Ar}class TimelineController{constructor(Tr){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=newVTTCCs(),this.captionsProperties=void 0,this.hls=Tr,this.config=Tr.config,this.Cues=Tr.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){const Rr=new OutputFilter(this,"textTrack1"),Ar=new OutputFilter(this,"textTrack2"),Pr=new OutputFilter(this,"textTrack3"),Lr=new OutputFilter(this,"textTrack4");this.cea608Parser1=new Cea608Parser(1,Rr,Ar),this.cea608Parser2=new Cea608Parser(3,Pr,Lr)}Tr.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Tr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),Tr.on(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),Tr.on(Events.FRAG_LOADING,this.onFragLoading,this),Tr.on(Events.FRAG_LOADED,this.onFragLoaded,this),Tr.on(Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),Tr.on(Events.FRAG_DECRYPTED,this.onFragDecrypted,this),Tr.on(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),Tr.on(Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),Tr.on(Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:Tr}=this;Tr.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Tr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this),Tr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),Tr.off(Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),Tr.off(Events.FRAG_LOADING,this.onFragLoading,this),Tr.off(Events.FRAG_LOADED,this.onFragLoaded,this),Tr.off(Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),Tr.off(Events.FRAG_DECRYPTED,this.onFragDecrypted,this),Tr.off(Events.INIT_PTS_FOUND,this.onInitPtsFound,this),Tr.off(Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),Tr.off(Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null}addCues(Tr,Rr,Ar,Pr,Lr){let Mr=!1;for(let Fr=Lr.length;Fr--;){const zr=Lr[Fr],Ur=intersection(zr[0],zr[1],Rr,Ar);if(Ur>=0&&(zr[0]=Math.min(zr[0],Rr),zr[1]=Math.max(zr[1],Ar),Mr=!0,Ur/(Ar-Rr)>.5))return}if(Mr||Lr.push([Rr,Ar]),this.config.renderTextTracksNatively){const Fr=this.captionsTracks[Tr];this.Cues.newCue(Fr,Rr,Ar,Pr)}else{const Fr=this.Cues.newCue(null,Rr,Ar,Pr);this.hls.trigger(Events.CUES_PARSED,{type:"captions",cues:Fr,track:Tr})}}onInitPtsFound(Tr,{frag:Rr,id:Ar,initPTS:Pr,timescale:Lr}){const{unparsedVttFrags:Mr}=this;Ar==="main"&&(this.initPTS[Rr.cc]={baseTime:Pr,timescale:Lr}),Mr.length&&(this.unparsedVttFrags=[],Mr.forEach(Fr=>{this.onFragLoaded(Events.FRAG_LOADED,Fr)}))}getExistingTrack(Tr){const{media:Rr}=this;if(Rr)for(let Ar=0;Ar<Rr.textTracks.length;Ar++){const Pr=Rr.textTracks[Ar];if(Pr[Tr])return Pr}return null}createCaptionsTrack(Tr){this.config.renderTextTracksNatively?this.createNativeTrack(Tr):this.createNonNativeTrack(Tr)}createNativeTrack(Tr){if(this.captionsTracks[Tr])return;const{captionsProperties:Rr,captionsTracks:Ar,media:Pr}=this,{label:Lr,languageCode:Mr}=Rr[Tr],Fr=this.getExistingTrack(Tr);if(Fr)Ar[Tr]=Fr,clearCurrentCues(Ar[Tr]),sendAddTrackEvent(Ar[Tr],Pr);else{const zr=this.createTextTrack("captions",Lr,Mr);zr&&(zr[Tr]=!0,Ar[Tr]=zr)}}createNonNativeTrack(Tr){if(this.nonNativeCaptionsTracks[Tr])return;const Rr=this.captionsProperties[Tr];if(!Rr)return;const Ar=Rr.label,Pr={_id:Tr,label:Ar,kind:"captions",default:Rr.media?!!Rr.media.default:!1,closedCaptions:Rr.media};this.nonNativeCaptionsTracks[Tr]=Pr,this.hls.trigger(Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[Pr]})}createTextTrack(Tr,Rr,Ar){const Pr=this.media;if(Pr)return Pr.addTextTrack(Tr,Rr,Ar)}onMediaAttaching(Tr,Rr){this.media=Rr.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:Tr}=this;Object.keys(Tr).forEach(Rr=>{clearCurrentCues(Tr[Rr]),delete Tr[Rr]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=newVTTCCs(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:Tr}=this;if(!Tr)return;const Rr=Tr.textTracks;if(Rr)for(let Ar=0;Ar<Rr.length;Ar++)clearCurrentCues(Rr[Ar])}onSubtitleTracksUpdated(Tr,Rr){const Ar=Rr.subtitleTracks||[],Pr=Ar.some(Lr=>Lr.textCodec===IMSC1_CODEC);if(this.config.enableWebVTT||Pr&&this.config.enableIMSC1){if(subtitleOptionsIdentical(this.tracks,Ar)){this.tracks=Ar;return}if(this.textTracks=[],this.tracks=Ar,this.config.renderTextTracksNatively){const Mr=this.media?this.media.textTracks:null;this.tracks.forEach((Fr,zr)=>{let Ur;if(Mr&&zr<Mr.length){let Vr=null;for(let Nr=0;Nr<Mr.length;Nr++)if(canReuseVttTextTrack(Mr[Nr],Fr)){Vr=Mr[Nr];break}Vr&&(Ur=Vr)}if(Ur)clearCurrentCues(Ur);else{const Vr=this._captionsOrSubtitlesFromCharacteristics(Fr);Ur=this.createTextTrack(Vr,Fr.name,Fr.lang),Ur&&(Ur.mode="disabled")}Ur&&(Ur.groupId=Fr.groupId,this.textTracks.push(Ur))})}else if(this.tracks.length){const Mr=this.tracks.map(Fr=>({label:Fr.name,kind:Fr.type.toLowerCase(),default:Fr.default,subtitleTrack:Fr}));this.hls.trigger(Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:Mr})}}}_captionsOrSubtitlesFromCharacteristics(Tr){if(Tr.attrs.CHARACTERISTICS){const Rr=/transcribes-spoken-dialog/gi.test(Tr.attrs.CHARACTERISTICS),Ar=/describes-music-and-sound/gi.test(Tr.attrs.CHARACTERISTICS);if(Rr&&Ar)return"captions"}return"subtitles"}onManifestLoaded(Tr,Rr){this.config.enableCEA708Captions&&Rr.captions&&Rr.captions.forEach(Ar=>{const Pr=/(?:CC|SERVICE)([1-4])/.exec(Ar.instreamId);if(!Pr)return;const Lr=`textTrack${Pr[1]}`,Mr=this.captionsProperties[Lr];Mr&&(Mr.label=Ar.name,Ar.lang&&(Mr.languageCode=Ar.lang),Mr.media=Ar)})}closedCaptionsForLevel(Tr){const Rr=this.hls.levels[Tr.level];return Rr==null?void 0:Rr.attrs["CLOSED-CAPTIONS"]}onFragLoading(Tr,Rr){const{cea608Parser1:Ar,cea608Parser2:Pr,lastSn:Lr,lastPartIndex:Mr}=this;if(!(!this.enabled||!(Ar&&Pr))&&Rr.frag.type===PlaylistLevelType.MAIN){var Fr,zr;const Ur=Rr.frag.sn,Vr=(Fr=Rr==null||(zr=Rr.part)==null?void 0:zr.index)!=null?Fr:-1;Ur===Lr+1||Ur===Lr&&Vr===Mr+1||(Ar.reset(),Pr.reset()),this.lastSn=Ur,this.lastPartIndex=Vr}}onFragLoaded(Tr,Rr){const{frag:Ar,payload:Pr}=Rr;if(Ar.type===PlaylistLevelType.SUBTITLE)if(Pr.byteLength){const Lr=Ar.decryptdata,Mr="stats"in Rr;if(Lr==null||!Lr.encrypted||Mr){const Fr=this.tracks[Ar.level],zr=this.vttCCs;zr[Ar.cc]||(zr[Ar.cc]={start:Ar.start,prevCC:this.prevCC,new:!0},this.prevCC=Ar.cc),Fr&&Fr.textCodec===IMSC1_CODEC?this._parseIMSC1(Ar,Pr):this._parseVTTs(Rr)}}else this.hls.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:Ar,error:new Error("Empty subtitle payload")})}_parseIMSC1(Tr,Rr){const Ar=this.hls;parseIMSC1(Rr,this.initPTS[Tr.cc],Pr=>{this._appendCues(Pr,Tr.level),Ar.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:Tr})},Pr=>{logger.log(`Failed to parse IMSC1: ${Pr}`),Ar.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:Tr,error:Pr})})}_parseVTTs(Tr){var Rr;const{frag:Ar,payload:Pr}=Tr,{initPTS:Lr,unparsedVttFrags:Mr}=this,Fr=Lr.length-1;if(!Lr[Ar.cc]&&Fr===-1){Mr.push(Tr);return}const zr=this.hls,Ur=(Rr=Ar.initSegment)!=null&&Rr.data?appendUint8Array(Ar.initSegment.data,new Uint8Array(Pr)):Pr;parseWebVTT(Ur,this.initPTS[Ar.cc],this.vttCCs,Ar.cc,Ar.start,Vr=>{this._appendCues(Vr,Ar.level),zr.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:Ar})},Vr=>{const Nr=Vr.message==="Missing initPTS for VTT MPEGTS";Nr?Mr.push(Tr):this._fallbackToIMSC1(Ar,Pr),logger.log(`Failed to parse VTT cue: ${Vr}`),!(Nr&&Fr>Ar.cc)&&zr.trigger(Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:Ar,error:Vr})})}_fallbackToIMSC1(Tr,Rr){const Ar=this.tracks[Tr.level];Ar.textCodec||parseIMSC1(Rr,this.initPTS[Tr.cc],()=>{Ar.textCodec=IMSC1_CODEC,this._parseIMSC1(Tr,Rr)},()=>{Ar.textCodec="wvtt"})}_appendCues(Tr,Rr){const Ar=this.hls;if(this.config.renderTextTracksNatively){const Pr=this.textTracks[Rr];if(!Pr||Pr.mode==="disabled")return;Tr.forEach(Lr=>addCueToTrack(Pr,Lr))}else{const Pr=this.tracks[Rr];if(!Pr)return;const Lr=Pr.default?"default":"subtitles"+Rr;Ar.trigger(Events.CUES_PARSED,{type:"subtitles",cues:Tr,track:Lr})}}onFragDecrypted(Tr,Rr){const{frag:Ar}=Rr;Ar.type===PlaylistLevelType.SUBTITLE&&this.onFragLoaded(Events.FRAG_LOADED,Rr)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(Tr,Rr){const{cea608Parser1:Ar,cea608Parser2:Pr}=this;if(!this.enabled||!(Ar&&Pr))return;const{frag:Lr,samples:Mr}=Rr;if(!(Lr.type===PlaylistLevelType.MAIN&&this.closedCaptionsForLevel(Lr)==="NONE"))for(let Fr=0;Fr<Mr.length;Fr++){const zr=Mr[Fr].bytes;if(zr){const Ur=this.extractCea608Data(zr);Ar.addData(Mr[Fr].pts,Ur[0]),Pr.addData(Mr[Fr].pts,Ur[1])}}}onBufferFlushing(Tr,{startOffset:Rr,endOffset:Ar,endOffsetSubtitles:Pr,type:Lr}){const{media:Mr}=this;if(!(!Mr||Mr.currentTime<Ar)){if(!Lr||Lr==="video"){const{captionsTracks:Fr}=this;Object.keys(Fr).forEach(zr=>removeCuesInRange(Fr[zr],Rr,Ar))}if(this.config.renderTextTracksNatively&&Rr===0&&Pr!==void 0){const{textTracks:Fr}=this;Object.keys(Fr).forEach(zr=>removeCuesInRange(Fr[zr],Rr,Pr))}}}extractCea608Data(Tr){const Rr=[[],[]],Ar=Tr[0]&31;let Pr=2;for(let Lr=0;Lr<Ar;Lr++){const Mr=Tr[Pr++],Fr=127&Tr[Pr++],zr=127&Tr[Pr++];if(Fr===0&&zr===0)continue;if((4&Mr)!==0){const Vr=3&Mr;(Vr===0||Vr===1)&&(Rr[Vr].push(Fr),Rr[Vr].push(zr))}}return Rr}}function canReuseVttTextTrack(_r,Tr){return!!_r&&_r.label===Tr.name&&!(_r.textTrack1||_r.textTrack2)}function intersection(_r,Tr,Rr,Ar){return Math.min(Tr,Ar)-Math.max(_r,Rr)}function newVTTCCs(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class CapLevelController{constructor(Tr){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=Tr,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(Tr){this.streamController=Tr}destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:Tr}=this;Tr.on(Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),Tr.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Tr.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),Tr.on(Events.BUFFER_CODECS,this.onBufferCodecs,this),Tr.on(Events.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:Tr}=this;Tr.off(Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),Tr.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Tr.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),Tr.off(Events.BUFFER_CODECS,this.onBufferCodecs,this),Tr.off(Events.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(Tr,Rr){const Ar=this.hls.levels[Rr.droppedLevel];this.isLevelAllowed(Ar)&&this.restrictedLevels.push({bitrate:Ar.bitrate,height:Ar.height,width:Ar.width})}onMediaAttaching(Tr,Rr){this.media=Rr.media instanceof HTMLVideoElement?Rr.media:null,this.clientRect=null}onManifestParsed(Tr,Rr){const Ar=this.hls;this.restrictedLevels=[],this.firstLevel=Rr.firstLevel,Ar.config.capLevelToPlayerSize&&Rr.video&&this.startCapping()}onBufferCodecs(Tr,Rr){this.hls.config.capLevelToPlayerSize&&Rr.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){const Tr=this.hls.levels;if(Tr.length){const Rr=this.hls;Rr.autoLevelCapping=this.getMaxLevel(Tr.length-1),Rr.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=Rr.autoLevelCapping}}}getMaxLevel(Tr){const Rr=this.hls.levels;if(!Rr.length)return-1;const Ar=Rr.filter((Pr,Lr)=>this.isLevelAllowed(Pr)&&Lr<=Tr);return this.clientRect=null,CapLevelController.getMaxLevelByMediaSize(Ar,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const Tr=this.media,Rr={width:0,height:0};if(Tr){const Ar=Tr.getBoundingClientRect();Rr.width=Ar.width,Rr.height=Ar.height,!Rr.width&&!Rr.height&&(Rr.width=Ar.right-Ar.left||Tr.width||0,Rr.height=Ar.bottom-Ar.top||Tr.height||0)}return this.clientRect=Rr,Rr}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let Tr=1;if(!this.hls.config.ignoreDevicePixelRatio)try{Tr=self.devicePixelRatio}catch{}return Tr}isLevelAllowed(Tr){return!this.restrictedLevels.some(Ar=>Tr.bitrate===Ar.bitrate&&Tr.width===Ar.width&&Tr.height===Ar.height)}static getMaxLevelByMediaSize(Tr,Rr,Ar){if(!(Tr!=null&&Tr.length))return-1;const Pr=(Mr,Fr)=>Fr?Mr.width!==Fr.width||Mr.height!==Fr.height:!0;let Lr=Tr.length-1;for(let Mr=0;Mr<Tr.length;Mr+=1){const Fr=Tr[Mr];if((Fr.width>=Rr||Fr.height>=Ar)&&Pr(Fr,Tr[Mr+1])){Lr=Mr;break}}return Lr}}class FPSController{constructor(Tr){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=Tr,this.registerListeners()}setStreamController(Tr){this.streamController=Tr}registerListeners(){this.hls.on(Events.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(Tr,Rr){const Ar=this.hls.config;if(Ar.capLevelOnFPSDrop){const Pr=Rr.media instanceof self.HTMLVideoElement?Rr.media:null;this.media=Pr,Pr&&typeof Pr.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),Ar.fpsDroppedMonitoringPeriod)}}checkFPS(Tr,Rr,Ar){const Pr=performance.now();if(Rr){if(this.lastTime){const Lr=Pr-this.lastTime,Mr=Ar-this.lastDroppedFrames,Fr=Rr-this.lastDecodedFrames,zr=1e3*Mr/Lr,Ur=this.hls;if(Ur.trigger(Events.FPS_DROP,{currentDropped:Mr,currentDecoded:Fr,totalDroppedFrames:Ar}),zr>0&&Mr>Ur.config.fpsDroppedMonitoringThreshold*Fr){let Vr=Ur.currentLevel;logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+Vr),Vr>0&&(Ur.autoLevelCapping===-1||Ur.autoLevelCapping>=Vr)&&(Vr=Vr-1,Ur.trigger(Events.FPS_DROP_LEVEL_CAPPING,{level:Vr,droppedLevel:Ur.currentLevel}),Ur.autoLevelCapping=Vr,this.streamController.nextLevelSwitch())}}this.lastTime=Pr,this.lastDroppedFrames=Ar,this.lastDecodedFrames=Rr}}checkFPSInterval(){const Tr=this.media;if(Tr)if(this.isVideoPlaybackQualityAvailable){const Rr=Tr.getVideoPlaybackQuality();this.checkFPS(Tr,Rr.totalVideoFrames,Rr.droppedVideoFrames)}else this.checkFPS(Tr,Tr.webkitDecodedFrameCount,Tr.webkitDroppedFrameCount)}}const LOGGER_PREFIX="[eme]";class EMEController{constructor(Tr){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=EMEController.CDMCleanupPromise?[EMEController.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=logger.debug.bind(logger,LOGGER_PREFIX),this.log=logger.log.bind(logger,LOGGER_PREFIX),this.warn=logger.warn.bind(logger,LOGGER_PREFIX),this.error=logger.error.bind(logger,LOGGER_PREFIX),this.hls=Tr,this.config=Tr.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const Tr=this.config;Tr.requestMediaKeySystemAccessFunc=null,Tr.licenseXhrSetup=Tr.licenseResponseCallback=void 0,Tr.drmSystems=Tr.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(Tr){const{drmSystems:Rr,widevineLicenseUrl:Ar}=this.config,Pr=Rr[Tr];if(Pr)return Pr.licenseUrl;if(Tr===KeySystems.WIDEVINE&&Ar)return Ar;throw new Error(`no license server URL configured for key-system "${Tr}"`)}getServerCertificateUrl(Tr){const{drmSystems:Rr}=this.config,Ar=Rr[Tr];if(Ar)return Ar.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${Tr}"]`)}attemptKeySystemAccess(Tr){const Rr=this.hls.levels,Ar=(Mr,Fr,zr)=>!!Mr&&zr.indexOf(Mr)===Fr,Pr=Rr.map(Mr=>Mr.audioCodec).filter(Ar),Lr=Rr.map(Mr=>Mr.videoCodec).filter(Ar);return Pr.length+Lr.length===0&&Lr.push("avc1.42e01e"),new Promise((Mr,Fr)=>{const zr=Ur=>{const Vr=Ur.shift();this.getMediaKeysPromise(Vr,Pr,Lr).then(Nr=>Mr({keySystem:Vr,mediaKeys:Nr})).catch(Nr=>{Ur.length?zr(Ur):Nr instanceof EMEKeyError?Fr(Nr):Fr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:Nr,fatal:!0},Nr.message))})};zr(Tr)})}requestMediaKeySystemAccess(Tr,Rr){const{requestMediaKeySystemAccessFunc:Ar}=this.config;if(typeof Ar!="function"){let Pr=`Configured requestMediaKeySystemAccess is not a function ${Ar}`;return requestMediaKeySystemAccess===null&&self.location.protocol==="http:"&&(Pr=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(Pr))}return Ar(Tr,Rr)}getMediaKeysPromise(Tr,Rr,Ar){const Pr=getSupportedMediaKeySystemConfigurations(Tr,Rr,Ar,this.config.drmSystemOptions),Lr=this.keySystemAccessPromises[Tr];let Mr=Lr==null?void 0:Lr.keySystemAccess;if(!Mr){this.log(`Requesting encrypted media "${Tr}" key-system access with config: ${JSON.stringify(Pr)}`),Mr=this.requestMediaKeySystemAccess(Tr,Pr);const Fr=this.keySystemAccessPromises[Tr]={keySystemAccess:Mr};return Mr.catch(zr=>{this.log(`Failed to obtain access to key-system "${Tr}": ${zr}`)}),Mr.then(zr=>{this.log(`Access for key-system "${zr.keySystem}" obtained`);const Ur=this.fetchServerCertificate(Tr);return this.log(`Create media-keys for "${Tr}"`),Fr.mediaKeys=zr.createMediaKeys().then(Vr=>(this.log(`Media-keys created for "${Tr}"`),Ur.then(Nr=>Nr?this.setMediaKeysServerCertificate(Vr,Tr,Nr):Vr))),Fr.mediaKeys.catch(Vr=>{this.error(`Failed to create media-keys for "${Tr}"}: ${Vr}`)}),Fr.mediaKeys})}return Mr.then(()=>Lr.mediaKeys)}createMediaKeySessionContext({decryptdata:Tr,keySystem:Rr,mediaKeys:Ar}){this.log(`Creating key-system session "${Rr}" keyId: ${Hex.hexDump(Tr.keyId||[])}`);const Pr=Ar.createSession(),Lr={decryptdata:Tr,keySystem:Rr,mediaKeys:Ar,mediaKeysSession:Pr,keyStatus:"status-pending"};return this.mediaKeySessions.push(Lr),Lr}renewKeySession(Tr){const Rr=Tr.decryptdata;if(Rr.pssh){const Ar=this.createMediaKeySessionContext(Tr),Pr=this.getKeyIdString(Rr),Lr="cenc";this.keyIdToKeySessionPromise[Pr]=this.generateRequestWithPreferredKeySession(Ar,Lr,Rr.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(Tr)}getKeyIdString(Tr){if(!Tr)throw new Error("Could not read keyId of undefined decryptdata");if(Tr.keyId===null)throw new Error("keyId is null");return Hex.hexDump(Tr.keyId)}updateKeySession(Tr,Rr){var Ar;const Pr=Tr.mediaKeysSession;return this.log(`Updating key-session "${Pr.sessionId}" for keyID ${Hex.hexDump(((Ar=Tr.decryptdata)==null?void 0:Ar.keyId)||[])}
      } (data length: ${Rr&&Rr.byteLength})`),Pr.update(Rr)}selectKeySystemFormat(Tr){const Rr=Object.keys(Tr.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${Tr.sn} ${Tr.type}: ${Tr.level}) key formats ${Rr.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(Rr)),this.keyFormatPromise}getKeyFormatPromise(Tr){return new Promise((Rr,Ar)=>{const Pr=getKeySystemsForConfig(this.config),Lr=Tr.map(keySystemFormatToKeySystemDomain).filter(Mr=>!!Mr&&Pr.indexOf(Mr)!==-1);return this.getKeySystemSelectionPromise(Lr).then(({keySystem:Mr})=>{const Fr=keySystemDomainToKeySystemFormat(Mr);Fr?Rr(Fr):Ar(new Error(`Unable to find format for key-system "${Mr}"`))}).catch(Ar)})}loadKey(Tr){const Rr=Tr.keyInfo.decryptdata,Ar=this.getKeyIdString(Rr),Pr=`(keyId: ${Ar} format: "${Rr.keyFormat}" method: ${Rr.method} uri: ${Rr.uri})`;this.log(`Starting session for key ${Pr}`);let Lr=this.keyIdToKeySessionPromise[Ar];return Lr||(Lr=this.keyIdToKeySessionPromise[Ar]=this.getKeySystemForKeyPromise(Rr).then(({keySystem:Mr,mediaKeys:Fr})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${Tr.frag.sn} ${Tr.frag.type}: ${Tr.frag.level} using key ${Pr}`),this.attemptSetMediaKeys(Mr,Fr).then(()=>{this.throwIfDestroyed();const zr=this.createMediaKeySessionContext({keySystem:Mr,mediaKeys:Fr,decryptdata:Rr}),Ur="cenc";return this.generateRequestWithPreferredKeySession(zr,Ur,Rr.pssh,"playlist-key")}))),Lr.catch(Mr=>this.handleError(Mr))),Lr}throwIfDestroyed(Tr="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(Tr){this.hls&&(this.error(Tr.message),Tr instanceof EMEKeyError?this.hls.trigger(Events.ERROR,Tr.data):this.hls.trigger(Events.ERROR,{type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_KEYS,error:Tr,fatal:!0}))}getKeySystemForKeyPromise(Tr){const Rr=this.getKeyIdString(Tr),Ar=this.keyIdToKeySessionPromise[Rr];if(!Ar){const Pr=keySystemFormatToKeySystemDomain(Tr.keyFormat),Lr=Pr?[Pr]:getKeySystemsForConfig(this.config);return this.attemptKeySystemAccess(Lr)}return Ar}getKeySystemSelectionPromise(Tr){if(Tr.length||(Tr=getKeySystemsForConfig(this.config)),Tr.length===0)throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(Tr)}_onMediaEncrypted(Tr){const{initDataType:Rr,initData:Ar}=Tr;if(this.debug(`"${Tr.type}" event: init data type: "${Rr}"`),Ar===null)return;let Pr,Lr;if(Rr==="sinf"&&this.config.drmSystems[KeySystems.FAIRPLAY]){const Vr=bin2str(new Uint8Array(Ar));try{const Nr=base64Decode(JSON.parse(Vr).sinf),Dr=parseSinf(new Uint8Array(Nr));if(!Dr)return;Pr=Dr.subarray(8,24),Lr=KeySystems.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{const Vr=parsePssh(Ar);if(Vr===null)return;Vr.version===0&&Vr.systemId===KeySystemIds.WIDEVINE&&Vr.data&&(Pr=Vr.data.subarray(8,24)),Lr=keySystemIdToKeySystemDomain(Vr.systemId)}if(!Lr||!Pr)return;const Mr=Hex.hexDump(Pr),{keyIdToKeySessionPromise:Fr,mediaKeySessions:zr}=this;let Ur=Fr[Mr];for(let Vr=0;Vr<zr.length;Vr++){const Nr=zr[Vr],Dr=Nr.decryptdata;if(Dr.pssh||!Dr.keyId)continue;const jr=Hex.hexDump(Dr.keyId);if(Mr===jr||Dr.uri.replace(/-/g,"").indexOf(Mr)!==-1){Ur=Fr[jr],delete Fr[jr],Dr.pssh=new Uint8Array(Ar),Dr.keyId=Pr,Ur=Fr[Mr]=Ur.then(()=>this.generateRequestWithPreferredKeySession(Nr,Rr,Ar,"encrypted-event-key-match"));break}}Ur||(Ur=Fr[Mr]=this.getKeySystemSelectionPromise([Lr]).then(({keySystem:Vr,mediaKeys:Nr})=>{var Dr;this.throwIfDestroyed();const jr=new LevelKey("ISO-23001-7",Mr,(Dr=keySystemDomainToKeySystemFormat(Vr))!=null?Dr:"");return jr.pssh=new Uint8Array(Ar),jr.keyId=Pr,this.attemptSetMediaKeys(Vr,Nr).then(()=>{this.throwIfDestroyed();const Gr=this.createMediaKeySessionContext({decryptdata:jr,keySystem:Vr,mediaKeys:Nr});return this.generateRequestWithPreferredKeySession(Gr,Rr,Ar,"encrypted-event-no-match")})})),Ur.catch(Vr=>this.handleError(Vr))}_onWaitingForKey(Tr){this.log(`"${Tr.type}" event`)}attemptSetMediaKeys(Tr,Rr){const Ar=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${Tr}"`);const Pr=Promise.all(Ar).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(Rr)});return this.setMediaKeysQueue.push(Pr),Pr.then(()=>{this.log(`Media-keys set for "${Tr}"`),Ar.push(Pr),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(Lr=>Ar.indexOf(Lr)===-1)})}generateRequestWithPreferredKeySession(Tr,Rr,Ar,Pr){var Lr,Mr;const Fr=(Lr=this.config.drmSystems)==null||(Mr=Lr[Tr.keySystem])==null?void 0:Mr.generateRequest;if(Fr)try{const Dr=Fr.call(this.hls,Rr,Ar,Tr);if(!Dr)throw new Error("Invalid response from configured generateRequest filter");Rr=Dr.initDataType,Ar=Tr.decryptdata.pssh=Dr.initData?new Uint8Array(Dr.initData):null}catch(Dr){var zr;if(this.warn(Dr.message),(zr=this.hls)!=null&&zr.config.debug)throw Dr}if(Ar===null)return this.log(`Skipping key-session request for "${Pr}" (no initData)`),Promise.resolve(Tr);const Ur=this.getKeyIdString(Tr.decryptdata);this.log(`Generating key-session request for "${Pr}": ${Ur} (init data type: ${Rr} length: ${Ar?Ar.byteLength:null})`);const Vr=new EventEmitter;Tr.mediaKeysSession.onmessage=Dr=>{const jr=Tr.mediaKeysSession;if(!jr){Vr.emit("error",new Error("invalid state"));return}const{messageType:Gr,message:Wr}=Dr;this.log(`"${Gr}" message event for session "${jr.sessionId}" message size: ${Wr.byteLength}`),Gr==="license-request"||Gr==="license-renewal"?this.renewLicense(Tr,Wr).catch(qr=>{this.handleError(qr),Vr.emit("error",qr)}):Gr==="license-release"?Tr.keySystem===KeySystems.FAIRPLAY&&(this.updateKeySession(Tr,strToUtf8array("acknowledged")),this.removeSession(Tr)):this.warn(`unhandled media key message type "${Gr}"`)},Tr.mediaKeysSession.onkeystatuseschange=Dr=>{if(!Tr.mediaKeysSession){Vr.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(Tr);const Gr=Tr.keyStatus;Vr.emit("keyStatus",Gr),Gr==="expired"&&(this.warn(`${Tr.keySystem} expired for key ${Ur}`),this.renewKeySession(Tr))};const Nr=new Promise((Dr,jr)=>{Vr.on("error",jr),Vr.on("keyStatus",Gr=>{Gr.startsWith("usable")?Dr():Gr==="output-restricted"?jr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):Gr==="internal-error"?jr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${Gr}"`)):Gr==="expired"?jr(new Error("key expired while generating request")):this.warn(`unhandled key status change "${Gr}"`)})});return Tr.mediaKeysSession.generateRequest(Rr,Ar).then(()=>{var Dr;this.log(`Request generated for key-session "${(Dr=Tr.mediaKeysSession)==null?void 0:Dr.sessionId}" keyId: ${Ur}`)}).catch(Dr=>{throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_SESSION,error:Dr,fatal:!1},`Error generating key-session request: ${Dr}`)}).then(()=>Nr).catch(Dr=>{throw Vr.removeAllListeners(),this.removeSession(Tr),Dr}).then(()=>(Vr.removeAllListeners(),Tr))}onKeyStatusChange(Tr){Tr.mediaKeysSession.keyStatuses.forEach((Rr,Ar)=>{this.log(`key status change "${Rr}" for keyStatuses keyId: ${Hex.hexDump("buffer"in Ar?new Uint8Array(Ar.buffer,Ar.byteOffset,Ar.byteLength):new Uint8Array(Ar))} session keyId: ${Hex.hexDump(new Uint8Array(Tr.decryptdata.keyId||[]))} uri: ${Tr.decryptdata.uri}`),Tr.keyStatus=Rr})}fetchServerCertificate(Tr){const Rr=this.config,Ar=Rr.loader,Pr=new Ar(Rr),Lr=this.getServerCertificateUrl(Tr);return Lr?(this.log(`Fetching serverCertificate for "${Tr}"`),new Promise((Mr,Fr)=>{const zr={responseType:"arraybuffer",url:Lr},Ur=Rr.certLoadPolicy.default,Vr={loadPolicy:Ur,timeout:Ur.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},Nr={onSuccess:(Dr,jr,Gr,Wr)=>{Mr(Dr.data)},onError:(Dr,jr,Gr,Wr)=>{Fr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:Gr,response:_objectSpread2({url:zr.url,data:void 0},Dr)},`"${Tr}" certificate request failed (${Lr}). Status: ${Dr.code} (${Dr.text})`))},onTimeout:(Dr,jr,Gr)=>{Fr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:Gr,response:{url:zr.url,data:void 0}},`"${Tr}" certificate request timed out (${Lr})`))},onAbort:(Dr,jr,Gr)=>{Fr(new Error("aborted"))}};Pr.load(zr,Vr,Nr)})):Promise.resolve()}setMediaKeysServerCertificate(Tr,Rr,Ar){return new Promise((Pr,Lr)=>{Tr.setServerCertificate(Ar).then(Mr=>{this.log(`setServerCertificate ${Mr?"success":"not supported by CDM"} (${Ar==null?void 0:Ar.byteLength}) on "${Rr}"`),Pr(Tr)}).catch(Mr=>{Lr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:Mr,fatal:!0},Mr.message))})})}renewLicense(Tr,Rr){return this.requestLicense(Tr,new Uint8Array(Rr)).then(Ar=>this.updateKeySession(Tr,new Uint8Array(Ar)).catch(Pr=>{throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:Pr,fatal:!0},Pr.message)}))}setupLicenseXHR(Tr,Rr,Ar,Pr){const Lr=this.config.licenseXhrSetup;return Lr?Promise.resolve().then(()=>{if(!Ar.decryptdata)throw new Error("Key removed");return Lr.call(this.hls,Tr,Rr,Ar,Pr)}).catch(Mr=>{if(!Ar.decryptdata)throw Mr;return Tr.open("POST",Rr,!0),Lr.call(this.hls,Tr,Rr,Ar,Pr)}).then(Mr=>(Tr.readyState||Tr.open("POST",Rr,!0),{xhr:Tr,licenseChallenge:Mr||Pr})):(Tr.open("POST",Rr,!0),Promise.resolve({xhr:Tr,licenseChallenge:Pr}))}requestLicense(Tr,Rr){const Ar=this.config.keyLoadPolicy.default;return new Promise((Pr,Lr)=>{const Mr=this.getLicenseServerUrl(Tr.keySystem);this.log(`Sending license request to URL: ${Mr}`);const Fr=new XMLHttpRequest;Fr.responseType="arraybuffer",Fr.onreadystatechange=()=>{if(!this.hls||!Tr.mediaKeysSession)return Lr(new Error("invalid state"));if(Fr.readyState===4)if(Fr.status===200){this._requestLicenseFailureCount=0;let zr=Fr.response;this.log(`License received ${zr instanceof ArrayBuffer?zr.byteLength:zr}`);const Ur=this.config.licenseResponseCallback;if(Ur)try{zr=Ur.call(this.hls,Fr,Mr,Tr)}catch(Vr){this.error(Vr)}Pr(zr)}else{const zr=Ar.errorRetry,Ur=zr?zr.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>Ur||Fr.status>=400&&Fr.status<500)Lr(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:Fr,response:{url:Mr,data:void 0,code:Fr.status,text:Fr.statusText}},`License Request XHR failed (${Mr}). Status: ${Fr.status} (${Fr.statusText})`));else{const Vr=Ur-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${Vr} attempts left`),this.requestLicense(Tr,Rr).then(Pr,Lr)}}},Tr.licenseXhr&&Tr.licenseXhr.readyState!==XMLHttpRequest.DONE&&Tr.licenseXhr.abort(),Tr.licenseXhr=Fr,this.setupLicenseXHR(Fr,Mr,Tr,Rr).then(({xhr:zr,licenseChallenge:Ur})=>{zr.send(Ur)})})}onMediaAttached(Tr,Rr){if(!this.config.emeEnabled)return;const Ar=Rr.media;this.media=Ar,Ar.addEventListener("encrypted",this.onMediaEncrypted),Ar.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const Tr=this.media,Rr=this.mediaKeySessions;Tr&&(Tr.removeEventListener("encrypted",this.onMediaEncrypted),Tr.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},LevelKey.clearKeyUriToKeyIdMap();const Ar=Rr.length;EMEController.CDMCleanupPromise=Promise.all(Rr.map(Pr=>this.removeSession(Pr)).concat(Tr==null?void 0:Tr.setMediaKeys(null).catch(Pr=>{this.log(`Could not clear media keys: ${Pr}. media.src: ${Tr==null?void 0:Tr.src}`)}))).then(()=>{Ar&&(this.log("finished closing key sessions and clearing media keys"),Rr.length=0)}).catch(Pr=>{this.log(`Could not close sessions and clear media keys: ${Pr}. media.src: ${Tr==null?void 0:Tr.src}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(Tr,{sessionKeys:Rr}){if(!(!Rr||!this.config.emeEnabled)&&!this.keyFormatPromise){const Ar=Rr.reduce((Pr,Lr)=>(Pr.indexOf(Lr.keyFormat)===-1&&Pr.push(Lr.keyFormat),Pr),[]);this.log(`Selecting key-system from session-keys ${Ar.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(Ar)}}removeSession(Tr){const{mediaKeysSession:Rr,licenseXhr:Ar}=Tr;if(Rr){this.log(`Remove licenses and keys and close session ${Rr.sessionId}`),Rr.onmessage=null,Rr.onkeystatuseschange=null,Ar&&Ar.readyState!==XMLHttpRequest.DONE&&Ar.abort(),Tr.mediaKeysSession=Tr.decryptdata=Tr.licenseXhr=void 0;const Pr=this.mediaKeySessions.indexOf(Tr);return Pr>-1&&this.mediaKeySessions.splice(Pr,1),Rr.remove().catch(Lr=>{this.log(`Could not remove session: ${Lr}`)}).then(()=>Rr.close()).catch(Lr=>{this.log(`Could not close session: ${Lr}`)})}}}EMEController.CDMCleanupPromise=void 0;class EMEKeyError extends Error{constructor(Tr,Rr){super(Rr),this.data=void 0,Tr.error||(Tr.error=new Error(Rr)),this.data=Tr,Tr.err=Tr.error}}const CMCDVersion=1;var CMCDObjectType={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"};const CMCDStreamingFormatHLS="h";class CMCDController{constructor(Tr){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=Pr=>{try{this.apply(Pr,{ot:CMCDObjectType.MANIFEST,su:!this.initialized})}catch(Lr){logger.warn("Could not generate manifest CMCD data.",Lr)}},this.applyFragmentData=Pr=>{try{const Lr=Pr.frag,Mr=this.hls.levels[Lr.level],Fr=this.getObjectType(Lr),zr={d:Lr.duration*1e3,ot:Fr};(Fr===CMCDObjectType.VIDEO||Fr===CMCDObjectType.AUDIO||Fr==CMCDObjectType.MUXED)&&(zr.br=Mr.bitrate/1e3,zr.tb=this.getTopBandwidth(Fr)/1e3,zr.bl=this.getBufferLength(Fr)),this.apply(Pr,zr)}catch(Lr){logger.warn("Could not generate segment CMCD data.",Lr)}},this.hls=Tr;const Rr=this.config=Tr.config,{cmcd:Ar}=Rr;Ar!=null&&(Rr.pLoader=this.createPlaylistLoader(),Rr.fLoader=this.createFragmentLoader(),this.sid=Ar.sessionId||CMCDController.uuid(),this.cid=Ar.contentId,this.useHeaders=Ar.useHeaders===!0,this.registerListeners())}registerListeners(){const Tr=this.hls;Tr.on(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Tr.on(Events.MEDIA_DETACHED,this.onMediaDetached,this),Tr.on(Events.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const Tr=this.hls;Tr.off(Events.MEDIA_ATTACHED,this.onMediaAttached,this),Tr.off(Events.MEDIA_DETACHED,this.onMediaDetached,this),Tr.off(Events.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null}onMediaAttached(Tr,Rr){this.media=Rr.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(Tr,Rr){var Ar,Pr;this.audioBuffer=(Ar=Rr.tracks.audio)==null?void 0:Ar.buffer,this.videoBuffer=(Pr=Rr.tracks.video)==null?void 0:Pr.buffer}createData(){var Tr;return{v:CMCDVersion,sf:CMCDStreamingFormatHLS,sid:this.sid,cid:this.cid,pr:(Tr=this.media)==null?void 0:Tr.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(Tr,Rr={}){_extends(Rr,this.createData());const Ar=Rr.ot===CMCDObjectType.INIT||Rr.ot===CMCDObjectType.VIDEO||Rr.ot===CMCDObjectType.MUXED;if(this.starved&&Ar&&(Rr.bs=!0,Rr.su=!0,this.starved=!1),Rr.su==null&&(Rr.su=this.buffering),this.useHeaders){const Pr=CMCDController.toHeaders(Rr);if(!Object.keys(Pr).length)return;Tr.headers||(Tr.headers={}),_extends(Tr.headers,Pr)}else{const Pr=CMCDController.toQuery(Rr);if(!Pr)return;Tr.url=CMCDController.appendQueryToUri(Tr.url,Pr)}}getObjectType(Tr){const{type:Rr}=Tr;if(Rr==="subtitle")return CMCDObjectType.TIMED_TEXT;if(Tr.sn==="initSegment")return CMCDObjectType.INIT;if(Rr==="audio")return CMCDObjectType.AUDIO;if(Rr==="main")return this.hls.audioTracks.length?CMCDObjectType.VIDEO:CMCDObjectType.MUXED}getTopBandwidth(Tr){let Rr=0,Ar;const Pr=this.hls;if(Tr===CMCDObjectType.AUDIO)Ar=Pr.audioTracks;else{const Lr=Pr.maxAutoLevel,Mr=Lr>-1?Lr+1:Pr.levels.length;Ar=Pr.levels.slice(0,Mr)}for(const Lr of Ar)Lr.bitrate>Rr&&(Rr=Lr.bitrate);return Rr>0?Rr:NaN}getBufferLength(Tr){const Rr=this.hls.media,Ar=Tr===CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return!Ar||!Rr?NaN:BufferHelper.bufferInfo(Ar,Rr.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:Tr}=this.config,Rr=this.applyPlaylistData,Ar=Tr||this.config.loader;return class{constructor(Lr){this.loader=void 0,this.loader=new Ar(Lr)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(Lr,Mr,Fr){Rr(Lr),this.loader.load(Lr,Mr,Fr)}}}createFragmentLoader(){const{fLoader:Tr}=this.config,Rr=this.applyFragmentData,Ar=Tr||this.config.loader;return class{constructor(Lr){this.loader=void 0,this.loader=new Ar(Lr)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(Lr,Mr,Fr){Rr(Lr),this.loader.load(Lr,Mr,Fr)}}}static uuid(){const Tr=URL.createObjectURL(new Blob),Rr=Tr.toString();return URL.revokeObjectURL(Tr),Rr.slice(Rr.lastIndexOf("/")+1)}static serialize(Tr){const Rr=[],Ar=Ur=>!Number.isNaN(Ur)&&Ur!=null&&Ur!==""&&Ur!==!1,Pr=Ur=>Math.round(Ur),Lr=Ur=>Pr(Ur/100)*100,Fr={br:Pr,d:Pr,bl:Lr,dl:Lr,mtp:Lr,nor:Ur=>encodeURIComponent(Ur),rtp:Lr,tb:Pr},zr=Object.keys(Tr||{}).sort();for(const Ur of zr){let Vr=Tr[Ur];if(!Ar(Vr)||Ur==="v"&&Vr===1||Ur=="pr"&&Vr===1)continue;const Nr=Fr[Ur];Nr&&(Vr=Nr(Vr));const Dr=typeof Vr;let jr;Ur==="ot"||Ur==="sf"||Ur==="st"?jr=`${Ur}=${Vr}`:Dr==="boolean"?jr=Ur:Dr==="number"?jr=`${Ur}=${Vr}`:jr=`${Ur}=${JSON.stringify(Vr)}`,Rr.push(jr)}return Rr.join(",")}static toHeaders(Tr){const Rr=Object.keys(Tr),Ar={},Pr=["Object","Request","Session","Status"],Lr=[{},{},{},{}],Mr={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};for(const Fr of Rr){const zr=Mr[Fr]!=null?Mr[Fr]:1;Lr[zr][Fr]=Tr[Fr]}for(let Fr=0;Fr<Lr.length;Fr++){const zr=CMCDController.serialize(Lr[Fr]);zr&&(Ar[`CMCD-${Pr[Fr]}`]=zr)}return Ar}static toQuery(Tr){return`CMCD=${encodeURIComponent(CMCDController.serialize(Tr))}`}static appendQueryToUri(Tr,Rr){if(!Rr)return Tr;const Ar=Tr.includes("?")?"&":"?";return`${Tr}${Ar}${Rr}`}}const PATHWAY_PENALTY_DURATION_MS=3e5;class ContentSteeringController{constructor(Tr){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=Tr,this.log=logger.log.bind(logger,"[content-steering]:"),this.registerListeners()}registerListeners(){const Tr=this.hls;Tr.on(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.on(Events.MANIFEST_LOADED,this.onManifestLoaded,this),Tr.on(Events.MANIFEST_PARSED,this.onManifestParsed,this),Tr.on(Events.ERROR,this.onError,this)}unregisterListeners(){const Tr=this.hls;Tr&&(Tr.off(Events.MANIFEST_LOADING,this.onManifestLoading,this),Tr.off(Events.MANIFEST_LOADED,this.onManifestLoaded,this),Tr.off(Events.MANIFEST_PARSED,this.onManifestParsed,this),Tr.off(Events.ERROR,this.onError,this))}startLoad(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){const Tr=Math.max(this.timeToLoad*1e3-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,Tr)}else this.loadSteeringManifest(this.uri)}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(Tr){const Rr=this.levels;Rr&&(this.levels=Rr.filter(Ar=>Ar!==Tr))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(Tr,Rr){const{contentSteering:Ar}=Rr;Ar!==null&&(this.pathwayId=Ar.pathwayId,this.uri=Ar.uri,this.started&&this.startLoad())}onManifestParsed(Tr,Rr){this.audioTracks=Rr.audioTracks,this.subtitleTracks=Rr.subtitleTracks}onError(Tr,Rr){const{errorAction:Ar}=Rr;if((Ar==null?void 0:Ar.action)===NetworkErrorAction.SendAlternateToPenaltyBox&&Ar.flags===ErrorActionFlags.MoveAllAlternatesMatchingHost){let Pr=this.pathwayPriority;const Lr=this.pathwayId;this.penalizedPathways[Lr]||(this.penalizedPathways[Lr]=performance.now()),!Pr&&this.levels&&(Pr=this.levels.reduce((Mr,Fr)=>(Mr.indexOf(Fr.pathwayId)===-1&&Mr.push(Fr.pathwayId),Mr),[])),Pr&&Pr.length>1&&(this.updatePathwayPriority(Pr),Ar.resolved=this.pathwayId!==Lr)}}filterParsedLevels(Tr){this.levels=Tr;let Rr=this.getLevelsForPathway(this.pathwayId);if(Rr.length===0){const Ar=Tr[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${Ar}"`),Rr=this.getLevelsForPathway(Ar),this.pathwayId=Ar}return Rr.length!==Tr.length?(this.log(`Found ${Rr.length}/${Tr.length} levels in Pathway "${this.pathwayId}"`),Rr):Tr}getLevelsForPathway(Tr){return this.levels===null?[]:this.levels.filter(Rr=>Tr===Rr.pathwayId)}updatePathwayPriority(Tr){this.pathwayPriority=Tr;let Rr;const Ar=this.penalizedPathways,Pr=performance.now();Object.keys(Ar).forEach(Lr=>{Pr-Ar[Lr]>PATHWAY_PENALTY_DURATION_MS&&delete Ar[Lr]});for(let Lr=0;Lr<Tr.length;Lr++){const Mr=Tr[Lr];if(Ar[Mr])continue;if(Mr===this.pathwayId)return;const Fr=this.hls.nextLoadLevel,zr=this.hls.levels[Fr];if(Rr=this.getLevelsForPathway(Mr),Rr.length>0){this.log(`Setting Pathway to "${Mr}"`),this.pathwayId=Mr,this.hls.trigger(Events.LEVELS_UPDATED,{levels:Rr});const Ur=this.hls.levels[Fr];zr&&Ur&&this.levels&&(Ur.attrs["STABLE-VARIANT-ID"]!==zr.attrs["STABLE-VARIANT-ID"]&&Ur.bitrate!==zr.bitrate&&this.log(`Unstable Pathways change from bitrate ${zr.bitrate} to ${Ur.bitrate}`),this.hls.nextLoadLevel=Fr);break}}}clonePathways(Tr){const Rr=this.levels;if(!Rr)return;const Ar={},Pr={};Tr.forEach(Lr=>{const{ID:Mr,"BASE-ID":Fr,"URI-REPLACEMENT":zr}=Lr;if(Rr.some(Vr=>Vr.pathwayId===Mr))return;const Ur=this.getLevelsForPathway(Fr).map(Vr=>{const Nr=_extends({},Vr);Nr.details=void 0,Nr.url=performUriReplacement(Vr.uri,Vr.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",zr);const Dr=new AttrList(Vr.attrs);Dr["PATHWAY-ID"]=Mr;const jr=Dr.AUDIO&&`${Dr.AUDIO}_clone_${Mr}`,Gr=Dr.SUBTITLES&&`${Dr.SUBTITLES}_clone_${Mr}`;jr&&(Ar[Dr.AUDIO]=jr,Dr.AUDIO=jr),Gr&&(Pr[Dr.SUBTITLES]=Gr,Dr.SUBTITLES=Gr),Nr.attrs=Dr;const Wr=new Level(Nr);return addGroupId(Wr,"audio",jr),addGroupId(Wr,"text",Gr),Wr});Rr.push(...Ur),cloneRenditionGroups(this.audioTracks,Ar,zr,Mr),cloneRenditionGroups(this.subtitleTracks,Pr,zr,Mr)})}loadSteeringManifest(Tr){const Rr=this.hls.config,Ar=Rr.loader;this.loader&&this.loader.destroy(),this.loader=new Ar(Rr);let Pr;try{Pr=new self.URL(Tr)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${Tr}`);return}if(Pr.protocol!=="data:"){const Vr=(this.hls.bandwidthEstimate||Rr.abrEwmaDefaultEstimate)|0;Pr.searchParams.set("_HLS_pathway",this.pathwayId),Pr.searchParams.set("_HLS_throughput",""+Vr)}const Lr={responseType:"json",url:Pr.href},Mr=Rr.steeringManifestLoadPolicy.default,Fr=Mr.errorRetry||Mr.timeoutRetry||{},zr={loadPolicy:Mr,timeout:Mr.maxLoadTimeMs,maxRetry:Fr.maxNumRetry||0,retryDelay:Fr.retryDelayMs||0,maxRetryDelay:Fr.maxRetryDelayMs||0},Ur={onSuccess:(Vr,Nr,Dr,jr)=>{this.log(`Loaded steering manifest: "${Pr}"`);const Gr=Vr.data;if(Gr.VERSION!==1){this.log(`Steering VERSION ${Gr.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=Gr.TTL;const{"RELOAD-URI":Wr,"PATHWAY-CLONES":qr,"PATHWAY-PRIORITY":Kr}=Gr;if(Wr)try{this.uri=new self.URL(Wr,Pr).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${Wr}`);return}this.scheduleRefresh(this.uri||Dr.url),qr&&this.clonePathways(qr),Kr&&this.updatePathwayPriority(Kr)},onError:(Vr,Nr,Dr,jr)=>{if(this.log(`Error loading steering manifest: ${Vr.code} ${Vr.text} (${Nr.url})`),this.stopLoad(),Vr.code===410){this.enabled=!1,this.log(`Steering manifest ${Nr.url} no longer available`);return}let Gr=this.timeToLoad*1e3;if(Vr.code===429){const Wr=this.loader;if(typeof(Wr==null?void 0:Wr.getResponseHeader)=="function"){const qr=Wr.getResponseHeader("Retry-After");qr&&(Gr=parseFloat(qr)*1e3)}this.log(`Steering manifest ${Nr.url} rate limited`);return}this.scheduleRefresh(this.uri||Nr.url,Gr)},onTimeout:(Vr,Nr,Dr)=>{this.log(`Timeout loading steering manifest (${Nr.url})`),this.scheduleRefresh(this.uri||Nr.url)}};this.log(`Requesting steering manifest: ${Pr}`),this.loader.load(Lr,zr,Ur)}scheduleRefresh(Tr,Rr=this.timeToLoad*1e3){self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout(()=>{this.loadSteeringManifest(Tr)},Rr)}}function cloneRenditionGroups(_r,Tr,Rr,Ar){_r&&Object.keys(Tr).forEach(Pr=>{const Lr=_r.filter(Mr=>Mr.groupId===Pr).map(Mr=>{const Fr=_extends({},Mr);return Fr.details=void 0,Fr.attrs=new AttrList(Fr.attrs),Fr.url=Fr.attrs.URI=performUriReplacement(Mr.url,Mr.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",Rr),Fr.groupId=Fr.attrs["GROUP-ID"]=Tr[Pr],Fr.attrs["PATHWAY-ID"]=Ar,Fr});_r.push(...Lr)})}function performUriReplacement(_r,Tr,Rr,Ar){const{HOST:Pr,PARAMS:Lr,[Rr]:Mr}=Ar;let Fr;Tr&&(Fr=Mr==null?void 0:Mr[Tr],Fr&&(_r=Fr));const zr=new self.URL(_r);return Pr&&!Fr&&(zr.host=Pr),Lr&&Object.keys(Lr).sort().forEach(Ur=>{Ur&&zr.searchParams.set(Ur,Lr[Ur])}),zr.href}const AGE_HEADER_LINE_REGEX=/^age:\s*[\d.]+\s*$/im;class XhrLoader{constructor(Tr){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=Tr&&Tr.xhrSetup||null,this.stats=new LoadStats,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null}abortInternal(){const Tr=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),Tr&&(Tr.onreadystatechange=null,Tr.onprogress=null,Tr.readyState!==4&&(this.stats.aborted=!0,Tr.abort()))}abort(){var Tr;this.abortInternal(),(Tr=this.callbacks)!=null&&Tr.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(Tr,Rr,Ar){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=Tr,this.config=Rr,this.callbacks=Ar,this.loadInternal()}loadInternal(){const{config:Tr,context:Rr}=this;if(!Tr)return;const Ar=this.loader=new self.XMLHttpRequest,Pr=this.stats;Pr.loading.first=0,Pr.loaded=0,Pr.aborted=!1;const Lr=this.xhrSetup;Lr?Promise.resolve().then(()=>{if(!this.stats.aborted)return Lr(Ar,Rr.url)}).catch(Mr=>(Ar.open("GET",Rr.url,!0),Lr(Ar,Rr.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(Ar,Rr,Tr)}).catch(Mr=>{this.callbacks.onError({code:Ar.status,text:Mr.message},Rr,Ar,Pr)}):this.openAndSendXhr(Ar,Rr,Tr)}openAndSendXhr(Tr,Rr,Ar){Tr.readyState||Tr.open("GET",Rr.url,!0);const Pr=this.context.headers,{maxTimeToFirstByteMs:Lr,maxLoadTimeMs:Mr}=Ar.loadPolicy;if(Pr)for(const Fr in Pr)Tr.setRequestHeader(Fr,Pr[Fr]);Rr.rangeEnd&&Tr.setRequestHeader("Range","bytes="+Rr.rangeStart+"-"+(Rr.rangeEnd-1)),Tr.onreadystatechange=this.readystatechange.bind(this),Tr.onprogress=this.loadprogress.bind(this),Tr.responseType=Rr.responseType,self.clearTimeout(this.requestTimeout),Ar.timeout=Lr&&isFiniteNumber(Lr)?Lr:Mr,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),Ar.timeout),Tr.send()}readystatechange(){const{context:Tr,loader:Rr,stats:Ar}=this;if(!Tr||!Rr)return;const Pr=Rr.readyState,Lr=this.config;if(!Ar.aborted&&Pr>=2&&(Ar.loading.first===0&&(Ar.loading.first=Math.max(self.performance.now(),Ar.loading.start),Lr.timeout!==Lr.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),Lr.timeout=Lr.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),Lr.loadPolicy.maxLoadTimeMs-(Ar.loading.first-Ar.loading.start)))),Pr===4)){self.clearTimeout(this.requestTimeout),Rr.onreadystatechange=null,Rr.onprogress=null;const Mr=Rr.status,Fr=Rr.responseType!=="text";if(Mr>=200&&Mr<300&&(Fr&&Rr.response||Rr.responseText!==null)){Ar.loading.end=Math.max(self.performance.now(),Ar.loading.first);const zr=Fr?Rr.response:Rr.responseText,Ur=Rr.responseType==="arraybuffer"?zr.byteLength:zr.length;if(Ar.loaded=Ar.total=Ur,Ar.bwEstimate=Ar.total*8e3/(Ar.loading.end-Ar.loading.first),!this.callbacks)return;const Vr=this.callbacks.onProgress;if(Vr&&Vr(Ar,Tr,zr,Rr),!this.callbacks)return;const Nr={url:Rr.responseURL,data:zr,code:Mr};this.callbacks.onSuccess(Nr,Ar,Tr,Rr)}else{const zr=Lr.loadPolicy.errorRetry,Ur=Ar.retry;shouldRetry(zr,Ur,!1,Mr)?this.retry(zr):(logger.error(`${Mr} while loading ${Tr.url}`),this.callbacks.onError({code:Mr,text:Rr.statusText},Tr,Rr,Ar))}}}loadtimeout(){var Tr;const Rr=(Tr=this.config)==null?void 0:Tr.loadPolicy.timeoutRetry,Ar=this.stats.retry;if(shouldRetry(Rr,Ar,!0))this.retry(Rr);else{logger.warn(`timeout while loading ${this.context.url}`);const Pr=this.callbacks;Pr&&(this.abortInternal(),Pr.onTimeout(this.stats,this.context,this.loader))}}retry(Tr){const{context:Rr,stats:Ar}=this;this.retryDelay=getRetryDelay(Tr,Ar.retry),Ar.retry++,logger.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${Rr.url}, retrying ${Ar.retry}/${Tr.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(Tr){const Rr=this.stats;Rr.loaded=Tr.loaded,Tr.lengthComputable&&(Rr.total=Tr.total)}getCacheAge(){let Tr=null;if(this.loader&&AGE_HEADER_LINE_REGEX.test(this.loader.getAllResponseHeaders())){const Rr=this.loader.getResponseHeader("age");Tr=Rr?parseFloat(Rr):null}return Tr}getResponseHeader(Tr){return this.loader&&new RegExp(`^${Tr}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(Tr):null}}function fetchSupported(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const BYTERANGE=/(\d+)-(\d+)\/(\d+)/;class FetchLoader{constructor(Tr){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=Tr.fetchSetup||getRequest,this.controller=new self.AbortController,this.stats=new LoadStats}destroy(){this.loader=this.callbacks=null,this.abortInternal()}abortInternal(){const Tr=this.response;Tr!=null&&Tr.ok||(this.stats.aborted=!0,this.controller.abort())}abort(){var Tr;this.abortInternal(),(Tr=this.callbacks)!=null&&Tr.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(Tr,Rr,Ar){const Pr=this.stats;if(Pr.loading.start)throw new Error("Loader can only be used once.");Pr.loading.start=self.performance.now();const Lr=getRequestParameters(Tr,this.controller.signal),Mr=Ar.onProgress,Fr=Tr.responseType==="arraybuffer",zr=Fr?"byteLength":"length",{maxTimeToFirstByteMs:Ur,maxLoadTimeMs:Vr}=Rr.loadPolicy;this.context=Tr,this.config=Rr,this.callbacks=Ar,this.request=this.fetchSetup(Tr,Lr),self.clearTimeout(this.requestTimeout),Rr.timeout=Ur&&isFiniteNumber(Ur)?Ur:Vr,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),Ar.onTimeout(Pr,Tr,this.response)},Rr.timeout),self.fetch(this.request).then(Nr=>{this.response=this.loader=Nr;const Dr=Math.max(self.performance.now(),Pr.loading.start);if(self.clearTimeout(this.requestTimeout),Rr.timeout=Vr,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),Ar.onTimeout(Pr,Tr,this.response)},Vr-(Dr-Pr.loading.start)),!Nr.ok){const{status:jr,statusText:Gr}=Nr;throw new FetchError(Gr||"fetch, bad network response",jr,Nr)}return Pr.loading.first=Dr,Pr.total=getContentLength(Nr.headers)||Pr.total,Mr&&isFiniteNumber(Rr.highWaterMark)?this.loadProgressively(Nr,Pr,Tr,Rr.highWaterMark,Mr):Fr?Nr.arrayBuffer():Tr.responseType==="json"?Nr.json():Nr.text()}).then(Nr=>{const{response:Dr}=this;self.clearTimeout(this.requestTimeout),Pr.loading.end=Math.max(self.performance.now(),Pr.loading.first);const jr=Nr[zr];jr&&(Pr.loaded=Pr.total=jr);const Gr={url:Dr.url,data:Nr,code:Dr.status};Mr&&!isFiniteNumber(Rr.highWaterMark)&&Mr(Pr,Tr,Nr,Dr),Ar.onSuccess(Gr,Pr,Tr,Dr)}).catch(Nr=>{if(self.clearTimeout(this.requestTimeout),Pr.aborted)return;const Dr=Nr&&Nr.code||0,jr=Nr?Nr.message:null;Ar.onError({code:Dr,text:jr},Tr,Nr?Nr.details:null,Pr)})}getCacheAge(){let Tr=null;if(this.response){const Rr=this.response.headers.get("age");Tr=Rr?parseFloat(Rr):null}return Tr}getResponseHeader(Tr){return this.response?this.response.headers.get(Tr):null}loadProgressively(Tr,Rr,Ar,Pr=0,Lr){const Mr=new ChunkCache,Fr=Tr.body.getReader(),zr=()=>Fr.read().then(Ur=>{if(Ur.done)return Mr.dataLength&&Lr(Rr,Ar,Mr.flush(),Tr),Promise.resolve(new ArrayBuffer(0));const Vr=Ur.value,Nr=Vr.length;return Rr.loaded+=Nr,Nr<Pr||Mr.dataLength?(Mr.push(Vr),Mr.dataLength>=Pr&&Lr(Rr,Ar,Mr.flush(),Tr)):Lr(Rr,Ar,Vr,Tr),zr()}).catch(()=>Promise.reject());return zr()}}function getRequestParameters(_r,Tr){const Rr={method:"GET",mode:"cors",credentials:"same-origin",signal:Tr,headers:new self.Headers(_extends({},_r.headers))};return _r.rangeEnd&&Rr.headers.set("Range","bytes="+_r.rangeStart+"-"+String(_r.rangeEnd-1)),Rr}function getByteRangeLength(_r){const Tr=BYTERANGE.exec(_r);if(Tr)return parseInt(Tr[2])-parseInt(Tr[1])+1}function getContentLength(_r){const Tr=_r.get("Content-Range");if(Tr){const Ar=getByteRangeLength(Tr);if(isFiniteNumber(Ar))return Ar}const Rr=_r.get("Content-Length");if(Rr)return parseInt(Rr)}function getRequest(_r,Tr){return new self.Request(_r.url,Tr)}class FetchError extends Error{constructor(Tr,Rr,Ar){super(Tr),this.code=void 0,this.details=void 0,this.code=Rr,this.details=Ar}}const WHITESPACE_CHAR=/\s/,Cues={newCue(_r,Tr,Rr,Ar){const Pr=[];let Lr,Mr,Fr,zr,Ur;const Vr=self.VTTCue||self.TextTrackCue;for(let Dr=0;Dr<Ar.rows.length;Dr++)if(Lr=Ar.rows[Dr],Fr=!0,zr=0,Ur="",!Lr.isEmpty()){var Nr;for(let Wr=0;Wr<Lr.chars.length;Wr++)WHITESPACE_CHAR.test(Lr.chars[Wr].uchar)&&Fr?zr++:(Ur+=Lr.chars[Wr].uchar,Fr=!1);Lr.cueStartTime=Tr,Tr===Rr&&(Rr+=1e-4),zr>=16?zr--:zr++;const jr=fixLineBreaks(Ur.trim()),Gr=generateCueId(Tr,Rr,jr);_r!=null&&(Nr=_r.cues)!=null&&Nr.getCueById(Gr)||(Mr=new Vr(Tr,Rr,jr),Mr.id=Gr,Mr.line=Dr+1,Mr.align="left",Mr.position=10+Math.min(80,Math.floor(zr*8/32)*10),Pr.push(Mr))}return _r&&Pr.length&&(Pr.sort((Dr,jr)=>Dr.line==="auto"||jr.line==="auto"?0:Dr.line>8&&jr.line>8?jr.line-Dr.line:Dr.line-jr.line),Pr.forEach(Dr=>addCueToTrack(_r,Dr))),Pr}},defaultLoadPolicy={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},hlsDefaultConfig=_objectSpread2(_objectSpread2({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:XhrLoader,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:AbrController,bufferController:BufferController,capLevelController:CapLevelController,errorController:ErrorController,fpsController:FPSController,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:defaultLoadPolicy},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},timelineConfig()),{},{subtitleStreamController:SubtitleStreamController,subtitleTrackController:SubtitleTrackController,timelineController:TimelineController,audioStreamController:AudioStreamController,audioTrackController:AudioTrackController,emeController:EMEController,cmcdController:CMCDController,contentSteeringController:ContentSteeringController});function timelineConfig(){return{cueHandler:Cues,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function mergeConfig(_r,Tr){if((Tr.liveSyncDurationCount||Tr.liveMaxLatencyDurationCount)&&(Tr.liveSyncDuration||Tr.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(Tr.liveMaxLatencyDurationCount!==void 0&&(Tr.liveSyncDurationCount===void 0||Tr.liveMaxLatencyDurationCount<=Tr.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(Tr.liveMaxLatencyDuration!==void 0&&(Tr.liveSyncDuration===void 0||Tr.liveMaxLatencyDuration<=Tr.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const Rr=deepCpy(_r),Ar=["manifest","level","frag"],Pr=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return Ar.forEach(Lr=>{const Mr=`${Lr==="level"?"playlist":Lr}LoadPolicy`,Fr=Tr[Mr]===void 0,zr=[];Pr.forEach(Ur=>{const Vr=`${Lr}Loading${Ur}`,Nr=Tr[Vr];if(Nr!==void 0&&Fr){zr.push(Vr);const Dr=Rr[Mr].default;switch(Tr[Mr]={default:Dr},Ur){case"TimeOut":Dr.maxLoadTimeMs=Nr,Dr.maxTimeToFirstByteMs=Nr;break;case"MaxRetry":Dr.errorRetry.maxNumRetry=Nr,Dr.timeoutRetry.maxNumRetry=Nr;break;case"RetryDelay":Dr.errorRetry.retryDelayMs=Nr,Dr.timeoutRetry.retryDelayMs=Nr;break;case"MaxRetryTimeout":Dr.errorRetry.maxRetryDelayMs=Nr,Dr.timeoutRetry.maxRetryDelayMs=Nr;break}}}),zr.length&&logger.warn(`hls.js config: "${zr.join('", "')}" setting(s) are deprecated, use "${Mr}": ${JSON.stringify(Tr[Mr])}`)}),_objectSpread2(_objectSpread2({},Rr),Tr)}function deepCpy(_r){return _r&&typeof _r=="object"?Array.isArray(_r)?_r.map(deepCpy):Object.keys(_r).reduce((Tr,Rr)=>(Tr[Rr]=deepCpy(_r[Rr]),Tr),{}):_r}function enableStreamingMode(_r){const Tr=_r.loader;Tr!==FetchLoader&&Tr!==XhrLoader?(logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),_r.progressive=!1):fetchSupported()&&(_r.loader=FetchLoader,_r.progressive=!0,_r.enableSoftwareAES=!0,logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}class Hls{static get version(){return"1.4.12"}static isSupported(){return isSupported()}static get Events(){return Events}static get ErrorTypes(){return ErrorTypes}static get ErrorDetails(){return ErrorDetails}static get DefaultConfig(){return Hls.defaultConfig?Hls.defaultConfig:hlsDefaultConfig}static set DefaultConfig(Tr){Hls.defaultConfig=Tr}constructor(Tr={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,enableLogs(Tr.debug||!1,"Hls instance");const Rr=this.config=mergeConfig(Hls.DefaultConfig,Tr);this.userConfig=Tr,this._autoLevelCapping=-1,Rr.progressive&&enableStreamingMode(Rr);const{abrController:Ar,bufferController:Pr,capLevelController:Lr,errorController:Mr,fpsController:Fr}=Rr,zr=new Mr(this),Ur=this.abrController=new Ar(this),Vr=this.bufferController=new Pr(this),Nr=this.capLevelController=new Lr(this),Dr=new Fr(this),jr=new PlaylistLoader(this),Gr=new ID3TrackController(this),Wr=Rr.contentSteeringController,qr=Wr?new Wr(this):null,Kr=this.levelController=new LevelController(this,qr),Xr=new FragmentTracker(this),Zr=new KeyLoader(this.config),Jr=this.streamController=new StreamController(this,Xr,Zr);Nr.setStreamController(Jr),Dr.setStreamController(Jr);const _i=[jr,Kr,Jr];qr&&_i.splice(1,0,qr),this.networkControllers=_i;const es=[Ur,Vr,Nr,Dr,Gr,Xr];this.audioTrackController=this.createController(Rr.audioTrackController,_i);const ts=Rr.audioStreamController;ts&&_i.push(new ts(this,Xr,Zr)),this.subtitleTrackController=this.createController(Rr.subtitleTrackController,_i);const rs=Rr.subtitleStreamController;rs&&_i.push(new rs(this,Xr,Zr)),this.createController(Rr.timelineController,es),Zr.emeController=this.emeController=this.createController(Rr.emeController,es),this.cmcdController=this.createController(Rr.cmcdController,es),this.latencyController=this.createController(LatencyController,es),this.coreComponents=es,_i.push(zr);const ns=zr.onErrorOut;typeof ns=="function"&&this.on(Events.ERROR,ns,zr)}createController(Tr,Rr){if(Tr){const Ar=new Tr(this);return Rr&&Rr.push(Ar),Ar}return null}on(Tr,Rr,Ar=this){this._emitter.on(Tr,Rr,Ar)}once(Tr,Rr,Ar=this){this._emitter.once(Tr,Rr,Ar)}removeAllListeners(Tr){this._emitter.removeAllListeners(Tr)}off(Tr,Rr,Ar=this,Pr){this._emitter.off(Tr,Rr,Ar,Pr)}listeners(Tr){return this._emitter.listeners(Tr)}emit(Tr,Rr,Ar){return this._emitter.emit(Tr,Rr,Ar)}trigger(Tr,Rr){if(this.config.debug)return this.emit(Tr,Tr,Rr);try{return this.emit(Tr,Tr,Rr)}catch(Ar){logger.error("An internal error happened while handling event "+Tr+'. Error message: "'+Ar.message+'". Here is a stacktrace:',Ar),this.trigger(Events.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:Tr,error:Ar})}return!1}listenerCount(Tr){return this._emitter.listenerCount(Tr)}destroy(){logger.log("destroy"),this.trigger(Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(Rr=>Rr.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(Rr=>Rr.destroy()),this.coreComponents.length=0;const Tr=this.config;Tr.xhrSetup=Tr.fetchSetup=void 0,this.userConfig=null}attachMedia(Tr){logger.log("attachMedia"),this._media=Tr,this.trigger(Events.MEDIA_ATTACHING,{media:Tr})}detachMedia(){logger.log("detachMedia"),this.trigger(Events.MEDIA_DETACHING,void 0),this._media=null}loadSource(Tr){this.stopLoad();const Rr=this.media,Ar=this.url,Pr=this.url=urlToolkitExports.buildAbsoluteURL(self.location.href,Tr,{alwaysNormalize:!0});logger.log(`loadSource:${Pr}`),Rr&&Ar&&(Ar!==Pr||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(Rr)),this.trigger(Events.MANIFEST_LOADING,{url:Tr})}startLoad(Tr=-1){logger.log(`startLoad(${Tr})`),this.networkControllers.forEach(Rr=>{Rr.startLoad(Tr)})}stopLoad(){logger.log("stopLoad"),this.networkControllers.forEach(Tr=>{Tr.stopLoad()})}swapAudioCodec(){logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){logger.log("recoverMediaError");const Tr=this._media;this.detachMedia(),Tr&&this.attachMedia(Tr)}removeLevel(Tr,Rr=0){this.levelController.removeLevel(Tr,Rr)}get levels(){const Tr=this.levelController.levels;return Tr||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(Tr){logger.log(`set currentLevel:${Tr}`),this.loadLevel=Tr,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(Tr){logger.log(`set nextLevel:${Tr}`),this.levelController.manualLevel=Tr,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(Tr){logger.log(`set loadLevel:${Tr}`),this.levelController.manualLevel=Tr}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(Tr){this.levelController.nextLoadLevel=Tr}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(Tr){logger.log(`set firstLevel:${Tr}`),this.levelController.firstLevel=Tr}get startLevel(){return this.levelController.startLevel}set startLevel(Tr){logger.log(`set startLevel:${Tr}`),Tr!==-1&&(Tr=Math.max(Tr,this.minAutoLevel)),this.levelController.startLevel=Tr}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(Tr){const Rr=!!Tr;Rr!==this.config.capLevelToPlayerSize&&(Rr?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=Rr)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:Tr}=this.abrController;return Tr?Tr.getEstimate():NaN}get ttfbEstimate(){const{bwEstimator:Tr}=this.abrController;return Tr?Tr.getEstimateTTFB():NaN}set autoLevelCapping(Tr){this._autoLevelCapping!==Tr&&(logger.log(`set autoLevelCapping:${Tr}`),this._autoLevelCapping=Tr)}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(Tr){HdcpLevels.indexOf(Tr)>-1&&(this._maxHdcpLevel=Tr)}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:Tr,config:{minAutoBitrate:Rr}}=this;if(!Tr)return 0;const Ar=Tr.length;for(let Pr=0;Pr<Ar;Pr++)if(Tr[Pr].maxBitrate>=Rr)return Pr;return 0}get maxAutoLevel(){const{levels:Tr,autoLevelCapping:Rr,maxHdcpLevel:Ar}=this;let Pr;if(Rr===-1&&Tr&&Tr.length?Pr=Tr.length-1:Pr=Rr,Ar)for(let Lr=Pr;Lr--;){const Mr=Tr[Lr].attrs["HDCP-LEVEL"];if(Mr&&Mr<=Ar)return Lr}return Pr}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(Tr){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,Tr)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const Tr=this.audioTrackController;return Tr?Tr.audioTracks:[]}get audioTrack(){const Tr=this.audioTrackController;return Tr?Tr.audioTrack:-1}set audioTrack(Tr){const Rr=this.audioTrackController;Rr&&(Rr.audioTrack=Tr)}get subtitleTracks(){const Tr=this.subtitleTrackController;return Tr?Tr.subtitleTracks:[]}get subtitleTrack(){const Tr=this.subtitleTrackController;return Tr?Tr.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(Tr){const Rr=this.subtitleTrackController;Rr&&(Rr.subtitleTrack=Tr)}get subtitleDisplay(){const Tr=this.subtitleTrackController;return Tr?Tr.subtitleDisplay:!1}set subtitleDisplay(Tr){const Rr=this.subtitleTrackController;Rr&&(Rr.subtitleDisplay=Tr)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(Tr){this.config.lowLatencyMode=Tr}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Hls.defaultConfig=void 0;let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let _r=0;_r<256;++_r)byteToHex.push((_r+256).toString(16).slice(1));function unsafeStringify(_r,Tr=0){return byteToHex[_r[Tr+0]]+byteToHex[_r[Tr+1]]+byteToHex[_r[Tr+2]]+byteToHex[_r[Tr+3]]+"-"+byteToHex[_r[Tr+4]]+byteToHex[_r[Tr+5]]+"-"+byteToHex[_r[Tr+6]]+byteToHex[_r[Tr+7]]+"-"+byteToHex[_r[Tr+8]]+byteToHex[_r[Tr+9]]+"-"+byteToHex[_r[Tr+10]]+byteToHex[_r[Tr+11]]+byteToHex[_r[Tr+12]]+byteToHex[_r[Tr+13]]+byteToHex[_r[Tr+14]]+byteToHex[_r[Tr+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(_r,Tr,Rr){if(native.randomUUID&&!Tr&&!_r)return native.randomUUID();_r=_r||{};const Ar=_r.random||(_r.rng||rng)();if(Ar[6]=Ar[6]&15|64,Ar[8]=Ar[8]&63|128,Tr){Rr=Rr||0;for(let Pr=0;Pr<16;++Pr)Tr[Rr+Pr]=Ar[Pr];return Tr}return unsafeStringify(Ar)}function $db6c3485150b8e66$export$1ab7ae714698c4b8(_r){const[Tr,Rr]=reactExports.useState(void 0);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(_r){Rr({width:_r.offsetWidth,height:_r.offsetHeight});const Ar=new ResizeObserver(Pr=>{if(!Array.isArray(Pr)||!Pr.length)return;const Lr=Pr[0];let Mr,Fr;if("borderBoxSize"in Lr){const zr=Lr.borderBoxSize,Ur=Array.isArray(zr)?zr[0]:zr;Mr=Ur.inlineSize,Fr=Ur.blockSize}else Mr=_r.offsetWidth,Fr=_r.offsetHeight;Rr({width:Mr,height:Fr})});return Ar.observe(_r,{box:"border-box"}),()=>Ar.unobserve(_r)}else Rr(void 0)},[_r]),Tr}function $010c2913dbd2fe3d$export$5cae361ad82dce8b(_r){const Tr=reactExports.useRef({value:_r,previous:_r});return reactExports.useMemo(()=>(Tr.current.value!==_r&&(Tr.current.previous=Tr.current.value,Tr.current.value=_r),Tr.current.previous),[_r])}const $ce77a8961b41be9e$var$RADIO_NAME="Radio",[$ce77a8961b41be9e$var$createRadioContext,$ce77a8961b41be9e$export$67d2296460f1b002]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($ce77a8961b41be9e$var$RADIO_NAME),[$ce77a8961b41be9e$var$RadioProvider,$ce77a8961b41be9e$var$useRadioContext]=$ce77a8961b41be9e$var$createRadioContext($ce77a8961b41be9e$var$RADIO_NAME),$ce77a8961b41be9e$export$d7b12c4107be0d61=reactExports.forwardRef((_r,Tr)=>{const{__scopeRadio:Rr,name:Ar,checked:Pr=!1,required:Lr,disabled:Mr,value:Fr="on",onCheck:zr,...Ur}=_r,[Vr,Nr]=reactExports.useState(null),Dr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Wr=>Nr(Wr)),jr=reactExports.useRef(!1),Gr=Vr?!!Vr.closest("form"):!0;return reactExports.createElement($ce77a8961b41be9e$var$RadioProvider,{scope:Rr,checked:Pr,disabled:Mr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"radio","aria-checked":Pr,"data-state":$ce77a8961b41be9e$var$getState(Pr),"data-disabled":Mr?"":void 0,disabled:Mr,value:Fr},Ur,{ref:Dr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onClick,Wr=>{Pr||zr==null||zr(),Gr&&(jr.current=Wr.isPropagationStopped(),jr.current||Wr.stopPropagation())})})),Gr&&reactExports.createElement($ce77a8961b41be9e$var$BubbleInput,{control:Vr,bubbles:!jr.current,name:Ar,value:Fr,checked:Pr,required:Lr,disabled:Mr,style:{transform:"translateX(-100%)"}}))}),$ce77a8961b41be9e$var$BubbleInput=_r=>{const{control:Tr,checked:Rr,bubbles:Ar=!0,...Pr}=_r,Lr=reactExports.useRef(null),Mr=$010c2913dbd2fe3d$export$5cae361ad82dce8b(Rr),Fr=$db6c3485150b8e66$export$1ab7ae714698c4b8(Tr);return reactExports.useEffect(()=>{const zr=Lr.current,Ur=window.HTMLInputElement.prototype,Nr=Object.getOwnPropertyDescriptor(Ur,"checked").set;if(Mr!==Rr&&Nr){const Dr=new Event("click",{bubbles:Ar});Nr.call(zr,Rr),zr.dispatchEvent(Dr)}},[Mr,Rr,Ar]),reactExports.createElement("input",_extends$1({type:"radio","aria-hidden":!0,defaultChecked:Rr},Pr,{tabIndex:-1,ref:Lr,style:{..._r.style,...Fr,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function $ce77a8961b41be9e$var$getState(_r){return _r?"checked":"unchecked"}const $f99a8c78507165f7$var$ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$f99a8c78507165f7$var$RADIO_GROUP_NAME="RadioGroup",[$f99a8c78507165f7$var$createRadioGroupContext,$f99a8c78507165f7$export$c547093f11b76da2]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($f99a8c78507165f7$var$RADIO_GROUP_NAME,[$d7bdfb9eb0fdf311$export$c7109489551a4f4,$ce77a8961b41be9e$export$67d2296460f1b002]),$f99a8c78507165f7$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),$f99a8c78507165f7$var$useRadioScope=$ce77a8961b41be9e$export$67d2296460f1b002(),[$f99a8c78507165f7$var$RadioGroupProvider,$f99a8c78507165f7$var$useRadioGroupContext]=$f99a8c78507165f7$var$createRadioGroupContext($f99a8c78507165f7$var$RADIO_GROUP_NAME),$f99a8c78507165f7$export$a98f0dcb43a68a25=reactExports.forwardRef((_r,Tr)=>{const{__scopeRadioGroup:Rr,name:Ar,defaultValue:Pr,value:Lr,required:Mr=!1,disabled:Fr=!1,orientation:zr,dir:Ur,loop:Vr=!0,onValueChange:Nr,...Dr}=_r,jr=$f99a8c78507165f7$var$useRovingFocusGroupScope(Rr),Gr=$f631663db3294ace$export$b39126d51d94e6f3(Ur),[Wr,qr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Lr,defaultProp:Pr,onChange:Nr});return reactExports.createElement($f99a8c78507165f7$var$RadioGroupProvider,{scope:Rr,name:Ar,required:Mr,disabled:Fr,value:Wr,onValueChange:qr},reactExports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends$1({asChild:!0},jr,{orientation:zr,dir:Gr,loop:Vr}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"radiogroup","aria-required":Mr,"aria-orientation":zr,"data-disabled":Fr?"":void 0,dir:Gr},Dr,{ref:Tr}))))}),$f99a8c78507165f7$var$ITEM_NAME="RadioGroupItem",$f99a8c78507165f7$export$9f866c100ef519e4=reactExports.forwardRef((_r,Tr)=>{const{__scopeRadioGroup:Rr,disabled:Ar,...Pr}=_r,Lr=$f99a8c78507165f7$var$useRadioGroupContext($f99a8c78507165f7$var$ITEM_NAME,Rr),Mr=Lr.disabled||Ar,Fr=$f99a8c78507165f7$var$useRovingFocusGroupScope(Rr),zr=$f99a8c78507165f7$var$useRadioScope(Rr),Ur=reactExports.useRef(null),Vr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Ur),Nr=Lr.value===Pr.value,Dr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const jr=Wr=>{$f99a8c78507165f7$var$ARROW_KEYS.includes(Wr.key)&&(Dr.current=!0)},Gr=()=>Dr.current=!1;return document.addEventListener("keydown",jr),document.addEventListener("keyup",Gr),()=>{document.removeEventListener("keydown",jr),document.removeEventListener("keyup",Gr)}},[]),reactExports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends$1({asChild:!0},Fr,{focusable:!Mr,active:Nr}),reactExports.createElement($ce77a8961b41be9e$export$d7b12c4107be0d61,_extends$1({disabled:Mr,required:Lr.required,checked:Nr},zr,Pr,{name:Lr.name,ref:Vr,onCheck:()=>Lr.onValueChange(Pr.value),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(jr=>{jr.key==="Enter"&&jr.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Pr.onFocus,()=>{var jr;Dr.current&&((jr=Ur.current)===null||jr===void 0||jr.click())})})))}),$f99a8c78507165f7$export$be92b6f5f03c0fe9=$f99a8c78507165f7$export$a98f0dcb43a68a25,$f99a8c78507165f7$export$6d08773d2e66f8f2=$f99a8c78507165f7$export$9f866c100ef519e4;function ParserError(_r,Tr){this.message=_r,this.error=Tr}ParserError.prototype=Object.create(Error.prototype);const TIMESTAMP_REGEXP=/([0-9]+)?:?([0-9]{2}):([0-9]{2}\.[0-9]{2,3})/;function parse$4(_r,Tr){Tr||(Tr={});const{meta:Rr=!1,strict:Ar=!0}=Tr;if(typeof _r!="string")throw new ParserError("Input must be a string");_r=_r.trim(),_r=_r.replace(/\r\n/g,`
`),_r=_r.replace(/\r/g,`
`);const Pr=_r.split(`

`),Lr=Pr.shift();if(!Lr.startsWith("WEBVTT"))throw new ParserError('Must start with "WEBVTT"');const Mr=Lr.split(`
`),Fr=Mr[0].replace("WEBVTT","");if(Fr.length>0&&Fr[0]!==" "&&Fr[0]!=="	")throw new ParserError("Header comment must start with space or tab");if(Pr.length===0&&Mr.length===1)return{valid:!0,strict:Ar,cues:[],errors:[]};if(!Rr&&Mr.length>1&&Mr[1]!=="")throw new ParserError("Missing blank line after signature");const{cues:zr,errors:Ur}=parseCues(Pr,Ar);if(Ar&&Ur.length>0)throw Ur[0];const Vr=Rr?parseMeta(Mr):null,Nr={valid:Ur.length===0,strict:Ar,cues:zr,errors:Ur};return Rr&&(Nr.meta=Vr),Nr}function parseMeta(_r){const Tr={};return _r.slice(1).forEach(Rr=>{const Ar=Rr.indexOf(":"),Pr=Rr.slice(0,Ar).trim(),Lr=Rr.slice(Ar+1).trim();Tr[Pr]=Lr}),Object.keys(Tr).length>0?Tr:null}function parseCues(_r,Tr){const Rr=[];return{cues:_r.map((Pr,Lr)=>{try{return parseCue(Pr,Lr,Tr)}catch(Mr){return Rr.push(Mr),null}}).filter(Boolean),errors:Rr}}function parseCue(_r,Tr,Rr){let Ar="",Pr=0,Lr=.01,Mr="",Fr="";const zr=_r.split(`
`).filter(Boolean);if(zr.length>0&&zr[0].trim().startsWith("NOTE"))return null;if(zr.length===1&&!zr[0].includes("-->"))throw new ParserError(`Cue identifier cannot be standalone (cue #${Tr})`);if(zr.length>1&&!(zr[0].includes("-->")||zr[1].includes("-->"))){const Vr=`Cue identifier needs to be followed by timestamp (cue #${Tr})`;throw new ParserError(Vr)}zr.length>1&&zr[1].includes("-->")&&(Ar=zr.shift());const Ur=typeof zr[0]=="string"&&zr[0].split(" --> ");if(Ur.length!==2||!validTimestamp(Ur[0])||!validTimestamp(Ur[1]))throw new ParserError(`Invalid cue timestamp (cue #${Tr})`);if(Pr=parseTimestamp(Ur[0]),Lr=parseTimestamp(Ur[1]),Rr){if(Pr>Lr)throw new ParserError(`Start timestamp greater than end (cue #${Tr})`);if(Lr<=Pr)throw new ParserError(`End must be greater than start (cue #${Tr})`)}if(!Rr&&Lr<Pr)throw new ParserError(`End must be greater or equal to start when not strict (cue #${Tr})`);return Fr=Ur[1].replace(TIMESTAMP_REGEXP,"").trim(),zr.shift(),Mr=zr.join(`
`),Mr?{identifier:Ar,start:Pr,end:Lr,text:Mr,styles:Fr}:!1}function validTimestamp(_r){return TIMESTAMP_REGEXP.test(_r)}function parseTimestamp(_r){const Tr=_r.match(TIMESTAMP_REGEXP);let Rr=parseFloat(Tr[1]||0)*60*60;return Rr+=parseFloat(Tr[2])*60,Rr+=parseFloat(Tr[3]),Rr}var parser={ParserError,parse:parse$4};function CompilerError(_r,Tr){this.message=_r,this.error=Tr}CompilerError.prototype=Object.create(Error.prototype);function compile$1(_r){if(!_r)throw new CompilerError("Input must be non-null");if(typeof _r!="object")throw new CompilerError("Input must be an object");if(Array.isArray(_r))throw new CompilerError("Input cannot be array");if(!_r.valid)throw new CompilerError("Input must be valid");let Tr=`WEBVTT
`;if(_r.meta){if(typeof _r.meta!="object"||Array.isArray(_r.meta))throw new CompilerError("Metadata must be an object");Object.entries(_r.meta).forEach(Ar=>{if(typeof Ar[1]!="string")throw new CompilerError(`Metadata value for "${Ar[0]}" must be string`);Tr+=`${Ar[0]}: ${Ar[1]}
`})}let Rr=null;return _r.cues.forEach((Ar,Pr)=>{if(Rr&&Rr>Ar.start)throw new CompilerError(`Cue number ${Pr} is not in chronological order`);Rr=Ar.start,Tr+=`
`,Tr+=compileCue(Ar),Tr+=`
`}),Tr}function compileCue(_r){if(typeof _r!="object")throw new CompilerError("Cue malformed: not of type object");if(typeof _r.identifier!="string"&&typeof _r.identifier!="number"&&_r.identifier!==null)throw new CompilerError(`Cue malformed: identifier value is not a string.
    ${JSON.stringify(_r)}`);if(isNaN(_r.start))throw new CompilerError(`Cue malformed: null start value.
    ${JSON.stringify(_r)}`);if(isNaN(_r.end))throw new CompilerError(`Cue malformed: null end value.
    ${JSON.stringify(_r)}`);if(_r.start>=_r.end)throw new CompilerError(`Cue malformed: start timestamp greater than end
    ${JSON.stringify(_r)}`);if(typeof _r.text!="string")throw new CompilerError(`Cue malformed: null text value.
    ${JSON.stringify(_r)}`);if(typeof _r.styles!="string")throw new CompilerError(`Cue malformed: null styles value.
    ${JSON.stringify(_r)}`);let Tr="";_r.identifier.length>0&&(Tr+=`${_r.identifier}
`);const Rr=convertTimestamp(_r.start),Ar=convertTimestamp(_r.end);return Tr+=`${Rr} --> ${Ar}`,Tr+=_r.styles?` ${_r.styles}`:"",Tr+=`
${_r.text}`,Tr}function convertTimestamp(_r){const Tr=pad$1(calculateHours(_r),2),Rr=pad$1(calculateMinutes(_r),2),Ar=pad$1(calculateSeconds(_r),2),Pr=pad$1(calculateMs(_r),3);return`${Tr}:${Rr}:${Ar}.${Pr}`}function pad$1(_r,Tr){let Rr=`${_r}`;for(;Rr.length<Tr;)Rr=`0${Rr}`;return Rr}function calculateHours(_r){return Math.floor(_r/60/60)}function calculateMinutes(_r){return Math.floor(_r/60)%60}function calculateSeconds(_r){return Math.floor(_r%60)}function calculateMs(_r){return Math.floor((_r%1).toFixed(4)*1e3)}var compiler={CompilerError,compile:compile$1};const parse$3=parser.parse;function segment$2(_r,Tr){Tr=Tr||10;const Rr=parse$3(_r),Ar=[];let Pr=[],Lr=null,Mr=0,Fr=0;return Rr.cues.forEach((zr,Ur)=>{const Vr=Ur===0,Nr=Ur===Rr.cues.length-1,Dr=zr.start,jr=zr.end,Gr=Nr?1/0:Rr.cues[Ur+1].start,Wr=Vr?jr:jr-Dr,qr=Vr?0:Dr-Rr.cues[Ur-1].end;Mr=Mr+Wr+qr,`${Ur}`,Ar.length+1,Lr&&(Pr.push(Lr),Mr+=Lr.end-Fr,Lr=null),Pr.push(zr);let Kr=Gr-jr<Tr&&qr<Tr&&Mr>Tr;if(shouldSegment(Fr,Tr,Gr,qr)){const Xr=segmentDuration(Nr,jr,Tr,Mr,Fr);Ar.push({duration:Xr,cues:Pr}),Fr+=Xr,Mr=0,Pr=[]}else Kr=!1;Kr&&(Lr=zr)}),Ar}function shouldSegment(_r,Tr,Rr,Ar){const Pr=alignToSegmentLength(Ar,Tr);return(Ar<=Tr||Pr+_r<Rr)&&Rr-_r>=Tr}function segmentDuration(_r,Tr,Rr,Ar,Pr){let Lr=Rr;return Ar>Rr&&(Lr=alignToSegmentLength(Ar-Rr,Rr)),_r?Lr=parseFloat((Tr-Pr).toFixed(2)):Lr=Math.round(Lr),Lr}function alignToSegmentLength(_r,Tr){return _r+=Tr-_r%Tr,_r}function debug(_r){}var segmenter={segment:segment$2};const segment$1=segmenter.segment;function hlsSegment(_r,Tr,Rr){typeof Rr>"u"&&(Rr="900000");const Ar=segment$1(_r,Tr),Pr=[];return Ar.forEach((Lr,Mr)=>{const Fr=`WEBVTT
X-TIMESTAMP-MAP=MPEGTS:${Rr},LOCAL:00:00:00.000

${printableCues(Lr.cues)}
`,zr=generateSegmentFilename(Mr);Pr.push({filename:zr,content:Fr})}),Pr}function hlsSegmentPlaylist(_r,Tr){const Rr=segment$1(_r,Tr),Ar=printableSegments(Rr);return`#EXTM3U
#EXT-X-TARGETDURATION:${Math.round(findLongestSegment(Rr))}
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-PLAYLIST-TYPE:VOD
${Ar}
#EXT-X-ENDLIST
`}function pad(_r,Tr){return`${"0".repeat(Math.max(0,Tr-_r.toString().length))}${_r}`}function generateSegmentFilename(_r){return`${_r}.vtt`}function printableSegments(_r){const Tr=[];return _r.forEach((Rr,Ar)=>{Tr.push(`#EXTINF:${Rr.duration.toFixed(5)},
${generateSegmentFilename(Ar)}`)}),Tr.join(`
`)}function findLongestSegment(_r){let Tr=0;return _r.forEach(Rr=>{Rr.duration>Tr&&(Tr=Rr.duration)}),Tr}function printableCues(_r){const Tr=[];return _r.forEach(Rr=>{Tr.push(printableCue(Rr))}),Tr.join(`

`)}function printableCue(_r){const Tr=[];_r.identifier&&Tr.push(_r.identifier);const Rr=printableTimestamp(_r.start),Ar=printableTimestamp(_r.end),Pr=_r.styles?`${_r.styles}`:"";return Tr.push(`${Rr} --> ${Ar} ${Pr}`),Tr.push(_r.text),Tr.join(`
`)}function printableTimestamp(_r){const Tr=(_r%1).toFixed(3);_r=Math.round(_r-Tr);const Rr=Math.floor(_r/3600),Ar=Math.floor((_r-Rr*3600)/60),Pr=_r-Rr*3600-Ar*60;return`${`${pad(Rr,2)}:`}${pad(Ar,2)}:${pad(Pr,2)}.${pad(Tr*1e3,3)}`}var hls$1={hlsSegment,hlsSegmentPlaylist};const parse$2=parser.parse,compile=compiler.compile,segment=segmenter.segment,hls=hls$1;var nodeWebvtt={parse:parse$2,compile,segment,hls};function $addc16e1bbe58fd0$export$3a72a57244d6e765(_r,Tr=globalThis==null?void 0:globalThis.document){const Rr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_r);reactExports.useEffect(()=>{const Ar=Pr=>{Pr.key==="Escape"&&Rr(Pr)};return Tr.addEventListener("keydown",Ar),()=>Tr.removeEventListener("keydown",Ar)},[Rr,Tr])}const $5cb92bef7577960e$var$CONTEXT_UPDATE="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=reactExports.forwardRef((_r,Tr)=>{var Rr;const{disableOutsidePointerEvents:Ar=!1,onEscapeKeyDown:Pr,onPointerDownOutside:Lr,onFocusOutside:Mr,onInteractOutside:Fr,onDismiss:zr,...Ur}=_r,Vr=reactExports.useContext($5cb92bef7577960e$var$DismissableLayerContext),[Nr,Dr]=reactExports.useState(null),jr=(Rr=Nr==null?void 0:Nr.ownerDocument)!==null&&Rr!==void 0?Rr:globalThis==null?void 0:globalThis.document,[,Gr]=reactExports.useState({}),Wr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,rs=>Dr(rs)),qr=Array.from(Vr.layers),[Kr]=[...Vr.layersWithOutsidePointerEventsDisabled].slice(-1),Xr=qr.indexOf(Kr),Zr=Nr?qr.indexOf(Nr):-1,Jr=Vr.layersWithOutsidePointerEventsDisabled.size>0,_i=Zr>=Xr,es=$5cb92bef7577960e$var$usePointerDownOutside(rs=>{const ns=rs.target,as=[...Vr.branches].some(ls=>ls.contains(ns));!_i||as||(Lr==null||Lr(rs),Fr==null||Fr(rs),rs.defaultPrevented||zr==null||zr())},jr),ts=$5cb92bef7577960e$var$useFocusOutside(rs=>{const ns=rs.target;[...Vr.branches].some(ls=>ls.contains(ns))||(Mr==null||Mr(rs),Fr==null||Fr(rs),rs.defaultPrevented||zr==null||zr())},jr);return $addc16e1bbe58fd0$export$3a72a57244d6e765(rs=>{Zr===Vr.layers.size-1&&(Pr==null||Pr(rs),!rs.defaultPrevented&&zr&&(rs.preventDefault(),zr()))},jr),reactExports.useEffect(()=>{if(Nr)return Ar&&(Vr.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents=jr.body.style.pointerEvents,jr.body.style.pointerEvents="none"),Vr.layersWithOutsidePointerEventsDisabled.add(Nr)),Vr.layers.add(Nr),$5cb92bef7577960e$var$dispatchUpdate(),()=>{Ar&&Vr.layersWithOutsidePointerEventsDisabled.size===1&&(jr.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}},[Nr,jr,Ar,Vr]),reactExports.useEffect(()=>()=>{Nr&&(Vr.layers.delete(Nr),Vr.layersWithOutsidePointerEventsDisabled.delete(Nr),$5cb92bef7577960e$var$dispatchUpdate())},[Nr,Vr]),reactExports.useEffect(()=>{const rs=()=>Gr({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,rs),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,rs)},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},Ur,{ref:Wr,style:{pointerEvents:Jr?_i?"auto":"none":void 0,..._r.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onFocusCapture,ts.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onBlurCapture,ts.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onPointerDownCapture,es.onPointerDownCapture)}))});function $5cb92bef7577960e$var$usePointerDownOutside(_r,Tr=globalThis==null?void 0:globalThis.document){const Rr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_r),Ar=reactExports.useRef(!1),Pr=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const Lr=Fr=>{if(Fr.target&&!Ar.current){let Vr=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE,Rr,Ur,{discrete:!0})};var zr=Vr;const Ur={originalEvent:Fr};Fr.pointerType==="touch"?(Tr.removeEventListener("click",Pr.current),Pr.current=Vr,Tr.addEventListener("click",Pr.current,{once:!0})):Vr()}Ar.current=!1},Mr=window.setTimeout(()=>{Tr.addEventListener("pointerdown",Lr)},0);return()=>{window.clearTimeout(Mr),Tr.removeEventListener("pointerdown",Lr),Tr.removeEventListener("click",Pr.current)}},[Tr,Rr]),{onPointerDownCapture:()=>Ar.current=!0}}function $5cb92bef7577960e$var$useFocusOutside(_r,Tr=globalThis==null?void 0:globalThis.document){const Rr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_r),Ar=reactExports.useRef(!1);return reactExports.useEffect(()=>{const Pr=Lr=>{Lr.target&&!Ar.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$FOCUS_OUTSIDE,Rr,{originalEvent:Lr},{discrete:!1})};return Tr.addEventListener("focusin",Pr),()=>Tr.removeEventListener("focusin",Pr)},[Tr,Rr]),{onFocusCapture:()=>Ar.current=!0,onBlurCapture:()=>Ar.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate(){const _r=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE);document.dispatchEvent(_r)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(_r,Tr,Rr,{discrete:Ar}){const Pr=Rr.originalEvent.target,Lr=new CustomEvent(_r,{bubbles:!1,cancelable:!0,detail:Rr});Tr&&Pr.addEventListener(_r,Tr,{once:!0}),Ar?$8927f6f2acc4f386$export$6d1a0317bde7de7f(Pr,Lr):Pr.dispatchEvent(Lr)}let $3db38b7d1fb3fe6a$var$count=0;function $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(){reactExports.useEffect(()=>{var _r,Tr;const Rr=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(_r=Rr[0])!==null&&_r!==void 0?_r:$3db38b7d1fb3fe6a$var$createFocusGuard()),document.body.insertAdjacentElement("beforeend",(Tr=Rr[1])!==null&&Tr!==void 0?Tr:$3db38b7d1fb3fe6a$var$createFocusGuard()),$3db38b7d1fb3fe6a$var$count++,()=>{$3db38b7d1fb3fe6a$var$count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(Ar=>Ar.remove()),$3db38b7d1fb3fe6a$var$count--}},[])}function $3db38b7d1fb3fe6a$var$createFocusGuard(){const _r=document.createElement("span");return _r.setAttribute("data-radix-focus-guard",""),_r.tabIndex=0,_r.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",_r}const $d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6=reactExports.forwardRef((_r,Tr)=>{const{loop:Rr=!1,trapped:Ar=!1,onMountAutoFocus:Pr,onUnmountAutoFocus:Lr,...Mr}=_r,[Fr,zr]=reactExports.useState(null),Ur=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Pr),Vr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Lr),Nr=reactExports.useRef(null),Dr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Wr=>zr(Wr)),jr=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(Ar){let Xr=function(es){if(jr.paused||!Fr)return;const ts=es.target;Fr.contains(ts)?Nr.current=ts:$d3863c46a17e8a28$var$focus(Nr.current,{select:!0})},Zr=function(es){if(jr.paused||!Fr)return;const ts=es.relatedTarget;ts!==null&&(Fr.contains(ts)||$d3863c46a17e8a28$var$focus(Nr.current,{select:!0}))},Jr=function(es){const ts=document.activeElement;for(const rs of es)rs.removedNodes.length>0&&(Fr!=null&&Fr.contains(ts)||$d3863c46a17e8a28$var$focus(Fr))};var Wr=Xr,qr=Zr,Kr=Jr;document.addEventListener("focusin",Xr),document.addEventListener("focusout",Zr);const _i=new MutationObserver(Jr);return Fr&&_i.observe(Fr,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",Xr),document.removeEventListener("focusout",Zr),_i.disconnect()}}},[Ar,Fr,jr.paused]),reactExports.useEffect(()=>{if(Fr){$d3863c46a17e8a28$var$focusScopesStack.add(jr);const Wr=document.activeElement;if(!Fr.contains(Wr)){const Kr=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);Fr.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,Ur),Fr.dispatchEvent(Kr),Kr.defaultPrevented||($d3863c46a17e8a28$var$focusFirst($d3863c46a17e8a28$var$removeLinks($d3863c46a17e8a28$var$getTabbableCandidates(Fr)),{select:!0}),document.activeElement===Wr&&$d3863c46a17e8a28$var$focus(Fr))}return()=>{Fr.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,Ur),setTimeout(()=>{const Kr=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);Fr.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,Vr),Fr.dispatchEvent(Kr),Kr.defaultPrevented||$d3863c46a17e8a28$var$focus(Wr??document.body,{select:!0}),Fr.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,Vr),$d3863c46a17e8a28$var$focusScopesStack.remove(jr)},0)}}},[Fr,Ur,Vr,jr]);const Gr=reactExports.useCallback(Wr=>{if(!Rr&&!Ar||jr.paused)return;const qr=Wr.key==="Tab"&&!Wr.altKey&&!Wr.ctrlKey&&!Wr.metaKey,Kr=document.activeElement;if(qr&&Kr){const Xr=Wr.currentTarget,[Zr,Jr]=$d3863c46a17e8a28$var$getTabbableEdges(Xr);Zr&&Jr?!Wr.shiftKey&&Kr===Jr?(Wr.preventDefault(),Rr&&$d3863c46a17e8a28$var$focus(Zr,{select:!0})):Wr.shiftKey&&Kr===Zr&&(Wr.preventDefault(),Rr&&$d3863c46a17e8a28$var$focus(Jr,{select:!0})):Kr===Xr&&Wr.preventDefault()}},[Rr,Ar,jr.paused]);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({tabIndex:-1},Mr,{ref:Dr,onKeyDown:Gr}))});function $d3863c46a17e8a28$var$focusFirst(_r,{select:Tr=!1}={}){const Rr=document.activeElement;for(const Ar of _r)if($d3863c46a17e8a28$var$focus(Ar,{select:Tr}),document.activeElement!==Rr)return}function $d3863c46a17e8a28$var$getTabbableEdges(_r){const Tr=$d3863c46a17e8a28$var$getTabbableCandidates(_r),Rr=$d3863c46a17e8a28$var$findVisible(Tr,_r),Ar=$d3863c46a17e8a28$var$findVisible(Tr.reverse(),_r);return[Rr,Ar]}function $d3863c46a17e8a28$var$getTabbableCandidates(_r){const Tr=[],Rr=document.createTreeWalker(_r,NodeFilter.SHOW_ELEMENT,{acceptNode:Ar=>{const Pr=Ar.tagName==="INPUT"&&Ar.type==="hidden";return Ar.disabled||Ar.hidden||Pr?NodeFilter.FILTER_SKIP:Ar.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;Rr.nextNode();)Tr.push(Rr.currentNode);return Tr}function $d3863c46a17e8a28$var$findVisible(_r,Tr){for(const Rr of _r)if(!$d3863c46a17e8a28$var$isHidden(Rr,{upTo:Tr}))return Rr}function $d3863c46a17e8a28$var$isHidden(_r,{upTo:Tr}){if(getComputedStyle(_r).visibility==="hidden")return!0;for(;_r;){if(Tr!==void 0&&_r===Tr)return!1;if(getComputedStyle(_r).display==="none")return!0;_r=_r.parentElement}return!1}function $d3863c46a17e8a28$var$isSelectableInput(_r){return _r instanceof HTMLInputElement&&"select"in _r}function $d3863c46a17e8a28$var$focus(_r,{select:Tr=!1}={}){if(_r&&_r.focus){const Rr=document.activeElement;_r.focus({preventScroll:!0}),_r!==Rr&&$d3863c46a17e8a28$var$isSelectableInput(_r)&&Tr&&_r.select()}}const $d3863c46a17e8a28$var$focusScopesStack=$d3863c46a17e8a28$var$createFocusScopesStack();function $d3863c46a17e8a28$var$createFocusScopesStack(){let _r=[];return{add(Tr){const Rr=_r[0];Tr!==Rr&&(Rr==null||Rr.pause()),_r=$d3863c46a17e8a28$var$arrayRemove(_r,Tr),_r.unshift(Tr)},remove(Tr){var Rr;_r=$d3863c46a17e8a28$var$arrayRemove(_r,Tr),(Rr=_r[0])===null||Rr===void 0||Rr.resume()}}}function $d3863c46a17e8a28$var$arrayRemove(_r,Tr){const Rr=[..._r],Ar=Rr.indexOf(Tr);return Ar!==-1&&Rr.splice(Ar,1),Rr}function $d3863c46a17e8a28$var$removeLinks(_r){return _r.filter(Tr=>Tr.tagName!=="A")}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=_r=>({x:_r,y:_r}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(_r,Tr,Rr){return max(_r,min(Tr,Rr))}function evaluate(_r,Tr){return typeof _r=="function"?_r(Tr):_r}function getSide(_r){return _r.split("-")[0]}function getAlignment(_r){return _r.split("-")[1]}function getOppositeAxis(_r){return _r==="x"?"y":"x"}function getAxisLength(_r){return _r==="y"?"height":"width"}function getSideAxis(_r){return["top","bottom"].includes(getSide(_r))?"y":"x"}function getAlignmentAxis(_r){return getOppositeAxis(getSideAxis(_r))}function getAlignmentSides(_r,Tr,Rr){Rr===void 0&&(Rr=!1);const Ar=getAlignment(_r),Pr=getAlignmentAxis(_r),Lr=getAxisLength(Pr);let Mr=Pr==="x"?Ar===(Rr?"end":"start")?"right":"left":Ar==="start"?"bottom":"top";return Tr.reference[Lr]>Tr.floating[Lr]&&(Mr=getOppositePlacement(Mr)),[Mr,getOppositePlacement(Mr)]}function getExpandedPlacements(_r){const Tr=getOppositePlacement(_r);return[getOppositeAlignmentPlacement(_r),Tr,getOppositeAlignmentPlacement(Tr)]}function getOppositeAlignmentPlacement(_r){return _r.replace(/start|end/g,Tr=>oppositeAlignmentMap[Tr])}function getSideList(_r,Tr,Rr){const Ar=["left","right"],Pr=["right","left"],Lr=["top","bottom"],Mr=["bottom","top"];switch(_r){case"top":case"bottom":return Rr?Tr?Pr:Ar:Tr?Ar:Pr;case"left":case"right":return Tr?Lr:Mr;default:return[]}}function getOppositeAxisPlacements(_r,Tr,Rr,Ar){const Pr=getAlignment(_r);let Lr=getSideList(getSide(_r),Rr==="start",Ar);return Pr&&(Lr=Lr.map(Mr=>Mr+"-"+Pr),Tr&&(Lr=Lr.concat(Lr.map(getOppositeAlignmentPlacement)))),Lr}function getOppositePlacement(_r){return _r.replace(/left|right|bottom|top/g,Tr=>oppositeSideMap[Tr])}function expandPaddingObject(_r){return{top:0,right:0,bottom:0,left:0,..._r}}function getPaddingObject(_r){return typeof _r!="number"?expandPaddingObject(_r):{top:_r,right:_r,bottom:_r,left:_r}}function rectToClientRect(_r){return{..._r,top:_r.y,left:_r.x,right:_r.x+_r.width,bottom:_r.y+_r.height}}function computeCoordsFromPlacement(_r,Tr,Rr){let{reference:Ar,floating:Pr}=_r;const Lr=getSideAxis(Tr),Mr=getAlignmentAxis(Tr),Fr=getAxisLength(Mr),zr=getSide(Tr),Ur=Lr==="y",Vr=Ar.x+Ar.width/2-Pr.width/2,Nr=Ar.y+Ar.height/2-Pr.height/2,Dr=Ar[Fr]/2-Pr[Fr]/2;let jr;switch(zr){case"top":jr={x:Vr,y:Ar.y-Pr.height};break;case"bottom":jr={x:Vr,y:Ar.y+Ar.height};break;case"right":jr={x:Ar.x+Ar.width,y:Nr};break;case"left":jr={x:Ar.x-Pr.width,y:Nr};break;default:jr={x:Ar.x,y:Ar.y}}switch(getAlignment(Tr)){case"start":jr[Mr]-=Dr*(Rr&&Ur?-1:1);break;case"end":jr[Mr]+=Dr*(Rr&&Ur?-1:1);break}return jr}const computePosition$1=async(_r,Tr,Rr)=>{const{placement:Ar="bottom",strategy:Pr="absolute",middleware:Lr=[],platform:Mr}=Rr,Fr=Lr.filter(Boolean),zr=await(Mr.isRTL==null?void 0:Mr.isRTL(Tr));let Ur=await Mr.getElementRects({reference:_r,floating:Tr,strategy:Pr}),{x:Vr,y:Nr}=computeCoordsFromPlacement(Ur,Ar,zr),Dr=Ar,jr={},Gr=0;for(let Wr=0;Wr<Fr.length;Wr++){const{name:qr,fn:Kr}=Fr[Wr],{x:Xr,y:Zr,data:Jr,reset:_i}=await Kr({x:Vr,y:Nr,initialPlacement:Ar,placement:Dr,strategy:Pr,middlewareData:jr,rects:Ur,platform:Mr,elements:{reference:_r,floating:Tr}});if(Vr=Xr??Vr,Nr=Zr??Nr,jr={...jr,[qr]:{...jr[qr],...Jr}},_i&&Gr<=50){Gr++,typeof _i=="object"&&(_i.placement&&(Dr=_i.placement),_i.rects&&(Ur=_i.rects===!0?await Mr.getElementRects({reference:_r,floating:Tr,strategy:Pr}):_i.rects),{x:Vr,y:Nr}=computeCoordsFromPlacement(Ur,Dr,zr)),Wr=-1;continue}}return{x:Vr,y:Nr,placement:Dr,strategy:Pr,middlewareData:jr}};async function detectOverflow(_r,Tr){var Rr;Tr===void 0&&(Tr={});const{x:Ar,y:Pr,platform:Lr,rects:Mr,elements:Fr,strategy:zr}=_r,{boundary:Ur="clippingAncestors",rootBoundary:Vr="viewport",elementContext:Nr="floating",altBoundary:Dr=!1,padding:jr=0}=evaluate(Tr,_r),Gr=getPaddingObject(jr),qr=Fr[Dr?Nr==="floating"?"reference":"floating":Nr],Kr=rectToClientRect(await Lr.getClippingRect({element:(Rr=await(Lr.isElement==null?void 0:Lr.isElement(qr)))==null||Rr?qr:qr.contextElement||await(Lr.getDocumentElement==null?void 0:Lr.getDocumentElement(Fr.floating)),boundary:Ur,rootBoundary:Vr,strategy:zr})),Xr=Nr==="floating"?{...Mr.floating,x:Ar,y:Pr}:Mr.reference,Zr=await(Lr.getOffsetParent==null?void 0:Lr.getOffsetParent(Fr.floating)),Jr=await(Lr.isElement==null?void 0:Lr.isElement(Zr))?await(Lr.getScale==null?void 0:Lr.getScale(Zr))||{x:1,y:1}:{x:1,y:1},_i=rectToClientRect(Lr.convertOffsetParentRelativeRectToViewportRelativeRect?await Lr.convertOffsetParentRelativeRectToViewportRelativeRect({rect:Xr,offsetParent:Zr,strategy:zr}):Xr);return{top:(Kr.top-_i.top+Gr.top)/Jr.y,bottom:(_i.bottom-Kr.bottom+Gr.bottom)/Jr.y,left:(Kr.left-_i.left+Gr.left)/Jr.x,right:(_i.right-Kr.right+Gr.right)/Jr.x}}const arrow$1=_r=>({name:"arrow",options:_r,async fn(Tr){const{x:Rr,y:Ar,placement:Pr,rects:Lr,platform:Mr,elements:Fr,middlewareData:zr}=Tr,{element:Ur,padding:Vr=0}=evaluate(_r,Tr)||{};if(Ur==null)return{};const Nr=getPaddingObject(Vr),Dr={x:Rr,y:Ar},jr=getAlignmentAxis(Pr),Gr=getAxisLength(jr),Wr=await Mr.getDimensions(Ur),qr=jr==="y",Kr=qr?"top":"left",Xr=qr?"bottom":"right",Zr=qr?"clientHeight":"clientWidth",Jr=Lr.reference[Gr]+Lr.reference[jr]-Dr[jr]-Lr.floating[Gr],_i=Dr[jr]-Lr.reference[jr],es=await(Mr.getOffsetParent==null?void 0:Mr.getOffsetParent(Ur));let ts=es?es[Zr]:0;(!ts||!await(Mr.isElement==null?void 0:Mr.isElement(es)))&&(ts=Fr.floating[Zr]||Lr.floating[Gr]);const rs=Jr/2-_i/2,ns=ts/2-Wr[Gr]/2-1,as=min(Nr[Kr],ns),ls=min(Nr[Xr],ns),us=as,xs=ts-Wr[Gr]-ls,Ts=ts/2-Wr[Gr]/2+rs,vs=clamp(us,Ts,xs),gs=!zr.arrow&&getAlignment(Pr)!=null&&Ts!=vs&&Lr.reference[Gr]/2-(Ts<us?as:ls)-Wr[Gr]/2<0,fs=gs?Ts<us?Ts-us:Ts-xs:0;return{[jr]:Dr[jr]+fs,data:{[jr]:vs,centerOffset:Ts-vs-fs,...gs&&{alignmentOffset:fs}},reset:gs}}}),flip=function(_r){return _r===void 0&&(_r={}),{name:"flip",options:_r,async fn(Tr){var Rr,Ar;const{placement:Pr,middlewareData:Lr,rects:Mr,initialPlacement:Fr,platform:zr,elements:Ur}=Tr,{mainAxis:Vr=!0,crossAxis:Nr=!0,fallbackPlacements:Dr,fallbackStrategy:jr="bestFit",fallbackAxisSideDirection:Gr="none",flipAlignment:Wr=!0,...qr}=evaluate(_r,Tr);if((Rr=Lr.arrow)!=null&&Rr.alignmentOffset)return{};const Kr=getSide(Pr),Xr=getSide(Fr)===Fr,Zr=await(zr.isRTL==null?void 0:zr.isRTL(Ur.floating)),Jr=Dr||(Xr||!Wr?[getOppositePlacement(Fr)]:getExpandedPlacements(Fr));!Dr&&Gr!=="none"&&Jr.push(...getOppositeAxisPlacements(Fr,Wr,Gr,Zr));const _i=[Fr,...Jr],es=await detectOverflow(Tr,qr),ts=[];let rs=((Ar=Lr.flip)==null?void 0:Ar.overflows)||[];if(Vr&&ts.push(es[Kr]),Nr){const us=getAlignmentSides(Pr,Mr,Zr);ts.push(es[us[0]],es[us[1]])}if(rs=[...rs,{placement:Pr,overflows:ts}],!ts.every(us=>us<=0)){var ns,as;const us=(((ns=Lr.flip)==null?void 0:ns.index)||0)+1,xs=_i[us];if(xs)return{data:{index:us,overflows:rs},reset:{placement:xs}};let Ts=(as=rs.filter(vs=>vs.overflows[0]<=0).sort((vs,gs)=>vs.overflows[1]-gs.overflows[1])[0])==null?void 0:as.placement;if(!Ts)switch(jr){case"bestFit":{var ls;const vs=(ls=rs.map(gs=>[gs.placement,gs.overflows.filter(fs=>fs>0).reduce((fs,ys)=>fs+ys,0)]).sort((gs,fs)=>gs[1]-fs[1])[0])==null?void 0:ls[0];vs&&(Ts=vs);break}case"initialPlacement":Ts=Fr;break}if(Pr!==Ts)return{reset:{placement:Ts}}}return{}}}};function getSideOffsets(_r,Tr){return{top:_r.top-Tr.height,right:_r.right-Tr.width,bottom:_r.bottom-Tr.height,left:_r.left-Tr.width}}function isAnySideFullyClipped(_r){return sides.some(Tr=>_r[Tr]>=0)}const hide=function(_r){return _r===void 0&&(_r={}),{name:"hide",options:_r,async fn(Tr){const{rects:Rr}=Tr,{strategy:Ar="referenceHidden",...Pr}=evaluate(_r,Tr);switch(Ar){case"referenceHidden":{const Lr=await detectOverflow(Tr,{...Pr,elementContext:"reference"}),Mr=getSideOffsets(Lr,Rr.reference);return{data:{referenceHiddenOffsets:Mr,referenceHidden:isAnySideFullyClipped(Mr)}}}case"escaped":{const Lr=await detectOverflow(Tr,{...Pr,altBoundary:!0}),Mr=getSideOffsets(Lr,Rr.floating);return{data:{escapedOffsets:Mr,escaped:isAnySideFullyClipped(Mr)}}}default:return{}}}}};async function convertValueToCoords(_r,Tr){const{placement:Rr,platform:Ar,elements:Pr}=_r,Lr=await(Ar.isRTL==null?void 0:Ar.isRTL(Pr.floating)),Mr=getSide(Rr),Fr=getAlignment(Rr),zr=getSideAxis(Rr)==="y",Ur=["left","top"].includes(Mr)?-1:1,Vr=Lr&&zr?-1:1,Nr=evaluate(Tr,_r);let{mainAxis:Dr,crossAxis:jr,alignmentAxis:Gr}=typeof Nr=="number"?{mainAxis:Nr,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...Nr};return Fr&&typeof Gr=="number"&&(jr=Fr==="end"?Gr*-1:Gr),zr?{x:jr*Vr,y:Dr*Ur}:{x:Dr*Ur,y:jr*Vr}}const offset=function(_r){return _r===void 0&&(_r=0),{name:"offset",options:_r,async fn(Tr){const{x:Rr,y:Ar}=Tr,Pr=await convertValueToCoords(Tr,_r);return{x:Rr+Pr.x,y:Ar+Pr.y,data:Pr}}}},shift=function(_r){return _r===void 0&&(_r={}),{name:"shift",options:_r,async fn(Tr){const{x:Rr,y:Ar,placement:Pr}=Tr,{mainAxis:Lr=!0,crossAxis:Mr=!1,limiter:Fr={fn:qr=>{let{x:Kr,y:Xr}=qr;return{x:Kr,y:Xr}}},...zr}=evaluate(_r,Tr),Ur={x:Rr,y:Ar},Vr=await detectOverflow(Tr,zr),Nr=getSideAxis(getSide(Pr)),Dr=getOppositeAxis(Nr);let jr=Ur[Dr],Gr=Ur[Nr];if(Lr){const qr=Dr==="y"?"top":"left",Kr=Dr==="y"?"bottom":"right",Xr=jr+Vr[qr],Zr=jr-Vr[Kr];jr=clamp(Xr,jr,Zr)}if(Mr){const qr=Nr==="y"?"top":"left",Kr=Nr==="y"?"bottom":"right",Xr=Gr+Vr[qr],Zr=Gr-Vr[Kr];Gr=clamp(Xr,Gr,Zr)}const Wr=Fr.fn({...Tr,[Dr]:jr,[Nr]:Gr});return{...Wr,data:{x:Wr.x-Rr,y:Wr.y-Ar}}}}},limitShift=function(_r){return _r===void 0&&(_r={}),{options:_r,fn(Tr){const{x:Rr,y:Ar,placement:Pr,rects:Lr,middlewareData:Mr}=Tr,{offset:Fr=0,mainAxis:zr=!0,crossAxis:Ur=!0}=evaluate(_r,Tr),Vr={x:Rr,y:Ar},Nr=getSideAxis(Pr),Dr=getOppositeAxis(Nr);let jr=Vr[Dr],Gr=Vr[Nr];const Wr=evaluate(Fr,Tr),qr=typeof Wr=="number"?{mainAxis:Wr,crossAxis:0}:{mainAxis:0,crossAxis:0,...Wr};if(zr){const Zr=Dr==="y"?"height":"width",Jr=Lr.reference[Dr]-Lr.floating[Zr]+qr.mainAxis,_i=Lr.reference[Dr]+Lr.reference[Zr]-qr.mainAxis;jr<Jr?jr=Jr:jr>_i&&(jr=_i)}if(Ur){var Kr,Xr;const Zr=Dr==="y"?"width":"height",Jr=["top","left"].includes(getSide(Pr)),_i=Lr.reference[Nr]-Lr.floating[Zr]+(Jr&&((Kr=Mr.offset)==null?void 0:Kr[Nr])||0)+(Jr?0:qr.crossAxis),es=Lr.reference[Nr]+Lr.reference[Zr]+(Jr?0:((Xr=Mr.offset)==null?void 0:Xr[Nr])||0)-(Jr?qr.crossAxis:0);Gr<_i?Gr=_i:Gr>es&&(Gr=es)}return{[Dr]:jr,[Nr]:Gr}}}},size=function(_r){return _r===void 0&&(_r={}),{name:"size",options:_r,async fn(Tr){const{placement:Rr,rects:Ar,platform:Pr,elements:Lr}=Tr,{apply:Mr=()=>{},...Fr}=evaluate(_r,Tr),zr=await detectOverflow(Tr,Fr),Ur=getSide(Rr),Vr=getAlignment(Rr),Nr=getSideAxis(Rr)==="y",{width:Dr,height:jr}=Ar.floating;let Gr,Wr;Ur==="top"||Ur==="bottom"?(Gr=Ur,Wr=Vr===(await(Pr.isRTL==null?void 0:Pr.isRTL(Lr.floating))?"start":"end")?"left":"right"):(Wr=Ur,Gr=Vr==="end"?"top":"bottom");const qr=jr-zr[Gr],Kr=Dr-zr[Wr],Xr=!Tr.middlewareData.shift;let Zr=qr,Jr=Kr;if(Nr){const es=Dr-zr.left-zr.right;Jr=Vr||Xr?min(Kr,es):es}else{const es=jr-zr.top-zr.bottom;Zr=Vr||Xr?min(qr,es):es}if(Xr&&!Vr){const es=max(zr.left,0),ts=max(zr.right,0),rs=max(zr.top,0),ns=max(zr.bottom,0);Nr?Jr=Dr-2*(es!==0||ts!==0?es+ts:max(zr.left,zr.right)):Zr=jr-2*(rs!==0||ns!==0?rs+ns:max(zr.top,zr.bottom))}await Mr({...Tr,availableWidth:Jr,availableHeight:Zr});const _i=await Pr.getDimensions(Lr.floating);return Dr!==_i.width||jr!==_i.height?{reset:{rects:!0}}:{}}}};function getNodeName(_r){return isNode(_r)?(_r.nodeName||"").toLowerCase():"#document"}function getWindow(_r){var Tr;return(_r==null||(Tr=_r.ownerDocument)==null?void 0:Tr.defaultView)||window}function getDocumentElement(_r){var Tr;return(Tr=(isNode(_r)?_r.ownerDocument:_r.document)||window.document)==null?void 0:Tr.documentElement}function isNode(_r){return _r instanceof Node||_r instanceof getWindow(_r).Node}function isElement(_r){return _r instanceof Element||_r instanceof getWindow(_r).Element}function isHTMLElement(_r){return _r instanceof HTMLElement||_r instanceof getWindow(_r).HTMLElement}function isShadowRoot(_r){return typeof ShadowRoot>"u"?!1:_r instanceof ShadowRoot||_r instanceof getWindow(_r).ShadowRoot}function isOverflowElement(_r){const{overflow:Tr,overflowX:Rr,overflowY:Ar,display:Pr}=getComputedStyle$1(_r);return/auto|scroll|overlay|hidden|clip/.test(Tr+Ar+Rr)&&!["inline","contents"].includes(Pr)}function isTableElement(_r){return["table","td","th"].includes(getNodeName(_r))}function isContainingBlock(_r){const Tr=isWebKit(),Rr=getComputedStyle$1(_r);return Rr.transform!=="none"||Rr.perspective!=="none"||(Rr.containerType?Rr.containerType!=="normal":!1)||!Tr&&(Rr.backdropFilter?Rr.backdropFilter!=="none":!1)||!Tr&&(Rr.filter?Rr.filter!=="none":!1)||["transform","perspective","filter"].some(Ar=>(Rr.willChange||"").includes(Ar))||["paint","layout","strict","content"].some(Ar=>(Rr.contain||"").includes(Ar))}function getContainingBlock(_r){let Tr=getParentNode(_r);for(;isHTMLElement(Tr)&&!isLastTraversableNode(Tr);){if(isContainingBlock(Tr))return Tr;Tr=getParentNode(Tr)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(_r){return["html","body","#document"].includes(getNodeName(_r))}function getComputedStyle$1(_r){return getWindow(_r).getComputedStyle(_r)}function getNodeScroll(_r){return isElement(_r)?{scrollLeft:_r.scrollLeft,scrollTop:_r.scrollTop}:{scrollLeft:_r.pageXOffset,scrollTop:_r.pageYOffset}}function getParentNode(_r){if(getNodeName(_r)==="html")return _r;const Tr=_r.assignedSlot||_r.parentNode||isShadowRoot(_r)&&_r.host||getDocumentElement(_r);return isShadowRoot(Tr)?Tr.host:Tr}function getNearestOverflowAncestor(_r){const Tr=getParentNode(_r);return isLastTraversableNode(Tr)?_r.ownerDocument?_r.ownerDocument.body:_r.body:isHTMLElement(Tr)&&isOverflowElement(Tr)?Tr:getNearestOverflowAncestor(Tr)}function getOverflowAncestors(_r,Tr,Rr){var Ar;Tr===void 0&&(Tr=[]),Rr===void 0&&(Rr=!0);const Pr=getNearestOverflowAncestor(_r),Lr=Pr===((Ar=_r.ownerDocument)==null?void 0:Ar.body),Mr=getWindow(Pr);return Lr?Tr.concat(Mr,Mr.visualViewport||[],isOverflowElement(Pr)?Pr:[],Mr.frameElement&&Rr?getOverflowAncestors(Mr.frameElement):[]):Tr.concat(Pr,getOverflowAncestors(Pr,[],Rr))}function getCssDimensions(_r){const Tr=getComputedStyle$1(_r);let Rr=parseFloat(Tr.width)||0,Ar=parseFloat(Tr.height)||0;const Pr=isHTMLElement(_r),Lr=Pr?_r.offsetWidth:Rr,Mr=Pr?_r.offsetHeight:Ar,Fr=round(Rr)!==Lr||round(Ar)!==Mr;return Fr&&(Rr=Lr,Ar=Mr),{width:Rr,height:Ar,$:Fr}}function unwrapElement(_r){return isElement(_r)?_r:_r.contextElement}function getScale(_r){const Tr=unwrapElement(_r);if(!isHTMLElement(Tr))return createCoords(1);const Rr=Tr.getBoundingClientRect(),{width:Ar,height:Pr,$:Lr}=getCssDimensions(Tr);let Mr=(Lr?round(Rr.width):Rr.width)/Ar,Fr=(Lr?round(Rr.height):Rr.height)/Pr;return(!Mr||!Number.isFinite(Mr))&&(Mr=1),(!Fr||!Number.isFinite(Fr))&&(Fr=1),{x:Mr,y:Fr}}const noOffsets=createCoords(0);function getVisualOffsets(_r){const Tr=getWindow(_r);return!isWebKit()||!Tr.visualViewport?noOffsets:{x:Tr.visualViewport.offsetLeft,y:Tr.visualViewport.offsetTop}}function shouldAddVisualOffsets(_r,Tr,Rr){return Tr===void 0&&(Tr=!1),!Rr||Tr&&Rr!==getWindow(_r)?!1:Tr}function getBoundingClientRect(_r,Tr,Rr,Ar){Tr===void 0&&(Tr=!1),Rr===void 0&&(Rr=!1);const Pr=_r.getBoundingClientRect(),Lr=unwrapElement(_r);let Mr=createCoords(1);Tr&&(Ar?isElement(Ar)&&(Mr=getScale(Ar)):Mr=getScale(_r));const Fr=shouldAddVisualOffsets(Lr,Rr,Ar)?getVisualOffsets(Lr):createCoords(0);let zr=(Pr.left+Fr.x)/Mr.x,Ur=(Pr.top+Fr.y)/Mr.y,Vr=Pr.width/Mr.x,Nr=Pr.height/Mr.y;if(Lr){const Dr=getWindow(Lr),jr=Ar&&isElement(Ar)?getWindow(Ar):Ar;let Gr=Dr.frameElement;for(;Gr&&Ar&&jr!==Dr;){const Wr=getScale(Gr),qr=Gr.getBoundingClientRect(),Kr=getComputedStyle$1(Gr),Xr=qr.left+(Gr.clientLeft+parseFloat(Kr.paddingLeft))*Wr.x,Zr=qr.top+(Gr.clientTop+parseFloat(Kr.paddingTop))*Wr.y;zr*=Wr.x,Ur*=Wr.y,Vr*=Wr.x,Nr*=Wr.y,zr+=Xr,Ur+=Zr,Gr=getWindow(Gr).frameElement}}return rectToClientRect({width:Vr,height:Nr,x:zr,y:Ur})}function convertOffsetParentRelativeRectToViewportRelativeRect(_r){let{rect:Tr,offsetParent:Rr,strategy:Ar}=_r;const Pr=isHTMLElement(Rr),Lr=getDocumentElement(Rr);if(Rr===Lr)return Tr;let Mr={scrollLeft:0,scrollTop:0},Fr=createCoords(1);const zr=createCoords(0);if((Pr||!Pr&&Ar!=="fixed")&&((getNodeName(Rr)!=="body"||isOverflowElement(Lr))&&(Mr=getNodeScroll(Rr)),isHTMLElement(Rr))){const Ur=getBoundingClientRect(Rr);Fr=getScale(Rr),zr.x=Ur.x+Rr.clientLeft,zr.y=Ur.y+Rr.clientTop}return{width:Tr.width*Fr.x,height:Tr.height*Fr.y,x:Tr.x*Fr.x-Mr.scrollLeft*Fr.x+zr.x,y:Tr.y*Fr.y-Mr.scrollTop*Fr.y+zr.y}}function getClientRects(_r){return Array.from(_r.getClientRects())}function getWindowScrollBarX(_r){return getBoundingClientRect(getDocumentElement(_r)).left+getNodeScroll(_r).scrollLeft}function getDocumentRect(_r){const Tr=getDocumentElement(_r),Rr=getNodeScroll(_r),Ar=_r.ownerDocument.body,Pr=max(Tr.scrollWidth,Tr.clientWidth,Ar.scrollWidth,Ar.clientWidth),Lr=max(Tr.scrollHeight,Tr.clientHeight,Ar.scrollHeight,Ar.clientHeight);let Mr=-Rr.scrollLeft+getWindowScrollBarX(_r);const Fr=-Rr.scrollTop;return getComputedStyle$1(Ar).direction==="rtl"&&(Mr+=max(Tr.clientWidth,Ar.clientWidth)-Pr),{width:Pr,height:Lr,x:Mr,y:Fr}}function getViewportRect(_r,Tr){const Rr=getWindow(_r),Ar=getDocumentElement(_r),Pr=Rr.visualViewport;let Lr=Ar.clientWidth,Mr=Ar.clientHeight,Fr=0,zr=0;if(Pr){Lr=Pr.width,Mr=Pr.height;const Ur=isWebKit();(!Ur||Ur&&Tr==="fixed")&&(Fr=Pr.offsetLeft,zr=Pr.offsetTop)}return{width:Lr,height:Mr,x:Fr,y:zr}}function getInnerBoundingClientRect(_r,Tr){const Rr=getBoundingClientRect(_r,!0,Tr==="fixed"),Ar=Rr.top+_r.clientTop,Pr=Rr.left+_r.clientLeft,Lr=isHTMLElement(_r)?getScale(_r):createCoords(1),Mr=_r.clientWidth*Lr.x,Fr=_r.clientHeight*Lr.y,zr=Pr*Lr.x,Ur=Ar*Lr.y;return{width:Mr,height:Fr,x:zr,y:Ur}}function getClientRectFromClippingAncestor(_r,Tr,Rr){let Ar;if(Tr==="viewport")Ar=getViewportRect(_r,Rr);else if(Tr==="document")Ar=getDocumentRect(getDocumentElement(_r));else if(isElement(Tr))Ar=getInnerBoundingClientRect(Tr,Rr);else{const Pr=getVisualOffsets(_r);Ar={...Tr,x:Tr.x-Pr.x,y:Tr.y-Pr.y}}return rectToClientRect(Ar)}function hasFixedPositionAncestor(_r,Tr){const Rr=getParentNode(_r);return Rr===Tr||!isElement(Rr)||isLastTraversableNode(Rr)?!1:getComputedStyle$1(Rr).position==="fixed"||hasFixedPositionAncestor(Rr,Tr)}function getClippingElementAncestors(_r,Tr){const Rr=Tr.get(_r);if(Rr)return Rr;let Ar=getOverflowAncestors(_r,[],!1).filter(Fr=>isElement(Fr)&&getNodeName(Fr)!=="body"),Pr=null;const Lr=getComputedStyle$1(_r).position==="fixed";let Mr=Lr?getParentNode(_r):_r;for(;isElement(Mr)&&!isLastTraversableNode(Mr);){const Fr=getComputedStyle$1(Mr),zr=isContainingBlock(Mr);!zr&&Fr.position==="fixed"&&(Pr=null),(Lr?!zr&&!Pr:!zr&&Fr.position==="static"&&!!Pr&&["absolute","fixed"].includes(Pr.position)||isOverflowElement(Mr)&&!zr&&hasFixedPositionAncestor(_r,Mr))?Ar=Ar.filter(Vr=>Vr!==Mr):Pr=Fr,Mr=getParentNode(Mr)}return Tr.set(_r,Ar),Ar}function getClippingRect(_r){let{element:Tr,boundary:Rr,rootBoundary:Ar,strategy:Pr}=_r;const Mr=[...Rr==="clippingAncestors"?getClippingElementAncestors(Tr,this._c):[].concat(Rr),Ar],Fr=Mr[0],zr=Mr.reduce((Ur,Vr)=>{const Nr=getClientRectFromClippingAncestor(Tr,Vr,Pr);return Ur.top=max(Nr.top,Ur.top),Ur.right=min(Nr.right,Ur.right),Ur.bottom=min(Nr.bottom,Ur.bottom),Ur.left=max(Nr.left,Ur.left),Ur},getClientRectFromClippingAncestor(Tr,Fr,Pr));return{width:zr.right-zr.left,height:zr.bottom-zr.top,x:zr.left,y:zr.top}}function getDimensions(_r){return getCssDimensions(_r)}function getRectRelativeToOffsetParent(_r,Tr,Rr){const Ar=isHTMLElement(Tr),Pr=getDocumentElement(Tr),Lr=Rr==="fixed",Mr=getBoundingClientRect(_r,!0,Lr,Tr);let Fr={scrollLeft:0,scrollTop:0};const zr=createCoords(0);if(Ar||!Ar&&!Lr)if((getNodeName(Tr)!=="body"||isOverflowElement(Pr))&&(Fr=getNodeScroll(Tr)),Ar){const Ur=getBoundingClientRect(Tr,!0,Lr,Tr);zr.x=Ur.x+Tr.clientLeft,zr.y=Ur.y+Tr.clientTop}else Pr&&(zr.x=getWindowScrollBarX(Pr));return{x:Mr.left+Fr.scrollLeft-zr.x,y:Mr.top+Fr.scrollTop-zr.y,width:Mr.width,height:Mr.height}}function getTrueOffsetParent(_r,Tr){return!isHTMLElement(_r)||getComputedStyle$1(_r).position==="fixed"?null:Tr?Tr(_r):_r.offsetParent}function getOffsetParent(_r,Tr){const Rr=getWindow(_r);if(!isHTMLElement(_r))return Rr;let Ar=getTrueOffsetParent(_r,Tr);for(;Ar&&isTableElement(Ar)&&getComputedStyle$1(Ar).position==="static";)Ar=getTrueOffsetParent(Ar,Tr);return Ar&&(getNodeName(Ar)==="html"||getNodeName(Ar)==="body"&&getComputedStyle$1(Ar).position==="static"&&!isContainingBlock(Ar))?Rr:Ar||getContainingBlock(_r)||Rr}const getElementRects=async function(_r){let{reference:Tr,floating:Rr,strategy:Ar}=_r;const Pr=this.getOffsetParent||getOffsetParent,Lr=this.getDimensions;return{reference:getRectRelativeToOffsetParent(Tr,await Pr(Rr),Ar),floating:{x:0,y:0,...await Lr(Rr)}}};function isRTL(_r){return getComputedStyle$1(_r).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(_r,Tr){let Rr=null,Ar;const Pr=getDocumentElement(_r);function Lr(){clearTimeout(Ar),Rr&&Rr.disconnect(),Rr=null}function Mr(Fr,zr){Fr===void 0&&(Fr=!1),zr===void 0&&(zr=1),Lr();const{left:Ur,top:Vr,width:Nr,height:Dr}=_r.getBoundingClientRect();if(Fr||Tr(),!Nr||!Dr)return;const jr=floor(Vr),Gr=floor(Pr.clientWidth-(Ur+Nr)),Wr=floor(Pr.clientHeight-(Vr+Dr)),qr=floor(Ur),Xr={rootMargin:-jr+"px "+-Gr+"px "+-Wr+"px "+-qr+"px",threshold:max(0,min(1,zr))||1};let Zr=!0;function Jr(_i){const es=_i[0].intersectionRatio;if(es!==zr){if(!Zr)return Mr();es?Mr(!1,es):Ar=setTimeout(()=>{Mr(!1,1e-7)},100)}Zr=!1}try{Rr=new IntersectionObserver(Jr,{...Xr,root:Pr.ownerDocument})}catch{Rr=new IntersectionObserver(Jr,Xr)}Rr.observe(_r)}return Mr(!0),Lr}function autoUpdate(_r,Tr,Rr,Ar){Ar===void 0&&(Ar={});const{ancestorScroll:Pr=!0,ancestorResize:Lr=!0,elementResize:Mr=typeof ResizeObserver=="function",layoutShift:Fr=typeof IntersectionObserver=="function",animationFrame:zr=!1}=Ar,Ur=unwrapElement(_r),Vr=Pr||Lr?[...Ur?getOverflowAncestors(Ur):[],...getOverflowAncestors(Tr)]:[];Vr.forEach(Kr=>{Pr&&Kr.addEventListener("scroll",Rr,{passive:!0}),Lr&&Kr.addEventListener("resize",Rr)});const Nr=Ur&&Fr?observeMove(Ur,Rr):null;let Dr=-1,jr=null;Mr&&(jr=new ResizeObserver(Kr=>{let[Xr]=Kr;Xr&&Xr.target===Ur&&jr&&(jr.unobserve(Tr),cancelAnimationFrame(Dr),Dr=requestAnimationFrame(()=>{jr&&jr.observe(Tr)})),Rr()}),Ur&&!zr&&jr.observe(Ur),jr.observe(Tr));let Gr,Wr=zr?getBoundingClientRect(_r):null;zr&&qr();function qr(){const Kr=getBoundingClientRect(_r);Wr&&(Kr.x!==Wr.x||Kr.y!==Wr.y||Kr.width!==Wr.width||Kr.height!==Wr.height)&&Rr(),Wr=Kr,Gr=requestAnimationFrame(qr)}return Rr(),()=>{Vr.forEach(Kr=>{Pr&&Kr.removeEventListener("scroll",Rr),Lr&&Kr.removeEventListener("resize",Rr)}),Nr&&Nr(),jr&&jr.disconnect(),jr=null,zr&&cancelAnimationFrame(Gr)}}const computePosition=(_r,Tr,Rr)=>{const Ar=new Map,Pr={platform,...Rr},Lr={...Pr.platform,_c:Ar};return computePosition$1(_r,Tr,{...Pr,platform:Lr})},arrow=_r=>{function Tr(Rr){return{}.hasOwnProperty.call(Rr,"current")}return{name:"arrow",options:_r,fn(Rr){const{element:Ar,padding:Pr}=typeof _r=="function"?_r(Rr):_r;return Ar&&Tr(Ar)?Ar.current!=null?arrow$1({element:Ar.current,padding:Pr}).fn(Rr):{}:Ar?arrow$1({element:Ar,padding:Pr}).fn(Rr):{}}}};var index$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(_r,Tr){if(_r===Tr)return!0;if(typeof _r!=typeof Tr)return!1;if(typeof _r=="function"&&_r.toString()===Tr.toString())return!0;let Rr,Ar,Pr;if(_r&&Tr&&typeof _r=="object"){if(Array.isArray(_r)){if(Rr=_r.length,Rr!=Tr.length)return!1;for(Ar=Rr;Ar--!==0;)if(!deepEqual(_r[Ar],Tr[Ar]))return!1;return!0}if(Pr=Object.keys(_r),Rr=Pr.length,Rr!==Object.keys(Tr).length)return!1;for(Ar=Rr;Ar--!==0;)if(!{}.hasOwnProperty.call(Tr,Pr[Ar]))return!1;for(Ar=Rr;Ar--!==0;){const Lr=Pr[Ar];if(!(Lr==="_owner"&&_r.$$typeof)&&!deepEqual(_r[Lr],Tr[Lr]))return!1}return!0}return _r!==_r&&Tr!==Tr}function getDPR(_r){return typeof window>"u"?1:(_r.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(_r,Tr){const Rr=getDPR(_r);return Math.round(Tr*Rr)/Rr}function useLatestRef(_r){const Tr=reactExports.useRef(_r);return index$1(()=>{Tr.current=_r}),Tr}function useFloating(_r){_r===void 0&&(_r={});const{placement:Tr="bottom",strategy:Rr="absolute",middleware:Ar=[],platform:Pr,elements:{reference:Lr,floating:Mr}={},transform:Fr=!0,whileElementsMounted:zr,open:Ur}=_r,[Vr,Nr]=reactExports.useState({x:0,y:0,strategy:Rr,placement:Tr,middlewareData:{},isPositioned:!1}),[Dr,jr]=reactExports.useState(Ar);deepEqual(Dr,Ar)||jr(Ar);const[Gr,Wr]=reactExports.useState(null),[qr,Kr]=reactExports.useState(null),Xr=reactExports.useCallback(gs=>{gs!=es.current&&(es.current=gs,Wr(gs))},[Wr]),Zr=reactExports.useCallback(gs=>{gs!==ts.current&&(ts.current=gs,Kr(gs))},[Kr]),Jr=Lr||Gr,_i=Mr||qr,es=reactExports.useRef(null),ts=reactExports.useRef(null),rs=reactExports.useRef(Vr),ns=useLatestRef(zr),as=useLatestRef(Pr),ls=reactExports.useCallback(()=>{if(!es.current||!ts.current)return;const gs={placement:Tr,strategy:Rr,middleware:Dr};as.current&&(gs.platform=as.current),computePosition(es.current,ts.current,gs).then(fs=>{const ys={...fs,isPositioned:!0};us.current&&!deepEqual(rs.current,ys)&&(rs.current=ys,reactDomExports.flushSync(()=>{Nr(ys)}))})},[Dr,Tr,Rr,as]);index$1(()=>{Ur===!1&&rs.current.isPositioned&&(rs.current.isPositioned=!1,Nr(gs=>({...gs,isPositioned:!1})))},[Ur]);const us=reactExports.useRef(!1);index$1(()=>(us.current=!0,()=>{us.current=!1}),[]),index$1(()=>{if(Jr&&(es.current=Jr),_i&&(ts.current=_i),Jr&&_i){if(ns.current)return ns.current(Jr,_i,ls);ls()}},[Jr,_i,ls,ns]);const xs=reactExports.useMemo(()=>({reference:es,floating:ts,setReference:Xr,setFloating:Zr}),[Xr,Zr]),Ts=reactExports.useMemo(()=>({reference:Jr,floating:_i}),[Jr,_i]),vs=reactExports.useMemo(()=>{const gs={position:Rr,left:0,top:0};if(!Ts.floating)return gs;const fs=roundByDPR(Ts.floating,Vr.x),ys=roundByDPR(Ts.floating,Vr.y);return Fr?{...gs,transform:"translate("+fs+"px, "+ys+"px)",...getDPR(Ts.floating)>=1.5&&{willChange:"transform"}}:{position:Rr,left:fs,top:ys}},[Rr,Fr,Ts.floating,Vr.x,Vr.y]);return reactExports.useMemo(()=>({...Vr,update:ls,refs:xs,elements:Ts,floatingStyles:vs}),[Vr,ls,xs,Ts,vs])}const $7e8f5cd07187803e$export$21b07c8f274aebd5=reactExports.forwardRef((_r,Tr)=>{const{children:Rr,width:Ar=10,height:Pr=5,...Lr}=_r;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.svg,_extends$1({},Lr,{ref:Tr,width:Ar,height:Pr,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),_r.asChild?Rr:reactExports.createElement("polygon",{points:"0,0 30,0 15,10"}))}),$7e8f5cd07187803e$export$be92b6f5f03c0fe9=$7e8f5cd07187803e$export$21b07c8f274aebd5,$cf1ac5d9fe0e8206$var$POPPER_NAME="Popper",[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cf1ac5d9fe0e8206$var$POPPER_NAME),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$POPPER_NAME),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=_r=>{const{__scopePopper:Tr,children:Rr}=_r,[Ar,Pr]=reactExports.useState(null);return reactExports.createElement($cf1ac5d9fe0e8206$var$PopperProvider,{scope:Tr,anchor:Ar,onAnchorChange:Pr},Rr)},$cf1ac5d9fe0e8206$var$ANCHOR_NAME="PopperAnchor",$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=reactExports.forwardRef((_r,Tr)=>{const{__scopePopper:Rr,virtualRef:Ar,...Pr}=_r,Lr=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$ANCHOR_NAME,Rr),Mr=reactExports.useRef(null),Fr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Mr);return reactExports.useEffect(()=>{Lr.onAnchorChange((Ar==null?void 0:Ar.current)||Mr.current)}),Ar?null:reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},Pr,{ref:Fr}))}),$cf1ac5d9fe0e8206$var$CONTENT_NAME="PopperContent",[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=reactExports.forwardRef((_r,Tr)=>{var Rr,Ar,Pr,Lr,Mr,Fr,zr,Ur;const{__scopePopper:Vr,side:Nr="bottom",sideOffset:Dr=0,align:jr="center",alignOffset:Gr=0,arrowPadding:Wr=0,collisionBoundary:qr=[],collisionPadding:Kr=0,sticky:Xr="partial",hideWhenDetached:Zr=!1,avoidCollisions:Jr=!0,onPlaced:_i,...es}=_r,ts=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,Vr),[rs,ns]=reactExports.useState(null),as=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Is=>ns(Is)),[ls,us]=reactExports.useState(null),xs=$db6c3485150b8e66$export$1ab7ae714698c4b8(ls),Ts=(Rr=xs==null?void 0:xs.width)!==null&&Rr!==void 0?Rr:0,vs=(Ar=xs==null?void 0:xs.height)!==null&&Ar!==void 0?Ar:0,gs=Nr+(jr!=="center"?"-"+jr:""),fs=typeof Kr=="number"?Kr:{top:0,right:0,bottom:0,left:0,...Kr},ys=Array.isArray(qr)?qr:[qr],ks=ys.length>0,Fs={padding:fs,boundary:ys.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:ks},{refs:Us,floatingStyles:Vs,placement:ao,isPositioned:qs,middlewareData:Qs}=useFloating({strategy:"fixed",placement:gs,whileElementsMounted:autoUpdate,elements:{reference:ts.anchor},middleware:[offset({mainAxis:Dr+vs,alignmentAxis:Gr}),Jr&&shift({mainAxis:!0,crossAxis:!1,limiter:Xr==="partial"?limitShift():void 0,...Fs}),Jr&&flip({...Fs}),size({...Fs,apply:({elements:Is,rects:Gs,availableWidth:to,availableHeight:no})=>{const{width:Ro,height:ro}=Gs.reference,go=Is.floating.style;go.setProperty("--radix-popper-available-width",`${to}px`),go.setProperty("--radix-popper-available-height",`${no}px`),go.setProperty("--radix-popper-anchor-width",`${Ro}px`),go.setProperty("--radix-popper-anchor-height",`${ro}px`)}}),ls&&arrow({element:ls,padding:Wr}),$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:Ts,arrowHeight:vs}),Zr&&hide({strategy:"referenceHidden"})]}),[mo,Xs]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(ao),so=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_i);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{qs&&(so==null||so())},[qs,so]);const uo=(Pr=Qs.arrow)===null||Pr===void 0?void 0:Pr.x,bo=(Lr=Qs.arrow)===null||Lr===void 0?void 0:Lr.y,wo=((Mr=Qs.arrow)===null||Mr===void 0?void 0:Mr.centerOffset)!==0,[Co,ds]=reactExports.useState();return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{rs&&ds(window.getComputedStyle(rs).zIndex)},[rs]),reactExports.createElement("div",{ref:Us.setFloating,"data-radix-popper-content-wrapper":"",style:{...Vs,transform:qs?Vs.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Co,"--radix-popper-transform-origin":[(Fr=Qs.transformOrigin)===null||Fr===void 0?void 0:Fr.x,(zr=Qs.transformOrigin)===null||zr===void 0?void 0:zr.y].join(" ")},dir:_r.dir},reactExports.createElement($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:Vr,placedSide:mo,onArrowChange:us,arrowX:uo,arrowY:bo,shouldHideArrow:wo},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-side":mo,"data-align":Xs},es,{ref:as,style:{...es.style,animation:qs?void 0:"none",opacity:(Ur=Qs.hide)!==null&&Ur!==void 0&&Ur.referenceHidden?0:void 0}}))))}),$cf1ac5d9fe0e8206$var$ARROW_NAME="PopperArrow",$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0=reactExports.forwardRef(function(Tr,Rr){const{__scopePopper:Ar,...Pr}=Tr,Lr=$cf1ac5d9fe0e8206$var$useContentContext($cf1ac5d9fe0e8206$var$ARROW_NAME,Ar),Mr=$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE[Lr.placedSide];return reactExports.createElement("span",{ref:Lr.onArrowChange,style:{position:"absolute",left:Lr.arrowX,top:Lr.arrowY,[Mr]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[Lr.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[Lr.placedSide],visibility:Lr.shouldHideArrow?"hidden":void 0}},reactExports.createElement($7e8f5cd07187803e$export$be92b6f5f03c0fe9,_extends$1({},Pr,{ref:Rr,style:{...Pr.style,display:"block"}})))});function $cf1ac5d9fe0e8206$var$isNotNull(_r){return _r!==null}const $cf1ac5d9fe0e8206$var$transformOrigin=_r=>({name:"transformOrigin",options:_r,fn(Tr){var Rr,Ar,Pr,Lr,Mr;const{placement:Fr,rects:zr,middlewareData:Ur}=Tr,Nr=((Rr=Ur.arrow)===null||Rr===void 0?void 0:Rr.centerOffset)!==0,Dr=Nr?0:_r.arrowWidth,jr=Nr?0:_r.arrowHeight,[Gr,Wr]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(Fr),qr={start:"0%",center:"50%",end:"100%"}[Wr],Kr=((Ar=(Pr=Ur.arrow)===null||Pr===void 0?void 0:Pr.x)!==null&&Ar!==void 0?Ar:0)+Dr/2,Xr=((Lr=(Mr=Ur.arrow)===null||Mr===void 0?void 0:Mr.y)!==null&&Lr!==void 0?Lr:0)+jr/2;let Zr="",Jr="";return Gr==="bottom"?(Zr=Nr?qr:`${Kr}px`,Jr=`${-jr}px`):Gr==="top"?(Zr=Nr?qr:`${Kr}px`,Jr=`${zr.floating.height+jr}px`):Gr==="right"?(Zr=`${-jr}px`,Jr=Nr?qr:`${Xr}px`):Gr==="left"&&(Zr=`${zr.floating.width+jr}px`,Jr=Nr?qr:`${Xr}px`),{data:{x:Zr,y:Jr}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(_r){const[Tr,Rr="center"]=_r.split("-");return[Tr,Rr]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,$cf1ac5d9fe0e8206$export$21b07c8f274aebd5=$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0;var getDefaultParent=function(_r){if(typeof document>"u")return null;var Tr=Array.isArray(_r)?_r[0]:_r;return Tr.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(_r){return _r&&(_r.host||unwrapHost(_r.parentNode))},correctTargets=function(_r,Tr){return Tr.map(function(Rr){if(_r.contains(Rr))return Rr;var Ar=unwrapHost(Rr);return Ar&&_r.contains(Ar)?Ar:(console.error("aria-hidden",Rr,"in not contained inside",_r,". Doing nothing"),null)}).filter(function(Rr){return!!Rr})},applyAttributeToOthers=function(_r,Tr,Rr,Ar){var Pr=correctTargets(Tr,Array.isArray(_r)?_r:[_r]);markerMap[Rr]||(markerMap[Rr]=new WeakMap);var Lr=markerMap[Rr],Mr=[],Fr=new Set,zr=new Set(Pr),Ur=function(Nr){!Nr||Fr.has(Nr)||(Fr.add(Nr),Ur(Nr.parentNode))};Pr.forEach(Ur);var Vr=function(Nr){!Nr||zr.has(Nr)||Array.prototype.forEach.call(Nr.children,function(Dr){if(Fr.has(Dr))Vr(Dr);else{var jr=Dr.getAttribute(Ar),Gr=jr!==null&&jr!=="false",Wr=(counterMap.get(Dr)||0)+1,qr=(Lr.get(Dr)||0)+1;counterMap.set(Dr,Wr),Lr.set(Dr,qr),Mr.push(Dr),Wr===1&&Gr&&uncontrolledNodes.set(Dr,!0),qr===1&&Dr.setAttribute(Rr,"true"),Gr||Dr.setAttribute(Ar,"true")}})};return Vr(Tr),Fr.clear(),lockCount++,function(){Mr.forEach(function(Nr){var Dr=counterMap.get(Nr)-1,jr=Lr.get(Nr)-1;counterMap.set(Nr,Dr),Lr.set(Nr,jr),Dr||(uncontrolledNodes.has(Nr)||Nr.removeAttribute(Ar),uncontrolledNodes.delete(Nr)),jr||Nr.removeAttribute(Rr)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(_r,Tr,Rr){Rr===void 0&&(Rr="data-aria-hidden");var Ar=Array.from(Array.isArray(_r)?_r:[_r]),Pr=Tr||getDefaultParent(_r);return Pr?(Ar.push.apply(Ar,Array.from(Pr.querySelectorAll("[aria-live]"))),applyAttributeToOthers(Ar,Pr,Rr,"aria-hidden")):function(){return null}},__assign=function(){return __assign=Object.assign||function(Tr){for(var Rr,Ar=1,Pr=arguments.length;Ar<Pr;Ar++){Rr=arguments[Ar];for(var Lr in Rr)Object.prototype.hasOwnProperty.call(Rr,Lr)&&(Tr[Lr]=Rr[Lr])}return Tr},__assign.apply(this,arguments)};function __rest(_r,Tr){var Rr={};for(var Ar in _r)Object.prototype.hasOwnProperty.call(_r,Ar)&&Tr.indexOf(Ar)<0&&(Rr[Ar]=_r[Ar]);if(_r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Pr=0,Ar=Object.getOwnPropertySymbols(_r);Pr<Ar.length;Pr++)Tr.indexOf(Ar[Pr])<0&&Object.prototype.propertyIsEnumerable.call(_r,Ar[Pr])&&(Rr[Ar[Pr]]=_r[Ar[Pr]]);return Rr}function __spreadArray(_r,Tr,Rr){if(Rr||arguments.length===2)for(var Ar=0,Pr=Tr.length,Lr;Ar<Pr;Ar++)(Lr||!(Ar in Tr))&&(Lr||(Lr=Array.prototype.slice.call(Tr,0,Ar)),Lr[Ar]=Tr[Ar]);return _r.concat(Lr||Array.prototype.slice.call(Tr))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(_r,Tr){return typeof _r=="function"?_r(Tr):_r&&(_r.current=Tr),_r}function useCallbackRef(_r,Tr){var Rr=reactExports.useState(function(){return{value:_r,callback:Tr,facade:{get current(){return Rr.value},set current(Ar){var Pr=Rr.value;Pr!==Ar&&(Rr.value=Ar,Rr.callback(Ar,Pr))}}}})[0];return Rr.callback=Tr,Rr.facade}function useMergeRefs(_r,Tr){return useCallbackRef(Tr||null,function(Rr){return _r.forEach(function(Ar){return assignRef(Ar,Rr)})})}function ItoI(_r){return _r}function innerCreateMedium(_r,Tr){Tr===void 0&&(Tr=ItoI);var Rr=[],Ar=!1,Pr={read:function(){if(Ar)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return Rr.length?Rr[Rr.length-1]:_r},useMedium:function(Lr){var Mr=Tr(Lr,Ar);return Rr.push(Mr),function(){Rr=Rr.filter(function(Fr){return Fr!==Mr})}},assignSyncMedium:function(Lr){for(Ar=!0;Rr.length;){var Mr=Rr;Rr=[],Mr.forEach(Lr)}Rr={push:function(Fr){return Lr(Fr)},filter:function(){return Rr}}},assignMedium:function(Lr){Ar=!0;var Mr=[];if(Rr.length){var Fr=Rr;Rr=[],Fr.forEach(Lr),Mr=Rr}var zr=function(){var Vr=Mr;Mr=[],Vr.forEach(Lr)},Ur=function(){return Promise.resolve().then(zr)};Ur(),Rr={push:function(Vr){Mr.push(Vr),Ur()},filter:function(Vr){return Mr=Mr.filter(Vr),Rr}}}};return Pr}function createSidecarMedium(_r){_r===void 0&&(_r={});var Tr=innerCreateMedium(null);return Tr.options=__assign({async:!0,ssr:!1},_r),Tr}var SideCar$1=function(_r){var Tr=_r.sideCar,Rr=__rest(_r,["sideCar"]);if(!Tr)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var Ar=Tr.read();if(!Ar)throw new Error("Sidecar medium not found");return reactExports.createElement(Ar,__assign({},Rr))};SideCar$1.isSideCarExport=!0;function exportSidecar(_r,Tr){return _r.useMedium(Tr),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(_r,Tr){var Rr=reactExports.useRef(null),Ar=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),Pr=Ar[0],Lr=Ar[1],Mr=_r.forwardProps,Fr=_r.children,zr=_r.className,Ur=_r.removeScrollBar,Vr=_r.enabled,Nr=_r.shards,Dr=_r.sideCar,jr=_r.noIsolation,Gr=_r.inert,Wr=_r.allowPinchZoom,qr=_r.as,Kr=qr===void 0?"div":qr,Xr=__rest(_r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),Zr=Dr,Jr=useMergeRefs([Rr,Tr]),_i=__assign(__assign({},Xr),Pr);return reactExports.createElement(reactExports.Fragment,null,Vr&&reactExports.createElement(Zr,{sideCar:effectCar,removeScrollBar:Ur,shards:Nr,noIsolation:jr,inert:Gr,setCallbacks:Lr,allowPinchZoom:!!Wr,lockRef:Rr}),Mr?reactExports.cloneElement(reactExports.Children.only(Fr),__assign(__assign({},_i),{ref:Jr})):reactExports.createElement(Kr,__assign({},_i,{className:zr,ref:Jr}),Fr))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var currentNonce,getNonce=function(){if(currentNonce)return currentNonce;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var _r=document.createElement("style");_r.type="text/css";var Tr=getNonce();return Tr&&_r.setAttribute("nonce",Tr),_r}function injectStyles(_r,Tr){_r.styleSheet?_r.styleSheet.cssText=Tr:_r.appendChild(document.createTextNode(Tr))}function insertStyleTag(_r){var Tr=document.head||document.getElementsByTagName("head")[0];Tr.appendChild(_r)}var stylesheetSingleton=function(){var _r=0,Tr=null;return{add:function(Rr){_r==0&&(Tr=makeStyleTag())&&(injectStyles(Tr,Rr),insertStyleTag(Tr)),_r++},remove:function(){_r--,!_r&&Tr&&(Tr.parentNode&&Tr.parentNode.removeChild(Tr),Tr=null)}}},styleHookSingleton=function(){var _r=stylesheetSingleton();return function(Tr,Rr){reactExports.useEffect(function(){return _r.add(Tr),function(){_r.remove()}},[Tr&&Rr])}},styleSingleton=function(){var _r=styleHookSingleton(),Tr=function(Rr){var Ar=Rr.styles,Pr=Rr.dynamic;return _r(Ar,Pr),null};return Tr},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(_r){return parseInt(_r||"",10)||0},getOffset=function(_r){var Tr=window.getComputedStyle(document.body),Rr=Tr[_r==="padding"?"paddingLeft":"marginLeft"],Ar=Tr[_r==="padding"?"paddingTop":"marginTop"],Pr=Tr[_r==="padding"?"paddingRight":"marginRight"];return[parse$1(Rr),parse$1(Ar),parse$1(Pr)]},getGapWidth=function(_r){if(_r===void 0&&(_r="margin"),typeof window>"u")return zeroGap;var Tr=getOffset(_r),Rr=document.documentElement.clientWidth,Ar=window.innerWidth;return{left:Tr[0],top:Tr[1],right:Tr[2],gap:Math.max(0,Ar-Rr+Tr[2]-Tr[0])}},Style=styleSingleton(),getStyles=function(_r,Tr,Rr,Ar){var Pr=_r.left,Lr=_r.top,Mr=_r.right,Fr=_r.gap;return Rr===void 0&&(Rr="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(Ar,`;
   padding-right: `).concat(Fr,"px ").concat(Ar,`;
  }
  body {
    overflow: hidden `).concat(Ar,`;
    overscroll-behavior: contain;
    `).concat([Tr&&"position: relative ".concat(Ar,";"),Rr==="margin"&&`
    padding-left: `.concat(Pr,`px;
    padding-top: `).concat(Lr,`px;
    padding-right: `).concat(Mr,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(Fr,"px ").concat(Ar,`;
    `),Rr==="padding"&&"padding-right: ".concat(Fr,"px ").concat(Ar,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(Fr,"px ").concat(Ar,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(Fr,"px ").concat(Ar,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(Ar,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(Ar,`;
  }
  
  body {
    `).concat(removedBarSizeVariable,": ").concat(Fr,`px;
  }
`)},RemoveScrollBar=function(_r){var Tr=_r.noRelative,Rr=_r.noImportant,Ar=_r.gapMode,Pr=Ar===void 0?"margin":Ar,Lr=reactExports.useMemo(function(){return getGapWidth(Pr)},[Pr]);return reactExports.createElement(Style,{styles:getStyles(Lr,!Tr,Pr,Rr?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options$1=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options$1,options$1),window.removeEventListener("test",options$1,options$1)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(_r){return _r.tagName==="TEXTAREA"},elementCanBeScrolled=function(_r,Tr){var Rr=window.getComputedStyle(_r);return Rr[Tr]!=="hidden"&&!(Rr.overflowY===Rr.overflowX&&!alwaysContainsScroll(_r)&&Rr[Tr]==="visible")},elementCouldBeVScrolled=function(_r){return elementCanBeScrolled(_r,"overflowY")},elementCouldBeHScrolled=function(_r){return elementCanBeScrolled(_r,"overflowX")},locationCouldBeScrolled=function(_r,Tr){var Rr=Tr;do{typeof ShadowRoot<"u"&&Rr instanceof ShadowRoot&&(Rr=Rr.host);var Ar=elementCouldBeScrolled(_r,Rr);if(Ar){var Pr=getScrollVariables(_r,Rr),Lr=Pr[1],Mr=Pr[2];if(Lr>Mr)return!0}Rr=Rr.parentNode}while(Rr&&Rr!==document.body);return!1},getVScrollVariables=function(_r){var Tr=_r.scrollTop,Rr=_r.scrollHeight,Ar=_r.clientHeight;return[Tr,Rr,Ar]},getHScrollVariables=function(_r){var Tr=_r.scrollLeft,Rr=_r.scrollWidth,Ar=_r.clientWidth;return[Tr,Rr,Ar]},elementCouldBeScrolled=function(_r,Tr){return _r==="v"?elementCouldBeVScrolled(Tr):elementCouldBeHScrolled(Tr)},getScrollVariables=function(_r,Tr){return _r==="v"?getVScrollVariables(Tr):getHScrollVariables(Tr)},getDirectionFactor=function(_r,Tr){return _r==="h"&&Tr==="rtl"?-1:1},handleScroll=function(_r,Tr,Rr,Ar,Pr){var Lr=getDirectionFactor(_r,window.getComputedStyle(Tr).direction),Mr=Lr*Ar,Fr=Rr.target,zr=Tr.contains(Fr),Ur=!1,Vr=Mr>0,Nr=0,Dr=0;do{var jr=getScrollVariables(_r,Fr),Gr=jr[0],Wr=jr[1],qr=jr[2],Kr=Wr-qr-Lr*Gr;(Gr||Kr)&&elementCouldBeScrolled(_r,Fr)&&(Nr+=Kr,Dr+=Gr),Fr=Fr.parentNode}while(!zr&&Fr!==document.body||zr&&(Tr.contains(Fr)||Tr===Fr));return(Vr&&(Pr&&Nr===0||!Pr&&Mr>Nr)||!Vr&&(Pr&&Dr===0||!Pr&&-Mr>Dr))&&(Ur=!0),Ur},getTouchXY=function(_r){return"changedTouches"in _r?[_r.changedTouches[0].clientX,_r.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(_r){return[_r.deltaX,_r.deltaY]},extractRef=function(_r){return _r&&"current"in _r?_r.current:_r},deltaCompare=function(_r,Tr){return _r[0]===Tr[0]&&_r[1]===Tr[1]},generateStyle=function(_r){return`
  .block-interactivity-`.concat(_r,` {pointer-events: none;}
  .allow-interactivity-`).concat(_r,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(_r){var Tr=reactExports.useRef([]),Rr=reactExports.useRef([0,0]),Ar=reactExports.useRef(),Pr=reactExports.useState(idCounter++)[0],Lr=reactExports.useState(function(){return styleSingleton()})[0],Mr=reactExports.useRef(_r);reactExports.useEffect(function(){Mr.current=_r},[_r]),reactExports.useEffect(function(){if(_r.inert){document.body.classList.add("block-interactivity-".concat(Pr));var Wr=__spreadArray([_r.lockRef.current],(_r.shards||[]).map(extractRef),!0).filter(Boolean);return Wr.forEach(function(qr){return qr.classList.add("allow-interactivity-".concat(Pr))}),function(){document.body.classList.remove("block-interactivity-".concat(Pr)),Wr.forEach(function(qr){return qr.classList.remove("allow-interactivity-".concat(Pr))})}}},[_r.inert,_r.lockRef.current,_r.shards]);var Fr=reactExports.useCallback(function(Wr,qr){if("touches"in Wr&&Wr.touches.length===2)return!Mr.current.allowPinchZoom;var Kr=getTouchXY(Wr),Xr=Rr.current,Zr="deltaX"in Wr?Wr.deltaX:Xr[0]-Kr[0],Jr="deltaY"in Wr?Wr.deltaY:Xr[1]-Kr[1],_i,es=Wr.target,ts=Math.abs(Zr)>Math.abs(Jr)?"h":"v";if("touches"in Wr&&ts==="h"&&es.type==="range")return!1;var rs=locationCouldBeScrolled(ts,es);if(!rs)return!0;if(rs?_i=ts:(_i=ts==="v"?"h":"v",rs=locationCouldBeScrolled(ts,es)),!rs)return!1;if(!Ar.current&&"changedTouches"in Wr&&(Zr||Jr)&&(Ar.current=_i),!_i)return!0;var ns=Ar.current||_i;return handleScroll(ns,qr,Wr,ns==="h"?Zr:Jr,!0)},[]),zr=reactExports.useCallback(function(Wr){var qr=Wr;if(!(!lockStack.length||lockStack[lockStack.length-1]!==Lr)){var Kr="deltaY"in qr?getDeltaXY(qr):getTouchXY(qr),Xr=Tr.current.filter(function(_i){return _i.name===qr.type&&_i.target===qr.target&&deltaCompare(_i.delta,Kr)})[0];if(Xr&&Xr.should){qr.cancelable&&qr.preventDefault();return}if(!Xr){var Zr=(Mr.current.shards||[]).map(extractRef).filter(Boolean).filter(function(_i){return _i.contains(qr.target)}),Jr=Zr.length>0?Fr(qr,Zr[0]):!Mr.current.noIsolation;Jr&&qr.cancelable&&qr.preventDefault()}}},[]),Ur=reactExports.useCallback(function(Wr,qr,Kr,Xr){var Zr={name:Wr,delta:qr,target:Kr,should:Xr};Tr.current.push(Zr),setTimeout(function(){Tr.current=Tr.current.filter(function(Jr){return Jr!==Zr})},1)},[]),Vr=reactExports.useCallback(function(Wr){Rr.current=getTouchXY(Wr),Ar.current=void 0},[]),Nr=reactExports.useCallback(function(Wr){Ur(Wr.type,getDeltaXY(Wr),Wr.target,Fr(Wr,_r.lockRef.current))},[]),Dr=reactExports.useCallback(function(Wr){Ur(Wr.type,getTouchXY(Wr),Wr.target,Fr(Wr,_r.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(Lr),_r.setCallbacks({onScrollCapture:Nr,onWheelCapture:Nr,onTouchMoveCapture:Dr}),document.addEventListener("wheel",zr,nonPassive),document.addEventListener("touchmove",zr,nonPassive),document.addEventListener("touchstart",Vr,nonPassive),function(){lockStack=lockStack.filter(function(Wr){return Wr!==Lr}),document.removeEventListener("wheel",zr,nonPassive),document.removeEventListener("touchmove",zr,nonPassive),document.removeEventListener("touchstart",Vr,nonPassive)}},[]);var jr=_r.removeScrollBar,Gr=_r.inert;return reactExports.createElement(reactExports.Fragment,null,Gr?reactExports.createElement(Lr,{styles:generateStyle(Pr)}):null,jr?reactExports.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(_r,Tr){return reactExports.createElement(RemoveScroll,__assign({},_r,{ref:Tr,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;const $01b9c$RemoveScroll=ReactRemoveScroll,$cb5cc270b50c6fcd$var$POPOVER_NAME="Popover",[$cb5cc270b50c6fcd$var$createPopoverContext,$cb5cc270b50c6fcd$export$c8393c9e73286932]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cb5cc270b50c6fcd$var$POPOVER_NAME,[$cf1ac5d9fe0e8206$export$722aac194ae923]),$cb5cc270b50c6fcd$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),[$cb5cc270b50c6fcd$var$PopoverProvider,$cb5cc270b50c6fcd$var$usePopoverContext]=$cb5cc270b50c6fcd$var$createPopoverContext($cb5cc270b50c6fcd$var$POPOVER_NAME),$cb5cc270b50c6fcd$export$5b6b19405a83ff9d=_r=>{const{__scopePopover:Tr,children:Rr,open:Ar,defaultOpen:Pr,onOpenChange:Lr,modal:Mr=!1}=_r,Fr=$cb5cc270b50c6fcd$var$usePopperScope(Tr),zr=reactExports.useRef(null),[Ur,Vr]=reactExports.useState(!1),[Nr=!1,Dr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Ar,defaultProp:Pr,onChange:Lr});return reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,Fr,reactExports.createElement($cb5cc270b50c6fcd$var$PopoverProvider,{scope:Tr,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),triggerRef:zr,open:Nr,onOpenChange:Dr,onOpenToggle:reactExports.useCallback(()=>Dr(jr=>!jr),[Dr]),hasCustomAnchor:Ur,onCustomAnchorAdd:reactExports.useCallback(()=>Vr(!0),[]),onCustomAnchorRemove:reactExports.useCallback(()=>Vr(!1),[]),modal:Mr},Rr))},$cb5cc270b50c6fcd$var$TRIGGER_NAME="PopoverTrigger",$cb5cc270b50c6fcd$export$7dacb05d26466c3=reactExports.forwardRef((_r,Tr)=>{const{__scopePopover:Rr,...Ar}=_r,Pr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$TRIGGER_NAME,Rr),Lr=$cb5cc270b50c6fcd$var$usePopperScope(Rr),Mr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Pr.triggerRef),Fr=reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button","aria-haspopup":"dialog","aria-expanded":Pr.open,"aria-controls":Pr.contentId,"data-state":$cb5cc270b50c6fcd$var$getState(Pr.open)},Ar,{ref:Mr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onClick,Pr.onOpenToggle)}));return Pr.hasCustomAnchor?Fr:reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$1({asChild:!0},Lr),Fr)}),$cb5cc270b50c6fcd$var$PORTAL_NAME="PopoverPortal",[$cb5cc270b50c6fcd$var$PortalProvider,$cb5cc270b50c6fcd$var$usePortalContext]=$cb5cc270b50c6fcd$var$createPopoverContext($cb5cc270b50c6fcd$var$PORTAL_NAME,{forceMount:void 0}),$cb5cc270b50c6fcd$var$CONTENT_NAME="PopoverContent",$cb5cc270b50c6fcd$export$d7e1f420b25549ff=reactExports.forwardRef((_r,Tr)=>{const Rr=$cb5cc270b50c6fcd$var$usePortalContext($cb5cc270b50c6fcd$var$CONTENT_NAME,_r.__scopePopover),{forceMount:Ar=Rr.forceMount,...Pr}=_r,Lr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,_r.__scopePopover);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:Ar||Lr.open},Lr.modal?reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentModal,_extends$1({},Pr,{ref:Tr})):reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentNonModal,_extends$1({},Pr,{ref:Tr})))}),$cb5cc270b50c6fcd$var$PopoverContentModal=reactExports.forwardRef((_r,Tr)=>{const Rr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,_r.__scopePopover),Ar=reactExports.useRef(null),Pr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Ar),Lr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const Mr=Ar.current;if(Mr)return hideOthers(Mr)},[]),reactExports.createElement($01b9c$RemoveScroll,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0},reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentImpl,_extends$1({},_r,{ref:Pr,trapFocus:Rr.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onCloseAutoFocus,Mr=>{var Fr;Mr.preventDefault(),Lr.current||(Fr=Rr.triggerRef.current)===null||Fr===void 0||Fr.focus()}),onPointerDownOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onPointerDownOutside,Mr=>{const Fr=Mr.detail.originalEvent,zr=Fr.button===0&&Fr.ctrlKey===!0,Ur=Fr.button===2||zr;Lr.current=Ur},{checkForDefaultPrevented:!1}),onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onFocusOutside,Mr=>Mr.preventDefault(),{checkForDefaultPrevented:!1})})))}),$cb5cc270b50c6fcd$var$PopoverContentNonModal=reactExports.forwardRef((_r,Tr)=>{const Rr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,_r.__scopePopover),Ar=reactExports.useRef(!1),Pr=reactExports.useRef(!1);return reactExports.createElement($cb5cc270b50c6fcd$var$PopoverContentImpl,_extends$1({},_r,{ref:Tr,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Lr=>{var Mr;if((Mr=_r.onCloseAutoFocus)===null||Mr===void 0||Mr.call(_r,Lr),!Lr.defaultPrevented){var Fr;Ar.current||(Fr=Rr.triggerRef.current)===null||Fr===void 0||Fr.focus(),Lr.preventDefault()}Ar.current=!1,Pr.current=!1},onInteractOutside:Lr=>{var Mr,Fr;(Mr=_r.onInteractOutside)===null||Mr===void 0||Mr.call(_r,Lr),Lr.defaultPrevented||(Ar.current=!0,Lr.detail.originalEvent.type==="pointerdown"&&(Pr.current=!0));const zr=Lr.target;((Fr=Rr.triggerRef.current)===null||Fr===void 0?void 0:Fr.contains(zr))&&Lr.preventDefault(),Lr.detail.originalEvent.type==="focusin"&&Pr.current&&Lr.preventDefault()}}))}),$cb5cc270b50c6fcd$var$PopoverContentImpl=reactExports.forwardRef((_r,Tr)=>{const{__scopePopover:Rr,trapFocus:Ar,onOpenAutoFocus:Pr,onCloseAutoFocus:Lr,disableOutsidePointerEvents:Mr,onEscapeKeyDown:Fr,onPointerDownOutside:zr,onFocusOutside:Ur,onInteractOutside:Vr,...Nr}=_r,Dr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CONTENT_NAME,Rr),jr=$cb5cc270b50c6fcd$var$usePopperScope(Rr);return $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(),reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,loop:!0,trapped:Ar,onMountAutoFocus:Pr,onUnmountAutoFocus:Lr},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:Mr,onInteractOutside:Vr,onEscapeKeyDown:Fr,onPointerDownOutside:zr,onFocusOutside:Ur,onDismiss:()=>Dr.onOpenChange(!1)},reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$1({"data-state":$cb5cc270b50c6fcd$var$getState(Dr.open),role:"dialog",id:Dr.contentId},jr,Nr,{ref:Tr,style:{...Nr.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))}),$cb5cc270b50c6fcd$var$CLOSE_NAME="PopoverClose",$cb5cc270b50c6fcd$export$d6ac43ebaa40d53e=reactExports.forwardRef((_r,Tr)=>{const{__scopePopover:Rr,...Ar}=_r,Pr=$cb5cc270b50c6fcd$var$usePopoverContext($cb5cc270b50c6fcd$var$CLOSE_NAME,Rr);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button"},Ar,{ref:Tr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onClick,()=>Pr.onOpenChange(!1))}))}),$cb5cc270b50c6fcd$export$3152841115e061b2=reactExports.forwardRef((_r,Tr)=>{const{__scopePopover:Rr,...Ar}=_r,Pr=$cb5cc270b50c6fcd$var$usePopperScope(Rr);return reactExports.createElement($cf1ac5d9fe0e8206$export$21b07c8f274aebd5,_extends$1({},Pr,Ar,{ref:Tr}))});function $cb5cc270b50c6fcd$var$getState(_r){return _r?"open":"closed"}const $cb5cc270b50c6fcd$export$be92b6f5f03c0fe9=$cb5cc270b50c6fcd$export$5b6b19405a83ff9d,$cb5cc270b50c6fcd$export$41fb9f06171c75f4=$cb5cc270b50c6fcd$export$7dacb05d26466c3,$cb5cc270b50c6fcd$export$7c6e2c02157bb7d2=$cb5cc270b50c6fcd$export$d7e1f420b25549ff,$cb5cc270b50c6fcd$export$f39c2d165cd861fe=$cb5cc270b50c6fcd$export$d6ac43ebaa40d53e,$cb5cc270b50c6fcd$export$21b07c8f274aebd5=$cb5cc270b50c6fcd$export$3152841115e061b2;var openseadragon={exports:{}};(function(module){//! openseadragon 2.4.2
//! Built on 2020-03-05
//! Git commit: v2.4.2-0-c450749
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(_r){return new OpenSeadragon.Viewer(_r)}(function(_r){_r.version={versionStr:"2.4.2",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("2",10)};var Tr={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},Rr=Object.prototype.toString,Ar=Object.prototype.hasOwnProperty;_r.isFunction=function(Pr){return _r.type(Pr)==="function"},_r.isArray=Array.isArray||function(Pr){return _r.type(Pr)==="array"},_r.isWindow=function(Pr){return Pr&&typeof Pr=="object"&&"setInterval"in Pr},_r.type=function(Pr){return Pr==null?String(Pr):Tr[Rr.call(Pr)]||"object"},_r.isPlainObject=function(Pr){if(!Pr||OpenSeadragon.type(Pr)!=="object"||Pr.nodeType||_r.isWindow(Pr)||Pr.constructor&&!Ar.call(Pr,"constructor")&&!Ar.call(Pr.constructor.prototype,"isPrototypeOf"))return!1;var Lr;for(var Mr in Pr)Lr=Mr;return Lr===void 0||Ar.call(Pr,Lr)},_r.isEmptyObject=function(Pr){for(var Lr in Pr)return!1;return!0},_r.freezeObject=function(Pr){return Object.freeze?_r.freezeObject=Object.freeze:_r.freezeObject=function(Lr){return Lr},_r.freezeObject(Pr)},_r.supportsCanvas=function(){var Pr=document.createElement("canvas");return!!(_r.isFunction(Pr.getContext)&&Pr.getContext("2d"))}(),_r.isCanvasTainted=function(Pr){var Lr=!1;try{Pr.getContext("2d").getImageData(0,0,1,1)}catch{Lr=!0}return Lr},_r.pixelDensityRatio=function(){if(_r.supportsCanvas){var Pr=document.createElement("canvas").getContext("2d"),Lr=window.devicePixelRatio||1,Mr=Pr.webkitBackingStorePixelRatio||Pr.mozBackingStorePixelRatio||Pr.msBackingStorePixelRatio||Pr.oBackingStorePixelRatio||Pr.backingStorePixelRatio||1;return Math.max(Lr,1)/Mr}else return 1}()})(OpenSeadragon),function($){$.extend=function(){var _r,Tr,Rr,Ar,Pr,Lr,Mr=arguments[0]||{},Fr=arguments.length,zr=!1,Ur=1;for(typeof Mr=="boolean"&&(zr=Mr,Mr=arguments[1]||{},Ur=2),typeof Mr!="object"&&!OpenSeadragon.isFunction(Mr)&&(Mr={}),Fr===Ur&&(Mr=this,--Ur);Ur<Fr;Ur++)if(_r=arguments[Ur],_r!==null||_r!==void 0)for(Tr in _r)Rr=Mr[Tr],Ar=_r[Tr],Mr!==Ar&&(zr&&Ar&&(OpenSeadragon.isPlainObject(Ar)||(Pr=OpenSeadragon.isArray(Ar)))?(Pr?(Pr=!1,Lr=Rr&&OpenSeadragon.isArray(Rr)?Rr:[]):Lr=Rr&&OpenSeadragon.isPlainObject(Rr)?Rr:{},Mr[Tr]=OpenSeadragon.extend(zr,Lr,Ar)):Ar!==void 0&&(Mr[Tr]=Ar));return Mr};var isIOSDevice=function(){if(typeof navigator!="object")return!1;var _r=navigator.userAgent;return typeof _r!="string"?!1:_r.indexOf("iPhone")!==-1||_r.indexOf("iPad")!==-1||_r.indexOf("iPod")!==-1};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(_r,Tr){return function(){var Rr=arguments;return Rr===void 0&&(Rr=[]),Tr.apply(_r,Rr)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(_r){return typeof _r=="string"&&(_r=document.getElementById(_r)),_r},getElementPosition:function(_r){var Tr=new $.Point,Rr,Ar;for(_r=$.getElement(_r),Rr=$.getElementStyle(_r).position=="fixed",Ar=getOffsetParent(_r,Rr);Ar;)Tr.x+=_r.offsetLeft,Tr.y+=_r.offsetTop,Rr&&(Tr=Tr.plus($.getPageScroll())),_r=Ar,Rr=$.getElementStyle(_r).position=="fixed",Ar=getOffsetParent(_r,Rr);return Tr},getElementOffset:function(_r){_r=$.getElement(_r);var Tr=_r&&_r.ownerDocument,Rr,Ar,Pr={top:0,left:0};return Tr?(Rr=Tr.documentElement,typeof _r.getBoundingClientRect<"u"&&(Pr=_r.getBoundingClientRect()),Ar=Tr==Tr.window?Tr:Tr.nodeType===9?Tr.defaultView||Tr.parentWindow:!1,new $.Point(Pr.left+(Ar.pageXOffset||Rr.scrollLeft)-(Rr.clientLeft||0),Pr.top+(Ar.pageYOffset||Rr.scrollTop)-(Rr.clientTop||0))):new $.Point},getElementSize:function(_r){return _r=$.getElement(_r),new $.Point(_r.clientWidth,_r.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(_r){return _r=$.getElement(_r),_r.currentStyle}:function(_r){return _r=$.getElement(_r),window.getComputedStyle(_r,"")},getCssPropertyWithVendorPrefix:function(_r){var Tr={};return $.getCssPropertyWithVendorPrefix=function(Rr){if(Tr[Rr]!==void 0)return Tr[Rr];var Ar=document.createElement("div").style,Pr=null;if(Ar[Rr]!==void 0)Pr=Rr;else for(var Lr=["Webkit","Moz","MS","O","webkit","moz","ms","o"],Mr=$.capitalizeFirstLetter(Rr),Fr=0;Fr<Lr.length;Fr++){var zr=Lr[Fr]+Mr;if(Ar[zr]!==void 0){Pr=zr;break}}return Tr[Rr]=Pr,Pr},$.getCssPropertyWithVendorPrefix(_r)},capitalizeFirstLetter:function(_r){return _r.charAt(0).toUpperCase()+_r.slice(1)},positiveModulo:function(_r,Tr){var Rr=_r%Tr;return Rr<0&&(Rr+=Tr),Rr},pointInElement:function(_r,Tr){_r=$.getElement(_r);var Rr=$.getElementOffset(_r),Ar=$.getElementSize(_r);return Tr.x>=Rr.x&&Tr.x<Rr.x+Ar.x&&Tr.y<Rr.y+Ar.y&&Tr.y>=Rr.y},getEvent:function(_r){return _r?$.getEvent=function(Tr){return Tr}:$.getEvent=function(){return window.event},$.getEvent(_r)},getMousePosition:function(_r){if(typeof _r.pageX=="number")$.getMousePosition=function(Tr){var Rr=new $.Point;return Tr=$.getEvent(Tr),Rr.x=Tr.pageX,Rr.y=Tr.pageY,Rr};else if(typeof _r.clientX=="number")$.getMousePosition=function(Tr){var Rr=new $.Point;return Tr=$.getEvent(Tr),Rr.x=Tr.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,Rr.y=Tr.clientY+document.body.scrollTop+document.documentElement.scrollTop,Rr};else throw new Error("Unknown event mouse position, no known technique.");return $.getMousePosition(_r)},getPageScroll:function(){var _r=document.documentElement||{},Tr=document.body||{};if(typeof window.pageXOffset=="number")$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(Tr.scrollLeft||Tr.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else if(_r.scrollLeft||_r.scrollTop)$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new $.Point(0,0);return $.getPageScroll()},setPageScroll:function(_r){if(typeof window.scrollTo<"u")$.setPageScroll=function(Ar){window.scrollTo(Ar.x,Ar.y)};else{var Tr=$.getPageScroll();if(Tr.x===_r.x&&Tr.y===_r.y)return;document.body.scrollLeft=_r.x,document.body.scrollTop=_r.y;var Rr=$.getPageScroll();if(Rr.x!==Tr.x&&Rr.y!==Tr.y){$.setPageScroll=function(Ar){document.body.scrollLeft=Ar.x,document.body.scrollTop=Ar.y};return}if(document.documentElement.scrollLeft=_r.x,document.documentElement.scrollTop=_r.y,Rr=$.getPageScroll(),Rr.x!==Tr.x&&Rr.y!==Tr.y){$.setPageScroll=function(Ar){document.documentElement.scrollLeft=Ar.x,document.documentElement.scrollTop=Ar.y};return}$.setPageScroll=function(Ar){}}return $.setPageScroll(_r)},getWindowSize:function(){var _r=document.documentElement||{},Tr=document.body||{};if(typeof window.innerWidth=="number")$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(_r.clientWidth||_r.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(Tr.clientWidth||Tr.clientHeight)$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return $.getWindowSize()},makeCenteredNode:function(_r){_r=$.getElement(_r);var Tr=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(Tr[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(Tr[1].style,{display:"table-row"}),$.extend(Tr[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),Tr[0].appendChild(Tr[1]),Tr[1].appendChild(Tr[2]),Tr[2].appendChild(_r),Tr[0]},makeNeutralElement:function(_r){var Tr=document.createElement(_r),Rr=Tr.style;return Rr.background="transparent none",Rr.border="none",Rr.margin="0px",Rr.padding="0px",Rr.position="static",Tr},now:function(){return Date.now?$.now=Date.now:$.now=function(){return new Date().getTime()},$.now()},makeTransparentImage:function(_r){return $.makeTransparentImage=function(Tr){var Rr=$.makeNeutralElement("img");return Rr.src=Tr,Rr},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(Tr){var Rr=$.makeNeutralElement("img"),Ar=null;return Ar=$.makeNeutralElement("span"),Ar.style.display="inline-block",Rr.onload=function(){Ar.style.width=Ar.style.width||Rr.width+"px",Ar.style.height=Ar.style.height||Rr.height+"px",Rr.onload=null,Rr=null},Rr.src=Tr,Ar.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+Tr+"', sizingMethod='scale')",Ar}),$.makeTransparentImage(_r)},setElementOpacity:function(_r,Tr,Rr){var Ar,Pr;_r=$.getElement(_r),Rr&&!$.Browser.alpha&&(Tr=Math.round(Tr)),$.Browser.opacity?_r.style.opacity=Tr<1?Tr:"":Tr<1?(Ar=Math.round(100*Tr),Pr="alpha(opacity="+Ar+")",_r.style.filter=Pr):_r.style.filter=""},setElementTouchActionNone:function(_r){_r=$.getElement(_r),typeof _r.style.touchAction<"u"?_r.style.touchAction="none":typeof _r.style.msTouchAction<"u"&&(_r.style.msTouchAction="none")},addClass:function(_r,Tr){_r=$.getElement(_r),_r.className?(" "+_r.className+" ").indexOf(" "+Tr+" ")===-1&&(_r.className+=" "+Tr):_r.className=Tr},indexOf:function(_r,Tr,Rr){return Array.prototype.indexOf?this.indexOf=function(Ar,Pr,Lr){return Ar.indexOf(Pr,Lr)}:this.indexOf=function(Ar,Pr,Lr){var Mr,Fr=Lr||0,zr;if(!Ar)throw new TypeError;if(zr=Ar.length,zr===0||Fr>=zr)return-1;for(Fr<0&&(Fr=zr-Math.abs(Fr)),Mr=Fr;Mr<zr;Mr++)if(Ar[Mr]===Pr)return Mr;return-1},this.indexOf(_r,Tr,Rr)},removeClass:function(_r,Tr){var Rr,Ar=[],Pr;for(_r=$.getElement(_r),Rr=_r.className.split(/\s+/),Pr=0;Pr<Rr.length;Pr++)Rr[Pr]&&Rr[Pr]!==Tr&&Ar.push(Rr[Pr]);_r.className=Ar.join(" ")},addEvent:function(){if(window.addEventListener)return function(_r,Tr,Rr,Ar){_r=$.getElement(_r),_r.addEventListener(Tr,Rr,Ar)};if(window.attachEvent)return function(_r,Tr,Rr,Ar){_r=$.getElement(_r),_r.attachEvent("on"+Tr,Rr)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(_r,Tr,Rr,Ar){_r=$.getElement(_r),_r.removeEventListener(Tr,Rr,Ar)};if(window.detachEvent)return function(_r,Tr,Rr,Ar){_r=$.getElement(_r),_r.detachEvent("on"+Tr,Rr)};throw new Error("No known event model.")}(),cancelEvent:function(_r){_r=$.getEvent(_r),_r.preventDefault?$.cancelEvent=function(Tr){Tr.preventDefault()}:$.cancelEvent=function(Tr){Tr=$.getEvent(Tr),Tr.cancel=!0,Tr.returnValue=!1},$.cancelEvent(_r)},stopEvent:function(_r){_r=$.getEvent(_r),_r.stopPropagation?$.stopEvent=function(Tr){Tr.stopPropagation()}:$.stopEvent=function(Tr){Tr=$.getEvent(Tr),Tr.cancelBubble=!0},$.stopEvent(_r)},createCallback:function(_r,Tr){var Rr=[],Ar;for(Ar=2;Ar<arguments.length;Ar++)Rr.push(arguments[Ar]);return function(){var Pr=Rr.concat([]),Lr;for(Lr=0;Lr<arguments.length;Lr++)Pr.push(arguments[Lr]);return Tr.apply(_r,Pr)}},getUrlParameter:function(_r){var Tr=URLPARAMS[_r];return Tr||null},getUrlProtocol:function(_r){var Tr=_r.match(/^([a-z]+:)\/\//i);return Tr===null?window.location.protocol:Tr[1].toLowerCase()},createAjaxRequest:function(_r){var Tr;try{Tr=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{Tr=!1}if(Tr)window.XMLHttpRequest?$.createAjaxRequest=function(Rr){return Rr?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)$.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return $.createAjaxRequest(_r)},makeAjaxRequest:function(_r,Tr,Rr){var Ar,Pr,Lr;$.isPlainObject(_r)&&(Tr=_r.success,Rr=_r.error,Ar=_r.withCredentials,Pr=_r.headers,Lr=_r.responseType||null,_r=_r.url);var Mr=$.getUrlProtocol(_r),Fr=$.createAjaxRequest(Mr==="file:");if(!$.isFunction(Tr))throw new Error("makeAjaxRequest requires a success callback");Fr.onreadystatechange=function(){Fr.readyState==4&&(Fr.onreadystatechange=function(){},Fr.status>=200&&Fr.status<300||Fr.status===0&&Mr!=="http:"&&Mr!=="https:"?Tr(Fr):($.console.log("AJAX request returned %d: %s",Fr.status,_r),$.isFunction(Rr)&&Rr(Fr)))};try{if(Fr.open("GET",_r,!0),Lr&&(Fr.responseType=Lr),Pr)for(var zr in Pr)Object.prototype.hasOwnProperty.call(Pr,zr)&&Pr[zr]&&Fr.setRequestHeader(zr,Pr[zr]);Ar&&(Fr.withCredentials=!0),Fr.send(null)}catch(Dr){var Ur=Dr.message,Vr=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(Vr&&typeof Dr.number<"u"&&Dr.number==-2147024891&&(Ur+=`
See http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain`),$.console.log("%s while making AJAX request: %s",Dr.name,Ur),Fr.onreadystatechange=function(){},window.XDomainRequest){var Nr=new window.XDomainRequest;if(Nr){Nr.onload=function(jr){$.isFunction(Tr)&&Tr({responseText:Nr.responseText,status:200,statusText:"OK"})},Nr.onerror=function(jr){$.isFunction(Rr)&&Rr({responseText:Nr.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{Nr.open("GET",_r),Nr.send()}catch{$.isFunction(Rr)&&Rr(Fr,Dr)}}}else $.isFunction(Rr)&&Rr(Fr,Dr)}return Fr},jsonp:function(_r){var Tr,Rr=_r.url,Ar=document.head||document.getElementsByTagName("head")[0]||document.documentElement,Pr=_r.callbackName||"openseadragon"+$.now(),Lr=window[Pr],Mr="$1"+Pr+"$2",Fr=_r.param||"callback",zr=_r.callback;Rr=Rr.replace(/(\=)\?(&|$)|\?\?/i,Mr),Rr+=(/\?/.test(Rr)?"&":"?")+Fr+"="+Pr,window[Pr]=function(Ur){if(Lr)window[Pr]=Lr;else try{delete window[Pr]}catch{}zr&&$.isFunction(zr)&&zr(Ur)},Tr=document.createElement("script"),(_r.async!==void 0||_r.async!==!1)&&(Tr.async="async"),_r.scriptCharset&&(Tr.charset=_r.scriptCharset),Tr.src=Rr,Tr.onload=Tr.onreadystatechange=function(Ur,Vr){(Vr||!Tr.readyState||/loaded|complete/.test(Tr.readyState))&&(Tr.onload=Tr.onreadystatechange=null,Ar&&Tr.parentNode&&Ar.removeChild(Tr),Tr=void 0)},Ar.insertBefore(Tr,Ar.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(_r){if(window.DOMParser)$.parseXml=function(Tr){var Rr=null,Ar;return Ar=new DOMParser,Rr=Ar.parseFromString(Tr,"text/xml"),Rr};else if(window.ActiveXObject)$.parseXml=function(Tr){var Rr=null;return Rr=new ActiveXObject("Microsoft.XMLDOM"),Rr.async=!1,Rr.loadXML(Tr),Rr};else throw new Error("Browser doesn't support XML DOM.");return $.parseXml(_r)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(_r){return _r=_r||"",!!FILEFORMATS[_r.toLowerCase()]}});var nullfunction=function(_r){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};(function(){var _r=navigator.appVersion,Tr=navigator.userAgent,Rr;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(Tr.substring(Tr.indexOf("MSIE")+5,Tr.indexOf(";",Tr.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(Tr.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(Tr.substring(Tr.indexOf("Firefox")+8))):Tr.indexOf("Safari")>=0?($.Browser.vendor=Tr.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(Tr.substring(Tr.substring(0,Tr.indexOf("Safari")).lastIndexOf("/")+1,Tr.indexOf("Safari")))):(Rr=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),Rr.exec(Tr)!==null&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(_r);break}var Ar=window.location.search.substring(1),Pr=Ar.split("&"),Lr,Mr,Fr;for(Fr=0;Fr<Pr.length;Fr++)if(Lr=Pr[Fr],Mr=Lr.indexOf("="),Mr>0){var zr=Lr.substring(0,Mr),Ur=Lr.substring(Mr+1);try{URLPARAMS[zr]=decodeURIComponent(Ur)}catch{$.console.error("Ignoring malformed URL parameter: %s=%s",zr,Ur)}}$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)})(),function(_r){var Tr=_r.requestAnimationFrame||_r.mozRequestAnimationFrame||_r.webkitRequestAnimationFrame||_r.msRequestAnimationFrame,Rr=_r.cancelAnimationFrame||_r.mozCancelAnimationFrame||_r.webkitCancelAnimationFrame||_r.msCancelAnimationFrame;if(Tr&&Rr)$.requestAnimationFrame=function(){return Tr.apply(_r,arguments)},$.cancelAnimationFrame=function(){return Rr.apply(_r,arguments)};else{var Ar=[],Pr=[],Lr=0,Mr;$.requestAnimationFrame=function(Fr){return Ar.push([++Lr,Fr]),Mr||(Mr=setInterval(function(){if(Ar.length){var zr=$.now(),Ur=Pr;for(Pr=Ar,Ar=Ur;Pr.length;)Pr.shift()[1](zr)}else clearInterval(Mr),Mr=void 0},1e3/50)),Lr},$.cancelAnimationFrame=function(Fr){var zr,Ur;for(zr=0,Ur=Ar.length;zr<Ur;zr+=1)if(Ar[zr][0]===Fr){Ar.splice(zr,1);return}for(zr=0,Ur=Pr.length;zr<Ur;zr+=1)if(Pr[zr][0]===Fr){Pr.splice(zr,1);return}}}}(window);function getOffsetParent(_r,Tr){return Tr&&_r!=document.body?document.body:_r.offsetParent}}(OpenSeadragon),function(_r,Tr){module.exports?module.exports=Tr():_r.OpenSeadragon=Tr()}(commonjsGlobal,function(){return OpenSeadragon}),function(_r){var Tr={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(Tr.supportsFullScreen=!0,Tr.getFullScreenElement=function(){return document.fullscreenElement},Tr.requestFullScreen=function(Rr){return Rr.requestFullscreen()},Tr.exitFullScreen=function(){document.exitFullscreen()},Tr.fullScreenEventName="fullscreenchange",Tr.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(Tr.supportsFullScreen=!0,Tr.getFullScreenElement=function(){return document.msFullscreenElement},Tr.requestFullScreen=function(Rr){return Rr.msRequestFullscreen()},Tr.exitFullScreen=function(){document.msExitFullscreen()},Tr.fullScreenEventName="MSFullscreenChange",Tr.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(Tr.supportsFullScreen=!0,Tr.getFullScreenElement=function(){return document.webkitFullscreenElement},Tr.requestFullScreen=function(Rr){return Rr.webkitRequestFullscreen()},Tr.exitFullScreen=function(){document.webkitExitFullscreen()},Tr.fullScreenEventName="webkitfullscreenchange",Tr.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(Tr.supportsFullScreen=!0,Tr.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},Tr.requestFullScreen=function(Rr){return Rr.webkitRequestFullScreen()},Tr.exitFullScreen=function(){document.webkitCancelFullScreen()},Tr.fullScreenEventName="webkitfullscreenchange",Tr.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(Tr.supportsFullScreen=!0,Tr.getFullScreenElement=function(){return document.mozFullScreenElement},Tr.requestFullScreen=function(Rr){return Rr.mozRequestFullScreen()},Tr.exitFullScreen=function(){document.mozCancelFullScreen()},Tr.fullScreenEventName="mozfullscreenchange",Tr.fullScreenErrorEventName="mozfullscreenerror"),Tr.isFullScreen=function(){return Tr.getFullScreenElement()!==null},Tr.cancelFullScreen=function(){_r.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),Tr.exitFullScreen()},_r.extend(_r,Tr)}(OpenSeadragon),function(_r){_r.EventSource=function(){this.events={}},_r.EventSource.prototype={addOnceHandler:function(Tr,Rr,Ar,Pr){var Lr=this;Pr=Pr||1;var Mr=0,Fr=function(zr){Mr++,Mr===Pr&&Lr.removeHandler(Tr,Fr),Rr(zr)};this.addHandler(Tr,Fr,Ar)},addHandler:function(Tr,Rr,Ar){var Pr=this.events[Tr];Pr||(this.events[Tr]=Pr=[]),Rr&&_r.isFunction(Rr)&&(Pr[Pr.length]={handler:Rr,userData:Ar||null})},removeHandler:function(Tr,Rr){var Ar=this.events[Tr],Pr=[],Lr;if(Ar&&_r.isArray(Ar)){for(Lr=0;Lr<Ar.length;Lr++)Ar[Lr].handler!==Rr&&Pr.push(Ar[Lr]);this.events[Tr]=Pr}},removeAllHandlers:function(Tr){if(Tr)this.events[Tr]=[];else for(var Rr in this.events)this.events[Rr]=[]},getHandler:function(Tr){var Rr=this.events[Tr];return!Rr||!Rr.length?null:(Rr=Rr.length===1?[Rr[0]]:Array.apply(null,Rr),function(Ar,Pr){var Lr,Mr=Rr.length;for(Lr=0;Lr<Mr;Lr++)Rr[Lr]&&(Pr.eventSource=Ar,Pr.userData=Rr[Lr].userData,Rr[Lr].handler(Pr))})},raiseEvent:function(Tr,Rr){var Ar=this.getHandler(Tr);Ar&&(Rr||(Rr={}),Ar(this,Rr))}}}(OpenSeadragon),function(_r){var Tr=[],Rr={};_r.MouseTracker=function(ms){Tr.push(this);var ps=arguments;_r.isPlainObject(ms)||(ms={element:ps[0],clickTimeThreshold:ps[1],clickDistThreshold:ps[2]}),this.hash=Math.random(),this.element=_r.getElement(ms.element),this.clickTimeThreshold=ms.clickTimeThreshold||_r.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=ms.clickDistThreshold||_r.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=ms.dblClickTimeThreshold||_r.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=ms.dblClickDistThreshold||_r.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=ms.userData||null,this.stopDelay=ms.stopDelay||50,this.enterHandler=ms.enterHandler||null,this.exitHandler=ms.exitHandler||null,this.pressHandler=ms.pressHandler||null,this.nonPrimaryPressHandler=ms.nonPrimaryPressHandler||null,this.releaseHandler=ms.releaseHandler||null,this.nonPrimaryReleaseHandler=ms.nonPrimaryReleaseHandler||null,this.moveHandler=ms.moveHandler||null,this.scrollHandler=ms.scrollHandler||null,this.clickHandler=ms.clickHandler||null,this.dblClickHandler=ms.dblClickHandler||null,this.dragHandler=ms.dragHandler||null,this.dragEndHandler=ms.dragEndHandler||null,this.pinchHandler=ms.pinchHandler||null,this.stopHandler=ms.stopHandler||null,this.keyDownHandler=ms.keyDownHandler||null,this.keyUpHandler=ms.keyUpHandler||null,this.keyHandler=ms.keyHandler||null,this.focusHandler=ms.focusHandler||null,this.blurHandler=ms.blurHandler||null;var Ps=this;Rr[this.hash]={click:function(Ls){Gr(Ps,Ls)},dblclick:function(Ls){Wr(Ps,Ls)},keydown:function(Ls){qr(Ps,Ls)},keyup:function(Ls){Kr(Ps,Ls)},keypress:function(Ls){Xr(Ps,Ls)},focus:function(Ls){Zr(Ps,Ls)},blur:function(Ls){Jr(Ps,Ls)},wheel:function(Ls){_i(Ps,Ls)},mousewheel:function(Ls){es(Ps,Ls)},DOMMouseScroll:function(Ls){es(Ps,Ls)},MozMousePixelScroll:function(Ls){es(Ps,Ls)},mouseenter:function(Ls){ns(Ps,Ls)},mouseleave:function(Ls){us(Ps,Ls)},mouseover:function(Ls){as(Ps,Ls)},mouseout:function(Ls){xs(Ps,Ls)},mousedown:function(Ls){gs(Ps,Ls)},mouseup:function(Ls){fs(Ps,Ls)},mouseupcaptured:function(Ls){ys(Ps,Ls)},mousemove:function(Ls){Fs(Ps,Ls)},mousemovecaptured:function(Ls){Us(Ps,Ls)},touchstart:function(Ls){qs(Ps,Ls)},touchend:function(Ls){Qs(Ps,Ls)},touchendcaptured:function(Ls){mo(Ps,Ls)},touchmove:function(Ls){so(Ps,Ls)},touchmovecaptured:function(Ls){uo(Ps,Ls)},touchcancel:function(Ls){wo(Ps,Ls)},gesturestart:function(Ls){Co(Ps,Ls)},gesturechange:function(Ls){ds(Ps,Ls)},pointerover:function(Ls){Is(Ps,Ls)},MSPointerOver:function(Ls){Is(Ps,Ls)},pointerout:function(Ls){Gs(Ps,Ls)},MSPointerOut:function(Ls){Gs(Ps,Ls)},pointerdown:function(Ls){to(Ps,Ls)},MSPointerDown:function(Ls){to(Ps,Ls)},pointerup:function(Ls){no(Ps,Ls)},MSPointerUp:function(Ls){no(Ps,Ls)},pointermove:function(Ls){go(Ps,Ls)},MSPointerMove:function(Ls){go(Ps,Ls)},pointercancel:function(Ls){To(Ps,Ls)},MSPointerCancel:function(Ls){To(Ps,Ls)},pointerupcaptured:function(Ls){Ro(Ps,Ls)},pointermovecaptured:function(Ls){No(Ps,Ls)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},ms.startDisabled||this.setTracking(!0)},_r.MouseTracker.prototype={destroy:function(){var ms;for(Lr(this),this.element=null,ms=0;ms<Tr.length;ms++)if(Tr[ms]===this){Tr.splice(ms,1);break}Rr[this.hash]=null,delete Rr[this.hash]},isTracking:function(){return Rr[this.hash].tracking},setTracking:function(ms){return ms?Pr(this):Lr(this),this},getActivePointersListsExceptType:function(ms){for(var ps=Rr[this.hash],Ps=[],Ls=0;Ls<ps.activePointersLists.length;++Ls)ps.activePointersLists[Ls].type!==ms&&Ps.push(ps.activePointersLists[Ls]);return Ps},getActivePointersListByType:function(ms){var ps=Rr[this.hash],Ps,Ls=ps.activePointersLists.length,Zs;for(Ps=0;Ps<Ls;Ps++)if(ps.activePointersLists[Ps].type===ms)return ps.activePointersLists[Ps];return Zs=new _r.MouseTracker.GesturePointList(ms),ps.activePointersLists.push(Zs),Zs},getActivePointerCount:function(){var ms=Rr[this.hash],ps,Ps=ms.activePointersLists.length,Ls=0;for(ps=0;ps<Ps;ps++)Ls+=ms.activePointersLists[ps].getLength();return Ls},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},_r.MouseTracker.resetAllMouseTrackers=function(){for(var ms=0;ms<Tr.length;ms++)Tr[ms].isTracking()&&(Tr[ms].setTracking(!1),Tr[ms].setTracking(!0))},_r.MouseTracker.gesturePointVelocityTracker=function(){var ms=[],ps=0,Ps=0,Ls=function(io,Lo){return io.hash.toString()+Lo.type+Lo.id.toString()},Zs=function(){var io,Lo=ms.length,Yo,Go,Ks=_r.now(),$o,So,Yl;for($o=Ks-Ps,Ps=Ks,io=0;io<Lo;io++)Yo=ms[io],Go=Yo.gPoint,Go.direction=Math.atan2(Go.currentPos.y-Yo.lastPos.y,Go.currentPos.x-Yo.lastPos.x),So=Yo.lastPos.distanceTo(Go.currentPos),Yo.lastPos=Go.currentPos,Yl=1e3*So/($o+1),Go.speed=.75*Yl+.25*Go.speed},Eo=function(io,Lo){var Yo=Ls(io,Lo);ms.push({guid:Yo,gPoint:Lo,lastPos:Lo.currentPos}),ms.length===1&&(Ps=_r.now(),ps=window.setInterval(Zs,50))},yo=function(io,Lo){var Yo=Ls(io,Lo),Go,Ks=ms.length;for(Go=0;Go<Ks;Go++)if(ms[Go].guid===Yo){ms.splice(Go,1),Ks--,Ks===0&&window.clearInterval(ps);break}};return{addPoint:Eo,removePoint:yo}}(),_r.MouseTracker.captureElement=document,_r.MouseTracker.wheelEventName=_r.Browser.vendor==_r.BROWSERS.IE&&_r.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",_r.MouseTracker.supportsMouseCapture=function(){var ms=document.createElement("div");return _r.isFunction(ms.setCapture)&&_r.isFunction(ms.releaseCapture)}(),_r.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",_r.MouseTracker.wheelEventName],_r.MouseTracker.wheelEventName=="DOMMouseScroll"&&_r.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||_r.Browser.vendor!==_r.BROWSERS.IE)?(_r.MouseTracker.havePointerEvents=!0,_r.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),_r.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?_r.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:_r.MouseTracker.maxTouchPoints=0,_r.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(_r.MouseTracker.havePointerEvents=!0,_r.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),_r.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?_r.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:_r.MouseTracker.maxTouchPoints=0,_r.MouseTracker.haveMouseEnter=!1):(_r.MouseTracker.havePointerEvents=!1,_r.Browser.vendor===_r.BROWSERS.IE&&_r.Browser.version<9?(_r.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),_r.MouseTracker.haveMouseEnter=!0):(_r.MouseTracker.subscribeEvents.push("mouseover","mouseout"),_r.MouseTracker.haveMouseEnter=!1),_r.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&_r.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&_r.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),_r.MouseTracker.mousePointerId="legacy-mouse",_r.MouseTracker.maxTouchPoints=10),_r.MouseTracker.GesturePointList=function(ms){this._gPoints=[],this.type=ms,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},_r.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(ms){return this._gPoints.push(ms)},removeById:function(ms){var ps,Ps=this._gPoints.length;for(ps=0;ps<Ps;ps++)if(this._gPoints[ps].id===ms){this._gPoints.splice(ps,1);break}return this._gPoints.length},getByIndex:function(ms){return ms<this._gPoints.length?this._gPoints[ms]:null},getById:function(ms){var ps,Ps=this._gPoints.length;for(ps=0;ps<Ps;ps++)if(this._gPoints[ps].id===ms)return this._gPoints[ps];return null},getPrimary:function(ms){var ps,Ps=this._gPoints.length;for(ps=0;ps<Ps;ps++)if(this._gPoints[ps].isPrimary)return this._gPoints[ps];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function Ar(ms){var ps=Rr[ms.hash],Ps,Ls=ps.activePointersLists.length;for(Ps=0;Ps<Ls;Ps++)ps.activePointersLists[Ps].captureCount>0&&(_r.removeEvent(_r.MouseTracker.captureElement,"mousemove",ps.mousemovecaptured,!0),_r.removeEvent(_r.MouseTracker.captureElement,"mouseup",ps.mouseupcaptured,!0),_r.removeEvent(_r.MouseTracker.captureElement,_r.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",ps.pointermovecaptured,!0),_r.removeEvent(_r.MouseTracker.captureElement,_r.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",ps.pointerupcaptured,!0),_r.removeEvent(_r.MouseTracker.captureElement,"touchmove",ps.touchmovecaptured,!0),_r.removeEvent(_r.MouseTracker.captureElement,"touchend",ps.touchendcaptured,!0),ps.activePointersLists[Ps].captureCount=0);for(Ps=0;Ps<Ls;Ps++)ps.activePointersLists.pop()}function Pr(ms){var ps=Rr[ms.hash],Ps,Ls;if(!ps.tracking){for(Ls=0;Ls<_r.MouseTracker.subscribeEvents.length;Ls++)Ps=_r.MouseTracker.subscribeEvents[Ls],_r.addEvent(ms.element,Ps,ps[Ps],!1);Ar(ms),ps.tracking=!0}}function Lr(ms){var ps=Rr[ms.hash],Ps,Ls;if(ps.tracking){for(Ls=0;Ls<_r.MouseTracker.subscribeEvents.length;Ls++)Ps=_r.MouseTracker.subscribeEvents[Ls],_r.removeEvent(ms.element,Ps,ps[Ps],!1);Ar(ms),ps.tracking=!1}}function Mr(ms,ps){var Ps=Rr[ms.hash];if(ps==="pointerevent")return{upName:_r.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:Ps.pointerupcaptured,moveName:_r.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:Ps.pointermovecaptured};if(ps==="mouse")return{upName:"mouseup",upHandler:Ps.mouseupcaptured,moveName:"mousemove",moveHandler:Ps.mousemovecaptured};if(ps==="touch")return{upName:"touchend",upHandler:Ps.touchendcaptured,moveName:"touchmove",moveHandler:Ps.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function Fr(ms,ps,Ps){var Ls=ms.getActivePointersListByType(ps),Zs;Ls.captureCount+=Ps||1,Ls.captureCount===1&&(_r.Browser.vendor===_r.BROWSERS.IE&&_r.Browser.version<9?ms.element.setCapture(!0):(Zs=Mr(ms,_r.MouseTracker.havePointerEvents?"pointerevent":ps),Bs&&Ws(window.top)&&_r.addEvent(window.top,Zs.upName,Zs.upHandler,!0),_r.addEvent(_r.MouseTracker.captureElement,Zs.upName,Zs.upHandler,!0),_r.addEvent(_r.MouseTracker.captureElement,Zs.moveName,Zs.moveHandler,!0)))}function zr(ms,ps,Ps){var Ls=ms.getActivePointersListByType(ps),Zs;Ls.captureCount-=Ps||1,Ls.captureCount===0&&(_r.Browser.vendor===_r.BROWSERS.IE&&_r.Browser.version<9?ms.element.releaseCapture():(Zs=Mr(ms,_r.MouseTracker.havePointerEvents?"pointerevent":ps),Bs&&Ws(window.top)&&_r.removeEvent(window.top,Zs.upName,Zs.upHandler,!0),_r.removeEvent(_r.MouseTracker.captureElement,Zs.moveName,Zs.moveHandler,!0),_r.removeEvent(_r.MouseTracker.captureElement,Zs.upName,Zs.upHandler,!0)))}function Ur(ms){var ps;if(_r.MouseTracker.unprefixedPointerEvents)ps=ms.pointerType;else switch(ms.pointerType){case 2:ps="touch";break;case 3:ps="pen";break;case 4:ps="mouse";break;default:ps=""}return ps}function Vr(ms){return _r.getMousePosition(ms)}function Nr(ms,ps){return Dr(Vr(ms),ps)}function Dr(ms,ps){var Ps=_r.getElementOffset(ps);return ms.minus(Ps)}function jr(ms,ps){return new _r.Point((ms.x+ps.x)/2,(ms.y+ps.y)/2)}function Gr(ms,ps){ms.clickHandler&&_r.cancelEvent(ps)}function Wr(ms,ps){ms.dblClickHandler&&_r.cancelEvent(ps)}function qr(ms,ps){var Ps;ms.keyDownHandler&&(ps=_r.getEvent(ps),Ps=ms.keyDownHandler({eventSource:ms,keyCode:ps.keyCode?ps.keyCode:ps.charCode,ctrl:ps.ctrlKey,shift:ps.shiftKey,alt:ps.altKey,meta:ps.metaKey,originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Ps||_r.cancelEvent(ps))}function Kr(ms,ps){var Ps;ms.keyUpHandler&&(ps=_r.getEvent(ps),Ps=ms.keyUpHandler({eventSource:ms,keyCode:ps.keyCode?ps.keyCode:ps.charCode,ctrl:ps.ctrlKey,shift:ps.shiftKey,alt:ps.altKey,meta:ps.metaKey,originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Ps||_r.cancelEvent(ps))}function Xr(ms,ps){var Ps;ms.keyHandler&&(ps=_r.getEvent(ps),Ps=ms.keyHandler({eventSource:ms,keyCode:ps.keyCode?ps.keyCode:ps.charCode,ctrl:ps.ctrlKey,shift:ps.shiftKey,alt:ps.altKey,meta:ps.metaKey,originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Ps||_r.cancelEvent(ps))}function Zr(ms,ps){var Ps;ms.focusHandler&&(ps=_r.getEvent(ps),Ps=ms.focusHandler({eventSource:ms,originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Ps===!1&&_r.cancelEvent(ps))}function Jr(ms,ps){var Ps;ms.blurHandler&&(ps=_r.getEvent(ps),Ps=ms.blurHandler({eventSource:ms,originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Ps===!1&&_r.cancelEvent(ps))}function _i(ms,ps){ts(ms,ps,ps)}function es(ms,ps){ps=_r.getEvent(ps);var Ps={target:ps.target||ps.srcElement,type:"wheel",shiftKey:ps.shiftKey||!1,clientX:ps.clientX,clientY:ps.clientY,pageX:ps.pageX?ps.pageX:ps.clientX,pageY:ps.pageY?ps.pageY:ps.clientY,deltaMode:ps.type=="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};_r.MouseTracker.wheelEventName=="mousewheel"?Ps.deltaY=-ps.wheelDelta/_r.DEFAULT_SETTINGS.pixelsPerWheelLine:Ps.deltaY=ps.detail,ts(ms,Ps,ps)}function ts(ms,ps,Ps){var Ls=0,Zs;Ls=ps.deltaY<0?1:-1,ms.scrollHandler&&(Zs=ms.scrollHandler({eventSource:ms,pointerType:"mouse",position:Nr(ps,ms.element),scroll:Ls,shift:ps.shiftKey,isTouchEvent:!1,originalEvent:Ps,preventDefaultAction:!1,userData:ms.userData}),Zs===!1&&_r.cancelEvent(Ps))}function rs(ms,ps){if(ms===ps)return!1;for(;ps&&ps!==ms;)ps=ps.parentNode;return ps===ms}function ns(ms,ps){ps=_r.getEvent(ps),ls(ms,ps)}function as(ms,ps){ps=_r.getEvent(ps),!(ps.currentTarget===ps.relatedTarget||rs(ps.currentTarget,ps.relatedTarget))&&ls(ms,ps)}function ls(ms,ps){var Ps={id:_r.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Vr(ps),currentTime:_r.now()};$a(ms,ps,[Ps])}function us(ms,ps){ps=_r.getEvent(ps),Ts(ms,ps)}function xs(ms,ps){ps=_r.getEvent(ps),!(ps.currentTarget===ps.relatedTarget||rs(ps.currentTarget,ps.relatedTarget))&&Ts(ms,ps)}function Ts(ms,ps){var Ps={id:_r.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Vr(ps),currentTime:_r.now()};Il(ms,ps,[Ps])}function vs(ms){return _r.Browser.vendor===_r.BROWSERS.IE&&_r.Browser.version<9?ms===1?0:ms===2?2:ms===4?1:-1:ms}function gs(ms,ps){var Ps;ps=_r.getEvent(ps),Ps={id:_r.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Vr(ps),currentTime:_r.now()},eu(ms,ps,[Ps],vs(ps.button))&&(_r.stopEvent(ps),Fr(ms,"mouse")),(ms.clickHandler||ms.dblClickHandler||ms.pressHandler||ms.dragHandler||ms.dragEndHandler)&&_r.cancelEvent(ps)}function fs(ms,ps){ks(ms,ps)}function ys(ms,ps){ks(ms,ps),_r.stopEvent(ps)}function ks(ms,ps){var Ps;ps=_r.getEvent(ps),Ps={id:_r.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Vr(ps),currentTime:_r.now()},Fl(ms,ps,[Ps],vs(ps.button))&&zr(ms,"mouse")}function Fs(ms,ps){Vs(ms,ps)}function Us(ms,ps){Vs(ms,ps),_r.stopEvent(ps)}function Vs(ms,ps){var Ps;ps=_r.getEvent(ps),Ps={id:_r.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Vr(ps),currentTime:_r.now()},Kl(ms,ps,[Ps])}function ao(ms,ps,Ps){var Ls,Zs=Ps.getLength(),Eo=[];if(Ps.type==="touch"||Ps.contacts>0){for(Ls=0;Ls<Zs;Ls++)Eo.push(Ps.getByIndex(Ls));Eo.length>0&&(Fl(ms,ps,Eo,0),Ps.captureCount=1,zr(ms,Ps.type),Il(ms,ps,Eo))}}function qs(ms,ps){var Ps,Ls,Zs,Eo=ps.changedTouches.length,yo=[],io,Lo=ms.getActivePointersListByType("touch");for(Ps=_r.now(),Lo.getLength()>ps.touches.length-Eo&&(_r.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),ao(ms,ps,Lo)),Ls=0;Ls<Eo;Ls++)yo.push({id:ps.changedTouches[Ls].identifier,type:"touch",currentPos:Vr(ps.changedTouches[Ls]),currentTime:Ps});for($a(ms,ps,yo),Ls=0;Ls<Tr.length;Ls++)if(Tr[Ls]!==ms&&Tr[Ls].isTracking()&&rs(Tr[Ls].element,ms.element)){for(io=[],Zs=0;Zs<Eo;Zs++)io.push({id:ps.changedTouches[Zs].identifier,type:"touch",currentPos:Vr(ps.changedTouches[Zs]),currentTime:Ps});$a(Tr[Ls],ps,io)}eu(ms,ps,yo,0)&&(_r.stopEvent(ps),Fr(ms,"touch",Eo)),_r.cancelEvent(ps)}function Qs(ms,ps){Xs(ms,ps)}function mo(ms,ps){Xs(ms,ps),_r.stopEvent(ps)}function Xs(ms,ps){var Ps,Ls,Zs,Eo=ps.changedTouches.length,yo=[],io;for(Ps=_r.now(),Ls=0;Ls<Eo;Ls++)yo.push({id:ps.changedTouches[Ls].identifier,type:"touch",currentPos:Vr(ps.changedTouches[Ls]),currentTime:Ps});for(Fl(ms,ps,yo,0)&&zr(ms,"touch",Eo),Il(ms,ps,yo),Ls=0;Ls<Tr.length;Ls++)if(Tr[Ls]!==ms&&Tr[Ls].isTracking()&&rs(Tr[Ls].element,ms.element)){for(io=[],Zs=0;Zs<Eo;Zs++)io.push({id:ps.changedTouches[Zs].identifier,type:"touch",currentPos:Vr(ps.changedTouches[Zs]),currentTime:Ps});Il(Tr[Ls],ps,io)}_r.cancelEvent(ps)}function so(ms,ps){bo(ms,ps)}function uo(ms,ps){bo(ms,ps),_r.stopEvent(ps)}function bo(ms,ps){var Ps,Ls=ps.changedTouches.length,Zs=[];for(Ps=0;Ps<Ls;Ps++)Zs.push({id:ps.changedTouches[Ps].identifier,type:"touch",currentPos:Vr(ps.changedTouches[Ps]),currentTime:_r.now()});Kl(ms,ps,Zs),_r.cancelEvent(ps)}function wo(ms,ps){var Ps=ms.getActivePointersListByType("touch");ao(ms,ps,Ps)}function Co(ms,ps){return ps.stopPropagation(),ps.preventDefault(),!1}function ds(ms,ps){return ps.stopPropagation(),ps.preventDefault(),!1}function Is(ms,ps){var Ps;ps.currentTarget===ps.relatedTarget||rs(ps.currentTarget,ps.relatedTarget)||(Ps={id:ps.pointerId,type:Ur(ps),isPrimary:ps.isPrimary,currentPos:Vr(ps),currentTime:_r.now()},$a(ms,ps,[Ps]))}function Gs(ms,ps){var Ps;ps.currentTarget===ps.relatedTarget||rs(ps.currentTarget,ps.relatedTarget)||(Ps={id:ps.pointerId,type:Ur(ps),isPrimary:ps.isPrimary,currentPos:Vr(ps),currentTime:_r.now()},Il(ms,ps,[Ps]))}function to(ms,ps){var Ps;Ps={id:ps.pointerId,type:Ur(ps),isPrimary:ps.isPrimary,currentPos:Vr(ps),currentTime:_r.now()},eu(ms,ps,[Ps],ps.button)&&(_r.stopEvent(ps),Fr(ms,Ps.type)),(ms.clickHandler||ms.dblClickHandler||ms.pressHandler||ms.dragHandler||ms.dragEndHandler||ms.pinchHandler)&&_r.cancelEvent(ps)}function no(ms,ps){ro(ms,ps)}function Ro(ms,ps){var Ps=ms.getActivePointersListByType(Ur(ps));Ps.getById(ps.pointerId)&&ro(ms,ps),_r.stopEvent(ps)}function ro(ms,ps){var Ps;Ps={id:ps.pointerId,type:Ur(ps),isPrimary:ps.isPrimary,currentPos:Vr(ps),currentTime:_r.now()},Fl(ms,ps,[Ps],ps.button)&&zr(ms,Ps.type)}function go(ms,ps){Do(ms,ps)}function No(ms,ps){var Ps=ms.getActivePointersListByType(Ur(ps));Ps.getById(ps.pointerId)&&Do(ms,ps),_r.stopEvent(ps)}function Do(ms,ps){var Ps;Ps={id:ps.pointerId,type:Ur(ps),isPrimary:ps.isPrimary,currentPos:Vr(ps),currentTime:_r.now()},Kl(ms,ps,[Ps])}function To(ms,ps){var Ps;Ps={id:ps.pointerId,type:Ur(ps)},cu(ms,ps,[Ps])}function Wo(ms,ps){return Object.prototype.hasOwnProperty.call(ps,"isPrimary")||(ms.getLength()===0?ps.isPrimary=!0:ps.isPrimary=!1),ps.speed=0,ps.direction=0,ps.contactPos=ps.currentPos,ps.contactTime=ps.currentTime,ps.lastPos=ps.currentPos,ps.lastTime=ps.currentTime,ms.add(ps)}function ko(ms,ps){var Ps,Ls;return ms.getById(ps.id)?(Ps=ms.removeById(ps.id),Object.prototype.hasOwnProperty.call(ps,"isPrimary")||(Ls=ms.getPrimary(),Ls||(Ls=ms.getByIndex(0),Ls&&(Ls.isPrimary=!0)))):Ps=ms.getLength(),Ps}function $a(ms,ps,Ps){var Ls=ms.getActivePointersListByType(Ps[0].type),Zs,Eo=Ps.length,yo,io,Lo;for(Zs=0;Zs<Eo;Zs++)yo=Ps[Zs],io=Ls.getById(yo.id),io?(io.insideElement=!0,io.lastPos=io.currentPos,io.lastTime=io.currentTime,io.currentPos=yo.currentPos,io.currentTime=yo.currentTime,yo=io):(yo.captured=!1,yo.insideElementPressed=!1,yo.insideElement=!0,Wo(Ls,yo)),ms.enterHandler&&(Lo=ms.enterHandler({eventSource:ms,pointerType:yo.type,position:Dr(yo.currentPos,ms.element),buttons:Ls.buttons,pointers:ms.getActivePointerCount(),insideElementPressed:yo.insideElementPressed,buttonDownAny:Ls.buttons!==0,isTouchEvent:yo.type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Lo===!1&&_r.cancelEvent(ps))}function Il(ms,ps,Ps){var Ls=ms.getActivePointersListByType(Ps[0].type),Zs,Eo=Ps.length,yo,io,Lo;for(Zs=0;Zs<Eo;Zs++)yo=Ps[Zs],io=Ls.getById(yo.id),io&&(io.captured?(io.insideElement=!1,io.lastPos=io.currentPos,io.lastTime=io.currentTime,io.currentPos=yo.currentPos,io.currentTime=yo.currentTime):ko(Ls,io),yo=io),ms.exitHandler&&(Lo=ms.exitHandler({eventSource:ms,pointerType:yo.type,position:yo.currentPos&&Dr(yo.currentPos,ms.element),buttons:Ls.buttons,pointers:ms.getActivePointerCount(),insideElementPressed:io?io.insideElementPressed:!1,buttonDownAny:Ls.buttons!==0,isTouchEvent:yo.type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Lo===!1&&_r.cancelEvent(ps))}function eu(ms,ps,Ps,Ls){var Zs=Rr[ms.hash],Eo,yo=ms.getActivePointersListByType(Ps[0].type),io,Lo=Ps.length,Yo,Go;typeof ps.buttons<"u"?yo.buttons=ps.buttons:_r.Browser.vendor===_r.BROWSERS.IE&&_r.Browser.version<9?Ls===0?yo.buttons+=1:Ls===1?yo.buttons+=4:Ls===2?yo.buttons+=2:Ls===3?yo.buttons+=8:Ls===4?yo.buttons+=16:Ls===5&&(yo.buttons+=32):Ls===0?yo.buttons|=1:Ls===1?yo.buttons|=4:Ls===2?yo.buttons|=2:Ls===3?yo.buttons|=8:Ls===4?yo.buttons|=16:Ls===5&&(yo.buttons|=32);var Ks=ms.getActivePointersListsExceptType(Ps[0].type);for(io=0;io<Ks.length;io++)ao(ms,ps,Ks[io]);if(Ls!==0)return ms.nonPrimaryPressHandler&&(Eo=ms.nonPrimaryPressHandler({eventSource:ms,pointerType:Ps[0].type,position:Dr(Ps[0].currentPos,ms.element),button:Ls,buttons:yo.buttons,isTouchEvent:Ps[0].type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Eo===!1&&_r.cancelEvent(ps)),!1;for(io=0;io<Lo;io++)Yo=Ps[io],Go=yo.getById(Yo.id),Go?(Go.captured=!0,Go.insideElementPressed=!0,Go.insideElement=!0,Go.contactPos=Yo.currentPos,Go.contactTime=Yo.currentTime,Go.lastPos=Go.currentPos,Go.lastTime=Go.currentTime,Go.currentPos=Yo.currentPos,Go.currentTime=Yo.currentTime,Yo=Go):(Yo.captured=!0,Yo.insideElementPressed=!0,Yo.insideElement=!0,Wo(yo,Yo)),yo.addContact(),(ms.dragHandler||ms.dragEndHandler||ms.pinchHandler)&&_r.MouseTracker.gesturePointVelocityTracker.addPoint(ms,Yo),yo.contacts===1?ms.pressHandler&&(Eo=ms.pressHandler({eventSource:ms,pointerType:Yo.type,position:Dr(Yo.contactPos,ms.element),buttons:yo.buttons,isTouchEvent:Yo.type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Eo===!1&&_r.cancelEvent(ps)):yo.contacts===2&&ms.pinchHandler&&Yo.type==="touch"&&(Zs.pinchGPoints=yo.asArray(),Zs.lastPinchDist=Zs.currentPinchDist=Zs.pinchGPoints[0].currentPos.distanceTo(Zs.pinchGPoints[1].currentPos),Zs.lastPinchCenter=Zs.currentPinchCenter=jr(Zs.pinchGPoints[0].currentPos,Zs.pinchGPoints[1].currentPos));return!0}function Fl(ms,ps,Ps,Ls){var Zs=Rr[ms.hash],Eo=ms.getActivePointersListByType(Ps[0].type),yo,io,Lo,Yo,Go=Ps.length,Ks,$o,So=!1,Yl=!1,xu;if(typeof ps.buttons<"u"?Eo.buttons=ps.buttons:_r.Browser.vendor===_r.BROWSERS.IE&&_r.Browser.version<9?Ls===0?Eo.buttons-=1:Ls===1?Eo.buttons-=4:Ls===2?Eo.buttons-=2:Ls===3?Eo.buttons-=8:Ls===4?Eo.buttons-=16:Ls===5&&(Eo.buttons-=32):Ls===0?Eo.buttons^=-2:Ls===1?Eo.buttons^=-5:Ls===2?Eo.buttons^=-3:Ls===3?Eo.buttons^=-9:Ls===4?Eo.buttons^=-17:Ls===5&&(Eo.buttons^=-33),Ls!==0){ms.nonPrimaryReleaseHandler&&(yo=ms.nonPrimaryReleaseHandler({eventSource:ms,pointerType:Ps[0].type,position:Dr(Ps[0].currentPos,ms.element),button:Ls,buttons:Eo.buttons,isTouchEvent:Ps[0].type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),yo===!1&&_r.cancelEvent(ps));var ju=ms.getActivePointersListByType("mouse");return ao(ms,ps,ju),!1}if(typeof Ps[0].currentPos>"u")return ao(ms,ps,Eo),!1;for(Yo=0;Yo<Go;Yo++)Ks=Ps[Yo],$o=Eo.getById(Ks.id),$o&&($o.captured&&($o.captured=!1,So=!0,Yl=!0),$o.lastPos=$o.currentPos,$o.lastTime=$o.currentTime,$o.currentPos=Ks.currentPos,$o.currentTime=Ks.currentTime,$o.insideElement||ko(Eo,$o),io=$o.currentPos,Lo=$o.currentTime,Yl?(Eo.removeContact(),(ms.dragHandler||ms.dragEndHandler||ms.pinchHandler)&&_r.MouseTracker.gesturePointVelocityTracker.removePoint(ms,$o),Eo.contacts===0?(ms.releaseHandler&&(yo=ms.releaseHandler({eventSource:ms,pointerType:$o.type,position:Dr(io,ms.element),buttons:Eo.buttons,insideElementPressed:$o.insideElementPressed,insideElementReleased:$o.insideElement,isTouchEvent:$o.type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),yo===!1&&_r.cancelEvent(ps)),ms.dragEndHandler&&!$o.currentPos.equals($o.contactPos)&&(yo=ms.dragEndHandler({eventSource:ms,pointerType:$o.type,position:Dr($o.currentPos,ms.element),speed:$o.speed,direction:$o.direction,shift:ps.shiftKey,isTouchEvent:$o.type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),yo===!1&&_r.cancelEvent(ps)),(ms.clickHandler||ms.dblClickHandler)&&$o.insideElement&&(xu=Lo-$o.contactTime<=ms.clickTimeThreshold&&$o.contactPos.distanceTo(io)<=ms.clickDistThreshold,ms.clickHandler&&(yo=ms.clickHandler({eventSource:ms,pointerType:$o.type,position:Dr($o.currentPos,ms.element),quick:xu,shift:ps.shiftKey,isTouchEvent:$o.type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),yo===!1&&_r.cancelEvent(ps)),ms.dblClickHandler&&xu&&(Eo.clicks++,Eo.clicks===1?(Zs.lastClickPos=io,Zs.dblClickTimeOut=setTimeout(function(){Eo.clicks=0},ms.dblClickTimeThreshold)):Eo.clicks===2&&(clearTimeout(Zs.dblClickTimeOut),Eo.clicks=0,Zs.lastClickPos.distanceTo(io)<=ms.dblClickDistThreshold&&(yo=ms.dblClickHandler({eventSource:ms,pointerType:$o.type,position:Dr($o.currentPos,ms.element),shift:ps.shiftKey,isTouchEvent:$o.type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),yo===!1&&_r.cancelEvent(ps)),Zs.lastClickPos=null)))):Eo.contacts===2&&ms.pinchHandler&&$o.type==="touch"&&(Zs.pinchGPoints=Eo.asArray(),Zs.lastPinchDist=Zs.currentPinchDist=Zs.pinchGPoints[0].currentPos.distanceTo(Zs.pinchGPoints[1].currentPos),Zs.lastPinchCenter=Zs.currentPinchCenter=jr(Zs.pinchGPoints[0].currentPos,Zs.pinchGPoints[1].currentPos))):ms.releaseHandler&&(yo=ms.releaseHandler({eventSource:ms,pointerType:$o.type,position:Dr(io,ms.element),buttons:Eo.buttons,insideElementPressed:$o.insideElementPressed,insideElementReleased:$o.insideElement,isTouchEvent:$o.type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),yo===!1&&_r.cancelEvent(ps)));return So}function Kl(ms,ps,Ps){var Ls=Rr[ms.hash],Zs=ms.getActivePointersListByType(Ps[0].type),Eo,yo=Ps.length,io,Lo,Yo,Go,Ks;for(typeof ps.buttons<"u"&&(Zs.buttons=ps.buttons),Eo=0;Eo<yo;Eo++)io=Ps[Eo],Lo=Zs.getById(io.id),Lo?(Object.prototype.hasOwnProperty.call(io,"isPrimary")&&(Lo.isPrimary=io.isPrimary),Lo.lastPos=Lo.currentPos,Lo.lastTime=Lo.currentTime,Lo.currentPos=io.currentPos,Lo.currentTime=io.currentTime):(io.captured=!1,io.insideElementPressed=!1,io.insideElement=!0,Wo(Zs,io));ms.stopHandler&&Ps[0].type==="mouse"&&(clearTimeout(ms.stopTimeOut),ms.stopTimeOut=setTimeout(function(){Vo(ms,ps,Ps[0].type)},ms.stopDelay)),Zs.contacts===0?ms.moveHandler&&(Ks=ms.moveHandler({eventSource:ms,pointerType:Ps[0].type,position:Dr(Ps[0].currentPos,ms.element),buttons:Zs.buttons,isTouchEvent:Ps[0].type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Ks===!1&&_r.cancelEvent(ps)):Zs.contacts===1?(ms.moveHandler&&(Lo=Zs.asArray()[0],Ks=ms.moveHandler({eventSource:ms,pointerType:Lo.type,position:Dr(Lo.currentPos,ms.element),buttons:Zs.buttons,isTouchEvent:Lo.type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Ks===!1&&_r.cancelEvent(ps)),ms.dragHandler&&(Lo=Zs.asArray()[0],Go=Lo.currentPos.minus(Lo.lastPos),Ks=ms.dragHandler({eventSource:ms,pointerType:Lo.type,position:Dr(Lo.currentPos,ms.element),buttons:Zs.buttons,delta:Go,speed:Lo.speed,direction:Lo.direction,shift:ps.shiftKey,isTouchEvent:Lo.type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Ks===!1&&_r.cancelEvent(ps))):Zs.contacts===2&&(ms.moveHandler&&(Yo=Zs.asArray(),Ks=ms.moveHandler({eventSource:ms,pointerType:Yo[0].type,position:Dr(jr(Yo[0].currentPos,Yo[1].currentPos),ms.element),buttons:Zs.buttons,isTouchEvent:Yo[0].type==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Ks===!1&&_r.cancelEvent(ps)),ms.pinchHandler&&Ps[0].type==="touch"&&(Go=Ls.pinchGPoints[0].currentPos.distanceTo(Ls.pinchGPoints[1].currentPos),Go!=Ls.currentPinchDist&&(Ls.lastPinchDist=Ls.currentPinchDist,Ls.currentPinchDist=Go,Ls.lastPinchCenter=Ls.currentPinchCenter,Ls.currentPinchCenter=jr(Ls.pinchGPoints[0].currentPos,Ls.pinchGPoints[1].currentPos),Ks=ms.pinchHandler({eventSource:ms,pointerType:"touch",gesturePoints:Ls.pinchGPoints,lastCenter:Dr(Ls.lastPinchCenter,ms.element),center:Dr(Ls.currentPinchCenter,ms.element),lastDistance:Ls.lastPinchDist,distance:Ls.currentPinchDist,shift:ps.shiftKey,originalEvent:ps,preventDefaultAction:!1,userData:ms.userData}),Ks===!1&&_r.cancelEvent(ps))))}function cu(ms,ps,Ps){Fl(ms,ps,Ps,0),Il(ms,ps,Ps)}function Vo(ms,ps,Ps){ms.stopHandler&&ms.stopHandler({eventSource:ms,pointerType:Ps,position:Nr(ps,ms.element),buttons:ms.getActivePointersListByType(Ps).buttons,isTouchEvent:Ps==="touch",originalEvent:ps,preventDefaultAction:!1,userData:ms.userData})}var Bs=function(){try{return window.self!==window.top}catch{return!0}}();function Ws(ms){try{return ms.addEventListener&&ms.removeEventListener}catch{return!1}}}(OpenSeadragon),function(_r){_r.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},_r.Control=function(Tr,Rr,Ar){var Pr=Tr.parentNode;typeof Rr=="number"&&(_r.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),Rr={anchor:Rr}),Rr.attachToViewer=typeof Rr.attachToViewer>"u"?!0:Rr.attachToViewer,this.autoFade=typeof Rr.autoFade>"u"?!0:Rr.autoFade,this.element=Tr,this.anchor=Rr.anchor,this.container=Ar,this.anchor==_r.ControlAnchor.ABSOLUTE?(this.wrapper=_r.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof Rr.top=="number"?Rr.top+"px":Rr.top,this.wrapper.style.left=typeof Rr.left=="number"?Rr.left+"px":Rr.left,this.wrapper.style.height=typeof Rr.height=="number"?Rr.height+"px":Rr.height,this.wrapper.style.width=typeof Rr.width=="number"?Rr.width+"px":Rr.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=_r.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==_r.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),Rr.attachToViewer?this.anchor==_r.ControlAnchor.TOP_RIGHT||this.anchor==_r.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):Pr.appendChild(this.wrapper)},_r.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!="none"},setVisible:function(Tr){this.wrapper.style.display=Tr?this.anchor==_r.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(Tr){this.element[_r.SIGNAL]&&_r.Browser.vendor==_r.BROWSERS.IE?_r.setElementOpacity(this.element,Tr,!0):_r.setElementOpacity(this.wrapper,Tr,!0)}}}(OpenSeadragon),function(_r){_r.ControlDock=function(Rr){var Ar=["topleft","topright","bottomright","bottomleft"],Pr,Lr;for(_r.extend(!0,this,{id:"controldock-"+_r.now()+"-"+Math.floor(Math.random()*1e6),container:_r.makeNeutralElement("div"),controls:[]},Rr),this.container.onsubmit=function(){return!1},this.element&&(this.element=_r.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),Lr=0;Lr<Ar.length;Lr++)Pr=Ar[Lr],this.controls[Pr]=_r.makeNeutralElement("div"),this.controls[Pr].style.position="absolute",Pr.match("left")&&(this.controls[Pr].style.left="0px"),Pr.match("right")&&(this.controls[Pr].style.right="0px"),Pr.match("top")&&(this.controls[Pr].style.top="0px"),Pr.match("bottom")&&(this.controls[Pr].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},_r.ControlDock.prototype={addControl:function(Rr,Ar){Rr=_r.getElement(Rr);var Pr=null;if(!(Tr(this,Rr)>=0)){switch(Ar.anchor){case _r.ControlAnchor.TOP_RIGHT:Pr=this.controls.topright,Rr.style.position="relative",Rr.style.paddingRight="0px",Rr.style.paddingTop="0px";break;case _r.ControlAnchor.BOTTOM_RIGHT:Pr=this.controls.bottomright,Rr.style.position="relative",Rr.style.paddingRight="0px",Rr.style.paddingBottom="0px";break;case _r.ControlAnchor.BOTTOM_LEFT:Pr=this.controls.bottomleft,Rr.style.position="relative",Rr.style.paddingLeft="0px",Rr.style.paddingBottom="0px";break;case _r.ControlAnchor.TOP_LEFT:Pr=this.controls.topleft,Rr.style.position="relative",Rr.style.paddingLeft="0px",Rr.style.paddingTop="0px";break;case _r.ControlAnchor.ABSOLUTE:Pr=this.container,Rr.style.margin="0px",Rr.style.padding="0px";break;default:case _r.ControlAnchor.NONE:Pr=this.container,Rr.style.margin="0px",Rr.style.padding="0px";break}this.controls.push(new _r.Control(Rr,Ar,Pr)),Rr.style.display="inline-block"}},removeControl:function(Rr){Rr=_r.getElement(Rr);var Ar=Tr(this,Rr);return Ar>=0&&(this.controls[Ar].destroy(),this.controls.splice(Ar,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var Rr;for(Rr=this.controls.length-1;Rr>=0;Rr--)if(this.controls[Rr].isVisible())return!0;return!1},setControlsEnabled:function(Rr){var Ar;for(Ar=this.controls.length-1;Ar>=0;Ar--)this.controls[Ar].setVisible(Rr);return this}};function Tr(Rr,Ar){var Pr=Rr.controls,Lr;for(Lr=Pr.length-1;Lr>=0;Lr--)if(Pr[Lr].element==Ar)return Lr;return-1}}(OpenSeadragon),function(_r){_r.Placement=_r.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(_r){var Tr={},Rr=1;_r.Viewer=function(ds){var Is=arguments,Gs=this,to;if(_r.isPlainObject(ds)||(ds={id:Is[0],xmlPath:Is.length>1?Is[1]:void 0,prefixUrl:Is.length>2?Is[2]:void 0,controls:Is.length>3?Is[3]:void 0,overlays:Is.length>4?Is[4]:void 0}),ds.config&&(_r.extend(!0,ds,ds.config),delete ds.config),_r.extend(!0,this,{id:ds.id,hash:ds.hash||Rr++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},_r.DEFAULT_SETTINGS,ds),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof Tr[this.hash]<"u"&&_r.console.warn("Hash "+this.hash+" has already been used."),Tr[this.hash]={fsBoundsDelta:new _r.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=_r.now(),_r.EventSource.call(this),this.addHandler("open-failed",function(no){var Ro=_r.getString("Errors.OpenFailed",no.eventSource,no.message);Gs._showMessage(Ro)}),_r.ControlDock.call(this,ds),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=_r.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(no){no.width="100%",no.height="100%",no.overflow="hidden",no.position="absolute",no.top="0px",no.left="0px"}(this.canvas.style),_r.setElementTouchActionNone(this.canvas),ds.tabIndex!==""&&(this.canvas.tabIndex=ds.tabIndex===void 0?0:ds.tabIndex),this.container.className="openseadragon-container",function(no){no.width="100%",no.height="100%",no.position="relative",no.overflow="hidden",no.left="0px",no.top="0px",no.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new _r.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:_r.delegate(this,Gr),keyHandler:_r.delegate(this,Wr),clickHandler:_r.delegate(this,qr),dblClickHandler:_r.delegate(this,Kr),dragHandler:_r.delegate(this,Xr),dragEndHandler:_r.delegate(this,Zr),enterHandler:_r.delegate(this,Jr),exitHandler:_r.delegate(this,_i),pressHandler:_r.delegate(this,es),releaseHandler:_r.delegate(this,ts),nonPrimaryPressHandler:_r.delegate(this,rs),nonPrimaryReleaseHandler:_r.delegate(this,ns),scrollHandler:_r.delegate(this,ls),pinchHandler:_r.delegate(this,as)}),this.outerTracker=new _r.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:_r.delegate(this,us),exitHandler:_r.delegate(this,xs)}),this.toolbar&&(this.toolbar=new _r.ControlDock({element:this.toolbar})),this.bindStandardControls(),Tr[this.hash].prevContainerSize=Ar(this.container),this.world=new _r.World({viewer:this}),this.world.addHandler("add-item",function(no){Gs.source=Gs.world.getItemAt(0).source,Tr[Gs.hash].forceRedraw=!0,Gs._updateRequestId||(Gs._updateRequestId=Fr(Gs,Ts))}),this.world.addHandler("remove-item",function(no){Gs.world.getItemCount()?Gs.source=Gs.world.getItemAt(0).source:Gs.source=null,Tr[Gs.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(no){Gs.viewport&&Gs.viewport._setContentBounds(Gs.world.getHomeBounds(),Gs.world.getContentFactor())}),this.world.addHandler("item-index-change",function(no){Gs.source=Gs.world.getItemAt(0).source}),this.viewport=new _r.Viewport({containerSize:Tr[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new _r.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:ds.timeout}),this.tileCache=new _r.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new _r.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=_r.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(to=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(to,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(to=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(to,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new _r.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),to=0;to<this.customControls.length;to++)this.addControl(this.customControls[to].id,{anchor:this.customControls[to].anchor});_r.requestAnimationFrame(function(){Ur(Gs)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},_r.extend(_r.Viewer.prototype,_r.EventSource.prototype,_r.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(ds){return _r.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(ds)},openTileSource:function(ds){return _r.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(ds)},open:function(ds,Is){var Gs=this;if(this.close(),!!ds){if(this.sequenceMode&&_r.isArray(ds)){this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof Is<"u"&&!isNaN(Is)&&(this.initialPage=Is),this.tileSources=ds,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex);return}if(_r.isArray(ds)||(ds=[ds]),!!ds.length){this._opening=!0;for(var to=ds.length,no=0,Ro=0,ro,go=function(){if(no+Ro===to)if(no){(Gs._firstOpen||!Gs.preserveViewport)&&(Gs.viewport.goHome(!0),Gs.viewport.update()),Gs._firstOpen=!1;var To=ds[0];if(To.tileSource&&(To=To.tileSource),Gs.overlays&&!Gs.preserveOverlays)for(var Wo=0;Wo<Gs.overlays.length;Wo++)Gs.currentOverlays[Wo]=Lr(Gs,Gs.overlays[Wo]);Gs._drawOverlays(),Gs._opening=!1,Gs.raiseEvent("open",{source:To})}else Gs._opening=!1,Gs.raiseEvent("open-failed",ro)},No=function(To){(!_r.isPlainObject(To)||!To.tileSource)&&(To={tileSource:To}),To.index!==void 0&&(_r.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete To.index),To.collectionImmediately===void 0&&(To.collectionImmediately=!0);var Wo=To.success;To.success=function($a){if(no++,To.tileSource.overlays)for(var Il=0;Il<To.tileSource.overlays.length;Il++)Gs.addOverlay(To.tileSource.overlays[Il]);Wo&&Wo($a),go()};var ko=To.error;To.error=function($a){Ro++,ro||(ro=$a),ko&&ko($a),go()},Gs.addTiledImage(To)},Do=0;Do<ds.length;Do++)No(ds[Do]);return this}}},close:function(){return Tr[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),Tr[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(Tr[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(_r.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),Tr[this.hash]=null,delete Tr[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(ds){return this.innerTracker.setTracking(ds),this.outerTracker.setTracking(ds),this.raiseEvent("mouse-enabled",{enabled:ds}),this},areControlsEnabled:function(){var ds=this.controls.length,Is;for(Is=0;Is<this.controls.length;Is++)ds=ds&&this.controls[Is].isVisible();return ds},setControlsEnabled:function(ds){return ds?Nr(this):Ur(this),this.raiseEvent("controls-enabled",{enabled:ds}),this},setDebugMode:function(ds){for(var Is=0;Is<this.world.getItemCount();Is++)this.world.getItemAt(Is).debugMode=ds;this.debugMode=ds,this.forceRedraw()},isFullPage:function(){return Tr[this.hash].fullPage},setFullPage:function(ds){var Is=document.body,Gs=Is.style,to=document.documentElement.style,no=this,Ro,ro;if(ds==this.isFullPage())return this;var go={fullPage:ds,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",go),go.preventDefaultAction)return this;if(ds){for(this.elementSize=_r.getElementSize(this.element),this.pageScroll=_r.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=Gs.margin,this.docMargin=to.margin,Gs.margin="0",to.margin="0",this.bodyPadding=Gs.padding,this.docPadding=to.padding,Gs.padding="0",to.padding="0",this.bodyWidth=Gs.width,this.docWidth=to.width,Gs.width="100%",to.width="100%",this.bodyHeight=Gs.height,this.docHeight=to.height,Gs.height="100%",to.height="100%",this.previousBody=[],Tr[this.hash].prevElementParent=this.element.parentNode,Tr[this.hash].prevNextSibling=this.element.nextSibling,Tr[this.hash].prevElementWidth=this.element.style.width,Tr[this.hash].prevElementHeight=this.element.style.height,Ro=Is.childNodes.length,ro=0;ro<Ro;ro++)this.previousBody.push(Is.childNodes[0]),Is.removeChild(Is.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,Is.appendChild(this.toolbar.element),_r.addClass(this.toolbar.element,"fullpage")),_r.addClass(this.element,"fullpage"),Is.appendChild(this.element),this.element.style.height=_r.getWindowSize().y+"px",this.element.style.width=_r.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=_r.getElementSize(this.element).y-_r.getElementSize(this.toolbar.element).y+"px"),Tr[this.hash].fullPage=!0,_r.delegate(this,us)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,Gs.margin=this.bodyMargin,to.margin=this.docMargin,Gs.padding=this.bodyPadding,to.padding=this.docPadding,Gs.width=this.bodyWidth,to.width=this.docWidth,Gs.height=this.bodyHeight,to.height=this.docHeight,Is.removeChild(this.element),Ro=this.previousBody.length,ro=0;ro<Ro;ro++)Is.appendChild(this.previousBody.shift());_r.removeClass(this.element,"fullpage"),Tr[this.hash].prevElementParent.insertBefore(this.element,Tr[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(Is.removeChild(this.toolbar.element),_r.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=Tr[this.hash].prevElementWidth,this.element.style.height=Tr[this.hash].prevElementHeight;var No=0,Do=function(){_r.setPageScroll(no.pageScroll);var To=_r.getPageScroll();No++,No<10&&(To.x!==no.pageScroll.x||To.y!==no.pageScroll.y)&&_r.requestAnimationFrame(Do)};_r.requestAnimationFrame(Do),Tr[this.hash].fullPage=!1,_r.delegate(this,xs)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:ds}),this},setFullScreen:function(ds){var Is=this;if(!_r.supportsFullScreen)return this.setFullPage(ds);if(_r.isFullScreen()===ds)return this;var Gs={fullScreen:ds,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",Gs),Gs.preventDefaultAction)return this;if(ds){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var to=function(){var no=_r.isFullScreen();no||(_r.removeEvent(document,_r.fullScreenEventName,to),_r.removeEvent(document,_r.fullScreenErrorEventName,to),Is.setFullPage(!1),Is.isFullPage()&&(Is.element.style.width=Is.fullPageStyleWidth,Is.element.style.height=Is.fullPageStyleHeight)),Is.navigator&&Is.viewport&&setTimeout(function(){Is.navigator.update(Is.viewport)}),Is.raiseEvent("full-screen",{fullScreen:no})};_r.addEvent(document,_r.fullScreenEventName,to),_r.addEvent(document,_r.fullScreenErrorEventName,to),_r.requestFullScreen(document.body)}else _r.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!="hidden"},setVisible:function(ds){return this.container.style.visibility=ds?"":"hidden",this.raiseEvent("visible",{visible:ds}),this},addTiledImage:function(ds){_r.console.assert(ds,"[Viewer.addTiledImage] options is required"),_r.console.assert(ds.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),_r.console.assert(!ds.replace||ds.index>-1&&ds.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var Is=this;ds.replace&&(ds.replaceItem=Is.world.getItemAt(ds.index)),this._hideMessage(),ds.placeholderFillStyle===void 0&&(ds.placeholderFillStyle=this.placeholderFillStyle),ds.opacity===void 0&&(ds.opacity=this.opacity),ds.preload===void 0&&(ds.preload=this.preload),ds.compositeOperation===void 0&&(ds.compositeOperation=this.compositeOperation),ds.crossOriginPolicy===void 0&&(ds.crossOriginPolicy=ds.tileSource.crossOriginPolicy!==void 0?ds.tileSource.crossOriginPolicy:this.crossOriginPolicy),ds.ajaxWithCredentials===void 0&&(ds.ajaxWithCredentials=this.ajaxWithCredentials),ds.loadTilesWithAjax===void 0&&(ds.loadTilesWithAjax=this.loadTilesWithAjax),ds.ajaxHeaders===void 0||ds.ajaxHeaders===null?ds.ajaxHeaders=this.ajaxHeaders:_r.isPlainObject(ds.ajaxHeaders)&&_r.isPlainObject(this.ajaxHeaders)&&(ds.ajaxHeaders=_r.extend({},this.ajaxHeaders,ds.ajaxHeaders));var Gs={options:ds};function to(ro){for(var go=0;go<Is._loadQueue.length;go++)if(Is._loadQueue[go]===Gs){Is._loadQueue.splice(go,1);break}Is._loadQueue.length===0&&no(Gs),Is.raiseEvent("add-item-failed",ro),ds.error&&ds.error(ro)}function no(ro){Is.collectionMode&&(Is.world.arrange({immediately:ro.options.collectionImmediately,rows:Is.collectionRows,columns:Is.collectionColumns,layout:Is.collectionLayout,tileSize:Is.collectionTileSize,tileMargin:Is.collectionTileMargin}),Is.world.setAutoRefigureSizes(!0))}if(_r.isArray(ds.tileSource)){setTimeout(function(){to({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:ds.tileSource,options:ds})});return}this._loadQueue.push(Gs);function Ro(){for(var ro,go,No;Is._loadQueue.length&&(ro=Is._loadQueue[0],!!ro.tileSource);){if(Is._loadQueue.splice(0,1),ro.options.replace){var Do=Is.world.getIndexOfItem(ro.options.replaceItem);Do!=-1&&(ro.options.index=Do),Is.world.removeItem(ro.options.replaceItem)}go=new _r.TiledImage({viewer:Is,source:ro.tileSource,viewport:Is.viewport,drawer:Is.drawer,tileCache:Is.tileCache,imageLoader:Is.imageLoader,x:ro.options.x,y:ro.options.y,width:ro.options.width,height:ro.options.height,fitBounds:ro.options.fitBounds,fitBoundsPlacement:ro.options.fitBoundsPlacement,clip:ro.options.clip,placeholderFillStyle:ro.options.placeholderFillStyle,opacity:ro.options.opacity,preload:ro.options.preload,degrees:ro.options.degrees,compositeOperation:ro.options.compositeOperation,springStiffness:Is.springStiffness,animationTime:Is.animationTime,minZoomImageRatio:Is.minZoomImageRatio,wrapHorizontal:Is.wrapHorizontal,wrapVertical:Is.wrapVertical,immediateRender:Is.immediateRender,blendTime:Is.blendTime,alwaysBlend:Is.alwaysBlend,minPixelRatio:Is.minPixelRatio,smoothTileEdgesMinZoom:Is.smoothTileEdgesMinZoom,iOSDevice:Is.iOSDevice,crossOriginPolicy:ro.options.crossOriginPolicy,ajaxWithCredentials:ro.options.ajaxWithCredentials,loadTilesWithAjax:ro.options.loadTilesWithAjax,ajaxHeaders:ro.options.ajaxHeaders,debugMode:Is.debugMode}),Is.collectionMode&&Is.world.setAutoRefigureSizes(!1),Is.world.addItem(go,{index:ro.options.index}),Is._loadQueue.length===0&&no(ro),Is.world.getItemCount()===1&&!Is.preserveViewport&&Is.viewport.goHome(!0),Is.navigator&&(No=_r.extend({},ro.options,{replace:!1,originalTiledImage:go,tileSource:ro.tileSource}),Is.navigator.addTiledImage(No)),ro.options.success&&ro.options.success({item:go})}}Pr(this,ds.tileSource,ds,function(ro){Gs.tileSource=ro,Ro()},function(ro){ro.options=ds,to(ro),Ro()})},addSimpleImage:function(ds){_r.console.assert(ds,"[Viewer.addSimpleImage] options is required"),_r.console.assert(ds.url,"[Viewer.addSimpleImage] options.url is required");var Is=_r.extend({},ds,{tileSource:{type:"image",url:ds.url}});delete Is.url,this.addTiledImage(Is)},addLayer:function(ds){var Is=this;_r.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var Gs=_r.extend({},ds,{success:function(to){Is.raiseEvent("add-layer",{options:ds,drawer:to.item})},error:function(to){Is.raiseEvent("add-layer-failed",to)}});return this.addTiledImage(Gs),this},getLayerAtLevel:function(ds){return _r.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(ds)},getLevelOfLayer:function(ds){return _r.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(ds)},getLayersCount:function(){return _r.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(ds,Is){return _r.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(ds,Is)},removeLayer:function(ds){return _r.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(ds)},forceRedraw:function(){return Tr[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var ds=_r.delegate(this,Dr),Is=_r.delegate(this,jr),Gs=_r.delegate(this,Co),to=_r.delegate(this,wo),no=this.navImages,Ro=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(Ro=!1),this.previousButton=new _r.Button({element:this.previousButton?_r.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:_r.getString("Tooltips.PreviousPage"),srcRest:fs(this.prefixUrl,no.previous.REST),srcGroup:fs(this.prefixUrl,no.previous.GROUP),srcHover:fs(this.prefixUrl,no.previous.HOVER),srcDown:fs(this.prefixUrl,no.previous.DOWN),onRelease:to,onFocus:ds,onBlur:Is}),this.nextButton=new _r.Button({element:this.nextButton?_r.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:_r.getString("Tooltips.NextPage"),srcRest:fs(this.prefixUrl,no.next.REST),srcGroup:fs(this.prefixUrl,no.next.GROUP),srcHover:fs(this.prefixUrl,no.next.HOVER),srcDown:fs(this.prefixUrl,no.next.DOWN),onRelease:Gs,onFocus:ds,onBlur:Is}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),Ro&&(this.paging=new _r.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:_r.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||_r.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var ds=_r.delegate(this,ys),Is=_r.delegate(this,Fs),Gs=_r.delegate(this,ao),to=_r.delegate(this,ks),no=_r.delegate(this,qs),Ro=_r.delegate(this,mo),ro=_r.delegate(this,Xs),go=_r.delegate(this,so),No=_r.delegate(this,uo),Do=_r.delegate(this,bo),To=_r.delegate(this,Dr),Wo=_r.delegate(this,jr),ko=this.navImages,$a=[],Il=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(Il=!1),this.showZoomControl&&($a.push(this.zoomInButton=new _r.Button({element:this.zoomInButton?_r.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:_r.getString("Tooltips.ZoomIn"),srcRest:fs(this.prefixUrl,ko.zoomIn.REST),srcGroup:fs(this.prefixUrl,ko.zoomIn.GROUP),srcHover:fs(this.prefixUrl,ko.zoomIn.HOVER),srcDown:fs(this.prefixUrl,ko.zoomIn.DOWN),onPress:ds,onRelease:Is,onClick:Gs,onEnter:ds,onExit:Is,onFocus:To,onBlur:Wo})),$a.push(this.zoomOutButton=new _r.Button({element:this.zoomOutButton?_r.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:_r.getString("Tooltips.ZoomOut"),srcRest:fs(this.prefixUrl,ko.zoomOut.REST),srcGroup:fs(this.prefixUrl,ko.zoomOut.GROUP),srcHover:fs(this.prefixUrl,ko.zoomOut.HOVER),srcDown:fs(this.prefixUrl,ko.zoomOut.DOWN),onPress:to,onRelease:Is,onClick:no,onEnter:to,onExit:Is,onFocus:To,onBlur:Wo}))),this.showHomeControl&&$a.push(this.homeButton=new _r.Button({element:this.homeButton?_r.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:_r.getString("Tooltips.Home"),srcRest:fs(this.prefixUrl,ko.home.REST),srcGroup:fs(this.prefixUrl,ko.home.GROUP),srcHover:fs(this.prefixUrl,ko.home.HOVER),srcDown:fs(this.prefixUrl,ko.home.DOWN),onRelease:Ro,onFocus:To,onBlur:Wo})),this.showFullPageControl&&$a.push(this.fullPageButton=new _r.Button({element:this.fullPageButton?_r.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:_r.getString("Tooltips.FullPage"),srcRest:fs(this.prefixUrl,ko.fullpage.REST),srcGroup:fs(this.prefixUrl,ko.fullpage.GROUP),srcHover:fs(this.prefixUrl,ko.fullpage.HOVER),srcDown:fs(this.prefixUrl,ko.fullpage.DOWN),onRelease:ro,onFocus:To,onBlur:Wo})),this.showRotationControl&&($a.push(this.rotateLeftButton=new _r.Button({element:this.rotateLeftButton?_r.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:_r.getString("Tooltips.RotateLeft"),srcRest:fs(this.prefixUrl,ko.rotateleft.REST),srcGroup:fs(this.prefixUrl,ko.rotateleft.GROUP),srcHover:fs(this.prefixUrl,ko.rotateleft.HOVER),srcDown:fs(this.prefixUrl,ko.rotateleft.DOWN),onRelease:go,onFocus:To,onBlur:Wo})),$a.push(this.rotateRightButton=new _r.Button({element:this.rotateRightButton?_r.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:_r.getString("Tooltips.RotateRight"),srcRest:fs(this.prefixUrl,ko.rotateright.REST),srcGroup:fs(this.prefixUrl,ko.rotateright.GROUP),srcHover:fs(this.prefixUrl,ko.rotateright.HOVER),srcDown:fs(this.prefixUrl,ko.rotateright.DOWN),onRelease:No,onFocus:To,onBlur:Wo}))),this.showFlipControl&&$a.push(this.flipButton=new _r.Button({element:this.flipButton?_r.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:_r.getString("Tooltips.Flip"),srcRest:fs(this.prefixUrl,ko.flip.REST),srcGroup:fs(this.prefixUrl,ko.flip.GROUP),srcHover:fs(this.prefixUrl,ko.flip.HOVER),srcDown:fs(this.prefixUrl,ko.flip.DOWN),onRelease:Do,onFocus:To,onBlur:Wo})),Il&&(this.buttons=new _r.ButtonGroup({buttons:$a,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",_r.delegate(this,Qs)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||_r.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||_r.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(ds){return this.tileSources&&ds>=0&&ds<this.tileSources.length&&(this._sequenceIndex=ds,this._updateSequenceButtons(ds),this.open(this.tileSources[ds]),this.referenceStrip&&this.referenceStrip.setFocus(ds),this.raiseEvent("page",{page:ds})),this},addOverlay:function(ds,Is,Gs,to){var no;if(_r.isPlainObject(ds)?no=ds:no={element:ds,location:Is,placement:Gs,onDraw:to},ds=_r.getElement(no.element),Mr(this.currentOverlays,ds)>=0)return this;var Ro=Lr(this,no);return this.currentOverlays.push(Ro),Ro.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:ds,location:no.location,placement:no.placement}),this},updateOverlay:function(ds,Is,Gs){var to;return ds=_r.getElement(ds),to=Mr(this.currentOverlays,ds),to>=0&&(this.currentOverlays[to].update(Is,Gs),Tr[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:ds,location:Is,placement:Gs})),this},removeOverlay:function(ds){var Is;return ds=_r.getElement(ds),Is=Mr(this.currentOverlays,ds),Is>=0&&(this.currentOverlays[Is].destroy(),this.currentOverlays.splice(Is,1),Tr[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:ds})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return Tr[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(ds){var Is;return ds=_r.getElement(ds),Is=Mr(this.currentOverlays,ds),Is>=0?this.currentOverlays[Is]:null},_updateSequenceButtons:function(ds){this.nextButton&&(!this.tileSources||this.tileSources.length-1===ds?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(ds>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(ds){this._hideMessage();var Is=_r.makeNeutralElement("div");Is.appendChild(document.createTextNode(ds)),this.messageDiv=_r.makeCenteredNode(Is),_r.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var ds=this.messageDiv;ds&&(ds.parentNode.removeChild(ds),delete this.messageDiv)},gestureSettingsByDeviceType:function(ds){switch(ds){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var ds,Is=this.currentOverlays.length;for(ds=0;ds<Is;ds++)this.currentOverlays[ds].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new _r.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else _r.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}});function Ar(ds){return ds=_r.getElement(ds),new _r.Point(ds.clientWidth===0?1:ds.clientWidth,ds.clientHeight===0?1:ds.clientHeight)}function Pr(ds,Is,Gs,to,no){var Ro=ds;if(_r.type(Is)=="string"){if(Is.match(/^\s*<.*>\s*$/))Is=_r.parseXml(Is);else if(Is.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var ro=_r.parseJSON(Is);Is=ro}catch{}}function go(No,Do){No.ready?to(No):(No.addHandler("ready",function(){to(No)}),No.addHandler("open-failed",function(To){no({message:To.message,source:Do})}))}setTimeout(function(){if(_r.type(Is)=="string")Is=new _r.TileSource({url:Is,crossOriginPolicy:Gs.crossOriginPolicy!==void 0?Gs.crossOriginPolicy:ds.crossOriginPolicy,ajaxWithCredentials:ds.ajaxWithCredentials,ajaxHeaders:ds.ajaxHeaders,useCanvas:ds.useCanvas,success:function(Wo){to(Wo.tileSource)}}),Is.addHandler("open-failed",function(Wo){no(Wo)});else if(_r.isPlainObject(Is)||Is.nodeType)if(Is.crossOriginPolicy===void 0&&(Gs.crossOriginPolicy!==void 0||ds.crossOriginPolicy!==void 0)&&(Is.crossOriginPolicy=Gs.crossOriginPolicy!==void 0?Gs.crossOriginPolicy:ds.crossOriginPolicy),Is.ajaxWithCredentials===void 0&&(Is.ajaxWithCredentials=ds.ajaxWithCredentials),Is.useCanvas===void 0&&(Is.useCanvas=ds.useCanvas),_r.isFunction(Is.getTileUrl)){var No=new _r.TileSource(Is);No.getTileUrl=Is.getTileUrl,to(No)}else{var Do=_r.TileSource.determineType(Ro,Is);if(!Do){no({message:"Unable to load TileSource",source:Is});return}var To=Do.prototype.configure.apply(Ro,[Is]);go(new Do(To),Is)}else go(Is,Is)})}function Lr(ds,Is){if(Is instanceof _r.Overlay)return Is;var Gs=null;if(Is.element)Gs=_r.getElement(Is.element);else{var to=Is.id?Is.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);Gs=_r.getElement(Is.id),Gs||(Gs=document.createElement("a"),Gs.href="#/overlay/"+to),Gs.id=to,_r.addClass(Gs,Is.className?Is.className:"openseadragon-overlay")}var no=Is.location,Ro=Is.width,ro=Is.height;if(!no){var go=Is.x,No=Is.y;if(Is.px!==void 0){var Do=ds.viewport.imageToViewportRectangle(new _r.Rect(Is.px,Is.py,Ro||0,ro||0));go=Do.x,No=Do.y,Ro=Ro!==void 0?Do.width:void 0,ro=ro!==void 0?Do.height:void 0}no=new _r.Point(go,No)}var To=Is.placement;return To&&_r.type(To)==="string"&&(To=_r.Placement[Is.placement.toUpperCase()]),new _r.Overlay({element:Gs,location:no,placement:To,onDraw:Is.onDraw,checkResize:Is.checkResize,width:Ro,height:ro,rotationMode:Is.rotationMode})}function Mr(ds,Is){var Gs;for(Gs=ds.length-1;Gs>=0;Gs--)if(ds[Gs].element===Is)return Gs;return-1}function Fr(ds,Is){return _r.requestAnimationFrame(function(){Is(ds)})}function zr(ds){_r.requestAnimationFrame(function(){Vr(ds)})}function Ur(ds){ds.autoHideControls&&(ds.controlsShouldFade=!0,ds.controlsFadeBeginTime=_r.now()+ds.controlsFadeDelay,window.setTimeout(function(){zr(ds)},ds.controlsFadeDelay))}function Vr(ds){var Is,Gs,to,no;if(ds.controlsShouldFade){for(Is=_r.now(),Gs=Is-ds.controlsFadeBeginTime,to=1-Gs/ds.controlsFadeLength,to=Math.min(1,to),to=Math.max(0,to),no=ds.controls.length-1;no>=0;no--)ds.controls[no].autoFade&&ds.controls[no].setOpacity(to);to>0&&zr(ds)}}function Nr(ds){var Is;for(ds.controlsShouldFade=!1,Is=ds.controls.length-1;Is>=0;Is--)ds.controls[Is].setOpacity(1)}function Dr(){Nr(this)}function jr(){Ur(this)}function Gr(ds){var Is={originalEvent:ds.originalEvent,preventDefaultAction:ds.preventDefaultAction,preventVerticalPan:ds.preventVerticalPan,preventHorizontalPan:ds.preventHorizontalPan};if(this.raiseEvent("canvas-key",Is),!Is.preventDefaultAction&&!ds.ctrl&&!ds.alt&&!ds.meta)switch(ds.keyCode){case 38:return Is.preventVerticalPan||(ds.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new _r.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return Is.preventVerticalPan||(ds.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new _r.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return Is.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new _r.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return Is.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new _r.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}else return!0}function Wr(ds){var Is={originalEvent:ds.originalEvent,preventDefaultAction:ds.preventDefaultAction,preventVerticalPan:ds.preventVerticalPan,preventHorizontalPan:ds.preventHorizontalPan};if(this.raiseEvent("canvas-key",Is),!Is.preventDefaultAction&&!ds.ctrl&&!ds.alt&&!ds.meta)switch(ds.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return Is.preventVerticalPan||(ds.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new _r.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return Is.preventVerticalPan||(ds.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new _r.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return Is.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new _r.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return Is.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new _r.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(_r.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(_r.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(_r.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(_r.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}else return!0}function qr(ds){var Is,Gs=document.activeElement==this.canvas;Gs||this.canvas.focus(),this.viewport.flipped&&(ds.position.x=this.viewport.getContainerSize().x-ds.position.x);var to={tracker:ds.eventSource,position:ds.position,quick:ds.quick,shift:ds.shift,originalEvent:ds.originalEvent,preventDefaultAction:ds.preventDefaultAction};this.raiseEvent("canvas-click",to),!to.preventDefaultAction&&this.viewport&&ds.quick&&(Is=this.gestureSettingsByDeviceType(ds.pointerType),Is.clickToZoom&&(this.viewport.zoomBy(ds.shift?1/this.zoomPerClick:this.zoomPerClick,Is.zoomToRefPoint?this.viewport.pointFromPixel(ds.position,!0):null),this.viewport.applyConstraints()))}function Kr(ds){var Is,Gs={tracker:ds.eventSource,position:ds.position,shift:ds.shift,originalEvent:ds.originalEvent,preventDefaultAction:ds.preventDefaultAction};this.raiseEvent("canvas-double-click",Gs),!Gs.preventDefaultAction&&this.viewport&&(Is=this.gestureSettingsByDeviceType(ds.pointerType),Is.dblClickToZoom&&(this.viewport.zoomBy(ds.shift?1/this.zoomPerClick:this.zoomPerClick,Is.zoomToRefPoint?this.viewport.pointFromPixel(ds.position,!0):null),this.viewport.applyConstraints()))}function Xr(ds){var Is,Gs={tracker:ds.eventSource,position:ds.position,delta:ds.delta,speed:ds.speed,direction:ds.direction,shift:ds.shift,originalEvent:ds.originalEvent,preventDefaultAction:ds.preventDefaultAction};if(this.raiseEvent("canvas-drag",Gs),!Gs.preventDefaultAction&&this.viewport){if(Is=this.gestureSettingsByDeviceType(ds.pointerType),this.panHorizontal||(ds.delta.x=0),this.panVertical||(ds.delta.y=0),this.viewport.flipped&&(ds.delta.x=-ds.delta.x),this.constrainDuringPan){var to=this.viewport.deltaPointsFromPixels(ds.delta.negate());this.viewport.centerSpringX.target.value+=to.x,this.viewport.centerSpringY.target.value+=to.y;var no=this.viewport.getBounds(),Ro=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=to.x,this.viewport.centerSpringY.target.value-=to.y,no.x!=Ro.x&&(ds.delta.x=0),no.y!=Ro.y&&(ds.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(ds.delta.negate()),Is.flickEnabled&&!this.constrainDuringPan)}}function Zr(ds){if(!ds.preventDefaultAction&&this.viewport){var Is=this.gestureSettingsByDeviceType(ds.pointerType);if(Is.flickEnabled&&ds.speed>=Is.flickMinSpeed){var Gs=0;this.panHorizontal&&(Gs=Is.flickMomentum*ds.speed*Math.cos(ds.direction));var to=0;this.panVertical&&(to=Is.flickMomentum*ds.speed*Math.sin(ds.direction));var no=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),Ro=this.viewport.pointFromPixel(new _r.Point(no.x-Gs,no.y-to));this.viewport.panTo(Ro,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:ds.eventSource,position:ds.position,speed:ds.speed,direction:ds.direction,shift:ds.shift,originalEvent:ds.originalEvent})}function Jr(ds){this.raiseEvent("canvas-enter",{tracker:ds.eventSource,pointerType:ds.pointerType,position:ds.position,buttons:ds.buttons,pointers:ds.pointers,insideElementPressed:ds.insideElementPressed,buttonDownAny:ds.buttonDownAny,originalEvent:ds.originalEvent})}function _i(ds){window.location!=window.parent.location&&_r.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:ds.eventSource,pointerType:ds.pointerType,position:ds.position,buttons:ds.buttons,pointers:ds.pointers,insideElementPressed:ds.insideElementPressed,buttonDownAny:ds.buttonDownAny,originalEvent:ds.originalEvent})}function es(ds){this.raiseEvent("canvas-press",{tracker:ds.eventSource,pointerType:ds.pointerType,position:ds.position,insideElementPressed:ds.insideElementPressed,insideElementReleased:ds.insideElementReleased,originalEvent:ds.originalEvent})}function ts(ds){this.raiseEvent("canvas-release",{tracker:ds.eventSource,pointerType:ds.pointerType,position:ds.position,insideElementPressed:ds.insideElementPressed,insideElementReleased:ds.insideElementReleased,originalEvent:ds.originalEvent})}function rs(ds){this.raiseEvent("canvas-nonprimary-press",{tracker:ds.eventSource,position:ds.position,pointerType:ds.pointerType,button:ds.button,buttons:ds.buttons,originalEvent:ds.originalEvent})}function ns(ds){this.raiseEvent("canvas-nonprimary-release",{tracker:ds.eventSource,position:ds.position,pointerType:ds.pointerType,button:ds.button,buttons:ds.buttons,originalEvent:ds.originalEvent})}function as(ds){var Is,Gs,to,no;if(!ds.preventDefaultAction&&this.viewport&&(Is=this.gestureSettingsByDeviceType(ds.pointerType),Is.pinchToZoom&&(Gs=this.viewport.pointFromPixel(ds.center,!0),to=this.viewport.pointFromPixel(ds.lastCenter,!0),no=to.minus(Gs),this.panHorizontal||(no.x=0),this.panVertical||(no.y=0),this.viewport.zoomBy(ds.distance/ds.lastDistance,Gs,!0),Is.zoomToRefPoint&&this.viewport.panBy(no,!0),this.viewport.applyConstraints()),Is.pinchRotate)){var Ro=Math.atan2(ds.gesturePoints[0].currentPos.y-ds.gesturePoints[1].currentPos.y,ds.gesturePoints[0].currentPos.x-ds.gesturePoints[1].currentPos.x),ro=Math.atan2(ds.gesturePoints[0].lastPos.y-ds.gesturePoints[1].lastPos.y,ds.gesturePoints[0].lastPos.x-ds.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(Ro-ro)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:ds.eventSource,gesturePoints:ds.gesturePoints,lastCenter:ds.lastCenter,center:ds.center,lastDistance:ds.lastDistance,distance:ds.distance,shift:ds.shift,originalEvent:ds.originalEvent}),!1}function ls(ds){var Is,Gs,to,no;if(to=_r.now(),no=to-this._lastScrollTime,no>this.minScrollDeltaTime){if(this._lastScrollTime=to,this.viewport.flipped&&(ds.position.x=this.viewport.getContainerSize().x-ds.position.x),!ds.preventDefaultAction&&this.viewport&&(Is=this.gestureSettingsByDeviceType(ds.pointerType),Is.scrollToZoom&&(Gs=Math.pow(this.zoomPerScroll,ds.scroll),this.viewport.zoomBy(Gs,Is.zoomToRefPoint?this.viewport.pointFromPixel(ds.position,!0):null),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:ds.eventSource,position:ds.position,scroll:ds.scroll,shift:ds.shift,originalEvent:ds.originalEvent}),Is&&Is.scrollToZoom)return!1}else if(Is=this.gestureSettingsByDeviceType(ds.pointerType),Is&&Is.scrollToZoom)return!1}function us(ds){Tr[this.hash].mouseInside=!0,Nr(this),this.raiseEvent("container-enter",{tracker:ds.eventSource,position:ds.position,buttons:ds.buttons,pointers:ds.pointers,insideElementPressed:ds.insideElementPressed,buttonDownAny:ds.buttonDownAny,originalEvent:ds.originalEvent})}function xs(ds){ds.pointers<1&&(Tr[this.hash].mouseInside=!1,Tr[this.hash].animating||Ur(this)),this.raiseEvent("container-exit",{tracker:ds.eventSource,position:ds.position,buttons:ds.buttons,pointers:ds.pointers,insideElementPressed:ds.insideElementPressed,buttonDownAny:ds.buttonDownAny,originalEvent:ds.originalEvent})}function Ts(ds){vs(ds),ds.isOpen()?ds._updateRequestId=Fr(ds,Ts):ds._updateRequestId=!1}function vs(ds){if(!ds._opening){if(ds.autoResize){var Is=Ar(ds.container),Gs=Tr[ds.hash].prevContainerSize;if(!Is.equals(Gs)){var to=ds.viewport;if(ds.preserveImageSizeOnResize){var no=Gs.x/Is.x,Ro=to.getZoom()*no,ro=to.getCenter();to.resize(Is,!1),to.zoomTo(Ro,null,!0),to.panTo(ro,!0)}else{var go=to.getBounds();to.resize(Is,!0),to.fitBoundsWithConstraints(go,!0)}Tr[ds.hash].prevContainerSize=Is,Tr[ds.hash].forceRedraw=!0}}var No=ds.viewport.update(),Do=ds.world.update()||No;No&&ds.raiseEvent("viewport-change"),ds.referenceStrip&&(Do=ds.referenceStrip.update(ds.viewport)||Do),!Tr[ds.hash].animating&&Do&&(ds.raiseEvent("animation-start"),Nr(ds)),(Do||Tr[ds.hash].forceRedraw||ds.world.needsDraw())&&(gs(ds),ds._drawOverlays(),ds.navigator&&ds.navigator.update(ds.viewport),Tr[ds.hash].forceRedraw=!1,Do&&ds.raiseEvent("animation")),Tr[ds.hash].animating&&!Do&&(ds.raiseEvent("animation-finish"),Tr[ds.hash].mouseInside||Ur(ds)),Tr[ds.hash].animating=Do}}function gs(ds){ds.imageLoader.clear(),ds.drawer.clear(),ds.world.draw(),ds.raiseEvent("update-viewport",{})}function fs(ds,Is){return ds?ds+Is:Is}function ys(){Tr[this.hash].lastZoomTime=_r.now(),Tr[this.hash].zoomFactor=this.zoomPerSecond,Tr[this.hash].zooming=!0,Us(this)}function ks(){Tr[this.hash].lastZoomTime=_r.now(),Tr[this.hash].zoomFactor=1/this.zoomPerSecond,Tr[this.hash].zooming=!0,Us(this)}function Fs(){Tr[this.hash].zooming=!1}function Us(ds){_r.requestAnimationFrame(_r.delegate(ds,Vs))}function Vs(){var ds,Is,Gs;Tr[this.hash].zooming&&this.viewport&&(ds=_r.now(),Is=ds-Tr[this.hash].lastZoomTime,Gs=Math.pow(Tr[this.hash].zoomFactor,Is/1e3),this.viewport.zoomBy(Gs),this.viewport.applyConstraints(),Tr[this.hash].lastZoomTime=ds,Us(this))}function ao(){this.viewport&&(Tr[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function qs(){this.viewport&&(Tr[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function Qs(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function mo(){this.viewport&&this.viewport.goHome()}function Xs(){this.isFullPage()&&!_r.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function so(){if(this.viewport){var ds=this.viewport.getRotation();this.viewport.flipped?ds=_r.positiveModulo(ds+this.rotationIncrement,360):ds=_r.positiveModulo(ds-this.rotationIncrement,360),this.viewport.setRotation(ds)}}function uo(){if(this.viewport){var ds=this.viewport.getRotation();this.viewport.flipped?ds=_r.positiveModulo(ds-this.rotationIncrement,360):ds=_r.positiveModulo(ds+this.rotationIncrement,360),this.viewport.setRotation(ds)}}function bo(){this.viewport.toggleFlip()}function wo(){var ds=this._sequenceIndex-1;this.navPrevNextWrap&&ds<0&&(ds+=this.tileSources.length),this.goToPage(ds)}function Co(){var ds=this._sequenceIndex+1;this.navPrevNextWrap&&ds>=this.tileSources.length&&(ds=0),this.goToPage(ds)}}(OpenSeadragon),function(_r){_r.Navigator=function(Fr){var zr=Fr.viewer,Ur=this,Vr,Nr;Fr.id?(this.element=document.getElementById(Fr.id),Fr.controlOptions={anchor:_r.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(Fr.id="navigator-"+_r.now(),this.element=_r.makeNeutralElement("div"),Fr.controlOptions={anchor:_r.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:Fr.autoFade},Fr.position&&(Fr.position=="BOTTOM_RIGHT"?Fr.controlOptions.anchor=_r.ControlAnchor.BOTTOM_RIGHT:Fr.position=="BOTTOM_LEFT"?Fr.controlOptions.anchor=_r.ControlAnchor.BOTTOM_LEFT:Fr.position=="TOP_RIGHT"?Fr.controlOptions.anchor=_r.ControlAnchor.TOP_RIGHT:Fr.position=="TOP_LEFT"?Fr.controlOptions.anchor=_r.ControlAnchor.TOP_LEFT:Fr.position=="ABSOLUTE"&&(Fr.controlOptions.anchor=_r.ControlAnchor.ABSOLUTE,Fr.controlOptions.top=Fr.top,Fr.controlOptions.left=Fr.left,Fr.controlOptions.height=Fr.height,Fr.controlOptions.width=Fr.width))),this.element.id=Fr.id,this.element.className+=" navigator",Fr=_r.extend(!0,{sizeRatio:_r.DEFAULT_SETTINGS.navigatorSizeRatio},Fr,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:Fr.autoResize,minZoomImageRatio:1,background:Fr.background,opacity:Fr.opacity,borderColor:Fr.borderColor,displayRegionColor:Fr.displayRegionColor}),Fr.minPixelRatio=this.minPixelRatio=zr.minPixelRatio,_r.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new _r.Point(1,1),this.totalBorderWidths=new _r.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),Fr.controlOptions.anchor!=_r.ControlAnchor.NONE&&function(Gr,Wr){Gr.margin="0px",Gr.border=Wr+"px solid "+Fr.borderColor,Gr.padding="0px",Gr.background=Fr.background,Gr.opacity=Fr.opacity,Gr.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=_r.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(Gr,Wr){Gr.position="relative",Gr.top="0px",Gr.left="0px",Gr.fontSize="0px",Gr.overflow="hidden",Gr.border=Wr+"px solid "+Fr.displayRegionColor,Gr.margin="0px",Gr.padding="0px",Gr.background="transparent",Gr.float="left",Gr.cssFloat="left",Gr.styleFloat="left",Gr.zIndex=999999999,Gr.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=_r.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",zr.addControl(this.element,Fr.controlOptions),this._resizeWithViewer=Fr.controlOptions.anchor!=_r.ControlAnchor.ABSOLUTE&&Fr.controlOptions.anchor!=_r.ControlAnchor.NONE,Fr.width&&Fr.height?(this.setWidth(Fr.width),this.setHeight(Fr.height)):this._resizeWithViewer&&(Vr=_r.getElementSize(zr.element),this.element.style.height=Math.round(Vr.y*Fr.sizeRatio)+"px",this.element.style.width=Math.round(Vr.x*Fr.sizeRatio)+"px",this.oldViewerSize=Vr,Nr=_r.getElementSize(this.element),this.elementArea=Nr.x*Nr.y),this.oldContainerSize=new _r.Point(0,0),_r.Viewer.apply(this,[Fr]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function Dr(Gr){Lr(Ur.displayRegionContainer,Gr),Lr(Ur.displayRegion,-Gr),Ur.viewport.setRotation(Gr)}if(Fr.navigatorRotate){var jr=Fr.viewer.viewport?Fr.viewer.viewport.getRotation():Fr.viewer.degrees||0;Dr(jr),Fr.viewer.addHandler("rotate",function(Gr){Dr(Gr.degrees)})}this.innerTracker.destroy(),this.innerTracker=new _r.MouseTracker({element:this.element,dragHandler:_r.delegate(this,Rr),clickHandler:_r.delegate(this,Tr),releaseHandler:_r.delegate(this,Ar),scrollHandler:_r.delegate(this,Pr)}),this.addHandler("reset-size",function(){Ur.viewport&&Ur.viewport.goHome(!0)}),zr.world.addHandler("item-index-change",function(Gr){window.setTimeout(function(){var Wr=Ur.world.getItemAt(Gr.previousIndex);Ur.world.setItemIndex(Wr,Gr.newIndex)},1)}),zr.world.addHandler("remove-item",function(Gr){var Wr=Gr.item,qr=Ur._getMatchingItem(Wr);qr&&Ur.world.removeItem(qr)}),this.update(zr.viewport)},_r.extend(_r.Navigator.prototype,_r.EventSource.prototype,_r.Viewer.prototype,{updateSize:function(){if(this.viewport){var Fr=new _r.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);Fr.equals(this.oldContainerSize)||(this.viewport.resize(Fr,!0),this.viewport.goHome(!0),this.oldContainerSize=Fr,this.drawer.clear(),this.world.draw())}},setWidth:function(Fr){this.width=Fr,this.element.style.width=typeof Fr=="number"?Fr+"px":Fr,this._resizeWithViewer=!1},setHeight:function(Fr){this.height=Fr,this.element.style.height=typeof Fr=="number"?Fr+"px":Fr,this._resizeWithViewer=!1},setFlip:function(Fr){return this.viewport.setFlip(Fr),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(Fr){Mr(this.displayRegion,Fr),Mr(this.canvas,Fr),Mr(this.element,Fr)},update:function(Fr){var zr,Ur,Vr,Nr,Dr,jr;if(zr=_r.getElementSize(this.viewer.element),this._resizeWithViewer&&zr.x&&zr.y&&!zr.equals(this.oldViewerSize)&&(this.oldViewerSize=zr,this.maintainSizeRatio||!this.elementArea?(Ur=zr.x*this.sizeRatio,Vr=zr.y*this.sizeRatio):(Ur=Math.sqrt(this.elementArea*(zr.x/zr.y)),Vr=this.elementArea/Ur),this.element.style.width=Math.round(Ur)+"px",this.element.style.height=Math.round(Vr)+"px",this.elementArea||(this.elementArea=Ur*Vr),this.updateSize()),Fr&&this.viewport){Nr=Fr.getBoundsNoRotate(!0),Dr=this.viewport.pixelFromPointNoRotate(Nr.getTopLeft(),!1),jr=this.viewport.pixelFromPointNoRotate(Nr.getBottomRight(),!1).minus(this.totalBorderWidths);var Gr=this.displayRegion.style;Gr.display=this.world.getItemCount()?"block":"none",Gr.top=Math.round(Dr.y)+"px",Gr.left=Math.round(Dr.x)+"px";var Wr=Math.abs(Dr.x-jr.x),qr=Math.abs(Dr.y-jr.y);Gr.width=Math.round(Math.max(Wr,0))+"px",Gr.height=Math.round(Math.max(qr,0))+"px"}},addTiledImage:function(Fr){var zr=this,Ur=Fr.originalTiledImage;delete Fr.original;var Vr=_r.extend({},Fr,{success:function(Nr){var Dr=Nr.item;Dr._originalForNavigator=Ur,zr._matchBounds(Dr,Ur,!0);function jr(){zr._matchBounds(Dr,Ur)}function Gr(){zr._matchOpacity(Dr,Ur)}function Wr(){zr._matchCompositeOperation(Dr,Ur)}Ur.addHandler("bounds-change",jr),Ur.addHandler("clip-change",jr),Ur.addHandler("opacity-change",Gr),Ur.addHandler("composite-operation-change",Wr)}});return _r.Viewer.prototype.addTiledImage.apply(this,[Vr])},_getMatchingItem:function(Fr){for(var zr=this.world.getItemCount(),Ur,Vr=0;Vr<zr;Vr++)if(Ur=this.world.getItemAt(Vr),Ur._originalForNavigator===Fr)return Ur;return null},_matchBounds:function(Fr,zr,Ur){var Vr=zr.getBoundsNoRotate();Fr.setPosition(Vr.getTopLeft(),Ur),Fr.setWidth(Vr.width,Ur),Fr.setRotation(zr.getRotation(),Ur),Fr.setClip(zr.getClip())},_matchOpacity:function(Fr,zr){Fr.setOpacity(zr.opacity)},_matchCompositeOperation:function(Fr,zr){Fr.setCompositeOperation(zr.compositeOperation)}});function Tr(Fr){var zr={tracker:Fr.eventSource,position:Fr.position,quick:Fr.quick,shift:Fr.shift,originalEvent:Fr.originalEvent,preventDefaultAction:Fr.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",zr),!zr.preventDefaultAction&&Fr.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(Fr.position.x=this.viewport.getContainerSize().x-Fr.position.x);var Ur=this.viewport.pointFromPixel(Fr.position);this.panVertical?this.panHorizontal||(Ur.x=this.viewer.viewport.getCenter(!0).x):Ur.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(Ur),this.viewer.viewport.applyConstraints()}}function Rr(Fr){var zr={tracker:Fr.eventSource,position:Fr.position,delta:Fr.delta,speed:Fr.speed,direction:Fr.direction,shift:Fr.shift,originalEvent:Fr.originalEvent,preventDefaultAction:Fr.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",zr),!zr.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(Fr.delta.x=0),this.panVertical||(Fr.delta.y=0),this.viewer.viewport.flipped&&(Fr.delta.x=-Fr.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(Fr.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function Ar(Fr){Fr.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function Pr(Fr){return this.viewer.raiseEvent("navigator-scroll",{tracker:Fr.eventSource,position:Fr.position,scroll:Fr.scroll,shift:Fr.shift,originalEvent:Fr.originalEvent}),!1}function Lr(Fr,zr){Mr(Fr,"rotate("+zr+"deg)")}function Mr(Fr,zr){Fr.style.webkitTransform=zr,Fr.style.mozTransform=zr,Fr.style.msTransform=zr,Fr.style.oTransform=zr,Fr.style.transform=zr}}(OpenSeadragon),function(_r){var Tr={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};_r.extend(_r,{getString:function(Rr){var Ar=Rr.split("."),Pr=null,Lr=arguments,Mr=Tr,Fr;for(Fr=0;Fr<Ar.length-1;Fr++)Mr=Mr[Ar[Fr]]||{};return Pr=Mr[Ar[Fr]],typeof Pr!="string"&&(_r.console.log("Untranslated source string:",Rr),Pr=""),Pr.replace(/\{\d+\}/g,function(zr){var Ur=parseInt(zr.match(/\d+/),10)+1;return Ur<Lr.length?Lr[Ur]:""})},setString:function(Rr,Ar){var Pr=Rr.split("."),Lr=Tr,Mr;for(Mr=0;Mr<Pr.length-1;Mr++)Lr[Pr[Mr]]||(Lr[Pr[Mr]]={}),Lr=Lr[Pr[Mr]];Lr[Pr[Mr]]=Ar}})}(OpenSeadragon),function(_r){_r.Point=function(Tr,Rr){this.x=typeof Tr=="number"?Tr:0,this.y=typeof Rr=="number"?Rr:0},_r.Point.prototype={clone:function(){return new _r.Point(this.x,this.y)},plus:function(Tr){return new _r.Point(this.x+Tr.x,this.y+Tr.y)},minus:function(Tr){return new _r.Point(this.x-Tr.x,this.y-Tr.y)},times:function(Tr){return new _r.Point(this.x*Tr,this.y*Tr)},divide:function(Tr){return new _r.Point(this.x/Tr,this.y/Tr)},negate:function(){return new _r.Point(-this.x,-this.y)},distanceTo:function(Tr){return Math.sqrt(Math.pow(this.x-Tr.x,2)+Math.pow(this.y-Tr.y,2))},squaredDistanceTo:function(Tr){return Math.pow(this.x-Tr.x,2)+Math.pow(this.y-Tr.y,2)},apply:function(Tr){return new _r.Point(Tr(this.x),Tr(this.y))},equals:function(Tr){return Tr instanceof _r.Point&&this.x===Tr.x&&this.y===Tr.y},rotate:function(Tr,Rr){Rr=Rr||new _r.Point(0,0);var Ar,Pr;if(Tr%90===0){var Lr=_r.positiveModulo(Tr,360);switch(Lr){case 0:Ar=1,Pr=0;break;case 90:Ar=0,Pr=1;break;case 180:Ar=-1,Pr=0;break;case 270:Ar=0,Pr=-1;break}}else{var Mr=Tr*Math.PI/180;Ar=Math.cos(Mr),Pr=Math.sin(Mr)}var Fr=Ar*(this.x-Rr.x)-Pr*(this.y-Rr.y)+Rr.x,zr=Pr*(this.x-Rr.x)+Ar*(this.y-Rr.y)+Rr.y;return new _r.Point(Fr,zr)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(OpenSeadragon),function(_r){_r.TileSource=function(Rr,Ar,Pr,Lr,Mr,Fr){var zr=this,Ur=arguments,Vr,Nr;if(_r.isPlainObject(Rr)?Vr=Rr:Vr={width:Ur[0],height:Ur[1],tileSize:Ur[2],tileOverlap:Ur[3],minLevel:Ur[4],maxLevel:Ur[5]},_r.EventSource.call(this),_r.extend(!0,this,Vr),!this.success){for(Nr=0;Nr<arguments.length;Nr++)if(_r.isFunction(arguments[Nr])){this.success=arguments[Nr];break}}this.success&&this.addHandler("ready",function(Dr){zr.success(Dr)}),_r.type(arguments[0])=="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new _r.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=Vr.width&&Vr.height?Vr.width/Vr.height:1,this.dimensions=new _r.Point(Vr.width,Vr.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=Vr.tileOverlap?Vr.tileOverlap:0,this.minLevel=Vr.minLevel?Vr.minLevel:0,this.maxLevel=Vr.maxLevel!==void 0&&Vr.maxLevel!==null?Vr.maxLevel:Vr.width&&Vr.height?Math.ceil(Math.log(Math.max(Vr.width,Vr.height))/Math.log(2)):0,this.success&&_r.isFunction(this.success)&&this.success(this))},_r.TileSource.prototype={getTileSize:function(Rr){return _r.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(Rr){return this._tileWidth?this._tileWidth:this.getTileSize(Rr)},getTileHeight:function(Rr){return this._tileHeight?this._tileHeight:this.getTileSize(Rr)},getLevelScale:function(Rr){var Ar={},Pr;for(Pr=0;Pr<=this.maxLevel;Pr++)Ar[Pr]=1/Math.pow(2,this.maxLevel-Pr);return this.getLevelScale=function(Lr){return Ar[Lr]},this.getLevelScale(Rr)},getNumTiles:function(Rr){var Ar=this.getLevelScale(Rr),Pr=Math.ceil(Ar*this.dimensions.x/this.getTileWidth(Rr)),Lr=Math.ceil(Ar*this.dimensions.y/this.getTileHeight(Rr));return new _r.Point(Pr,Lr)},getPixelRatio:function(Rr){var Ar=this.dimensions.times(this.getLevelScale(Rr)),Pr=1/Ar.x,Lr=1/Ar.y;return new _r.Point(Pr,Lr)},getClosestLevel:function(){var Rr,Ar;for(Rr=this.minLevel+1;Rr<=this.maxLevel&&(Ar=this.getNumTiles(Rr),!(Ar.x>1||Ar.y>1));Rr++);return Rr-1},getTileAtPoint:function(Rr,Ar){var Pr=Ar.x>=0&&Ar.x<=1&&Ar.y>=0&&Ar.y<=1/this.aspectRatio;_r.console.assert(Pr,"[TileSource.getTileAtPoint] must be called with a valid point.");var Lr=this.dimensions.x*this.getLevelScale(Rr),Mr=Ar.x*Lr,Fr=Ar.y*Lr,zr=Math.floor(Mr/this.getTileWidth(Rr)),Ur=Math.floor(Fr/this.getTileHeight(Rr));Ar.x>=1&&(zr=this.getNumTiles(Rr).x-1);var Vr=1e-15;return Ar.y>=1/this.aspectRatio-Vr&&(Ur=this.getNumTiles(Rr).y-1),new _r.Point(zr,Ur)},getTileBounds:function(Rr,Ar,Pr,Lr){var Mr=this.dimensions.times(this.getLevelScale(Rr)),Fr=this.getTileWidth(Rr),zr=this.getTileHeight(Rr),Ur=Ar===0?0:Fr*Ar-this.tileOverlap,Vr=Pr===0?0:zr*Pr-this.tileOverlap,Nr=Fr+(Ar===0?1:2)*this.tileOverlap,Dr=zr+(Pr===0?1:2)*this.tileOverlap,jr=1/Mr.x;return Nr=Math.min(Nr,Mr.x-Ur),Dr=Math.min(Dr,Mr.y-Vr),Lr?new _r.Rect(0,0,Nr,Dr):new _r.Rect(Ur*jr,Vr*jr,Nr*jr,Dr*jr)},getImageInfo:function(Rr){var Ar=this,Pr,Lr,Mr,Fr,zr,Ur,Vr;Rr&&(zr=Rr.split("/"),Ur=zr[zr.length-1],Vr=Ur.lastIndexOf("."),Vr>-1&&(zr[zr.length-1]=Ur.slice(0,Vr))),Lr=function(Nr){typeof Nr=="string"&&(Nr=_r.parseXml(Nr));var Dr=_r.TileSource.determineType(Ar,Nr,Rr);if(!Dr){Ar.raiseEvent("open-failed",{message:"Unable to load TileSource",source:Rr});return}Fr=Dr.prototype.configure.apply(Ar,[Nr,Rr]),Fr.ajaxWithCredentials===void 0&&(Fr.ajaxWithCredentials=Ar.ajaxWithCredentials),Mr=new Dr(Fr),Ar.ready=!0,Ar.raiseEvent("ready",{tileSource:Mr})},Rr.match(/\.js$/)?(Pr=Rr.split("/").pop().replace(".js",""),_r.jsonp({url:Rr,async:!1,callbackName:Pr,callback:Lr})):_r.makeAjaxRequest({url:Rr,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(Nr){var Dr=Tr(Nr);Lr(Dr)},error:function(Nr,Dr){var jr;try{jr="HTTP "+Nr.status+" attempting to load TileSource"}catch{var Gr;typeof Dr>"u"||!Dr.toString?Gr="Unknown error":Gr=Dr.toString(),jr=Gr+" attempting to load TileSource"}Ar.raiseEvent("open-failed",{message:jr,source:Rr})}})},supports:function(Rr,Ar){return!1},configure:function(Rr,Ar){throw new Error("Method not implemented.")},getTileUrl:function(Rr,Ar,Pr){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(Rr,Ar,Pr){return{}},tileExists:function(Rr,Ar,Pr){var Lr=this.getNumTiles(Rr);return Rr>=this.minLevel&&Rr<=this.maxLevel&&Ar>=0&&Pr>=0&&Ar<Lr.x&&Pr<Lr.y}},_r.extend(!0,_r.TileSource.prototype,_r.EventSource.prototype);function Tr(Rr){var Ar=Rr.responseText,Pr=Rr.status,Lr,Mr;if(Rr){if(Rr.status!==200&&Rr.status!==0)throw Pr=Rr.status,Lr=Pr==404?"Not Found":Rr.statusText,new Error(_r.getString("Errors.Status",Pr,Lr))}else throw new Error(_r.getString("Errors.Security"));if(Ar.match(/\s*<.*/))try{Mr=Rr.responseXML&&Rr.responseXML.documentElement?Rr.responseXML:_r.parseXml(Ar)}catch{Mr=Rr.responseText}else if(Ar.match(/\s*[\{\[].*/))try{Mr=_r.parseJSON(Ar)}catch{Mr=Ar}else Mr=Ar;return Mr}_r.TileSource.determineType=function(Rr,Ar,Pr){var Lr;for(Lr in OpenSeadragon)if(Lr.match(/.+TileSource$/)&&_r.isFunction(OpenSeadragon[Lr])&&_r.isFunction(OpenSeadragon[Lr].prototype.supports)&&OpenSeadragon[Lr].prototype.supports.call(Rr,Ar,Pr))return OpenSeadragon[Lr];_r.console.error("No TileSource was able to open %s %s",Pr,Ar)}}(OpenSeadragon),function(_r){_r.DziTileSource=function(Ar,Pr,Lr,Mr,Fr,zr,Ur,Vr,Nr){var Dr,jr,Gr,Wr;if(_r.isPlainObject(Ar)?Wr=Ar:Wr={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=Wr.tilesUrl,this.fileFormat=Wr.fileFormat,this.displayRects=Wr.displayRects,this.displayRects)for(Dr=this.displayRects.length-1;Dr>=0;Dr--)for(jr=this.displayRects[Dr],Gr=jr.minLevel;Gr<=jr.maxLevel;Gr++)this._levelRects[Gr]||(this._levelRects[Gr]=[]),this._levelRects[Gr].push(jr);_r.TileSource.apply(this,[Wr])},_r.extend(_r.DziTileSource.prototype,_r.TileSource.prototype,{supports:function(Ar,Pr){var Lr;return Ar.Image?Lr=Ar.Image.xmlns:Ar.documentElement&&(Ar.documentElement.localName=="Image"||Ar.documentElement.tagName=="Image")&&(Lr=Ar.documentElement.namespaceURI),Lr=(Lr||"").toLowerCase(),Lr.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||Lr.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(Ar,Pr){var Lr;return _r.isPlainObject(Ar)?Lr=Rr(this,Ar):Lr=Tr(this,Ar),Pr&&!Lr.tilesUrl&&(Lr.tilesUrl=Pr.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),Pr.search(/\.(dzi|xml|js)\?/)!=-1?Lr.queryParams=Pr.match(/\?.*/):Lr.queryParams=""),Lr},getTileUrl:function(Ar,Pr,Lr){return[this.tilesUrl,Ar,"/",Pr,"_",Lr,".",this.fileFormat,this.queryParams].join("")},tileExists:function(Ar,Pr,Lr){var Mr=this._levelRects[Ar],Fr,zr,Ur,Vr,Nr,Dr,jr;if(this.minLevel&&Ar<this.minLevel||this.maxLevel&&Ar>this.maxLevel)return!1;if(!Mr||!Mr.length)return!0;for(jr=Mr.length-1;jr>=0;jr--)if(Fr=Mr[jr],!(Ar<Fr.minLevel||Ar>Fr.maxLevel)&&(zr=this.getLevelScale(Ar),Ur=Fr.x*zr,Vr=Fr.y*zr,Nr=Ur+Fr.width*zr,Dr=Vr+Fr.height*zr,Ur=Math.floor(Ur/this._tileWidth),Vr=Math.floor(Vr/this._tileWidth),Nr=Math.ceil(Nr/this._tileWidth),Dr=Math.ceil(Dr/this._tileWidth),Ur<=Pr&&Pr<Nr&&Vr<=Lr&&Lr<Dr))return!0;return!1}});function Tr(Ar,Pr){if(!Pr||!Pr.documentElement)throw new Error(_r.getString("Errors.Xml"));var Lr=Pr.documentElement,Mr=Lr.localName||Lr.tagName,Fr=Pr.documentElement.namespaceURI,zr=null,Ur=[],Vr,Nr,Dr,jr,Gr;if(Mr=="Image")try{if(jr=Lr.getElementsByTagName("Size")[0],jr===void 0&&(jr=Lr.getElementsByTagNameNS(Fr,"Size")[0]),zr={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:Lr.getAttribute("Url"),Format:Lr.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(Lr.getAttribute("Overlap"),10),TileSize:parseInt(Lr.getAttribute("TileSize"),10),Size:{Height:parseInt(jr.getAttribute("Height"),10),Width:parseInt(jr.getAttribute("Width"),10)}}},!_r.imageFormatSupported(zr.Image.Format))throw new Error(_r.getString("Errors.ImageFormat",zr.Image.Format.toUpperCase()));for(Vr=Lr.getElementsByTagName("DisplayRect"),Vr===void 0&&(Vr=Lr.getElementsByTagNameNS(Fr,"DisplayRect")[0]),Gr=0;Gr<Vr.length;Gr++)Nr=Vr[Gr],Dr=Nr.getElementsByTagName("Rect")[0],Dr===void 0&&(Dr=Nr.getElementsByTagNameNS(Fr,"Rect")[0]),Ur.push({Rect:{X:parseInt(Dr.getAttribute("X"),10),Y:parseInt(Dr.getAttribute("Y"),10),Width:parseInt(Dr.getAttribute("Width"),10),Height:parseInt(Dr.getAttribute("Height"),10),MinLevel:parseInt(Nr.getAttribute("MinLevel"),10),MaxLevel:parseInt(Nr.getAttribute("MaxLevel"),10)}});return Ur.length&&(zr.Image.DisplayRect=Ur),Rr(Ar,zr)}catch(Kr){throw Kr instanceof Error?Kr:new Error(_r.getString("Errors.Dzi"))}else{if(Mr=="Collection")throw new Error(_r.getString("Errors.Dzc"));if(Mr=="Error"){var Wr=Lr.getElementsByTagName("Message")[0],qr=Wr.firstChild.nodeValue;throw new Error(qr)}}throw new Error(_r.getString("Errors.Dzi"))}function Rr(Ar,Pr){var Lr=Pr.Image,Mr=Lr.Url,Fr=Lr.Format,zr=Lr.Size,Ur=Lr.DisplayRect||[],Vr=parseInt(zr.Width,10),Nr=parseInt(zr.Height,10),Dr=parseInt(Lr.TileSize,10),jr=parseInt(Lr.Overlap,10),Gr=[],Wr,qr;for(qr=0;qr<Ur.length;qr++)Wr=Ur[qr].Rect,Gr.push(new _r.DisplayRect(parseInt(Wr.X,10),parseInt(Wr.Y,10),parseInt(Wr.Width,10),parseInt(Wr.Height,10),parseInt(Wr.MinLevel,10),parseInt(Wr.MaxLevel,10)));return _r.extend(!0,{width:Vr,height:Nr,tileSize:Dr,tileOverlap:jr,minLevel:null,maxLevel:null,tilesUrl:Mr,fileFormat:Fr,displayRects:Gr},Pr)}}(OpenSeadragon),function(_r){_r.IIIFTileSource=function(Lr){if(_r.extend(!0,this,Lr),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(Lr.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=Lr.version,this.tile_width&&this.tile_height)Lr.tileWidth=this.tile_width,Lr.tileHeight=this.tile_height;else if(this.tile_width)Lr.tileSize=this.tile_width;else if(this.tile_height)Lr.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length==1)Lr.tileWidth=this.tiles[0].width,Lr.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var Mr=0;Mr<this.tiles.length;Mr++)for(var Fr=0;Fr<this.tiles[Mr].scaleFactors.length;Fr++){var zr=this.tiles[Mr].scaleFactors[Fr];this.scale_factors.push(zr),Lr.tileSizePerScaleFactor[zr]={width:this.tiles[Mr].width,height:this.tiles[Mr].height||this.tiles[Mr].width}}}else if(Tr(Lr)){for(var Ur=Math.min(this.height,this.width),Vr=[256,512,1024],Nr=[],Dr=0;Dr<Vr.length;Dr++)Vr[Dr]<=Ur&&Nr.push(Vr[Dr]);Nr.length>0?Lr.tileSize=Math.max.apply(null,Nr):Lr.tileSize=Ur}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,Lr.levels=Rr(this),_r.extend(!0,Lr,{width:Lr.levels[Lr.levels.length-1].width,height:Lr.levels[Lr.levels.length-1].height,tileSize:Math.max(Lr.height,Lr.width),tileOverlap:0,minLevel:0,maxLevel:Lr.levels.length-1}),this.levels=Lr.levels):_r.console.error("Nothing in the info.json to construct image pyramids from");if(!Lr.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)Lr.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));else{var jr=Math.max.apply(null,this.scale_factors);Lr.maxLevel=Math.round(Math.log(jr)*Math.LOG2E)}_r.TileSource.apply(this,[Lr])},_r.extend(_r.IIIFTileSource.prototype,_r.TileSource.prototype,{supports:function(Lr,Mr){return Lr.protocol&&Lr.protocol=="http://iiif.io/api/image"||Lr["@context"]&&(Lr["@context"]=="http://library.stanford.edu/iiif/image-api/1.1/context.json"||Lr["@context"]=="http://iiif.io/api/image/1/context.json")||Lr.profile&&Lr.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||Lr.identifier&&Lr.width&&Lr.height?!0:!!(Lr.documentElement&&Lr.documentElement.tagName=="info"&&Lr.documentElement.namespaceURI=="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(Lr,Mr){if(_r.isPlainObject(Lr)){if(!Lr["@context"])Lr["@context"]="http://iiif.io/api/image/1.0/context.json",Lr["@id"]=Mr.replace("/info.json",""),Lr.version=1;else{var zr=Lr["@context"];if(Array.isArray(zr)){for(var Ur=0;Ur<zr.length;Ur++)if(typeof zr[Ur]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(zr[Ur])||zr[Ur]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){zr=zr[Ur];break}}switch(zr){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":Lr.version=1;break;case"http://iiif.io/api/image/2/context.json":Lr.version=2;break;case"http://iiif.io/api/image/3/context.json":Lr.version=3;break;default:_r.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(!Lr["@id"]&&Lr.id&&(Lr["@id"]=Lr.id),Lr.preferredFormats){for(var Vr=0;Vr<Lr.preferredFormats.length;Vr++)if(OpenSeadragon.imageFormatSupported(Lr.preferredFormats[Vr])){Lr.tileFormat=Lr.preferredFormats[Vr];break}}return Lr}else{var Fr=Ar(Lr);return Fr["@context"]="http://iiif.io/api/image/1.0/context.json",Fr["@id"]=Mr.replace("/info.xml",""),Fr.version=1,Fr}},getTileWidth:function(Lr){if(this.emulateLegacyImagePyramid)return _r.TileSource.prototype.getTileWidth.call(this,Lr);var Mr=Math.pow(2,this.maxLevel-Lr);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[Mr]?this.tileSizePerScaleFactor[Mr].width:this._tileWidth},getTileHeight:function(Lr){if(this.emulateLegacyImagePyramid)return _r.TileSource.prototype.getTileHeight.call(this,Lr);var Mr=Math.pow(2,this.maxLevel-Lr);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[Mr]?this.tileSizePerScaleFactor[Mr].height:this._tileHeight},getLevelScale:function(Lr){if(this.emulateLegacyImagePyramid){var Mr=NaN;return this.levels.length>0&&Lr>=this.minLevel&&Lr<=this.maxLevel&&(Mr=this.levels[Lr].width/this.levels[this.maxLevel].width),Mr}return _r.TileSource.prototype.getLevelScale.call(this,Lr)},getNumTiles:function(Lr){if(this.emulateLegacyImagePyramid){var Mr=this.getLevelScale(Lr);return Mr?new _r.Point(1,1):new _r.Point(0,0)}return _r.TileSource.prototype.getNumTiles.call(this,Lr)},getTileAtPoint:function(Lr,Mr){return this.emulateLegacyImagePyramid?new _r.Point(0,0):_r.TileSource.prototype.getTileAtPoint.call(this,Lr,Mr)},getTileUrl:function(Lr,Mr,Fr){if(this.emulateLegacyImagePyramid){var zr=null;return this.levels.length>0&&Lr>=this.minLevel&&Lr<=this.maxLevel&&(zr=this.levels[Lr].url),zr}var Ur="0",Vr=Math.pow(.5,this.maxLevel-Lr),Nr=Math.ceil(this.width*Vr),Dr=Math.ceil(this.height*Vr),jr,Gr,Wr,qr,Kr,Xr,Zr,Jr,_i,es,ts,rs,ns,as;return jr=this.getTileWidth(Lr),Gr=this.getTileHeight(Lr),Wr=Math.ceil(jr/Vr),qr=Math.ceil(Gr/Vr),this.version===1?ns="native."+this.tileFormat:ns="default."+this.tileFormat,Nr<jr&&Dr<Gr?(this.version===2&&Nr===this.width||this.version===3&&Nr===this.width&&Dr===this.height?es="max":this.version===3?es=Nr+","+Dr:es=Nr+",",Kr="full"):(Xr=Mr*Wr,Zr=Fr*qr,Jr=Math.min(Wr,this.width-Xr),_i=Math.min(qr,this.height-Zr),Mr===0&&Fr===0&&Jr===this.width&&_i===this.height?Kr="full":Kr=[Xr,Zr,Jr,_i].join(","),ts=Math.ceil(Jr*Vr),rs=Math.ceil(_i*Vr),this.version===2&&ts===this.width||this.version===3&&ts===this.width&&rs===this.height?es="max":this.version===3?es=ts+","+rs:es=ts+","),as=[this["@id"],Kr,es,Ur,ns].join("/"),as},__testonly__:{canBeTiled:Tr,constructLevels:Rr}});function Tr(Lr){var Mr=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],Fr=Array.isArray(Lr.profile)?Lr.profile[0]:Lr.profile,zr=Mr.indexOf(Fr)!==-1,Ur=!1;return Lr.version===2&&Lr.profile.length>1&&Lr.profile[1].supports&&(Ur=Lr.profile[1].supports.indexOf("sizeByW")!==-1),Lr.version===3&&Lr.extraFeatures&&(Ur=Lr.extraFeatures.indexOf("sizeByWh")!==-1),!zr||Ur}function Rr(Lr){for(var Mr=[],Fr=0;Fr<Lr.sizes.length;Fr++)Mr.push({url:Lr["@id"]+"/full/"+Lr.sizes[Fr].width+","+(Lr.version===3?Lr.sizes[Fr].height:"")+"/0/default."+Lr.tileFormat,width:Lr.sizes[Fr].width,height:Lr.sizes[Fr].height});return Mr.sort(function(zr,Ur){return zr.width-Ur.width})}function Ar(Lr){if(!Lr||!Lr.documentElement)throw new Error(_r.getString("Errors.Xml"));var Mr=Lr.documentElement,Fr=Mr.tagName,zr=null;if(Fr=="info")try{return zr={},Pr(Mr,zr),zr}catch(Ur){throw Ur instanceof Error?Ur:new Error(_r.getString("Errors.IIIF"))}throw new Error(_r.getString("Errors.IIIF"))}function Pr(Lr,Mr,Fr){var zr,Ur;if(Lr.nodeType==3&&Fr)Ur=Lr.nodeValue.trim(),Ur.match(/^\d*$/)&&(Ur=Number(Ur)),Mr[Fr]?(_r.isArray(Mr[Fr])||(Mr[Fr]=[Mr[Fr]]),Mr[Fr].push(Ur)):Mr[Fr]=Ur;else if(Lr.nodeType==1)for(zr=0;zr<Lr.childNodes.length;zr++)Pr(Lr.childNodes[zr],Mr,Lr.nodeName)}}(OpenSeadragon),function(_r){_r.OsmTileSource=function(Tr,Rr,Ar,Pr,Lr){var Mr;_r.isPlainObject(Tr)?Mr=Tr:Mr={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!Mr.width||!Mr.height)&&(Mr.width=65572864,Mr.height=65572864),Mr.tileSize||(Mr.tileSize=256,Mr.tileOverlap=0),Mr.tilesUrl||(Mr.tilesUrl="http://tile.openstreetmap.org/"),Mr.minLevel=8,_r.TileSource.apply(this,[Mr])},_r.extend(_r.OsmTileSource.prototype,_r.TileSource.prototype,{supports:function(Tr,Rr){return Tr.type&&Tr.type=="openstreetmaps"},configure:function(Tr,Rr){return Tr},getTileUrl:function(Tr,Rr,Ar){return this.tilesUrl+(Tr-8)+"/"+Rr+"/"+Ar+".png"}})}(OpenSeadragon),function(_r){_r.TmsTileSource=function(Tr,Rr,Ar,Pr,Lr){var Mr;_r.isPlainObject(Tr)?Mr=Tr:Mr={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var Fr=Math.ceil(Mr.width/256)*256,zr=Math.ceil(Mr.height/256)*256,Ur;Fr>zr?Ur=Fr/256:Ur=zr/256,Mr.maxLevel=Math.ceil(Math.log(Ur)/Math.log(2))-1,Mr.tileSize=256,Mr.width=Fr,Mr.height=zr,_r.TileSource.apply(this,[Mr])},_r.extend(_r.TmsTileSource.prototype,_r.TileSource.prototype,{supports:function(Tr,Rr){return Tr.type&&Tr.type=="tiledmapservice"},configure:function(Tr,Rr){return Tr},getTileUrl:function(Tr,Rr,Ar){var Pr=this.getNumTiles(Tr).y-1;return this.tilesUrl+Tr+"/"+Rr+"/"+(Pr-Ar)+".png"}})}(OpenSeadragon),function(_r){_r.ZoomifyTileSource=function(Tr){Tr.tileSize=256;var Rr={x:Tr.width,y:Tr.height};for(Tr.imageSizes=[{x:Tr.width,y:Tr.height}],Tr.gridSize=[this._getGridSize(Tr.width,Tr.height,Tr.tileSize)];parseInt(Rr.x,10)>Tr.tileSize||parseInt(Rr.y,10)>Tr.tileSize;)Rr.x=Math.floor(Rr.x/2),Rr.y=Math.floor(Rr.y/2),Tr.imageSizes.push({x:Rr.x,y:Rr.y}),Tr.gridSize.push(this._getGridSize(Rr.x,Rr.y,Tr.tileSize));Tr.imageSizes.reverse(),Tr.gridSize.reverse(),Tr.minLevel=0,Tr.maxLevel=Tr.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[Tr])},_r.extend(_r.ZoomifyTileSource.prototype,_r.TileSource.prototype,{_getGridSize:function(Tr,Rr,Ar){return{x:Math.ceil(Tr/Ar),y:Math.ceil(Rr/Ar)}},_calculateAbsoluteTileNumber:function(Tr,Rr,Ar){for(var Pr=0,Lr={},Mr=0;Mr<Tr;Mr++)Lr=this.gridSize[Mr],Pr+=Lr.x*Lr.y;return Lr=this.gridSize[Tr],Pr+=Lr.x*Ar+Rr,Pr},supports:function(Tr,Rr){return Tr.type&&Tr.type=="zoomifytileservice"},configure:function(Tr,Rr){return Tr},getTileUrl:function(Tr,Rr,Ar){var Pr=0,Lr=this._calculateAbsoluteTileNumber(Tr,Rr,Ar);return Pr=Math.floor(Lr/256),this.tilesUrl+"TileGroup"+Pr+"/"+Tr+"-"+Rr+"-"+Ar+".jpg"}})}(OpenSeadragon),function(_r){_r.LegacyTileSource=function(Pr){var Lr,Mr,Fr;_r.isArray(Pr)&&(Lr={type:"legacy-image-pyramid",levels:Pr}),Lr.levels=Tr(Lr.levels),Lr.levels.length>0?(Mr=Lr.levels[Lr.levels.length-1].width,Fr=Lr.levels[Lr.levels.length-1].height):(Mr=0,Fr=0,_r.console.error("No supported image formats found")),_r.extend(!0,Lr,{width:Mr,height:Fr,tileSize:Math.max(Fr,Mr),tileOverlap:0,minLevel:0,maxLevel:Lr.levels.length>0?Lr.levels.length-1:0}),_r.TileSource.apply(this,[Lr]),this.levels=Lr.levels},_r.extend(_r.LegacyTileSource.prototype,_r.TileSource.prototype,{supports:function(Pr,Lr){return Pr.type&&Pr.type=="legacy-image-pyramid"||Pr.documentElement&&Pr.documentElement.getAttribute("type")=="legacy-image-pyramid"},configure:function(Pr,Lr){var Mr;return _r.isPlainObject(Pr)?Mr=Ar(this,Pr):Mr=Rr(this,Pr),Mr},getLevelScale:function(Pr){var Lr=NaN;return this.levels.length>0&&Pr>=this.minLevel&&Pr<=this.maxLevel&&(Lr=this.levels[Pr].width/this.levels[this.maxLevel].width),Lr},getNumTiles:function(Pr){var Lr=this.getLevelScale(Pr);return Lr?new _r.Point(1,1):new _r.Point(0,0)},getTileUrl:function(Pr,Lr,Mr){var Fr=null;return this.levels.length>0&&Pr>=this.minLevel&&Pr<=this.maxLevel&&(Fr=this.levels[Pr].url),Fr}});function Tr(Pr){var Lr=[],Mr,Fr;for(Fr=0;Fr<Pr.length;Fr++)Mr=Pr[Fr],Mr.height&&Mr.width&&Mr.url?Lr.push({url:Mr.url,width:Number(Mr.width),height:Number(Mr.height)}):_r.console.error("Unsupported image format: %s",Mr.url?Mr.url:"<no URL>");return Lr.sort(function(zr,Ur){return zr.height-Ur.height})}function Rr(Pr,Lr){if(!Lr||!Lr.documentElement)throw new Error(_r.getString("Errors.Xml"));var Mr=Lr.documentElement,Fr=Mr.tagName,zr=null,Ur=[],Vr,Nr;if(Fr=="image")try{for(zr={type:Mr.getAttribute("type"),levels:[]},Ur=Mr.getElementsByTagName("level"),Nr=0;Nr<Ur.length;Nr++)Vr=Ur[Nr],zr.levels.push({url:Vr.getAttribute("url"),width:parseInt(Vr.getAttribute("width"),10),height:parseInt(Vr.getAttribute("height"),10)});return Ar(Pr,zr)}catch(Dr){throw Dr instanceof Error?Dr:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(Fr=="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(Fr=="error")throw new Error("Error: "+Lr)}throw new Error("Unknown element "+Fr)}function Ar(Pr,Lr){return Lr.levels}}(OpenSeadragon),function(_r){_r.ImageTileSource=function(Tr){Tr=_r.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},Tr),_r.TileSource.apply(this,[Tr])},_r.extend(_r.ImageTileSource.prototype,_r.TileSource.prototype,{supports:function(Tr,Rr){return Tr.type&&Tr.type==="image"},configure:function(Tr,Rr){return Tr},getImageInfo:function(Tr){var Rr=this._image=new Image,Ar=this;this.crossOriginPolicy&&(Rr.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(Rr.useCredentials=this.ajaxWithCredentials),_r.addEvent(Rr,"load",function(){Ar.width=Object.prototype.hasOwnProperty.call(Rr,"naturalWidth")?Rr.naturalWidth:Rr.width,Ar.height=Object.prototype.hasOwnProperty.call(Rr,"naturalHeight")?Rr.naturalHeight:Rr.height,Ar.aspectRatio=Ar.width/Ar.height,Ar.dimensions=new _r.Point(Ar.width,Ar.height),Ar._tileWidth=Ar.width,Ar._tileHeight=Ar.height,Ar.tileOverlap=0,Ar.minLevel=0,Ar.levels=Ar._buildLevels(),Ar.maxLevel=Ar.levels.length-1,Ar.ready=!0,Ar.raiseEvent("ready",{tileSource:Ar})}),_r.addEvent(Rr,"error",function(){Ar.raiseEvent("open-failed",{message:"Error loading image at "+Tr,source:Tr})}),Rr.src=Tr},getLevelScale:function(Tr){var Rr=NaN;return Tr>=this.minLevel&&Tr<=this.maxLevel&&(Rr=this.levels[Tr].width/this.levels[this.maxLevel].width),Rr},getNumTiles:function(Tr){var Rr=this.getLevelScale(Tr);return Rr?new _r.Point(1,1):new _r.Point(0,0)},getTileUrl:function(Tr,Rr,Ar){var Pr=null;return Tr>=this.minLevel&&Tr<=this.maxLevel&&(Pr=this.levels[Tr].url),Pr},getContext2D:function(Tr,Rr,Ar){var Pr=null;return Tr>=this.minLevel&&Tr<=this.maxLevel&&(Pr=this.levels[Tr].context2D),Pr},_buildLevels:function(){var Tr=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!_r.supportsCanvas||!this.useCanvas)return delete this._image,Tr;var Rr=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,Ar=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,Pr=document.createElement("canvas"),Lr=Pr.getContext("2d");if(Pr.width=Rr,Pr.height=Ar,Lr.drawImage(this._image,0,0,Rr,Ar),Tr[0].context2D=Lr,delete this._image,_r.isCanvasTainted(Pr))return Tr;for(;Rr>=2&&Ar>=2;){Rr=Math.floor(Rr/2),Ar=Math.floor(Ar/2);var Mr=document.createElement("canvas"),Fr=Mr.getContext("2d");Mr.width=Rr,Mr.height=Ar,Fr.drawImage(Pr,0,0,Rr,Ar),Tr.splice(0,0,{context2D:Fr,width:Rr,height:Ar}),Pr=Mr,Lr=Fr}return Tr}})}(OpenSeadragon),function(_r){_r.TileSourceCollection=function(Tr,Rr,Ar,Pr){_r.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(_r){_r.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},_r.Button=function(Fr){var zr=this;_r.EventSource.call(this),_r.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:_r.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:_r.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},Fr),this.element=Fr.element||_r.makeNeutralElement("div"),Fr.element||(this.imgRest=_r.makeTransparentImage(this.srcRest),this.imgGroup=_r.makeTransparentImage(this.srcGroup),this.imgHover=_r.makeTransparentImage(this.srcHover),this.imgDown=_r.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",_r.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",_r.Browser.vendor==_r.BROWSERS.FIREFOX&&_r.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=_r.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new _r.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(Ur){Ur.insideElementPressed?(Lr(zr,_r.ButtonState.DOWN),zr.raiseEvent("enter",{originalEvent:Ur.originalEvent})):Ur.buttonDownAny||Lr(zr,_r.ButtonState.HOVER)},focusHandler:function(Ur){this.enterHandler(Ur),zr.raiseEvent("focus",{originalEvent:Ur.originalEvent})},exitHandler:function(Ur){Mr(zr,_r.ButtonState.GROUP),Ur.insideElementPressed&&zr.raiseEvent("exit",{originalEvent:Ur.originalEvent})},blurHandler:function(Ur){this.exitHandler(Ur),zr.raiseEvent("blur",{originalEvent:Ur.originalEvent})},pressHandler:function(Ur){Lr(zr,_r.ButtonState.DOWN),zr.raiseEvent("press",{originalEvent:Ur.originalEvent})},releaseHandler:function(Ur){Ur.insideElementPressed&&Ur.insideElementReleased?(Mr(zr,_r.ButtonState.HOVER),zr.raiseEvent("release",{originalEvent:Ur.originalEvent})):Ur.insideElementPressed?Mr(zr,_r.ButtonState.GROUP):Lr(zr,_r.ButtonState.HOVER)},clickHandler:function(Ur){Ur.quick&&zr.raiseEvent("click",{originalEvent:Ur.originalEvent})},keyHandler:function(Ur){return Ur.keyCode===13?(zr.raiseEvent("click",{originalEvent:Ur.originalEvent}),zr.raiseEvent("release",{originalEvent:Ur.originalEvent}),!1):!0}}),Mr(this,_r.ButtonState.REST)},_r.extend(_r.Button.prototype,_r.EventSource.prototype,{notifyGroupEnter:function(){Lr(this,_r.ButtonState.GROUP)},notifyGroupExit:function(){Mr(this,_r.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,_r.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,_r.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}});function Tr(Fr){_r.requestAnimationFrame(function(){Rr(Fr)})}function Rr(Fr){var zr,Ur,Vr;Fr.shouldFade&&(zr=_r.now(),Ur=zr-Fr.fadeBeginTime,Vr=1-Ur/Fr.fadeLength,Vr=Math.min(1,Vr),Vr=Math.max(0,Vr),Fr.imgGroup&&_r.setElementOpacity(Fr.imgGroup,Vr,!0),Vr>0&&Tr(Fr))}function Ar(Fr){Fr.shouldFade=!0,Fr.fadeBeginTime=_r.now()+Fr.fadeDelay,window.setTimeout(function(){Tr(Fr)},Fr.fadeDelay)}function Pr(Fr){Fr.shouldFade=!1,Fr.imgGroup&&_r.setElementOpacity(Fr.imgGroup,1,!0)}function Lr(Fr,zr){Fr.element.disabled||(zr>=_r.ButtonState.GROUP&&Fr.currentState==_r.ButtonState.REST&&(Pr(Fr),Fr.currentState=_r.ButtonState.GROUP),zr>=_r.ButtonState.HOVER&&Fr.currentState==_r.ButtonState.GROUP&&(Fr.imgHover&&(Fr.imgHover.style.visibility=""),Fr.currentState=_r.ButtonState.HOVER),zr>=_r.ButtonState.DOWN&&Fr.currentState==_r.ButtonState.HOVER&&(Fr.imgDown&&(Fr.imgDown.style.visibility=""),Fr.currentState=_r.ButtonState.DOWN))}function Mr(Fr,zr){Fr.element.disabled||(zr<=_r.ButtonState.HOVER&&Fr.currentState==_r.ButtonState.DOWN&&(Fr.imgDown&&(Fr.imgDown.style.visibility="hidden"),Fr.currentState=_r.ButtonState.HOVER),zr<=_r.ButtonState.GROUP&&Fr.currentState==_r.ButtonState.HOVER&&(Fr.imgHover&&(Fr.imgHover.style.visibility="hidden"),Fr.currentState=_r.ButtonState.GROUP),zr<=_r.ButtonState.REST&&Fr.currentState==_r.ButtonState.GROUP&&(Ar(Fr),Fr.currentState=_r.ButtonState.REST))}}(OpenSeadragon),function(_r){_r.ButtonGroup=function(Tr){_r.extend(!0,this,{buttons:[],clickTimeThreshold:_r.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:_r.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},Tr);var Rr=this.buttons.concat([]),Ar=this,Pr;if(this.element=Tr.element||_r.makeNeutralElement("div"),!Tr.group)for(this.element.style.display="inline-block",Pr=0;Pr<Rr.length;Pr++)this.element.appendChild(Rr[Pr].element);_r.setElementTouchActionNone(this.element),this.tracker=new _r.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(Lr){var Mr;for(Mr=0;Mr<Ar.buttons.length;Mr++)Ar.buttons[Mr].notifyGroupEnter()},exitHandler:function(Lr){var Mr;if(!Lr.insideElementPressed)for(Mr=0;Mr<Ar.buttons.length;Mr++)Ar.buttons[Mr].notifyGroupExit()}})},_r.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(_r){_r.Rect=function(Tr,Rr,Ar,Pr,Lr){this.x=typeof Tr=="number"?Tr:0,this.y=typeof Rr=="number"?Rr:0,this.width=typeof Ar=="number"?Ar:0,this.height=typeof Pr=="number"?Pr:0,this.degrees=typeof Lr=="number"?Lr:0,this.degrees=_r.positiveModulo(this.degrees,360);var Mr,Fr;this.degrees>=270?(Mr=this.getTopRight(),this.x=Mr.x,this.y=Mr.y,Fr=this.height,this.height=this.width,this.width=Fr,this.degrees-=270):this.degrees>=180?(Mr=this.getBottomRight(),this.x=Mr.x,this.y=Mr.y,this.degrees-=180):this.degrees>=90&&(Mr=this.getBottomLeft(),this.x=Mr.x,this.y=Mr.y,Fr=this.height,this.height=this.width,this.width=Fr,this.degrees-=90)},_r.Rect.fromSummits=function(Tr,Rr,Ar){var Pr=Tr.distanceTo(Rr),Lr=Tr.distanceTo(Ar),Mr=Rr.minus(Tr),Fr=Math.atan(Mr.y/Mr.x);return Mr.x<0?Fr+=Math.PI:Mr.y<0&&(Fr+=2*Math.PI),new _r.Rect(Tr.x,Tr.y,Pr,Lr,Fr/Math.PI*180)},_r.Rect.prototype={clone:function(){return new _r.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new _r.Point(this.x,this.y)},getBottomRight:function(){return new _r.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new _r.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new _r.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new _r.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new _r.Point(this.width,this.height)},equals:function(Tr){return Tr instanceof _r.Rect&&this.x===Tr.x&&this.y===Tr.y&&this.width===Tr.width&&this.height===Tr.height&&this.degrees===Tr.degrees},times:function(Tr){return new _r.Rect(this.x*Tr,this.y*Tr,this.width*Tr,this.height*Tr,this.degrees)},translate:function(Tr){return new _r.Rect(this.x+Tr.x,this.y+Tr.y,this.width,this.height,this.degrees)},union:function(Tr){var Rr=this.getBoundingBox(),Ar=Tr.getBoundingBox(),Pr=Math.min(Rr.x,Ar.x),Lr=Math.min(Rr.y,Ar.y),Mr=Math.max(Rr.x+Rr.width,Ar.x+Ar.width),Fr=Math.max(Rr.y+Rr.height,Ar.y+Ar.height);return new _r.Rect(Pr,Lr,Mr-Pr,Fr-Lr)},intersection:function(Tr){var Rr=1e-10,Ar=[],Pr=this.getTopLeft();Tr.containsPoint(Pr,Rr)&&Ar.push(Pr);var Lr=this.getTopRight();Tr.containsPoint(Lr,Rr)&&Ar.push(Lr);var Mr=this.getBottomLeft();Tr.containsPoint(Mr,Rr)&&Ar.push(Mr);var Fr=this.getBottomRight();Tr.containsPoint(Fr,Rr)&&Ar.push(Fr);var zr=Tr.getTopLeft();this.containsPoint(zr,Rr)&&Ar.push(zr);var Ur=Tr.getTopRight();this.containsPoint(Ur,Rr)&&Ar.push(Ur);var Vr=Tr.getBottomLeft();this.containsPoint(Vr,Rr)&&Ar.push(Vr);var Nr=Tr.getBottomRight();this.containsPoint(Nr,Rr)&&Ar.push(Nr);for(var Dr=this._getSegments(),jr=Tr._getSegments(),Gr=0;Gr<Dr.length;Gr++)for(var Wr=Dr[Gr],qr=0;qr<jr.length;qr++){var Kr=jr[qr],Xr=Zr(Wr[0],Wr[1],Kr[0],Kr[1]);Xr&&Ar.push(Xr)}function Zr(as,ls,us,xs){var Ts=ls.minus(as),vs=xs.minus(us),gs=-vs.x*Ts.y+Ts.x*vs.y;if(gs===0)return null;var fs=(Ts.x*(as.y-us.y)-Ts.y*(as.x-us.x))/gs,ys=(vs.x*(as.y-us.y)-vs.y*(as.x-us.x))/gs;return-Rr<=fs&&fs<=1-Rr&&-Rr<=ys&&ys<=1-Rr?new _r.Point(as.x+ys*Ts.x,as.y+ys*Ts.y):null}if(Ar.length===0)return null;for(var Jr=Ar[0].x,_i=Ar[0].x,es=Ar[0].y,ts=Ar[0].y,rs=1;rs<Ar.length;rs++){var ns=Ar[rs];ns.x<Jr&&(Jr=ns.x),ns.x>_i&&(_i=ns.x),ns.y<es&&(es=ns.y),ns.y>ts&&(ts=ns.y)}return new _r.Rect(Jr,es,_i-Jr,ts-es)},_getSegments:function(){var Tr=this.getTopLeft(),Rr=this.getTopRight(),Ar=this.getBottomLeft(),Pr=this.getBottomRight();return[[Tr,Rr],[Rr,Pr],[Pr,Ar],[Ar,Tr]]},rotate:function(Tr,Rr){if(Tr=_r.positiveModulo(Tr,360),Tr===0)return this.clone();Rr=Rr||this.getCenter();var Ar=this.getTopLeft().rotate(Tr,Rr),Pr=this.getTopRight().rotate(Tr,Rr),Lr=Pr.minus(Ar);Lr=Lr.apply(function(Fr){var zr=1e-15;return Math.abs(Fr)<zr?0:Fr});var Mr=Math.atan(Lr.y/Lr.x);return Lr.x<0?Mr+=Math.PI:Lr.y<0&&(Mr+=2*Math.PI),new _r.Rect(Ar.x,Ar.y,this.width,this.height,Mr/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var Tr=this.getTopLeft(),Rr=this.getTopRight(),Ar=this.getBottomLeft(),Pr=this.getBottomRight(),Lr=Math.min(Tr.x,Rr.x,Ar.x,Pr.x),Mr=Math.max(Tr.x,Rr.x,Ar.x,Pr.x),Fr=Math.min(Tr.y,Rr.y,Ar.y,Pr.y),zr=Math.max(Tr.y,Rr.y,Ar.y,Pr.y);return new _r.Rect(Lr,Fr,Mr-Lr,zr-Fr)},getIntegerBoundingBox:function(){var Tr=this.getBoundingBox(),Rr=Math.floor(Tr.x),Ar=Math.floor(Tr.y),Pr=Math.ceil(Tr.width+Tr.x-Rr),Lr=Math.ceil(Tr.height+Tr.y-Ar);return new _r.Rect(Rr,Ar,Pr,Lr)},containsPoint:function(Tr,Rr){Rr=Rr||0;var Ar=this.getTopLeft(),Pr=this.getTopRight(),Lr=this.getBottomLeft(),Mr=Pr.minus(Ar),Fr=Lr.minus(Ar);return(Tr.x-Ar.x)*Mr.x+(Tr.y-Ar.y)*Mr.y>=-Rr&&(Tr.x-Pr.x)*Mr.x+(Tr.y-Pr.y)*Mr.y<=Rr&&(Tr.x-Ar.x)*Fr.x+(Tr.y-Ar.y)*Fr.y>=-Rr&&(Tr.x-Lr.x)*Fr.x+(Tr.y-Lr.y)*Fr.y<=Rr},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(OpenSeadragon),function(_r){var Tr={};_r.ReferenceStrip=function(Ur){var Vr=this,Nr=Ur.viewer,Dr=_r.getElementSize(Nr.element),jr,Gr,Wr;for(Ur.id||(Ur.id="referencestrip-"+_r.now(),this.element=_r.makeNeutralElement("div"),this.element.id=Ur.id,this.element.className="referencestrip"),Ur=_r.extend(!0,{sizeRatio:_r.DEFAULT_SETTINGS.referenceStripSizeRatio,position:_r.DEFAULT_SETTINGS.referenceStripPosition,scroll:_r.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:_r.DEFAULT_SETTINGS.clickTimeThreshold},Ur,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),_r.extend(this,Ur),Tr[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,Gr=this.element.style,Gr.marginTop="0px",Gr.marginRight="0px",Gr.marginBottom="0px",Gr.marginLeft="0px",Gr.left="0px",Gr.bottom="0px",Gr.border="0px",Gr.background="#000",Gr.position="relative",_r.setElementTouchActionNone(this.element),_r.setElementOpacity(this.element,.8),this.viewer=Nr,this.innerTracker=new _r.MouseTracker({element:this.element,dragHandler:_r.delegate(this,Rr),scrollHandler:_r.delegate(this,Ar),enterHandler:_r.delegate(this,Lr),exitHandler:_r.delegate(this,Mr),keyDownHandler:_r.delegate(this,Fr),keyHandler:_r.delegate(this,zr)}),Ur.width&&Ur.height?(this.element.style.width=Ur.width+"px",this.element.style.height=Ur.height+"px",Nr.addControl(this.element,{anchor:_r.ControlAnchor.BOTTOM_LEFT})):Ur.scroll=="horizontal"?(this.element.style.width=Dr.x*Ur.sizeRatio*Nr.tileSources.length+12*Nr.tileSources.length+"px",this.element.style.height=Dr.y*Ur.sizeRatio+"px",Nr.addControl(this.element,{anchor:_r.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=Dr.y*Ur.sizeRatio*Nr.tileSources.length+12*Nr.tileSources.length+"px",this.element.style.width=Dr.x*Ur.sizeRatio+"px",Nr.addControl(this.element,{anchor:_r.ControlAnchor.TOP_LEFT})),this.panelWidth=Dr.x*this.sizeRatio+8,this.panelHeight=Dr.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},Wr=0;Wr<Nr.tileSources.length;Wr++)jr=_r.makeNeutralElement("div"),jr.id=this.element.id+"-"+Wr,jr.style.width=Vr.panelWidth+"px",jr.style.height=Vr.panelHeight+"px",jr.style.display="inline",jr.style.float="left",jr.style.cssFloat="left",jr.style.styleFloat="left",jr.style.padding="2px",_r.setElementTouchActionNone(jr),jr.innerTracker=new _r.MouseTracker({element:jr,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(qr){qr.eventSource.dragging=_r.now()},releaseHandler:function(qr){var Kr=qr.eventSource,Xr=Kr.element.id,Zr=Number(Xr.split("-")[2]),Jr=_r.now();qr.insideElementPressed&&qr.insideElementReleased&&Kr.dragging&&Jr-Kr.dragging<Kr.clickTimeThreshold&&(Kr.dragging=null,Nr.goToPage(Zr))}}),this.element.appendChild(jr),jr.activePanel=!1,this.panels.push(jr);Pr(this,this.scroll=="vertical"?Dr.y:Dr.x,0),this.setFocus(0)},_r.extend(_r.ReferenceStrip.prototype,_r.EventSource.prototype,_r.Viewer.prototype,{setFocus:function(Ur){var Vr=this.element.querySelector("#"+this.element.id+"-"+Ur),Nr=_r.getElementSize(this.viewer.canvas),Dr=Number(this.element.style.width.replace("px","")),jr=Number(this.element.style.height.replace("px","")),Gr=-Number(this.element.style.marginLeft.replace("px","")),Wr=-Number(this.element.style.marginTop.replace("px","")),qr;this.currentSelected!==Vr&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=Vr,this.currentSelected.style.background="#999",this.scroll=="horizontal"?(qr=Number(Ur)*(this.panelWidth+3),qr>Gr+Nr.x-this.panelWidth?(qr=Math.min(qr,Dr-Nr.x),this.element.style.marginLeft=-qr+"px",Pr(this,Nr.x,-qr)):qr<Gr&&(qr=Math.max(0,qr-Nr.x/2),this.element.style.marginLeft=-qr+"px",Pr(this,Nr.x,-qr))):(qr=Number(Ur)*(this.panelHeight+3),qr>Wr+Nr.y-this.panelHeight?(qr=Math.min(qr,jr-Nr.y),this.element.style.marginTop=-qr+"px",Pr(this,Nr.y,-qr)):qr<Wr&&(qr=Math.max(0,qr-Nr.y/2),this.element.style.marginTop=-qr+"px",Pr(this,Nr.y,-qr))),this.currentPage=Ur,Lr.call(this,{eventSource:this.innerTracker}))},update:function(){return Tr[this.id].animating?(_r.console.log("image reference strip update"),!0):!1},destroy:function(){if(this.miniViewers)for(var Ur in this.miniViewers)this.miniViewers[Ur].destroy();this.element&&this.element.parentNode.removeChild(this.element)}});function Rr(Ur){var Vr=Number(this.element.style.marginLeft.replace("px","")),Nr=Number(this.element.style.marginTop.replace("px","")),Dr=Number(this.element.style.width.replace("px","")),jr=Number(this.element.style.height.replace("px","")),Gr=_r.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&(this.scroll=="horizontal"?-Ur.delta.x>0?Vr>-(Dr-Gr.x)&&(this.element.style.marginLeft=Vr+Ur.delta.x*2+"px",Pr(this,Gr.x,Vr+Ur.delta.x*2)):-Ur.delta.x<0&&Vr<0&&(this.element.style.marginLeft=Vr+Ur.delta.x*2+"px",Pr(this,Gr.x,Vr+Ur.delta.x*2)):-Ur.delta.y>0?Nr>-(jr-Gr.y)&&(this.element.style.marginTop=Nr+Ur.delta.y*2+"px",Pr(this,Gr.y,Nr+Ur.delta.y*2)):-Ur.delta.y<0&&Nr<0&&(this.element.style.marginTop=Nr+Ur.delta.y*2+"px",Pr(this,Gr.y,Nr+Ur.delta.y*2))),!1}function Ar(Ur){var Vr=Number(this.element.style.marginLeft.replace("px","")),Nr=Number(this.element.style.marginTop.replace("px","")),Dr=Number(this.element.style.width.replace("px","")),jr=Number(this.element.style.height.replace("px","")),Gr=_r.getElementSize(this.viewer.canvas);return this.element&&(this.scroll=="horizontal"?Ur.scroll>0?Vr>-(Dr-Gr.x)&&(this.element.style.marginLeft=Vr-Ur.scroll*60+"px",Pr(this,Gr.x,Vr-Ur.scroll*60)):Ur.scroll<0&&Vr<0&&(this.element.style.marginLeft=Vr-Ur.scroll*60+"px",Pr(this,Gr.x,Vr-Ur.scroll*60)):Ur.scroll<0?Nr>Gr.y-jr&&(this.element.style.marginTop=Nr+Ur.scroll*60+"px",Pr(this,Gr.y,Nr+Ur.scroll*60)):Ur.scroll>0&&Nr<0&&(this.element.style.marginTop=Nr+Ur.scroll*60+"px",Pr(this,Gr.y,Nr+Ur.scroll*60))),!1}function Pr(Ur,Vr,Nr){var Dr,jr,Gr,Wr,qr,Kr,Xr;for(Ur.scroll=="horizontal"?Dr=Ur.panelWidth:Dr=Ur.panelHeight,jr=Math.ceil(Vr/Dr)+5,Gr=Math.ceil((Math.abs(Nr)+Vr)/Dr)+1,jr=Gr-jr,jr=jr<0?0:jr,Kr=jr;Kr<Gr&&Kr<Ur.panels.length;Kr++)if(Xr=Ur.panels[Kr],!Xr.activePanel){var Zr,Jr=Ur.viewer.tileSources[Kr];Jr.referenceStripThumbnailUrl?Zr={type:"image",url:Jr.referenceStripThumbnailUrl}:Zr=Jr,Wr=new _r.Viewer({id:Xr.id,tileSources:[Zr],element:Xr,navigatorSizeRatio:Ur.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:Ur.viewer.loadTilesWithAjax,ajaxHeaders:Ur.viewer.ajaxHeaders,useCanvas:Ur.useCanvas}),Wr.displayRegion=_r.makeNeutralElement("div"),Wr.displayRegion.id=Xr.id+"-displayregion",Wr.displayRegion.className="displayregion",qr=Wr.displayRegion.style,qr.position="relative",qr.top="0px",qr.left="0px",qr.fontSize="0px",qr.overflow="hidden",qr.float="left",qr.cssFloat="left",qr.styleFloat="left",qr.zIndex=999999999,qr.cursor="default",qr.width=Ur.panelWidth-4+"px",qr.height=Ur.panelHeight-4+"px",Wr.displayRegion.innerTracker=new _r.MouseTracker({element:Wr.displayRegion,startDisabled:!0}),Xr.getElementsByTagName("div")[0].appendChild(Wr.displayRegion),Ur.miniViewers[Xr.id]=Wr,Xr.activePanel=!0}}function Lr(Ur){var Vr=Ur.eventSource.element;return this.scroll=="horizontal"?Vr.style.marginBottom="0px":Vr.style.marginLeft="0px",!1}function Mr(Ur){var Vr=Ur.eventSource.element;return this.scroll=="horizontal"?Vr.style.marginBottom="-"+_r.getElementSize(Vr).y/2+"px":Vr.style.marginLeft="-"+_r.getElementSize(Vr).x/2+"px",!1}function Fr(Ur){if(!Ur.preventDefaultAction&&!Ur.ctrl&&!Ur.alt&&!Ur.meta)switch(Ur.keyCode){case 38:return Ar.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:return Ar.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 37:return Ar.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return Ar.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}function zr(Ur){if(!Ur.preventDefaultAction&&!Ur.ctrl&&!Ur.alt&&!Ur.meta)switch(Ur.keyCode){case 61:return Ar.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return Ar.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return Ar.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:return Ar.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:return Ar.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return Ar.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}}(OpenSeadragon),function(_r){_r.DisplayRect=function(Tr,Rr,Ar,Pr,Lr,Mr){_r.Rect.apply(this,[Tr,Rr,Ar,Pr]),this.minLevel=Lr,this.maxLevel=Mr},_r.extend(_r.DisplayRect.prototype,_r.Rect.prototype)}(OpenSeadragon),function(_r){_r.Spring=function(Rr){var Ar=arguments;typeof Rr!="object"&&(Rr={initial:Ar.length&&typeof Ar[0]=="number"?Ar[0]:void 0,springStiffness:Ar.length>1?Ar[1].springStiffness:5,animationTime:Ar.length>1?Ar[1].animationTime:1.5}),_r.console.assert(typeof Rr.springStiffness=="number"&&Rr.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),_r.console.assert(typeof Rr.animationTime=="number"&&Rr.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),Rr.exponential&&(this._exponential=!0,delete Rr.exponential),_r.extend(!0,this,Rr),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:_r.now()},_r.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},_r.Spring.prototype={resetTo:function(Rr){_r.console.assert(!this._exponential||Rr!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=Rr,this.start.time=this.target.time=this.current.time=_r.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(Rr){_r.console.assert(!this._exponential||Rr!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=Rr,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(Rr){this.start.value+=Rr,this.target.value+=Rr,this._exponential&&(_r.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(Rr){this._exponential=Rr,this._exponential&&(_r.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=_r.now();var Rr,Ar;this._exponential?(Rr=this.start._logValue,Ar=this.target._logValue):(Rr=this.start.value,Ar=this.target.value);var Pr=this.current.time>=this.target.time?Ar:Rr+(Ar-Rr)*Tr(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),Lr=this.current.value;return this._exponential?this.current.value=Math.exp(Pr):this.current.value=Pr,Lr!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function Tr(Rr,Ar){return(1-Math.exp(Rr*-Ar))/(1-Math.exp(-Rr))}}(OpenSeadragon),function(_r){function Tr(Ar){_r.extend(!0,this,{timeout:_r.DEFAULT_SETTINGS.timeout,jobId:null},Ar),this.image=null}Tr.prototype={errorMsg:null,start:function(){var Ar=this,Pr=this.abort;this.image=new Image,this.image.onload=function(){Ar.finish(!0)},this.image.onabort=this.image.onerror=function(){Ar.errorMsg="Image load aborted",Ar.finish(!1)},this.jobId=window.setTimeout(function(){Ar.errorMsg="Image load exceeded timeout ("+Ar.timeout+" ms)",Ar.finish(!1)},this.timeout),this.loadWithAjax?(this.request=_r.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(Lr){var Mr;try{Mr=new window.Blob([Lr.response])}catch(Vr){var Fr=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(Vr.name==="TypeError"&&Fr){var zr=new Fr;zr.append(Lr.response),Mr=zr.getBlob()}}Mr.size===0&&(Ar.errorMsg="Empty image response.",Ar.finish(!1));var Ur=(window.URL||window.webkitURL).createObjectURL(Mr);Ar.image.src=Ur},error:function(Lr){Ar.errorMsg="Image load aborted - XHR error",Ar.finish(!1)}}),this.abort=function(){Ar.request.abort(),typeof Pr=="function"&&Pr()}):(this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(Ar){this.image.onload=this.image.onerror=this.image.onabort=null,Ar||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},_r.ImageLoader=function(Ar){_r.extend(!0,this,{jobLimit:_r.DEFAULT_SETTINGS.imageLoaderLimit,timeout:_r.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},Ar)},_r.ImageLoader.prototype={addJob:function(Ar){var Pr=this,Lr=function(zr){Rr(Pr,zr,Ar.callback)},Mr={src:Ar.src,loadWithAjax:Ar.loadWithAjax,ajaxHeaders:Ar.loadWithAjax?Ar.ajaxHeaders:null,crossOriginPolicy:Ar.crossOriginPolicy,ajaxWithCredentials:Ar.ajaxWithCredentials,callback:Lr,abort:Ar.abort,timeout:this.timeout},Fr=new Tr(Mr);!this.jobLimit||this.jobsInProgress<this.jobLimit?(Fr.start(),this.jobsInProgress++):this.jobQueue.push(Fr)},clear:function(){for(var Ar=0;Ar<this.jobQueue.length;Ar++){var Pr=this.jobQueue[Ar];typeof Pr.abort=="function"&&Pr.abort()}this.jobQueue=[]}};function Rr(Ar,Pr,Lr){var Mr;Ar.jobsInProgress--,(!Ar.jobLimit||Ar.jobsInProgress<Ar.jobLimit)&&Ar.jobQueue.length>0&&(Mr=Ar.jobQueue.shift(),Mr.start(),Ar.jobsInProgress++),Lr(Pr.image,Pr.errorMsg,Pr.request)}}(OpenSeadragon),function(_r){_r.Tile=function(Tr,Rr,Ar,Pr,Lr,Mr,Fr,zr,Ur,Vr){this.level=Tr,this.x=Rr,this.y=Ar,this.bounds=Pr,this.sourceBounds=Vr,this.exists=Lr,this.url=Mr,this.context2D=Fr,this.loadWithAjax=zr,this.ajaxHeaders=Ur,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},_r.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(Tr){if(!this.cacheImageRecord){_r.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){_r.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}this.element||(this.element=_r.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=Tr&&Tr.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",_r.setElementOpacity(this.element,this.opacity)},drawCanvas:function(Tr,Rr,Ar,Pr){var Lr=this.position.times(_r.pixelDensityRatio),Mr=this.size.times(_r.pixelDensityRatio),Fr;if(!this.context2D&&!this.cacheImageRecord){_r.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(Fr=this.context2D||this.cacheImageRecord.getRenderedContext(),!this.loaded||!Fr){_r.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}Tr.save(),Tr.globalAlpha=this.opacity,typeof Ar=="number"&&Ar!==1&&(Lr=Lr.times(Ar),Mr=Mr.times(Ar)),Pr instanceof _r.Point&&(Lr=Lr.plus(Pr)),Tr.globalAlpha===1&&this._hasTransparencyChannel()&&Tr.clearRect(Lr.x,Lr.y,Mr.x,Mr.y),Rr({context:Tr,tile:this,rendered:Fr});var zr,Ur;this.sourceBounds?(zr=Math.min(this.sourceBounds.width,Fr.canvas.width),Ur=Math.min(this.sourceBounds.height,Fr.canvas.height)):(zr=Fr.canvas.width,Ur=Fr.canvas.height),Tr.drawImage(Fr.canvas,0,0,zr,Ur,Lr.x,Lr.y,Mr.x,Mr.y),Tr.restore()},getScaleForEdgeSmoothing:function(){var Tr;if(this.cacheImageRecord)Tr=this.cacheImageRecord.getRenderedContext();else if(this.context2D)Tr=this.context2D;else return _r.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return Tr.canvas.width/(this.size.x*_r.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(Tr,Rr,Ar){var Pr=Math.max(1,Math.ceil((Ar.x-Rr.x)/2)),Lr=Math.max(1,Math.ceil((Ar.y-Rr.y)/2));return new _r.Point(Pr,Lr).minus(this.position.times(_r.pixelDensityRatio).times(Tr||1).apply(function(Mr){return Mr%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(_r){_r.OverlayPlacement=_r.Placement,_r.OverlayRotationMode=_r.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),_r.Overlay=function(Tr,Rr,Ar){var Pr;_r.isPlainObject(Tr)?Pr=Tr:Pr={element:Tr,location:Rr,placement:Ar},this.element=Pr.element,this.style=Pr.element.style,this._init(Pr)},_r.Overlay.prototype={_init:function(Tr){this.location=Tr.location,this.placement=Tr.placement===void 0?_r.Placement.TOP_LEFT:Tr.placement,this.onDraw=Tr.onDraw,this.checkResize=Tr.checkResize===void 0?!0:Tr.checkResize,this.width=Tr.width===void 0?null:Tr.width,this.height=Tr.height===void 0?null:Tr.height,this.rotationMode=Tr.rotationMode||_r.OverlayRotationMode.EXACT,this.location instanceof _r.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=_r.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new _r.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(Tr,Rr){var Ar=_r.Placement.properties[this.placement];Ar&&(Ar.isHorizontallyCentered?Tr.x-=Rr.x/2:Ar.isRight&&(Tr.x-=Rr.x),Ar.isVerticallyCentered?Tr.y-=Rr.y/2:Ar.isBottom&&(Tr.y-=Rr.y))},destroy:function(){var Tr=this.element,Rr=this.style;Tr.parentNode&&(Tr.parentNode.removeChild(Tr),Tr.prevElementParent&&(Rr.display="none",document.body.appendChild(Tr))),this.onDraw=null,Rr.top="",Rr.left="",Rr.position="",this.width!==null&&(Rr.width=""),this.height!==null&&(Rr.height="");var Ar=_r.getCssPropertyWithVendorPrefix("transformOrigin"),Pr=_r.getCssPropertyWithVendorPrefix("transform");Ar&&Pr&&(Rr[Ar]="",Rr[Pr]="")},drawHTML:function(Tr,Rr){var Ar=this.element;Ar.parentNode!==Tr&&(Ar.prevElementParent=Ar.parentNode,Ar.prevNextSibling=Ar.nextSibling,Tr.appendChild(Ar),this.style.position="absolute",this.size=_r.getElementSize(Ar));var Pr=this._getOverlayPositionAndSize(Rr),Lr=Pr.position,Mr=this.size=Pr.size,Fr=Pr.rotate;if(this.onDraw)this.onDraw(Lr,Mr,this.element);else{var zr=this.style;zr.left=Lr.x+"px",zr.top=Lr.y+"px",this.width!==null&&(zr.width=Mr.x+"px"),this.height!==null&&(zr.height=Mr.y+"px");var Ur=_r.getCssPropertyWithVendorPrefix("transformOrigin"),Vr=_r.getCssPropertyWithVendorPrefix("transform");Ur&&Vr&&(Fr?(zr[Ur]=this._getTransformOrigin(),zr[Vr]="rotate("+Fr+"deg)"):(zr[Ur]="",zr[Vr]="")),zr.display!=="none"&&(zr.display="block")}},_getOverlayPositionAndSize:function(Tr){var Rr=Tr.pixelFromPoint(this.location,!0),Ar=this._getSizeInPixels(Tr);this.adjust(Rr,Ar);var Pr=0;if(Tr.degrees&&this.rotationMode!==_r.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===_r.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var Lr=new _r.Rect(Rr.x,Rr.y,Ar.x,Ar.y),Mr=this._getBoundingBox(Lr,Tr.degrees);Rr=Mr.getTopLeft(),Ar=Mr.getSize()}else Pr=Tr.degrees;return{position:Rr,size:Ar,rotate:Pr}},_getSizeInPixels:function(Tr){var Rr=this.size.x,Ar=this.size.y;if(this.width!==null||this.height!==null){var Pr=Tr.deltaPixelsFromPointsNoRotate(new _r.Point(this.width||0,this.height||0),!0);this.width!==null&&(Rr=Pr.x),this.height!==null&&(Ar=Pr.y)}if(this.checkResize&&(this.width===null||this.height===null)){var Lr=this.size=_r.getElementSize(this.element);this.width===null&&(Rr=Lr.x),this.height===null&&(Ar=Lr.y)}return new _r.Point(Rr,Ar)},_getBoundingBox:function(Tr,Rr){var Ar=this._getPlacementPoint(Tr);return Tr.rotate(Rr,Ar).getBoundingBox()},_getPlacementPoint:function(Tr){var Rr=new _r.Point(Tr.x,Tr.y),Ar=_r.Placement.properties[this.placement];return Ar&&(Ar.isHorizontallyCentered?Rr.x+=Tr.width/2:Ar.isRight&&(Rr.x+=Tr.width),Ar.isVerticallyCentered?Rr.y+=Tr.height/2:Ar.isBottom&&(Rr.y+=Tr.height)),Rr},_getTransformOrigin:function(){var Tr="",Rr=_r.Placement.properties[this.placement];return Rr&&(Rr.isLeft?Tr="left":Rr.isRight&&(Tr="right"),Rr.isTop?Tr+=" top":Rr.isBottom&&(Tr+=" bottom")),Tr},update:function(Tr,Rr){var Ar=_r.isPlainObject(Tr)?Tr:{location:Tr,placement:Rr};this._init({location:Ar.location||this.location,placement:Ar.placement!==void 0?Ar.placement:this.placement,onDraw:Ar.onDraw||this.onDraw,checkResize:Ar.checkResize||this.checkResize,width:Ar.width!==void 0?Ar.width:this.width,height:Ar.height!==void 0?Ar.height:this.height,rotationMode:Ar.rotationMode||this.rotationMode})},getBounds:function(Tr){_r.console.assert(Tr,"A viewport must now be passed to Overlay.getBounds.");var Rr=this.width,Ar=this.height;if(Rr===null||Ar===null){var Pr=Tr.deltaPointsFromPixelsNoRotate(this.size,!0);Rr===null&&(Rr=Pr.x),Ar===null&&(Ar=Pr.y)}var Lr=this.location.clone();return this.adjust(Lr,new _r.Point(Rr,Ar)),this._adjustBoundsForRotation(Tr,new _r.Rect(Lr.x,Lr.y,Rr,Ar))},_adjustBoundsForRotation:function(Tr,Rr){if(!Tr||Tr.degrees===0||this.rotationMode===_r.OverlayRotationMode.EXACT)return Rr;if(this.rotationMode===_r.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return Rr;var Ar=this._getOverlayPositionAndSize(Tr);return Tr.viewerElementToViewportRectangle(new _r.Rect(Ar.position.x,Ar.position.y,Ar.size.x,Ar.size.y))}return Rr.rotate(-Tr.degrees,this._getPlacementPoint(Rr))}}}(OpenSeadragon),function(_r){_r.Drawer=function(Tr){_r.console.assert(Tr.viewer,"[Drawer] options.viewer is required");var Rr=arguments;if(_r.isPlainObject(Tr)||(Tr={source:Rr[0],viewport:Rr[1],element:Rr[2]}),_r.console.assert(Tr.viewport,"[Drawer] options.viewport is required"),_r.console.assert(Tr.element,"[Drawer] options.element is required"),Tr.source&&_r.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=Tr.viewer,this.viewport=Tr.viewport,this.debugGridColor=typeof Tr.debugGridColor=="string"?[Tr.debugGridColor]:Tr.debugGridColor||_r.DEFAULT_SETTINGS.debugGridColor,Tr.opacity&&_r.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=_r.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=_r.getElement(Tr.element),this.canvas=_r.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var Ar=this._calculateCanvasSize();this.canvas.width=Ar.x,this.canvas.height=Ar.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",_r.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},_r.Drawer.prototype={addOverlay:function(Tr,Rr,Ar,Pr){return _r.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(Tr,Rr,Ar,Pr),this},updateOverlay:function(Tr,Rr,Ar){return _r.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(Tr,Rr,Ar),this},removeOverlay:function(Tr){return _r.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(Tr),this},clearOverlays:function(){return _r.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(Tr){var Rr=this.viewport.pixelFromPointNoRotate(Tr,!0);return new _r.Point(Rr.x*_r.pixelDensityRatio,Rr.y*_r.pixelDensityRatio)},clipWithPolygons:function(Tr,Rr){if(this.useCanvas){var Ar=this._getContext(Rr);Ar.beginPath(),Tr.forEach(function(Pr){Pr.forEach(function(Lr,Mr){Ar[Mr===0?"moveTo":"lineTo"](Lr.x,Lr.y)})}),Ar.clip()}},setOpacity:function(Tr){_r.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var Rr=this.viewer.world,Ar=0;Ar<Rr.getItemCount();Ar++)Rr.getItemAt(Ar).setOpacity(Tr);return this},getOpacity:function(){_r.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var Tr=this.viewer.world,Rr=0,Ar=0;Ar<Tr.getItemCount();Ar++){var Pr=Tr.getItemAt(Ar).getOpacity();Pr>Rr&&(Rr=Pr)}return Rr},needsUpdate:function(){return _r.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return _r.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return _r.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return _r.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var Tr=this._calculateCanvasSize();if((this.canvas.width!=Tr.x||this.canvas.height!=Tr.y)&&(this.canvas.width=Tr.x,this.canvas.height=Tr.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var Rr=this._calculateSketchCanvasSize();this.sketchCanvas.width=Rr.x,this.sketchCanvas.height=Rr.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(Tr,Rr){if(this.useCanvas){var Ar=this._getContext(Tr);if(Rr)Ar.clearRect(Rr.x,Rr.y,Rr.width,Rr.height);else{var Pr=Ar.canvas;Ar.clearRect(0,0,Pr.width,Pr.height)}}},viewportToDrawerRectangle:function(Tr){var Rr=this.viewport.pixelFromPointNoRotate(Tr.getTopLeft(),!0),Ar=this.viewport.deltaPixelsFromPointsNoRotate(Tr.getSize(),!0);return new _r.Rect(Rr.x*_r.pixelDensityRatio,Rr.y*_r.pixelDensityRatio,Ar.x*_r.pixelDensityRatio,Ar.y*_r.pixelDensityRatio)},drawTile:function(Tr,Rr,Ar,Pr,Lr){if(_r.console.assert(Tr,"[Drawer.drawTile] tile is required"),_r.console.assert(Rr,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var Mr=this._getContext(Ar);Pr=Pr||1,Tr.drawCanvas(Mr,Rr,Pr,Lr)}else Tr.drawHTML(this.canvas)},_getContext:function(Tr){var Rr=this.context;if(Tr){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var Ar=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=Ar.x,this.sketchCanvas.height=Ar.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var Pr=this;this.viewer.addHandler("rotate",function Lr(){if(Pr.viewport.getRotation()!==0){Pr.viewer.removeHandler("rotate",Lr);var Mr=Pr._calculateSketchCanvasSize();Pr.sketchCanvas.width=Mr.x,Pr.sketchCanvas.height=Mr.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}Rr=this.sketchContext}return Rr},saveContext:function(Tr){this.useCanvas&&this._getContext(Tr).save()},restoreContext:function(Tr){this.useCanvas&&this._getContext(Tr).restore()},setClip:function(Tr,Rr){if(this.useCanvas){var Ar=this._getContext(Rr);Ar.beginPath(),Ar.rect(Tr.x,Tr.y,Tr.width,Tr.height),Ar.clip()}},drawRectangle:function(Tr,Rr,Ar){if(this.useCanvas){var Pr=this._getContext(Ar);Pr.save(),Pr.fillStyle=Rr,Pr.fillRect(Tr.x,Tr.y,Tr.width,Tr.height),Pr.restore()}},blendSketch:function(Tr,Rr,Ar,Pr){var Lr=Tr;if(_r.isPlainObject(Lr)||(Lr={opacity:Tr,scale:Rr,translate:Ar,compositeOperation:Pr}),!(!this.useCanvas||!this.sketchCanvas)){Tr=Lr.opacity,Pr=Lr.compositeOperation;var Mr=Lr.bounds;if(this.context.save(),this.context.globalAlpha=Tr,Pr&&(this.context.globalCompositeOperation=Pr),Mr)Mr.x<0&&(Mr.width+=Mr.x,Mr.x=0),Mr.x+Mr.width>this.canvas.width&&(Mr.width=this.canvas.width-Mr.x),Mr.y<0&&(Mr.height+=Mr.y,Mr.y=0),Mr.y+Mr.height>this.canvas.height&&(Mr.height=this.canvas.height-Mr.y),this.context.drawImage(this.sketchCanvas,Mr.x,Mr.y,Mr.width,Mr.height,Mr.x,Mr.y,Mr.width,Mr.height);else{Rr=Lr.scale||1,Ar=Lr.translate;var Fr=Ar instanceof _r.Point?Ar:new _r.Point(0,0),zr=0,Ur=0;if(Ar){var Vr=this.sketchCanvas.width-this.canvas.width,Nr=this.sketchCanvas.height-this.canvas.height;zr=Math.round(Vr/2),Ur=Math.round(Nr/2)}this.context.drawImage(this.sketchCanvas,Fr.x-zr*Rr,Fr.y-Ur*Rr,(this.canvas.width+2*zr)*Rr,(this.canvas.height+2*Ur)*Rr,-zr,-Ur,this.canvas.width+2*zr,this.canvas.height+2*Ur)}this.context.restore()}},drawDebugInfo:function(Tr,Rr,Ar,Pr){if(this.useCanvas){var Lr=this.viewer.world.getIndexOfItem(Pr)%this.debugGridColor.length,Mr=this.context;Mr.save(),Mr.lineWidth=2*_r.pixelDensityRatio,Mr.font="small-caps bold "+13*_r.pixelDensityRatio+"px arial",Mr.strokeStyle=this.debugGridColor[Lr],Mr.fillStyle=this.debugGridColor[Lr],this.viewport.degrees!==0&&this._offsetForRotation({degrees:this.viewport.degrees}),Pr.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:Pr.getRotation(!0),point:Pr.viewport.pixelFromPointNoRotate(Pr._getRotationPoint(!0),!0)}),Pr.viewport.degrees===0&&Pr.getRotation(!0)%360===0&&Pr._drawer.viewer.viewport.getFlip()&&Pr._drawer._flip(),Mr.strokeRect(Tr.position.x*_r.pixelDensityRatio,Tr.position.y*_r.pixelDensityRatio,Tr.size.x*_r.pixelDensityRatio,Tr.size.y*_r.pixelDensityRatio);var Fr=(Tr.position.x+Tr.size.x/2)*_r.pixelDensityRatio,zr=(Tr.position.y+Tr.size.y/2)*_r.pixelDensityRatio;Mr.translate(Fr,zr),Mr.rotate(Math.PI/180*-this.viewport.degrees),Mr.translate(-Fr,-zr),Tr.x===0&&Tr.y===0&&(Mr.fillText("Zoom: "+this.viewport.getZoom(),Tr.position.x*_r.pixelDensityRatio,(Tr.position.y-30)*_r.pixelDensityRatio),Mr.fillText("Pan: "+this.viewport.getBounds().toString(),Tr.position.x*_r.pixelDensityRatio,(Tr.position.y-20)*_r.pixelDensityRatio)),Mr.fillText("Level: "+Tr.level,(Tr.position.x+10)*_r.pixelDensityRatio,(Tr.position.y+20)*_r.pixelDensityRatio),Mr.fillText("Column: "+Tr.x,(Tr.position.x+10)*_r.pixelDensityRatio,(Tr.position.y+30)*_r.pixelDensityRatio),Mr.fillText("Row: "+Tr.y,(Tr.position.x+10)*_r.pixelDensityRatio,(Tr.position.y+40)*_r.pixelDensityRatio),Mr.fillText("Order: "+Ar+" of "+Rr,(Tr.position.x+10)*_r.pixelDensityRatio,(Tr.position.y+50)*_r.pixelDensityRatio),Mr.fillText("Size: "+Tr.size.toString(),(Tr.position.x+10)*_r.pixelDensityRatio,(Tr.position.y+60)*_r.pixelDensityRatio),Mr.fillText("Position: "+Tr.position.toString(),(Tr.position.x+10)*_r.pixelDensityRatio,(Tr.position.y+70)*_r.pixelDensityRatio),this.viewport.degrees!==0&&this._restoreRotationChanges(),Pr.getRotation(!0)%360!==0&&this._restoreRotationChanges(),Pr.viewport.degrees===0&&Pr.getRotation(!0)%360===0&&Pr._drawer.viewer.viewport.getFlip()&&Pr._drawer._flip(),Mr.restore()}},debugRect:function(Tr){if(this.useCanvas){var Rr=this.context;Rr.save(),Rr.lineWidth=2*_r.pixelDensityRatio,Rr.strokeStyle=this.debugGridColor[0],Rr.fillStyle=this.debugGridColor[0],Rr.strokeRect(Tr.x*_r.pixelDensityRatio,Tr.y*_r.pixelDensityRatio,Tr.width*_r.pixelDensityRatio,Tr.height*_r.pixelDensityRatio),Rr.restore()}},setImageSmoothingEnabled:function(Tr){this.useCanvas&&(this._imageSmoothingEnabled=Tr,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(Tr){Tr.msImageSmoothingEnabled=this._imageSmoothingEnabled,Tr.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(Tr){var Rr=this._getContext(Tr).canvas;return new _r.Point(Rr.width,Rr.height)},getCanvasCenter:function(){return new _r.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(Tr){var Rr=Tr.point?Tr.point.times(_r.pixelDensityRatio):this.getCanvasCenter(),Ar=this._getContext(Tr.useSketch);Ar.save(),Ar.translate(Rr.x,Rr.y),this.viewer.viewport.flipped?(Ar.rotate(Math.PI/180*-Tr.degrees),Ar.scale(-1,1)):Ar.rotate(Math.PI/180*Tr.degrees),Ar.translate(-Rr.x,-Rr.y)},_flip:function(Tr){Tr=Tr||{};var Rr=Tr.point?Tr.point.times(_r.pixelDensityRatio):this.getCanvasCenter(),Ar=this._getContext(Tr.useSketch);Ar.translate(Rr.x,0),Ar.scale(-1,1),Ar.translate(-Rr.x,0)},_restoreRotationChanges:function(Tr){var Rr=this._getContext(Tr);Rr.restore()},_calculateCanvasSize:function(){var Tr=_r.pixelDensityRatio,Rr=this.viewport.getContainerSize();return{x:Math.round(Rr.x*Tr),y:Math.round(Rr.y*Tr)}},_calculateSketchCanvasSize:function(){var Tr=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return Tr;var Rr=Math.ceil(Math.sqrt(Tr.x*Tr.x+Tr.y*Tr.y));return{x:Rr,y:Rr}}}}(OpenSeadragon),function(_r){_r.Viewport=function(Tr){var Rr=arguments;Rr.length&&Rr[0]instanceof _r.Point&&(Tr={containerSize:Rr[0],contentSize:Rr[1],config:Rr[2]}),Tr.config&&(_r.extend(!0,Tr,Tr.config),delete Tr.config),this._margins=_r.extend({left:0,top:0,right:0,bottom:0},Tr.margins||{}),delete Tr.margins,_r.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:_r.DEFAULT_SETTINGS.springStiffness,animationTime:_r.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:_r.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:_r.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:_r.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:_r.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:_r.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:_r.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:_r.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:_r.DEFAULT_SETTINGS.maxZoomLevel,degrees:_r.DEFAULT_SETTINGS.degrees,flipped:_r.DEFAULT_SETTINGS.flipped,homeFillsViewer:_r.DEFAULT_SETTINGS.homeFillsViewer},Tr),this._updateContainerInnerSize(),this.centerSpringX=new _r.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new _r.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new _r.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new _r.Rect(0,0,1,1),1),this.goHome(!0),this.update()},_r.Viewport.prototype={resetContentSize:function(Tr){return _r.console.assert(Tr,"[Viewport.resetContentSize] contentSize is required"),_r.console.assert(Tr instanceof _r.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),_r.console.assert(Tr.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),_r.console.assert(Tr.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new _r.Rect(0,0,1,Tr.y/Tr.x),Tr.x),this},setHomeBounds:function(Tr,Rr){_r.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(Tr,Rr)},_setContentBounds:function(Tr,Rr){_r.console.assert(Tr,"[Viewport._setContentBounds] bounds is required"),_r.console.assert(Tr instanceof _r.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),_r.console.assert(Tr.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),_r.console.assert(Tr.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=Tr.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(Rr),this._contentBounds=Tr.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(Rr),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:Rr,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var Tr=this._contentAspectRatio/this.getAspectRatio(),Rr;return this.homeFillsViewer?Rr=Tr>=1?Tr:1:Rr=Tr>=1?1:Tr,Rr/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var Tr=this._contentBounds.getCenter(),Rr=1/this.getHomeZoom(),Ar=Rr/this.getAspectRatio();return new _r.Rect(Tr.x-Rr/2,Tr.y-Ar/2,Rr,Ar)},goHome:function(Tr){return this.viewer&&this.viewer.raiseEvent("home",{immediately:Tr}),this.fitBounds(this.getHomeBounds(),Tr)},getMinZoom:function(){var Tr=this.getHomeZoom(),Rr=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*Tr;return Rr},getMaxZoom:function(){var Tr=this.maxZoomLevel;return Tr||(Tr=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,Tr/=this._contentBounds.width),Math.max(Tr,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new _r.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return _r.extend({},this._margins)},setMargins:function(Tr){_r.console.assert(_r.type(Tr)==="object","[Viewport.setMargins] margins must be an object"),this._margins=_r.extend({left:0,top:0,right:0,bottom:0},Tr),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(Tr){return this.getBoundsNoRotate(Tr).rotate(-this.getRotation())},getBoundsNoRotate:function(Tr){var Rr=this.getCenter(Tr),Ar=1/this.getZoom(Tr),Pr=Ar/this.getAspectRatio();return new _r.Rect(Rr.x-Ar/2,Rr.y-Pr/2,Ar,Pr)},getBoundsWithMargins:function(Tr){return this.getBoundsNoRotateWithMargins(Tr).rotate(-this.getRotation(),this.getCenter(Tr))},getBoundsNoRotateWithMargins:function(Tr){var Rr=this.getBoundsNoRotate(Tr),Ar=this._containerInnerSize.x*this.getZoom(Tr);return Rr.x-=this._margins.left/Ar,Rr.y-=this._margins.top/Ar,Rr.width+=(this._margins.left+this._margins.right)/Ar,Rr.height+=(this._margins.top+this._margins.bottom)/Ar,Rr},getCenter:function(Tr){var Rr=new _r.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),Ar=new _r.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),Pr,Lr,Mr,Fr,zr,Ur,Vr,Nr;return Tr?Rr:this.zoomPoint?(Pr=this.pixelFromPoint(this.zoomPoint,!0),Lr=this.getZoom(),Mr=1/Lr,Fr=Mr/this.getAspectRatio(),zr=new _r.Rect(Rr.x-Mr/2,Rr.y-Fr/2,Mr,Fr),Ur=this._pixelFromPoint(this.zoomPoint,zr),Vr=Ur.minus(Pr),Nr=Vr.divide(this._containerInnerSize.x*Lr),Ar.plus(Nr)):Ar},getZoom:function(Tr){return Tr?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(Tr){return Math.max(Math.min(Tr,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(Tr){var Rr=new _r.Rect(Tr.x,Tr.y,Tr.width,Tr.height);if(!this.wrapHorizontal){var Ar=this.visibilityRatio*Rr.width,Pr=Rr.x+Rr.width,Lr=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,Mr=this._contentBoundsNoRotate.x-Pr+Ar,Fr=Lr-Rr.x-Ar;Ar>this._contentBoundsNoRotate.width?Rr.x+=(Mr+Fr)/2:Fr<0?Rr.x+=Fr:Mr>0&&(Rr.x+=Mr)}if(!this.wrapVertical){var zr=this.visibilityRatio*Rr.height,Ur=Rr.y+Rr.height,Vr=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,Nr=this._contentBoundsNoRotate.y-Ur+zr,Dr=Vr-Rr.y-zr;zr>this._contentBoundsNoRotate.height?Rr.y+=(Nr+Dr)/2:Dr<0?Rr.y+=Dr:Nr>0&&(Rr.y+=Nr)}return Rr},_raiseConstraintsEvent:function(Tr){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:Tr})},applyConstraints:function(Tr){var Rr=this.getZoom(),Ar=this._applyZoomConstraints(Rr);Rr!==Ar&&this.zoomTo(Ar,this.zoomPoint,Tr);var Pr=this.getBoundsNoRotate(),Lr=this._applyBoundaryConstraints(Pr);return this._raiseConstraintsEvent(Tr),(Pr.x!==Lr.x||Pr.y!==Lr.y||Tr)&&this.fitBounds(Lr.rotate(-this.getRotation()),Tr),this},ensureVisible:function(Tr){return this.applyConstraints(Tr)},_fitBounds:function(Tr,Rr){Rr=Rr||{};var Ar=Rr.immediately||!1,Pr=Rr.constraints||!1,Lr=this.getAspectRatio(),Mr=Tr.getCenter(),Fr=new _r.Rect(Tr.x,Tr.y,Tr.width,Tr.height,Tr.degrees+this.getRotation()).getBoundingBox();Fr.getAspectRatio()>=Lr?Fr.height=Fr.width/Lr:Fr.width=Fr.height*Lr,Fr.x=Mr.x-Fr.width/2,Fr.y=Mr.y-Fr.height/2;var zr=1/Fr.width;if(Pr){var Ur=Fr.getAspectRatio(),Vr=this._applyZoomConstraints(zr);zr!==Vr&&(zr=Vr,Fr.width=1/zr,Fr.x=Mr.x-Fr.width/2,Fr.height=Fr.width/Ur,Fr.y=Mr.y-Fr.height/2),Fr=this._applyBoundaryConstraints(Fr),Mr=Fr.getCenter(),this._raiseConstraintsEvent(Ar)}if(Ar)return this.panTo(Mr,!0),this.zoomTo(zr,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var Nr=this.getBounds(),Dr=this.getZoom();if(Dr===0||Math.abs(zr/Dr-1)<1e-8)return this.zoomTo(zr,!0),this.panTo(Mr,Ar);Fr=Fr.rotate(-this.getRotation());var jr=Fr.getTopLeft().times(zr).minus(Nr.getTopLeft().times(Dr)).divide(zr-Dr);return this.zoomTo(zr,jr,Ar)},fitBounds:function(Tr,Rr){return this._fitBounds(Tr,{immediately:Rr,constraints:!1})},fitBoundsWithConstraints:function(Tr,Rr){return this._fitBounds(Tr,{immediately:Rr,constraints:!0})},fitVertically:function(Tr){var Rr=new _r.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(Rr,Tr)},fitHorizontally:function(Tr){var Rr=new _r.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(Rr,Tr)},getConstrainedBounds:function(Tr){var Rr,Ar;return Rr=this.getBounds(Tr),Ar=this._applyBoundaryConstraints(Rr),Ar},panBy:function(Tr,Rr){var Ar=new _r.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(Ar.plus(Tr),Rr)},panTo:function(Tr,Rr){return Rr?(this.centerSpringX.resetTo(Tr.x),this.centerSpringY.resetTo(Tr.y)):(this.centerSpringX.springTo(Tr.x),this.centerSpringY.springTo(Tr.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:Tr,immediately:Rr}),this},zoomBy:function(Tr,Rr,Ar){return this.zoomTo(this.zoomSpring.target.value*Tr,Rr,Ar)},zoomTo:function(Tr,Rr,Ar){var Pr=this;return this.zoomPoint=Rr instanceof _r.Point&&!isNaN(Rr.x)&&!isNaN(Rr.y)?Rr:null,Ar?this._adjustCenterSpringsForZoomPoint(function(){Pr.zoomSpring.resetTo(Tr)}):this.zoomSpring.springTo(Tr),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:Tr,refPoint:Rr,immediately:Ar}),this},setRotation:function(Tr){return!this.viewer||!this.viewer.drawer.canRotate()?this:(this.degrees=_r.positiveModulo(Tr,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:Tr}),this)},getRotation:function(){return this.degrees},resize:function(Tr,Rr){var Ar=this.getBoundsNoRotate(),Pr=Ar,Lr;return this.containerSize.x=Tr.x,this.containerSize.y=Tr.y,this._updateContainerInnerSize(),Rr&&(Lr=Tr.x/this.containerSize.x,Pr.width=Ar.width*Lr,Pr.height=Pr.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:Tr,maintain:Rr}),this.fitBounds(Pr,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new _r.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var Tr=this;this._adjustCenterSpringsForZoomPoint(function(){Tr.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var Rr=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,Rr},_adjustCenterSpringsForZoomPoint:function(Tr){if(this.zoomPoint){var Rr=this.pixelFromPoint(this.zoomPoint,!0);Tr();var Ar=this.pixelFromPoint(this.zoomPoint,!0),Pr=Ar.minus(Rr),Lr=this.deltaPointsFromPixels(Pr,!0);this.centerSpringX.shiftBy(Lr.x),this.centerSpringY.shiftBy(Lr.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else Tr()},deltaPixelsFromPointsNoRotate:function(Tr,Rr){return Tr.times(this._containerInnerSize.x*this.getZoom(Rr))},deltaPixelsFromPoints:function(Tr,Rr){return this.deltaPixelsFromPointsNoRotate(Tr.rotate(this.getRotation()),Rr)},deltaPointsFromPixelsNoRotate:function(Tr,Rr){return Tr.divide(this._containerInnerSize.x*this.getZoom(Rr))},deltaPointsFromPixels:function(Tr,Rr){return this.deltaPointsFromPixelsNoRotate(Tr,Rr).rotate(-this.getRotation())},pixelFromPointNoRotate:function(Tr,Rr){return this._pixelFromPointNoRotate(Tr,this.getBoundsNoRotate(Rr))},pixelFromPoint:function(Tr,Rr){return this._pixelFromPoint(Tr,this.getBoundsNoRotate(Rr))},_pixelFromPointNoRotate:function(Tr,Rr){return Tr.minus(Rr.getTopLeft()).times(this._containerInnerSize.x/Rr.width).plus(new _r.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(Tr,Rr){return this._pixelFromPointNoRotate(Tr.rotate(this.getRotation(),this.getCenter(!0)),Rr)},pointFromPixelNoRotate:function(Tr,Rr){var Ar=this.getBoundsNoRotate(Rr);return Tr.minus(new _r.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/Ar.width).plus(Ar.getTopLeft())},pointFromPixel:function(Tr,Rr){return this.pointFromPixelNoRotate(Tr,Rr).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(Tr,Rr){var Ar=this._contentBoundsNoRotate.width;return new _r.Point(Tr*this._contentSizeNoRotate.x/Ar,Rr*this._contentSizeNoRotate.x/Ar)},viewportToImageCoordinates:function(Tr,Rr){if(Tr instanceof _r.Point)return this.viewportToImageCoordinates(Tr.x,Tr.y);if(this.viewer){var Ar=this.viewer.world.getItemCount();if(Ar>1)_r.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(Ar===1){var Pr=this.viewer.world.getItemAt(0);return Pr.viewportToImageCoordinates(Tr,Rr,!0)}}return this._viewportToImageDelta(Tr-this._contentBoundsNoRotate.x,Rr-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(Tr,Rr){var Ar=this._contentBoundsNoRotate.width;return new _r.Point(Tr/this._contentSizeNoRotate.x*Ar,Rr/this._contentSizeNoRotate.x*Ar)},imageToViewportCoordinates:function(Tr,Rr){if(Tr instanceof _r.Point)return this.imageToViewportCoordinates(Tr.x,Tr.y);if(this.viewer){var Ar=this.viewer.world.getItemCount();if(Ar>1)_r.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(Ar===1){var Pr=this.viewer.world.getItemAt(0);return Pr.imageToViewportCoordinates(Tr,Rr,!0)}}var Lr=this._imageToViewportDelta(Tr,Rr);return Lr.x+=this._contentBoundsNoRotate.x,Lr.y+=this._contentBoundsNoRotate.y,Lr},imageToViewportRectangle:function(Tr,Rr,Ar,Pr){var Lr=Tr;if(Lr instanceof _r.Rect||(Lr=new _r.Rect(Tr,Rr,Ar,Pr)),this.viewer){var Mr=this.viewer.world.getItemCount();if(Mr>1)_r.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(Mr===1){var Fr=this.viewer.world.getItemAt(0);return Fr.imageToViewportRectangle(Tr,Rr,Ar,Pr,!0)}}var zr=this.imageToViewportCoordinates(Lr.x,Lr.y),Ur=this._imageToViewportDelta(Lr.width,Lr.height);return new _r.Rect(zr.x,zr.y,Ur.x,Ur.y,Lr.degrees)},viewportToImageRectangle:function(Tr,Rr,Ar,Pr){var Lr=Tr;if(Lr instanceof _r.Rect||(Lr=new _r.Rect(Tr,Rr,Ar,Pr)),this.viewer){var Mr=this.viewer.world.getItemCount();if(Mr>1)_r.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(Mr===1){var Fr=this.viewer.world.getItemAt(0);return Fr.viewportToImageRectangle(Tr,Rr,Ar,Pr,!0)}}var zr=this.viewportToImageCoordinates(Lr.x,Lr.y),Ur=this._viewportToImageDelta(Lr.width,Lr.height);return new _r.Rect(zr.x,zr.y,Ur.x,Ur.y,Lr.degrees)},viewerElementToImageCoordinates:function(Tr){var Rr=this.pointFromPixel(Tr,!0);return this.viewportToImageCoordinates(Rr)},imageToViewerElementCoordinates:function(Tr){var Rr=this.imageToViewportCoordinates(Tr);return this.pixelFromPoint(Rr,!0)},windowToImageCoordinates:function(Tr){_r.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var Rr=Tr.minus(_r.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(Rr)},imageToWindowCoordinates:function(Tr){_r.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var Rr=this.imageToViewerElementCoordinates(Tr);return Rr.plus(_r.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(Tr){return this.pointFromPixel(Tr,!0)},viewportToViewerElementCoordinates:function(Tr){return this.pixelFromPoint(Tr,!0)},viewerElementToViewportRectangle:function(Tr){return _r.Rect.fromSummits(this.pointFromPixel(Tr.getTopLeft(),!0),this.pointFromPixel(Tr.getTopRight(),!0),this.pointFromPixel(Tr.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(Tr){return _r.Rect.fromSummits(this.pixelFromPoint(Tr.getTopLeft(),!0),this.pixelFromPoint(Tr.getTopRight(),!0),this.pixelFromPoint(Tr.getBottomLeft(),!0))},windowToViewportCoordinates:function(Tr){_r.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var Rr=Tr.minus(_r.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(Rr)},viewportToWindowCoordinates:function(Tr){_r.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var Rr=this.viewportToViewerElementCoordinates(Tr);return Rr.plus(_r.getElementPosition(this.viewer.element))},viewportToImageZoom:function(Tr){if(this.viewer){var Rr=this.viewer.world.getItemCount();if(Rr>1)_r.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(Rr===1){var Ar=this.viewer.world.getItemAt(0);return Ar.viewportToImageZoom(Tr)}}var Pr=this._contentSizeNoRotate.x,Lr=this._containerInnerSize.x,Mr=this._contentBoundsNoRotate.width,Fr=Lr/Pr*Mr;return Tr*Fr},imageToViewportZoom:function(Tr){if(this.viewer){var Rr=this.viewer.world.getItemCount();if(Rr>1)_r.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(Rr===1){var Ar=this.viewer.world.getItemAt(0);return Ar.imageToViewportZoom(Tr)}}var Pr=this._contentSizeNoRotate.x,Lr=this._containerInnerSize.x,Mr=this._contentBoundsNoRotate.width,Fr=Pr/Lr/Mr;return Tr*Fr},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(Tr){return this.flipped===Tr?this:(this.flipped=Tr,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:Tr}),this)}}}(OpenSeadragon),function(_r){_r.TiledImage=function(qr){var Kr=this;_r.console.assert(qr.tileCache,"[TiledImage] options.tileCache is required"),_r.console.assert(qr.drawer,"[TiledImage] options.drawer is required"),_r.console.assert(qr.viewer,"[TiledImage] options.viewer is required"),_r.console.assert(qr.imageLoader,"[TiledImage] options.imageLoader is required"),_r.console.assert(qr.source,"[TiledImage] options.source is required"),_r.console.assert(!qr.clip||qr.clip instanceof _r.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),_r.EventSource.call(this),this._tileCache=qr.tileCache,delete qr.tileCache,this._drawer=qr.drawer,delete qr.drawer,this._imageLoader=qr.imageLoader,delete qr.imageLoader,qr.clip instanceof _r.Rect&&(this._clip=qr.clip.clone()),delete qr.clip;var Xr=qr.x||0;delete qr.x;var Zr=qr.y||0;delete qr.y,this.normHeight=qr.source.dimensions.y/qr.source.dimensions.x,this.contentAspectX=qr.source.dimensions.x/qr.source.dimensions.y;var Jr=1;qr.width?(Jr=qr.width,delete qr.width,qr.height&&(_r.console.error("specifying both width and height to a tiledImage is not supported"),delete qr.height)):qr.height&&(Jr=qr.height/this.normHeight,delete qr.height);var _i=qr.fitBounds;delete qr.fitBounds;var es=qr.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete qr.fitBoundsPlacement;var ts=qr.degrees||0;delete qr.degrees,_r.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:_r.DEFAULT_SETTINGS.springStiffness,animationTime:_r.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:_r.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:_r.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:_r.DEFAULT_SETTINGS.wrapVertical,immediateRender:_r.DEFAULT_SETTINGS.immediateRender,blendTime:_r.DEFAULT_SETTINGS.blendTime,alwaysBlend:_r.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:_r.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:_r.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:_r.DEFAULT_SETTINGS.iOSDevice,debugMode:_r.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:_r.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:_r.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:_r.DEFAULT_SETTINGS.placeholderFillStyle,opacity:_r.DEFAULT_SETTINGS.opacity,preload:_r.DEFAULT_SETTINGS.preload,compositeOperation:_r.DEFAULT_SETTINGS.compositeOperation},qr),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new _r.Spring({initial:Xr,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new _r.Spring({initial:Zr,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new _r.Spring({initial:Jr,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new _r.Spring({initial:ts,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),_i&&this.fitBounds(_i,es,!0),this._drawingHandler=function(rs){Kr.viewer.raiseEvent("tile-drawing",_r.extend({tiledImage:Kr},rs))}},_r.extend(_r.TiledImage.prototype,_r.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(qr){qr!==this._fullyLoaded&&(this._fullyLoaded=qr,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=_r.now(),this._needsDraw=!0},update:function(){var qr=this._xSpring.update(),Kr=this._ySpring.update(),Xr=this._scaleSpring.update(),Zr=this._degreesSpring.update();return qr||Kr||Xr||Zr?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(qr){return this.getBoundsNoRotate(qr).rotate(this.getRotation(qr),this._getRotationPoint(qr))},getBoundsNoRotate:function(qr){return qr?new _r.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new _r.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return _r.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(qr){var Kr=this.getBoundsNoRotate(qr);if(this._clip){var Xr=qr?this._worldWidthCurrent:this._worldWidthTarget,Zr=Xr/this.source.dimensions.x,Jr=this._clip.times(Zr);Kr=new _r.Rect(Kr.x+Jr.x,Kr.y+Jr.y,Jr.width,Jr.height)}return Kr.rotate(this.getRotation(qr),this._getRotationPoint(qr))},getContentSize:function(){return new _r.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(qr,Kr,Xr){var Zr=Xr?this._scaleSpring.current.value:this._scaleSpring.target.value;return new _r.Point(qr*(this.source.dimensions.x/Zr),Kr*(this.source.dimensions.y*this.contentAspectX/Zr))},viewportToImageCoordinates:function(qr,Kr,Xr){var Zr;return qr instanceof _r.Point?(Xr=Kr,Zr=qr):Zr=new _r.Point(qr,Kr),Zr=Zr.rotate(-this.getRotation(Xr),this._getRotationPoint(Xr)),Xr?this._viewportToImageDelta(Zr.x-this._xSpring.current.value,Zr.y-this._ySpring.current.value):this._viewportToImageDelta(Zr.x-this._xSpring.target.value,Zr.y-this._ySpring.target.value)},_imageToViewportDelta:function(qr,Kr,Xr){var Zr=Xr?this._scaleSpring.current.value:this._scaleSpring.target.value;return new _r.Point(qr/this.source.dimensions.x*Zr,Kr/this.source.dimensions.y/this.contentAspectX*Zr)},imageToViewportCoordinates:function(qr,Kr,Xr){qr instanceof _r.Point&&(Xr=Kr,Kr=qr.y,qr=qr.x);var Zr=this._imageToViewportDelta(qr,Kr);return Xr?(Zr.x+=this._xSpring.current.value,Zr.y+=this._ySpring.current.value):(Zr.x+=this._xSpring.target.value,Zr.y+=this._ySpring.target.value),Zr.rotate(this.getRotation(Xr),this._getRotationPoint(Xr))},imageToViewportRectangle:function(qr,Kr,Xr,Zr,Jr){var _i=qr;_i instanceof _r.Rect?Jr=Kr:_i=new _r.Rect(qr,Kr,Xr,Zr);var es=this.imageToViewportCoordinates(_i.getTopLeft(),Jr),ts=this._imageToViewportDelta(_i.width,_i.height,Jr);return new _r.Rect(es.x,es.y,ts.x,ts.y,_i.degrees+this.getRotation(Jr))},viewportToImageRectangle:function(qr,Kr,Xr,Zr,Jr){var _i=qr;qr instanceof _r.Rect?Jr=Kr:_i=new _r.Rect(qr,Kr,Xr,Zr);var es=this.viewportToImageCoordinates(_i.getTopLeft(),Jr),ts=this._viewportToImageDelta(_i.width,_i.height,Jr);return new _r.Rect(es.x,es.y,ts.x,ts.y,_i.degrees-this.getRotation(Jr))},viewerElementToImageCoordinates:function(qr){var Kr=this.viewport.pointFromPixel(qr,!0);return this.viewportToImageCoordinates(Kr)},imageToViewerElementCoordinates:function(qr){var Kr=this.imageToViewportCoordinates(qr);return this.viewport.pixelFromPoint(Kr,!0)},windowToImageCoordinates:function(qr){var Kr=qr.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(Kr)},imageToWindowCoordinates:function(qr){var Kr=this.imageToViewerElementCoordinates(qr);return Kr.plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(qr){var Kr=this._scaleSpring.current.value;return qr=qr.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new _r.Rect((qr.x-this._xSpring.current.value)/Kr,(qr.y-this._ySpring.current.value)/Kr,qr.width/Kr,qr.height/Kr,qr.degrees)},viewportToImageZoom:function(qr){var Kr=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return Kr*qr},imageToViewportZoom:function(qr){var Kr=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return qr/Kr},setPosition:function(qr,Kr){var Xr=this._xSpring.target.value===qr.x&&this._ySpring.target.value===qr.y;if(Kr){if(Xr&&this._xSpring.current.value===qr.x&&this._ySpring.current.value===qr.y)return;this._xSpring.resetTo(qr.x),this._ySpring.resetTo(qr.y),this._needsDraw=!0}else{if(Xr)return;this._xSpring.springTo(qr.x),this._ySpring.springTo(qr.y),this._needsDraw=!0}Xr||this._raiseBoundsChange()},setWidth:function(qr,Kr){this._setScale(qr,Kr)},setHeight:function(qr,Kr){this._setScale(qr/this.normHeight,Kr)},setCroppingPolygons:function(qr){var Kr=function(Zr){return Zr instanceof _r.Point||typeof Zr.x=="number"&&typeof Zr.y=="number"},Xr=function(Zr){return Zr.map(function(Jr){try{if(Kr(Jr))return{x:Jr.x,y:Jr.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!_r.isArray(qr))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=qr.map(function(Zr){return Xr(Zr)})}catch(Zr){_r.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),_r.console.error(Zr),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(qr,Kr,Xr){Kr=Kr||_r.Placement.CENTER;var Zr=_r.Placement.properties[Kr],Jr=this.contentAspectX,_i=0,es=0,ts=1,rs=1;if(this._clip&&(Jr=this._clip.getAspectRatio(),ts=this._clip.width/this.source.dimensions.x,rs=this._clip.height/this.source.dimensions.y,qr.getAspectRatio()>Jr?(_i=this._clip.x/this._clip.height*qr.height,es=this._clip.y/this._clip.height*qr.height):(_i=this._clip.x/this._clip.width*qr.width,es=this._clip.y/this._clip.width*qr.width)),qr.getAspectRatio()>Jr){var ns=qr.height/rs,as=0;Zr.isHorizontallyCentered?as=(qr.width-qr.height*Jr)/2:Zr.isRight&&(as=qr.width-qr.height*Jr),this.setPosition(new _r.Point(qr.x-_i+as,qr.y-es),Xr),this.setHeight(ns,Xr)}else{var ls=qr.width/ts,us=0;Zr.isVerticallyCentered?us=(qr.height-qr.width/Jr)/2:Zr.isBottom&&(us=qr.height-qr.width/Jr),this.setPosition(new _r.Point(qr.x-_i,qr.y-es+us),Xr),this.setWidth(ls,Xr)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(qr){_r.console.assert(!qr||qr instanceof _r.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),qr instanceof _r.Rect?this._clip=qr.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(qr){qr!==this.opacity&&(this.opacity=qr,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(qr){this._preload=!!qr,this._needsDraw=!0},getRotation:function(qr){return qr?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(qr,Kr){this._degreesSpring.target.value===qr&&this._degreesSpring.isAtTargetValue()||(Kr?this._degreesSpring.resetTo(qr):this._degreesSpring.springTo(qr),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(qr){return this.getBoundsNoRotate(qr).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(qr){qr!==this.compositeOperation&&(this.compositeOperation=qr,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(qr,Kr){var Xr=this._scaleSpring.target.value===qr;if(Kr){if(Xr&&this._scaleSpring.current.value===qr)return;this._scaleSpring.resetTo(qr),this._updateForScale(),this._needsDraw=!0}else{if(Xr)return;this._scaleSpring.springTo(qr),this._updateForScale(),this._needsDraw=!0}Xr||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var qr=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),Kr=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,Xr=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(Kr/this.minPixelRatio)/Math.log(2))));return Xr=Math.max(Xr,this.source.minLevel||0),qr=Math.min(qr,Xr),{lowestLevel:qr,highestLevel:Xr}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var qr=this.lastDrawn.pop();qr.beingDrawn=!1}var Kr=this.viewport,Xr=this._viewportToTiledImageRectangle(Kr.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var Zr=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(Xr=Xr.intersection(Zr),Xr===null)return}for(var Jr=this._getLevelsInterval(),_i=Jr.lowestLevel,es=Jr.highestLevel,ts=null,rs=!1,ns=_r.now(),as=es;as>=_i;as--){var ls=!1,us=Kr.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(as),!0).x*this._scaleSpring.current.value;if(as===_i||!rs&&us>=this.minPixelRatio)ls=!0,rs=!0;else if(!rs)continue;var xs=Kr.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(as),!1).x*this._scaleSpring.current.value,Ts=Kr.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,vs=this.immediateRender?1:Ts,gs=Math.min(1,(us-.5)/.5),fs=vs/Math.abs(vs-xs);if(ts=Tr(this,rs,ls,as,gs,fs,Xr,ns,ts),Ur(this.coverage,as))break}Gr(this,this.lastDrawn),ts&&!ts.context2D?(Pr(this,ts,ns),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(qr,Kr,Xr){var Zr,Jr;this.wrapHorizontal?(Zr=_r.positiveModulo(Kr.x,1),Jr=_r.positiveModulo(Xr.x,1)):(Zr=Math.max(0,Kr.x),Jr=Math.min(1,Xr.x));var _i,es,ts=1/this.source.aspectRatio;this.wrapVertical?(_i=_r.positiveModulo(Kr.y,ts),es=_r.positiveModulo(Xr.y,ts)):(_i=Math.max(0,Kr.y),es=Math.min(ts,Xr.y));var rs=this.source.getTileAtPoint(qr,new _r.Point(Zr,_i)),ns=this.source.getTileAtPoint(qr,new _r.Point(Jr,es)),as=this.source.getNumTiles(qr);return this.wrapHorizontal&&(rs.x+=as.x*Math.floor(Kr.x),ns.x+=as.x*Math.floor(Xr.x)),this.wrapVertical&&(rs.y+=as.y*Math.floor(Kr.y/ts),ns.y+=as.y*Math.floor(Xr.y/ts)),{topLeft:rs,bottomRight:ns}}});function Tr(qr,Kr,Xr,Zr,Jr,_i,es,ts,rs){var ns=es.getBoundingBox().getTopLeft(),as=es.getBoundingBox().getBottomRight();qr.viewer&&qr.viewer.raiseEvent("update-level",{tiledImage:qr,havedrawn:Kr,level:Zr,opacity:Jr,visibility:_i,drawArea:es,topleft:ns,bottomright:as,currenttime:ts,best:rs}),Dr(qr.coverage,Zr),Dr(qr.loadingCoverage,Zr);for(var ls=qr._getCornerTiles(Zr,ns,as),us=ls.topLeft,xs=ls.bottomRight,Ts=qr.source.getNumTiles(Zr),vs=qr.viewport.pixelFromPoint(qr.viewport.getCenter()),gs=us.x;gs<=xs.x;gs++)for(var fs=us.y;fs<=xs.y;fs++){if(!qr.wrapHorizontal&&!qr.wrapVertical){var ys=qr.source.getTileBounds(Zr,gs,fs);if(es.intersection(ys)===null)continue}rs=Rr(qr,Xr,Kr,gs,fs,Zr,Jr,_i,vs,Ts,ts,rs)}return rs}function Rr(qr,Kr,Xr,Zr,Jr,_i,es,ts,rs,ns,as,ls){var us=Ar(Zr,Jr,_i,qr,qr.source,qr.tilesMatrix,as,ns,qr._worldWidthCurrent,qr._worldHeightCurrent),xs=Xr;qr.viewer&&qr.viewer.raiseEvent("update-tile",{tiledImage:qr,tile:us}),Nr(qr.coverage,_i,Zr,Jr,!1);var Ts=us.loaded||us.loading||Vr(qr.loadingCoverage,_i,Zr,Jr);if(Nr(qr.loadingCoverage,_i,Zr,Jr,Ts),!us.exists||(Kr&&!xs&&(Vr(qr.coverage,_i,Zr,Jr)?Nr(qr.coverage,_i,Zr,Jr,!0):xs=!0),!xs))return ls;if(Fr(us,qr.source.tileOverlap,qr.viewport,rs,ts,qr),!us.loaded)if(us.context2D)Mr(qr,us);else{var vs=qr._tileCache.getImageRecord(us.cacheKey);if(vs){var gs=vs.getImage();Mr(qr,us,gs)}}if(us.loaded){var fs=zr(qr,us,Zr,Jr,_i,es,as);fs&&(qr._needsDraw=!0)}else us.loading?qr._tilesLoading++:Ts||(ls=jr(ls,us));return ls}function Ar(qr,Kr,Xr,Zr,Jr,_i,es,ts,rs,ns){var as,ls,us,xs,Ts,vs,gs,fs,ys;return _i[Xr]||(_i[Xr]={}),_i[Xr][qr]||(_i[Xr][qr]={}),_i[Xr][qr][Kr]||(as=(ts.x+qr%ts.x)%ts.x,ls=(ts.y+Kr%ts.y)%ts.y,us=Jr.getTileBounds(Xr,as,ls),xs=Jr.getTileBounds(Xr,as,ls,!0),Ts=Jr.tileExists(Xr,as,ls),vs=Jr.getTileUrl(Xr,as,ls),Zr.loadTilesWithAjax?(gs=Jr.getTileAjaxHeaders(Xr,as,ls),_r.isPlainObject(Zr.ajaxHeaders)&&(gs=_r.extend({},Zr.ajaxHeaders,gs))):gs=null,fs=Jr.getContext2D?Jr.getContext2D(Xr,as,ls):void 0,us.x+=(qr-as)/ts.x,us.y+=ns/rs*((Kr-ls)/ts.y),ys=new _r.Tile(Xr,qr,Kr,us,Ts,vs,fs,Zr.loadTilesWithAjax,gs,xs),as===ts.x-1&&(ys.isRightMost=!0),ls===ts.y-1&&(ys.isBottomMost=!0),_i[Xr][qr][Kr]=ys),ys=_i[Xr][qr][Kr],ys.lastTouchTime=es,ys}function Pr(qr,Kr,Xr){Kr.loading=!0,qr._imageLoader.addJob({src:Kr.url,loadWithAjax:Kr.loadWithAjax,ajaxHeaders:Kr.ajaxHeaders,crossOriginPolicy:qr.crossOriginPolicy,ajaxWithCredentials:qr.ajaxWithCredentials,callback:function(Zr,Jr,_i){Lr(qr,Kr,Xr,Zr,Jr,_i)},abort:function(){Kr.loading=!1}})}function Lr(qr,Kr,Xr,Zr,Jr,_i){if(!Zr){_r.console.log("Tile %s failed to load: %s - error: %s",Kr,Kr.url,Jr),qr.viewer.raiseEvent("tile-load-failed",{tile:Kr,tiledImage:qr,time:Xr,message:Jr,tileRequest:_i}),Kr.loading=!1,Kr.exists=!1;return}if(Xr<qr.lastResetTime){_r.console.log("Ignoring tile %s loaded before reset: %s",Kr,Kr.url),Kr.loading=!1;return}var es=function(){var ts=qr.source.getClosestLevel();Mr(qr,Kr,Zr,ts,_i)};qr._midDraw?window.setTimeout(es,1):es()}function Mr(qr,Kr,Xr,Zr,Jr){var _i=0;function es(){return _i++,ts}function ts(){_i--,_i===0&&(Kr.loading=!1,Kr.loaded=!0,Kr.context2D||qr._tileCache.cacheTile({image:Xr,tile:Kr,cutoff:Zr,tiledImage:qr}),qr._needsDraw=!0)}qr.viewer.raiseEvent("tile-loaded",{tile:Kr,tiledImage:qr,tileRequest:Jr,image:Xr,getCompletionCallback:es}),es()()}function Fr(qr,Kr,Xr,Zr,Jr,_i){var es=qr.bounds.getTopLeft();es.x*=_i._scaleSpring.current.value,es.y*=_i._scaleSpring.current.value,es.x+=_i._xSpring.current.value,es.y+=_i._ySpring.current.value;var ts=qr.bounds.getSize();ts.x*=_i._scaleSpring.current.value,ts.y*=_i._scaleSpring.current.value;var rs=Xr.pixelFromPointNoRotate(es,!0),ns=Xr.pixelFromPointNoRotate(es,!1),as=Xr.deltaPixelsFromPointsNoRotate(ts,!0),ls=Xr.deltaPixelsFromPointsNoRotate(ts,!1),us=ns.plus(ls.divide(2)),xs=Zr.squaredDistanceTo(us);Kr||(as=as.plus(new _r.Point(1,1))),qr.isRightMost&&_i.wrapHorizontal&&(as.x+=.75),qr.isBottomMost&&_i.wrapVertical&&(as.y+=.75),qr.position=rs,qr.size=as,qr.squaredDistance=xs,qr.visibility=Jr}function zr(qr,Kr,Xr,Zr,Jr,_i,es){var ts=1e3*qr.blendTime,rs,ns;if(Kr.blendStart||(Kr.blendStart=es),rs=es-Kr.blendStart,ns=ts?Math.min(1,rs/ts):1,qr.alwaysBlend&&(ns*=_i),Kr.opacity=ns,qr.lastDrawn.push(Kr),ns===1)Nr(qr.coverage,Jr,Xr,Zr,!0),qr._hasOpaqueTile=!0;else if(rs<ts)return!0;return!1}function Ur(qr,Kr,Xr,Zr){var Jr,_i,es,ts;if(!qr[Kr])return!1;if(Xr===void 0||Zr===void 0){Jr=qr[Kr];for(es in Jr)if(Object.prototype.hasOwnProperty.call(Jr,es)){_i=Jr[es];for(ts in _i)if(Object.prototype.hasOwnProperty.call(_i,ts)&&!_i[ts])return!1}return!0}return qr[Kr][Xr]===void 0||qr[Kr][Xr][Zr]===void 0||qr[Kr][Xr][Zr]===!0}function Vr(qr,Kr,Xr,Zr){return Xr===void 0||Zr===void 0?Ur(qr,Kr+1):Ur(qr,Kr+1,2*Xr,2*Zr)&&Ur(qr,Kr+1,2*Xr,2*Zr+1)&&Ur(qr,Kr+1,2*Xr+1,2*Zr)&&Ur(qr,Kr+1,2*Xr+1,2*Zr+1)}function Nr(qr,Kr,Xr,Zr,Jr){if(!qr[Kr]){_r.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",Kr);return}qr[Kr][Xr]||(qr[Kr][Xr]={}),qr[Kr][Xr][Zr]=Jr}function Dr(qr,Kr){qr[Kr]={}}function jr(qr,Kr){return!qr||Kr.visibility>qr.visibility||Kr.visibility==qr.visibility&&Kr.squaredDistance<qr.squaredDistance?Kr:qr}function Gr(qr,Kr){if(!(qr.opacity===0||Kr.length===0&&!qr.placeholderFillStyle)){var Xr=Kr[0],Zr;Xr&&(Zr=qr.opacity<1||qr.compositeOperation&&qr.compositeOperation!=="source-over"||!qr._isBottomItem()&&Xr._hasTransparencyChannel());var Jr,_i,es=qr.viewport.getZoom(!0),ts=qr.viewportToImageZoom(es);Kr.length>1&&ts>qr.smoothTileEdgesMinZoom&&!qr.iOSDevice&&qr.getRotation(!0)%360===0&&_r.supportsCanvas&&(Zr=!0,Jr=Xr.getScaleForEdgeSmoothing(),_i=Xr.getTranslationForEdgeSmoothing(Jr,qr._drawer.getCanvasSize(!1),qr._drawer.getCanvasSize(!0)));var rs;Zr&&(Jr||(rs=qr.viewport.viewportToViewerElementRectangle(qr.getClippedBounds(!0)).getIntegerBoundingBox(),qr._drawer.viewer.viewport.getFlip()&&(qr.viewport.degrees!==0||qr.getRotation(!0)%360!==0)&&(rs.x=qr._drawer.viewer.container.clientWidth-(rs.x+rs.width)),rs=rs.times(_r.pixelDensityRatio)),qr._drawer._clear(!0,rs)),Jr||(qr.viewport.degrees!==0&&qr._drawer._offsetForRotation({degrees:qr.viewport.degrees,useSketch:Zr}),qr.getRotation(!0)%360!==0&&qr._drawer._offsetForRotation({degrees:qr.getRotation(!0),point:qr.viewport.pixelFromPointNoRotate(qr._getRotationPoint(!0),!0),useSketch:Zr}),qr.viewport.degrees===0&&qr.getRotation(!0)%360===0&&qr._drawer.viewer.viewport.getFlip()&&qr._drawer._flip());var ns=!1;if(qr._clip){qr._drawer.saveContext(Zr);var as=qr.imageToViewportRectangle(qr._clip,!0);as=as.rotate(-qr.getRotation(!0),qr._getRotationPoint(!0));var ls=qr._drawer.viewportToDrawerRectangle(as);Jr&&(ls=ls.times(Jr)),_i&&(ls=ls.translate(_i)),qr._drawer.setClip(ls,Zr),ns=!0}if(qr._croppingPolygons){qr._drawer.saveContext(Zr);try{var us=qr._croppingPolygons.map(function(gs){return gs.map(function(fs){var ys=qr.imageToViewportCoordinates(fs.x,fs.y,!0).rotate(-qr.getRotation(!0),qr._getRotationPoint(!0)),ks=qr._drawer.viewportCoordToDrawerCoord(ys);return Jr&&(ks=ks.times(Jr)),ks})});qr._drawer.clipWithPolygons(us,Zr)}catch(gs){_r.console.error(gs)}ns=!0}if(qr.placeholderFillStyle&&qr._hasOpaqueTile===!1){var xs=qr._drawer.viewportToDrawerRectangle(qr.getBounds(!0));Jr&&(xs=xs.times(Jr)),_i&&(xs=xs.translate(_i));var Ts=null;typeof qr.placeholderFillStyle=="function"?Ts=qr.placeholderFillStyle(qr,qr._drawer.context):Ts=qr.placeholderFillStyle,qr._drawer.drawRectangle(xs,Ts,Zr)}for(var vs=Kr.length-1;vs>=0;vs--)Xr=Kr[vs],qr._drawer.drawTile(Xr,qr._drawingHandler,Zr,Jr,_i),Xr.beingDrawn=!0,qr.viewer&&qr.viewer.raiseEvent("tile-drawn",{tiledImage:qr,tile:Xr});ns&&qr._drawer.restoreContext(Zr),Jr||(qr.getRotation(!0)%360!==0&&qr._drawer._restoreRotationChanges(Zr),qr.viewport.degrees!==0&&qr._drawer._restoreRotationChanges(Zr)),Zr&&(Jr&&(qr.viewport.degrees!==0&&qr._drawer._offsetForRotation({degrees:qr.viewport.degrees,useSketch:!1}),qr.getRotation(!0)%360!==0&&qr._drawer._offsetForRotation({degrees:qr.getRotation(!0),point:qr.viewport.pixelFromPointNoRotate(qr._getRotationPoint(!0),!0),useSketch:!1})),qr._drawer.blendSketch({opacity:qr.opacity,scale:Jr,translate:_i,compositeOperation:qr.compositeOperation,bounds:rs}),Jr&&(qr.getRotation(!0)%360!==0&&qr._drawer._restoreRotationChanges(!1),qr.viewport.degrees!==0&&qr._drawer._restoreRotationChanges(!1))),Jr||qr.viewport.degrees===0&&qr.getRotation(!0)%360===0&&qr._drawer.viewer.viewport.getFlip()&&qr._drawer._flip(),Wr(qr,Kr)}}function Wr(qr,Kr){if(qr.debugMode)for(var Xr=Kr.length-1;Xr>=0;Xr--){var Zr=Kr[Xr];try{qr._drawer.drawDebugInfo(Zr,Kr.length,Xr,qr)}catch(Jr){_r.console.error(Jr)}}}}(OpenSeadragon),function(_r){var Tr=function(Ar){_r.console.assert(Ar,"[TileCache.cacheTile] options is required"),_r.console.assert(Ar.tile,"[TileCache.cacheTile] options.tile is required"),_r.console.assert(Ar.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=Ar.tile,this.tiledImage=Ar.tiledImage},Rr=function(Ar){_r.console.assert(Ar,"[ImageRecord] options is required"),_r.console.assert(Ar.image,"[ImageRecord] options.image is required"),this._image=Ar.image,this._tiles=[]};Rr.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var Ar=document.createElement("canvas");Ar.width=this._image.width,Ar.height=this._image.height,this._renderedContext=Ar.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(Ar){_r.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=Ar},addTile:function(Ar){_r.console.assert(Ar,"[ImageRecord.addTile] tile is required"),this._tiles.push(Ar)},removeTile:function(Ar){for(var Pr=0;Pr<this._tiles.length;Pr++)if(this._tiles[Pr]===Ar){this._tiles.splice(Pr,1);return}_r.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",Ar)},getTileCount:function(){return this._tiles.length}},_r.TileCache=function(Ar){Ar=Ar||{},this._maxImageCacheCount=Ar.maxImageCacheCount||_r.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},_r.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(Ar){_r.console.assert(Ar,"[TileCache.cacheTile] options is required"),_r.console.assert(Ar.tile,"[TileCache.cacheTile] options.tile is required"),_r.console.assert(Ar.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),_r.console.assert(Ar.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var Pr=Ar.cutoff||0,Lr=this._tilesLoaded.length,Mr=this._imagesLoaded[Ar.tile.cacheKey];if(Mr||(_r.console.assert(Ar.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),Mr=this._imagesLoaded[Ar.tile.cacheKey]=new Rr({image:Ar.image}),this._imagesLoadedCount++),Mr.addTile(Ar.tile),Ar.tile.cacheImageRecord=Mr,this._imagesLoadedCount>this._maxImageCacheCount){for(var Fr=null,zr=-1,Ur=null,Vr,Nr,Dr,jr,Gr,Wr,qr=this._tilesLoaded.length-1;qr>=0;qr--)if(Wr=this._tilesLoaded[qr],Vr=Wr.tile,!(Vr.level<=Pr||Vr.beingDrawn)){if(!Fr){Fr=Vr,zr=qr,Ur=Wr;continue}jr=Vr.lastTouchTime,Nr=Fr.lastTouchTime,Gr=Vr.level,Dr=Fr.level,(jr<Nr||jr==Nr&&Gr>Dr)&&(Fr=Vr,zr=qr,Ur=Wr)}Fr&&zr>=0&&(this._unloadTile(Ur),Lr=zr)}this._tilesLoaded[Lr]=new Tr({tile:Ar.tile,tiledImage:Ar.tiledImage})},clearTilesFor:function(Ar){_r.console.assert(Ar,"[TileCache.clearTilesFor] tiledImage is required");for(var Pr,Lr=0;Lr<this._tilesLoaded.length;++Lr)Pr=this._tilesLoaded[Lr],Pr.tiledImage===Ar&&(this._unloadTile(Pr),this._tilesLoaded.splice(Lr,1),Lr--)},getImageRecord:function(Ar){return _r.console.assert(Ar,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[Ar]},_unloadTile:function(Ar){_r.console.assert(Ar,"[TileCache._unloadTile] tileRecord is required");var Pr=Ar.tile,Lr=Ar.tiledImage;Pr.unload(),Pr.cacheImageRecord=null;var Mr=this._imagesLoaded[Pr.cacheKey];Mr.removeTile(Pr),Mr.getTileCount()||(Mr.destroy(),delete this._imagesLoaded[Pr.cacheKey],this._imagesLoadedCount--),Lr.viewer.raiseEvent("tile-unloaded",{tile:Pr,tiledImage:Lr})}}}(OpenSeadragon),function(_r){_r.World=function(Tr){var Rr=this;_r.console.assert(Tr.viewer,"[World] options.viewer is required"),_r.EventSource.call(this),this.viewer=Tr.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(Ar){Rr._autoRefigureSizes?Rr._figureSizes():Rr._needsSizesFigured=!0},this._figureSizes()},_r.extend(_r.World.prototype,_r.EventSource.prototype,{addItem:function(Tr,Rr){if(_r.console.assert(Tr,"[World.addItem] item is required"),_r.console.assert(Tr instanceof _r.TiledImage,"[World.addItem] only TiledImages supported at this time"),Rr=Rr||{},Rr.index!==void 0){var Ar=Math.max(0,Math.min(this._items.length,Rr.index));this._items.splice(Ar,0,Tr)}else this._items.push(Tr);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,Tr.addHandler("bounds-change",this._delegatedFigureSizes),Tr.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:Tr})},getItemAt:function(Tr){return _r.console.assert(Tr!==void 0,"[World.getItemAt] index is required"),this._items[Tr]},getIndexOfItem:function(Tr){return _r.console.assert(Tr,"[World.getIndexOfItem] item is required"),_r.indexOf(this._items,Tr)},getItemCount:function(){return this._items.length},setItemIndex:function(Tr,Rr){_r.console.assert(Tr,"[World.setItemIndex] item is required"),_r.console.assert(Rr!==void 0,"[World.setItemIndex] index is required");var Ar=this.getIndexOfItem(Tr);if(Rr>=this._items.length)throw new Error("Index bigger than number of layers.");Rr===Ar||Ar===-1||(this._items.splice(Ar,1),this._items.splice(Rr,0,Tr),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:Tr,previousIndex:Ar,newIndex:Rr}))},removeItem:function(Tr){_r.console.assert(Tr,"[World.removeItem] item is required");var Rr=_r.indexOf(this._items,Tr);Rr!==-1&&(Tr.removeHandler("bounds-change",this._delegatedFigureSizes),Tr.removeHandler("clip-change",this._delegatedFigureSizes),Tr.destroy(),this._items.splice(Rr,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(Tr))},removeAll:function(){this.viewer._cancelPendingImages();var Tr,Rr;for(Rr=0;Rr<this._items.length;Rr++)Tr=this._items[Rr],Tr.removeHandler("bounds-change",this._delegatedFigureSizes),Tr.removeHandler("clip-change",this._delegatedFigureSizes),Tr.destroy();var Ar=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,Rr=0;Rr<Ar.length;Rr++)Tr=Ar[Rr],this._raiseRemoveItem(Tr)},resetItems:function(){for(var Tr=0;Tr<this._items.length;Tr++)this._items[Tr].reset()},update:function(){for(var Tr=!1,Rr=0;Rr<this._items.length;Rr++)Tr=this._items[Rr].update()||Tr;return Tr},draw:function(){for(var Tr=0;Tr<this._items.length;Tr++)this._items[Tr].draw();this._needsDraw=!1},needsDraw:function(){for(var Tr=0;Tr<this._items.length;Tr++)if(this._items[Tr].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(Tr){this._autoRefigureSizes=Tr,Tr&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(Tr){Tr=Tr||{};var Rr=Tr.immediately||!1,Ar=Tr.layout||_r.DEFAULT_SETTINGS.collectionLayout,Pr=Tr.rows||_r.DEFAULT_SETTINGS.collectionRows,Lr=Tr.columns||_r.DEFAULT_SETTINGS.collectionColumns,Mr=Tr.tileSize||_r.DEFAULT_SETTINGS.collectionTileSize,Fr=Tr.tileMargin||_r.DEFAULT_SETTINGS.collectionTileMargin,zr=Mr+Fr,Ur;!Tr.rows&&Lr?Ur=Lr:Ur=Math.ceil(this._items.length/Pr);var Vr=0,Nr=0,Dr,jr,Gr,Wr,qr;this.setAutoRefigureSizes(!1);for(var Kr=0;Kr<this._items.length;Kr++)Kr&&Kr%Ur===0&&(Ar==="horizontal"?(Nr+=zr,Vr=0):(Vr+=zr,Nr=0)),Dr=this._items[Kr],jr=Dr.getBounds(),jr.width>jr.height?Gr=Mr:Gr=Mr*(jr.width/jr.height),Wr=Gr*(jr.height/jr.width),qr=new _r.Point(Vr+(Mr-Gr)/2,Nr+(Mr-Wr)/2),Dr.setPosition(qr,Rr),Dr.setWidth(Gr,Rr),Ar==="horizontal"?Vr+=zr:Nr+=zr;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var Tr=this._homeBounds?this._homeBounds.clone():null,Rr=this._contentSize?this._contentSize.clone():null,Ar=this._contentFactor||0;if(!this._items.length)this._homeBounds=new _r.Rect(0,0,1,1),this._contentSize=new _r.Point(1,1),this._contentFactor=1;else{var Pr=this._items[0],Lr=Pr.getBounds();this._contentFactor=Pr.getContentSize().x/Lr.width;for(var Mr=Pr.getClippedBounds().getBoundingBox(),Fr=Mr.x,zr=Mr.y,Ur=Mr.x+Mr.width,Vr=Mr.y+Mr.height,Nr=1;Nr<this._items.length;Nr++)Pr=this._items[Nr],Lr=Pr.getBounds(),this._contentFactor=Math.max(this._contentFactor,Pr.getContentSize().x/Lr.width),Mr=Pr.getClippedBounds().getBoundingBox(),Fr=Math.min(Fr,Mr.x),zr=Math.min(zr,Mr.y),Ur=Math.max(Ur,Mr.x+Mr.width),Vr=Math.max(Vr,Mr.y+Mr.height);this._homeBounds=new _r.Rect(Fr,zr,Ur-Fr,Vr-zr),this._contentSize=new _r.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==Ar||!this._homeBounds.equals(Tr)||!this._contentSize.equals(Rr))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(Tr){this.raiseEvent("remove-item",{item:Tr})}})}(OpenSeadragon)})(openseadragon);var openseadragonExports=openseadragon.exports;const Q=getDefaultExportFromCjs$1(openseadragonExports);function $ae6933e535247d3d$export$7d15b64cf5a3a4c4(_r,[Tr,Rr]){return Math.min(Rr,Math.max(Tr,_r))}const $ea1ef594cf570d83$export$439d29a4e110a164=reactExports.forwardRef((_r,Tr)=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({},_r,{ref:Tr,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",..._r.style}}))),$cc7e05a45900e73f$var$OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],$cc7e05a45900e73f$var$SELECTION_KEYS=[" ","Enter"],$cc7e05a45900e73f$var$SELECT_NAME="Select",[$cc7e05a45900e73f$var$Collection,$cc7e05a45900e73f$var$useCollection,$cc7e05a45900e73f$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($cc7e05a45900e73f$var$SELECT_NAME),[$cc7e05a45900e73f$var$createSelectContext,$cc7e05a45900e73f$export$286727a75dc039bd]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cc7e05a45900e73f$var$SELECT_NAME,[$cc7e05a45900e73f$var$createCollectionScope,$cf1ac5d9fe0e8206$export$722aac194ae923]),$cc7e05a45900e73f$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),[$cc7e05a45900e73f$var$SelectProvider,$cc7e05a45900e73f$var$useSelectContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$SELECT_NAME),[$cc7e05a45900e73f$var$SelectNativeOptionsProvider,$cc7e05a45900e73f$var$useSelectNativeOptionsContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$SELECT_NAME),$cc7e05a45900e73f$export$ef9b1a59e592288f=_r=>{const{__scopeSelect:Tr,children:Rr,open:Ar,defaultOpen:Pr,onOpenChange:Lr,value:Mr,defaultValue:Fr,onValueChange:zr,dir:Ur,name:Vr,autoComplete:Nr,disabled:Dr,required:jr}=_r,Gr=$cc7e05a45900e73f$var$usePopperScope(Tr),[Wr,qr]=reactExports.useState(null),[Kr,Xr]=reactExports.useState(null),[Zr,Jr]=reactExports.useState(!1),_i=$f631663db3294ace$export$b39126d51d94e6f3(Ur),[es=!1,ts]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Ar,defaultProp:Pr,onChange:Lr}),[rs,ns]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Mr,defaultProp:Fr,onChange:zr}),as=reactExports.useRef(null),ls=Wr?!!Wr.closest("form"):!0,[us,xs]=reactExports.useState(new Set),Ts=Array.from(us).map(vs=>vs.props.value).join(";");return reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,Gr,reactExports.createElement($cc7e05a45900e73f$var$SelectProvider,{required:jr,scope:Tr,trigger:Wr,onTriggerChange:qr,valueNode:Kr,onValueNodeChange:Xr,valueNodeHasChildren:Zr,onValueNodeHasChildrenChange:Jr,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),value:rs,onValueChange:ns,open:es,onOpenChange:ts,dir:_i,triggerPointerDownPosRef:as,disabled:Dr},reactExports.createElement($cc7e05a45900e73f$var$Collection.Provider,{scope:Tr},reactExports.createElement($cc7e05a45900e73f$var$SelectNativeOptionsProvider,{scope:_r.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(vs=>{xs(gs=>new Set(gs).add(vs))},[]),onNativeOptionRemove:reactExports.useCallback(vs=>{xs(gs=>{const fs=new Set(gs);return fs.delete(vs),fs})},[])},Rr)),ls?reactExports.createElement($cc7e05a45900e73f$var$BubbleSelect,{key:Ts,"aria-hidden":!0,required:jr,tabIndex:-1,name:Vr,autoComplete:Nr,value:rs,onChange:vs=>ns(vs.target.value),disabled:Dr},rs===void 0?reactExports.createElement("option",{value:""}):null,Array.from(us)):null))},$cc7e05a45900e73f$var$TRIGGER_NAME="SelectTrigger",$cc7e05a45900e73f$export$3ac1e88a1c0b9f1=reactExports.forwardRef((_r,Tr)=>{const{__scopeSelect:Rr,disabled:Ar=!1,...Pr}=_r,Lr=$cc7e05a45900e73f$var$usePopperScope(Rr),Mr=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$TRIGGER_NAME,Rr),Fr=Mr.disabled||Ar,zr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Mr.onTriggerChange),Ur=$cc7e05a45900e73f$var$useCollection(Rr),[Vr,Nr,Dr]=$cc7e05a45900e73f$var$useTypeaheadSearch(Gr=>{const Wr=Ur().filter(Xr=>!Xr.disabled),qr=Wr.find(Xr=>Xr.value===Mr.value),Kr=$cc7e05a45900e73f$var$findNextItem(Wr,Gr,qr);Kr!==void 0&&Mr.onValueChange(Kr.value)}),jr=()=>{Fr||(Mr.onOpenChange(!0),Dr())};return reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$1({asChild:!0},Lr),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"combobox","aria-controls":Mr.contentId,"aria-expanded":Mr.open,"aria-required":Mr.required,"aria-autocomplete":"none",dir:Mr.dir,"data-state":Mr.open?"open":"closed",disabled:Fr,"data-disabled":Fr?"":void 0,"data-placeholder":Mr.value===void 0?"":void 0},Pr,{ref:zr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Pr.onClick,Gr=>{Gr.currentTarget.focus()}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Pr.onPointerDown,Gr=>{const Wr=Gr.target;Wr.hasPointerCapture(Gr.pointerId)&&Wr.releasePointerCapture(Gr.pointerId),Gr.button===0&&Gr.ctrlKey===!1&&(jr(),Mr.triggerPointerDownPosRef.current={x:Math.round(Gr.pageX),y:Math.round(Gr.pageY)},Gr.preventDefault())}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Pr.onKeyDown,Gr=>{const Wr=Vr.current!=="";!(Gr.ctrlKey||Gr.altKey||Gr.metaKey)&&Gr.key.length===1&&Nr(Gr.key),!(Wr&&Gr.key===" ")&&$cc7e05a45900e73f$var$OPEN_KEYS.includes(Gr.key)&&(jr(),Gr.preventDefault())})})))}),$cc7e05a45900e73f$var$VALUE_NAME="SelectValue",$cc7e05a45900e73f$export$e288731fd71264f0=reactExports.forwardRef((_r,Tr)=>{const{__scopeSelect:Rr,className:Ar,style:Pr,children:Lr,placeholder:Mr,...Fr}=_r,zr=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$VALUE_NAME,Rr),{onValueNodeHasChildrenChange:Ur}=zr,Vr=Lr!==void 0,Nr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,zr.onValueNodeChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{Ur(Vr)},[Ur,Vr]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({},Fr,{ref:Nr,style:{pointerEvents:"none"}}),zr.value===void 0&&Mr!==void 0?Mr:Lr)}),$cc7e05a45900e73f$export$99b400cabb58c515=reactExports.forwardRef((_r,Tr)=>{const{__scopeSelect:Rr,children:Ar,...Pr}=_r;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"aria-hidden":!0},Pr,{ref:Tr}),Ar||"")}),$cc7e05a45900e73f$var$CONTENT_NAME="SelectContent",$cc7e05a45900e73f$export$c973a4b3cb86a03d=reactExports.forwardRef((_r,Tr)=>{const Rr=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,_r.__scopeSelect),[Ar,Pr]=reactExports.useState();if($9f79659886946c16$export$e5c5a5f917a5871c(()=>{Pr(new DocumentFragment)},[]),!Rr.open){const Lr=Ar;return Lr?reactDomExports.createPortal(reactExports.createElement($cc7e05a45900e73f$var$SelectContentProvider,{scope:_r.__scopeSelect},reactExports.createElement($cc7e05a45900e73f$var$Collection.Slot,{scope:_r.__scopeSelect},reactExports.createElement("div",null,_r.children))),Lr):null}return reactExports.createElement($cc7e05a45900e73f$var$SelectContentImpl,_extends$1({},_r,{ref:Tr}))}),$cc7e05a45900e73f$var$CONTENT_MARGIN=10,[$cc7e05a45900e73f$var$SelectContentProvider,$cc7e05a45900e73f$var$useSelectContentContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$CONTENT_NAME),$cc7e05a45900e73f$var$SelectContentImpl=reactExports.forwardRef((_r,Tr)=>{const{__scopeSelect:Rr,position:Ar="item-aligned",onCloseAutoFocus:Pr,onEscapeKeyDown:Lr,onPointerDownOutside:Mr,side:Fr,sideOffset:zr,align:Ur,alignOffset:Vr,arrowPadding:Nr,collisionBoundary:Dr,collisionPadding:jr,sticky:Gr,hideWhenDetached:Wr,avoidCollisions:qr,...Kr}=_r,Xr=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,Rr),[Zr,Jr]=reactExports.useState(null),[_i,es]=reactExports.useState(null),ts=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Xs=>Jr(Xs)),[rs,ns]=reactExports.useState(null),[as,ls]=reactExports.useState(null),us=$cc7e05a45900e73f$var$useCollection(Rr),[xs,Ts]=reactExports.useState(!1),vs=reactExports.useRef(!1);reactExports.useEffect(()=>{if(Zr)return hideOthers(Zr)},[Zr]),$3db38b7d1fb3fe6a$export$b7ece24a22aeda8c();const gs=reactExports.useCallback(Xs=>{const[so,...uo]=us().map(Co=>Co.ref.current),[bo]=uo.slice(-1),wo=document.activeElement;for(const Co of Xs)if(Co===wo||(Co==null||Co.scrollIntoView({block:"nearest"}),Co===so&&_i&&(_i.scrollTop=0),Co===bo&&_i&&(_i.scrollTop=_i.scrollHeight),Co==null||Co.focus(),document.activeElement!==wo))return},[us,_i]),fs=reactExports.useCallback(()=>gs([rs,Zr]),[gs,rs,Zr]);reactExports.useEffect(()=>{xs&&fs()},[xs,fs]);const{onOpenChange:ys,triggerPointerDownPosRef:ks}=Xr;reactExports.useEffect(()=>{if(Zr){let Xs={x:0,y:0};const so=bo=>{var wo,Co,ds,Is;Xs={x:Math.abs(Math.round(bo.pageX)-((wo=(Co=ks.current)===null||Co===void 0?void 0:Co.x)!==null&&wo!==void 0?wo:0)),y:Math.abs(Math.round(bo.pageY)-((ds=(Is=ks.current)===null||Is===void 0?void 0:Is.y)!==null&&ds!==void 0?ds:0))}},uo=bo=>{Xs.x<=10&&Xs.y<=10?bo.preventDefault():Zr.contains(bo.target)||ys(!1),document.removeEventListener("pointermove",so),ks.current=null};return ks.current!==null&&(document.addEventListener("pointermove",so),document.addEventListener("pointerup",uo,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",so),document.removeEventListener("pointerup",uo,{capture:!0})}}},[Zr,ys,ks]),reactExports.useEffect(()=>{const Xs=()=>ys(!1);return window.addEventListener("blur",Xs),window.addEventListener("resize",Xs),()=>{window.removeEventListener("blur",Xs),window.removeEventListener("resize",Xs)}},[ys]);const[Fs,Us]=$cc7e05a45900e73f$var$useTypeaheadSearch(Xs=>{const so=us().filter(wo=>!wo.disabled),uo=so.find(wo=>wo.ref.current===document.activeElement),bo=$cc7e05a45900e73f$var$findNextItem(so,Xs,uo);bo&&setTimeout(()=>bo.ref.current.focus())}),Vs=reactExports.useCallback((Xs,so,uo)=>{const bo=!vs.current&&!uo;(Xr.value!==void 0&&Xr.value===so||bo)&&(ns(Xs),bo&&(vs.current=!0))},[Xr.value]),ao=reactExports.useCallback(()=>Zr==null?void 0:Zr.focus(),[Zr]),qs=reactExports.useCallback((Xs,so,uo)=>{const bo=!vs.current&&!uo;(Xr.value!==void 0&&Xr.value===so||bo)&&ls(Xs)},[Xr.value]),Qs=Ar==="popper"?$cc7e05a45900e73f$var$SelectPopperPosition:$cc7e05a45900e73f$var$SelectItemAlignedPosition,mo=Qs===$cc7e05a45900e73f$var$SelectPopperPosition?{side:Fr,sideOffset:zr,align:Ur,alignOffset:Vr,arrowPadding:Nr,collisionBoundary:Dr,collisionPadding:jr,sticky:Gr,hideWhenDetached:Wr,avoidCollisions:qr}:{};return reactExports.createElement($cc7e05a45900e73f$var$SelectContentProvider,{scope:Rr,content:Zr,viewport:_i,onViewportChange:es,itemRefCallback:Vs,selectedItem:rs,onItemLeave:ao,itemTextRefCallback:qs,focusSelectedItem:fs,selectedItemText:as,position:Ar,isPositioned:xs,searchRef:Fs},reactExports.createElement($01b9c$RemoveScroll,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0},reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,trapped:Xr.open,onMountAutoFocus:Xs=>{Xs.preventDefault()},onUnmountAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Pr,Xs=>{var so;(so=Xr.trigger)===null||so===void 0||so.focus({preventScroll:!0}),Xs.preventDefault()})},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:Lr,onPointerDownOutside:Mr,onFocusOutside:Xs=>Xs.preventDefault(),onDismiss:()=>Xr.onOpenChange(!1)},reactExports.createElement(Qs,_extends$1({role:"listbox",id:Xr.contentId,"data-state":Xr.open?"open":"closed",dir:Xr.dir,onContextMenu:Xs=>Xs.preventDefault()},Kr,mo,{onPlaced:()=>Ts(!0),ref:ts,style:{display:"flex",flexDirection:"column",outline:"none",...Kr.style},onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Kr.onKeyDown,Xs=>{const so=Xs.ctrlKey||Xs.altKey||Xs.metaKey;if(Xs.key==="Tab"&&Xs.preventDefault(),!so&&Xs.key.length===1&&Us(Xs.key),["ArrowUp","ArrowDown","Home","End"].includes(Xs.key)){let bo=us().filter(wo=>!wo.disabled).map(wo=>wo.ref.current);if(["ArrowUp","End"].includes(Xs.key)&&(bo=bo.slice().reverse()),["ArrowUp","ArrowDown"].includes(Xs.key)){const wo=Xs.target,Co=bo.indexOf(wo);bo=bo.slice(Co+1)}setTimeout(()=>gs(bo)),Xs.preventDefault()}})}))))))}),$cc7e05a45900e73f$var$SelectItemAlignedPosition=reactExports.forwardRef((_r,Tr)=>{const{__scopeSelect:Rr,onPlaced:Ar,...Pr}=_r,Lr=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,Rr),Mr=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$CONTENT_NAME,Rr),[Fr,zr]=reactExports.useState(null),[Ur,Vr]=reactExports.useState(null),Nr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,ts=>Vr(ts)),Dr=$cc7e05a45900e73f$var$useCollection(Rr),jr=reactExports.useRef(!1),Gr=reactExports.useRef(!0),{viewport:Wr,selectedItem:qr,selectedItemText:Kr,focusSelectedItem:Xr}=Mr,Zr=reactExports.useCallback(()=>{if(Lr.trigger&&Lr.valueNode&&Fr&&Ur&&Wr&&qr&&Kr){const ts=Lr.trigger.getBoundingClientRect(),rs=Ur.getBoundingClientRect(),ns=Lr.valueNode.getBoundingClientRect(),as=Kr.getBoundingClientRect();if(Lr.dir!=="rtl"){const wo=as.left-rs.left,Co=ns.left-wo,ds=ts.left-Co,Is=ts.width+ds,Gs=Math.max(Is,rs.width),to=window.innerWidth-$cc7e05a45900e73f$var$CONTENT_MARGIN,no=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(Co,[$cc7e05a45900e73f$var$CONTENT_MARGIN,to-Gs]);Fr.style.minWidth=Is+"px",Fr.style.left=no+"px"}else{const wo=rs.right-as.right,Co=window.innerWidth-ns.right-wo,ds=window.innerWidth-ts.right-Co,Is=ts.width+ds,Gs=Math.max(Is,rs.width),to=window.innerWidth-$cc7e05a45900e73f$var$CONTENT_MARGIN,no=$ae6933e535247d3d$export$7d15b64cf5a3a4c4(Co,[$cc7e05a45900e73f$var$CONTENT_MARGIN,to-Gs]);Fr.style.minWidth=Is+"px",Fr.style.right=no+"px"}const ls=Dr(),us=window.innerHeight-$cc7e05a45900e73f$var$CONTENT_MARGIN*2,xs=Wr.scrollHeight,Ts=window.getComputedStyle(Ur),vs=parseInt(Ts.borderTopWidth,10),gs=parseInt(Ts.paddingTop,10),fs=parseInt(Ts.borderBottomWidth,10),ys=parseInt(Ts.paddingBottom,10),ks=vs+gs+xs+ys+fs,Fs=Math.min(qr.offsetHeight*5,ks),Us=window.getComputedStyle(Wr),Vs=parseInt(Us.paddingTop,10),ao=parseInt(Us.paddingBottom,10),qs=ts.top+ts.height/2-$cc7e05a45900e73f$var$CONTENT_MARGIN,Qs=us-qs,mo=qr.offsetHeight/2,Xs=qr.offsetTop+mo,so=vs+gs+Xs,uo=ks-so;if(so<=qs){const wo=qr===ls[ls.length-1].ref.current;Fr.style.bottom="0px";const Co=Ur.clientHeight-Wr.offsetTop-Wr.offsetHeight,ds=Math.max(Qs,mo+(wo?ao:0)+Co+fs),Is=so+ds;Fr.style.height=Is+"px"}else{const wo=qr===ls[0].ref.current;Fr.style.top="0px";const ds=Math.max(qs,vs+Wr.offsetTop+(wo?Vs:0)+mo)+uo;Fr.style.height=ds+"px",Wr.scrollTop=so-qs+Wr.offsetTop}Fr.style.margin=`${$cc7e05a45900e73f$var$CONTENT_MARGIN}px 0`,Fr.style.minHeight=Fs+"px",Fr.style.maxHeight=us+"px",Ar==null||Ar(),requestAnimationFrame(()=>jr.current=!0)}},[Dr,Lr.trigger,Lr.valueNode,Fr,Ur,Wr,qr,Kr,Lr.dir,Ar]);$9f79659886946c16$export$e5c5a5f917a5871c(()=>Zr(),[Zr]);const[Jr,_i]=reactExports.useState();$9f79659886946c16$export$e5c5a5f917a5871c(()=>{Ur&&_i(window.getComputedStyle(Ur).zIndex)},[Ur]);const es=reactExports.useCallback(ts=>{ts&&Gr.current===!0&&(Zr(),Xr==null||Xr(),Gr.current=!1)},[Zr,Xr]);return reactExports.createElement($cc7e05a45900e73f$var$SelectViewportProvider,{scope:Rr,contentWrapper:Fr,shouldExpandOnScrollRef:jr,onScrollButtonChange:es},reactExports.createElement("div",{ref:zr,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Jr}},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},Pr,{ref:Nr,style:{boxSizing:"border-box",maxHeight:"100%",...Pr.style}}))))}),$cc7e05a45900e73f$var$SelectPopperPosition=reactExports.forwardRef((_r,Tr)=>{const{__scopeSelect:Rr,align:Ar="start",collisionPadding:Pr=$cc7e05a45900e73f$var$CONTENT_MARGIN,...Lr}=_r,Mr=$cc7e05a45900e73f$var$usePopperScope(Rr);return reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$1({},Mr,Lr,{ref:Tr,align:Ar,collisionPadding:Pr,style:{boxSizing:"border-box",...Lr.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[$cc7e05a45900e73f$var$SelectViewportProvider,$cc7e05a45900e73f$var$useSelectViewportContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$CONTENT_NAME,{}),$cc7e05a45900e73f$var$VIEWPORT_NAME="SelectViewport",$cc7e05a45900e73f$export$9ed6e7b40248d36d=reactExports.forwardRef((_r,Tr)=>{const{__scopeSelect:Rr,...Ar}=_r,Pr=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$VIEWPORT_NAME,Rr),Lr=$cc7e05a45900e73f$var$useSelectViewportContext($cc7e05a45900e73f$var$VIEWPORT_NAME,Rr),Mr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Pr.onViewportChange),Fr=reactExports.useRef(0);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),reactExports.createElement($cc7e05a45900e73f$var$Collection.Slot,{scope:Rr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-radix-select-viewport":"",role:"presentation"},Ar,{ref:Mr,style:{position:"relative",flex:1,overflow:"auto",...Ar.style},onScroll:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Ar.onScroll,zr=>{const Ur=zr.currentTarget,{contentWrapper:Vr,shouldExpandOnScrollRef:Nr}=Lr;if(Nr!=null&&Nr.current&&Vr){const Dr=Math.abs(Fr.current-Ur.scrollTop);if(Dr>0){const jr=window.innerHeight-$cc7e05a45900e73f$var$CONTENT_MARGIN*2,Gr=parseFloat(Vr.style.minHeight),Wr=parseFloat(Vr.style.height),qr=Math.max(Gr,Wr);if(qr<jr){const Kr=qr+Dr,Xr=Math.min(jr,Kr),Zr=Kr-Xr;Vr.style.height=Xr+"px",Vr.style.bottom==="0px"&&(Ur.scrollTop=Zr>0?Zr:0,Vr.style.justifyContent="flex-end")}}}Fr.current=Ur.scrollTop})}))))}),$cc7e05a45900e73f$var$GROUP_NAME="SelectGroup",[$cc7e05a45900e73f$var$SelectGroupContextProvider,$cc7e05a45900e73f$var$useSelectGroupContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$GROUP_NAME),$cc7e05a45900e73f$export$ee25a334c55de1f4=reactExports.forwardRef((_r,Tr)=>{const{__scopeSelect:Rr,...Ar}=_r,Pr=$1746a345f3d73bb7$export$f680877a34711e37();return reactExports.createElement($cc7e05a45900e73f$var$SelectGroupContextProvider,{scope:Rr,id:Pr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"group","aria-labelledby":Pr},Ar,{ref:Tr})))}),$cc7e05a45900e73f$var$LABEL_NAME="SelectLabel",$cc7e05a45900e73f$export$f67338d29bd972f8=reactExports.forwardRef((_r,Tr)=>{const{__scopeSelect:Rr,...Ar}=_r,Pr=$cc7e05a45900e73f$var$useSelectGroupContext($cc7e05a45900e73f$var$LABEL_NAME,Rr);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({id:Pr.id},Ar,{ref:Tr}))}),$cc7e05a45900e73f$var$ITEM_NAME="SelectItem",[$cc7e05a45900e73f$var$SelectItemContextProvider,$cc7e05a45900e73f$var$useSelectItemContext]=$cc7e05a45900e73f$var$createSelectContext($cc7e05a45900e73f$var$ITEM_NAME),$cc7e05a45900e73f$export$13ef48a934230896=reactExports.forwardRef((_r,Tr)=>{const{__scopeSelect:Rr,value:Ar,disabled:Pr=!1,textValue:Lr,...Mr}=_r,Fr=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$ITEM_NAME,Rr),zr=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$ITEM_NAME,Rr),Ur=Fr.value===Ar,[Vr,Nr]=reactExports.useState(Lr??""),[Dr,jr]=reactExports.useState(!1),Gr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Kr=>{var Xr;return(Xr=zr.itemRefCallback)===null||Xr===void 0?void 0:Xr.call(zr,Kr,Ar,Pr)}),Wr=$1746a345f3d73bb7$export$f680877a34711e37(),qr=()=>{Pr||(Fr.onValueChange(Ar),Fr.onOpenChange(!1))};return reactExports.createElement($cc7e05a45900e73f$var$SelectItemContextProvider,{scope:Rr,value:Ar,disabled:Pr,textId:Wr,isSelected:Ur,onItemTextChange:reactExports.useCallback(Kr=>{Nr(Xr=>{var Zr;return Xr||((Zr=Kr==null?void 0:Kr.textContent)!==null&&Zr!==void 0?Zr:"").trim()})},[])},reactExports.createElement($cc7e05a45900e73f$var$Collection.ItemSlot,{scope:Rr,value:Ar,disabled:Pr,textValue:Vr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"option","aria-labelledby":Wr,"data-highlighted":Dr?"":void 0,"aria-selected":Ur&&Dr,"data-state":Ur?"checked":"unchecked","aria-disabled":Pr||void 0,"data-disabled":Pr?"":void 0,tabIndex:Pr?void 0:-1},Mr,{ref:Gr,onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Mr.onFocus,()=>jr(!0)),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Mr.onBlur,()=>jr(!1)),onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Mr.onPointerUp,qr),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Mr.onPointerMove,Kr=>{if(Pr){var Xr;(Xr=zr.onItemLeave)===null||Xr===void 0||Xr.call(zr)}else Kr.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Mr.onPointerLeave,Kr=>{if(Kr.currentTarget===document.activeElement){var Xr;(Xr=zr.onItemLeave)===null||Xr===void 0||Xr.call(zr)}}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Mr.onKeyDown,Kr=>{var Xr;((Xr=zr.searchRef)===null||Xr===void 0?void 0:Xr.current)!==""&&Kr.key===" "||($cc7e05a45900e73f$var$SELECTION_KEYS.includes(Kr.key)&&qr(),Kr.key===" "&&Kr.preventDefault())})}))))}),$cc7e05a45900e73f$var$ITEM_TEXT_NAME="SelectItemText",$cc7e05a45900e73f$export$3572fb0fb821ff49=reactExports.forwardRef((_r,Tr)=>{const{__scopeSelect:Rr,className:Ar,style:Pr,...Lr}=_r,Mr=$cc7e05a45900e73f$var$useSelectContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,Rr),Fr=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,Rr),zr=$cc7e05a45900e73f$var$useSelectItemContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,Rr),Ur=$cc7e05a45900e73f$var$useSelectNativeOptionsContext($cc7e05a45900e73f$var$ITEM_TEXT_NAME,Rr),[Vr,Nr]=reactExports.useState(null),Dr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Kr=>Nr(Kr),zr.onItemTextChange,Kr=>{var Xr;return(Xr=Fr.itemTextRefCallback)===null||Xr===void 0?void 0:Xr.call(Fr,Kr,zr.value,zr.disabled)}),jr=Vr==null?void 0:Vr.textContent,Gr=reactExports.useMemo(()=>reactExports.createElement("option",{key:zr.value,value:zr.value,disabled:zr.disabled},jr),[zr.disabled,zr.value,jr]),{onNativeOptionAdd:Wr,onNativeOptionRemove:qr}=Ur;return $9f79659886946c16$export$e5c5a5f917a5871c(()=>(Wr(Gr),()=>qr(Gr)),[Wr,qr,Gr]),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({id:zr.textId},Lr,{ref:Dr})),zr.isSelected&&Mr.valueNode&&!Mr.valueNodeHasChildren?reactDomExports.createPortal(Lr.children,Mr.valueNode):null)}),$cc7e05a45900e73f$var$ITEM_INDICATOR_NAME="SelectItemIndicator",$cc7e05a45900e73f$export$6b9198de19accfe6=reactExports.forwardRef((_r,Tr)=>{const{__scopeSelect:Rr,...Ar}=_r;return $cc7e05a45900e73f$var$useSelectItemContext($cc7e05a45900e73f$var$ITEM_INDICATOR_NAME,Rr).isSelected?reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"aria-hidden":!0},Ar,{ref:Tr})):null}),$cc7e05a45900e73f$var$SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",$cc7e05a45900e73f$export$d8117927658af6d7=reactExports.forwardRef((_r,Tr)=>{const Rr=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$SCROLL_UP_BUTTON_NAME,_r.__scopeSelect),Ar=$cc7e05a45900e73f$var$useSelectViewportContext($cc7e05a45900e73f$var$SCROLL_UP_BUTTON_NAME,_r.__scopeSelect),[Pr,Lr]=reactExports.useState(!1),Mr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Ar.onScrollButtonChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(Rr.viewport&&Rr.isPositioned){let Ur=function(){const Vr=zr.scrollTop>0;Lr(Vr)};var Fr=Ur;const zr=Rr.viewport;return Ur(),zr.addEventListener("scroll",Ur),()=>zr.removeEventListener("scroll",Ur)}},[Rr.viewport,Rr.isPositioned]),Pr?reactExports.createElement($cc7e05a45900e73f$var$SelectScrollButtonImpl,_extends$1({},_r,{ref:Mr,onAutoScroll:()=>{const{viewport:Fr,selectedItem:zr}=Rr;Fr&&zr&&(Fr.scrollTop=Fr.scrollTop-zr.offsetHeight)}})):null}),$cc7e05a45900e73f$var$SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",$cc7e05a45900e73f$export$ff951e476c12189=reactExports.forwardRef((_r,Tr)=>{const Rr=$cc7e05a45900e73f$var$useSelectContentContext($cc7e05a45900e73f$var$SCROLL_DOWN_BUTTON_NAME,_r.__scopeSelect),Ar=$cc7e05a45900e73f$var$useSelectViewportContext($cc7e05a45900e73f$var$SCROLL_DOWN_BUTTON_NAME,_r.__scopeSelect),[Pr,Lr]=reactExports.useState(!1),Mr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Ar.onScrollButtonChange);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(Rr.viewport&&Rr.isPositioned){let Ur=function(){const Vr=zr.scrollHeight-zr.clientHeight,Nr=Math.ceil(zr.scrollTop)<Vr;Lr(Nr)};var Fr=Ur;const zr=Rr.viewport;return Ur(),zr.addEventListener("scroll",Ur),()=>zr.removeEventListener("scroll",Ur)}},[Rr.viewport,Rr.isPositioned]),Pr?reactExports.createElement($cc7e05a45900e73f$var$SelectScrollButtonImpl,_extends$1({},_r,{ref:Mr,onAutoScroll:()=>{const{viewport:Fr,selectedItem:zr}=Rr;Fr&&zr&&(Fr.scrollTop=Fr.scrollTop+zr.offsetHeight)}})):null}),$cc7e05a45900e73f$var$SelectScrollButtonImpl=reactExports.forwardRef((_r,Tr)=>{const{__scopeSelect:Rr,onAutoScroll:Ar,...Pr}=_r,Lr=$cc7e05a45900e73f$var$useSelectContentContext("SelectScrollButton",Rr),Mr=reactExports.useRef(null),Fr=$cc7e05a45900e73f$var$useCollection(Rr),zr=reactExports.useCallback(()=>{Mr.current!==null&&(window.clearInterval(Mr.current),Mr.current=null)},[]);return reactExports.useEffect(()=>()=>zr(),[zr]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{var Ur;const Vr=Fr().find(Nr=>Nr.ref.current===document.activeElement);Vr==null||(Ur=Vr.ref.current)===null||Ur===void 0||Ur.scrollIntoView({block:"nearest"})},[Fr]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"aria-hidden":!0},Pr,{ref:Tr,style:{flexShrink:0,...Pr.style},onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Pr.onPointerDown,()=>{Mr.current===null&&(Mr.current=window.setInterval(Ar,50))}),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Pr.onPointerMove,()=>{var Ur;(Ur=Lr.onItemLeave)===null||Ur===void 0||Ur.call(Lr),Mr.current===null&&(Mr.current=window.setInterval(Ar,50))}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Pr.onPointerLeave,()=>{zr()})}))}),$cc7e05a45900e73f$var$BubbleSelect=reactExports.forwardRef((_r,Tr)=>{const{value:Rr,...Ar}=_r,Pr=reactExports.useRef(null),Lr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Pr),Mr=$010c2913dbd2fe3d$export$5cae361ad82dce8b(Rr);return reactExports.useEffect(()=>{const Fr=Pr.current,zr=window.HTMLSelectElement.prototype,Vr=Object.getOwnPropertyDescriptor(zr,"value").set;if(Mr!==Rr&&Vr){const Nr=new Event("change",{bubbles:!0});Vr.call(Fr,Rr),Fr.dispatchEvent(Nr)}},[Mr,Rr]),reactExports.createElement($ea1ef594cf570d83$export$439d29a4e110a164,{asChild:!0},reactExports.createElement("select",_extends$1({},Ar,{ref:Lr,defaultValue:Rr})))});$cc7e05a45900e73f$var$BubbleSelect.displayName="BubbleSelect";function $cc7e05a45900e73f$var$useTypeaheadSearch(_r){const Tr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_r),Rr=reactExports.useRef(""),Ar=reactExports.useRef(0),Pr=reactExports.useCallback(Mr=>{const Fr=Rr.current+Mr;Tr(Fr),function zr(Ur){Rr.current=Ur,window.clearTimeout(Ar.current),Ur!==""&&(Ar.current=window.setTimeout(()=>zr(""),1e3))}(Fr)},[Tr]),Lr=reactExports.useCallback(()=>{Rr.current="",window.clearTimeout(Ar.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(Ar.current),[]),[Rr,Pr,Lr]}function $cc7e05a45900e73f$var$findNextItem(_r,Tr,Rr){const Pr=Tr.length>1&&Array.from(Tr).every(Ur=>Ur===Tr[0])?Tr[0]:Tr,Lr=Rr?_r.indexOf(Rr):-1;let Mr=$cc7e05a45900e73f$var$wrapArray(_r,Math.max(Lr,0));Pr.length===1&&(Mr=Mr.filter(Ur=>Ur!==Rr));const zr=Mr.find(Ur=>Ur.textValue.toLowerCase().startsWith(Pr.toLowerCase()));return zr!==Rr?zr:void 0}function $cc7e05a45900e73f$var$wrapArray(_r,Tr){return _r.map((Rr,Ar)=>_r[(Tr+Ar)%_r.length])}const $cc7e05a45900e73f$export$be92b6f5f03c0fe9=$cc7e05a45900e73f$export$ef9b1a59e592288f,$cc7e05a45900e73f$export$41fb9f06171c75f4=$cc7e05a45900e73f$export$3ac1e88a1c0b9f1,$cc7e05a45900e73f$export$4c8d1a57a761ef94=$cc7e05a45900e73f$export$e288731fd71264f0,$cc7e05a45900e73f$export$f04a61298a47a40f=$cc7e05a45900e73f$export$99b400cabb58c515,$cc7e05a45900e73f$export$7c6e2c02157bb7d2=$cc7e05a45900e73f$export$c973a4b3cb86a03d,$cc7e05a45900e73f$export$d5c6c08dc2d3ca7=$cc7e05a45900e73f$export$9ed6e7b40248d36d,$cc7e05a45900e73f$export$eb2fcfdbd7ba97d4=$cc7e05a45900e73f$export$ee25a334c55de1f4,$cc7e05a45900e73f$export$b04be29aa201d4f5=$cc7e05a45900e73f$export$f67338d29bd972f8,$cc7e05a45900e73f$export$6d08773d2e66f8f2=$cc7e05a45900e73f$export$13ef48a934230896,$cc7e05a45900e73f$export$d6e5bf9c43ea9319=$cc7e05a45900e73f$export$3572fb0fb821ff49,$cc7e05a45900e73f$export$c3468e2714d175fa=$cc7e05a45900e73f$export$6b9198de19accfe6,$cc7e05a45900e73f$export$2f60d3ec9ad468f2=$cc7e05a45900e73f$export$d8117927658af6d7,$cc7e05a45900e73f$export$bf1aedc3039c8d63=$cc7e05a45900e73f$export$ff951e476c12189,$6be4966fd9bbc698$var$SWITCH_NAME="Switch",[$6be4966fd9bbc698$var$createSwitchContext,$6be4966fd9bbc698$export$cf7f5f17f69cbd43]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($6be4966fd9bbc698$var$SWITCH_NAME),[$6be4966fd9bbc698$var$SwitchProvider,$6be4966fd9bbc698$var$useSwitchContext]=$6be4966fd9bbc698$var$createSwitchContext($6be4966fd9bbc698$var$SWITCH_NAME),$6be4966fd9bbc698$export$b5d5cf8927ab7262=reactExports.forwardRef((_r,Tr)=>{const{__scopeSwitch:Rr,name:Ar,checked:Pr,defaultChecked:Lr,required:Mr,disabled:Fr,value:zr="on",onCheckedChange:Ur,...Vr}=_r,[Nr,Dr]=reactExports.useState(null),jr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Tr,Xr=>Dr(Xr)),Gr=reactExports.useRef(!1),Wr=Nr?!!Nr.closest("form"):!0,[qr=!1,Kr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:Pr,defaultProp:Lr,onChange:Ur});return reactExports.createElement($6be4966fd9bbc698$var$SwitchProvider,{scope:Rr,checked:qr,disabled:Fr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",role:"switch","aria-checked":qr,"aria-required":Mr,"data-state":$6be4966fd9bbc698$var$getState(qr),"data-disabled":Fr?"":void 0,disabled:Fr,value:zr},Vr,{ref:jr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_r.onClick,Xr=>{Kr(Zr=>!Zr),Wr&&(Gr.current=Xr.isPropagationStopped(),Gr.current||Xr.stopPropagation())})})),Wr&&reactExports.createElement($6be4966fd9bbc698$var$BubbleInput,{control:Nr,bubbles:!Gr.current,name:Ar,value:zr,checked:qr,required:Mr,disabled:Fr,style:{transform:"translateX(-100%)"}}))}),$6be4966fd9bbc698$var$THUMB_NAME="SwitchThumb",$6be4966fd9bbc698$export$4d07bf653ea69106=reactExports.forwardRef((_r,Tr)=>{const{__scopeSwitch:Rr,...Ar}=_r,Pr=$6be4966fd9bbc698$var$useSwitchContext($6be4966fd9bbc698$var$THUMB_NAME,Rr);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({"data-state":$6be4966fd9bbc698$var$getState(Pr.checked),"data-disabled":Pr.disabled?"":void 0},Ar,{ref:Tr}))}),$6be4966fd9bbc698$var$BubbleInput=_r=>{const{control:Tr,checked:Rr,bubbles:Ar=!0,...Pr}=_r,Lr=reactExports.useRef(null),Mr=$010c2913dbd2fe3d$export$5cae361ad82dce8b(Rr),Fr=$db6c3485150b8e66$export$1ab7ae714698c4b8(Tr);return reactExports.useEffect(()=>{const zr=Lr.current,Ur=window.HTMLInputElement.prototype,Nr=Object.getOwnPropertyDescriptor(Ur,"checked").set;if(Mr!==Rr&&Nr){const Dr=new Event("click",{bubbles:Ar});Nr.call(zr,Rr),zr.dispatchEvent(Dr)}},[Mr,Rr,Ar]),reactExports.createElement("input",_extends$1({type:"checkbox","aria-hidden":!0,defaultChecked:Rr},Pr,{tabIndex:-1,ref:Lr,style:{..._r.style,...Fr,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function $6be4966fd9bbc698$var$getState(_r){return _r?"checked":"unchecked"}const $6be4966fd9bbc698$export$be92b6f5f03c0fe9=$6be4966fd9bbc698$export$b5d5cf8927ab7262,$6be4966fd9bbc698$export$6521433ed15a34db=$6be4966fd9bbc698$export$4d07bf653ea69106,Je=_r=>{var Tr=_r.toString().split(":"),Rr=Math.ceil(parseInt(Tr[0])),Ar=Math.ceil(parseInt(Tr[1])),Pr=Qe(Math.ceil(parseInt(Tr[2])),2);let Lr=`${Rr!==0&&Ar<10?(Ar+"").padStart(2,"0"):Ar}:${Pr}`;return Rr!==0&&(Lr=`${Rr}:${Lr}`),Lr},pe=_r=>{const Tr=new Date(_r*1e3).toISOString().substr(11,8);return Je(Tr)},ge=(_r,Tr)=>{if(typeof _r!="object"||_r===null)return Tr;for(const Rr in Tr)typeof Tr[Rr]=="object"&&Tr[Rr]!==null&&!Array.isArray(Tr[Rr])?(_r[Rr]||(_r[Rr]={}),_r[Rr]=ge(_r[Rr],Tr[Rr])):_r[Rr]=Tr[Rr];return _r},fe=(_r,Tr)=>Object.hasOwn(_r,Tr)?_r[Tr].toString():void 0,Qe=(_r,Tr)=>String(_r).padStart(Tr,"0"),H={background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"61.8vh",ignoreCaptionLabels:[],informationPanel:{open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showIIIFBadge:!0,showTitle:!0,withCredentials:!1};var ce;const W={activeCanvas:"",activeManifest:"",collection:{},configOptions:H,informationOpen:(ce=H==null?void 0:H.informationPanel)==null?void 0:ce.open,isLoaded:!1,vault:new Vault},he=React$1.createContext(W),xe=React$1.createContext(W);function et(_r,Tr){switch(Tr.type){case"updateActiveCanvas":return Tr.canvasId||(Tr.canvasId=""),{..._r,activeCanvas:Tr.canvasId};case"updateActiveManifest":return{..._r,activeManifest:Tr.manifestId};case"updateCollection":return{..._r,collection:Tr.collection};case"updateConfigOptions":return{..._r,configOptions:ge(_r.configOptions,Tr.configOptions)};case"updateInformationOpen":return{..._r,informationOpen:Tr.informationOpen};case"updateIsLoaded":return{..._r,isLoaded:Tr.isLoaded};default:throw new Error(`Unhandled action type: ${Tr.type}`)}}const tt=({initialState:_r=W,children:Tr})=>{const[Rr,Ar]=reactExports.useReducer(et,_r);return React$1.createElement(he.Provider,{value:Rr},React$1.createElement(xe.Provider,{value:Ar},Tr))};function k(){const _r=React$1.useContext(he);if(_r===void 0)throw new Error("useViewerState must be used within a ViewerProvider");return _r}function F(){const _r=React$1.useContext(xe);if(_r===void 0)throw new Error("useViewerDispatch must be used within a ViewerProvider");return _r}const ve=(_r,Tr,Rr,Ar)=>{var Pr,Lr;const Mr={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]},Fr=zr=>{if(zr){if(!zr.body||!zr.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",zr);return}let Ur=zr.body;Array.isArray(Ur)&&(Ur=Ur[0]);const Vr=_r.get(Ur.id);if(!Vr)return;switch(Rr){case"painting":return zr.target===Tr.id&&zr.motivation&&zr.motivation[0]==="painting"&&Ar.includes(Vr.type)&&(zr.body=Vr),!!zr;case"supplementing":return;default:throw new Error("Invalid annotation motivation.")}}};return Mr.canvas=_r.get(Tr),Mr.canvas&&(Mr.annotationPage=_r.get(Mr.canvas.items[0]),Mr.accompanyingCanvas=(Pr=Mr.canvas)!=null&&Pr.accompanyingCanvas?_r.get((Lr=Mr.canvas)==null?void 0:Lr.accompanyingCanvas):void 0),Mr.annotationPage&&(Mr.annotations=_r.get(Mr.annotationPage.items).filter(Fr)),Mr},P=(_r,Tr="en")=>{if(!_r)return"";if(!_r[Tr]){const Rr=Object.getOwnPropertyNames(_r);if(Rr.length>0)return _r[Rr[0]]}return _r[Tr]},B=(_r,Tr)=>{const Rr=ve(_r,{id:Tr,type:"Canvas"},"painting",["Image","Sound","Video"]);if(Rr.annotations.length!==0&&Rr.annotations[0]&&Rr.annotations[0].body)return Rr.annotations[0].body},nt=(_r,Tr,Rr)=>{const Ar=_r.get({id:Tr,type:"Canvas"});if(!(Ar!=null&&Ar.annotations)||!Ar.annotations[0])return[];const Pr=_r.get(Ar.annotations[0]),Lr=_r.get(Pr.items);return Array.isArray(Lr)?Lr.filter(Mr=>{var Fr;if(Mr.body&&(Fr=Mr.motivation)!=null&&Fr.includes("supplementing")){let zr=Mr.body;Array.isArray(zr)&&(zr=zr[0]);const Ur=_r.get(zr.id);if(Ur.format===Rr)return Mr.body=Ur,Mr}}).map(Mr=>Mr.body):[]},rt=(_r,Tr,Rr,Ar)=>{let Pr=[];if(Tr.canvas&&Tr.canvas.thumbnail.length>0){const Lr=_r.get(Tr.canvas.thumbnail[0]);Pr.push(Lr)}if(Tr.annotations[0]){if(Tr.annotations[0].thumbnail&&Tr.annotations[0].thumbnail.length>0){const Mr=_r.get(Tr.annotations[0].thumbnail[0]);Pr.push(Mr)}if(!Tr.annotations[0].body)return;const Lr=Tr.annotations[0].body;Lr.type==="Image"&&Pr.push(Lr)}return Pr.length===0?void 0:{id:Pr[0].id,format:Pr[0].format,type:Pr[0].type,width:Rr,height:Ar}},j=209,ot={colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:`hsl(${j} 100% 38.2%)`,accentMuted:`hsl(${j} 80% 61.8%)`,accentAlt:`hsl(${j} 80% 30%)`,secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},Z={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:d,css:Hr,keyframes:X,createTheme:Br}=q$1({theme:ot,media:Z}),at=d("div",{display:"flex",flexDirection:"column",alignItems:"center"}),it=d("p",{fontWeight:"bold",fontSize:"x-large"}),lt=d("span",{fontSize:"medium"}),st=({error:_r})=>{const{message:Tr}=_r;return React$1.createElement(at,{role:"alert"},React$1.createElement(it,{"data-testid":"headline"},"Something went wrong"),Tr&&React$1.createElement(lt,null,`Error message: ${Tr}`," "))},be=d("div",{position:"relative",zIndex:"0"}),ye=d("div",{display:"flex",flexDirection:"row",overflow:"hidden","@sm":{flexDirection:"column"}}),Ee=d("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),we=d($409067139f391064$export$41fb9f06171c75f4,{display:"none",border:"none",padding:"0",transition:"$all",opacity:"1",background:"#6663",margin:"1rem 0",borderRadius:"6px","&[data-information-panel='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{display:"flex",flexGrow:"1",fontSize:"0.8333em",justifyContent:"center",padding:"0.5rem",fontFamily:"inherit"}}}),Ce=d($409067139f391064$export$7c6e2c02157bb7d2,{width:"100%",display:"flex"}),ct=d("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}}),dt=d("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased","> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start","@sm":{[`& ${ye}`]:{flexGrow:"1"},[`& ${Ee}`]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-information-panel-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",[`& ${be}`]:{display:"none"},[`& ${we}`]:{margin:"1rem"},[`& ${Ce}`]:{height:"100%"}}}}),mt=d($69cb30bb0017df05$export$be92b6f5f03c0fe9,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}}),ut=d($69cb30bb0017df05$export$54c2e3dc7acea9f5,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid #6663","@sm":{margin:"0 1rem"}}),ee=d($69cb30bb0017df05$export$41fb9f06171c75f4,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",fontFamily:"inherit",border:"none",opacity:"0.7",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:400,transition:"$all","&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{opacity:"1",fontWeight:700,"&::after":{width:"100%",backgroundColor:"$accent"}}}),te=d($69cb30bb0017df05$export$7c6e2c02157bb7d2,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1.618rem 0"}}),pt=d("div",{position:"relative",height:"100%",width:"100%",overflowY:"scroll"}),gt=d("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),ft=d("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),Se=(_r,Tr="none")=>{if(!_r)return null;if(typeof _r=="string")return[_r];if(!_r[Tr]){const Rr=Object.getOwnPropertyNames(_r);if(Rr.length>0)return _r[Rr[0]]}return!_r[Tr]||!Array.isArray(_r[Tr])?null:_r[Tr]},M=(_r,Tr="none",Rr=", ")=>{const Ar=Se(_r,Tr);return Array.isArray(Ar)?Ar.join(`${Rr}`):Ar};function ht(_r){return{__html:xt(_r)}}function A(_r,Tr){const Rr=Object.keys(_r).filter(Pr=>Tr.includes(Pr)?null:Pr);let Ar=new Object;return Rr.forEach(Pr=>{Ar[Pr]=_r[Pr]}),Ar}function xt(_r){return Ye(_r,{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})}const vt=d("span",{}),z=_r=>{const{as:Tr,label:Rr}=_r;let Ar=A(_r,["as","label"]);return React$1.createElement(vt,{as:Tr,...Ar},M(Rr,Ar.lang))},bt=(_r,Tr="200,",Rr="full")=>{Array.isArray(_r)&&(_r=_r[0]);const{id:Ar,service:Pr}=_r;let Lr;if(!Pr)return Ar;if(Array.isArray(_r.service)&&_r.service.length>0&&(Lr=Pr[0]),Lr){if(Lr["@id"])return`${Lr["@id"]}/${Rr}/${Tr}/0/default.jpg`;if(Lr.id)return`${Lr.id}/${Rr}/${Tr}/0/default.jpg`}},ne=d("img",{objectFit:"cover"}),yt=_r=>{const Tr=reactExports.useRef(null),{contentResource:Rr,altAsLabel:Ar,region:Pr="full"}=_r;let Lr;Ar&&(Lr=M(Ar));const Mr=A(_r,["contentResource","altAsLabel"]),{type:Fr,id:zr,width:Ur=200,height:Vr=200,format:Nr,duration:Dr}=Rr;reactExports.useEffect(()=>{if(!zr&&!Tr.current||["Image"].includes(Fr)||!zr.includes("m3u8"))return;const Gr=new Hls;return Tr.current&&(Gr.attachMedia(Tr.current),Gr.on(Hls.Events.MEDIA_ATTACHED,function(){Gr.loadSource(zr)})),Gr.on(Hls.Events.ERROR,function(Wr,qr){if(qr.fatal)switch(qr.type){case Hls.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${Wr} network error encountered, try to recover`),Gr.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${Wr} media error encountered, try to recover`),Gr.recoverMediaError();break;default:Gr.destroy();break}}),()=>{Gr&&(Gr.detachMedia(),Gr.destroy())}},[]),reactExports.useEffect(()=>jr(),[]);const jr=()=>{if(!Tr.current)return;let Gr=0,Wr=30;if(Dr&&(Wr=Dr),!zr.split("#t=")&&Dr&&(Gr=Dr*.1),zr.split("#t=").pop()){const Kr=zr.split("#t=").pop();Kr&&(Gr=parseInt(Kr.split(",")[0]))}const qr=Tr.current;qr.autoplay=!0,qr.currentTime=Gr,setTimeout(()=>jr(),Wr*1e3)};switch(Fr){case"Image":const Gr=bt(Rr,`${Ur},${Vr}`,Pr);return React$1.createElement(ne,{as:"img",alt:Lr,css:{width:Ur,height:Vr},key:zr,src:Gr,...Mr});case"Video":return React$1.createElement(ne,{as:"video",css:{width:Ur,height:Vr},disablePictureInPicture:!0,key:zr,loop:!0,muted:!0,onPause:jr,ref:Tr,src:zr});default:return console.warn(`Resource type: ${Fr} is not valid or not yet supported in Primitives.`),React$1.createElement(React$1.Fragment,null)}},Et=d("a",{}),wt=_r=>{const{children:Tr,homepage:Rr}=_r,Ar=A(_r,["children","homepage"]);return React$1.createElement(React$1.Fragment,null,Rr&&Rr.map(Pr=>{const Lr=M(Pr.label,Ar.lang);return React$1.createElement(Et,{"aria-label":Tr?Lr:void 0,href:Pr.id,key:Pr.id,...Ar},Tr||Lr)}))},Ct={delimiter:", "},Y=reactExports.createContext(void 0),ke=()=>{const _r=reactExports.useContext(Y);if(_r===void 0)throw new Error("usePrimitivesContext must be used with a PrimitivesProvider");return _r},K=({children:_r,initialState:Tr=Ct})=>{const Rr=St(Tr,"delimiter");return React$1.createElement(Y.Provider,{value:{delimiter:Rr}},_r)},St=(_r,Tr)=>Object.hasOwn(_r,Tr)?_r[Tr].toString():void 0,kt=d("span",{}),re=_r=>{const{as:Tr,markup:Rr}=_r,{delimiter:Ar}=ke();if(!Rr)return React$1.createElement(React$1.Fragment,null);let Pr=A(_r,["as","markup"]);const Lr=ht(M(Rr,Pr.lang,Ar));return React$1.createElement(kt,{as:Tr,...Pr,dangerouslySetInnerHTML:Lr})},Ie=_r=>React$1.useContext(Y)?React$1.createElement(re,{..._r}):React$1.createElement(K,null,React$1.createElement(re,{..._r})),It=({as:_r="dd",lang:Tr,value:Rr})=>React$1.createElement(Ie,{markup:Rr,as:_r,lang:Tr}),$t=d("span",{}),Tt=({as:_r="dd",customValueContent:Tr,lang:Rr,value:Ar})=>{var Pr;const{delimiter:Lr}=ke(),Mr=(Pr=Se(Ar,Rr))==null?void 0:Pr.map(Fr=>reactExports.cloneElement(Tr,{value:Fr}));return React$1.createElement($t,{as:_r,lang:Rr},Mr==null?void 0:Mr.map((Fr,zr)=>[zr>0&&`${Lr}`,React$1.createElement(reactExports.Fragment,{key:zr},Fr)]))},$e=_r=>{var Tr;const{item:Rr,lang:Ar,customValueContent:Pr}=_r,{label:Lr,value:Mr}=Rr,Fr=(Tr=M(Lr))==null?void 0:Tr.replace(" ","-").toLowerCase();return React$1.createElement("div",{role:"group","data-label":Fr},React$1.createElement(z,{as:"dt",label:Lr,lang:Ar}),Pr?React$1.createElement(Tt,{as:"dd",customValueContent:Pr,value:Mr,lang:Ar}):React$1.createElement(It,{as:"dd",value:Mr,lang:Ar}))};function At(_r,Tr){const Rr=Tr.filter(Ar=>{const{matchingLabel:Pr}=Ar,Lr=Object.keys(Ar.matchingLabel)[0],Mr=M(Pr,Lr);if(M(_r,Lr)===Mr)return!0}).map(Ar=>Ar.Content);if(Array.isArray(Rr))return Rr[0]}const Mt=d("dl",{}),Rt=_r=>{const{as:Tr,customValueContent:Rr,metadata:Ar}=_r;if(!Array.isArray(Ar))return React$1.createElement(React$1.Fragment,null);const Pr=fe(_r,"customValueDelimiter");let Lr=A(_r,["as","customValueContent","customValueDelimiter","metadata"]);return React$1.createElement(K,{...typeof Pr=="string"?{initialState:{delimiter:Pr}}:void 0},Ar.length>0&&React$1.createElement(Mt,{as:Tr,...Lr},Ar.map((Mr,Fr)=>{const zr=Rr?At(Mr.label,Rr):void 0;return React$1.createElement($e,{customValueContent:zr,item:Mr,key:Fr,lang:Lr==null?void 0:Lr.lang})})))};d("li",{});d("ul",{});const zt=d("dl",{}),Lt=_r=>{const{as:Tr,requiredStatement:Rr}=_r;if(!Rr)return React$1.createElement(React$1.Fragment,null);const Ar=fe(_r,"customValueDelimiter");let Pr=A(_r,["as","customValueDelimiter","requiredStatement"]);return React$1.createElement(K,{...typeof Ar=="string"?{initialState:{delimiter:Ar}}:void 0},React$1.createElement(zt,{as:Tr,...Pr},React$1.createElement($e,{item:Rr,lang:Pr.lang})))},Ft=d("li",{}),Pt=d("ul",{}),Vt=_r=>{const{as:Tr,seeAlso:Rr}=_r,Ar=A(_r,["as","seeAlso"]);return React$1.createElement(Pt,{as:Tr},Rr&&Rr.map(Pr=>{const Lr=M(Pr.label,Ar.lang);return React$1.createElement(Ft,{key:Pr.id},React$1.createElement("a",{href:Pr.id,...Ar},Lr||Pr.id))}))},Ht=_r=>{const{as:Tr,summary:Rr}=_r;let Ar=A(_r,["as","customValueDelimiter","summary"]);return React$1.createElement(Ie,{as:Tr,markup:Rr,...Ar})},Te=_r=>{const{thumbnail:Tr,region:Rr}=_r,Ar=A(_r,["thumbnail"]);return React$1.createElement(React$1.Fragment,null,Tr&&Tr.map(Pr=>React$1.createElement(yt,{contentResource:Pr,key:Pr.id,region:Rr,...Ar})))},Bt=({homepage:_r})=>(_r==null?void 0:_r.length)===0?React$1.createElement(React$1.Fragment,null):React$1.createElement(React$1.Fragment,null,React$1.createElement("span",{className:"manifest-property-title"},"Homepage"),React$1.createElement(wt,{homepage:_r})),Ot=({id:_r,htmlLabel:Tr,parent:Rr="manifest"})=>React$1.createElement(React$1.Fragment,null,React$1.createElement("span",{className:"manifest-property-title"},Tr),React$1.createElement("a",{href:_r,target:"_blank",id:`iiif-${Rr}-id`},_r)),Dt=({metadata:_r,parent:Tr="manifest"})=>_r?React$1.createElement(React$1.Fragment,null,React$1.createElement(Rt,{metadata:_r,id:`iiif-${Tr}-metadata`})):React$1.createElement(React$1.Fragment,null),Wt=({requiredStatement:_r,parent:Tr="manifest"})=>_r?React$1.createElement(React$1.Fragment,null,React$1.createElement(Lt,{requiredStatement:_r,id:`iiif-${Tr}-required-statement`})):React$1.createElement(React$1.Fragment,null),jt=({rights:_r})=>_r?React$1.createElement(React$1.Fragment,null,React$1.createElement("span",{className:"manifest-property-title"},"Rights"),React$1.createElement("a",{href:_r,target:"_blank"},_r)):React$1.createElement(React$1.Fragment,null),Nt=({seeAlso:_r})=>(_r==null?void 0:_r.length)===0?React$1.createElement(React$1.Fragment,null):React$1.createElement(React$1.Fragment,null,React$1.createElement("span",{className:"manifest-property-title"},"See Also"),React$1.createElement(Vt,{seeAlso:_r})),Gt=({summary:_r,parent:Tr="manifest"})=>_r?React$1.createElement(React$1.Fragment,null,React$1.createElement(Ht,{summary:_r,as:"p",id:`iiif-${Tr}-summary`})):React$1.createElement(React$1.Fragment,null),qt=({label:_r,thumbnail:Tr})=>(Tr==null?void 0:Tr.length)===0?React$1.createElement(React$1.Fragment,null):React$1.createElement(React$1.Fragment,null,React$1.createElement(Te,{altAsLabel:_r||{none:["resource"]},thumbnail:Tr,style:{backgroundColor:"#6663",objectFit:"cover"}})),Ut=()=>{const _r=k(),{activeManifest:Tr,vault:Rr}=_r,[Ar,Pr]=reactExports.useState(),[Lr,Mr]=reactExports.useState([]),[Fr,zr]=reactExports.useState([]),[Ur,Vr]=reactExports.useState([]);return reactExports.useEffect(()=>{var Nr,Dr,jr;const Gr=Rr.get(Tr);Pr(Gr),((Nr=Gr.homepage)==null?void 0:Nr.length)>0&&Mr(Rr.get(Gr.homepage)),((Dr=Gr.seeAlso)==null?void 0:Dr.length)>0&&zr(Rr.get(Gr.seeAlso)),((jr=Gr.thumbnail)==null?void 0:jr.length)>0&&Vr(Rr.get(Gr.thumbnail))},[Tr,Rr]),Ar?React$1.createElement(ft,null,React$1.createElement(gt,null,React$1.createElement(qt,{thumbnail:Ur,label:Ar.label}),React$1.createElement(Gt,{summary:Ar.summary}),React$1.createElement(Dt,{metadata:Ar.metadata}),React$1.createElement(Wt,{requiredStatement:Ar.requiredStatement}),React$1.createElement(jt,{rights:Ar.rights}),React$1.createElement(Bt,{homepage:Lr}),React$1.createElement(Nt,{seeAlso:Fr}),React$1.createElement(Ot,{id:Ar.id,htmlLabel:"IIIF Manifest"}))):React$1.createElement(React$1.Fragment,null)},_t=()=>{function _r(Pr){return Pr.map(Lr=>{const Mr=Lr.identifier||v4();return{...Lr,identifier:Mr}})}function Tr(Pr){var Lr;const Mr=[],Fr=[],zr=_r(Pr);for(const Ur of zr){for(;Fr.length>0&&Fr[Fr.length-1].end<=Ur.start;)Fr.pop();Fr.length>0?(Fr[Fr.length-1].children||(Fr[Fr.length-1].children=[]),(Lr=Fr[Fr.length-1].children)==null||Lr.push(Ur),Fr.push(Ur)):(Mr.push(Ur),Fr.push(Ur))}return Mr}function Rr(Pr,Lr=[]){return Lr.some(Mr=>Pr.start>=Mr.start&&Pr.end<=Mr.end)}function Ar(Pr=[]){return Pr.sort((Lr,Mr)=>Lr.start-Mr.start)}return{addIdentifiersToParsedCues:_r,createNestedCues:Tr,isChild:Rr,orderCuesByTime:Ar}},oe=X({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}}),Zt=d($f99a8c78507165f7$export$be92b6f5f03c0fe9,{display:"flex",flexDirection:"column",width:"100%"}),Ae=d($f99a8c78507165f7$export$6d08773d2e66f8f2,{position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"inherit",border:"none",background:"none","@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{backgroundColor:"#6663","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:oe,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:oe,boxSizing:"content-box","@sm":{content:"unset"}}}}),Xt=({label:_r,start:Tr,end:Rr})=>{const[Ar,Pr]=reactExports.useState(!1),Lr=document.getElementById("clover-iiif-video");reactExports.useEffect(()=>(Lr==null||Lr.addEventListener("timeupdate",()=>{const{currentTime:Fr}=Lr;Pr(Tr<=Fr&&Fr<Rr)}),()=>document.removeEventListener("timeupdate",()=>{})),[Lr]);const Mr=()=>{Lr&&(Lr.pause(),Lr.currentTime=Tr,Lr.play())};return React$1.createElement(Ae,{"aria-checked":Ar,"data-testid":"information-panel-cue",onClick:Mr,value:_r},_r,React$1.createElement("strong",null,pe(Tr)))},Yt=d("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{[`& ${Ae}`]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}}),Me=({items:_r})=>React$1.createElement(Yt,null,_r.map(Tr=>{const{text:Rr,start:Ar,end:Pr,children:Lr,identifier:Mr}=Tr;return React$1.createElement("li",{key:Mr},React$1.createElement(Xt,{label:Rr,start:Ar,end:Pr}),Lr&&React$1.createElement(Me,{items:Lr}))})),Kt=({resource:_r})=>{const[Tr,Rr]=React$1.useState([]),{id:Ar,label:Pr}=_r,{createNestedCues:Lr,orderCuesByTime:Mr}=_t();return reactExports.useEffect(()=>{Ar&&fetch(Ar,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(Fr=>Fr.text()).then(Fr=>{const zr=nodeWebvtt.parse(Fr).cues,Ur=Mr(zr),Vr=Lr(Ur);Rr(Vr)}).catch(Fr=>console.error(Ar,Fr.toString()))},[Ar]),React$1.createElement(Zt,{"aria-label":`navigate ${P(Pr,"en")}`},React$1.createElement(Me,{items:Tr}))},Jt=({activeCanvas:_r,resources:Tr})=>{const Rr=k(),{configOptions:Ar}=Rr,{informationPanel:Pr}=Ar,[Lr,Mr]=reactExports.useState(),Fr=(Pr==null?void 0:Pr.renderAbout)||(Ar==null?void 0:Ar.renderAbout),zr=Pr==null?void 0:Pr.renderSupplementing;reactExports.useEffect(()=>{Fr?Mr("manifest-about"):Tr&&(Tr==null?void 0:Tr.length)>0&&!Fr&&Mr(Tr[0].id)},[_r,Tr]);const Ur=Vr=>{Mr(Vr)};return Tr?React$1.createElement(mt,{"data-testid":"information-panel",defaultValue:Lr,onValueChange:Ur,orientation:"horizontal",value:Lr},React$1.createElement(ut,{"aria-label":"select chapter","data-testid":"information-panel-list"},Fr&&React$1.createElement(ee,{value:"manifest-about"},"About"),zr&&Tr&&Tr.map(({id:Vr,label:Nr})=>React$1.createElement(ee,{key:Vr,value:Vr},React$1.createElement(z,{label:Nr})))),React$1.createElement(pt,null,Fr&&React$1.createElement(te,{value:"manifest-about"},React$1.createElement(Ut,null)),zr&&Tr&&Tr.map(Vr=>React$1.createElement(te,{key:Vr.id,value:Vr.id},React$1.createElement(Kt,{resource:Vr}))))):React$1.createElement(React$1.Fragment,null)},Qt=d($f99a8c78507165f7$export$be92b6f5f03c0fe9,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"}),en=()=>React$1.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),tn=()=>React$1.createElement(React$1.Fragment,null,React$1.createElement("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),React$1.createElement("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),React$1.createElement("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})),nn=()=>React$1.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),rn=()=>React$1.createElement("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),on=()=>React$1.createElement("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"}),Re=d("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),an=({children:_r})=>React$1.createElement("title",null,_r),S=_r=>React$1.createElement(Re,{..._r,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},_r.children);S.Title=an;S.Add=en;S.Audio=tn;S.Close=nn;S.Image=rn;S.Video=on;const ln=X({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),sn=X({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),ze=d($cb5cc270b50c6fcd$export$21b07c8f274aebd5,{fill:"$secondaryAlt"}),cn=d($cb5cc270b50c6fcd$export$f39c2d165cd861fe,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),dn=d($cb5cc270b50c6fcd$export$7c6e2c02157bb7d2,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:sn},'&[data-side="bottom"]':{animationName:ln},'&[data-align="end"]':{[`& ${ze}`]:{margin:"0 0.7rem"}}}),mn=d($cb5cc270b50c6fcd$export$41fb9f06171c75f4,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),un=d($cb5cc270b50c6fcd$export$be92b6f5f03c0fe9,{boxSizing:"content-box"}),pn=_r=>React$1.createElement(mn,{..._r},_r.children),gn=_r=>React$1.createElement(dn,{..._r},React$1.createElement(ze,null),React$1.createElement(cn,null,React$1.createElement(S,{isSmall:!0},React$1.createElement(S.Close,null))),_r.children),V=({children:_r})=>React$1.createElement(un,null,_r);V.Trigger=pn;V.Content=gn;const q=d("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},[`${Re}`]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),U=d("span",{display:"flex"}),fn=d("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),hn=d("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),xn=d($f99a8c78507165f7$export$6d08773d2e66f8f2,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},[`& ${U}`]:{position:"absolute",right:"0",bottom:"0",[`& ${q}`]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},[`& ${U}`]:{[`& ${q}`]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700"}}}),vn=({type:_r})=>{switch(_r){case"Sound":return React$1.createElement(S.Audio,null);case"Image":return React$1.createElement(S.Image,null);case"Video":return React$1.createElement(S.Video,null);default:return React$1.createElement(S.Image,null)}},bn=({canvas:_r,canvasIndex:Tr,isActive:Rr,thumbnail:Ar,type:Pr,handleChange:Lr})=>React$1.createElement(xn,{"aria-checked":Rr,"data-testid":"media-thumbnail","data-canvas":Tr,onClick:()=>Lr(_r.id),value:_r.id},React$1.createElement("figure",null,React$1.createElement("div",null,(Ar==null?void 0:Ar.id)&&React$1.createElement("img",{src:Ar.id,alt:_r!=null&&_r.label?P(_r.label):""}),React$1.createElement(U,null,React$1.createElement(q,{isIcon:!0,"data-testid":"thumbnail-tag"},React$1.createElement(fn,null),React$1.createElement(S,{"aria-label":Pr},React$1.createElement(vn,{type:Pr})),["Video","Sound"].includes(Pr)&&React$1.createElement(hn,null,pe(_r.duration))))),(_r==null?void 0:_r.label)&&React$1.createElement("figcaption",{"data-testid":"fig-caption"},React$1.createElement(z,{label:_r.label})))),yn=_r=>_r.body?_r.body.type:"Image",Le=d("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),En=d("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}}),N=d("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),wn=d("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}}),Cn=d("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",[`& ${Le}`]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}}),Sn=(_r,Tr)=>{reactExports.useEffect(()=>{function Rr(Ar){Ar.key===_r&&Tr()}return window.addEventListener("keyup",Rr),()=>window.removeEventListener("keyup",Rr)},[])},kn=()=>React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},React$1.createElement("title",null,"Arrow Back"),React$1.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),In=()=>React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},React$1.createElement("title",null,"Arrow Forward"),React$1.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),$n=()=>React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},React$1.createElement("title",null,"Close"),React$1.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),Tn=()=>React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},React$1.createElement("title",null,"Search"),React$1.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),An=({handleCanvasToggle:_r,handleFilter:Tr,activeIndex:Rr,canvasLength:Ar})=>{const[Pr,Lr]=reactExports.useState(!1),[Mr,Fr]=reactExports.useState(!1),[zr,Ur]=reactExports.useState(!1);reactExports.useEffect(()=>{Ur(Rr===0),Rr===Ar-1?Fr(!0):Fr(!1)},[Rr]),Sn("Escape",()=>{Lr(!1),Tr("")});const Vr=()=>{Lr(Dr=>!Dr),Tr("")},Nr=Dr=>Tr(Dr.target.value);return React$1.createElement(Cn,{isToggle:Pr},React$1.createElement(Le,null,Pr&&React$1.createElement(En,{autoFocus:!0,onChange:Nr,placeholder:"Search"}),!Pr&&React$1.createElement(wn,null,React$1.createElement(N,{onClick:()=>_r(-1),disabled:zr,type:"button"},React$1.createElement(kn,null)),React$1.createElement("span",null,Rr+1," of ",Ar),React$1.createElement(N,{onClick:()=>_r(1),disabled:Mr,type:"button"},React$1.createElement(In,null))),React$1.createElement(N,{onClick:Vr,type:"button"},Pr?React$1.createElement($n,null):React$1.createElement(Tn,null))))},Mn=({items:_r})=>{const Tr=F(),Rr=k(),{activeCanvas:Ar,vault:Pr}=Rr,[Lr,Mr]=reactExports.useState(""),[Fr,zr]=reactExports.useState([]),[Ur,Vr]=reactExports.useState(0),Nr=React$1.useRef(null),Dr="painting",jr=["Image","Sound","Video"],Gr=Kr=>{Ar!==Kr&&Tr({type:"updateActiveCanvas",canvasId:Kr})};reactExports.useEffect(()=>{if(!Fr.length){const Kr=_r.map(Xr=>ve(Pr,Xr,Dr,jr)).filter(Xr=>Xr.annotations.length>0);zr(Kr)}},[]),reactExports.useEffect(()=>{Fr.forEach((Kr,Xr)=>{Kr!=null&&Kr.canvas&&Kr.canvas.id===Ar&&Vr(Xr)})},[Ar]),reactExports.useEffect(()=>{const Kr=document.querySelector(`[data-canvas="${Ur}"]`);if(Kr instanceof HTMLElement&&Nr.current){const Xr=Kr.offsetLeft-Nr.current.offsetWidth/2+Kr.offsetWidth/2;Nr.current.scrollTo({left:Xr,behavior:"smooth"})}},[Ur]);const Wr=Kr=>Mr(Kr),qr=Kr=>{const Xr=Fr[Ur+Kr];Xr!=null&&Xr.canvas&&Gr(Xr.canvas.id)};return React$1.createElement(React$1.Fragment,null,React$1.createElement(An,{handleFilter:Wr,handleCanvasToggle:qr,activeIndex:Ur,canvasLength:Fr.length}),React$1.createElement(Qt,{"aria-label":"select item","data-testid":"media",ref:Nr},Fr.filter(Kr=>{var Xr;if((Xr=Kr.canvas)!=null&&Xr.label){const Zr=P(Kr.canvas.label);if(Array.isArray(Zr))return Zr[0].toLowerCase().includes(Lr.toLowerCase())}}).map((Kr,Xr)=>{var Zr,Jr;return React$1.createElement(bn,{canvas:Kr.canvas,canvasIndex:Xr,handleChange:Gr,isActive:Ar===((Zr=Kr==null?void 0:Kr.canvas)==null?void 0:Zr.id),key:(Jr=Kr==null?void 0:Kr.canvas)==null?void 0:Jr.id,thumbnail:rt(Pr,Kr,200,200),type:yn(Kr.annotations[0])})})))},Rn=d("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),zn=d("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),Ln=d("div",{width:"100%",height:"61.8vh",maxHeight:"100vh",background:"black",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"}),Fe=d("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",backgroundColor:"$primary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&#rotateRight":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#rotateLeft":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#reset":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),R=({id:_r,label:Tr,children:Rr})=>React$1.createElement(Fe,{id:_r,"data-testid":"openseadragon-button"},React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${_r}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},React$1.createElement("title",{id:`${_r}-svg-title`},Tr),Rr)),Fn=d("div",{position:"absolute",zIndex:"1",top:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),Pn=()=>React$1.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),Vn=()=>React$1.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),Hn=()=>React$1.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),Bn=()=>React$1.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),ae=()=>React$1.createElement(React$1.Fragment,null,React$1.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),React$1.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),On=({hasPlaceholder:_r,options:Tr})=>React$1.createElement(Fn,{"data-testid":"openseadragon-controls",hasPlaceholder:_r,id:"openseadragon-controls"},Tr.showZoomControl&&React$1.createElement(React$1.Fragment,null,React$1.createElement(R,{id:"zoomIn",label:"zoom in"},React$1.createElement(Pn,null)),React$1.createElement(R,{id:"zoomOut",label:"zoom out"},React$1.createElement(Vn,null))),Tr.showFullPageControl&&React$1.createElement(R,{id:"fullPage",label:"full page"},React$1.createElement(Hn,null)),Tr.showRotationControl&&React$1.createElement(React$1.Fragment,null,React$1.createElement(R,{id:"rotateRight",label:"rotate right"},React$1.createElement(ae,null)),React$1.createElement(R,{id:"rotateLeft",label:"rotate left"},React$1.createElement(ae,null))),Tr.showHomeControl&&React$1.createElement(R,{id:"reset",label:"reset"},React$1.createElement(Bn,null))),Dn=_r=>fetch(`${_r.replace(/\/$/,"")}/info.json`).then(Tr=>Tr.json()).then(Tr=>Tr).catch(Tr=>{console.error(`The IIIF tilesource ${_r.replace(/\/$/,"")}/info.json failed to load: ${Tr}`)}),Wn=_r=>{let Tr,Rr;if(Array.isArray(_r)&&(Tr=_r[0],Tr)){let Ar;"@id"in Tr?Ar=Tr["@id"]:Ar=Tr.id,Rr=Ar}return Rr},jn=({uri:_r,imageType:Tr,hasPlaceholder:Rr})=>{const[Ar,Pr]=reactExports.useState(),Lr=k(),{configOptions:Mr}=Lr,Fr=v4(),zr={id:`openseadragon-viewport-${Fr}`,loadTilesWithAjax:!0,fullPageButton:"fullPage",homeButton:"reset",rotateLeftButton:"rotateLeft",rotateRightButton:"rotateRight",zoomInButton:"zoomIn",zoomOutButton:"zoomOut",showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",navigatorId:`openseadragon-navigator-${Fr}`,gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!0},...Mr.openSeadragon,ajaxWithCredentials:Mr.withCredentials};return reactExports.useEffect(()=>{_r!==Ar&&Pr(_r)},[]),reactExports.useEffect(()=>{if(Ar)switch(Tr){case"simpleImage":Q(zr).addSimpleImage({url:Ar});break;case"tiledImage":Dn(Ar).then(Ur=>Q(zr).addTiledImage({tileSource:Ur}));break;default:console.warn(`Unable to render ${Ar} in OpenSeadragon as type: "${Tr}"`);break}},[Ar]),React$1.createElement(Ln,{css:{backgroundColor:Mr.canvasBackgroundColor,height:Mr.canvasHeight}},React$1.createElement(On,{options:zr,hasPlaceholder:Rr}),React$1.createElement(Rn,{id:`openseadragon-navigator-${Fr}`}),React$1.createElement(zn,{id:`openseadragon-viewport-${Fr}`}))},Nn=({body:_r,hasPlaceholder:Tr})=>{const[Rr,Ar]=reactExports.useState(),[Pr,Lr]=reactExports.useState();return reactExports.useEffect(()=>{Array.isArray(_r.service)&&_r.service.length>0?(Ar("tiledImage"),Lr(Wn(_r.service))):(Ar("simpleImage"),Lr(_r.id))},[_r]),React$1.createElement(jn,{uri:Pr,key:Pr,imageType:Rr,hasPlaceholder:Tr})},Pe=d("button",{background:"none",border:"none",cursor:"zoom-in",width:"100%",height:"100%",margin:"0",padding:"0",display:"flex",transition:"$all","& img":{width:"100%",height:"100%",objectFit:"contain",color:"transparent",transition:"$all"},variants:{isMedia:{true:{cursor:"pointer"}}}}),Gn=({isMedia:_r,label:Tr,placeholderCanvas:Rr,setIsInteractive:Ar})=>{const{vault:Pr}=k(),Lr=B(Pr,Rr),Mr=Tr?P(Tr):["placeholder image"];return React$1.createElement(Pe,{onClick:()=>Ar(!0),isMedia:_r},React$1.createElement("img",{src:(Lr==null?void 0:Lr.id)||"",alt:Mr.join(),height:Lr==null?void 0:Lr.height,width:Lr==null?void 0:Lr.width}))},Ve=d(Fe,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]}),qn=d("div",{position:"relative",zIndex:"0","&:hover":{[`${Ve}`]:{backgroundColor:"$accent"},[`${Pe}`]:{backgroundColor:"#6662",img:{filter:"brightness(0.85)"}}}}),Un=d("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",maxHeight:"500px",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}}),_n=d("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"}),Zn=React$1.forwardRef((_r,Tr)=>{const Rr=React$1.useRef(null);React$1.useEffect(()=>{Tr&&(Tr.current.onplay=Ar)},[Tr]);function Ar(){const Lr=Tr.current,Mr=new AudioContext,Fr=Mr.createMediaElementSource(Lr);let zr=Mr.createAnalyser();const Ur=Rr.current;if(!Ur)return;Ur.width=Lr.offsetWidth,Ur.height=Lr.offsetHeight;const Vr=Ur.getContext("2d");Fr.connect(zr),zr.connect(Mr.destination),zr.fftSize=256;const Nr=zr.frequencyBinCount,Dr=new Uint8Array(Nr);setInterval(function(){Pr(zr,Vr,Nr,Dr,Ur.width,Ur.height)},20)}function Pr(Lr,Mr,Fr,zr,Ur,Vr){let Nr=Ur/Fr*2.6,Dr,jr=0;Lr.getByteFrequencyData(zr),Mr.fillStyle="#000000",Mr.fillRect(0,0,Ur,Vr);for(let Gr=0;Gr<Fr;Gr++)Dr=zr[Gr]*2,Mr.fillStyle="rgba(78, 42, 132, 1)",Mr.fillRect(jr,Vr-Dr,Nr,Dr),jr+=Nr+6}return React$1.createElement(_n,{ref:Rr})}),Xn=({resource:_r,ignoreCaptionLabels:Tr})=>{const Rr=P(_r.label,"en");return Rr.some(Ar=>Tr.includes(Ar))?null:React$1.createElement("track",{key:_r.id,src:_r.id,label:Rr,srcLang:"en","data-testid":"player-track"})},Yn=({resources:_r,painting:Tr})=>{var Rr;const[Ar,Pr]=React$1.useState(0),[Lr,Mr]=React$1.useState(),Fr=React$1.useRef(null),zr=(Rr=Tr==null?void 0:Tr.format)==null?void 0:Rr.includes("audio/"),Ur=k(),{activeCanvas:Vr,configOptions:Nr,vault:Dr}=Ur;return reactExports.useEffect(()=>{if(!Tr.id||!Fr.current||Tr.id.split(".").pop()!=="m3u8")return;const jr={xhrSetup:function(Wr,qr){Wr.withCredentials=Nr.withCredentials}},Gr=new Hls(jr);return Gr.attachMedia(Fr.current),Gr.on(Hls.Events.MEDIA_ATTACHED,function(){Gr.loadSource(Tr.id)}),Gr.on(Hls.Events.ERROR,function(Wr,qr){if(qr.fatal)switch(qr.type){case Hls.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${Wr} network error encountered, try to recover`),Gr.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${Wr} media error encountered, try to recover`),Gr.recoverMediaError();break;default:Gr.destroy();break}}),()=>{if(Gr&&Fr.current){const Wr=Fr.current;Gr.detachMedia(),Gr.destroy(),Wr.currentTime=0}}},[Tr.id]),reactExports.useEffect(()=>{var jr,Gr,Wr,qr;const Kr=Dr.get(Vr),Xr=(jr=Kr.accompanyingCanvas)!=null&&jr.id?B(Dr,(Gr=Kr.accompanyingCanvas)==null?void 0:Gr.id):null,Zr=(Wr=Kr.placeholderCanvas)!=null&&Wr.id?B(Dr,(qr=Kr.placeholderCanvas)==null?void 0:qr.id):null;Xr&&Zr?Mr(Ar===0?Zr.id:Xr.id):(Xr&&Mr(Xr.id),Zr&&Mr(Zr.id))},[Vr,Ar]),reactExports.useEffect(()=>{if(Fr!=null&&Fr.current){const jr=Fr.current;return jr==null||jr.addEventListener("timeupdate",()=>Pr(jr.currentTime)),()=>document.removeEventListener("timeupdate",()=>{})}},[Fr==null?void 0:Fr.current]),React$1.createElement(Un,{css:{backgroundColor:Nr.canvasBackgroundColor,maxHeight:Nr.canvasHeight}},React$1.createElement("video",{id:"clover-iiif-video",key:Tr.id,ref:Fr,controls:!0,height:Tr.height,width:Tr.width,crossOrigin:"anonymous",poster:Lr,style:{maxHeight:Nr.canvasHeight}},React$1.createElement("source",{src:Tr.id,type:Tr.format}),_r.length>0&&_r.map(jr=>React$1.createElement(Xn,{resource:jr,ignoreCaptionLabels:Nr.ignoreCaptionLabels,key:jr.id})),"Sorry, your browser doesn't support embedded videos."),zr&&React$1.createElement(Zn,{ref:Fr}))},Kn=()=>React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},React$1.createElement("title",{id:"close-svg-title"},"close"),React$1.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),Jn=({isMedia:_r})=>React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"open-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},React$1.createElement("title",{id:"open-svg-title"},"open"),_r?React$1.createElement("path",{d:"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z"}):React$1.createElement(React$1.Fragment,null,React$1.createElement("path",{d:"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z"}),React$1.createElement("path",{d:"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z"}))),Qn=({handleToggle:_r,isInteractive:Tr,isMedia:Rr})=>React$1.createElement(Ve,{onClick:_r,isInteractive:Tr,isMedia:Rr},Tr?React$1.createElement(Kn,null):React$1.createElement(Jn,{isMedia:Rr})),er=({activeCanvas:_r,isMedia:Tr,painting:Rr,resources:Ar})=>{var Pr;const[Lr,Mr]=React$1.useState(!1),{configOptions:Fr,vault:zr}=k(),Ur=zr.get(_r),Vr=(Pr=Ur==null?void 0:Ur.placeholderCanvas)==null?void 0:Pr.id,Nr=!!Vr,Dr=Vr&&!Lr&&!Tr,jr=()=>Mr(!Lr);return React$1.createElement(qn,{css:{maxHeight:Fr.canvasHeight,backgroundColor:Fr.canvasBackgroundColor}},Vr&&!Tr&&React$1.createElement(Qn,{handleToggle:jr,isInteractive:Lr,isMedia:Tr}),Dr&&!Tr&&React$1.createElement(Gn,{isMedia:Tr,label:Ur==null?void 0:Ur.label,placeholderCanvas:Vr,setIsInteractive:Mr}),!Dr&&React$1.createElement("div",null,Tr?React$1.createElement(Yn,{painting:Rr,resources:Ar}):Rr&&React$1.createElement(Nn,{body:Rr,hasPlaceholder:Nr,key:_r})))},tr=({activeCanvas:_r,painting:Tr,resources:Rr,items:Ar,isAudioVideo:Pr})=>{const{informationOpen:Lr,configOptions:Mr}=k(),{informationPanel:Fr}=Mr,zr=(Fr==null?void 0:Fr.renderAbout)||(Fr==null?void 0:Fr.renderSupplementing)&&Rr.length>0;return React$1.createElement(ye,{className:"clover-content"},React$1.createElement(Ee,null,React$1.createElement(er,{activeCanvas:_r,isMedia:Pr,painting:Tr,resources:Rr}),zr&&React$1.createElement(we,null,React$1.createElement("span",null,Lr?"View Items":"More Information")),Ar.length>1&&React$1.createElement(be,{className:"clover-canvases"},React$1.createElement(Mn,{items:Ar,activeItem:0}))),Lr&&zr&&React$1.createElement(ct,null,React$1.createElement(Ce,null,React$1.createElement(Jt,{activeCanvas:_r,resources:Rr}))))},nr=d("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),rr=d($cc7e05a45900e73f$export$41fb9f06171c75f4,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",backgroundColor:"$secondary",cursor:"pointer",transition:"$all",border:"1px solid $secondaryMuted",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem","@sm":{fontSize:"1rem"}}),or=d($cc7e05a45900e73f$export$7c6e2c02157bb7d2,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),ar=d($cc7e05a45900e73f$export$6d08773d2e66f8f2,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),ir=d($cc7e05a45900e73f$export$b04be29aa201d4f5,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),He=d("div",{position:"relative",zIndex:"5"}),lr=d(V.Trigger,{width:"30px",padding:"5px"}),sr=d(V.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}}),cr=d("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"0",flexShrink:"1",padding:"1rem","@sm":{fontSize:"1rem"},"&.visually-hidden":{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}}),dr=d("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"space-between",alignItems:"flex-start",width:"100%",[`> ${He}`]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}}),mr=d("div",{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"1rem",flexShrink:"0",flexGrow:"1"}),G=({direction:_r,title:Tr})=>{const Rr=()=>React$1.createElement("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),Ar=()=>React$1.createElement("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"});return React$1.createElement(nr,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},React$1.createElement("title",null,Tr),_r==="up"&&React$1.createElement(Rr,null),_r==="down"&&React$1.createElement(Ar,null))},ur=()=>{const _r=F(),Tr=k(),{activeManifest:Rr,collection:Ar,configOptions:Pr,vault:Lr}=Tr,Mr=Pr==null?void 0:Pr.canvasHeight,Fr=zr=>{_r({type:"updateActiveManifest",manifestId:zr})};return React$1.createElement(He,null,React$1.createElement($cc7e05a45900e73f$export$be92b6f5f03c0fe9,{value:Rr,onValueChange:Fr},React$1.createElement(rr,null,React$1.createElement($cc7e05a45900e73f$export$4c8d1a57a761ef94,null),React$1.createElement($cc7e05a45900e73f$export$f04a61298a47a40f,null,React$1.createElement(G,{direction:"down",title:"select from collection"}))),React$1.createElement(or,{css:{maxHeight:`${Mr} !important`}},React$1.createElement($cc7e05a45900e73f$export$2f60d3ec9ad468f2,null,React$1.createElement(G,{direction:"up",title:"scroll up for more"})),React$1.createElement($cc7e05a45900e73f$export$d5c6c08dc2d3ca7,null,React$1.createElement($cc7e05a45900e73f$export$eb2fcfdbd7ba97d4,null,React$1.createElement(ir,null,React$1.createElement(z,{label:Ar.label})),Ar.items.map(zr=>React$1.createElement(ar,{value:zr.id,key:zr.id},(zr==null?void 0:zr.thumbnail)&&React$1.createElement(Te,{thumbnail:Lr.get(zr==null?void 0:zr.thumbnail)}),React$1.createElement($cc7e05a45900e73f$export$d6e5bf9c43ea9319,null,React$1.createElement(z,{label:zr.label})),React$1.createElement($cc7e05a45900e73f$export$c3468e2714d175fa,null))))),React$1.createElement($cc7e05a45900e73f$export$bf1aedc3039c8d63,null,React$1.createElement(G,{direction:"down",title:"scroll down for more"})))))},pr=(_r,Tr=2500)=>{const[Rr,Ar]=reactExports.useState(),Pr=reactExports.useCallback(()=>{navigator.clipboard.writeText(_r).then(()=>Ar("copied"),()=>Ar("failed"))},[_r]);return reactExports.useEffect(()=>{if(!Rr)return;const Lr=setTimeout(()=>Ar(void 0),Tr);return()=>clearTimeout(Lr)},[Rr]),[Rr,Pr]},gr=d("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",fontSize:"0.6111rem",textTransform:"uppercase",lineHeight:"1em"}),fr=({status:_r})=>_r?React$1.createElement(gr,{"data-copy-status":_r},_r):null,ie=({textPrompt:_r,textToCopy:Tr})=>{const[Rr,Ar]=pr(Tr);return React$1.createElement("button",{onClick:Ar},_r," ",React$1.createElement(fr,{status:Rr}))},hr=()=>{const _r="#ed1d33",Tr="#2873ab";return React$1.createElement("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1"},React$1.createElement("title",null,"IIIF Manifest Options"),React$1.createElement("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)"},React$1.createElement("g",{transform:"scale(0.1)"},React$1.createElement("path",{style:{fill:Tr},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),React$1.createElement("path",{style:{fill:Tr},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),React$1.createElement("path",{style:{fill:_r},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),React$1.createElement("path",{style:{fill:_r},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),React$1.createElement("path",{style:{fill:Tr},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),React$1.createElement("path",{style:{fill:Tr},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),React$1.createElement("path",{style:{fill:_r},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"}))))},xr=d($6be4966fd9bbc698$export$be92b6f5f03c0fe9,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"#6663",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),vr=d($6be4966fd9bbc698$export$6521433ed15a34db,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}}),br=d("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"}),yr=d("form",{display:"flex",flexShrink:"0",flexGrow:"1",alignItems:"center",marginLeft:"1.618rem"}),Er=()=>{var _r;const{configOptions:Tr}=k(),Rr=F(),[Ar,Pr]=reactExports.useState((_r=Tr==null?void 0:Tr.informationPanel)==null?void 0:_r.open);return reactExports.useEffect(()=>{Rr({type:"updateInformationOpen",informationOpen:Ar})},[Ar]),React$1.createElement(yr,null,React$1.createElement(br,{htmlFor:"information-toggle",css:Ar?{opacity:"1"}:{}},"More Information"),React$1.createElement(xr,{checked:Ar,onCheckedChange:()=>Pr(!Ar),id:"information-toggle","aria-label":"information panel toggle",name:"toggled?"},React$1.createElement(vr,null)))},Be=_r=>{const Tr=()=>window.matchMedia?window.matchMedia(_r).matches:!1,[Rr,Ar]=reactExports.useState(Tr);return reactExports.useEffect(()=>{const Pr=()=>Ar(Tr);return window.addEventListener("resize",Pr),()=>window.removeEventListener("resize",Pr)}),Rr},wr=({manifestId:_r,manifestLabel:Tr})=>{const Rr=k(),{collection:Ar,configOptions:Pr}=Rr,{showTitle:Lr,showIIIFBadge:Mr,informationPanel:Fr}=Pr,zr=Mr||(Fr==null?void 0:Fr.renderToggle),Ur=Be(Z.sm);return React$1.createElement(dr,{className:"clover-header"},Ar!=null&&Ar.items?React$1.createElement(ur,null):React$1.createElement(cr,{className:Lr?"":"visually-hidden"},Lr&&React$1.createElement(z,{label:Tr})),zr&&React$1.createElement(mr,null,Mr&&React$1.createElement(V,null,React$1.createElement(lr,null,React$1.createElement(hr,null)),React$1.createElement(sr,null,(Ar==null?void 0:Ar.items)&&React$1.createElement("button",{onClick:Vr=>{Vr.preventDefault(),window.open(Ar.id,"_blank")}},"View Collection"),React$1.createElement("button",{onClick:Vr=>{Vr.preventDefault(),window.open(_r,"_blank")}},"View Manifest")," ",(Ar==null?void 0:Ar.items)&&React$1.createElement(ie,{textPrompt:"Copy Collection URL",textToCopy:Ar.id}),React$1.createElement(ie,{textPrompt:"Copy Manifest URL",textToCopy:_r}))),Fr.renderToggle&&!Ur&&React$1.createElement(Er,null)))},Cr=(_r=!1)=>{const[Tr,Rr]=reactExports.useState(_r);return reactExports.useLayoutEffect(()=>{if(!Tr)return;const Ar=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=Ar}},[Tr]),reactExports.useEffect(()=>{Tr!==_r&&Rr(_r)},[_r]),[Tr,Rr]},Sr=({manifest:_r,theme:Tr})=>{const Rr=k(),Ar=F(),{activeCanvas:Pr,informationOpen:Lr,vault:Mr,configOptions:Fr}=Rr,[zr,Ur]=reactExports.useState(!1),[Vr,Nr]=reactExports.useState(!1),[Dr,jr]=reactExports.useState(void 0),[Gr,Wr]=reactExports.useState([]),[qr,Kr]=Cr(!1),Xr=Be(Z.sm),Zr=Jr=>{Ar({type:"updateInformationOpen",informationOpen:Jr})};return reactExports.useEffect(()=>{Fr!=null&&Fr.informationPanel.open&&Zr(!Xr)},[Xr]),reactExports.useEffect(()=>{if(!Xr){Kr(!1);return}Kr(Lr)},[Lr]),reactExports.useEffect(()=>{const Jr=B(Mr,Pr),_i=nt(Mr,Pr,"text/vtt");Jr&&(Nr(["Sound","Video"].indexOf(Jr.type)>-1),jr({...Jr})),Wr(_i),Ur(_i.length!==0)},[Pr]),React$1.createElement(ErrorBoundary,{FallbackComponent:st},React$1.createElement(dt,{className:`${Tr} clover-iiif`,css:{background:Fr==null?void 0:Fr.background},"data-body-locked":qr,"data-information-panel":zr,"data-information-panel-open":Lr},React$1.createElement($409067139f391064$export$be92b6f5f03c0fe9,{open:Lr,onOpenChange:Zr},React$1.createElement(wr,{manifestLabel:_r.label,manifestId:_r.id}),React$1.createElement(tr,{activeCanvas:Pr,painting:Dr,resources:Gr,items:_r.items,isAudioVideo:Vr}))))},le={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3,withCredentials:!1};function kr(_r){return{ok:_r.status>=200&&_r.status<300,status:_r.status,statusText:_r.statusText,headers:_r.getAllResponseHeaders(),data:_r.responseText,json:()=>JSON.parse(_r.responseText)}}function se(_r,Tr=null){return{ok:!1,status:_r.status,statusText:_r.statusText,headers:_r.getAllResponseHeaders(),data:Tr||_r.statusText,json:()=>JSON.parse(Tr||_r.statusText)}}function Ir(_r,Tr=le){const Rr=Tr.headers||le.headers;return new Promise((Ar,Pr)=>{const Lr=new XMLHttpRequest;Lr.open("get",_r),Lr.withCredentials=Tr.withCredentials,Rr&&Object.keys(Rr).forEach(Mr=>Lr.setRequestHeader(Mr,Rr[Mr])),Lr.onload=()=>{Ar(kr(Lr))},Lr.onerror=()=>{Pr(se(Lr,"Failed to make request."))},Lr.ontimeout=()=>{Pr(se(Lr,"Request took longer than expected."))},Lr.send()})}const Or=({canvasIdCallback:_r=()=>{},customTheme:Tr,iiifContent:Rr,id:Ar,manifestId:Pr,options:Lr})=>{var Mr;let Fr=Rr;return Ar&&(Fr=Ar),Pr&&(Fr=Pr),React$1.createElement(tt,{initialState:{...W,informationOpen:!!((Mr=Lr==null?void 0:Lr.informationPanel)!=null&&Mr.open),vault:new Vault({customFetcher:zr=>Ir(zr,{withCredentials:Lr==null?void 0:Lr.withCredentials,headers:Lr==null?void 0:Lr.requestHeaders}).then(Ur=>JSON.parse(Ur.data))})}},React$1.createElement($r,{iiifContent:Fr,canvasIdCallback:_r,customTheme:Tr,options:Lr}))},$r=({canvasIdCallback:_r,customTheme:Tr,iiifContent:Rr,options:Ar})=>{const Pr=F(),Lr=k(),{activeCanvas:Mr,activeManifest:Fr,isLoaded:zr,vault:Ur}=Lr,[Vr,Nr]=reactExports.useState(),[Dr,jr]=reactExports.useState();let Gr={};return Tr&&(Gr=Q$1("custom",Tr)),reactExports.useEffect(()=>{_r&&_r(Mr)},[Mr]),reactExports.useEffect(()=>{Fr&&Ur.loadManifest(Fr).then(Wr=>{jr(Wr),Pr({type:"updateActiveCanvas",canvasId:Wr.items[0]&&Wr.items[0].id})}).catch(Wr=>{console.error(`Manifest failed to load: ${Wr}`)}).finally(()=>{Pr({type:"updateIsLoaded",isLoaded:!0})})},[Fr]),reactExports.useEffect(()=>{Pr({type:"updateConfigOptions",configOptions:Ar}),Ur.load(Rr).then(Wr=>{Nr(Wr)}).catch(Wr=>{console.error(`The IIIF resource ${Rr} failed to load: ${Wr}`)})},[Rr,Ar]),reactExports.useEffect(()=>{let Wr=[];(Vr==null?void 0:Vr.type)==="Collection"?(Pr({type:"updateCollection",collection:Vr}),Wr=Vr.items.filter(qr=>qr.type==="Manifest").map(qr=>qr.id),Wr.length>0&&Pr({type:"updateActiveManifest",manifestId:Wr[0]})):(Vr==null?void 0:Vr.type)==="Manifest"&&Pr({type:"updateActiveManifest",manifestId:Vr.id})},[Vr]),zr?!Dr||!Dr.items?(console.log(`The IIIF manifest ${Rr} failed to load.`),React$1.createElement(React$1.Fragment,null)):Dr.items.length===0?(console.log(`The IIIF manifest ${Rr} does not contain canvases.`),React$1.createElement(React$1.Fragment,null)):React$1.createElement(Sr,{manifest:Dr,theme:Gr,key:Dr.id}):React$1.createElement(React$1.Fragment,null,"Loading")};function isIdBuilder(_r){return Tr=>typeof Tr=="string"&&new RegExp(_r.source,_r.flags).test(Tr)}const isNumericId=isIdBuilder(/^[1-9][0-9]*$/),isEntityId=isIdBuilder(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/),isEntitySchemaId=isIdBuilder(/^E[1-9][0-9]*$/),isItemId=isIdBuilder(/^Q[1-9][0-9]*$/),isPropertyId=isIdBuilder(/^P[1-9][0-9]*$/),isLexemeId=isIdBuilder(/^L[1-9][0-9]*$/),isFormId=isIdBuilder(/^L[1-9][0-9]*-F[1-9][0-9]*$/),isSenseId=isIdBuilder(/^L[1-9][0-9]*-S[1-9][0-9]*$/),isMediaInfoId=isIdBuilder(/^M[1-9][0-9]*$/),isGuid=isIdBuilder(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),isHash=isIdBuilder(/^[0-9a-f]{40}$/),isRevisionId=isIdBuilder(/^\d+$/),isNonNestedEntityId=isIdBuilder(/^(Q|P|L|M)[1-9][0-9]*$/);function isPropertyClaimsId(_r){if(typeof _r!="string")return!1;const[Tr,Rr]=_r.split("#");return isEntityId(Tr)&&isPropertyId(Rr)}function isEntityPageTitle(_r){return typeof _r!="string"?!1:_r.startsWith("Item:")?isItemId(_r.substring(5)):_r.startsWith("Lexeme:")?isLexemeId(_r.substring(7)):_r.startsWith("Property:")?isPropertyId(_r.substring(9)):isItemId(_r)}function getNumericId(_r){if(!isNonNestedEntityId(_r))throw new Error(`invalid entity id: ${_r}`);return _r.replace(/^(Q|P|L|M)/,"")}function getImageUrl(_r,Tr){let Rr=`https://commons.wikimedia.org/wiki/Special:FilePath/${_r}`;return typeof Tr=="number"&&(Rr+=`?width=${Tr}`),Rr}function getEntityIdFromGuid(_r){const Tr=_r.split(/[$-]/);if(Tr.length===6)return Tr[0].toUpperCase();if(Tr.length===7)return Tr.slice(0,2).join("-").toUpperCase();throw new Error(`invalid guid: ${_r}`)}const helpers=Object.freeze(Object.defineProperty({__proto__:null,getEntityIdFromGuid,getImageUrl,getNumericId,isEntityId,isEntityPageTitle,isEntitySchemaId,isFormId,isGuid,isHash,isItemId,isLexemeId,isMediaInfoId,isNonNestedEntityId,isNumericId,isPropertyClaimsId,isPropertyId,isRevisionId,isSenseId},Symbol.toStringTag,{value:"Module"}));function shortLang(_r){return _r.toLowerCase().split("_")[0]}function forceArray(_r){return typeof _r=="string"?[_r]:Array.isArray(_r)?[..._r]:[]}function isPlainObject(_r){return!!_r&&typeof _r=="object"&&!Array.isArray(_r)}const fixedEncodeURIComponent=_r=>encodeURIComponent(_r).replace(/[!'()*]/g,encodeCharacter),replaceSpaceByUnderscores=_r=>_r.replace(/\s/g,"_");function uniq(_r){return Array.from(new Set(_r))}const encodeCharacter=_r=>"%"+_r.charCodeAt(0).toString(16);function rejectObsoleteInterface(_r){if(_r.length!==1||!isPlainObject(_r[0]))throw new Error(`Since wikibase-sdk v9.0.0, this function expects arguments to be passed in an object
    See https://github.com/maxlath/wikibase-sdk/blob/main/CHANGELOG.md`)}function isOfType(_r,Tr){return typeof Tr=="string"&&_r.includes(Tr)}function isAKey(_r,Tr){return Object.prototype.hasOwnProperty.call(_r,Tr)}function typedEntries(_r){return Object.entries(_r)}function wikibaseTimeToDateObject(_r){typeof _r=="object"&&(_r=_r.time);const Tr=_r[0];let[Rr,Ar]=_r.slice(1).split("T");Rr=Rr.replace(/-00/g,"-01");const Pr=`${Rr}T${Ar}`;return fullDateData(Tr,Pr)}const fullDateData=(_r,Tr)=>{const Rr=Tr.split("-")[0];return _r==="-"||Rr.length>4?expandedYearDate(_r,Tr,Rr):new Date(Tr)},expandedYearDate=(_r,Tr,Rr)=>{let Ar;return Rr.length===4?Ar=`${_r}00${Tr}`:Rr.length===5?Ar=`${_r}0${Tr}`:Ar=_r+Tr,new Date(Ar)};function bestEffort(_r){return Tr=>{try{return _r(Tr)}catch{Tr=typeof Tr=="string"?Tr:Tr.time;const Ar=Tr[0];let[Pr,Lr]=Tr.slice(1).split("T");if(!Ar||!Pr||!Lr)throw new Error("TimeInput is invalid: "+JSON.stringify(Tr));return Pr=Pr.replace(/-00/g,"-01"),`${Ar}${Pr}T${Lr}`}}}const toEpochTime=_r=>wikibaseTimeToDateObject(_r).getTime(),toISOString=_r=>wikibaseTimeToDateObject(_r).toISOString(),toSimpleDay=_r=>{if(typeof _r=="object"){const{time:Tr,precision:Rr}=_r;Rr===9?_r=Tr.replace("-01-01T","-00-00T"):Rr===10?_r=Tr.replace("-01T","-00T"):_r=Tr}return _r.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")},wikibaseTimeToEpochTime=bestEffort(toEpochTime),wikibaseTimeToISOString=bestEffort(toISOString),wikibaseTimeToSimpleDay=bestEffort(toSimpleDay),timeHelpers=Object.freeze(Object.defineProperty({__proto__:null,wikibaseTimeToDateObject,wikibaseTimeToEpochTime,wikibaseTimeToISOString,wikibaseTimeToSimpleDay},Symbol.toStringTag,{value:"Module"})),simple=_r=>_r.value,monolingualtext=(_r,Tr)=>Tr.keepRichValues?_r.value:_r.value.text,entity=(_r,Tr)=>prefixedId(_r,Tr.entityPrefix),entityLetter={item:"Q",lexeme:"L",property:"P"},prefixedId=(_r,Tr)=>{const{value:Rr}=_r,Ar=Rr.id||entityLetter[Rr["entity-type"]]+Rr["numeric-id"];return typeof Tr=="string"?`${Tr}:${Ar}`:Ar},quantity=(_r,Tr)=>{const{value:Rr}=_r,Ar=parseFloat(Rr.amount);if(Tr.keepRichValues){const Pr={amount:parseFloat(Rr.amount),unit:Rr.unit.replace(/^https?:\/\/.*\/entity\//,"")};return Rr.upperBound!=null&&(Pr.upperBound=parseFloat(Rr.upperBound)),Rr.lowerBound!=null&&(Pr.lowerBound=parseFloat(Rr.lowerBound)),Pr}else return Ar},coordinate=(_r,Tr)=>Tr.keepRichValues?_r.value:[_r.value.latitude,_r.value.longitude],time=(_r,Tr)=>{let Rr;if(typeof Tr.timeConverter=="function"?Rr=Tr.timeConverter(_r.value):Rr=getTimeConverter(Tr.timeConverter)(_r.value),Tr.keepRichValues){const{timezone:Ar,before:Pr,after:Lr,precision:Mr,calendarmodel:Fr}=_r.value;return{time:Rr,timezone:Ar,before:Pr,after:Lr,precision:Mr,calendarmodel:Fr}}else return Rr},getTimeConverter=(_r="iso")=>{const Tr=timeConverters[_r];if(!Tr)throw new Error(`invalid converter key: ${JSON.stringify(_r).substring(0,100)}`);return Tr},timeConverters={iso:wikibaseTimeToISOString,epoch:wikibaseTimeToEpochTime,"simple-day":wikibaseTimeToSimpleDay,none:_r=>typeof _r=="string"?_r:_r.time},parsers={commonsMedia:simple,"external-id":simple,"geo-shape":simple,"globe-coordinate":coordinate,math:simple,monolingualtext,"musical-notation":simple,quantity,string:simple,"tabular-data":simple,time,url:simple,"wikibase-entityid":entity,"wikibase-form":entity,"wikibase-item":entity,"wikibase-lexeme":entity,"wikibase-property":entity,"wikibase-sense":entity},normalizeDatatype=_r=>_r.toLowerCase().replace(/[\s-]/g,""),normalizedParsers={};for(const[_r,Tr]of Object.entries(parsers))normalizedParsers[normalizeDatatype(_r)]=Tr;function parseClaim(_r,Tr,Rr,Ar){_r=_r||Tr.type;try{const Pr=normalizedParsers[normalizeDatatype(_r)];return Pr(Tr,Rr)}catch(Pr){throw Pr.message==="parsers[datatype] is not a function"&&(Pr.message=`${_r} claim parser isn't implemented
      Claim id: ${Ar}
      Please report to https://github.com/maxlath/wikibase-sdk/issues`),Pr}}function truthyPropertyClaims(_r){const Tr={};for(const Rr of _r){const{rank:Ar}=Rr;Tr[Ar]=Tr[Ar]||[],Tr[Ar].push(Rr)}return Tr.preferred||Tr.normal||[]}function nonDeprecatedPropertyClaims(_r){return _r.filter(Tr=>Tr.rank!=="deprecated")}function truthyClaims(_r){const Tr={};for(const[Rr,Ar]of typedEntries(_r))Tr[Rr]=truthyPropertyClaims(Ar);return Tr}const rankHelpers=Object.freeze(Object.defineProperty({__proto__:null,nonDeprecatedPropertyClaims,truthyClaims,truthyPropertyClaims},Symbol.toStringTag,{value:"Module"}));function simplifySnaks(_r,Tr){const{propertyPrefix:Rr}=Tr,Ar={};for(let Pr in _r){const Lr=_r[Pr];Rr&&(Pr=Rr+":"+Pr),Ar[Pr]=simplifyPropertySnaks(Lr,Tr)}return Ar}function simplifyPropertySnaks(_r,Tr){if(_r==null||_r.length===0)return[];const{keepNonTruthy:Rr,keepNonDeprecated:Ar,areSubSnaks:Pr}=parseKeepOptions(Tr);return Ar?_r=nonDeprecatedPropertyClaims(_r):Rr||Pr||(_r=truthyPropertyClaims(_r)),_r=_r.map(Lr=>simplifyClaim(Lr,Tr)).filter(Lr=>Lr!==void 0),_r[0]&&typeof _r[0]!="object"?uniq(_r):_r}function simplifySnak(_r,Tr){const{keepQualifiers:Rr,keepReferences:Ar,keepIds:Pr,keepHashes:Lr,keepTypes:Mr,keepSnaktypes:Fr,keepRanks:zr}=parseKeepOptions(Tr),{mainsnak:Ur,rank:Vr}=_r;let Nr,Dr,jr,Gr,Wr,qr;if(Ur?(Dr=Ur.datatype,jr=Ur.datavalue,Gr=Ur.snaktype):(jr=_r.datavalue,Dr=_r.datatype,Gr=_r.snaktype,_r.hash?Wr=!0:qr=!0),jr)Nr=parseClaim(Dr,jr,Tr,_r.id);else if(Gr==="somevalue")Nr=Tr.somevalueValue;else if(Gr==="novalue")Nr=Tr.novalueValue;else throw new Error("no datavalue or special snaktype found");if(Wr){if(!(Lr||Mr||Fr))return Nr;const Zr={value:Nr};return Lr&&(Zr.hash=_r.hash),Mr&&(Zr.type=Dr),Fr&&(Zr.snaktype=Gr),Zr}if(qr)return Mr?{type:Dr,value:Nr}:Nr;if(!(Rr||Ar||Pr||Mr||Fr||zr))return Nr;const Kr={value:Nr};Mr&&(Kr.type=Dr),Fr&&(Kr.snaktype=Gr),zr&&(Kr.rank=Vr);const Xr=getSubSnakOptions(Tr);return Xr.keepHashes=Lr,Rr&&(Kr.qualifiers=simplifyQualifiers(_r.qualifiers,Xr)),Ar&&(_r.references=_r.references||[],Kr.references=simplifyReferences(_r.references,Xr)),Pr&&(Kr.id=_r.id),Kr}function simplifyClaims(_r,Tr={}){return simplifySnaks(_r,Tr)}function simplifyPropertyClaims(_r,Tr={}){return simplifyPropertySnaks(_r,Tr)}function simplifyClaim(_r,Tr={}){return simplifySnak(_r,Tr)}function simplifyQualifiers(_r,Tr={}){return simplifySnaks(_r,getSubSnakOptions(Tr))}function simplifyPropertyQualifiers(_r,Tr={}){return simplifyPropertySnaks(_r,getSubSnakOptions(Tr))}function simplifyQualifier(_r,Tr={}){return simplifySnak(_r,Tr)}function simplifyReferences(_r,Tr={}){return _r.map(Rr=>simplifyReferenceRecord(Rr,Tr))}function simplifyReferenceRecord(_r,Tr={}){const Rr=getSubSnakOptions(Tr),Ar=simplifySnaks(_r.snaks,Rr);return Rr.keepHashes?{snaks:Ar,hash:_r.hash}:Ar}const getSubSnakOptions=(_r={})=>_r.areSubSnaks?_r:Object.assign({},_r,{areSubSnaks:!0}),keepOptions=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],parseKeepOptions=(_r={})=>(_r.keepAll&&keepOptions.forEach(Tr=>{_r[Tr]==null&&(_r[Tr]=!0)}),_r);function singleValue(_r){const Tr={};for(const[Rr,Ar]of typedEntries(_r))Tr[Rr]=Ar!=null?Ar.value:null;return Tr}function multiValue(_r){const Tr={};for(const[Rr,Ar]of typedEntries(_r))Tr[Rr]=Ar!=null?Ar.map(Pr=>Pr.value):[];return Tr}function simplifyLabels(_r){return singleValue(_r)}function simplifyDescriptions(_r){return singleValue(_r)}function simplifyAliases(_r){return multiValue(_r)}function simplifyLemmas(_r){return singleValue(_r)}function simplifyRepresentations(_r){return singleValue(_r)}function simplifyGlosses(_r){return singleValue(_r)}const simplifyForm=(_r,Tr={})=>{const{id:Rr,representations:Ar,grammaticalFeatures:Pr,claims:Lr}=_r;if(!isFormId(Rr))throw new Error("invalid form object");return{id:Rr,representations:simplifyRepresentations(Ar),grammaticalFeatures:Pr,claims:simplifyClaims(Lr,Tr)}},simplifyForms=(_r,Tr={})=>_r.map(Rr=>simplifyForm(Rr,Tr)),simplifySense=(_r,Tr={})=>{const{id:Rr,glosses:Ar,claims:Pr}=_r;if(!isSenseId(Rr))throw new Error("invalid sense object");return{id:Rr,glosses:simplifyGlosses(Ar),claims:simplifyClaims(Pr,Tr)}};function simplifySenses(_r,Tr={}){return _r.map(Rr=>simplifySense(Rr,Tr))}const languages=["aa","ab","ace","ady","af","ak","als","alt","ami","am","ang","anp","an","arc","ar","ary","arz","ast","as","atj","avk","av","awa","ay","azb","az","ban","bar","bat_smg","ba","bcl","be_x_old","be","bg","bh","bi","bjn","blk","bm","bn","bo","bpy","br","bs","bug","bxr","ca","cbk_zam","cdo","ceb","ce","cho","chr","ch","chy","ckb","co","crh","cr","csb","cs","cu","cv","cy","dag","da","de","din","diq","dsb","dty","dv","dz","ee","el","eml","en","eo","es","et","eu","ext","fa","ff","fiu_vro","fi","fj","fo","frp","frr","fr","fur","fy","gag","gan","ga","gcr","gd","glk","gl","gn","gom","gor","got","guc","gur","gu","guw","gv","hak","ha","haw","he","hif","hi","ho","hr","hsb","ht","hu","hy","hyw","hz","ia","id","ie","ig","ii","ik","ilo","inh","io","is","it","iu","jam","ja","jbo","jv","kaa","kab","ka","kbd","kbp","kcg","kg","ki","kj","kk","kl","km","kn","koi","ko","krc","kr","ksh","ks","ku","kv","kw","ky","lad","la","lbe","lb","lez","lfn","lg","lij","li","lld","lmo","ln","lo","lrc","ltg","lt","lv","mad","mai","map_bms","mdf","mg","mhr","mh","min","mi","mk","ml","mni","mn","mnw","mo","mrj","mr","ms","mt","mus","mwl","myv","my","mzn","nah","nap","na","nds_nl","nds","ne","new","ng","nia","nl","nn","nov","no","nqo","nrm","nso","nv","ny","oc","olo","om","or","os","pag","pam","pap","pa","pcd","pcm","pdc","pfl","pih","pi","pl","pms","pnb","pnt","ps","pt","pwn","qu","rm","rmy","rn","roa_rup","roa_tara","ro","rue","ru","rw","sah","sat","sa","scn","sco","sc","sd","se","sg","shi","shn","sh","shy","simple","si","skr","sk","sl","smn","sm","sn","sources","so","sq","srn","sr","ss","stq","st","su","sv","sw","szl","szy","ta","tay","tcy","tet","te","tg","th","ti","tk","tl","tn","to","tpi","trv","tr","ts","tt","tum","tw","tyv","ty","udm","ug","uk","ur","uz","vec","vep","ve","vi","vls","vo","war","wa","wo","wuu","xal","xh","xmf","yi","yo","yue","za","zea","zh_classical","zh_min_nan","zh_yue","zh","zu"],specialSites={commonswiki:"commons",mediawikiwiki:"mediawiki",metawiki:"meta",specieswiki:"specieswiki",wikidatawiki:"wikidata",wikimaniawiki:"wikimania"},wikidataBase="https://www.wikidata.org/wiki/";function getSitelinkUrl({site:_r,title:Tr}){if(rejectObsoleteInterface(arguments),!_r)throw new Error("missing a site");if(!Tr)throw new Error("missing a title");if(isAKey(siteUrlBuilders,_r))return siteUrlBuilders[_r](Tr);const Rr=_r.replace(/wiki$/,"");if(isAKey(siteUrlBuilders,Rr))return siteUrlBuilders[Rr](Tr);const{lang:Ar,project:Pr}=getSitelinkData(_r);return Tr=fixedEncodeURIComponent(replaceSpaceByUnderscores(Tr)),`https://${Ar}.${Pr}.org/wiki/${Tr}`}const wikimediaSite=_r=>Tr=>`https://${_r}.wikimedia.org/wiki/${Tr}`,siteUrlBuilders={commons:wikimediaSite("commons"),mediawiki:_r=>`https://www.mediawiki.org/wiki/${_r}`,meta:wikimediaSite("meta"),species:wikimediaSite("species"),wikidata:_r=>{const Tr=prefixByEntityLetter[_r[0]];let Rr=Tr?`${Tr}:${_r}`:_r;return Rr=Rr.replace("-","#"),`${wikidataBase}${Rr}`},wikimania:wikimediaSite("wikimania")},prefixByEntityLetter={E:"EntitySchema",L:"Lexeme",P:"Property"},sitelinkUrlPattern=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/;function getSitelinkData(_r){if(_r.startsWith("http")){const Tr=_r,Rr=Tr.match(sitelinkUrlPattern);if(!Rr)throw new Error(`invalid sitelink url: ${Tr}`);let[Ar,Pr,Lr]=Rr.slice(1);Lr=decodeURIComponent(Lr);let Mr;return Ar==="www"?(Ar="en",Mr=Pr):Ar==="commons"?(Ar="en",Pr=Mr="commons"):(Ar=Ar.replace(/-/g,"_"),Mr=`${Ar}${Pr}`.replace("wikipedia","wiki")),{lang:Ar,project:Pr,key:Mr,title:Lr,url:Tr}}else{const Tr=_r;if(isAKey(specialSites,_r))return{lang:"en",project:specialSites[_r],key:Tr};let[Rr,Ar,Pr]=Tr.split("wik");if(Pr!=null)throw new Error(`invalid sitelink key: ${Tr}`);if(!isOfType(languages,Rr))throw new Error(`sitelink lang not found: ${Rr}. Updating wikibase-sdk to a more recent version might fix the issue.`);Rr=Rr.replace(/_/g,"-");const Lr=projectsBySuffix[Ar];if(!Lr)throw new Error(`sitelink project not found: ${Lr}`);return{lang:Rr,project:Lr,key:Tr}}}const isSitelinkKey=_r=>{try{return getSitelinkData(_r),!0}catch{return!1}},wikimediaLanguageCodes=languages,projectsBySuffix={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"};[...Object.values(projectsBySuffix),...Object.values(specialSites)];const sitelinksHelpers=Object.freeze(Object.defineProperty({__proto__:null,getSitelinkData,getSitelinkUrl,isSitelinkKey,wikimediaLanguageCodes},Symbol.toStringTag,{value:"Module"}));function simplifySitelinks(_r,Tr={}){let{addUrl:Rr,keepBadges:Ar,keepAll:Pr}=Tr;return Ar=Ar||Pr,Object.keys(_r).reduce(aggregateValues({sitelinks:_r,addUrl:Rr,keepBadges:Ar}),{})}const aggregateValues=({sitelinks:_r,addUrl:Tr,keepBadges:Rr})=>(Ar,Pr)=>{if(_r[Pr]==null)return Ar[Pr]=_r[Pr],Ar;const{title:Lr,badges:Mr}=_r[Pr];return Tr||Rr?(Ar[Pr]={title:Lr},Tr&&(Ar[Pr].url=getSitelinkUrl({site:Pr,title:Lr})),Rr&&(Ar[Pr].badges=Mr)):Ar[Pr]=Lr,Ar},simplify$1={labels:simplifyLabels,descriptions:simplifyDescriptions,aliases:simplifyAliases,claims:simplifyClaims,statements:simplifyClaims,sitelinks:simplifySitelinks,lemmas:simplifyLemmas,forms:simplifyForms,senses:simplifySenses},simplifyEntity=(_r,Tr={})=>{const{type:Rr}=_r,Ar={id:_r.id,type:Rr,modified:_r.modified};return Rr==="item"?(simplifyIfDefined(_r,Ar,"labels"),simplifyIfDefined(_r,Ar,"descriptions"),simplifyIfDefined(_r,Ar,"aliases"),simplifyIfDefined(_r,Ar,"claims",Tr),simplifyIfDefined(_r,Ar,"sitelinks",Tr)):Rr==="property"?(Ar.datatype=_r.datatype,simplifyIfDefined(_r,Ar,"labels"),simplifyIfDefined(_r,Ar,"descriptions"),simplifyIfDefined(_r,Ar,"aliases"),simplifyIfDefined(_r,Ar,"claims",Tr)):Rr==="lexeme"?(simplifyIfDefined(_r,Ar,"lemmas"),Ar.lexicalCategory=_r.lexicalCategory,Ar.language=_r.language,simplifyIfDefined(_r,Ar,"claims",Tr),simplifyIfDefined(_r,Ar,"forms",Tr),simplifyIfDefined(_r,Ar,"senses",Tr)):Rr==="mediainfo"&&(simplifyIfDefined(_r,Ar,"labels"),simplifyIfDefined(_r,Ar,"descriptions"),simplifyIfDefined(_r,Ar,"statements",Tr)),Ar},simplifyIfDefined=(_r,Tr,Rr,Ar)=>{_r[Rr]!=null&&(Tr[Rr]=simplify$1[Rr](_r[Rr],Ar))},simplifyEntities=(_r,Tr={})=>{_r.entities&&(_r=_r.entities);const{entityPrefix:Rr}=Tr,Ar={};for(const[Pr,Lr]of Object.entries(_r)){const Mr=Rr?`${Rr}:${Pr}`:Pr;Ar[Mr]=simplifyEntity(Lr,Tr)}return Ar};function entities(_r){_r=_r.body||_r;const{entities:Tr}=_r;return simplifyEntities(Tr)}function pagesTitles(_r){return _r=_r.body||_r,_r.query.search.map(Tr=>Tr.title)}const parse=Object.freeze(Object.defineProperty({__proto__:null,entities,pagesTitles},Symbol.toStringTag,{value:"Module"}));function simplifySparqlResults(_r,Tr={}){typeof _r=="string"&&(_r=JSON.parse(_r));const{vars:Rr}=_r.head,Ar=_r.results.bindings;if(Rr.length===1&&Tr.minimize){const Fr=Rr[0];return Ar.map(zr=>parseValue(zr[Fr])).filter(zr=>zr!=null)}const{richVars:Pr,associatedVars:Lr,standaloneVars:Mr}=identifyVars(Rr);return Ar.map(Fr=>getSimplifiedResult(Pr,Lr,Mr,Fr))}function parseValue(_r){if(!_r||_r.type==="bnode")return null;const{value:Tr}=_r;if(_r.type==="uri")return parseUri(Tr);const Rr=(_r.datatype||"").replace("http://www.w3.org/2001/XMLSchema#","");return Rr==="decimal"||Rr==="integer"||Rr==="float"||Rr==="double"?parseFloat(Tr):Rr==="boolean"?Tr==="true":Tr}function parseUri(_r){return _r.match(/http.*\/entity\/statement\//)?convertStatementUriToGuid(_r):_r.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,"")}function convertStatementUriToGuid(_r){_r=_r.replace(/^https?:\/\/.*\/entity\/statement\//,"");const Tr=_r.split("-");return Tr[0]+"$"+Tr.slice(1).join("-")}function identifyVars(_r){let Tr=_r.filter(Lr=>{const Mr=new RegExp(`^${Lr}[A-Z]\\w+`);return _r.some(Fr=>Mr.test(Fr))});Tr=Tr.filter(Lr=>!Tr.some(Mr=>Lr!==Mr&&Lr.startsWith(Mr)));const Rr=new RegExp(`^(${Tr.join("|")})[A-Z]`),Ar=_r.filter(Lr=>Rr.test(Lr)),Pr=_r.filter(Lr=>!Tr.includes(Lr)&&!Rr.test(Lr));return{richVars:Tr,associatedVars:Ar,standaloneVars:Pr}}function getSimplifiedResult(_r,Tr,Rr,Ar){const Pr={};for(const Lr of _r){const Mr={},Fr=parseValue(Ar[Lr]);Fr!=null&&(Mr.value=Fr);for(const zr of Tr)zr.startsWith(Lr)&&addAssociatedValue(Ar,Lr,zr,Mr);Object.keys(Mr).length>0&&(Pr[Lr]=Mr)}for(const Lr of Rr){const Mr=parseValue(Ar[Lr]);Mr!=null&&(Pr[Lr]=Mr)}return Pr}function addAssociatedValue(_r,Tr,Rr,Ar){let Pr=Rr.split(Tr)[1];Pr=Pr[0].toLowerCase()+Pr.slice(1),Pr=Pr==="altLabel"?"aliases":Pr;const Lr=_r[Rr];Lr!=null&&(Ar[Pr]=Lr.value)}const simplify=Object.freeze(Object.defineProperty({__proto__:null,aliases:simplifyAliases,claim:simplifyClaim,claims:simplifyClaims,descriptions:simplifyDescriptions,entities:simplifyEntities,entity:simplifyEntity,form:simplifyForm,forms:simplifyForms,glosses:simplifyGlosses,labels:simplifyLabels,lemmas:simplifyLemmas,propertyClaims:simplifyPropertyClaims,propertyQualifiers:simplifyPropertyQualifiers,propertySnaks:simplifyPropertyClaims,qualifier:simplifyQualifier,qualifiers:simplifyQualifiers,references:simplifyReferences,representations:simplifyRepresentations,sense:simplifySense,senses:simplifySenses,sitelinks:simplifySitelinks,snak:simplifyClaim,snaks:simplifyClaims,sparqlResults:simplifySparqlResults},Symbol.toStringTag,{value:"Module"})),namespacePattern=/^\d+[|\d]*$/;function cirrusSearchPagesFactory(_r){return function(Rr){rejectObsoleteInterface(arguments);for(const[Gr,Wr]of Object.entries(Rr))if(Gr.startsWith("sr")){const qr=Gr.replace(/^sr/,"");if(!isAKey(Rr,qr))throw new Error(`${Gr} is not a valid option`);if(Rr[qr]!=null)throw new Error(`${qr} and ${Gr} are the same`);Rr[qr]=Wr}const{search:Ar,haswbstatement:Pr,format:Lr="json",limit:Mr,offset:Fr,profile:zr,sort:Ur}=Rr;let{namespace:Vr,prop:Nr}=Rr;if(!(Ar||Pr))throw new Error('missing "search" or "haswbstatement" parameter');let Dr="";if(Ar&&(Dr+=Ar),Pr){const Gr=Pr instanceof Array?Pr:[Pr];for(const Wr of Gr)Wr[0]==="-"?Dr+=` -haswbstatement:${Wr.slice(1)}`:Dr+=` haswbstatement:${Wr}`}if(Mr!=null&&(typeof Mr!="number"||Mr<1))throw new Error(`invalid limit: ${Mr}`);if(Fr!=null&&(typeof Fr!="number"||Fr<0))throw new Error(`invalid offset: ${Fr}`);if(Vr instanceof Array?Vr=Vr.join("|"):typeof Vr=="number"&&(Vr=Vr.toString()),Vr&&!namespacePattern.test(Vr))throw new Error(`invalid namespace: ${Vr}`);if(zr!=null&&typeof zr!="string")throw new Error(`invalid profile: ${zr} (${typeof zr}, expected string)`);if(Ur!=null&&typeof Ur!="string")throw new Error(`invalid sort: ${Ur} (${typeof Ur}, expected string)`);let jr;if(Nr!=null){if(Nr instanceof Array&&(Nr=Nr.join("|")),typeof Nr!="string")throw new Error(`invalid prop: ${Nr} (${typeof Nr}, expected string)`);jr=Nr.toString()}return _r({action:"query",list:"search",srsearch:Dr.trim(),format:Lr,srnamespace:Vr,srlimit:Mr,sroffset:Fr,srqiprofile:zr,srsort:Ur,srprop:jr})}}function validate(_r,Tr){return function(Rr){if(!Tr(Rr))throw new Error(`invalid ${_r}: ${Rr} (type: ${typeOf(Rr)})`)}}const entityId=validate("entity id",isEntityId),propertyId=validate("property id",isPropertyId),entityPageTitle=validate("entity page title",isEntityPageTitle),revisionId=validate("revision id",isRevisionId);function typeOf(_r){const Tr=typeof _r;if(Tr==="object"){if(_r===null)return"null";if(_r instanceof Array)return"array";if(_r instanceof Promise)return"promise"}return Tr==="number"&&Number.isNaN(_r)?"NaN":Tr}function getEntitiesFactory(_r){return function({ids:Rr,languages:Ar,props:Pr,format:Lr="json",redirects:Mr}){if(rejectObsoleteInterface(arguments),!(Rr&&Rr.length>0))throw new Error("no id provided");Rr=forceArray(Rr),Rr.forEach(zr=>entityId(zr)),Rr.length>50&&console.warn(`getEntities accepts 50 ids max to match Wikidata API limitations:
      this request won't get all the desired entities.
      You can use getManyEntities instead to generate several request urls
      to work around this limitation`);const Fr={action:"wbgetentities",ids:Rr.join("|"),format:Lr};return Mr===!1&&(Fr.redirects="no"),Ar&&(Ar=forceArray(Ar).map(shortLang),Fr.languages=Ar.join("|")),Pr&&Pr.length>0&&(Fr.props=forceArray(Pr).join("|")),_r(Fr)}}function getEntitiesFromSitelinksFactory(_r){return function({titles:Rr,sites:Ar,languages:Pr,props:Lr,format:Mr="json",redirects:Fr}){if(rejectObsoleteInterface(arguments),!(Rr&&Rr.length>0))throw new Error("no titles provided");Ar&&Ar.length>0||(Ar=["enwiki"]),Rr=forceArray(Rr),Ar=forceArray(Ar).map(parseSite),Lr=forceArray(Lr);const zr={action:"wbgetentities",titles:Rr.join("|"),sites:Ar.join("|"),format:Mr};return Ar.length===1&&Rr.length===1&&(zr.normalize=!0),Pr&&(Pr=forceArray(Pr).map(shortLang),zr.languages=Pr.join("|")),Lr.length>0&&(zr.props=Lr.join("|")),Fr===!1&&(zr.redirects="no"),_r(zr)}}function parseSite(_r){return isOfType(languages,_r)?`${_r}wiki`:_r}function getEntityRevisionFactory(_r,Tr){return function({id:Ar,revision:Pr}){return rejectObsoleteInterface(arguments),entityId(Ar),revisionId(Pr),`${_r}/${Tr}/index.php?title=Special:EntityData/${Ar}.json&revision=${Pr}`}}function getManyEntitiesFactory(_r){const Tr=getEntitiesFactory(_r);return function({ids:Ar,languages:Pr,props:Lr,format:Mr,redirects:Fr}){if(rejectObsoleteInterface(arguments),!(Ar instanceof Array))throw new Error("getManyEntities expects an array of ids");return getChunks(Ar).map(zr=>Tr({ids:zr,languages:Pr,props:Lr,format:Mr,redirects:Fr}))}}function getChunks(_r){const Tr=[];for(;_r.length>0;){const Rr=_r.slice(0,50);_r=_r.slice(50),Tr.push(Rr)}return Tr}function sparqlQueryFactory(_r){return function(Rr){const Ar=fixedEncodeURIComponent(Rr);return`${_r}?format=json&query=${Ar}`}}const itemsOnly="FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ",getReverseClaimsFactory=_r=>{const Tr=sparqlQueryFactory(_r);return function(Ar){let{properties:Pr}=Ar;const{values:Lr,limit:Mr,caseInsensitive:Fr,keepProperties:zr}=Ar,Ur=Fr?caseInsensitiveValueQuery:directValueQuery,Vr=zr?"":itemsOnly;Pr=forceArray(Pr),Pr.forEach(jr=>propertyId(jr));let Dr=`SELECT DISTINCT ?subject WHERE { ${getValueBlock(Lr,Ur,Pr,Vr)} }`;return Mr&&(Dr+=` LIMIT ${Mr}`),Tr(Dr)}},getValueBlock=(_r,Tr,Rr,Ar)=>(Rr=Rr.map(prefixifyProperty).join("|"),_r instanceof Array?"{ "+_r.map(getValueString).map(Lr=>Tr(Rr,Lr,Ar)).join("} UNION {")+" }":Tr(Rr,getValueString(_r),Ar)),getValueString=_r=>(isItemId(_r)?_r=`wd:${_r}`:typeof _r=="string"&&(_r=`'${_r}'`),_r),directValueQuery=(_r,Tr,Rr)=>`?subject ${_r} ${Tr} .
    ${Rr}`,caseInsensitiveValueQuery=(_r,Tr,Rr)=>`?subject ${_r} ?value .
    FILTER (lcase(?value) = ${Tr.toLowerCase()})
    ${Rr}`,prefixifyProperty=_r=>"wdt:"+_r;function getRevisionsFactory(_r){return function({ids:Rr,format:Ar,limit:Pr,start:Lr,end:Mr,prop:Fr,user:zr,excludeuser:Ur,tag:Vr}){rejectObsoleteInterface(arguments),Rr=forceArray(Rr),Rr.forEach(jr=>entityPageTitle(jr));const Nr=Rr.length===1,Dr={action:"query",prop:"revisions"};return Dr.titles=Rr.join("|"),Dr.format=Ar||"json",Nr&&(Dr.rvlimit=Pr||"max"),Nr&&Lr&&(Dr.rvstart=getEpochSeconds(Lr)),Nr&&Mr&&(Dr.rvend=getEpochSeconds(Mr)),Fr?Dr.rvprop=forceArray(Fr).join("|"):Dr.rvprop="ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",Dr.rvslots="*",zr&&(Dr.rvuser=zr),Ur&&(Dr.rvexcludeuser=Ur),Vr&&(Dr.rvtag=Vr),_r(Dr)}}const getEpochSeconds=_r=>typeof _r=="number"&&_r<earliestPointInMs?_r:Math.trunc(new Date(_r).getTime()/1e3),earliestPointInMs=new Date("2000-01-01").getTime(),EntityTypes=["item","property","lexeme","form","sense"],searchEntitiesFactory=_r=>function({search:Rr,language:Ar="en",uselang:Pr,limit:Lr="20",continue:Mr="0",format:Fr="json",type:zr="item"}){if(rejectObsoleteInterface(arguments),Pr=Pr||Ar,!(Rr&&Rr.length>0))throw new Error("search can't be empty");if(!isOfType(EntityTypes,zr))throw new Error(`invalid type: ${zr}`);return _r({action:"wbsearchentities",search:Rr,language:Ar,limit:Lr,continue:Mr,format:Fr,uselang:Pr,type:zr})},isBrowser=typeof location<"u"&&typeof document<"u";function buildUrlFactory(_r){return Tr=>{isBrowser&&(Tr=Object.assign(Object.assign({},Tr),{origin:"*"}));const Rr=Object.entries(Tr).filter(([,Pr])=>Pr!=null).map(([Pr,Lr])=>[Pr,String(Lr)]),Ar=new URLSearchParams(Rr).toString();return _r+"?"+Ar}}const tip=`Tip: if you just want to access functions that don't need an instance or a sparqlEndpoint,
those are also exposed directly on the module object. Exemple:
import { isItemId, simplify } from 'wikibase-sdk'`,common=Object.assign(Object.assign(Object.assign(Object.assign({simplify,parse},helpers),sitelinksHelpers),rankHelpers),timeHelpers);function WBK(_r){if(!isPlainObject(_r))throw new Error("invalid config");const{instance:Tr,sparqlEndpoint:Rr}=_r;let{wgScriptPath:Ar="w"}=_r;if(Ar=Ar.replace(/^\//,""),!(Tr||Rr))throw new Error(`one of instance or sparqlEndpoint should be set at initialization.
${tip}`);let Pr,Lr,Mr;if(Tr){validateEndpoint("instance",Tr),Lr=Tr.replace(/\/$/,"").replace(`/${Ar}/api.php`,""),Mr=`${Lr}/${Ar}/api.php`;const zr=buildUrlFactory(Mr);Pr={searchEntities:searchEntitiesFactory(zr),cirrusSearchPages:cirrusSearchPagesFactory(zr),getEntities:getEntitiesFactory(zr),getManyEntities:getManyEntitiesFactory(zr),getRevisions:getRevisionsFactory(zr),getEntityRevision:getEntityRevisionFactory(Tr,Ar),getEntitiesFromSitelinks:getEntitiesFromSitelinksFactory(zr)}}else Pr={searchEntities:missingInstance("searchEntities"),cirrusSearchPages:missingInstance("cirrusSearchPages"),getEntities:missingInstance("getEntities"),getManyEntities:missingInstance("getManyEntities"),getRevisions:missingInstance("getRevisions"),getEntityRevision:missingInstance("getEntityRevision"),getEntitiesFromSitelinks:missingInstance("getEntitiesFromSitelinks")};let Fr;return Rr?(validateEndpoint("sparqlEndpoint",Rr),Fr={sparqlQuery:sparqlQueryFactory(Rr),getReverseClaims:getReverseClaimsFactory(Rr)}):Fr={sparqlQuery:missingSparqlEndpoint("sparqlQuery"),getReverseClaims:missingSparqlEndpoint("getReverseClaims")},Object.assign(Object.assign(Object.assign({instance:{root:Lr,apiEndpoint:Mr}},common),Pr),Fr)}const validateEndpoint=(_r,Tr)=>{if(!(typeof Tr=="string"&&Tr.startsWith("http")))throw new Error(`invalid ${_r}: ${Tr}`)},missingConfig=_r=>Tr=>()=>{throw new Error(`${Tr} requires ${_r} to be set at initialization`)},missingSparqlEndpoint=missingConfig("a sparqlEndpoint"),missingInstance=missingConfig("an instance"),api={sparqlQuery:()=>{const _r=WBK({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"}),Ar=`
    SELECT ?work ?workLabel (YEAR(?inception) as ?year) ?countryLabel ?locationLabel ?iiif
    WHERE
    {
      ?work wdt:P31 wd:Q3305213.
      ?work wdt:P17 ?country.
      ?work wdt:P186 wd:Q12321255.
      ?work wdt:P571 ?inception.
      ?work wdt:P276 ?location.
      ?work wdt:P6108 ?iiif
    FILTER (?country IN ( wd:Q31, wd:Q213, wd:Q35, wd:Q142, wd:Q36, wd:Q39, wd:Q32, wd:Q40, wd:Q55 ) )
    SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en" }
    }
    ORDER BY ?year ?work ?workLabel
    LIMIT 10
    `;return _r.sparqlQuery(Ar)}};/*! For license information please see browser.mjs.LICENSE.txt */var __webpack_modules__={486:function(_r,Tr,Rr){var Ar;_r=Rr.nmd(_r),(function(){var Pr,Lr="Expected a function",Mr="__lodash_hash_undefined__",Fr="__lodash_placeholder__",zr=32,Ur=128,Vr=1/0,Nr=9007199254740991,Dr=NaN,jr=4294967295,Gr=[["ary",Ur],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",zr],["partialRight",64],["rearg",256]],Wr="[object Arguments]",qr="[object Array]",Kr="[object Boolean]",Xr="[object Date]",Zr="[object Error]",Jr="[object Function]",_i="[object GeneratorFunction]",es="[object Map]",ts="[object Number]",rs="[object Object]",ns="[object Promise]",as="[object RegExp]",ls="[object Set]",us="[object String]",xs="[object Symbol]",Ts="[object WeakMap]",vs="[object ArrayBuffer]",gs="[object DataView]",fs="[object Float32Array]",ys="[object Float64Array]",ks="[object Int8Array]",Fs="[object Int16Array]",Us="[object Int32Array]",Vs="[object Uint8Array]",ao="[object Uint8ClampedArray]",qs="[object Uint16Array]",Qs="[object Uint32Array]",mo=/\b__p \+= '';/g,Xs=/\b(__p \+=) '' \+/g,so=/(__e\(.*?\)|\b__t\)) \+\n'';/g,uo=/&(?:amp|lt|gt|quot|#39);/g,bo=/[&<>"']/g,wo=RegExp(uo.source),Co=RegExp(bo.source),ds=/<%-([\s\S]+?)%>/g,Is=/<%([\s\S]+?)%>/g,Gs=/<%=([\s\S]+?)%>/g,to=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,no=/^\w*$/,Ro=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ro=/[\\^$.*+?()[\]{}|]/g,go=RegExp(ro.source),No=/^\s+/,Do=/\s/,To=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Wo=/\{\n\/\* \[wrapped with (.+)\] \*/,ko=/,? & /,$a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Il=/[()=,{}\[\]\/\s]/,eu=/\\(\\)?/g,Fl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Kl=/\w*$/,cu=/^[-+]0x[0-9a-f]+$/i,Vo=/^0b[01]+$/i,Bs=/^\[object .+?Constructor\]$/,Ws=/^0o[0-7]+$/i,ms=/^(?:0|[1-9]\d*)$/,ps=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ps=/($^)/,Ls=/['\n\r\u2028\u2029\\]/g,Zs="\\ud800-\\udfff",Eo="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",yo="\\u2700-\\u27bf",io="a-z\\xdf-\\xf6\\xf8-\\xff",Lo="A-Z\\xc0-\\xd6\\xd8-\\xde",Yo="\\ufe0e\\ufe0f",Go="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ks="["+Zs+"]",$o="["+Go+"]",So="["+Eo+"]",Yl="\\d+",xu="["+yo+"]",ju="["+io+"]",_f="[^"+Zs+Go+Yl+yo+io+Lo+"]",zu="\\ud83c[\\udffb-\\udfff]",_h="[^"+Zs+"]",ep="(?:\\ud83c[\\udde6-\\uddff]){2}",Ru="[\\ud800-\\udbff][\\udc00-\\udfff]",Su="["+Lo+"]",lp="\\u200d",du="(?:"+ju+"|"+_f+")",Dl="(?:"+Su+"|"+_f+")",Hu="(?:['](?:d|ll|m|re|s|t|ve))?",Ou="(?:['](?:D|LL|M|RE|S|T|VE))?",tp="(?:"+So+"|"+zu+")?",up="["+Yo+"]?",cp=up+tp+"(?:"+lp+"(?:"+[_h,ep,Ru].join("|")+")"+up+tp+")*",dp="(?:"+[xu,ep,Ru].join("|")+")"+cp,Rp="(?:"+[_h+So+"?",So,ep,Ru,Ks].join("|")+")",Zu=RegExp("[']","g"),fp=RegExp(So,"g"),Qu=RegExp(zu+"(?="+zu+")|"+Rp+cp,"g"),Vu=RegExp([Su+"?"+ju+"+"+Hu+"(?="+[$o,Su,"$"].join("|")+")",Dl+"+"+Ou+"(?="+[$o,Su+du,"$"].join("|")+")",Su+"?"+du+"+"+Hu,Su+"+"+Ou,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yl,dp].join("|"),"g"),Ol=RegExp("["+lp+Zs+Eo+Yo+"]"),hp=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ap=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ip=-1,Ml={};Ml[fs]=Ml[ys]=Ml[ks]=Ml[Fs]=Ml[Us]=Ml[Vs]=Ml[ao]=Ml[qs]=Ml[Qs]=!0,Ml[Wr]=Ml[qr]=Ml[vs]=Ml[Kr]=Ml[gs]=Ml[Xr]=Ml[Zr]=Ml[Jr]=Ml[es]=Ml[ts]=Ml[rs]=Ml[as]=Ml[ls]=Ml[us]=Ml[Ts]=!1;var Bl={};Bl[Wr]=Bl[qr]=Bl[vs]=Bl[gs]=Bl[Kr]=Bl[Xr]=Bl[fs]=Bl[ys]=Bl[ks]=Bl[Fs]=Bl[Us]=Bl[es]=Bl[ts]=Bl[rs]=Bl[as]=Bl[ls]=Bl[us]=Bl[xs]=Bl[Vs]=Bl[ao]=Bl[qs]=Bl[Qs]=!0,Bl[Zr]=Bl[Jr]=Bl[Ts]=!1;var Nu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},pp=parseFloat,mp=parseInt,Fu=typeof Rr.g=="object"&&Rr.g&&Rr.g.Object===Object&&Rr.g,Pp=typeof self=="object"&&self&&self.Object===Object&&self,tu=Fu||Pp||Function("return this")(),gp=Tr&&!Tr.nodeType&&Tr,iu=gp&&_r&&!_r.nodeType&&_r,yp=iu&&iu.exports===gp,Ju=yp&&Fu.process,Nl=function(){try{return iu&&iu.require&&iu.require("util").types||Ju&&Ju.binding&&Ju.binding("util")}catch{}}(),zl=Nl&&Nl.isArrayBuffer,Eu=Nl&&Nl.isDate,As=Nl&&Nl.isMap,Ds=Nl&&Nl.isRegExp,zs=Nl&&Nl.isSet,eo=Nl&&Nl.isTypedArray;function vo(Js,oo,co){switch(co.length){case 0:return Js.call(oo);case 1:return Js.call(oo,co[0]);case 2:return Js.call(oo,co[0],co[1]);case 3:return Js.call(oo,co[0],co[1],co[2])}return Js.apply(oo,co)}function bs(Js,oo,co,Ao){for(var xa=-1,$l=Js==null?0:Js.length;++xa<$l;){var nu=Js[xa];oo(Ao,nu,co(nu),Js)}return Ao}function os(Js,oo){for(var co=-1,Ao=Js==null?0:Js.length;++co<Ao&&oo(Js[co],co,Js)!==!1;);return Js}function cs(Js,oo){for(var co=Js==null?0:Js.length;co--&&oo(Js[co],co,Js)!==!1;);return Js}function _s(Js,oo){for(var co=-1,Ao=Js==null?0:Js.length;++co<Ao;)if(!oo(Js[co],co,Js))return!1;return!0}function ss(Js,oo){for(var co=-1,Ao=Js==null?0:Js.length,xa=0,$l=[];++co<Ao;){var nu=Js[co];oo(nu,co,Js)&&($l[xa++]=nu)}return $l}function Es(Js,oo){return!(Js==null||!Js.length)&&Mo(Js,oo,0)>-1}function $s(Js,oo,co){for(var Ao=-1,xa=Js==null?0:Js.length;++Ao<xa;)if(co(oo,Js[Ao]))return!0;return!1}function ws(Js,oo){for(var co=-1,Ao=Js==null?0:Js.length,xa=Array(Ao);++co<Ao;)xa[co]=oo(Js[co],co,Js);return xa}function Cs(Js,oo){for(var co=-1,Ao=oo.length,xa=Js.length;++co<Ao;)Js[xa+co]=oo[co];return Js}function Ms(Js,oo,co,Ao){var xa=-1,$l=Js==null?0:Js.length;for(Ao&&$l&&(co=Js[++xa]);++xa<$l;)co=oo(co,Js[xa],xa,Js);return co}function Hs(Js,oo,co,Ao){var xa=Js==null?0:Js.length;for(Ao&&xa&&(co=Js[--xa]);xa--;)co=oo(co,Js[xa],xa,Js);return co}function lo(Js,oo){for(var co=-1,Ao=Js==null?0:Js.length;++co<Ao;)if(oo(Js[co],co,Js))return!0;return!1}var Io=Uo("length");function Oo(Js,oo,co){var Ao;return co(Js,function(xa,$l,nu){if(oo(xa,$l,nu))return Ao=$l,!1}),Ao}function qo(Js,oo,co,Ao){for(var xa=Js.length,$l=co+(Ao?1:-1);Ao?$l--:++$l<xa;)if(oo(Js[$l],$l,Js))return $l;return-1}function Mo(Js,oo,co){return oo==oo?function(Ao,xa,$l){for(var nu=$l-1,np=Ao.length;++nu<np;)if(Ao[nu]===xa)return nu;return-1}(Js,oo,co):qo(Js,Xo,co)}function Qo(Js,oo,co,Ao){for(var xa=co-1,$l=Js.length;++xa<$l;)if(Ao(Js[xa],oo))return xa;return-1}function Xo(Js){return Js!=Js}function Ko(Js,oo){var co=Js==null?0:Js.length;return co?Jo(Js,oo)/co:Dr}function Uo(Js){return function(oo){return oo==null?Pr:oo[Js]}}function jo(Js){return function(oo){return Js==null?Pr:Js[oo]}}function zo(Js,oo,co,Ao,xa){return xa(Js,function($l,nu,np){co=Ao?(Ao=!1,$l):oo(co,$l,nu,np)}),co}function Jo(Js,oo){for(var co,Ao=-1,xa=Js.length;++Ao<xa;){var $l=oo(Js[Ao]);$l!==Pr&&(co=co===Pr?$l:co+$l)}return co}function Ho(Js,oo){for(var co=-1,Ao=Array(Js);++co<Js;)Ao[co]=oo(co);return Ao}function yl(Js){return Js&&Js.slice(0,vm(Js)+1).replace(No,"")}function _l(Js){return function(oo){return Js(oo)}}function Vl(Js,oo){return ws(oo,function(co){return Js[co]})}function Rl(Js,oo){return Js.has(oo)}function Ql(Js,oo){for(var co=-1,Ao=Js.length;++co<Ao&&Mo(oo,Js[co],0)>-1;);return co}function Wl(Js,oo){for(var co=Js.length;co--&&Mo(oo,Js[co],0)>-1;);return co}var mu=jo({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),fu=jo({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function wu(Js){return"\\"+Nu[Js]}function ou(Js){return Ol.test(Js)}function xl(Js){var oo=-1,co=Array(Js.size);return Js.forEach(function(Ao,xa){co[++oo]=[xa,Ao]}),co}function Pl(Js,oo){return function(co){return Js(oo(co))}}function Jl(Js,oo){for(var co=-1,Ao=Js.length,xa=0,$l=[];++co<Ao;){var nu=Js[co];nu!==oo&&nu!==Fr||(Js[co]=Fr,$l[xa++]=co)}return $l}function hu(Js){var oo=-1,co=Array(Js.size);return Js.forEach(function(Ao){co[++oo]=Ao}),co}function gu(Js){var oo=-1,co=Array(Js.size);return Js.forEach(function(Ao){co[++oo]=[Ao,Ao]}),co}function pu(Js){return ou(Js)?function(oo){for(var co=Qu.lastIndex=0;Qu.test(oo);)++co;return co}(Js):Io(Js)}function au(Js){return ou(Js)?function(oo){return oo.match(Qu)||[]}(Js):function(oo){return oo.split("")}(Js)}function vm(Js){for(var oo=Js.length;oo--&&Do.test(Js.charAt(oo)););return oo}var vp=jo({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Kp=function Js(oo){var co,Ao=(oo=oo==null?tu:Kp.defaults(tu.Object(),oo,Kp.pick(tu,Ap))).Array,xa=oo.Date,$l=oo.Error,nu=oo.Function,np=oo.Math,Xl=oo.Object,o0=oo.RegExp,Xv=oo.String,Gu=oo.TypeError,bm=Ao.prototype,Zv=nu.prototype,Yp=Xl.prototype,xm=oo["__core-js_shared__"],Em=Zv.toString,Gl=Yp.hasOwnProperty,Qv=0,ry=(co=/[^.]+$/.exec(xm&&xm.keys&&xm.keys.IE_PROTO||""))?"Symbol(src)_1."+co:"",wm=Yp.toString,Jv=Em.call(Xl),e1=tu._,t1=o0("^"+Em.call(Gl).replace(ro,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tm=yp?oo.Buffer:Pr,Op=oo.Symbol,Sm=oo.Uint8Array,iy=Tm?Tm.allocUnsafe:Pr,_m=Pl(Xl.getPrototypeOf,Xl),sy=Xl.create,oy=Yp.propertyIsEnumerable,$m=bm.splice,ay=Op?Op.isConcatSpreadable:Pr,im=Op?Op.iterator:Pr,Bp=Op?Op.toStringTag:Pr,Cm=function(){try{var Yr=Vp(Xl,"defineProperty");return Yr({},"",{}),Yr}catch{}}(),n1=oo.clearTimeout!==tu.clearTimeout&&oo.clearTimeout,r1=xa&&xa.now!==tu.Date.now&&xa.now,i1=oo.setTimeout!==tu.setTimeout&&oo.setTimeout,Rm=np.ceil,Am=np.floor,a0=Xl.getOwnPropertySymbols,s1=Tm?Tm.isBuffer:Pr,ly=oo.isFinite,o1=bm.join,a1=Pl(Xl.keys,Xl),yu=np.max,_u=np.min,l1=xa.now,u1=oo.parseInt,uy=np.random,c1=bm.reverse,l0=Vp(oo,"DataView"),sm=Vp(oo,"Map"),u0=Vp(oo,"Promise"),Xp=Vp(oo,"Set"),om=Vp(oo,"WeakMap"),am=Vp(Xl,"create"),Im=om&&new om,Zp={},d1=Gp(l0),f1=Gp(sm),h1=Gp(u0),p1=Gp(Xp),m1=Gp(om),Pm=Op?Op.prototype:Pr,lm=Pm?Pm.valueOf:Pr,cy=Pm?Pm.toString:Pr;function Rs(Yr){if(su(Yr)&&!Sl(Yr)&&!(Yr instanceof Ll)){if(Yr instanceof Wu)return Yr;if(Gl.call(Yr,"__wrapped__"))return fv(Yr)}return new Wu(Yr)}var Qp=function(){function Yr(){}return function(Qr){if(!ru(Qr))return{};if(sy)return sy(Qr);Yr.prototype=Qr;var is=new Yr;return Yr.prototype=Pr,is}}();function Om(){}function Wu(Yr,Qr){this.__wrapped__=Yr,this.__actions__=[],this.__chain__=!!Qr,this.__index__=0,this.__values__=Pr}function Ll(Yr){this.__wrapped__=Yr,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=jr,this.__views__=[]}function Up(Yr){var Qr=-1,is=Yr==null?0:Yr.length;for(this.clear();++Qr<is;){var hs=Yr[Qr];this.set(hs[0],hs[1])}}function bp(Yr){var Qr=-1,is=Yr==null?0:Yr.length;for(this.clear();++Qr<is;){var hs=Yr[Qr];this.set(hs[0],hs[1])}}function xp(Yr){var Qr=-1,is=Yr==null?0:Yr.length;for(this.clear();++Qr<is;){var hs=Yr[Qr];this.set(hs[0],hs[1])}}function jp(Yr){var Qr=-1,is=Yr==null?0:Yr.length;for(this.__data__=new xp;++Qr<is;)this.add(Yr[Qr])}function _c(Yr){var Qr=this.__data__=new bp(Yr);this.size=Qr.size}function dy(Yr,Qr){var is=Sl(Yr),hs=!is&&Wp(Yr),Ss=!is&&!hs&&Np(Yr),Os=!is&&!hs&&!Ss&&nm(Yr),Ns=is||hs||Ss||Os,js=Ns?Ho(Yr.length,Xv):[],Ys=js.length;for(var ho in Yr)!Qr&&!Gl.call(Yr,ho)||Ns&&(ho=="length"||Ss&&(ho=="offset"||ho=="parent")||Os&&(ho=="buffer"||ho=="byteLength"||ho=="byteOffset")||Sp(ho,Ys))||js.push(ho);return js}function fy(Yr){var Qr=Yr.length;return Qr?Yr[x0(0,Qr-1)]:Pr}function g1(Yr,Qr){return Wm(ku(Yr),zp(Qr,0,Yr.length))}function y1(Yr){return Wm(ku(Yr))}function c0(Yr,Qr,is){(is!==Pr&&!_d(Yr[Qr],is)||is===Pr&&!(Qr in Yr))&&Ep(Yr,Qr,is)}function um(Yr,Qr,is){var hs=Yr[Qr];Gl.call(Yr,Qr)&&_d(hs,is)&&(is!==Pr||Qr in Yr)||Ep(Yr,Qr,is)}function km(Yr,Qr){for(var is=Yr.length;is--;)if(_d(Yr[is][0],Qr))return is;return-1}function v1(Yr,Qr,is,hs){return kp(Yr,function(Ss,Os,Ns){Qr(hs,Ss,is(Ss),Ns)}),hs}function hy(Yr,Qr){return Yr&&ip(Qr,bu(Qr),Yr)}function Ep(Yr,Qr,is){Qr=="__proto__"&&Cm?Cm(Yr,Qr,{configurable:!0,enumerable:!0,value:is,writable:!0}):Yr[Qr]=is}function d0(Yr,Qr){for(var is=-1,hs=Qr.length,Ss=Ao(hs),Os=Yr==null;++is<hs;)Ss[is]=Os?Pr:q0(Yr,Qr[is]);return Ss}function zp(Yr,Qr,is){return Yr==Yr&&(is!==Pr&&(Yr=Yr<=is?Yr:is),Qr!==Pr&&(Yr=Yr>=Qr?Yr:Qr)),Yr}function qu(Yr,Qr,is,hs,Ss,Os){var Ns,js=1&Qr,Ys=2&Qr,ho=4&Qr;if(is&&(Ns=Ss?is(Yr,hs,Ss,Os):is(Yr)),Ns!==Pr)return Ns;if(!ru(Yr))return Yr;var fo=Sl(Yr);if(fo){if(Ns=function(po){var _o=po.length,ga=new po.constructor(_o);return _o&&typeof po[0]=="string"&&Gl.call(po,"index")&&(ga.index=po.index,ga.input=po.input),ga}(Yr),!js)return ku(Yr,Ns)}else{var xo=$u(Yr),Fo=xo==Jr||xo==_i;if(Np(Yr))return Fy(Yr,js);if(xo==rs||xo==Wr||Fo&&!Ss){if(Ns=Ys||Fo?{}:rv(Yr),!js)return Ys?function(po,_o){return ip(po,tv(po),_o)}(Yr,function(po,_o){return po&&ip(_o,Du(_o),po)}(Ns,Yr)):function(po,_o){return ip(po,L0(po),_o)}(Yr,hy(Ns,Yr))}else{if(!Bl[xo])return Ss?Yr:{};Ns=function(po,_o,ga){var Po,Tl=po.constructor;switch(_o){case vs:return C0(po);case Kr:case Xr:return new Tl(+po);case gs:return function(El,Ul){var Zo=Ul?C0(El.buffer):El.buffer;return new El.constructor(Zo,El.byteOffset,El.byteLength)}(po,ga);case fs:case ys:case ks:case Fs:case Us:case Vs:case ao:case qs:case Qs:return By(po,ga);case es:return new Tl;case ts:case us:return new Tl(po);case as:return function(El){var Ul=new El.constructor(El.source,Kl.exec(El));return Ul.lastIndex=El.lastIndex,Ul}(po);case ls:return new Tl;case xs:return Po=po,lm?Xl(lm.call(Po)):{}}}(Yr,xo,js)}}Os||(Os=new _c);var Bo=Os.get(Yr);if(Bo)return Bo;Os.set(Yr,Ns),Iv(Yr)?Yr.forEach(function(po){Ns.add(qu(po,Qr,is,po,Yr,Os))}):Rv(Yr)&&Yr.forEach(function(po,_o){Ns.set(_o,qu(po,Qr,is,_o,Yr,Os))});var na=fo?Pr:(ho?Ys?P0:I0:Ys?Du:bu)(Yr);return os(na||Yr,function(po,_o){na&&(po=Yr[_o=po]),um(Ns,_o,qu(po,Qr,is,_o,Yr,Os))}),Ns}function py(Yr,Qr,is){var hs=is.length;if(Yr==null)return!hs;for(Yr=Xl(Yr);hs--;){var Ss=is[hs],Os=Qr[Ss],Ns=Yr[Ss];if(Ns===Pr&&!(Ss in Yr)||!Os(Ns))return!1}return!0}function gy(Yr,Qr,is){if(typeof Yr!="function")throw new Gu(Lr);return gm(function(){Yr.apply(Pr,is)},Qr)}function cm(Yr,Qr,is,hs){var Ss=-1,Os=Es,Ns=!0,js=Yr.length,Ys=[],ho=Qr.length;if(!js)return Ys;is&&(Qr=ws(Qr,_l(is))),hs?(Os=$s,Ns=!1):Qr.length>=200&&(Os=Rl,Ns=!1,Qr=new jp(Qr));e:for(;++Ss<js;){var fo=Yr[Ss],xo=is==null?fo:is(fo);if(fo=hs||fo!==0?fo:0,Ns&&xo==xo){for(var Fo=ho;Fo--;)if(Qr[Fo]===xo)continue e;Ys.push(fo)}else Os(Qr,xo,hs)||Ys.push(fo)}return Ys}Rs.templateSettings={escape:ds,evaluate:Is,interpolate:Gs,variable:"",imports:{_:Rs}},Rs.prototype=Om.prototype,Rs.prototype.constructor=Rs,Wu.prototype=Qp(Om.prototype),Wu.prototype.constructor=Wu,Ll.prototype=Qp(Om.prototype),Ll.prototype.constructor=Ll,Up.prototype.clear=function(){this.__data__=am?am(null):{},this.size=0},Up.prototype.delete=function(Yr){var Qr=this.has(Yr)&&delete this.__data__[Yr];return this.size-=Qr?1:0,Qr},Up.prototype.get=function(Yr){var Qr=this.__data__;if(am){var is=Qr[Yr];return is===Mr?Pr:is}return Gl.call(Qr,Yr)?Qr[Yr]:Pr},Up.prototype.has=function(Yr){var Qr=this.__data__;return am?Qr[Yr]!==Pr:Gl.call(Qr,Yr)},Up.prototype.set=function(Yr,Qr){var is=this.__data__;return this.size+=this.has(Yr)?0:1,is[Yr]=am&&Qr===Pr?Mr:Qr,this},bp.prototype.clear=function(){this.__data__=[],this.size=0},bp.prototype.delete=function(Yr){var Qr=this.__data__,is=km(Qr,Yr);return!(is<0||(is==Qr.length-1?Qr.pop():$m.call(Qr,is,1),--this.size,0))},bp.prototype.get=function(Yr){var Qr=this.__data__,is=km(Qr,Yr);return is<0?Pr:Qr[is][1]},bp.prototype.has=function(Yr){return km(this.__data__,Yr)>-1},bp.prototype.set=function(Yr,Qr){var is=this.__data__,hs=km(is,Yr);return hs<0?(++this.size,is.push([Yr,Qr])):is[hs][1]=Qr,this},xp.prototype.clear=function(){this.size=0,this.__data__={hash:new Up,map:new(sm||bp),string:new Up}},xp.prototype.delete=function(Yr){var Qr=Gm(this,Yr).delete(Yr);return this.size-=Qr?1:0,Qr},xp.prototype.get=function(Yr){return Gm(this,Yr).get(Yr)},xp.prototype.has=function(Yr){return Gm(this,Yr).has(Yr)},xp.prototype.set=function(Yr,Qr){var is=Gm(this,Yr),hs=is.size;return is.set(Yr,Qr),this.size+=is.size==hs?0:1,this},jp.prototype.add=jp.prototype.push=function(Yr){return this.__data__.set(Yr,Mr),this},jp.prototype.has=function(Yr){return this.__data__.has(Yr)},_c.prototype.clear=function(){this.__data__=new bp,this.size=0},_c.prototype.delete=function(Yr){var Qr=this.__data__,is=Qr.delete(Yr);return this.size=Qr.size,is},_c.prototype.get=function(Yr){return this.__data__.get(Yr)},_c.prototype.has=function(Yr){return this.__data__.has(Yr)},_c.prototype.set=function(Yr,Qr){var is=this.__data__;if(is instanceof bp){var hs=is.__data__;if(!sm||hs.length<199)return hs.push([Yr,Qr]),this.size=++is.size,this;is=this.__data__=new xp(hs)}return is.set(Yr,Qr),this.size=is.size,this};var kp=Hy(rp),yy=Hy(h0,!0);function b1(Yr,Qr){var is=!0;return kp(Yr,function(hs,Ss,Os){return is=!!Qr(hs,Ss,Os)}),is}function Lm(Yr,Qr,is){for(var hs=-1,Ss=Yr.length;++hs<Ss;){var Os=Yr[hs],Ns=Qr(Os);if(Ns!=null&&(js===Pr?Ns==Ns&&!Uu(Ns):is(Ns,js)))var js=Ns,Ys=Os}return Ys}function vy(Yr,Qr){var is=[];return kp(Yr,function(hs,Ss,Os){Qr(hs,Ss,Os)&&is.push(hs)}),is}function Tu(Yr,Qr,is,hs,Ss){var Os=-1,Ns=Yr.length;for(is||(is=I1),Ss||(Ss=[]);++Os<Ns;){var js=Yr[Os];Qr>0&&is(js)?Qr>1?Tu(js,Qr-1,is,hs,Ss):Cs(Ss,js):hs||(Ss[Ss.length]=js)}return Ss}var f0=Vy(),by=Vy(!0);function rp(Yr,Qr){return Yr&&f0(Yr,Qr,bu)}function h0(Yr,Qr){return Yr&&by(Yr,Qr,bu)}function Dm(Yr,Qr){return ss(Qr,function(is){return _p(Yr[is])})}function Hp(Yr,Qr){for(var is=0,hs=(Qr=Dp(Qr,Yr)).length;Yr!=null&&is<hs;)Yr=Yr[sp(Qr[is++])];return is&&is==hs?Yr:Pr}function xy(Yr,Qr,is){var hs=Qr(Yr);return Sl(Yr)?hs:Cs(hs,is(Yr))}function Au(Yr){return Yr==null?Yr===Pr?"[object Undefined]":"[object Null]":Bp&&Bp in Xl(Yr)?function(Qr){var is=Gl.call(Qr,Bp),hs=Qr[Bp];try{Qr[Bp]=Pr;var Ss=!0}catch{}var Os=wm.call(Qr);return Ss&&(is?Qr[Bp]=hs:delete Qr[Bp]),Os}(Yr):function(Qr){return wm.call(Qr)}(Yr)}function p0(Yr,Qr){return Yr>Qr}function x1(Yr,Qr){return Yr!=null&&Gl.call(Yr,Qr)}function E1(Yr,Qr){return Yr!=null&&Qr in Xl(Yr)}function m0(Yr,Qr,is){for(var hs=is?$s:Es,Ss=Yr[0].length,Os=Yr.length,Ns=Os,js=Ao(Os),Ys=1/0,ho=[];Ns--;){var fo=Yr[Ns];Ns&&Qr&&(fo=ws(fo,_l(Qr))),Ys=_u(fo.length,Ys),js[Ns]=!is&&(Qr||Ss>=120&&fo.length>=120)?new jp(Ns&&fo):Pr}fo=Yr[0];var xo=-1,Fo=js[0];e:for(;++xo<Ss&&ho.length<Ys;){var Bo=fo[xo],na=Qr?Qr(Bo):Bo;if(Bo=is||Bo!==0?Bo:0,!(Fo?Rl(Fo,na):hs(ho,na,is))){for(Ns=Os;--Ns;){var po=js[Ns];if(!(po?Rl(po,na):hs(Yr[Ns],na,is)))continue e}Fo&&Fo.push(na),ho.push(Bo)}}return ho}function dm(Yr,Qr,is){var hs=(Yr=av(Yr,Qr=Dp(Qr,Yr)))==null?Yr:Yr[sp(Yu(Qr))];return hs==null?Pr:vo(hs,Yr,is)}function Ey(Yr){return su(Yr)&&Au(Yr)==Wr}function fm(Yr,Qr,is,hs,Ss){return Yr===Qr||(Yr==null||Qr==null||!su(Yr)&&!su(Qr)?Yr!=Yr&&Qr!=Qr:function(Os,Ns,js,Ys,ho,fo){var xo=Sl(Os),Fo=Sl(Ns),Bo=xo?qr:$u(Os),na=Fo?qr:$u(Ns),po=(Bo=Bo==Wr?rs:Bo)==rs,_o=(na=na==Wr?rs:na)==rs,ga=Bo==na;if(ga&&Np(Os)){if(!Np(Ns))return!1;xo=!0,po=!1}if(ga&&!po)return fo||(fo=new _c),xo||nm(Os)?ev(Os,Ns,js,Ys,ho,fo):function(Zo,_a,vu,uu,Pu,Zl,Cu){switch(vu){case gs:if(Zo.byteLength!=_a.byteLength||Zo.byteOffset!=_a.byteOffset)return!1;Zo=Zo.buffer,_a=_a.buffer;case vs:return!(Zo.byteLength!=_a.byteLength||!Zl(new Sm(Zo),new Sm(_a)));case Kr:case Xr:case ts:return _d(+Zo,+_a);case Zr:return Zo.name==_a.name&&Zo.message==_a.message;case as:case us:return Zo==_a+"";case es:var op=xl;case ls:var Fp=1&uu;if(op||(op=hu),Zo.size!=_a.size&&!Fp)return!1;var qp=Cu.get(Zo);if(qp)return qp==_a;uu|=2,Cu.set(Zo,_a);var Cp=ev(op(Zo),op(_a),uu,Pu,Zl,Cu);return Cu.delete(Zo),Cp;case xs:if(lm)return lm.call(Zo)==lm.call(_a)}return!1}(Os,Ns,Bo,js,Ys,ho,fo);if(!(1&js)){var Po=po&&Gl.call(Os,"__wrapped__"),Tl=_o&&Gl.call(Ns,"__wrapped__");if(Po||Tl){var El=Po?Os.value():Os,Ul=Tl?Ns.value():Ns;return fo||(fo=new _c),ho(El,Ul,js,Ys,fo)}}return!!ga&&(fo||(fo=new _c),function(Zo,_a,vu,uu,Pu,Zl){var Cu=1&vu,op=I0(Zo),Fp=op.length;if(Fp!=I0(_a).length&&!Cu)return!1;for(var qp=Fp;qp--;){var Cp=op[qp];if(!(Cu?Cp in _a:Gl.call(_a,Cp)))return!1}var Vv=Zl.get(Zo),Gv=Zl.get(_a);if(Vv&&Gv)return Vv==_a&&Gv==Zo;var t0=!0;Zl.set(Zo,_a),Zl.set(_a,Zo);for(var ny=Cu;++qp<Fp;){var n0=Zo[Cp=op[qp]],r0=_a[Cp];if(uu)var Wv=Cu?uu(r0,n0,Cp,_a,Zo,Zl):uu(n0,r0,Cp,Zo,_a,Zl);if(!(Wv===Pr?n0===r0||Pu(n0,r0,vu,uu,Zl):Wv)){t0=!1;break}ny||(ny=Cp=="constructor")}if(t0&&!ny){var i0=Zo.constructor,s0=_a.constructor;i0==s0||!("constructor"in Zo)||!("constructor"in _a)||typeof i0=="function"&&i0 instanceof i0&&typeof s0=="function"&&s0 instanceof s0||(t0=!1)}return Zl.delete(Zo),Zl.delete(_a),t0}(Os,Ns,js,Ys,ho,fo))}(Yr,Qr,is,hs,fm,Ss))}function g0(Yr,Qr,is,hs){var Ss=is.length,Os=Ss,Ns=!hs;if(Yr==null)return!Os;for(Yr=Xl(Yr);Ss--;){var js=is[Ss];if(Ns&&js[2]?js[1]!==Yr[js[0]]:!(js[0]in Yr))return!1}for(;++Ss<Os;){var Ys=(js=is[Ss])[0],ho=Yr[Ys],fo=js[1];if(Ns&&js[2]){if(ho===Pr&&!(Ys in Yr))return!1}else{var xo=new _c;if(hs)var Fo=hs(ho,fo,Ys,Yr,Qr,xo);if(!(Fo===Pr?fm(fo,ho,3,hs,xo):Fo))return!1}}return!0}function wy(Yr){return!(!ru(Yr)||(Qr=Yr,ry&&ry in Qr))&&(_p(Yr)?t1:Bs).test(Gp(Yr));var Qr}function Ty(Yr){return typeof Yr=="function"?Yr:Yr==null?Mu:typeof Yr=="object"?Sl(Yr)?$y(Yr[0],Yr[1]):_y(Yr):Hv(Yr)}function y0(Yr){if(!mm(Yr))return a1(Yr);var Qr=[];for(var is in Xl(Yr))Gl.call(Yr,is)&&is!="constructor"&&Qr.push(is);return Qr}function v0(Yr,Qr){return Yr<Qr}function Sy(Yr,Qr){var is=-1,hs=Lu(Yr)?Ao(Yr.length):[];return kp(Yr,function(Ss,Os,Ns){hs[++is]=Qr(Ss,Os,Ns)}),hs}function _y(Yr){var Qr=k0(Yr);return Qr.length==1&&Qr[0][2]?sv(Qr[0][0],Qr[0][1]):function(is){return is===Yr||g0(is,Yr,Qr)}}function $y(Yr,Qr){return D0(Yr)&&iv(Qr)?sv(sp(Yr),Qr):function(is){var hs=q0(is,Yr);return hs===Pr&&hs===Qr?K0(is,Yr):fm(Qr,hs,3)}}function Mm(Yr,Qr,is,hs,Ss){Yr!==Qr&&f0(Qr,function(Os,Ns){if(Ss||(Ss=new _c),ru(Os))(function(Ys,ho,fo,xo,Fo,Bo,na){var po=N0(Ys,fo),_o=N0(ho,fo),ga=na.get(_o);if(ga)c0(Ys,fo,ga);else{var Po=Bo?Bo(po,_o,fo+"",Ys,ho,na):Pr,Tl=Po===Pr;if(Tl){var El=Sl(_o),Ul=!El&&Np(_o),Zo=!El&&!Ul&&nm(_o);Po=_o,El||Ul||Zo?Sl(po)?Po=po:lu(po)?Po=ku(po):Ul?(Tl=!1,Po=Fy(_o,!0)):Zo?(Tl=!1,Po=By(_o,!0)):Po=[]:ym(_o)||Wp(_o)?(Po=po,Wp(po)?Po=kv(po):ru(po)&&!_p(po)||(Po=rv(_o))):Tl=!1}Tl&&(na.set(_o,Po),Fo(Po,_o,xo,Bo,na),na.delete(_o)),c0(Ys,fo,Po)}})(Yr,Qr,Ns,is,Mm,hs,Ss);else{var js=hs?hs(N0(Yr,Ns),Os,Ns+"",Yr,Qr,Ss):Pr;js===Pr&&(js=Os),c0(Yr,Ns,js)}},Du)}function Cy(Yr,Qr){var is=Yr.length;if(is)return Sp(Qr+=Qr<0?is:0,is)?Yr[Qr]:Pr}function Ry(Yr,Qr,is){Qr=Qr.length?ws(Qr,function(Os){return Sl(Os)?function(Ns){return Hp(Ns,Os.length===1?Os[0]:Os)}:Os}):[Mu];var hs=-1;Qr=ws(Qr,_l(ba()));var Ss=Sy(Yr,function(Os,Ns,js){var Ys=ws(Qr,function(ho){return ho(Os)});return{criteria:Ys,index:++hs,value:Os}});return function(Os,Ns){var js=Os.length;for(Os.sort(function(Ys,ho){return function(fo,xo,Fo){for(var Bo=-1,na=fo.criteria,po=xo.criteria,_o=na.length,ga=Fo.length;++Bo<_o;){var Po=Uy(na[Bo],po[Bo]);if(Po)return Bo>=ga?Po:Po*(Fo[Bo]=="desc"?-1:1)}return fo.index-xo.index}(Ys,ho,is)});js--;)Os[js]=Os[js].value;return Os}(Ss)}function Ay(Yr,Qr,is){for(var hs=-1,Ss=Qr.length,Os={};++hs<Ss;){var Ns=Qr[hs],js=Hp(Yr,Ns);is(js,Ns)&&hm(Os,Dp(Ns,Yr),js)}return Os}function b0(Yr,Qr,is,hs){var Ss=hs?Qo:Mo,Os=-1,Ns=Qr.length,js=Yr;for(Yr===Qr&&(Qr=ku(Qr)),is&&(js=ws(Yr,_l(is)));++Os<Ns;)for(var Ys=0,ho=Qr[Os],fo=is?is(ho):ho;(Ys=Ss(js,fo,Ys,hs))>-1;)js!==Yr&&$m.call(js,Ys,1),$m.call(Yr,Ys,1);return Yr}function Iy(Yr,Qr){for(var is=Yr?Qr.length:0,hs=is-1;is--;){var Ss=Qr[is];if(is==hs||Ss!==Os){var Os=Ss;Sp(Ss)?$m.call(Yr,Ss,1):T0(Yr,Ss)}}return Yr}function x0(Yr,Qr){return Yr+Am(uy()*(Qr-Yr+1))}function E0(Yr,Qr){var is="";if(!Yr||Qr<1||Qr>Nr)return is;do Qr%2&&(is+=Yr),(Qr=Am(Qr/2))&&(Yr+=Yr);while(Qr);return is}function Al(Yr,Qr){return F0(ov(Yr,Qr,Mu),Yr+"")}function w1(Yr){return fy(rm(Yr))}function T1(Yr,Qr){var is=rm(Yr);return Wm(is,zp(Qr,0,is.length))}function hm(Yr,Qr,is,hs){if(!ru(Yr))return Yr;for(var Ss=-1,Os=(Qr=Dp(Qr,Yr)).length,Ns=Os-1,js=Yr;js!=null&&++Ss<Os;){var Ys=sp(Qr[Ss]),ho=is;if(Ys==="__proto__"||Ys==="constructor"||Ys==="prototype")return Yr;if(Ss!=Ns){var fo=js[Ys];(ho=hs?hs(fo,Ys,js):Pr)===Pr&&(ho=ru(fo)?fo:Sp(Qr[Ss+1])?[]:{})}um(js,Ys,ho),js=js[Ys]}return Yr}var Py=Im?function(Yr,Qr){return Im.set(Yr,Qr),Yr}:Mu,S1=Cm?function(Yr,Qr){return Cm(Yr,"toString",{configurable:!0,enumerable:!1,value:X0(Qr),writable:!0})}:Mu;function _1(Yr){return Wm(rm(Yr))}function Ku(Yr,Qr,is){var hs=-1,Ss=Yr.length;Qr<0&&(Qr=-Qr>Ss?0:Ss+Qr),(is=is>Ss?Ss:is)<0&&(is+=Ss),Ss=Qr>is?0:is-Qr>>>0,Qr>>>=0;for(var Os=Ao(Ss);++hs<Ss;)Os[hs]=Yr[hs+Qr];return Os}function $1(Yr,Qr){var is;return kp(Yr,function(hs,Ss,Os){return!(is=Qr(hs,Ss,Os))}),!!is}function Nm(Yr,Qr,is){var hs=0,Ss=Yr==null?hs:Yr.length;if(typeof Qr=="number"&&Qr==Qr&&Ss<=2147483647){for(;hs<Ss;){var Os=hs+Ss>>>1,Ns=Yr[Os];Ns!==null&&!Uu(Ns)&&(is?Ns<=Qr:Ns<Qr)?hs=Os+1:Ss=Os}return Ss}return w0(Yr,Qr,Mu,is)}function w0(Yr,Qr,is,hs){var Ss=0,Os=Yr==null?0:Yr.length;if(Os===0)return 0;for(var Ns=(Qr=is(Qr))!=Qr,js=Qr===null,Ys=Uu(Qr),ho=Qr===Pr;Ss<Os;){var fo=Am((Ss+Os)/2),xo=is(Yr[fo]),Fo=xo!==Pr,Bo=xo===null,na=xo==xo,po=Uu(xo);if(Ns)var _o=hs||na;else _o=ho?na&&(hs||Fo):js?na&&Fo&&(hs||!Bo):Ys?na&&Fo&&!Bo&&(hs||!po):!Bo&&!po&&(hs?xo<=Qr:xo<Qr);_o?Ss=fo+1:Os=fo}return _u(Os,4294967294)}function Oy(Yr,Qr){for(var is=-1,hs=Yr.length,Ss=0,Os=[];++is<hs;){var Ns=Yr[is],js=Qr?Qr(Ns):Ns;if(!is||!_d(js,Ys)){var Ys=js;Os[Ss++]=Ns===0?0:Ns}}return Os}function ky(Yr){return typeof Yr=="number"?Yr:Uu(Yr)?Dr:+Yr}function Bu(Yr){if(typeof Yr=="string")return Yr;if(Sl(Yr))return ws(Yr,Bu)+"";if(Uu(Yr))return cy?cy.call(Yr):"";var Qr=Yr+"";return Qr=="0"&&1/Yr==-1/0?"-0":Qr}function Lp(Yr,Qr,is){var hs=-1,Ss=Es,Os=Yr.length,Ns=!0,js=[],Ys=js;if(is)Ns=!1,Ss=$s;else if(Os>=200){var ho=Qr?null:R1(Yr);if(ho)return hu(ho);Ns=!1,Ss=Rl,Ys=new jp}else Ys=Qr?[]:js;e:for(;++hs<Os;){var fo=Yr[hs],xo=Qr?Qr(fo):fo;if(fo=is||fo!==0?fo:0,Ns&&xo==xo){for(var Fo=Ys.length;Fo--;)if(Ys[Fo]===xo)continue e;Qr&&Ys.push(xo),js.push(fo)}else Ss(Ys,xo,is)||(Ys!==js&&Ys.push(xo),js.push(fo))}return js}function T0(Yr,Qr){return(Yr=av(Yr,Qr=Dp(Qr,Yr)))==null||delete Yr[sp(Yu(Qr))]}function Ly(Yr,Qr,is,hs){return hm(Yr,Qr,is(Hp(Yr,Qr)),hs)}function Fm(Yr,Qr,is,hs){for(var Ss=Yr.length,Os=hs?Ss:-1;(hs?Os--:++Os<Ss)&&Qr(Yr[Os],Os,Yr););return is?Ku(Yr,hs?0:Os,hs?Os+1:Ss):Ku(Yr,hs?Os+1:0,hs?Ss:Os)}function Dy(Yr,Qr){var is=Yr;return is instanceof Ll&&(is=is.value()),Ms(Qr,function(hs,Ss){return Ss.func.apply(Ss.thisArg,Cs([hs],Ss.args))},is)}function S0(Yr,Qr,is){var hs=Yr.length;if(hs<2)return hs?Lp(Yr[0]):[];for(var Ss=-1,Os=Ao(hs);++Ss<hs;)for(var Ns=Yr[Ss],js=-1;++js<hs;)js!=Ss&&(Os[Ss]=cm(Os[Ss]||Ns,Yr[js],Qr,is));return Lp(Tu(Os,1),Qr,is)}function My(Yr,Qr,is){for(var hs=-1,Ss=Yr.length,Os=Qr.length,Ns={};++hs<Ss;){var js=hs<Os?Qr[hs]:Pr;is(Ns,Yr[hs],js)}return Ns}function _0(Yr){return lu(Yr)?Yr:[]}function $0(Yr){return typeof Yr=="function"?Yr:Mu}function Dp(Yr,Qr){return Sl(Yr)?Yr:D0(Yr,Qr)?[Yr]:dv(Hl(Yr))}var C1=Al;function Mp(Yr,Qr,is){var hs=Yr.length;return is=is===Pr?hs:is,!Qr&&is>=hs?Yr:Ku(Yr,Qr,is)}var Ny=n1||function(Yr){return tu.clearTimeout(Yr)};function Fy(Yr,Qr){if(Qr)return Yr.slice();var is=Yr.length,hs=iy?iy(is):new Yr.constructor(is);return Yr.copy(hs),hs}function C0(Yr){var Qr=new Yr.constructor(Yr.byteLength);return new Sm(Qr).set(new Sm(Yr)),Qr}function By(Yr,Qr){var is=Qr?C0(Yr.buffer):Yr.buffer;return new Yr.constructor(is,Yr.byteOffset,Yr.length)}function Uy(Yr,Qr){if(Yr!==Qr){var is=Yr!==Pr,hs=Yr===null,Ss=Yr==Yr,Os=Uu(Yr),Ns=Qr!==Pr,js=Qr===null,Ys=Qr==Qr,ho=Uu(Qr);if(!js&&!ho&&!Os&&Yr>Qr||Os&&Ns&&Ys&&!js&&!ho||hs&&Ns&&Ys||!is&&Ys||!Ss)return 1;if(!hs&&!Os&&!ho&&Yr<Qr||ho&&is&&Ss&&!hs&&!Os||js&&is&&Ss||!Ns&&Ss||!Ys)return-1}return 0}function jy(Yr,Qr,is,hs){for(var Ss=-1,Os=Yr.length,Ns=is.length,js=-1,Ys=Qr.length,ho=yu(Os-Ns,0),fo=Ao(Ys+ho),xo=!hs;++js<Ys;)fo[js]=Qr[js];for(;++Ss<Ns;)(xo||Ss<Os)&&(fo[is[Ss]]=Yr[Ss]);for(;ho--;)fo[js++]=Yr[Ss++];return fo}function zy(Yr,Qr,is,hs){for(var Ss=-1,Os=Yr.length,Ns=-1,js=is.length,Ys=-1,ho=Qr.length,fo=yu(Os-js,0),xo=Ao(fo+ho),Fo=!hs;++Ss<fo;)xo[Ss]=Yr[Ss];for(var Bo=Ss;++Ys<ho;)xo[Bo+Ys]=Qr[Ys];for(;++Ns<js;)(Fo||Ss<Os)&&(xo[Bo+is[Ns]]=Yr[Ss++]);return xo}function ku(Yr,Qr){var is=-1,hs=Yr.length;for(Qr||(Qr=Ao(hs));++is<hs;)Qr[is]=Yr[is];return Qr}function ip(Yr,Qr,is,hs){var Ss=!is;is||(is={});for(var Os=-1,Ns=Qr.length;++Os<Ns;){var js=Qr[Os],Ys=hs?hs(is[js],Yr[js],js,is,Yr):Pr;Ys===Pr&&(Ys=Yr[js]),Ss?Ep(is,js,Ys):um(is,js,Ys)}return is}function Bm(Yr,Qr){return function(is,hs){var Ss=Sl(is)?bs:v1,Os=Qr?Qr():{};return Ss(is,Yr,ba(hs,2),Os)}}function Jp(Yr){return Al(function(Qr,is){var hs=-1,Ss=is.length,Os=Ss>1?is[Ss-1]:Pr,Ns=Ss>2?is[2]:Pr;for(Os=Yr.length>3&&typeof Os=="function"?(Ss--,Os):Pr,Ns&&Iu(is[0],is[1],Ns)&&(Os=Ss<3?Pr:Os,Ss=1),Qr=Xl(Qr);++hs<Ss;){var js=is[hs];js&&Yr(Qr,js,hs,Os)}return Qr})}function Hy(Yr,Qr){return function(is,hs){if(is==null)return is;if(!Lu(is))return Yr(is,hs);for(var Ss=is.length,Os=Qr?Ss:-1,Ns=Xl(is);(Qr?Os--:++Os<Ss)&&hs(Ns[Os],Os,Ns)!==!1;);return is}}function Vy(Yr){return function(Qr,is,hs){for(var Ss=-1,Os=Xl(Qr),Ns=hs(Qr),js=Ns.length;js--;){var Ys=Ns[Yr?js:++Ss];if(is(Os[Ys],Ys,Os)===!1)break}return Qr}}function Gy(Yr){return function(Qr){var is=ou(Qr=Hl(Qr))?au(Qr):Pr,hs=is?is[0]:Qr.charAt(0),Ss=is?Mp(is,1).join(""):Qr.slice(1);return hs[Yr]()+Ss}}function em(Yr){return function(Qr){return Ms(jv(Uv(Qr).replace(Zu,"")),Yr,"")}}function pm(Yr){return function(){var Qr=arguments;switch(Qr.length){case 0:return new Yr;case 1:return new Yr(Qr[0]);case 2:return new Yr(Qr[0],Qr[1]);case 3:return new Yr(Qr[0],Qr[1],Qr[2]);case 4:return new Yr(Qr[0],Qr[1],Qr[2],Qr[3]);case 5:return new Yr(Qr[0],Qr[1],Qr[2],Qr[3],Qr[4]);case 6:return new Yr(Qr[0],Qr[1],Qr[2],Qr[3],Qr[4],Qr[5]);case 7:return new Yr(Qr[0],Qr[1],Qr[2],Qr[3],Qr[4],Qr[5],Qr[6])}var is=Qp(Yr.prototype),hs=Yr.apply(is,Qr);return ru(hs)?hs:is}}function Wy(Yr){return function(Qr,is,hs){var Ss=Xl(Qr);if(!Lu(Qr)){var Os=ba(is,3);Qr=bu(Qr),is=function(js){return Os(Ss[js],js,Ss)}}var Ns=Yr(Qr,is,hs);return Ns>-1?Ss[Os?Qr[Ns]:Ns]:Pr}}function qy(Yr){return Tp(function(Qr){var is=Qr.length,hs=is,Ss=Wu.prototype.thru;for(Yr&&Qr.reverse();hs--;){var Os=Qr[hs];if(typeof Os!="function")throw new Gu(Lr);if(Ss&&!Ns&&Vm(Os)=="wrapper")var Ns=new Wu([],!0)}for(hs=Ns?hs:is;++hs<is;){var js=Vm(Os=Qr[hs]),Ys=js=="wrapper"?O0(Os):Pr;Ns=Ys&&M0(Ys[0])&&Ys[1]==424&&!Ys[4].length&&Ys[9]==1?Ns[Vm(Ys[0])].apply(Ns,Ys[3]):Os.length==1&&M0(Os)?Ns[js]():Ns.thru(Os)}return function(){var ho=arguments,fo=ho[0];if(Ns&&ho.length==1&&Sl(fo))return Ns.plant(fo).value();for(var xo=0,Fo=is?Qr[xo].apply(this,ho):fo;++xo<is;)Fo=Qr[xo].call(this,Fo);return Fo}})}function Um(Yr,Qr,is,hs,Ss,Os,Ns,js,Ys,ho){var fo=Qr&Ur,xo=1&Qr,Fo=2&Qr,Bo=24&Qr,na=512&Qr,po=Fo?Pr:pm(Yr);return function _o(){for(var ga=arguments.length,Po=Ao(ga),Tl=ga;Tl--;)Po[Tl]=arguments[Tl];if(Bo)var El=tm(_o),Ul=function(uu,Pu){for(var Zl=uu.length,Cu=0;Zl--;)uu[Zl]===Pu&&++Cu;return Cu}(Po,El);if(hs&&(Po=jy(Po,hs,Ss,Bo)),Os&&(Po=zy(Po,Os,Ns,Bo)),ga-=Ul,Bo&&ga<ho){var Zo=Jl(Po,El);return Xy(Yr,Qr,Um,_o.placeholder,is,Po,Zo,js,Ys,ho-ga)}var _a=xo?is:this,vu=Fo?_a[Yr]:Yr;return ga=Po.length,js?Po=function(uu,Pu){for(var Zl=uu.length,Cu=_u(Pu.length,Zl),op=ku(uu);Cu--;){var Fp=Pu[Cu];uu[Cu]=Sp(Fp,Zl)?op[Fp]:Pr}return uu}(Po,js):na&&ga>1&&Po.reverse(),fo&&Ys<ga&&(Po.length=Ys),this&&this!==tu&&this instanceof _o&&(vu=po||pm(vu)),vu.apply(_a,Po)}}function Ky(Yr,Qr){return function(is,hs){return function(Ss,Os,Ns,js){return rp(Ss,function(Ys,ho,fo){Os(js,Ns(Ys),ho,fo)}),js}(is,Yr,Qr(hs),{})}}function jm(Yr,Qr){return function(is,hs){var Ss;if(is===Pr&&hs===Pr)return Qr;if(is!==Pr&&(Ss=is),hs!==Pr){if(Ss===Pr)return hs;typeof is=="string"||typeof hs=="string"?(is=Bu(is),hs=Bu(hs)):(is=ky(is),hs=ky(hs)),Ss=Yr(is,hs)}return Ss}}function R0(Yr){return Tp(function(Qr){return Qr=ws(Qr,_l(ba())),Al(function(is){var hs=this;return Yr(Qr,function(Ss){return vo(Ss,hs,is)})})})}function zm(Yr,Qr){var is=(Qr=Qr===Pr?" ":Bu(Qr)).length;if(is<2)return is?E0(Qr,Yr):Qr;var hs=E0(Qr,Rm(Yr/pu(Qr)));return ou(Qr)?Mp(au(hs),0,Yr).join(""):hs.slice(0,Yr)}function Yy(Yr){return function(Qr,is,hs){return hs&&typeof hs!="number"&&Iu(Qr,is,hs)&&(is=hs=Pr),Qr=$p(Qr),is===Pr?(is=Qr,Qr=0):is=$p(is),function(Ss,Os,Ns,js){for(var Ys=-1,ho=yu(Rm((Os-Ss)/(Ns||1)),0),fo=Ao(ho);ho--;)fo[js?ho:++Ys]=Ss,Ss+=Ns;return fo}(Qr,is,hs=hs===Pr?Qr<is?1:-1:$p(hs),Yr)}}function Hm(Yr){return function(Qr,is){return typeof Qr=="string"&&typeof is=="string"||(Qr=Xu(Qr),is=Xu(is)),Yr(Qr,is)}}function Xy(Yr,Qr,is,hs,Ss,Os,Ns,js,Ys,ho){var fo=8&Qr;Qr|=fo?zr:64,4&(Qr&=~(fo?64:zr))||(Qr&=-4);var xo=[Yr,Qr,Ss,fo?Os:Pr,fo?Ns:Pr,fo?Pr:Os,fo?Pr:Ns,js,Ys,ho],Fo=is.apply(Pr,xo);return M0(Yr)&&lv(Fo,xo),Fo.placeholder=hs,uv(Fo,Yr,Qr)}function A0(Yr){var Qr=np[Yr];return function(is,hs){if(is=Xu(is),(hs=hs==null?0:_u(Cl(hs),292))&&ly(is)){var Ss=(Hl(is)+"e").split("e");return+((Ss=(Hl(Qr(Ss[0]+"e"+(+Ss[1]+hs)))+"e").split("e"))[0]+"e"+(+Ss[1]-hs))}return Qr(is)}}var R1=Xp&&1/hu(new Xp([,-0]))[1]==Vr?function(Yr){return new Xp(Yr)}:J0;function Zy(Yr){return function(Qr){var is=$u(Qr);return is==es?xl(Qr):is==ls?gu(Qr):function(hs,Ss){return ws(Ss,function(Os){return[Os,hs[Os]]})}(Qr,Yr(Qr))}}function wp(Yr,Qr,is,hs,Ss,Os,Ns,js){var Ys=2&Qr;if(!Ys&&typeof Yr!="function")throw new Gu(Lr);var ho=hs?hs.length:0;if(ho||(Qr&=-97,hs=Ss=Pr),Ns=Ns===Pr?Ns:yu(Cl(Ns),0),js=js===Pr?js:Cl(js),ho-=Ss?Ss.length:0,64&Qr){var fo=hs,xo=Ss;hs=Ss=Pr}var Fo=Ys?Pr:O0(Yr),Bo=[Yr,Qr,is,hs,Ss,fo,xo,Os,Ns,js];if(Fo&&function(po,_o){var ga=po[1],Po=_o[1],Tl=ga|Po,El=Tl<131,Ul=Po==Ur&&ga==8||Po==Ur&&ga==256&&po[7].length<=_o[8]||Po==384&&_o[7].length<=_o[8]&&ga==8;if(!El&&!Ul)return po;1&Po&&(po[2]=_o[2],Tl|=1&ga?0:4);var Zo=_o[3];if(Zo){var _a=po[3];po[3]=_a?jy(_a,Zo,_o[4]):Zo,po[4]=_a?Jl(po[3],Fr):_o[4]}(Zo=_o[5])&&(_a=po[5],po[5]=_a?zy(_a,Zo,_o[6]):Zo,po[6]=_a?Jl(po[5],Fr):_o[6]),(Zo=_o[7])&&(po[7]=Zo),Po&Ur&&(po[8]=po[8]==null?_o[8]:_u(po[8],_o[8])),po[9]==null&&(po[9]=_o[9]),po[0]=_o[0],po[1]=Tl}(Bo,Fo),Yr=Bo[0],Qr=Bo[1],is=Bo[2],hs=Bo[3],Ss=Bo[4],!(js=Bo[9]=Bo[9]===Pr?Ys?0:Yr.length:yu(Bo[9]-ho,0))&&24&Qr&&(Qr&=-25),Qr&&Qr!=1)na=Qr==8||Qr==16?function(po,_o,ga){var Po=pm(po);return function Tl(){for(var El=arguments.length,Ul=Ao(El),Zo=El,_a=tm(Tl);Zo--;)Ul[Zo]=arguments[Zo];var vu=El<3&&Ul[0]!==_a&&Ul[El-1]!==_a?[]:Jl(Ul,_a);return(El-=vu.length)<ga?Xy(po,_o,Um,Tl.placeholder,Pr,Ul,vu,Pr,Pr,ga-El):vo(this&&this!==tu&&this instanceof Tl?Po:po,this,Ul)}}(Yr,Qr,js):Qr!=zr&&Qr!=33||Ss.length?Um.apply(Pr,Bo):function(po,_o,ga,Po){var Tl=1&_o,El=pm(po);return function Ul(){for(var Zo=-1,_a=arguments.length,vu=-1,uu=Po.length,Pu=Ao(uu+_a),Zl=this&&this!==tu&&this instanceof Ul?El:po;++vu<uu;)Pu[vu]=Po[vu];for(;_a--;)Pu[vu++]=arguments[++Zo];return vo(Zl,Tl?ga:this,Pu)}}(Yr,Qr,is,hs);else var na=function(po,_o,ga){var Po=1&_o,Tl=pm(po);return function El(){return(this&&this!==tu&&this instanceof El?Tl:po).apply(Po?ga:this,arguments)}}(Yr,Qr,is);return uv((Fo?Py:lv)(na,Bo),Yr,Qr)}function Qy(Yr,Qr,is,hs){return Yr===Pr||_d(Yr,Yp[is])&&!Gl.call(hs,is)?Qr:Yr}function Jy(Yr,Qr,is,hs,Ss,Os){return ru(Yr)&&ru(Qr)&&(Os.set(Qr,Yr),Mm(Yr,Qr,Pr,Jy,Os),Os.delete(Qr)),Yr}function A1(Yr){return ym(Yr)?Pr:Yr}function ev(Yr,Qr,is,hs,Ss,Os){var Ns=1&is,js=Yr.length,Ys=Qr.length;if(js!=Ys&&!(Ns&&Ys>js))return!1;var ho=Os.get(Yr),fo=Os.get(Qr);if(ho&&fo)return ho==Qr&&fo==Yr;var xo=-1,Fo=!0,Bo=2&is?new jp:Pr;for(Os.set(Yr,Qr),Os.set(Qr,Yr);++xo<js;){var na=Yr[xo],po=Qr[xo];if(hs)var _o=Ns?hs(po,na,xo,Qr,Yr,Os):hs(na,po,xo,Yr,Qr,Os);if(_o!==Pr){if(_o)continue;Fo=!1;break}if(Bo){if(!lo(Qr,function(ga,Po){if(!Rl(Bo,Po)&&(na===ga||Ss(na,ga,is,hs,Os)))return Bo.push(Po)})){Fo=!1;break}}else if(na!==po&&!Ss(na,po,is,hs,Os)){Fo=!1;break}}return Os.delete(Yr),Os.delete(Qr),Fo}function Tp(Yr){return F0(ov(Yr,Pr,mv),Yr+"")}function I0(Yr){return xy(Yr,bu,L0)}function P0(Yr){return xy(Yr,Du,tv)}var O0=Im?function(Yr){return Im.get(Yr)}:J0;function Vm(Yr){for(var Qr=Yr.name+"",is=Zp[Qr],hs=Gl.call(Zp,Qr)?is.length:0;hs--;){var Ss=is[hs],Os=Ss.func;if(Os==null||Os==Yr)return Ss.name}return Qr}function tm(Yr){return(Gl.call(Rs,"placeholder")?Rs:Yr).placeholder}function ba(){var Yr=Rs.iteratee||Z0;return Yr=Yr===Z0?Ty:Yr,arguments.length?Yr(arguments[0],arguments[1]):Yr}function Gm(Yr,Qr){var is,hs,Ss=Yr.__data__;return((hs=typeof(is=Qr))=="string"||hs=="number"||hs=="symbol"||hs=="boolean"?is!=="__proto__":is===null)?Ss[typeof Qr=="string"?"string":"hash"]:Ss.map}function k0(Yr){for(var Qr=bu(Yr),is=Qr.length;is--;){var hs=Qr[is],Ss=Yr[hs];Qr[is]=[hs,Ss,iv(Ss)]}return Qr}function Vp(Yr,Qr){var is=function(hs,Ss){return hs==null?Pr:hs[Ss]}(Yr,Qr);return wy(is)?is:Pr}var L0=a0?function(Yr){return Yr==null?[]:(Yr=Xl(Yr),ss(a0(Yr),function(Qr){return oy.call(Yr,Qr)}))}:_g,tv=a0?function(Yr){for(var Qr=[];Yr;)Cs(Qr,L0(Yr)),Yr=_m(Yr);return Qr}:_g,$u=Au;function nv(Yr,Qr,is){for(var hs=-1,Ss=(Qr=Dp(Qr,Yr)).length,Os=!1;++hs<Ss;){var Ns=sp(Qr[hs]);if(!(Os=Yr!=null&&is(Yr,Ns)))break;Yr=Yr[Ns]}return Os||++hs!=Ss?Os:!!(Ss=Yr==null?0:Yr.length)&&Qm(Ss)&&Sp(Ns,Ss)&&(Sl(Yr)||Wp(Yr))}function rv(Yr){return typeof Yr.constructor!="function"||mm(Yr)?{}:Qp(_m(Yr))}function I1(Yr){return Sl(Yr)||Wp(Yr)||!!(ay&&Yr&&Yr[ay])}function Sp(Yr,Qr){var is=typeof Yr;return!!(Qr=Qr??Nr)&&(is=="number"||is!="symbol"&&ms.test(Yr))&&Yr>-1&&Yr%1==0&&Yr<Qr}function Iu(Yr,Qr,is){if(!ru(is))return!1;var hs=typeof Qr;return!!(hs=="number"?Lu(is)&&Sp(Qr,is.length):hs=="string"&&Qr in is)&&_d(is[Qr],Yr)}function D0(Yr,Qr){if(Sl(Yr))return!1;var is=typeof Yr;return!(is!="number"&&is!="symbol"&&is!="boolean"&&Yr!=null&&!Uu(Yr))||no.test(Yr)||!to.test(Yr)||Qr!=null&&Yr in Xl(Qr)}function M0(Yr){var Qr=Vm(Yr),is=Rs[Qr];if(typeof is!="function"||!(Qr in Ll.prototype))return!1;if(Yr===is)return!0;var hs=O0(is);return!!hs&&Yr===hs[0]}(l0&&$u(new l0(new ArrayBuffer(1)))!=gs||sm&&$u(new sm)!=es||u0&&$u(u0.resolve())!=ns||Xp&&$u(new Xp)!=ls||om&&$u(new om)!=Ts)&&($u=function(Yr){var Qr=Au(Yr),is=Qr==rs?Yr.constructor:Pr,hs=is?Gp(is):"";if(hs)switch(hs){case d1:return gs;case f1:return es;case h1:return ns;case p1:return ls;case m1:return Ts}return Qr});var P1=xm?_p:ey;function mm(Yr){var Qr=Yr&&Yr.constructor;return Yr===(typeof Qr=="function"&&Qr.prototype||Yp)}function iv(Yr){return Yr==Yr&&!ru(Yr)}function sv(Yr,Qr){return function(is){return is!=null&&is[Yr]===Qr&&(Qr!==Pr||Yr in Xl(is))}}function ov(Yr,Qr,is){return Qr=yu(Qr===Pr?Yr.length-1:Qr,0),function(){for(var hs=arguments,Ss=-1,Os=yu(hs.length-Qr,0),Ns=Ao(Os);++Ss<Os;)Ns[Ss]=hs[Qr+Ss];Ss=-1;for(var js=Ao(Qr+1);++Ss<Qr;)js[Ss]=hs[Ss];return js[Qr]=is(Ns),vo(Yr,this,js)}}function av(Yr,Qr){return Qr.length<2?Yr:Hp(Yr,Ku(Qr,0,-1))}function N0(Yr,Qr){if((Qr!=="constructor"||typeof Yr[Qr]!="function")&&Qr!="__proto__")return Yr[Qr]}var lv=cv(Py),gm=i1||function(Yr,Qr){return tu.setTimeout(Yr,Qr)},F0=cv(S1);function uv(Yr,Qr,is){var hs=Qr+"";return F0(Yr,function(Ss,Os){var Ns=Os.length;if(!Ns)return Ss;var js=Ns-1;return Os[js]=(Ns>1?"& ":"")+Os[js],Os=Os.join(Ns>2?", ":" "),Ss.replace(To,`{
/* [wrapped with `+Os+`] */
`)}(hs,function(Ss,Os){return os(Gr,function(Ns){var js="_."+Ns[0];Os&Ns[1]&&!Es(Ss,js)&&Ss.push(js)}),Ss.sort()}(function(Ss){var Os=Ss.match(Wo);return Os?Os[1].split(ko):[]}(hs),is)))}function cv(Yr){var Qr=0,is=0;return function(){var hs=l1(),Ss=16-(hs-is);if(is=hs,Ss>0){if(++Qr>=800)return arguments[0]}else Qr=0;return Yr.apply(Pr,arguments)}}function Wm(Yr,Qr){var is=-1,hs=Yr.length,Ss=hs-1;for(Qr=Qr===Pr?hs:Qr;++is<Qr;){var Os=x0(is,Ss),Ns=Yr[Os];Yr[Os]=Yr[is],Yr[is]=Ns}return Yr.length=Qr,Yr}var B0,U0,dv=(B0=Xm(function(Yr){var Qr=[];return Yr.charCodeAt(0)===46&&Qr.push(""),Yr.replace(Ro,function(is,hs,Ss,Os){Qr.push(Ss?Os.replace(eu,"$1"):hs||is)}),Qr},function(Yr){return U0.size===500&&U0.clear(),Yr}),U0=B0.cache,B0);function sp(Yr){if(typeof Yr=="string"||Uu(Yr))return Yr;var Qr=Yr+"";return Qr=="0"&&1/Yr==-1/0?"-0":Qr}function Gp(Yr){if(Yr!=null){try{return Em.call(Yr)}catch{}try{return Yr+""}catch{}}return""}function fv(Yr){if(Yr instanceof Ll)return Yr.clone();var Qr=new Wu(Yr.__wrapped__,Yr.__chain__);return Qr.__actions__=ku(Yr.__actions__),Qr.__index__=Yr.__index__,Qr.__values__=Yr.__values__,Qr}var O1=Al(function(Yr,Qr){return lu(Yr)?cm(Yr,Tu(Qr,1,lu,!0)):[]}),k1=Al(function(Yr,Qr){var is=Yu(Qr);return lu(is)&&(is=Pr),lu(Yr)?cm(Yr,Tu(Qr,1,lu,!0),ba(is,2)):[]}),L1=Al(function(Yr,Qr){var is=Yu(Qr);return lu(is)&&(is=Pr),lu(Yr)?cm(Yr,Tu(Qr,1,lu,!0),Pr,is):[]});function hv(Yr,Qr,is){var hs=Yr==null?0:Yr.length;if(!hs)return-1;var Ss=is==null?0:Cl(is);return Ss<0&&(Ss=yu(hs+Ss,0)),qo(Yr,ba(Qr,3),Ss)}function pv(Yr,Qr,is){var hs=Yr==null?0:Yr.length;if(!hs)return-1;var Ss=hs-1;return is!==Pr&&(Ss=Cl(is),Ss=is<0?yu(hs+Ss,0):_u(Ss,hs-1)),qo(Yr,ba(Qr,3),Ss,!0)}function mv(Yr){return Yr!=null&&Yr.length?Tu(Yr,1):[]}function gv(Yr){return Yr&&Yr.length?Yr[0]:Pr}var D1=Al(function(Yr){var Qr=ws(Yr,_0);return Qr.length&&Qr[0]===Yr[0]?m0(Qr):[]}),M1=Al(function(Yr){var Qr=Yu(Yr),is=ws(Yr,_0);return Qr===Yu(is)?Qr=Pr:is.pop(),is.length&&is[0]===Yr[0]?m0(is,ba(Qr,2)):[]}),N1=Al(function(Yr){var Qr=Yu(Yr),is=ws(Yr,_0);return(Qr=typeof Qr=="function"?Qr:Pr)&&is.pop(),is.length&&is[0]===Yr[0]?m0(is,Pr,Qr):[]});function Yu(Yr){var Qr=Yr==null?0:Yr.length;return Qr?Yr[Qr-1]:Pr}var F1=Al(yv);function yv(Yr,Qr){return Yr&&Yr.length&&Qr&&Qr.length?b0(Yr,Qr):Yr}var B1=Tp(function(Yr,Qr){var is=Yr==null?0:Yr.length,hs=d0(Yr,Qr);return Iy(Yr,ws(Qr,function(Ss){return Sp(Ss,is)?+Ss:Ss}).sort(Uy)),hs});function j0(Yr){return Yr==null?Yr:c1.call(Yr)}var U1=Al(function(Yr){return Lp(Tu(Yr,1,lu,!0))}),j1=Al(function(Yr){var Qr=Yu(Yr);return lu(Qr)&&(Qr=Pr),Lp(Tu(Yr,1,lu,!0),ba(Qr,2))}),z1=Al(function(Yr){var Qr=Yu(Yr);return Qr=typeof Qr=="function"?Qr:Pr,Lp(Tu(Yr,1,lu,!0),Pr,Qr)});function z0(Yr){if(!Yr||!Yr.length)return[];var Qr=0;return Yr=ss(Yr,function(is){if(lu(is))return Qr=yu(is.length,Qr),!0}),Ho(Qr,function(is){return ws(Yr,Uo(is))})}function vv(Yr,Qr){if(!Yr||!Yr.length)return[];var is=z0(Yr);return Qr==null?is:ws(is,function(hs){return vo(Qr,Pr,hs)})}var H1=Al(function(Yr,Qr){return lu(Yr)?cm(Yr,Qr):[]}),V1=Al(function(Yr){return S0(ss(Yr,lu))}),G1=Al(function(Yr){var Qr=Yu(Yr);return lu(Qr)&&(Qr=Pr),S0(ss(Yr,lu),ba(Qr,2))}),W1=Al(function(Yr){var Qr=Yu(Yr);return Qr=typeof Qr=="function"?Qr:Pr,S0(ss(Yr,lu),Pr,Qr)}),q1=Al(z0),K1=Al(function(Yr){var Qr=Yr.length,is=Qr>1?Yr[Qr-1]:Pr;return is=typeof is=="function"?(Yr.pop(),is):Pr,vv(Yr,is)});function bv(Yr){var Qr=Rs(Yr);return Qr.__chain__=!0,Qr}function qm(Yr,Qr){return Qr(Yr)}var Y1=Tp(function(Yr){var Qr=Yr.length,is=Qr?Yr[0]:0,hs=this.__wrapped__,Ss=function(Os){return d0(Os,Yr)};return!(Qr>1||this.__actions__.length)&&hs instanceof Ll&&Sp(is)?((hs=hs.slice(is,+is+(Qr?1:0))).__actions__.push({func:qm,args:[Ss],thisArg:Pr}),new Wu(hs,this.__chain__).thru(function(Os){return Qr&&!Os.length&&Os.push(Pr),Os})):this.thru(Ss)}),X1=Bm(function(Yr,Qr,is){Gl.call(Yr,is)?++Yr[is]:Ep(Yr,is,1)}),Z1=Wy(hv),Q1=Wy(pv);function xv(Yr,Qr){return(Sl(Yr)?os:kp)(Yr,ba(Qr,3))}function Ev(Yr,Qr){return(Sl(Yr)?cs:yy)(Yr,ba(Qr,3))}var J1=Bm(function(Yr,Qr,is){Gl.call(Yr,is)?Yr[is].push(Qr):Ep(Yr,is,[Qr])}),_b=Al(function(Yr,Qr,is){var hs=-1,Ss=typeof Qr=="function",Os=Lu(Yr)?Ao(Yr.length):[];return kp(Yr,function(Ns){Os[++hs]=Ss?vo(Qr,Ns,is):dm(Ns,Qr,is)}),Os}),ex=Bm(function(Yr,Qr,is){Ep(Yr,is,Qr)});function Km(Yr,Qr){return(Sl(Yr)?ws:Sy)(Yr,ba(Qr,3))}var tx=Bm(function(Yr,Qr,is){Yr[is?0:1].push(Qr)},function(){return[[],[]]}),nx=Al(function(Yr,Qr){if(Yr==null)return[];var is=Qr.length;return is>1&&Iu(Yr,Qr[0],Qr[1])?Qr=[]:is>2&&Iu(Qr[0],Qr[1],Qr[2])&&(Qr=[Qr[0]]),Ry(Yr,Tu(Qr,1),[])}),Ym=r1||function(){return tu.Date.now()};function wv(Yr,Qr,is){return Qr=is?Pr:Qr,Qr=Yr&&Qr==null?Yr.length:Qr,wp(Yr,Ur,Pr,Pr,Pr,Pr,Qr)}function Tv(Yr,Qr){var is;if(typeof Qr!="function")throw new Gu(Lr);return Yr=Cl(Yr),function(){return--Yr>0&&(is=Qr.apply(this,arguments)),Yr<=1&&(Qr=Pr),is}}var H0=Al(function(Yr,Qr,is){var hs=1;if(is.length){var Ss=Jl(is,tm(H0));hs|=zr}return wp(Yr,hs,Qr,is,Ss)}),Sv=Al(function(Yr,Qr,is){var hs=3;if(is.length){var Ss=Jl(is,tm(Sv));hs|=zr}return wp(Qr,hs,Yr,is,Ss)});function _v(Yr,Qr,is){var hs,Ss,Os,Ns,js,Ys,ho=0,fo=!1,xo=!1,Fo=!0;if(typeof Yr!="function")throw new Gu(Lr);function Bo(Po){var Tl=hs,El=Ss;return hs=Ss=Pr,ho=Po,Ns=Yr.apply(El,Tl)}function na(Po){var Tl=Po-Ys;return Ys===Pr||Tl>=Qr||Tl<0||xo&&Po-ho>=Os}function po(){var Po=Ym();if(na(Po))return _o(Po);js=gm(po,function(Tl){var El=Qr-(Tl-Ys);return xo?_u(El,Os-(Tl-ho)):El}(Po))}function _o(Po){return js=Pr,Fo&&hs?Bo(Po):(hs=Ss=Pr,Ns)}function ga(){var Po=Ym(),Tl=na(Po);if(hs=arguments,Ss=this,Ys=Po,Tl){if(js===Pr)return function(El){return ho=El,js=gm(po,Qr),fo?Bo(El):Ns}(Ys);if(xo)return Ny(js),js=gm(po,Qr),Bo(Ys)}return js===Pr&&(js=gm(po,Qr)),Ns}return Qr=Xu(Qr)||0,ru(is)&&(fo=!!is.leading,Os=(xo="maxWait"in is)?yu(Xu(is.maxWait)||0,Qr):Os,Fo="trailing"in is?!!is.trailing:Fo),ga.cancel=function(){js!==Pr&&Ny(js),ho=0,hs=Ys=Ss=js=Pr},ga.flush=function(){return js===Pr?Ns:_o(Ym())},ga}var rx=Al(function(Yr,Qr){return gy(Yr,1,Qr)}),ix=Al(function(Yr,Qr,is){return gy(Yr,Xu(Qr)||0,is)});function Xm(Yr,Qr){if(typeof Yr!="function"||Qr!=null&&typeof Qr!="function")throw new Gu(Lr);var is=function(){var hs=arguments,Ss=Qr?Qr.apply(this,hs):hs[0],Os=is.cache;if(Os.has(Ss))return Os.get(Ss);var Ns=Yr.apply(this,hs);return is.cache=Os.set(Ss,Ns)||Os,Ns};return is.cache=new(Xm.Cache||xp),is}function Zm(Yr){if(typeof Yr!="function")throw new Gu(Lr);return function(){var Qr=arguments;switch(Qr.length){case 0:return!Yr.call(this);case 1:return!Yr.call(this,Qr[0]);case 2:return!Yr.call(this,Qr[0],Qr[1]);case 3:return!Yr.call(this,Qr[0],Qr[1],Qr[2])}return!Yr.apply(this,Qr)}}Xm.Cache=xp;var sx=C1(function(Yr,Qr){var is=(Qr=Qr.length==1&&Sl(Qr[0])?ws(Qr[0],_l(ba())):ws(Tu(Qr,1),_l(ba()))).length;return Al(function(hs){for(var Ss=-1,Os=_u(hs.length,is);++Ss<Os;)hs[Ss]=Qr[Ss].call(this,hs[Ss]);return vo(Yr,this,hs)})}),V0=Al(function(Yr,Qr){var is=Jl(Qr,tm(V0));return wp(Yr,zr,Pr,Qr,is)}),$v=Al(function(Yr,Qr){var is=Jl(Qr,tm($v));return wp(Yr,64,Pr,Qr,is)}),ox=Tp(function(Yr,Qr){return wp(Yr,256,Pr,Pr,Pr,Qr)});function _d(Yr,Qr){return Yr===Qr||Yr!=Yr&&Qr!=Qr}var ax=Hm(p0),lx=Hm(function(Yr,Qr){return Yr>=Qr}),Wp=Ey(function(){return arguments}())?Ey:function(Yr){return su(Yr)&&Gl.call(Yr,"callee")&&!oy.call(Yr,"callee")},Sl=Ao.isArray,ux=zl?_l(zl):function(Yr){return su(Yr)&&Au(Yr)==vs};function Lu(Yr){return Yr!=null&&Qm(Yr.length)&&!_p(Yr)}function lu(Yr){return su(Yr)&&Lu(Yr)}var Np=s1||ey,cx=Eu?_l(Eu):function(Yr){return su(Yr)&&Au(Yr)==Xr};function G0(Yr){if(!su(Yr))return!1;var Qr=Au(Yr);return Qr==Zr||Qr=="[object DOMException]"||typeof Yr.message=="string"&&typeof Yr.name=="string"&&!ym(Yr)}function _p(Yr){if(!ru(Yr))return!1;var Qr=Au(Yr);return Qr==Jr||Qr==_i||Qr=="[object AsyncFunction]"||Qr=="[object Proxy]"}function Cv(Yr){return typeof Yr=="number"&&Yr==Cl(Yr)}function Qm(Yr){return typeof Yr=="number"&&Yr>-1&&Yr%1==0&&Yr<=Nr}function ru(Yr){var Qr=typeof Yr;return Yr!=null&&(Qr=="object"||Qr=="function")}function su(Yr){return Yr!=null&&typeof Yr=="object"}var Rv=As?_l(As):function(Yr){return su(Yr)&&$u(Yr)==es};function Av(Yr){return typeof Yr=="number"||su(Yr)&&Au(Yr)==ts}function ym(Yr){if(!su(Yr)||Au(Yr)!=rs)return!1;var Qr=_m(Yr);if(Qr===null)return!0;var is=Gl.call(Qr,"constructor")&&Qr.constructor;return typeof is=="function"&&is instanceof is&&Em.call(is)==Jv}var W0=Ds?_l(Ds):function(Yr){return su(Yr)&&Au(Yr)==as},Iv=zs?_l(zs):function(Yr){return su(Yr)&&$u(Yr)==ls};function Jm(Yr){return typeof Yr=="string"||!Sl(Yr)&&su(Yr)&&Au(Yr)==us}function Uu(Yr){return typeof Yr=="symbol"||su(Yr)&&Au(Yr)==xs}var nm=eo?_l(eo):function(Yr){return su(Yr)&&Qm(Yr.length)&&!!Ml[Au(Yr)]},dx=Hm(v0),fx=Hm(function(Yr,Qr){return Yr<=Qr});function Pv(Yr){if(!Yr)return[];if(Lu(Yr))return Jm(Yr)?au(Yr):ku(Yr);if(im&&Yr[im])return function(is){for(var hs,Ss=[];!(hs=is.next()).done;)Ss.push(hs.value);return Ss}(Yr[im]());var Qr=$u(Yr);return(Qr==es?xl:Qr==ls?hu:rm)(Yr)}function $p(Yr){return Yr?(Yr=Xu(Yr))===Vr||Yr===-1/0?17976931348623157e292*(Yr<0?-1:1):Yr==Yr?Yr:0:Yr===0?Yr:0}function Cl(Yr){var Qr=$p(Yr),is=Qr%1;return Qr==Qr?is?Qr-is:Qr:0}function Ov(Yr){return Yr?zp(Cl(Yr),0,jr):0}function Xu(Yr){if(typeof Yr=="number")return Yr;if(Uu(Yr))return Dr;if(ru(Yr)){var Qr=typeof Yr.valueOf=="function"?Yr.valueOf():Yr;Yr=ru(Qr)?Qr+"":Qr}if(typeof Yr!="string")return Yr===0?Yr:+Yr;Yr=yl(Yr);var is=Vo.test(Yr);return is||Ws.test(Yr)?mp(Yr.slice(2),is?2:8):cu.test(Yr)?Dr:+Yr}function kv(Yr){return ip(Yr,Du(Yr))}function Hl(Yr){return Yr==null?"":Bu(Yr)}var hx=Jp(function(Yr,Qr){if(mm(Qr)||Lu(Qr))ip(Qr,bu(Qr),Yr);else for(var is in Qr)Gl.call(Qr,is)&&um(Yr,is,Qr[is])}),Lv=Jp(function(Yr,Qr){ip(Qr,Du(Qr),Yr)}),e0=Jp(function(Yr,Qr,is,hs){ip(Qr,Du(Qr),Yr,hs)}),px=Jp(function(Yr,Qr,is,hs){ip(Qr,bu(Qr),Yr,hs)}),mx=Tp(d0),gx=Al(function(Yr,Qr){Yr=Xl(Yr);var is=-1,hs=Qr.length,Ss=hs>2?Qr[2]:Pr;for(Ss&&Iu(Qr[0],Qr[1],Ss)&&(hs=1);++is<hs;)for(var Os=Qr[is],Ns=Du(Os),js=-1,Ys=Ns.length;++js<Ys;){var ho=Ns[js],fo=Yr[ho];(fo===Pr||_d(fo,Yp[ho])&&!Gl.call(Yr,ho))&&(Yr[ho]=Os[ho])}return Yr}),yx=Al(function(Yr){return Yr.push(Pr,Jy),vo(Dv,Pr,Yr)});function q0(Yr,Qr,is){var hs=Yr==null?Pr:Hp(Yr,Qr);return hs===Pr?is:hs}function K0(Yr,Qr){return Yr!=null&&nv(Yr,Qr,E1)}var vx=Ky(function(Yr,Qr,is){Qr!=null&&typeof Qr.toString!="function"&&(Qr=wm.call(Qr)),Yr[Qr]=is},X0(Mu)),bx=Ky(function(Yr,Qr,is){Qr!=null&&typeof Qr.toString!="function"&&(Qr=wm.call(Qr)),Gl.call(Yr,Qr)?Yr[Qr].push(is):Yr[Qr]=[is]},ba),xx=Al(dm);function bu(Yr){return Lu(Yr)?dy(Yr):y0(Yr)}function Du(Yr){return Lu(Yr)?dy(Yr,!0):function(Qr){if(!ru(Qr))return function(Os){var Ns=[];if(Os!=null)for(var js in Xl(Os))Ns.push(js);return Ns}(Qr);var is=mm(Qr),hs=[];for(var Ss in Qr)(Ss!="constructor"||!is&&Gl.call(Qr,Ss))&&hs.push(Ss);return hs}(Yr)}var Ex=Jp(function(Yr,Qr,is){Mm(Yr,Qr,is)}),Dv=Jp(function(Yr,Qr,is,hs){Mm(Yr,Qr,is,hs)}),wx=Tp(function(Yr,Qr){var is={};if(Yr==null)return is;var hs=!1;Qr=ws(Qr,function(Os){return Os=Dp(Os,Yr),hs||(hs=Os.length>1),Os}),ip(Yr,P0(Yr),is),hs&&(is=qu(is,7,A1));for(var Ss=Qr.length;Ss--;)T0(is,Qr[Ss]);return is}),Tx=Tp(function(Yr,Qr){return Yr==null?{}:function(is,hs){return Ay(is,hs,function(Ss,Os){return K0(is,Os)})}(Yr,Qr)});function Mv(Yr,Qr){if(Yr==null)return{};var is=ws(P0(Yr),function(hs){return[hs]});return Qr=ba(Qr),Ay(Yr,is,function(hs,Ss){return Qr(hs,Ss[0])})}var Nv=Zy(bu),Fv=Zy(Du);function rm(Yr){return Yr==null?[]:Vl(Yr,bu(Yr))}var Sx=em(function(Yr,Qr,is){return Qr=Qr.toLowerCase(),Yr+(is?Bv(Qr):Qr)});function Bv(Yr){return Y0(Hl(Yr).toLowerCase())}function Uv(Yr){return(Yr=Hl(Yr))&&Yr.replace(ps,mu).replace(fp,"")}var _x=em(function(Yr,Qr,is){return Yr+(is?"-":"")+Qr.toLowerCase()}),$x=em(function(Yr,Qr,is){return Yr+(is?" ":"")+Qr.toLowerCase()}),Cx=Gy("toLowerCase"),Rx=em(function(Yr,Qr,is){return Yr+(is?"_":"")+Qr.toLowerCase()}),Ax=em(function(Yr,Qr,is){return Yr+(is?" ":"")+Y0(Qr)}),Ix=em(function(Yr,Qr,is){return Yr+(is?" ":"")+Qr.toUpperCase()}),Y0=Gy("toUpperCase");function jv(Yr,Qr,is){return Yr=Hl(Yr),(Qr=is?Pr:Qr)===Pr?function(hs){return hp.test(hs)}(Yr)?function(hs){return hs.match(Vu)||[]}(Yr):function(hs){return hs.match($a)||[]}(Yr):Yr.match(Qr)||[]}var zv=Al(function(Yr,Qr){try{return vo(Yr,Pr,Qr)}catch(is){return G0(is)?is:new $l(is)}}),Px=Tp(function(Yr,Qr){return os(Qr,function(is){is=sp(is),Ep(Yr,is,H0(Yr[is],Yr))}),Yr});function X0(Yr){return function(){return Yr}}var Ox=qy(),kx=qy(!0);function Mu(Yr){return Yr}function Z0(Yr){return Ty(typeof Yr=="function"?Yr:qu(Yr,1))}var Lx=Al(function(Yr,Qr){return function(is){return dm(is,Yr,Qr)}}),Dx=Al(function(Yr,Qr){return function(is){return dm(Yr,is,Qr)}});function Q0(Yr,Qr,is){var hs=bu(Qr),Ss=Dm(Qr,hs);is!=null||ru(Qr)&&(Ss.length||!hs.length)||(is=Qr,Qr=Yr,Yr=this,Ss=Dm(Qr,bu(Qr)));var Os=!(ru(is)&&"chain"in is&&!is.chain),Ns=_p(Yr);return os(Ss,function(js){var Ys=Qr[js];Yr[js]=Ys,Ns&&(Yr.prototype[js]=function(){var ho=this.__chain__;if(Os||ho){var fo=Yr(this.__wrapped__);return(fo.__actions__=ku(this.__actions__)).push({func:Ys,args:arguments,thisArg:Yr}),fo.__chain__=ho,fo}return Ys.apply(Yr,Cs([this.value()],arguments))})}),Yr}function J0(){}var Mx=R0(ws),Nx=R0(_s),Fx=R0(lo);function Hv(Yr){return D0(Yr)?Uo(sp(Yr)):function(Qr){return function(is){return Hp(is,Qr)}}(Yr)}var Bx=Yy(),Ux=Yy(!0);function _g(){return[]}function ey(){return!1}var ty,jx=jm(function(Yr,Qr){return Yr+Qr},0),zx=A0("ceil"),Hx=jm(function(Yr,Qr){return Yr/Qr},1),Vx=A0("floor"),Gx=jm(function(Yr,Qr){return Yr*Qr},1),Wx=A0("round"),qx=jm(function(Yr,Qr){return Yr-Qr},0);return Rs.after=function(Yr,Qr){if(typeof Qr!="function")throw new Gu(Lr);return Yr=Cl(Yr),function(){if(--Yr<1)return Qr.apply(this,arguments)}},Rs.ary=wv,Rs.assign=hx,Rs.assignIn=Lv,Rs.assignInWith=e0,Rs.assignWith=px,Rs.at=mx,Rs.before=Tv,Rs.bind=H0,Rs.bindAll=Px,Rs.bindKey=Sv,Rs.castArray=function(){if(!arguments.length)return[];var Yr=arguments[0];return Sl(Yr)?Yr:[Yr]},Rs.chain=bv,Rs.chunk=function(Yr,Qr,is){Qr=(is?Iu(Yr,Qr,is):Qr===Pr)?1:yu(Cl(Qr),0);var hs=Yr==null?0:Yr.length;if(!hs||Qr<1)return[];for(var Ss=0,Os=0,Ns=Ao(Rm(hs/Qr));Ss<hs;)Ns[Os++]=Ku(Yr,Ss,Ss+=Qr);return Ns},Rs.compact=function(Yr){for(var Qr=-1,is=Yr==null?0:Yr.length,hs=0,Ss=[];++Qr<is;){var Os=Yr[Qr];Os&&(Ss[hs++]=Os)}return Ss},Rs.concat=function(){var Yr=arguments.length;if(!Yr)return[];for(var Qr=Ao(Yr-1),is=arguments[0],hs=Yr;hs--;)Qr[hs-1]=arguments[hs];return Cs(Sl(is)?ku(is):[is],Tu(Qr,1))},Rs.cond=function(Yr){var Qr=Yr==null?0:Yr.length,is=ba();return Yr=Qr?ws(Yr,function(hs){if(typeof hs[1]!="function")throw new Gu(Lr);return[is(hs[0]),hs[1]]}):[],Al(function(hs){for(var Ss=-1;++Ss<Qr;){var Os=Yr[Ss];if(vo(Os[0],this,hs))return vo(Os[1],this,hs)}})},Rs.conforms=function(Yr){return function(Qr){var is=bu(Qr);return function(hs){return py(hs,Qr,is)}}(qu(Yr,1))},Rs.constant=X0,Rs.countBy=X1,Rs.create=function(Yr,Qr){var is=Qp(Yr);return Qr==null?is:hy(is,Qr)},Rs.curry=function Yr(Qr,is,hs){var Ss=wp(Qr,8,Pr,Pr,Pr,Pr,Pr,is=hs?Pr:is);return Ss.placeholder=Yr.placeholder,Ss},Rs.curryRight=function Yr(Qr,is,hs){var Ss=wp(Qr,16,Pr,Pr,Pr,Pr,Pr,is=hs?Pr:is);return Ss.placeholder=Yr.placeholder,Ss},Rs.debounce=_v,Rs.defaults=gx,Rs.defaultsDeep=yx,Rs.defer=rx,Rs.delay=ix,Rs.difference=O1,Rs.differenceBy=k1,Rs.differenceWith=L1,Rs.drop=function(Yr,Qr,is){var hs=Yr==null?0:Yr.length;return hs?Ku(Yr,(Qr=is||Qr===Pr?1:Cl(Qr))<0?0:Qr,hs):[]},Rs.dropRight=function(Yr,Qr,is){var hs=Yr==null?0:Yr.length;return hs?Ku(Yr,0,(Qr=hs-(Qr=is||Qr===Pr?1:Cl(Qr)))<0?0:Qr):[]},Rs.dropRightWhile=function(Yr,Qr){return Yr&&Yr.length?Fm(Yr,ba(Qr,3),!0,!0):[]},Rs.dropWhile=function(Yr,Qr){return Yr&&Yr.length?Fm(Yr,ba(Qr,3),!0):[]},Rs.fill=function(Yr,Qr,is,hs){var Ss=Yr==null?0:Yr.length;return Ss?(is&&typeof is!="number"&&Iu(Yr,Qr,is)&&(is=0,hs=Ss),function(Os,Ns,js,Ys){var ho=Os.length;for((js=Cl(js))<0&&(js=-js>ho?0:ho+js),(Ys=Ys===Pr||Ys>ho?ho:Cl(Ys))<0&&(Ys+=ho),Ys=js>Ys?0:Ov(Ys);js<Ys;)Os[js++]=Ns;return Os}(Yr,Qr,is,hs)):[]},Rs.filter=function(Yr,Qr){return(Sl(Yr)?ss:vy)(Yr,ba(Qr,3))},Rs.flatMap=function(Yr,Qr){return Tu(Km(Yr,Qr),1)},Rs.flatMapDeep=function(Yr,Qr){return Tu(Km(Yr,Qr),Vr)},Rs.flatMapDepth=function(Yr,Qr,is){return is=is===Pr?1:Cl(is),Tu(Km(Yr,Qr),is)},Rs.flatten=mv,Rs.flattenDeep=function(Yr){return Yr!=null&&Yr.length?Tu(Yr,Vr):[]},Rs.flattenDepth=function(Yr,Qr){return Yr!=null&&Yr.length?Tu(Yr,Qr=Qr===Pr?1:Cl(Qr)):[]},Rs.flip=function(Yr){return wp(Yr,512)},Rs.flow=Ox,Rs.flowRight=kx,Rs.fromPairs=function(Yr){for(var Qr=-1,is=Yr==null?0:Yr.length,hs={};++Qr<is;){var Ss=Yr[Qr];hs[Ss[0]]=Ss[1]}return hs},Rs.functions=function(Yr){return Yr==null?[]:Dm(Yr,bu(Yr))},Rs.functionsIn=function(Yr){return Yr==null?[]:Dm(Yr,Du(Yr))},Rs.groupBy=J1,Rs.initial=function(Yr){return Yr!=null&&Yr.length?Ku(Yr,0,-1):[]},Rs.intersection=D1,Rs.intersectionBy=M1,Rs.intersectionWith=N1,Rs.invert=vx,Rs.invertBy=bx,Rs.invokeMap=_b,Rs.iteratee=Z0,Rs.keyBy=ex,Rs.keys=bu,Rs.keysIn=Du,Rs.map=Km,Rs.mapKeys=function(Yr,Qr){var is={};return Qr=ba(Qr,3),rp(Yr,function(hs,Ss,Os){Ep(is,Qr(hs,Ss,Os),hs)}),is},Rs.mapValues=function(Yr,Qr){var is={};return Qr=ba(Qr,3),rp(Yr,function(hs,Ss,Os){Ep(is,Ss,Qr(hs,Ss,Os))}),is},Rs.matches=function(Yr){return _y(qu(Yr,1))},Rs.matchesProperty=function(Yr,Qr){return $y(Yr,qu(Qr,1))},Rs.memoize=Xm,Rs.merge=Ex,Rs.mergeWith=Dv,Rs.method=Lx,Rs.methodOf=Dx,Rs.mixin=Q0,Rs.negate=Zm,Rs.nthArg=function(Yr){return Yr=Cl(Yr),Al(function(Qr){return Cy(Qr,Yr)})},Rs.omit=wx,Rs.omitBy=function(Yr,Qr){return Mv(Yr,Zm(ba(Qr)))},Rs.once=function(Yr){return Tv(2,Yr)},Rs.orderBy=function(Yr,Qr,is,hs){return Yr==null?[]:(Sl(Qr)||(Qr=Qr==null?[]:[Qr]),Sl(is=hs?Pr:is)||(is=is==null?[]:[is]),Ry(Yr,Qr,is))},Rs.over=Mx,Rs.overArgs=sx,Rs.overEvery=Nx,Rs.overSome=Fx,Rs.partial=V0,Rs.partialRight=$v,Rs.partition=tx,Rs.pick=Tx,Rs.pickBy=Mv,Rs.property=Hv,Rs.propertyOf=function(Yr){return function(Qr){return Yr==null?Pr:Hp(Yr,Qr)}},Rs.pull=F1,Rs.pullAll=yv,Rs.pullAllBy=function(Yr,Qr,is){return Yr&&Yr.length&&Qr&&Qr.length?b0(Yr,Qr,ba(is,2)):Yr},Rs.pullAllWith=function(Yr,Qr,is){return Yr&&Yr.length&&Qr&&Qr.length?b0(Yr,Qr,Pr,is):Yr},Rs.pullAt=B1,Rs.range=Bx,Rs.rangeRight=Ux,Rs.rearg=ox,Rs.reject=function(Yr,Qr){return(Sl(Yr)?ss:vy)(Yr,Zm(ba(Qr,3)))},Rs.remove=function(Yr,Qr){var is=[];if(!Yr||!Yr.length)return is;var hs=-1,Ss=[],Os=Yr.length;for(Qr=ba(Qr,3);++hs<Os;){var Ns=Yr[hs];Qr(Ns,hs,Yr)&&(is.push(Ns),Ss.push(hs))}return Iy(Yr,Ss),is},Rs.rest=function(Yr,Qr){if(typeof Yr!="function")throw new Gu(Lr);return Al(Yr,Qr=Qr===Pr?Qr:Cl(Qr))},Rs.reverse=j0,Rs.sampleSize=function(Yr,Qr,is){return Qr=(is?Iu(Yr,Qr,is):Qr===Pr)?1:Cl(Qr),(Sl(Yr)?g1:T1)(Yr,Qr)},Rs.set=function(Yr,Qr,is){return Yr==null?Yr:hm(Yr,Qr,is)},Rs.setWith=function(Yr,Qr,is,hs){return hs=typeof hs=="function"?hs:Pr,Yr==null?Yr:hm(Yr,Qr,is,hs)},Rs.shuffle=function(Yr){return(Sl(Yr)?y1:_1)(Yr)},Rs.slice=function(Yr,Qr,is){var hs=Yr==null?0:Yr.length;return hs?(is&&typeof is!="number"&&Iu(Yr,Qr,is)?(Qr=0,is=hs):(Qr=Qr==null?0:Cl(Qr),is=is===Pr?hs:Cl(is)),Ku(Yr,Qr,is)):[]},Rs.sortBy=nx,Rs.sortedUniq=function(Yr){return Yr&&Yr.length?Oy(Yr):[]},Rs.sortedUniqBy=function(Yr,Qr){return Yr&&Yr.length?Oy(Yr,ba(Qr,2)):[]},Rs.split=function(Yr,Qr,is){return is&&typeof is!="number"&&Iu(Yr,Qr,is)&&(Qr=is=Pr),(is=is===Pr?jr:is>>>0)?(Yr=Hl(Yr))&&(typeof Qr=="string"||Qr!=null&&!W0(Qr))&&!(Qr=Bu(Qr))&&ou(Yr)?Mp(au(Yr),0,is):Yr.split(Qr,is):[]},Rs.spread=function(Yr,Qr){if(typeof Yr!="function")throw new Gu(Lr);return Qr=Qr==null?0:yu(Cl(Qr),0),Al(function(is){var hs=is[Qr],Ss=Mp(is,0,Qr);return hs&&Cs(Ss,hs),vo(Yr,this,Ss)})},Rs.tail=function(Yr){var Qr=Yr==null?0:Yr.length;return Qr?Ku(Yr,1,Qr):[]},Rs.take=function(Yr,Qr,is){return Yr&&Yr.length?Ku(Yr,0,(Qr=is||Qr===Pr?1:Cl(Qr))<0?0:Qr):[]},Rs.takeRight=function(Yr,Qr,is){var hs=Yr==null?0:Yr.length;return hs?Ku(Yr,(Qr=hs-(Qr=is||Qr===Pr?1:Cl(Qr)))<0?0:Qr,hs):[]},Rs.takeRightWhile=function(Yr,Qr){return Yr&&Yr.length?Fm(Yr,ba(Qr,3),!1,!0):[]},Rs.takeWhile=function(Yr,Qr){return Yr&&Yr.length?Fm(Yr,ba(Qr,3)):[]},Rs.tap=function(Yr,Qr){return Qr(Yr),Yr},Rs.throttle=function(Yr,Qr,is){var hs=!0,Ss=!0;if(typeof Yr!="function")throw new Gu(Lr);return ru(is)&&(hs="leading"in is?!!is.leading:hs,Ss="trailing"in is?!!is.trailing:Ss),_v(Yr,Qr,{leading:hs,maxWait:Qr,trailing:Ss})},Rs.thru=qm,Rs.toArray=Pv,Rs.toPairs=Nv,Rs.toPairsIn=Fv,Rs.toPath=function(Yr){return Sl(Yr)?ws(Yr,sp):Uu(Yr)?[Yr]:ku(dv(Hl(Yr)))},Rs.toPlainObject=kv,Rs.transform=function(Yr,Qr,is){var hs=Sl(Yr),Ss=hs||Np(Yr)||nm(Yr);if(Qr=ba(Qr,4),is==null){var Os=Yr&&Yr.constructor;is=Ss?hs?new Os:[]:ru(Yr)&&_p(Os)?Qp(_m(Yr)):{}}return(Ss?os:rp)(Yr,function(Ns,js,Ys){return Qr(is,Ns,js,Ys)}),is},Rs.unary=function(Yr){return wv(Yr,1)},Rs.union=U1,Rs.unionBy=j1,Rs.unionWith=z1,Rs.uniq=function(Yr){return Yr&&Yr.length?Lp(Yr):[]},Rs.uniqBy=function(Yr,Qr){return Yr&&Yr.length?Lp(Yr,ba(Qr,2)):[]},Rs.uniqWith=function(Yr,Qr){return Qr=typeof Qr=="function"?Qr:Pr,Yr&&Yr.length?Lp(Yr,Pr,Qr):[]},Rs.unset=function(Yr,Qr){return Yr==null||T0(Yr,Qr)},Rs.unzip=z0,Rs.unzipWith=vv,Rs.update=function(Yr,Qr,is){return Yr==null?Yr:Ly(Yr,Qr,$0(is))},Rs.updateWith=function(Yr,Qr,is,hs){return hs=typeof hs=="function"?hs:Pr,Yr==null?Yr:Ly(Yr,Qr,$0(is),hs)},Rs.values=rm,Rs.valuesIn=function(Yr){return Yr==null?[]:Vl(Yr,Du(Yr))},Rs.without=H1,Rs.words=jv,Rs.wrap=function(Yr,Qr){return V0($0(Qr),Yr)},Rs.xor=V1,Rs.xorBy=G1,Rs.xorWith=W1,Rs.zip=q1,Rs.zipObject=function(Yr,Qr){return My(Yr||[],Qr||[],um)},Rs.zipObjectDeep=function(Yr,Qr){return My(Yr||[],Qr||[],hm)},Rs.zipWith=K1,Rs.entries=Nv,Rs.entriesIn=Fv,Rs.extend=Lv,Rs.extendWith=e0,Q0(Rs,Rs),Rs.add=jx,Rs.attempt=zv,Rs.camelCase=Sx,Rs.capitalize=Bv,Rs.ceil=zx,Rs.clamp=function(Yr,Qr,is){return is===Pr&&(is=Qr,Qr=Pr),is!==Pr&&(is=(is=Xu(is))==is?is:0),Qr!==Pr&&(Qr=(Qr=Xu(Qr))==Qr?Qr:0),zp(Xu(Yr),Qr,is)},Rs.clone=function(Yr){return qu(Yr,4)},Rs.cloneDeep=function(Yr){return qu(Yr,5)},Rs.cloneDeepWith=function(Yr,Qr){return qu(Yr,5,Qr=typeof Qr=="function"?Qr:Pr)},Rs.cloneWith=function(Yr,Qr){return qu(Yr,4,Qr=typeof Qr=="function"?Qr:Pr)},Rs.conformsTo=function(Yr,Qr){return Qr==null||py(Yr,Qr,bu(Qr))},Rs.deburr=Uv,Rs.defaultTo=function(Yr,Qr){return Yr==null||Yr!=Yr?Qr:Yr},Rs.divide=Hx,Rs.endsWith=function(Yr,Qr,is){Yr=Hl(Yr),Qr=Bu(Qr);var hs=Yr.length,Ss=is=is===Pr?hs:zp(Cl(is),0,hs);return(is-=Qr.length)>=0&&Yr.slice(is,Ss)==Qr},Rs.eq=_d,Rs.escape=function(Yr){return(Yr=Hl(Yr))&&Co.test(Yr)?Yr.replace(bo,fu):Yr},Rs.escapeRegExp=function(Yr){return(Yr=Hl(Yr))&&go.test(Yr)?Yr.replace(ro,"\\$&"):Yr},Rs.every=function(Yr,Qr,is){var hs=Sl(Yr)?_s:b1;return is&&Iu(Yr,Qr,is)&&(Qr=Pr),hs(Yr,ba(Qr,3))},Rs.find=Z1,Rs.findIndex=hv,Rs.findKey=function(Yr,Qr){return Oo(Yr,ba(Qr,3),rp)},Rs.findLast=Q1,Rs.findLastIndex=pv,Rs.findLastKey=function(Yr,Qr){return Oo(Yr,ba(Qr,3),h0)},Rs.floor=Vx,Rs.forEach=xv,Rs.forEachRight=Ev,Rs.forIn=function(Yr,Qr){return Yr==null?Yr:f0(Yr,ba(Qr,3),Du)},Rs.forInRight=function(Yr,Qr){return Yr==null?Yr:by(Yr,ba(Qr,3),Du)},Rs.forOwn=function(Yr,Qr){return Yr&&rp(Yr,ba(Qr,3))},Rs.forOwnRight=function(Yr,Qr){return Yr&&h0(Yr,ba(Qr,3))},Rs.get=q0,Rs.gt=ax,Rs.gte=lx,Rs.has=function(Yr,Qr){return Yr!=null&&nv(Yr,Qr,x1)},Rs.hasIn=K0,Rs.head=gv,Rs.identity=Mu,Rs.includes=function(Yr,Qr,is,hs){Yr=Lu(Yr)?Yr:rm(Yr),is=is&&!hs?Cl(is):0;var Ss=Yr.length;return is<0&&(is=yu(Ss+is,0)),Jm(Yr)?is<=Ss&&Yr.indexOf(Qr,is)>-1:!!Ss&&Mo(Yr,Qr,is)>-1},Rs.indexOf=function(Yr,Qr,is){var hs=Yr==null?0:Yr.length;if(!hs)return-1;var Ss=is==null?0:Cl(is);return Ss<0&&(Ss=yu(hs+Ss,0)),Mo(Yr,Qr,Ss)},Rs.inRange=function(Yr,Qr,is){return Qr=$p(Qr),is===Pr?(is=Qr,Qr=0):is=$p(is),function(hs,Ss,Os){return hs>=_u(Ss,Os)&&hs<yu(Ss,Os)}(Yr=Xu(Yr),Qr,is)},Rs.invoke=xx,Rs.isArguments=Wp,Rs.isArray=Sl,Rs.isArrayBuffer=ux,Rs.isArrayLike=Lu,Rs.isArrayLikeObject=lu,Rs.isBoolean=function(Yr){return Yr===!0||Yr===!1||su(Yr)&&Au(Yr)==Kr},Rs.isBuffer=Np,Rs.isDate=cx,Rs.isElement=function(Yr){return su(Yr)&&Yr.nodeType===1&&!ym(Yr)},Rs.isEmpty=function(Yr){if(Yr==null)return!0;if(Lu(Yr)&&(Sl(Yr)||typeof Yr=="string"||typeof Yr.splice=="function"||Np(Yr)||nm(Yr)||Wp(Yr)))return!Yr.length;var Qr=$u(Yr);if(Qr==es||Qr==ls)return!Yr.size;if(mm(Yr))return!y0(Yr).length;for(var is in Yr)if(Gl.call(Yr,is))return!1;return!0},Rs.isEqual=function(Yr,Qr){return fm(Yr,Qr)},Rs.isEqualWith=function(Yr,Qr,is){var hs=(is=typeof is=="function"?is:Pr)?is(Yr,Qr):Pr;return hs===Pr?fm(Yr,Qr,Pr,is):!!hs},Rs.isError=G0,Rs.isFinite=function(Yr){return typeof Yr=="number"&&ly(Yr)},Rs.isFunction=_p,Rs.isInteger=Cv,Rs.isLength=Qm,Rs.isMap=Rv,Rs.isMatch=function(Yr,Qr){return Yr===Qr||g0(Yr,Qr,k0(Qr))},Rs.isMatchWith=function(Yr,Qr,is){return is=typeof is=="function"?is:Pr,g0(Yr,Qr,k0(Qr),is)},Rs.isNaN=function(Yr){return Av(Yr)&&Yr!=+Yr},Rs.isNative=function(Yr){if(P1(Yr))throw new $l("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wy(Yr)},Rs.isNil=function(Yr){return Yr==null},Rs.isNull=function(Yr){return Yr===null},Rs.isNumber=Av,Rs.isObject=ru,Rs.isObjectLike=su,Rs.isPlainObject=ym,Rs.isRegExp=W0,Rs.isSafeInteger=function(Yr){return Cv(Yr)&&Yr>=-9007199254740991&&Yr<=Nr},Rs.isSet=Iv,Rs.isString=Jm,Rs.isSymbol=Uu,Rs.isTypedArray=nm,Rs.isUndefined=function(Yr){return Yr===Pr},Rs.isWeakMap=function(Yr){return su(Yr)&&$u(Yr)==Ts},Rs.isWeakSet=function(Yr){return su(Yr)&&Au(Yr)=="[object WeakSet]"},Rs.join=function(Yr,Qr){return Yr==null?"":o1.call(Yr,Qr)},Rs.kebabCase=_x,Rs.last=Yu,Rs.lastIndexOf=function(Yr,Qr,is){var hs=Yr==null?0:Yr.length;if(!hs)return-1;var Ss=hs;return is!==Pr&&(Ss=(Ss=Cl(is))<0?yu(hs+Ss,0):_u(Ss,hs-1)),Qr==Qr?function(Os,Ns,js){for(var Ys=js+1;Ys--;)if(Os[Ys]===Ns)return Ys;return Ys}(Yr,Qr,Ss):qo(Yr,Xo,Ss,!0)},Rs.lowerCase=$x,Rs.lowerFirst=Cx,Rs.lt=dx,Rs.lte=fx,Rs.max=function(Yr){return Yr&&Yr.length?Lm(Yr,Mu,p0):Pr},Rs.maxBy=function(Yr,Qr){return Yr&&Yr.length?Lm(Yr,ba(Qr,2),p0):Pr},Rs.mean=function(Yr){return Ko(Yr,Mu)},Rs.meanBy=function(Yr,Qr){return Ko(Yr,ba(Qr,2))},Rs.min=function(Yr){return Yr&&Yr.length?Lm(Yr,Mu,v0):Pr},Rs.minBy=function(Yr,Qr){return Yr&&Yr.length?Lm(Yr,ba(Qr,2),v0):Pr},Rs.stubArray=_g,Rs.stubFalse=ey,Rs.stubObject=function(){return{}},Rs.stubString=function(){return""},Rs.stubTrue=function(){return!0},Rs.multiply=Gx,Rs.nth=function(Yr,Qr){return Yr&&Yr.length?Cy(Yr,Cl(Qr)):Pr},Rs.noConflict=function(){return tu._===this&&(tu._=e1),this},Rs.noop=J0,Rs.now=Ym,Rs.pad=function(Yr,Qr,is){Yr=Hl(Yr);var hs=(Qr=Cl(Qr))?pu(Yr):0;if(!Qr||hs>=Qr)return Yr;var Ss=(Qr-hs)/2;return zm(Am(Ss),is)+Yr+zm(Rm(Ss),is)},Rs.padEnd=function(Yr,Qr,is){Yr=Hl(Yr);var hs=(Qr=Cl(Qr))?pu(Yr):0;return Qr&&hs<Qr?Yr+zm(Qr-hs,is):Yr},Rs.padStart=function(Yr,Qr,is){Yr=Hl(Yr);var hs=(Qr=Cl(Qr))?pu(Yr):0;return Qr&&hs<Qr?zm(Qr-hs,is)+Yr:Yr},Rs.parseInt=function(Yr,Qr,is){return is||Qr==null?Qr=0:Qr&&(Qr=+Qr),u1(Hl(Yr).replace(No,""),Qr||0)},Rs.random=function(Yr,Qr,is){if(is&&typeof is!="boolean"&&Iu(Yr,Qr,is)&&(Qr=is=Pr),is===Pr&&(typeof Qr=="boolean"?(is=Qr,Qr=Pr):typeof Yr=="boolean"&&(is=Yr,Yr=Pr)),Yr===Pr&&Qr===Pr?(Yr=0,Qr=1):(Yr=$p(Yr),Qr===Pr?(Qr=Yr,Yr=0):Qr=$p(Qr)),Yr>Qr){var hs=Yr;Yr=Qr,Qr=hs}if(is||Yr%1||Qr%1){var Ss=uy();return _u(Yr+Ss*(Qr-Yr+pp("1e-"+((Ss+"").length-1))),Qr)}return x0(Yr,Qr)},Rs.reduce=function(Yr,Qr,is){var hs=Sl(Yr)?Ms:zo,Ss=arguments.length<3;return hs(Yr,ba(Qr,4),is,Ss,kp)},Rs.reduceRight=function(Yr,Qr,is){var hs=Sl(Yr)?Hs:zo,Ss=arguments.length<3;return hs(Yr,ba(Qr,4),is,Ss,yy)},Rs.repeat=function(Yr,Qr,is){return Qr=(is?Iu(Yr,Qr,is):Qr===Pr)?1:Cl(Qr),E0(Hl(Yr),Qr)},Rs.replace=function(){var Yr=arguments,Qr=Hl(Yr[0]);return Yr.length<3?Qr:Qr.replace(Yr[1],Yr[2])},Rs.result=function(Yr,Qr,is){var hs=-1,Ss=(Qr=Dp(Qr,Yr)).length;for(Ss||(Ss=1,Yr=Pr);++hs<Ss;){var Os=Yr==null?Pr:Yr[sp(Qr[hs])];Os===Pr&&(hs=Ss,Os=is),Yr=_p(Os)?Os.call(Yr):Os}return Yr},Rs.round=Wx,Rs.runInContext=Js,Rs.sample=function(Yr){return(Sl(Yr)?fy:w1)(Yr)},Rs.size=function(Yr){if(Yr==null)return 0;if(Lu(Yr))return Jm(Yr)?pu(Yr):Yr.length;var Qr=$u(Yr);return Qr==es||Qr==ls?Yr.size:y0(Yr).length},Rs.snakeCase=Rx,Rs.some=function(Yr,Qr,is){var hs=Sl(Yr)?lo:$1;return is&&Iu(Yr,Qr,is)&&(Qr=Pr),hs(Yr,ba(Qr,3))},Rs.sortedIndex=function(Yr,Qr){return Nm(Yr,Qr)},Rs.sortedIndexBy=function(Yr,Qr,is){return w0(Yr,Qr,ba(is,2))},Rs.sortedIndexOf=function(Yr,Qr){var is=Yr==null?0:Yr.length;if(is){var hs=Nm(Yr,Qr);if(hs<is&&_d(Yr[hs],Qr))return hs}return-1},Rs.sortedLastIndex=function(Yr,Qr){return Nm(Yr,Qr,!0)},Rs.sortedLastIndexBy=function(Yr,Qr,is){return w0(Yr,Qr,ba(is,2),!0)},Rs.sortedLastIndexOf=function(Yr,Qr){if(Yr!=null&&Yr.length){var is=Nm(Yr,Qr,!0)-1;if(_d(Yr[is],Qr))return is}return-1},Rs.startCase=Ax,Rs.startsWith=function(Yr,Qr,is){return Yr=Hl(Yr),is=is==null?0:zp(Cl(is),0,Yr.length),Qr=Bu(Qr),Yr.slice(is,is+Qr.length)==Qr},Rs.subtract=qx,Rs.sum=function(Yr){return Yr&&Yr.length?Jo(Yr,Mu):0},Rs.sumBy=function(Yr,Qr){return Yr&&Yr.length?Jo(Yr,ba(Qr,2)):0},Rs.template=function(Yr,Qr,is){var hs=Rs.templateSettings;is&&Iu(Yr,Qr,is)&&(Qr=Pr),Yr=Hl(Yr),Qr=e0({},Qr,hs,Qy);var Ss,Os,Ns=e0({},Qr.imports,hs.imports,Qy),js=bu(Ns),Ys=Vl(Ns,js),ho=0,fo=Qr.interpolate||Ps,xo="__p += '",Fo=o0((Qr.escape||Ps).source+"|"+fo.source+"|"+(fo===Gs?Fl:Ps).source+"|"+(Qr.evaluate||Ps).source+"|$","g"),Bo="//# sourceURL="+(Gl.call(Qr,"sourceURL")?(Qr.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ip+"]")+`
`;Yr.replace(Fo,function(_o,ga,Po,Tl,El,Ul){return Po||(Po=Tl),xo+=Yr.slice(ho,Ul).replace(Ls,wu),ga&&(Ss=!0,xo+=`' +
__e(`+ga+`) +
'`),El&&(Os=!0,xo+=`';
`+El+`;
__p += '`),Po&&(xo+=`' +
((__t = (`+Po+`)) == null ? '' : __t) +
'`),ho=Ul+_o.length,_o}),xo+=`';
`;var na=Gl.call(Qr,"variable")&&Qr.variable;if(na){if(Il.test(na))throw new $l("Invalid `variable` option passed into `_.template`")}else xo=`with (obj) {
`+xo+`
}
`;xo=(Os?xo.replace(mo,""):xo).replace(Xs,"$1").replace(so,"$1;"),xo="function("+(na||"obj")+`) {
`+(na?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ss?", __e = _.escape":"")+(Os?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xo+`return __p
}`;var po=zv(function(){return nu(js,Bo+"return "+xo).apply(Pr,Ys)});if(po.source=xo,G0(po))throw po;return po},Rs.times=function(Yr,Qr){if((Yr=Cl(Yr))<1||Yr>Nr)return[];var is=jr,hs=_u(Yr,jr);Qr=ba(Qr),Yr-=jr;for(var Ss=Ho(hs,Qr);++is<Yr;)Qr(is);return Ss},Rs.toFinite=$p,Rs.toInteger=Cl,Rs.toLength=Ov,Rs.toLower=function(Yr){return Hl(Yr).toLowerCase()},Rs.toNumber=Xu,Rs.toSafeInteger=function(Yr){return Yr?zp(Cl(Yr),-9007199254740991,Nr):Yr===0?Yr:0},Rs.toString=Hl,Rs.toUpper=function(Yr){return Hl(Yr).toUpperCase()},Rs.trim=function(Yr,Qr,is){if((Yr=Hl(Yr))&&(is||Qr===Pr))return yl(Yr);if(!Yr||!(Qr=Bu(Qr)))return Yr;var hs=au(Yr),Ss=au(Qr);return Mp(hs,Ql(hs,Ss),Wl(hs,Ss)+1).join("")},Rs.trimEnd=function(Yr,Qr,is){if((Yr=Hl(Yr))&&(is||Qr===Pr))return Yr.slice(0,vm(Yr)+1);if(!Yr||!(Qr=Bu(Qr)))return Yr;var hs=au(Yr);return Mp(hs,0,Wl(hs,au(Qr))+1).join("")},Rs.trimStart=function(Yr,Qr,is){if((Yr=Hl(Yr))&&(is||Qr===Pr))return Yr.replace(No,"");if(!Yr||!(Qr=Bu(Qr)))return Yr;var hs=au(Yr);return Mp(hs,Ql(hs,au(Qr))).join("")},Rs.truncate=function(Yr,Qr){var is=30,hs="...";if(ru(Qr)){var Ss="separator"in Qr?Qr.separator:Ss;is="length"in Qr?Cl(Qr.length):is,hs="omission"in Qr?Bu(Qr.omission):hs}var Os=(Yr=Hl(Yr)).length;if(ou(Yr)){var Ns=au(Yr);Os=Ns.length}if(is>=Os)return Yr;var js=is-pu(hs);if(js<1)return hs;var Ys=Ns?Mp(Ns,0,js).join(""):Yr.slice(0,js);if(Ss===Pr)return Ys+hs;if(Ns&&(js+=Ys.length-js),W0(Ss)){if(Yr.slice(js).search(Ss)){var ho,fo=Ys;for(Ss.global||(Ss=o0(Ss.source,Hl(Kl.exec(Ss))+"g")),Ss.lastIndex=0;ho=Ss.exec(fo);)var xo=ho.index;Ys=Ys.slice(0,xo===Pr?js:xo)}}else if(Yr.indexOf(Bu(Ss),js)!=js){var Fo=Ys.lastIndexOf(Ss);Fo>-1&&(Ys=Ys.slice(0,Fo))}return Ys+hs},Rs.unescape=function(Yr){return(Yr=Hl(Yr))&&wo.test(Yr)?Yr.replace(uo,vp):Yr},Rs.uniqueId=function(Yr){var Qr=++Qv;return Hl(Yr)+Qr},Rs.upperCase=Ix,Rs.upperFirst=Y0,Rs.each=xv,Rs.eachRight=Ev,Rs.first=gv,Q0(Rs,(ty={},rp(Rs,function(Yr,Qr){Gl.call(Rs.prototype,Qr)||(ty[Qr]=Yr)}),ty),{chain:!1}),Rs.VERSION="4.17.21",os(["bind","bindKey","curry","curryRight","partial","partialRight"],function(Yr){Rs[Yr].placeholder=Rs}),os(["drop","take"],function(Yr,Qr){Ll.prototype[Yr]=function(is){is=is===Pr?1:yu(Cl(is),0);var hs=this.__filtered__&&!Qr?new Ll(this):this.clone();return hs.__filtered__?hs.__takeCount__=_u(is,hs.__takeCount__):hs.__views__.push({size:_u(is,jr),type:Yr+(hs.__dir__<0?"Right":"")}),hs},Ll.prototype[Yr+"Right"]=function(is){return this.reverse()[Yr](is).reverse()}}),os(["filter","map","takeWhile"],function(Yr,Qr){var is=Qr+1,hs=is==1||is==3;Ll.prototype[Yr]=function(Ss){var Os=this.clone();return Os.__iteratees__.push({iteratee:ba(Ss,3),type:is}),Os.__filtered__=Os.__filtered__||hs,Os}}),os(["head","last"],function(Yr,Qr){var is="take"+(Qr?"Right":"");Ll.prototype[Yr]=function(){return this[is](1).value()[0]}}),os(["initial","tail"],function(Yr,Qr){var is="drop"+(Qr?"":"Right");Ll.prototype[Yr]=function(){return this.__filtered__?new Ll(this):this[is](1)}}),Ll.prototype.compact=function(){return this.filter(Mu)},Ll.prototype.find=function(Yr){return this.filter(Yr).head()},Ll.prototype.findLast=function(Yr){return this.reverse().find(Yr)},Ll.prototype.invokeMap=Al(function(Yr,Qr){return typeof Yr=="function"?new Ll(this):this.map(function(is){return dm(is,Yr,Qr)})}),Ll.prototype.reject=function(Yr){return this.filter(Zm(ba(Yr)))},Ll.prototype.slice=function(Yr,Qr){Yr=Cl(Yr);var is=this;return is.__filtered__&&(Yr>0||Qr<0)?new Ll(is):(Yr<0?is=is.takeRight(-Yr):Yr&&(is=is.drop(Yr)),Qr!==Pr&&(is=(Qr=Cl(Qr))<0?is.dropRight(-Qr):is.take(Qr-Yr)),is)},Ll.prototype.takeRightWhile=function(Yr){return this.reverse().takeWhile(Yr).reverse()},Ll.prototype.toArray=function(){return this.take(jr)},rp(Ll.prototype,function(Yr,Qr){var is=/^(?:filter|find|map|reject)|While$/.test(Qr),hs=/^(?:head|last)$/.test(Qr),Ss=Rs[hs?"take"+(Qr=="last"?"Right":""):Qr],Os=hs||/^find/.test(Qr);Ss&&(Rs.prototype[Qr]=function(){var Ns=this.__wrapped__,js=hs?[1]:arguments,Ys=Ns instanceof Ll,ho=js[0],fo=Ys||Sl(Ns),xo=function(ga){var Po=Ss.apply(Rs,Cs([ga],js));return hs&&Fo?Po[0]:Po};fo&&is&&typeof ho=="function"&&ho.length!=1&&(Ys=fo=!1);var Fo=this.__chain__,Bo=!!this.__actions__.length,na=Os&&!Fo,po=Ys&&!Bo;if(!Os&&fo){Ns=po?Ns:new Ll(this);var _o=Yr.apply(Ns,js);return _o.__actions__.push({func:qm,args:[xo],thisArg:Pr}),new Wu(_o,Fo)}return na&&po?Yr.apply(this,js):(_o=this.thru(xo),na?hs?_o.value()[0]:_o.value():_o)})}),os(["pop","push","shift","sort","splice","unshift"],function(Yr){var Qr=bm[Yr],is=/^(?:push|sort|unshift)$/.test(Yr)?"tap":"thru",hs=/^(?:pop|shift)$/.test(Yr);Rs.prototype[Yr]=function(){var Ss=arguments;if(hs&&!this.__chain__){var Os=this.value();return Qr.apply(Sl(Os)?Os:[],Ss)}return this[is](function(Ns){return Qr.apply(Sl(Ns)?Ns:[],Ss)})}}),rp(Ll.prototype,function(Yr,Qr){var is=Rs[Qr];if(is){var hs=is.name+"";Gl.call(Zp,hs)||(Zp[hs]=[]),Zp[hs].push({name:Qr,func:is})}}),Zp[Um(Pr,2).name]=[{name:"wrapper",func:Pr}],Ll.prototype.clone=function(){var Yr=new Ll(this.__wrapped__);return Yr.__actions__=ku(this.__actions__),Yr.__dir__=this.__dir__,Yr.__filtered__=this.__filtered__,Yr.__iteratees__=ku(this.__iteratees__),Yr.__takeCount__=this.__takeCount__,Yr.__views__=ku(this.__views__),Yr},Ll.prototype.reverse=function(){if(this.__filtered__){var Yr=new Ll(this);Yr.__dir__=-1,Yr.__filtered__=!0}else(Yr=this.clone()).__dir__*=-1;return Yr},Ll.prototype.value=function(){var Yr=this.__wrapped__.value(),Qr=this.__dir__,is=Sl(Yr),hs=Qr<0,Ss=is?Yr.length:0,Os=function(Ul,Zo,_a){for(var vu=-1,uu=_a.length;++vu<uu;){var Pu=_a[vu],Zl=Pu.size;switch(Pu.type){case"drop":Ul+=Zl;break;case"dropRight":Zo-=Zl;break;case"take":Zo=_u(Zo,Ul+Zl);break;case"takeRight":Ul=yu(Ul,Zo-Zl)}}return{start:Ul,end:Zo}}(0,Ss,this.__views__),Ns=Os.start,js=Os.end,Ys=js-Ns,ho=hs?js:Ns-1,fo=this.__iteratees__,xo=fo.length,Fo=0,Bo=_u(Ys,this.__takeCount__);if(!is||!hs&&Ss==Ys&&Bo==Ys)return Dy(Yr,this.__actions__);var na=[];e:for(;Ys--&&Fo<Bo;){for(var po=-1,_o=Yr[ho+=Qr];++po<xo;){var ga=fo[po],Po=ga.iteratee,Tl=ga.type,El=Po(_o);if(Tl==2)_o=El;else if(!El){if(Tl==1)continue e;break e}}na[Fo++]=_o}return na},Rs.prototype.at=Y1,Rs.prototype.chain=function(){return bv(this)},Rs.prototype.commit=function(){return new Wu(this.value(),this.__chain__)},Rs.prototype.next=function(){this.__values__===Pr&&(this.__values__=Pv(this.value()));var Yr=this.__index__>=this.__values__.length;return{done:Yr,value:Yr?Pr:this.__values__[this.__index__++]}},Rs.prototype.plant=function(Yr){for(var Qr,is=this;is instanceof Om;){var hs=fv(is);hs.__index__=0,hs.__values__=Pr,Qr?Ss.__wrapped__=hs:Qr=hs;var Ss=hs;is=is.__wrapped__}return Ss.__wrapped__=Yr,Qr},Rs.prototype.reverse=function(){var Yr=this.__wrapped__;if(Yr instanceof Ll){var Qr=Yr;return this.__actions__.length&&(Qr=new Ll(this)),(Qr=Qr.reverse()).__actions__.push({func:qm,args:[j0],thisArg:Pr}),new Wu(Qr,this.__chain__)}return this.thru(j0)},Rs.prototype.toJSON=Rs.prototype.valueOf=Rs.prototype.value=function(){return Dy(this.__wrapped__,this.__actions__)},Rs.prototype.first=Rs.prototype.head,im&&(Rs.prototype[im]=function(){return this}),Rs}();tu._=Kp,(Ar=(function(){return Kp}).call(Tr,Rr,Tr,_r))===Pr||(_r.exports=Ar)}).call(this)},793:module=>{var t;t=()=>(()=>{var __webpack_modules__={8453:(_r,Tr,Rr)=>{Rr.r(Tr),Rr.d(Tr,{InferenceSession:()=>jr,Tensor:()=>Nr,env:()=>Mr,registerBackend:()=>Lr});const Ar={},Pr=[],Lr=(Gr,Wr,qr)=>{if(!Wr||typeof Wr.init!="function"||typeof Wr.createSessionHandler!="function")throw new TypeError("not a valid backend");{const Kr=Ar[Gr];if(Kr===void 0)Ar[Gr]={backend:Wr,priority:qr};else{if(Kr.priority>qr)return;if(Kr.priority===qr&&Kr.backend!==Wr)throw new Error(`cannot register backend "${Gr}" using priority ${qr}`)}if(qr>=0){const Xr=Pr.indexOf(Gr);Xr!==-1&&Pr.splice(Xr,1);for(let Zr=0;Zr<Pr.length;Zr++)if(Ar[Pr[Zr]].priority<=qr)return void Pr.splice(Zr,0,Gr);Pr.push(Gr)}}},Mr=new class{constructor(){this.wasm={},this.webgl={},this.webgpu={},this.logLevelInternal="warning"}set logLevel(Gr){if(Gr!==void 0){if(typeof Gr!="string"||["verbose","info","warning","error","fatal"].indexOf(Gr)===-1)throw new Error(`Unsupported logging level: ${Gr}`);this.logLevelInternal=Gr}}get logLevel(){return this.logLevelInternal}},Fr=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),zr=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let Ur=!1;class Vr{constructor(Wr,qr,Kr){let Xr,Zr,Jr;if((()=>{if(!Ur){Ur=!0;const es=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",ts=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";es&&(Fr.set("int64",BigInt64Array),zr.set(BigInt64Array,"int64")),ts&&(Fr.set("uint64",BigUint64Array),zr.set(BigUint64Array,"uint64"))}})(),typeof Wr=="string")if(Xr=Wr,Jr=Kr,Wr==="string"){if(!Array.isArray(qr))throw new TypeError("A string tensor's data must be a string array.");Zr=qr}else{const es=Fr.get(Wr);if(es===void 0)throw new TypeError(`Unsupported tensor type: ${Wr}.`);if(Array.isArray(qr))Zr=es.from(qr);else{if(!(qr instanceof es))throw new TypeError(`A ${Xr} tensor's data must be type of ${es}`);Zr=qr}}else if(Jr=qr,Array.isArray(Wr)){if(Wr.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const es=typeof Wr[0];if(es==="string")Xr="string",Zr=Wr;else{if(es!=="boolean")throw new TypeError(`Invalid element type of data array: ${es}.`);Xr="bool",Zr=Uint8Array.from(Wr)}}else{const es=zr.get(Wr.constructor);if(es===void 0)throw new TypeError(`Unsupported type for tensor data: ${Wr.constructor}.`);Xr=es,Zr=Wr}if(Jr===void 0)Jr=[Zr.length];else if(!Array.isArray(Jr))throw new TypeError("A tensor's dims must be a number array");const _i=(es=>{let ts=1;for(let rs=0;rs<es.length;rs++){const ns=es[rs];if(typeof ns!="number"||!Number.isSafeInteger(ns))throw new TypeError(`dims[${rs}] must be an integer, got: ${ns}`);if(ns<0)throw new RangeError(`dims[${rs}] must be a non-negative integer, got: ${ns}`);ts*=ns}return ts})(Jr);if(_i!==Zr.length)throw new Error(`Tensor's size(${_i}) does not match data length(${Zr.length}).`);this.dims=Jr,this.type=Xr,this.data=Zr,this.size=_i}static bufferToTensor(Wr,qr){if(Wr===void 0)throw new Error("Image buffer must be defined");if(qr.height===void 0||qr.width===void 0)throw new Error("Image height and width must be defined");if(qr.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");const{height:Kr,width:Xr}=qr,Zr=qr.norm??{mean:255,bias:0};let Jr,_i;Jr=typeof Zr.mean=="number"?[Zr.mean,Zr.mean,Zr.mean,Zr.mean]:[Zr.mean[0],Zr.mean[1],Zr.mean[2],Zr.mean[3]??255],_i=typeof Zr.bias=="number"?[Zr.bias,Zr.bias,Zr.bias,Zr.bias]:[Zr.bias[0],Zr.bias[1],Zr.bias[2],Zr.bias[3]??0];const es=qr.bitmapFormat!==void 0?qr.bitmapFormat:"RGBA",ts=qr.tensorFormat!==void 0&&qr.tensorFormat!==void 0?qr.tensorFormat:"RGB",rs=Kr*Xr,ns=ts==="RGBA"?new Float32Array(4*rs):new Float32Array(3*rs);let as=4,ls=0,us=1,xs=2,Ts=3,vs=0,gs=rs,fs=2*rs,ys=-1;es==="RGB"&&(as=3,ls=0,us=1,xs=2,Ts=-1),ts==="RGBA"?ys=3*rs:ts==="RBG"?(vs=0,fs=rs,gs=2*rs):ts==="BGR"&&(fs=0,gs=rs,vs=2*rs);for(let ks=0;ks<rs;ks++,ls+=as,xs+=as,us+=as,Ts+=as)ns[vs++]=(Wr[ls]+_i[0])/Jr[0],ns[gs++]=(Wr[us]+_i[1])/Jr[1],ns[fs++]=(Wr[xs]+_i[2])/Jr[2],ys!==-1&&Ts!==-1&&(ns[ys++]=(Wr[Ts]+_i[3])/Jr[3]);return new Vr("float32",ns,ts==="RGBA"?[1,4,Kr,Xr]:[1,3,Kr,Xr])}static async fromImage(Wr,qr){const Kr=typeof HTMLImageElement<"u"&&Wr instanceof HTMLImageElement,Xr=typeof ImageData<"u"&&Wr instanceof ImageData,Zr=typeof ImageBitmap<"u"&&Wr instanceof ImageBitmap,Jr=typeof Wr=="string";let _i,es=qr??{};if(Kr){const ts=document.createElement("canvas");ts.width=Wr.width,ts.height=Wr.height;const rs=ts.getContext("2d");if(rs==null)throw new Error("Can not access image data");{let ns=Wr.height,as=Wr.width;if(qr!==void 0&&qr.resizedHeight!==void 0&&qr.resizedWidth!==void 0&&(ns=qr.resizedHeight,as=qr.resizedWidth),qr!==void 0){if(es=qr,qr.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(es.tensorFormat="RGBA",qr.height!==void 0&&qr.height!==ns)throw new Error("Image input config height doesn't match HTMLImageElement height");if(es.height=ns,qr.width!==void 0&&qr.width!==as)throw new Error("Image input config width doesn't match HTMLImageElement width");es.width=as}else es.tensorFormat="RGBA",es.height=ns,es.width=as;rs.drawImage(Wr,0,0),_i=rs.getImageData(0,0,as,ns).data}}else{if(!Xr){if(Zr){if(qr===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(qr.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const ts=document.createElement("canvas").getContext("2d");if(ts!=null){const rs=Wr.height,ns=Wr.width;if(ts.drawImage(Wr,0,0,ns,rs),_i=ts.getImageData(0,0,ns,rs).data,qr!==void 0){if(qr.height!==void 0&&qr.height!==rs)throw new Error("Image input config height doesn't match ImageBitmap height");if(es.height=rs,qr.width!==void 0&&qr.width!==ns)throw new Error("Image input config width doesn't match ImageBitmap width");es.width=ns}else es.height=rs,es.width=ns;return Vr.bufferToTensor(_i,es)}throw new Error("Can not access image data")}if(Jr)return new Promise((ts,rs)=>{const ns=document.createElement("canvas"),as=ns.getContext("2d");if(!Wr||!as)return rs();const ls=new Image;ls.crossOrigin="Anonymous",ls.src=Wr,ls.onload=()=>{ns.width=ls.width,ns.height=ls.height,as.drawImage(ls,0,0,ns.width,ns.height);const us=as.getImageData(0,0,ns.width,ns.height);if(qr!==void 0){if(qr.height!==void 0&&qr.height!==ns.height)throw new Error("Image input config height doesn't match height");if(es.height=ns.height,qr.width!==void 0&&qr.width!==ns.width)throw new Error("Image input config width doesn't match width");es.width=ns.width}else es.height=ns.height,es.width=ns.width;ts(Vr.bufferToTensor(us.data,es))}});throw new Error("Input data provided is not supported - aborted tensor creation")}{const ts="RGBA";let rs,ns;if(qr!==void 0&&qr.resizedWidth!==void 0&&qr.resizedHeight!==void 0?(rs=qr.resizedHeight,ns=qr.resizedWidth):(rs=Wr.height,ns=Wr.width),qr!==void 0){if(es=qr,qr.bitmapFormat!==void 0&&qr.bitmapFormat!==ts)throw new Error("Image input config format must be RGBA for ImageData");es.bitmapFormat="RGBA"}else es.bitmapFormat="RGBA";if(es.height=rs,es.width=ns,qr!==void 0){const as=document.createElement("canvas");as.width=ns,as.height=rs;const ls=as.getContext("2d");if(ls==null)throw new Error("Can not access image data");ls.putImageData(Wr,0,0),_i=ls.getImageData(0,0,ns,rs).data}else _i=Wr.data}}if(_i!==void 0)return Vr.bufferToTensor(_i,es);throw new Error("Input data provided is not supported - aborted tensor creation")}toDataURL(Wr){const qr=document.createElement("canvas");qr.width=this.dims[3],qr.height=this.dims[2];const Kr=qr.getContext("2d");if(Kr!=null){let Xr,Zr;(Wr==null?void 0:Wr.tensorLayout)!==void 0&&Wr.tensorLayout==="NHWC"?(Xr=this.dims[2],Zr=this.dims[3]):(Xr=this.dims[3],Zr=this.dims[2]);const Jr=(Wr==null?void 0:Wr.format)!==void 0?Wr.format:"RGB",_i=Wr==null?void 0:Wr.norm;let es,ts;_i===void 0||_i.mean===void 0?es=[255,255,255,255]:typeof _i.mean=="number"?es=[_i.mean,_i.mean,_i.mean,_i.mean]:(es=[_i.mean[0],_i.mean[1],_i.mean[2],0],_i.mean[3]!==void 0&&(es[3]=_i.mean[3])),_i===void 0||_i.bias===void 0?ts=[0,0,0,0]:typeof _i.bias=="number"?ts=[_i.bias,_i.bias,_i.bias,_i.bias]:(ts=[_i.bias[0],_i.bias[1],_i.bias[2],0],_i.bias[3]!==void 0&&(ts[3]=_i.bias[3]));const rs=Zr*Xr;let ns=0,as=rs,ls=2*rs,us=-1;Jr==="RGBA"?(ns=0,as=rs,ls=2*rs,us=3*rs):Jr==="RGB"?(ns=0,as=rs,ls=2*rs):Jr==="RBG"&&(ns=0,ls=rs,as=2*rs);for(let xs=0;xs<Zr;xs++)for(let Ts=0;Ts<Xr;Ts++){const vs=(this.data[ns++]-ts[0])*es[0],gs=(this.data[as++]-ts[1])*es[1],fs=(this.data[ls++]-ts[2])*es[2],ys=us===-1?255:(this.data[us++]-ts[3])*es[3];Kr.fillStyle="rgba("+vs+","+gs+","+fs+","+ys+")",Kr.fillRect(Ts,xs,1,1)}return qr.toDataURL()}throw new Error("Can not access image data")}toImageData(Wr){const qr=document.createElement("canvas").getContext("2d");let Kr;if(qr==null)throw new Error("Can not access image data");{let Xr,Zr,Jr;(Wr==null?void 0:Wr.tensorLayout)!==void 0&&Wr.tensorLayout==="NHWC"?(Xr=this.dims[2],Zr=this.dims[1],Jr=this.dims[3]):(Xr=this.dims[3],Zr=this.dims[2],Jr=this.dims[1]);const _i=Wr!==void 0&&Wr.format!==void 0?Wr.format:"RGB",es=Wr==null?void 0:Wr.norm;let ts,rs;es===void 0||es.mean===void 0?ts=[255,255,255,255]:typeof es.mean=="number"?ts=[es.mean,es.mean,es.mean,es.mean]:(ts=[es.mean[0],es.mean[1],es.mean[2],255],es.mean[3]!==void 0&&(ts[3]=es.mean[3])),es===void 0||es.bias===void 0?rs=[0,0,0,0]:typeof es.bias=="number"?rs=[es.bias,es.bias,es.bias,es.bias]:(rs=[es.bias[0],es.bias[1],es.bias[2],0],es.bias[3]!==void 0&&(rs[3]=es.bias[3]));const ns=Zr*Xr;if(Wr!==void 0){if(Wr.height!==void 0&&Wr.height!==Zr)throw new Error("Image output config height doesn't match tensor height");if(Wr.width!==void 0&&Wr.width!==Xr)throw new Error("Image output config width doesn't match tensor width");if(Wr.format!==void 0&&Jr===4&&Wr.format!=="RGBA"||Jr===3&&Wr.format!=="RGB"&&Wr.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const as=4;let ls=0,us=1,xs=2,Ts=3,vs=0,gs=ns,fs=2*ns,ys=-1;_i==="RGBA"?(vs=0,gs=ns,fs=2*ns,ys=3*ns):_i==="RGB"?(vs=0,gs=ns,fs=2*ns):_i==="RBG"&&(vs=0,fs=ns,gs=2*ns),Kr=qr.createImageData(Xr,Zr);for(let ks=0;ks<Zr*Xr;ls+=as,us+=as,xs+=as,Ts+=as,ks++)Kr.data[ls]=(this.data[vs++]-rs[0])*ts[0],Kr.data[us]=(this.data[gs++]-rs[1])*ts[1],Kr.data[xs]=(this.data[fs++]-rs[2])*ts[2],Kr.data[Ts]=ys===-1?255:(this.data[ys++]-rs[3])*ts[3]}return Kr}reshape(Wr){return new Vr(this.type,this.data,Wr)}}const Nr=Vr;class Dr{constructor(Wr){this.handler=Wr}async run(Wr,qr,Kr){const Xr={};let Zr={};if(typeof Wr!="object"||Wr===null||Wr instanceof Nr||Array.isArray(Wr))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let Jr=!0;if(typeof qr=="object"){if(qr===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(qr instanceof Nr)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(qr)){if(qr.length===0)throw new TypeError("'fetches' cannot be an empty array.");Jr=!1;for(const ts of qr){if(typeof ts!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(ts)===-1)throw new RangeError(`'fetches' contains invalid output name: ${ts}.`);Xr[ts]=null}if(typeof Kr=="object"&&Kr!==null)Zr=Kr;else if(Kr!==void 0)throw new TypeError("'options' must be an object.")}else{let ts=!1;const rs=Object.getOwnPropertyNames(qr);for(const ns of this.outputNames)if(rs.indexOf(ns)!==-1){const as=qr[ns];(as===null||as instanceof Nr)&&(ts=!0,Jr=!1,Xr[ns]=as)}if(ts){if(typeof Kr=="object"&&Kr!==null)Zr=Kr;else if(Kr!==void 0)throw new TypeError("'options' must be an object.")}else Zr=qr}}else if(qr!==void 0)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const ts of this.inputNames)if(Wr[ts]===void 0)throw new Error(`input '${ts}' is missing in 'feeds'.`);if(Jr)for(const ts of this.outputNames)Xr[ts]=null;const _i=await this.handler.run(Wr,Xr,Zr),es={};for(const ts in _i)Object.hasOwnProperty.call(_i,ts)&&(es[ts]=new Nr(_i[ts].type,_i[ts].data,_i[ts].dims));return es}static async create(Wr,qr,Kr,Xr){let Zr,Jr={};if(typeof Wr=="string"){if(Zr=Wr,typeof qr=="object"&&qr!==null)Jr=qr;else if(qr!==void 0)throw new TypeError("'options' must be an object.")}else if(Wr instanceof Uint8Array){if(Zr=Wr,typeof qr=="object"&&qr!==null)Jr=qr;else if(qr!==void 0)throw new TypeError("'options' must be an object.")}else{if(!(Wr instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&Wr instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const rs=Wr;let ns=0,as=Wr.byteLength;if(typeof qr=="object"&&qr!==null)Jr=qr;else if(typeof qr=="number"){if(ns=qr,!Number.isSafeInteger(ns))throw new RangeError("'byteOffset' must be an integer.");if(ns<0||ns>=rs.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${rs.byteLength}).`);if(as=Wr.byteLength-ns,typeof Kr=="number"){if(as=Kr,!Number.isSafeInteger(as))throw new RangeError("'byteLength' must be an integer.");if(as<=0||ns+as>rs.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${rs.byteLength-ns}].`);if(typeof Xr=="object"&&Xr!==null)Jr=Xr;else if(Xr!==void 0)throw new TypeError("'options' must be an object.")}else if(Kr!==void 0)throw new TypeError("'byteLength' must be a number.")}else if(qr!==void 0)throw new TypeError("'options' must be an object.");Zr=new Uint8Array(rs,ns,as)}}const _i=(Jr.executionProviders||[]).map(rs=>typeof rs=="string"?rs:rs.name),es=await(async rs=>{const ns=rs.length===0?Pr:rs,as=[];for(const ls of ns){const us=Ar[ls];if(us){if(us.initialized)return us.backend;if(us.aborted)continue;const xs=!!us.initPromise;try{return xs||(us.initPromise=us.backend.init()),await us.initPromise,us.initialized=!0,us.backend}catch(Ts){xs||as.push({name:ls,err:Ts}),us.aborted=!0}finally{delete us.initPromise}}}throw new Error(`no available backend found. ERR: ${as.map(ls=>`[${ls.name}] ${ls.err}`).join(", ")}`)})(_i),ts=await es.createSessionHandler(Zr,Jr);return new Dr(ts)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}const jr=Dr},5716:(_r,Tr,Rr)=>{Tr.R=void 0;const Ar=Rr(6027),Pr=Rr(1723);Tr.R=new class{async init(){}async createSessionHandler(Lr,Mr){const Fr=new Ar.Session(Mr);return await Fr.loadModel(Lr),new Pr.OnnxjsSessionHandler(Fr)}}},2818:(_r,Tr,Rr)=>{Tr.c8=Tr.rX=void 0;const Ar=Rr(8453),Pr=Rr(5381),Lr=Rr(9544),Mr=Rr(6640);Tr.rX=()=>{if((typeof Ar.env.wasm.initTimeout!="number"||Ar.env.wasm.initTimeout<0)&&(Ar.env.wasm.initTimeout=0),typeof Ar.env.wasm.simd!="boolean"&&(Ar.env.wasm.simd=!0),typeof Ar.env.wasm.proxy!="boolean"&&(Ar.env.wasm.proxy=!1),typeof Ar.env.wasm.numThreads!="number"||!Number.isInteger(Ar.env.wasm.numThreads)||Ar.env.wasm.numThreads<=0){const Fr=typeof navigator>"u"?(0,Pr.cpus)().length:navigator.hardwareConcurrency;Ar.env.wasm.numThreads=Math.min(4,Math.ceil((Fr||1)/2))}},Tr.c8=new class{async init(){(0,Tr.rX)(),await(0,Lr.initWasm)()}async createSessionHandler(Fr,zr){const Ur=new Mr.OnnxruntimeWebAssemblySessionHandler;return await Ur.loadModel(Fr,zr),Promise.resolve(Ur)}}},1057:function(_r,Tr,Rr){var Ar=this&&this.__createBinding||(Object.create?function(Mr,Fr,zr,Ur){Ur===void 0&&(Ur=zr);var Vr=Object.getOwnPropertyDescriptor(Fr,zr);Vr&&!("get"in Vr?!Fr.__esModule:Vr.writable||Vr.configurable)||(Vr={enumerable:!0,get:function(){return Fr[zr]}}),Object.defineProperty(Mr,Ur,Vr)}:function(Mr,Fr,zr,Ur){Ur===void 0&&(Ur=zr),Mr[Ur]=Fr[zr]}),Pr=this&&this.__exportStar||function(Mr,Fr){for(var zr in Mr)zr==="default"||Object.prototype.hasOwnProperty.call(Fr,zr)||Ar(Fr,Mr,zr)};Object.defineProperty(Tr,"__esModule",{value:!0}),Pr(Rr(8453),Tr);const Lr=Rr(8453);{const Mr=Rr(5716).R;(0,Lr.registerBackend)("webgl",Mr,-10)}{const Mr=Rr(2818).c8;(0,Lr.registerBackend)("cpu",Mr,10),(0,Lr.registerBackend)("wasm",Mr,10),(0,Lr.registerBackend)("xnnpack",Mr,9)}},4910:(_r,Tr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createAttributeWithCacheKey=void 0;class Rr{constructor(Pr){Object.assign(this,Pr)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(Pr=>`${this[Pr]}`).join(";")),this._cacheKey}}Tr.createAttributeWithCacheKey=Ar=>new Rr(Ar)},6874:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.Attribute=void 0;const Ar=Rr(1446),Pr=Rr(1287),Lr=Rr(9240),Mr=Rr(7273);var Fr=Pr.onnxruntime.experimental.fbs;class zr{constructor(Vr){if(this._attributes=new Map,Vr!=null){for(const Nr of Vr)Nr instanceof Ar.onnx.AttributeProto?this._attributes.set(Nr.name,[zr.getValue(Nr),zr.getType(Nr)]):Nr instanceof Fr.Attribute&&this._attributes.set(Nr.name(),[zr.getValue(Nr),zr.getType(Nr)]);if(this._attributes.size<Vr.length)throw new Error("duplicated attribute names")}}set(Vr,Nr,Dr){this._attributes.set(Vr,[Dr,Nr])}delete(Vr){this._attributes.delete(Vr)}getFloat(Vr,Nr){return this.get(Vr,"float",Nr)}getInt(Vr,Nr){return this.get(Vr,"int",Nr)}getString(Vr,Nr){return this.get(Vr,"string",Nr)}getTensor(Vr,Nr){return this.get(Vr,"tensor",Nr)}getFloats(Vr,Nr){return this.get(Vr,"floats",Nr)}getInts(Vr,Nr){return this.get(Vr,"ints",Nr)}getStrings(Vr,Nr){return this.get(Vr,"strings",Nr)}getTensors(Vr,Nr){return this.get(Vr,"tensors",Nr)}get(Vr,Nr,Dr){const jr=this._attributes.get(Vr);if(jr===void 0){if(Dr!==void 0)return Dr;throw new Error(`required attribute not found: ${Vr}`)}if(jr[1]!==Nr)throw new Error(`type mismatch: expected ${Nr} but got ${jr[1]}`);return jr[0]}static getType(Vr){const Nr=Vr instanceof Ar.onnx.AttributeProto?Vr.type:Vr.type();switch(Nr){case Ar.onnx.AttributeProto.AttributeType.FLOAT:return"float";case Ar.onnx.AttributeProto.AttributeType.INT:return"int";case Ar.onnx.AttributeProto.AttributeType.STRING:return"string";case Ar.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case Ar.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case Ar.onnx.AttributeProto.AttributeType.INTS:return"ints";case Ar.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case Ar.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${Ar.onnx.AttributeProto.AttributeType[Nr]}`)}}static getValue(Vr){const Nr=Vr instanceof Ar.onnx.AttributeProto?Vr.type:Vr.type();if(Nr===Ar.onnx.AttributeProto.AttributeType.GRAPH||Nr===Ar.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const Dr=this.getValueNoCheck(Vr);if(Nr===Ar.onnx.AttributeProto.AttributeType.INT&&Mr.LongUtil.isLong(Dr))return Mr.LongUtil.longToNumber(Dr);if(Nr===Ar.onnx.AttributeProto.AttributeType.INTS){const jr=Dr,Gr=new Array(jr.length);for(let Wr=0;Wr<jr.length;Wr++){const qr=jr[Wr];Gr[Wr]=Mr.LongUtil.longToNumber(qr)}return Gr}if(Nr===Ar.onnx.AttributeProto.AttributeType.TENSOR)return Vr instanceof Ar.onnx.AttributeProto?Lr.Tensor.fromProto(Dr):Lr.Tensor.fromOrtTensor(Dr);if(Nr===Ar.onnx.AttributeProto.AttributeType.TENSORS){if(Vr instanceof Ar.onnx.AttributeProto)return Dr.map(jr=>Lr.Tensor.fromProto(jr));if(Vr instanceof Fr.Attribute)return Dr.map(jr=>Lr.Tensor.fromOrtTensor(jr))}if(Nr===Ar.onnx.AttributeProto.AttributeType.STRING&&Vr instanceof Ar.onnx.AttributeProto){const jr=Dr;return(0,Mr.decodeUtf8String)(jr)}return Nr===Ar.onnx.AttributeProto.AttributeType.STRINGS&&Vr instanceof Ar.onnx.AttributeProto?Dr.map(Mr.decodeUtf8String):Dr}static getValueNoCheck(Vr){return Vr instanceof Ar.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(Vr):this.getValueNoCheckFromOrtFormat(Vr)}static getValueNoCheckFromOnnxFormat(Vr){switch(Vr.type){case Ar.onnx.AttributeProto.AttributeType.FLOAT:return Vr.f;case Ar.onnx.AttributeProto.AttributeType.INT:return Vr.i;case Ar.onnx.AttributeProto.AttributeType.STRING:return Vr.s;case Ar.onnx.AttributeProto.AttributeType.TENSOR:return Vr.t;case Ar.onnx.AttributeProto.AttributeType.GRAPH:return Vr.g;case Ar.onnx.AttributeProto.AttributeType.FLOATS:return Vr.floats;case Ar.onnx.AttributeProto.AttributeType.INTS:return Vr.ints;case Ar.onnx.AttributeProto.AttributeType.STRINGS:return Vr.strings;case Ar.onnx.AttributeProto.AttributeType.TENSORS:return Vr.tensors;case Ar.onnx.AttributeProto.AttributeType.GRAPHS:return Vr.graphs;default:throw new Error(`unsupported attribute type: ${Ar.onnx.AttributeProto.AttributeType[Vr.type]}`)}}static getValueNoCheckFromOrtFormat(Vr){switch(Vr.type()){case Fr.AttributeType.FLOAT:return Vr.f();case Fr.AttributeType.INT:return Vr.i();case Fr.AttributeType.STRING:return Vr.s();case Fr.AttributeType.TENSOR:return Vr.t();case Fr.AttributeType.GRAPH:return Vr.g();case Fr.AttributeType.FLOATS:return Vr.floatsArray();case Fr.AttributeType.INTS:{const Nr=[];for(let Dr=0;Dr<Vr.intsLength();Dr++)Nr.push(Vr.ints(Dr));return Nr}case Fr.AttributeType.STRINGS:{const Nr=[];for(let Dr=0;Dr<Vr.stringsLength();Dr++)Nr.push(Vr.strings(Dr));return Nr}case Fr.AttributeType.TENSORS:{const Nr=[];for(let Dr=0;Dr<Vr.tensorsLength();Dr++)Nr.push(Vr.tensors(Dr));return Nr}default:throw new Error(`unsupported attribute type: ${Fr.AttributeType[Vr.type()]}`)}}}Tr.Attribute=zr},1975:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.resolveBackend=Tr.backend=void 0;const Ar=Rr(4418),Pr=new Map;async function Lr(Mr){const Fr=Tr.backend;if(Fr[Mr]!==void 0&&function(zr){const Ur=zr;return"initialize"in Ur&&typeof Ur.initialize=="function"&&"createSessionHandler"in Ur&&typeof Ur.createSessionHandler=="function"&&"dispose"in Ur&&typeof Ur.dispose=="function"}(Fr[Mr])){const zr=Fr[Mr];let Ur=zr.initialize();if(typeof Ur=="object"&&"then"in Ur&&(Ur=await Ur),Ur)return Pr.set(Mr,zr),zr}}Tr.backend={webgl:new Ar.WebGLBackend},Tr.resolveBackend=async function Mr(Fr){if(!Fr)return Mr(["webgl"]);{const zr=typeof Fr=="string"?[Fr]:Fr;for(const Ur of zr){const Vr=Pr.get(Ur);if(Vr)return Vr;const Nr=await Lr(Ur);if(Nr)return Nr}}throw new Error("no available backend to use")}},4418:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.WebGLBackend=void 0;const Ar=Rr(8453),Pr=Rr(1315),Lr=Rr(2171),Mr=Rr(3389);Tr.WebGLBackend=class{get contextId(){return Ar.env.webgl.contextId}set contextId(Fr){Ar.env.webgl.contextId=Fr}get matmulMaxBatchSize(){return Ar.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(Fr){Ar.env.webgl.matmulMaxBatchSize=Fr}get textureCacheMode(){return Ar.env.webgl.textureCacheMode}set textureCacheMode(Fr){Ar.env.webgl.textureCacheMode=Fr}get pack(){return Ar.env.webgl.pack}set pack(Fr){Ar.env.webgl.pack=Fr}get async(){return Ar.env.webgl.async}set async(Fr){Ar.env.webgl.async=Fr}initialize(){try{return this.glContext=(0,Mr.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),Pr.Logger.setWithEnv(Ar.env),Pr.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(Fr){return Pr.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${Fr}`),!1}}createSessionHandler(Fr){return new Lr.WebGLSessionHandler(this,Fr)}dispose(){this.glContext.dispose()}}},6859:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.CoordsGlslLib=void 0;const Ar=Rr(7273),Pr=Rr(1997),Lr=Rr(6757),Mr=Rr(7618),Fr=Rr(432);class zr extends Pr.GlslLib{constructor(Vr){super(Vr)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new Pr.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new Pr.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const Vr=this.context.outputTextureLayout;return Vr.isPacked?this.getPackedOutputSamplingSnippet(Vr):this.getUnpackedOutputSamplingSnippet(Vr)}getPackedOutputSamplingSnippet(Vr){const Nr=Vr.unpackedShape,Dr=[Vr.width,Vr.height],jr={},Gr="getOutputCoords";switch(Nr.length){case 0:jr[Gr]=this.getOutputScalarCoords();break;case 1:jr[Gr]=this.getOutputPacked1DCoords(Nr,Dr);break;case 2:jr[Gr]=this.getOutputPacked2DCoords(Nr,Dr);break;case 3:jr[Gr]=this.getOutputPacked3DCoords(Nr,Dr);break;default:jr[Gr]=this.getOutputPackedNDCoords(Nr,Dr)}const Wr=`
      void setOutput(vec4 val) {
        ${(0,Lr.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return jr.floatTextureSetRGBA=new Pr.GlslLibRoutine(Wr),jr}getUnpackedOutputSamplingSnippet(Vr){const Nr=Vr.unpackedShape,Dr=[Vr.width,Vr.height],jr={},Gr="getOutputCoords";switch(Nr.length){case 0:jr[Gr]=this.getOutputScalarCoords();break;case 1:jr[Gr]=this.getOutputUnpacked1DCoords(Nr,Dr);break;case 2:jr[Gr]=this.getOutputUnpacked2DCoords(Nr,Dr);break;case 3:jr[Gr]=this.getOutputUnpacked3DCoords(Nr,Dr);break;case 4:jr[Gr]=this.getOutputUnpacked4DCoords(Nr,Dr);break;case 5:jr[Gr]=this.getOutputUnpacked5DCoords(Nr,Dr);break;case 6:jr[Gr]=this.getOutputUnpacked6DCoords(Nr,Dr);break;default:throw new Error(`Unsupported output dimensionality: ${Nr.length}`)}const Wr=`
        void setOutput(float val) {
          ${(0,Lr.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return jr.floatTextureSetR=new Pr.GlslLibRoutine(Wr),jr}getOutputScalarCoords(){return new Pr.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(Vr,Nr){const Dr=Nr;let jr="";return Dr[0]===1?(jr=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${Dr[1]}.0);
          }
        `,new Pr.GlslLibRoutine(jr)):Dr[1]===1?(jr=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${Dr[0]}.0);
          }
        `,new Pr.GlslLibRoutine(jr)):(jr=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${Dr[0]}, ${Dr[1]}));
          return 2 * (resTexRC.y * ${Dr[0]} + resTexRC.x);
        }
      `,new Pr.GlslLibRoutine(jr))}getOutputPacked2DCoords(Vr,Nr){let Dr="";if(Ar.ArrayUtil.arraysEqual(Vr,Nr))return Dr=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${Nr[0]}, ${Nr[1]}));
        }
      `,new Pr.GlslLibRoutine(Dr);const jr=Nr,Gr=Math.ceil(Vr[1]/2);return Dr=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${jr[0]}, ${jr[1]}));

          int index = resTexRC.y * ${jr[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${Gr}) * 2;
          int c = 2 * (index / ${Gr});

          return ivec2(r, c);
        }
      `,new Pr.GlslLibRoutine(Dr)}getOutputPacked3DCoords(Vr,Nr){const Dr=[Nr[0],Nr[1]],jr=Math.ceil(Vr[2]/2),Gr=jr*Math.ceil(Vr[1]/2),Wr=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Dr[0]}, ${Dr[1]}));
          int index = resTexRC.y * ${Dr[0]} + resTexRC.x;

          int b = index / ${Gr};
          index -= b * ${Gr};

          // reverse r and c order for packed texture
          int r = imod(index, ${jr}) * 2;
          int c = 2 * (index / ${jr});

          return ivec3(b, r, c);
        }
      `;return new Pr.GlslLibRoutine(Wr)}getOutputPackedNDCoords(Vr,Nr){const Dr=[Nr[0],Nr[1]],jr=Math.ceil(Vr[Vr.length-1]/2),Gr=jr*Math.ceil(Vr[Vr.length-2]/2);let Wr=Gr,qr="",Kr="b, r, c";for(let Zr=2;Zr<Vr.length-1;Zr++)Wr*=Vr[Vr.length-Zr-1],qr=`
      int b${Zr} = index / ${Wr};
      index -= b${Zr} * ${Wr};
    `+qr,Kr=`b${Zr}, `+Kr;const Xr=`
      ivec${Vr.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${Dr[0]}, ${Dr[1]}));
        int index = resTexRC.y * ${Dr[0]} + resTexRC.x;

        ${qr}

        int b = index / ${Gr};
        index -= b * ${Gr};

        // reverse r and c order for packed texture
        int r = imod(index, ${jr}) * 2;
        int c = 2 * (index / ${jr});

        return ivec${Vr.length}(${Kr});
      }
    `;return new Pr.GlslLibRoutine(Xr)}getOutputUnpacked1DCoords(Vr,Nr){const Dr=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Nr[0]}, ${Nr[1]}));
          return resTexRC.y * ${Nr[0]} + resTexRC.x;
        }
      `;return new Pr.GlslLibRoutine(Dr)}getOutputUnpacked2DCoords(Vr,Nr){const Dr=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Nr[0]}, ${Nr[1]}));
          int index = resTexRC.y * ${Nr[0]} + resTexRC.x;
          int r = index / ${Vr[1]};
          int c = index - r * ${Vr[1]};
          return ivec2(r, c);
        }
      `;return new Pr.GlslLibRoutine(Dr)}getOutputUnpacked3DCoords(Vr,Nr){let Dr="";const jr=Vr.length;let Gr=null;jr<2&&(Gr=[]),Gr=new Array(jr-1),Gr[jr-2]=Vr[jr-1];for(let Kr=jr-3;Kr>=0;--Kr)Gr[Kr]=Gr[Kr+1]*Vr[Kr+1];const Wr=["r","c","d"],qr=Gr.map((Kr,Xr)=>`int ${Wr[Xr]} = index / ${Kr}; ${Xr===Gr.length-1?`int ${Wr[Xr+1]} = index - ${Wr[Xr]} * ${Kr}`:`index -= ${Wr[Xr]} * ${Kr}`};`).join("");return Dr=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Nr[0]}, ${Nr[1]}));
          int index = resTexRC.y * ${Nr[0]} + resTexRC.x;
          ${qr}
          return ivec3(r, c, d);
        }
      `,new Pr.GlslLibRoutine(Dr)}getOutputUnpacked4DCoords(Vr,Nr){let Dr="";const jr=Vr.length;let Gr=null;jr<2&&(Gr=[]),Gr=new Array(jr-1),Gr[jr-2]=Vr[jr-1];for(let Kr=jr-3;Kr>=0;--Kr)Gr[Kr]=Gr[Kr+1]*Vr[Kr+1];const Wr=["r","c","d","d2"],qr=Gr.map((Kr,Xr)=>`int ${Wr[Xr]} = index / ${Kr}; ${Xr===Gr.length-1?`int ${Wr[Xr+1]} = index - ${Wr[Xr]} * ${Kr}`:`index -= ${Wr[Xr]} * ${Kr}`};`).join("");return Dr=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Nr[0]}, ${Nr[1]}));
          int index = resTexRC.y * ${Nr[0]} + resTexRC.x;
          ${qr}
          return ivec4(r, c, d, d2);
        }
      `,new Pr.GlslLibRoutine(Dr)}getOutputUnpacked5DCoords(Vr,Nr){let Dr="";const jr=Vr.length;let Gr=null;jr<2&&(Gr=[]),Gr=new Array(jr-1),Gr[jr-2]=Vr[jr-1];for(let Kr=jr-3;Kr>=0;--Kr)Gr[Kr]=Gr[Kr+1]*Vr[Kr+1];const Wr=["r","c","d","d2","d3"],qr=Gr.map((Kr,Xr)=>`int ${Wr[Xr]} = index / ${Kr}; ${Xr===Gr.length-1?`int ${Wr[Xr+1]} = index - ${Wr[Xr]} * ${Kr}`:`index -= ${Wr[Xr]} * ${Kr}`};`).join("");return Dr=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Nr[0]}, ${Nr[1]}));
          int index = resTexRC.y * ${Nr[0]} + resTexRC.x;
          ${qr}
          return ivec5(r, c, d, d2, d3);
        }
      `,new Pr.GlslLibRoutine(Dr)}getOutputUnpacked6DCoords(Vr,Nr){let Dr="";const jr=Vr.length;let Gr=null;jr<2&&(Gr=[]),Gr=new Array(jr-1),Gr[jr-2]=Vr[jr-1];for(let Kr=jr-3;Kr>=0;--Kr)Gr[Kr]=Gr[Kr+1]*Vr[Kr+1];const Wr=["r","c","d","d2","d3","d4"],qr=Gr.map((Kr,Xr)=>`int ${Wr[Xr]} = index / ${Kr}; ${Xr===Gr.length-1?`int ${Wr[Xr+1]} = index - ${Wr[Xr]} * ${Kr}`:`index -= ${Wr[Xr]} * ${Kr}`};`).join("");return Dr=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${Nr[0]}, ${Nr[1]}));
         int index = resTexRC.y * ${Nr[0]} + resTexRC.x;
         ${qr}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new Pr.GlslLibRoutine(Dr)}getCommonUtilFuncs(){const Vr={};let Nr="uvFromFlat";Vr[Nr]=new Pr.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),Nr="packedUVfrom1D",Vr[Nr]=new Pr.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Nr="packedUVfrom2D",Vr[Nr]=new Pr.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Nr="packedUVfrom3D",Vr[Nr]=new Pr.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Nr="sampleTexture";const Dr=(0,Lr.getGlsl)(this.context.glContext.version);return Vr[Nr]=new Pr.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${Dr.texture2D}(textureSampler, uv).r;
        }`),Vr}getInputsSamplingSnippets(){const Vr={},Nr=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((Dr,jr)=>{const Gr=this.context.inputTextureLayouts[jr],Wr=(0,Fr.generateShaderFuncNameFromInputSamplerName)(Dr);Gr.isPacked?Vr[Wr]=this.getPackedSamplerFromInput(Wr,Dr,Gr):Vr[Wr]=this.getUnpackedSamplerFromInput(Wr,Dr,Gr);const qr=(0,Fr.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(Dr);Gr.unpackedShape.length<=Nr.unpackedShape.length&&(Gr.isPacked?Vr[qr]=this.getPackedSamplerAtOutputCoords(qr,Gr,Nr,Dr):Vr[qr]=this.getUnpackedSamplerAtOutputCoords(qr,Gr,Nr,Dr))}),Vr}getPackedSamplerAtOutputCoords(Vr,Nr,Dr,jr){const Gr=Nr.unpackedShape,Wr=Dr.unpackedShape,qr=jr,Kr=(0,Fr.generateShaderFuncNameFromInputSamplerName)(qr),Xr=Gr.length,Zr=Wr.length,Jr=Ar.BroadcastUtil.getBroadcastDims(Gr,Wr),_i=(0,Fr.getCoordsDataType)(Zr),es=Zr-Xr;let ts;const rs=(0,Fr.getGlChannels)();ts=Xr===0?"":Zr<2&&Jr.length>=1?"coords = 0;":Jr.map(Ts=>`coords.${rs[Ts+es]} = 0;`).join(`
`);let ns="";ns=Zr<2&&Xr>0?"coords":Gr.map((Ts,vs)=>`coords.${rs[vs+es]}`).join(", ");let as="return outputValue;";const ls=Ar.ShapeUtil.size(Gr)===1,us=Ar.ShapeUtil.size(Wr)===1;if(Xr!==1||ls||us){if(ls&&!us)as=Zr===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(Jr.length){const Ts=Xr-2,vs=Xr-1;Jr.indexOf(Ts)>-1&&Jr.indexOf(vs)>-1?as="return vec4(outputValue.x);":Jr.indexOf(Ts)>-1?as="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":Jr.indexOf(vs)>-1&&(as="return vec4(outputValue.xx, outputValue.zz);")}}else as=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const xs=`
      vec4 ${Vr}() {
        ${_i} coords = getOutputCoords();
        
        int lastDim = coords.${rs[Zr-1]};
        coords.${rs[Zr-1]} = coords.${rs[Zr-2]};
        coords.${rs[Zr-2]} = lastDim;
      
        ${ts}
        vec4 outputValue = ${Kr}(${ns});
        ${as}
      }
    `;return new Pr.GlslLibRoutine(xs,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(Vr,Nr,Dr,jr){const Gr=[Dr.width,Dr.height],Wr=[Nr.width,Nr.height],qr=Nr.unpackedShape.length,Kr=Dr.unpackedShape.length,Xr=Nr.unpackedShape,Zr=Dr.unpackedShape,Jr=(0,Fr.generateShaderFuncNameFromInputSamplerName)(jr);if(qr===Kr&&Ar.ArrayUtil.arraysEqual(Wr,Gr)){const us=`
          float ${Vr}() {
            return sampleTexture(${jr}, TexCoords);
          }
        `;return new Pr.GlslLibRoutine(us,["coordinates.sampleTexture"])}const _i=(0,Fr.getCoordsDataType)(Kr),es=Ar.BroadcastUtil.getBroadcastDims(Xr,Zr),ts=Kr-qr;let rs;const ns=(0,Fr.getGlChannels)();rs=qr===0?"":Kr<2&&es.length>=1?"coords = 0;":es.map(us=>`coords.${ns[us+ts]} = 0;`).join(`
`);let as="";as=Kr<2&&qr>0?"coords":Nr.unpackedShape.map((us,xs)=>`coords.${ns[xs+ts]}`).join(", ");const ls=`
        float ${Vr}() {
          ${_i} coords = getOutputCoords();
          ${rs}
          return ${Jr}(${as});
        }
      `;return new Pr.GlslLibRoutine(ls,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(Vr,Nr,Dr){switch(Dr.unpackedShape.length){case 0:return this.getPackedSamplerScalar(Vr,Nr);case 1:return this.getPackedSampler1D(Vr,Nr,Dr);case 2:return this.getPackedSampler2D(Vr,Nr,Dr);case 3:return this.getPackedSampler3D(Vr,Nr,Dr);default:return this.getPackedSamplerND(Vr,Nr,Dr)}}getUnpackedSamplerFromInput(Vr,Nr,Dr){const jr=Dr.unpackedShape;switch(jr.length){case 0:return this.getUnpackedSamplerScalar(Vr,Nr,Dr);case 1:return this.getUnpackedSampler1D(Vr,Nr,Dr);case 2:return this.getUnpackedSampler2D(Vr,Nr,Dr);case 3:return this.getUnpackedSampler3D(Vr,Nr,Dr);case 4:return this.getUnpackedSampler4D(Vr,Nr,Dr);case 5:return this.getUnpackedSampler5D(Vr,Nr,Dr);case 6:return this.getUnpackedSampler6D(Vr,Nr,Dr);default:throw new Error(`Unsupported dimension ${jr.length}-D`)}}getPackedSamplerScalar(Vr,Nr){const Dr=`
          vec4 ${Vr}() {
            return ${(0,Lr.getGlsl)(this.context.glContext.version).texture2D}(${Nr}, halfCR);
          }
        `;return new Pr.GlslLibRoutine(Dr)}getPackedSampler1D(Vr,Nr,Dr){const jr=[Dr.width,Dr.height],Gr=[jr[1],jr[0]],Wr=(0,Lr.getGlsl)(this.context.glContext.version),qr=`vec4 ${Vr}(int index) {
      vec2 uv = packedUVfrom1D(
      ${Gr[0]}, ${Gr[1]}, index);
      return ${Wr.texture2D}(${Nr}, uv);
    }`;return new Pr.GlslLibRoutine(qr,["coordinates.packedUVfrom1D"])}getPackedSampler2D(Vr,Nr,Dr){const jr=Dr.unpackedShape,Gr=[Dr.width,Dr.height],Wr=(0,Lr.getGlsl)(this.context.glContext.version),qr=Gr[0],Kr=Gr[1];if(Gr!=null&&Ar.ArrayUtil.arraysEqual(jr,Gr)){const _i=`vec4 ${Vr}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${Kr}.0, ${qr}.0);
        return ${Wr.texture2D}(${Nr}, uv);
      }`;return new Pr.GlslLibRoutine(_i)}const Xr=Gr,Zr=Math.ceil(jr[1]/2),Jr=`vec4 ${Vr}(int row, int col) {
      vec2 uv = packedUVfrom2D(${Xr[1]}, ${Xr[0]}, ${Zr}, row, col);
      return ${Wr.texture2D}(${Nr}, uv);
    }`;return new Pr.GlslLibRoutine(Jr,["coordinates.packedUVfrom2D"])}getPackedSampler3D(Vr,Nr,Dr){const jr=Dr.unpackedShape,Gr=[Dr.width,Dr.height],Wr=[Gr[0],Gr[1]],qr=(0,Lr.getGlsl)(this.context.glContext.version);if(jr[0]===1){const _i=jr.slice(1),es=[1,2],ts=(0,Fr.squeezeInputShape)(jr,_i),rs=["b","row","col"],ns=JSON.parse(JSON.stringify(Dr));ns.unpackedShape=ts;const as=this.getPackedSamplerFromInput(Vr,Nr,ns),ls=`${as.routineBody}
      vec4 ${Vr}(int b, int row, int col) {
        return ${Vr}(${(0,Fr.getSqueezedParams)(rs,es)});
      } `;return new Pr.GlslLibRoutine(ls,as.dependencies)}const Kr=Wr[0],Xr=Wr[1],Zr=Math.ceil(jr[2]/2),Jr=`vec4 ${Vr}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${Xr}, ${Kr}, ${Zr*Math.ceil(jr[1]/2)}, ${Zr}, b, row, col);
      return ${qr.texture2D}(${Nr}, uv);}`;return new Pr.GlslLibRoutine(Jr,["coordinates.packedUVfrom3D"])}getPackedSamplerND(Vr,Nr,Dr){const jr=Dr.unpackedShape,Gr=jr.length,Wr=[Dr.width,Dr.height],qr=(0,Lr.getGlsl)(this.context.glContext.version),Kr=[Wr[0],Wr[1]],Xr=Kr[1],Zr=Kr[0],Jr=Math.ceil(jr[Gr-1]/2);let _i=Jr*Math.ceil(jr[Gr-2]/2),es="int b, int row, int col",ts=`b * ${_i} + (row / 2) * ${Jr} + (col / 2)`;for(let ns=2;ns<Gr-1;ns++)es=`int b${ns}, `+es,_i*=jr[Gr-ns-1],ts=`b${ns} * ${_i} + `+ts;const rs=`vec4 ${Vr}(${es}) {
      int index = ${ts};
      int texR = index / ${Zr};
      int texC = index - texR * ${Zr};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${Zr}, ${Xr});
      return ${qr.texture2D}(${Nr}, uv);
    }`;return new Pr.GlslLibRoutine(rs)}getUnpackedSamplerScalar(Vr,Nr,Dr){const[jr,Gr]=[Dr.width,Dr.height];if(jr===1&&Gr===1){const qr=`
          float ${Vr}() {
            return sampleTexture(${Nr}, halfCR);
          }
        `;return new Pr.GlslLibRoutine(qr,["coordinates.sampleTexture"])}const Wr=`
        float ${Vr}() {
          int offset_${Nr} = coordsToOffset(TexCoords, ${jr}, ${Gr});
          vec2 uv = uvFromFlat(${jr}, ${Gr}, offset_${Nr});
          return sampleTexture(${Nr}, uv);
        }
      `;return new Pr.GlslLibRoutine(Wr,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(Vr,Nr,Dr){const jr=Dr.width,Gr=Dr.height;if(Gr===1&&jr===1){const qr=`
        float ${Vr}(int index) {
          return sampleTexture(${Nr}, halfCR);
        }
      `;return new Pr.GlslLibRoutine(qr,["coordinates.sampleTexture"])}if(Gr===1){const qr=`
          float ${Vr}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${jr}.0, 0.5);
            return sampleTexture(${Nr}, uv);
          }
        `;return new Pr.GlslLibRoutine(qr,["coordinates.sampleTexture"])}if(jr===1){const qr=`
          float ${Vr}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${Gr}.0);
            return sampleTexture(${Nr}, uv);
          }
        `;return new Pr.GlslLibRoutine(qr,["coordinates.sampleTexture"])}const Wr=`
        float ${Vr}(int index) {
          vec2 uv = uvFromFlat(${jr}, ${Gr}, index);
          return sampleTexture(${Nr}, uv);
        }
      `;return new Pr.GlslLibRoutine(Wr,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(Vr,Nr,Dr){const jr=Dr.unpackedShape,Gr=[Dr.height,Dr.width];if(Gr!=null&&Ar.ArrayUtil.arraysEqual(jr,Gr)){const _i=`
          float ${Vr}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${Gr[1]}.0, ${Gr[0]}.0);
            return sampleTexture(${Nr}, uv);
          }
        `;return new Pr.GlslLibRoutine(_i,["coordinates.sampleTexture"])}const{newShape:Wr,keptDims:qr}=(0,Mr.squeezeShape)(jr),Kr=Wr;if(Kr.length<jr.length){const _i=(0,Fr.squeezeInputShape)(jr,Kr),es=JSON.parse(JSON.stringify(Dr));es.unpackedShape=_i;const ts=["col","row"],rs=`
          ${this.getUnpackedSamplerFromInput(Vr,Nr,es).routineBody}
          float ${Vr}(int row, int col) {
            return ${Vr}(${(0,Fr.getSqueezedParams)(ts,qr)});
          }
        `;return new Pr.GlslLibRoutine(rs,["coordinates.sampleTexture"])}const Xr=Gr[1],Zr=Gr[0];if(Zr===1){const _i=`
          float ${Vr}(int row, int col) {
            int offset_${Nr} = coordsToOffset(TexCoords, ${Xr}, ${Zr});
            float index = dot(vec3(row, col, offset_${Nr}), vec3(${jr[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${Xr}.0);
            return sampleTexture(${Nr}, uv);
          }
        `;return new Pr.GlslLibRoutine(_i,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(Xr===1){const _i=`
          float ${Vr}(int row, int col) {
            int offset_${Nr} = coordsToOffset(TexCoords, ${Xr}, ${Zr});
            float index = dot(vec3(row, col, offset_${Nr}), vec3(${jr[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${Zr}.0, 0.5);
            return sampleTexture(${Nr}, uv);
          }
        `;return new Pr.GlslLibRoutine(_i,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const Jr=`
        float ${Vr}(int row, int col) {
          int index = col * ${jr[1]} + row;
          vec2 uv = uvFromFlat(${Xr}, ${Zr}, index);
          return sampleTexture(${Nr}, uv);
        }
      `;return new Pr.GlslLibRoutine(Jr,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(Vr,Nr,Dr){const jr=Dr.unpackedShape,Gr=jr[1]*jr[2],Wr=jr[2],{newShape:qr,keptDims:Kr}=(0,Mr.squeezeShape)(jr),Xr=qr;if(Xr.length<jr.length){const Jr=(0,Fr.squeezeInputShape)(jr,Xr),_i=["batch","col","row"],es=JSON.parse(JSON.stringify(Dr));es.unpackedShape=Jr;const ts=this.getUnpackedSamplerFromInput(Vr,Nr,es),rs=Kr.reverse(),ns=`
          ${ts.routineBody}
          float ${Vr}(int batch, int row, int col) {
            return ${Vr}(${(0,Fr.getSqueezedParams)(_i,rs)});
          }
        `;return new Pr.GlslLibRoutine(ns,ts.dependencies)}const Zr=`
          float ${Vr}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${Gr} + col * ${Wr} + row;
            vec2 uv = uvFromFlat(${Dr.width}, ${Dr.height}, index);
            return sampleTexture(${Nr}, uv);
          }
      `;return new Pr.GlslLibRoutine(Zr,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(Vr,Nr,Dr){const jr=Dr.unpackedShape,Gr=jr[3],Wr=jr[2]*Gr,qr=`
        float ${Vr}(int row, int col, int depth, int depth2) {
          int index = row * ${jr[1]*Wr} + col * ${Wr} +
              depth2 * ${Gr} + depth;
          vec2 uv = uvFromFlat(${Dr.width}, ${Dr.height}, index);
          return sampleTexture(${Nr}, uv);
        }
      `;return new Pr.GlslLibRoutine(qr,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(Vr,Nr,Dr){const jr=Dr.unpackedShape,Gr=jr[4],Wr=jr[3]*Gr,qr=jr[2]*Wr,Kr=jr[1]*qr,{newShape:Xr,keptDims:Zr}=(0,Mr.squeezeShape)(jr);if(Xr.length<jr.length){const _i=(0,Fr.squeezeInputShape)(jr,Xr),es=["row","col","depth","depth2","depth3"],ts=JSON.parse(JSON.stringify(Dr));ts.unpackedShape=_i;const rs=`
          ${this.getUnpackedSamplerFromInput(Vr,Nr,ts).routineBody}
          float ${Vr}(int row, int col, int depth, int depth2, int depth3) {
            return ${Vr}(${(0,Fr.getSqueezedParams)(es,Zr)});
          }
        `;return new Pr.GlslLibRoutine(rs,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const Jr=`
        float ${Vr}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${Kr} + col * ${qr} + depth * ${Wr} +
          depth3 * ${Gr} + depth2;
          vec2 uv = uvFromFlat(${Dr.width}, ${Dr.height}, index);
          return sampleTexture(${Nr}, uv);
        }
      `;return new Pr.GlslLibRoutine(Jr,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(Vr,Nr,Dr){const jr=Dr.unpackedShape,Gr=jr[5],Wr=jr[4]*Gr,qr=jr[3]*Wr,Kr=jr[2]*qr,Xr=jr[1]*Kr,{newShape:Zr,keptDims:Jr}=(0,Mr.squeezeShape)(jr);if(Zr.length<jr.length){const es=(0,Fr.squeezeInputShape)(jr,Zr),ts=["row","col","depth","depth2","depth3","depth4"],rs=JSON.parse(JSON.stringify(Dr));rs.unpackedShape=es;const ns=`
            ${this.getUnpackedSamplerFromInput(Vr,Nr,rs).routineBody}
            float ${Vr}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${Vr}(${(0,Fr.getSqueezedParams)(ts,Jr)});
            }
          `;return new Pr.GlslLibRoutine(ns,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const _i=`
          float ${Vr}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${Xr} + col * ${Kr} + depth * ${qr} +
            depth2 * ${Wr} + depth3 * ${Gr} + depth4;
            vec2 uv = uvFromFlat(${Dr.width}, ${Dr.height}, index);
            return sampleTexture(${Nr}, uv);
          }
        `;return new Pr.GlslLibRoutine(_i,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const Vr=this.context.outputTextureLayout,Nr=Vr.shape.length,Dr=Vr.strides,jr=Vr.width,Gr=Vr.height,Wr=[];for(let Kr=0;Kr<Nr-1;++Kr)Wr.push(`
        c[${Kr}] = offset / ${Dr[Kr]};`),Wr.push(`
        offset -= c[${Kr}] * ${Dr[Kr]};`);Wr.push(`
        c[${Nr-1}] = offset;`);const qr=`
      void toVec(vec2 texCoords, out int c[${Nr}]) {
        int offset = coordsToOffset(texCoords, ${jr}, ${Gr});
        ${Wr.join("")}
      }
      void toVec(int offset, out int c[${Nr}]) {
        ${Wr.join("")}
      }
    `;return{toVec:new Pr.GlslLibRoutine(qr,["coordinates.coordsToOffset"])}}valueFrom(){const Vr={};return this.context.programInfo.inputNames.forEach((Nr,Dr)=>{const jr=this.context.inputTextureLayouts[Dr],Gr=(jr.unpackedShape.length>0?jr.unpackedShape:jr.shape).length;let Wr=`_${Nr}`;Vr[Wr]=new Pr.GlslLibRoutine(this.getValueFromSingle(Nr,Gr,jr.width,jr.height,!1),[`shapeUtils.indicesToOffset${Wr}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),Wr+="_T",Vr[Wr]=new Pr.GlslLibRoutine(this.getValueFromSingle(Nr,Gr,jr.width,jr.height,!0),[`shapeUtils.indicesToOffset${Wr}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),Vr}getValueFromSingle(Vr,Nr,Dr,jr,Gr){let Wr=`_${Vr}`;return Gr&&(Wr+="_T"),`
        float ${Wr}(int m[${Nr}]) {
          int offset = indicesToOffset${Wr}(m);
          vec2 coords = offsetToCoords(offset, ${Dr}, ${jr});
          float value = getColorAsFloat(${(0,Lr.getGlsl)(this.context.glContext.version).texture2D}(${Vr}, coords));
          return value;
        }
        `}getPackedValueFrom(Vr,Nr,Dr,jr,Gr){let Wr=`_${Vr}_Pack`;return Gr&&(Wr+="_T"),`
        vec4 ${Wr}(int m[${Nr}]) {
          int offset = indicesToOffset_${Vr}(m);
          vec2 coords = offsetToCoords(offset, ${Dr}, ${jr});
          return ${(0,Lr.getGlsl)(this.context.glContext.version).texture2D}(${Vr}, coords);
        }
        `}}Tr.CoordsGlslLib=zr},1997:(_r,Tr)=>{var Rr;Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.TopologicalSortGlslRoutines=Tr.GlslLibRoutineNode=Tr.GlslLibRoutine=Tr.GlslLib=Tr.GlslContext=Tr.FunctionType=void 0,(Rr=Tr.FunctionType||(Tr.FunctionType={}))[Rr.ValueBased=0]="ValueBased",Rr[Rr.Positional=1]="Positional",Tr.GlslContext=class{constructor(Ar,Pr,Lr,Mr){this.glContext=Ar,this.programInfo=Pr,this.inputTextureLayouts=Lr,this.outputTextureLayout=Mr}},Tr.GlslLib=class{constructor(Ar){this.context=Ar}},Tr.GlslLibRoutine=class{constructor(Ar,Pr){this.routineBody=Ar,this.dependencies=Pr}},Tr.GlslLibRoutineNode=class{constructor(Ar,Pr,Lr){this.name=Ar,this.dependencies=Lr||[],Pr&&(this.routineBody=Pr)}addDependency(Ar){Ar&&this.dependencies.push(Ar)}},Tr.TopologicalSortGlslRoutines=class{static returnOrderedNodes(Ar){if(!Ar||Ar.length===0)return[];if(Ar.length===1)return Ar;const Pr=new Set,Lr=new Set,Mr=new Array;return this.createOrderedNodes(Ar,Pr,Lr,Mr),Mr}static createOrderedNodes(Ar,Pr,Lr,Mr){for(let Fr=0;Fr<Ar.length;++Fr)this.dfsTraverse(Ar[Fr],Pr,Lr,Mr)}static dfsTraverse(Ar,Pr,Lr,Mr){if(!Ar||Lr.has(Ar.name))return;if(Pr.has(Ar.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");Pr.add(Ar.name);const Fr=Ar.dependencies;if(Fr&&Fr.length>0)for(let zr=0;zr<Fr.length;++zr)this.dfsTraverse(Fr[zr],Pr,Lr,Mr);Mr.push(Ar),Lr.add(Ar.name),Pr.delete(Ar.name)}}},1371:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.EncodingGlslLib=void 0;const Ar=Rr(1997);class Pr extends Ar.GlslLib{constructor(Mr){super(Mr)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new Ar.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new Ar.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const Mr=Pr.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new Ar.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${Mr}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const Mr=Pr.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new Ar.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${Mr}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const Mr=new ArrayBuffer(4),Fr=new Uint32Array(Mr),zr=new Uint8Array(Mr);if(Fr[0]=3735928559,zr[0]===239)return!0;if(zr[0]===222)return!1;throw new Error("unknown endianness")}}Tr.EncodingGlslLib=Pr},2691:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.FragColorGlslLib=void 0;const Ar=Rr(1997),Pr=Rr(6757);class Lr extends Ar.GlslLib{constructor(Fr){super(Fr)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const Fr=(0,Pr.getGlsl)(this.context.glContext.version);return{setFragColor:new Ar.GlslLibRoutine(`
        void setFragColor(float value) {
            ${Fr.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new Ar.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}Tr.FragColorGlslLib=Lr},3878:(_r,Tr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.replaceInlines=void 0;const Rr=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;Tr.replaceInlines=function(Ar){const Pr={};let Lr;for(;(Lr=Rr.exec(Ar))!==null;){const Mr=Lr[3].split(",").map(Fr=>{const zr=Fr.trim().split(" ");return zr&&zr.length===2?{type:zr[0],name:zr[1]}:null}).filter(Fr=>Fr!==null);Pr[Lr[2]]={params:Mr,body:Lr[4]}}for(const Mr in Pr){const Fr="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",Mr),zr=new RegExp(Fr,"gm");for(;(Lr=zr.exec(Ar))!==null;){const Ur=Lr[1],Vr=Lr[2],Nr=Lr[3].split(","),Dr=Ur?`${Ur} ${Vr};`:"";let jr=Pr[Mr].body,Gr="";Pr[Mr].params.forEach((qr,Kr)=>{qr&&(Gr+=`${qr.type} ${qr.name} = ${Nr[Kr]};
`)}),jr=`${Gr}
 ${jr}`,jr=jr.replace("return",`${Vr} = `);const Wr=`
      ${Dr}
      {
        ${jr}
      }
      `;Ar=Ar.replace(Lr[0],Wr)}}return Ar.replace(Rr,"")}},8897:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.GlslPreprocessor=void 0;const Ar=Rr(1997),Pr=Rr(3878),Lr=Rr(1248),Mr=Rr(6757);Tr.GlslPreprocessor=class{constructor(Fr,zr,Ur,Vr){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new Ar.GlslContext(Fr,zr,Ur,Vr),Object.keys(Lr.glslRegistry).forEach(Dr=>{const jr=new Lr.glslRegistry[Dr](this.context);this.libs[Dr]=jr});const Nr=this.glslLibRoutineDependencyGraph;for(const Dr in this.libs){const jr=this.libs[Dr].getFunctions();for(const Gr in jr){const Wr=Dr+"."+Gr;let qr;Nr[Wr]?(qr=Nr[Wr],qr.routineBody=jr[Gr].routineBody):(qr=new Ar.GlslLibRoutineNode(Wr,jr[Gr].routineBody),Nr[Wr]=qr);const Kr=jr[Gr].dependencies;if(Kr)for(let Xr=0;Xr<Kr.length;++Xr)if(Nr[Kr[Xr]])qr.addDependency(Nr[Kr[Xr]]);else{const Zr=new Ar.GlslLibRoutineNode(Kr[Xr]);Nr[Kr[Xr]]=Zr,qr.addDependency(Zr)}}}}preprocess(){const Fr=this.context.programInfo;let zr=Fr.shaderSource;return this.context.programInfo.hasMain||(zr=`${zr}
      ${(0,Mr.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),zr=(0,Pr.replaceInlines)(zr),`${(0,Mr.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(Fr.inputNames,Fr.variables)}
    ${this.getImports(zr)}
    ${zr}`}getImports(Fr){const zr=this.selectGlslLibRoutinesToBeIncluded(Fr);if(zr.length===0)return"";let Ur="";for(let Vr=0;Vr<zr.length;++Vr){if(!zr[Vr].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${zr[Vr].name}`);Ur+=zr[Vr].routineBody+`
`}return Ur}selectGlslLibRoutinesToBeIncluded(Fr){const zr=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(Ur=>{const Vr=Ur.split(".")[1];Fr.indexOf(Vr)!==-1&&zr.push(this.glslLibRoutineDependencyGraph[Ur])}),Ar.TopologicalSortGlslRoutines.returnOrderedNodes(zr)}getUniforms(Fr,zr){const Ur=[];if(Fr)for(const Vr of Fr)Ur.push(`uniform sampler2D ${Vr};`);if(zr)for(const Vr of zr)Ur.push(`uniform ${Vr.type} ${Vr.name}${Vr.arrayLength?`[${Vr.arrayLength}]`:""};`);return Ur.join(`
`)}}},1248:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.glslRegistry=void 0;const Ar=Rr(6859),Pr=Rr(1371),Lr=Rr(2691),Mr=Rr(9183),Fr=Rr(9314);Tr.glslRegistry={encoding:Pr.EncodingGlslLib,fragcolor:Lr.FragColorGlslLib,vec:Fr.VecGlslLib,shapeUtils:Mr.ShapeUtilsGlslLib,coordinates:Ar.CoordsGlslLib}},9183:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.ShapeUtilsGlslLib=void 0;const Ar=Rr(1997);class Pr extends Ar.GlslLib{constructor(Mr){super(Mr)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const Mr=this.context.outputTextureLayout.shape.length,Fr={};return this.context.programInfo.inputNames.forEach((zr,Ur)=>{const Vr=this.context.inputTextureLayouts[Ur].unpackedShape;if(Vr.length<=Mr){const Nr=Vr.length,Dr=Mr-Nr,jr=`bcastIndices_${zr}`;let Gr="";for(let qr=0;qr<Nr;++qr)Gr+=`
          realIndices[${qr}] = int( mod(float(bcastedIndices[${Dr+qr}]), ${Vr[qr]}.0) );
          `;const Wr=`
        void ${jr} (int bcastedIndices[${Mr}], out int realIndices[${Nr}]) {
          ${Gr}
        }
        `;Fr[jr]=new Ar.GlslLibRoutine(Wr)}}),Fr}bcastMatmulIndex(){const Mr=this.context.outputTextureLayout.shape.length,Fr={};return this.context.programInfo.inputNames.forEach((zr,Ur)=>{const Vr=this.context.inputTextureLayouts[Ur].shape;if(!(Vr.length<2||Vr.length>Mr)){const Nr=Vr.length,Dr=Mr-Nr,jr=`bcastMatmulIndices_${zr}`;let Gr="";for(let qr=0;qr<Nr-2;++qr)Gr+=`
          realIndices[${qr}] = int( mod(float(bcastedIndices[${Dr+qr}]), ${Vr[qr]}.0) );
          `;const Wr=`
        void ${jr}(int bcastedIndices[${Mr}], out int realIndices[${Nr}]) {
          ${Gr}
          realIndices[${Nr-1}] = bcastedIndices[${Mr-1}];
          realIndices[${Nr-2}] = bcastedIndices[${Mr-2}];
        }
        `;Fr[jr]=new Ar.GlslLibRoutine(Wr)}}),Fr}indicesToOffset(){const Mr={};return this.context.programInfo.inputNames.forEach((Fr,zr)=>{const Ur=this.context.inputTextureLayouts[zr].shape,Vr=this.context.inputTextureLayouts[zr].strides,Nr=Ur.length;let Dr=`indicesToOffset_${Fr}`;Mr[Dr]=new Ar.GlslLibRoutine(Pr.indexToOffsetSingle(Dr,Nr,Vr)),Dr=`indicesToOffset_${Fr}_T`,Mr[Dr]=new Ar.GlslLibRoutine(Pr.indexToOffsetSingle(Dr,Nr,Vr.slice().reverse()))}),Mr}static indexToOffsetSingle(Mr,Fr,zr){let Ur="";for(let Vr=Fr-1;Vr>=0;--Vr)Ur+=`
        offset += indices[${Vr}] * ${zr[Vr]};
        `;return`
      int ${Mr}(int indices[${Fr}]) {
        int offset = 0;
        ${Ur}
        return offset;
      }
      `}offsetToIndices(){const Mr={};return this.context.programInfo.inputNames.forEach((Fr,zr)=>{const Ur=this.context.inputTextureLayouts[zr].shape,Vr=this.context.inputTextureLayouts[zr].strides,Nr=Ur.length;let Dr=`offsetToIndices_${Fr}`;Mr[Dr]=new Ar.GlslLibRoutine(Pr.offsetToIndicesSingle(Dr,Nr,Vr)),Dr=`offsetToIndices_${Fr}_T`,Mr[Dr]=new Ar.GlslLibRoutine(Pr.offsetToIndicesSingle(Dr,Nr,Vr.slice().reverse()))}),Mr}static offsetToIndicesSingle(Mr,Fr,zr){const Ur=[];for(let Vr=0;Vr<Fr-1;++Vr)Ur.push(`
      indices[${Vr}] = offset / ${zr[Vr]};`),Ur.push(`
        offset -= indices[${Vr}] * ${zr[Vr]};`);return Ur.push(`
      indices[${Fr-1}] = offset;`),`
      void ${Mr}(int offset, out int indices[${Fr}]) {
        ${Ur.join("")}
      }
      `}incrementIndices(){const Mr={};return this.context.programInfo.inputNames.forEach((Fr,zr)=>{const Ur=this.context.inputTextureLayouts[zr].shape,Vr=Ur.length,Nr=`incrementIndices_${Fr}`;let Dr="";for(let Gr=0;Gr<Vr;++Gr)Dr+=`
        shape[${Gr}] = ${Ur[Gr]};`;const jr=`
        void ${Nr}(int axis, out int indices[${Vr}]) {
          int shape[${Vr}];
          ${Dr};
          for(int i = ${Vr} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;Mr[Nr]=new Ar.GlslLibRoutine(jr)}),Mr}}Tr.ShapeUtilsGlslLib=Pr},6757:(_r,Tr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.getDefaultFragShaderMain=Tr.getFragShaderPreamble=Tr.getVertexShaderSource=Tr.getGlsl=void 0;const Rr={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},Ar={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function Pr(Lr){return Lr===1?Rr:Ar}Tr.getGlsl=Pr,Tr.getVertexShaderSource=function(Lr){const Mr=Pr(Lr);return`${Mr.version}
      precision highp float;
      ${Mr.attribute} vec3 position;
      ${Mr.attribute} vec2 textureCoord;

      ${Mr.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},Tr.getFragShaderPreamble=function(Lr){const Mr=Pr(Lr);return`${Mr.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${Mr.varyingFrag} vec2 TexCoords;
    ${Mr.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},Tr.getDefaultFragShaderMain=function(Lr,Mr){return`
  void main() {
    int indices[${Mr}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${Pr(Lr).output} = result;
  }
  `}},9314:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.VecGlslLib=void 0;const Ar=Rr(1997);class Pr extends Ar.GlslLib{constructor(Mr){super(Mr)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const Mr=this.context.outputTextureLayout.shape.length,Fr={add:"+=",sub:"-=",mul:"*=",div:"/="},zr={};for(const Ur in Fr){const Vr=`${Ur}Vec`;let Nr="";for(let jr=0;jr<Mr;++jr)Nr+=`
          dest[${jr}] ${Fr[Ur]} src[${jr}];
          `;const Dr=`
        void ${Vr}(int src[${Mr}], out int dest[${Mr}]) {
          ${Nr}
        }
        `;zr[Vr]=new Ar.GlslLibRoutine(Dr)}return zr}copyVec(){const Mr=this.context.outputTextureLayout.shape.length;let Fr="";for(let Ur=0;Ur<Mr;++Ur)Fr+=`
        dest[${Ur}] = src[${Ur}];
        `;const zr=`
      void copyVec(int src[${Mr}], out int dest[${Mr}]) {
        ${Fr}
      }
      `;return{copyVec:new Ar.GlslLibRoutine(zr)}}setVecItem(){const Mr=this.context.outputTextureLayout.shape.length;let Fr=`
        if(index < 0)
            index =${Mr} + index;
        if (index == 0)
            m[0] = value;
        `;for(let Ur=1;Ur<Mr-1;++Ur)Fr+=`
        else if (index == ${Ur})
            m[${Ur}] = value;
            `;Fr+=`
        else
            m[${Mr-1}] = value;
        `;const zr=`
      void setVecItem(out int m[${Mr}], int index, int value) {
        ${Fr}
      }
        `;return{setVecItem:new Ar.GlslLibRoutine(zr)}}getVecItem(){const Mr=this.context.outputTextureLayout.shape.length;let Fr=`
        if(index < 0)
            index = ${Mr} + index;
        if (index == 0)
            return m[0];
      `;for(let Ur=1;Ur<Mr-1;++Ur)Fr+=`
        else if (index == ${Ur})
            return m[${Ur}];
      `;Fr+=`
        else
            return m[${Mr-1}];
        `;const zr=`
      int getVecItem(int m[${Mr}], int index) {
        ${Fr}
      }
    `;return{getVecItem:new Ar.GlslLibRoutine(zr)}}}Tr.VecGlslLib=Pr},7860:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.WebGLInferenceHandler=void 0;const Ar=Rr(1315),Pr=Rr(9240),Lr=Rr(7273),Mr=Rr(9),Fr=Rr(7379),zr=Rr(2488),Ur=Rr(540),Vr=Rr(3314),Nr=Rr(5639);Tr.WebGLInferenceHandler=class{constructor(Dr){this.session=Dr,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(Dr,jr){return(0,Vr.calculateTextureWidthAndHeight)(this.session.layoutStrategy,Dr,jr)}executeProgram(Dr,jr){if(jr.length<Dr.inputNames.length)throw new Error(`Input size mustn't be less than ${Dr.inputNames.length}.`);if(Dr.inputNames.length!==Dr.inputTypes.length)throw new Error("input names size does not match input types");const Gr=[];for(let Jr=0;Jr<Dr.inputNames.length;++Jr)Gr[Jr]=this.getOrCreateTextureData(jr[Jr],Dr.inputTypes[Jr]);const Wr=((Jr,_i)=>{const es=_i.map(rs=>`${rs.unpackedShape.join(",")};${rs.width}x${rs.height}`).join("_");let ts=Jr.name;return Jr.cacheHint&&(ts+="["+Jr.cacheHint+"]"),ts+=":"+es,ts})(Dr,Gr);let qr=this.session.programManager.getArtifact(Wr);const Kr=qr?qr.programInfo:typeof Dr.get=="function"?Dr.get():Dr,Xr=(0,Vr.createTextureLayoutFromTextureType)(this.session.layoutStrategy,Kr.output.dims,Kr.output.textureType),Zr=this.createTextureData(Xr,Kr.output.type);return qr||(qr=this.session.programManager.build(Kr,Gr,Zr),this.session.programManager.setArtifact(Wr,qr)),this.runProgram(qr,Gr,Zr),Zr}run(Dr,jr){return this.executeProgram(Dr,jr).tensor}runProgram(Dr,jr,Gr){for(let Wr=0;Wr<jr.length;++Wr)if(!!jr[Wr].isPacked!=(Dr.programInfo.inputTypes[Wr]===Nr.TextureType.packed))throw new Error(`input[${Wr}] property packed inconsistent`);if(!!Gr.isPacked!=(Dr.programInfo.output.textureType===Nr.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(Dr,jr,Gr)}getOrCreateTextureData(Dr,jr){let Gr=this.getTextureData(Dr.dataId,jr===Nr.TextureType.packed);if(!Gr&&(Gr=this.getTextureData(Dr.dataId,jr!==Nr.TextureType.packed),Gr))return jr===Nr.TextureType.packed?this.pack(Gr):this.unpack(Gr);if(!Gr){const Wr=(0,Vr.createTextureLayoutFromTextureType)(this.session.layoutStrategy,Dr.dims,jr);if(jr===Nr.TextureType.packedLastDimension){const Xr=Dr.dims;if(Xr.length===4){const Zr=[Xr[0],Math.ceil(Xr[1]*Xr[2]*Xr[3]/4)],Jr=(0,Vr.createTextureLayoutFromTextureType)(this.session.layoutStrategy,Zr,jr);let _i=Dr.numberData;if(Xr[1]*Xr[2]*Xr[3]%4!=0){const es=Xr[0],ts=Xr[1]*Xr[2]*Xr[3],rs=Math.ceil(ts*1/4)*4;_i=new Float32Array(es*rs);for(let ns=0;ns<es;++ns){const as=ns*ts,ls=ns*rs+ns%1*ts;_i.set(Dr.numberData.subarray(as,as+ts),ls)}}return this.createTextureData(Jr,Dr.type,_i,Dr,1)}}if(jr===Nr.TextureType.packed){const qr=(0,Vr.createTextureLayoutFromShape)(this.session.layoutStrategy,Dr.dims,1,[],{reverseWH:!0}),Kr=this.createTextureData(qr,Dr.type,Dr.numberData,Dr,1);Gr=this.pack(Kr)}else Gr=this.createTextureData(Wr,Dr.type,Dr.numberData,Dr,1)}return Gr}createTextureDataFromLayoutBindTensor(Dr,jr,Gr,Wr){return this.createTextureData(Dr,jr,Gr,Wr,1)}createTextureData(Dr,jr,Gr,Wr,qr){Ar.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(Dr)}]`);const Kr=this.session.textureManager.createTextureFromLayout(jr,Dr,Gr,qr);return this.createTextureDataFromTexture(Dr,jr,Kr,Wr)}reshapeUnpacked(Dr,jr){const Gr=this.getOrCreateTextureData(Dr,Nr.TextureType.unpacked),Wr={channels:Gr.channels,height:Gr.height,width:Gr.width,shape:jr.length!==0?jr:[1],strides:Lr.ShapeUtil.computeStrides(jr),unpackedShape:jr};return this.createTextureDataFromTexture(Wr,Dr.type,Gr.texture).tensor}reshapePacked(Dr,jr){const Gr=this.getOrCreateTextureData(Dr,Nr.TextureType.packed);if((0,Fr.isReshapeCheap)(Dr.dims,jr)){const Zr={channels:Gr.channels,height:Gr.height,width:Gr.width,shape:jr.length!==0?jr:[1],strides:Lr.ShapeUtil.computeStrides(jr),unpackedShape:jr,isPacked:!0};return this.createTextureDataFromTexture(Zr,Dr.type,Gr.texture).tensor}const Wr=(0,Fr.processDims3D)(Dr.dims),qr=(0,Fr.processDims3D)(jr),Kr=this.reshapePacked(Dr,Wr),Xr=this.run((0,Fr.createPackedReshape3DProgramInfoLoader)(this,Kr,qr),[Kr]);return this.reshapePacked(Xr,jr)}cast(Dr,jr){const Gr=this.getOrCreateTextureData(Dr,Nr.TextureType.unpacked);return this.createTextureDataFromTexture(Gr,jr,Gr.texture).tensor}createTextureDataFromTexture(Dr,jr,Gr,Wr,qr){const Kr=Object.assign(Object.assign({},Dr),{tensor:Wr||new Pr.Tensor(Dr.unpackedShape,jr,Xr=>this.readTexture(Kr),async Xr=>this.readTextureAsync(Kr),void 0,qr),texture:Gr});return this.setTextureData(Kr.tensor.dataId,Kr,Dr.isPacked),Kr}getTextureData(Dr,jr=!1){return this.session.isInitializer(Dr)?this.session.getTextureData(Dr,jr):jr?this.packedTextureDataCache.get(Dr):this.unpackedTextureDataCache.get(Dr)}setTextureData(Dr,jr,Gr=!1){this.session.isInitializer(Dr)?this.session.setTextureData(Dr,jr,Gr):(Gr?this.packedTextureDataCache:this.unpackedTextureDataCache).set(Dr,jr)}isTextureLayoutCached(Dr,jr=!1){return!!this.getTextureData(Dr.dataId,jr)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(Dr=>this.session.textureManager.releaseTexture(Dr)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(Dr=>this.session.textureManager.releaseTexture(Dr)),this.unpackedTextureDataCache=new Map}readTexture(Dr){return Dr.isPacked?this.readTexture(this.unpack(Dr)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(Dr,Dr.tensor.type,Dr.channels):this.session.textureManager.readUint8TextureAsFloat((0,zr.encodeAsUint8)(this,Dr))}async readTextureAsync(Dr){return Dr.isPacked?this.readTextureAsync(this.unpack(Dr)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(Dr,Dr.tensor.type,Dr.channels):this.session.textureManager.readUint8TextureAsFloat((0,zr.encodeAsUint8)(this,Dr))}pack(Dr){return this.executeProgram((0,Mr.createPackProgramInfoLoader)(this,Dr.tensor),[Dr.tensor])}unpack(Dr){return this.executeProgram((0,Ur.createUnpackProgramInfoLoader)(this,Dr.tensor),[Dr.tensor])}}},4110:function(_r,Tr,Rr){var Ar=this&&this.__createBinding||(Object.create?function(Fs,Us,Vs,ao){ao===void 0&&(ao=Vs);var qs=Object.getOwnPropertyDescriptor(Us,Vs);qs&&!("get"in qs?!Us.__esModule:qs.writable||qs.configurable)||(qs={enumerable:!0,get:function(){return Us[Vs]}}),Object.defineProperty(Fs,ao,qs)}:function(Fs,Us,Vs,ao){ao===void 0&&(ao=Vs),Fs[ao]=Us[Vs]}),Pr=this&&this.__setModuleDefault||(Object.create?function(Fs,Us){Object.defineProperty(Fs,"default",{enumerable:!0,value:Us})}:function(Fs,Us){Fs.default=Us}),Lr=this&&this.__importStar||function(Fs){if(Fs&&Fs.__esModule)return Fs;var Us={};if(Fs!=null)for(var Vs in Fs)Vs!=="default"&&Object.prototype.hasOwnProperty.call(Fs,Vs)&&Ar(Us,Fs,Vs);return Pr(Us,Fs),Us};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.WEBGL_OP_RESOLVE_RULES=void 0;const Mr=Rr(8817),Fr=Lr(Rr(5194)),zr=Rr(4752),Ur=Rr(6668),Vr=Rr(9754),Nr=Rr(5042),Dr=Rr(6742),jr=Rr(4125),Gr=Rr(6149),Wr=Rr(5378),qr=Rr(6981),Kr=Rr(7413),Xr=Rr(7006),Zr=Rr(8276),Jr=Rr(5565),_i=Rr(2834),es=Rr(1010),ts=Rr(8126),rs=Rr(2801),ns=Rr(565),as=Rr(2444),ls=Rr(815),us=Rr(564),xs=Rr(5416),Ts=Rr(1240),vs=Rr(5944),gs=Rr(5707),fs=Lr(Rr(9087)),ys=Rr(7862),ks=Rr(3980);Tr.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",fs.abs],["Acos","","7+",fs.acos],["Add","","7+",Fr.add],["And","","7+",Fr.and],["Asin","","7+",fs.asin],["Atan","","7+",fs.atan],["AveragePool","","7+",_i.averagePool,_i.parseAveragePoolAttributes],["BatchNormalization","","7+",Mr.batchNormalization,Mr.parseBatchNormalizationAttributes],["Cast","","6+",zr.cast,zr.parseCastAttributes],["Ceil","","6+",fs.ceil],["Clip","","6-10",fs.clip,fs.parseClipAttributes],["Clip","","11+",fs.clipV11],["Concat","","4+",Ur.concat,Ur.parseConcatAttributes],["Conv","","1+",Vr.conv,Vr.parseConvAttributes],["ConvTranspose","","1+",Nr.convTranspose,Nr.parseConvTransposeAttributes],["Cos","","7+",fs.cos],["Div","","7+",Fr.div],["Dropout","","7+",fs.identity],["DepthToSpace","","1+",Dr.depthToSpace,Dr.parseDepthToSpaceAttributes],["Equal","","7+",Fr.equal],["Elu","","6+",fs.elu,fs.parseEluAttributes],["Exp","","6+",fs.exp],["Flatten","","1+",jr.flatten,jr.parseFlattenAttributes],["Floor","","6+",fs.floor],["FusedConv","com.microsoft","1+",Vr.conv,Vr.parseConvAttributes],["Gather","","1+",Gr.gather,Gr.parseGatherAttributes],["Gemm","","7-10",Wr.gemm,Wr.parseGemmAttributesV7],["Gemm","","11+",Wr.gemm,Wr.parseGemmAttributesV11],["GlobalAveragePool","","1+",_i.globalAveragePool,_i.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",_i.globalMaxPool],["Greater","","7+",Fr.greater],["Identity","","1+",fs.identity],["ImageScaler","","1+",qr.imageScaler,qr.parseImageScalerAttributes],["InstanceNormalization","","6+",Kr.instanceNormalization,Kr.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",fs.leakyRelu,fs.parseLeakyReluAttributes],["Less","","7+",Fr.less],["LRN","","1+",Xr.lrn,Xr.parseLrnAttributes],["Log","","6+",fs.log],["MatMul","","1+",Zr.matMul,Zr.parseMatMulAttributes],["MaxPool","","1+",_i.maxPool,_i.parseMaxPoolAttributes],["Mul","","7+",Fr.mul],["Neg","","6+",fs.neg],["Not","","1+",fs.not],["Or","","7+",Fr.or],["Pad","","2-10",Jr.padV2,Jr.parsePadAttributesV2],["Pad","","11+",Jr.padV11,Jr.parsePadAttributesV11],["Pow","","7+",Fr.pow],["PRelu","","7+",Fr.pRelu],["ReduceLogSum","","1+",es.reduceLogSum,es.parseReduceAttributes],["ReduceMax","","1+",es.reduceMax,es.parseReduceAttributes],["ReduceMean","","1+",es.reduceMean,es.parseReduceAttributes],["ReduceMin","","1+",es.reduceMin,es.parseReduceAttributes],["ReduceProd","","1+",es.reduceProd,es.parseReduceAttributes],["ReduceSum","","1-12",es.reduceSum,es.parseReduceAttributes],["ReduceSumSquare","","1+",es.reduceLogSumSquare,es.parseReduceAttributes],["Relu","","6+",fs.relu],["Reshape","","5+",ts.reshape],["Resize","","10",rs.resize,rs.parseResizeAttributesV10],["Resize","","11+",rs.resize,rs.parseResizeAttributesV11],["Shape","","1+",ns.shape],["Sigmoid","","6+",fs.sigmoid],["Sin","","7+",fs.sin],["Slice","","10+",as.sliceV10],["Slice","","1-9",as.slice,as.parseSliceAttributes],["Softmax","","1-12",ls.softmax,ls.parseSoftmaxAttributes],["Softmax","","13+",ls.softmaxV13,ls.parseSoftmaxAttributesV13],["Split","","2-12",us.split,us.parseSplitAttributes],["Sqrt","","6+",fs.sqrt],["Squeeze","","1-12",xs.squeeze,xs.parseSqueezeAttributes],["Squeeze","","13+",xs.squeezeV13],["Sub","","7+",Fr.sub],["Sum","","6+",Ts.sum],["Tan","","7+",fs.tan],["Tanh","","6+",fs.tanh],["Tile","","6+",vs.tile],["Transpose","","1+",gs.transpose,gs.parseTransposeAttributes],["Upsample","","7-8",ks.upsample,ks.parseUpsampleAttributesV7],["Upsample","","9",ks.upsample,ks.parseUpsampleAttributesV9],["Unsqueeze","","1-12",ys.unsqueeze,ys.parseUnsqueezeAttributes],["Unsqueeze","","13+",ys.unsqueezeV13],["Xor","","7+",Fr.xor]]},8817:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseBatchNormalizationAttributes=Tr.batchNormalization=void 0;const Ar=Rr(4910),Pr=Rr(6757),Lr=Rr(5639),Mr={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[Lr.TextureType.unpacked,Lr.TextureType.unpacked,Lr.TextureType.unpacked,Lr.TextureType.unpacked,Lr.TextureType.unpacked]};Tr.batchNormalization=(Ur,Vr,Nr)=>(zr(Vr),[Ur.run(Object.assign(Object.assign({},Mr),{cacheHint:Nr.cacheKey,get:()=>Fr(Ur,Vr,Nr)}),Vr)]),Tr.parseBatchNormalizationAttributes=Ur=>{const Vr=Ur.attributes.getFloat("epsilon",1e-5),Nr=Ur.attributes.getFloat("momentum",.9),Dr=Ur.attributes.getInt("spatial",1);return(0,Ar.createAttributeWithCacheKey)({epsilon:Vr,momentum:Nr,spatial:Dr})};const Fr=(Ur,Vr,Nr)=>{const Dr=(0,Pr.getGlsl)(Ur.session.backend.glContext.version),jr=Vr[0].dims.length,[Gr,Wr]=Ur.calculateTextureWidthAndHeight(Vr[1].dims,Lr.TextureType.unpacked),qr=`
  float process(int[${jr}] indices) {
    vec2 position = offsetToCoords(indices[1], ${Gr}, ${Wr});
    float scale = getColorAsFloat(${Dr.texture2D}(Scale, position));
    float mean = getColorAsFloat(${Dr.texture2D}(Mean, position));
    float variance = getColorAsFloat(${Dr.texture2D}(Variance, position));
    float b = getColorAsFloat(${Dr.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${Nr.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},Mr),{output:{dims:Vr[0].dims,type:Vr[0].type,textureType:Lr.TextureType.unpacked},shaderSource:qr})},zr=Ur=>{if(!Ur||Ur.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const Vr=Ur[0],Nr=Ur[1],Dr=Ur[2],jr=Ur[3],Gr=Ur[4];if(Vr.dims.length<3||Nr.dims.length!==1||Dr.dims.length!==1||jr.dims.length!==1||Gr.dims.length!==1)throw new Error("invalid input shape.");if(Nr.dims[0]!==Vr.dims[1]||Dr.dims[0]!==Vr.dims[1]||jr.dims[0]!==Vr.dims[1]||Gr.dims[0]!==Vr.dims[1])throw new Error("invalid input shape.");if(Vr.type!=="float32"&&Vr.type!=="float64"||Nr.type!=="float32"&&Nr.type!=="float64"||Dr.type!=="float32"&&Dr.type!=="float64"||jr.type!=="float32"&&jr.type!=="float64"||Gr.type!=="float32"&&Gr.type!=="float64")throw new Error("invalid input tensor types.")}},5194:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.xor=Tr.sub=Tr.pRelu=Tr.pow=Tr.or=Tr.mul=Tr.less=Tr.greater=Tr.equal=Tr.div=Tr.and=Tr.add=Tr.glslPRelu=Tr.glslPow=Tr.glslXor=Tr.glslOr=Tr.glslAnd=Tr.glslLess=Tr.glslGreater=Tr.glslEqual=Tr.glslSub=Tr.glslMul=Tr.glslDiv=Tr.glslAdd=void 0;const Ar=Rr(7273),Pr=Rr(1997),Lr=Rr(6757),Mr=Rr(5639);function Fr(){const _i="add_";return{body:`
  float ${_i}(float a, float b) {
    return a + b;
  }
  vec4 ${_i}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:_i,type:Pr.FunctionType.ValueBased}}function zr(){const _i="div_";return{body:`
  float ${_i}(float a, float b) {
    return a / b;
  }
  vec4 ${_i}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:_i,type:Pr.FunctionType.ValueBased}}function Ur(){const _i="mul_";return{body:`
  float ${_i}(float a, float b) {
    return a * b;
  }
  vec4 ${_i}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:_i,type:Pr.FunctionType.ValueBased}}function Vr(){const _i="sub_";return{body:`
  float ${_i}(float a, float b) {
    return a - b;
  }
  vec4 ${_i}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:_i,type:Pr.FunctionType.ValueBased}}function Nr(){const _i="equal_";return{body:`
  float ${_i}(float a, float b) {
    return float(a == b);
  }
  vec4 ${_i}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:_i,type:Pr.FunctionType.ValueBased}}function Dr(){const _i="greater_";return{body:`
  float ${_i}(float a, float b) {
    return float(a > b);
  }
  vec4 ${_i}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:_i,type:Pr.FunctionType.ValueBased}}function jr(){const _i="less_";return{body:`
  float ${_i}(float a, float b) {
    return float(a < b);
  }
  vec4 ${_i}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:_i,type:Pr.FunctionType.ValueBased}}function Gr(){const _i="and_";return{body:`
  float ${_i}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${_i}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:_i,type:Pr.FunctionType.ValueBased}}function Wr(){const _i="or_";return{body:`
  float ${_i}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${_i}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:_i,type:Pr.FunctionType.ValueBased}}function qr(){const _i="xor_";return{body:`
  float ${_i}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${_i}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:_i,type:Pr.FunctionType.ValueBased}}function Kr(){return function(_i){const es=`${_i}_`;return{body:`
  float ${es}(float a, float b) {
    return ${_i}(a, b);
  }
  vec4 ${es}(vec4 v1, vec4 v2) {
    return ${_i}(v1, v2);
  }
  `,name:es,type:Pr.FunctionType.ValueBased}}("pow")}function Xr(){const _i="prelu_";return{body:`
  float ${_i}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${_i}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:_i,type:Pr.FunctionType.ValueBased}}Tr.glslAdd=Fr,Tr.glslDiv=zr,Tr.glslMul=Ur,Tr.glslSub=Vr,Tr.glslEqual=Nr,Tr.glslGreater=Dr,Tr.glslLess=jr,Tr.glslAnd=Gr,Tr.glslOr=Wr,Tr.glslXor=qr,Tr.glslPow=Kr,Tr.glslPRelu=Xr;const Zr=(_i,es,ts,rs=es[0].type,ns)=>{const as=_i.session.pack?Mr.TextureType.packed:Mr.TextureType.unpacked;return{name:ts.name,inputNames:["A","B"],inputTypes:[as,as],cacheHint:ns,get:()=>Jr(_i,es,ts,rs)}},Jr=(_i,es,ts,rs=es[0].type)=>{const ns=_i.session.pack?Mr.TextureType.packed:Mr.TextureType.unpacked,as=!Ar.ShapeUtil.areEqual(es[0].dims,es[1].dims);let ls=es[0].dims;const us=_i.session.pack;if(as){const vs=Ar.BroadcastUtil.calcShape(es[0].dims,es[1].dims,!1);if(!vs)throw new Error("Can't perform binary op on the given tensors");ls=vs;const gs=ls.length,fs=es[0].dims.length!==0?es[0].dims.length:1,ys=es[1].dims.length!==0?es[1].dims.length:1,ks=es[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",Fs=es[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Us=(0,Lr.getGlsl)(_i.session.backend.glContext.version),Vs=us?`
      ${ts.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${ts.name}(a, b);
        ${Us.output} = result;
      }`:`
      ${ts.body}
      float process(int indices[${gs}]) {
        int aindices[${fs}];
        int bindices[${ys}];
        ${ks}
        ${Fs}
        return ${ts.name}(_A(aindices), _B(bindices));
      }`;return{name:ts.name,inputNames:["A","B"],inputTypes:[ns,ns],output:{dims:ls,type:rs,textureType:ns},shaderSource:Vs,hasMain:us}}const xs=(0,Lr.getGlsl)(_i.session.backend.glContext.version),Ts=`
    ${ts.body}
    void main() {
      vec4 v1 = ${xs.texture2D}(A, TexCoords);
      vec4 v2 = ${xs.texture2D}(B, TexCoords);
      vec4 result = ${ts.name}(v1, v2);
      ${xs.output} = result;
    }
    `;return{name:ts.name,inputNames:["A","B"],inputTypes:[ns,ns],output:{dims:es[0].dims,type:rs,textureType:ns},shaderSource:Ts,hasMain:!0}};Tr.add=(_i,es)=>[_i.run(Zr(_i,es,Fr()),es)],Tr.and=(_i,es)=>[_i.run(Zr(_i,es,Gr(),"bool"),es)],Tr.div=(_i,es)=>[_i.run(Zr(_i,es,zr()),es)],Tr.equal=(_i,es)=>[_i.run(Zr(_i,es,Nr(),"bool"),es)],Tr.greater=(_i,es)=>[_i.run(Zr(_i,es,Dr(),"bool"),es)],Tr.less=(_i,es)=>[_i.run(Zr(_i,es,jr(),"bool"),es)],Tr.mul=(_i,es)=>[_i.run(Zr(_i,es,Ur()),es)],Tr.or=(_i,es)=>[_i.run(Zr(_i,es,Wr(),"bool"),es)],Tr.pow=(_i,es)=>[_i.run(Zr(_i,es,Kr()),es)],Tr.pRelu=(_i,es)=>[_i.run(Zr(_i,es,Xr()),es)],Tr.sub=(_i,es)=>[_i.run(Zr(_i,es,Vr()),es)],Tr.xor=(_i,es)=>[_i.run(Zr(_i,es,qr(),"bool"),es)]},4752:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseCastAttributes=Tr.cast=void 0;const Ar=Rr(7273);Tr.cast=(Lr,Mr,Fr)=>(Pr(Mr),[Lr.cast(Mr[0],Fr)]),Tr.parseCastAttributes=Lr=>Ar.ProtoUtil.tensorDataTypeFromProto(Lr.attributes.getInt("to"));const Pr=Lr=>{if(!Lr||Lr.length!==1)throw new Error("Cast requires 1 input.");if(Lr[0].type==="string")throw new Error("Invalid input type.")}},4595:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createPackedConcatProgramInfoLoader=void 0;const Ar=Rr(6757),Pr=Rr(5639),Lr=Rr(432),Mr=Rr(5614);Tr.createPackedConcatProgramInfoLoader=(zr,Ur,Vr)=>{const Nr=(Dr=Ur.length,jr=Vr.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:Dr},(Gr,Wr)=>`X${Wr}`),inputTypes:Array(Dr).fill(Pr.TextureType.packed),cacheHint:jr});var Dr,jr;return Object.assign(Object.assign({},Nr),{get:()=>((Gr,Wr,qr,Kr)=>{const Xr=qr[0].dims.slice();if(Kr>=Xr.length||Kr<-1*Xr.length)throw new Error("axis specified for concat doesn't match input dimensionality");Kr<0&&(Kr=Xr.length+Kr);const Zr=Xr.slice(0);for(let ks=1;ks<qr.length;ks++){const Fs=qr[ks].dims.slice();for(let Us=0;Us<Xr.length;Us++)if(Us===Kr)Zr[Kr]+=Fs[Us];else if(Xr[Us]!==Fs[Us])throw new Error("non concat dimensions must match")}const Jr=Zr.length,_i=(0,Mr.getChannels)("coords",Jr),es=(0,Lr.getCoordsDataType)(Jr),ts=(0,Mr.unpackFromChannel)(),rs=qr.map(ks=>ks.dims),ns=(0,Lr.getGlChannels)(Jr),as=new Array(rs.length-1);as[0]=rs[0][Kr];for(let ks=1;ks<as.length;ks++)as[ks]=as[ks-1]+rs[ks][Kr];const ls=ns[Kr],us=ns.slice(-2),xs=ns.join();let Ts=`if (${ls} < ${as[0]}) {
        return getChannel(
            getX0(${xs}), vec2(${us.join()}));
        }`;for(let ks=1;ks<as.length;ks++){const Fs=as[ks-1];Ts+=`
            if (${ls} < ${as[ks]}  && ${ls} >= ${as[ks-1]}) {
              return getChannel(
                getX${ks}(${Fr(ns,ls,Fs)}),
                vec2(${Fr(us,ls,Fs)}));
            }`}const vs=as.length,gs=as[as.length-1];Ts+=`
            return getChannel(
              getX${vs}(${Fr(ns,ls,gs)}),
              vec2(${Fr(us,ls,gs)}));`;const fs=(0,Ar.getGlsl)(Gr.session.backend.glContext.version),ys=`
          ${ts}
          float getValue(${ns.map(ks=>"int "+ks)}) {
            ${Ts}
          }

          void main() {
            ${es} coords = getOutputCoords();
            int lastDim = coords.${ns[Jr-1]};
            coords.${ns[Jr-1]} = coords.${ns[Jr-2]};
            coords.${ns[Jr-2]} = lastDim;

            vec4 result = vec4(getValue(${_i}), 0., 0., 0.);

            ${_i[Jr-1]} = ${_i[Jr-1]} + 1;
            if (${_i[Jr-1]} < ${Zr[Jr-1]}) {
              result.g = getValue(${_i});
            }

            ${_i[Jr-2]} = ${_i[Jr-2]} + 1;
            if (${_i[Jr-2]} < ${Zr[Jr-2]}) {
              result.a = getValue(${_i});
            }

            ${_i[Jr-1]} = ${_i[Jr-1]} - 1;
            if (${_i[Jr-2]} < ${Zr[Jr-2]} &&
                ${_i[Jr-1]} < ${Zr[Jr-1]}) {
              result.b = getValue(${_i});
            }
            ${fs.output} = result;
          }
        `;return Object.assign(Object.assign({},Wr),{output:{dims:Zr,type:qr[0].type,textureType:Pr.TextureType.packed},shaderSource:ys,hasMain:!0})})(zr,Nr,Ur,Vr.axis)})};const Fr=(zr,Ur,Vr)=>{const Nr=zr.indexOf(Ur);return zr.map((Dr,jr)=>jr===Nr?`${Dr} - ${Vr}`:Dr).join()}},6668:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseConcatAttributes=Tr.concat=void 0;const Ar=Rr(4910),Pr=Rr(5639),Lr=Rr(4595);Tr.concat=(Dr,jr,Gr)=>(Nr(jr),Dr.session.pack&&jr[0].dims.length>1?[Dr.run((0,Lr.createPackedConcatProgramInfoLoader)(Dr,jr,Gr),jr)]:[Dr.run(Mr(Dr,jr,Gr),jr)]);const Mr=(Dr,jr,Gr)=>{const Wr=(qr=jr.length,Kr=Gr.cacheKey,{name:"Concat",inputNames:Array.from({length:qr},(Xr,Zr)=>`X${Zr}`),inputTypes:Array(qr).fill(Pr.TextureType.unpacked),cacheHint:Kr});var qr,Kr;return Object.assign(Object.assign({},Wr),{get:()=>((Xr,Zr,Jr,_i)=>{const es=Jr[0].dims.slice();if(_i>=es.length||_i<-1*es.length)throw new Error("axis specified for concat doesn't match input dimensionality");_i<0&&(_i=es.length+_i);const ts=es.slice(0);for(let xs=1;xs<Jr.length;xs++){const Ts=Jr[xs].dims.slice();for(let vs=0;vs<es.length;vs++)if(vs===_i)ts[_i]+=Ts[vs];else if(es[vs]!==Ts[vs])throw new Error("non concat dimensions must match")}const rs=ts.length,ns=new Array(Jr.length);let as=0;for(let xs=0;xs<ns.length;++xs)as+=Jr[xs].dims[_i],ns[xs]=as;let ls="";ls=Jr.length<5?Fr(ns):zr(ns);const us=`
        ${Ur(Jr.length,rs)}
        ${Vr(ns)}
        ${ls}
        float process(int indices[${rs}]) {
          int textureIndex = getTextureWhereDataResides (indices[${_i}]);

          if(textureIndex != 0) {
            indices[${_i}] = indices[${_i}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},Zr),{output:{dims:ts,type:Jr[0].type,textureType:Pr.TextureType.unpacked},shaderSource:us})})(0,Wr,jr,Gr.axis)})},Fr=Dr=>`int getTextureWhereDataResides(int index) {
      ${Dr.map((jr,Gr)=>`if(index<${jr}) {return ${Gr};}
`).join("")}
    }`,zr=Dr=>Fr(Dr),Ur=(Dr,jr)=>{const Gr=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${jr}]) {`];for(let Wr=0;Wr<Dr;++Wr)Wr===0?Gr.push(`	if (textureIndex == ${Wr}) { return _X${Wr}(indices); }`):Wr===Dr-1?Gr.push(`	else { return _X${Wr}(indices); }`):Gr.push(`	else if (textureIndex == ${Wr}) { return _X${Wr}(indices); }`);return Gr.push("	}"),Gr.join(`
`)},Vr=Dr=>{const jr=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let Gr=0;Gr<Dr.length;++Gr)Gr===0?jr.push(`	if (index == ${Gr}) { return ${Dr[Gr]}; }`):Gr===Dr.length-1?jr.push(`	else { return ${Dr[Gr]}; }`):jr.push(`	else if (index == ${Gr}) { return ${Dr[Gr]}; }`);return jr.push("	}"),jr.join(`
`)};Tr.parseConcatAttributes=Dr=>(0,Ar.createAttributeWithCacheKey)({axis:Dr.attributes.getInt("axis")});const Nr=Dr=>{if(!Dr||Dr.length<1)throw new Error("too few inputs");const jr=Dr[0].type,Gr=Dr[0].dims.length;if(jr==="string")throw new Error("string tensor is not supported yet");for(const Wr of Dr){if(Wr.type!==jr)throw new Error("input tensors should be one type");if(Wr.dims.length!==Gr)throw new Error("input tensors should have the same shape")}}},7825:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createUnpackedGroupedConvProgramInfoLoader=void 0;const Ar=Rr(1315),Pr=Rr(6757),Lr=Rr(5639),Mr=Rr(9754),Fr=Rr(2150);Tr.createUnpackedGroupedConvProgramInfoLoader=(zr,Ur,Vr)=>{const Nr=(Dr=Ur.length>2,jr=Vr.cacheKey,{name:"GroupedConv",inputNames:Dr?["X","W","Bias"]:["X","W"],inputTypes:Dr?[Lr.TextureType.unpacked,Lr.TextureType.unpacked,Lr.TextureType.unpacked]:[Lr.TextureType.unpacked,Lr.TextureType.unpacked],cacheHint:jr});var Dr,jr;return Object.assign(Object.assign({},Nr),{get:()=>((Gr,Wr,qr,Kr)=>{const Xr=Wr.length>2?"value += getBias(output_channel);":"",Zr=Wr[0].dims.slice(),Jr=Wr[1].dims.slice(),_i=Jr[0]/Kr.group;Ar.Logger.verbose("GroupedConv",`autpPad:${Kr.autoPad}, dilations:${Kr.dilations}, group:${Kr.group}, kernelShape:${Kr.kernelShape}, pads:${Kr.pads}, strides:${Kr.strides}`);const es=(0,Mr.calculateOutputShape)(Zr,Jr,Kr.dilations,Kr.pads,Kr.strides),ts=(0,Pr.getGlsl)(Gr.session.backend.glContext.version),{activationFunction:rs,applyActivation:ns}=(0,Fr.getActivationSnippet)(Kr),as=`
  const ivec2 strides = ivec2(${Kr.strides[0]}, ${Kr.strides[1]});
  const ivec2 pads = ivec2(${Kr.pads[0]}, ${Kr.pads[1]});
  ${rs}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${_i};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${Jr[1]}; wInChannel++) {
      int input_channel = group_id * ${Jr[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${Jr[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${Kr.dilations[0]};

        if (xHeight < 0 || xHeight >= ${Zr[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${Jr[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${Kr.dilations[1]};
          if (xWidth < 0 || xWidth >= ${Zr[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${Xr}
    ${ns}
    ${ts.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},qr),{output:{dims:es,type:Wr[0].type,textureType:Lr.TextureType.unpacked},shaderSource:as,hasMain:!0})})(zr,Ur,Nr,Vr)})}},7708:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.conv2DPacked=Tr.conv2DPackedPointwise=void 0;const Ar=Rr(9754),Pr=Rr(5950),Lr=Rr(5632);Tr.conv2DPackedPointwise=(Mr,Fr,zr)=>{const Ur=Fr[0].dims,Vr=Fr[1].dims,Nr=(0,Ar.calculateOutputShape)(Ur,Vr,zr.dilations,zr.pads,zr.strides),Dr=Mr.reshapePacked(Fr[0],[Ur[1],Ur[2]*Ur[3]]),jr=Mr.reshapePacked(Fr[1],[Vr[0],Vr[1]]),Gr=Fr.length>2?[jr,Dr,Fr[2]]:[jr,Dr],Wr=Mr.run((0,Lr.createPackedMatmulProgramInfoLoader)(Mr,Gr,zr),Gr);return Mr.reshapePacked(Wr,Nr)},Tr.conv2DPacked=(Mr,Fr,zr)=>{const Ur=Fr[0].dims,Vr=Fr[1].dims,Nr=(0,Ar.calculateOutputShape)(Ur,Vr,zr.dilations,zr.pads,zr.strides),Dr=Mr.run((0,Pr.createPackedIm2ColProgramInfoLoader)(Mr,Fr[0],Fr[1],Nr,zr),[Fr[0]]),jr=Mr.reshapePacked(Fr[1],[Vr[0],Vr[1]*Vr[2]*Vr[3]]),Gr=Fr.length===3?[jr,Dr,Fr[2]]:[jr,Dr],Wr=Mr.run((0,Lr.createPackedMatmulProgramInfoLoader)(Mr,Gr,zr),Gr);return Mr.reshapePacked(Wr,Nr)}},5042:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseConvTransposeAttributes=Tr.convTranspose=void 0;const Ar=Rr(4910),Pr=Rr(6757),Lr=Rr(5639),Mr=Rr(2150),Fr=(jr,Gr,Wr,qr,Kr,Xr)=>(jr-1)*Gr+Wr+(qr-1)*Kr+1-Xr,zr=(jr,Gr,Wr,qr,Kr)=>{const Xr=Math.floor(jr/2);Gr==="SAME_UPPER"?(Wr[qr]=Xr,Wr[Kr]=jr-Xr):Gr==="SAME_LOWER"&&(Wr[qr]=jr-Xr,Wr[Kr]=Xr)};Tr.convTranspose=(jr,Gr,Wr)=>(Dr(Gr,Wr),Ur(jr,Gr,Wr));const Ur=(jr,Gr,Wr)=>{const qr=Nr(Wr,Gr);return[Vr(jr,Gr,qr)]},Vr=(jr,Gr,Wr)=>jr.run(((qr,Kr,Xr)=>{const Zr=(Jr=Kr.length>2,_i=Xr.cacheKey,{name:"ConvTranspose",inputNames:Jr?["X","W","B"]:["X","W"],inputTypes:Jr?[Lr.TextureType.unpacked,Lr.TextureType.unpacked,Lr.TextureType.unpacked]:[Lr.TextureType.unpacked,Lr.TextureType.unpacked],cacheHint:_i});var Jr,_i;return Object.assign(Object.assign({},Zr),{get:()=>((es,ts,rs,ns)=>{const as=ts.length>2?"getB(output_channel)":"0.0",ls=ts[0].dims,us=ts[1].dims,xs=us[1],Ts=us[0]/ns.group,vs=[ts[0].dims[0],ts[1].dims[1]*ns.group,...ns.outputShape],gs=(0,Pr.getGlsl)(es.session.backend.glContext.version),{activationFunction:fs,applyActivation:ys}=(0,Mr.getActivationSnippet)(ns),ks=`
  const ivec2 strides = ivec2(${ns.strides[0]}, ${ns.strides[1]});
  const ivec2 pads = ivec2(${ns.pads[0]}, ${ns.pads[1]});
  ${fs}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${xs};
    int wOutChannel = output_channel - group_id * ${xs};

    float value = ${as};
    for (int inChannelOffset = 0; inChannelOffset < ${Ts}; inChannelOffset++) {
      int input_channel = group_id * ${Ts} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${us[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${us[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${ns.dilations[0]}, wHOff * ${ns.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${ls[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${ls[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${ys}
    ${gs.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},rs),{output:{dims:vs,type:ts[0].type,textureType:Lr.TextureType.unpacked},shaderSource:ks,hasMain:!0})})(qr,Kr,Zr,Xr)})})(jr,Gr,Wr),Gr),Nr=(jr,Gr)=>{const Wr=jr.kernelShape.slice();if(jr.kernelShape.length===0)for(let Zr=2;Zr<Gr[1].dims.length;++Zr)Wr.push(Gr[1].dims[Zr]);const qr=jr.pads.slice(),Kr=jr.outputShape.slice();((Zr,Jr,_i,es,ts,rs,ns,as)=>{const ls=Zr.length-2,us=as.length===0;for(let xs=0;xs<ls;++xs){const Ts=us?Zr[xs+2]*rs[xs]:as[xs],vs=Fr(Zr[xs+2],rs[xs],ts[xs],Jr[xs],_i[xs],Ts);zr(vs,es,ts,xs,xs+ls),us&&as.push(rs[xs]*(Zr[xs+2]-1)+ns[xs]+(Jr[xs]-1)*_i[xs]+1-ts[xs]-ts[xs+ls])}})(Gr[0].dims,Wr,jr.dilations,jr.autoPad,qr,jr.strides,jr.outputPadding,Kr);const Xr=Object.assign({},jr);return Object.assign(Xr,{kernelShape:Wr,pads:qr,outputShape:Kr,cacheKey:jr.cacheKey}),Xr};Tr.parseConvTransposeAttributes=jr=>{const Gr=jr.attributes,Wr=(0,Mr.parseInternalActivationAttributes)(Gr),qr=Gr.getString("auto_pad","NOTSET"),Kr=Gr.getInts("dilations",[1,1]),Xr=Gr.getInt("group",1),Zr=Gr.getInts("kernel_shape",[]),Jr=Gr.getInts("output_padding",[0,0]),_i=Gr.getInts("output_shape",[]),es=Gr.getInts("pads",[0,0,0,0]),ts=Gr.getInts("strides",[1,1]);return(0,Ar.createAttributeWithCacheKey)(Object.assign({autoPad:qr,dilations:Kr,group:Xr,kernelShape:Zr,outputPadding:Jr,outputShape:_i,pads:es,strides:ts},Wr))};const Dr=(jr,Gr)=>{if(!jr||jr.length!==2&&jr.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(jr[0].dims.length!==4||jr[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(jr[0].dims[1]!==jr[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const Wr=jr[1].dims[1]*Gr.group;if(jr.length===3&&(jr[2].dims.length!==1||jr[2].dims[0]!==Wr))throw new Error("invalid bias");const qr=jr[0].dims.length-2;if(Gr.dilations.length!==qr)throw new Error(`dilations should be ${qr}D`);if(Gr.strides.length!==qr)throw new Error(`strides should be ${qr}D`);if(Gr.pads.length!==2*qr)throw new Error(`pads should be ${2*qr}D`);if(Gr.outputPadding.length!==qr)throw new Error(`output_padding should be ${qr}D`);if(Gr.kernelShape.length!==0&&Gr.kernelShape.length!==jr[1].dims.length-2)throw new Error("invalid kernel shape");if(Gr.outputShape.length!==0&&Gr.outputShape.length!==jr[0].dims.length-2)throw new Error("invalid output shape");if(jr[0].type!=="float32"||jr[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(jr.length===3&&jr[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},9754:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseConvAttributes=Tr.conv=Tr.calculateOutputShape=void 0;const Ar=Rr(4910),Pr=Rr(7273),Lr=Rr(7825),Mr=Rr(7708),Fr=Rr(3281),zr=Rr(2150),Ur=Rr(1625),Vr=Rr(8276);Tr.calculateOutputShape=(qr,Kr,Xr,Zr,Jr)=>{const _i=qr[0],es=qr.slice(2),ts=es.length,rs=Kr[0],ns=Kr.slice(2).map((ls,us)=>ls+(ls-1)*(Xr[us]-1)),as=es.map((ls,us)=>ls+Zr[us]+Zr[us+ts]).map((ls,us)=>Math.floor((ls-ns[us]+Jr[us])/Jr[us]));return[_i,rs].concat(...as)},Tr.conv=(qr,Kr,Xr)=>(Wr(Kr,Xr),Nr(qr,Kr,Xr));const Nr=(qr,Kr,Xr)=>{const Zr=Gr(Xr,Kr),Jr=qr.session.pack,_i=Zr.kernelShape[0]===1&&Zr.kernelShape[1]===1;return Zr.group>1?[qr.run((0,Lr.createUnpackedGroupedConvProgramInfoLoader)(qr,Kr,Zr),Kr)]:_i&&Jr?[Dr(qr,Kr,Zr)]:Jr&&Kr[0].dims.length===4&&Kr[0].dims[0]===1&&!_i?[(0,Mr.conv2DPacked)(qr,Kr,Zr)]:[jr(qr,Kr,Zr)]},Dr=(qr,Kr,Xr)=>{const Zr=Kr[0].dims,Jr=Kr[1].dims,_i=(0,Tr.calculateOutputShape)(Zr,Jr,Xr.dilations,Xr.pads,Xr.strides),es=qr.reshapeUnpacked(Kr[0],[Zr[1],Zr[2]*Zr[3]]),ts=qr.reshapeUnpacked(Kr[1],[Jr[0],Jr[1]]),rs=Kr.length>2?[ts,es,Kr[2]]:[ts,es],ns=qr.run((0,Vr.createMatmulProgramInfoLoader)(rs,Xr),rs);return qr.reshapeUnpacked(ns,_i)},jr=(qr,Kr,Xr)=>{const Zr=Kr[0].dims,Jr=Kr[1].dims,_i=(0,Tr.calculateOutputShape)(Zr,Jr,Xr.dilations,Xr.pads,Xr.strides),es=qr.run((0,Ur.createIm2ColProgramInfoLoader)(qr,Kr[0],Kr[1],_i,Xr),[Kr[0]]),ts=Kr.length===3?[es,Kr[1],Kr[2]]:[es,Kr[1]];return qr.run((0,Fr.createDotProductProgramInfoLoader)(qr,Kr,_i,Xr),ts)},Gr=(qr,Kr)=>{const Xr=qr.kernelShape.slice();if(qr.kernelShape.length===0)for(let _i=2;_i<Kr[1].dims.length;++_i)Xr.push(Kr[1].dims[_i]);const Zr=qr.pads.slice();Pr.PoolConvUtil.adjustPadsBasedOnAutoPad(Kr[0].dims,qr.strides,qr.dilations,Xr,Zr,qr.autoPad);const Jr=Object.assign({},qr);return Object.assign(Jr,{kernelShape:Xr,pads:Zr,cacheKey:qr.cacheKey}),Jr};Tr.parseConvAttributes=qr=>{const Kr=qr.attributes,Xr=(0,zr.parseInternalActivationAttributes)(Kr),Zr=Kr.getString("auto_pad","NOTSET"),Jr=Kr.getInts("dilations",[1,1]),_i=Kr.getInt("group",1),es=Kr.getInts("kernel_shape",[]),ts=Kr.getInts("pads",[0,0,0,0]),rs=Kr.getInts("strides",[1,1]);return(0,Ar.createAttributeWithCacheKey)(Object.assign({autoPad:Zr,dilations:Jr,group:_i,kernelShape:es,pads:ts,strides:rs},Xr))};const Wr=(qr,Kr)=>{if(!qr||qr.length!==2&&qr.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(qr[0].dims.length!==4||qr[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(qr[0].dims[1]!==qr[1].dims[1]*Kr.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(qr.length===3&&(qr[2].dims.length!==1||qr[1].dims[0]!==qr[2].dims[0]))throw new Error("invalid bias");const Xr=qr[0].dims.length-2;if(Kr.dilations.length!==Xr)throw new Error(`dilations should be ${Xr}D`);if(Kr.strides.length!==Xr)throw new Error(`strides should be ${Xr}D`);if(Kr.pads.length!==2*Xr)throw new Error(`pads should be ${2*Xr}D`);if(Kr.kernelShape.length!==0&&Kr.kernelShape.length!==qr[1].dims.length-2)throw new Error("invalid kernel shape");if(qr[0].type!=="float32"||qr[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(qr.length===3&&qr[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},6742:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseDepthToSpaceAttributes=Tr.depthToSpace=void 0;const Ar=Rr(5707);Tr.depthToSpace=(Lr,Mr,Fr)=>{Pr(Mr);const zr=Fr.blocksize,Ur=zr*zr,Vr=Fr.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],Nr=Fr.mode==="DCR"?[Mr[0].dims[0],zr,zr,Mr[0].dims[1]/Ur,Mr[0].dims[2],Mr[0].dims[3]]:[Mr[0].dims[0],Mr[0].dims[1]/Ur,zr,zr,Mr[0].dims[2],Mr[0].dims[3]],Dr=Lr.reshapeUnpacked(Mr[0],Nr),jr={perm:Vr,cacheKey:`${Vr}`},[Gr]=(0,Ar.transpose)(Lr,[Dr],jr),Wr=[Mr[0].dims[0],Mr[0].dims[1]/Ur,Mr[0].dims[2]*zr,Mr[0].dims[3]*zr];return[Lr.reshapeUnpacked(Gr,Wr)]},Tr.parseDepthToSpaceAttributes=Lr=>{const Mr=Lr.attributes.getInt("blocksize");if(Mr<1)throw new Error(`blocksize must be >= 1, but got : ${Mr} for DepthToSpace`);const Fr=Lr.attributes.getString("mode","DCR");if(Fr!=="DCR"&&Fr!=="CRD")throw new Error(`unrecognized mode: ${Fr} for DepthToSpace`);return{mode:Fr,blocksize:Mr}};const Pr=Lr=>{if(Lr.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${Lr.length}`);if(Lr[0].type==="string"||Lr[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},3281:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createDotProductProgramInfoLoader=void 0;const Ar=Rr(7273),Pr=Rr(6757),Lr=Rr(5639),Mr=Rr(2150),Fr=Rr(1625);Tr.createDotProductProgramInfoLoader=(zr,Ur,Vr,Nr)=>{const Dr=((jr,Gr)=>({name:"ConvDotProduct",inputNames:jr?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:jr?[Lr.TextureType.unpacked,Lr.TextureType.packedLastDimension,Lr.TextureType.unpacked]:[Lr.TextureType.unpacked,Lr.TextureType.packedLastDimension],cacheKey:Gr.activationCacheKey}))(Ur.length>2,Nr);return Object.assign(Object.assign({},Dr),{get:()=>((jr,Gr,Wr,qr,Kr)=>{const Xr=Wr[0].dims,Zr=Wr[1].dims,Jr=[Zr[0],Math.ceil(Xr[1]*Zr[2]*Zr[3]/4)],_i=(0,Fr.calculateIm2ColDims)(Xr,Zr,qr),[es,ts]=jr.calculateTextureWidthAndHeight(Jr,Lr.TextureType.packedLastDimension),rs=Ar.ShapeUtil.computeStrides(_i),[ns,as]=jr.calculateTextureWidthAndHeight(_i,Lr.TextureType.packedLastDimension),ls=qr.length,us=Wr.length<3?"0.0":"_B(b)",xs=Math.ceil(Xr[1]*Zr[2]*Zr[3]/4),{activationFunction:Ts,applyActivation:vs}=(0,Mr.getActivationSnippet)(Kr),gs=(0,Pr.getGlsl)(jr.session.backend.glContext.version),fs=`
${Ts}
float process(int indices[${ls}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${rs[0]} + im2col[1] * ${rs[1]} + im2col[2] * ${rs[2]};
  int kernelOffset = indices[1] * ${Jr[1]};
  float value = ${us};
  for (int i = 0; i < ${xs}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${ns}, ${as});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${es}, ${ts});
    value += dot(${gs.texture2D}(Im2Col, im2colCoords), ${gs.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${vs}
  return value;
}`;return Object.assign(Object.assign({},Gr),{output:{dims:qr,type:Wr[0].type,textureType:Lr.TextureType.unpacked},shaderSource:fs})})(zr,Dr,Ur,Vr,Nr)})}},4125:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseFlattenAttributes=Tr.flatten=void 0;const Ar=Rr(7273);Tr.flatten=(Lr,Mr,Fr)=>{Pr(Mr,Fr);const zr=Ar.ShapeUtil.flattenShape(Mr[0].dims,Fr);return[Lr.reshapeUnpacked(Mr[0],zr)]},Tr.parseFlattenAttributes=Lr=>Lr.attributes.getInt("axis",1);const Pr=(Lr,Mr)=>{if(!Lr||Lr.length!==1)throw new Error("Flatten requires 1 input.");const Fr=Lr[0].dims.length;if(Fr===0)throw new Error("scalar tensor is not supported.");if(Mr<-Fr||Mr>Fr)throw new Error("Invalid axis");if(Lr[0].type==="string")throw new Error("string tensor is not supported.")}},2150:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseInternalActivationAttributes=Tr.getActivationSnippet=void 0;const Ar=Rr(7273),Pr=Rr(9087);Tr.getActivationSnippet=function(Lr){let Mr;switch(Lr.activation){case"Relu":Mr=(0,Pr.glslRelu)();break;case"Sigmoid":Mr=(0,Pr.glslSigmoid)();break;case"Clip":Mr=(0,Pr.glslClip)(Lr.clipMin,Lr.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const Fr=Mr.name;return{activationFunction:Mr.body,applyActivation:`value = ${Fr}_(value);`}},Tr.parseInternalActivationAttributes=Lr=>{const Mr=Lr.getString("activation","");if(Mr==="Clip"){const[Fr,zr]=Lr.getFloats("activation_params",[Ar.MIN_CLIP,Ar.MAX_CLIP]);return{activation:Mr,clipMax:zr,clipMin:Fr,activationCacheKey:`${Mr}:${Fr},${zr}`}}return{activation:Mr,activationCacheKey:Mr}}},6149:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseGatherAttributes=Tr.gather=void 0;const Ar=Rr(4910),Pr=Rr(6145),Lr=Rr(7273),Mr=Rr(5639);Tr.gather=(Vr,Nr,Dr)=>(Ur(Nr,Dr.axis),[Vr.run(zr(Vr,Nr,Dr),Nr)]),Tr.parseGatherAttributes=Vr=>(0,Ar.createAttributeWithCacheKey)({axis:Vr.attributes.getInt("axis",0)});const Fr={name:"Gather",inputNames:["A","B"],inputTypes:[Mr.TextureType.unpacked,Mr.TextureType.unpacked]},zr=(Vr,Nr,Dr)=>{const jr=Object.assign(Object.assign({},Fr),{cacheHint:Dr.cacheKey});return Object.assign(Object.assign({},jr),{get:()=>((Gr,Wr,qr,Kr)=>{const Xr=qr[0].dims.slice(),Zr=qr[1].dims.slice(),Jr=new Array(Xr.length+Zr.length-1);Kr=Lr.ShapeUtil.normalizeAxis(Kr,Xr.length);const _i=[];for(let ts=0;ts<Jr.length;ts++)ts<Kr?(Jr[ts]=Xr[ts],_i.push(`inputIdx[${ts}] = outputIdx[${ts}];`)):ts<Kr+Zr.length?(Jr[ts]=Zr[ts-Kr],_i.push(`indexDataIdx[${ts-Kr}] = outputIdx[${ts}];`)):(Jr[ts]=Xr[ts-Zr.length+1],_i.push(`inputIdx[${ts-Zr.length+1}] = outputIdx[${ts}];`));const es=`
      float process(int outputIdx[${Jr.length||1}]) {
        int inputIdx[${Xr.length}];
        int indexDataIdx[${Zr.length||1}];
        indexDataIdx[0] = 0;
        ${_i.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${Kr}] = idx < 0 ? idx + ${Xr[Kr]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},Wr),{output:{dims:Jr,type:qr[0].type,textureType:Mr.TextureType.unpacked},shaderSource:es})})(0,jr,Nr,Dr.axis)})},Ur=(Vr,Nr)=>{if(!Vr||Vr.length!==2)throw new Error("Gather requires 2 inputs.");const Dr=Vr[0].dims.length;if(Dr<1)throw new Error("Invalid input shape.");if(Nr<-Dr||Nr>Dr-1)throw new Error("Invalid axis.");if(Pr.NUMBER_TYPES.indexOf(Vr[0].type)===-1)throw new Error("Invaid input type.");if(Vr[1].type!=="int32"&&Vr[1].type!=="int16")throw new Error("Invaid input type.")}},5378:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseGemmAttributesV11=Tr.parseGemmAttributesV7=Tr.gemm=void 0;const Ar=Rr(4910),Pr=Rr(7273),Lr=Rr(5639);Tr.gemm=(Vr,Nr,Dr)=>(Ur(Nr,Dr),[Vr.run(Fr(Nr,Dr),Nr)]);const Mr=(Vr,Nr)=>{const Dr=Vr.attributes.getInt("transA",0)!==0,jr=Vr.attributes.getInt("transB",0)!==0,Gr=Vr.attributes.getFloat("alpha",1),Wr=Vr.attributes.getFloat("beta",1);return(0,Ar.createAttributeWithCacheKey)({transA:Dr,transB:jr,alpha:Gr,beta:Wr,isOptionalC:Nr})};Tr.parseGemmAttributesV7=Vr=>Mr(Vr,!1),Tr.parseGemmAttributesV11=Vr=>Mr(Vr,!0);const Fr=(Vr,Nr)=>{const Dr={name:"Gemm",inputNames:Vr.length===3?["A","B","C"]:["A","B"],inputTypes:Vr.length===3?[Lr.TextureType.unpacked,Lr.TextureType.unpacked,Lr.TextureType.unpacked]:[Lr.TextureType.unpacked,Lr.TextureType.unpacked],key:Nr.cacheKey};return Object.assign(Object.assign({},Dr),{get:()=>zr(Dr,Vr,Nr)})},zr=(Vr,Nr,Dr)=>{const jr=Nr[0].dims.slice(),Gr=Nr[1].dims.slice(),[Wr,qr]=Pr.GemmUtil.getShapeOfGemmResult(jr,Dr.transA,Gr,Dr.transB,Nr.length===3?Nr[2].dims:void 0),Kr=[Wr,qr];if(!Kr)throw new Error("Can't use gemm on the given tensors");let Xr=jr[jr.length-1],Zr="";Dr.transA&&(Xr=jr[0]),Dr.transA&&Dr.transB?Zr="value += _A_T(a) * _B_T(b);":Dr.transA&&!Dr.transB?Zr="value += _A_T(a) * _B(b);":!Dr.transA&&Dr.transB?Zr="value += _A(a) * _B_T(b);":Dr.transA||Dr.transB||(Zr="value += _A(a) * _B(b);");const Jr=Kr.length,_i=`
      float process(int indices[${Jr}]) {
          int a[${Jr}];
          int b[${Jr}];
          ${Nr.length===3?`int c[${Nr[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${Nr.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${Xr}; ++k) {
              a[${Jr-1}] = k;
              b[${Jr-2}] = k;
              ${Zr}
          }

          value = value * alpha;
          ${Nr.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},Vr),{output:{dims:Kr,type:Nr[0].type,textureType:Lr.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:Dr.alpha},{name:"beta",type:"float",data:Dr.beta}],shaderSource:_i})},Ur=(Vr,Nr)=>{if(!Vr)throw new Error("Input is missing");if(Nr.isOptionalC&&(Vr.length<2||Vr.length>3))throw new Error("Invaid input shape.");if(!Nr.isOptionalC&&Vr.length!==3)throw new Error("Gemm requires 3 inputs");if(Vr.length===3&&Vr[2].dims.length!==1&&Vr[2].dims.length!==2)throw new Error("Invalid input shape of C");if(Vr[0].type!=="float32"&&Vr[0].type!=="float64"||Vr[1].type!=="float32"&&Vr[1].type!=="float64"||Vr.length===3&&Vr[2].type!=="float32"&&Vr[2].type!=="float64")throw new Error("Invalid input type.");if(Vr[0].type!==Vr[1].type||Vr.length===3&&Vr[0].type!==Vr[2].type)throw new Error("Input types are mismatched")}},5950:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createPackedIm2ColProgramInfoLoader=void 0;const Ar=Rr(6757),Pr=Rr(5639),Lr=Rr(5614);Tr.createPackedIm2ColProgramInfoLoader=(Mr,Fr,zr,Ur,Vr)=>{const Nr=(Dr=Vr.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[Pr.TextureType.packed],cacheHint:Dr});var Dr;return Object.assign(Object.assign({},Nr),{get:()=>((jr,Gr,Wr,qr,Kr,Xr)=>{const Zr=Wr.dims,Jr=qr.dims,_i=Kr.length,es=[Jr[1]*Jr[2]*Jr[3],Kr[2]*Kr[3]],ts=Jr[2]*Jr[3],rs=(0,Lr.unpackFromChannel)(),ns=(0,Ar.getGlsl)(jr.session.backend.glContext.version);let as="";for(let us=0;us<=1;us++)for(let xs=0;xs<=1;xs++)as+=`
            blockIndex = rc.x + ${xs};
            pos = rc.y + ${us};

            if(blockIndex < ${es[1]} && pos < ${es[0]}) {
              offsetY = int(blockIndex / (${Kr[_i-1]})) * ${Xr.strides[0]} -
                ${Xr.pads[0]};
              d0 = offsetY + ${Xr.dilations[0]} * (imod(pos, ${ts}) / ${Jr[2]});

              if(d0 < ${Zr[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${Kr[_i-1]}) * ${Xr.strides[1]} -
                  ${Xr.pads[1]};
                d1 = offsetX + ${Xr.dilations[1]} * imod(imod(pos, ${ts}), ${Jr[2]});

                if(d1 < ${Zr[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${ts}.);
                    innerDims = vec2(d0, d1);
                    result[${2*us+xs}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const ls=`
      ${rs}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${as}
          ${ns.output} = result;
      }
            `;return Object.assign(Object.assign({},Gr),{output:{dims:es,type:Wr.type,textureType:Pr.TextureType.packed},shaderSource:ls,hasMain:!0})})(Mr,Nr,Fr,zr,Ur,Vr)})}},1625:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.calculateIm2ColDims=Tr.createIm2ColProgramInfoLoader=void 0;const Ar=Rr(5639);Tr.createIm2ColProgramInfoLoader=(Pr,Lr,Mr,Fr,zr)=>{const Ur=(Vr=zr.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[Ar.TextureType.unpacked],cacheHint:Vr});var Vr;return Object.assign(Object.assign({},Ur),{get:()=>((Nr,Dr,jr,Gr,Wr,qr)=>{const Kr=jr.dims,Xr=Gr.dims,Zr=Wr.length,Jr=(0,Tr.calculateIm2ColDims)(Kr,Xr,Wr,4),_i=`
        const int XC = ${Kr[1]};
        const int XH = ${Kr[2]};
        const int XW = ${Kr[3]};
        const int KH = ${qr.kernelShape[0]};
        const int KW = ${qr.kernelShape[1]};
        const int dilationH = ${qr.dilations[0]};
        const int dilationW = ${qr.dilations[1]};
        const int strideH = ${qr.strides[0]};
        const int strideW = ${qr.strides[1]};
        const int padH = ${qr.pads[0]};
        const int padW = ${qr.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${Zr}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${Kr.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},Dr),{output:{dims:Jr,type:jr.type,textureType:Ar.TextureType.packedLastDimension},shaderSource:_i})})(0,Ur,Lr,Mr,Fr,zr)})},Tr.calculateIm2ColDims=(Pr,Lr,Mr,Fr=4)=>[Mr[0],Mr[2],Mr[3],Math.ceil(Pr[1]*Lr[2]*Lr[3]/Fr)]},6981:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseImageScalerAttributes=Tr.imageScaler=void 0;const Ar=Rr(4910),Pr=Rr(5639);Tr.imageScaler=(Ur,Vr,Nr)=>(zr(Vr),[Ur.run(Mr(Ur,Vr,Nr),Vr)]),Tr.parseImageScalerAttributes=Ur=>{const Vr=Ur.attributes.getFloat("scale"),Nr=Ur.attributes.getFloats("bias");return(0,Ar.createAttributeWithCacheKey)({scale:Vr,bias:Nr})};const Lr={name:"ImageScaler",inputNames:["X"],inputTypes:[Pr.TextureType.unpacked]},Mr=(Ur,Vr,Nr)=>{const Dr=Object.assign(Object.assign({},Lr),{cacheHint:Nr.cacheKey});return Object.assign(Object.assign({},Dr),{get:()=>((jr,Gr,Wr,qr)=>{const Kr=Wr[0].dims.slice(),Xr=Kr.length,Zr=`
      ${Fr(qr.bias.length)}
      float process(int indices[${Xr}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},Gr),{output:{dims:Kr,type:Wr[0].type,textureType:Pr.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:qr.bias.length,data:qr.bias},{name:"scale",type:"float",data:qr.scale}],shaderSource:Zr})})(0,Dr,Vr,Nr)})},Fr=Ur=>{const Vr=[`float getBias(float bias[${Ur}], int channel) {`];for(let Nr=0;Nr<Ur;++Nr)Nr===0?Vr.push(`	if (channel == ${Nr}) { return bias[${Nr}]; }`):Nr===Ur-1?Vr.push(`	else { return bias[${Nr}]; }`):Vr.push(`	else if (channel == ${Nr}) { return bias[${Nr}]; }`);return Vr.push("	}"),Vr.join(`
`)},zr=Ur=>{if(!Ur||Ur.length!==1)throw new Error("ImageScaler requires 1 input.");if(Ur[0].dims.length!==4)throw new Error("Invalid input shape.");if(Ur[0].type!=="float32"&&Ur[0].type!=="float64")throw new Error("Invalid input type.")}},7413:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseInstanceNormalizationAttributes=Tr.instanceNormalization=void 0;const Ar=Rr(6757),Pr=Rr(5639);Tr.instanceNormalization=(Vr,Nr,Dr)=>{Ur(Nr);const jr=Vr.run(Mr(Nr[0]),Nr);return[Vr.run(zr(Vr,Nr[0],Dr,jr.dims),[Nr[0],jr,Nr[1],Nr[2]])]},Tr.parseInstanceNormalizationAttributes=Vr=>Vr.attributes.getFloat("epsilon",1e-5);const Lr={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[Pr.TextureType.unpacked]},Mr=Vr=>Object.assign(Object.assign({},Lr),{get:()=>((Nr,Dr)=>{const jr=Dr.dims.slice(),Gr=jr[1],Wr=jr[2]*jr[3],qr=[jr[0],Gr],Kr=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${jr[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${jr[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${Wr});
        temp = 0.0;
        for(int a2=0; a2<${jr[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${jr[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${Wr});

        return v;
      }`;return Object.assign(Object.assign({},Nr),{output:{dims:qr,type:Dr.type,textureType:Pr.TextureType.packedLastDimension},shaderSource:Kr})})(Lr,Vr)}),Fr={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[Pr.TextureType.unpacked,Pr.TextureType.packedLastDimension,Pr.TextureType.unpacked,Pr.TextureType.unpacked]},zr=(Vr,Nr,Dr,jr)=>{const Gr=Object.assign(Object.assign({},Fr),{cacheHint:`${Dr}`});return Object.assign(Object.assign({},Gr),{get:()=>((Wr,qr,Kr,Xr,Zr)=>{const Jr=(0,Ar.getGlsl)(Wr.session.backend.glContext.version),[_i,es]=Wr.calculateTextureWidthAndHeight(Zr,Pr.TextureType.packedLastDimension),[ts,rs]=[_i/4,es],ns=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${ts}, ${rs});
        return ${Jr.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},qr),{output:{dims:Kr.dims,type:Kr.type,textureType:Pr.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:Xr}],shaderSource:ns})})(Vr,Gr,Nr,Dr,jr)})},Ur=Vr=>{if(!Vr||Vr.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const Nr=Vr[0],Dr=Vr[1],jr=Vr[2];if(Nr.dims.length<3||Dr.dims.length!==1||jr.dims.length!==1)throw new Error("Invalid input shape.");if(Dr.dims[0]!==Nr.dims[1]||jr.dims[0]!==Nr.dims[1])throw new Error("Input shapes are mismatched.");if(Nr.type!=="float32"&&Nr.type!=="float64"||Dr.type!=="float32"&&Dr.type!=="float64"||jr.type!=="float32"&&jr.type!=="float64")throw new Error("Invalid input type.");if(Vr[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},7006:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createLrnProgramInfoLoader=Tr.parseLrnAttributes=Tr.lrn=void 0;const Ar=Rr(4910),Pr=Rr(5639);Tr.lrn=(zr,Ur,Vr)=>(Fr(Ur),[zr.run(Mr(Ur,Vr),Ur)]),Tr.parseLrnAttributes=zr=>{const Ur=zr.attributes.getFloat("alpha",1e-4),Vr=zr.attributes.getFloat("beta",.75),Nr=zr.attributes.getFloat("bias",1),Dr=zr.attributes.getInt("size");return(0,Ar.createAttributeWithCacheKey)({alpha:Ur,beta:Vr,bias:Nr,size:Dr})};const Lr={name:"LRN",inputNames:["X"],inputTypes:[Pr.TextureType.unpacked]};function Mr(zr,Ur){return Object.assign(Object.assign({},Lr),{cacheHint:Ur.cacheKey,get:()=>function(Vr,Nr){const Dr=Vr[0].dims[1],jr=Vr[0].dims.length,Gr=-Math.floor((Nr.size-1)/2),Wr=Math.ceil((Nr.size-1)/2),qr=`float(${Nr.alpha}) / float(${Nr.size})`,Kr=`
    float process(int indices[${jr}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${Gr}; i <= ${Wr}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${Dr}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(float(${Nr.bias}) + ${qr} * square_sum, float(${Nr.beta}));
    }`;return Object.assign(Object.assign({},Lr),{cacheHint:Nr.cacheKey,output:{dims:Vr[0].dims,type:Vr[0].type,textureType:Pr.TextureType.unpacked},shaderSource:Kr})}(zr,Ur)})}Tr.createLrnProgramInfoLoader=Mr;const Fr=zr=>{if(!zr||zr.length!==1)throw new Error("LRN requires 1 input.");if(zr[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(zr[0].type!=="float32")throw new Error("input should be float type")}},5632:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createPackedMatmulProgramInfoLoader=void 0;const Ar=Rr(7273),Pr=Rr(6757),Lr=Rr(5639),Mr=Rr(432),Fr=Rr(2150),zr=Rr(8276);Tr.createPackedMatmulProgramInfoLoader=(Ur,Vr,Nr)=>{const Dr=(jr=Vr.length>2,Gr=Nr.activationCacheKey,{name:"MatMul (packed)",inputNames:jr?["A","B","Bias"]:["A","B"],inputTypes:jr?[Lr.TextureType.packed,Lr.TextureType.packed,Lr.TextureType.packed]:[Lr.TextureType.packed,Lr.TextureType.packed],cacheHint:Gr});var jr,Gr;return Object.assign(Object.assign({},Dr),{get:()=>((Wr,qr,Kr,Xr)=>{const Zr=Kr.length>2,Jr=Zr?"value += getBiasForMatmul();":"",_i=Kr[0].dims,es=Kr[1].dims,ts=Ar.BroadcastUtil.calcShape(_i,es,!0),rs=!Ar.ShapeUtil.areEqual(Kr[0].dims,Kr[1].dims);if(!ts)throw new Error("Can't use matmul on the given tensors");const ns=_i[_i.length-1],as=Math.ceil(ns/2),ls=_i.length,us=es.length,xs=(0,Pr.getGlsl)(Wr.session.backend.glContext.version),Ts=(0,Mr.getCoordsDataType)(ts.length),vs=ts.length,gs=(0,Mr.getGlChannels)(),{activationFunction:fs,applyActivation:ys}=(0,Fr.getActivationSnippet)(Xr),ks=Zr?`${(0,zr.getBiasForMatmul)(Ts,gs,Kr[2].dims,ts,!0)}`:"",Fs=rs?`${function(qs,Qs,mo,Xs){let so=[],uo=[];const bo=mo[0].dims,wo=mo[1].dims,Co=bo.length,ds=wo.length,Is=Xs.length,Gs=Is-Co,to=Is-ds;so=bo.map((Do,To)=>`coords.${Qs[To+Gs]}`),so[Co-1]="i*2",so.join(", "),uo=wo.map((Do,To)=>`coords.${Qs[To+to]}`),uo[ds-2]="i*2",uo.join(", ");const no=Ar.BroadcastUtil.getBroadcastDims(bo,Xs),Ro=Ar.BroadcastUtil.getBroadcastDims(wo,Xs),ro=no.map(Do=>`coords.${Qs[Do+Gs]} = 0;`).join(`
`),go=Ro.map(Do=>`coords.${Qs[Do+to]} = 0;`).join(`
`),No=`int lastDim = coords.${Qs[Is-1]};
  coords.${Qs[Is-1]} = coords.${Qs[Is-2]};
  coords.${Qs[Is-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${qs} coords = getOutputCoords();
  ${No}
  ${ro}
  vec4 outputValue = getA(${so});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${qs} coords = getOutputCoords();
  ${No}
  ${go}
  vec4 outputValue = getB(${uo});
  return outputValue;
}`}(Ts,gs,Kr,ts)}`:"",Us=rs?"getAAtOutCoordsMatmul(i)":`getA(${function(qs,Qs){let mo="";for(let Xs=0;Xs<Qs-2;Xs++)mo+=`rc.${qs[Xs]}, `;return mo+=`rc.${qs[Qs-2]}, i*2`,mo}(gs,ls)})`,Vs=rs?"getBAtOutCoordsMatmul(i)":`getB(${function(qs,Qs){let mo="";for(let Xs=0;Xs<Qs-2;Xs++)mo+=`rc.${qs[Xs]}, `;return mo+=`i*2, rc.${qs[Qs-1]}`,mo}(gs,us)})`,ao=`
            ${Fs}
            ${ks}
            ${fs}
            void main() {
              ${rs?"":`${Ts} rc =
          getOutputCoords(); int lastDim = rc.${gs[vs-1]}; rc.${gs[vs-1]} =
          rc.${gs[vs-2]}; rc.${gs[vs-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${as}; i++) {
                vec4 a = ${Us};
                vec4 b = ${Vs};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${Jr}
              ${ys}
              ${xs.output} = value;
            }`;return Object.assign(Object.assign({},qr),{output:{dims:ts,type:Kr[0].type,textureType:Lr.TextureType.packed},shaderSource:ao,hasMain:!0})})(Ur,Dr,Vr,Nr)})}},8276:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.getBiasForMatmul=Tr.createMatmulProgramInfoLoader=Tr.parseMatMulAttributes=Tr.matMul=void 0;const Ar=Rr(7273),Pr=Rr(5639),Lr=Rr(432),Mr=Rr(2150),Fr=Rr(5632);Tr.matMul=(Dr,jr,Gr)=>(Vr(jr),Dr.session.pack?[Dr.run((0,Fr.createPackedMatmulProgramInfoLoader)(Dr,jr,Gr),jr)]:[Dr.run(Ur(jr,Gr),jr)]),Tr.parseMatMulAttributes=Dr=>(0,Mr.parseInternalActivationAttributes)(Dr.attributes);const zr=(Dr,jr)=>({name:"MatMul",inputNames:Dr?["A","B","Bias"]:["A","B"],inputTypes:Dr?[Pr.TextureType.unpacked,Pr.TextureType.unpacked,Pr.TextureType.unpacked]:[Pr.TextureType.unpacked,Pr.TextureType.unpacked],cacheHint:jr});function Ur(Dr,jr){const Gr=zr(Dr.length>2,jr.activationCacheKey);return Object.assign(Object.assign({},Gr),{get:()=>function(Wr,qr,Kr){const Xr=qr[0].dims,Zr=qr[1].dims,Jr=Ar.BroadcastUtil.calcShape(Xr,Zr,!0);if(!Jr)throw new Error("Can't use matmul on the given tensors");const _i=(0,Lr.getCoordsDataType)(Jr.length),es=(0,Lr.getGlChannels)(),{activationFunction:ts,applyActivation:rs}=(0,Mr.getActivationSnippet)(Kr),ns=qr.length>2,as=ns?"value += getBiasForMatmul();":"",ls=ns?`${Nr(_i,es,qr[2].dims,Jr,!1)}`:"",us=Jr.length,xs=Xr.length,Ts=Zr.length,vs=`
    ${ts}
    ${ls}
    float process(int indices[${us}]) {
        int a[${xs}];
        int b[${Ts}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${Xr[Xr.length-1]}; ++k) {
            a[${xs-1}] = k;
            b[${Ts-2}] = k;
            value += _A(a) * _B(b);
        }
        ${as}
        ${rs}
        return value;
    }`;return Object.assign(Object.assign({},Wr),{output:{dims:Jr,type:qr[0].type,textureType:Pr.TextureType.unpacked},shaderSource:vs})}(Gr,Dr,jr)})}Tr.createMatmulProgramInfoLoader=Ur;const Vr=Dr=>{if(!Dr||Dr.length!==2)throw new Error("MatMul requires 2 inputs.");if(Dr[0].dims[Dr[0].dims.length-1]!==Dr[1].dims[Dr[1].dims.length-2])throw new Error("shared dimension does not match.");if(Dr[0].type!=="float32"&&Dr[0].type!=="float64"||Dr[1].type!=="float32"&&Dr[1].type!=="float64")throw new Error("inputs should be float type");if(Dr[0].type!==Dr[1].type)throw new Error("inputs types should match")};function Nr(Dr,jr,Gr,Wr,qr){let Kr="";const Xr=Gr.length,Zr=Wr.length,Jr=Zr-Xr;Kr=Zr<2&&Xr>0?"coords":Gr.map((ts,rs)=>`coords.${jr[rs+Jr]}`).join(", ");const _i=Ar.BroadcastUtil.getBroadcastDims(Gr,Wr).map(ts=>`coords.${jr[ts+Jr]} = 0;`).join(`
`);let es="vec4(outputValue.xx, outputValue.yy)";return Ar.ShapeUtil.size(Gr)===1&&(es="vec4(outputValue.x)"),qr?`
vec4 getBiasForMatmul() {
  ${Dr} coords = getOutputCoords();
  ${_i}
  vec4 outputValue = getBias(${Kr});
  return ${es};
}`:`
float getBiasForMatmul() {
  ${Dr} coords = getOutputCoords();
  ${_i}
  return getBias(coords.x);
}`}Tr.getBiasForMatmul=Nr},9:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createPackProgramInfoLoader=void 0;const Ar=Rr(6757),Pr=Rr(5639),Lr=Rr(432),Mr=Rr(5614),Fr={name:"pack",inputNames:["A"],inputTypes:[Pr.TextureType.unpackedReversed]};Tr.createPackProgramInfoLoader=(zr,Ur)=>Object.assign(Object.assign({},Fr),{get:()=>((Vr,Nr)=>{const Dr=(0,Ar.getGlsl)(Vr.session.backend.glContext.version),jr=Nr.dims,Gr=jr.length,Wr=Nr.dims.length,qr=(0,Lr.getCoordsDataType)(Wr),Kr=(0,Mr.getChannels)("rc",Wr),Xr=(Zr=Wr,Jr=Kr,_i=jr[jr.length-2],es=jr[jr.length-1],Zr===0||Zr===1?"":`
    int r = ${Jr[Zr-2]};
    int c = ${Jr[Zr-1]};
    int rp1 = ${Jr[Zr-2]} + 1;
    int cp1 = ${Jr[Zr-1]} + 1;
    bool rEdge = rp1 >= ${es};
    bool cEdge = cp1 >= ${_i};
    `);var Zr,Jr,_i,es;let ts;ts=Gr===0?[1,1]:Gr===1?[jr[0],1]:[jr[Wr-1],jr[Wr-2]];const rs=function(ls,us,xs){if(ls===0)return"false";if(ls===1)return`rc > ${us[0]}`;let Ts="";for(let vs=ls-2;vs<ls;vs++)Ts+=`${xs[vs]} >= ${us[vs-ls+2]}`,vs<ls-1&&(Ts+="||");return Ts}(Wr,ts,Kr),ns=function(ls,us){const xs=ls.length;if(xs===0)return"getA(), 0, 0, 0";if(xs===1)return`getA(rc),
            rc + 1 >= ${ls[0]} ? 0. : getA(rc + 1),
            0, 0`;let Ts="";if(xs>2)for(let vs=0;vs<xs-2;++vs)Ts+=`${us[vs]},`;return`getA(${Ts}r, c),
          rEdge ? 0. : getA(${Ts}rp1, c),
          cEdge ? 0. : getA(${Ts}r, cp1),
          rEdge || cEdge ? 0. : getA(${Ts}rp1, cp1)`}(jr,Kr),as=`
        void main() {
          ${qr} rc = getOutputCoords();

          if(${rs}) {
            ${Dr.output} = vec4(0);
          } else {
            ${Xr}

            ${Dr.output} = vec4(${ns});
          }
        }
      `;return Object.assign(Object.assign({},Fr),{hasMain:!0,output:{dims:Nr.dims,type:Nr.type,textureType:Pr.TextureType.packed},shaderSource:as})})(zr,Ur)})},5614:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.unpackFromChannel=Tr.getChannels=Tr.getVecChannels=void 0;const Ar=Rr(432);function Pr(Lr,Mr){return(0,Ar.getGlChannels)(Mr).map(Fr=>`${Lr}.${Fr}`)}Tr.getVecChannels=Pr,Tr.getChannels=function(Lr,Mr){return Mr===1?[Lr]:Pr(Lr,Mr)},Tr.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},5565:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parsePadAttributesV11=Tr.padV11=Tr.parsePadAttributesV2=Tr.padV2=void 0;const Ar=Rr(4910),Pr=Rr(7273),Lr=Rr(6757),Mr=Rr(5639),Fr={name:"Pad",inputNames:["A"],inputTypes:[Mr.TextureType.unpacked]};Tr.padV2=(qr,Kr,Xr)=>(Vr(Kr),[qr.run(Object.assign(Object.assign({},Fr),{cacheHint:Xr.cacheKey,get:()=>Ur(qr,Kr[0],Xr)}),Kr)]),Tr.parsePadAttributesV2=qr=>{const Kr=qr.attributes.getString("mode","constant"),Xr=qr.attributes.getFloat("value",0),Zr=qr.attributes.getInts("pads");return(0,Ar.createAttributeWithCacheKey)({mode:Kr,value:Xr,pads:Zr})},Tr.padV11=(qr,Kr,Xr)=>{Nr(Kr);const Zr=zr(qr,Kr,Xr);return(0,Tr.padV2)(qr,[Kr[0]],Zr)},Tr.parsePadAttributesV11=qr=>qr.attributes.getString("mode","constant");const zr=(qr,Kr,Xr)=>{if(!qr.session.isInitializer(Kr[1].dataId)||Kr.length>=3&&!qr.session.isInitializer(Kr[2].dataId))throw new Error("dynamic pad attributes are not allowed");const Zr=Array.from(Kr[1].integerData),Jr=Kr.length>=3?Kr[2].floatData[0]:0;return(0,Ar.createAttributeWithCacheKey)({mode:Xr,pads:Zr,value:Jr})},Ur=(qr,Kr,Xr)=>{const Zr=Pr.ShapeUtil.padShape(Kr.dims.slice(),Xr.pads),Jr=Zr.length,_i=`
      ${Dr(qr,Kr,Xr)}
      float process(int[${Jr}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[Mr.TextureType.unpacked],output:{dims:Zr,type:Kr.type,textureType:Mr.TextureType.unpacked},shaderSource:_i}},Vr=qr=>{if(!qr||qr.length!==1)throw new Error("Pad requires 1 input");if(qr[0].type!=="float32"&&qr[0].type!=="float64")throw new Error("Invalid input type.")},Nr=qr=>{if(!qr||qr.length!==2&&qr.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(qr[1].type!=="int32")throw new Error("Invalid input type.");if(qr.length>=3&&qr[2].type==="string")throw new Error("Invalid input type.")},Dr=(qr,Kr,Xr)=>{const Zr=(0,Lr.getGlsl)(qr.session.backend.glContext.version),[Jr,_i]=qr.calculateTextureWidthAndHeight(Kr.dims,Mr.TextureType.unpacked),es=Pr.ShapeUtil.computeStrides(Kr.dims);switch(Xr.mode){case"constant":return jr(Zr,Kr.dims,es,Jr,_i,Xr.pads,Xr.value);case"reflect":return Gr(Zr,Kr.dims,es,Jr,_i,Xr.pads);case"edge":return Wr(Zr,Kr.dims,es,Jr,_i,Xr.pads);default:throw new Error("Invalid mode")}},jr=(qr,Kr,Xr,Zr,Jr,_i,es)=>{const ts=Kr.length;let rs="";for(let ns=ts-1;ns>=0;--ns)rs+=`
        k = m[${ns}] - ${_i[ns]};
        if (k < 0)  return constant;
        if (k >= ${Kr[ns]}) return constant;
        offset += k * ${Xr[ns]};
        `;return`
      float padA(int m[${ts}]) {
        const float constant = float(${es});
        int offset = 0;
        int k = 0;
        ${rs}
        vec2 coords = offsetToCoords(offset, ${Zr}, ${Jr});
        float value = getColorAsFloat(${qr.texture2D}(A, coords));
        return value;
      }
      `},Gr=(qr,Kr,Xr,Zr,Jr,_i)=>{const es=Kr.length;let ts="";for(let rs=es-1;rs>=0;--rs)ts+=`
        k = m[${rs}] - ${_i[rs]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(Kr[rs]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${Kr[rs]}) { k = _2n_1 - k; }
        }
        offset += k * ${Xr[rs]};
        `;return`
      float padA(int m[${es}]) {
        int offset = 0;
        int k = 0;
        ${ts}
        vec2 coords = offsetToCoords(offset, ${Zr}, ${Jr});
        float value = getColorAsFloat(${qr.texture2D}(A, coords));
        return value;
      }
      `},Wr=(qr,Kr,Xr,Zr,Jr,_i)=>{const es=Kr.length;let ts="";for(let rs=es-1;rs>=0;--rs)ts+=`
        k = m[${rs}] - ${_i[rs]};
        if (k < 0)  k = 0;
        if (k >= ${Kr[rs]}) k = ${Kr[rs]-1};
        offset += k * ${Xr[rs]};
      `;return`
      float padA(int m[${es}]) {
        int offset = 0;
        int k = 0;
        ${ts}
        vec2 coords = offsetToCoords(offset, ${Zr}, ${Jr});
        float value = getColorAsFloat(${qr.texture2D}(A, coords));
        return value;
      }
      `}},2834:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.globalMaxPool=Tr.parseMaxPoolAttributes=Tr.maxPool=Tr.parseGlobalAveragePoolAttributes=Tr.globalAveragePool=Tr.parseAveragePoolAttributes=Tr.averagePool=void 0;const Ar=Rr(4910),Pr=Rr(7273),Lr=Rr(5639);Tr.averagePool=(Wr,qr,Kr)=>{Nr(qr);const Xr={name:"AveragePool",inputNames:["X"],inputTypes:[Lr.TextureType.unpacked],cacheHint:Kr.cacheKey};return[Wr.run(Object.assign(Object.assign({},Xr),{get:()=>Mr(qr,Xr,!1,Kr)}),qr)]},Tr.parseAveragePoolAttributes=Wr=>{const qr=Wr.attributes.getString("auto_pad","NOTSET"),Kr=Wr.attributes.getInt("ceil_mode",0),Xr=Wr.attributes.getInt("count_include_pad",0)!==0,Zr=Wr.attributes.getInts("kernel_shape"),Jr=Wr.attributes.getInts("strides",[]),_i=Wr.attributes.getInts("pads",[]);if(Kr!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,Ar.createAttributeWithCacheKey)({autoPad:qr,ceilMode:Kr,countIncludePad:Xr,kernelShape:Zr,strides:Jr,pads:_i})};const Mr=(Wr,qr,Kr,Xr)=>{const[Zr,Jr]=zr(Wr,Xr,Kr),_i=Pr.ShapeUtil.size(Zr.kernelShape);let es="";Zr.countIncludePad?es+=`value /= float(${_i});`:es+=`value /= float(${_i} - pad);`;const ts=`
        ${Dr(Wr[0].dims,Zr,"value += _X(x);",es,"0.0")}
      `;return Object.assign(Object.assign({},qr),{output:{dims:Jr,type:Wr[0].type,textureType:Lr.TextureType.unpacked},shaderSource:ts})};Tr.globalAveragePool=(Wr,qr,Kr)=>{Nr(qr);const Xr={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[Lr.TextureType.unpacked],cacheHint:`${Kr.countIncludePad}`};return[Wr.run(Object.assign(Object.assign({},Xr),{get:()=>Mr(qr,Xr,!0,Kr)}),qr)]},Tr.parseGlobalAveragePoolAttributes=Wr=>{const qr=Wr.attributes.getInt("count_include_pad",0)!==0;return(0,Ar.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:qr,kernelShape:[],strides:[],pads:[]})},Tr.maxPool=(Wr,qr,Kr)=>{Nr(qr);const Xr={name:"MaxPool",inputNames:["X"],inputTypes:[Lr.TextureType.unpacked],cacheHint:Kr.cacheKey};return[Wr.run(Object.assign(Object.assign({},Xr),{get:()=>Fr(qr,Xr,!1,Kr)}),qr)]},Tr.parseMaxPoolAttributes=Wr=>{const qr=Wr.attributes.getString("auto_pad","NOTSET"),Kr=Wr.attributes.getInt("ceil_mode",0),Xr=Wr.attributes.getInts("kernel_shape"),Zr=Wr.attributes.getInts("strides",[]),Jr=Wr.attributes.getInts("pads",[]),_i=Wr.attributes.getInt("storage_order",0),es=Wr.attributes.getInts("dilations",[]);if(_i!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(Kr!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,Ar.createAttributeWithCacheKey)({autoPad:qr,ceilMode:Kr,countIncludePad:!1,kernelShape:Xr,strides:Zr,pads:Jr,storageOrder:_i,dilations:es})};const Fr=(Wr,qr,Kr,Xr)=>{const[Zr,Jr]=zr(Wr,Xr,Kr),_i=`
      ${Dr(Wr[0].dims,Zr,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},qr),{output:{dims:Jr,type:Wr[0].type,textureType:Lr.TextureType.unpacked},shaderSource:_i})},zr=(Wr,qr,Kr)=>{const Xr=Wr[0].dims.slice(),Zr=Object.hasOwnProperty.call(qr,"dilations"),Jr=qr.kernelShape.slice(),_i=qr.strides.slice(),es=Zr?qr.dilations.slice():[],ts=qr.pads.slice();Pr.PoolConvUtil.adjustPoolAttributes(Kr,Xr,Jr,_i,es,ts);const rs=Pr.PoolConvUtil.computePoolOutputShape(Kr,Xr,_i,es,Jr,ts,qr.autoPad),ns=Object.assign({},qr);return Zr?Object.assign(ns,{kernelShape:Jr,strides:_i,pads:ts,dilations:es,cacheKey:qr.cacheKey}):Object.assign(ns,{kernelShape:Jr,strides:_i,pads:ts,cacheKey:qr.cacheKey}),[ns,rs]},Ur={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},Vr={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[Lr.TextureType.unpacked]};Tr.globalMaxPool=(Wr,qr)=>(Nr(qr),[Wr.run(Object.assign(Object.assign({},Vr),{get:()=>Fr(qr,Vr,!0,Ur)}),qr)]);const Nr=Wr=>{if(!Wr||Wr.length!==1)throw new Error("Pool ops requires 1 input.");if(Wr[0].type!=="float32"&&Wr[0].type!=="float64")throw new Error("Invalid input type.")},Dr=(Wr,qr,Kr,Xr,Zr)=>{const Jr=Wr.length;if(qr.kernelShape.length<=2){const _i=qr.kernelShape[qr.kernelShape.length-1],es=qr.strides[qr.strides.length-1],ts=qr.pads[qr.pads.length/2-1],rs=qr.pads[qr.pads.length-1],ns=Wr[Jr-1];let as="",ls="",us="";if(as=ts+rs!==0?`
          for (int i = 0; i < ${_i}; i++) {
            x[${Jr} - 1] = indices[${Jr} - 1] * ${es} - ${ts} + i;
            if (x[${Jr} - 1] < 0 || x[${Jr} - 1] >= ${ns}) {
              pad++;
              continue;
            }
            ${Kr}
          }`:`
          for (int i = 0; i < ${_i}; i++) {
            x[${Jr} - 1] = indices[${Jr} - 1] * ${es} - ${ts} + i;
            ${Kr}
          }`,qr.kernelShape.length===2){const xs=qr.kernelShape[qr.kernelShape.length-2],Ts=qr.strides[qr.strides.length-2],vs=qr.pads[qr.pads.length/2-2],gs=qr.pads[qr.pads.length-2],fs=Wr[Jr-2];ls=vs+gs!==0?`
            for (int j = 0; j < ${xs}; j++) {
              x[${Jr} - 2] = indices[${Jr} - 2] * ${Ts} - ${vs} + j;
              if (x[${Jr} - 2] < 0 || x[${Jr} - 2] >= ${fs}) {
                pad+= ${_i};
                continue;
              }
          `:`
            for (int j = 0; j < ${xs}; j++) {
              x[${Jr} - 2] = indices[${Jr} - 2] * ${Ts} - ${vs} + j;
            `,us=`
          }
        `}return`
        float process(int indices[${Jr}]) {
          int x[${Jr}];
          copyVec(indices, x);

          float value = ${Zr};
          int pad = 0;
          ${ls}
          ${as}
          ${us}
          ${Xr}
          return value;
        }
      `}{const _i=Pr.ShapeUtil.size(qr.kernelShape),es=Pr.ShapeUtil.computeStrides(qr.kernelShape),ts=es.length,rs=qr.pads.length,ns=Gr(ts),as=jr(Wr,"inputDims"),ls=jr(qr.pads,"pads"),us=jr(es,"kernelStrides"),xs=jr(qr.strides,"strides");let Ts="";return Ts=qr.pads.reduce((vs,gs)=>vs+gs)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${Kr}
          }`:`
          }
          ${Kr}
        `,`
        ${ns}
        float process(int indices[${Jr}]) {
          int x[${Jr}];
          copyVec(indices, x);
          int offset[${ts}];
          int pads[${rs}];
          int inputDims[${Jr}];
          int kernelStrides[${ts}];
          int strides[${ts}];
          ${ls}
          ${as}
          ${xs}
          ${us}

          float value = ${Zr};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${_i}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${Jr} - ${ts}; j < ${Jr}; j++) {
              x[j] = indices[j] * strides[j - ${Jr} + ${ts}]
                + offset[j - ${Jr} + ${ts}] - pads[j - 2];
              ${Ts}
          }
          ${Xr}

          return value;
        }
      `}},jr=(Wr,qr)=>{let Kr="";for(let Xr=0;Xr<Wr.length;Xr++)Kr+=`
      ${qr}[${Xr}] = ${Wr[Xr]};
    `;return Kr},Gr=Wr=>`
  void offsetToIndices(int offset, int[${Wr}] strides, out int[${Wr}] indices) {
    if (${Wr} == 0) {
      return;
    }
    for (int i = 0; i < ${Wr} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${Wr} - 1] = offset;
  }`},1010:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.reduceLogSumSquare=Tr.reduceLogSum=Tr.reduceProd=Tr.reduceMin=Tr.reduceMax=Tr.reduceMean=Tr.reduceSum=Tr.parseReduceAttributes=void 0;const Ar=Rr(4910),Pr=Rr(6145),Lr=Rr(7273),Mr=Rr(5639),Fr=(Vr,Nr,Dr,jr,Gr)=>{Ur(Nr);const Wr={name:jr,inputNames:["A"],inputTypes:[Mr.TextureType.unpacked]};return[Vr.run(Object.assign(Object.assign({},Wr),{cacheHint:Dr.cacheKey,get:()=>zr(Vr,Nr,Dr,jr,Gr,Wr)}),Nr)]};Tr.parseReduceAttributes=Vr=>{const Nr=Vr.attributes.getInts("axes",[]),Dr=Vr.attributes.getInt("keepdims",1)===1;return(0,Ar.createAttributeWithCacheKey)({axes:Nr,keepDims:Dr})};const zr=(Vr,Nr,Dr,jr,Gr,Wr)=>{const qr=[],Kr=Nr[0].dims.length||1,Xr=[],Zr=Lr.ShapeUtil.normalizeAxes(Dr.axes,Nr[0].dims.length),Jr=Gr(Nr,Zr);let _i=Jr[1];for(let ts=0;ts<Nr[0].dims.length;ts++)Zr.indexOf(ts)>=0||Zr.length===0?(Dr.keepDims&&qr.push(1),_i=`
          for(int j${ts} = 0; j${ts} < ${Nr[0].dims[ts]}; j${ts}++) {
            inputIdx[${ts}] = j${ts};
            ${_i}
          }`):(Xr.push(`inputIdx[${ts}] = outputIdx[${qr.length}];`),qr.push(Nr[0].dims[ts]));const es=`
      float process(int outputIdx[${qr.length||1}]) {
        float value;                 // final result
        int inputIdx[${Kr}];      // addressing input data
        ${Xr.join(`
`)}
        ${Jr[0]}       // init ops for reduce max/min
        ${_i}
        ${Jr[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},Wr),{output:{dims:qr,type:Nr[0].type,textureType:Mr.TextureType.unpacked},shaderSource:es})},Ur=Vr=>{if(!Vr||Vr.length!==1)throw new Error("Reduce op requires 1 input.");if(Pr.NUMBER_TYPES.indexOf(Vr[0].type)===-1)throw new Error("Invalid input type.")};Tr.reduceSum=(Vr,Nr,Dr)=>Fr(Vr,Nr,Dr,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),Tr.reduceMean=(Vr,Nr,Dr)=>Fr(Vr,Nr,Dr,"ReduceMean",(jr,Gr)=>{let Wr=1;for(let qr=0;qr<jr[0].dims.length;qr++)(Gr.indexOf(qr)>=0||Gr.length===0)&&(Wr*=jr[0].dims[qr]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${Wr}.;`]}),Tr.reduceMax=(Vr,Nr,Dr)=>Fr(Vr,Nr,Dr,"ReduceMax",(jr,Gr)=>{const Wr=[];for(let qr=0;qr<jr[0].dims.length;qr++)(Gr.indexOf(qr)>=0||Gr.length===0)&&Wr.push(`inputIdx[${qr}] = 0;`);return[`${Wr.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),Tr.reduceMin=(Vr,Nr,Dr)=>Fr(Vr,Nr,Dr,"ReduceMin",(jr,Gr)=>{const Wr=[];for(let qr=0;qr<jr[0].dims.length;qr++)(Gr.indexOf(qr)>=0||Gr.length===0)&&Wr.push(`inputIdx[${qr}] = 0;`);return[`${Wr.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),Tr.reduceProd=(Vr,Nr,Dr)=>Fr(Vr,Nr,Dr,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),Tr.reduceLogSum=(Vr,Nr,Dr)=>Fr(Vr,Nr,Dr,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),Tr.reduceLogSumSquare=(Vr,Nr,Dr)=>Fr(Vr,Nr,Dr,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7379:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.isReshapeCheap=Tr.processDims3D=Tr.createPackedReshape3DProgramInfoLoader=void 0;const Ar=Rr(7273),Pr=Rr(6757),Lr=Rr(5639),Mr=Rr(5614);Tr.createPackedReshape3DProgramInfoLoader=(Fr,zr,Ur)=>{const Vr=(Nr=>({name:"Reshape (packed)",inputTypes:[Lr.TextureType.packed],inputNames:["A"],cacheHint:`${Nr}`}))(Ur);return Object.assign(Object.assign({},Vr),{get:()=>((Nr,Dr,jr,Gr)=>{const Wr=Dr.dims,qr=Gr;let Kr="";for(let Jr=0;Jr<4;Jr++){let _i="";switch(Jr){case 0:_i="outputCoords = rc;";break;case 1:_i="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:_i="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:_i="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}Kr+=`
        ${_i}
        ${Jr>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${Jr}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${Jr>0?"}":""}
      `}const Xr=(0,Pr.getGlsl)(Nr.session.backend.glContext.version),Zr=`
      ${function(Jr){const _i=Ar.ShapeUtil.computeStrides(Jr),es=["b","r","c"],ts="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${_i.map((rs,ns)=>`int ${es[ns]} = ${ts} / ${rs}; ${ns===_i.length-1?`int ${es[ns+1]} = ${ts} - ${es[ns]} * ${rs}`:`index -= ${es[ns]} * ${rs}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(Wr)}
      ${function(Jr){const _i=Ar.ShapeUtil.computeStrides(Jr);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${_i[0]} + coords.z * ${_i[1]} + coords.y;
  }
`}(qr)}
      ${(0,Mr.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${qr[2]};
        int cols = ${qr[1]};

        ${Kr}
        ${Xr.output} = result;
      }
    `;return Object.assign(Object.assign({},jr),{output:{dims:qr,type:Dr.type,textureType:Lr.TextureType.packed},shaderSource:Zr,hasMain:!0})})(Fr,zr,Vr,Ur)})},Tr.processDims3D=function(Fr){if(Fr.length===0)return[1,1,1];let zr=1;for(let Ur=0;Ur<Fr.length-2;++Ur)zr*=Fr[Ur];return[zr,Fr.length>1?Fr[Fr.length-2]:1,Fr[Fr.length-1]]},Tr.isReshapeCheap=function(Fr,zr){let Ur=!1;return Ur=Fr.length===0||zr.length===0||(Fr.length<2||zr.length<2?Fr[Fr.length-1]===zr[zr.length-1]:Fr[Fr.length-1]===zr[zr.length-1]&&Fr[Fr.length-2]===zr[zr.length-2]),Ur}},8126:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.reshape=void 0;const Ar=Rr(7273);Tr.reshape=(Pr,Lr)=>{const Mr=Ar.ShapeUtil.calculateReshapedDims(Lr[0].dims,Lr[1].integerData);return Pr.session.pack?[Pr.reshapePacked(Lr[0],Mr)]:[Pr.reshapeUnpacked(Lr[0],Mr)]}},2801:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseResizeAttributesV11=Tr.parseResizeAttributesV10=Tr.resize=void 0;const Ar=Rr(6757),Pr=Rr(5639),Lr=Rr(432),Mr=Rr(5614),Fr=Rr(3980),zr={name:"Resize",inputNames:["A"],inputTypes:[Pr.TextureType.packed]};Tr.resize=(jr,Gr,Wr)=>((0,Fr.validateInputs)(Gr,Wr),[jr.run(Object.assign(Object.assign({},zr),{cacheHint:Wr.cacheKey,get:()=>Ur(jr,Gr,Wr)}),Gr)]),Tr.parseResizeAttributesV10=jr=>(0,Fr.parseUpsampleAttributes)(jr,10),Tr.parseResizeAttributesV11=jr=>(0,Fr.parseUpsampleAttributes)(jr,11);const Ur=(jr,Gr,Wr)=>{const qr=(0,Ar.getGlsl)(jr.session.backend.glContext.version),[Kr,Xr]=Vr(Gr,Wr);if(Kr.every(Ts=>Ts===1)&&Wr.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},zr),{output:{dims:Xr,type:Gr[0].type,textureType:Pr.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${qr.texture2D}(X, TexCoords);
                    ${qr.output} = v;
                }`});const Zr=Xr.length;if(Zr<2)throw new Error(`output dimension should be at least 2, but got ${Zr}`);const Jr=Xr[Zr-2],_i=Xr[Zr-1],es=Gr[0].dims;if(Zr!==es.length)throw new Error(`output dimension should match input ${es.length}, but got ${Zr}`);const ts=es[Zr-2],rs=es[Zr-1],ns=Kr[Zr-2],as=Kr[Zr-1];let ls="";if(Wr.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${Wr.mode}'`);switch(Wr.coordinateTransformMode){case"asymmetric":ls=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":ls=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":ls=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${_i}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${Jr}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${_i}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${Jr}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":ls=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${_i}.0 - 1.0, ${Jr}.0 - 1.0, ${_i}.0 - 1.0,
                            ${Jr}.0 - 1.0);
                        vec4 original = vec4(${rs}.0 - 1.0, ${ts}.0 - 1.0, ${rs}.0 - 1.0,
                            ${ts}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${Wr.coordinateTransformMode}'`)}const us=(0,Lr.getCoordsDataType)(Zr),xs=`
            const vec2 inputWH = vec2(${ts}.0, ${rs}.0);
            const vec4 scaleWHWH = vec4(float(${ns}), float(${as}), float(${ns}), float(${as}));
            ${(0,Mr.unpackFromChannel)()}
            ${ls}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${us} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${Jr-1};
                bool hasNextCol = rc.z < ${_i-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${qr.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},zr),{output:{dims:Xr,type:Gr[0].type,textureType:Pr.TextureType.packed},hasMain:!0,shaderSource:xs})},Vr=(jr,Gr)=>{const Wr=jr[0].dims;let qr,Kr=Gr.scales;if(Kr.length===0){const Zr=jr[Gr.scalesInputIdx];if(Zr&&Zr.size!==0){if(jr[Gr.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");Kr=Nr(Zr,Gr.mode,Gr.isResize)}else{const Jr=jr[Gr.sizesInputIdx];if(!Jr||Jr.size===0)throw new Error("Either scales or sizes MUST be provided as input.");qr=Array.from(Jr.integerData),Kr=Dr(qr,Wr,Gr.mode,Gr.isResize)}}else if(jr[Gr.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const Xr=qr||Wr.map((Zr,Jr)=>Math.floor(Zr*Kr[Jr]));return[Kr,Xr]},Nr=(jr,Gr,Wr)=>{const qr=Array.from(jr.floatData);return(0,Fr.scalesValidation)(qr,Gr,Wr),qr},Dr=(jr,Gr,Wr,qr)=>{const Kr=Gr.length,Xr=new Array(Kr);for(let Zr=0,Jr=Kr;Zr<Jr;Zr++)if(Gr[Zr]===0){if(jr[Zr]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");Xr[Zr]=1}else Xr[Zr]=jr[Zr]/Gr[Zr];return(0,Fr.scalesValidation)(Xr,Wr,qr),Xr}},565:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.shape=void 0;const Ar=Rr(9240);Tr.shape=(Lr,Mr)=>(Pr(Mr),[new Ar.Tensor([Mr[0].dims.length],"int32",void 0,void 0,new Int32Array(Mr[0].dims))]);const Pr=Lr=>{if(!Lr||Lr.length!==1)throw new Error("Shape requires 1 input.")}},2444:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.sliceV10=Tr.parseSliceAttributes=Tr.slice=void 0;const Ar=Rr(4910),Pr=Rr(6145),Lr=Rr(7273),Mr=Rr(5639),Fr={name:"Slice",inputNames:["A"],inputTypes:[Mr.TextureType.unpacked]};Tr.slice=(Dr,jr,Gr)=>(Ur(jr),[Dr.run(Object.assign(Object.assign({},Fr),{cacheHint:Gr.cacheKey,get:()=>zr(Dr,jr[0],Gr)}),jr)]),Tr.parseSliceAttributes=Dr=>{const jr=Dr.attributes.getInts("starts"),Gr=Dr.attributes.getInts("ends"),Wr=Dr.attributes.getInts("axes",[]);return(0,Ar.createAttributeWithCacheKey)({starts:jr,ends:Gr,axes:Wr})};const zr=(Dr,jr,Gr)=>{const Wr=Gr.axes.length===0?jr.dims.slice(0).map((es,ts)=>ts):Gr.axes,qr=Lr.ShapeUtil.normalizeAxes(Wr,jr.dims.length),Kr=Gr.starts.map((es,ts)=>es>jr.dims[qr[ts]]-1?jr.dims[qr[ts]]:Lr.ShapeUtil.normalizeAxis(es,jr.dims[qr[ts]])),Xr=Gr.ends.map((es,ts)=>es>jr.dims[qr[ts]]-1?jr.dims[qr[ts]]:Lr.ShapeUtil.normalizeAxis(es,jr.dims[qr[ts]])),Zr=jr.dims.slice(),Jr=[];for(let es=0;es<qr.length;es++)Zr[qr[es]]=Xr[es]-Kr[es],Kr[es]>0&&Jr.push(`outputIdx[${qr[es]}] += ${Kr[es]};`);const _i=`
      float process(int outputIdx[${Zr.length}]) {
        ${Jr.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},Fr),{output:{dims:Zr,type:jr.type,textureType:Mr.TextureType.unpacked},shaderSource:_i})},Ur=Dr=>{if(!Dr||Dr.length!==1)throw new Error("Slice requires 1 input.");if(Pr.NUMBER_TYPES.indexOf(Dr[0].type)===-1)throw new Error("Invalid input type.")};Tr.sliceV10=(Dr,jr)=>{Nr(jr);const Gr=Vr(Dr,jr);return[Dr.run(Object.assign(Object.assign({},Fr),{cacheHint:Gr.cacheKey,get:()=>zr(Dr,jr[0],Gr)}),[jr[0]])]};const Vr=(Dr,jr)=>{if(!Dr.session.isInitializer(jr[1].dataId)||!Dr.session.isInitializer(jr[2].dataId)||jr.length>=4&&!Dr.session.isInitializer(jr[3].dataId)||jr.length>=5&&!Dr.session.isInitializer(jr[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(jr.length>=5&&jr[4].integerData.some(Kr=>Kr!==1))throw new Error("currently non-1 steps is not supported for Slice");const Gr=Array.from(jr[1].integerData),Wr=Array.from(jr[2].integerData),qr=jr.length>=4?Array.from(jr[3].integerData):[];return{starts:Gr,ends:Wr,axes:qr,cacheKey:`${qr};${Gr};${Wr}`}},Nr=Dr=>{if(!Dr||Dr.length<3||Dr.length>5)throw new Error("Invalid input number.");if(Dr[1].type!=="int32"||Dr[1].dims.length!==1)throw new Error("Invalid input type.");if(Dr[2].type!=="int32"||Dr[2].dims.length!==1)throw new Error("Invalid input type.");if(Dr.length>=4&&(Dr[3].type!=="int32"||Dr[3].dims.length!==1))throw new Error("Invalid input type.");if(Dr.length>=5&&(Dr[4].type!=="int32"||Dr[4].dims.length!==1))throw new Error("Invalid input type.")}},815:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.softmaxV13=Tr.parseSoftmaxAttributesV13=Tr.parseSoftmaxAttributes=Tr.softmax=void 0;const Ar=Rr(4910),Pr=Rr(7273),Lr=Rr(6757),Mr=Rr(5639),Fr=Rr(5707),zr={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[Mr.TextureType.unpacked]},Ur={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[Mr.TextureType.unpacked,Mr.TextureType.unpacked]},Vr={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[Mr.TextureType.unpacked,Mr.TextureType.unpacked,Mr.TextureType.unpacked]};Tr.softmax=(qr,Kr,Xr)=>{Wr(Kr);const Zr=Kr[0].dims.slice(),Jr=Pr.ShapeUtil.normalizeAxis(Xr.axis,Zr.length),_i=Pr.ShapeUtil.sizeToDimension(Zr,Jr),es=Pr.ShapeUtil.sizeFromDimension(Zr,Jr);return Nr(qr,Kr,Xr,_i,es)},Tr.parseSoftmaxAttributes=qr=>(0,Ar.createAttributeWithCacheKey)({axis:qr.attributes.getInt("axis",1)}),Tr.parseSoftmaxAttributesV13=qr=>(0,Ar.createAttributeWithCacheKey)({axis:qr.attributes.getInt("axis",-1)}),Tr.softmaxV13=(qr,Kr,Xr)=>{Wr(Kr);const Zr=Kr[0].dims.slice(),Jr=Pr.ShapeUtil.normalizeAxis(Xr.axis,Zr.length),_i=Zr.length,es=Jr!==_i-1,ts=[];let rs,ns=[],as=[];es&&(ns=Array.from({length:_i}).map((Ts,vs)=>vs),ns[Jr]=_i-1,ns[_i-1]=Jr,ns.map(Ts=>ts.push(Zr[Ts])),rs=(0,Ar.createAttributeWithCacheKey)({perm:ns}),as=(0,Fr.transpose)(qr,Kr,rs));const ls=es?Pr.ShapeUtil.sizeToDimension(ts,_i-1):Pr.ShapeUtil.sizeToDimension(Zr,_i-1),us=es?Pr.ShapeUtil.sizeFromDimension(ts,_i-1):Pr.ShapeUtil.sizeFromDimension(Zr,_i-1),xs=Nr(qr,es?as:Kr,Xr,ls,us);return es?(0,Fr.transpose)(qr,xs,rs):xs};const Nr=(qr,Kr,Xr,Zr,Jr)=>{const _i=Dr(qr,Kr[0],Zr,Jr,[Zr]),es=qr.run(Object.assign(Object.assign({},zr),{cacheHint:Xr.cacheKey,get:()=>_i}),Kr),ts=jr(qr,Kr[0],Zr,Jr,_i.output.dims,[Zr]),rs=qr.run(Object.assign(Object.assign({},Ur),{cacheHint:Xr.cacheKey,get:()=>ts}),[Kr[0],es]),ns=Gr(qr,Kr[0],Zr,Jr,_i.output.dims,ts.output.dims);return[qr.run(Object.assign(Object.assign({},Vr),{cacheHint:Xr.cacheKey,get:()=>ns}),[Kr[0],es,rs])]},Dr=(qr,Kr,Xr,Zr,Jr)=>{const[_i,es]=qr.calculateTextureWidthAndHeight(Kr.dims,Mr.TextureType.unpacked),ts=Jr.length;if(Xr<1||Zr<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(Jr.length!==1)throw new Error("Dimensionality of the output should be 1");if(Jr[0]!==Xr)throw new Error("Shape of the output should be equal to logical row count");const rs=(0,Lr.getGlsl)(qr.session.backend.glContext.version),ns=`
      float process(int[${ts}] indices) {
        int logical_row_start_offset = indices[0] * ${Zr};

        float max = getColorAsFloat(${rs.texture2D}(A, offsetToCoords(logical_row_start_offset, ${_i},
        ${es} )));
        for(int i=1; i<${Zr}; ++i)
        {
          float current = getColorAsFloat(${rs.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${_i}, ${es})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},zr),{output:{dims:Jr,type:Kr.type,textureType:Mr.TextureType.unpacked},shaderSource:ns})},jr=(qr,Kr,Xr,Zr,Jr,_i)=>{const[es,ts]=qr.calculateTextureWidthAndHeight(Kr.dims,Mr.TextureType.unpacked),rs=_i.length;if(Xr<1||Zr<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(_i.length!==1)throw new Error("Dimensionality of the output should be 1");if(_i[0]!==Xr)throw new Error("Shape of the output should be equal to logical row count");if(Jr.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(Jr[0]!==Xr)throw new Error("Shape of the intermediate results should be equal to logical row count");const ns=`
      float process(int[${rs}] indices) {
        int logical_row_start_offset = indices[0] * ${Zr};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${Zr}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,Lr.getGlsl)(qr.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${es}, ${ts}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},Ur),{output:{dims:_i,type:Kr.type,textureType:Mr.TextureType.unpacked},shaderSource:ns})},Gr=(qr,Kr,Xr,Zr,Jr,_i)=>{const[es,ts]=qr.calculateTextureWidthAndHeight(Kr.dims,Mr.TextureType.unpacked),rs=Kr.dims.length;if(Xr<1||Zr<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(Jr.length!==1||_i.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(Jr[0]!==Xr||_i[0]!==Xr)throw new Error("Shape of the intermediate results should be equal to logical row count");const ns=`
      float process(int[${rs}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${es}, ${ts});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${Zr};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},Vr),{output:{dims:Kr.dims,type:Kr.type,textureType:Mr.TextureType.unpacked},shaderSource:ns})},Wr=qr=>{if(!qr||qr.length!==1)throw new Error("Softmax requires 1 input.");if(qr[0].type!=="float32"&&qr[0].type!=="float64")throw new Error("Invalid input type")}},564:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseSplitAttributes=Tr.split=void 0;const Ar=Rr(4910),Pr=Rr(7273),Lr=Rr(5639),Mr={name:"Split",inputNames:["A"],inputTypes:[Lr.TextureType.unpacked]};Tr.split=(Vr,Nr,Dr)=>{Ur(Nr);const jr=Pr.ShapeUtil.normalizeAxis(Dr.axis,Nr[0].dims.length),Gr=Fr(Vr,Nr,jr,Dr),Wr=[];for(let qr=0;qr<Gr;++qr)Wr.push(Vr.run(Object.assign(Object.assign({},Mr),{cacheHint:`${Dr.cacheKey};${qr}`,get:()=>zr(Vr,Nr[0],Dr,jr,qr)}),Nr));return Wr},Tr.parseSplitAttributes=Vr=>{const Nr=Vr.attributes.getInt("axis",0),Dr=Vr.attributes.getInts("split",[]),jr=Vr.outputs.length;return(0,Ar.createAttributeWithCacheKey)({axis:Nr,split:Dr,numOutputs:jr})};const Fr=(Vr,Nr,Dr,jr)=>{const[,Gr]=Pr.SplitUtil.splitShape(Nr[0].dims,Dr,jr.split,jr.numOutputs);return Gr.length},zr=(Vr,Nr,Dr,jr,Gr)=>{const[Wr,qr]=Pr.SplitUtil.splitShape(Nr.dims,jr,Dr.split,Dr.numOutputs),Kr=qr[Gr],Xr=Wr[Gr],Zr=`
      float process(int indices[${Xr.length}]) {
        indices[${jr}] += ${Kr};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},Mr),{cacheHint:`${Dr.cacheKey}:${Gr}`,output:{dims:Xr,type:Nr.type,textureType:Lr.TextureType.unpacked},shaderSource:Zr})},Ur=Vr=>{if(!Vr||Vr.length!==1)throw new Error("Split requires one input.");if(Vr[0].type!=="int8"&&Vr[0].type!=="uint8"&&Vr[0].type!=="int16"&&Vr[0].type!=="uint16"&&Vr[0].type!=="int32"&&Vr[0].type!=="uint32"&&Vr[0].type!=="float32"&&Vr[0].type!=="float64"&&Vr[0].type!=="bool")throw new Error("Invalid input type.")}},5416:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseSqueezeAttributes=Tr.squeezeV13=Tr.squeeze=void 0;const Ar=Rr(7273);Tr.squeeze=(Mr,Fr,zr)=>{Pr(Fr);const Ur=Ar.ShapeUtil.squeezeShape(Fr[0].dims,zr);return[Mr.reshapeUnpacked(Fr[0],Ur)]},Tr.squeezeV13=(Mr,Fr)=>(Lr(Fr),(0,Tr.squeeze)(Mr,[Fr[0]],Array.from(Fr[1].integerData))),Tr.parseSqueezeAttributes=Mr=>Mr.attributes.getInts("axes");const Pr=Mr=>{if(!Mr||Mr.length!==1)throw new Error("Squeeze requires 1 input.");if(Mr[0].type==="string")throw new Error("invalid input tensor types.")},Lr=Mr=>{if(!Mr||Mr.length!==2)throw new Error("Squeeze requires 2 inputs.");if(Mr[1].type!=="int32")throw new Error("Invalid input type.")}},1240:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.sum=void 0;const Ar=Rr(6757),Pr=Rr(5639);Tr.sum=(Fr,zr)=>{Mr(zr);const Ur={name:"Sum",inputNames:zr.map((Vr,Nr)=>`X${Nr}`),inputTypes:new Array(zr.length).fill(Pr.TextureType.unpacked)};return[Fr.run(Object.assign(Object.assign({},Ur),{get:()=>Lr(Fr,zr,Ur)}),zr)]};const Lr=(Fr,zr,Ur)=>{const Vr=(0,Ar.getGlsl)(Fr.session.backend.glContext.version),Nr=zr[0].dims.slice(),Dr=`
      void main() {
        vec4 result = ${zr.map((jr,Gr)=>`${Vr.texture2D}(X${Gr},TexCoords)`).join(" + ")};
        ${Vr.output} = result;
      }
    `;return Object.assign(Object.assign({},Ur),{output:{dims:Nr,type:zr[0].type,textureType:Pr.TextureType.unpacked},hasMain:!0,shaderSource:Dr})},Mr=Fr=>{if(!Fr||Fr.length===0)throw new Error("Sum requires inputs.");const zr=Fr[0].dims.length;for(let Ur=1;Ur<Fr.length;Ur++){if(zr!==Fr[Ur].dims.length)throw new Error("Input shapes are mismatched.");for(let Vr=0;Vr<zr;Vr++)if(Fr[0].dims[Vr]!==Fr[Ur].dims[Vr])throw new Error("Input shapes are not matched.")}if(Fr[0].type!=="float32"&&Fr[0].type!=="float64")throw new Error("Invalid input type.");for(let Ur=1;Ur<Fr.length;Ur++)if(Fr[0].type!==Fr[Ur].type)throw new Error("Input types are not matched.")}},5944:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.tile=void 0;const Ar=Rr(6145),Pr=Rr(5639);Tr.tile=(Fr,zr)=>{Mr(zr);const Ur={name:"Tile",inputNames:["A"],inputTypes:[Pr.TextureType.unpacked]};return[Fr.run(Object.assign(Object.assign({},Ur),{get:()=>Lr(Fr,zr,Ur)}),zr)]};const Lr=(Fr,zr,Ur)=>{const Vr=zr[0].dims.slice(),Nr=new Array(Vr.length),Dr=[];for(let Wr=0;Wr<Vr.length;Wr++)Nr[Wr]=Vr[Wr]*zr[1].numberData[Wr],Dr.push(`inputIdx[${Wr}] = int(mod(float(outputIdx[${Wr}]), ${Vr[Wr]}.));`);const jr=Nr.length,Gr=`
      float process(int outputIdx[${jr}]) {
        int inputIdx[${jr}];
        ${Dr.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},Ur),{output:{dims:Nr,type:zr[0].type,textureType:Pr.TextureType.unpacked},shaderSource:Gr})},Mr=Fr=>{if(!Fr||Fr.length!==2)throw new Error("Tile requires 2 input.");if(Fr[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(Fr[1].dims[0]!==Fr[0].dims.length)throw new Error("Invalid input shape.");if(Ar.NUMBER_TYPES.indexOf(Fr[0].type)===-1)throw new Error("Invalid input type.");if(Fr[1].type!=="int32"&&Fr[1].type!=="int16")throw new Error("Invalid repeat type.")}},5707:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseTransposeAttributes=Tr.transpose=void 0;const Ar=Rr(4910),Pr=Rr(7273),Lr=Rr(5639),Mr={name:"Transpose",inputNames:["A"],inputTypes:[Lr.TextureType.unpacked]};Tr.transpose=(Dr,jr,Gr)=>(Nr(jr),[Dr.run(Object.assign(Object.assign({},Mr),{cacheHint:Gr.cacheKey,get:()=>Fr(Dr,jr[0],Gr.perm)}),jr)]),Tr.parseTransposeAttributes=Dr=>(0,Ar.createAttributeWithCacheKey)({perm:Dr.attributes.getInts("perm",[])});const Fr=(Dr,jr,Gr)=>{const Wr=jr.dims;Gr=zr(Wr,Gr);const qr=Ur(Wr,Gr),Kr=Wr.length,Xr=`
      ${Vr("perm",Gr,Kr)}
      float process(int indices[${Kr}]) {
        int a[${Kr}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},Mr),{output:{dims:qr,type:jr.type,textureType:Lr.TextureType.unpacked},shaderSource:Xr})},zr=(Dr,jr)=>(jr&&jr.length!==Dr.length&&(jr=[...Dr.keys()].reverse()),jr),Ur=(Dr,jr)=>(jr=zr(Dr,jr),Pr.ShapeUtil.sortBasedOnPerm(Dr,jr)),Vr=(Dr,jr,Gr)=>{const Wr=[];Wr.push(`void ${Dr}(out int a[${Gr}], int src[${Gr}]) {`);for(let qr=0;qr<Gr;++qr)Wr.push(`	a[${jr[qr]}]=src[${qr}];`);return Wr.push("	}"),Wr.join(`
`)},Nr=Dr=>{if(!Dr||Dr.length!==1)throw new Error("Transpose requires 1 input.");if(Dr[0].type!=="float32"&&Dr[0].type!=="float64")throw new Error("input should be float tensor")}},2488:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.encodeAsUint8=void 0;const Ar=Rr(6757),Pr=Rr(5639);Tr.encodeAsUint8=(Lr,Mr)=>{const Fr=Mr.shape,zr=(0,Ar.getGlsl)(Lr.session.backend.glContext.version),Ur=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${zr.texture2D}(X,TexCoords).r;
      ${zr.output} = encodeAsUint8(value);
    }`,Vr={name:"Uint8Encode",inputTypes:[Pr.TextureType.unpacked],inputNames:["X"],output:{dims:Fr,type:Mr.tensor.type,textureType:Pr.TextureType.downloadUint8AsFloat},shaderSource:Ur,hasMain:!0};return Lr.executeProgram(Vr,[Mr.tensor])}},9087:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.tanh=Tr.tan=Tr.sqrt=Tr.sin=Tr.sigmoid=Tr.relu=Tr.not=Tr.neg=Tr.log=Tr.parseLeakyReluAttributes=Tr.leakyRelu=Tr.identity=Tr.floor=Tr.exp=Tr.parseEluAttributes=Tr.elu=Tr.cos=Tr.ceil=Tr.clipV11=Tr.parseClipAttributes=Tr.clip=Tr.atan=Tr.asin=Tr.acos=Tr.abs=Tr.glslTanh=Tr.glslTan=Tr.glslSqrt=Tr.glslSigmoid=Tr.glslRelu=Tr.glslSin=Tr.glslNot=Tr.glslNeg=Tr.glslLog=Tr.glslLeakyRelu=Tr.glslIdentity=Tr.glslClip=Tr.glslFloor=Tr.glslExp=Tr.glslElu=Tr.glslCos=Tr.glslCeil=Tr.glslAtan=Tr.glslAsin=Tr.glslAcos=Tr.glslAbs=void 0;const Ar=Rr(4910),Pr=Rr(7273),Lr=Rr(1997),Mr=Rr(6757),Fr=Rr(5639);function zr(){return xs("abs")}function Ur(){return xs("acos")}function Vr(){return xs("asin")}function Nr(){return xs("atan")}function Dr(){return xs("ceil")}function jr(){return xs("cos")}function Gr(gs){const fs="elu";return{body:`
  const float alpha = float(${gs});

  float ${fs}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${fs}_(vec4 v) {
    return vec4(${fs}_(v.x), ${fs}_(v.y), ${fs}_(v.z), ${fs}_(v.w));
  }
  `,name:fs,type:Lr.FunctionType.ValueBased}}function Wr(){return xs("exp")}function qr(){return xs("floor")}function Kr(gs,fs){const ys="clip";return{body:`
  const float min = float(${gs});
  const float max = float(${fs});

  float ${ys}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${ys}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:ys,type:Lr.FunctionType.ValueBased}}function Xr(){const gs="indentity";return{body:`
  float ${gs}_(float a) {
    return a;
  }
  vec4 ${gs}_(vec4 v) {
    return v;
  }
  `,name:gs,type:Lr.FunctionType.ValueBased}}function Zr(gs){const fs="leakyRelu";return{body:`
  const float alpha = float(${gs});

  float ${fs}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${fs}_(vec4 v) {
    return vec4(${fs}_(v.x), ${fs}_(v.y), ${fs}_(v.z), ${fs}_(v.w));
  }
  `,name:fs,type:Lr.FunctionType.ValueBased}}function Jr(){return xs("log")}function _i(){const gs="neg";return{body:`
  float ${gs}_(float a) {
    return -a;
  }
  vec4 ${gs}_(vec4 v) {
    return -v;
  }
  `,name:gs,type:Lr.FunctionType.ValueBased}}function es(){const gs="not";return{body:`
  float ${gs}_(float a) {
    return float( ! bool(a) );
  }
  bool ${gs}_(bool a) {
    return !a;
  }
  vec4 ${gs}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${gs}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:gs,type:Lr.FunctionType.ValueBased}}function ts(){return xs("sin")}function rs(){const gs="relu";return{body:`
  float ${gs}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${gs}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:gs,type:Lr.FunctionType.ValueBased}}function ns(){const gs="sigmoid";return{body:`
  float ${gs}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${gs}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:gs,type:Lr.FunctionType.ValueBased}}function as(){return xs("sqrt")}function ls(){return xs("tan")}function us(){const gs="tanh";return{body:`
  float ${gs}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${gs}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:gs,type:Lr.FunctionType.ValueBased}}function xs(gs){return{body:`
  float ${gs}_(float a) {
    return ${gs}(a);
  }
  vec4 ${gs}_(vec4 v) {
    return ${gs}(v);
  }
  `,name:gs,type:Lr.FunctionType.ValueBased}}Tr.glslAbs=zr,Tr.glslAcos=Ur,Tr.glslAsin=Vr,Tr.glslAtan=Nr,Tr.glslCeil=Dr,Tr.glslCos=jr,Tr.glslElu=Gr,Tr.glslExp=Wr,Tr.glslFloor=qr,Tr.glslClip=Kr,Tr.glslIdentity=Xr,Tr.glslLeakyRelu=Zr,Tr.glslLog=Jr,Tr.glslNeg=_i,Tr.glslNot=es,Tr.glslSin=ts,Tr.glslRelu=rs,Tr.glslSigmoid=ns,Tr.glslSqrt=as,Tr.glslTan=ls,Tr.glslTanh=us;const Ts=(gs,fs,ys,ks)=>{const Fs=gs.session.pack?Fr.TextureType.packed:Fr.TextureType.unpacked,Us={name:ys.name,inputTypes:[Fs],inputNames:["A"],cacheHint:ks};return Object.assign(Object.assign({},Us),{get:()=>((Vs,ao,qs,Qs)=>{const mo=Vs.session.pack?Fr.TextureType.packed:Fr.TextureType.unpacked,Xs=(0,Mr.getGlsl)(Vs.session.backend.glContext.version);return Object.assign(Object.assign({},ao),{output:{dims:qs.dims,type:qs.type,textureType:mo},shaderSource:`
     ${Qs.body}
     void main() {
       vec4 v = ${Xs.texture2D}(A, TexCoords);
       v = ${Qs.name}_(v);
       ${Xs.output} = v;
     }
     `,hasMain:!0})})(gs,Us,fs,ys)})};Tr.abs=(gs,fs)=>[gs.run(Ts(gs,fs[0],zr()),fs)],Tr.acos=(gs,fs)=>[gs.run(Ts(gs,fs[0],Ur()),fs)],Tr.asin=(gs,fs)=>[gs.run(Ts(gs,fs[0],Vr()),fs)],Tr.atan=(gs,fs)=>[gs.run(Ts(gs,fs[0],Nr()),fs)],Tr.clip=(gs,fs,ys)=>[gs.run(Ts(gs,fs[0],Kr(ys.min,ys.max),ys.cacheKey),fs)],Tr.parseClipAttributes=gs=>(0,Ar.createAttributeWithCacheKey)({min:gs.attributes.getFloat("min",Pr.MIN_CLIP),max:gs.attributes.getFloat("max",Pr.MAX_CLIP)}),Tr.clipV11=(gs,fs)=>{const ys=vs(gs,fs);return(0,Tr.clip)(gs,[fs[0]],ys)};const vs=(gs,fs)=>{if(fs.length>=3&&(!gs.session.isInitializer(fs[1].dataId)||!gs.session.isInitializer(fs[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const ys=fs.length>=3?fs[1].numberData[0]:Pr.MIN_CLIP,ks=fs.length>=3?fs[2].numberData[0]:Pr.MAX_CLIP;return(0,Ar.createAttributeWithCacheKey)({min:ys,max:ks})};Tr.ceil=(gs,fs)=>[gs.run(Ts(gs,fs[0],Dr()),fs)],Tr.cos=(gs,fs)=>[gs.run(Ts(gs,fs[0],jr()),fs)],Tr.elu=(gs,fs,ys)=>[gs.run(Ts(gs,fs[0],Gr(ys.alpha),ys.cacheKey),fs)],Tr.parseEluAttributes=gs=>(0,Ar.createAttributeWithCacheKey)({alpha:gs.attributes.getFloat("alpha",1)}),Tr.exp=(gs,fs)=>[gs.run(Ts(gs,fs[0],Wr()),fs)],Tr.floor=(gs,fs)=>[gs.run(Ts(gs,fs[0],qr()),fs)],Tr.identity=(gs,fs)=>[gs.run(Ts(gs,fs[0],Xr()),fs)],Tr.leakyRelu=(gs,fs,ys)=>[gs.run(Ts(gs,fs[0],Zr(ys.alpha),ys.cacheKey),fs)],Tr.parseLeakyReluAttributes=gs=>(0,Ar.createAttributeWithCacheKey)({alpha:gs.attributes.getFloat("alpha",.01)}),Tr.log=(gs,fs)=>[gs.run(Ts(gs,fs[0],Jr()),fs)],Tr.neg=(gs,fs)=>[gs.run(Ts(gs,fs[0],_i()),fs)],Tr.not=(gs,fs)=>[gs.run(Ts(gs,fs[0],es()),fs)],Tr.relu=(gs,fs)=>[gs.run(Ts(gs,fs[0],rs()),fs)],Tr.sigmoid=(gs,fs)=>[gs.run(Ts(gs,fs[0],ns()),fs)],Tr.sin=(gs,fs)=>[gs.run(Ts(gs,fs[0],ts()),fs)],Tr.sqrt=(gs,fs)=>[gs.run(Ts(gs,fs[0],as()),fs)],Tr.tan=(gs,fs)=>[gs.run(Ts(gs,fs[0],ls()),fs)],Tr.tanh=(gs,fs)=>[gs.run(Ts(gs,fs[0],us()),fs)]},540:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createUnpackProgramInfoLoader=Tr.createUnpackProgramInfo=void 0;const Ar=Rr(6757),Pr=Rr(5639),Lr=Rr(432),Mr=Rr(5614),Fr={name:"unpack",inputNames:["A"],inputTypes:[Pr.TextureType.packed]};Tr.createUnpackProgramInfo=(zr,Ur)=>{const Vr=Ur.dims.length,Nr=(0,Mr.getChannels)("rc",Vr),Dr=Nr.slice(-2),jr=(0,Lr.getCoordsDataType)(Vr),Gr=(0,Mr.unpackFromChannel)(),Wr=Ur.dims.length===0?"":function(Xr,Zr){if(Xr===1)return"rc";let Jr="";for(let _i=0;_i<Xr;_i++)Jr+=Zr[_i],_i<Xr-1&&(Jr+=",");return Jr}(Vr,Nr),qr=Vr<=1?"rc":`vec2(${Dr.join(",")})`,Kr=`
    ${Gr}
    void main() {
      ${jr} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${Wr});

       ${(0,Ar.getGlsl)(zr.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${qr}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},Fr),{hasMain:!0,output:{dims:Ur.dims,type:Ur.type,textureType:Pr.TextureType.unpacked},shaderSource:Kr})},Tr.createUnpackProgramInfoLoader=(zr,Ur)=>Object.assign(Object.assign({},Fr),{get:()=>(0,Tr.createUnpackProgramInfo)(zr,Ur)})},7862:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseUnsqueezeAttributes=Tr.unsqueezeV13=Tr.unsqueeze=void 0;const Ar=Rr(7273);Tr.unsqueeze=(Mr,Fr,zr)=>{Pr(Fr);const Ur=Ar.ShapeUtil.unsqueezeShape(Fr[0].dims,zr);return[Mr.reshapeUnpacked(Fr[0],Ur)]},Tr.unsqueezeV13=(Mr,Fr)=>(Lr(Fr),(0,Tr.unsqueeze)(Mr,[Fr[0]],Array.from(Fr[1].integerData))),Tr.parseUnsqueezeAttributes=Mr=>Mr.attributes.getInts("axes");const Pr=Mr=>{if(!Mr||Mr.length!==1)throw new Error("Unsqueeze requires 1 input.");if(Mr[0].type==="string")throw new Error("invalid input tensor types.")},Lr=Mr=>{if(!Mr||Mr.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(Mr[1].type!=="int32")throw new Error("Invalid input type.")}},3980:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.scalesValidation=Tr.validateInputs=Tr.parseUpsampleAttributes=Tr.parseUpsampleAttributesV9=Tr.parseUpsampleAttributesV7=Tr.upsample=void 0;const Ar=Rr(4910),Pr=Rr(6757),Lr=Rr(5639),Mr={name:"Upsample",inputNames:["X"],inputTypes:[Lr.TextureType.unpacked]};Tr.upsample=(zr,Ur,Vr)=>((0,Tr.validateInputs)(Ur,Vr),[zr.run(Object.assign(Object.assign({},Mr),{cacheHint:Vr.cacheKey,get:()=>Fr(zr,Ur,Vr)}),Ur)]),Tr.parseUpsampleAttributesV7=zr=>(0,Tr.parseUpsampleAttributes)(zr,7),Tr.parseUpsampleAttributesV9=zr=>(0,Tr.parseUpsampleAttributes)(zr,9),Tr.parseUpsampleAttributes=(zr,Ur)=>{const Vr=Ur>=10,Nr=zr.attributes.getString("mode","nearest");if(Nr!=="nearest"&&Nr!=="linear"&&(Ur<11||Nr!=="cubic"))throw new Error(`unrecognized mode: ${Nr}`);let Dr=[];Ur<9&&(Dr=zr.attributes.getFloats("scales"),(0,Tr.scalesValidation)(Dr,Nr,Vr));const jr=zr.attributes.getFloat("extrapolation_value",0),Gr=Ur>10?zr.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(Gr)===-1)throw new Error(`coordinate_transform_mode '${Gr}' is not supported`);const Wr=Gr==="tf_crop_and_resize",qr=Wr,Kr=Nr==="nearest"&&Ur>=11?zr.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(Kr)===-1)throw new Error(`nearest_mode '${Kr}' is not supported`);const Xr=zr.attributes.getFloat("cubic_coeff_a",-.75),Zr=zr.attributes.getInt("exclude_outside",0)!==0;if(Zr&&Nr!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const Jr=Ur<11||Nr==="nearest"&&Gr==="asymmetric"&&Kr==="floor";let _i=0,es=0,ts=0;return Ur>10?zr.inputs.length>2?(_i=1,es=2,ts=3):(es=1,ts=2):Ur===9&&(es=1),(0,Ar.createAttributeWithCacheKey)({opset:Ur,isResize:Vr,mode:Nr,scales:Dr,extrapolationValue:jr,coordinateTransformMode:Gr,useExtrapolation:qr,needRoiInput:Wr,nearestMode:Kr,cubicCoefficientA:Xr,excludeOutside:Zr,useNearest2xOptimization:Jr,roiInputIdx:_i,scalesInputIdx:es,sizesInputIdx:ts})};const Fr=(zr,Ur,Vr)=>{const Nr=(0,Pr.getGlsl)(zr.session.backend.glContext.version),[Dr,jr]=zr.calculateTextureWidthAndHeight(Ur[0].dims,Lr.TextureType.unpacked),Gr=Ur[0].dims.map((ts,rs)=>Math.floor(ts*Vr.scales[rs])),[Wr,qr]=zr.calculateTextureWidthAndHeight(Gr,Lr.TextureType.unpacked),Kr=Gr.length,Xr=new Array(Kr),Zr=new Array(Kr);let Jr=`
      int output_pitches[${Kr}];
      int input_pitches[${Kr}];
      `;for(let ts=Kr-1;ts>=0;ts--)Xr[ts]=ts===Kr-1?1:Xr[ts+1]*Gr[ts+1],Zr[ts]=ts===Kr-1?1:Zr[ts+1]*Ur[0].dims[ts+1],Jr+=`
        output_pitches[${ts}] = ${Xr[ts]};
        input_pitches[${ts}] = ${Zr[ts]};
        `;const _i=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${Dr}, ${jr});
        float value = getColorAsFloat(${Nr.texture2D}(X, coords));
        return value;
      }
      `,es=Vr.mode==="nearest"?`
    ${_i}
    float process(int indices[${Kr}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${Wr}, ${qr});

      ${Jr}

      int d, m;
      for (int dim = 0; dim < ${Kr}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:Kr===4?`
    ${_i}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${Wr}, ${qr});

      ${Jr}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${Ur[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${_i}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${Wr}, ${qr});

      ${Jr}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${Ur[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},Mr),{output:{dims:Gr,type:Ur[0].type,textureType:Lr.TextureType.unpacked},shaderSource:es,variables:[{name:"scales",type:"int",arrayLength:Vr.scales.length,data:Vr.scales.map(ts=>Math.ceil(ts))}]})};Tr.validateInputs=(zr,Ur)=>{if(!zr||Ur.opset<9&&zr.length!==1||Ur.opset>=9&&Ur.opset<11&&zr.length!==2||Ur.opset>=11&&zr.length<2)throw new Error("invalid inputs.");if(Ur.scales.length>0&&zr[0].dims.length!==Ur.scales.length)throw new Error("Invalid input shape.");if(zr[0].type==="string")throw new Error("Invalid input tensor types.")},Tr.scalesValidation=(zr,Ur,Vr)=>{if(Vr){for(const Nr of zr)if(Nr<=0)throw new Error("Scale value should be greater than 0.")}else for(const Nr of zr)if(Nr<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(Ur!=="linear"&&Ur!=="cubic"||zr.length===2||zr.length===4&&zr[0]===1&&zr[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${Vr?"Resize":"Upsample"} opeartor.`)}},2757:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.ProgramManager=void 0;const Ar=Rr(8453),Pr=Rr(1315),Lr=Rr(8897),Mr=Rr(6757);Tr.ProgramManager=class{constructor(Fr,zr,Ur){this.profiler=Fr,this.glContext=zr,this.textureLayoutStrategy=Ur,this.repo=new Map,this.attributesBound=!1}getArtifact(Fr){return this.repo.get(Fr)}setArtifact(Fr,zr){this.repo.set(Fr,zr)}run(Fr,zr,Ur){var Vr;this.profiler.event("op",`ProgramManager.run ${(Vr=Fr.programInfo.name)!==null&&Vr!==void 0?Vr:"unknown kernel"}`,()=>{var Nr;const Dr=this.glContext.gl,jr=Fr.program;Dr.useProgram(jr);try{this.bindOutput(Ur),this.attributesBound||this.bindAttributes(Fr.attribLocations),this.bindUniforms(Fr.uniformLocations,(Nr=Fr.programInfo.variables)!==null&&Nr!==void 0?Nr:[],zr)}catch(Gr){throw Pr.Logger.error("ProgramManager",Fr.programInfo.shaderSource),Gr}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(Fr=>this.glContext.deleteProgram(Fr.program))}build(Fr,zr,Ur){return this.profiler.event("backend","ProgramManager.build",()=>{const Vr=new Lr.GlslPreprocessor(this.glContext,Fr,zr,Ur),Nr=Vr.preprocess(),Dr=this.compile(Nr);return{programInfo:Fr,program:Dr,uniformLocations:this.getUniformLocations(Dr,Vr.context.programInfo.inputNames,Vr.context.programInfo.variables),attribLocations:this.getAttribLocations(Dr)}})}compile(Fr){if(!this.vertexShader){Pr.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const Vr=(0,Mr.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(Vr,this.glContext.gl.VERTEX_SHADER)}Ar.env.debug&&Pr.Logger.verbose("ProrgramManager",`FragShader:
${Fr}
`);const zr=this.glContext.compileShader(Fr,this.glContext.gl.FRAGMENT_SHADER),Ur=this.glContext.createProgram(this.vertexShader,zr);return this.glContext.deleteShader(zr),Ur}bindOutput(Fr){const zr=Fr.width,Ur=Fr.height;Pr.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${zr}/${Ur}, shape=${Fr.shape}, type=${Fr.tensor.type}`),this.glContext.attachFramebuffer(Fr.texture,zr,Ur)}bindAttributes(Fr){const zr=Fr.position,Ur=Fr.textureCoord;this.glContext.setVertexAttributes(zr,Ur),this.attributesBound=!0}bindUniforms(Fr,zr,Ur){var Vr;const Nr=this.glContext.gl;let Dr=0;for(const{name:jr,type:Gr,location:Wr,arrayLength:qr}of Fr){const Kr=(Vr=zr.find(Xr=>Xr.name===jr))===null||Vr===void 0?void 0:Vr.data;if(Gr!=="sampler2D"&&!Kr)throw new Error(`variable '${jr}' does not have data defined in program info`);switch(Gr){case"sampler2D":this.bindTexture(Ur[Dr],Wr,Dr),Dr++;break;case"float":qr?Nr.uniform1fv(Wr,Kr):Nr.uniform1f(Wr,Kr);break;case"int":qr?Nr.uniform1iv(Wr,Kr):Nr.uniform1i(Wr,Kr);break;default:throw new Error(`Uniform not implemented: ${Gr}`)}}}bindTexture(Fr,zr,Ur){this.glContext.bindTextureToUniform(Fr.texture,Ur,zr)}getAttribLocations(Fr){return{position:this.getAttribLocation(Fr,"position"),textureCoord:this.getAttribLocation(Fr,"textureCoord")}}getUniformLocations(Fr,zr,Ur){const Vr=[];if(zr)for(const Nr of zr)Vr.push({name:Nr,type:"sampler2D",location:this.getUniformLocation(Fr,Nr)});if(Ur)for(const Nr of Ur)Vr.push(Object.assign(Object.assign({},Nr),{location:this.getUniformLocation(Fr,Nr.name)}));return Vr}getUniformLocation(Fr,zr){const Ur=this.glContext.gl.getUniformLocation(Fr,zr);if(Ur===null)throw new Error(`Uniform ${zr} not found.`);return Ur}getAttribLocation(Fr,zr){return this.glContext.gl.getAttribLocation(Fr,zr)}}},2171:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.WebGLSessionHandler=void 0;const Ar=Rr(1315),Pr=Rr(5881),Lr=Rr(7860),Mr=Rr(4110),Fr=Rr(2757),zr=Rr(7618),Ur=Rr(5243);Tr.WebGLSessionHandler=class{constructor(Vr,Nr){this.backend=Vr,this.context=Nr,this.layoutStrategy=new zr.PreferLogicalStrategy(Vr.glContext.maxTextureSize),this.programManager=new Fr.ProgramManager(this.context.profiler,Vr.glContext,this.layoutStrategy),this.textureManager=new Ur.TextureManager(Vr.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:Vr.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=Vr.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Lr.WebGLInferenceHandler(this)}onGraphInitialized(Vr){const Nr=Vr.getValues().filter(Dr=>Dr.from===-1&&Dr.tensor).map(Dr=>Dr.tensor.dataId);this.initializers=new Set(Nr)}isInitializer(Vr){return!!this.initializers&&this.initializers.has(Vr)}addInitializer(Vr){this.initializers.add(Vr)}getTextureData(Vr,Nr){return Nr?this.packedTextureDataCache.get(Vr):this.unpackedTextureDataCache.get(Vr)}setTextureData(Vr,Nr,Dr=!1){Ar.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),Dr?this.packedTextureDataCache.set(Vr,Nr):this.unpackedTextureDataCache.set(Vr,Nr)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(Vr=>this.textureManager.releaseTexture(Vr,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(Vr=>this.textureManager.releaseTexture(Vr,!0)),this.unpackedTextureDataCache=new Map}resolve(Vr,Nr,Dr){const jr=(0,Pr.resolveOperator)(Vr,Nr,Mr.WEBGL_OP_RESOLVE_RULES);return{impl:jr.opImpl,context:jr.opInit?jr.opInit(Vr,Dr):Vr}}}},9622:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.Uint8DataEncoder=Tr.RGBAFloatDataEncoder=Tr.RedFloat32DataEncoder=void 0;const Ar=Rr(1315);Tr.RedFloat32DataEncoder=class{constructor(Pr,Lr=1){if(Lr===1)this.internalFormat=Pr.R32F,this.format=Pr.RED,this.textureType=Pr.FLOAT,this.channelSize=Lr;else{if(Lr!==4)throw new Error(`Invalid number of channels: ${Lr}`);this.internalFormat=Pr.RGBA32F,this.format=Pr.RGBA,this.textureType=Pr.FLOAT,this.channelSize=Lr}}encode(Pr,Lr){let Mr,Fr;return Pr.constructor!==Float32Array&&(Ar.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),Fr=new Float32Array(Pr)),Lr*this.channelSize>Pr.length?(Ar.Logger.warning("Encoder","Source data too small. Allocating larger array"),Fr=Pr,Mr=this.allocate(Lr*this.channelSize),Fr.forEach((zr,Ur)=>Mr[Ur]=zr)):(Fr=Pr,Mr=Fr),Mr}allocate(Pr){return new Float32Array(4*Pr)}decode(Pr,Lr){return this.channelSize===1?Pr.filter((Mr,Fr)=>Fr%4==0).subarray(0,Lr):Pr.subarray(0,Lr)}},Tr.RGBAFloatDataEncoder=class{constructor(Pr,Lr=1,Mr){if(Lr!==1&&Lr!==4)throw new Error(`Invalid number of channels: ${Lr}`);this.internalFormat=Pr.RGBA,this.format=Pr.RGBA,this.channelSize=Lr,this.textureType=Mr||Pr.FLOAT}encode(Pr,Lr){let Mr=Pr;return this.channelSize===1&&(Ar.Logger.verbose("Encoder","Exploding into a larger array"),Mr=this.allocate(Lr),Pr.forEach((Fr,zr)=>Mr[4*zr]=Fr)),Mr}allocate(Pr){return new Float32Array(4*Pr)}decode(Pr,Lr){return this.channelSize===1?Pr.filter((Mr,Fr)=>Fr%4==0).subarray(0,Lr):Pr.subarray(0,Lr)}},Tr.Uint8DataEncoder=class{constructor(Pr,Lr=1){if(this.channelSize=4,Lr===1)this.internalFormat=Pr.ALPHA,this.format=Pr.ALPHA,this.textureType=Pr.UNSIGNED_BYTE,this.channelSize=Lr;else{if(Lr!==4)throw new Error(`Invalid number of channels: ${Lr}`);this.internalFormat=Pr.RGBA,this.format=Pr.RGBA,this.textureType=Pr.UNSIGNED_BYTE,this.channelSize=Lr}}encode(Pr,Lr){return new Uint8Array(Pr.buffer,Pr.byteOffset,Pr.byteLength)}allocate(Pr){return new Uint8Array(Pr*this.channelSize)}decode(Pr,Lr){if(Pr instanceof Uint8Array)return Pr.subarray(0,Lr);throw new Error(`Invalid array type: ${Pr.constructor}`)}}},7618:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.getBatchDim=Tr.sizeToSquarishShape=Tr.getRowsCols=Tr.sizeFromShape=Tr.isInt=Tr.parseAxisParam=Tr.squeezeShape=Tr.PreferLogicalStrategy=Tr.AlwaysKeepOriginalSizeStrategy=void 0;const Ar=Rr(1315),Pr=Rr(7273);function Lr(Vr,Nr){const Dr=[],jr=[],Gr=Nr!=null&&Array.isArray(Nr)&&Nr.length===0,Wr=Nr==null||Gr?null:Mr(Nr,Vr).sort();let qr=0;for(let Kr=0;Kr<Vr.length;++Kr){if(Wr!=null){if(Wr[qr]===Kr&&Vr[Kr]!==1)throw new Error(`Can't squeeze axis ${Kr} since its dim '${Vr[Kr]}' is not 1`);(Wr[qr]==null||Wr[qr]>Kr)&&Vr[Kr]===1&&(Dr.push(Vr[Kr]),jr.push(Kr)),Wr[qr]<=Kr&&qr++}Vr[Kr]!==1&&(Dr.push(Vr[Kr]),jr.push(Kr))}return{newShape:Dr,keptDims:jr}}function Mr(Vr,Nr){const Dr=Nr.length;return Vr=Vr==null?Nr.map((jr,Gr)=>Gr):[].concat(Vr),(0,Pr.assert)(Vr.every(jr=>jr>=-Dr&&jr<Dr),()=>`All values in axis param must be in range [-${Dr}, ${Dr}) but got axis ${Vr}`),(0,Pr.assert)(Vr.every(Fr),()=>`All values in axis param must be integers but got axis ${Vr}`),Vr.map(jr=>jr<0?Dr+jr:jr)}function Fr(Vr){return Vr%1==0}function zr(Vr){if(Vr.length===0)return 1;let Nr=Vr[0];for(let Dr=1;Dr<Vr.length;Dr++)Nr*=Vr[Dr];return Nr}function Ur(Vr){const Nr=Math.ceil(Math.sqrt(Vr));return[Nr,Math.ceil(Vr/Nr)]}Tr.AlwaysKeepOriginalSizeStrategy=class{constructor(Vr){this.maxTextureSize=Vr}computeTextureWH(Vr,Nr){if(Vr.length===0)return[1,1];const Dr=this.maxTextureSize;if(Nr&&Nr.breakAxis!==void 0){const Wr=Nr.breakAxis>=Vr.length?1:Vr.slice(Nr.breakAxis).reduce((Kr,Xr)=>Kr*Xr),qr=Nr.breakAxis<=0?1:Vr.slice(0,Nr.breakAxis).reduce((Kr,Xr)=>Kr*Xr);if(!(Wr>Dr||qr>Dr))return[Wr,qr];Ar.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${Vr}, breakAxis:${Nr.breakAxis}`)}const jr=Vr.reduce((Wr,qr)=>Wr*qr);let Gr=Math.floor(Math.sqrt(jr));for(;Gr<Dr&&Gr<jr&&jr%Gr!=0;Gr++);if(Gr>=Dr||jr%Gr!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${Vr}`);return[Gr,jr/Gr]}},Tr.PreferLogicalStrategy=class{constructor(Vr){this.maxTextureSize=Vr}computeTextureWH(Vr,Nr){const Dr=this.computeTexture(Vr,Nr);return Nr&&Nr.isPacked&&(Dr[0]/=2,Dr[1]/=2),Nr&&Nr.reverseWH?[Dr[1],Dr[0]]:Dr}computeTexture(Vr,Nr){const Dr=Nr&&Nr.isPacked;if(Vr.length===0)return Dr?[2,2]:[1,1];let jr=this.maxTextureSize;if(Nr&&Nr.breakAxis!==void 0){const qr=Nr.breakAxis>=Vr.length?1:Vr.slice(Nr.breakAxis).reduce((Xr,Zr)=>Xr*Zr),Kr=Nr.breakAxis<=0?1:Vr.slice(0,Nr.breakAxis).reduce((Xr,Zr)=>Xr*Zr);if(!(qr>jr||Kr>jr))return[qr,Kr];Ar.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${Vr}, breakAxis:${Nr.breakAxis}`)}let Gr=Vr.slice(0);Dr&&(jr*=2,Gr=Gr.map((qr,Kr)=>Kr>=Gr.length-2?Gr[Kr]%2==0?Gr[Kr]:Gr[Kr]+1:Gr[Kr]),Gr.length===1&&(Gr=[2,Gr[0]])),Gr.length!==2&&(Gr=Lr(Gr).newShape);const Wr=zr(Gr);return Gr.length<=1&&Wr<=jr?[1,Wr]:Gr.length===2&&Gr[0]<=jr&&Gr[1]<=jr?Gr:Gr.length===3&&Gr[0]*Gr[1]<=jr&&Gr[2]<=jr?[Gr[0]*Gr[1],Gr[2]]:Gr.length===3&&Gr[0]<=jr&&Gr[1]*Gr[2]<=jr?[Gr[0],Gr[1]*Gr[2]]:Gr.length===4&&Gr[0]*Gr[1]*Gr[2]<=jr&&Gr[3]<=jr?[Gr[0]*Gr[1]*Gr[2],Gr[3]]:Gr.length===4&&Gr[0]<=jr&&Gr[1]*Gr[2]*Gr[3]<=jr?[Gr[0],Gr[1]*Gr[2]*Gr[3]]:Dr?Ur(Wr/4).map(qr=>2*qr):Ur(Wr)}},Tr.squeezeShape=Lr,Tr.parseAxisParam=Mr,Tr.isInt=Fr,Tr.sizeFromShape=zr,Tr.getRowsCols=function(Vr){if(Vr.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[Vr.length>1?Vr[Vr.length-2]:1,Vr[Vr.length-1]]},Tr.sizeToSquarishShape=Ur,Tr.getBatchDim=function(Vr,Nr=2){return zr(Vr.slice(0,Vr.length-Nr))}},3314:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createTextureLayoutFromShape=Tr.calculateTextureWidthAndHeight=Tr.createTextureLayoutFromTextureType=void 0;const Ar=Rr(7273),Pr=Rr(5639);Tr.createTextureLayoutFromTextureType=(Lr,Mr,Fr)=>{const zr=Fr===Pr.TextureType.unpacked||Fr===Pr.TextureType.unpackedReversed?1:4,Ur=Fr===Pr.TextureType.packed,Vr=Fr===Pr.TextureType.unpackedReversed||Fr===Pr.TextureType.packed,Nr=Fr===Pr.TextureType.packedLastDimension?Mr.length-1:void 0,Dr=Fr===Pr.TextureType.packedLastDimension?Mr.map((jr,Gr)=>Gr===Mr.length-1?4*jr:jr):void 0;return(0,Tr.createTextureLayoutFromShape)(Lr,Mr,zr,Dr,{isPacked:Ur,reverseWH:Vr,breakAxis:Nr})},Tr.calculateTextureWidthAndHeight=(Lr,Mr,Fr)=>{const zr=(0,Tr.createTextureLayoutFromTextureType)(Lr,Mr,Fr);return[zr.width,zr.height]},Tr.createTextureLayoutFromShape=(Lr,Mr,Fr=1,zr,Ur)=>{const Vr=!(!Ur||!Ur.isPacked),[Nr,Dr]=Lr.computeTextureWH(Vr&&zr||Mr,Ur),jr=Mr.length;let Gr=Mr.slice(0);if(jr===0&&(Gr=[1]),Fr===1)zr=Mr;else if(Vr){if(Fr!==4)throw new Error("a packed texture must be 4-channel");zr=Mr,jr>0&&(Gr[jr-1]=Math.ceil(Gr[jr-1]/2)),jr>1&&(Gr[jr-2]=Math.ceil(Gr[jr-2]/2))}else if(!zr)throw new Error("Unpacked shape is needed when using channels > 1");return{width:Nr,height:Dr,channels:Fr,isPacked:Vr,shape:Gr,strides:Ar.ShapeUtil.computeStrides(Gr),unpackedShape:zr,reversedWH:Ur&&Ur.reverseWH}}},5243:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.TextureManager=void 0;const Ar=Rr(1315);Tr.TextureManager=class{constructor(Pr,Lr,Mr,Fr){this.glContext=Pr,this.layoutStrategy=Lr,this.profiler=Mr,this.config=Fr,this.pendingRead=new Map,Fr.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(Pr,Lr,Mr,Fr){const zr=this.toEncoderType(Pr),Ur=this.glContext.getEncoder(zr,Lr.channels||1,Fr);if(Lr.isPacked&&Fr===1)throw new Error("not implemented");const Vr=Lr.width,Nr=Lr.height;let Dr,jr;if(this.config.reuseTextures){Dr=`${Vr}x${Nr}_${Ur.format}_${Ur.internalFormat}_${Ur.textureType}`,jr=this.inUseTextures.get(Dr),jr||(jr=[],this.inUseTextures.set(Dr,jr));const Wr=this.idleTextures.get(Dr);if(Wr&&Wr.length>0){const qr=Wr.pop();return jr.push(qr),Fr===1&&this.glContext.updateTexture(qr,Vr,Nr,Ur,this.toTextureData(Pr,Mr)),qr}}Ar.Logger.verbose("TextureManager",`Creating new texture of size ${Lr.width}x${Lr.height}`);const Gr=this.glContext.allocateTexture(Vr,Nr,Ur,this.toTextureData(Pr,Mr));return this.config.reuseTextures&&(jr.push(Gr),this.textureLookup.set(Gr,Dr)),Gr}readTexture(Pr,Lr,Mr){return Mr||(Mr=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const Fr=Pr.shape.reduce((Ur,Vr)=>Ur*Vr)*Mr,zr=this.glContext.readTexture(Pr.texture,Pr.width,Pr.height,Fr,this.toEncoderType(Lr),Mr);return this.toTensorData(Lr,zr)})}async readTextureAsync(Pr,Lr,Mr){const Fr=Pr.tensor.dataId;if(Mr||(Mr=1),this.pendingRead.has(Fr)){const zr=this.pendingRead.get(Fr);return new Promise(Ur=>zr==null?void 0:zr.push(Ur))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(Fr,[]);const zr=Pr.shape.reduce((Dr,jr)=>Dr*jr)*Mr;await this.glContext.createAndWaitForFence();const Ur=this.glContext.readTexture(Pr.texture,Pr.width,Pr.height,zr,this.toEncoderType(Lr),Mr),Vr=this.toTensorData(Lr,Ur),Nr=this.pendingRead.get(Fr);return this.pendingRead.delete(Fr),Nr==null||Nr.forEach(Dr=>Dr(Vr)),Vr})}readUint8TextureAsFloat(Pr){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const Lr=Pr.shape.reduce((Fr,zr)=>Fr*zr),Mr=this.glContext.readTexture(Pr.texture,Pr.width,Pr.height,4*Lr,"byte",4);return new Float32Array(Mr.buffer,Mr.byteOffset,Lr)})}releaseTexture(Pr,Lr){let Mr;if(this.config.reuseTextures&&(Mr=this.textureLookup.get(Pr.texture),Mr)){Lr&&this.textureLookup.delete(Mr);const Fr=this.inUseTextures.get(Mr);if(Fr){const zr=Fr.indexOf(Pr.texture);if(zr!==-1){Fr.splice(zr,1);let Ur=this.idleTextures.get(Mr);Ur||(Ur=[],this.idleTextures.set(Mr,Ur)),Ur.push(Pr.texture)}}}Mr&&!Lr||(Ar.Logger.verbose("TextureManager",`Deleting texture of size ${Pr.width}x${Pr.height}`),this.glContext.deleteTexture(Pr.texture))}toTensorData(Pr,Lr){switch(Pr){case"int16":return Lr instanceof Int16Array?Lr:Int16Array.from(Lr);case"int32":return Lr instanceof Int32Array?Lr:Int32Array.from(Lr);case"int8":return Lr instanceof Int8Array?Lr:Int8Array.from(Lr);case"uint16":return Lr instanceof Uint16Array?Lr:Uint16Array.from(Lr);case"uint32":return Lr instanceof Uint32Array?Lr:Uint32Array.from(Lr);case"uint8":case"bool":return Lr instanceof Uint8Array?Lr:Uint8Array.from(Lr);case"float32":return Lr instanceof Float32Array?Lr:Float32Array.from(Lr);case"float64":return Lr instanceof Float64Array?Lr:Float64Array.from(Lr);default:throw new Error(`TensorData type ${Pr} is not supported`)}}toTextureData(Pr,Lr){if(Lr)return Lr instanceof Float32Array?Lr:new Float32Array(Lr)}toEncoderType(Pr){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},5639:(_r,Tr)=>{var Rr;Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.TextureType=void 0,(Rr=Tr.TextureType||(Tr.TextureType={}))[Rr.unpacked=0]="unpacked",Rr[Rr.unpackedReversed=1]="unpackedReversed",Rr[Rr.packed=2]="packed",Rr[Rr.downloadUint8AsFloat=3]="downloadUint8AsFloat",Rr[Rr.packedLastDimension=4]="packedLastDimension"},432:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.getGlChannels=Tr.getCoordsDataType=Tr.getSqueezedParams=Tr.squeezeInputShape=Tr.generateShaderFuncNameFromInputSamplerNameAtOutCoords=Tr.generateShaderFuncNameFromInputSamplerName=Tr.repeatedTry=Tr.getPackedShape=void 0;const Ar=Rr(7273);Tr.getPackedShape=function(Pr){const Lr=Pr.length;return Pr.slice(0,Lr-1).concat(Pr[Lr-1]/4)},Tr.repeatedTry=async function(Pr,Lr=Fr=>0,Mr){return new Promise((Fr,zr)=>{let Ur=0;const Vr=()=>{if(Pr())return void Fr();Ur++;const Nr=Lr(Ur);Mr!=null&&Ur>=Mr?zr():setTimeout(Vr,Nr)};Vr()})},Tr.generateShaderFuncNameFromInputSamplerName=function(Pr){return(0,Ar.assert)(Pr!==void 0&&Pr.length!==0,()=>"empty string found for sampler name"),"get"+Pr.charAt(0).toUpperCase()+Pr.slice(1)},Tr.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(Pr){return(0,Ar.assert)(Pr!==void 0&&Pr.length!==0,()=>"empty string found for sampler name"),"get"+Pr.charAt(0).toUpperCase()+Pr.slice(1)+"AtOutCoords"},Tr.squeezeInputShape=function(Pr,Lr){let Mr=JSON.parse(JSON.stringify(Pr));return Mr=Lr,Mr},Tr.getSqueezedParams=function(Pr,Lr){return Lr.map(Mr=>Pr[Mr]).join(", ")},Tr.getCoordsDataType=function(Pr){if(Pr<=1)return"int";if(Pr===2)return"ivec2";if(Pr===3)return"ivec3";if(Pr===4)return"ivec4";if(Pr===5)return"ivec5";if(Pr===6)return"ivec6";throw Error(`GPU for rank ${Pr} is not yet supported`)},Tr.getGlChannels=function(Pr=6){return["x","y","z","w","u","v"].slice(0,Pr)}},3389:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createNewWebGLContext=Tr.createWebGLContext=void 0;const Ar=Rr(1315),Pr=Rr(3524),Lr={};function Mr(Fr){const zr=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const Nr=document.createElement("canvas");return Nr.width=1,Nr.height=1,Nr}();let Ur;const Vr={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!Fr||Fr==="webgl2")&&(Ur=zr.getContext("webgl2",Vr),Ur))try{return new Pr.WebGLContext(Ur,2)}catch(Nr){Ar.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${Nr}`)}if((!Fr||Fr==="webgl")&&(Ur=zr.getContext("webgl",Vr)||zr.getContext("experimental-webgl",Vr),Ur))try{return new Pr.WebGLContext(Ur,1)}catch(Nr){Ar.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${Nr}`)}throw new Error("WebGL is not supported")}Tr.createWebGLContext=function Fr(zr){let Ur;zr&&zr!=="webgl2"||!("webgl2"in Lr)?zr&&zr!=="webgl"||!("webgl"in Lr)||(Ur=Lr.webgl):Ur=Lr.webgl2,Ur=Ur||Mr(zr),zr=zr||Ur.version===1?"webgl":"webgl2";const Vr=Ur.gl;return Lr[zr]=Ur,Vr.isContextLost()?(delete Lr[zr],Fr(zr)):(Vr.disable(Vr.DEPTH_TEST),Vr.disable(Vr.STENCIL_TEST),Vr.disable(Vr.BLEND),Vr.disable(Vr.DITHER),Vr.disable(Vr.POLYGON_OFFSET_FILL),Vr.disable(Vr.SAMPLE_COVERAGE),Vr.enable(Vr.SCISSOR_TEST),Vr.enable(Vr.CULL_FACE),Vr.cullFace(Vr.BACK),Ur)},Tr.createNewWebGLContext=Mr},3524:function(_r,Tr,Rr){var Ar=this&&this.__createBinding||(Object.create?function(Vr,Nr,Dr,jr){jr===void 0&&(jr=Dr);var Gr=Object.getOwnPropertyDescriptor(Nr,Dr);Gr&&!("get"in Gr?!Nr.__esModule:Gr.writable||Gr.configurable)||(Gr={enumerable:!0,get:function(){return Nr[Dr]}}),Object.defineProperty(Vr,jr,Gr)}:function(Vr,Nr,Dr,jr){jr===void 0&&(jr=Dr),Vr[jr]=Nr[Dr]}),Pr=this&&this.__setModuleDefault||(Object.create?function(Vr,Nr){Object.defineProperty(Vr,"default",{enumerable:!0,value:Nr})}:function(Vr,Nr){Vr.default=Nr}),Lr=this&&this.__importStar||function(Vr){if(Vr&&Vr.__esModule)return Vr;var Nr={};if(Vr!=null)for(var Dr in Vr)Dr!=="default"&&Object.prototype.hasOwnProperty.call(Vr,Dr)&&Ar(Nr,Vr,Dr);return Pr(Nr,Vr),Nr};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.WebGLContext=Tr.linearSearchLastTrue=void 0;const Mr=Rr(8453),Fr=Lr(Rr(9622)),zr=Rr(432);function Ur(Vr){let Nr=0;for(;Nr<Vr.length&&Vr[Nr]();++Nr);return Nr-1}Tr.linearSearchLastTrue=Ur,Tr.WebGLContext=class{constructor(Vr,Nr){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=Vr,this.version=Nr,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(Vr,Nr,Dr,jr){const Gr=this.gl,Wr=Gr.createTexture();Gr.bindTexture(Gr.TEXTURE_2D,Wr),Gr.texParameteri(Gr.TEXTURE_2D,Gr.TEXTURE_MIN_FILTER,Gr.NEAREST),Gr.texParameteri(Gr.TEXTURE_2D,Gr.TEXTURE_MAG_FILTER,Gr.NEAREST),Gr.texParameteri(Gr.TEXTURE_2D,Gr.TEXTURE_WRAP_S,Gr.CLAMP_TO_EDGE),Gr.texParameteri(Gr.TEXTURE_2D,Gr.TEXTURE_WRAP_T,Gr.CLAMP_TO_EDGE);const qr=jr?Dr.encode(jr,Vr*Nr):null;return Gr.texImage2D(Gr.TEXTURE_2D,0,Dr.internalFormat,Vr,Nr,0,Dr.format,Dr.textureType,qr),this.checkError(),Wr}updateTexture(Vr,Nr,Dr,jr,Gr){const Wr=this.gl;Wr.bindTexture(Wr.TEXTURE_2D,Vr);const qr=jr.encode(Gr,Nr*Dr);Wr.texSubImage2D(Wr.TEXTURE_2D,0,0,0,Nr,Dr,jr.format,jr.textureType,qr),this.checkError()}attachFramebuffer(Vr,Nr,Dr){const jr=this.gl;jr.bindTexture(jr.TEXTURE_2D,Vr),jr.bindFramebuffer(jr.FRAMEBUFFER,this.framebuffer),jr.framebufferTexture2D(jr.FRAMEBUFFER,jr.COLOR_ATTACHMENT0,jr.TEXTURE_2D,Vr,0),this.checkError(),jr.viewport(0,0,Nr,Dr),jr.scissor(0,0,Nr,Dr)}readTexture(Vr,Nr,Dr,jr,Gr,Wr){const qr=this.gl;Wr||(Wr=1),this.frameBufferBound||this.attachFramebuffer(Vr,Nr,Dr);const Kr=this.getEncoder(Gr,Wr),Xr=Kr.allocate(Nr*Dr);return qr.bindTexture(qr.TEXTURE_2D,Vr),qr.framebufferTexture2D(qr.FRAMEBUFFER,qr.COLOR_ATTACHMENT0,qr.TEXTURE_2D,Vr,0),qr.readPixels(0,0,Nr,Dr,qr.RGBA,Kr.textureType,Xr),this.checkError(),Kr.decode(Xr,jr)}isFramebufferReady(){return!0}getActiveTexture(){const Vr=this.gl;return"TEXTURE"+(Vr.getParameter(this.gl.ACTIVE_TEXTURE)-Vr.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(Vr,Nr){const Dr=this.gl;Dr.vertexAttribPointer(Vr,3,Dr.FLOAT,!1,20,0),Dr.enableVertexAttribArray(Vr),Nr!==-1&&(Dr.vertexAttribPointer(Nr,2,Dr.FLOAT,!1,20,12),Dr.enableVertexAttribArray(Nr)),this.checkError()}createProgram(Vr,Nr){const Dr=this.gl,jr=Dr.createProgram();return Dr.attachShader(jr,Vr),Dr.attachShader(jr,Nr),Dr.linkProgram(jr),jr}compileShader(Vr,Nr){const Dr=this.gl,jr=Dr.createShader(Nr);if(!jr)throw new Error(`createShader() returned null with type ${Nr}`);if(Dr.shaderSource(jr,Vr),Dr.compileShader(jr),Dr.getShaderParameter(jr,Dr.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${Dr.getShaderInfoLog(jr)}
Shader source:
${Vr}`);return jr}deleteShader(Vr){this.gl.deleteShader(Vr)}bindTextureToUniform(Vr,Nr,Dr){const jr=this.gl;jr.activeTexture(jr.TEXTURE0+Nr),this.checkError(),jr.bindTexture(jr.TEXTURE_2D,Vr),this.checkError(),jr.uniform1i(Dr,Nr),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Mr.env.debug){const Vr=this.gl,Nr=Vr.getError();let Dr="";switch(Nr){case Vr.NO_ERROR:return;case Vr.INVALID_ENUM:Dr="INVALID_ENUM";break;case Vr.INVALID_VALUE:Dr="INVALID_VALUE";break;case Vr.INVALID_OPERATION:Dr="INVALID_OPERATION";break;case Vr.INVALID_FRAMEBUFFER_OPERATION:Dr="INVALID_FRAMEBUFFER_OPERATION";break;case Vr.OUT_OF_MEMORY:Dr="OUT_OF_MEMORY";break;case Vr.CONTEXT_LOST_WEBGL:Dr="CONTEXT_LOST_WEBGL";break;default:Dr=`Unknown WebGL Error: ${Nr.toString(16)}`}throw new Error(Dr)}}deleteTexture(Vr){this.gl.deleteTexture(Vr)}deleteProgram(Vr){this.gl.deleteProgram(Vr)}getEncoder(Vr,Nr,Dr=0){if(this.version===2)return new Fr.RedFloat32DataEncoder(this.gl,Nr);switch(Vr){case"float":return Dr===1||this.isRenderFloat32Supported?new Fr.RGBAFloatDataEncoder(this.gl,Nr):new Fr.RGBAFloatDataEncoder(this.gl,Nr,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Fr.Uint8DataEncoder(this.gl,Nr);default:throw new Error(`Invalid dataType: ${Vr}`)}}clearActiveTextures(){const Vr=this.gl;for(let Nr=0;Nr<this.maxTextureImageUnits;++Nr)Vr.activeTexture(Vr.TEXTURE0+Nr),Vr.bindTexture(Vr.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const Vr=this.gl;Vr.bindFramebuffer(Vr.FRAMEBUFFER,null),Vr.deleteFramebuffer(this.framebuffer),Vr.bindBuffer(Vr.ARRAY_BUFFER,null),Vr.deleteBuffer(this.vertexbuffer),Vr.bindBuffer(Vr.ELEMENT_ARRAY_BUFFER,null),Vr.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const Vr=this.gl,Nr=Vr.createBuffer();if(!Nr)throw new Error("createBuffer() returned null");const Dr=this.createDefaultGeometry();return Vr.bindBuffer(Vr.ARRAY_BUFFER,Nr),Vr.bufferData(Vr.ARRAY_BUFFER,Dr,Vr.STATIC_DRAW),this.checkError(),Nr}createFramebuffer(){const Vr=this.gl.createFramebuffer();if(!Vr)throw new Error("createFramebuffer returned null");return Vr}queryVitalParameters(){const Vr=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=Vr.getParameter(Vr.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=Vr.getParameter(Vr.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const Vr=this.gl,Nr=Vr.createTexture();Vr.bindTexture(Vr.TEXTURE_2D,Nr);const Dr=this.version===2?Vr.RGBA32F:Vr.RGBA;Vr.texImage2D(Vr.TEXTURE_2D,0,Dr,1,1,0,Vr.RGBA,Vr.FLOAT,null);const jr=Vr.createFramebuffer();Vr.bindFramebuffer(Vr.FRAMEBUFFER,jr),Vr.framebufferTexture2D(Vr.FRAMEBUFFER,Vr.COLOR_ATTACHMENT0,Vr.TEXTURE_2D,Nr,0);const Gr=Vr.checkFramebufferStatus(Vr.FRAMEBUFFER)===Vr.FRAMEBUFFER_COMPLETE;return Vr.bindTexture(Vr.TEXTURE_2D,null),Vr.bindFramebuffer(Vr.FRAMEBUFFER,null),Vr.deleteTexture(Nr),Vr.deleteFramebuffer(jr),Gr}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const Vr=this.gl;let Nr,Dr,jr,Gr,Wr;try{Nr=Vr.createTexture(),Dr=Vr.createFramebuffer(),Vr.bindTexture(Vr.TEXTURE_2D,Nr);const qr=this.version===2?Vr.RGBA32F:Vr.RGBA;return Vr.texImage2D(Vr.TEXTURE_2D,0,qr,1,1,0,Vr.RGBA,Vr.FLOAT,null),Vr.bindFramebuffer(Vr.FRAMEBUFFER,Dr),Vr.framebufferTexture2D(Vr.FRAMEBUFFER,Vr.COLOR_ATTACHMENT0,Vr.TEXTURE_2D,Nr,0),Vr.enable(Vr.BLEND),jr=Vr.createShader(Vr.VERTEX_SHADER),!!jr&&(Vr.shaderSource(jr,"void main(){}"),Vr.compileShader(jr),Gr=Vr.createShader(Vr.FRAGMENT_SHADER),!!Gr&&(Vr.shaderSource(Gr,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),Vr.compileShader(Gr),Wr=Vr.createProgram(),!!Wr&&(Vr.attachShader(Wr,jr),Vr.attachShader(Wr,Gr),Vr.linkProgram(Wr),Vr.useProgram(Wr),Vr.drawArrays(Vr.POINTS,0,1),Vr.getError()===Vr.NO_ERROR)))}finally{Vr.disable(Vr.BLEND),Wr&&Vr.deleteProgram(Wr),jr&&Vr.deleteShader(jr),Gr&&Vr.deleteShader(Gr),Dr&&(Vr.bindFramebuffer(Vr.FRAMEBUFFER,null),Vr.deleteFramebuffer(Dr)),Nr&&(Vr.bindTexture(Vr.TEXTURE_2D,null),Vr.deleteTexture(Nr))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const Vr=this.gl,Nr=this.disjointTimerQueryWebgl2Extension,Dr=Vr.createQuery();return Vr.beginQuery(Nr.TIME_ELAPSED_EXT,Dr),Dr}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const Vr=this.gl,Nr=this.disjointTimerQueryWebgl2Extension;Vr.endQuery(Nr.TIME_ELAPSED_EXT)}}isTimerResultAvailable(Vr){let Nr=!1,Dr=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const jr=this.gl,Gr=this.disjointTimerQueryWebgl2Extension;Nr=jr.getQueryParameter(Vr,jr.QUERY_RESULT_AVAILABLE),Dr=jr.getParameter(Gr.GPU_DISJOINT_EXT)}return Nr&&!Dr}getTimerResult(Vr){let Nr=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const Dr=this.gl;Nr=Dr.getQueryParameter(Vr,Dr.QUERY_RESULT),Dr.deleteQuery(Vr)}return Nr/1e6}async waitForQueryAndGetTime(Vr){return await(0,zr.repeatedTry)(()=>this.isTimerResultAvailable(Vr)),this.getTimerResult(Vr)}async createAndWaitForFence(){const Vr=this.createFence(this.gl);return this.pollFence(Vr)}createFence(Vr){let Nr;const Dr=Vr,jr=Dr.fenceSync(Dr.SYNC_GPU_COMMANDS_COMPLETE,0);return Vr.flush(),Nr=jr===null?()=>!0:()=>{const Gr=Dr.clientWaitSync(jr,0,0);return Gr===Dr.ALREADY_SIGNALED||Gr===Dr.CONDITION_SATISFIED},{query:jr,isFencePassed:Nr}}async pollFence(Vr){return new Promise(Nr=>{this.addItemToPoll(()=>Vr.isFencePassed(),()=>Nr())})}pollItems(){const Vr=Ur(this.itemsToPoll.map(Nr=>Nr.isDoneFn));for(let Nr=0;Nr<=Vr;++Nr){const{resolveFn:Dr}=this.itemsToPoll[Nr];Dr()}this.itemsToPoll=this.itemsToPoll.slice(Vr+1)}async addItemToPoll(Vr,Nr){this.itemsToPoll.push({isDoneFn:Vr,resolveFn:Nr}),this.itemsToPoll.length>1||await(0,zr.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},6496:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.ExecutionPlan=void 0;const Ar=Rr(1315);class Pr{constructor(Mr,Fr){this.op=Mr,this.node=Fr}}Tr.ExecutionPlan=class{constructor(Lr,Mr,Fr){this.graph=Lr,this.profiler=Fr,this.initialize(Mr)}initialize(Lr){this.profiler.event("session","ExecutionPlan.initialize",()=>{const Mr=this.graph.getNodes();if(Mr.length!==Lr.length)throw new Error("The size of nodes and OPs do not match.");this._ops=Lr.map((Fr,zr)=>new Pr(Fr,Mr[zr])),this.reset(),this._starter=[],this._ops.forEach((Fr,zr)=>{let Ur=!0;for(const Vr of Fr.node.inputs)if(!this._values[Vr]&&this.graph.getInputIndices().indexOf(Vr)===-1){Ur=!1;break}Ur&&this._starter.push(zr)})})}reset(){this._values=this.graph.getValues().map(Lr=>Lr.tensor)}async execute(Lr,Mr){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const Fr=Lr.createInferenceHandler(),zr=this.graph.getInputIndices();if(Mr.length!==zr.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${Mr.length} expected: ${zr.length}`);Mr.forEach((Gr,Wr)=>{const qr=zr[Wr];this._values[qr]=Gr});const Ur=this._starter.slice(0),Vr=this.graph.getValues(),Nr=this.graph.getNodes();let Dr=0;for(;Dr<Ur.length;){const Gr=Ur[Dr++],Wr=this._ops[Gr],qr=Wr.node.inputs.map(Jr=>this._values[Jr]);if(qr.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${Wr.node}`);const Kr=qr;Ar.Logger.verbose("ExecPlan",`Runing op:${Wr.node.name} (${Kr.map((Jr,_i)=>`'${Wr.node.inputs[_i]}': ${Jr.type}[${Jr.dims.join(",")}]`).join(", ")})`);const Xr=await this.profiler.event("node",Wr.node.name,async()=>Wr.op.impl(Fr,Kr,Wr.op.context));if(Xr.length!==Wr.node.outputs.length)throw new Error("the size of output does not match model definition.");Xr.forEach((Jr,_i)=>{const es=Wr.node.outputs[_i];if(this._values[es])throw new Error(`output [${es}] already has value: op:${Wr.node.name}`);this._values[es]=Jr});const Zr=new Set;Xr.forEach((Jr,_i)=>{const es=Wr.node.outputs[_i];for(const ts of Vr[es].to){const rs=Nr[ts];let ns=!0;for(const as of rs.inputs)if(!this._values[as]){ns=!1;break}ns&&Zr.add(ts)}}),Ur.push(...Zr)}const jr=[];for(let Gr=0;Gr<this.graph.getOutputIndices().length;Gr++){const Wr=this.graph.getOutputIndices()[Gr],qr=this._values[Wr];if(qr===void 0)throw new Error(`required output [${Wr}] does not have value`);Wr===0?await qr.getData():qr.data,jr.push(qr)}return Ar.Logger.verbose("ExecPlan","disposing of inferenceHandler"),Fr.dispose(),jr})}}},4662:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.Graph=void 0;const Ar=Rr(1446),Pr=Rr(6874),Lr=Rr(1287),Mr=Rr(9240),Fr=Rr(7273);var zr=Lr.onnxruntime.experimental.fbs;Tr.Graph={from:(Dr,jr)=>new Nr(Dr,jr)};class Ur{constructor(jr){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,jr&&(this.type=Fr.ProtoUtil.tensorValueTypeFromProto(jr.type.tensorType))}get from(){return this._from}get to(){return this._to}}class Vr{constructor(jr,Gr){jr instanceof Ar.onnx.NodeProto?(this.name=jr.name,this.opType=jr.opType,this.attributes=new Pr.Attribute(jr.attribute)):jr instanceof zr.Node&&(this.name=Gr??jr.name(),this.opType=jr.opType(),this.attributes=new Pr.Attribute(Fr.ProtoUtil.tensorAttributesFromORTFormat(jr))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class Nr{constructor(jr,Gr){if(!jr)throw new TypeError("graph is empty");this.buildGraph(jr),this.transformGraph(Gr),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(jr){if(jr instanceof Ar.onnx.GraphProto)this.buildGraphFromOnnxFormat(jr);else{if(!(jr instanceof zr.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(jr)}}buildGraphFromOnnxFormat(jr){const Gr=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const Wr=new Map;if(!jr.input)throw new Error("missing information in graph: input");const qr=[];for(const Kr of jr.input){if(Gr.has(Kr.name))throw new Error(`duplicated input name: ${Kr.name}`);const Xr=this._allData.push(new Ur(Kr))-1;Gr.set(Kr.name,Xr),qr.push(Kr.name)}if(!jr.initializer)throw new Error("missing information in graph: initializer");for(const Kr of jr.initializer){let Xr=Gr.get(Kr.name);if(Xr===void 0){const Zr=new Ur;Zr.type={shape:{dims:Fr.ProtoUtil.tensorDimsFromProto(Kr.dims)},tensorType:Fr.ProtoUtil.tensorDataTypeFromProto(Kr.dataType)},Xr=this._allData.push(Zr)-1,Gr.set(Kr.name,Xr)}this._allData[Xr]._from=-1,this._allData[Xr].tensor=Mr.Tensor.fromProto(Kr)}for(let Kr=0;Kr<this._allData.length;Kr++)this._allData[Kr].tensor||(this._allInputIndices.push(Kr),this._allInputNames.push(qr[Kr]));if(!jr.output)throw new Error("missing information in graph: output");for(const Kr of jr.output){if(Gr.has(Kr.name))throw new Error(`duplicated output name: ${Kr.name}`);const Xr=this._allData.push(new Ur(Kr))-1;Gr.set(Kr.name,Xr),this._allOutputIndices.push(Xr),this._allOutputNames.push(Kr.name)}if(!jr.node)throw new Error("missing information in graph: node");for(const Kr of jr.node){if(!Kr.name)for(let Zr=0;;Zr++){const Jr=`unnamed_${Kr.opType}_${Zr}`;if(!Wr.has(Jr)){Kr.name=Jr;break}}if(Wr.has(Kr.name))throw new Error(`duplicated node name: ${Kr.name}`);const Xr=this._nodes.push(new Vr(Kr))-1;Wr.set(Kr.name,Xr)}for(let Kr=0;Kr<this._nodes.length;Kr++){const Xr=this._nodes[Kr],Zr=jr.node[Kr];if(!Zr.output)throw new Error(`missing output for node: ${Zr.name}`);for(const Jr of Zr.output){let _i=Gr.get(Jr);if(_i===void 0&&(_i=this._allData.push(new Ur)-1,Gr.set(Jr,_i)),Xr.outputs.push(_i),this._allData[_i]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${_i}`);if(this._allData[_i]._from=Kr,Zr.opType==="Constant"){if(!Zr.attribute||Zr.attribute.length!==1||!Zr.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!Zr.output||Zr.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");Xr.outputs.pop(),Xr.executeNode=!1,this._allData[_i]._from=-1,this._allData[_i].tensor=Mr.Tensor.fromProto(Zr.attribute[0].t)}}}for(let Kr=0;Kr<this._nodes.length;Kr++){const Xr=this._nodes[Kr],Zr=jr.node[Kr];if(!Zr.input)throw new Error(`missing input for node: ${Zr.name}`);for(const Jr of Zr.input){const _i=Gr.get(Jr);if(_i===void 0){if(Jr===""&&Zr.input.length===3&&Zr.opType==="Resize")continue;throw new Error(`unrecognized input '${Jr}' for node: ${Zr.name}`)}Xr.inputs.push(_i),this._allData[_i]._to.push(Kr)}}return!0}buildGraphFromOrtFormat(jr){var Gr,Wr,qr;const Kr=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const Xr=new Map,Zr=[];for(let Jr=0;Jr<jr.inputsLength();Jr++){const _i=jr.inputs(Jr);if(Kr.has(_i))throw new Error(`duplicated input name: ${_i}`);for(let es=0;es<jr.nodeArgsLength();es++)if(((Gr=jr.nodeArgs(es))===null||Gr===void 0?void 0:Gr.name())===_i){const ts=new Ur;if(((qr=(Wr=jr.nodeArgs(es))===null||Wr===void 0?void 0:Wr.type())===null||qr===void 0?void 0:qr.valueType())!==zr.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const rs=jr.nodeArgs(es).type().value(new zr.TensorTypeAndShape),ns=Fr.ProtoUtil.tensorDataTypeFromProto(rs.elemType()),as=rs.shape(),ls=[];for(let xs=0;xs<as.dimLength();xs++)ls.push(Fr.LongUtil.longToNumber(as.dim(xs).value().dimValue()));ts.type={shape:{dims:ls},tensorType:ns};const us=this._allData.push(ts)-1;Kr.set(_i,us),Zr.push(_i)}}for(let Jr=0;Jr<jr.initializersLength();Jr++){const _i=jr.initializers(Jr);let es=Kr.get(_i.name());if(es===void 0){const ts=new Ur,rs=Fr.ProtoUtil.tensorDimsFromORTFormat(_i),ns=Fr.ProtoUtil.tensorDataTypeFromProto(_i.dataType());ts.type={shape:{dims:rs},tensorType:ns},es=this._allData.push(ts)-1,Kr.set(_i.name(),es)}this._allData[es]._from=-1,this._allData[es].tensor=Mr.Tensor.fromOrtTensor(_i)}for(let Jr=0;Jr<this._allData.length;Jr++)this._allData[Jr].tensor||(this._allInputIndices.push(Jr),this._allInputNames.push(Zr[Jr]));for(let Jr=0;Jr<jr.outputsLength();Jr++){const _i=jr.outputs(Jr);if(Kr.has(_i))throw new Error(`duplicated output name: ${_i}`);const es=this._allData.push(new Ur)-1;Kr.set(_i,es),this._allOutputIndices.push(es),this._allOutputNames.push(_i)}if(!jr.nodes)throw new Error("missing information in graph: node");for(let Jr=0;Jr<jr.nodesLength();Jr++){const _i=jr.nodes(Jr);let es=_i.name();if(!es)for(let rs=0;es=`unnamed_${_i.opType()}_${rs}`,Xr.has(es);rs++);if(Xr.has(es))throw new Error(`duplicated node name: ${es}`);const ts=this._nodes.push(new Vr(_i,es))-1;Xr.set(es,ts)}for(let Jr=0;Jr<this._nodes.length;Jr++){const _i=this._nodes[Jr],es=jr.nodes(Jr);if(es==null)throw new Error(`No node exists at index ${Jr}`);if((es==null?void 0:es.outputsLength())===0)throw new Error(`missing output for node: ${es.name}`);for(let ts=0;ts<(es==null?void 0:es.outputsLength());ts++){const rs=es==null?void 0:es.outputs(ts);let ns=Kr.get(rs);if(ns===void 0&&(ns=this._allData.push(new Ur)-1,Kr.set(rs,ns)),_i.outputs.push(ns),this._allData[ns]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${ns}`);if(this._allData[ns]._from=Jr,es.opType()==="Constant"){if(es.attributesLength()!==1||!es.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(es.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");_i.outputs.pop(),_i.executeNode=!1,this._allData[ns]._from=-1,this._allData[ns].tensor=Mr.Tensor.fromOrtTensor(es.attributes(0).t())}}}for(let Jr=0;Jr<this._nodes.length;Jr++){const _i=this._nodes[Jr],es=jr.nodes(Jr);if(es.inputsLength()===0)throw new Error(`missing input for node: ${es.name}`);for(let ts=0;ts<es.inputsLength();ts++){const rs=es.inputs(ts),ns=Kr.get(rs);if(ns===void 0)throw new Error(`unrecognized input '${rs}' for node: ${es.name()}`);_i.inputs.push(ns),this._allData[ns]._to.push(Jr)}}}checkIsAcyclic(){const jr=new Set;this._allInputIndices.forEach(qr=>{this._allData[qr]._to.forEach(Kr=>{jr.add(Kr)})});const Gr=Array.from(jr),Wr=new Array(this._nodes.length).fill("white");for(;Gr.length>0;){const qr=Gr.pop();Wr[qr]==="gray"?Wr[qr]="black":(Gr.push(qr),Wr[qr]="gray",this._nodes[qr].outputs.forEach(Kr=>{const Xr=this._allData[Kr];if(Xr.tensor!==void 0)throw new Error("node outputs should not be initialized");if(Xr._from!==qr)throw new Error("from property of the Value object doesn't match index of Node being processed");Xr._to.forEach(Zr=>{if(Wr[Zr]==="gray")throw new Error("model graph is cyclic");Wr[Zr]==="white"&&Gr.push(Zr)})}))}}transformGraph(jr){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),jr&&jr.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let jr=0;const Gr=new Array(this._nodes.length,0);let Wr=0;for(let qr=0;qr<this._nodes.length;qr++)Gr[qr]=Wr,this._nodes[qr].executeNode?(Wr!==qr&&(this._nodes[Wr]=this._nodes[qr]),Wr++):this._nodes[qr].outputs.forEach(Kr=>{this._allData[Kr]._from=-2});this._nodes.splice(Wr,this._nodes.length-Wr);for(let qr=0;qr<this._allData.length;qr++){const Kr=this._allData[qr];Kr._from!==void 0&&Kr._from!==-1&&Kr._from!==-2&&(Kr._from=Gr[Kr._from]);for(let Xr=0;Xr<Kr._to.length;Xr++){if(!(Kr._to[Xr]>=0))throw new Error("Trying to update a removed node");Kr._to[Xr]=Gr[Kr._to[Xr]]}}jr=0;for(let qr=0;qr<this._allData.length;qr++)if(this._allData[qr].from!==-2||this._allOutputIndices.indexOf(qr+jr)!==-1){if(jr>0){let Kr=-1;this._allData[qr].from!==void 0&&this._allData[qr].from!==-1?(Kr=this._nodes[this._allData[qr].from].outputs.indexOf(qr+jr),Kr!==-1&&(this._nodes[this._allData[qr].from].outputs[Kr]=qr)):(Kr=this._allInputIndices.indexOf(qr+jr),Kr!==-1&&(this._allInputIndices[Kr]=qr)),this._allData[qr].to.forEach(Xr=>{Kr=this._nodes[Xr].inputs.indexOf(qr+jr),Kr!==-1&&(this._nodes[Xr].inputs[Kr]=qr)}),this._allData[qr].to.length===0&&(Kr=this._allOutputIndices.indexOf(qr+jr),Kr!==-1&&(this._allOutputIndices[Kr]=qr))}}else jr++,this._allData.splice(qr,1),qr--}deleteNode(jr){const Gr=this._nodes[jr];if(Gr.outputs.length>1){for(let Zr=1;Zr<Gr.outputs.length;Zr++)if(this._allData[Gr.outputs[Zr]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}Gr.executeNode=!1;const Wr=Gr.inputs[0],qr=Gr.outputs[0],Kr=this._allData[qr].to;for(let Zr=0;Zr<Gr.inputs.length;Zr++){const Jr=this._allData[Gr.inputs[Zr]].to.indexOf(jr);if(Jr===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[Gr.inputs[Zr]].to.splice(Jr,1)}this._allData[qr]._to=[];const Xr=this._allOutputIndices.indexOf(qr);if(Xr!==-1&&(this._allOutputIndices[Xr]=Wr),Kr&&Kr.length>0)for(const Zr of Kr){const Jr=this._nodes[Zr].inputs.indexOf(qr);if(Jr===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[Zr].inputs[Jr]=Wr,this._allData[Wr].to.push(Zr)}}removeAllDropoutNodes(){let jr=0;for(const Gr of this._nodes){if(Gr.opType==="Dropout"){if(Gr.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(Gr.outputs.length!==1&&Gr.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(Gr.outputs.length===2&&this._allData[Gr.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(jr)}jr++}}removeAllIdentityNodes(){let jr=0;for(const Gr of this._nodes)Gr.opType==="Identity"&&this.deleteNode(jr),jr++}isActivation(jr){switch(jr.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const jr of this._nodes)if(jr.opType==="Conv"){const Gr=this._allData[jr.outputs[0]]._to;if(Gr.length===1&&this.isActivation(this._nodes[Gr[0]])){const Wr=this._nodes[Gr[0]];if(Wr.opType==="Clip")if(Wr.inputs.length===1)try{jr.attributes.set("activation_params","floats",[Wr.attributes.getFloat("min"),Wr.attributes.getFloat("max")])}catch{jr.attributes.set("activation_params","floats",[Fr.MIN_CLIP,Fr.MAX_CLIP])}else{if(!(Wr.inputs.length>=3&&this._allData[Wr.inputs[1]].tensor!==void 0&&this._allData[Wr.inputs[2]].tensor!==void 0))continue;jr.attributes.set("activation_params","floats",[this._allData[Wr.inputs[1]].tensor.floatData[0],this._allData[Wr.inputs[2]].tensor.floatData[0]])}jr.attributes.set("activation","string",Wr.opType),this.deleteNode(Gr[0])}}}}},1315:(_r,Tr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.now=Tr.Profiler=Tr.Logger=void 0;const Rr={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Ar={none:new class{log(Vr,Nr,Dr){}},console:new class{log(Vr,Nr,Dr){console.log(`${this.color(Vr)} ${Dr?"\x1B[35m"+Dr+"\x1B[0m ":""}${Nr}`)}color(Vr){switch(Vr){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${Vr}`)}}}},Pr={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let Lr={"":Pr};function Mr(Vr,Nr,Dr,jr){if(Nr===void 0)return Gr=Vr,{verbose:Mr.verbose.bind(null,Gr),info:Mr.info.bind(null,Gr),warning:Mr.warning.bind(null,Gr),error:Mr.error.bind(null,Gr),fatal:Mr.fatal.bind(null,Gr)};if(Dr===void 0)Fr(Vr,Nr);else if(typeof Dr=="number"&&jr===void 0)Fr(Vr,Nr);else if(typeof Dr=="string"&&jr===void 0)Fr(Vr,Dr,0,Nr);else{if(typeof Dr!="string"||typeof jr!="number")throw new TypeError("input is valid");Fr(Vr,Dr,0,Nr)}var Gr}function Fr(Vr,Nr,Dr,jr){const Gr=Lr[jr||""]||Lr[""];Rr[Vr]<Rr[Gr.minimalSeverity]||(Gr.logDateTime&&(Nr=`${new Date().toISOString()}|${Nr}`),Gr.logSourceLocation,Ar[Gr.provider].log(Vr,Nr,jr))}(function(Vr){function Nr(jr){Lr={},Dr("",jr||{})}function Dr(jr,Gr){if(jr==="*")Nr(Gr);else{const Wr=Lr[jr]||Pr;Lr[jr]={provider:Gr.provider||Wr.provider,minimalSeverity:Gr.minimalSeverity||Wr.minimalSeverity,logDateTime:Gr.logDateTime===void 0?Wr.logDateTime:Gr.logDateTime,logSourceLocation:Gr.logSourceLocation===void 0?Wr.logSourceLocation:Gr.logSourceLocation}}}Vr.verbose=function(jr,Gr){Vr("verbose",jr,Gr)},Vr.info=function(jr,Gr){Vr("info",jr,Gr)},Vr.warning=function(jr,Gr){Vr("warning",jr,Gr)},Vr.error=function(jr,Gr){Vr("error",jr,Gr)},Vr.fatal=function(jr,Gr){Vr("fatal",jr,Gr)},Vr.reset=Nr,Vr.set=Dr,Vr.setWithEnv=function(jr){const Gr={};jr.logLevel&&(Gr.minimalSeverity=jr.logLevel),Dr("",Gr)}})(Mr||(Mr={})),Tr.Logger=Mr;class zr{constructor(Nr,Dr,jr,Gr,Wr,qr){this.category=Nr,this.name=Dr,this.startTime=jr,this.endCallback=Gr,this.timer=Wr,this.ctx=qr}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class Ur{constructor(Nr,Dr,jr,Gr){this.category=Nr,this.name=Dr,this.startTime=jr,this.endTime=Gr}}Tr.Profiler=class{static create(Vr){return Vr===void 0?new this:new this(Vr.maxNumberEvents,Vr.flushBatchSize,Vr.flushIntervalInMilliseconds)}constructor(Vr,Nr,Dr){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=Vr===void 0?1e4:Vr,this._flushBatchSize=Nr===void 0?10:Nr,this._flushIntervalInMilliseconds=Dr===void 0?5e3:Dr}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,Tr.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(Vr,Nr,Dr,jr){const Gr=this._started?this.begin(Vr,Nr,jr):void 0;let Wr=!1;const qr=Dr();if(qr&&typeof qr.then=="function")return Wr=!0,new Promise((Kr,Xr)=>{qr.then(async Zr=>{Gr&&await Gr.end(),Kr(Zr)},async Zr=>{Gr&&await Gr.end(),Xr(Zr)})});if(!Wr&&Gr){const Kr=Gr.end();if(Kr&&typeof Kr.then=="function")return new Promise((Xr,Zr)=>{Kr.then(()=>{Xr(qr)},Jr=>{Zr(Jr)})})}return qr}begin(Vr,Nr,Dr){if(!this._started)throw new Error("profiler is not started yet");if(Dr===void 0){const jr=(0,Tr.now)();return this.flush(jr),new zr(Vr,Nr,jr,Gr=>this.endSync(Gr))}{const jr=Dr.beginTimer();return new zr(Vr,Nr,0,async Gr=>this.end(Gr),jr,Dr)}}async end(Vr){const Nr=await Vr.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Ur(Vr.category,Vr.name,Vr.startTime,Nr)),this.flush(Nr))}endSync(Vr){const Nr=(0,Tr.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Ur(Vr.category,Vr.name,Vr.startTime,Nr)),this.flush(Nr))}logOneEvent(Vr){Tr.Logger.verbose(`Profiler.${Vr.category}`,`${(Vr.endTime-Vr.startTime).toFixed(2)}ms on event '${Vr.name}' at ${Vr.endTime.toFixed(2)}`)}flush(Vr){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||Vr-this._flushTime>=this._flushIntervalInMilliseconds){for(const Nr=this._flushPointer;this._flushPointer<Nr+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,Tr.now)()}}get started(){return this._started}},Tr.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},1745:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.Model=void 0;const Ar=Rr(5686),Pr=Rr(1446),Lr=Rr(4662),Mr=Rr(1287),Fr=Rr(7273);var zr=Mr.onnxruntime.experimental.fbs;Tr.Model=class{constructor(){}load(Ur,Vr,Nr){if(!Nr)try{return void this.loadFromOnnxFormat(Ur,Vr)}catch(Dr){if(Nr!==void 0)throw Dr}this.loadFromOrtFormat(Ur,Vr)}loadFromOnnxFormat(Ur,Vr){const Nr=Pr.onnx.ModelProto.decode(Ur);if(Fr.LongUtil.longToNumber(Nr.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=Nr.opsetImport.map(Dr=>({domain:Dr.domain,version:Fr.LongUtil.longToNumber(Dr.version)})),this._graph=Lr.Graph.from(Nr.graph,Vr)}loadFromOrtFormat(Ur,Vr){const Nr=new Ar.flatbuffers.ByteBuffer(Ur),Dr=zr.InferenceSession.getRootAsInferenceSession(Nr).model();if(Fr.LongUtil.longToNumber(Dr.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let jr=0;jr<Dr.opsetImportLength();jr++){const Gr=Dr.opsetImport(jr);this._opsets.push({domain:Gr==null?void 0:Gr.domain(),version:Fr.LongUtil.longToNumber(Gr.version())})}this._graph=Lr.Graph.from(Dr.graph(),Vr)}get graph(){return this._graph}get opsets(){return this._opsets}}},6145:(_r,Tr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.FLOAT_TYPES=Tr.INT_TYPES=Tr.NUMBER_TYPES=void 0,Tr.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],Tr.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],Tr.FLOAT_TYPES=["float32","float64"]},5881:(_r,Tr)=>{function Rr(Ar,Pr){if(Pr.endsWith("+")){const Lr=Number.parseInt(Pr.substring(0,Pr.length-1),10);return!isNaN(Lr)&&Lr<=Ar}if(Pr.split("-").length===2){const Lr=Pr.split("-"),Mr=Number.parseInt(Lr[0],10),Fr=Number.parseInt(Lr[1],10);return!isNaN(Mr)&&!isNaN(Fr)&&Mr<=Ar&&Ar<=Fr}return Number.parseInt(Pr,10)===Ar}Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.resolveOperator=void 0,Tr.resolveOperator=function(Ar,Pr,Lr){for(const Mr of Lr){const Fr=Mr[0],zr=Mr[1],Ur=Mr[2],Vr=Mr[3],Nr=Mr[4];if(Ar.opType===Fr){for(const Dr of Pr)if((Dr.domain===zr||Dr.domain==="ai.onnx"&&zr==="")&&Rr(Dr.version,Ur))return{opImpl:Vr,opInit:Nr}}}throw new TypeError(`cannot resolve operator '${Ar.opType}' with opsets: ${Pr.map(Mr=>`${Mr.domain||"ai.onnx"} v${Mr.version}`).join(", ")}`)}},1287:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.onnxruntime=void 0;const Ar=Rr(5686);var Pr,Lr;(function(Mr){(function(Fr){Fr[Fr.UNDEFINED=0]="UNDEFINED",Fr[Fr.FLOAT=1]="FLOAT",Fr[Fr.INT=2]="INT",Fr[Fr.STRING=3]="STRING",Fr[Fr.TENSOR=4]="TENSOR",Fr[Fr.GRAPH=5]="GRAPH",Fr[Fr.FLOATS=6]="FLOATS",Fr[Fr.INTS=7]="INTS",Fr[Fr.STRINGS=8]="STRINGS",Fr[Fr.TENSORS=9]="TENSORS",Fr[Fr.GRAPHS=10]="GRAPHS",Fr[Fr.SPARSE_TENSOR=11]="SPARSE_TENSOR",Fr[Fr.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(Mr.AttributeType||(Mr.AttributeType={}))})((Lr=(Pr=Tr.onnxruntime||(Tr.onnxruntime={})).experimental||(Pr.experimental={})).fbs||(Lr.fbs={})),function(Mr){(function(Fr){(function(zr){(function(Ur){Ur[Ur.UNKNOWN=0]="UNKNOWN",Ur[Ur.VALUE=1]="VALUE",Ur[Ur.PARAM=2]="PARAM"})(zr.DimensionValueType||(zr.DimensionValueType={}))})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){(function(Ur){Ur[Ur.UNDEFINED=0]="UNDEFINED",Ur[Ur.FLOAT=1]="FLOAT",Ur[Ur.UINT8=2]="UINT8",Ur[Ur.INT8=3]="INT8",Ur[Ur.UINT16=4]="UINT16",Ur[Ur.INT16=5]="INT16",Ur[Ur.INT32=6]="INT32",Ur[Ur.INT64=7]="INT64",Ur[Ur.STRING=8]="STRING",Ur[Ur.BOOL=9]="BOOL",Ur[Ur.FLOAT16=10]="FLOAT16",Ur[Ur.DOUBLE=11]="DOUBLE",Ur[Ur.UINT32=12]="UINT32",Ur[Ur.UINT64=13]="UINT64",Ur[Ur.COMPLEX64=14]="COMPLEX64",Ur[Ur.COMPLEX128=15]="COMPLEX128",Ur[Ur.BFLOAT16=16]="BFLOAT16"})(zr.TensorDataType||(zr.TensorDataType={}))})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){(function(Ur){Ur[Ur.Primitive=0]="Primitive",Ur[Ur.Fused=1]="Fused"})(zr.NodeType||(zr.NodeType={}))})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){(function(Ur){Ur[Ur.NONE=0]="NONE",Ur[Ur.tensor_type=1]="tensor_type",Ur[Ur.sequence_type=2]="sequence_type",Ur[Ur.map_type=3]="map_type"})(zr.TypeInfoValue||(zr.TypeInfoValue={}))})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsShape(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsShape(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}dim(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,4);return jr?(Dr||new Mr.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+jr)+4*Nr),this.bb):null}dimLength(){let Nr=this.bb.__offset(this.bb_pos,4);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}static startShape(Nr){Nr.startObject(1)}static addDim(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static createDimVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startDimVector(Nr,Dr){Nr.startVector(4,Dr,4)}static endShape(Nr){return Nr.endObject()}static createShape(Nr,Dr){return Ur.startShape(Nr),Ur.addDim(Nr,Dr),Ur.endShape(Nr)}}zr.Shape=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsDimension(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsDimension(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}value(Nr){let Dr=this.bb.__offset(this.bb_pos,4);return Dr?(Nr||new Mr.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}denotation(Nr){let Dr=this.bb.__offset(this.bb_pos,6);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}static startDimension(Nr){Nr.startObject(2)}static addValue(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static addDenotation(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static endDimension(Nr){return Nr.endObject()}static createDimension(Nr,Dr,jr){return Ur.startDimension(Nr),Ur.addValue(Nr,Dr),Ur.addDenotation(Nr,jr),Ur.endDimension(Nr)}}zr.Dimension=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsDimensionValue(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsDimensionValue(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}dimType(){let Nr=this.bb.__offset(this.bb_pos,4);return Nr?this.bb.readInt8(this.bb_pos+Nr):Mr.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let Nr=this.bb.__offset(this.bb_pos,6);return Nr?this.bb.readInt64(this.bb_pos+Nr):this.bb.createLong(0,0)}dimParam(Nr){let Dr=this.bb.__offset(this.bb_pos,8);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}static startDimensionValue(Nr){Nr.startObject(3)}static addDimType(Nr,Dr){Nr.addFieldInt8(0,Dr,Mr.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(Nr,Dr){Nr.addFieldInt64(1,Dr,Nr.createLong(0,0))}static addDimParam(Nr,Dr){Nr.addFieldOffset(2,Dr,0)}static endDimensionValue(Nr){return Nr.endObject()}static createDimensionValue(Nr,Dr,jr,Gr){return Ur.startDimensionValue(Nr),Ur.addDimType(Nr,Dr),Ur.addDimValue(Nr,jr),Ur.addDimParam(Nr,Gr),Ur.endDimensionValue(Nr)}}zr.DimensionValue=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsTensorTypeAndShape(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsTensorTypeAndShape(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}elemType(){let Nr=this.bb.__offset(this.bb_pos,4);return Nr?this.bb.readInt32(this.bb_pos+Nr):Mr.experimental.fbs.TensorDataType.UNDEFINED}shape(Nr){let Dr=this.bb.__offset(this.bb_pos,6);return Dr?(Nr||new Mr.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}static startTensorTypeAndShape(Nr){Nr.startObject(2)}static addElemType(Nr,Dr){Nr.addFieldInt32(0,Dr,Mr.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static endTensorTypeAndShape(Nr){return Nr.endObject()}static createTensorTypeAndShape(Nr,Dr,jr){return Ur.startTensorTypeAndShape(Nr),Ur.addElemType(Nr,Dr),Ur.addShape(Nr,jr),Ur.endTensorTypeAndShape(Nr)}}zr.TensorTypeAndShape=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsMapType(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsMapType(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}keyType(){let Nr=this.bb.__offset(this.bb_pos,4);return Nr?this.bb.readInt32(this.bb_pos+Nr):Mr.experimental.fbs.TensorDataType.UNDEFINED}valueType(Nr){let Dr=this.bb.__offset(this.bb_pos,6);return Dr?(Nr||new Mr.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}static startMapType(Nr){Nr.startObject(2)}static addKeyType(Nr,Dr){Nr.addFieldInt32(0,Dr,Mr.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static endMapType(Nr){return Nr.endObject()}static createMapType(Nr,Dr,jr){return Ur.startMapType(Nr),Ur.addKeyType(Nr,Dr),Ur.addValueType(Nr,jr),Ur.endMapType(Nr)}}zr.MapType=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsSequenceType(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsSequenceType(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}elemType(Nr){let Dr=this.bb.__offset(this.bb_pos,4);return Dr?(Nr||new Mr.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}static startSequenceType(Nr){Nr.startObject(1)}static addElemType(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static endSequenceType(Nr){return Nr.endObject()}static createSequenceType(Nr,Dr){return Ur.startSequenceType(Nr),Ur.addElemType(Nr,Dr),Ur.endSequenceType(Nr)}}zr.SequenceType=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(Fr.fbs||(Fr.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(zr,Ur){return this.bb_pos=zr,this.bb=Ur,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(zr,Ur,Vr,Nr){return zr.prep(4,12),zr.writeInt32(Nr),zr.writeInt32(Vr),zr.writeInt32(Ur),zr.offset()}}})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsNodeEdge(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsNodeEdge(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}nodeIndex(){let Nr=this.bb.__offset(this.bb_pos,4);return Nr?this.bb.readUint32(this.bb_pos+Nr):0}inputEdges(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,6);return jr?(Dr||new Mr.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+jr)+12*Nr,this.bb):null}inputEdgesLength(){let Nr=this.bb.__offset(this.bb_pos,6);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}outputEdges(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,8);return jr?(Dr||new Mr.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+jr)+12*Nr,this.bb):null}outputEdgesLength(){let Nr=this.bb.__offset(this.bb_pos,8);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}static startNodeEdge(Nr){Nr.startObject(3)}static addNodeIndex(Nr,Dr){Nr.addFieldInt32(0,Dr,0)}static addInputEdges(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static startInputEdgesVector(Nr,Dr){Nr.startVector(12,Dr,4)}static addOutputEdges(Nr,Dr){Nr.addFieldOffset(2,Dr,0)}static startOutputEdgesVector(Nr,Dr){Nr.startVector(12,Dr,4)}static endNodeEdge(Nr){return Nr.endObject()}static createNodeEdge(Nr,Dr,jr,Gr){return Ur.startNodeEdge(Nr),Ur.addNodeIndex(Nr,Dr),Ur.addInputEdges(Nr,jr),Ur.addOutputEdges(Nr,Gr),Ur.endNodeEdge(Nr)}}zr.NodeEdge=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsNode(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsNode(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}name(Nr){let Dr=this.bb.__offset(this.bb_pos,4);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}docString(Nr){let Dr=this.bb.__offset(this.bb_pos,6);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}domain(Nr){let Dr=this.bb.__offset(this.bb_pos,8);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}sinceVersion(){let Nr=this.bb.__offset(this.bb_pos,10);return Nr?this.bb.readInt32(this.bb_pos+Nr):0}index(){let Nr=this.bb.__offset(this.bb_pos,12);return Nr?this.bb.readUint32(this.bb_pos+Nr):0}opType(Nr){let Dr=this.bb.__offset(this.bb_pos,14);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}type(){let Nr=this.bb.__offset(this.bb_pos,16);return Nr?this.bb.readInt32(this.bb_pos+Nr):Mr.experimental.fbs.NodeType.Primitive}executionProviderType(Nr){let Dr=this.bb.__offset(this.bb_pos,18);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}inputs(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,20);return jr?this.bb.__string(this.bb.__vector(this.bb_pos+jr)+4*Nr,Dr):null}inputsLength(){let Nr=this.bb.__offset(this.bb_pos,20);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}outputs(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,22);return jr?this.bb.__string(this.bb.__vector(this.bb_pos+jr)+4*Nr,Dr):null}outputsLength(){let Nr=this.bb.__offset(this.bb_pos,22);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}attributes(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,24);return jr?(Dr||new Mr.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+jr)+4*Nr),this.bb):null}attributesLength(){let Nr=this.bb.__offset(this.bb_pos,24);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}inputArgCounts(Nr){let Dr=this.bb.__offset(this.bb_pos,26);return Dr?this.bb.readInt32(this.bb.__vector(this.bb_pos+Dr)+4*Nr):0}inputArgCountsLength(){let Nr=this.bb.__offset(this.bb_pos,26);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}inputArgCountsArray(){let Nr=this.bb.__offset(this.bb_pos,26);return Nr?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Nr),this.bb.__vector_len(this.bb_pos+Nr)):null}implicitInputs(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,28);return jr?this.bb.__string(this.bb.__vector(this.bb_pos+jr)+4*Nr,Dr):null}implicitInputsLength(){let Nr=this.bb.__offset(this.bb_pos,28);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}static startNode(Nr){Nr.startObject(13)}static addName(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static addDocString(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static addDomain(Nr,Dr){Nr.addFieldOffset(2,Dr,0)}static addSinceVersion(Nr,Dr){Nr.addFieldInt32(3,Dr,0)}static addIndex(Nr,Dr){Nr.addFieldInt32(4,Dr,0)}static addOpType(Nr,Dr){Nr.addFieldOffset(5,Dr,0)}static addType(Nr,Dr){Nr.addFieldInt32(6,Dr,Mr.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(Nr,Dr){Nr.addFieldOffset(7,Dr,0)}static addInputs(Nr,Dr){Nr.addFieldOffset(8,Dr,0)}static createInputsVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startInputsVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addOutputs(Nr,Dr){Nr.addFieldOffset(9,Dr,0)}static createOutputsVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startOutputsVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addAttributes(Nr,Dr){Nr.addFieldOffset(10,Dr,0)}static createAttributesVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startAttributesVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addInputArgCounts(Nr,Dr){Nr.addFieldOffset(11,Dr,0)}static createInputArgCountsVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addInt32(Dr[jr]);return Nr.endVector()}static startInputArgCountsVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addImplicitInputs(Nr,Dr){Nr.addFieldOffset(12,Dr,0)}static createImplicitInputsVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startImplicitInputsVector(Nr,Dr){Nr.startVector(4,Dr,4)}static endNode(Nr){return Nr.endObject()}static createNode(Nr,Dr,jr,Gr,Wr,qr,Kr,Xr,Zr,Jr,_i,es,ts,rs){return Ur.startNode(Nr),Ur.addName(Nr,Dr),Ur.addDocString(Nr,jr),Ur.addDomain(Nr,Gr),Ur.addSinceVersion(Nr,Wr),Ur.addIndex(Nr,qr),Ur.addOpType(Nr,Kr),Ur.addType(Nr,Xr),Ur.addExecutionProviderType(Nr,Zr),Ur.addInputs(Nr,Jr),Ur.addOutputs(Nr,_i),Ur.addAttributes(Nr,es),Ur.addInputArgCounts(Nr,ts),Ur.addImplicitInputs(Nr,rs),Ur.endNode(Nr)}}zr.Node=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsValueInfo(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsValueInfo(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}name(Nr){let Dr=this.bb.__offset(this.bb_pos,4);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}docString(Nr){let Dr=this.bb.__offset(this.bb_pos,6);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}type(Nr){let Dr=this.bb.__offset(this.bb_pos,8);return Dr?(Nr||new Mr.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}static startValueInfo(Nr){Nr.startObject(3)}static addName(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static addDocString(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static addType(Nr,Dr){Nr.addFieldOffset(2,Dr,0)}static endValueInfo(Nr){return Nr.endObject()}static createValueInfo(Nr,Dr,jr,Gr){return Ur.startValueInfo(Nr),Ur.addName(Nr,Dr),Ur.addDocString(Nr,jr),Ur.addType(Nr,Gr),Ur.endValueInfo(Nr)}}zr.ValueInfo=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsTypeInfo(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsTypeInfo(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}denotation(Nr){let Dr=this.bb.__offset(this.bb_pos,4);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}valueType(){let Nr=this.bb.__offset(this.bb_pos,6);return Nr?this.bb.readUint8(this.bb_pos+Nr):Mr.experimental.fbs.TypeInfoValue.NONE}value(Nr){let Dr=this.bb.__offset(this.bb_pos,8);return Dr?this.bb.__union(Nr,this.bb_pos+Dr):null}static startTypeInfo(Nr){Nr.startObject(3)}static addDenotation(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static addValueType(Nr,Dr){Nr.addFieldInt8(1,Dr,Mr.experimental.fbs.TypeInfoValue.NONE)}static addValue(Nr,Dr){Nr.addFieldOffset(2,Dr,0)}static endTypeInfo(Nr){return Nr.endObject()}static createTypeInfo(Nr,Dr,jr,Gr){return Ur.startTypeInfo(Nr),Ur.addDenotation(Nr,Dr),Ur.addValueType(Nr,jr),Ur.addValue(Nr,Gr),Ur.endTypeInfo(Nr)}}zr.TypeInfo=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsOperatorSetId(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsOperatorSetId(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}domain(Nr){let Dr=this.bb.__offset(this.bb_pos,4);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}version(){let Nr=this.bb.__offset(this.bb_pos,6);return Nr?this.bb.readInt64(this.bb_pos+Nr):this.bb.createLong(0,0)}static startOperatorSetId(Nr){Nr.startObject(2)}static addDomain(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static addVersion(Nr,Dr){Nr.addFieldInt64(1,Dr,Nr.createLong(0,0))}static endOperatorSetId(Nr){return Nr.endObject()}static createOperatorSetId(Nr,Dr,jr){return Ur.startOperatorSetId(Nr),Ur.addDomain(Nr,Dr),Ur.addVersion(Nr,jr),Ur.endOperatorSetId(Nr)}}zr.OperatorSetId=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsTensor(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsTensor(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}name(Nr){let Dr=this.bb.__offset(this.bb_pos,4);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}docString(Nr){let Dr=this.bb.__offset(this.bb_pos,6);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}dims(Nr){let Dr=this.bb.__offset(this.bb_pos,8);return Dr?this.bb.readInt64(this.bb.__vector(this.bb_pos+Dr)+8*Nr):this.bb.createLong(0,0)}dimsLength(){let Nr=this.bb.__offset(this.bb_pos,8);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}dataType(){let Nr=this.bb.__offset(this.bb_pos,10);return Nr?this.bb.readInt32(this.bb_pos+Nr):Mr.experimental.fbs.TensorDataType.UNDEFINED}rawData(Nr){let Dr=this.bb.__offset(this.bb_pos,12);return Dr?this.bb.readUint8(this.bb.__vector(this.bb_pos+Dr)+Nr):0}rawDataLength(){let Nr=this.bb.__offset(this.bb_pos,12);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}rawDataArray(){let Nr=this.bb.__offset(this.bb_pos,12);return Nr?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Nr),this.bb.__vector_len(this.bb_pos+Nr)):null}stringData(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,14);return jr?this.bb.__string(this.bb.__vector(this.bb_pos+jr)+4*Nr,Dr):null}stringDataLength(){let Nr=this.bb.__offset(this.bb_pos,14);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}static startTensor(Nr){Nr.startObject(6)}static addName(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static addDocString(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static addDims(Nr,Dr){Nr.addFieldOffset(2,Dr,0)}static createDimsVector(Nr,Dr){Nr.startVector(8,Dr.length,8);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addInt64(Dr[jr]);return Nr.endVector()}static startDimsVector(Nr,Dr){Nr.startVector(8,Dr,8)}static addDataType(Nr,Dr){Nr.addFieldInt32(3,Dr,Mr.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(Nr,Dr){Nr.addFieldOffset(4,Dr,0)}static createRawDataVector(Nr,Dr){Nr.startVector(1,Dr.length,1);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addInt8(Dr[jr]);return Nr.endVector()}static startRawDataVector(Nr,Dr){Nr.startVector(1,Dr,1)}static addStringData(Nr,Dr){Nr.addFieldOffset(5,Dr,0)}static createStringDataVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startStringDataVector(Nr,Dr){Nr.startVector(4,Dr,4)}static endTensor(Nr){return Nr.endObject()}static createTensor(Nr,Dr,jr,Gr,Wr,qr,Kr){return Ur.startTensor(Nr),Ur.addName(Nr,Dr),Ur.addDocString(Nr,jr),Ur.addDims(Nr,Gr),Ur.addDataType(Nr,Wr),Ur.addRawData(Nr,qr),Ur.addStringData(Nr,Kr),Ur.endTensor(Nr)}}zr.Tensor=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsSparseTensor(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsSparseTensor(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}values(Nr){let Dr=this.bb.__offset(this.bb_pos,4);return Dr?(Nr||new Mr.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}indices(Nr){let Dr=this.bb.__offset(this.bb_pos,6);return Dr?(Nr||new Mr.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}dims(Nr){let Dr=this.bb.__offset(this.bb_pos,8);return Dr?this.bb.readInt64(this.bb.__vector(this.bb_pos+Dr)+8*Nr):this.bb.createLong(0,0)}dimsLength(){let Nr=this.bb.__offset(this.bb_pos,8);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}static startSparseTensor(Nr){Nr.startObject(3)}static addValues(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static addIndices(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static addDims(Nr,Dr){Nr.addFieldOffset(2,Dr,0)}static createDimsVector(Nr,Dr){Nr.startVector(8,Dr.length,8);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addInt64(Dr[jr]);return Nr.endVector()}static startDimsVector(Nr,Dr){Nr.startVector(8,Dr,8)}static endSparseTensor(Nr){return Nr.endObject()}static createSparseTensor(Nr,Dr,jr,Gr){return Ur.startSparseTensor(Nr),Ur.addValues(Nr,Dr),Ur.addIndices(Nr,jr),Ur.addDims(Nr,Gr),Ur.endSparseTensor(Nr)}}zr.SparseTensor=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsAttribute(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsAttribute(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}name(Nr){let Dr=this.bb.__offset(this.bb_pos,4);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}docString(Nr){let Dr=this.bb.__offset(this.bb_pos,6);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}type(){let Nr=this.bb.__offset(this.bb_pos,8);return Nr?this.bb.readInt32(this.bb_pos+Nr):Mr.experimental.fbs.AttributeType.UNDEFINED}f(){let Nr=this.bb.__offset(this.bb_pos,10);return Nr?this.bb.readFloat32(this.bb_pos+Nr):0}i(){let Nr=this.bb.__offset(this.bb_pos,12);return Nr?this.bb.readInt64(this.bb_pos+Nr):this.bb.createLong(0,0)}s(Nr){let Dr=this.bb.__offset(this.bb_pos,14);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}t(Nr){let Dr=this.bb.__offset(this.bb_pos,16);return Dr?(Nr||new Mr.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}g(Nr){let Dr=this.bb.__offset(this.bb_pos,18);return Dr?(Nr||new Mr.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}floats(Nr){let Dr=this.bb.__offset(this.bb_pos,20);return Dr?this.bb.readFloat32(this.bb.__vector(this.bb_pos+Dr)+4*Nr):0}floatsLength(){let Nr=this.bb.__offset(this.bb_pos,20);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}floatsArray(){let Nr=this.bb.__offset(this.bb_pos,20);return Nr?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Nr),this.bb.__vector_len(this.bb_pos+Nr)):null}ints(Nr){let Dr=this.bb.__offset(this.bb_pos,22);return Dr?this.bb.readInt64(this.bb.__vector(this.bb_pos+Dr)+8*Nr):this.bb.createLong(0,0)}intsLength(){let Nr=this.bb.__offset(this.bb_pos,22);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}strings(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,24);return jr?this.bb.__string(this.bb.__vector(this.bb_pos+jr)+4*Nr,Dr):null}stringsLength(){let Nr=this.bb.__offset(this.bb_pos,24);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}tensors(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,26);return jr?(Dr||new Mr.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+jr)+4*Nr),this.bb):null}tensorsLength(){let Nr=this.bb.__offset(this.bb_pos,26);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}graphs(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,28);return jr?(Dr||new Mr.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+jr)+4*Nr),this.bb):null}graphsLength(){let Nr=this.bb.__offset(this.bb_pos,28);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}static startAttribute(Nr){Nr.startObject(13)}static addName(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static addDocString(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static addType(Nr,Dr){Nr.addFieldInt32(2,Dr,Mr.experimental.fbs.AttributeType.UNDEFINED)}static addF(Nr,Dr){Nr.addFieldFloat32(3,Dr,0)}static addI(Nr,Dr){Nr.addFieldInt64(4,Dr,Nr.createLong(0,0))}static addS(Nr,Dr){Nr.addFieldOffset(5,Dr,0)}static addT(Nr,Dr){Nr.addFieldOffset(6,Dr,0)}static addG(Nr,Dr){Nr.addFieldOffset(7,Dr,0)}static addFloats(Nr,Dr){Nr.addFieldOffset(8,Dr,0)}static createFloatsVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addFloat32(Dr[jr]);return Nr.endVector()}static startFloatsVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addInts(Nr,Dr){Nr.addFieldOffset(9,Dr,0)}static createIntsVector(Nr,Dr){Nr.startVector(8,Dr.length,8);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addInt64(Dr[jr]);return Nr.endVector()}static startIntsVector(Nr,Dr){Nr.startVector(8,Dr,8)}static addStrings(Nr,Dr){Nr.addFieldOffset(10,Dr,0)}static createStringsVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startStringsVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addTensors(Nr,Dr){Nr.addFieldOffset(11,Dr,0)}static createTensorsVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startTensorsVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addGraphs(Nr,Dr){Nr.addFieldOffset(12,Dr,0)}static createGraphsVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startGraphsVector(Nr,Dr){Nr.startVector(4,Dr,4)}static endAttribute(Nr){return Nr.endObject()}static createAttribute(Nr,Dr,jr,Gr,Wr,qr,Kr,Xr,Zr,Jr,_i,es,ts,rs){return Ur.startAttribute(Nr),Ur.addName(Nr,Dr),Ur.addDocString(Nr,jr),Ur.addType(Nr,Gr),Ur.addF(Nr,Wr),Ur.addI(Nr,qr),Ur.addS(Nr,Kr),Ur.addT(Nr,Xr),Ur.addG(Nr,Zr),Ur.addFloats(Nr,Jr),Ur.addInts(Nr,_i),Ur.addStrings(Nr,es),Ur.addTensors(Nr,ts),Ur.addGraphs(Nr,rs),Ur.endAttribute(Nr)}}zr.Attribute=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsGraph(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsGraph(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}initializers(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,4);return jr?(Dr||new Mr.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+jr)+4*Nr),this.bb):null}initializersLength(){let Nr=this.bb.__offset(this.bb_pos,4);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}nodeArgs(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,6);return jr?(Dr||new Mr.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+jr)+4*Nr),this.bb):null}nodeArgsLength(){let Nr=this.bb.__offset(this.bb_pos,6);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}nodes(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,8);return jr?(Dr||new Mr.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+jr)+4*Nr),this.bb):null}nodesLength(){let Nr=this.bb.__offset(this.bb_pos,8);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}maxNodeIndex(){let Nr=this.bb.__offset(this.bb_pos,10);return Nr?this.bb.readUint32(this.bb_pos+Nr):0}nodeEdges(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,12);return jr?(Dr||new Mr.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+jr)+4*Nr),this.bb):null}nodeEdgesLength(){let Nr=this.bb.__offset(this.bb_pos,12);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}inputs(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,14);return jr?this.bb.__string(this.bb.__vector(this.bb_pos+jr)+4*Nr,Dr):null}inputsLength(){let Nr=this.bb.__offset(this.bb_pos,14);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}outputs(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,16);return jr?this.bb.__string(this.bb.__vector(this.bb_pos+jr)+4*Nr,Dr):null}outputsLength(){let Nr=this.bb.__offset(this.bb_pos,16);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}sparseInitializers(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,18);return jr?(Dr||new Mr.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+jr)+4*Nr),this.bb):null}sparseInitializersLength(){let Nr=this.bb.__offset(this.bb_pos,18);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}static startGraph(Nr){Nr.startObject(8)}static addInitializers(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static createInitializersVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startInitializersVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addNodeArgs(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static createNodeArgsVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startNodeArgsVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addNodes(Nr,Dr){Nr.addFieldOffset(2,Dr,0)}static createNodesVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startNodesVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addMaxNodeIndex(Nr,Dr){Nr.addFieldInt32(3,Dr,0)}static addNodeEdges(Nr,Dr){Nr.addFieldOffset(4,Dr,0)}static createNodeEdgesVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startNodeEdgesVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addInputs(Nr,Dr){Nr.addFieldOffset(5,Dr,0)}static createInputsVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startInputsVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addOutputs(Nr,Dr){Nr.addFieldOffset(6,Dr,0)}static createOutputsVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startOutputsVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addSparseInitializers(Nr,Dr){Nr.addFieldOffset(7,Dr,0)}static createSparseInitializersVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startSparseInitializersVector(Nr,Dr){Nr.startVector(4,Dr,4)}static endGraph(Nr){return Nr.endObject()}static createGraph(Nr,Dr,jr,Gr,Wr,qr,Kr,Xr,Zr){return Ur.startGraph(Nr),Ur.addInitializers(Nr,Dr),Ur.addNodeArgs(Nr,jr),Ur.addNodes(Nr,Gr),Ur.addMaxNodeIndex(Nr,Wr),Ur.addNodeEdges(Nr,qr),Ur.addInputs(Nr,Kr),Ur.addOutputs(Nr,Xr),Ur.addSparseInitializers(Nr,Zr),Ur.endGraph(Nr)}}zr.Graph=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsModel(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsModel(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}irVersion(){let Nr=this.bb.__offset(this.bb_pos,4);return Nr?this.bb.readInt64(this.bb_pos+Nr):this.bb.createLong(0,0)}opsetImport(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,6);return jr?(Dr||new Mr.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+jr)+4*Nr),this.bb):null}opsetImportLength(){let Nr=this.bb.__offset(this.bb_pos,6);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}producerName(Nr){let Dr=this.bb.__offset(this.bb_pos,8);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}producerVersion(Nr){let Dr=this.bb.__offset(this.bb_pos,10);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}domain(Nr){let Dr=this.bb.__offset(this.bb_pos,12);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}modelVersion(){let Nr=this.bb.__offset(this.bb_pos,14);return Nr?this.bb.readInt64(this.bb_pos+Nr):this.bb.createLong(0,0)}docString(Nr){let Dr=this.bb.__offset(this.bb_pos,16);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}graph(Nr){let Dr=this.bb.__offset(this.bb_pos,18);return Dr?(Nr||new Mr.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}graphDocString(Nr){let Dr=this.bb.__offset(this.bb_pos,20);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}static startModel(Nr){Nr.startObject(9)}static addIrVersion(Nr,Dr){Nr.addFieldInt64(0,Dr,Nr.createLong(0,0))}static addOpsetImport(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static createOpsetImportVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startOpsetImportVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addProducerName(Nr,Dr){Nr.addFieldOffset(2,Dr,0)}static addProducerVersion(Nr,Dr){Nr.addFieldOffset(3,Dr,0)}static addDomain(Nr,Dr){Nr.addFieldOffset(4,Dr,0)}static addModelVersion(Nr,Dr){Nr.addFieldInt64(5,Dr,Nr.createLong(0,0))}static addDocString(Nr,Dr){Nr.addFieldOffset(6,Dr,0)}static addGraph(Nr,Dr){Nr.addFieldOffset(7,Dr,0)}static addGraphDocString(Nr,Dr){Nr.addFieldOffset(8,Dr,0)}static endModel(Nr){return Nr.endObject()}static createModel(Nr,Dr,jr,Gr,Wr,qr,Kr,Xr,Zr,Jr){return Ur.startModel(Nr),Ur.addIrVersion(Nr,Dr),Ur.addOpsetImport(Nr,jr),Ur.addProducerName(Nr,Gr),Ur.addProducerVersion(Nr,Wr),Ur.addDomain(Nr,qr),Ur.addModelVersion(Nr,Kr),Ur.addDocString(Nr,Xr),Ur.addGraph(Nr,Zr),Ur.addGraphDocString(Nr,Jr),Ur.endModel(Nr)}}zr.Model=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsKernelCreateInfos(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsKernelCreateInfos(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}nodeIndices(Nr){let Dr=this.bb.__offset(this.bb_pos,4);return Dr?this.bb.readUint32(this.bb.__vector(this.bb_pos+Dr)+4*Nr):0}nodeIndicesLength(){let Nr=this.bb.__offset(this.bb_pos,4);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}nodeIndicesArray(){let Nr=this.bb.__offset(this.bb_pos,4);return Nr?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Nr),this.bb.__vector_len(this.bb_pos+Nr)):null}kernelDefHashes(Nr){let Dr=this.bb.__offset(this.bb_pos,6);return Dr?this.bb.readUint64(this.bb.__vector(this.bb_pos+Dr)+8*Nr):this.bb.createLong(0,0)}kernelDefHashesLength(){let Nr=this.bb.__offset(this.bb_pos,6);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}static startKernelCreateInfos(Nr){Nr.startObject(2)}static addNodeIndices(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static createNodeIndicesVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addInt32(Dr[jr]);return Nr.endVector()}static startNodeIndicesVector(Nr,Dr){Nr.startVector(4,Dr,4)}static addKernelDefHashes(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static createKernelDefHashesVector(Nr,Dr){Nr.startVector(8,Dr.length,8);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addInt64(Dr[jr]);return Nr.endVector()}static startKernelDefHashesVector(Nr,Dr){Nr.startVector(8,Dr,8)}static endKernelCreateInfos(Nr){return Nr.endObject()}static createKernelCreateInfos(Nr,Dr,jr){return Ur.startKernelCreateInfos(Nr),Ur.addNodeIndices(Nr,Dr),Ur.addKernelDefHashes(Nr,jr),Ur.endKernelCreateInfos(Nr)}}zr.KernelCreateInfos=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsSubGraphSessionState(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsSubGraphSessionState(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}graphId(Nr){let Dr=this.bb.__offset(this.bb_pos,4);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}sessionState(Nr){let Dr=this.bb.__offset(this.bb_pos,6);return Dr?(Nr||new Mr.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}static startSubGraphSessionState(Nr){Nr.startObject(2)}static addGraphId(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static addSessionState(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static endSubGraphSessionState(Nr){let Dr=Nr.endObject();return Nr.requiredField(Dr,4),Dr}static createSubGraphSessionState(Nr,Dr,jr){return Ur.startSubGraphSessionState(Nr),Ur.addGraphId(Nr,Dr),Ur.addSessionState(Nr,jr),Ur.endSubGraphSessionState(Nr)}}zr.SubGraphSessionState=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsSessionState(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsSessionState(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}kernels(Nr){let Dr=this.bb.__offset(this.bb_pos,4);return Dr?(Nr||new Mr.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}subGraphSessionStates(Nr,Dr){let jr=this.bb.__offset(this.bb_pos,6);return jr?(Dr||new Mr.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+jr)+4*Nr),this.bb):null}subGraphSessionStatesLength(){let Nr=this.bb.__offset(this.bb_pos,6);return Nr?this.bb.__vector_len(this.bb_pos+Nr):0}static startSessionState(Nr){Nr.startObject(2)}static addKernels(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static addSubGraphSessionStates(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static createSubGraphSessionStatesVector(Nr,Dr){Nr.startVector(4,Dr.length,4);for(let jr=Dr.length-1;jr>=0;jr--)Nr.addOffset(Dr[jr]);return Nr.endVector()}static startSubGraphSessionStatesVector(Nr,Dr){Nr.startVector(4,Dr,4)}static endSessionState(Nr){return Nr.endObject()}static createSessionState(Nr,Dr,jr){return Ur.startSessionState(Nr),Ur.addKernels(Nr,Dr),Ur.addSubGraphSessionStates(Nr,jr),Ur.endSessionState(Nr)}}zr.SessionState=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={})),function(Mr){(function(Fr){(function(zr){class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(Nr,Dr){return this.bb_pos=Nr,this.bb=Dr,this}static getRootAsInferenceSession(Nr,Dr){return(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static getSizePrefixedRootAsInferenceSession(Nr,Dr){return Nr.setPosition(Nr.position()+Ar.flatbuffers.SIZE_PREFIX_LENGTH),(Dr||new Ur).__init(Nr.readInt32(Nr.position())+Nr.position(),Nr)}static bufferHasIdentifier(Nr){return Nr.__has_identifier("ORTM")}ortVersion(Nr){let Dr=this.bb.__offset(this.bb_pos,4);return Dr?this.bb.__string(this.bb_pos+Dr,Nr):null}model(Nr){let Dr=this.bb.__offset(this.bb_pos,6);return Dr?(Nr||new Mr.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}sessionState(Nr){let Dr=this.bb.__offset(this.bb_pos,8);return Dr?(Nr||new Mr.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+Dr),this.bb):null}static startInferenceSession(Nr){Nr.startObject(3)}static addOrtVersion(Nr,Dr){Nr.addFieldOffset(0,Dr,0)}static addModel(Nr,Dr){Nr.addFieldOffset(1,Dr,0)}static addSessionState(Nr,Dr){Nr.addFieldOffset(2,Dr,0)}static endInferenceSession(Nr){return Nr.endObject()}static finishInferenceSessionBuffer(Nr,Dr){Nr.finish(Dr,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(Nr,Dr){Nr.finish(Dr,"ORTM",!0)}static createInferenceSession(Nr,Dr,jr,Gr){return Ur.startInferenceSession(Nr),Ur.addOrtVersion(Nr,Dr),Ur.addModel(Nr,jr),Ur.addSessionState(Nr,Gr),Ur.endInferenceSession(Nr)}}zr.InferenceSession=Ur})(Fr.fbs||(Fr.fbs={}))})(Mr.experimental||(Mr.experimental={}))}(Tr.onnxruntime||(Tr.onnxruntime={}))},1723:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.OnnxjsSessionHandler=void 0;const Ar=Rr(8453),Pr=Rr(9240);Tr.OnnxjsSessionHandler=class{constructor(Lr){this.session=Lr,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(Lr,Mr,Fr){const zr=new Map;for(const Nr in Lr)if(Object.hasOwnProperty.call(Lr,Nr)){const Dr=Lr[Nr];zr.set(Nr,new Pr.Tensor(Dr.dims,Dr.type,void 0,void 0,Dr.data))}const Ur=await this.session.run(zr),Vr={};return Ur.forEach((Nr,Dr)=>{Vr[Dr]=new Ar.Tensor(Nr.type,Nr.data,Nr.dims)}),Vr}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6027:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.Session=void 0;const Ar=Rr(7067),Pr=Rr(1296),Lr=Rr(1975),Mr=Rr(6496),Fr=Rr(1315),zr=Rr(1745);Tr.Session=class{constructor(Ur={}){this._initialized=!1,this.backendHint=Ur.backendHint,this.profiler=Fr.Profiler.create(Ur.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(Ur,Vr,Nr){await this.profiler.event("session","Session.loadModel",async()=>{const Dr=await(0,Lr.resolveBackend)(this.backendHint);if(this.sessionHandler=Dr.createSessionHandler(this.context),this._model=new zr.Model,typeof Ur=="string"){const jr=Ur.endsWith(".ort");if(typeof fetch>"u"){const Gr=await(0,Pr.promisify)(Ar.readFile)(Ur);this.initialize(Gr,jr)}else{const Gr=await fetch(Ur),Wr=await Gr.arrayBuffer();this.initialize(new Uint8Array(Wr),jr)}}else if(ArrayBuffer.isView(Ur))this.initialize(Ur);else{const jr=new Uint8Array(Ur,Vr||0,Nr||Ur.byteLength);this.initialize(jr)}})}initialize(Ur,Vr){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const Nr=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(Ur,Nr,Vr),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new Mr.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(Ur){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const Vr=this.normalizeAndValidateInputs(Ur),Nr=await this._executionPlan.execute(this.sessionHandler,Vr);return this.createOutput(Nr)})}normalizeAndValidateInputs(Ur){const Vr=this._model.graph.getInputNames();if(Array.isArray(Ur)){if(Ur.length!==Vr.length)throw new Error(`incorrect input array length: expected ${Vr.length} but got ${Ur.length}`)}else{if(Ur.size!==Vr.length)throw new Error(`incorrect input map size: expected ${Vr.length} but got ${Ur.size}`);const Nr=new Array(Ur.size);let Dr=0;for(let jr=0;jr<Vr.length;++jr){const Gr=Ur.get(Vr[jr]);if(!Gr)throw new Error(`missing input tensor for: '${name}'`);Nr[Dr++]=Gr}Ur=Nr}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,Ur,!1);else{const Nr=this._model.graph.getInputIndices(),Dr=this._model.graph.getValues(),jr=new Array(Nr.length);for(let Gr=0;Gr<Nr.length;++Gr){const Wr=Dr[Nr[Gr]];jr[Gr]=Wr.type.shape.dims,this.context.graphInputTypes.push(Wr.type.tensorType),this.context.graphInputDims.push(Ur[Gr].dims)}this.validateInputTensorDims(jr,Ur,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,Ur),Ur}validateInputTensorTypes(Ur,Vr){for(let Nr=0;Nr<Vr.length;Nr++){const Dr=Ur[Nr],jr=Vr[Nr].type;if(Dr!==jr)throw new Error(`input tensor[${Nr}] check failed: expected type '${Dr}' but got ${jr}`)}}validateInputTensorDims(Ur,Vr,Nr){for(let Dr=0;Dr<Vr.length;Dr++){const jr=Ur[Dr],Gr=Vr[Dr].dims;if(!this.compareTensorDims(jr,Gr,Nr))throw new Error(`input tensor[${Dr}] check failed: expected shape '[${jr.join(",")}]' but got [${Gr.join(",")}]`)}}compareTensorDims(Ur,Vr,Nr){if(Ur.length!==Vr.length)return!1;for(let Dr=0;Dr<Ur.length;++Dr)if(Ur[Dr]!==Vr[Dr]&&(!Nr||Ur[Dr]!==0))return!1;return!0}createOutput(Ur){const Vr=this._model.graph.getOutputNames();if(Ur.length!==Vr.length)throw new Error("expected number of outputs do not match number of generated outputs");const Nr=new Map;for(let Dr=0;Dr<Vr.length;++Dr)Nr.set(Vr[Dr],Ur[Dr]);return Nr}initializeOps(Ur){const Vr=Ur.getNodes();this._ops=new Array(Vr.length);for(let Nr=0;Nr<Vr.length;Nr++)this._ops[Nr]=this.sessionHandler.resolve(Vr[Nr],this._model.opsets,Ur)}}},9240:function(_r,Tr,Rr){var Ar=this&&this.__importDefault||function(Wr){return Wr&&Wr.__esModule?Wr:{default:Wr}};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.Tensor=void 0;const Pr=Rr(3442),Lr=Ar(Rr(3720)),Mr=Rr(1446),Fr=Rr(1287),zr=Rr(7273);var Ur=Fr.onnxruntime.experimental.fbs;class Vr{get data(){if(this.cache===void 0){const qr=this.dataProvider(this.dataId);if(qr.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=qr}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(qr){return this.data[zr.ShapeUtil.indicesToOffset(qr,this.strides)]}set(qr,Kr){this.data[zr.ShapeUtil.indicesToOffset(qr,this.strides)]=Kr}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=zr.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(qr,Kr,Xr,Zr,Jr,_i=Pr.Guid.create()){this.dims=qr,this.type=Kr,this.dataProvider=Xr,this.asyncDataProvider=Zr,this.cache=Jr,this.dataId=_i,this.size=zr.ShapeUtil.validateDimsAndCalcSize(qr);const es=this.size,ts=Xr===void 0&&Zr===void 0&&Jr===void 0;if(Jr!==void 0&&Jr.length!==es)throw new RangeError("Input dims doesn't match data length.");if(Kr==="string"){if(!(Jr===void 0||Array.isArray(Jr)&&Jr.every(rs=>typeof rs=="string")))throw new TypeError("cache should be a string array");ts&&(this.cache=new Array(es))}else{if(Jr!==void 0){const rs=Dr(Kr);if(!(Jr instanceof rs))throw new TypeError(`cache should be type ${rs.name}`)}if(ts){const rs=new ArrayBuffer(es*function(ns){switch(ns){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${ns}`)}}(Kr));this.cache=function(ns,as){return new(Dr(as))(ns)}(rs,Kr)}}}static fromProto(qr){if(!qr)throw new Error("cannot construct Value from an empty tensor");const Kr=zr.ProtoUtil.tensorDataTypeFromProto(qr.dataType),Xr=zr.ProtoUtil.tensorDimsFromProto(qr.dims),Zr=new Vr(Xr,Kr);if(Kr==="string")qr.stringData.forEach((Jr,_i)=>{Zr.data[_i]=(0,zr.decodeUtf8String)(Jr)});else if(qr.rawData&&typeof qr.rawData.byteLength=="number"&&qr.rawData.byteLength>0){const Jr=Zr.data,_i=new DataView(qr.rawData.buffer,qr.rawData.byteOffset,qr.rawData.byteLength),es=Nr(qr.dataType),ts=qr.rawData.byteLength/es;if(qr.rawData.byteLength%es!=0)throw new Error("invalid buffer length");if(Jr.length!==ts)throw new Error("buffer length mismatch");for(let rs=0;rs<ts;rs++){const ns=Gr(_i,qr.dataType,rs*es);Jr[rs]=ns}}else{let Jr;switch(qr.dataType){case Mr.onnx.TensorProto.DataType.FLOAT:Jr=qr.floatData;break;case Mr.onnx.TensorProto.DataType.INT32:case Mr.onnx.TensorProto.DataType.INT16:case Mr.onnx.TensorProto.DataType.UINT16:case Mr.onnx.TensorProto.DataType.INT8:case Mr.onnx.TensorProto.DataType.UINT8:case Mr.onnx.TensorProto.DataType.BOOL:Jr=qr.int32Data;break;case Mr.onnx.TensorProto.DataType.INT64:Jr=qr.int64Data;break;case Mr.onnx.TensorProto.DataType.DOUBLE:Jr=qr.doubleData;break;case Mr.onnx.TensorProto.DataType.UINT32:case Mr.onnx.TensorProto.DataType.UINT64:Jr=qr.uint64Data;break;default:throw new Error("unspecific error")}if(Jr==null)throw new Error("failed to populate data from a tensorproto value");const _i=Zr.data;if(_i.length!==Jr.length)throw new Error("array length mismatch");for(let es=0;es<Jr.length;es++){const ts=Jr[es];Lr.default.isLong(ts)?_i[es]=jr(ts,qr.dataType):_i[es]=ts}}return Zr}static fromData(qr,Kr,Xr){return new Vr(Kr,Xr,void 0,void 0,qr)}static fromOrtTensor(qr){if(!qr)throw new Error("cannot construct Value from an empty tensor");const Kr=zr.ProtoUtil.tensorDimsFromORTFormat(qr),Xr=zr.ProtoUtil.tensorDataTypeFromProto(qr.dataType()),Zr=new Vr(Kr,Xr);if(Xr==="string")for(let Jr=0;Jr<qr.stringDataLength();Jr++)Zr.data[Jr]=qr.stringData(Jr);else if(qr.rawDataArray()&&typeof qr.rawDataLength()=="number"&&qr.rawDataLength()>0){const Jr=Zr.data,_i=new DataView(qr.rawDataArray().buffer,qr.rawDataArray().byteOffset,qr.rawDataLength()),es=Nr(qr.dataType()),ts=qr.rawDataLength()/es;if(qr.rawDataLength()%es!=0)throw new Error("invalid buffer length");if(Jr.length!==ts)throw new Error("buffer length mismatch");for(let rs=0;rs<ts;rs++){const ns=Gr(_i,qr.dataType(),rs*es);Jr[rs]=ns}}return Zr}}function Nr(Wr){switch(Wr){case Mr.onnx.TensorProto.DataType.UINT8:case Mr.onnx.TensorProto.DataType.INT8:case Mr.onnx.TensorProto.DataType.BOOL:return 1;case Mr.onnx.TensorProto.DataType.UINT16:case Mr.onnx.TensorProto.DataType.INT16:return 2;case Mr.onnx.TensorProto.DataType.FLOAT:case Mr.onnx.TensorProto.DataType.INT32:case Mr.onnx.TensorProto.DataType.UINT32:return 4;case Mr.onnx.TensorProto.DataType.INT64:case Mr.onnx.TensorProto.DataType.DOUBLE:case Mr.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${Mr.onnx.TensorProto.DataType[Wr]}`)}}function Dr(Wr){switch(Wr){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function jr(Wr,qr){if(qr===Mr.onnx.TensorProto.DataType.INT64||qr===Ur.TensorDataType.INT64){if(Wr.greaterThanOrEqual(2147483648)||Wr.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(qr!==Mr.onnx.TensorProto.DataType.UINT32&&qr!==Ur.TensorDataType.UINT32&&qr!==Mr.onnx.TensorProto.DataType.UINT64&&qr!==Ur.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${Mr.onnx.TensorProto.DataType[qr]}`);if(Wr.greaterThanOrEqual(4294967296)||Wr.lessThan(0))throw new TypeError("uint64 is not supported")}return Wr.toNumber()}function Gr(Wr,qr,Kr){switch(qr){case Mr.onnx.TensorProto.DataType.BOOL:case Mr.onnx.TensorProto.DataType.UINT8:return Wr.getUint8(Kr);case Mr.onnx.TensorProto.DataType.INT8:return Wr.getInt8(Kr);case Mr.onnx.TensorProto.DataType.UINT16:return Wr.getUint16(Kr,!0);case Mr.onnx.TensorProto.DataType.INT16:return Wr.getInt16(Kr,!0);case Mr.onnx.TensorProto.DataType.FLOAT:return Wr.getFloat32(Kr,!0);case Mr.onnx.TensorProto.DataType.INT32:return Wr.getInt32(Kr,!0);case Mr.onnx.TensorProto.DataType.UINT32:return Wr.getUint32(Kr,!0);case Mr.onnx.TensorProto.DataType.INT64:return jr(Lr.default.fromBits(Wr.getUint32(Kr,!0),Wr.getUint32(Kr+4,!0),!1),qr);case Mr.onnx.TensorProto.DataType.DOUBLE:return Wr.getFloat64(Kr,!0);case Mr.onnx.TensorProto.DataType.UINT64:return jr(Lr.default.fromBits(Wr.getUint32(Kr,!0),Wr.getUint32(Kr+4,!0),!0),qr);default:throw new Error(`cannot read from DataView for type ${Mr.onnx.TensorProto.DataType[qr]}`)}}Tr.Tensor=Vr},7273:function(_r,Tr,Rr){var Ar=this&&this.__importDefault||function(qr){return qr&&qr.__esModule?qr:{default:qr}};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.decodeUtf8String=Tr.MAX_CLIP=Tr.MIN_CLIP=Tr.PoolConvUtil=Tr.ReduceUtil=Tr.SplitUtil=Tr.MathUtil=Tr.ShapeUtil=Tr.LongUtil=Tr.ProtoUtil=Tr.GemmUtil=Tr.arrayCopyHelper=Tr.BroadcastUtil=Tr.MatMulUtil=Tr.ArrayUtil=Tr.assert=Tr.checkInputsShape=void 0;const Pr=Rr(5686),Lr=Ar(Rr(3720)),Mr=Rr(1446),Fr=Rr(9240);Tr.checkInputsShape=function(qr,...Kr){if(!qr||qr.length!==Kr.length)return!1;for(let Xr=0;Xr<qr.length;Xr++)if(!qr[Xr].dims||qr[Xr].dims.length!==Kr[Xr])return!1;return!0},Tr.assert=function(qr,Kr){if(!qr)throw new Error(typeof Kr=="string"?Kr:Kr())},Tr.ArrayUtil=class{static arraysEqual(qr,Kr){if(qr.length!==Kr.length)return!1;for(let Xr=0;Xr<qr.length;Xr++)if(qr[Xr]!==Kr[Xr])return!1;return!0}};class zr{static preprocessInputShapes(Kr,Xr){return[Kr.length===1?[1,Kr[0]]:Kr,Xr.length===1?[Xr[0],1]:Xr]}static postprocessOutputShape(Kr,Xr,Zr){Xr===1&&Kr.splice(Kr.length-2,1),Zr===1&&Kr.pop()}static calcMatMulShape(Kr,Xr){return Kr[1]!==Xr[0]?void 0:[Kr[0],Xr[1]]}}Tr.MatMulUtil=zr;class Ur{static calcShape(Kr,Xr,Zr=!1){const Jr=Kr.length,_i=Xr.length;if(Jr===0)return Xr;if(_i===0)return Kr;const es=Math.max(Kr.length,Xr.length),ts=new Array(es);if(Zr){if(Jr<2||_i<2)return;const rs=zr.calcMatMulShape([Kr[Jr-2],Kr[Jr-1]],[Xr[_i-2],Xr[_i-1]]);if(rs===void 0)return;[ts[es-2],ts[es-1]]=rs}for(let rs=Zr?3:1;rs<=es;rs++){const ns=Jr-rs<0?1:Kr[Jr-rs],as=_i-rs<0?1:Xr[_i-rs];if(ns!==as&&ns>1&&as>1)return;ts[es-rs]=Math.max(ns,as)}return ts}static index(Kr,Xr){const Zr=new Array(Xr.length);return Ur.fillIndex(Kr,Xr,Zr),Zr}static fillIndex(Kr,Xr,Zr){const Jr=Kr.length-Xr.length;for(let _i=0;_i<Xr.length;_i++)Zr[_i]=Kr[Jr+_i]%Xr[_i]}static calc(Kr,Xr,Zr,Jr,_i){const es=Ur.calcShape(Kr.dims,Xr.dims);if(es){if(Jr&&!Dr.areEqual(es,Kr.dims))return;const ts=Dr.size(es),rs=Jr?Kr:new Fr.Tensor(es,_i||Kr.type);if(es.length===0)rs.set([],Zr(Kr.get([]),Xr.get([])));else{const ns=new Array(es.length),as=new Array(Kr.dims.length),ls=new Array(Xr.dims.length);let us,xs=0,Ts=0,vs=!1,gs=!1;Kr.dims.length===0&&(xs=Kr.get([]),vs=!0),Xr.dims.length===0&&(Ts=Xr.get([]),gs=!0);for(let fs=0;fs<ts;fs++){us=fs;for(let ys=es.length-1;ys>=0;ys--)ns[ys]=us%es[ys],us=Math.floor(us/es[ys]);vs||(Ur.fillIndex(ns,Kr.dims,as),xs=Kr.get(as)),gs||(Ur.fillIndex(ns,Xr.dims,ls),Ts=Xr.get(ls)),rs.set(ns,Zr(xs,Ts))}}return rs}}static isValidBroadcast(Kr,Xr){const Zr=Kr.length,Jr=Xr.length;if(Zr>Jr)return!1;for(let _i=1;_i<=Zr;_i++)if(Kr[Zr-_i]!==1&&Kr[Zr-_i]!==Xr[Jr-_i])return!1;return!0}static getBroadcastDims(Kr,Xr){const Zr=Kr.length,Jr=[];for(let _i=0;_i<Zr;_i++){const es=Zr-1-_i,ts=Kr[es]||1;(Xr[Xr.length-1-_i]||1)>1&&ts===1&&Jr.unshift(es)}return Jr}}Tr.BroadcastUtil=Ur,Tr.arrayCopyHelper=function(qr,Kr,Xr,Zr,Jr){if(Zr<0||Zr>=Kr.length)throw new Error("sourceIndex out of bounds");if(Xr<0||Xr>=qr.length)throw new Error("targetIndex out of bounds");if(Zr+Jr>Kr.length)throw new Error("source indices to be copied are outside bounds");if(Xr+Jr>qr.length)throw new Error("target array is too small to hold result");for(let _i=0;_i<Jr;_i++)qr[Xr+_i]=Kr[Zr+_i]},Tr.GemmUtil=class{static getShapeOfGemmResult(qr,Kr,Xr,Zr,Jr){if(qr.length!==2||Xr.length!==2)throw new Error("shape need to be of size 2");let _i,es,ts;Kr?(_i=qr[1],es=qr[0]):(_i=qr[0],es=qr[1]);let rs=-1;if(Zr?(ts=Xr[0],rs=1):(ts=Xr[1],rs=0),Xr[rs]!==es)throw new Error("dimension mismatch");if(_i<=0||ts<=0||es<=0)throw new Error("invalid shape specified");if(Jr&&!Ur.isValidBroadcast(Jr,[_i,ts]))throw new Error("gemm: invalid bias shape for broadcast");return[_i,ts,es]}};class Vr{static tensorDataTypeFromProto(Kr){switch(Kr){case Mr.onnx.TensorProto.DataType.INT8:return"int8";case Mr.onnx.TensorProto.DataType.UINT8:return"uint8";case Mr.onnx.TensorProto.DataType.BOOL:return"bool";case Mr.onnx.TensorProto.DataType.INT16:return"int16";case Mr.onnx.TensorProto.DataType.UINT16:return"uint16";case Mr.onnx.TensorProto.DataType.INT32:return"int32";case Mr.onnx.TensorProto.DataType.UINT32:return"uint32";case Mr.onnx.TensorProto.DataType.FLOAT:return"float32";case Mr.onnx.TensorProto.DataType.DOUBLE:return"float64";case Mr.onnx.TensorProto.DataType.STRING:return"string";case Mr.onnx.TensorProto.DataType.INT64:return"int32";case Mr.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${Mr.onnx.TensorProto.DataType[Kr]}`)}}static tensorDataTypeStringToEnum(Kr){switch(Kr){case"int8":return Mr.onnx.TensorProto.DataType.INT8;case"uint8":return Mr.onnx.TensorProto.DataType.UINT8;case"bool":return Mr.onnx.TensorProto.DataType.BOOL;case"int16":return Mr.onnx.TensorProto.DataType.INT16;case"uint16":return Mr.onnx.TensorProto.DataType.UINT16;case"int32":return Mr.onnx.TensorProto.DataType.INT32;case"uint32":return Mr.onnx.TensorProto.DataType.UINT32;case"float32":return Mr.onnx.TensorProto.DataType.FLOAT;case"float64":return Mr.onnx.TensorProto.DataType.DOUBLE;case"string":return Mr.onnx.TensorProto.DataType.STRING;case"int64":return Mr.onnx.TensorProto.DataType.INT64;case"uint64":return Mr.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${Kr}`)}}static tensorDimsFromProto(Kr){return Kr.map(Xr=>Lr.default.isLong(Xr)?Xr.toNumber():Xr)}static tensorValueTypeFromProto(Kr){return{tensorType:Vr.tensorDataTypeFromProto(Kr.elemType),shape:{dims:Vr.tensorDimsFromProto(Kr.shape.dim.map(Xr=>Xr.dimValue))}}}static tensorDimsFromORTFormat(Kr){const Xr=[];for(let Zr=0;Zr<Kr.dimsLength();Zr++)Xr.push(Nr.longToNumber(Kr.dims(Zr)));return Xr}static tensorAttributesFromORTFormat(Kr){const Xr=[];for(let Zr=0;Zr<Kr.attributesLength();Zr++)Xr.push(Kr.attributes(Zr));return Xr}}Tr.ProtoUtil=Vr;class Nr{static longToNumber(Kr,Xr){return Lr.default.isLong(Kr)?Kr.toNumber():Kr instanceof Pr.flatbuffers.Long?Lr.default.fromValue({low:Kr.low,high:Kr.high,unsigned:Xr!=null&&Xr}).toNumber():Kr}static isLong(Kr){return Lr.default.isLong(Kr)||Kr instanceof Pr.flatbuffers.Long}}Tr.LongUtil=Nr;class Dr{static size(Kr){return Dr.getSizeFromDimensionRange(Kr,0,Kr.length)}static sizeFromDimension(Kr,Xr){if(Xr<0||Xr>Kr.length)throw new Error(`invalid dimension of ${Xr} for sizeFromDimension as Tensor has ${Kr.length} dimensions.`);return Dr.getSizeFromDimensionRange(Kr,Xr,Kr.length)}static sizeToDimension(Kr,Xr){if(Xr<0||Xr>Kr.length)throw new Error(`invalid dimension of ${Xr} for sizeToDimension as Tensor has ${Kr.length} dimensions.`);return Dr.getSizeFromDimensionRange(Kr,0,Xr)}static getSizeFromDimensionRange(Kr,Xr,Zr){let Jr=1;for(let _i=Xr;_i<Zr;_i++){if(Kr[_i]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");Jr*=Kr[_i]}return Jr}static computeStrides(Kr){const Xr=Kr.length;if(Xr===0)return[];if(Xr===1)return[1];const Zr=new Array(Xr);Zr[Xr-1]=1,Zr[Xr-2]=Kr[Xr-1];for(let Jr=Xr-3;Jr>=0;--Jr)Zr[Jr]=Zr[Jr+1]*Kr[Jr+1];return Zr}static transpose(Kr){return Kr.slice().reverse()}static indicesToOffset(Kr,Xr,Zr){Zr===void 0&&(Zr=Kr.length);let Jr=0;for(let _i=0;_i<Zr;++_i)Jr+=Xr[_i]*Kr[_i];return Jr}static offsetToIndices(Kr,Xr){const Zr=Xr.length;if(Zr===0)return[];if(Zr===1)return[Kr*Xr[0]];const Jr=new Array(Xr.length);for(let _i=0;_i<Jr.length-1;++_i)Jr[_i]=Math.floor(Kr/Xr[_i]),Kr-=Jr[_i]*Xr[_i];return Jr[Jr.length-1]=Kr,Jr}static normalizeAxis(Kr,Xr){if(Kr<-Xr&&Kr>=Xr)throw new Error("unsupported axis for this operation.");return Kr<0?Kr+Xr:Kr}static normalizeAxes(Kr,Xr){return Kr.map(Zr=>this.normalizeAxis(Zr,Xr))}static incrementIndex(Kr,Xr,Zr){if(Xr.length===0||Kr.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(Zr===void 0)Zr=Xr.length;else if(Zr<=0||Zr>Xr.length)throw new Error("Incorrect axis to increment on");for(let Jr=Zr-1;Jr>=0&&(Kr[Jr]++,!(Kr[Jr]<Xr[Jr]));--Jr)Kr[Jr]=0}static calculateReshapedDims(Kr,Xr){if(Xr.length===0){if(Kr.length===0||Dr.size(Kr)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const Zr=Xr.length,Jr=new Array(Zr);let _i=-1,es=1;for(let rs=0;rs<Zr;rs++){if(Xr[rs]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(Xr[rs]===-1){if(_i!==-1)throw new Error("at most one dimension in shape hints can be -1");_i=rs}else{if(Xr[rs]===0){if(rs>=Kr.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");Jr[rs]=Kr[rs]}else Jr[rs]=Xr[rs];es*=Jr[rs]}}const ts=Dr.size(Kr);if(_i!==-1){if(ts%es!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${Kr}] Output shape: [${Xr}]`);Jr[_i]=ts/es}else if(es!==ts)throw new Error("reshapedDims and originalDims don't have matching sizes");return Jr}static sortBasedOnPerm(Kr,Xr){return Xr?Xr.map(Zr=>Kr[Zr]):Kr.slice().reverse()}static padShape(Kr,Xr){const Zr=Kr.length;return Kr.map((Jr,_i)=>Jr+Xr[_i]+Xr[_i+Zr])}static areEqual(Kr,Xr){return Kr.length===Xr.length&&Kr.every((Zr,Jr)=>Zr===Xr[Jr])}static validateDimsAndCalcSize(Kr){if(Kr.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let Xr=1;for(const Zr of Kr){if(!Number.isInteger(Zr))throw new TypeError(`Invalid shape: ${Zr} is not an integer`);if(Zr<0||Zr>2147483647)throw new TypeError(`Invalid shape: length ${Zr} is not allowed`);Xr*=Zr}return Xr}static flattenShape(Kr,Xr){Xr<0&&(Xr+=Kr.length);const Zr=Kr.reduce((_i,es)=>_i*es,1),Jr=Kr.slice(Xr).reduce((_i,es)=>_i*es,1);return[Zr/Jr,Jr]}static squeezeShape(Kr,Xr){const Zr=new Array;Xr=Dr.normalizeAxes(Xr,Kr.length);for(let Jr=0;Jr<Kr.length;Jr++){const _i=Xr.indexOf(Jr)>=0;if(_i&&Kr[Jr]!==1)throw new Error("squeeze an axis of size different than 1");(Xr.length===0&&Kr[Jr]>1||Xr.length>0&&!_i)&&Zr.push(Kr[Jr])}return Zr}static unsqueezeShape(Kr,Xr){const Zr=new Array(Kr.length+Xr.length);Zr.fill(0);for(let _i=0;_i<Xr.length;_i++){const es=Dr.normalizeAxis(Xr[_i],Zr.length);if(es>=Zr.length)throw new Error("'axes' has an out of range axis");if(Zr[es]!==0)throw new Error("'axes' has a duplicate axis");Zr[es]=1}let Jr=0;for(let _i=0;_i<Zr.length;_i++)Zr[_i]===0&&(Zr[_i]=Kr[Jr++]);if(Jr!==Kr.length)throw new Error("the unsqueezed dimension could not be established");return Zr}}Tr.ShapeUtil=Dr,Tr.MathUtil=class{static sqr(qr,Kr,Xr,Zr,Jr){if(Zr<0||Zr>=Kr.length)throw new Error("sourceIndex out of bounds");if(Xr<0||Xr>=qr.length)throw new Error("targetIndex out of bounds");if(Zr+Jr>Kr.length)throw new Error("source indices to be copied are outside bounds");if(Xr+Jr>qr.length)throw new Error("target array is too small to hold result");for(let _i=0;_i<Jr;_i++)qr[Xr+_i]+=Math.pow(Kr[Zr+_i],2)}static axpy(qr,Kr,Xr,Zr,Jr,_i){if(Zr<0||Zr>=Kr.length)throw new Error("sourceIndex out of bounds");if(Xr<0||Xr>=qr.length)throw new Error("targetIndex out of bounds");if(Zr+Jr>Kr.length)throw new Error("source indices to be copied are outside bounds");if(Xr+Jr>qr.length)throw new Error("target array is too small to hold result");for(let es=0;es<Jr;es++)qr[Xr+es]+=_i*Kr[Zr+es]}static powx(qr,Kr,Xr,Zr,Jr,_i){if(Zr<0||Zr>=Kr.length)throw new Error("sourceIndex out of bounds");if(Xr<0||Xr>=qr.length)throw new Error("targetIndex out of bounds");if(Zr+Jr>Kr.length)throw new Error("source indices to be copied are outside bounds");if(Xr+Jr>qr.length)throw new Error("target array is too small to hold result");for(let es=0;es<Jr;es++)qr[Xr+es]=Math.pow(Kr[Zr+es],_i)}static mul(qr,Kr,Xr,Zr,Jr){if(Zr<0||Zr>=Kr.length)throw new Error("sourceIndex out of bounds");if(Xr<0||Xr>=qr.length)throw new Error("targetIndex out of bounds");if(Zr+Jr>Kr.length)throw new Error("source indices to be copied are outside bounds");if(Xr+Jr>qr.length)throw new Error("target array is too small to hold result");for(let _i=0;_i<Jr;_i++)qr[Xr+_i]=Kr[Zr+_i]*qr[Xr+_i]}};class jr{static splitShape(Kr,Xr,Zr,Jr){if(Zr.length===0){if(!Jr)throw new Error("need to know number of outputs when the 'split' attribute is not specified");jr.determineSplit(Kr[Xr],Jr,Zr)}const _i=[],es=[0];for(let ts=0;ts<Zr.length;++ts){ts!==0&&es.push(es[ts-1]+Zr[ts-1]);const rs=Kr.slice();rs[Xr]=Zr[ts],_i.push(rs)}return[_i,es]}static determineSplit(Kr,Xr,Zr){if(Kr%Xr!=0)throw new Error("cannot split tensor to equal sized parts");for(let Jr=0;Jr<Xr;++Jr)Zr.push(Kr/Xr)}}Tr.SplitUtil=jr;class Gr{static calcReduce(Kr,Xr,Zr,Jr,_i){const es=Kr.dims.slice(0);Xr.length===0&&es.forEach((xs,Ts)=>Xr.push(Ts));const ts=Gr.calcReduceShape(es,Xr,!0),rs=Dr.size(ts),ns=new Fr.Tensor(ts,Kr.type),as=Dr.computeStrides(ts),ls=Dr.computeStrides(es),us=new Array(es.length);for(let xs=0;xs<rs;xs++){const Ts=Dr.offsetToIndices(xs,as);Ur.fillIndex(Ts,es,us),ns.set(Ts,Gr.calcReduceByAxis(Kr.numberData,Xr,es,0,Dr.indicesToOffset(us,ls),Jr,_i))}return Zr?ns:new Fr.Tensor(Gr.calcReduceShape(es,Xr,Zr),ns.type,void 0,void 0,ns.data,ns.dataId)}static calcReduceByAxis(Kr,Xr,Zr,Jr,_i,es,ts){let rs=0;if(Jr>=Xr.length)return es(Kr[_i]);const ns=Xr[Jr],as=ns>=Zr.length?1:Dr.size(Zr.slice(ns+1));for(let ls=0;ls<Zr[ns];ls++)rs=ls===0?Gr.calcReduceByAxis(Kr,Xr,Zr,Jr+1,_i,es,ts):ts(rs,Gr.calcReduceByAxis(Kr,Xr,Zr,Jr+1,_i,es,ts)),_i+=as;return rs}static calcReduceShape(Kr,Xr,Zr){const Jr=Kr.slice();for(let _i=0;_i<Xr.length;_i++)Jr[Xr[_i]]=Zr?1:0;return Jr.filter(_i=>_i!==0)}}Tr.ReduceUtil=Gr;class Wr{static adjustPoolAttributes(Kr,Xr,Zr,Jr,_i,es){if(!Kr&&Zr.length!==Xr.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(Kr)for(let ts=0;ts<Xr.length-2;ts++)ts>=Zr.length?Zr.push(Xr[ts+2]):Zr[ts]=Xr[ts+2];for(let ts=0;ts<Zr.length;ts++)if(ts<Jr.length){if(Jr[ts]<0)throw new Error("strides should be greater than or equal to 1")}else Jr.push(1);for(let ts=0;ts<Zr.length;ts++)if(ts<_i.length){if(_i[ts]<0)throw new Error("dilations should be greater than or equal to 1")}else _i.push(1);for(let ts=0;ts<2*Zr.length;ts++)if(ts<es.length){if(es[ts]<0)throw new Error("pad should be greater than or equal to 1")}else es.push(0);for(let ts=0;ts<Zr.length;ts++){if(Zr[ts]<=0)throw new Error("kernel shapes need to be greater than 0");if(es[ts]>=Zr[ts]||es[ts+Zr.length]>=Zr[ts])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(Kr,Xr,Zr,Jr,_i,es){if(es){if(_i.length!==2*(Kr.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(Xr.length!==Kr.length-2)throw new Error("length of strides should be the length of data dimensions");if(Jr.length!==Kr.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let ts=0;ts<Kr.length-2;ts++)Wr.adjustPadAndReturnShape(Kr[ts+2],Xr[ts],Zr[ts],Jr[ts],_i,ts,ts+Kr.length-2,es)}}static computePoolOutputShape(Kr,Xr,Zr,Jr,_i,es,ts){if(Xr.length<=0)throw new Error("input shape must be of size greater than 0");const rs=[Xr[0],Xr[1]];return Wr.computeShapeHelper(Kr,Xr,rs,Zr,Jr,_i,es,ts),rs}static computeConvOutputShape(Kr,Xr,Zr,Jr,_i,es,ts){if(Kr.length<=0||Xr.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const rs=[Kr[0],Xr[0]];return Wr.computeShapeHelper(!1,Kr,rs,Zr,Jr,_i,es,ts),rs}static computeShapeHelper(Kr,Xr,Zr,Jr,_i,es,ts,rs){if(Kr)for(let ns=0;ns<Xr.length-2;ns++)Zr.push(1);else for(let ns=0;ns<Xr.length-2;ns++)Zr.push(Wr.adjustPadAndReturnShape(Xr[ns+2],Jr[ns],_i[ns],es[ns],ts,ns,ns+Xr.length-2,rs))}static adjustPadAndReturnShape(Kr,Xr,Zr,Jr,_i,es,ts,rs){const ns=Zr*(Jr-1)+1;if(!rs||rs==="NOTSET")return Math.floor((Kr+_i[es]+_i[ts]-ns)/Xr+1);switch(rs){case"VALID":return _i[es]=0,_i[ts]=0,Math.floor((Kr-ns)/Xr+1);case"SAME_LOWER":case"SAME_UPPER":if(Zr!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const as=((Kr+Xr-1)/Xr-1)*Xr+Jr-Kr;return _i[es]=Math.floor(rs==="SAME_LOWER"?(as+1)/2:as/2),_i[ts]=as-_i[es],Math.floor((Kr+as-Jr)/Xr+1)}default:throw new Error("Unsupported AutoPad type")}}}Tr.PoolConvUtil=Wr,Tr.MIN_CLIP=-34028234663852886e22,Tr.MAX_CLIP=34028234663852886e22,Tr.decodeUtf8String=function(qr){return new TextDecoder().decode(qr)}},3838:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.WebGpuBackend=void 0;const Ar=Rr(8453),Pr=Rr(4955),Lr=Rr(7771),Mr=Rr(8510),Fr=Rr(8305);Tr.WebGpuBackend=class{constructor(){this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.pendingDispatchNumber=0,this.profilingEnabled=!1}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let zr=this.kernelCustomData.get(this.currentKernelId);return zr||(zr={},this.kernelCustomData.set(this.currentKernelId,zr)),zr}async initialize(){if(!navigator.gpu)throw new Error("WebGpuBackend: WebGPU is not available.");const zr=await navigator.gpu.requestAdapter();if(!zr)throw new Error("WebGpuBackend: Failed to get GPU adapter.");const Ur={requiredLimits:{maxComputeWorkgroupStorageSize:zr.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:zr.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:zr.limits.maxStorageBufferBindingSize}};zr.features.has("timestamp-query-inside-passes")&&Ar.env.webgpu.profilingMode==="default"&&(this.profilingEnabled=!0,Ur.requiredFeatures=["timestamp-query-inside-passes"]),this.device=await zr.requestDevice(Ur),this.gpuDataManager=(0,Lr.createGpuDataManager)(this),this.programManager=new Fr.ProgramManager(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,this.device.onuncapturederror=Vr=>{Vr.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${Vr.error.message}`)},this.profilingEnabled&&(this.profilingQuerySet=this.device.createQuerySet({type:"timestamp",count:2}))}dispose(){}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){return this.computePassEncoder||(this.computePassEncoder=this.getCommandEncoder().beginComputePass()),this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){this.endComputePass(),this.device.queue.submit([this.getCommandEncoder().finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0}run(zr,Ur,Vr,Nr,Dr){if(Ur.length!==zr.inputTypes.length)throw new Error(`Input size must be equal to ${zr.inputTypes.length}.`);const jr=[];for(let _i=0;_i<Ur.length;++_i){const es=this.gpuDataManager.get(Ur[_i].data);if(!es)throw new Error(`no GPU data for input: ${Ur[_i].data}`);jr[_i]=es}const Gr=((_i,es,ts)=>{const rs=es.map(ls=>`${ls.join(",")}`).join("_"),ns=ts.join("_");let as=_i.name;return _i.cacheHint&&(as+="["+_i.cacheHint+"]"),as+=":"+rs+";"+ns,as})(zr,Ur.map(_i=>_i.dims),jr.map(_i=>_i.type));let Wr=this.programManager.getArtifact(Gr);const qr=Wr?Wr.programInfo:typeof zr.get=="function"?zr.get():zr,Kr=Vr.length===0?qr.outputs.map((_i,es)=>es):Vr;if(Kr.length!==qr.outputs.length)throw new Error(`Output size ${Kr.length} must be equal to ${qr.outputs.length}.`);const Xr=[],Zr=[];for(let _i=0;_i<qr.outputs.length;++_i){if(!Number.isInteger(Kr[_i])||Kr[_i]<-2||Kr[_i]>=qr.outputs.length)throw new Error(`Invalid output index: ${Kr[_i]}`);const es=Kr[_i]===-1,ts=Kr[_i]===-2,rs=es||ts?Dr(qr.outputs[_i].dataType,qr.outputs[_i].dims):Nr(Kr[_i],qr.outputs[_i].dataType,qr.outputs[_i].dims),ns=this.gpuDataManager.get(rs.data);if(!ns)throw new Error(`no GPU data for output: ${rs.data}`);if(es&&this.temporaryData.push(ns),ts){let as=this.kernelPersistentData.get(this.currentKernelId);as||(as=[],this.kernelPersistentData.set(this.currentKernelId,as)),as.push(ns)}Xr.push(rs),Zr.push(ns)}const Jr=this.programManager.normalizeDispatchGroupSize(qr.dispatchGroup(Ur));return Wr||(Wr=this.programManager.build(qr,Jr),this.programManager.setArtifact(Gr,Wr)),(0,Pr.LOG_DEBUG)("info",()=>`[ProgramManager] run "${qr.name}" (key=${Gr}) with ${Jr[0]}x${Jr[1]}x${Jr[2]}`),this.programManager.run(Wr,jr,Zr,Jr),Xr}upload(zr,Ur){this.gpuDataManager.upload(zr,Ur)}memcpy(zr,Ur){this.gpuDataManager.memcpy(zr,Ur)}async download(zr,Ur){const Vr=await this.gpuDataManager.download(zr);Ur().set(new Uint8Array(Vr))}alloc(zr){return this.gpuDataManager.create(zr).id}free(zr){return this.gpuDataManager.release(zr)}createKernel(zr,Ur,Vr){const Nr=Mr.WEBGPU_OP_RESOLVE_RULES.get(zr);if(!Nr)throw new Error(`kernel not implemented: ${zr}`);this.kernels.set(Ur,[zr,Nr[0],[Nr[1],Vr]])}releaseKernel(zr){const Ur=this.kernelPersistentData.get(zr);if(Ur){for(const Vr of Ur)this.gpuDataManager.release(Vr.id);this.kernelPersistentData.delete(zr)}this.kernelCustomData.delete(zr),this.kernels.delete(zr)}computeKernel(zr,Ur){const Vr=this.kernels.get(zr);if(!Vr)throw new Error(`kernel not created: ${zr}`);const[Nr,Dr,jr]=Vr;if(this.currentKernelId!==null)throw new Error(`kernel "${Nr}" is not allowed to be called recursively`);this.currentKernelId=zr,jr[0]&&(jr[1]=jr[0](jr[1]),jr[0]=void 0),(0,Pr.LOG_DEBUG)("info",()=>`[WebGPU] Start to run kernel "${Nr}"...`),this.temporaryData=[];try{return Dr(Ur,jr[1]),0}catch(Gr){return(0,Pr.LOG_DEBUG)("warning",`[WebGPU] Kernel "${Nr}" failed. Error: ${Gr}`),1}finally{for(const Gr of this.temporaryData)this.gpuDataManager.release(Gr.id);this.temporaryData=[],this.currentKernelId=null}}}},7675:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.init=void 0;const Ar=Rr(7917),Pr=Rr(3838),Lr=Rr(4955),Mr=Rr(6952);class Fr{constructor(Vr,Nr,Dr,jr){this.module=Vr,this.dataType=Nr,this.data=Dr,this.dims=jr}getFloat32Array(){return new Float32Array(this.module.HEAP8.buffer,this.data,Mr.ShapeUtil.size(this.dims))}reshape(Vr){if(Mr.ShapeUtil.size(Vr)!==Mr.ShapeUtil.size(this.dims))throw new Error("Invalid new shape");return new Fr(this.module,this.dataType,this.data,Vr)}}class zr{get customData(){return this.backend.currentKernelCustomData}constructor(Vr,Nr,Dr){this.module=Vr,this.backend=Nr;const jr=Vr.HEAPU32;let Gr=Dr>>2;this.opKernelContext=jr[Gr++];const Wr=jr[Gr++],qr=[];for(let Kr=0;Kr<Wr;Kr++){const Xr=jr[Gr++],Zr=jr[Gr++],Jr=jr[Gr++],_i=[];for(let es=0;es<Jr;es++)_i.push(jr[Gr++]);qr.push(new Fr(Vr,Xr,Zr,_i))}this.inputs=qr}compute(Vr,Nr){var Dr,jr,Gr;const Wr=(jr=(Dr=Nr==null?void 0:Nr.inputs)===null||Dr===void 0?void 0:Dr.map(Kr=>typeof Kr=="number"?this.inputs[Kr]:Kr))!==null&&jr!==void 0?jr:this.inputs,qr=(Gr=Nr==null?void 0:Nr.outputs)!==null&&Gr!==void 0?Gr:[];return this.backend.run(Vr,Wr,qr,(Kr,Xr,Zr)=>new Fr(this.module,Xr,this.output(Kr,Zr),Zr),(Kr,Xr)=>{const Zr=(0,Ar.getTensorElementSize)(Kr);if(!Zr)throw new Error(`Unsupported data type: ${Kr}`);const Jr=Zr*Mr.ShapeUtil.size(Xr);return new Fr(this.module,Kr,this.backend.gpuDataManager.create(Jr).id,Xr)})}output(Vr,Nr){const Dr=this.module.stackSave();try{const jr=this.module.stackAlloc(4*(1+Nr.length));let Gr=jr>>2;this.module.HEAPU32[Gr++]=Nr.length;for(let Wr=0;Wr<Nr.length;Wr++)this.module.HEAPU32[Gr++]=Nr[Wr];return this.module._JsepOutput(this.opKernelContext,Vr,jr)}finally{this.module.stackRestore(Dr)}}}Tr.init=async Ur=>{const Vr=Ur.jsepInit;if(Vr&&navigator.gpu){const Nr=new Pr.WebGpuBackend;await Nr.initialize(),Vr({backend:Nr},Dr=>Nr.alloc(Dr),Dr=>Nr.free(Dr),(Dr,jr,Gr,Wr=!1)=>{if(Wr)(0,Lr.LOG_DEBUG)("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${Dr}, dst=${jr}, size=${Gr}`),Nr.memcpy(Dr,jr);else{(0,Lr.LOG_DEBUG)("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${Dr}, gpuDataId=${jr}, size=${Gr}`);const qr=Ur.HEAPU8.subarray(Dr,Dr+Gr);Nr.upload(jr,qr)}},async(Dr,jr,Gr)=>{(0,Lr.LOG_DEBUG)("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${Dr}, dataOffset=${jr}, size=${Gr}`),await Nr.download(Dr,()=>Ur.HEAPU8.subarray(jr,jr+Gr))},(Dr,jr,Gr)=>Nr.createKernel(Dr,jr,Gr),Dr=>Nr.releaseKernel(Dr),(Dr,jr)=>{(0,Lr.LOG_DEBUG)("verbose",()=>`[WebGPU] jsepRun: kernel=${Dr}, contextDataOffset=${jr}`);const Gr=new zr(Ur,Nr,jr);return Nr.computeKernel(Dr,Gr)})}}},4955:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.LOG_DEBUG=Tr.LOG=void 0;const Ar=Rr(8453),Pr=Rr(7917),Lr=["V","I","W","E","F"];Tr.LOG=(Mr,Fr)=>{const zr=(0,Pr.logLevelStringToEnum)(Mr);var Ur,Vr;zr>=(0,Pr.logLevelStringToEnum)(Ar.env.logLevel)&&(Ur=zr,Vr=typeof Fr=="function"?Fr():Fr,console.log(`[${Lr[Ur]},${new Date().toISOString()}]${Vr}`))},Tr.LOG_DEBUG=(...Mr)=>{Ar.env.debug&&(0,Tr.LOG)(...Mr)}},6952:(_r,Tr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.MAX_CLIP=Tr.MIN_CLIP=Tr.GemmUtil=Tr.PoolConvUtil=Tr.ShapeUtil=Tr.BroadcastUtil=Tr.MatMulUtil=void 0;class Rr{static calcMatMulShape(Fr,zr){return Fr[1]!==zr[0]?void 0:[Fr[0],zr[1]]}}Tr.MatMulUtil=Rr;class Ar{static calcShape(Fr,zr,Ur=!1){const Vr=Fr.length,Nr=zr.length;if(Vr===0)return zr;if(Nr===0)return Fr;const Dr=Math.max(Fr.length,zr.length),jr=new Array(Dr);if(Ur){if(Vr<2||Nr<2)return;const Gr=Rr.calcMatMulShape([Fr[Vr-2],Fr[Vr-1]],[zr[Nr-2],zr[Nr-1]]);if(Gr===void 0)return;[jr[Dr-2],jr[Dr-1]]=Gr}for(let Gr=Ur?3:1;Gr<=Dr;Gr++){const Wr=Vr-Gr<0?1:Fr[Vr-Gr],qr=Nr-Gr<0?1:zr[Nr-Gr];if(Wr!==qr&&Wr>1&&qr>1)return;jr[Dr-Gr]=Math.max(Wr,qr)}return jr}static isValidBroadcast(Fr,zr){const Ur=Fr.length,Vr=zr.length;if(Ur>Vr)return!1;for(let Nr=1;Nr<=Ur;Nr++)if(Fr[Ur-Nr]!==1&&Fr[Ur-Nr]!==zr[Vr-Nr])return!1;return!0}}Tr.BroadcastUtil=Ar;class Pr{static size(Fr){return Pr.getSizeFromDimensionRange(Fr,0,Fr.length)}static sizeFromDimension(Fr,zr){if(zr<0||zr>Fr.length)throw new Error(`invalid dimension of ${zr} for sizeFromDimension as Tensor has ${Fr.length} dimensions.`);return Pr.getSizeFromDimensionRange(Fr,zr,Fr.length)}static sizeToDimension(Fr,zr){if(zr<0||zr>Fr.length)throw new Error(`invalid dimension of ${zr} for sizeToDimension as Tensor has ${Fr.length} dimensions.`);return Pr.getSizeFromDimensionRange(Fr,0,zr)}static getSizeFromDimensionRange(Fr,zr,Ur){let Vr=1;for(let Nr=zr;Nr<Ur;Nr++){if(Fr[Nr]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");Vr*=Fr[Nr]}return Vr}static computeStrides(Fr){const zr=Fr.length;if(zr===0)return[];if(zr===1)return[1];const Ur=new Array(zr);Ur[zr-1]=1,Ur[zr-2]=Fr[zr-1];for(let Vr=zr-3;Vr>=0;--Vr)Ur[Vr]=Ur[Vr+1]*Fr[Vr+1];return Ur}static normalizeAxis(Fr,zr){if(Fr<-zr&&Fr>=zr)throw new Error("unsupported axis for this operation.");return Fr<0?Fr+zr:Fr}static normalizeAxes(Fr,zr){return Fr.map(Ur=>this.normalizeAxis(Ur,zr??Fr.length))}static sortBasedOnPerm(Fr,zr){return zr?zr.map(Ur=>Fr[Ur]):Fr.slice().reverse()}static padShape(Fr,zr){const Ur=Fr.length;return Fr.map((Vr,Nr)=>Vr+zr[Nr]+zr[Nr+Ur])}static areEqual(Fr,zr){return Fr.length===zr.length&&Fr.every((Ur,Vr)=>Ur===zr[Vr])}}Tr.ShapeUtil=Pr;class Lr{static adjustPoolAttributes(Fr,zr,Ur,Vr,Nr,Dr){if(!Fr&&Ur.length!==zr.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(Fr)for(let jr=0;jr<zr.length-2;jr++)jr>=Ur.length?Ur.push(zr[jr+2]):Ur[jr]=zr[jr+2];for(let jr=0;jr<Ur.length;jr++)if(jr<Vr.length){if(Vr[jr]<0)throw new Error("strides should be greater than or equal to 1")}else Vr.push(1);for(let jr=0;jr<Ur.length;jr++)if(jr<Nr.length){if(Nr[jr]<0)throw new Error("dilations should be greater than or equal to 1")}else Nr.push(1);for(let jr=0;jr<2*Ur.length;jr++)if(jr<Dr.length){if(Dr[jr]<0)throw new Error("pad should be greater than or equal to 1")}else Dr.push(0);for(let jr=0;jr<Ur.length;jr++){if(Ur[jr]<=0)throw new Error("kernel shapes need to be greater than 0");if(Dr[jr]>=Ur[jr]||Dr[jr+Ur.length]>=Ur[jr])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(Fr,zr,Ur,Vr,Nr,Dr,jr){if(jr){if(Nr.length!==2*(Fr.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(zr.length!==Fr.length-2)throw new Error("length of strides should be the length of data dimensions");if(Vr.length!==Fr.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let Gr=0;Gr<Fr.length-2;Gr++)Lr.adjustPadAndReturnShape(Fr[Gr+(Dr?1:2)],zr[Gr],Ur[Gr],Vr[Gr],Nr,Gr,Gr+Fr.length-2,jr)}}static computePoolOutputShape(Fr,zr,Ur,Vr,Nr,Dr,jr){if(zr.length<=0)throw new Error("input shape must be of size greater than 0");const Gr=[zr[0],zr[1]];return Lr.computeShapeHelper(Fr,zr,Gr,Ur,Vr,Nr,Dr,jr),Gr}static computeConvOutputShape(Fr,zr,Ur,Vr,Nr,Dr,jr){if(Fr.length<=0||zr.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const Gr=[Fr[0],zr[0]];return Lr.computeShapeHelper(!1,Fr,Gr,Ur,Vr,Nr,Dr,jr),Gr}static computeShapeHelper(Fr,zr,Ur,Vr,Nr,Dr,jr,Gr){if(Fr)for(let Wr=0;Wr<zr.length-2;Wr++)Ur.push(1);else for(let Wr=0;Wr<zr.length-2;Wr++)Ur.push(Lr.adjustPadAndReturnShape(zr[Wr+2],Vr[Wr],Nr[Wr],Dr[Wr],jr,Wr,Wr+zr.length-2,Gr))}static adjustPadAndReturnShape(Fr,zr,Ur,Vr,Nr,Dr,jr,Gr){const Wr=Ur*(Vr-1)+1;if(!Gr||Gr==="NOTSET")return Math.floor((Fr+Nr[Dr]+Nr[jr]-Wr)/zr+1);switch(Gr){case"VALID":return Nr[Dr]=0,Nr[jr]=0,Math.floor((Fr-Wr)/zr+1);case"SAME_LOWER":case"SAME_UPPER":if(Ur!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const qr=((Fr+zr-1)/zr-1)*zr+Vr-Fr;return Nr[Dr]=Math.floor(Gr==="SAME_LOWER"?(qr+1)/2:qr/2),Nr[jr]=qr-Nr[Dr],Math.floor((Fr+qr-Vr)/zr+1)}default:throw new Error("Unsupported AutoPad type")}}}Tr.PoolConvUtil=Lr,Tr.GemmUtil=class{static getShapeOfGemmResult(Mr,Fr,zr,Ur,Vr){if(Mr.length!==2||zr.length!==2)throw new Error("shape need to be of size 2");let Nr,Dr,jr;Fr?(Nr=Mr[1],Dr=Mr[0]):(Nr=Mr[0],Dr=Mr[1]);let Gr=-1;if(Ur?(jr=zr[0],Gr=1):(jr=zr[1],Gr=0),zr[Gr]!==Dr)throw new Error("dimension mismatch");if(Nr<=0||jr<=0||Dr<=0)throw new Error("invalid shape specified");if(Vr&&!Ar.isValidBroadcast(Vr,[Nr,jr]))throw new Error("gemm: invalid bias shape for broadcast");return[Nr,jr,Dr]}},Tr.MIN_CLIP=-34028234663852886e22,Tr.MAX_CLIP=34028234663852886e22},387:(_r,Tr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createAttributeWithCacheKey=void 0;class Rr{constructor(Pr){Object.assign(this,Pr)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(Pr=>`${this[Pr]}`).join(";")),this._cacheKey}}Tr.createAttributeWithCacheKey=Ar=>new Rr(Ar)},7771:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createGpuDataManager=void 0;const Ar=Rr(4955),Pr=Rr(1163),Lr=zr=>16*Math.ceil(zr/16);let Mr=0;class Fr{constructor(Ur){this.backend=Ur,this.storageCache=new Map,this.downloadCache=new Map,this.buffersForUploadingPending=[],this.buffersPending=[]}upload(Ur,Vr){const Nr=Vr.buffer,Dr=Vr.byteOffset,jr=Vr.byteLength,Gr=Lr(jr),Wr=this.storageCache.get(Ur);if(!Wr)throw new Error("gpu data for uploading does not exist");if(Wr.originalSize!==jr)throw new Error(`inconsistent data size. gpu data size=${Wr.originalSize}, data size=${jr}`);const qr=this.backend.device.createBuffer({mappedAtCreation:!0,size:Gr,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),Kr=qr.getMappedRange();new Uint8Array(Kr).set(new Uint8Array(Nr,Dr,jr)),qr.unmap();const Xr=this.backend.getCommandEncoder();this.backend.endComputePass(),Xr.copyBufferToBuffer(qr,0,Wr.gpuData.buffer,0,Gr),(0,Ar.LOG_DEBUG)("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${Ur})`),this.buffersForUploadingPending.push(qr)}memcpy(Ur,Vr){const Nr=this.storageCache.get(Ur);if(!Nr)throw new Error("source gpu data for memcpy does not exist");const Dr=this.storageCache.get(Vr);if(!Dr)throw new Error("destination gpu data for memcpy does not exist");if(Nr.originalSize!==Dr.originalSize)throw new Error("inconsistent source and destination gpu data size");const jr=Lr(Nr.originalSize);this.backend.getCommandEncoder().copyBufferToBuffer(Nr.gpuData.buffer,0,Dr.gpuData.buffer,0,jr)}create(Ur,Vr=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){const Nr=Lr(Ur),Dr=this.backend.device.createBuffer({size:Nr,usage:Vr}),jr={id:Mr++,type:Pr.GpuDataType.default,buffer:Dr};return this.storageCache.set(jr.id,{gpuData:jr,originalSize:Ur}),(0,Ar.LOG_DEBUG)("verbose",()=>`[WebGPU] GpuDataManager.create(size=${Ur}) => id=${jr.id}`),jr}get(Ur){var Vr;return(Vr=this.storageCache.get(Ur))===null||Vr===void 0?void 0:Vr.gpuData}release(Ur){const Vr=this.storageCache.get(Ur);if(!Vr)throw new Error("releasing data does not exist");return(0,Ar.LOG_DEBUG)("verbose",()=>`[WebGPU] GpuDataManager.release(id=${Ur}), gpuDataId=${Vr.gpuData.id}`),this.storageCache.delete(Ur),this.buffersPending.push(Vr.gpuData.buffer),this.downloadCache.get(Ur)&&this.downloadCache.delete(Ur),Vr.originalSize}async download(Ur){const Vr=this.downloadCache.get(Ur);if(Vr)return Vr.data;const Nr=this.storageCache.get(Ur);if(!Nr)throw new Error("data does not exist");const Dr=this.backend.getCommandEncoder();this.backend.endComputePass();const jr=this.backend.device.createBuffer({size:Nr.originalSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});Dr.copyBufferToBuffer(Nr.gpuData.buffer,0,jr,0,Nr.originalSize),this.backend.flush();const Gr=new Promise(Wr=>{jr.mapAsync(GPUMapMode.READ).then(()=>{const qr=jr.getMappedRange().slice(0);jr.destroy(),Wr(qr)})});return this.downloadCache.set(Ur,{data:Gr}),Gr}refreshPendingBuffers(){for(const Ur of this.buffersForUploadingPending)Ur.destroy();for(const Ur of this.buffersPending)Ur.destroy()}}Tr.createGpuDataManager=(...zr)=>new Fr(...zr)},8510:function(_r,Tr,Rr){var Ar=this&&this.__createBinding||(Object.create?function(jr,Gr,Wr,qr){qr===void 0&&(qr=Wr);var Kr=Object.getOwnPropertyDescriptor(Gr,Wr);Kr&&!("get"in Kr?!Gr.__esModule:Kr.writable||Kr.configurable)||(Kr={enumerable:!0,get:function(){return Gr[Wr]}}),Object.defineProperty(jr,qr,Kr)}:function(jr,Gr,Wr,qr){qr===void 0&&(qr=Wr),jr[qr]=Gr[Wr]}),Pr=this&&this.__setModuleDefault||(Object.create?function(jr,Gr){Object.defineProperty(jr,"default",{enumerable:!0,value:Gr})}:function(jr,Gr){jr.default=Gr}),Lr=this&&this.__importStar||function(jr){if(jr&&jr.__esModule)return jr;var Gr={};if(jr!=null)for(var Wr in jr)Wr!=="default"&&Object.prototype.hasOwnProperty.call(jr,Wr)&&Ar(Gr,jr,Wr);return Pr(Gr,jr),Gr};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.WEBGPU_OP_RESOLVE_RULES=void 0;const Mr=Lr(Rr(504)),Fr=Rr(9770),zr=Rr(4271),Ur=Rr(1522),Vr=Lr(Rr(5262)),Nr=Rr(2625),Dr=Lr(Rr(9302));Tr.WEBGPU_OP_RESOLVE_RULES=new Map([["Abs",[Dr.abs]],["Acos",[Dr.acos]],["Acosh",[Dr.acosh]],["Add",[Mr.add]],["Asin",[Dr.asin]],["Asinh",[Dr.asinh]],["Atan",[Dr.atan]],["Atanh",[Dr.atanh]],["AveragePool",[Vr.averagePool,Vr.parseAveragePoolAttributes]],["Ceil",[Dr.ceil]],["ClipV10",[Dr.clipV10]],["Clip",[Dr.clip]],["Conv",[Fr.conv,Fr.parseConvAttributes]],["Cos",[Dr.cos]],["Cosh",[Dr.cosh]],["Div",[Mr.div]],["Elu",[Dr.elu,Dr.parseAlphaAttributes]],["Erf",[Dr.erf]],["Exp",[Dr.exp]],["Floor",[Dr.floor]],["Gemm",[zr.gemm,zr.parseGemmAttributes]],["GlobalAveragePool",[Vr.globalAveragePool,Vr.parseGlobalAveragePoolAttributes]],["GlobalMaxPool",[Vr.globalMaxPool,Vr.parseGlobalMaxPoolAttributes]],["LeakyRelu",[Dr.leakyRelu,Dr.parseAlphaAttributes]],["MatMul",[Ur.matMul]],["MaxPool",[Vr.maxPool,Vr.parseMaxPoolAttributes]],["Mul",[Mr.mul]],["Neg",[Dr.neg]],["Pow",[Mr.pow]],["Reciprocal",[Dr.reciprocal]],["Relu",[Dr.relu]],["Sigmoid",[Dr.sigmoid]],["Sin",[Dr.sin]],["Sinh",[Dr.sinh]],["Sqrt",[Dr.sqrt]],["Sub",[Mr.sub]],["Tan",[Dr.tan]],["Tanh",[Dr.tanh]],["ThresholdedRelu",[Dr.thresholdedRelu,Dr.parseAlphaAttributes]],["Transpose",[Nr.transpose,Nr.parseTransposeAttributes]]])},1427:(_r,Tr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.biasActivationSnippet=Tr.activationFnSnippet=Tr.typeSnippet=void 0,Tr.typeSnippet=Rr=>{switch(Rr){case 1:return"f32";case 2:return"vec2<f32>";case 3:return"vec3<f32>";case 4:return"vec4<f32>";default:throw new Error(`${Rr}-component is not supported.`)}},Tr.activationFnSnippet=(Rr,Ar=!1,Pr=!1,Lr=3)=>"",Tr.biasActivationSnippet=(Rr,Ar)=>`
      ${Rr?"value = value + getBiasByOutputCoords(coords);":""}
      ${Ar?"value = activation(value, coords);":""}
      `},9456:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createConv2DMatMulProgramInfo=void 0;const Ar=Rr(4955),Pr=Rr(6952),Lr=Rr(1163),Mr=Rr(1427),Fr=Rr(4085),zr=Rr(158);Tr.createConv2DMatMulProgramInfo=(Ur,Vr,Nr,Dr,jr,Gr,Wr,qr,Kr)=>{const Xr=Nr.format==="NHWC",Zr=Xr?Ur[0].dims[3]:Ur[0].dims[1],Jr=Dr[0],_i=Xr?Dr[2]:Dr[3],es=Xr?Dr[1]:Dr[2],ts=Xr?Dr[3]:Dr[1],rs=((Zr%4==0||Zr%3==0)&&Xr||_i%4==0&&!Xr)&&ts%4==0,ns=Xr?ts:_i*es,as=Xr?_i*es:ts,ls=rs?[8,8,1]:[ns<=4?4:16,ns>4&&as<=4?4:16,1],us=rs?[4,4,1]:[ns<=4?1:2,ns>4&&as<=4?1:2,1],xs=[Math.ceil(ns/ls[0]/us[0]),Math.ceil(as/ls[1]/us[1]),Math.ceil(Jr/ls[2]/us[1])];(0,Ar.LOG_DEBUG)("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${xs}`);const Ts=rs?Xr&&Zr%4!=0?3:4:us[0],vs=ls[1]*us[1],gs=ls[0]*us[0],fs=Math.max(ls[0]*Ts,ls[1]),ys=jr%vs==0,ks=Gr%gs==0,Fs=Wr%fs==0,Us=rs?[Ts,4,4]:[1,1,1],Vs=[`@group(0) @binding(0) var<storage, read> x: array<${rs&&Ts===4?"vec4<f32>":"f32"}>;`,`@group(0) @binding(1) var<storage, read> w: array<${rs?"vec4<f32>":"f32"}>;`];let ao=`
      fn setOutputAtIndex(flatIndex : i32, value : ${rs?"vec4<f32>":"f32"}) {
        result[flatIndex] = ${rs?"vec4<f32>":"f32"}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${rs?"vec4<f32>":"f32"}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${rs?"/ 4":""}, value);
      }`;return qr&&(Vs.push(`@group(0) @binding(2) var<storage, read> bias: array<${rs?"vec4<f32>":"f32"}>;`),ao+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${rs?"vec4<f32>":"f32"} {
          return bias[coords.${Xr?"w":"y"}${rs?"/ 4":""}];
        }`),Object.assign(Object.assign({},Vr),{outputs:[{dims:Dr,dataType:Ur[0].dataType,gpuDataType:Lr.GpuDataType.default}],dispatchGroup:()=>({x:xs[0],y:xs[1],z:xs[2]}),getShaderSource:()=>`
        ${Fr.utilFunctions}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${Vs.join("")}
        @group(0) @binding(${Vs.length}) var<storage, read_write> result: array<${rs?"vec4<f32>":"f32"}>;
        //@group(0) @binding(${Vs.length+1}) var<uniform> uniforms: Uniforms;

        const xShape : vec4<i32> = vec4<i32>(${Ur[0].dims.join(",")});
        const wShape : vec4<i32> = vec4<i32>(${Ur[1].dims.join(",")});
        const outShape : vec4<i32> = vec4<i32>(${Dr.join(",")});
        const outShapeStrides : vec3<i32> = vec3<i32>(${Pr.ShapeUtil.computeStrides(Dr).slice(0,3).join(",")});
        const filterDims : vec2<i32> = vec2<i32>(${Nr.kernelShape[0]}, ${Nr.kernelShape[1]});
        const pad : vec2<i32> = vec2<i32>(${Nr.pads[0]}, ${Nr.pads[1]});
        const stride : vec2<i32> = vec2<i32>(${Nr.strides[0]}, ${Nr.strides[1]});
        const dilation : vec2<i32> = vec2<i32>(${Nr.dilations[0]}, ${Nr.dilations[1]});
        const dimAOuter : i32 = ${jr};
        const dimBOuter : i32 = ${Gr};
        const dimInner : i32 = ${Wr};
        ${ao}
        ${((qs,Qs,mo,Xs,so=!1,uo,bo=!1,wo=4,Co=4,ds=4)=>{const Is=qs?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,Gs=qs?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,to=qs?"xShape[1]":"xShape[2]",no=qs?"xShape[2]":"xShape[3]",Ro=qs?"row":"col",ro=qs?"col":"row",go=`
    let inChannels = wShape[2];
    let outWidth = ${qs?"outShape[2]":"outShape[3]"};
    let outRow = ${Ro} / outWidth;
    let outCol = ${Ro} % outWidth;

    let WRow = ${ro} / (filterDims[1] * inChannels);
    let WCol = ${ro} / inChannels % filterDims[1];
    let xRow = outRow * stride[0] + dilation[0] * WRow - pad[0];
    let xCol = outCol * stride[1] + dilation[1] * WCol - pad[1];
    let xCh = ${ro} % inChannels;
    var resData = ${(0,Mr.typeSnippet)(wo)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${to} && xCol >= 0 && xCol < ${no}) {
      ${Is}
      let xIndex = getIndexFromCoords4D(coord, xShape);
      ${($a=>{switch($a){case 1:return"resData = x[xIndex];";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${$a} is not supported.`)}})(wo)}
    }
    return resData;`,No=qs?Qs&&Xs?`
    let col = colIn * ${wo};
    ${go}`:`
    let col = colIn * ${wo};
    if (row < dimAOuter && col < dimInner) {
      ${go}
    }
    return ${(0,Mr.typeSnippet)(wo)}(0.0);`:Xs&&mo?`
    let col = colIn * ${wo};
    ${go}`:`
    let col = colIn * ${wo};
    if (row < dimInner && col < dimBOuter) {
      ${go}
    }
    return ${(0,Mr.typeSnippet)(wo)}(0.0);`,Do=`${($a=>{switch($a){case 1:return"return w[row * wShape[3] + colIn];";case 4:return"return w[row * wShape[3] / 4 + colIn];";default:throw new Error(`innerElementSize ${$a} is not supported.`)}})(Co)}`,To=(0,Mr.typeSnippet)(ds),Wo=qs?(0,Mr.typeSnippet)(wo):(0,Mr.typeSnippet)(Co),ko=qs?(0,Mr.typeSnippet)(Co):(0,Mr.typeSnippet)(wo);return`
    ${(0,Mr.activationFnSnippet)(uo,bo,ds===4,4)}
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${Wo} {
      ${qs?No:Do}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${ko} {
      ${qs?Do:No}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${To}) {
      let col = colIn * ${ds};
      if (row < dimAOuter && col < dimBOuter)
      {
      var value = valueIn;
      let outWidth = ${qs?"outShape[2]":"outShape[3]"};
      ${Gs}
      ${(0,Mr.biasActivationSnippet)(so,uo)}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`})(Xr,ys,ks,Fs,qr,void 0,!1,Us[0],Us[1],Us[2])}
            ${rs?(0,zr.makeMatMulPackedVec4Source)(us,ls,!Xr,fs):(0,zr.makeMatMulPackedSource)(us,ls,!Xr,fs,!1,void 0,Kr)}`})}},4085:(_r,Tr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.utilFunctions=void 0,Tr.utilFunctions=`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    outShapeStrides.x, outShapeStrides.y, outShapeStrides.z, 1));
}
`},158:(_r,Tr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.makeMatMulPackedSource=Tr.makeMatMulPackedVec4Source=void 0,Tr.makeMatMulPackedVec4Source=(Ar,Pr,Lr=!1,Mr=32,Fr=!1,zr=32,Ur=!1)=>{const Vr=Pr[1]*Ar[1],Nr=Pr[0]*Ar[0],Dr=Lr?Vr:Mr,jr=Lr?Mr:Vr,Gr=Dr/Pr[0],Wr=Mr/Pr[1];if((!Lr||Gr!==4||Ar[1]!==4)&&(Lr||Gr!==3&&Gr!==4)||Dr%Pr[0]!=0||Mr%Pr[1]!=0||Ar[0]!==4)throw new Error(`If transposeA ${Lr} is true, innerElementSize ${Gr} and workPerThread[1] ${Ar[1]} must be 4.
      Otherwise, innerElementSize ${Gr} must be 3 or 4.
  tileAWidth ${Dr} must be divisible by workgroupSize[0]${Pr[0]}. tileInner ${Mr} must be divisible by workgroupSize[1] ${Pr[1]}. colPerThread ${Ar[0]} must be 4.`);return`
var<workgroup> mm_Asub : array<array<vec${Gr}<f32>, ${Dr/Gr}>, ${jr}>;
var<workgroup> mm_Bsub : array<array<vec4<f32>, ${Nr/Ar[0]}>, ${Mr}>;

const rowPerThread = ${Ar[1]};
const colPerThread = ${Ar[0]};
const innerElementSize = ${Gr};
const tileInner = ${Mr};

@compute @workgroup_size(${Pr[0]}, ${Pr[1]}, ${Pr[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = ${Ur?"0":"localRow * rowPerThread"};
  let tileCol = i32(localId.x);

  let globalRow = ${Ur?"0":"i32(globalId.y) * rowPerThread"};
  let globalCol = i32(globalId.x);
  let batch = ${Fr?"0":"i32(globalId.z)"};
  let globalRowStart = i32(workgroupId.y) * ${Vr};

  let numTiles = ${Fr?`${Math.ceil(zr/Mr)}`:"(dimInner - 1) / tileInner + 1"};
  var kStart = ${Fr?`i32(globalId.z) * ${zr}`:"0"};

  var acc: array<vec4<f32>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${Wr};
  for (var t = 0; t < numTiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${qr=Lr,qr?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol);
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol);
        `}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${Wr}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol);
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${Gr===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${((Kr,Xr)=>Kr?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${Xr===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${Xr===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${Xr===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`)(Lr,Gr)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`;var qr};const Rr=Ar=>Ar?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol);
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol);
            `;Tr.makeMatMulPackedSource=(Ar,Pr,Lr=!1,Mr=32,Fr=!1,zr=32,Ur=!1)=>{const Vr=Ar[1]*Pr[1],Nr=Ar[0]*Pr[0],Dr=Lr?Vr:Mr,jr=Lr?Mr:Vr;if(jr%Pr[1]!=0||Dr%Pr[0]!=0||Mr%Pr[1]!=0)throw new Error(`tileAHight ${jr} must be divisible by workgroupSize[1]${Pr[1]}, tileAWidth ${Dr} must be divisible by workgroupSize[0]${Pr[0]}, tileInner ${Mr} must be divisible by workgroupSize[1]${Pr[1]}`);const Gr=jr/Pr[1],Wr=Dr/Pr[0],qr=Mr/Pr[1],Kr=Ur?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${Vr};
    let globalColStart = i32(workgroupId.x) * ${Nr};

    // Loop over shared dimension.
    for (var t = 0; t < numTiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${jr}; inputRow = inputRow + ${Pr[1]}) {
        for (var inputCol = localCol; inputCol < ${Dr}; inputCol = inputCol + ${Pr[0]}) {
          ${Rr(Lr)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${Mr}; inputRow = inputRow + ${Pr[1]}) {
            for (var inputCol = localCol; inputCol < ${Nr}; inputCol = inputCol + ${Pr[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol);
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<f32, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${Pr[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${Lr?`mm_Asub[k][localRow + innerRow * ${Pr[1]}];`:`mm_Asub[localRow + innerRow * ${Pr[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${Pr[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${Pr[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${Vr};

let tileRowA = i32(localId.y) * ${Gr};
let tileColA = i32(localId.x) * ${Wr};
let tileRowB = i32(localId.y) * ${qr};
// Loop over shared dimension.
for (var t = 0; t < numTiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${Gr}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${Wr}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${Rr(Lr)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${qr}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol);
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<f32, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${(Xr=>Xr?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];")(Lr)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<f32, ${Dr}>, ${jr}>;
  var<workgroup> mm_Bsub : array<array<f32, ${Nr}>, ${Mr}>;
  const rowPerThread = ${Ar[1]};
  const colPerThread = ${Ar[0]};
  const tileInner = ${Mr};

@compute @workgroup_size(${Pr[0]}, ${Pr[1]}, ${Pr[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${Fr?"0":"i32(globalId.z)"};
    let numTiles = ${Fr?`${Math.ceil(zr/Mr)}`:"(dimInner - 1) / tileInner + 1"};
    var kStart = ${Fr?`i32(globalId.z) * ${zr}`:"0"};

    var acc : array<array<f32, colPerThread>, rowPerThread>;

    // Without this initialization strange values show up in acc.
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = 0.0;
      }
    }
    ${Kr}
  }
`}},504:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.sub=Tr.pow=Tr.mul=Tr.div=Tr.add=void 0;const Ar=Rr(6952),Pr=Rr(1163),Lr=Rr(2075),Mr=(Fr,zr,Ur,Vr,Nr)=>{const Dr={name:zr,inputTypes:[Pr.GpuDataType.default,Pr.GpuDataType.default],cacheHint:Nr};return Object.assign(Object.assign({},Dr),{get:()=>((jr,Gr,Wr,qr,Kr,Xr=Gr.dataType)=>{var Zr,Jr;const _i=!Ar.ShapeUtil.areEqual(Gr.dims,Wr.dims);let es=Gr.dims,ts=Ar.ShapeUtil.size(Gr.dims),rs=!1;if(_i){const ns=Ar.BroadcastUtil.calcShape(Gr.dims,Wr.dims,!1);if(!ns)throw new Error("Can't perform binary op on the given tensors");es=ns,ts=Ar.ShapeUtil.size(es);let as=1;for(let ls=0;ls<es.length;ls++){const us=(Zr=Gr.dims[Gr.dims.length-ls])!==null&&Zr!==void 0?Zr:1;if(us!==((Jr=Wr.dims[Wr.dims.length-ls])!==null&&Jr!==void 0?Jr:1))break;as*=us}as%4==0&&(rs=!0)}else rs=!0;return Object.assign(Object.assign({},jr),{getShaderSource:ns=>((as,ls,us,xs,Ts,vs,gs,fs,ys="f32",ks="f32",Fs="f32")=>{const Us=Ar.ShapeUtil.size(xs),Vs=Math.ceil(Us/4);let ao,qs;typeof gs=="string"?ao=qs=(so,uo)=>`${gs}((${so}),(${uo}))`:typeof gs=="function"?ao=qs=gs:(ao=gs.scalar,qs=gs.vector);let Qs="";const mo=(0,Lr.createIndicesHelper)("output",xs);if(vs){const so=uo=>{const bo=Ar.ShapeUtil.computeStrides(uo),wo=[];for(let Co=uo.length-1;Co>=0;Co--){const ds=xs.length===0?"0u":xs.length===1?"(*outputIndices)":`(*outputIndices)[${Co+xs.length-uo.length}]`;wo.push(`${bo[Co]}u * (${ds} % ${uo[Co]}u)`)}return wo.length>0?wo.join("+"):"0u"};Qs=`
  ${mo.o2iImpl}

  fn calcOffsetA(outputIndices: ptr<function, ${mo.iType}>) -> u32 {
    return ${so(ls)};
  }

  fn calcOffsetB(outputIndices: ptr<function, ${mo.iType}>) -> u32 {
    return ${so(us)};
  }
  `}let Xs;if(Ts)Xs=vs?`
      ${mo.indicesVariableDeclaration("outputIndices")}
      ${mo.o2iCall("global_idx * 4u","outputIndices")}
      let offsetA = calcOffsetA(&outputIndices);
      let offsetB = calcOffsetB(&outputIndices);
      outputData[global_idx] = ${qs("aData[offsetA / 4u]","bData[offsetB / 4u]")};`:`outputData[global_idx] = ${qs("aData[global_idx]","bData[global_idx]")};`;else{if(!vs)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");const so=uo=>{const bo=`aData[indexA${uo}][componentA${uo}]`,wo=`bData[indexB${uo}][componentB${uo}]`;return`
      ${mo.o2iCall(`global_idx * 4u + ${uo}u`,"outputIndices")}
      let offsetA${uo} = calcOffsetA(&outputIndices);
      let offsetB${uo} = calcOffsetB(&outputIndices);
      let indexA${uo} = offsetA${uo} / 4u;
      let indexB${uo} = offsetB${uo} / 4u;
      let componentA${uo} = offsetA${uo} % 4u;
      let componentB${uo} = offsetB${uo} % 4u;
      outputData[global_idx][${uo}] = ${ao(bo,wo)};`};Xs=`
      ${mo.indicesVariableDeclaration("outputIndices")}
      ${so(0)}
      ${so(1)}
      ${so(2)}
      ${so(3)}`}return`
  @group(0) @binding(0) var<storage, read> aData : array<vec4<${ys}>>;
  @group(0) @binding(1) var<storage, read> bData : array<vec4<${ks}>>;
  @group(0) @binding(2) var<storage, read_write> outputData : array<vec4<${Fs}>>;

  ${fs??""}
  ${Qs}

  ${as.mainStart()}
    ${as.guardAgainstOutOfBoundsWorkgroupSizes(Vs)}
    ${Xs}
  }`})(ns,Gr.dims,Wr.dims,es,rs,_i,qr,Kr),outputs:[{dims:es,dataType:Xr,gpuDataType:Pr.GpuDataType.default}],dispatchGroup:()=>({x:Math.ceil(ts/64/(rs?4:1))})})})(Dr,Fr[0],Fr[1],Ur,Vr)})};Tr.add=Fr=>{Fr.compute(Mr(Fr.inputs,"Add",(zr,Ur)=>`${zr}+${Ur}`))},Tr.div=Fr=>{Fr.compute(Mr(Fr.inputs,"Div",(zr,Ur)=>`${zr}/${Ur}`))},Tr.mul=Fr=>{Fr.compute(Mr(Fr.inputs,"Mul",(zr,Ur)=>`${zr}*${Ur}`))},Tr.pow=Fr=>{Fr.compute(Mr(Fr.inputs,"Pow",{scalar:(zr,Ur)=>`pow_f32(${zr},${Ur})`,vector:(zr,Ur)=>`pow_vf32(${zr},${Ur})`},`
    fn pow_f32(a : f32, b : f32) -> f32 {
      if (b == 0.0) {
        return 1.0;
      } else if (a < 0.0 && b != floor(b)) {
        return pow(a, b); // NaN
      }
      return select(sign(a), 1.0, round(abs(b) % 2.0) != 1.0) * pow(abs(a), b);
    }
    fn pow_vf32(a : vec4<f32>, b : vec4<f32>) -> vec4<f32> {
      // TODO: implement vectorized pow
      return vec4<f32>(pow_f32(a.x, b.x), pow_f32(a.y, b.y), pow_f32(a.z, b.z), pow_f32(a.w, b.w));
    }
      `))},Tr.sub=Fr=>{Fr.compute(Mr(Fr.inputs,"Sub",(zr,Ur)=>`${zr}-${Ur}`))}},2075:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createShaderHelper=Tr.createIndicesHelper=Tr.WORKGROUP_SIZE=void 0;const Ar=Rr(6952);Tr.WORKGROUP_SIZE=64,Tr.createIndicesHelper=(Lr,Mr)=>{const Fr=Mr.length<2?"u32":`array<u32, ${Mr.length}>`,zr=Ar.ShapeUtil.computeStrides(Mr);let Ur="";for(let Dr=0;Dr<Mr.length-1;Dr++)Ur+=`
    let dim${Dr} = current / ${zr[Dr]}u;
    let rest${Dr} = current % ${zr[Dr]}u;
    (*indices)[${Dr}] = dim${Dr};
    current = rest${Dr};
    `;Ur+=`(*indices)[${Mr.length-1}] = current;`;const Vr=Mr.length<2?"":`
  fn ih_o2i_${Lr}(offset: u32, indices: ptr<function, ${Fr}>) {
    var current = offset;
    ${Ur}
  }`,Nr=[];if(Mr.length===0)Nr.push("0u");else if(Mr.length<2)Nr.push("(*indices)");else for(let Dr=Mr.length-1;Dr>=0;Dr--)Nr.push(`${zr[Dr]}u * ((*indices)[${Dr}])`);return{o2iImpl:Vr,o2iCall:(Dr,jr)=>Mr.length<2?`${jr}=${Dr};`:`ih_o2i_${Lr}(${Dr}, &${jr});`,i2oImpl:Mr.length<2?"":`
  fn ih_i2o_${Lr}(indices: ptr<function, ${Fr}>) -> u32 {
    return ${Nr.join("+")};
  }`,i2oExpression:(Dr,jr)=>Mr.length<2?`(${jr?"*":""}${Dr})`:`ih_i2o_${Lr}(${jr?"":"&"}${Dr})`,indicesVariableDeclaration:(Dr,jr)=>`var ${Dr}:${Fr}${jr?`=${Fr}(${jr.join(",")})`:""};`,iType:Fr}};class Pr{constructor(Mr){this.normalizedDispatchGroup=Mr}guardAgainstOutOfBoundsWorkgroupSizes(Mr){return`if (global_idx >= ${typeof Mr=="number"?`${Mr}u`:Mr}) { return; }`}mainStart(Mr=Tr.WORKGROUP_SIZE){const Fr=typeof Mr=="number"?Mr:Mr[0],zr=typeof Mr=="number"?1:Mr[1],Ur=typeof Mr=="number"?1:Mr[2],Vr=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1;return`@compute @workgroup_size(${Fr}, ${zr}, ${Ur})
  fn main(${Vr?"@builtin(global_invocation_id) global_id : vec3<u32>":`@builtin(local_invocation_index) local_index : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>`}) {
    ${Vr?"let global_idx = global_id.x;":`let global_idx = (workgroup_id.z * ${this.normalizedDispatchGroup[0]*this.normalizedDispatchGroup[1]}u +
          workgroup_id.y * ${this.normalizedDispatchGroup[0]}u + workgroup_id.x) * ${Fr*zr*Ur}u + local_index;`}
  `}}Tr.createShaderHelper=Lr=>new Pr(Lr)},9192:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createGroupedConvProgramInfoLoader=void 0;const Ar=Rr(6952),Pr=Rr(1163),Lr=Rr(2075),Mr=Rr(9770),Fr=Rr(3997);Tr.createGroupedConvProgramInfoLoader=(zr,Ur,Vr)=>{const Nr=(Dr=zr.length>2,jr=Ur.cacheKey,{name:"GroupedConv",inputTypes:Dr?[Pr.GpuDataType.default,Pr.GpuDataType.default,Pr.GpuDataType.default]:[Pr.GpuDataType.default,Pr.GpuDataType.default],cacheHint:jr});var Dr,jr;return Object.assign(Object.assign({},Nr),{get:()=>((Gr,Wr,qr,Kr)=>{const Xr=Gr.length>2,Zr=Xr?"value += b[output_channel];":"",Jr=Gr[0].dims,_i=Gr[1].dims,es=_i[0]/qr.group,ts="f32",{activationFunction:rs,applyActivation:ns}=(0,Fr.getActicationSnippet)(qr),as=[`@group(0) @binding(0) var<storage, read> x : array<${ts}>;`,`@group(0) @binding(1) var<storage, read> w : array<${ts}>;`];Xr&&as.push(`@group(0) @binding(2) var<storage, read> b : array<${ts}>;`);const ls=qr.format==="NHWC",us=(0,Mr.calculateOutputShape)(Jr,_i,qr.dilations,qr.pads,qr.strides,ls),xs=Ar.ShapeUtil.size(us),Ts=(0,Lr.createIndicesHelper)("output",us),vs=(0,Lr.createIndicesHelper)("x",Jr),gs=(0,Lr.createIndicesHelper)("w",_i);return Object.assign(Object.assign({},Wr),{outputs:[{dims:Kr?Kr(us):us,dataType:Gr[0].dataType,gpuDataType:Pr.GpuDataType.default}],getShaderSource:fs=>`
  const strides: vec2<u32> = vec2(${qr.strides[0]}u, ${qr.strides[1]}u);
  const pads: vec2<u32> = vec2(${qr.pads[0]}u, ${qr.pads[1]}u);

  ${as.join(`
`)}
  @group(0) @binding(${as.length}) var<storage, read_write> output : array<${ts}>;

  ${rs}
  ${Ts.o2iImpl}
  ${vs.i2oImpl}
  ${gs.i2oImpl}

  ${fs.mainStart()}
    ${fs.guardAgainstOutOfBoundsWorkgroupSizes(xs)}

    ${Ts.indicesVariableDeclaration("outputIndices")}
    ${Ts.o2iCall("global_idx","outputIndices")}
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${ls?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${ls?1:2}], outputIndices[${ls?2:3}]) * strides - pads;
    let group_id: u32 = output_channel / ${es}u;

    var value: ${ts} = ${ts}(0);
    for (var wInChannel: u32 = 0u; wInChannel < ${_i[1]}u; wInChannel++) {
      let input_channel = group_id * ${_i[1]}u + wInChannel;
      for (var wHeight: u32 = 0u; wHeight < ${_i[2]}u; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * ${qr.dilations[0]}u;

        if (xHeight < 0u || xHeight >= ${Jr[ls?1:2]}u) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < ${_i[3]}u; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * ${qr.dilations[1]}u;
          if (xWidth < 0u || xWidth >= ${Jr[ls?2:3]}u) {
            continue;
          }

          ${vs.indicesVariableDeclaration("xIndices",ls?["batch","xHeight","xWidth","input_channel"]:["batch","input_channel","xHeight","xWidth"])}
          let xVal = x[${vs.i2oExpression("xIndices")}];
          ${gs.indicesVariableDeclaration("wIndices",["output_channel","wInChannel","wHeight","wWidth"])}
          let wVal = w[${gs.i2oExpression("wIndices")}];
          value += xVal*wVal;
        }
      }
    }
    ${Zr}
    ${ns}
    output[global_idx] = value;
  }`,dispatchGroup:()=>({x:Math.ceil(xs/64)})})})(zr,Nr,Ur,Vr)})}},9770:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.conv=Tr.parseConvAttributes=Tr.calculateOutputShape=void 0;const Ar=Rr(6952),Pr=Rr(387),Lr=Rr(9192),Mr=Rr(3822),Fr=Rr(3997),zr=Rr(2625);Tr.calculateOutputShape=(Nr,Dr,jr,Gr,Wr,qr)=>{const Kr=Nr[0],Xr=Nr.slice(qr?1:2,qr?3:4),Zr=Xr.length,Jr=Dr[0],_i=Dr.slice(2).map((ts,rs)=>ts+(ts-1)*(jr[rs]-1)),es=Xr.map((ts,rs)=>ts+Gr[rs]+Gr[rs+Zr]).map((ts,rs)=>Math.floor((ts-_i[rs]+Wr[rs])/Wr[rs]));return es.splice(0,0,Kr),es.splice(qr?3:1,0,Jr),es};const Ur=(0,Pr.createAttributeWithCacheKey)({perm:[2,3,1,0]}),Vr=(Nr,Dr)=>{const jr=Nr.kernelShape.slice();for(let qr=2;qr<Dr[1].dims.length;++qr)jr[qr-2]===0&&(jr[qr-2]=Dr[1].dims[qr]);const Gr=Nr.pads.slice();Ar.PoolConvUtil.adjustPadsBasedOnAutoPad(Dr[0].dims,Nr.strides,Nr.dilations,jr,Gr,Nr.format==="NHWC",Nr.autoPad);const Wr=Object.assign({},Nr);return Object.assign(Wr,{kernelShape:jr,pads:Gr,cacheKey:Nr.cacheKey}),Wr};Tr.parseConvAttributes=Nr=>{const Dr=(0,Fr.parseInternalActivationAttributes)(Nr),jr=Nr.format,Gr=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][Nr.auto_pad],Wr=Nr.dilations,qr=Nr.group,Kr=Nr.kernel_shape,Xr=Nr.pads,Zr=Nr.strides,Jr=Nr.w_is_const();return(0,Pr.createAttributeWithCacheKey)(Object.assign({autoPad:Gr,format:jr,dilations:Wr,group:qr,kernelShape:Kr,pads:Xr,strides:Zr,wIsConst:Jr},Dr))},Tr.conv=(Nr,Dr)=>{((jr,Gr)=>{if(!jr||jr.length!==2&&jr.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(jr[0].dims.length!==4&&jr[0].dims.length!==3)throw new Error("currently only support conv 1D and 2D");if(jr[0].dims.length!==jr[1].dims.length)throw new Error("filter does not have same dimension as input");if(jr[0].dims[Gr.format==="NHWC"?jr[0].dims.length-1:1]!==jr[1].dims[1]*Gr.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(jr.length===3&&(jr[2].dims.length!==1||jr[1].dims[0]!==jr[2].dims[0]))throw new Error("invalid bias");const Wr=jr[0].dims.length-2;if(Gr.dilations.length!==Wr)throw new Error(`dilations should be ${Wr}D`);if(Gr.strides.length!==Wr)throw new Error(`strides should be ${Wr}D`);if(Gr.pads.length!==2*Wr)throw new Error(`pads should be ${2*Wr}D`);if(Gr.kernelShape.length!==0&&Gr.kernelShape.length!==jr[1].dims.length-2)throw new Error("invalid kernel shape");if(jr[0].dataType!==1||jr[1].dataType!==1)throw new Error("Conv input(X,W) should be float tensor");if(jr.length===3&&jr[2].dataType!==1)throw new Error("Conv input(bias) should be float tensor")})(Nr.inputs,Dr),Nr.inputs[0].dims.length===3?((jr,Gr)=>{const Wr=Gr.format==="NHWC",qr=[jr.inputs[0].reshape(Wr?[jr.inputs[0].dims[0],1,jr.inputs[0].dims[1],jr.inputs[0].dims[2]]:[jr.inputs[0].dims[0],jr.inputs[0].dims[1],1,jr.inputs[0].dims[2]]),jr.inputs[1].reshape([jr.inputs[1].dims[0],jr.inputs[1].dims[1],1,jr.inputs[1].dims[2]])];jr.inputs.length===3&&qr.push(jr.inputs[2]);const Kr=[0,Gr.pads[0],0,Gr.pads[1]],Xr=[1].concat(Gr.strides),Zr=[1].concat(Gr.dilations),Jr=[1].concat(Gr.kernelShape),_i=Vr(Object.assign(Object.assign({},Gr),{pads:Kr,strides:Xr,dilations:Zr,kernelShape:Jr}),qr);jr.compute((0,Lr.createGroupedConvProgramInfoLoader)(qr,_i,es=>Wr?[es[0],es[2],es[3]]:[]))})(Nr,Dr):((jr,Gr,Wr)=>{var qr;const Kr=Vr(Wr,Gr),Xr=Gr.length===3,Zr=Wr.format==="NHWC",Jr=Gr[0].dims[Zr?1:2],_i=Gr[0].dims[Zr?2:3],es=Gr[0].dims[Zr?3:1],ts=Gr[1].dims[2],rs=Gr[1].dims[3],ns=(0,Tr.calculateOutputShape)(Gr[0].dims,Gr[1].dims,Wr.dilations,Kr.pads,Wr.strides,Zr),as=ns[Zr?1:2],ls=ns[Zr?2:3],us=ns[Zr?3:1];if(Zr&&ts===Jr&&rs===_i&&Wr.autoPad==="VALID"||ts===1&&rs===1&&Wr.dilations[0]===1&&Wr.dilations[1]===1&&Wr.strides[0]===1&&Wr.strides[1]===1&&(Wr.autoPad==="SAME_UPPER"||Wr.autoPad==="SAME_LOWER"||Wr.autoPad==="VALID")||!Zr||Wr.group!==1)return void jr.compute((0,Lr.createGroupedConvProgramInfoLoader)(Gr,Kr));const xs=Zr?as*ls:us,Ts=Zr?us:as*ls,vs=ts*rs*es,gs=(qr=jr.customData.wT)!==null&&qr!==void 0?qr:jr.compute(Object.assign(Object.assign({},zr.transposeProgramMetadata),{cacheHint:Ur.cacheKey,get:()=>(0,zr.createTransposeProgramInfo)(Gr[1],Ur.perm)}),{inputs:[1],outputs:[Wr.wIsConst?-2:-1]})[0];Wr.wIsConst&&!jr.customData.wT&&(jr.customData.wT=gs);const fs=[Gr[0],gs];Xr&&(Zr||Gr[2].dims.length!==1?fs.push(Gr[2]):fs.push(Gr[2].reshape([Gr[2].dims[0],1,1]))),jr.compute((0,Mr.createConv2DMatMulProgramInfoLoader)(fs,Kr,ns,xs,Ts,vs,Xr,!0),{inputs:fs})})(Nr,Nr.inputs,Dr)}},3822:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createConv2DMatMulProgramInfoLoader=void 0;const Ar=Rr(1163),Pr=Rr(9456);Tr.createConv2DMatMulProgramInfoLoader=(Lr,Mr,Fr,zr,Ur,Vr,Nr,Dr)=>{const jr=((Gr,Wr)=>({name:"Conv2DMatMul",inputTypes:Gr?[Ar.GpuDataType.default,Ar.GpuDataType.default,Ar.GpuDataType.default]:[Ar.GpuDataType.default,Ar.GpuDataType.default],cacheHint:Wr}))(Nr,Mr.cacheKey);return Object.assign(Object.assign({},jr),{get:()=>(0,Pr.createConv2DMatMulProgramInfo)(Lr,jr,Mr,Fr,zr,Ur,Vr,Nr,Dr)})}},3997:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseInternalActivationAttributes=Tr.getActicationSnippet=void 0;const Ar=Rr(6952);Tr.getActicationSnippet=Pr=>{switch(Pr.activation){case"Relu":return{activationFunction:"",applyActivation:"value = max(value, 0.0);"};case"Sigmoid":return{activationFunction:"",applyActivation:"value = (1.0 / (1.0 + exp(-value)));"};case"Clip":return{activationFunction:`const clip_min_=f32(${Pr.clipMin});const clip_max_=f32(${Pr.clipMax});`,applyActivation:"value = clamp(value, clip_min_, clip_max_);"};default:return{activationFunction:"",applyActivation:""}}},Tr.parseInternalActivationAttributes=Pr=>{const Lr=(Pr==null?void 0:Pr.activation)||"";if(Lr==="Clip"){const[Mr,Fr]=(Pr==null?void 0:Pr.activation_params)||[Ar.MIN_CLIP,Ar.MAX_CLIP];return{activation:Lr,clipMax:Fr,clipMin:Mr,activationCacheKey:`${Lr}:${Mr},${Fr}`}}return{activation:Lr,activationCacheKey:Lr}}},4271:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseGemmAttributes=Tr.gemm=void 0;const Ar=Rr(6952),Pr=Rr(387),Lr=Rr(1163);Tr.gemm=(Mr,Fr)=>{(zr=>{if(!zr)throw new Error("Input is missing");if(zr.length<2||zr.length>3)throw new Error("Invaid input number.");if(zr.length===3&&zr[2].dims.length>2)throw new Error("Invalid input shape of C");if(zr[0].dataType!==1||zr[1].dataType!==1||zr.length===3&&zr[2].dataType!==1)throw new Error("Invalid input type.");if(zr[0].dataType!==zr[1].dataType||zr.length===3&&zr[0].dataType!==zr[2].dataType)throw new Error("Input types are mismatched")})(Mr.inputs),Mr.compute(((zr,Ur)=>{const Vr={name:"Gemm",inputTypes:zr.length===3?[Lr.GpuDataType.default,Lr.GpuDataType.default,Lr.GpuDataType.default]:[Lr.GpuDataType.default,Lr.GpuDataType.default],cacheHint:Ur.cacheKey};return Object.assign(Object.assign({},Vr),{get:()=>((Nr,Dr,jr)=>{const Gr=Dr[0].dims.slice(),Wr=Dr[1].dims.slice(),[qr,Kr,Xr]=Ar.GemmUtil.getShapeOfGemmResult(Gr,jr.transA,Wr,jr.transB,Dr.length===3?Dr[2].dims:void 0),Zr=[qr,Kr];if(!Zr)throw new Error("Can't use gemm on the given tensors");const Jr=Ar.ShapeUtil.size(Zr);let _i="";jr.transA&&jr.transB?_i="value += a[k * M + m] * b[n * K + k];":jr.transA&&!jr.transB?_i="value += a[k * M + m] * b[k * N + n];":!jr.transA&&jr.transB?_i="value += a[m * K + k] * b[n * K + k];":jr.transA||jr.transB||(_i="value += a[m * K + k] * b[k * N + n];");const es="f32",ts=jr.alpha===1?"":"value *= alpha;",rs=Dr.length===3?`value += beta * c[${((as,ls,us)=>{if(us.length===0)return"0u";const xs=us.length===1&&as!==1||us.length===2&&us[0]!==as,Ts=us[us.length-1]!==ls;let vs="0u";return xs||(vs+=`+ m * ${us[us.length-1]}u`),Ts||(vs+="+n"),vs})(qr,Kr,Dr[2].dims)}];`:"",ns=[`@group(0) @binding(0) var<storage, read> a : array<${es}>;`,`@group(0) @binding(1) var<storage, read> b : array<${es}>;`];return Dr.length===3&&ns.push(`@group(0) @binding(2) var<storage, read> c : array<${es}>;`),Object.assign(Object.assign({},Nr),{outputs:[{dims:Zr,dataType:Dr[0].dataType,gpuDataType:Lr.GpuDataType.default}],getShaderSource:as=>`
  const M: u32 = ${qr}u;
  const N: u32 = ${Kr}u;
  const K: u32 = ${Xr}u;
  const alpha = ${es}(${jr.alpha});
  const beta = ${es}(${jr.beta});

  ${ns.join(`
`)}
  @group(0) @binding(${Dr.length}) var<storage, read_write> output : array<${es}>;

  ${as.mainStart()}
    ${as.guardAgainstOutOfBoundsWorkgroupSizes(Jr)}

    let m = global_id.x / N;
    let n = global_id.x % N;

    var value = ${es}(0);
    for (var k: u32 = 0u; k<${Xr}u; k++) {
      ${_i}
    }

    ${ts}
    ${rs}
    output[global_id.x] = value;

  }`,dispatchGroup:()=>({x:Math.ceil(Jr/64)})})})(Vr,zr,Ur)})})(Mr.inputs,Fr))},Tr.parseGemmAttributes=Mr=>(0,Pr.createAttributeWithCacheKey)(Mr)},1522:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.matMul=Tr.createMatmulProgramInfoLoader=void 0;const Ar=Rr(6952),Pr=Rr(1163),Lr=Rr(3997);Tr.createMatmulProgramInfoLoader=(Mr,Fr)=>{const zr=(Ur=Mr.length>2,Vr=Fr.activationCacheKey,{name:"MatMul",inputTypes:Ur?[Pr.GpuDataType.default,Pr.GpuDataType.default,Pr.GpuDataType.default]:[Pr.GpuDataType.default,Pr.GpuDataType.default],cacheHint:Vr});var Ur,Vr;return Object.assign(Object.assign({},zr),{get:()=>((Nr,Dr,jr)=>{const Gr=Dr[0].dims,Wr=Dr[1].dims,qr=Ar.BroadcastUtil.calcShape(Gr,Wr,!0);if(!qr)throw new Error("Can't use matmul on the given tensors");const Kr=Ar.ShapeUtil.size(qr),Xr="f32",{activationFunction:Zr,applyActivation:Jr}=(0,Lr.getActicationSnippet)(jr),_i=qr[qr.length-2],es=Gr[Gr.length-1],ts=qr[qr.length-1];return Object.assign(Object.assign({},Nr),{outputs:[{dims:qr,dataType:Dr[0].dataType,gpuDataType:Pr.GpuDataType.default}],getShaderSource:rs=>`
  const M: u32 = ${_i}u;
  const N: u32 = ${ts}u;
  const K: u32 = ${es}u;

  @group(0) @binding(0) var<storage, read> a : array<${Xr}>;
  @group(0) @binding(1) var<storage, read> b : array<${Xr}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${Xr}>;

  ${Zr}

  ${rs.mainStart()}
    ${rs.guardAgainstOutOfBoundsWorkgroupSizes(Kr)}

    let stack = global_idx / (M * N);
    let mn = global_idx % (M * N);
    let n = global_idx % N;
    let m = mn / N;

    let offsetA = stack * (M * K);
    let offsetB = stack * (K * N);

    var value = ${Xr}(0);
    for (var k: u32 = 0u; k<${es}u; k++) {
      value += a[offsetA + m * K + k] * b[offsetB + k * N + n];
    }
    ${Jr}
    output[global_idx] = value;
  }`,dispatchGroup:()=>({x:Math.ceil(Kr/64)})})})(zr,Mr,Fr)})},Tr.matMul=Mr=>{(Fr=>{if(!Fr||Fr.length!==2)throw new Error("MatMul requires 2 inputs.");if(Fr[0].dims[Fr[0].dims.length-1]!==Fr[1].dims[Fr[1].dims.length-2])throw new Error("shared dimension does not match.");if(Fr[0].dataType!==1||Fr[1].dataType!==1)throw new Error("inputs should be float type")})(Mr.inputs),Mr.compute((0,Tr.createMatmulProgramInfoLoader)(Mr.inputs,{activation:"",activationCacheKey:""}))}},5262:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.globalMaxPool=Tr.parseGlobalMaxPoolAttributes=Tr.parseMaxPoolAttributes=Tr.maxPool=Tr.globalAveragePool=Tr.parseGlobalAveragePoolAttributes=Tr.averagePool=Tr.parseAveragePoolAttributes=void 0;const Ar=Rr(6952),Pr=Rr(387),Lr=Rr(1163),Mr=Rr(2075),Fr=Gr=>{if(!Gr||Gr.length!==1)throw new Error("Pool ops requires 1 input.");if(Gr[0].dims.length!==4)throw new Error("Pool ops supports 2-D inputs only for now.");if(Gr[0].dataType!==1)throw new Error("Invalid input type.")},zr=(Gr,Wr,qr)=>{const Kr=Wr.format==="NHWC",Xr=Kr?[Gr[0].dims[0],Gr[0].dims[3],Gr[0].dims[1],Gr[0].dims[2]]:Gr[0].dims.slice(),Zr=Object.hasOwnProperty.call(Wr,"dilations"),Jr=Wr.kernelShape.slice(),_i=Wr.strides.slice(),es=Zr?Wr.dilations.slice():[],ts=Wr.pads.slice();Ar.PoolConvUtil.adjustPoolAttributes(qr,Xr,Jr,_i,es,ts);const rs=Ar.PoolConvUtil.computePoolOutputShape(qr,Xr,_i,es,Jr,ts,Wr.autoPad),ns=Object.assign({},Wr);return Zr?Object.assign(ns,{kernelShape:Jr,strides:_i,pads:ts,dilations:es,cacheKey:Wr.cacheKey}):Object.assign(ns,{kernelShape:Jr,strides:_i,pads:ts,cacheKey:Wr.cacheKey}),[ns,Kr?[rs[0],rs[2],rs[3],rs[1]]:rs]},Ur=(Gr,Wr,qr,Kr,Xr,Zr,Jr,_i)=>{const es=Kr.format==="NHWC",ts=Wr.length,rs=Ar.ShapeUtil.size(qr),ns=(0,Mr.createIndicesHelper)("output",qr),as=(0,Mr.createIndicesHelper)("x",Wr);if(Kr.kernelShape.length<=2){const ls=Kr.kernelShape[Kr.kernelShape.length-1],us=Kr.strides[Kr.strides.length-1],xs=Kr.pads[Kr.pads.length/2-1],Ts=ts-(es?2:1);let vs="",gs="",fs="";if(vs=xs+Kr.pads[Kr.pads.length-1]!==0?`
              for (var i: u32 = 0u; i < ${ls}u; i++) {
                xIndices[${Ts}] = indices[${Ts}] * ${us} - ${xs} + i;
                if (xIndices[${Ts}] < 0 || xIndices[${Ts}] >= ${Wr[Ts]}) {
                  pad++;
                  continue;
                }
                let x_val = x[${as.i2oExpression("xIndices")}];
                ${Xr}
              }`:`
              for (var i: u32 = 0u; i < ${ls}u; i++) {
                xIndices[${Ts}] = indices[${Ts}] * ${us} - ${xs} + i;
                let x_val = x[${as.i2oExpression("xIndices")}];
                ${Xr}
              }`,Kr.kernelShape.length===2){const ys=Kr.kernelShape[Kr.kernelShape.length-2],ks=Kr.strides[Kr.strides.length-2],Fs=Kr.pads[Kr.pads.length/2-2],Us=Kr.pads[Kr.pads.length-2],Vs=ts-(es?3:2),ao=Wr[Vs];gs=Fs+Us!==0?`
                for (var j: u32 = 0u; j < ${ys}u; j++) {
                  xIndices[${Vs}] = indices[${Vs}] * ${ks} - ${Fs} + j;
                  if (xIndices[${Vs}] < 0 || xIndices[${Vs}] >= ${ao}) {
                    pad+= ${ls};
                    continue;
                  }
              `:`
                for (var j: u32 = 0u; j < ${ys}u; j++) {
                  xIndices[${Vs}] = indices[${Vs}] * ${ks} - ${Fs} + j;
                `,fs=`
              }
            `}return`
            @group(0) @binding(0) var<storage, read> x : array<${Jr}>;
            @group(0) @binding(1) var<storage, read_write> output : array<${Jr}>;

            ${ns.o2iImpl}
            ${as.i2oImpl}

            ${Gr.mainStart()}
              ${Gr.guardAgainstOutOfBoundsWorkgroupSizes(rs)}

              ${ns.indicesVariableDeclaration("indices")}
              ${ns.o2iCall("global_idx","indices")}
              ${ns.indicesVariableDeclaration("xIndices")}
              ${ns.o2iCall("global_idx","xIndices")}

              var value: ${Jr} = ${Jr}(${_i});
              var pad = 0;
              ${gs}
              ${vs}
              ${fs}
              ${Zr}

              output[global_idx] = value;
            }`}{if(es)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");const ls=Ar.ShapeUtil.size(Kr.kernelShape),us=Ar.ShapeUtil.computeStrides(Kr.kernelShape),xs=us.length,Ts=Kr.pads.length;let vs="";return vs=Kr.pads.reduce((gs,fs)=>gs+fs)?`
                if (xIndices[j] >= inputDims[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${as.i2oExpression("xIndices")}];
                ${Xr}
              }`:`
              }
              let x_val = x[${as.i2oExpression("xIndices")}];
              ${Xr}
            `,`
            @group(0) @binding(0) var<storage, read> x : array<${Jr}>;
            @group(0) @binding(1) var<storage, read_write> output : array<${Jr}>;

            ${ns.o2iImpl}
            ${as.i2oImpl}

            const pads = array<u32, ${Ts}>(${Kr.pads.map(gs=>`${gs}u`).join(",")});
            const inputDims = array<u32, ${ts}>(${Wr.map(gs=>`${gs}u`).join(",")});
            const kernelStrides = array<u32, ${xs}>(${us.map(gs=>`${gs}u`).join(",")});
            const strides = array<u32, ${xs}>(${Kr.strides.map(gs=>`${gs}u`).join(",")});

            ${Gr.mainStart()}
              ${Gr.guardAgainstOutOfBoundsWorkgroupSizes(rs)}

              ${ns.indicesVariableDeclaration("indices")}
              ${ns.o2iCall("global_idx","indices")}
              ${ns.indicesVariableDeclaration("xIndices")}
              ${ns.o2iCall("global_idx","xIndices")}

              var offsets: array<u32, ${xs}>;

              var value = ${Jr}(${_i});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < ${ls}u; i++) {
                var offset = i;
                for (var j = 0u; j < ${xs-1}u; j++) {
                  offsets[j] = offset / kernelStrides[j];
                  offset -= offsets[j] * kernelStrides[j];
                }
                offsets[${xs-1}] = offset;

                isPad = false;
                for (var j = ${ts-xs}u; j < ${ts}u; j++) {
                  xIndices[j] = indices[j] * strides[j - ${ts-xs}u]
                    + offsets[j - ${ts-xs}u] - pads[j - 2u];
                  ${vs}
              }
              ${Zr}

              output[global_idx] = value;
            }`}},Vr=Gr=>({format:Gr.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][Gr.auto_pad],ceilMode:Gr.ceil_mode,kernelShape:Gr.kernel_shape,strides:Gr.strides,pads:Gr.pads}),Nr=(Gr,Wr,qr,Kr)=>{const[Xr,Zr]=zr(Gr,Kr,qr),Jr=Ar.ShapeUtil.size(Xr.kernelShape),_i="f32";let es="";return Xr.countIncludePad?es+=`value /= ${_i}(${Jr});`:es+=`value /= ${_i}(${Jr} - pad);`,Object.assign(Object.assign({},Wr),{outputs:[{dims:Zr,dataType:Gr[0].dataType,gpuDataType:Lr.GpuDataType.default}],getShaderSource:ts=>Ur(ts,Gr[0].dims,Zr,Xr,"value += x_val;",es,_i,"0.0"),dispatchGroup:()=>({x:Math.ceil(Ar.ShapeUtil.size(Zr)/64)})})};Tr.parseAveragePoolAttributes=Gr=>{const Wr=Gr.count_include_pad!==0,qr=Vr(Gr);if(qr.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,Pr.createAttributeWithCacheKey)(Object.assign({countIncludePad:Wr},qr))},Tr.averagePool=(Gr,Wr)=>{Fr(Gr.inputs);const qr={name:"AveragePool",inputTypes:[Lr.GpuDataType.default],cacheHint:Wr.cacheKey};Gr.compute(Object.assign(Object.assign({},qr),{get:()=>Nr(Gr.inputs,qr,!1,Wr)}))};const Dr={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""};Tr.parseGlobalAveragePoolAttributes=Gr=>{const Wr=Gr.format;return Object.assign(Object.assign({format:Wr},Dr),{cacheKey:Wr})},Tr.globalAveragePool=(Gr,Wr)=>{Fr(Gr.inputs);const qr={name:"GlobalAveragePool",inputTypes:[Lr.GpuDataType.default],cacheHint:Wr.cacheKey};Gr.compute(Object.assign(Object.assign({},qr),{get:()=>Nr(Gr.inputs,qr,!0,Wr)}))};const jr=(Gr,Wr,qr,Kr)=>{const[Xr,Zr]=zr(Gr,Kr,qr);return Object.assign(Object.assign({},Wr),{outputs:[{dims:Zr,dataType:Gr[0].dataType,gpuDataType:Lr.GpuDataType.default}],getShaderSource:Jr=>Ur(Jr,Gr[0].dims,Zr,Xr,`
      value = max(x_val, value);
    `,"","f32","-1e5"),dispatchGroup:()=>({x:Math.ceil(Ar.ShapeUtil.size(Zr)/64)})})};Tr.maxPool=(Gr,Wr)=>{Fr(Gr.inputs);const qr={name:"MaxPool",inputTypes:[Lr.GpuDataType.default],cacheHint:Wr.cacheKey};Gr.compute(Object.assign(Object.assign({},qr),{get:()=>jr(Gr.inputs,qr,!1,Wr)}))},Tr.parseMaxPoolAttributes=Gr=>{const Wr=Gr.storage_order,qr=Gr.dilations,Kr=Vr(Gr);if(Wr!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(Kr.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,Pr.createAttributeWithCacheKey)(Object.assign({storageOrder:Wr,dilations:qr},Kr))},Tr.parseGlobalMaxPoolAttributes=Gr=>{const Wr=Gr.format;return Object.assign(Object.assign({format:Wr},Dr),{cacheKey:Wr})},Tr.globalMaxPool=(Gr,Wr)=>{Fr(Gr.inputs);const qr={name:"GlobalMaxPool",inputTypes:[Lr.GpuDataType.default],cacheHint:Wr.cacheKey};Gr.compute(Object.assign(Object.assign({},qr),{get:()=>jr(Gr.inputs,qr,!0,Wr)}))}},2625:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.parseTransposeAttributes=Tr.transpose=Tr.createTransposeProgramInfo=Tr.transposeProgramMetadata=void 0;const Ar=Rr(6952),Pr=Rr(387),Lr=Rr(1163),Mr=Rr(2075);Tr.transposeProgramMetadata={name:"Transpose",inputTypes:[Lr.GpuDataType.default]};const Fr=(zr,Ur)=>Ur&&Ur.length!==zr.length?[...zr.keys()].reverse():Ur;Tr.createTransposeProgramInfo=(zr,Ur)=>{const Vr=zr.dims,Nr=Fr(Vr,Ur),Dr=((Kr,Xr)=>Ar.ShapeUtil.sortBasedOnPerm(Kr,Fr(Kr,Xr)))(Vr,Nr),jr=Vr.length,Gr=Ar.ShapeUtil.size(Dr),Wr=(0,Mr.createIndicesHelper)("output",Dr),qr=(0,Mr.createIndicesHelper)("a",Vr);return Object.assign(Object.assign({},Tr.transposeProgramMetadata),{outputs:[{dims:Dr,dataType:zr.dataType,gpuDataType:Lr.GpuDataType.default}],getShaderSource:Kr=>`
  @group(0) @binding(0) var<storage, read> a : array<f32>;
  @group(0) @binding(1) var<storage, read_write> output : array<f32>;

  ${((Xr,Zr)=>{const Jr=[];Jr.push(`fn perm(a: ptr<function, array<u32, ${Zr}>>, i: ptr<function, array<u32, ${Zr}>>) {`);for(let _i=0;_i<Zr;++_i)Jr.push(`	(*a)[${Xr[_i]}]=(*i)[${_i}];`);return Jr.push("	}"),Jr.join(`
`)})(Nr,jr)}
  ${Wr.o2iImpl}
  ${qr.i2oImpl}

  ${Kr.mainStart()}
    ${Kr.guardAgainstOutOfBoundsWorkgroupSizes(Gr)}

    ${Wr.indicesVariableDeclaration("indices")}
    ${Wr.o2iCall("global_idx","indices")}
    ${qr.indicesVariableDeclaration("aIndices")}
    perm(&aIndices, &indices);

    output[global_idx] = a[${qr.i2oExpression("aIndices")}];
  }`,dispatchGroup:()=>({x:Math.ceil(Gr/64)})})},Tr.transpose=(zr,Ur)=>{(Vr=>{if(!Vr||Vr.length!==1)throw new Error("Transpose requires 1 input.");if(Vr[0].dataType!==1)throw new Error("input should be float tensor")})(zr.inputs),zr.compute(Object.assign(Object.assign({},Tr.transposeProgramMetadata),{cacheHint:Ur.cacheKey,get:()=>(0,Tr.createTransposeProgramInfo)(zr.inputs[0],Ur.perm)}))},Tr.parseTransposeAttributes=zr=>(0,Pr.createAttributeWithCacheKey)({perm:zr.perm})},9302:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.thresholdedRelu=Tr.tanh=Tr.tan=Tr.sqrt=Tr.sinh=Tr.sin=Tr.sigmoid=Tr.relu=Tr.reciprocal=Tr.neg=Tr.leakyRelu=Tr.floor=Tr.exp=Tr.erf=Tr.elu=Tr.parseAlphaAttributes=Tr.cosh=Tr.cos=Tr.ceil=Tr.clip=Tr.clipV10=Tr.atanh=Tr.atan=Tr.asinh=Tr.asin=Tr.acosh=Tr.acos=Tr.abs=void 0;const Ar=Rr(6952),Pr=Rr(387),Lr=Rr(1163),Mr=(Fr,zr,Ur,Vr,Nr)=>{const Dr={name:zr,inputTypes:[Lr.GpuDataType.default],cacheHint:Nr};return Object.assign(Object.assign({},Dr),{get:()=>((jr,Gr,Wr,qr)=>Object.assign(Object.assign({},jr),{getShaderSource:Kr=>((Xr,Zr,Jr,_i)=>{const es=Math.ceil(Zr/4);let ts="";return ts=typeof Jr=="string"?`${Jr}(a)`:Jr("a"),`
  @group(0) @binding(0) var<storage, read> inputData : array<vec4<f32>>;
  @group(0) @binding(1) var<storage, read_write> outputData : array<vec4<f32>>;

  ${_i??""}

  ${Xr.mainStart()}
    ${Xr.guardAgainstOutOfBoundsWorkgroupSizes(es)}

    let a = inputData[global_idx];
    outputData[global_idx] = ${ts};
  }`})(Kr,Ar.ShapeUtil.size(Gr.dims),Wr,qr),outputs:[{dims:Gr.dims,dataType:Gr.dataType,gpuDataType:Lr.GpuDataType.default}],dispatchGroup:Kr=>({x:Math.ceil(Ar.ShapeUtil.size(Kr[0].dims)/64/4)})}))(Dr,Fr,Ur,Vr)})};Tr.abs=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Abs","abs"))},Tr.acos=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Acos","acos"))},Tr.acosh=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Acosh","acosh"))},Tr.asin=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Asin","asin"))},Tr.asinh=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Asinh","asinh"))},Tr.atan=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Atan","atan"))},Tr.atanh=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Atanh","atanh"))},Tr.clipV10=(Fr,zr)=>{Fr.compute(Mr(Fr.inputs[0],"Clip",Ur=>`clamp(${Ur}, clip_min_, clip_max_)`,`
    const clip_min_: vec4<f32> = vec4(f32(${zr.min}));
    const clip_max_: vec4<f32> = vec4(f32(${zr.max}));
`,zr.cacheKey),{inputs:[0]})},Tr.clip=Fr=>{const zr=(Ur=>{const Vr=Ur.length>=2?Ur[1].getFloat32Array()[0]:Ar.MIN_CLIP,Nr=Ur.length>=3?Ur[2].getFloat32Array()[0]:Ar.MAX_CLIP;return(0,Pr.createAttributeWithCacheKey)({min:Vr,max:Nr})})(Fr.inputs);(0,Tr.clipV10)(Fr,zr)},Tr.ceil=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Ceil","ceil"))},Tr.cos=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Cos","cos"))},Tr.cosh=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Cosh","cosh"))},Tr.parseAlphaAttributes=Fr=>(0,Pr.createAttributeWithCacheKey)(Fr),Tr.elu=(Fr,zr)=>{Fr.compute(Mr(Fr.inputs[0],"Elu",Ur=>`elu_vf32(${Ur})`,`
  const elu_alpha_: f32 = f32(${zr.alpha});

  fn elu_f32(a: f32) -> f32 {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<f32>) -> vec4<f32> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,zr.cacheKey))},Tr.erf=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Erf",zr=>`erf_vf32(${zr})`,`
  const r0: f32 = 0.3275911;
  const r1: f32 = 0.254829592;
  const r2: f32 = -0.284496736;
  const r3: f32 = 1.421413741;
  const r4: f32 = -1.453152027;
  const r5: f32 = 1.061405429;

  fn erf_vf32(v: vec4<f32>) -> vec4<f32> {
    let absv = abs(v);
    let x = 1.0 / (1.0 + r0 * absv);
    return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
  }`))},Tr.exp=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Exp","exp"))},Tr.floor=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Floor","floor"))},Tr.leakyRelu=(Fr,zr)=>{Fr.compute(Mr(Fr.inputs[0],"LeakyRelu",Ur=>`select(leaky_relu_alpha_ * ${Ur}, ${Ur}, ${Ur} >= vec4<f32>(0.0))`,`const leaky_relu_alpha_: f32 = f32(${zr.alpha});`,zr.cacheKey))},Tr.neg=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Neg",zr=>`-${zr}`))},Tr.reciprocal=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Reciprocal",zr=>`1.0/${zr}`))},Tr.relu=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Relu",zr=>`select(vec4<f32>(0.0), ${zr}, ${zr} > vec4<f32>(0.0))`))},Tr.sigmoid=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Sigmoid",zr=>`(1.0 / (1.0 + exp(-${zr})))`))},Tr.sin=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Sin","sin"))},Tr.sinh=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Sinh","sinh"))},Tr.sqrt=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Sqrt","sqrt"))},Tr.tan=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Tan","tan"))},Tr.tanh=Fr=>{Fr.compute(Mr(Fr.inputs[0],"Tanh","tanh"))},Tr.thresholdedRelu=(Fr,zr)=>(Fr.compute(Mr(Fr.inputs[0],"ThresholdedRelu",Ur=>`select(vec4<f32>(0.0), ${Ur}, ${Ur} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_: vec4<f32> = vec4<f32>(${zr.alpha});`,zr.cacheKey)),0)},8305:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.ProgramManager=void 0;const Ar=Rr(4955),Pr=Rr(2075);Tr.ProgramManager=class{constructor(Lr){this.backend=Lr,this.repo=new Map,this.attributesBound=!1}getArtifact(Lr){return this.repo.get(Lr)}setArtifact(Lr,Mr){this.repo.set(Lr,Mr)}run(Lr,Mr,Fr,zr){const Ur=this.backend.device,Vr=this.backend.getComputePassEncoder();this.backend.profilingEnabled&&Vr.writeTimestamp(this.backend.profilingQuerySet,0),Vr.setPipeline(Lr.computePipeline);const Nr=[];for(const jr of Mr)Nr.push({binding:Nr.length,resource:{buffer:jr.buffer}});for(const jr of Fr)Nr.push({binding:Nr.length,resource:{buffer:jr.buffer}});const Dr=Ur.createBindGroup({layout:Lr.computePipeline.getBindGroupLayout(0),entries:Nr});if(Vr.setBindGroup(0,Dr),Vr.dispatchWorkgroups(...zr),this.backend.pendingDispatchNumber++,this.backend.profilingEnabled){Vr.writeTimestamp(this.backend.profilingQuerySet,1);const jr=this.backend.gpuDataManager.create(16,GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE),Gr=this.backend.gpuDataManager.create(16,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.backend.endComputePass(),this.backend.getCommandEncoder().resolveQuerySet(this.backend.profilingQuerySet,0,2,jr.buffer,0),this.backend.getCommandEncoder().copyBufferToBuffer(jr.buffer,0,Gr.buffer,0,16),this.backend.flush();const Wr=this.backend.currentKernelId,qr=this.backend.kernels.get(Wr)[0];Gr.buffer.mapAsync(GPUMapMode.READ).then(()=>{const Kr=new BigUint64Array(Gr.buffer.getMappedRange()),Xr=Kr[0],Zr=Kr[1];Gr.buffer.unmap(),this.backend.profilingTimeBase===void 0&&(this.backend.profilingTimeBase=Xr);const Jr=Number(Xr-this.backend.profilingTimeBase),_i=Number(Zr-this.backend.profilingTimeBase);if(!Number.isSafeInteger(Jr)||!Number.isSafeInteger(_i))throw new RangeError("incorrect timestamp range");this.backend.gpuDataManager.release(jr.id),this.backend.gpuDataManager.release(Gr.id),console.log(`[profiling] kernel "${Wr}|${qr}" execution time: ${_i-Jr} ns`)})}this.backend.pendingDispatchNumber>=16&&this.backend.flush()}dispose(){}build(Lr,Mr){const Fr=this.backend.device,zr=Lr.getShaderSource((0,Pr.createShaderHelper)(Mr)),Ur=Fr.createShaderModule({code:zr});return(0,Ar.LOG_DEBUG)("verbose",()=>`[WebGPU] shader code: ${zr}`),{programInfo:Lr,computePipeline:Fr.createComputePipeline({compute:{module:Ur,entryPoint:"main"},layout:"auto"})}}normalizeDispatchGroupSize(Lr){const Mr=typeof Lr=="number"?Lr:Lr.x,Fr=typeof Lr=="number"?1:Lr.y||1,zr=typeof Lr=="number"?1:Lr.z||1,Ur=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(Mr<=Ur&&Fr<=Ur&&zr<=Ur)return[Mr,Fr,zr];const Vr=Mr*Fr*zr;let Nr=Math.ceil(Math.sqrt(Vr));if(Nr>Ur){if(Nr=Math.ceil(Math.cbrt(Vr)),Nr>Ur)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[Nr,Nr,Nr]}return[Nr,Nr,1]}}},1163:(_r,Tr)=>{var Rr;Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.GpuDataType=void 0,(Rr=Tr.GpuDataType||(Tr.GpuDataType={}))[Rr.default=0]="default",Rr[Rr.upload=1]="upload",Rr[Rr.profile=2]="profile"},3899:(_r,Tr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.iterateExtraOptions=void 0,Tr.iterateExtraOptions=(Rr,Ar,Pr,Lr)=>{if(typeof Rr=="object"&&Rr!==null){if(Pr.has(Rr))throw new Error("Circular reference in options");Pr.add(Rr)}Object.entries(Rr).forEach(([Mr,Fr])=>{const zr=Ar?Ar+Mr:Mr;if(typeof Fr=="object")(0,Tr.iterateExtraOptions)(Fr,zr+".",Pr,Lr);else if(typeof Fr=="string"||typeof Fr=="number")Lr(zr,Fr.toString());else{if(typeof Fr!="boolean")throw new Error("Can't handle extra config type: "+typeof Fr);Lr(zr,Fr?"1":"0")}})}},9544:function(_r,Tr,Rr){var Ar,Pr=this&&this.__createBinding||(Object.create?function(ls,us,xs,Ts){Ts===void 0&&(Ts=xs);var vs=Object.getOwnPropertyDescriptor(us,xs);vs&&!("get"in vs?!us.__esModule:vs.writable||vs.configurable)||(vs={enumerable:!0,get:function(){return us[xs]}}),Object.defineProperty(ls,Ts,vs)}:function(ls,us,xs,Ts){Ts===void 0&&(Ts=xs),ls[Ts]=us[xs]}),Lr=this&&this.__setModuleDefault||(Object.create?function(ls,us){Object.defineProperty(ls,"default",{enumerable:!0,value:us})}:function(ls,us){ls.default=us}),Mr=this&&this.__importStar||function(ls){if(ls&&ls.__esModule)return ls;var us={};if(ls!=null)for(var xs in ls)xs!=="default"&&Object.prototype.hasOwnProperty.call(ls,xs)&&Pr(us,ls,xs);return Lr(us,ls),us};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.endProfiling=Tr.run=Tr.releaseSession=Tr.createSession=Tr.createSessionFinalize=Tr.createSessionAllocate=Tr.initOrt=Tr.initWasm=void 0;const Fr=Rr(8453),zr=Rr(7675),Ur=Mr(Rr(1259)),Vr=Rr(263),Nr=()=>!!Fr.env.wasm.proxy&&typeof document<"u";let Dr,jr,Gr,Wr=!1,qr=!1,Kr=!1;const Xr=[],Zr=[],Jr=[],_i=[],es=[],ts=[],rs=()=>{if(Wr||!qr||Kr||!Dr)throw new Error("worker not ready")},ns=ls=>{switch(ls.data.type){case"init-wasm":Wr=!1,ls.data.err?(Kr=!0,jr[1](ls.data.err)):(qr=!0,jr[0]());break;case"init-ort":ls.data.err?Gr[1](ls.data.err):Gr[0]();break;case"create_allocate":ls.data.err?Xr.shift()[1](ls.data.err):Xr.shift()[0](ls.data.out);break;case"create_finalize":ls.data.err?Zr.shift()[1](ls.data.err):Zr.shift()[0](ls.data.out);break;case"create":ls.data.err?Jr.shift()[1](ls.data.err):Jr.shift()[0](ls.data.out);break;case"release":ls.data.err?_i.shift()[1](ls.data.err):_i.shift()[0]();break;case"run":ls.data.err?es.shift()[1](ls.data.err):es.shift()[0](ls.data.out);break;case"end-profiling":ls.data.err?ts.shift()[1](ls.data.err):ts.shift()[0]()}},as=typeof document<"u"?(Ar=document==null?void 0:document.currentScript)===null||Ar===void 0?void 0:Ar.src:void 0;Tr.initWasm=async()=>{if(Nr()){if(qr)return;if(Wr)throw new Error("multiple calls to 'initWasm()' detected.");if(Kr)throw new Error("previous call to 'initWasm()' failed.");return Wr=!0,Fr.env.wasm.wasmPaths===void 0&&as&&as.indexOf("blob:")!==0&&(Fr.env.wasm.wasmPaths=as.substr(0,+as.lastIndexOf("/")+1)),new Promise((ls,us)=>{Dr==null||Dr.terminate(),Dr=Rr(8050).Z(),Dr.onmessage=ns,jr=[ls,us];const xs={type:"init-wasm",in:Fr.env.wasm};Dr.postMessage(xs)})}return(0,Vr.initializeWebAssembly)(Fr.env.wasm)},Tr.initOrt=async(ls,us)=>{if(Nr())return rs(),new Promise((xs,Ts)=>{Gr=[xs,Ts];const vs={type:"init-ort",in:{numThreads:ls,loggingLevel:us}};Dr.postMessage(vs)});Ur.initOrt(ls,us),await(0,zr.init)((0,Vr.getInstance)())},Tr.createSessionAllocate=async ls=>Nr()?(rs(),new Promise((us,xs)=>{Xr.push([us,xs]);const Ts={type:"create_allocate",in:{model:ls}};Dr.postMessage(Ts,[ls.buffer])})):Ur.createSessionAllocate(ls),Tr.createSessionFinalize=async(ls,us)=>Nr()?(rs(),new Promise((xs,Ts)=>{Zr.push([xs,Ts]);const vs={type:"create_finalize",in:{modeldata:ls,options:us}};Dr.postMessage(vs)})):Ur.createSessionFinalize(ls,us),Tr.createSession=async(ls,us)=>Nr()?(rs(),new Promise((xs,Ts)=>{Jr.push([xs,Ts]);const vs={type:"create",in:{model:ls,options:us}};Dr.postMessage(vs,[ls.buffer])})):Ur.createSession(ls,us),Tr.releaseSession=async ls=>{if(Nr())return rs(),new Promise((us,xs)=>{_i.push([us,xs]);const Ts={type:"release",in:ls};Dr.postMessage(Ts)});Ur.releaseSession(ls)},Tr.run=async(ls,us,xs,Ts,vs)=>Nr()?(rs(),new Promise((gs,fs)=>{es.push([gs,fs]);const ys={type:"run",in:{sessionId:ls,inputIndices:us,inputs:xs,outputIndices:Ts,options:vs}};Dr.postMessage(ys,Ur.extractTransferableBuffers(xs))})):Ur.run(ls,us,xs,Ts,vs),Tr.endProfiling=async ls=>{if(Nr())return rs(),new Promise((us,xs)=>{ts.push([us,xs]);const Ts={type:"end-profiling",in:ls};Dr.postMessage(Ts)});Ur.endProfiling(ls)}},7918:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.setRunOptions=void 0;const Ar=Rr(3899),Pr=Rr(9444),Lr=Rr(263);Tr.setRunOptions=Mr=>{const Fr=(0,Lr.getInstance)();let zr=0;const Ur=[],Vr=Mr||{};try{if((Mr==null?void 0:Mr.logSeverityLevel)===void 0)Vr.logSeverityLevel=2;else if(typeof Mr.logSeverityLevel!="number"||!Number.isInteger(Mr.logSeverityLevel)||Mr.logSeverityLevel<0||Mr.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${Mr.logSeverityLevel}`);if((Mr==null?void 0:Mr.logVerbosityLevel)===void 0)Vr.logVerbosityLevel=0;else if(typeof Mr.logVerbosityLevel!="number"||!Number.isInteger(Mr.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${Mr.logVerbosityLevel}`);(Mr==null?void 0:Mr.terminate)===void 0&&(Vr.terminate=!1);let Nr=0;if((Mr==null?void 0:Mr.tag)!==void 0&&(Nr=(0,Pr.allocWasmString)(Mr.tag,Ur)),zr=Fr._OrtCreateRunOptions(Vr.logSeverityLevel,Vr.logVerbosityLevel,!!Vr.terminate,Nr),zr===0)throw new Error("Can't create run options");return(Mr==null?void 0:Mr.extra)!==void 0&&(0,Ar.iterateExtraOptions)(Mr.extra,"",new WeakSet,(Dr,jr)=>{const Gr=(0,Pr.allocWasmString)(Dr,Ur),Wr=(0,Pr.allocWasmString)(jr,Ur);if(Fr._OrtAddRunConfigEntry(zr,Gr,Wr)!==0)throw new Error(`Can't set a run config entry: ${Dr} - ${jr}`)}),[zr,Ur]}catch(Nr){throw zr!==0&&Fr._OrtReleaseRunOptions(zr),Ur.forEach(Fr._free),Nr}}},6640:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.OnnxruntimeWebAssemblySessionHandler=void 0;const Ar=Rr(2806),Pr=Rr(8453),Lr=Rr(2850),Mr=Rr(9544),Fr=Rr(7917);let zr;Tr.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(Ur){const Vr=await fetch(Ur),Nr=await Vr.arrayBuffer();return(0,Mr.createSessionAllocate)(new Uint8Array(Nr))}async loadModel(Ur,Vr){if(zr||(await(0,Mr.initOrt)(Pr.env.wasm.numThreads,(0,Fr.logLevelStringToEnum)(Pr.env.logLevel)),zr=!0),typeof Ur=="string")if(typeof fetch>"u"){const Nr=await(0,Lr.promisify)(Ar.readFile)(Ur);[this.sessionId,this.inputNames,this.outputNames]=await(0,Mr.createSession)(Nr,Vr)}else{const Nr=await this.createSessionAllocate(Ur);[this.sessionId,this.inputNames,this.outputNames]=await(0,Mr.createSessionFinalize)(Nr,Vr)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,Mr.createSession)(Ur,Vr)}async dispose(){return(0,Mr.releaseSession)(this.sessionId)}async run(Ur,Vr,Nr){const Dr=[],jr=[];Object.entries(Ur).forEach(Kr=>{const Xr=Kr[0],Zr=Kr[1],Jr=this.inputNames.indexOf(Xr);if(Jr===-1)throw new Error(`invalid input '${Xr}'`);Dr.push(Zr),jr.push(Jr)});const Gr=[];Object.entries(Vr).forEach(Kr=>{const Xr=Kr[0],Zr=this.outputNames.indexOf(Xr);if(Zr===-1)throw new Error(`invalid output '${Xr}'`);Gr.push(Zr)});const Wr=await(0,Mr.run)(this.sessionId,jr,Dr.map(Kr=>[Kr.type,Kr.dims,Kr.data]),Gr,Nr),qr={};for(let Kr=0;Kr<Wr.length;Kr++)qr[this.outputNames[Gr[Kr]]]=new Pr.Tensor(Wr[Kr][0],Wr[Kr][2],Wr[Kr][1]);return qr}startProfiling(){}endProfiling(){(0,Mr.endProfiling)(this.sessionId)}}},7622:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.setSessionOptions=void 0;const Ar=Rr(3899),Pr=Rr(9444),Lr=Rr(263);Tr.setSessionOptions=Mr=>{var Fr,zr,Ur,Vr;const Nr=(0,Lr.getInstance)();let Dr=0;const jr=[],Gr=Mr||{};(Wr=>{Wr.extra||(Wr.extra={}),Wr.extra.session||(Wr.extra.session={});const qr=Wr.extra.session;qr.use_ort_model_bytes_directly||(qr.use_ort_model_bytes_directly="1"),Wr.executionProviders&&Wr.executionProviders.some(Kr=>(typeof Kr=="string"?Kr:Kr.name)==="webgpu")&&(Wr.enableMemPattern=!1)})(Gr);try{const Wr=(_i=>{switch(_i){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${_i}`)}})((Fr=Gr.graphOptimizationLevel)!==null&&Fr!==void 0?Fr:"all"),qr=(_i=>{switch(_i){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${_i}`)}})((zr=Gr.executionMode)!==null&&zr!==void 0?zr:"sequential"),Kr=typeof Gr.logId=="string"?(0,Pr.allocWasmString)(Gr.logId,jr):0,Xr=(Ur=Gr.logSeverityLevel)!==null&&Ur!==void 0?Ur:2;if(!Number.isInteger(Xr)||Xr<0||Xr>4)throw new Error(`log serverity level is not valid: ${Xr}`);const Zr=(Vr=Gr.logVerbosityLevel)!==null&&Vr!==void 0?Vr:0;if(!Number.isInteger(Zr)||Zr<0||Zr>4)throw new Error(`log verbosity level is not valid: ${Zr}`);const Jr=typeof Gr.optimizedModelFilePath=="string"?(0,Pr.allocWasmString)(Gr.optimizedModelFilePath,jr):0;if(Dr=Nr._OrtCreateSessionOptions(Wr,!!Gr.enableCpuMemArena,!!Gr.enableMemPattern,qr,!!Gr.enableProfiling,0,Kr,Xr,Zr,Jr),Dr===0)throw new Error("Can't create session options");return Gr.executionProviders&&((_i,es,ts)=>{for(const rs of es){let ns=typeof rs=="string"?rs:rs.name;switch(ns){case"xnnpack":ns="XNNPACK";break;case"webgpu":ns="JS";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${ns}`)}const as=(0,Pr.allocWasmString)(ns,ts);if((0,Lr.getInstance)()._OrtAppendExecutionProvider(_i,as)!==0)throw new Error(`Can't append execution provider: ${ns}`)}})(Dr,Gr.executionProviders,jr),Gr.extra!==void 0&&(0,Ar.iterateExtraOptions)(Gr.extra,"",new WeakSet,(_i,es)=>{const ts=(0,Pr.allocWasmString)(_i,jr),rs=(0,Pr.allocWasmString)(es,jr);if(Nr._OrtAddSessionConfigEntry(Dr,ts,rs)!==0)throw new Error(`Can't set a session config entry: ${_i} - ${es}`)}),[Dr,jr]}catch(Wr){throw Dr!==0&&Nr._OrtReleaseSessionOptions(Dr),jr.forEach(Nr._free),Wr}}},9444:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.allocWasmString=void 0;const Ar=Rr(263);Tr.allocWasmString=(Pr,Lr)=>{const Mr=(0,Ar.getInstance)(),Fr=Mr.lengthBytesUTF8(Pr)+1,zr=Mr._malloc(Fr);return Mr.stringToUTF8(Pr,zr,Fr),Lr.push(zr),zr}},7917:(_r,Tr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.logLevelStringToEnum=Tr.tensorTypeToTypedArrayConstructor=Tr.getTensorElementSize=Tr.tensorDataTypeEnumToString=Tr.tensorDataTypeStringToEnum=void 0,Tr.tensorDataTypeStringToEnum=Rr=>{switch(Rr){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${Rr}`)}},Tr.tensorDataTypeEnumToString=Rr=>{switch(Rr){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${Rr}`)}},Tr.getTensorElementSize=Rr=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][Rr],Tr.tensorTypeToTypedArrayConstructor=Rr=>{switch(Rr){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${Rr}`)}},Tr.logLevelStringToEnum=Rr=>{switch(Rr){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${Rr}`)}}},1259:(_r,Tr,Rr)=>{Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.extractTransferableBuffers=Tr.endProfiling=Tr.run=Tr.releaseSession=Tr.createSession=Tr.createSessionFinalize=Tr.createSessionAllocate=Tr.initOrt=void 0;const Ar=Rr(7918),Pr=Rr(7622),Lr=Rr(9444),Mr=Rr(7917),Fr=Rr(263);Tr.initOrt=(Ur,Vr)=>{const Nr=(0,Fr.getInstance)()._OrtInit(Ur,Vr);if(Nr!==0)throw new Error(`Can't initialize onnxruntime. error code = ${Nr}`)};const zr=new Map;Tr.createSessionAllocate=Ur=>{const Vr=(0,Fr.getInstance)(),Nr=Vr._malloc(Ur.byteLength);return Vr.HEAPU8.set(Ur,Nr),[Nr,Ur.byteLength]},Tr.createSessionFinalize=(Ur,Vr)=>{const Nr=(0,Fr.getInstance)();let Dr=0,jr=0,Gr=[];try{if([jr,Gr]=(0,Pr.setSessionOptions)(Vr),Dr=Nr._OrtCreateSession(Ur[0],Ur[1],jr),Dr===0)throw new Error("Can't create a session")}finally{Nr._free(Ur[0]),jr!==0&&Nr._OrtReleaseSessionOptions(jr),Gr.forEach(Nr._free)}const Wr=Nr._OrtGetInputCount(Dr),qr=Nr._OrtGetOutputCount(Dr),Kr=[],Xr=[],Zr=[],Jr=[];for(let _i=0;_i<Wr;_i++){const es=Nr._OrtGetInputName(Dr,_i);if(es===0)throw new Error("Can't get an input name");Xr.push(es),Kr.push(Nr.UTF8ToString(es))}for(let _i=0;_i<qr;_i++){const es=Nr._OrtGetOutputName(Dr,_i);if(es===0)throw new Error("Can't get an output name");Jr.push(es),Zr.push(Nr.UTF8ToString(es))}return zr.set(Dr,[Dr,Xr,Jr]),[Dr,Kr,Zr]},Tr.createSession=(Ur,Vr)=>{const Nr=(0,Tr.createSessionAllocate)(Ur);return(0,Tr.createSessionFinalize)(Nr,Vr)},Tr.releaseSession=Ur=>{const Vr=(0,Fr.getInstance)(),Nr=zr.get(Ur);if(!Nr)throw new Error("invalid session id");const Dr=Nr[0],jr=Nr[1],Gr=Nr[2];jr.forEach(Vr._OrtFree),Gr.forEach(Vr._OrtFree),Vr._OrtReleaseSession(Dr),zr.delete(Ur)},Tr.run=async(Ur,Vr,Nr,Dr,jr)=>{const Gr=(0,Fr.getInstance)(),Wr=zr.get(Ur);if(!Wr)throw new Error("invalid session id");const qr=Wr[0],Kr=Wr[1],Xr=Wr[2],Zr=Vr.length,Jr=Dr.length;let _i=0,es=[];const ts=[],rs=[];try{[_i,es]=(0,Ar.setRunOptions)(jr);for(let Ts=0;Ts<Zr;Ts++){const vs=Nr[Ts][0],gs=Nr[Ts][1],fs=Nr[Ts][2];let ys,ks;if(Array.isArray(fs)){ks=4*fs.length,ys=Gr._malloc(ks),rs.push(ys);let Vs=ys/4;for(let ao=0;ao<fs.length;ao++){if(typeof fs[ao]!="string")throw new TypeError(`tensor data at index ${ao} is not a string`);Gr.HEAPU32[Vs++]=(0,Lr.allocWasmString)(fs[ao],rs)}}else ks=fs.byteLength,ys=Gr._malloc(ks),rs.push(ys),Gr.HEAPU8.set(new Uint8Array(fs.buffer,fs.byteOffset,ks),ys);const Fs=Gr.stackSave(),Us=Gr.stackAlloc(4*gs.length);try{let Vs=Us/4;gs.forEach(qs=>Gr.HEAP32[Vs++]=qs);const ao=Gr._OrtCreateTensor((0,Mr.tensorDataTypeStringToEnum)(vs),ys,ks,Us,gs.length);if(ao===0)throw new Error("Can't create a tensor");ts.push(ao)}finally{Gr.stackRestore(Fs)}}const ns=Gr.stackSave(),as=Gr.stackAlloc(4*Zr),ls=Gr.stackAlloc(4*Zr),us=Gr.stackAlloc(4*Jr),xs=Gr.stackAlloc(4*Jr);try{let Ts=as/4,vs=ls/4,gs=us/4,fs=xs/4;for(let Us=0;Us<Zr;Us++)Gr.HEAPU32[Ts++]=ts[Us],Gr.HEAPU32[vs++]=Kr[Vr[Us]];for(let Us=0;Us<Jr;Us++)Gr.HEAPU32[gs++]=0,Gr.HEAPU32[fs++]=Xr[Dr[Us]];let ys=Gr._OrtRun(qr,ls,as,Zr,xs,Jr,us,_i);const ks=Gr.jsepRunPromise;ks&&ks.then!==void 0&&(ys=await ks);const Fs=[];if(ys===0)for(let Us=0;Us<Jr;Us++){const Vs=Gr.HEAPU32[us/4+Us],ao=Gr.stackSave(),qs=Gr.stackAlloc(16);let Qs,mo=0;try{if(ys=Gr._OrtGetTensorData(Vs,qs,qs+4,qs+8,qs+12),ys!==0)throw new Error(`Can't access output tensor data. error code = ${ys}`);let Xs=qs/4;const so=Gr.HEAPU32[Xs++];mo=Gr.HEAPU32[Xs++];const uo=Gr.HEAPU32[Xs++],bo=Gr.HEAPU32[Xs++],wo=[];for(let ds=0;ds<bo;ds++)wo.push(Gr.HEAPU32[uo/4+ds]);Gr._OrtFree(uo);const Co=wo.length===0?1:wo.reduce((ds,Is)=>ds*Is);if(Qs=(0,Mr.tensorDataTypeEnumToString)(so),Qs==="string"){const ds=[];let Is=mo/4;for(let Gs=0;Gs<Co;Gs++){const to=Gr.HEAPU32[Is++],no=Gs===Co-1?void 0:Gr.HEAPU32[Is]-to;ds.push(Gr.UTF8ToString(to,no))}Fs.push([Qs,wo,ds])}else{const ds=new((0,Mr.tensorTypeToTypedArrayConstructor)(Qs))(Co);new Uint8Array(ds.buffer,ds.byteOffset,ds.byteLength).set(Gr.HEAPU8.subarray(mo,mo+ds.byteLength)),Fs.push([Qs,wo,ds])}}finally{Gr.stackRestore(ao),Qs==="string"&&mo&&Gr._free(mo),Gr._OrtReleaseTensor(Vs)}}if(ys===0)return Fs;throw new Error(`failed to call OrtRun(). error code = ${ys}.`)}finally{Gr.stackRestore(ns)}}finally{ts.forEach(Gr._OrtReleaseTensor),rs.forEach(Gr._free),Gr._OrtReleaseRunOptions(_i),es.forEach(Gr._free)}},Tr.endProfiling=Ur=>{const Vr=(0,Fr.getInstance)(),Nr=zr.get(Ur);if(!Nr)throw new Error("invalid session id");const Dr=Nr[0],jr=Vr._OrtEndProfiling(Dr);if(jr===0)throw new Error("Can't get an profile file name");Vr._OrtFree(jr)},Tr.extractTransferableBuffers=Ur=>{const Vr=[];for(const Nr of Ur){const Dr=Nr[2];!Array.isArray(Dr)&&Dr.buffer&&Vr.push(Dr.buffer)}return Vr}},263:function(_r,Tr,Rr){var Ar=this&&this.__createBinding||(Object.create?function(jr,Gr,Wr,qr){qr===void 0&&(qr=Wr);var Kr=Object.getOwnPropertyDescriptor(Gr,Wr);Kr&&!("get"in Kr?!Gr.__esModule:Kr.writable||Kr.configurable)||(Kr={enumerable:!0,get:function(){return Gr[Wr]}}),Object.defineProperty(jr,qr,Kr)}:function(jr,Gr,Wr,qr){qr===void 0&&(qr=Wr),jr[qr]=Gr[Wr]}),Pr=this&&this.__setModuleDefault||(Object.create?function(jr,Gr){Object.defineProperty(jr,"default",{enumerable:!0,value:Gr})}:function(jr,Gr){jr.default=Gr}),Lr=this&&this.__importStar||function(jr){if(jr&&jr.__esModule)return jr;var Gr={};if(jr!=null)for(var Wr in jr)Wr!=="default"&&Object.prototype.hasOwnProperty.call(jr,Wr)&&Ar(Gr,jr,Wr);return Pr(Gr,jr),Gr};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.dispose=Tr.getInstance=Tr.initializeWebAssembly=void 0;const Mr=Lr(Rr(6449)),Fr=Rr(932),zr=Rr(3474);let Ur,Vr=!1,Nr=!1,Dr=!1;Tr.initializeWebAssembly=async jr=>{if(Vr)return Promise.resolve();if(Nr)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Dr)throw new Error("previous call to 'initializeWebAssembly()' failed.");Nr=!0;const Gr=jr.initTimeout,Wr=jr.numThreads,qr=jr.simd,Kr=Wr>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),Xr=qr&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),Zr=jr.wasmPaths,Jr=typeof Zr=="string"?Zr:void 0,_i=((ns,as)=>as?ns?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":ns?"ort-wasm-simd.wasm":"ort-wasm.wasm")(Xr,Kr),es=typeof Zr=="object"?Zr[_i]:void 0;let ts=!1;const rs=[];if(Gr>0&&rs.push(new Promise(ns=>{setTimeout(()=>{ts=!0,ns()},Gr)})),rs.push(new Promise((ns,as)=>{const ls=Kr?zr:Fr,us={locateFile:(xs,Ts)=>Kr&&xs.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Rr(4154)],{type:"text/javascript"})):xs.endsWith(".wasm")?es||(Jr??Ts)+_i:Ts+xs};if(Kr)if(typeof Blob>"u")us.mainScriptUrlOrBlob=Mr.join("/","ort-wasm-threaded.js");else{const xs=`var ortWasmThreaded=(function(){var _scriptDir;return ${ls.toString()}})();`;us.mainScriptUrlOrBlob=new Blob([xs],{type:"text/javascript"})}ls(us).then(xs=>{Nr=!1,Vr=!0,Ur=xs,ns()},xs=>{Nr=!1,Dr=!0,as(xs)})})),await Promise.race(rs),ts)throw new Error(`WebAssembly backend initializing failed due to timeout: ${Gr}ms`)},Tr.getInstance=()=>{if(Vr&&Ur)return Ur;throw new Error("WebAssembly is not initialized yet.")},Tr.dispose=()=>{var jr;!Vr||Nr||Dr||(Nr=!0,(jr=Ur.PThread)===null||jr===void 0||jr.terminateAllThreads(),Ur=void 0,Nr=!1,Vr=!1,Dr=!0)}},8050:(_r,Tr,Rr)=>{Rr.d(Tr,{Z:()=>Lr});var Ar=Rr(6614),Pr=Rr.n(Ar);function Lr(){return Pr()('/*!\n* ONNX Runtime Web v1.15.1\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var e={899:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateExtraOptions=void 0,t.iterateExtraOptions=(e,n,r,a)=>{if("object"==typeof e&&null!==e){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach((([e,o])=>{const i=n?n+e:e;if("object"==typeof o)(0,t.iterateExtraOptions)(o,i+".",r,a);else if("string"==typeof o||"number"==typeof o)a(i,o.toString());else{if("boolean"!=typeof o)throw new Error("Can\'t handle extra config type: "+typeof o);a(i,o?"1":"0")}}))}},918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;const r=n(899),a=n(444),o=n(263);t.setRunOptions=e=>{const t=(0,o.getInstance)();let n=0;const i=[],s=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))s.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===(null==e?void 0:e.logVerbosityLevel))s.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);void 0===(null==e?void 0:e.terminate)&&(s.terminate=!1);let o=0;if(void 0!==(null==e?void 0:e.tag)&&(o=(0,a.allocWasmString)(e.tag,i)),n=t._OrtCreateRunOptions(s.logSeverityLevel,s.logVerbosityLevel,!!s.terminate,o),0===n)throw new Error("Can\'t create run options");return void 0!==(null==e?void 0:e.extra)&&(0,r.iterateExtraOptions)(e.extra,"",new WeakSet,((e,r)=>{const o=(0,a.allocWasmString)(e,i),s=(0,a.allocWasmString)(r,i);if(0!==t._OrtAddRunConfigEntry(n,o,s))throw new Error(`Can\'t set a run config entry: ${e} - ${r}`)})),[n,i]}catch(e){throw 0!==n&&t._OrtReleaseRunOptions(n),i.forEach(t._free),e}}},622:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;const r=n(899),a=n(444),o=n(263);t.setSessionOptions=e=>{var t,n,i,s;const u=(0,o.getInstance)();let c=0;const l=[],f=e||{};(e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});const t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some((e=>"webgpu"===("string"==typeof e?e:e.name)))&&(e.enableMemPattern=!1)})(f);try{const e=(e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}})(null!==(t=f.graphOptimizationLevel)&&void 0!==t?t:"all"),p=(e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}})(null!==(n=f.executionMode)&&void 0!==n?n:"sequential"),d="string"==typeof f.logId?(0,a.allocWasmString)(f.logId,l):0,m=null!==(i=f.logSeverityLevel)&&void 0!==i?i:2;if(!Number.isInteger(m)||m<0||m>4)throw new Error(`log serverity level is not valid: ${m}`);const g=null!==(s=f.logVerbosityLevel)&&void 0!==s?s:0;if(!Number.isInteger(g)||g<0||g>4)throw new Error(`log verbosity level is not valid: ${g}`);const h="string"==typeof f.optimizedModelFilePath?(0,a.allocWasmString)(f.optimizedModelFilePath,l):0;if(c=u._OrtCreateSessionOptions(e,!!f.enableCpuMemArena,!!f.enableMemPattern,p,!!f.enableProfiling,0,d,m,g,h),0===c)throw new Error("Can\'t create session options");return f.executionProviders&&((e,t,n)=>{for(const r of t){let t="string"==typeof r?r:r.name;switch(t){case"xnnpack":t="XNNPACK";break;case"webgpu":t="JS";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${t}`)}const i=(0,a.allocWasmString)(t,n);if(0!==(0,o.getInstance)()._OrtAppendExecutionProvider(e,i))throw new Error(`Can\'t append execution provider: ${t}`)}})(c,f.executionProviders,l),void 0!==f.extra&&(0,r.iterateExtraOptions)(f.extra,"",new WeakSet,((e,t)=>{const n=(0,a.allocWasmString)(e,l),r=(0,a.allocWasmString)(t,l);if(0!==u._OrtAddSessionConfigEntry(c,n,r))throw new Error(`Can\'t set a session config entry: ${e} - ${t}`)})),[c,l]}catch(e){throw 0!==c&&u._OrtReleaseSessionOptions(c),l.forEach(u._free),e}}},444:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allocWasmString=void 0;const r=n(263);t.allocWasmString=(e,t)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(e)+1,o=n._malloc(a);return n.stringToUTF8(e,o,a),t.push(o),o}},917:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelStringToEnum=t.tensorTypeToTypedArrayConstructor=t.getTensorElementSize=t.tensorDataTypeEnumToString=t.tensorDataTypeStringToEnum=void 0,t.tensorDataTypeStringToEnum=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},t.tensorDataTypeEnumToString=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},t.getTensorElementSize=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],t.tensorTypeToTypedArrayConstructor=e=>{switch(e){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},t.logLevelStringToEnum=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}}},259:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initOrt=void 0;const r=n(918),a=n(622),o=n(444),i=n(917),s=n(263);t.initOrt=(e,t)=>{const n=(0,s.getInstance)()._OrtInit(e,t);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;t.createSessionAllocate=e=>{const t=(0,s.getInstance)(),n=t._malloc(e.byteLength);return t.HEAPU8.set(e,n),[n,e.byteLength]},t.createSessionFinalize=(e,t)=>{const n=(0,s.getInstance)();let r=0,o=0,i=[];try{if([o,i]=(0,a.setSessionOptions)(t),r=n._OrtCreateSession(e[0],e[1],o),0===r)throw new Error("Can\'t create a session")}finally{n._free(e[0]),0!==o&&n._OrtReleaseSessionOptions(o),i.forEach(n._free)}const c=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],d=[],m=[];for(let e=0;e<c;e++){const t=n._OrtGetInputName(r,e);if(0===t)throw new Error("Can\'t get an input name");p.push(t),f.push(n.UTF8ToString(t))}for(let e=0;e<l;e++){const t=n._OrtGetOutputName(r,e);if(0===t)throw new Error("Can\'t get an output name");m.push(t),d.push(n.UTF8ToString(t))}return u.set(r,[r,p,m]),[r,f,d]},t.createSession=(e,n)=>{const r=(0,t.createSessionAllocate)(e);return(0,t.createSessionFinalize)(r,n)},t.releaseSession=e=>{const t=(0,s.getInstance)(),n=u.get(e);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],o=n[2];a.forEach(t._OrtFree),o.forEach(t._OrtFree),t._OrtReleaseSession(r),u.delete(e)},t.run=async(e,t,n,a,c)=>{const l=(0,s.getInstance)(),f=u.get(e);if(!f)throw new Error("invalid session id");const p=f[0],d=f[1],m=f[2],g=t.length,h=a.length;let y=0,v=[];const b=[],w=[];try{[y,v]=(0,r.setRunOptions)(c);for(let e=0;e<g;e++){const t=n[e][0],r=n[e][1],a=n[e][2];let s,u;if(Array.isArray(a)){u=4*a.length,s=l._malloc(u),w.push(s);let e=s/4;for(let t=0;t<a.length;t++){if("string"!=typeof a[t])throw new TypeError(`tensor data at index ${t} is not a string`);l.HEAPU32[e++]=(0,o.allocWasmString)(a[t],w)}}else u=a.byteLength,s=l._malloc(u),w.push(s),l.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),s);const c=l.stackSave(),f=l.stackAlloc(4*r.length);try{let e=f/4;r.forEach((t=>l.HEAP32[e++]=t));const n=l._OrtCreateTensor((0,i.tensorDataTypeStringToEnum)(t),s,u,f,r.length);if(0===n)throw new Error("Can\'t create a tensor");b.push(n)}finally{l.stackRestore(c)}}const e=l.stackSave(),s=l.stackAlloc(4*g),u=l.stackAlloc(4*g),f=l.stackAlloc(4*h),_=l.stackAlloc(4*h);try{let e=s/4,n=u/4,r=f/4,o=_/4;for(let r=0;r<g;r++)l.HEAPU32[e++]=b[r],l.HEAPU32[n++]=d[t[r]];for(let e=0;e<h;e++)l.HEAPU32[r++]=0,l.HEAPU32[o++]=m[a[e]];let c=l._OrtRun(p,u,s,g,_,h,f,y);const v=l.jsepRunPromise;v&&void 0!==v.then&&(c=await v);const w=[];if(0===c)for(let e=0;e<h;e++){const t=l.HEAPU32[f/4+e],n=l.stackSave(),r=l.stackAlloc(16);let a,o=0;try{if(c=l._OrtGetTensorData(t,r,r+4,r+8,r+12),0!==c)throw new Error(`Can\'t access output tensor data. error code = ${c}`);let e=r/4;const n=l.HEAPU32[e++];o=l.HEAPU32[e++];const s=l.HEAPU32[e++],u=l.HEAPU32[e++],f=[];for(let e=0;e<u;e++)f.push(l.HEAPU32[s/4+e]);l._OrtFree(s);const p=0===f.length?1:f.reduce(((e,t)=>e*t));if(a=(0,i.tensorDataTypeEnumToString)(n),"string"===a){const e=[];let t=o/4;for(let n=0;n<p;n++){const r=l.HEAPU32[t++],a=n===p-1?void 0:l.HEAPU32[t]-r;e.push(l.UTF8ToString(r,a))}w.push([a,f,e])}else{const e=new((0,i.tensorTypeToTypedArrayConstructor)(a))(p);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(l.HEAPU8.subarray(o,o+e.byteLength)),w.push([a,f,e])}}finally{l.stackRestore(n),"string"===a&&o&&l._free(o),l._OrtReleaseTensor(t)}}if(0===c)return w;throw new Error(`failed to call OrtRun(). error code = ${c}.`)}finally{l.stackRestore(e)}}finally{b.forEach(l._OrtReleaseTensor),w.forEach(l._free),l._OrtReleaseRunOptions(y),v.forEach(l._free)}},t.endProfiling=e=>{const t=(0,s.getInstance)(),n=u.get(e);if(!n)throw new Error("invalid session id");const r=n[0],a=t._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");t._OrtFree(a)},t.extractTransferableBuffers=e=>{const t=[];for(const n of e){const e=n[2];!Array.isArray(e)&&e.buffer&&t.push(e.buffer)}return t}},263:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0;const i=o(n(449)),s=n(932),u=n(474);let c,l=!1,f=!1,p=!1;t.initializeWebAssembly=async e=>{if(l)return Promise.resolve();if(f)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(p)throw new Error("previous call to \'initializeWebAssembly()\' failed.");f=!0;const t=e.initTimeout,r=e.numThreads,a=e.simd,o=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}})(),d=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}})(),m=e.wasmPaths,g="string"==typeof m?m:void 0,h=((e,t)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm")(d,o),y="object"==typeof m?m[h]:void 0;let v=!1;const b=[];if(t>0&&b.push(new Promise((e=>{setTimeout((()=>{v=!0,e()}),t)}))),b.push(new Promise(((e,t)=>{const r=o?u:s,a={locateFile:(e,t)=>o&&e.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):e.endsWith(".wasm")?y||(null!=g?g:t)+h:t+e};if(o)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=i.join("/","ort-wasm-threaded.js");else{const e=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([e],{type:"text/javascript"})}r(a).then((t=>{f=!1,l=!0,c=t,e()}),(e=>{f=!1,p=!0,t(e)}))}))),await Promise.race(b),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},t.getInstance=()=>{if(l&&c)return c;throw new Error("WebAssembly is not initialized yet.")},t.dispose=()=>{var e;!l||f||p||(f=!0,null===(e=c.PThread)||void 0===e||e.terminateAllThreads(),c=void 0,f=!1,l=!1,p=!0)}},474:(e,t,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){function t(){return P.buffer!=D&&G(P.buffer),F}function r(){return P.buffer!=D&&G(P.buffer),U}function a(){return P.buffer!=D&&G(P.buffer),I}function o(){return P.buffer!=D&&G(P.buffer),W}function i(){return P.buffer!=D&&G(P.buffer),j}var s,u,c;e=e||{},s||(s=void 0!==e?e:{}),s.ready=new Promise((function(e,t){u=e,c=t}));var l,f,p,d,m,g,h=Object.assign({},s),y="./this.program",v=(e,t)=>{throw t},b="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=s.ENVIRONMENT_IS_PTHREAD||!1,S="";function T(e){return s.locateFile?s.locateFile(e,S):S+e}if(_){let t;S=w?n(908).dirname(S)+"/":"//",g=()=>{m||(d=n(384),m=n(908))},l=function(e,t){return g(),e=m.normalize(e),d.readFileSync(e,t?void 0:"utf8")},p=e=>((e=l(e,!0)).buffer||(e=new Uint8Array(e)),e),f=(e,t,n)=>{g(),e=m.normalize(e),d.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},1<process.argv.length&&(y=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ie))throw e})),process.on("unhandledRejection",(function(e){throw e})),v=(e,t)=>{if(C)throw process.exitCode=e,t;t instanceof ie||x("exiting due to exception: "+t),process.exit(e)},s.inspect=function(){return"[Emscripten Module object]"};try{t=n(925)}catch(e){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),e}n.g.Worker=t.Worker}else(b||w)&&(w?S=self.location.href:"undefined"!=typeof document&&document.currentScript&&(S=document.currentScript.src),_scriptDir&&(S=_scriptDir),S=0!==S.indexOf("blob:")?S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},w&&(p=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var A=console.log.bind(console),E=console.warn.bind(console);_&&(g(),A=e=>d.writeSync(1,e+"\\n"),E=e=>d.writeSync(2,e+"\\n"));var M,R=s.print||A,x=s.printErr||E;Object.assign(s,h),h=null,s.thisProgram&&(y=s.thisProgram),s.quit&&(v=s.quit),s.wasmBinary&&(M=s.wasmBinary);var C=s.noExitRuntime||!0;"object"!=typeof WebAssembly&&ne("no native wasm support detected");var P,k,D,F,U,I,W,j,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function Y(e,t,n){var r=(t>>>=0)+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&L)return L.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,n):e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function z(e,t){return(e>>>=0)?Y(r(),e,t):""}function B(e,t,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(n>=r)break;t[n++>>>0]=i}else{if(2047>=i){if(n+1>=r)break;t[n++>>>0]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;t[n++>>>0]=224|i>>12}else{if(n+3>=r)break;t[n++>>>0]=240|i>>18,t[n++>>>0]=128|i>>12&63}t[n++>>>0]=128|i>>6&63}t[n++>>>0]=128|63&i}}return t[n>>>0]=0,n-a}function N(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}return t}function G(e){D=e,s.HEAP8=F=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAP32=I=new Int32Array(e),s.HEAPU8=U=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAPU32=W=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=j=new Float64Array(e)}O&&(D=s.buffer);var q=s.INITIAL_MEMORY||16777216;if(O)P=s.wasmMemory,D=s.buffer;else if(s.wasmMemory)P=s.wasmMemory;else if(!((P=new WebAssembly.Memory({initial:q/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");P&&(D=P.buffer),q=D.byteLength,G(D);var $,V=[],J=[],Q=[];function X(){var e=s.preRun.shift();V.unshift(e)}var K,Z=0,ee=null,te=null;function ne(e){throw O?postMessage({cmd:"onAbort",arg:e}):s.onAbort&&s.onAbort(e),x(e="Aborted("+e+")"),H=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),c(e),e}function re(){return K.startsWith("data:application/octet-stream;base64,")}function ae(){var e=K;try{if(e==K&&M)return new Uint8Array(M);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(e){ne(e)}}K="ort-wasm-threaded.wasm",re()||(K=T(K));var oe={};function ie(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function se(e){(e=fe.La[e])||ne(),fe.Xa(e)}function ue(e){var t=fe.lb();if(!t)return 6;fe.Ra.push(t),fe.La[e.Ka]=t,t.Ka=e.Ka;var n={cmd:"run",start_routine:e.pb,arg:e.ib,pthread_ptr:e.Ka};return t.Qa=()=>{n.time=performance.now(),t.postMessage(n,e.vb)},t.loaded&&(t.Qa(),delete t.Qa),0}function ce(e){if(O)return He(1,1,e);C||(fe.qb(),s.onExit&&s.onExit(e),H=!0),v(e,new ie(e))}function le(e,t){if(!t&&O)throw de(e),"unwind";ce(e)}var fe={Oa:[],Ra:[],$a:[],La:{},Ua:function(){O&&fe.mb()},xb:function(){},mb:function(){fe.receiveObjectTransfer=fe.ob,fe.threadInitTLS=fe.Za,fe.setExitStatus=fe.Ya,C=!1},Ya:function(){},qb:function(){for(var e of Object.values(fe.La))fe.Xa(e);for(e of fe.Oa)e.terminate();fe.Oa=[]},Xa:function(e){var t=e.Ka;delete fe.La[t],fe.Oa.push(e),fe.Ra.splice(fe.Ra.indexOf(e),1),e.Ka=0,ct(t)},ob:function(){},Za:function(){fe.$a.forEach((e=>e()))},nb:function(e,t){e.onmessage=n=>{var r=(n=n.data).cmd;if(e.Ka&&(fe.kb=e.Ka),n.targetThread&&n.targetThread!=rt()){var a=fe.La[n.yb];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?De(n.queue):"spawnThread"===r?ue(n):"cleanupThread"===r?se(n.thread):"killThread"===r?(n=n.thread,r=fe.La[n],delete fe.La[n],r.terminate(),ct(n),fe.Ra.splice(fe.Ra.indexOf(r),1),r.Ka=0):"cancelThread"===r?fe.La[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(e.loaded=!0,t&&t(e),e.Qa&&(e.Qa(),delete e.Qa)):"print"===r?R("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?e.postMessage(n):"onAbort"===r?s.onAbort&&s.onAbort(n.arg):r&&x("worker sent an unknown command "+r);fe.kb=void 0},e.onerror=e=>{throw x("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},_&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("detachedExit",(function(){}))),e.postMessage({cmd:"load",urlOrBlob:s.mainScriptUrlOrBlob||_scriptDir,wasmMemory:P,wasmModule:k})},hb:function(){var e=T("ort-wasm-threaded.worker.js");fe.Oa.push(new Worker(e))},lb:function(){return 0==fe.Oa.length&&(fe.hb(),fe.nb(fe.Oa[0])),fe.Oa.pop()}};function pe(e){for(;0<e.length;)e.shift()(s)}function de(e){if(O)return He(2,0,e);try{le(e)}catch(e){e instanceof ie||"unwind"==e||v(1,e)}}s.PThread=fe,s.establishStackSpace=function(){var e=rt(),t=a()[e+44>>2>>>0];e=a()[e+48>>2>>>0],ft(t,t-e),dt(t)};var me,ge,he=[];function ye(e){this.Pa=e-24,this.gb=function(e){o()[this.Pa+4>>2>>>0]=e},this.cb=function(e){o()[this.Pa+8>>2>>>0]=e},this.eb=function(){a()[this.Pa>>2>>>0]=0},this.bb=function(){t()[this.Pa+12>>0>>>0]=0},this.fb=function(){t()[this.Pa+13>>0>>>0]=0},this.Ua=function(e,t){this.ab(),this.gb(e),this.cb(t),this.eb(),this.bb(),this.fb()},this.ab=function(){o()[this.Pa+16>>2>>>0]=0}}function ve(e,t,n,r){return O?He(3,1,e,t,n,r):be(e,t,n,r)}function be(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?ve(e,t,n,r):(e={pb:n,Ka:e,ib:r,vb:a},O?(e.wb="spawnThread",postMessage(e,a),0):ue(e))}function we(e,t,n){return O?He(4,1,e,t,n):0}function _e(e,t){if(O)return He(5,1,e,t)}function Oe(e,t){if(O)return He(6,1,e,t)}function Se(e,t,n){if(O)return He(7,1,e,t,n)}function Te(e,t,n){return O?He(8,1,e,t,n):0}function Ae(e,t){if(O)return He(9,1,e,t)}function Ee(e,t,n){if(O)return He(10,1,e,t,n)}function Me(e,t,n,r){if(O)return He(11,1,e,t,n,r)}function Re(e,t,n,r){if(O)return He(12,1,e,t,n,r)}function xe(e,t,n,r){if(O)return He(13,1,e,t,n,r)}function Ce(e){if(O)return He(14,1,e)}function Pe(e,t){if(O)return He(15,1,e,t)}function ke(e,t,n){if(O)return He(16,1,e,t,n)}function De(e){Atomics.store(a(),e>>2,1),rt()&&ut(e),Atomics.compareExchange(a(),e>>2,1,0)}function Fe(e){return o()[e>>>2]+4294967296*a()[e+4>>>2]}function Ue(e,t,n,r,a,o){return O?He(17,1,e,t,n,r,a,o):-52}function Ie(e,t,n,r,a,o){if(O)return He(18,1,e,t,n,r,a,o)}function We(e){var n=N(e)+1,r=at(n);return r&&B(e,t(),r,n),r}function je(e,t,n){function r(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}if(O)return He(19,1,e,t,n);var i=(new Date).getFullYear(),s=new Date(i,0,1),u=new Date(i,6,1);i=s.getTimezoneOffset();var c=u.getTimezoneOffset(),l=Math.max(i,c);a()[e>>2>>>0]=60*l,a()[t>>2>>>0]=Number(i!=c),e=r(s),t=r(u),e=We(e),t=We(t),c<i?(o()[n>>2>>>0]=e,o()[n+4>>2>>>0]=t):(o()[n>>2>>>0]=t,o()[n+4>>2>>>0]=e)}function He(e,t){var n=arguments.length-2,r=arguments;return function(e){var t=pt();return e=e(),dt(t),e}((()=>{for(var a=mt(8*n),o=a>>3,s=0;s<n;s++){var u=r[2+s];i()[o+s>>>0]=u}return st(e,n,a,t)}))}s.invokeEntryPoint=function(e,t){var n=he[e];n||(e>=he.length&&(he.length=e+1),he[e]=n=$.get(e)),e=n(t),C?fe.Ya(e):lt(e)},s.executeNotifiedProxyingQueue=De,ge=_?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:O?()=>performance.now()-s.__performance_now_clock_drift:()=>performance.now();var Le,Ye=[],ze={};function Be(){if(!Le){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"};for(e in ze)void 0===ze[e]?delete t[e]:t[e]=ze[e];var n=[];for(e in t)n.push(e+"="+t[e]);Le=n}return Le}function Ne(e,n){if(O)return He(20,1,e,n);var r=0;return Be().forEach((function(a,i){var s=n+r;for(i=o()[e+4*i>>2>>>0]=s,s=0;s<a.length;++s)t()[i++>>0>>>0]=a.charCodeAt(s);t()[i>>0>>>0]=0,r+=a.length+1})),0}function Ge(e,t){if(O)return He(21,1,e,t);var n=Be();o()[e>>2>>>0]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),o()[t>>2>>>0]=r,0}function qe(e){return O?He(22,1,e):52}function $e(e,t,n,r){return O?He(23,1,e,t,n,r):52}function Ve(e,t,n,r,a){return O?He(24,1,e,t,n,r,a):70}var Je=[null,[],[]];function Qe(e,t,n,a){if(O)return He(25,1,e,t,n,a);for(var i=0,s=0;s<n;s++){var u=o()[t>>2>>>0],c=o()[t+4>>2>>>0];t+=8;for(var l=0;l<c;l++){var f=r()[u+l>>>0],p=Je[e];0===f||10===f?((1===e?R:x)(Y(p,0)),p.length=0):p.push(f)}i+=c}return o()[a>>2>>>0]=i,0}function Xe(e){return 0==e%4&&(0!=e%100||0==e%400)}var Ke=[31,29,31,30,31,30,31,31,30,31,30,31],Ze=[31,28,31,30,31,30,31,31,30,31,30,31];function et(e,n,r,o){function i(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function s(e,t){return i(e,t,"0")}function u(e,t){function n(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function c(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function l(e){var t=e.Ma;for(e=new Date(new Date(e.Na+1900,0,1).getTime());0<t;){var n=e.getMonth(),r=(Xe(e.getFullYear())?Ke:Ze)[n];if(!(t>r-e.getDate())){e.setDate(e.getDate()+t);break}t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=c(new Date(e.getFullYear(),0,4)),n=c(n),0>=u(t,e)?0>=u(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var f=a()[o+40>>2>>>0];for(var p in o={tb:a()[o>>2>>>0],sb:a()[o+4>>2>>>0],Sa:a()[o+8>>2>>>0],Va:a()[o+12>>2>>>0],Ta:a()[o+16>>2>>>0],Na:a()[o+20>>2>>>0],Ja:a()[o+24>>2>>>0],Ma:a()[o+28>>2>>>0],zb:a()[o+32>>2>>>0],rb:a()[o+36>>2>>>0],ub:f?z(f):""},r=z(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),m="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(e){return d[e.Ja].substring(0,3)},"%A":function(e){return d[e.Ja]},"%b":function(e){return m[e.Ta].substring(0,3)},"%B":function(e){return m[e.Ta]},"%C":function(e){return s((e.Na+1900)/100|0,2)},"%d":function(e){return s(e.Va,2)},"%e":function(e){return i(e.Va,2," ")},"%g":function(e){return l(e).toString().substring(2)},"%G":function(e){return l(e)},"%H":function(e){return s(e.Sa,2)},"%I":function(e){return 0==(e=e.Sa)?e=12:12<e&&(e-=12),s(e,2)},"%j":function(e){for(var t=0,n=0;n<=e.Ta-1;t+=(Xe(e.Na+1900)?Ke:Ze)[n++]);return s(e.Va+t,3)},"%m":function(e){return s(e.Ta+1,2)},"%M":function(e){return s(e.sb,2)},"%n":function(){return"\\n"},"%p":function(e){return 0<=e.Sa&&12>e.Sa?"AM":"PM"},"%S":function(e){return s(e.tb,2)},"%t":function(){return"\\t"},"%u":function(e){return e.Ja||7},"%U":function(e){return s(Math.floor((e.Ma+7-e.Ja)/7),2)},"%V":function(e){var t=Math.floor((e.Ma+7-(e.Ja+6)%7)/7);if(2>=(e.Ja+371-e.Ma-2)%7&&t++,t)53==t&&(4==(n=(e.Ja+371-e.Ma)%7)||3==n&&Xe(e.Na)||(t=1));else{t=52;var n=(e.Ja+7-e.Ma-1)%7;(4==n||5==n&&Xe(e.Na%400-1))&&t++}return s(t,2)},"%w":function(e){return e.Ja},"%W":function(e){return s(Math.floor((e.Ma+7-(e.Ja+6)%7)/7),2)},"%y":function(e){return(e.Na+1900).toString().substring(2)},"%Y":function(e){return e.Na+1900},"%z":function(e){var t=0<=(e=e.rb);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.ub},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](o)));return p=function(e){var t=Array(N(e)+1);return B(e,t,0,t.length),t}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(e,n){t().set(e,n>>>0)}(p,e),p.length-1)}fe.Ua();var tt=[null,ce,de,ve,we,_e,Oe,Se,Te,Ae,Ee,Me,Re,xe,Ce,Pe,ke,Ue,Ie,je,Ne,Ge,qe,$e,Ve,Qe],nt={b:function(e){return at(e+24)+24},c:function(e,t,n){throw new ye(e).Ua(t,n),e},L:function(e){ot(e,!w,1,!b),fe.Za()},l:function(e){O?postMessage({cmd:"cleanupThread",thread:e}):se(e)},D:be,i:we,R:_e,z:Oe,B:Se,T:Te,P:Ae,I:Ee,O:Me,p:Re,A:xe,x:Ce,Q:Pe,y:ke,r:function(){},j:function(){ne("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},s:function(){ne("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},q:function(){return Date.now()},E:function(){return 2097152},V:function(){return!0},F:function(e,t,n,r){if(e==t)setTimeout((()=>De(r)));else if(O)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:r});else{if(!(e=fe.La[e]))return;e.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},K:function(){return-1},W:function(e,t){e=new Date(1e3*Fe(e)),a()[t>>2>>>0]=e.getUTCSeconds(),a()[t+4>>2>>>0]=e.getUTCMinutes(),a()[t+8>>2>>>0]=e.getUTCHours(),a()[t+12>>2>>>0]=e.getUTCDate(),a()[t+16>>2>>>0]=e.getUTCMonth(),a()[t+20>>2>>>0]=e.getUTCFullYear()-1900,a()[t+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[t+28>>2>>>0]=e},X:function(e,t){e=new Date(1e3*Fe(e)),a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),a()[t+20>>2>>>0]=e.getFullYear()-1900,a()[t+24>>2>>>0]=e.getDay();var n=new Date(e.getFullYear(),0,1),r=(e.getTime()-n.getTime())/864e5|0;a()[t+28>>2>>>0]=r,a()[t+36>>2>>>0]=-60*e.getTimezoneOffset(),r=new Date(e.getFullYear(),6,1).getTimezoneOffset(),e=0|(r!=(n=n.getTimezoneOffset())&&e.getTimezoneOffset()==Math.min(n,r)),a()[t+32>>2>>>0]=e},Y:function(e){var t=new Date(a()[e+20>>2>>>0]+1900,a()[e+16>>2>>>0],a()[e+12>>2>>>0],a()[e+8>>2>>>0],a()[e+4>>2>>>0],a()[e>>2>>>0],0),n=a()[e+32>>2>>>0],r=t.getTimezoneOffset(),o=new Date(t.getFullYear(),0,1),i=new Date(t.getFullYear(),6,1).getTimezoneOffset(),s=o.getTimezoneOffset(),u=Math.min(s,i);return 0>n?a()[e+32>>2>>>0]=Number(i!=s&&u==r):0<n!=(u==r)&&(i=Math.max(s,i),t.setTime(t.getTime()+6e4*((0<n?u:i)-r))),a()[e+24>>2>>>0]=t.getDay(),n=(t.getTime()-o.getTime())/864e5|0,a()[e+28>>2>>>0]=n,a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),t.getTime()/1e3|0},G:Ue,H:Ie,Z:function e(t,n,r){e.jb||(e.jb=!0,je(t,n,r))},d:function(){ne("")},m:function(){if(!_&&!w){var e="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";me||(me={}),me[e]||(me[e]=1,_&&(e="warning: "+e),x(e))}},w:function(){return 4294901760},f:ge,S:function(e,t,n){r().copyWithin(e>>>0,t>>>0,t+n>>>0)},g:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},J:function(e,t,n){Ye.length=t,n>>=3;for(var r=0;r<t;r++)Ye[r]=i()[n+r>>>0];return(0>e?oe[-e-1]:tt[e]).apply(null,Ye)},v:function(e){var t=r().length;if((e>>>=0)<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var a=t*(1+.2/n);a=Math.min(a,e+100663296);var o=Math;a=Math.max(e,a),o=o.min.call(o,4294901760,a+(65536-a%65536)%65536);e:{try{P.grow(o-D.byteLength+65535>>>16),G(P.buffer);var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1},U:function(){throw"unwind"},M:Ne,N:Ge,k:le,h:qe,o:$e,t:Ve,n:Qe,u:function e(r,a){e.Wa||(e.Wa=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}if(_)try{var t=n(760);return()=>t.randomBytes(1)[0]}catch(e){}return()=>ne("randomDevice")}());for(var o=0;o<a;o++)t()[r+o>>0>>>0]=e.Wa();return 0},a:P||s.wasmMemory,C:et,e:function(e,t,n,r){return et(e,t,n,r)}};!function(){function e(e,t){s.asm=e.exports,fe.$a.push(s.asm.wa),$=s.asm.za,J.unshift(s.asm._),k=t,O||(Z--,s.monitorRunDependencies&&s.monitorRunDependencies(Z),0==Z&&(null!==ee&&(clearInterval(ee),ee=null),te&&(e=te,te=null,e())))}function t(t){e(t.instance,t.module)}function n(e){return function(){if(!M&&(b||w)){if("function"==typeof fetch&&!K.startsWith("file://"))return fetch(K,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at \'"+K+"\'";return e.arrayBuffer()})).catch((function(){return ae()}));if(f)return new Promise((function(e,t){f(K,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return ae()}))}().then((function(e){return WebAssembly.instantiate(e,r)})).then((function(e){return e})).then(e,(function(e){x("failed to asynchronously prepare wasm: "+e),ne(e)}))}var r={a:nt};if(O||(Z++,s.monitorRunDependencies&&s.monitorRunDependencies(Z)),s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(e){return x("Module.instantiateWasm callback failed with error: "+e),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||re()||K.startsWith("file://")||_||"function"!=typeof fetch?n(t):fetch(K,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(t,(function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),n(t)}))}))).catch(c)}(),s.___wasm_call_ctors=function(){return(s.___wasm_call_ctors=s.asm._).apply(null,arguments)},s._OrtInit=function(){return(s._OrtInit=s.asm.$).apply(null,arguments)},s._OrtCreateSessionOptions=function(){return(s._OrtCreateSessionOptions=s.asm.aa).apply(null,arguments)},s._OrtAppendExecutionProvider=function(){return(s._OrtAppendExecutionProvider=s.asm.ba).apply(null,arguments)},s._OrtAddSessionConfigEntry=function(){return(s._OrtAddSessionConfigEntry=s.asm.ca).apply(null,arguments)},s._OrtReleaseSessionOptions=function(){return(s._OrtReleaseSessionOptions=s.asm.da).apply(null,arguments)},s._OrtCreateSession=function(){return(s._OrtCreateSession=s.asm.ea).apply(null,arguments)},s._OrtReleaseSession=function(){return(s._OrtReleaseSession=s.asm.fa).apply(null,arguments)},s._OrtGetInputCount=function(){return(s._OrtGetInputCount=s.asm.ga).apply(null,arguments)},s._OrtGetOutputCount=function(){return(s._OrtGetOutputCount=s.asm.ha).apply(null,arguments)},s._OrtGetInputName=function(){return(s._OrtGetInputName=s.asm.ia).apply(null,arguments)},s._OrtGetOutputName=function(){return(s._OrtGetOutputName=s.asm.ja).apply(null,arguments)},s._OrtFree=function(){return(s._OrtFree=s.asm.ka).apply(null,arguments)},s._OrtCreateTensor=function(){return(s._OrtCreateTensor=s.asm.la).apply(null,arguments)},s._OrtGetTensorData=function(){return(s._OrtGetTensorData=s.asm.ma).apply(null,arguments)},s._OrtReleaseTensor=function(){return(s._OrtReleaseTensor=s.asm.na).apply(null,arguments)},s._OrtCreateRunOptions=function(){return(s._OrtCreateRunOptions=s.asm.oa).apply(null,arguments)},s._OrtAddRunConfigEntry=function(){return(s._OrtAddRunConfigEntry=s.asm.pa).apply(null,arguments)},s._OrtReleaseRunOptions=function(){return(s._OrtReleaseRunOptions=s.asm.qa).apply(null,arguments)},s._OrtRun=function(){return(s._OrtRun=s.asm.ra).apply(null,arguments)},s._OrtEndProfiling=function(){return(s._OrtEndProfiling=s.asm.sa).apply(null,arguments)};var rt=s._pthread_self=function(){return(rt=s._pthread_self=s.asm.ta).apply(null,arguments)},at=s._malloc=function(){return(at=s._malloc=s.asm.ua).apply(null,arguments)};s._free=function(){return(s._free=s.asm.va).apply(null,arguments)},s.__emscripten_tls_init=function(){return(s.__emscripten_tls_init=s.asm.wa).apply(null,arguments)};var ot=s.__emscripten_thread_init=function(){return(ot=s.__emscripten_thread_init=s.asm.xa).apply(null,arguments)};s.__emscripten_thread_crashed=function(){return(s.__emscripten_thread_crashed=s.asm.ya).apply(null,arguments)};var it,st=s._emscripten_run_in_main_runtime_thread_js=function(){return(st=s._emscripten_run_in_main_runtime_thread_js=s.asm.Aa).apply(null,arguments)},ut=s.__emscripten_proxy_execute_task_queue=function(){return(ut=s.__emscripten_proxy_execute_task_queue=s.asm.Ba).apply(null,arguments)},ct=s.__emscripten_thread_free_data=function(){return(ct=s.__emscripten_thread_free_data=s.asm.Ca).apply(null,arguments)},lt=s.__emscripten_thread_exit=function(){return(lt=s.__emscripten_thread_exit=s.asm.Da).apply(null,arguments)},ft=s._emscripten_stack_set_limits=function(){return(ft=s._emscripten_stack_set_limits=s.asm.Ea).apply(null,arguments)},pt=s.stackSave=function(){return(pt=s.stackSave=s.asm.Fa).apply(null,arguments)},dt=s.stackRestore=function(){return(dt=s.stackRestore=s.asm.Ga).apply(null,arguments)},mt=s.stackAlloc=function(){return(mt=s.stackAlloc=s.asm.Ha).apply(null,arguments)};function gt(){function e(){if(!it&&(it=!0,s.calledRun=!0,!H)&&(O||pe(J),u(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),!O)){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;){var e=s.postRun.shift();Q.unshift(e)}pe(Q)}}if(!(0<Z))if(O)u(s),O||pe(J),postMessage({cmd:"loaded"});else{if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)X();pe(V),0<Z||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),e()}),1)):e())}}if(s.___cxa_is_pointer_type=function(){return(s.___cxa_is_pointer_type=s.asm.Ia).apply(null,arguments)},s.UTF8ToString=z,s.stringToUTF8=function(e,t,n){return B(e,r(),t,n)},s.lengthBytesUTF8=N,s.keepRuntimeAlive=function(){return C},s.wasmMemory=P,s.stackSave=pt,s.stackRestore=dt,s.stackAlloc=mt,s.ExitStatus=ie,s.PThread=fe,te=function e(){it||gt(),it||(te=e)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return gt(),e.ready});e.exports=r},932:(e,t,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t,r,a;e=e||{},t||(t=void 0!==e?e:{}),t.ready=new Promise((function(e,t){r=e,a=t}));var o,i,s,u,c,l,f=Object.assign({},t),p="./this.program",d=(e,t)=>{throw t},m="object"==typeof window,g="function"==typeof importScripts,h="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,y="";h?(y=g?n(908).dirname(y)+"/":"//",l=()=>{c||(u=n(384),c=n(908))},o=function(e,t){return l(),e=c.normalize(e),u.readFileSync(e,t?void 0:"utf8")},s=e=>((e=o(e,!0)).buffer||(e=new Uint8Array(e)),e),i=(e,t,n)=>{l(),e=c.normalize(e),u.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof $))throw e})),process.on("unhandledRejection",(function(e){throw e})),d=(e,t)=>{if(_)throw process.exitCode=e,t;t instanceof $||w("exiting due to exception: "+t),process.exit(e)},t.inspect=function(){return"[Emscripten Module object]"}):(m||g)&&(g?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),_scriptDir&&(y=_scriptDir),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},g&&(s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),i=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var v,b=t.print||console.log.bind(console),w=t.printErr||console.warn.bind(console);Object.assign(t,f),f=null,t.thisProgram&&(p=t.thisProgram),t.quit&&(d=t.quit),t.wasmBinary&&(v=t.wasmBinary);var _=t.noExitRuntime||!0;"object"!=typeof WebAssembly&&B("no native wasm support detected");var O,S,T,A,E,M,R=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function C(e,t,n){var r=(t>>>=0)+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&x)return x.decode(e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function P(e,t){return(e>>>=0)?C(A,e,t):""}function k(e,t,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(n>=r)break;t[n++>>>0]=i}else{if(2047>=i){if(n+1>=r)break;t[n++>>>0]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;t[n++>>>0]=224|i>>12}else{if(n+3>=r)break;t[n++>>>0]=240|i>>18,t[n++>>>0]=128|i>>12&63}t[n++>>>0]=128|i>>6&63}t[n++>>>0]=128|63&i}}return t[n>>>0]=0,n-a}function D(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}return t}function F(){var e=O.buffer;S=e,t.HEAP8=T=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=E=new Int32Array(e),t.HEAPU8=A=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=M=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var U=[],I=[],W=[];function j(){var e=t.preRun.shift();U.unshift(e)}var H,L=0,Y=null,z=null;function B(e){throw t.onAbort&&t.onAbort(e),w(e="Aborted("+e+")"),R=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),a(e),e}function N(){return H.startsWith("data:application/octet-stream;base64,")}if(H="ort-wasm.wasm",!N()){var G=H;H=t.locateFile?t.locateFile(G,y):y+G}function q(){var e=H;try{if(e==H&&v)return new Uint8Array(v);if(s)return s(e);throw"both async and sync fetching of the wasm failed"}catch(e){B(e)}}function $(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function V(e){for(;0<e.length;)e.shift()(t)}function J(e){this.sa=e-24,this.Ia=function(e){M[this.sa+4>>2>>>0]=e},this.Ba=function(e){M[this.sa+8>>2>>>0]=e},this.Ga=function(){E[this.sa>>2>>>0]=0},this.Aa=function(){T[this.sa+12>>0>>>0]=0},this.Ha=function(){T[this.sa+13>>0>>>0]=0},this.ya=function(e,t){this.za(),this.Ia(e),this.Ba(t),this.Ga(),this.Aa(),this.Ha()},this.za=function(){M[this.sa+16>>2>>>0]=0}}function Q(e){var t=D(e)+1,n=ie(t);return n&&k(e,T,n,t),n}var X={};function K(){if(!Z){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(e in X)void 0===X[e]?delete t[e]:t[e]=X[e];var n=[];for(e in t)n.push(e+"="+t[e]);Z=n}return Z}var Z,ee=[null,[],[]];function te(e){return 0==e%4&&(0!=e%100||0==e%400)}var ne=[31,29,31,30,31,30,31,31,30,31,30,31],re=[31,28,31,30,31,30,31,31,30,31,30,31];function ae(e,t,n,r){function a(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function o(e,t){return a(e,t,"0")}function i(e,t){function n(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=e.qa;for(e=new Date(new Date(e.ra+1900,0,1).getTime());0<t;){var n=e.getMonth(),r=(te(e.getFullYear())?ne:re)[n];if(!(t>r-e.getDate())){e.setDate(e.getDate()+t);break}t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),n=s(n),0>=i(t,e)?0>=i(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var c=E[r+40>>2>>>0];for(var l in r={Ea:E[r>>2>>>0],Da:E[r+4>>2>>>0],ta:E[r+8>>2>>>0],va:E[r+12>>2>>>0],ua:E[r+16>>2>>>0],ra:E[r+20>>2>>>0],la:E[r+24>>2>>>0],qa:E[r+28>>2>>>0],Ja:E[r+32>>2>>>0],Ca:E[r+36>>2>>>0],Fa:c?P(c):""},n=P(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),c[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in c={"%a":function(e){return f[e.la].substring(0,3)},"%A":function(e){return f[e.la]},"%b":function(e){return p[e.ua].substring(0,3)},"%B":function(e){return p[e.ua]},"%C":function(e){return o((e.ra+1900)/100|0,2)},"%d":function(e){return o(e.va,2)},"%e":function(e){return a(e.va,2," ")},"%g":function(e){return u(e).toString().substring(2)},"%G":function(e){return u(e)},"%H":function(e){return o(e.ta,2)},"%I":function(e){return 0==(e=e.ta)?e=12:12<e&&(e-=12),o(e,2)},"%j":function(e){for(var t=0,n=0;n<=e.ua-1;t+=(te(e.ra+1900)?ne:re)[n++]);return o(e.va+t,3)},"%m":function(e){return o(e.ua+1,2)},"%M":function(e){return o(e.Da,2)},"%n":function(){return"\\n"},"%p":function(e){return 0<=e.ta&&12>e.ta?"AM":"PM"},"%S":function(e){return o(e.Ea,2)},"%t":function(){return"\\t"},"%u":function(e){return e.la||7},"%U":function(e){return o(Math.floor((e.qa+7-e.la)/7),2)},"%V":function(e){var t=Math.floor((e.qa+7-(e.la+6)%7)/7);if(2>=(e.la+371-e.qa-2)%7&&t++,t)53==t&&(4==(n=(e.la+371-e.qa)%7)||3==n&&te(e.ra)||(t=1));else{t=52;var n=(e.la+7-e.qa-1)%7;(4==n||5==n&&te(e.ra%400-1))&&t++}return o(t,2)},"%w":function(e){return e.la},"%W":function(e){return o(Math.floor((e.qa+7-(e.la+6)%7)/7),2)},"%y":function(e){return(e.ra+1900).toString().substring(2)},"%Y":function(e){return e.ra+1900},"%z":function(e){var t=0<=(e=e.Ca);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.Fa},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),c)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),c[l](r)));return l=function(e){var t=Array(D(e)+1);return k(e,t,0,t.length),t}(n=n.replace(/\\0\\0/g,"%")),l.length>t?0:(T.set(l,e>>>0),l.length-1)}var oe={a:function(e){return ie(e+24)+24},b:function(e,t,n){throw new J(e).ya(t,n),e},g:function(){return 0},I:function(){},w:function(){},y:function(){},K:function(){return 0},G:function(){},C:function(){},F:function(){},k:function(){},x:function(){},u:function(){},H:function(){},v:function(){},n:function(){},p:function(){B("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},o:function(){B("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(){return Date.now()},L:function(){return!0},M:function(e,t){e=new Date(1e3*(M[e>>>2]+4294967296*E[e+4>>>2])),E[t>>2>>>0]=e.getUTCSeconds(),E[t+4>>2>>>0]=e.getUTCMinutes(),E[t+8>>2>>>0]=e.getUTCHours(),E[t+12>>2>>>0]=e.getUTCDate(),E[t+16>>2>>>0]=e.getUTCMonth(),E[t+20>>2>>>0]=e.getUTCFullYear()-1900,E[t+24>>2>>>0]=e.getUTCDay(),E[t+28>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},N:function(e,t){e=new Date(1e3*(M[e>>>2]+4294967296*E[e+4>>>2])),E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),E[t+20>>2>>>0]=e.getFullYear()-1900,E[t+24>>2>>>0]=e.getDay();var n=new Date(e.getFullYear(),0,1);E[t+28>>2>>>0]=(e.getTime()-n.getTime())/864e5|0,E[t+36>>2>>>0]=-60*e.getTimezoneOffset();var r=new Date(e.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[t+32>>2>>>0]=0|(r!=n&&e.getTimezoneOffset()==Math.min(n,r))},O:function(e){var t=new Date(E[e+20>>2>>>0]+1900,E[e+16>>2>>>0],E[e+12>>2>>>0],E[e+8>>2>>>0],E[e+4>>2>>>0],E[e>>2>>>0],0),n=E[e+32>>2>>>0],r=t.getTimezoneOffset(),a=new Date(t.getFullYear(),0,1),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=a.getTimezoneOffset(),s=Math.min(i,o);return 0>n?E[e+32>>2>>>0]=Number(o!=i&&s==r):0<n!=(s==r)&&(o=Math.max(i,o),t.setTime(t.getTime()+6e4*((0<n?s:o)-r))),E[e+24>>2>>>0]=t.getDay(),E[e+28>>2>>>0]=(t.getTime()-a.getTime())/864e5|0,E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),t.getTime()/1e3|0},z:function(){return-52},B:function(){},m:function e(t,n,r){e.xa||(e.xa=!0,function(e,t,n){function r(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}var a=(new Date).getFullYear(),o=new Date(a,0,1),i=new Date(a,6,1);a=o.getTimezoneOffset();var s=i.getTimezoneOffset();E[e>>2>>>0]=60*Math.max(a,s),E[t>>2>>>0]=Number(a!=s),e=r(o),t=r(i),e=Q(e),t=Q(t),s<a?(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t):(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e)}(t,n,r))},d:function(){B("")},t:function(){return 4294901760},h:h?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now(),J:function(e,t,n){A.copyWithin(e>>>0,t>>>0,t+n>>>0)},f:function(e){var t=A.length;if(4294901760<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296);var a=Math;r=Math.max(e,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);e:{try{O.grow(a-S.byteLength+65535>>>16),F();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1},D:function(e,t){var n=0;return K().forEach((function(r,a){var o=t+n;for(a=M[e+4*a>>2>>>0]=o,o=0;o<r.length;++o)T[a++>>0>>>0]=r.charCodeAt(o);T[a>>0>>>0]=0,n+=r.length+1})),0},E:function(e,t){var n=K();M[e>>2>>>0]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),M[t>>2>>>0]=r,0},r:function(e){_||(t.onExit&&t.onExit(e),R=!0),d(e,new $(e))},e:function(){return 52},j:function(){return 52},q:function(){return 70},i:function(e,t,n,r){for(var a=0,o=0;o<n;o++){var i=M[t>>2>>>0],s=M[t+4>>2>>>0];t+=8;for(var u=0;u<s;u++){var c=A[i+u>>>0],l=ee[e];0===c||10===c?((1===e?b:w)(C(l,0)),l.length=0):l.push(c)}a+=s}return M[r>>2>>>0]=a,0},s:function e(t,r){e.wa||(e.wa=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}if(h)try{var t=n(760);return()=>t.randomBytes(1)[0]}catch(e){}return()=>B("randomDevice")}());for(var a=0;a<r;a++)T[t+a>>0>>>0]=e.wa();return 0},A:ae,c:function(e,t,n,r){return ae(e,t,n,r)}};!function(){function e(e){t.asm=e.exports,O=t.asm.P,F(),I.unshift(t.asm.Q),L--,t.monitorRunDependencies&&t.monitorRunDependencies(L),0==L&&(null!==Y&&(clearInterval(Y),Y=null),z&&(e=z,z=null,e()))}function n(t){e(t.instance)}function r(e){return function(){if(!v&&(m||g)){if("function"==typeof fetch&&!H.startsWith("file://"))return fetch(H,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at \'"+H+"\'";return e.arrayBuffer()})).catch((function(){return q()}));if(i)return new Promise((function(e,t){i(H,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return q()}))}().then((function(e){return WebAssembly.instantiate(e,o)})).then((function(e){return e})).then(e,(function(e){w("failed to asynchronously prepare wasm: "+e),B(e)}))}var o={a:oe};if(L++,t.monitorRunDependencies&&t.monitorRunDependencies(L),t.instantiateWasm)try{return t.instantiateWasm(o,e)}catch(e){return w("Module.instantiateWasm callback failed with error: "+e),!1}(v||"function"!=typeof WebAssembly.instantiateStreaming||N()||H.startsWith("file://")||h||"function"!=typeof fetch?r(n):fetch(H,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,o).then(n,(function(e){return w("wasm streaming compile failed: "+e),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.Q).apply(null,arguments)},t._OrtInit=function(){return(t._OrtInit=t.asm.R).apply(null,arguments)},t._OrtCreateSessionOptions=function(){return(t._OrtCreateSessionOptions=t.asm.S).apply(null,arguments)},t._OrtAppendExecutionProvider=function(){return(t._OrtAppendExecutionProvider=t.asm.T).apply(null,arguments)},t._OrtAddSessionConfigEntry=function(){return(t._OrtAddSessionConfigEntry=t.asm.U).apply(null,arguments)},t._OrtReleaseSessionOptions=function(){return(t._OrtReleaseSessionOptions=t.asm.V).apply(null,arguments)},t._OrtCreateSession=function(){return(t._OrtCreateSession=t.asm.W).apply(null,arguments)},t._OrtReleaseSession=function(){return(t._OrtReleaseSession=t.asm.X).apply(null,arguments)},t._OrtGetInputCount=function(){return(t._OrtGetInputCount=t.asm.Y).apply(null,arguments)},t._OrtGetOutputCount=function(){return(t._OrtGetOutputCount=t.asm.Z).apply(null,arguments)},t._OrtGetInputName=function(){return(t._OrtGetInputName=t.asm._).apply(null,arguments)},t._OrtGetOutputName=function(){return(t._OrtGetOutputName=t.asm.$).apply(null,arguments)},t._OrtFree=function(){return(t._OrtFree=t.asm.aa).apply(null,arguments)},t._OrtCreateTensor=function(){return(t._OrtCreateTensor=t.asm.ba).apply(null,arguments)},t._OrtGetTensorData=function(){return(t._OrtGetTensorData=t.asm.ca).apply(null,arguments)},t._OrtReleaseTensor=function(){return(t._OrtReleaseTensor=t.asm.da).apply(null,arguments)},t._OrtCreateRunOptions=function(){return(t._OrtCreateRunOptions=t.asm.ea).apply(null,arguments)},t._OrtAddRunConfigEntry=function(){return(t._OrtAddRunConfigEntry=t.asm.fa).apply(null,arguments)},t._OrtReleaseRunOptions=function(){return(t._OrtReleaseRunOptions=t.asm.ga).apply(null,arguments)},t._OrtRun=function(){return(t._OrtRun=t.asm.ha).apply(null,arguments)},t._OrtEndProfiling=function(){return(t._OrtEndProfiling=t.asm.ia).apply(null,arguments)};var ie=t._malloc=function(){return(ie=t._malloc=t.asm.ja).apply(null,arguments)};t._free=function(){return(t._free=t.asm.ka).apply(null,arguments)};var se,ue=t.stackSave=function(){return(ue=t.stackSave=t.asm.ma).apply(null,arguments)},ce=t.stackRestore=function(){return(ce=t.stackRestore=t.asm.na).apply(null,arguments)},le=t.stackAlloc=function(){return(le=t.stackAlloc=t.asm.oa).apply(null,arguments)};function fe(){function e(){if(!se&&(se=!0,t.calledRun=!0,!R)){if(V(I),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();W.unshift(e)}V(W)}}if(!(0<L)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)j();V(U),0<L||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t.___cxa_is_pointer_type=function(){return(t.___cxa_is_pointer_type=t.asm.pa).apply(null,arguments)},t.UTF8ToString=P,t.stringToUTF8=function(e,t,n){return k(e,A,t,n)},t.lengthBytesUTF8=D,t.stackSave=ue,t.stackRestore=ce,t.stackAlloc=le,z=function e(){se||fe(),se||(z=e)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return fe(),e.ready});e.exports=r},154:e=>{"use strict";e.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},760:()=>{},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";const e=n(259),t=n(263);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,t.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(e=>postMessage({type:"init-wasm",err:e})));break;case"init-ort":try{const{numThreads:t,loggingLevel:r}=n.data.in;(0,e.initOrt)(t,r),postMessage({type:"init-ort"})}catch(e){postMessage({type:"init-ort",err:e})}break;case"create_allocate":try{const{model:t}=n.data.in,r=(0,e.createSessionAllocate)(t);postMessage({type:"create_allocate",out:r})}catch(e){postMessage({type:"create_allocate",err:e})}break;case"create_finalize":try{const{modeldata:t,options:r}=n.data.in,a=(0,e.createSessionFinalize)(t,r);postMessage({type:"create_finalize",out:a})}catch(e){postMessage({type:"create_finalize",err:e})}break;case"create":try{const{model:t,options:r}=n.data.in,a=(0,e.createSession)(t,r);postMessage({type:"create",out:a})}catch(e){postMessage({type:"create",err:e})}break;case"release":try{const t=n.data.in;(0,e.releaseSession)(t),postMessage({type:"release"})}catch(e){postMessage({type:"release",err:e})}break;case"run":try{const{sessionId:t,inputIndices:r,inputs:a,outputIndices:o,options:i}=n.data.in;(0,e.run)(t,r,a,o,i).then((t=>{postMessage({type:"run",out:t},(0,e.extractTransferableBuffers)(t))}),(e=>{postMessage({type:"run",err:e})}))}catch(e){postMessage({type:"run",err:e})}break;case"end-profiling":try{const t=n.data.in;(0,e.endProfiling)(t),postMessage({type:"end-profiling"})}catch(e){postMessage({type:"end-profiling",err:e})}}}})()})();\n',"Worker",void 0,void 0)}},6614:_r=>{_r.exports=function(Tr,Rr,Ar,Pr){var Lr=self||window;try{try{var Mr;try{Mr=new Lr.Blob([Tr])}catch{(Mr=new(Lr.BlobBuilder||Lr.WebKitBlobBuilder||Lr.MozBlobBuilder||Lr.MSBlobBuilder)).append(Tr),Mr=Mr.getBlob()}var Fr=Lr.URL||Lr.webkitURL,zr=Fr.createObjectURL(Mr),Ur=new Lr[Rr](zr,Ar);return Fr.revokeObjectURL(zr),Ur}catch{return new Lr[Rr]("data:application/javascript,".concat(encodeURIComponent(Tr)),Ar)}}catch{if(!Pr)throw Error("Inline worker is not supported");return new Lr[Rr](Pr,Ar)}}},3474:(_r,Tr,Rr)=>{var Ar,Pr=(Ar=(Ar=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(Lr){function Mr(){return ks.buffer!=Us&&ds(ks.buffer),Vs}function Fr(){return ks.buffer!=Us&&ds(ks.buffer),ao}function zr(){return ks.buffer!=Us&&ds(ks.buffer),qs}function Ur(){return ks.buffer!=Us&&ds(ks.buffer),Qs}function Vr(){return ks.buffer!=Us&&ds(ks.buffer),mo}var Nr,Dr,jr;Lr=Lr||{},Nr||(Nr=Lr!==void 0?Lr:{}),Nr.ready=new Promise(function(As,Ds){Dr=As,jr=Ds});var Gr,Wr,qr,Kr,Xr,Zr,Jr=Object.assign({},Nr),_i="./this.program",es=(As,Ds)=>{throw Ds},ts=typeof window=="object",rs=typeof importScripts=="function",ns=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",as=Nr.ENVIRONMENT_IS_PTHREAD||!1,ls="";function us(As){return Nr.locateFile?Nr.locateFile(As,ls):ls+As}if(ns){let As;ls=rs?Rr(908).dirname(ls)+"/":"//",Zr=()=>{Xr||(Kr=Rr(1384),Xr=Rr(908))},Gr=function(Ds,zs){return Zr(),Ds=Xr.normalize(Ds),Kr.readFileSync(Ds,zs?void 0:"utf8")},qr=Ds=>((Ds=Gr(Ds,!0)).buffer||(Ds=new Uint8Array(Ds)),Ds),Wr=(Ds,zs,eo)=>{Zr(),Ds=Xr.normalize(Ds),Kr.readFile(Ds,function(vo,bs){vo?eo(vo):zs(bs.buffer)})},1<process.argv.length&&(_i=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Ds){if(!(Ds instanceof Il))throw Ds}),process.on("unhandledRejection",function(Ds){throw Ds}),es=(Ds,zs)=>{if(ys)throw process.exitCode=Ds,zs;zs instanceof Il||fs("exiting due to exception: "+zs),process.exit(Ds)},Nr.inspect=function(){return"[Emscripten Module object]"};try{As=Rr(9925)}catch(Ds){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Ds}Rr.g.Worker=As.Worker}else(ts||rs)&&(rs?ls=self.location.href:typeof document<"u"&&document.currentScript&&(ls=document.currentScript.src),Ar&&(ls=Ar),ls=ls.indexOf("blob:")!==0?ls.substr(0,ls.replace(/[?#].*/,"").lastIndexOf("/")+1):"",ns||(Gr=As=>{var Ds=new XMLHttpRequest;return Ds.open("GET",As,!1),Ds.send(null),Ds.responseText},rs&&(qr=As=>{var Ds=new XMLHttpRequest;return Ds.open("GET",As,!1),Ds.responseType="arraybuffer",Ds.send(null),new Uint8Array(Ds.response)}),Wr=(As,Ds,zs)=>{var eo=new XMLHttpRequest;eo.open("GET",As,!0),eo.responseType="arraybuffer",eo.onload=()=>{eo.status==200||eo.status==0&&eo.response?Ds(eo.response):zs()},eo.onerror=zs,eo.send(null)}));ns&&typeof performance>"u"&&(Rr.g.performance=Rr(6953).performance);var xs=console.log.bind(console),Ts=console.warn.bind(console);ns&&(Zr(),xs=As=>Kr.writeSync(1,As+`
`),Ts=As=>Kr.writeSync(2,As+`
`));var vs,gs=Nr.print||xs,fs=Nr.printErr||Ts;Object.assign(Nr,Jr),Jr=null,Nr.thisProgram&&(_i=Nr.thisProgram),Nr.quit&&(es=Nr.quit),Nr.wasmBinary&&(vs=Nr.wasmBinary);var ys=Nr.noExitRuntime||!0;typeof WebAssembly!="object"&&To("no native wasm support detected");var ks,Fs,Us,Vs,ao,qs,Qs,mo,Xs=!1,so=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function uo(As,Ds,zs){var eo=(Ds>>>=0)+zs;for(zs=Ds;As[zs]&&!(zs>=eo);)++zs;if(16<zs-Ds&&As.buffer&&so)return so.decode(As.buffer instanceof SharedArrayBuffer?As.slice(Ds,zs):As.subarray(Ds,zs));for(eo="";Ds<zs;){var vo=As[Ds++];if(128&vo){var bs=63&As[Ds++];if((224&vo)==192)eo+=String.fromCharCode((31&vo)<<6|bs);else{var os=63&As[Ds++];65536>(vo=(240&vo)==224?(15&vo)<<12|bs<<6|os:(7&vo)<<18|bs<<12|os<<6|63&As[Ds++])?eo+=String.fromCharCode(vo):(vo-=65536,eo+=String.fromCharCode(55296|vo>>10,56320|1023&vo))}}else eo+=String.fromCharCode(vo)}return eo}function bo(As,Ds){return(As>>>=0)?uo(Fr(),As,Ds):""}function wo(As,Ds,zs,eo){if(!(0<eo))return 0;var vo=zs>>>=0;eo=zs+eo-1;for(var bs=0;bs<As.length;++bs){var os=As.charCodeAt(bs);if(55296<=os&&57343>=os&&(os=65536+((1023&os)<<10)|1023&As.charCodeAt(++bs)),127>=os){if(zs>=eo)break;Ds[zs++>>>0]=os}else{if(2047>=os){if(zs+1>=eo)break;Ds[zs++>>>0]=192|os>>6}else{if(65535>=os){if(zs+2>=eo)break;Ds[zs++>>>0]=224|os>>12}else{if(zs+3>=eo)break;Ds[zs++>>>0]=240|os>>18,Ds[zs++>>>0]=128|os>>12&63}Ds[zs++>>>0]=128|os>>6&63}Ds[zs++>>>0]=128|63&os}}return Ds[zs>>>0]=0,zs-vo}function Co(As){for(var Ds=0,zs=0;zs<As.length;++zs){var eo=As.charCodeAt(zs);127>=eo?Ds++:2047>=eo?Ds+=2:55296<=eo&&57343>=eo?(Ds+=4,++zs):Ds+=3}return Ds}function ds(As){Us=As,Nr.HEAP8=Vs=new Int8Array(As),Nr.HEAP16=new Int16Array(As),Nr.HEAP32=qs=new Int32Array(As),Nr.HEAPU8=ao=new Uint8Array(As),Nr.HEAPU16=new Uint16Array(As),Nr.HEAPU32=Qs=new Uint32Array(As),Nr.HEAPF32=new Float32Array(As),Nr.HEAPF64=mo=new Float64Array(As)}as&&(Us=Nr.buffer);var Is=Nr.INITIAL_MEMORY||16777216;if(as)ks=Nr.wasmMemory,Us=Nr.buffer;else if(Nr.wasmMemory)ks=Nr.wasmMemory;else if(!((ks=new WebAssembly.Memory({initial:Is/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw fs("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),ns&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");ks&&(Us=ks.buffer),Is=Us.byteLength,ds(Us);var Gs,to=[],no=[],Ro=[];function ro(){var As=Nr.preRun.shift();to.unshift(As)}var go,No=0,Do=null;function To(As){throw as?postMessage({cmd:"onAbort",arg:As}):Nr.onAbort&&Nr.onAbort(As),fs(As="Aborted("+As+")"),Xs=!0,As=new WebAssembly.RuntimeError(As+". Build with -sASSERTIONS for more info."),jr(As),As}function Wo(){return go.startsWith("data:application/octet-stream;base64,")}function ko(){var As=go;try{if(As==go&&vs)return new Uint8Array(vs);if(qr)return qr(As);throw"both async and sync fetching of the wasm failed"}catch(Ds){To(Ds)}}go="ort-wasm-threaded.wasm",Wo()||(go=us(go));var $a={};function Il(As){this.name="ExitStatus",this.message="Program terminated with exit("+As+")",this.status=As}function eu(As){(As=Vo.La[As])||To(),Vo.Xa(As)}function Fl(As){var Ds=Vo.lb();if(!Ds)return 6;Vo.Ra.push(Ds),Vo.La[As.Ka]=Ds,Ds.Ka=As.Ka;var zs={cmd:"run",start_routine:As.pb,arg:As.ib,pthread_ptr:As.Ka};return Ds.Qa=()=>{zs.time=performance.now(),Ds.postMessage(zs,As.vb)},Ds.loaded&&(Ds.Qa(),delete Ds.Qa),0}function Kl(As){if(as)return Dl(1,1,As);ys||(Vo.qb(),Nr.onExit&&Nr.onExit(As),Xs=!0),es(As,new Il(As))}function cu(As,Ds){if(!Ds&&as)throw Ws(As),"unwind";Kl(As)}var Vo={Oa:[],Ra:[],$a:[],La:{},Ua:function(){as&&Vo.mb()},xb:function(){},mb:function(){Vo.receiveObjectTransfer=Vo.ob,Vo.threadInitTLS=Vo.Za,Vo.setExitStatus=Vo.Ya,ys=!1},Ya:function(){},qb:function(){for(var As of Object.values(Vo.La))Vo.Xa(As);for(As of Vo.Oa)As.terminate();Vo.Oa=[]},Xa:function(As){var Ds=As.Ka;delete Vo.La[Ds],Vo.Oa.push(As),Vo.Ra.splice(Vo.Ra.indexOf(As),1),As.Ka=0,gp(Ds)},ob:function(){},Za:function(){Vo.$a.forEach(As=>As())},nb:function(As,Ds){As.onmessage=zs=>{var eo=(zs=zs.data).cmd;if(As.Ka&&(Vo.kb=As.Ka),zs.targetThread&&zs.targetThread!=Nu()){var vo=Vo.La[zs.yb];vo?vo.postMessage(zs,zs.transferList):fs('Internal error! Worker sent a message "'+eo+'" to target pthread '+zs.targetThread+", but that thread no longer exists!")}else eo==="processProxyingQueue"?_h(zs.queue):eo==="spawnThread"?Fl(zs):eo==="cleanupThread"?eu(zs.thread):eo==="killThread"?(zs=zs.thread,eo=Vo.La[zs],delete Vo.La[zs],eo.terminate(),gp(zs),Vo.Ra.splice(Vo.Ra.indexOf(eo),1),eo.Ka=0):eo==="cancelThread"?Vo.La[zs.thread].postMessage({cmd:"cancel"}):eo==="loaded"?(As.loaded=!0,Ds&&Ds(As),As.Qa&&(As.Qa(),delete As.Qa)):eo==="print"?gs("Thread "+zs.threadId+": "+zs.text):eo==="printErr"?fs("Thread "+zs.threadId+": "+zs.text):eo==="alert"?alert("Thread "+zs.threadId+": "+zs.text):zs.target==="setimmediate"?As.postMessage(zs):eo==="onAbort"?Nr.onAbort&&Nr.onAbort(zs.arg):eo&&fs("worker sent an unknown command "+eo);Vo.kb=void 0},As.onerror=zs=>{throw fs("worker sent an error! "+zs.filename+":"+zs.lineno+": "+zs.message),zs},ns&&(As.on("message",function(zs){As.onmessage({data:zs})}),As.on("error",function(zs){As.onerror(zs)}),As.on("detachedExit",function(){})),As.postMessage({cmd:"load",urlOrBlob:Nr.mainScriptUrlOrBlob||Ar,wasmMemory:ks,wasmModule:Fs})},hb:function(){var As=us("ort-wasm-threaded.worker.js");Vo.Oa.push(new Worker(As))},lb:function(){return Vo.Oa.length==0&&(Vo.hb(),Vo.nb(Vo.Oa[0])),Vo.Oa.pop()}};function Bs(As){for(;0<As.length;)As.shift()(Nr)}function Ws(As){if(as)return Dl(2,0,As);try{cu(As)}catch(Ds){Ds instanceof Il||Ds=="unwind"||es(1,Ds)}}Nr.PThread=Vo,Nr.establishStackSpace=function(){var As=Nu(),Ds=zr()[As+44>>2>>>0];As=zr()[As+48>>2>>>0],yp(Ds,Ds-As),Nl(Ds)};var ms,ps,Ps=[];function Ls(As){this.Pa=As-24,this.gb=function(Ds){Ur()[this.Pa+4>>2>>>0]=Ds},this.cb=function(Ds){Ur()[this.Pa+8>>2>>>0]=Ds},this.eb=function(){zr()[this.Pa>>2>>>0]=0},this.bb=function(){Mr()[this.Pa+12>>0>>>0]=0},this.fb=function(){Mr()[this.Pa+13>>0>>>0]=0},this.Ua=function(Ds,zs){this.ab(),this.gb(Ds),this.cb(zs),this.eb(),this.bb(),this.fb()},this.ab=function(){Ur()[this.Pa+16>>2>>>0]=0}}function Zs(As,Ds,zs,eo){return as?Dl(3,1,As,Ds,zs,eo):Eo(As,Ds,zs,eo)}function Eo(As,Ds,zs,eo){if(typeof SharedArrayBuffer>"u")return fs("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var vo=[];return as&&vo.length===0?Zs(As,Ds,zs,eo):(As={pb:zs,Ka:As,ib:eo,vb:vo},as?(As.wb="spawnThread",postMessage(As,vo),0):Fl(As))}function yo(As,Ds,zs){return as?Dl(4,1,As,Ds,zs):0}function io(As,Ds){if(as)return Dl(5,1,As,Ds)}function Lo(As,Ds){if(as)return Dl(6,1,As,Ds)}function Yo(As,Ds,zs){if(as)return Dl(7,1,As,Ds,zs)}function Go(As,Ds,zs){return as?Dl(8,1,As,Ds,zs):0}function Ks(As,Ds){if(as)return Dl(9,1,As,Ds)}function $o(As,Ds,zs){if(as)return Dl(10,1,As,Ds,zs)}function So(As,Ds,zs,eo){if(as)return Dl(11,1,As,Ds,zs,eo)}function Yl(As,Ds,zs,eo){if(as)return Dl(12,1,As,Ds,zs,eo)}function xu(As,Ds,zs,eo){if(as)return Dl(13,1,As,Ds,zs,eo)}function ju(As){if(as)return Dl(14,1,As)}function _f(As,Ds){if(as)return Dl(15,1,As,Ds)}function zu(As,Ds,zs){if(as)return Dl(16,1,As,Ds,zs)}function _h(As){Atomics.store(zr(),As>>2,1),Nu()&&tu(As),Atomics.compareExchange(zr(),As>>2,1,0)}function ep(As){return Ur()[As>>>2]+4294967296*zr()[As+4>>>2]}function Ru(As,Ds,zs,eo,vo,bs){return as?Dl(17,1,As,Ds,zs,eo,vo,bs):-52}function Su(As,Ds,zs,eo,vo,bs){if(as)return Dl(18,1,As,Ds,zs,eo,vo,bs)}function lp(As){var Ds=Co(As)+1,zs=pp(Ds);return zs&&wo(As,Mr(),zs,Ds),zs}function du(As,Ds,zs){function eo(ss){return(ss=ss.toTimeString().match(/\(([A-Za-z ]+)\)$/))?ss[1]:"GMT"}if(as)return Dl(19,1,As,Ds,zs);var vo=new Date().getFullYear(),bs=new Date(vo,0,1),os=new Date(vo,6,1);vo=bs.getTimezoneOffset();var cs=os.getTimezoneOffset(),_s=Math.max(vo,cs);zr()[As>>2>>>0]=60*_s,zr()[Ds>>2>>>0]=+(vo!=cs),As=eo(bs),Ds=eo(os),As=lp(As),Ds=lp(Ds),cs<vo?(Ur()[zs>>2>>>0]=As,Ur()[zs+4>>2>>>0]=Ds):(Ur()[zs>>2>>>0]=Ds,Ur()[zs+4>>2>>>0]=As)}function Dl(As,Ds){var zs=arguments.length-2,eo=arguments;return function(vo){var bs=Ju();return vo=vo(),Nl(bs),vo}(()=>{for(var vo=zl(8*zs),bs=vo>>3,os=0;os<zs;os++){var cs=eo[2+os];Vr()[bs+os>>>0]=cs}return Pp(As,zs,vo,Ds)})}Nr.invokeEntryPoint=function(As,Ds){var zs=Ps[As];zs||(As>=Ps.length&&(Ps.length=As+1),Ps[As]=zs=Gs.get(As)),As=zs(Ds),ys?Vo.Ya(As):iu(As)},Nr.executeNotifiedProxyingQueue=_h,ps=ns?()=>{var As=process.hrtime();return 1e3*As[0]+As[1]/1e6}:as?()=>performance.now()-Nr.__performance_now_clock_drift:()=>performance.now();var Hu,Ou=[],tp={};function up(){if(!Hu){var As,Ds={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:_i||"./this.program"};for(As in tp)tp[As]===void 0?delete Ds[As]:Ds[As]=tp[As];var zs=[];for(As in Ds)zs.push(As+"="+Ds[As]);Hu=zs}return Hu}function cp(As,Ds){if(as)return Dl(20,1,As,Ds);var zs=0;return up().forEach(function(eo,vo){var bs=Ds+zs;for(vo=Ur()[As+4*vo>>2>>>0]=bs,bs=0;bs<eo.length;++bs)Mr()[vo++>>0>>>0]=eo.charCodeAt(bs);Mr()[vo>>0>>>0]=0,zs+=eo.length+1}),0}function dp(As,Ds){if(as)return Dl(21,1,As,Ds);var zs=up();Ur()[As>>2>>>0]=zs.length;var eo=0;return zs.forEach(function(vo){eo+=vo.length+1}),Ur()[Ds>>2>>>0]=eo,0}function Rp(As){return as?Dl(22,1,As):52}function Zu(As,Ds,zs,eo){return as?Dl(23,1,As,Ds,zs,eo):52}function fp(As,Ds,zs,eo,vo){return as?Dl(24,1,As,Ds,zs,eo,vo):70}var Qu=[null,[],[]];function Vu(As,Ds,zs,eo){if(as)return Dl(25,1,As,Ds,zs,eo);for(var vo=0,bs=0;bs<zs;bs++){var os=Ur()[Ds>>2>>>0],cs=Ur()[Ds+4>>2>>>0];Ds+=8;for(var _s=0;_s<cs;_s++){var ss=Fr()[os+_s>>>0],Es=Qu[As];ss===0||ss===10?((As===1?gs:fs)(uo(Es,0)),Es.length=0):Es.push(ss)}vo+=cs}return Ur()[eo>>2>>>0]=vo,0}function Ol(As){return As%4==0&&(As%100!=0||As%400==0)}var hp=[31,29,31,30,31,30,31,31,30,31,30,31],Ap=[31,28,31,30,31,30,31,31,30,31,30,31];function Ip(As,Ds,zs,eo){function vo(Cs,Ms,Hs){for(Cs=typeof Cs=="number"?Cs.toString():Cs||"";Cs.length<Ms;)Cs=Hs[0]+Cs;return Cs}function bs(Cs,Ms){return vo(Cs,Ms,"0")}function os(Cs,Ms){function Hs(Io){return 0>Io?-1:0<Io?1:0}var lo;return(lo=Hs(Cs.getFullYear()-Ms.getFullYear()))===0&&(lo=Hs(Cs.getMonth()-Ms.getMonth()))===0&&(lo=Hs(Cs.getDate()-Ms.getDate())),lo}function cs(Cs){switch(Cs.getDay()){case 0:return new Date(Cs.getFullYear()-1,11,29);case 1:return Cs;case 2:return new Date(Cs.getFullYear(),0,3);case 3:return new Date(Cs.getFullYear(),0,2);case 4:return new Date(Cs.getFullYear(),0,1);case 5:return new Date(Cs.getFullYear()-1,11,31);case 6:return new Date(Cs.getFullYear()-1,11,30)}}function _s(Cs){var Ms=Cs.Ma;for(Cs=new Date(new Date(Cs.Na+1900,0,1).getTime());0<Ms;){var Hs=Cs.getMonth(),lo=(Ol(Cs.getFullYear())?hp:Ap)[Hs];if(!(Ms>lo-Cs.getDate())){Cs.setDate(Cs.getDate()+Ms);break}Ms-=lo-Cs.getDate()+1,Cs.setDate(1),11>Hs?Cs.setMonth(Hs+1):(Cs.setMonth(0),Cs.setFullYear(Cs.getFullYear()+1))}return Hs=new Date(Cs.getFullYear()+1,0,4),Ms=cs(new Date(Cs.getFullYear(),0,4)),Hs=cs(Hs),0>=os(Ms,Cs)?0>=os(Hs,Cs)?Cs.getFullYear()+1:Cs.getFullYear():Cs.getFullYear()-1}var ss=zr()[eo+40>>2>>>0];for(var Es in eo={tb:zr()[eo>>2>>>0],sb:zr()[eo+4>>2>>>0],Sa:zr()[eo+8>>2>>>0],Va:zr()[eo+12>>2>>>0],Ta:zr()[eo+16>>2>>>0],Na:zr()[eo+20>>2>>>0],Ja:zr()[eo+24>>2>>>0],Ma:zr()[eo+28>>2>>>0],zb:zr()[eo+32>>2>>>0],rb:zr()[eo+36>>2>>>0],ub:ss?bo(ss):""},zs=bo(zs),ss={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})zs=zs.replace(new RegExp(Es,"g"),ss[Es]);var $s="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ws="January February March April May June July August September October November December".split(" ");for(Es in ss={"%a":function(Cs){return $s[Cs.Ja].substring(0,3)},"%A":function(Cs){return $s[Cs.Ja]},"%b":function(Cs){return ws[Cs.Ta].substring(0,3)},"%B":function(Cs){return ws[Cs.Ta]},"%C":function(Cs){return bs((Cs.Na+1900)/100|0,2)},"%d":function(Cs){return bs(Cs.Va,2)},"%e":function(Cs){return vo(Cs.Va,2," ")},"%g":function(Cs){return _s(Cs).toString().substring(2)},"%G":function(Cs){return _s(Cs)},"%H":function(Cs){return bs(Cs.Sa,2)},"%I":function(Cs){return(Cs=Cs.Sa)==0?Cs=12:12<Cs&&(Cs-=12),bs(Cs,2)},"%j":function(Cs){for(var Ms=0,Hs=0;Hs<=Cs.Ta-1;Ms+=(Ol(Cs.Na+1900)?hp:Ap)[Hs++]);return bs(Cs.Va+Ms,3)},"%m":function(Cs){return bs(Cs.Ta+1,2)},"%M":function(Cs){return bs(Cs.sb,2)},"%n":function(){return`
`},"%p":function(Cs){return 0<=Cs.Sa&&12>Cs.Sa?"AM":"PM"},"%S":function(Cs){return bs(Cs.tb,2)},"%t":function(){return"	"},"%u":function(Cs){return Cs.Ja||7},"%U":function(Cs){return bs(Math.floor((Cs.Ma+7-Cs.Ja)/7),2)},"%V":function(Cs){var Ms=Math.floor((Cs.Ma+7-(Cs.Ja+6)%7)/7);if(2>=(Cs.Ja+371-Cs.Ma-2)%7&&Ms++,Ms)Ms==53&&((Hs=(Cs.Ja+371-Cs.Ma)%7)==4||Hs==3&&Ol(Cs.Na)||(Ms=1));else{Ms=52;var Hs=(Cs.Ja+7-Cs.Ma-1)%7;(Hs==4||Hs==5&&Ol(Cs.Na%400-1))&&Ms++}return bs(Ms,2)},"%w":function(Cs){return Cs.Ja},"%W":function(Cs){return bs(Math.floor((Cs.Ma+7-(Cs.Ja+6)%7)/7),2)},"%y":function(Cs){return(Cs.Na+1900).toString().substring(2)},"%Y":function(Cs){return Cs.Na+1900},"%z":function(Cs){var Ms=0<=(Cs=Cs.rb);return Cs=Math.abs(Cs)/60,(Ms?"+":"-")+("0000"+(Cs/60*100+Cs%60)).slice(-4)},"%Z":function(Cs){return Cs.ub},"%%":function(){return"%"}},zs=zs.replace(/%%/g,"\0\0"),ss)zs.includes(Es)&&(zs=zs.replace(new RegExp(Es,"g"),ss[Es](eo)));return Es=function(Cs){var Ms=Array(Co(Cs)+1);return wo(Cs,Ms,0,Ms.length),Ms}(zs=zs.replace(/\0\0/g,"%")),Es.length>Ds?0:(function(Cs,Ms){Mr().set(Cs,Ms>>>0)}(Es,As),Es.length-1)}Vo.Ua();var Ml=[null,Kl,Ws,Zs,yo,io,Lo,Yo,Go,Ks,$o,So,Yl,xu,ju,_f,zu,Ru,Su,du,cp,dp,Rp,Zu,fp,Vu],Bl={b:function(As){return pp(As+24)+24},c:function(As,Ds,zs){throw new Ls(As).Ua(Ds,zs),As},L:function(As){mp(As,!rs,1,!ts),Vo.Za()},l:function(As){as?postMessage({cmd:"cleanupThread",thread:As}):eu(As)},D:Eo,i:yo,R:io,z:Lo,B:Yo,T:Go,P:Ks,I:$o,O:So,p:Yl,A:xu,x:ju,Q:_f,y:zu,r:function(){},j:function(){To("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},s:function(){To("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},q:function(){return Date.now()},E:function(){return 2097152},V:function(){return!0},F:function(As,Ds,zs,eo){if(As==Ds)setTimeout(()=>_h(eo));else if(as)postMessage({targetThread:As,cmd:"processProxyingQueue",queue:eo});else{if(!(As=Vo.La[As]))return;As.postMessage({cmd:"processProxyingQueue",queue:eo})}return 1},K:function(){return-1},W:function(As,Ds){As=new Date(1e3*ep(As)),zr()[Ds>>2>>>0]=As.getUTCSeconds(),zr()[Ds+4>>2>>>0]=As.getUTCMinutes(),zr()[Ds+8>>2>>>0]=As.getUTCHours(),zr()[Ds+12>>2>>>0]=As.getUTCDate(),zr()[Ds+16>>2>>>0]=As.getUTCMonth(),zr()[Ds+20>>2>>>0]=As.getUTCFullYear()-1900,zr()[Ds+24>>2>>>0]=As.getUTCDay(),As=(As.getTime()-Date.UTC(As.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,zr()[Ds+28>>2>>>0]=As},X:function(As,Ds){As=new Date(1e3*ep(As)),zr()[Ds>>2>>>0]=As.getSeconds(),zr()[Ds+4>>2>>>0]=As.getMinutes(),zr()[Ds+8>>2>>>0]=As.getHours(),zr()[Ds+12>>2>>>0]=As.getDate(),zr()[Ds+16>>2>>>0]=As.getMonth(),zr()[Ds+20>>2>>>0]=As.getFullYear()-1900,zr()[Ds+24>>2>>>0]=As.getDay();var zs=new Date(As.getFullYear(),0,1),eo=(As.getTime()-zs.getTime())/864e5|0;zr()[Ds+28>>2>>>0]=eo,zr()[Ds+36>>2>>>0]=-60*As.getTimezoneOffset(),eo=new Date(As.getFullYear(),6,1).getTimezoneOffset(),As=0|(eo!=(zs=zs.getTimezoneOffset())&&As.getTimezoneOffset()==Math.min(zs,eo)),zr()[Ds+32>>2>>>0]=As},Y:function(As){var Ds=new Date(zr()[As+20>>2>>>0]+1900,zr()[As+16>>2>>>0],zr()[As+12>>2>>>0],zr()[As+8>>2>>>0],zr()[As+4>>2>>>0],zr()[As>>2>>>0],0),zs=zr()[As+32>>2>>>0],eo=Ds.getTimezoneOffset(),vo=new Date(Ds.getFullYear(),0,1),bs=new Date(Ds.getFullYear(),6,1).getTimezoneOffset(),os=vo.getTimezoneOffset(),cs=Math.min(os,bs);return 0>zs?zr()[As+32>>2>>>0]=+(bs!=os&&cs==eo):0<zs!=(cs==eo)&&(bs=Math.max(os,bs),Ds.setTime(Ds.getTime()+6e4*((0<zs?cs:bs)-eo))),zr()[As+24>>2>>>0]=Ds.getDay(),zs=(Ds.getTime()-vo.getTime())/864e5|0,zr()[As+28>>2>>>0]=zs,zr()[As>>2>>>0]=Ds.getSeconds(),zr()[As+4>>2>>>0]=Ds.getMinutes(),zr()[As+8>>2>>>0]=Ds.getHours(),zr()[As+12>>2>>>0]=Ds.getDate(),zr()[As+16>>2>>>0]=Ds.getMonth(),Ds.getTime()/1e3|0},G:Ru,H:Su,Z:function As(Ds,zs,eo){As.jb||(As.jb=!0,du(Ds,zs,eo))},d:function(){To("")},m:function(){if(!ns&&!rs){var As="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";ms||(ms={}),ms[As]||(ms[As]=1,ns&&(As="warning: "+As),fs(As))}},w:function(){return 4294901760},f:ps,S:function(As,Ds,zs){Fr().copyWithin(As>>>0,Ds>>>0,Ds+zs>>>0)},g:function(){return ns?Rr(3993).cpus().length:navigator.hardwareConcurrency},J:function(As,Ds,zs){Ou.length=Ds,zs>>=3;for(var eo=0;eo<Ds;eo++)Ou[eo]=Vr()[zs+eo>>>0];return(0>As?$a[-As-1]:Ml[As]).apply(null,Ou)},v:function(As){var Ds=Fr().length;if((As>>>=0)<=Ds||4294901760<As)return!1;for(var zs=1;4>=zs;zs*=2){var eo=Ds*(1+.2/zs);eo=Math.min(eo,As+100663296);var vo=Math;eo=Math.max(As,eo),vo=vo.min.call(vo,4294901760,eo+(65536-eo%65536)%65536);e:{try{ks.grow(vo-Us.byteLength+65535>>>16),ds(ks.buffer);var bs=1;break e}catch{}bs=void 0}if(bs)return!0}return!1},U:function(){throw"unwind"},M:cp,N:dp,k:cu,h:Rp,o:Zu,t:fp,n:Vu,u:function As(Ds,zs){As.Wa||(As.Wa=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var vo=new Uint8Array(1);return()=>(crypto.getRandomValues(vo),vo[0])}if(ns)try{var bs=Rr(760);return()=>bs.randomBytes(1)[0]}catch{}return()=>To("randomDevice")}());for(var eo=0;eo<zs;eo++)Mr()[Ds+eo>>0>>>0]=As.Wa();return 0},a:ks||Nr.wasmMemory,C:Ip,e:function(As,Ds,zs,eo){return Ip(As,Ds,zs,eo)}};(function(){function As(vo,bs){Nr.asm=vo.exports,Vo.$a.push(Nr.asm.wa),Gs=Nr.asm.za,no.unshift(Nr.asm._),Fs=bs,as||(No--,Nr.monitorRunDependencies&&Nr.monitorRunDependencies(No),No==0&&Do&&(vo=Do,Do=null,vo()))}function Ds(vo){As(vo.instance,vo.module)}function zs(vo){return function(){if(!vs&&(ts||rs)){if(typeof fetch=="function"&&!go.startsWith("file://"))return fetch(go,{credentials:"same-origin"}).then(function(bs){if(!bs.ok)throw"failed to load wasm binary file at '"+go+"'";return bs.arrayBuffer()}).catch(function(){return ko()});if(Wr)return new Promise(function(bs,os){Wr(go,function(cs){bs(new Uint8Array(cs))},os)})}return Promise.resolve().then(function(){return ko()})}().then(function(bs){return WebAssembly.instantiate(bs,eo)}).then(function(bs){return bs}).then(vo,function(bs){fs("failed to asynchronously prepare wasm: "+bs),To(bs)})}var eo={a:Bl};if(as||(No++,Nr.monitorRunDependencies&&Nr.monitorRunDependencies(No)),Nr.instantiateWasm)try{return Nr.instantiateWasm(eo,As)}catch(vo){return fs("Module.instantiateWasm callback failed with error: "+vo),!1}(vs||typeof WebAssembly.instantiateStreaming!="function"||Wo()||go.startsWith("file://")||ns||typeof fetch!="function"?zs(Ds):fetch(go,{credentials:"same-origin"}).then(function(vo){return WebAssembly.instantiateStreaming(vo,eo).then(Ds,function(bs){return fs("wasm streaming compile failed: "+bs),fs("falling back to ArrayBuffer instantiation"),zs(Ds)})})).catch(jr)})(),Nr.___wasm_call_ctors=function(){return(Nr.___wasm_call_ctors=Nr.asm._).apply(null,arguments)},Nr._OrtInit=function(){return(Nr._OrtInit=Nr.asm.$).apply(null,arguments)},Nr._OrtCreateSessionOptions=function(){return(Nr._OrtCreateSessionOptions=Nr.asm.aa).apply(null,arguments)},Nr._OrtAppendExecutionProvider=function(){return(Nr._OrtAppendExecutionProvider=Nr.asm.ba).apply(null,arguments)},Nr._OrtAddSessionConfigEntry=function(){return(Nr._OrtAddSessionConfigEntry=Nr.asm.ca).apply(null,arguments)},Nr._OrtReleaseSessionOptions=function(){return(Nr._OrtReleaseSessionOptions=Nr.asm.da).apply(null,arguments)},Nr._OrtCreateSession=function(){return(Nr._OrtCreateSession=Nr.asm.ea).apply(null,arguments)},Nr._OrtReleaseSession=function(){return(Nr._OrtReleaseSession=Nr.asm.fa).apply(null,arguments)},Nr._OrtGetInputCount=function(){return(Nr._OrtGetInputCount=Nr.asm.ga).apply(null,arguments)},Nr._OrtGetOutputCount=function(){return(Nr._OrtGetOutputCount=Nr.asm.ha).apply(null,arguments)},Nr._OrtGetInputName=function(){return(Nr._OrtGetInputName=Nr.asm.ia).apply(null,arguments)},Nr._OrtGetOutputName=function(){return(Nr._OrtGetOutputName=Nr.asm.ja).apply(null,arguments)},Nr._OrtFree=function(){return(Nr._OrtFree=Nr.asm.ka).apply(null,arguments)},Nr._OrtCreateTensor=function(){return(Nr._OrtCreateTensor=Nr.asm.la).apply(null,arguments)},Nr._OrtGetTensorData=function(){return(Nr._OrtGetTensorData=Nr.asm.ma).apply(null,arguments)},Nr._OrtReleaseTensor=function(){return(Nr._OrtReleaseTensor=Nr.asm.na).apply(null,arguments)},Nr._OrtCreateRunOptions=function(){return(Nr._OrtCreateRunOptions=Nr.asm.oa).apply(null,arguments)},Nr._OrtAddRunConfigEntry=function(){return(Nr._OrtAddRunConfigEntry=Nr.asm.pa).apply(null,arguments)},Nr._OrtReleaseRunOptions=function(){return(Nr._OrtReleaseRunOptions=Nr.asm.qa).apply(null,arguments)},Nr._OrtRun=function(){return(Nr._OrtRun=Nr.asm.ra).apply(null,arguments)},Nr._OrtEndProfiling=function(){return(Nr._OrtEndProfiling=Nr.asm.sa).apply(null,arguments)};var Nu=Nr._pthread_self=function(){return(Nu=Nr._pthread_self=Nr.asm.ta).apply(null,arguments)},pp=Nr._malloc=function(){return(pp=Nr._malloc=Nr.asm.ua).apply(null,arguments)};Nr._free=function(){return(Nr._free=Nr.asm.va).apply(null,arguments)},Nr.__emscripten_tls_init=function(){return(Nr.__emscripten_tls_init=Nr.asm.wa).apply(null,arguments)};var mp=Nr.__emscripten_thread_init=function(){return(mp=Nr.__emscripten_thread_init=Nr.asm.xa).apply(null,arguments)};Nr.__emscripten_thread_crashed=function(){return(Nr.__emscripten_thread_crashed=Nr.asm.ya).apply(null,arguments)};var Fu,Pp=Nr._emscripten_run_in_main_runtime_thread_js=function(){return(Pp=Nr._emscripten_run_in_main_runtime_thread_js=Nr.asm.Aa).apply(null,arguments)},tu=Nr.__emscripten_proxy_execute_task_queue=function(){return(tu=Nr.__emscripten_proxy_execute_task_queue=Nr.asm.Ba).apply(null,arguments)},gp=Nr.__emscripten_thread_free_data=function(){return(gp=Nr.__emscripten_thread_free_data=Nr.asm.Ca).apply(null,arguments)},iu=Nr.__emscripten_thread_exit=function(){return(iu=Nr.__emscripten_thread_exit=Nr.asm.Da).apply(null,arguments)},yp=Nr._emscripten_stack_set_limits=function(){return(yp=Nr._emscripten_stack_set_limits=Nr.asm.Ea).apply(null,arguments)},Ju=Nr.stackSave=function(){return(Ju=Nr.stackSave=Nr.asm.Fa).apply(null,arguments)},Nl=Nr.stackRestore=function(){return(Nl=Nr.stackRestore=Nr.asm.Ga).apply(null,arguments)},zl=Nr.stackAlloc=function(){return(zl=Nr.stackAlloc=Nr.asm.Ha).apply(null,arguments)};function Eu(){function As(){if(!Fu&&(Fu=!0,Nr.calledRun=!0,!Xs)&&(as||Bs(no),Dr(Nr),Nr.onRuntimeInitialized&&Nr.onRuntimeInitialized(),!as)){if(Nr.postRun)for(typeof Nr.postRun=="function"&&(Nr.postRun=[Nr.postRun]);Nr.postRun.length;){var Ds=Nr.postRun.shift();Ro.unshift(Ds)}Bs(Ro)}}if(!(0<No))if(as)Dr(Nr),as||Bs(no),postMessage({cmd:"loaded"});else{if(Nr.preRun)for(typeof Nr.preRun=="function"&&(Nr.preRun=[Nr.preRun]);Nr.preRun.length;)ro();Bs(to),0<No||(Nr.setStatus?(Nr.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Nr.setStatus("")},1),As()},1)):As())}}if(Nr.___cxa_is_pointer_type=function(){return(Nr.___cxa_is_pointer_type=Nr.asm.Ia).apply(null,arguments)},Nr.UTF8ToString=bo,Nr.stringToUTF8=function(As,Ds,zs){return wo(As,Fr(),Ds,zs)},Nr.lengthBytesUTF8=Co,Nr.keepRuntimeAlive=function(){return ys},Nr.wasmMemory=ks,Nr.stackSave=Ju,Nr.stackRestore=Nl,Nr.stackAlloc=zl,Nr.ExitStatus=Il,Nr.PThread=Vo,Do=function As(){Fu||Eu(),Fu||(Do=As)},Nr.preInit)for(typeof Nr.preInit=="function"&&(Nr.preInit=[Nr.preInit]);0<Nr.preInit.length;)Nr.preInit.pop()();return Eu(),Lr.ready});_r.exports=Pr},932:(_r,Tr,Rr)=>{var Ar,Pr=(Ar=(Ar=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(Lr){var Mr,Fr,zr;Lr=Lr||{},Mr||(Mr=Lr!==void 0?Lr:{}),Mr.ready=new Promise(function(Bs,Ws){Fr=Bs,zr=Ws});var Ur,Vr,Nr,Dr,jr,Gr,Wr=Object.assign({},Mr),qr="./this.program",Kr=(Bs,Ws)=>{throw Ws},Xr=typeof window=="object",Zr=typeof importScripts=="function",Jr=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_i="";Jr?(_i=Zr?Rr(908).dirname(_i)+"/":"//",Gr=()=>{jr||(Dr=Rr(1384),jr=Rr(908))},Ur=function(Bs,Ws){return Gr(),Bs=jr.normalize(Bs),Dr.readFileSync(Bs,Ws?void 0:"utf8")},Nr=Bs=>((Bs=Ur(Bs,!0)).buffer||(Bs=new Uint8Array(Bs)),Bs),Vr=(Bs,Ws,ms)=>{Gr(),Bs=jr.normalize(Bs),Dr.readFile(Bs,function(ps,Ps){ps?ms(ps):Ws(Ps.buffer)})},1<process.argv.length&&(qr=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Bs){if(!(Bs instanceof Is))throw Bs}),process.on("unhandledRejection",function(Bs){throw Bs}),Kr=(Bs,Ws)=>{if(ns)throw process.exitCode=Bs,Ws;Ws instanceof Is||rs("exiting due to exception: "+Ws),process.exit(Bs)},Mr.inspect=function(){return"[Emscripten Module object]"}):(Xr||Zr)&&(Zr?_i=self.location.href:typeof document<"u"&&document.currentScript&&(_i=document.currentScript.src),Ar&&(_i=Ar),_i=_i.indexOf("blob:")!==0?_i.substr(0,_i.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Ur=Bs=>{var Ws=new XMLHttpRequest;return Ws.open("GET",Bs,!1),Ws.send(null),Ws.responseText},Zr&&(Nr=Bs=>{var Ws=new XMLHttpRequest;return Ws.open("GET",Bs,!1),Ws.responseType="arraybuffer",Ws.send(null),new Uint8Array(Ws.response)}),Vr=(Bs,Ws,ms)=>{var ps=new XMLHttpRequest;ps.open("GET",Bs,!0),ps.responseType="arraybuffer",ps.onload=()=>{ps.status==200||ps.status==0&&ps.response?Ws(ps.response):ms()},ps.onerror=ms,ps.send(null)});var es,ts=Mr.print||console.log.bind(console),rs=Mr.printErr||console.warn.bind(console);Object.assign(Mr,Wr),Wr=null,Mr.thisProgram&&(qr=Mr.thisProgram),Mr.quit&&(Kr=Mr.quit),Mr.wasmBinary&&(es=Mr.wasmBinary);var ns=Mr.noExitRuntime||!0;typeof WebAssembly!="object"&&bo("no native wasm support detected");var as,ls,us,xs,Ts,vs,gs=!1,fs=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ys(Bs,Ws,ms){var ps=(Ws>>>=0)+ms;for(ms=Ws;Bs[ms]&&!(ms>=ps);)++ms;if(16<ms-Ws&&Bs.buffer&&fs)return fs.decode(Bs.subarray(Ws,ms));for(ps="";Ws<ms;){var Ps=Bs[Ws++];if(128&Ps){var Ls=63&Bs[Ws++];if((224&Ps)==192)ps+=String.fromCharCode((31&Ps)<<6|Ls);else{var Zs=63&Bs[Ws++];65536>(Ps=(240&Ps)==224?(15&Ps)<<12|Ls<<6|Zs:(7&Ps)<<18|Ls<<12|Zs<<6|63&Bs[Ws++])?ps+=String.fromCharCode(Ps):(Ps-=65536,ps+=String.fromCharCode(55296|Ps>>10,56320|1023&Ps))}}else ps+=String.fromCharCode(Ps)}return ps}function ks(Bs,Ws){return(Bs>>>=0)?ys(xs,Bs,Ws):""}function Fs(Bs,Ws,ms,ps){if(!(0<ps))return 0;var Ps=ms>>>=0;ps=ms+ps-1;for(var Ls=0;Ls<Bs.length;++Ls){var Zs=Bs.charCodeAt(Ls);if(55296<=Zs&&57343>=Zs&&(Zs=65536+((1023&Zs)<<10)|1023&Bs.charCodeAt(++Ls)),127>=Zs){if(ms>=ps)break;Ws[ms++>>>0]=Zs}else{if(2047>=Zs){if(ms+1>=ps)break;Ws[ms++>>>0]=192|Zs>>6}else{if(65535>=Zs){if(ms+2>=ps)break;Ws[ms++>>>0]=224|Zs>>12}else{if(ms+3>=ps)break;Ws[ms++>>>0]=240|Zs>>18,Ws[ms++>>>0]=128|Zs>>12&63}Ws[ms++>>>0]=128|Zs>>6&63}Ws[ms++>>>0]=128|63&Zs}}return Ws[ms>>>0]=0,ms-Ps}function Us(Bs){for(var Ws=0,ms=0;ms<Bs.length;++ms){var ps=Bs.charCodeAt(ms);127>=ps?Ws++:2047>=ps?Ws+=2:55296<=ps&&57343>=ps?(Ws+=4,++ms):Ws+=3}return Ws}function Vs(){var Bs=as.buffer;ls=Bs,Mr.HEAP8=us=new Int8Array(Bs),Mr.HEAP16=new Int16Array(Bs),Mr.HEAP32=Ts=new Int32Array(Bs),Mr.HEAPU8=xs=new Uint8Array(Bs),Mr.HEAPU16=new Uint16Array(Bs),Mr.HEAPU32=vs=new Uint32Array(Bs),Mr.HEAPF32=new Float32Array(Bs),Mr.HEAPF64=new Float64Array(Bs)}var ao=[],qs=[],Qs=[];function mo(){var Bs=Mr.preRun.shift();ao.unshift(Bs)}var Xs,so=0,uo=null;function bo(Bs){throw Mr.onAbort&&Mr.onAbort(Bs),rs(Bs="Aborted("+Bs+")"),gs=!0,Bs=new WebAssembly.RuntimeError(Bs+". Build with -sASSERTIONS for more info."),zr(Bs),Bs}function wo(){return Xs.startsWith("data:application/octet-stream;base64,")}if(Xs="ort-wasm.wasm",!wo()){var Co=Xs;Xs=Mr.locateFile?Mr.locateFile(Co,_i):_i+Co}function ds(){var Bs=Xs;try{if(Bs==Xs&&es)return new Uint8Array(es);if(Nr)return Nr(Bs);throw"both async and sync fetching of the wasm failed"}catch(Ws){bo(Ws)}}function Is(Bs){this.name="ExitStatus",this.message="Program terminated with exit("+Bs+")",this.status=Bs}function Gs(Bs){for(;0<Bs.length;)Bs.shift()(Mr)}function to(Bs){this.sa=Bs-24,this.Ia=function(Ws){vs[this.sa+4>>2>>>0]=Ws},this.Ba=function(Ws){vs[this.sa+8>>2>>>0]=Ws},this.Ga=function(){Ts[this.sa>>2>>>0]=0},this.Aa=function(){us[this.sa+12>>0>>>0]=0},this.Ha=function(){us[this.sa+13>>0>>>0]=0},this.ya=function(Ws,ms){this.za(),this.Ia(Ws),this.Ba(ms),this.Ga(),this.Aa(),this.Ha()},this.za=function(){vs[this.sa+16>>2>>>0]=0}}function no(Bs){var Ws=Us(Bs)+1,ms=Il(Ws);return ms&&Fs(Bs,us,ms,Ws),ms}var Ro={};function ro(){if(!go){var Bs,Ws={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:qr||"./this.program"};for(Bs in Ro)Ro[Bs]===void 0?delete Ws[Bs]:Ws[Bs]=Ro[Bs];var ms=[];for(Bs in Ws)ms.push(Bs+"="+Ws[Bs]);go=ms}return go}var go,No=[null,[],[]];function Do(Bs){return Bs%4==0&&(Bs%100!=0||Bs%400==0)}var To=[31,29,31,30,31,30,31,31,30,31,30,31],Wo=[31,28,31,30,31,30,31,31,30,31,30,31];function ko(Bs,Ws,ms,ps){function Ps(Ks,$o,So){for(Ks=typeof Ks=="number"?Ks.toString():Ks||"";Ks.length<$o;)Ks=So[0]+Ks;return Ks}function Ls(Ks,$o){return Ps(Ks,$o,"0")}function Zs(Ks,$o){function So(xu){return 0>xu?-1:0<xu?1:0}var Yl;return(Yl=So(Ks.getFullYear()-$o.getFullYear()))===0&&(Yl=So(Ks.getMonth()-$o.getMonth()))===0&&(Yl=So(Ks.getDate()-$o.getDate())),Yl}function Eo(Ks){switch(Ks.getDay()){case 0:return new Date(Ks.getFullYear()-1,11,29);case 1:return Ks;case 2:return new Date(Ks.getFullYear(),0,3);case 3:return new Date(Ks.getFullYear(),0,2);case 4:return new Date(Ks.getFullYear(),0,1);case 5:return new Date(Ks.getFullYear()-1,11,31);case 6:return new Date(Ks.getFullYear()-1,11,30)}}function yo(Ks){var $o=Ks.qa;for(Ks=new Date(new Date(Ks.ra+1900,0,1).getTime());0<$o;){var So=Ks.getMonth(),Yl=(Do(Ks.getFullYear())?To:Wo)[So];if(!($o>Yl-Ks.getDate())){Ks.setDate(Ks.getDate()+$o);break}$o-=Yl-Ks.getDate()+1,Ks.setDate(1),11>So?Ks.setMonth(So+1):(Ks.setMonth(0),Ks.setFullYear(Ks.getFullYear()+1))}return So=new Date(Ks.getFullYear()+1,0,4),$o=Eo(new Date(Ks.getFullYear(),0,4)),So=Eo(So),0>=Zs($o,Ks)?0>=Zs(So,Ks)?Ks.getFullYear()+1:Ks.getFullYear():Ks.getFullYear()-1}var io=Ts[ps+40>>2>>>0];for(var Lo in ps={Ea:Ts[ps>>2>>>0],Da:Ts[ps+4>>2>>>0],ta:Ts[ps+8>>2>>>0],va:Ts[ps+12>>2>>>0],ua:Ts[ps+16>>2>>>0],ra:Ts[ps+20>>2>>>0],la:Ts[ps+24>>2>>>0],qa:Ts[ps+28>>2>>>0],Ja:Ts[ps+32>>2>>>0],Ca:Ts[ps+36>>2>>>0],Fa:io?ks(io):""},ms=ks(ms),io={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})ms=ms.replace(new RegExp(Lo,"g"),io[Lo]);var Yo="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Go="January February March April May June July August September October November December".split(" ");for(Lo in io={"%a":function(Ks){return Yo[Ks.la].substring(0,3)},"%A":function(Ks){return Yo[Ks.la]},"%b":function(Ks){return Go[Ks.ua].substring(0,3)},"%B":function(Ks){return Go[Ks.ua]},"%C":function(Ks){return Ls((Ks.ra+1900)/100|0,2)},"%d":function(Ks){return Ls(Ks.va,2)},"%e":function(Ks){return Ps(Ks.va,2," ")},"%g":function(Ks){return yo(Ks).toString().substring(2)},"%G":function(Ks){return yo(Ks)},"%H":function(Ks){return Ls(Ks.ta,2)},"%I":function(Ks){return(Ks=Ks.ta)==0?Ks=12:12<Ks&&(Ks-=12),Ls(Ks,2)},"%j":function(Ks){for(var $o=0,So=0;So<=Ks.ua-1;$o+=(Do(Ks.ra+1900)?To:Wo)[So++]);return Ls(Ks.va+$o,3)},"%m":function(Ks){return Ls(Ks.ua+1,2)},"%M":function(Ks){return Ls(Ks.Da,2)},"%n":function(){return`
`},"%p":function(Ks){return 0<=Ks.ta&&12>Ks.ta?"AM":"PM"},"%S":function(Ks){return Ls(Ks.Ea,2)},"%t":function(){return"	"},"%u":function(Ks){return Ks.la||7},"%U":function(Ks){return Ls(Math.floor((Ks.qa+7-Ks.la)/7),2)},"%V":function(Ks){var $o=Math.floor((Ks.qa+7-(Ks.la+6)%7)/7);if(2>=(Ks.la+371-Ks.qa-2)%7&&$o++,$o)$o==53&&((So=(Ks.la+371-Ks.qa)%7)==4||So==3&&Do(Ks.ra)||($o=1));else{$o=52;var So=(Ks.la+7-Ks.qa-1)%7;(So==4||So==5&&Do(Ks.ra%400-1))&&$o++}return Ls($o,2)},"%w":function(Ks){return Ks.la},"%W":function(Ks){return Ls(Math.floor((Ks.qa+7-(Ks.la+6)%7)/7),2)},"%y":function(Ks){return(Ks.ra+1900).toString().substring(2)},"%Y":function(Ks){return Ks.ra+1900},"%z":function(Ks){var $o=0<=(Ks=Ks.Ca);return Ks=Math.abs(Ks)/60,($o?"+":"-")+("0000"+(Ks/60*100+Ks%60)).slice(-4)},"%Z":function(Ks){return Ks.Fa},"%%":function(){return"%"}},ms=ms.replace(/%%/g,"\0\0"),io)ms.includes(Lo)&&(ms=ms.replace(new RegExp(Lo,"g"),io[Lo](ps)));return Lo=function(Ks){var $o=Array(Us(Ks)+1);return Fs(Ks,$o,0,$o.length),$o}(ms=ms.replace(/\0\0/g,"%")),Lo.length>Ws?0:(us.set(Lo,Bs>>>0),Lo.length-1)}var $a={a:function(Bs){return Il(Bs+24)+24},b:function(Bs,Ws,ms){throw new to(Bs).ya(Ws,ms),Bs},g:function(){return 0},I:function(){},w:function(){},y:function(){},K:function(){return 0},G:function(){},C:function(){},F:function(){},k:function(){},x:function(){},u:function(){},H:function(){},v:function(){},n:function(){},p:function(){bo("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},o:function(){bo("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(){return Date.now()},L:function(){return!0},M:function(Bs,Ws){Bs=new Date(1e3*(vs[Bs>>>2]+4294967296*Ts[Bs+4>>>2])),Ts[Ws>>2>>>0]=Bs.getUTCSeconds(),Ts[Ws+4>>2>>>0]=Bs.getUTCMinutes(),Ts[Ws+8>>2>>>0]=Bs.getUTCHours(),Ts[Ws+12>>2>>>0]=Bs.getUTCDate(),Ts[Ws+16>>2>>>0]=Bs.getUTCMonth(),Ts[Ws+20>>2>>>0]=Bs.getUTCFullYear()-1900,Ts[Ws+24>>2>>>0]=Bs.getUTCDay(),Ts[Ws+28>>2>>>0]=(Bs.getTime()-Date.UTC(Bs.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},N:function(Bs,Ws){Bs=new Date(1e3*(vs[Bs>>>2]+4294967296*Ts[Bs+4>>>2])),Ts[Ws>>2>>>0]=Bs.getSeconds(),Ts[Ws+4>>2>>>0]=Bs.getMinutes(),Ts[Ws+8>>2>>>0]=Bs.getHours(),Ts[Ws+12>>2>>>0]=Bs.getDate(),Ts[Ws+16>>2>>>0]=Bs.getMonth(),Ts[Ws+20>>2>>>0]=Bs.getFullYear()-1900,Ts[Ws+24>>2>>>0]=Bs.getDay();var ms=new Date(Bs.getFullYear(),0,1);Ts[Ws+28>>2>>>0]=(Bs.getTime()-ms.getTime())/864e5|0,Ts[Ws+36>>2>>>0]=-60*Bs.getTimezoneOffset();var ps=new Date(Bs.getFullYear(),6,1).getTimezoneOffset();ms=ms.getTimezoneOffset(),Ts[Ws+32>>2>>>0]=0|(ps!=ms&&Bs.getTimezoneOffset()==Math.min(ms,ps))},O:function(Bs){var Ws=new Date(Ts[Bs+20>>2>>>0]+1900,Ts[Bs+16>>2>>>0],Ts[Bs+12>>2>>>0],Ts[Bs+8>>2>>>0],Ts[Bs+4>>2>>>0],Ts[Bs>>2>>>0],0),ms=Ts[Bs+32>>2>>>0],ps=Ws.getTimezoneOffset(),Ps=new Date(Ws.getFullYear(),0,1),Ls=new Date(Ws.getFullYear(),6,1).getTimezoneOffset(),Zs=Ps.getTimezoneOffset(),Eo=Math.min(Zs,Ls);return 0>ms?Ts[Bs+32>>2>>>0]=+(Ls!=Zs&&Eo==ps):0<ms!=(Eo==ps)&&(Ls=Math.max(Zs,Ls),Ws.setTime(Ws.getTime()+6e4*((0<ms?Eo:Ls)-ps))),Ts[Bs+24>>2>>>0]=Ws.getDay(),Ts[Bs+28>>2>>>0]=(Ws.getTime()-Ps.getTime())/864e5|0,Ts[Bs>>2>>>0]=Ws.getSeconds(),Ts[Bs+4>>2>>>0]=Ws.getMinutes(),Ts[Bs+8>>2>>>0]=Ws.getHours(),Ts[Bs+12>>2>>>0]=Ws.getDate(),Ts[Bs+16>>2>>>0]=Ws.getMonth(),Ws.getTime()/1e3|0},z:function(){return-52},B:function(){},m:function Bs(Ws,ms,ps){Bs.xa||(Bs.xa=!0,function(Ps,Ls,Zs){function Eo(Go){return(Go=Go.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Go[1]:"GMT"}var yo=new Date().getFullYear(),io=new Date(yo,0,1),Lo=new Date(yo,6,1);yo=io.getTimezoneOffset();var Yo=Lo.getTimezoneOffset();Ts[Ps>>2>>>0]=60*Math.max(yo,Yo),Ts[Ls>>2>>>0]=+(yo!=Yo),Ps=Eo(io),Ls=Eo(Lo),Ps=no(Ps),Ls=no(Ls),Yo<yo?(vs[Zs>>2>>>0]=Ps,vs[Zs+4>>2>>>0]=Ls):(vs[Zs>>2>>>0]=Ls,vs[Zs+4>>2>>>0]=Ps)}(Ws,ms,ps))},d:function(){bo("")},t:function(){return 4294901760},h:Jr?()=>{var Bs=process.hrtime();return 1e3*Bs[0]+Bs[1]/1e6}:()=>performance.now(),J:function(Bs,Ws,ms){xs.copyWithin(Bs>>>0,Ws>>>0,Ws+ms>>>0)},f:function(Bs){var Ws=xs.length;if(4294901760<(Bs>>>=0))return!1;for(var ms=1;4>=ms;ms*=2){var ps=Ws*(1+.2/ms);ps=Math.min(ps,Bs+100663296);var Ps=Math;ps=Math.max(Bs,ps),Ps=Ps.min.call(Ps,4294901760,ps+(65536-ps%65536)%65536);e:{try{as.grow(Ps-ls.byteLength+65535>>>16),Vs();var Ls=1;break e}catch{}Ls=void 0}if(Ls)return!0}return!1},D:function(Bs,Ws){var ms=0;return ro().forEach(function(ps,Ps){var Ls=Ws+ms;for(Ps=vs[Bs+4*Ps>>2>>>0]=Ls,Ls=0;Ls<ps.length;++Ls)us[Ps++>>0>>>0]=ps.charCodeAt(Ls);us[Ps>>0>>>0]=0,ms+=ps.length+1}),0},E:function(Bs,Ws){var ms=ro();vs[Bs>>2>>>0]=ms.length;var ps=0;return ms.forEach(function(Ps){ps+=Ps.length+1}),vs[Ws>>2>>>0]=ps,0},r:function(Bs){ns||(Mr.onExit&&Mr.onExit(Bs),gs=!0),Kr(Bs,new Is(Bs))},e:function(){return 52},j:function(){return 52},q:function(){return 70},i:function(Bs,Ws,ms,ps){for(var Ps=0,Ls=0;Ls<ms;Ls++){var Zs=vs[Ws>>2>>>0],Eo=vs[Ws+4>>2>>>0];Ws+=8;for(var yo=0;yo<Eo;yo++){var io=xs[Zs+yo>>>0],Lo=No[Bs];io===0||io===10?((Bs===1?ts:rs)(ys(Lo,0)),Lo.length=0):Lo.push(io)}Ps+=Eo}return vs[ps>>2>>>0]=Ps,0},s:function Bs(Ws,ms){Bs.wa||(Bs.wa=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Ps=new Uint8Array(1);return()=>(crypto.getRandomValues(Ps),Ps[0])}if(Jr)try{var Ls=Rr(760);return()=>Ls.randomBytes(1)[0]}catch{}return()=>bo("randomDevice")}());for(var ps=0;ps<ms;ps++)us[Ws+ps>>0>>>0]=Bs.wa();return 0},A:ko,c:function(Bs,Ws,ms,ps){return ko(Bs,Ws,ms,ps)}};(function(){function Bs(Ps){Mr.asm=Ps.exports,as=Mr.asm.P,Vs(),qs.unshift(Mr.asm.Q),so--,Mr.monitorRunDependencies&&Mr.monitorRunDependencies(so),so==0&&uo&&(Ps=uo,uo=null,Ps())}function Ws(Ps){Bs(Ps.instance)}function ms(Ps){return function(){if(!es&&(Xr||Zr)){if(typeof fetch=="function"&&!Xs.startsWith("file://"))return fetch(Xs,{credentials:"same-origin"}).then(function(Ls){if(!Ls.ok)throw"failed to load wasm binary file at '"+Xs+"'";return Ls.arrayBuffer()}).catch(function(){return ds()});if(Vr)return new Promise(function(Ls,Zs){Vr(Xs,function(Eo){Ls(new Uint8Array(Eo))},Zs)})}return Promise.resolve().then(function(){return ds()})}().then(function(Ls){return WebAssembly.instantiate(Ls,ps)}).then(function(Ls){return Ls}).then(Ps,function(Ls){rs("failed to asynchronously prepare wasm: "+Ls),bo(Ls)})}var ps={a:$a};if(so++,Mr.monitorRunDependencies&&Mr.monitorRunDependencies(so),Mr.instantiateWasm)try{return Mr.instantiateWasm(ps,Bs)}catch(Ps){return rs("Module.instantiateWasm callback failed with error: "+Ps),!1}(es||typeof WebAssembly.instantiateStreaming!="function"||wo()||Xs.startsWith("file://")||Jr||typeof fetch!="function"?ms(Ws):fetch(Xs,{credentials:"same-origin"}).then(function(Ps){return WebAssembly.instantiateStreaming(Ps,ps).then(Ws,function(Ls){return rs("wasm streaming compile failed: "+Ls),rs("falling back to ArrayBuffer instantiation"),ms(Ws)})})).catch(zr)})(),Mr.___wasm_call_ctors=function(){return(Mr.___wasm_call_ctors=Mr.asm.Q).apply(null,arguments)},Mr._OrtInit=function(){return(Mr._OrtInit=Mr.asm.R).apply(null,arguments)},Mr._OrtCreateSessionOptions=function(){return(Mr._OrtCreateSessionOptions=Mr.asm.S).apply(null,arguments)},Mr._OrtAppendExecutionProvider=function(){return(Mr._OrtAppendExecutionProvider=Mr.asm.T).apply(null,arguments)},Mr._OrtAddSessionConfigEntry=function(){return(Mr._OrtAddSessionConfigEntry=Mr.asm.U).apply(null,arguments)},Mr._OrtReleaseSessionOptions=function(){return(Mr._OrtReleaseSessionOptions=Mr.asm.V).apply(null,arguments)},Mr._OrtCreateSession=function(){return(Mr._OrtCreateSession=Mr.asm.W).apply(null,arguments)},Mr._OrtReleaseSession=function(){return(Mr._OrtReleaseSession=Mr.asm.X).apply(null,arguments)},Mr._OrtGetInputCount=function(){return(Mr._OrtGetInputCount=Mr.asm.Y).apply(null,arguments)},Mr._OrtGetOutputCount=function(){return(Mr._OrtGetOutputCount=Mr.asm.Z).apply(null,arguments)},Mr._OrtGetInputName=function(){return(Mr._OrtGetInputName=Mr.asm._).apply(null,arguments)},Mr._OrtGetOutputName=function(){return(Mr._OrtGetOutputName=Mr.asm.$).apply(null,arguments)},Mr._OrtFree=function(){return(Mr._OrtFree=Mr.asm.aa).apply(null,arguments)},Mr._OrtCreateTensor=function(){return(Mr._OrtCreateTensor=Mr.asm.ba).apply(null,arguments)},Mr._OrtGetTensorData=function(){return(Mr._OrtGetTensorData=Mr.asm.ca).apply(null,arguments)},Mr._OrtReleaseTensor=function(){return(Mr._OrtReleaseTensor=Mr.asm.da).apply(null,arguments)},Mr._OrtCreateRunOptions=function(){return(Mr._OrtCreateRunOptions=Mr.asm.ea).apply(null,arguments)},Mr._OrtAddRunConfigEntry=function(){return(Mr._OrtAddRunConfigEntry=Mr.asm.fa).apply(null,arguments)},Mr._OrtReleaseRunOptions=function(){return(Mr._OrtReleaseRunOptions=Mr.asm.ga).apply(null,arguments)},Mr._OrtRun=function(){return(Mr._OrtRun=Mr.asm.ha).apply(null,arguments)},Mr._OrtEndProfiling=function(){return(Mr._OrtEndProfiling=Mr.asm.ia).apply(null,arguments)};var Il=Mr._malloc=function(){return(Il=Mr._malloc=Mr.asm.ja).apply(null,arguments)};Mr._free=function(){return(Mr._free=Mr.asm.ka).apply(null,arguments)};var eu,Fl=Mr.stackSave=function(){return(Fl=Mr.stackSave=Mr.asm.ma).apply(null,arguments)},Kl=Mr.stackRestore=function(){return(Kl=Mr.stackRestore=Mr.asm.na).apply(null,arguments)},cu=Mr.stackAlloc=function(){return(cu=Mr.stackAlloc=Mr.asm.oa).apply(null,arguments)};function Vo(){function Bs(){if(!eu&&(eu=!0,Mr.calledRun=!0,!gs)){if(Gs(qs),Fr(Mr),Mr.onRuntimeInitialized&&Mr.onRuntimeInitialized(),Mr.postRun)for(typeof Mr.postRun=="function"&&(Mr.postRun=[Mr.postRun]);Mr.postRun.length;){var Ws=Mr.postRun.shift();Qs.unshift(Ws)}Gs(Qs)}}if(!(0<so)){if(Mr.preRun)for(typeof Mr.preRun=="function"&&(Mr.preRun=[Mr.preRun]);Mr.preRun.length;)mo();Gs(ao),0<so||(Mr.setStatus?(Mr.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Mr.setStatus("")},1),Bs()},1)):Bs())}}if(Mr.___cxa_is_pointer_type=function(){return(Mr.___cxa_is_pointer_type=Mr.asm.pa).apply(null,arguments)},Mr.UTF8ToString=ks,Mr.stringToUTF8=function(Bs,Ws,ms){return Fs(Bs,xs,Ws,ms)},Mr.lengthBytesUTF8=Us,Mr.stackSave=Fl,Mr.stackRestore=Kl,Mr.stackAlloc=cu,uo=function Bs(){eu||Vo(),eu||(uo=Bs)},Mr.preInit)for(typeof Mr.preInit=="function"&&(Mr.preInit=[Mr.preInit]);0<Mr.preInit.length;)Mr.preInit.pop()();return Vo(),Lr.ready});_r.exports=Pr},4537:_r=>{_r.exports=function(Tr,Rr){for(var Ar=new Array(arguments.length-1),Pr=0,Lr=2,Mr=!0;Lr<arguments.length;)Ar[Pr++]=arguments[Lr++];return new Promise(function(Fr,zr){Ar[Pr]=function(Ur){if(Mr)if(Mr=!1,Ur)zr(Ur);else{for(var Vr=new Array(arguments.length-1),Nr=0;Nr<Vr.length;)Vr[Nr++]=arguments[Nr];Fr.apply(null,Vr)}};try{Tr.apply(Rr||null,Ar)}catch(Ur){Mr&&(Mr=!1,zr(Ur))}})}},7419:(_r,Tr)=>{var Rr=Tr;Rr.length=function(Fr){var zr=Fr.length;if(!zr)return 0;for(var Ur=0;--zr%4>1&&Fr.charAt(zr)==="=";)++Ur;return Math.ceil(3*Fr.length)/4-Ur};for(var Ar=new Array(64),Pr=new Array(123),Lr=0;Lr<64;)Pr[Ar[Lr]=Lr<26?Lr+65:Lr<52?Lr+71:Lr<62?Lr-4:Lr-59|43]=Lr++;Rr.encode=function(Fr,zr,Ur){for(var Vr,Nr=null,Dr=[],jr=0,Gr=0;zr<Ur;){var Wr=Fr[zr++];switch(Gr){case 0:Dr[jr++]=Ar[Wr>>2],Vr=(3&Wr)<<4,Gr=1;break;case 1:Dr[jr++]=Ar[Vr|Wr>>4],Vr=(15&Wr)<<2,Gr=2;break;case 2:Dr[jr++]=Ar[Vr|Wr>>6],Dr[jr++]=Ar[63&Wr],Gr=0}jr>8191&&((Nr||(Nr=[])).push(String.fromCharCode.apply(String,Dr)),jr=0)}return Gr&&(Dr[jr++]=Ar[Vr],Dr[jr++]=61,Gr===1&&(Dr[jr++]=61)),Nr?(jr&&Nr.push(String.fromCharCode.apply(String,Dr.slice(0,jr))),Nr.join("")):String.fromCharCode.apply(String,Dr.slice(0,jr))};var Mr="invalid encoding";Rr.decode=function(Fr,zr,Ur){for(var Vr,Nr=Ur,Dr=0,jr=0;jr<Fr.length;){var Gr=Fr.charCodeAt(jr++);if(Gr===61&&Dr>1)break;if((Gr=Pr[Gr])===void 0)throw Error(Mr);switch(Dr){case 0:Vr=Gr,Dr=1;break;case 1:zr[Ur++]=Vr<<2|(48&Gr)>>4,Vr=Gr,Dr=2;break;case 2:zr[Ur++]=(15&Vr)<<4|(60&Gr)>>2,Vr=Gr,Dr=3;break;case 3:zr[Ur++]=(3&Vr)<<6|Gr,Dr=0}}if(Dr===1)throw Error(Mr);return Ur-Nr},Rr.test=function(Fr){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Fr)}},9211:_r=>{function Tr(){this._listeners={}}_r.exports=Tr,Tr.prototype.on=function(Rr,Ar,Pr){return(this._listeners[Rr]||(this._listeners[Rr]=[])).push({fn:Ar,ctx:Pr||this}),this},Tr.prototype.off=function(Rr,Ar){if(Rr===void 0)this._listeners={};else if(Ar===void 0)this._listeners[Rr]=[];else for(var Pr=this._listeners[Rr],Lr=0;Lr<Pr.length;)Pr[Lr].fn===Ar?Pr.splice(Lr,1):++Lr;return this},Tr.prototype.emit=function(Rr){var Ar=this._listeners[Rr];if(Ar){for(var Pr=[],Lr=1;Lr<arguments.length;)Pr.push(arguments[Lr++]);for(Lr=0;Lr<Ar.length;)Ar[Lr].fn.apply(Ar[Lr++].ctx,Pr)}return this}},945:_r=>{function Tr(Mr){return typeof Float32Array<"u"?function(){var Fr=new Float32Array([-0]),zr=new Uint8Array(Fr.buffer),Ur=zr[3]===128;function Vr(Gr,Wr,qr){Fr[0]=Gr,Wr[qr]=zr[0],Wr[qr+1]=zr[1],Wr[qr+2]=zr[2],Wr[qr+3]=zr[3]}function Nr(Gr,Wr,qr){Fr[0]=Gr,Wr[qr]=zr[3],Wr[qr+1]=zr[2],Wr[qr+2]=zr[1],Wr[qr+3]=zr[0]}function Dr(Gr,Wr){return zr[0]=Gr[Wr],zr[1]=Gr[Wr+1],zr[2]=Gr[Wr+2],zr[3]=Gr[Wr+3],Fr[0]}function jr(Gr,Wr){return zr[3]=Gr[Wr],zr[2]=Gr[Wr+1],zr[1]=Gr[Wr+2],zr[0]=Gr[Wr+3],Fr[0]}Mr.writeFloatLE=Ur?Vr:Nr,Mr.writeFloatBE=Ur?Nr:Vr,Mr.readFloatLE=Ur?Dr:jr,Mr.readFloatBE=Ur?jr:Dr}():function(){function Fr(Ur,Vr,Nr,Dr){var jr=Vr<0?1:0;if(jr&&(Vr=-Vr),Vr===0)Ur(1/Vr>0?0:2147483648,Nr,Dr);else if(isNaN(Vr))Ur(2143289344,Nr,Dr);else if(Vr>34028234663852886e22)Ur((jr<<31|2139095040)>>>0,Nr,Dr);else if(Vr<11754943508222875e-54)Ur((jr<<31|Math.round(Vr/1401298464324817e-60))>>>0,Nr,Dr);else{var Gr=Math.floor(Math.log(Vr)/Math.LN2);Ur((jr<<31|Gr+127<<23|8388607&Math.round(Vr*Math.pow(2,-Gr)*8388608))>>>0,Nr,Dr)}}function zr(Ur,Vr,Nr){var Dr=Ur(Vr,Nr),jr=2*(Dr>>31)+1,Gr=Dr>>>23&255,Wr=8388607&Dr;return Gr===255?Wr?NaN:jr*(1/0):Gr===0?1401298464324817e-60*jr*Wr:jr*Math.pow(2,Gr-150)*(Wr+8388608)}Mr.writeFloatLE=Fr.bind(null,Rr),Mr.writeFloatBE=Fr.bind(null,Ar),Mr.readFloatLE=zr.bind(null,Pr),Mr.readFloatBE=zr.bind(null,Lr)}(),typeof Float64Array<"u"?function(){var Fr=new Float64Array([-0]),zr=new Uint8Array(Fr.buffer),Ur=zr[7]===128;function Vr(Gr,Wr,qr){Fr[0]=Gr,Wr[qr]=zr[0],Wr[qr+1]=zr[1],Wr[qr+2]=zr[2],Wr[qr+3]=zr[3],Wr[qr+4]=zr[4],Wr[qr+5]=zr[5],Wr[qr+6]=zr[6],Wr[qr+7]=zr[7]}function Nr(Gr,Wr,qr){Fr[0]=Gr,Wr[qr]=zr[7],Wr[qr+1]=zr[6],Wr[qr+2]=zr[5],Wr[qr+3]=zr[4],Wr[qr+4]=zr[3],Wr[qr+5]=zr[2],Wr[qr+6]=zr[1],Wr[qr+7]=zr[0]}function Dr(Gr,Wr){return zr[0]=Gr[Wr],zr[1]=Gr[Wr+1],zr[2]=Gr[Wr+2],zr[3]=Gr[Wr+3],zr[4]=Gr[Wr+4],zr[5]=Gr[Wr+5],zr[6]=Gr[Wr+6],zr[7]=Gr[Wr+7],Fr[0]}function jr(Gr,Wr){return zr[7]=Gr[Wr],zr[6]=Gr[Wr+1],zr[5]=Gr[Wr+2],zr[4]=Gr[Wr+3],zr[3]=Gr[Wr+4],zr[2]=Gr[Wr+5],zr[1]=Gr[Wr+6],zr[0]=Gr[Wr+7],Fr[0]}Mr.writeDoubleLE=Ur?Vr:Nr,Mr.writeDoubleBE=Ur?Nr:Vr,Mr.readDoubleLE=Ur?Dr:jr,Mr.readDoubleBE=Ur?jr:Dr}():function(){function Fr(Ur,Vr,Nr,Dr,jr,Gr){var Wr=Dr<0?1:0;if(Wr&&(Dr=-Dr),Dr===0)Ur(0,jr,Gr+Vr),Ur(1/Dr>0?0:2147483648,jr,Gr+Nr);else if(isNaN(Dr))Ur(0,jr,Gr+Vr),Ur(2146959360,jr,Gr+Nr);else if(Dr>17976931348623157e292)Ur(0,jr,Gr+Vr),Ur((Wr<<31|2146435072)>>>0,jr,Gr+Nr);else{var qr;if(Dr<22250738585072014e-324)Ur((qr=Dr/5e-324)>>>0,jr,Gr+Vr),Ur((Wr<<31|qr/4294967296)>>>0,jr,Gr+Nr);else{var Kr=Math.floor(Math.log(Dr)/Math.LN2);Kr===1024&&(Kr=1023),Ur(4503599627370496*(qr=Dr*Math.pow(2,-Kr))>>>0,jr,Gr+Vr),Ur((Wr<<31|Kr+1023<<20|1048576*qr&1048575)>>>0,jr,Gr+Nr)}}}function zr(Ur,Vr,Nr,Dr,jr){var Gr=Ur(Dr,jr+Vr),Wr=Ur(Dr,jr+Nr),qr=2*(Wr>>31)+1,Kr=Wr>>>20&2047,Xr=4294967296*(1048575&Wr)+Gr;return Kr===2047?Xr?NaN:qr*(1/0):Kr===0?5e-324*qr*Xr:qr*Math.pow(2,Kr-1075)*(Xr+4503599627370496)}Mr.writeDoubleLE=Fr.bind(null,Rr,0,4),Mr.writeDoubleBE=Fr.bind(null,Ar,4,0),Mr.readDoubleLE=zr.bind(null,Pr,0,4),Mr.readDoubleBE=zr.bind(null,Lr,4,0)}(),Mr}function Rr(Mr,Fr,zr){Fr[zr]=255&Mr,Fr[zr+1]=Mr>>>8&255,Fr[zr+2]=Mr>>>16&255,Fr[zr+3]=Mr>>>24}function Ar(Mr,Fr,zr){Fr[zr]=Mr>>>24,Fr[zr+1]=Mr>>>16&255,Fr[zr+2]=Mr>>>8&255,Fr[zr+3]=255&Mr}function Pr(Mr,Fr){return(Mr[Fr]|Mr[Fr+1]<<8|Mr[Fr+2]<<16|Mr[Fr+3]<<24)>>>0}function Lr(Mr,Fr){return(Mr[Fr]<<24|Mr[Fr+1]<<16|Mr[Fr+2]<<8|Mr[Fr+3])>>>0}_r.exports=Tr(Tr)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(_r){}return null}module.exports=inquire},6662:_r=>{_r.exports=function(Tr,Rr,Ar){var Pr=Ar||8192,Lr=Pr>>>1,Mr=null,Fr=Pr;return function(zr){if(zr<1||zr>Lr)return Tr(zr);Fr+zr>Pr&&(Mr=Tr(Pr),Fr=0);var Ur=Rr.call(Mr,Fr,Fr+=zr);return 7&Fr&&(Fr=1+(7|Fr)),Ur}}},4997:(_r,Tr)=>{var Rr=Tr;Rr.length=function(Ar){for(var Pr=0,Lr=0,Mr=0;Mr<Ar.length;++Mr)(Lr=Ar.charCodeAt(Mr))<128?Pr+=1:Lr<2048?Pr+=2:(64512&Lr)==55296&&(64512&Ar.charCodeAt(Mr+1))==56320?(++Mr,Pr+=4):Pr+=3;return Pr},Rr.read=function(Ar,Pr,Lr){if(Lr-Pr<1)return"";for(var Mr,Fr=null,zr=[],Ur=0;Pr<Lr;)(Mr=Ar[Pr++])<128?zr[Ur++]=Mr:Mr>191&&Mr<224?zr[Ur++]=(31&Mr)<<6|63&Ar[Pr++]:Mr>239&&Mr<365?(Mr=((7&Mr)<<18|(63&Ar[Pr++])<<12|(63&Ar[Pr++])<<6|63&Ar[Pr++])-65536,zr[Ur++]=55296+(Mr>>10),zr[Ur++]=56320+(1023&Mr)):zr[Ur++]=(15&Mr)<<12|(63&Ar[Pr++])<<6|63&Ar[Pr++],Ur>8191&&((Fr||(Fr=[])).push(String.fromCharCode.apply(String,zr)),Ur=0);return Fr?(Ur&&Fr.push(String.fromCharCode.apply(String,zr.slice(0,Ur))),Fr.join("")):String.fromCharCode.apply(String,zr.slice(0,Ur))},Rr.write=function(Ar,Pr,Lr){for(var Mr,Fr,zr=Lr,Ur=0;Ur<Ar.length;++Ur)(Mr=Ar.charCodeAt(Ur))<128?Pr[Lr++]=Mr:Mr<2048?(Pr[Lr++]=Mr>>6|192,Pr[Lr++]=63&Mr|128):(64512&Mr)==55296&&(64512&(Fr=Ar.charCodeAt(Ur+1)))==56320?(Mr=65536+((1023&Mr)<<10)+(1023&Fr),++Ur,Pr[Lr++]=Mr>>18|240,Pr[Lr++]=Mr>>12&63|128,Pr[Lr++]=Mr>>6&63|128,Pr[Lr++]=63&Mr|128):(Pr[Lr++]=Mr>>12|224,Pr[Lr++]=Mr>>6&63|128,Pr[Lr++]=63&Mr|128);return Lr-zr}},3442:(_r,Tr)=>{Tr.__esModule=!0;var Rr=function(){function Ar(Pr){if(!Pr)throw new TypeError("Invalid argument; `value` has no value.");this.value=Ar.EMPTY,Pr&&Ar.isGuid(Pr)&&(this.value=Pr)}return Ar.isGuid=function(Pr){var Lr=Pr.toString();return Pr&&(Pr instanceof Ar||Ar.validator.test(Lr))},Ar.create=function(){return new Ar([Ar.gen(2),Ar.gen(1),Ar.gen(1),Ar.gen(1),Ar.gen(3)].join("-"))},Ar.createEmpty=function(){return new Ar("emptyguid")},Ar.parse=function(Pr){return new Ar(Pr)},Ar.raw=function(){return[Ar.gen(2),Ar.gen(1),Ar.gen(1),Ar.gen(1),Ar.gen(3)].join("-")},Ar.gen=function(Pr){for(var Lr="",Mr=0;Mr<Pr;Mr++)Lr+=(65536*(1+Math.random())|0).toString(16).substring(1);return Lr},Ar.prototype.equals=function(Pr){return Ar.isGuid(Pr)&&this.value===Pr.toString()},Ar.prototype.isEmpty=function(){return this.value===Ar.EMPTY},Ar.prototype.toString=function(){return this.value},Ar.prototype.toJSON=function(){return{value:this.value}},Ar.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),Ar.EMPTY="00000000-0000-0000-0000-000000000000",Ar}();Tr.Guid=Rr},3720:_r=>{_r.exports=Rr;var Tr=null;try{Tr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Rr(ns,as,ls){this.low=0|ns,this.high=0|as,this.unsigned=!!ls}function Ar(ns){return(ns&&ns.__isLong__)===!0}Rr.prototype.__isLong__,Object.defineProperty(Rr.prototype,"__isLong__",{value:!0}),Rr.isLong=Ar;var Pr={},Lr={};function Mr(ns,as){var ls,us,xs;return as?(xs=0<=(ns>>>=0)&&ns<256)&&(us=Lr[ns])?us:(ls=zr(ns,(0|ns)<0?-1:0,!0),xs&&(Lr[ns]=ls),ls):(xs=-128<=(ns|=0)&&ns<128)&&(us=Pr[ns])?us:(ls=zr(ns,ns<0?-1:0,!1),xs&&(Pr[ns]=ls),ls)}function Fr(ns,as){if(isNaN(ns))return as?Kr:qr;if(as){if(ns<0)return Kr;if(ns>=jr)return es}else{if(ns<=-Gr)return ts;if(ns+1>=Gr)return _i}return ns<0?Fr(-ns,as).neg():zr(ns%Dr|0,ns/Dr|0,as)}function zr(ns,as,ls){return new Rr(ns,as,ls)}Rr.fromInt=Mr,Rr.fromNumber=Fr,Rr.fromBits=zr;var Ur=Math.pow;function Vr(ns,as,ls){if(ns.length===0)throw Error("empty string");if(ns==="NaN"||ns==="Infinity"||ns==="+Infinity"||ns==="-Infinity")return qr;if(typeof as=="number"?(ls=as,as=!1):as=!!as,(ls=ls||10)<2||36<ls)throw RangeError("radix");var us;if((us=ns.indexOf("-"))>0)throw Error("interior hyphen");if(us===0)return Vr(ns.substring(1),as,ls).neg();for(var xs=Fr(Ur(ls,8)),Ts=qr,vs=0;vs<ns.length;vs+=8){var gs=Math.min(8,ns.length-vs),fs=parseInt(ns.substring(vs,vs+gs),ls);if(gs<8){var ys=Fr(Ur(ls,gs));Ts=Ts.mul(ys).add(Fr(fs))}else Ts=(Ts=Ts.mul(xs)).add(Fr(fs))}return Ts.unsigned=as,Ts}function Nr(ns,as){return typeof ns=="number"?Fr(ns,as):typeof ns=="string"?Vr(ns,as):zr(ns.low,ns.high,typeof as=="boolean"?as:ns.unsigned)}Rr.fromString=Vr,Rr.fromValue=Nr;var Dr=4294967296,jr=Dr*Dr,Gr=jr/2,Wr=Mr(1<<24),qr=Mr(0);Rr.ZERO=qr;var Kr=Mr(0,!0);Rr.UZERO=Kr;var Xr=Mr(1);Rr.ONE=Xr;var Zr=Mr(1,!0);Rr.UONE=Zr;var Jr=Mr(-1);Rr.NEG_ONE=Jr;var _i=zr(-1,2147483647,!1);Rr.MAX_VALUE=_i;var es=zr(-1,-1,!0);Rr.MAX_UNSIGNED_VALUE=es;var ts=zr(0,-2147483648,!1);Rr.MIN_VALUE=ts;var rs=Rr.prototype;rs.toInt=function(){return this.unsigned?this.low>>>0:this.low},rs.toNumber=function(){return this.unsigned?(this.high>>>0)*Dr+(this.low>>>0):this.high*Dr+(this.low>>>0)},rs.toString=function(ns){if((ns=ns||10)<2||36<ns)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(ts)){var as=Fr(ns),ls=this.div(as),us=ls.mul(as).sub(this);return ls.toString(ns)+us.toInt().toString(ns)}return"-"+this.neg().toString(ns)}for(var xs=Fr(Ur(ns,6),this.unsigned),Ts=this,vs="";;){var gs=Ts.div(xs),fs=(Ts.sub(gs.mul(xs)).toInt()>>>0).toString(ns);if((Ts=gs).isZero())return fs+vs;for(;fs.length<6;)fs="0"+fs;vs=""+fs+vs}},rs.getHighBits=function(){return this.high},rs.getHighBitsUnsigned=function(){return this.high>>>0},rs.getLowBits=function(){return this.low},rs.getLowBitsUnsigned=function(){return this.low>>>0},rs.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ts)?64:this.neg().getNumBitsAbs();for(var ns=this.high!=0?this.high:this.low,as=31;as>0&&!(ns&1<<as);as--);return this.high!=0?as+33:as+1},rs.isZero=function(){return this.high===0&&this.low===0},rs.eqz=rs.isZero,rs.isNegative=function(){return!this.unsigned&&this.high<0},rs.isPositive=function(){return this.unsigned||this.high>=0},rs.isOdd=function(){return(1&this.low)==1},rs.isEven=function(){return(1&this.low)==0},rs.equals=function(ns){return Ar(ns)||(ns=Nr(ns)),(this.unsigned===ns.unsigned||this.high>>>31!=1||ns.high>>>31!=1)&&this.high===ns.high&&this.low===ns.low},rs.eq=rs.equals,rs.notEquals=function(ns){return!this.eq(ns)},rs.neq=rs.notEquals,rs.ne=rs.notEquals,rs.lessThan=function(ns){return this.comp(ns)<0},rs.lt=rs.lessThan,rs.lessThanOrEqual=function(ns){return this.comp(ns)<=0},rs.lte=rs.lessThanOrEqual,rs.le=rs.lessThanOrEqual,rs.greaterThan=function(ns){return this.comp(ns)>0},rs.gt=rs.greaterThan,rs.greaterThanOrEqual=function(ns){return this.comp(ns)>=0},rs.gte=rs.greaterThanOrEqual,rs.ge=rs.greaterThanOrEqual,rs.compare=function(ns){if(Ar(ns)||(ns=Nr(ns)),this.eq(ns))return 0;var as=this.isNegative(),ls=ns.isNegative();return as&&!ls?-1:!as&&ls?1:this.unsigned?ns.high>>>0>this.high>>>0||ns.high===this.high&&ns.low>>>0>this.low>>>0?-1:1:this.sub(ns).isNegative()?-1:1},rs.comp=rs.compare,rs.negate=function(){return!this.unsigned&&this.eq(ts)?ts:this.not().add(Xr)},rs.neg=rs.negate,rs.add=function(ns){Ar(ns)||(ns=Nr(ns));var as=this.high>>>16,ls=65535&this.high,us=this.low>>>16,xs=65535&this.low,Ts=ns.high>>>16,vs=65535&ns.high,gs=ns.low>>>16,fs=0,ys=0,ks=0,Fs=0;return ks+=(Fs+=xs+(65535&ns.low))>>>16,ys+=(ks+=us+gs)>>>16,fs+=(ys+=ls+vs)>>>16,fs+=as+Ts,zr((ks&=65535)<<16|(Fs&=65535),(fs&=65535)<<16|(ys&=65535),this.unsigned)},rs.subtract=function(ns){return Ar(ns)||(ns=Nr(ns)),this.add(ns.neg())},rs.sub=rs.subtract,rs.multiply=function(ns){if(this.isZero())return qr;if(Ar(ns)||(ns=Nr(ns)),Tr)return zr(Tr.mul(this.low,this.high,ns.low,ns.high),Tr.get_high(),this.unsigned);if(ns.isZero())return qr;if(this.eq(ts))return ns.isOdd()?ts:qr;if(ns.eq(ts))return this.isOdd()?ts:qr;if(this.isNegative())return ns.isNegative()?this.neg().mul(ns.neg()):this.neg().mul(ns).neg();if(ns.isNegative())return this.mul(ns.neg()).neg();if(this.lt(Wr)&&ns.lt(Wr))return Fr(this.toNumber()*ns.toNumber(),this.unsigned);var as=this.high>>>16,ls=65535&this.high,us=this.low>>>16,xs=65535&this.low,Ts=ns.high>>>16,vs=65535&ns.high,gs=ns.low>>>16,fs=65535&ns.low,ys=0,ks=0,Fs=0,Us=0;return Fs+=(Us+=xs*fs)>>>16,ks+=(Fs+=us*fs)>>>16,Fs&=65535,ks+=(Fs+=xs*gs)>>>16,ys+=(ks+=ls*fs)>>>16,ks&=65535,ys+=(ks+=us*gs)>>>16,ks&=65535,ys+=(ks+=xs*vs)>>>16,ys+=as*fs+ls*gs+us*vs+xs*Ts,zr((Fs&=65535)<<16|(Us&=65535),(ys&=65535)<<16|(ks&=65535),this.unsigned)},rs.mul=rs.multiply,rs.divide=function(ns){if(Ar(ns)||(ns=Nr(ns)),ns.isZero())throw Error("division by zero");var as,ls,us;if(Tr)return this.unsigned||this.high!==-2147483648||ns.low!==-1||ns.high!==-1?zr((this.unsigned?Tr.div_u:Tr.div_s)(this.low,this.high,ns.low,ns.high),Tr.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Kr:qr;if(this.unsigned){if(ns.unsigned||(ns=ns.toUnsigned()),ns.gt(this))return Kr;if(ns.gt(this.shru(1)))return Zr;us=Kr}else{if(this.eq(ts))return ns.eq(Xr)||ns.eq(Jr)?ts:ns.eq(ts)?Xr:(as=this.shr(1).div(ns).shl(1)).eq(qr)?ns.isNegative()?Xr:Jr:(ls=this.sub(ns.mul(as)),us=as.add(ls.div(ns)));if(ns.eq(ts))return this.unsigned?Kr:qr;if(this.isNegative())return ns.isNegative()?this.neg().div(ns.neg()):this.neg().div(ns).neg();if(ns.isNegative())return this.div(ns.neg()).neg();us=qr}for(ls=this;ls.gte(ns);){as=Math.max(1,Math.floor(ls.toNumber()/ns.toNumber()));for(var xs=Math.ceil(Math.log(as)/Math.LN2),Ts=xs<=48?1:Ur(2,xs-48),vs=Fr(as),gs=vs.mul(ns);gs.isNegative()||gs.gt(ls);)gs=(vs=Fr(as-=Ts,this.unsigned)).mul(ns);vs.isZero()&&(vs=Xr),us=us.add(vs),ls=ls.sub(gs)}return us},rs.div=rs.divide,rs.modulo=function(ns){return Ar(ns)||(ns=Nr(ns)),Tr?zr((this.unsigned?Tr.rem_u:Tr.rem_s)(this.low,this.high,ns.low,ns.high),Tr.get_high(),this.unsigned):this.sub(this.div(ns).mul(ns))},rs.mod=rs.modulo,rs.rem=rs.modulo,rs.not=function(){return zr(~this.low,~this.high,this.unsigned)},rs.and=function(ns){return Ar(ns)||(ns=Nr(ns)),zr(this.low&ns.low,this.high&ns.high,this.unsigned)},rs.or=function(ns){return Ar(ns)||(ns=Nr(ns)),zr(this.low|ns.low,this.high|ns.high,this.unsigned)},rs.xor=function(ns){return Ar(ns)||(ns=Nr(ns)),zr(this.low^ns.low,this.high^ns.high,this.unsigned)},rs.shiftLeft=function(ns){return Ar(ns)&&(ns=ns.toInt()),(ns&=63)==0?this:ns<32?zr(this.low<<ns,this.high<<ns|this.low>>>32-ns,this.unsigned):zr(0,this.low<<ns-32,this.unsigned)},rs.shl=rs.shiftLeft,rs.shiftRight=function(ns){return Ar(ns)&&(ns=ns.toInt()),(ns&=63)==0?this:ns<32?zr(this.low>>>ns|this.high<<32-ns,this.high>>ns,this.unsigned):zr(this.high>>ns-32,this.high>=0?0:-1,this.unsigned)},rs.shr=rs.shiftRight,rs.shiftRightUnsigned=function(ns){if(Ar(ns)&&(ns=ns.toInt()),(ns&=63)==0)return this;var as=this.high;return ns<32?zr(this.low>>>ns|as<<32-ns,as>>>ns,this.unsigned):zr(ns===32?as:as>>>ns-32,0,this.unsigned)},rs.shru=rs.shiftRightUnsigned,rs.shr_u=rs.shiftRightUnsigned,rs.toSigned=function(){return this.unsigned?zr(this.low,this.high,!1):this},rs.toUnsigned=function(){return this.unsigned?this:zr(this.low,this.high,!0)},rs.toBytes=function(ns){return ns?this.toBytesLE():this.toBytesBE()},rs.toBytesLE=function(){var ns=this.high,as=this.low;return[255&as,as>>>8&255,as>>>16&255,as>>>24,255&ns,ns>>>8&255,ns>>>16&255,ns>>>24]},rs.toBytesBE=function(){var ns=this.high,as=this.low;return[ns>>>24,ns>>>16&255,ns>>>8&255,255&ns,as>>>24,as>>>16&255,as>>>8&255,255&as]},Rr.fromBytes=function(ns,as,ls){return ls?Rr.fromBytesLE(ns,as):Rr.fromBytesBE(ns,as)},Rr.fromBytesLE=function(ns,as){return new Rr(ns[0]|ns[1]<<8|ns[2]<<16|ns[3]<<24,ns[4]|ns[5]<<8|ns[6]<<16|ns[7]<<24,as)},Rr.fromBytesBE=function(ns,as){return new Rr(ns[4]<<24|ns[5]<<16|ns[6]<<8|ns[7],ns[0]<<24|ns[1]<<16|ns[2]<<8|ns[3],as)}},1446:(_r,Tr,Rr)=>{var Ar,Pr,Lr,Mr=Rr(2100),Fr=Mr.Reader,zr=Mr.Writer,Ur=Mr.util,Vr=Mr.roots.default||(Mr.roots.default={});Vr.onnx=((Lr={}).Version=(Ar={},(Pr=Object.create(Ar))[Ar[0]="_START_VERSION"]=0,Pr[Ar[1]="IR_VERSION_2017_10_10"]=1,Pr[Ar[2]="IR_VERSION_2017_10_30"]=2,Pr[Ar[3]="IR_VERSION_2017_11_3"]=3,Pr[Ar[4]="IR_VERSION_2019_1_22"]=4,Pr[Ar[5]="IR_VERSION"]=5,Pr),Lr.AttributeProto=function(){function Nr(Dr){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],Dr)for(var jr=Object.keys(Dr),Gr=0;Gr<jr.length;++Gr)Dr[jr[Gr]]!=null&&(this[jr[Gr]]=Dr[jr[Gr]])}return Nr.prototype.name="",Nr.prototype.refAttrName="",Nr.prototype.docString="",Nr.prototype.type=0,Nr.prototype.f=0,Nr.prototype.i=Ur.Long?Ur.Long.fromBits(0,0,!1):0,Nr.prototype.s=Ur.newBuffer([]),Nr.prototype.t=null,Nr.prototype.g=null,Nr.prototype.floats=Ur.emptyArray,Nr.prototype.ints=Ur.emptyArray,Nr.prototype.strings=Ur.emptyArray,Nr.prototype.tensors=Ur.emptyArray,Nr.prototype.graphs=Ur.emptyArray,Nr.create=function(Dr){return new Nr(Dr)},Nr.encode=function(Dr,jr){if(jr||(jr=zr.create()),Dr.name!=null&&Dr.hasOwnProperty("name")&&jr.uint32(10).string(Dr.name),Dr.f!=null&&Dr.hasOwnProperty("f")&&jr.uint32(21).float(Dr.f),Dr.i!=null&&Dr.hasOwnProperty("i")&&jr.uint32(24).int64(Dr.i),Dr.s!=null&&Dr.hasOwnProperty("s")&&jr.uint32(34).bytes(Dr.s),Dr.t!=null&&Dr.hasOwnProperty("t")&&Vr.onnx.TensorProto.encode(Dr.t,jr.uint32(42).fork()).ldelim(),Dr.g!=null&&Dr.hasOwnProperty("g")&&Vr.onnx.GraphProto.encode(Dr.g,jr.uint32(50).fork()).ldelim(),Dr.floats!=null&&Dr.floats.length){jr.uint32(58).fork();for(var Gr=0;Gr<Dr.floats.length;++Gr)jr.float(Dr.floats[Gr]);jr.ldelim()}if(Dr.ints!=null&&Dr.ints.length){for(jr.uint32(66).fork(),Gr=0;Gr<Dr.ints.length;++Gr)jr.int64(Dr.ints[Gr]);jr.ldelim()}if(Dr.strings!=null&&Dr.strings.length)for(Gr=0;Gr<Dr.strings.length;++Gr)jr.uint32(74).bytes(Dr.strings[Gr]);if(Dr.tensors!=null&&Dr.tensors.length)for(Gr=0;Gr<Dr.tensors.length;++Gr)Vr.onnx.TensorProto.encode(Dr.tensors[Gr],jr.uint32(82).fork()).ldelim();if(Dr.graphs!=null&&Dr.graphs.length)for(Gr=0;Gr<Dr.graphs.length;++Gr)Vr.onnx.GraphProto.encode(Dr.graphs[Gr],jr.uint32(90).fork()).ldelim();return Dr.docString!=null&&Dr.hasOwnProperty("docString")&&jr.uint32(106).string(Dr.docString),Dr.type!=null&&Dr.hasOwnProperty("type")&&jr.uint32(160).int32(Dr.type),Dr.refAttrName!=null&&Dr.hasOwnProperty("refAttrName")&&jr.uint32(170).string(Dr.refAttrName),jr},Nr.encodeDelimited=function(Dr,jr){return this.encode(Dr,jr).ldelim()},Nr.decode=function(Dr,jr){Dr instanceof Fr||(Dr=Fr.create(Dr));for(var Gr=jr===void 0?Dr.len:Dr.pos+jr,Wr=new Vr.onnx.AttributeProto;Dr.pos<Gr;){var qr=Dr.uint32();switch(qr>>>3){case 1:Wr.name=Dr.string();break;case 21:Wr.refAttrName=Dr.string();break;case 13:Wr.docString=Dr.string();break;case 20:Wr.type=Dr.int32();break;case 2:Wr.f=Dr.float();break;case 3:Wr.i=Dr.int64();break;case 4:Wr.s=Dr.bytes();break;case 5:Wr.t=Vr.onnx.TensorProto.decode(Dr,Dr.uint32());break;case 6:Wr.g=Vr.onnx.GraphProto.decode(Dr,Dr.uint32());break;case 7:if(Wr.floats&&Wr.floats.length||(Wr.floats=[]),(7&qr)==2)for(var Kr=Dr.uint32()+Dr.pos;Dr.pos<Kr;)Wr.floats.push(Dr.float());else Wr.floats.push(Dr.float());break;case 8:if(Wr.ints&&Wr.ints.length||(Wr.ints=[]),(7&qr)==2)for(Kr=Dr.uint32()+Dr.pos;Dr.pos<Kr;)Wr.ints.push(Dr.int64());else Wr.ints.push(Dr.int64());break;case 9:Wr.strings&&Wr.strings.length||(Wr.strings=[]),Wr.strings.push(Dr.bytes());break;case 10:Wr.tensors&&Wr.tensors.length||(Wr.tensors=[]),Wr.tensors.push(Vr.onnx.TensorProto.decode(Dr,Dr.uint32()));break;case 11:Wr.graphs&&Wr.graphs.length||(Wr.graphs=[]),Wr.graphs.push(Vr.onnx.GraphProto.decode(Dr,Dr.uint32()));break;default:Dr.skipType(7&qr)}}return Wr},Nr.decodeDelimited=function(Dr){return Dr instanceof Fr||(Dr=new Fr(Dr)),this.decode(Dr,Dr.uint32())},Nr.verify=function(Dr){if(typeof Dr!="object"||Dr===null)return"object expected";if(Dr.name!=null&&Dr.hasOwnProperty("name")&&!Ur.isString(Dr.name))return"name: string expected";if(Dr.refAttrName!=null&&Dr.hasOwnProperty("refAttrName")&&!Ur.isString(Dr.refAttrName))return"refAttrName: string expected";if(Dr.docString!=null&&Dr.hasOwnProperty("docString")&&!Ur.isString(Dr.docString))return"docString: string expected";if(Dr.type!=null&&Dr.hasOwnProperty("type"))switch(Dr.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(Dr.f!=null&&Dr.hasOwnProperty("f")&&typeof Dr.f!="number")return"f: number expected";if(Dr.i!=null&&Dr.hasOwnProperty("i")&&!(Ur.isInteger(Dr.i)||Dr.i&&Ur.isInteger(Dr.i.low)&&Ur.isInteger(Dr.i.high)))return"i: integer|Long expected";if(Dr.s!=null&&Dr.hasOwnProperty("s")&&!(Dr.s&&typeof Dr.s.length=="number"||Ur.isString(Dr.s)))return"s: buffer expected";if(Dr.t!=null&&Dr.hasOwnProperty("t")&&(Gr=Vr.onnx.TensorProto.verify(Dr.t)))return"t."+Gr;if(Dr.g!=null&&Dr.hasOwnProperty("g")&&(Gr=Vr.onnx.GraphProto.verify(Dr.g)))return"g."+Gr;if(Dr.floats!=null&&Dr.hasOwnProperty("floats")){if(!Array.isArray(Dr.floats))return"floats: array expected";for(var jr=0;jr<Dr.floats.length;++jr)if(typeof Dr.floats[jr]!="number")return"floats: number[] expected"}if(Dr.ints!=null&&Dr.hasOwnProperty("ints")){if(!Array.isArray(Dr.ints))return"ints: array expected";for(jr=0;jr<Dr.ints.length;++jr)if(!(Ur.isInteger(Dr.ints[jr])||Dr.ints[jr]&&Ur.isInteger(Dr.ints[jr].low)&&Ur.isInteger(Dr.ints[jr].high)))return"ints: integer|Long[] expected"}if(Dr.strings!=null&&Dr.hasOwnProperty("strings")){if(!Array.isArray(Dr.strings))return"strings: array expected";for(jr=0;jr<Dr.strings.length;++jr)if(!(Dr.strings[jr]&&typeof Dr.strings[jr].length=="number"||Ur.isString(Dr.strings[jr])))return"strings: buffer[] expected"}if(Dr.tensors!=null&&Dr.hasOwnProperty("tensors")){if(!Array.isArray(Dr.tensors))return"tensors: array expected";for(jr=0;jr<Dr.tensors.length;++jr)if(Gr=Vr.onnx.TensorProto.verify(Dr.tensors[jr]))return"tensors."+Gr}if(Dr.graphs!=null&&Dr.hasOwnProperty("graphs")){if(!Array.isArray(Dr.graphs))return"graphs: array expected";for(jr=0;jr<Dr.graphs.length;++jr){var Gr;if(Gr=Vr.onnx.GraphProto.verify(Dr.graphs[jr]))return"graphs."+Gr}}return null},Nr.fromObject=function(Dr){if(Dr instanceof Vr.onnx.AttributeProto)return Dr;var jr=new Vr.onnx.AttributeProto;switch(Dr.name!=null&&(jr.name=String(Dr.name)),Dr.refAttrName!=null&&(jr.refAttrName=String(Dr.refAttrName)),Dr.docString!=null&&(jr.docString=String(Dr.docString)),Dr.type){case"UNDEFINED":case 0:jr.type=0;break;case"FLOAT":case 1:jr.type=1;break;case"INT":case 2:jr.type=2;break;case"STRING":case 3:jr.type=3;break;case"TENSOR":case 4:jr.type=4;break;case"GRAPH":case 5:jr.type=5;break;case"FLOATS":case 6:jr.type=6;break;case"INTS":case 7:jr.type=7;break;case"STRINGS":case 8:jr.type=8;break;case"TENSORS":case 9:jr.type=9;break;case"GRAPHS":case 10:jr.type=10}if(Dr.f!=null&&(jr.f=Number(Dr.f)),Dr.i!=null&&(Ur.Long?(jr.i=Ur.Long.fromValue(Dr.i)).unsigned=!1:typeof Dr.i=="string"?jr.i=parseInt(Dr.i,10):typeof Dr.i=="number"?jr.i=Dr.i:typeof Dr.i=="object"&&(jr.i=new Ur.LongBits(Dr.i.low>>>0,Dr.i.high>>>0).toNumber())),Dr.s!=null&&(typeof Dr.s=="string"?Ur.base64.decode(Dr.s,jr.s=Ur.newBuffer(Ur.base64.length(Dr.s)),0):Dr.s.length&&(jr.s=Dr.s)),Dr.t!=null){if(typeof Dr.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");jr.t=Vr.onnx.TensorProto.fromObject(Dr.t)}if(Dr.g!=null){if(typeof Dr.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");jr.g=Vr.onnx.GraphProto.fromObject(Dr.g)}if(Dr.floats){if(!Array.isArray(Dr.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");jr.floats=[];for(var Gr=0;Gr<Dr.floats.length;++Gr)jr.floats[Gr]=Number(Dr.floats[Gr])}if(Dr.ints){if(!Array.isArray(Dr.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(jr.ints=[],Gr=0;Gr<Dr.ints.length;++Gr)Ur.Long?(jr.ints[Gr]=Ur.Long.fromValue(Dr.ints[Gr])).unsigned=!1:typeof Dr.ints[Gr]=="string"?jr.ints[Gr]=parseInt(Dr.ints[Gr],10):typeof Dr.ints[Gr]=="number"?jr.ints[Gr]=Dr.ints[Gr]:typeof Dr.ints[Gr]=="object"&&(jr.ints[Gr]=new Ur.LongBits(Dr.ints[Gr].low>>>0,Dr.ints[Gr].high>>>0).toNumber())}if(Dr.strings){if(!Array.isArray(Dr.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(jr.strings=[],Gr=0;Gr<Dr.strings.length;++Gr)typeof Dr.strings[Gr]=="string"?Ur.base64.decode(Dr.strings[Gr],jr.strings[Gr]=Ur.newBuffer(Ur.base64.length(Dr.strings[Gr])),0):Dr.strings[Gr].length&&(jr.strings[Gr]=Dr.strings[Gr])}if(Dr.tensors){if(!Array.isArray(Dr.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(jr.tensors=[],Gr=0;Gr<Dr.tensors.length;++Gr){if(typeof Dr.tensors[Gr]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");jr.tensors[Gr]=Vr.onnx.TensorProto.fromObject(Dr.tensors[Gr])}}if(Dr.graphs){if(!Array.isArray(Dr.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(jr.graphs=[],Gr=0;Gr<Dr.graphs.length;++Gr){if(typeof Dr.graphs[Gr]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");jr.graphs[Gr]=Vr.onnx.GraphProto.fromObject(Dr.graphs[Gr])}}return jr},Nr.toObject=function(Dr,jr){jr||(jr={});var Gr={};if((jr.arrays||jr.defaults)&&(Gr.floats=[],Gr.ints=[],Gr.strings=[],Gr.tensors=[],Gr.graphs=[]),jr.defaults){if(Gr.name="",Gr.f=0,Ur.Long){var Wr=new Ur.Long(0,0,!1);Gr.i=jr.longs===String?Wr.toString():jr.longs===Number?Wr.toNumber():Wr}else Gr.i=jr.longs===String?"0":0;jr.bytes===String?Gr.s="":(Gr.s=[],jr.bytes!==Array&&(Gr.s=Ur.newBuffer(Gr.s))),Gr.t=null,Gr.g=null,Gr.docString="",Gr.type=jr.enums===String?"UNDEFINED":0,Gr.refAttrName=""}if(Dr.name!=null&&Dr.hasOwnProperty("name")&&(Gr.name=Dr.name),Dr.f!=null&&Dr.hasOwnProperty("f")&&(Gr.f=jr.json&&!isFinite(Dr.f)?String(Dr.f):Dr.f),Dr.i!=null&&Dr.hasOwnProperty("i")&&(typeof Dr.i=="number"?Gr.i=jr.longs===String?String(Dr.i):Dr.i:Gr.i=jr.longs===String?Ur.Long.prototype.toString.call(Dr.i):jr.longs===Number?new Ur.LongBits(Dr.i.low>>>0,Dr.i.high>>>0).toNumber():Dr.i),Dr.s!=null&&Dr.hasOwnProperty("s")&&(Gr.s=jr.bytes===String?Ur.base64.encode(Dr.s,0,Dr.s.length):jr.bytes===Array?Array.prototype.slice.call(Dr.s):Dr.s),Dr.t!=null&&Dr.hasOwnProperty("t")&&(Gr.t=Vr.onnx.TensorProto.toObject(Dr.t,jr)),Dr.g!=null&&Dr.hasOwnProperty("g")&&(Gr.g=Vr.onnx.GraphProto.toObject(Dr.g,jr)),Dr.floats&&Dr.floats.length){Gr.floats=[];for(var qr=0;qr<Dr.floats.length;++qr)Gr.floats[qr]=jr.json&&!isFinite(Dr.floats[qr])?String(Dr.floats[qr]):Dr.floats[qr]}if(Dr.ints&&Dr.ints.length)for(Gr.ints=[],qr=0;qr<Dr.ints.length;++qr)typeof Dr.ints[qr]=="number"?Gr.ints[qr]=jr.longs===String?String(Dr.ints[qr]):Dr.ints[qr]:Gr.ints[qr]=jr.longs===String?Ur.Long.prototype.toString.call(Dr.ints[qr]):jr.longs===Number?new Ur.LongBits(Dr.ints[qr].low>>>0,Dr.ints[qr].high>>>0).toNumber():Dr.ints[qr];if(Dr.strings&&Dr.strings.length)for(Gr.strings=[],qr=0;qr<Dr.strings.length;++qr)Gr.strings[qr]=jr.bytes===String?Ur.base64.encode(Dr.strings[qr],0,Dr.strings[qr].length):jr.bytes===Array?Array.prototype.slice.call(Dr.strings[qr]):Dr.strings[qr];if(Dr.tensors&&Dr.tensors.length)for(Gr.tensors=[],qr=0;qr<Dr.tensors.length;++qr)Gr.tensors[qr]=Vr.onnx.TensorProto.toObject(Dr.tensors[qr],jr);if(Dr.graphs&&Dr.graphs.length)for(Gr.graphs=[],qr=0;qr<Dr.graphs.length;++qr)Gr.graphs[qr]=Vr.onnx.GraphProto.toObject(Dr.graphs[qr],jr);return Dr.docString!=null&&Dr.hasOwnProperty("docString")&&(Gr.docString=Dr.docString),Dr.type!=null&&Dr.hasOwnProperty("type")&&(Gr.type=jr.enums===String?Vr.onnx.AttributeProto.AttributeType[Dr.type]:Dr.type),Dr.refAttrName!=null&&Dr.hasOwnProperty("refAttrName")&&(Gr.refAttrName=Dr.refAttrName),Gr},Nr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},Nr.AttributeType=function(){var Dr={},jr=Object.create(Dr);return jr[Dr[0]="UNDEFINED"]=0,jr[Dr[1]="FLOAT"]=1,jr[Dr[2]="INT"]=2,jr[Dr[3]="STRING"]=3,jr[Dr[4]="TENSOR"]=4,jr[Dr[5]="GRAPH"]=5,jr[Dr[6]="FLOATS"]=6,jr[Dr[7]="INTS"]=7,jr[Dr[8]="STRINGS"]=8,jr[Dr[9]="TENSORS"]=9,jr[Dr[10]="GRAPHS"]=10,jr}(),Nr}(),Lr.ValueInfoProto=function(){function Nr(Dr){if(Dr)for(var jr=Object.keys(Dr),Gr=0;Gr<jr.length;++Gr)Dr[jr[Gr]]!=null&&(this[jr[Gr]]=Dr[jr[Gr]])}return Nr.prototype.name="",Nr.prototype.type=null,Nr.prototype.docString="",Nr.create=function(Dr){return new Nr(Dr)},Nr.encode=function(Dr,jr){return jr||(jr=zr.create()),Dr.name!=null&&Dr.hasOwnProperty("name")&&jr.uint32(10).string(Dr.name),Dr.type!=null&&Dr.hasOwnProperty("type")&&Vr.onnx.TypeProto.encode(Dr.type,jr.uint32(18).fork()).ldelim(),Dr.docString!=null&&Dr.hasOwnProperty("docString")&&jr.uint32(26).string(Dr.docString),jr},Nr.encodeDelimited=function(Dr,jr){return this.encode(Dr,jr).ldelim()},Nr.decode=function(Dr,jr){Dr instanceof Fr||(Dr=Fr.create(Dr));for(var Gr=jr===void 0?Dr.len:Dr.pos+jr,Wr=new Vr.onnx.ValueInfoProto;Dr.pos<Gr;){var qr=Dr.uint32();switch(qr>>>3){case 1:Wr.name=Dr.string();break;case 2:Wr.type=Vr.onnx.TypeProto.decode(Dr,Dr.uint32());break;case 3:Wr.docString=Dr.string();break;default:Dr.skipType(7&qr)}}return Wr},Nr.decodeDelimited=function(Dr){return Dr instanceof Fr||(Dr=new Fr(Dr)),this.decode(Dr,Dr.uint32())},Nr.verify=function(Dr){if(typeof Dr!="object"||Dr===null)return"object expected";if(Dr.name!=null&&Dr.hasOwnProperty("name")&&!Ur.isString(Dr.name))return"name: string expected";if(Dr.type!=null&&Dr.hasOwnProperty("type")){var jr=Vr.onnx.TypeProto.verify(Dr.type);if(jr)return"type."+jr}return Dr.docString!=null&&Dr.hasOwnProperty("docString")&&!Ur.isString(Dr.docString)?"docString: string expected":null},Nr.fromObject=function(Dr){if(Dr instanceof Vr.onnx.ValueInfoProto)return Dr;var jr=new Vr.onnx.ValueInfoProto;if(Dr.name!=null&&(jr.name=String(Dr.name)),Dr.type!=null){if(typeof Dr.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");jr.type=Vr.onnx.TypeProto.fromObject(Dr.type)}return Dr.docString!=null&&(jr.docString=String(Dr.docString)),jr},Nr.toObject=function(Dr,jr){jr||(jr={});var Gr={};return jr.defaults&&(Gr.name="",Gr.type=null,Gr.docString=""),Dr.name!=null&&Dr.hasOwnProperty("name")&&(Gr.name=Dr.name),Dr.type!=null&&Dr.hasOwnProperty("type")&&(Gr.type=Vr.onnx.TypeProto.toObject(Dr.type,jr)),Dr.docString!=null&&Dr.hasOwnProperty("docString")&&(Gr.docString=Dr.docString),Gr},Nr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},Nr}(),Lr.NodeProto=function(){function Nr(Dr){if(this.input=[],this.output=[],this.attribute=[],Dr)for(var jr=Object.keys(Dr),Gr=0;Gr<jr.length;++Gr)Dr[jr[Gr]]!=null&&(this[jr[Gr]]=Dr[jr[Gr]])}return Nr.prototype.input=Ur.emptyArray,Nr.prototype.output=Ur.emptyArray,Nr.prototype.name="",Nr.prototype.opType="",Nr.prototype.domain="",Nr.prototype.attribute=Ur.emptyArray,Nr.prototype.docString="",Nr.create=function(Dr){return new Nr(Dr)},Nr.encode=function(Dr,jr){if(jr||(jr=zr.create()),Dr.input!=null&&Dr.input.length)for(var Gr=0;Gr<Dr.input.length;++Gr)jr.uint32(10).string(Dr.input[Gr]);if(Dr.output!=null&&Dr.output.length)for(Gr=0;Gr<Dr.output.length;++Gr)jr.uint32(18).string(Dr.output[Gr]);if(Dr.name!=null&&Dr.hasOwnProperty("name")&&jr.uint32(26).string(Dr.name),Dr.opType!=null&&Dr.hasOwnProperty("opType")&&jr.uint32(34).string(Dr.opType),Dr.attribute!=null&&Dr.attribute.length)for(Gr=0;Gr<Dr.attribute.length;++Gr)Vr.onnx.AttributeProto.encode(Dr.attribute[Gr],jr.uint32(42).fork()).ldelim();return Dr.docString!=null&&Dr.hasOwnProperty("docString")&&jr.uint32(50).string(Dr.docString),Dr.domain!=null&&Dr.hasOwnProperty("domain")&&jr.uint32(58).string(Dr.domain),jr},Nr.encodeDelimited=function(Dr,jr){return this.encode(Dr,jr).ldelim()},Nr.decode=function(Dr,jr){Dr instanceof Fr||(Dr=Fr.create(Dr));for(var Gr=jr===void 0?Dr.len:Dr.pos+jr,Wr=new Vr.onnx.NodeProto;Dr.pos<Gr;){var qr=Dr.uint32();switch(qr>>>3){case 1:Wr.input&&Wr.input.length||(Wr.input=[]),Wr.input.push(Dr.string());break;case 2:Wr.output&&Wr.output.length||(Wr.output=[]),Wr.output.push(Dr.string());break;case 3:Wr.name=Dr.string();break;case 4:Wr.opType=Dr.string();break;case 7:Wr.domain=Dr.string();break;case 5:Wr.attribute&&Wr.attribute.length||(Wr.attribute=[]),Wr.attribute.push(Vr.onnx.AttributeProto.decode(Dr,Dr.uint32()));break;case 6:Wr.docString=Dr.string();break;default:Dr.skipType(7&qr)}}return Wr},Nr.decodeDelimited=function(Dr){return Dr instanceof Fr||(Dr=new Fr(Dr)),this.decode(Dr,Dr.uint32())},Nr.verify=function(Dr){if(typeof Dr!="object"||Dr===null)return"object expected";if(Dr.input!=null&&Dr.hasOwnProperty("input")){if(!Array.isArray(Dr.input))return"input: array expected";for(var jr=0;jr<Dr.input.length;++jr)if(!Ur.isString(Dr.input[jr]))return"input: string[] expected"}if(Dr.output!=null&&Dr.hasOwnProperty("output")){if(!Array.isArray(Dr.output))return"output: array expected";for(jr=0;jr<Dr.output.length;++jr)if(!Ur.isString(Dr.output[jr]))return"output: string[] expected"}if(Dr.name!=null&&Dr.hasOwnProperty("name")&&!Ur.isString(Dr.name))return"name: string expected";if(Dr.opType!=null&&Dr.hasOwnProperty("opType")&&!Ur.isString(Dr.opType))return"opType: string expected";if(Dr.domain!=null&&Dr.hasOwnProperty("domain")&&!Ur.isString(Dr.domain))return"domain: string expected";if(Dr.attribute!=null&&Dr.hasOwnProperty("attribute")){if(!Array.isArray(Dr.attribute))return"attribute: array expected";for(jr=0;jr<Dr.attribute.length;++jr){var Gr=Vr.onnx.AttributeProto.verify(Dr.attribute[jr]);if(Gr)return"attribute."+Gr}}return Dr.docString!=null&&Dr.hasOwnProperty("docString")&&!Ur.isString(Dr.docString)?"docString: string expected":null},Nr.fromObject=function(Dr){if(Dr instanceof Vr.onnx.NodeProto)return Dr;var jr=new Vr.onnx.NodeProto;if(Dr.input){if(!Array.isArray(Dr.input))throw TypeError(".onnx.NodeProto.input: array expected");jr.input=[];for(var Gr=0;Gr<Dr.input.length;++Gr)jr.input[Gr]=String(Dr.input[Gr])}if(Dr.output){if(!Array.isArray(Dr.output))throw TypeError(".onnx.NodeProto.output: array expected");for(jr.output=[],Gr=0;Gr<Dr.output.length;++Gr)jr.output[Gr]=String(Dr.output[Gr])}if(Dr.name!=null&&(jr.name=String(Dr.name)),Dr.opType!=null&&(jr.opType=String(Dr.opType)),Dr.domain!=null&&(jr.domain=String(Dr.domain)),Dr.attribute){if(!Array.isArray(Dr.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(jr.attribute=[],Gr=0;Gr<Dr.attribute.length;++Gr){if(typeof Dr.attribute[Gr]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");jr.attribute[Gr]=Vr.onnx.AttributeProto.fromObject(Dr.attribute[Gr])}}return Dr.docString!=null&&(jr.docString=String(Dr.docString)),jr},Nr.toObject=function(Dr,jr){jr||(jr={});var Gr={};if((jr.arrays||jr.defaults)&&(Gr.input=[],Gr.output=[],Gr.attribute=[]),jr.defaults&&(Gr.name="",Gr.opType="",Gr.docString="",Gr.domain=""),Dr.input&&Dr.input.length){Gr.input=[];for(var Wr=0;Wr<Dr.input.length;++Wr)Gr.input[Wr]=Dr.input[Wr]}if(Dr.output&&Dr.output.length)for(Gr.output=[],Wr=0;Wr<Dr.output.length;++Wr)Gr.output[Wr]=Dr.output[Wr];if(Dr.name!=null&&Dr.hasOwnProperty("name")&&(Gr.name=Dr.name),Dr.opType!=null&&Dr.hasOwnProperty("opType")&&(Gr.opType=Dr.opType),Dr.attribute&&Dr.attribute.length)for(Gr.attribute=[],Wr=0;Wr<Dr.attribute.length;++Wr)Gr.attribute[Wr]=Vr.onnx.AttributeProto.toObject(Dr.attribute[Wr],jr);return Dr.docString!=null&&Dr.hasOwnProperty("docString")&&(Gr.docString=Dr.docString),Dr.domain!=null&&Dr.hasOwnProperty("domain")&&(Gr.domain=Dr.domain),Gr},Nr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},Nr}(),Lr.ModelProto=function(){function Nr(Dr){if(this.opsetImport=[],this.metadataProps=[],Dr)for(var jr=Object.keys(Dr),Gr=0;Gr<jr.length;++Gr)Dr[jr[Gr]]!=null&&(this[jr[Gr]]=Dr[jr[Gr]])}return Nr.prototype.irVersion=Ur.Long?Ur.Long.fromBits(0,0,!1):0,Nr.prototype.opsetImport=Ur.emptyArray,Nr.prototype.producerName="",Nr.prototype.producerVersion="",Nr.prototype.domain="",Nr.prototype.modelVersion=Ur.Long?Ur.Long.fromBits(0,0,!1):0,Nr.prototype.docString="",Nr.prototype.graph=null,Nr.prototype.metadataProps=Ur.emptyArray,Nr.create=function(Dr){return new Nr(Dr)},Nr.encode=function(Dr,jr){if(jr||(jr=zr.create()),Dr.irVersion!=null&&Dr.hasOwnProperty("irVersion")&&jr.uint32(8).int64(Dr.irVersion),Dr.producerName!=null&&Dr.hasOwnProperty("producerName")&&jr.uint32(18).string(Dr.producerName),Dr.producerVersion!=null&&Dr.hasOwnProperty("producerVersion")&&jr.uint32(26).string(Dr.producerVersion),Dr.domain!=null&&Dr.hasOwnProperty("domain")&&jr.uint32(34).string(Dr.domain),Dr.modelVersion!=null&&Dr.hasOwnProperty("modelVersion")&&jr.uint32(40).int64(Dr.modelVersion),Dr.docString!=null&&Dr.hasOwnProperty("docString")&&jr.uint32(50).string(Dr.docString),Dr.graph!=null&&Dr.hasOwnProperty("graph")&&Vr.onnx.GraphProto.encode(Dr.graph,jr.uint32(58).fork()).ldelim(),Dr.opsetImport!=null&&Dr.opsetImport.length)for(var Gr=0;Gr<Dr.opsetImport.length;++Gr)Vr.onnx.OperatorSetIdProto.encode(Dr.opsetImport[Gr],jr.uint32(66).fork()).ldelim();if(Dr.metadataProps!=null&&Dr.metadataProps.length)for(Gr=0;Gr<Dr.metadataProps.length;++Gr)Vr.onnx.StringStringEntryProto.encode(Dr.metadataProps[Gr],jr.uint32(114).fork()).ldelim();return jr},Nr.encodeDelimited=function(Dr,jr){return this.encode(Dr,jr).ldelim()},Nr.decode=function(Dr,jr){Dr instanceof Fr||(Dr=Fr.create(Dr));for(var Gr=jr===void 0?Dr.len:Dr.pos+jr,Wr=new Vr.onnx.ModelProto;Dr.pos<Gr;){var qr=Dr.uint32();switch(qr>>>3){case 1:Wr.irVersion=Dr.int64();break;case 8:Wr.opsetImport&&Wr.opsetImport.length||(Wr.opsetImport=[]),Wr.opsetImport.push(Vr.onnx.OperatorSetIdProto.decode(Dr,Dr.uint32()));break;case 2:Wr.producerName=Dr.string();break;case 3:Wr.producerVersion=Dr.string();break;case 4:Wr.domain=Dr.string();break;case 5:Wr.modelVersion=Dr.int64();break;case 6:Wr.docString=Dr.string();break;case 7:Wr.graph=Vr.onnx.GraphProto.decode(Dr,Dr.uint32());break;case 14:Wr.metadataProps&&Wr.metadataProps.length||(Wr.metadataProps=[]),Wr.metadataProps.push(Vr.onnx.StringStringEntryProto.decode(Dr,Dr.uint32()));break;default:Dr.skipType(7&qr)}}return Wr},Nr.decodeDelimited=function(Dr){return Dr instanceof Fr||(Dr=new Fr(Dr)),this.decode(Dr,Dr.uint32())},Nr.verify=function(Dr){if(typeof Dr!="object"||Dr===null)return"object expected";if(Dr.irVersion!=null&&Dr.hasOwnProperty("irVersion")&&!(Ur.isInteger(Dr.irVersion)||Dr.irVersion&&Ur.isInteger(Dr.irVersion.low)&&Ur.isInteger(Dr.irVersion.high)))return"irVersion: integer|Long expected";if(Dr.opsetImport!=null&&Dr.hasOwnProperty("opsetImport")){if(!Array.isArray(Dr.opsetImport))return"opsetImport: array expected";for(var jr=0;jr<Dr.opsetImport.length;++jr)if(Gr=Vr.onnx.OperatorSetIdProto.verify(Dr.opsetImport[jr]))return"opsetImport."+Gr}if(Dr.producerName!=null&&Dr.hasOwnProperty("producerName")&&!Ur.isString(Dr.producerName))return"producerName: string expected";if(Dr.producerVersion!=null&&Dr.hasOwnProperty("producerVersion")&&!Ur.isString(Dr.producerVersion))return"producerVersion: string expected";if(Dr.domain!=null&&Dr.hasOwnProperty("domain")&&!Ur.isString(Dr.domain))return"domain: string expected";if(Dr.modelVersion!=null&&Dr.hasOwnProperty("modelVersion")&&!(Ur.isInteger(Dr.modelVersion)||Dr.modelVersion&&Ur.isInteger(Dr.modelVersion.low)&&Ur.isInteger(Dr.modelVersion.high)))return"modelVersion: integer|Long expected";if(Dr.docString!=null&&Dr.hasOwnProperty("docString")&&!Ur.isString(Dr.docString))return"docString: string expected";if(Dr.graph!=null&&Dr.hasOwnProperty("graph")&&(Gr=Vr.onnx.GraphProto.verify(Dr.graph)))return"graph."+Gr;if(Dr.metadataProps!=null&&Dr.hasOwnProperty("metadataProps")){if(!Array.isArray(Dr.metadataProps))return"metadataProps: array expected";for(jr=0;jr<Dr.metadataProps.length;++jr){var Gr;if(Gr=Vr.onnx.StringStringEntryProto.verify(Dr.metadataProps[jr]))return"metadataProps."+Gr}}return null},Nr.fromObject=function(Dr){if(Dr instanceof Vr.onnx.ModelProto)return Dr;var jr=new Vr.onnx.ModelProto;if(Dr.irVersion!=null&&(Ur.Long?(jr.irVersion=Ur.Long.fromValue(Dr.irVersion)).unsigned=!1:typeof Dr.irVersion=="string"?jr.irVersion=parseInt(Dr.irVersion,10):typeof Dr.irVersion=="number"?jr.irVersion=Dr.irVersion:typeof Dr.irVersion=="object"&&(jr.irVersion=new Ur.LongBits(Dr.irVersion.low>>>0,Dr.irVersion.high>>>0).toNumber())),Dr.opsetImport){if(!Array.isArray(Dr.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");jr.opsetImport=[];for(var Gr=0;Gr<Dr.opsetImport.length;++Gr){if(typeof Dr.opsetImport[Gr]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");jr.opsetImport[Gr]=Vr.onnx.OperatorSetIdProto.fromObject(Dr.opsetImport[Gr])}}if(Dr.producerName!=null&&(jr.producerName=String(Dr.producerName)),Dr.producerVersion!=null&&(jr.producerVersion=String(Dr.producerVersion)),Dr.domain!=null&&(jr.domain=String(Dr.domain)),Dr.modelVersion!=null&&(Ur.Long?(jr.modelVersion=Ur.Long.fromValue(Dr.modelVersion)).unsigned=!1:typeof Dr.modelVersion=="string"?jr.modelVersion=parseInt(Dr.modelVersion,10):typeof Dr.modelVersion=="number"?jr.modelVersion=Dr.modelVersion:typeof Dr.modelVersion=="object"&&(jr.modelVersion=new Ur.LongBits(Dr.modelVersion.low>>>0,Dr.modelVersion.high>>>0).toNumber())),Dr.docString!=null&&(jr.docString=String(Dr.docString)),Dr.graph!=null){if(typeof Dr.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");jr.graph=Vr.onnx.GraphProto.fromObject(Dr.graph)}if(Dr.metadataProps){if(!Array.isArray(Dr.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(jr.metadataProps=[],Gr=0;Gr<Dr.metadataProps.length;++Gr){if(typeof Dr.metadataProps[Gr]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");jr.metadataProps[Gr]=Vr.onnx.StringStringEntryProto.fromObject(Dr.metadataProps[Gr])}}return jr},Nr.toObject=function(Dr,jr){jr||(jr={});var Gr={};if((jr.arrays||jr.defaults)&&(Gr.opsetImport=[],Gr.metadataProps=[]),jr.defaults){if(Ur.Long){var Wr=new Ur.Long(0,0,!1);Gr.irVersion=jr.longs===String?Wr.toString():jr.longs===Number?Wr.toNumber():Wr}else Gr.irVersion=jr.longs===String?"0":0;Gr.producerName="",Gr.producerVersion="",Gr.domain="",Ur.Long?(Wr=new Ur.Long(0,0,!1),Gr.modelVersion=jr.longs===String?Wr.toString():jr.longs===Number?Wr.toNumber():Wr):Gr.modelVersion=jr.longs===String?"0":0,Gr.docString="",Gr.graph=null}if(Dr.irVersion!=null&&Dr.hasOwnProperty("irVersion")&&(typeof Dr.irVersion=="number"?Gr.irVersion=jr.longs===String?String(Dr.irVersion):Dr.irVersion:Gr.irVersion=jr.longs===String?Ur.Long.prototype.toString.call(Dr.irVersion):jr.longs===Number?new Ur.LongBits(Dr.irVersion.low>>>0,Dr.irVersion.high>>>0).toNumber():Dr.irVersion),Dr.producerName!=null&&Dr.hasOwnProperty("producerName")&&(Gr.producerName=Dr.producerName),Dr.producerVersion!=null&&Dr.hasOwnProperty("producerVersion")&&(Gr.producerVersion=Dr.producerVersion),Dr.domain!=null&&Dr.hasOwnProperty("domain")&&(Gr.domain=Dr.domain),Dr.modelVersion!=null&&Dr.hasOwnProperty("modelVersion")&&(typeof Dr.modelVersion=="number"?Gr.modelVersion=jr.longs===String?String(Dr.modelVersion):Dr.modelVersion:Gr.modelVersion=jr.longs===String?Ur.Long.prototype.toString.call(Dr.modelVersion):jr.longs===Number?new Ur.LongBits(Dr.modelVersion.low>>>0,Dr.modelVersion.high>>>0).toNumber():Dr.modelVersion),Dr.docString!=null&&Dr.hasOwnProperty("docString")&&(Gr.docString=Dr.docString),Dr.graph!=null&&Dr.hasOwnProperty("graph")&&(Gr.graph=Vr.onnx.GraphProto.toObject(Dr.graph,jr)),Dr.opsetImport&&Dr.opsetImport.length){Gr.opsetImport=[];for(var qr=0;qr<Dr.opsetImport.length;++qr)Gr.opsetImport[qr]=Vr.onnx.OperatorSetIdProto.toObject(Dr.opsetImport[qr],jr)}if(Dr.metadataProps&&Dr.metadataProps.length)for(Gr.metadataProps=[],qr=0;qr<Dr.metadataProps.length;++qr)Gr.metadataProps[qr]=Vr.onnx.StringStringEntryProto.toObject(Dr.metadataProps[qr],jr);return Gr},Nr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},Nr}(),Lr.StringStringEntryProto=function(){function Nr(Dr){if(Dr)for(var jr=Object.keys(Dr),Gr=0;Gr<jr.length;++Gr)Dr[jr[Gr]]!=null&&(this[jr[Gr]]=Dr[jr[Gr]])}return Nr.prototype.key="",Nr.prototype.value="",Nr.create=function(Dr){return new Nr(Dr)},Nr.encode=function(Dr,jr){return jr||(jr=zr.create()),Dr.key!=null&&Dr.hasOwnProperty("key")&&jr.uint32(10).string(Dr.key),Dr.value!=null&&Dr.hasOwnProperty("value")&&jr.uint32(18).string(Dr.value),jr},Nr.encodeDelimited=function(Dr,jr){return this.encode(Dr,jr).ldelim()},Nr.decode=function(Dr,jr){Dr instanceof Fr||(Dr=Fr.create(Dr));for(var Gr=jr===void 0?Dr.len:Dr.pos+jr,Wr=new Vr.onnx.StringStringEntryProto;Dr.pos<Gr;){var qr=Dr.uint32();switch(qr>>>3){case 1:Wr.key=Dr.string();break;case 2:Wr.value=Dr.string();break;default:Dr.skipType(7&qr)}}return Wr},Nr.decodeDelimited=function(Dr){return Dr instanceof Fr||(Dr=new Fr(Dr)),this.decode(Dr,Dr.uint32())},Nr.verify=function(Dr){return typeof Dr!="object"||Dr===null?"object expected":Dr.key!=null&&Dr.hasOwnProperty("key")&&!Ur.isString(Dr.key)?"key: string expected":Dr.value!=null&&Dr.hasOwnProperty("value")&&!Ur.isString(Dr.value)?"value: string expected":null},Nr.fromObject=function(Dr){if(Dr instanceof Vr.onnx.StringStringEntryProto)return Dr;var jr=new Vr.onnx.StringStringEntryProto;return Dr.key!=null&&(jr.key=String(Dr.key)),Dr.value!=null&&(jr.value=String(Dr.value)),jr},Nr.toObject=function(Dr,jr){jr||(jr={});var Gr={};return jr.defaults&&(Gr.key="",Gr.value=""),Dr.key!=null&&Dr.hasOwnProperty("key")&&(Gr.key=Dr.key),Dr.value!=null&&Dr.hasOwnProperty("value")&&(Gr.value=Dr.value),Gr},Nr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},Nr}(),Lr.TensorAnnotation=function(){function Nr(Dr){if(this.quantParameterTensorNames=[],Dr)for(var jr=Object.keys(Dr),Gr=0;Gr<jr.length;++Gr)Dr[jr[Gr]]!=null&&(this[jr[Gr]]=Dr[jr[Gr]])}return Nr.prototype.tensorName="",Nr.prototype.quantParameterTensorNames=Ur.emptyArray,Nr.create=function(Dr){return new Nr(Dr)},Nr.encode=function(Dr,jr){if(jr||(jr=zr.create()),Dr.tensorName!=null&&Dr.hasOwnProperty("tensorName")&&jr.uint32(10).string(Dr.tensorName),Dr.quantParameterTensorNames!=null&&Dr.quantParameterTensorNames.length)for(var Gr=0;Gr<Dr.quantParameterTensorNames.length;++Gr)Vr.onnx.StringStringEntryProto.encode(Dr.quantParameterTensorNames[Gr],jr.uint32(18).fork()).ldelim();return jr},Nr.encodeDelimited=function(Dr,jr){return this.encode(Dr,jr).ldelim()},Nr.decode=function(Dr,jr){Dr instanceof Fr||(Dr=Fr.create(Dr));for(var Gr=jr===void 0?Dr.len:Dr.pos+jr,Wr=new Vr.onnx.TensorAnnotation;Dr.pos<Gr;){var qr=Dr.uint32();switch(qr>>>3){case 1:Wr.tensorName=Dr.string();break;case 2:Wr.quantParameterTensorNames&&Wr.quantParameterTensorNames.length||(Wr.quantParameterTensorNames=[]),Wr.quantParameterTensorNames.push(Vr.onnx.StringStringEntryProto.decode(Dr,Dr.uint32()));break;default:Dr.skipType(7&qr)}}return Wr},Nr.decodeDelimited=function(Dr){return Dr instanceof Fr||(Dr=new Fr(Dr)),this.decode(Dr,Dr.uint32())},Nr.verify=function(Dr){if(typeof Dr!="object"||Dr===null)return"object expected";if(Dr.tensorName!=null&&Dr.hasOwnProperty("tensorName")&&!Ur.isString(Dr.tensorName))return"tensorName: string expected";if(Dr.quantParameterTensorNames!=null&&Dr.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(Dr.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var jr=0;jr<Dr.quantParameterTensorNames.length;++jr){var Gr=Vr.onnx.StringStringEntryProto.verify(Dr.quantParameterTensorNames[jr]);if(Gr)return"quantParameterTensorNames."+Gr}}return null},Nr.fromObject=function(Dr){if(Dr instanceof Vr.onnx.TensorAnnotation)return Dr;var jr=new Vr.onnx.TensorAnnotation;if(Dr.tensorName!=null&&(jr.tensorName=String(Dr.tensorName)),Dr.quantParameterTensorNames){if(!Array.isArray(Dr.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");jr.quantParameterTensorNames=[];for(var Gr=0;Gr<Dr.quantParameterTensorNames.length;++Gr){if(typeof Dr.quantParameterTensorNames[Gr]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");jr.quantParameterTensorNames[Gr]=Vr.onnx.StringStringEntryProto.fromObject(Dr.quantParameterTensorNames[Gr])}}return jr},Nr.toObject=function(Dr,jr){jr||(jr={});var Gr={};if((jr.arrays||jr.defaults)&&(Gr.quantParameterTensorNames=[]),jr.defaults&&(Gr.tensorName=""),Dr.tensorName!=null&&Dr.hasOwnProperty("tensorName")&&(Gr.tensorName=Dr.tensorName),Dr.quantParameterTensorNames&&Dr.quantParameterTensorNames.length){Gr.quantParameterTensorNames=[];for(var Wr=0;Wr<Dr.quantParameterTensorNames.length;++Wr)Gr.quantParameterTensorNames[Wr]=Vr.onnx.StringStringEntryProto.toObject(Dr.quantParameterTensorNames[Wr],jr)}return Gr},Nr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},Nr}(),Lr.GraphProto=function(){function Nr(Dr){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],Dr)for(var jr=Object.keys(Dr),Gr=0;Gr<jr.length;++Gr)Dr[jr[Gr]]!=null&&(this[jr[Gr]]=Dr[jr[Gr]])}return Nr.prototype.node=Ur.emptyArray,Nr.prototype.name="",Nr.prototype.initializer=Ur.emptyArray,Nr.prototype.docString="",Nr.prototype.input=Ur.emptyArray,Nr.prototype.output=Ur.emptyArray,Nr.prototype.valueInfo=Ur.emptyArray,Nr.prototype.quantizationAnnotation=Ur.emptyArray,Nr.create=function(Dr){return new Nr(Dr)},Nr.encode=function(Dr,jr){if(jr||(jr=zr.create()),Dr.node!=null&&Dr.node.length)for(var Gr=0;Gr<Dr.node.length;++Gr)Vr.onnx.NodeProto.encode(Dr.node[Gr],jr.uint32(10).fork()).ldelim();if(Dr.name!=null&&Dr.hasOwnProperty("name")&&jr.uint32(18).string(Dr.name),Dr.initializer!=null&&Dr.initializer.length)for(Gr=0;Gr<Dr.initializer.length;++Gr)Vr.onnx.TensorProto.encode(Dr.initializer[Gr],jr.uint32(42).fork()).ldelim();if(Dr.docString!=null&&Dr.hasOwnProperty("docString")&&jr.uint32(82).string(Dr.docString),Dr.input!=null&&Dr.input.length)for(Gr=0;Gr<Dr.input.length;++Gr)Vr.onnx.ValueInfoProto.encode(Dr.input[Gr],jr.uint32(90).fork()).ldelim();if(Dr.output!=null&&Dr.output.length)for(Gr=0;Gr<Dr.output.length;++Gr)Vr.onnx.ValueInfoProto.encode(Dr.output[Gr],jr.uint32(98).fork()).ldelim();if(Dr.valueInfo!=null&&Dr.valueInfo.length)for(Gr=0;Gr<Dr.valueInfo.length;++Gr)Vr.onnx.ValueInfoProto.encode(Dr.valueInfo[Gr],jr.uint32(106).fork()).ldelim();if(Dr.quantizationAnnotation!=null&&Dr.quantizationAnnotation.length)for(Gr=0;Gr<Dr.quantizationAnnotation.length;++Gr)Vr.onnx.TensorAnnotation.encode(Dr.quantizationAnnotation[Gr],jr.uint32(114).fork()).ldelim();return jr},Nr.encodeDelimited=function(Dr,jr){return this.encode(Dr,jr).ldelim()},Nr.decode=function(Dr,jr){Dr instanceof Fr||(Dr=Fr.create(Dr));for(var Gr=jr===void 0?Dr.len:Dr.pos+jr,Wr=new Vr.onnx.GraphProto;Dr.pos<Gr;){var qr=Dr.uint32();switch(qr>>>3){case 1:Wr.node&&Wr.node.length||(Wr.node=[]),Wr.node.push(Vr.onnx.NodeProto.decode(Dr,Dr.uint32()));break;case 2:Wr.name=Dr.string();break;case 5:Wr.initializer&&Wr.initializer.length||(Wr.initializer=[]),Wr.initializer.push(Vr.onnx.TensorProto.decode(Dr,Dr.uint32()));break;case 10:Wr.docString=Dr.string();break;case 11:Wr.input&&Wr.input.length||(Wr.input=[]),Wr.input.push(Vr.onnx.ValueInfoProto.decode(Dr,Dr.uint32()));break;case 12:Wr.output&&Wr.output.length||(Wr.output=[]),Wr.output.push(Vr.onnx.ValueInfoProto.decode(Dr,Dr.uint32()));break;case 13:Wr.valueInfo&&Wr.valueInfo.length||(Wr.valueInfo=[]),Wr.valueInfo.push(Vr.onnx.ValueInfoProto.decode(Dr,Dr.uint32()));break;case 14:Wr.quantizationAnnotation&&Wr.quantizationAnnotation.length||(Wr.quantizationAnnotation=[]),Wr.quantizationAnnotation.push(Vr.onnx.TensorAnnotation.decode(Dr,Dr.uint32()));break;default:Dr.skipType(7&qr)}}return Wr},Nr.decodeDelimited=function(Dr){return Dr instanceof Fr||(Dr=new Fr(Dr)),this.decode(Dr,Dr.uint32())},Nr.verify=function(Dr){if(typeof Dr!="object"||Dr===null)return"object expected";if(Dr.node!=null&&Dr.hasOwnProperty("node")){if(!Array.isArray(Dr.node))return"node: array expected";for(var jr=0;jr<Dr.node.length;++jr)if(Gr=Vr.onnx.NodeProto.verify(Dr.node[jr]))return"node."+Gr}if(Dr.name!=null&&Dr.hasOwnProperty("name")&&!Ur.isString(Dr.name))return"name: string expected";if(Dr.initializer!=null&&Dr.hasOwnProperty("initializer")){if(!Array.isArray(Dr.initializer))return"initializer: array expected";for(jr=0;jr<Dr.initializer.length;++jr)if(Gr=Vr.onnx.TensorProto.verify(Dr.initializer[jr]))return"initializer."+Gr}if(Dr.docString!=null&&Dr.hasOwnProperty("docString")&&!Ur.isString(Dr.docString))return"docString: string expected";if(Dr.input!=null&&Dr.hasOwnProperty("input")){if(!Array.isArray(Dr.input))return"input: array expected";for(jr=0;jr<Dr.input.length;++jr)if(Gr=Vr.onnx.ValueInfoProto.verify(Dr.input[jr]))return"input."+Gr}if(Dr.output!=null&&Dr.hasOwnProperty("output")){if(!Array.isArray(Dr.output))return"output: array expected";for(jr=0;jr<Dr.output.length;++jr)if(Gr=Vr.onnx.ValueInfoProto.verify(Dr.output[jr]))return"output."+Gr}if(Dr.valueInfo!=null&&Dr.hasOwnProperty("valueInfo")){if(!Array.isArray(Dr.valueInfo))return"valueInfo: array expected";for(jr=0;jr<Dr.valueInfo.length;++jr)if(Gr=Vr.onnx.ValueInfoProto.verify(Dr.valueInfo[jr]))return"valueInfo."+Gr}if(Dr.quantizationAnnotation!=null&&Dr.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(Dr.quantizationAnnotation))return"quantizationAnnotation: array expected";for(jr=0;jr<Dr.quantizationAnnotation.length;++jr){var Gr;if(Gr=Vr.onnx.TensorAnnotation.verify(Dr.quantizationAnnotation[jr]))return"quantizationAnnotation."+Gr}}return null},Nr.fromObject=function(Dr){if(Dr instanceof Vr.onnx.GraphProto)return Dr;var jr=new Vr.onnx.GraphProto;if(Dr.node){if(!Array.isArray(Dr.node))throw TypeError(".onnx.GraphProto.node: array expected");jr.node=[];for(var Gr=0;Gr<Dr.node.length;++Gr){if(typeof Dr.node[Gr]!="object")throw TypeError(".onnx.GraphProto.node: object expected");jr.node[Gr]=Vr.onnx.NodeProto.fromObject(Dr.node[Gr])}}if(Dr.name!=null&&(jr.name=String(Dr.name)),Dr.initializer){if(!Array.isArray(Dr.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(jr.initializer=[],Gr=0;Gr<Dr.initializer.length;++Gr){if(typeof Dr.initializer[Gr]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");jr.initializer[Gr]=Vr.onnx.TensorProto.fromObject(Dr.initializer[Gr])}}if(Dr.docString!=null&&(jr.docString=String(Dr.docString)),Dr.input){if(!Array.isArray(Dr.input))throw TypeError(".onnx.GraphProto.input: array expected");for(jr.input=[],Gr=0;Gr<Dr.input.length;++Gr){if(typeof Dr.input[Gr]!="object")throw TypeError(".onnx.GraphProto.input: object expected");jr.input[Gr]=Vr.onnx.ValueInfoProto.fromObject(Dr.input[Gr])}}if(Dr.output){if(!Array.isArray(Dr.output))throw TypeError(".onnx.GraphProto.output: array expected");for(jr.output=[],Gr=0;Gr<Dr.output.length;++Gr){if(typeof Dr.output[Gr]!="object")throw TypeError(".onnx.GraphProto.output: object expected");jr.output[Gr]=Vr.onnx.ValueInfoProto.fromObject(Dr.output[Gr])}}if(Dr.valueInfo){if(!Array.isArray(Dr.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(jr.valueInfo=[],Gr=0;Gr<Dr.valueInfo.length;++Gr){if(typeof Dr.valueInfo[Gr]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");jr.valueInfo[Gr]=Vr.onnx.ValueInfoProto.fromObject(Dr.valueInfo[Gr])}}if(Dr.quantizationAnnotation){if(!Array.isArray(Dr.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(jr.quantizationAnnotation=[],Gr=0;Gr<Dr.quantizationAnnotation.length;++Gr){if(typeof Dr.quantizationAnnotation[Gr]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");jr.quantizationAnnotation[Gr]=Vr.onnx.TensorAnnotation.fromObject(Dr.quantizationAnnotation[Gr])}}return jr},Nr.toObject=function(Dr,jr){jr||(jr={});var Gr={};if((jr.arrays||jr.defaults)&&(Gr.node=[],Gr.initializer=[],Gr.input=[],Gr.output=[],Gr.valueInfo=[],Gr.quantizationAnnotation=[]),jr.defaults&&(Gr.name="",Gr.docString=""),Dr.node&&Dr.node.length){Gr.node=[];for(var Wr=0;Wr<Dr.node.length;++Wr)Gr.node[Wr]=Vr.onnx.NodeProto.toObject(Dr.node[Wr],jr)}if(Dr.name!=null&&Dr.hasOwnProperty("name")&&(Gr.name=Dr.name),Dr.initializer&&Dr.initializer.length)for(Gr.initializer=[],Wr=0;Wr<Dr.initializer.length;++Wr)Gr.initializer[Wr]=Vr.onnx.TensorProto.toObject(Dr.initializer[Wr],jr);if(Dr.docString!=null&&Dr.hasOwnProperty("docString")&&(Gr.docString=Dr.docString),Dr.input&&Dr.input.length)for(Gr.input=[],Wr=0;Wr<Dr.input.length;++Wr)Gr.input[Wr]=Vr.onnx.ValueInfoProto.toObject(Dr.input[Wr],jr);if(Dr.output&&Dr.output.length)for(Gr.output=[],Wr=0;Wr<Dr.output.length;++Wr)Gr.output[Wr]=Vr.onnx.ValueInfoProto.toObject(Dr.output[Wr],jr);if(Dr.valueInfo&&Dr.valueInfo.length)for(Gr.valueInfo=[],Wr=0;Wr<Dr.valueInfo.length;++Wr)Gr.valueInfo[Wr]=Vr.onnx.ValueInfoProto.toObject(Dr.valueInfo[Wr],jr);if(Dr.quantizationAnnotation&&Dr.quantizationAnnotation.length)for(Gr.quantizationAnnotation=[],Wr=0;Wr<Dr.quantizationAnnotation.length;++Wr)Gr.quantizationAnnotation[Wr]=Vr.onnx.TensorAnnotation.toObject(Dr.quantizationAnnotation[Wr],jr);return Gr},Nr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},Nr}(),Lr.TensorProto=function(){function Nr(Dr){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],Dr)for(var jr=Object.keys(Dr),Gr=0;Gr<jr.length;++Gr)Dr[jr[Gr]]!=null&&(this[jr[Gr]]=Dr[jr[Gr]])}return Nr.prototype.dims=Ur.emptyArray,Nr.prototype.dataType=0,Nr.prototype.segment=null,Nr.prototype.floatData=Ur.emptyArray,Nr.prototype.int32Data=Ur.emptyArray,Nr.prototype.stringData=Ur.emptyArray,Nr.prototype.int64Data=Ur.emptyArray,Nr.prototype.name="",Nr.prototype.docString="",Nr.prototype.rawData=Ur.newBuffer([]),Nr.prototype.externalData=Ur.emptyArray,Nr.prototype.dataLocation=0,Nr.prototype.doubleData=Ur.emptyArray,Nr.prototype.uint64Data=Ur.emptyArray,Nr.create=function(Dr){return new Nr(Dr)},Nr.encode=function(Dr,jr){if(jr||(jr=zr.create()),Dr.dims!=null&&Dr.dims.length){jr.uint32(10).fork();for(var Gr=0;Gr<Dr.dims.length;++Gr)jr.int64(Dr.dims[Gr]);jr.ldelim()}if(Dr.dataType!=null&&Dr.hasOwnProperty("dataType")&&jr.uint32(16).int32(Dr.dataType),Dr.segment!=null&&Dr.hasOwnProperty("segment")&&Vr.onnx.TensorProto.Segment.encode(Dr.segment,jr.uint32(26).fork()).ldelim(),Dr.floatData!=null&&Dr.floatData.length){for(jr.uint32(34).fork(),Gr=0;Gr<Dr.floatData.length;++Gr)jr.float(Dr.floatData[Gr]);jr.ldelim()}if(Dr.int32Data!=null&&Dr.int32Data.length){for(jr.uint32(42).fork(),Gr=0;Gr<Dr.int32Data.length;++Gr)jr.int32(Dr.int32Data[Gr]);jr.ldelim()}if(Dr.stringData!=null&&Dr.stringData.length)for(Gr=0;Gr<Dr.stringData.length;++Gr)jr.uint32(50).bytes(Dr.stringData[Gr]);if(Dr.int64Data!=null&&Dr.int64Data.length){for(jr.uint32(58).fork(),Gr=0;Gr<Dr.int64Data.length;++Gr)jr.int64(Dr.int64Data[Gr]);jr.ldelim()}if(Dr.name!=null&&Dr.hasOwnProperty("name")&&jr.uint32(66).string(Dr.name),Dr.rawData!=null&&Dr.hasOwnProperty("rawData")&&jr.uint32(74).bytes(Dr.rawData),Dr.doubleData!=null&&Dr.doubleData.length){for(jr.uint32(82).fork(),Gr=0;Gr<Dr.doubleData.length;++Gr)jr.double(Dr.doubleData[Gr]);jr.ldelim()}if(Dr.uint64Data!=null&&Dr.uint64Data.length){for(jr.uint32(90).fork(),Gr=0;Gr<Dr.uint64Data.length;++Gr)jr.uint64(Dr.uint64Data[Gr]);jr.ldelim()}if(Dr.docString!=null&&Dr.hasOwnProperty("docString")&&jr.uint32(98).string(Dr.docString),Dr.externalData!=null&&Dr.externalData.length)for(Gr=0;Gr<Dr.externalData.length;++Gr)Vr.onnx.StringStringEntryProto.encode(Dr.externalData[Gr],jr.uint32(106).fork()).ldelim();return Dr.dataLocation!=null&&Dr.hasOwnProperty("dataLocation")&&jr.uint32(112).int32(Dr.dataLocation),jr},Nr.encodeDelimited=function(Dr,jr){return this.encode(Dr,jr).ldelim()},Nr.decode=function(Dr,jr){Dr instanceof Fr||(Dr=Fr.create(Dr));for(var Gr=jr===void 0?Dr.len:Dr.pos+jr,Wr=new Vr.onnx.TensorProto;Dr.pos<Gr;){var qr=Dr.uint32();switch(qr>>>3){case 1:if(Wr.dims&&Wr.dims.length||(Wr.dims=[]),(7&qr)==2)for(var Kr=Dr.uint32()+Dr.pos;Dr.pos<Kr;)Wr.dims.push(Dr.int64());else Wr.dims.push(Dr.int64());break;case 2:Wr.dataType=Dr.int32();break;case 3:Wr.segment=Vr.onnx.TensorProto.Segment.decode(Dr,Dr.uint32());break;case 4:if(Wr.floatData&&Wr.floatData.length||(Wr.floatData=[]),(7&qr)==2)for(Kr=Dr.uint32()+Dr.pos;Dr.pos<Kr;)Wr.floatData.push(Dr.float());else Wr.floatData.push(Dr.float());break;case 5:if(Wr.int32Data&&Wr.int32Data.length||(Wr.int32Data=[]),(7&qr)==2)for(Kr=Dr.uint32()+Dr.pos;Dr.pos<Kr;)Wr.int32Data.push(Dr.int32());else Wr.int32Data.push(Dr.int32());break;case 6:Wr.stringData&&Wr.stringData.length||(Wr.stringData=[]),Wr.stringData.push(Dr.bytes());break;case 7:if(Wr.int64Data&&Wr.int64Data.length||(Wr.int64Data=[]),(7&qr)==2)for(Kr=Dr.uint32()+Dr.pos;Dr.pos<Kr;)Wr.int64Data.push(Dr.int64());else Wr.int64Data.push(Dr.int64());break;case 8:Wr.name=Dr.string();break;case 12:Wr.docString=Dr.string();break;case 9:Wr.rawData=Dr.bytes();break;case 13:Wr.externalData&&Wr.externalData.length||(Wr.externalData=[]),Wr.externalData.push(Vr.onnx.StringStringEntryProto.decode(Dr,Dr.uint32()));break;case 14:Wr.dataLocation=Dr.int32();break;case 10:if(Wr.doubleData&&Wr.doubleData.length||(Wr.doubleData=[]),(7&qr)==2)for(Kr=Dr.uint32()+Dr.pos;Dr.pos<Kr;)Wr.doubleData.push(Dr.double());else Wr.doubleData.push(Dr.double());break;case 11:if(Wr.uint64Data&&Wr.uint64Data.length||(Wr.uint64Data=[]),(7&qr)==2)for(Kr=Dr.uint32()+Dr.pos;Dr.pos<Kr;)Wr.uint64Data.push(Dr.uint64());else Wr.uint64Data.push(Dr.uint64());break;default:Dr.skipType(7&qr)}}return Wr},Nr.decodeDelimited=function(Dr){return Dr instanceof Fr||(Dr=new Fr(Dr)),this.decode(Dr,Dr.uint32())},Nr.verify=function(Dr){if(typeof Dr!="object"||Dr===null)return"object expected";if(Dr.dims!=null&&Dr.hasOwnProperty("dims")){if(!Array.isArray(Dr.dims))return"dims: array expected";for(var jr=0;jr<Dr.dims.length;++jr)if(!(Ur.isInteger(Dr.dims[jr])||Dr.dims[jr]&&Ur.isInteger(Dr.dims[jr].low)&&Ur.isInteger(Dr.dims[jr].high)))return"dims: integer|Long[] expected"}if(Dr.dataType!=null&&Dr.hasOwnProperty("dataType")&&!Ur.isInteger(Dr.dataType))return"dataType: integer expected";if(Dr.segment!=null&&Dr.hasOwnProperty("segment")&&(Gr=Vr.onnx.TensorProto.Segment.verify(Dr.segment)))return"segment."+Gr;if(Dr.floatData!=null&&Dr.hasOwnProperty("floatData")){if(!Array.isArray(Dr.floatData))return"floatData: array expected";for(jr=0;jr<Dr.floatData.length;++jr)if(typeof Dr.floatData[jr]!="number")return"floatData: number[] expected"}if(Dr.int32Data!=null&&Dr.hasOwnProperty("int32Data")){if(!Array.isArray(Dr.int32Data))return"int32Data: array expected";for(jr=0;jr<Dr.int32Data.length;++jr)if(!Ur.isInteger(Dr.int32Data[jr]))return"int32Data: integer[] expected"}if(Dr.stringData!=null&&Dr.hasOwnProperty("stringData")){if(!Array.isArray(Dr.stringData))return"stringData: array expected";for(jr=0;jr<Dr.stringData.length;++jr)if(!(Dr.stringData[jr]&&typeof Dr.stringData[jr].length=="number"||Ur.isString(Dr.stringData[jr])))return"stringData: buffer[] expected"}if(Dr.int64Data!=null&&Dr.hasOwnProperty("int64Data")){if(!Array.isArray(Dr.int64Data))return"int64Data: array expected";for(jr=0;jr<Dr.int64Data.length;++jr)if(!(Ur.isInteger(Dr.int64Data[jr])||Dr.int64Data[jr]&&Ur.isInteger(Dr.int64Data[jr].low)&&Ur.isInteger(Dr.int64Data[jr].high)))return"int64Data: integer|Long[] expected"}if(Dr.name!=null&&Dr.hasOwnProperty("name")&&!Ur.isString(Dr.name))return"name: string expected";if(Dr.docString!=null&&Dr.hasOwnProperty("docString")&&!Ur.isString(Dr.docString))return"docString: string expected";if(Dr.rawData!=null&&Dr.hasOwnProperty("rawData")&&!(Dr.rawData&&typeof Dr.rawData.length=="number"||Ur.isString(Dr.rawData)))return"rawData: buffer expected";if(Dr.externalData!=null&&Dr.hasOwnProperty("externalData")){if(!Array.isArray(Dr.externalData))return"externalData: array expected";for(jr=0;jr<Dr.externalData.length;++jr){var Gr;if(Gr=Vr.onnx.StringStringEntryProto.verify(Dr.externalData[jr]))return"externalData."+Gr}}if(Dr.dataLocation!=null&&Dr.hasOwnProperty("dataLocation"))switch(Dr.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(Dr.doubleData!=null&&Dr.hasOwnProperty("doubleData")){if(!Array.isArray(Dr.doubleData))return"doubleData: array expected";for(jr=0;jr<Dr.doubleData.length;++jr)if(typeof Dr.doubleData[jr]!="number")return"doubleData: number[] expected"}if(Dr.uint64Data!=null&&Dr.hasOwnProperty("uint64Data")){if(!Array.isArray(Dr.uint64Data))return"uint64Data: array expected";for(jr=0;jr<Dr.uint64Data.length;++jr)if(!(Ur.isInteger(Dr.uint64Data[jr])||Dr.uint64Data[jr]&&Ur.isInteger(Dr.uint64Data[jr].low)&&Ur.isInteger(Dr.uint64Data[jr].high)))return"uint64Data: integer|Long[] expected"}return null},Nr.fromObject=function(Dr){if(Dr instanceof Vr.onnx.TensorProto)return Dr;var jr=new Vr.onnx.TensorProto;if(Dr.dims){if(!Array.isArray(Dr.dims))throw TypeError(".onnx.TensorProto.dims: array expected");jr.dims=[];for(var Gr=0;Gr<Dr.dims.length;++Gr)Ur.Long?(jr.dims[Gr]=Ur.Long.fromValue(Dr.dims[Gr])).unsigned=!1:typeof Dr.dims[Gr]=="string"?jr.dims[Gr]=parseInt(Dr.dims[Gr],10):typeof Dr.dims[Gr]=="number"?jr.dims[Gr]=Dr.dims[Gr]:typeof Dr.dims[Gr]=="object"&&(jr.dims[Gr]=new Ur.LongBits(Dr.dims[Gr].low>>>0,Dr.dims[Gr].high>>>0).toNumber())}if(Dr.dataType!=null&&(jr.dataType=0|Dr.dataType),Dr.segment!=null){if(typeof Dr.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");jr.segment=Vr.onnx.TensorProto.Segment.fromObject(Dr.segment)}if(Dr.floatData){if(!Array.isArray(Dr.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(jr.floatData=[],Gr=0;Gr<Dr.floatData.length;++Gr)jr.floatData[Gr]=Number(Dr.floatData[Gr])}if(Dr.int32Data){if(!Array.isArray(Dr.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(jr.int32Data=[],Gr=0;Gr<Dr.int32Data.length;++Gr)jr.int32Data[Gr]=0|Dr.int32Data[Gr]}if(Dr.stringData){if(!Array.isArray(Dr.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(jr.stringData=[],Gr=0;Gr<Dr.stringData.length;++Gr)typeof Dr.stringData[Gr]=="string"?Ur.base64.decode(Dr.stringData[Gr],jr.stringData[Gr]=Ur.newBuffer(Ur.base64.length(Dr.stringData[Gr])),0):Dr.stringData[Gr].length&&(jr.stringData[Gr]=Dr.stringData[Gr])}if(Dr.int64Data){if(!Array.isArray(Dr.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(jr.int64Data=[],Gr=0;Gr<Dr.int64Data.length;++Gr)Ur.Long?(jr.int64Data[Gr]=Ur.Long.fromValue(Dr.int64Data[Gr])).unsigned=!1:typeof Dr.int64Data[Gr]=="string"?jr.int64Data[Gr]=parseInt(Dr.int64Data[Gr],10):typeof Dr.int64Data[Gr]=="number"?jr.int64Data[Gr]=Dr.int64Data[Gr]:typeof Dr.int64Data[Gr]=="object"&&(jr.int64Data[Gr]=new Ur.LongBits(Dr.int64Data[Gr].low>>>0,Dr.int64Data[Gr].high>>>0).toNumber())}if(Dr.name!=null&&(jr.name=String(Dr.name)),Dr.docString!=null&&(jr.docString=String(Dr.docString)),Dr.rawData!=null&&(typeof Dr.rawData=="string"?Ur.base64.decode(Dr.rawData,jr.rawData=Ur.newBuffer(Ur.base64.length(Dr.rawData)),0):Dr.rawData.length&&(jr.rawData=Dr.rawData)),Dr.externalData){if(!Array.isArray(Dr.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(jr.externalData=[],Gr=0;Gr<Dr.externalData.length;++Gr){if(typeof Dr.externalData[Gr]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");jr.externalData[Gr]=Vr.onnx.StringStringEntryProto.fromObject(Dr.externalData[Gr])}}switch(Dr.dataLocation){case"DEFAULT":case 0:jr.dataLocation=0;break;case"EXTERNAL":case 1:jr.dataLocation=1}if(Dr.doubleData){if(!Array.isArray(Dr.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(jr.doubleData=[],Gr=0;Gr<Dr.doubleData.length;++Gr)jr.doubleData[Gr]=Number(Dr.doubleData[Gr])}if(Dr.uint64Data){if(!Array.isArray(Dr.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(jr.uint64Data=[],Gr=0;Gr<Dr.uint64Data.length;++Gr)Ur.Long?(jr.uint64Data[Gr]=Ur.Long.fromValue(Dr.uint64Data[Gr])).unsigned=!0:typeof Dr.uint64Data[Gr]=="string"?jr.uint64Data[Gr]=parseInt(Dr.uint64Data[Gr],10):typeof Dr.uint64Data[Gr]=="number"?jr.uint64Data[Gr]=Dr.uint64Data[Gr]:typeof Dr.uint64Data[Gr]=="object"&&(jr.uint64Data[Gr]=new Ur.LongBits(Dr.uint64Data[Gr].low>>>0,Dr.uint64Data[Gr].high>>>0).toNumber(!0))}return jr},Nr.toObject=function(Dr,jr){jr||(jr={});var Gr={};if((jr.arrays||jr.defaults)&&(Gr.dims=[],Gr.floatData=[],Gr.int32Data=[],Gr.stringData=[],Gr.int64Data=[],Gr.doubleData=[],Gr.uint64Data=[],Gr.externalData=[]),jr.defaults&&(Gr.dataType=0,Gr.segment=null,Gr.name="",jr.bytes===String?Gr.rawData="":(Gr.rawData=[],jr.bytes!==Array&&(Gr.rawData=Ur.newBuffer(Gr.rawData))),Gr.docString="",Gr.dataLocation=jr.enums===String?"DEFAULT":0),Dr.dims&&Dr.dims.length){Gr.dims=[];for(var Wr=0;Wr<Dr.dims.length;++Wr)typeof Dr.dims[Wr]=="number"?Gr.dims[Wr]=jr.longs===String?String(Dr.dims[Wr]):Dr.dims[Wr]:Gr.dims[Wr]=jr.longs===String?Ur.Long.prototype.toString.call(Dr.dims[Wr]):jr.longs===Number?new Ur.LongBits(Dr.dims[Wr].low>>>0,Dr.dims[Wr].high>>>0).toNumber():Dr.dims[Wr]}if(Dr.dataType!=null&&Dr.hasOwnProperty("dataType")&&(Gr.dataType=Dr.dataType),Dr.segment!=null&&Dr.hasOwnProperty("segment")&&(Gr.segment=Vr.onnx.TensorProto.Segment.toObject(Dr.segment,jr)),Dr.floatData&&Dr.floatData.length)for(Gr.floatData=[],Wr=0;Wr<Dr.floatData.length;++Wr)Gr.floatData[Wr]=jr.json&&!isFinite(Dr.floatData[Wr])?String(Dr.floatData[Wr]):Dr.floatData[Wr];if(Dr.int32Data&&Dr.int32Data.length)for(Gr.int32Data=[],Wr=0;Wr<Dr.int32Data.length;++Wr)Gr.int32Data[Wr]=Dr.int32Data[Wr];if(Dr.stringData&&Dr.stringData.length)for(Gr.stringData=[],Wr=0;Wr<Dr.stringData.length;++Wr)Gr.stringData[Wr]=jr.bytes===String?Ur.base64.encode(Dr.stringData[Wr],0,Dr.stringData[Wr].length):jr.bytes===Array?Array.prototype.slice.call(Dr.stringData[Wr]):Dr.stringData[Wr];if(Dr.int64Data&&Dr.int64Data.length)for(Gr.int64Data=[],Wr=0;Wr<Dr.int64Data.length;++Wr)typeof Dr.int64Data[Wr]=="number"?Gr.int64Data[Wr]=jr.longs===String?String(Dr.int64Data[Wr]):Dr.int64Data[Wr]:Gr.int64Data[Wr]=jr.longs===String?Ur.Long.prototype.toString.call(Dr.int64Data[Wr]):jr.longs===Number?new Ur.LongBits(Dr.int64Data[Wr].low>>>0,Dr.int64Data[Wr].high>>>0).toNumber():Dr.int64Data[Wr];if(Dr.name!=null&&Dr.hasOwnProperty("name")&&(Gr.name=Dr.name),Dr.rawData!=null&&Dr.hasOwnProperty("rawData")&&(Gr.rawData=jr.bytes===String?Ur.base64.encode(Dr.rawData,0,Dr.rawData.length):jr.bytes===Array?Array.prototype.slice.call(Dr.rawData):Dr.rawData),Dr.doubleData&&Dr.doubleData.length)for(Gr.doubleData=[],Wr=0;Wr<Dr.doubleData.length;++Wr)Gr.doubleData[Wr]=jr.json&&!isFinite(Dr.doubleData[Wr])?String(Dr.doubleData[Wr]):Dr.doubleData[Wr];if(Dr.uint64Data&&Dr.uint64Data.length)for(Gr.uint64Data=[],Wr=0;Wr<Dr.uint64Data.length;++Wr)typeof Dr.uint64Data[Wr]=="number"?Gr.uint64Data[Wr]=jr.longs===String?String(Dr.uint64Data[Wr]):Dr.uint64Data[Wr]:Gr.uint64Data[Wr]=jr.longs===String?Ur.Long.prototype.toString.call(Dr.uint64Data[Wr]):jr.longs===Number?new Ur.LongBits(Dr.uint64Data[Wr].low>>>0,Dr.uint64Data[Wr].high>>>0).toNumber(!0):Dr.uint64Data[Wr];if(Dr.docString!=null&&Dr.hasOwnProperty("docString")&&(Gr.docString=Dr.docString),Dr.externalData&&Dr.externalData.length)for(Gr.externalData=[],Wr=0;Wr<Dr.externalData.length;++Wr)Gr.externalData[Wr]=Vr.onnx.StringStringEntryProto.toObject(Dr.externalData[Wr],jr);return Dr.dataLocation!=null&&Dr.hasOwnProperty("dataLocation")&&(Gr.dataLocation=jr.enums===String?Vr.onnx.TensorProto.DataLocation[Dr.dataLocation]:Dr.dataLocation),Gr},Nr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},Nr.DataType=function(){var Dr={},jr=Object.create(Dr);return jr[Dr[0]="UNDEFINED"]=0,jr[Dr[1]="FLOAT"]=1,jr[Dr[2]="UINT8"]=2,jr[Dr[3]="INT8"]=3,jr[Dr[4]="UINT16"]=4,jr[Dr[5]="INT16"]=5,jr[Dr[6]="INT32"]=6,jr[Dr[7]="INT64"]=7,jr[Dr[8]="STRING"]=8,jr[Dr[9]="BOOL"]=9,jr[Dr[10]="FLOAT16"]=10,jr[Dr[11]="DOUBLE"]=11,jr[Dr[12]="UINT32"]=12,jr[Dr[13]="UINT64"]=13,jr[Dr[14]="COMPLEX64"]=14,jr[Dr[15]="COMPLEX128"]=15,jr[Dr[16]="BFLOAT16"]=16,jr}(),Nr.Segment=function(){function Dr(jr){if(jr)for(var Gr=Object.keys(jr),Wr=0;Wr<Gr.length;++Wr)jr[Gr[Wr]]!=null&&(this[Gr[Wr]]=jr[Gr[Wr]])}return Dr.prototype.begin=Ur.Long?Ur.Long.fromBits(0,0,!1):0,Dr.prototype.end=Ur.Long?Ur.Long.fromBits(0,0,!1):0,Dr.create=function(jr){return new Dr(jr)},Dr.encode=function(jr,Gr){return Gr||(Gr=zr.create()),jr.begin!=null&&jr.hasOwnProperty("begin")&&Gr.uint32(8).int64(jr.begin),jr.end!=null&&jr.hasOwnProperty("end")&&Gr.uint32(16).int64(jr.end),Gr},Dr.encodeDelimited=function(jr,Gr){return this.encode(jr,Gr).ldelim()},Dr.decode=function(jr,Gr){jr instanceof Fr||(jr=Fr.create(jr));for(var Wr=Gr===void 0?jr.len:jr.pos+Gr,qr=new Vr.onnx.TensorProto.Segment;jr.pos<Wr;){var Kr=jr.uint32();switch(Kr>>>3){case 1:qr.begin=jr.int64();break;case 2:qr.end=jr.int64();break;default:jr.skipType(7&Kr)}}return qr},Dr.decodeDelimited=function(jr){return jr instanceof Fr||(jr=new Fr(jr)),this.decode(jr,jr.uint32())},Dr.verify=function(jr){return typeof jr!="object"||jr===null?"object expected":jr.begin!=null&&jr.hasOwnProperty("begin")&&!(Ur.isInteger(jr.begin)||jr.begin&&Ur.isInteger(jr.begin.low)&&Ur.isInteger(jr.begin.high))?"begin: integer|Long expected":jr.end!=null&&jr.hasOwnProperty("end")&&!(Ur.isInteger(jr.end)||jr.end&&Ur.isInteger(jr.end.low)&&Ur.isInteger(jr.end.high))?"end: integer|Long expected":null},Dr.fromObject=function(jr){if(jr instanceof Vr.onnx.TensorProto.Segment)return jr;var Gr=new Vr.onnx.TensorProto.Segment;return jr.begin!=null&&(Ur.Long?(Gr.begin=Ur.Long.fromValue(jr.begin)).unsigned=!1:typeof jr.begin=="string"?Gr.begin=parseInt(jr.begin,10):typeof jr.begin=="number"?Gr.begin=jr.begin:typeof jr.begin=="object"&&(Gr.begin=new Ur.LongBits(jr.begin.low>>>0,jr.begin.high>>>0).toNumber())),jr.end!=null&&(Ur.Long?(Gr.end=Ur.Long.fromValue(jr.end)).unsigned=!1:typeof jr.end=="string"?Gr.end=parseInt(jr.end,10):typeof jr.end=="number"?Gr.end=jr.end:typeof jr.end=="object"&&(Gr.end=new Ur.LongBits(jr.end.low>>>0,jr.end.high>>>0).toNumber())),Gr},Dr.toObject=function(jr,Gr){Gr||(Gr={});var Wr={};if(Gr.defaults){if(Ur.Long){var qr=new Ur.Long(0,0,!1);Wr.begin=Gr.longs===String?qr.toString():Gr.longs===Number?qr.toNumber():qr}else Wr.begin=Gr.longs===String?"0":0;Ur.Long?(qr=new Ur.Long(0,0,!1),Wr.end=Gr.longs===String?qr.toString():Gr.longs===Number?qr.toNumber():qr):Wr.end=Gr.longs===String?"0":0}return jr.begin!=null&&jr.hasOwnProperty("begin")&&(typeof jr.begin=="number"?Wr.begin=Gr.longs===String?String(jr.begin):jr.begin:Wr.begin=Gr.longs===String?Ur.Long.prototype.toString.call(jr.begin):Gr.longs===Number?new Ur.LongBits(jr.begin.low>>>0,jr.begin.high>>>0).toNumber():jr.begin),jr.end!=null&&jr.hasOwnProperty("end")&&(typeof jr.end=="number"?Wr.end=Gr.longs===String?String(jr.end):jr.end:Wr.end=Gr.longs===String?Ur.Long.prototype.toString.call(jr.end):Gr.longs===Number?new Ur.LongBits(jr.end.low>>>0,jr.end.high>>>0).toNumber():jr.end),Wr},Dr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},Dr}(),Nr.DataLocation=function(){var Dr={},jr=Object.create(Dr);return jr[Dr[0]="DEFAULT"]=0,jr[Dr[1]="EXTERNAL"]=1,jr}(),Nr}(),Lr.TensorShapeProto=function(){function Nr(Dr){if(this.dim=[],Dr)for(var jr=Object.keys(Dr),Gr=0;Gr<jr.length;++Gr)Dr[jr[Gr]]!=null&&(this[jr[Gr]]=Dr[jr[Gr]])}return Nr.prototype.dim=Ur.emptyArray,Nr.create=function(Dr){return new Nr(Dr)},Nr.encode=function(Dr,jr){if(jr||(jr=zr.create()),Dr.dim!=null&&Dr.dim.length)for(var Gr=0;Gr<Dr.dim.length;++Gr)Vr.onnx.TensorShapeProto.Dimension.encode(Dr.dim[Gr],jr.uint32(10).fork()).ldelim();return jr},Nr.encodeDelimited=function(Dr,jr){return this.encode(Dr,jr).ldelim()},Nr.decode=function(Dr,jr){Dr instanceof Fr||(Dr=Fr.create(Dr));for(var Gr=jr===void 0?Dr.len:Dr.pos+jr,Wr=new Vr.onnx.TensorShapeProto;Dr.pos<Gr;){var qr=Dr.uint32();qr>>>3==1?(Wr.dim&&Wr.dim.length||(Wr.dim=[]),Wr.dim.push(Vr.onnx.TensorShapeProto.Dimension.decode(Dr,Dr.uint32()))):Dr.skipType(7&qr)}return Wr},Nr.decodeDelimited=function(Dr){return Dr instanceof Fr||(Dr=new Fr(Dr)),this.decode(Dr,Dr.uint32())},Nr.verify=function(Dr){if(typeof Dr!="object"||Dr===null)return"object expected";if(Dr.dim!=null&&Dr.hasOwnProperty("dim")){if(!Array.isArray(Dr.dim))return"dim: array expected";for(var jr=0;jr<Dr.dim.length;++jr){var Gr=Vr.onnx.TensorShapeProto.Dimension.verify(Dr.dim[jr]);if(Gr)return"dim."+Gr}}return null},Nr.fromObject=function(Dr){if(Dr instanceof Vr.onnx.TensorShapeProto)return Dr;var jr=new Vr.onnx.TensorShapeProto;if(Dr.dim){if(!Array.isArray(Dr.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");jr.dim=[];for(var Gr=0;Gr<Dr.dim.length;++Gr){if(typeof Dr.dim[Gr]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");jr.dim[Gr]=Vr.onnx.TensorShapeProto.Dimension.fromObject(Dr.dim[Gr])}}return jr},Nr.toObject=function(Dr,jr){jr||(jr={});var Gr={};if((jr.arrays||jr.defaults)&&(Gr.dim=[]),Dr.dim&&Dr.dim.length){Gr.dim=[];for(var Wr=0;Wr<Dr.dim.length;++Wr)Gr.dim[Wr]=Vr.onnx.TensorShapeProto.Dimension.toObject(Dr.dim[Wr],jr)}return Gr},Nr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},Nr.Dimension=function(){function Dr(Gr){if(Gr)for(var Wr=Object.keys(Gr),qr=0;qr<Wr.length;++qr)Gr[Wr[qr]]!=null&&(this[Wr[qr]]=Gr[Wr[qr]])}var jr;return Dr.prototype.dimValue=Ur.Long?Ur.Long.fromBits(0,0,!1):0,Dr.prototype.dimParam="",Dr.prototype.denotation="",Object.defineProperty(Dr.prototype,"value",{get:Ur.oneOfGetter(jr=["dimValue","dimParam"]),set:Ur.oneOfSetter(jr)}),Dr.create=function(Gr){return new Dr(Gr)},Dr.encode=function(Gr,Wr){return Wr||(Wr=zr.create()),Gr.dimValue!=null&&Gr.hasOwnProperty("dimValue")&&Wr.uint32(8).int64(Gr.dimValue),Gr.dimParam!=null&&Gr.hasOwnProperty("dimParam")&&Wr.uint32(18).string(Gr.dimParam),Gr.denotation!=null&&Gr.hasOwnProperty("denotation")&&Wr.uint32(26).string(Gr.denotation),Wr},Dr.encodeDelimited=function(Gr,Wr){return this.encode(Gr,Wr).ldelim()},Dr.decode=function(Gr,Wr){Gr instanceof Fr||(Gr=Fr.create(Gr));for(var qr=Wr===void 0?Gr.len:Gr.pos+Wr,Kr=new Vr.onnx.TensorShapeProto.Dimension;Gr.pos<qr;){var Xr=Gr.uint32();switch(Xr>>>3){case 1:Kr.dimValue=Gr.int64();break;case 2:Kr.dimParam=Gr.string();break;case 3:Kr.denotation=Gr.string();break;default:Gr.skipType(7&Xr)}}return Kr},Dr.decodeDelimited=function(Gr){return Gr instanceof Fr||(Gr=new Fr(Gr)),this.decode(Gr,Gr.uint32())},Dr.verify=function(Gr){if(typeof Gr!="object"||Gr===null)return"object expected";var Wr={};if(Gr.dimValue!=null&&Gr.hasOwnProperty("dimValue")&&(Wr.value=1,!(Ur.isInteger(Gr.dimValue)||Gr.dimValue&&Ur.isInteger(Gr.dimValue.low)&&Ur.isInteger(Gr.dimValue.high))))return"dimValue: integer|Long expected";if(Gr.dimParam!=null&&Gr.hasOwnProperty("dimParam")){if(Wr.value===1)return"value: multiple values";if(Wr.value=1,!Ur.isString(Gr.dimParam))return"dimParam: string expected"}return Gr.denotation!=null&&Gr.hasOwnProperty("denotation")&&!Ur.isString(Gr.denotation)?"denotation: string expected":null},Dr.fromObject=function(Gr){if(Gr instanceof Vr.onnx.TensorShapeProto.Dimension)return Gr;var Wr=new Vr.onnx.TensorShapeProto.Dimension;return Gr.dimValue!=null&&(Ur.Long?(Wr.dimValue=Ur.Long.fromValue(Gr.dimValue)).unsigned=!1:typeof Gr.dimValue=="string"?Wr.dimValue=parseInt(Gr.dimValue,10):typeof Gr.dimValue=="number"?Wr.dimValue=Gr.dimValue:typeof Gr.dimValue=="object"&&(Wr.dimValue=new Ur.LongBits(Gr.dimValue.low>>>0,Gr.dimValue.high>>>0).toNumber())),Gr.dimParam!=null&&(Wr.dimParam=String(Gr.dimParam)),Gr.denotation!=null&&(Wr.denotation=String(Gr.denotation)),Wr},Dr.toObject=function(Gr,Wr){Wr||(Wr={});var qr={};return Wr.defaults&&(qr.denotation=""),Gr.dimValue!=null&&Gr.hasOwnProperty("dimValue")&&(typeof Gr.dimValue=="number"?qr.dimValue=Wr.longs===String?String(Gr.dimValue):Gr.dimValue:qr.dimValue=Wr.longs===String?Ur.Long.prototype.toString.call(Gr.dimValue):Wr.longs===Number?new Ur.LongBits(Gr.dimValue.low>>>0,Gr.dimValue.high>>>0).toNumber():Gr.dimValue,Wr.oneofs&&(qr.value="dimValue")),Gr.dimParam!=null&&Gr.hasOwnProperty("dimParam")&&(qr.dimParam=Gr.dimParam,Wr.oneofs&&(qr.value="dimParam")),Gr.denotation!=null&&Gr.hasOwnProperty("denotation")&&(qr.denotation=Gr.denotation),qr},Dr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},Dr}(),Nr}(),Lr.TypeProto=function(){function Nr(jr){if(jr)for(var Gr=Object.keys(jr),Wr=0;Wr<Gr.length;++Wr)jr[Gr[Wr]]!=null&&(this[Gr[Wr]]=jr[Gr[Wr]])}var Dr;return Nr.prototype.tensorType=null,Nr.prototype.denotation="",Object.defineProperty(Nr.prototype,"value",{get:Ur.oneOfGetter(Dr=["tensorType"]),set:Ur.oneOfSetter(Dr)}),Nr.create=function(jr){return new Nr(jr)},Nr.encode=function(jr,Gr){return Gr||(Gr=zr.create()),jr.tensorType!=null&&jr.hasOwnProperty("tensorType")&&Vr.onnx.TypeProto.Tensor.encode(jr.tensorType,Gr.uint32(10).fork()).ldelim(),jr.denotation!=null&&jr.hasOwnProperty("denotation")&&Gr.uint32(50).string(jr.denotation),Gr},Nr.encodeDelimited=function(jr,Gr){return this.encode(jr,Gr).ldelim()},Nr.decode=function(jr,Gr){jr instanceof Fr||(jr=Fr.create(jr));for(var Wr=Gr===void 0?jr.len:jr.pos+Gr,qr=new Vr.onnx.TypeProto;jr.pos<Wr;){var Kr=jr.uint32();switch(Kr>>>3){case 1:qr.tensorType=Vr.onnx.TypeProto.Tensor.decode(jr,jr.uint32());break;case 6:qr.denotation=jr.string();break;default:jr.skipType(7&Kr)}}return qr},Nr.decodeDelimited=function(jr){return jr instanceof Fr||(jr=new Fr(jr)),this.decode(jr,jr.uint32())},Nr.verify=function(jr){if(typeof jr!="object"||jr===null)return"object expected";if(jr.tensorType!=null&&jr.hasOwnProperty("tensorType")){var Gr=Vr.onnx.TypeProto.Tensor.verify(jr.tensorType);if(Gr)return"tensorType."+Gr}return jr.denotation!=null&&jr.hasOwnProperty("denotation")&&!Ur.isString(jr.denotation)?"denotation: string expected":null},Nr.fromObject=function(jr){if(jr instanceof Vr.onnx.TypeProto)return jr;var Gr=new Vr.onnx.TypeProto;if(jr.tensorType!=null){if(typeof jr.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");Gr.tensorType=Vr.onnx.TypeProto.Tensor.fromObject(jr.tensorType)}return jr.denotation!=null&&(Gr.denotation=String(jr.denotation)),Gr},Nr.toObject=function(jr,Gr){Gr||(Gr={});var Wr={};return Gr.defaults&&(Wr.denotation=""),jr.tensorType!=null&&jr.hasOwnProperty("tensorType")&&(Wr.tensorType=Vr.onnx.TypeProto.Tensor.toObject(jr.tensorType,Gr),Gr.oneofs&&(Wr.value="tensorType")),jr.denotation!=null&&jr.hasOwnProperty("denotation")&&(Wr.denotation=jr.denotation),Wr},Nr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},Nr.Tensor=function(){function jr(Gr){if(Gr)for(var Wr=Object.keys(Gr),qr=0;qr<Wr.length;++qr)Gr[Wr[qr]]!=null&&(this[Wr[qr]]=Gr[Wr[qr]])}return jr.prototype.elemType=0,jr.prototype.shape=null,jr.create=function(Gr){return new jr(Gr)},jr.encode=function(Gr,Wr){return Wr||(Wr=zr.create()),Gr.elemType!=null&&Gr.hasOwnProperty("elemType")&&Wr.uint32(8).int32(Gr.elemType),Gr.shape!=null&&Gr.hasOwnProperty("shape")&&Vr.onnx.TensorShapeProto.encode(Gr.shape,Wr.uint32(18).fork()).ldelim(),Wr},jr.encodeDelimited=function(Gr,Wr){return this.encode(Gr,Wr).ldelim()},jr.decode=function(Gr,Wr){Gr instanceof Fr||(Gr=Fr.create(Gr));for(var qr=Wr===void 0?Gr.len:Gr.pos+Wr,Kr=new Vr.onnx.TypeProto.Tensor;Gr.pos<qr;){var Xr=Gr.uint32();switch(Xr>>>3){case 1:Kr.elemType=Gr.int32();break;case 2:Kr.shape=Vr.onnx.TensorShapeProto.decode(Gr,Gr.uint32());break;default:Gr.skipType(7&Xr)}}return Kr},jr.decodeDelimited=function(Gr){return Gr instanceof Fr||(Gr=new Fr(Gr)),this.decode(Gr,Gr.uint32())},jr.verify=function(Gr){if(typeof Gr!="object"||Gr===null)return"object expected";if(Gr.elemType!=null&&Gr.hasOwnProperty("elemType")&&!Ur.isInteger(Gr.elemType))return"elemType: integer expected";if(Gr.shape!=null&&Gr.hasOwnProperty("shape")){var Wr=Vr.onnx.TensorShapeProto.verify(Gr.shape);if(Wr)return"shape."+Wr}return null},jr.fromObject=function(Gr){if(Gr instanceof Vr.onnx.TypeProto.Tensor)return Gr;var Wr=new Vr.onnx.TypeProto.Tensor;if(Gr.elemType!=null&&(Wr.elemType=0|Gr.elemType),Gr.shape!=null){if(typeof Gr.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");Wr.shape=Vr.onnx.TensorShapeProto.fromObject(Gr.shape)}return Wr},jr.toObject=function(Gr,Wr){Wr||(Wr={});var qr={};return Wr.defaults&&(qr.elemType=0,qr.shape=null),Gr.elemType!=null&&Gr.hasOwnProperty("elemType")&&(qr.elemType=Gr.elemType),Gr.shape!=null&&Gr.hasOwnProperty("shape")&&(qr.shape=Vr.onnx.TensorShapeProto.toObject(Gr.shape,Wr)),qr},jr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},jr}(),Nr}(),Lr.OperatorSetIdProto=function(){function Nr(Dr){if(Dr)for(var jr=Object.keys(Dr),Gr=0;Gr<jr.length;++Gr)Dr[jr[Gr]]!=null&&(this[jr[Gr]]=Dr[jr[Gr]])}return Nr.prototype.domain="",Nr.prototype.version=Ur.Long?Ur.Long.fromBits(0,0,!1):0,Nr.create=function(Dr){return new Nr(Dr)},Nr.encode=function(Dr,jr){return jr||(jr=zr.create()),Dr.domain!=null&&Dr.hasOwnProperty("domain")&&jr.uint32(10).string(Dr.domain),Dr.version!=null&&Dr.hasOwnProperty("version")&&jr.uint32(16).int64(Dr.version),jr},Nr.encodeDelimited=function(Dr,jr){return this.encode(Dr,jr).ldelim()},Nr.decode=function(Dr,jr){Dr instanceof Fr||(Dr=Fr.create(Dr));for(var Gr=jr===void 0?Dr.len:Dr.pos+jr,Wr=new Vr.onnx.OperatorSetIdProto;Dr.pos<Gr;){var qr=Dr.uint32();switch(qr>>>3){case 1:Wr.domain=Dr.string();break;case 2:Wr.version=Dr.int64();break;default:Dr.skipType(7&qr)}}return Wr},Nr.decodeDelimited=function(Dr){return Dr instanceof Fr||(Dr=new Fr(Dr)),this.decode(Dr,Dr.uint32())},Nr.verify=function(Dr){return typeof Dr!="object"||Dr===null?"object expected":Dr.domain!=null&&Dr.hasOwnProperty("domain")&&!Ur.isString(Dr.domain)?"domain: string expected":Dr.version!=null&&Dr.hasOwnProperty("version")&&!(Ur.isInteger(Dr.version)||Dr.version&&Ur.isInteger(Dr.version.low)&&Ur.isInteger(Dr.version.high))?"version: integer|Long expected":null},Nr.fromObject=function(Dr){if(Dr instanceof Vr.onnx.OperatorSetIdProto)return Dr;var jr=new Vr.onnx.OperatorSetIdProto;return Dr.domain!=null&&(jr.domain=String(Dr.domain)),Dr.version!=null&&(Ur.Long?(jr.version=Ur.Long.fromValue(Dr.version)).unsigned=!1:typeof Dr.version=="string"?jr.version=parseInt(Dr.version,10):typeof Dr.version=="number"?jr.version=Dr.version:typeof Dr.version=="object"&&(jr.version=new Ur.LongBits(Dr.version.low>>>0,Dr.version.high>>>0).toNumber())),jr},Nr.toObject=function(Dr,jr){jr||(jr={});var Gr={};if(jr.defaults)if(Gr.domain="",Ur.Long){var Wr=new Ur.Long(0,0,!1);Gr.version=jr.longs===String?Wr.toString():jr.longs===Number?Wr.toNumber():Wr}else Gr.version=jr.longs===String?"0":0;return Dr.domain!=null&&Dr.hasOwnProperty("domain")&&(Gr.domain=Dr.domain),Dr.version!=null&&Dr.hasOwnProperty("version")&&(typeof Dr.version=="number"?Gr.version=jr.longs===String?String(Dr.version):Dr.version:Gr.version=jr.longs===String?Ur.Long.prototype.toString.call(Dr.version):jr.longs===Number?new Ur.LongBits(Dr.version.low>>>0,Dr.version.high>>>0).toNumber():Dr.version),Gr},Nr.prototype.toJSON=function(){return this.constructor.toObject(this,Mr.util.toJSONOptions)},Nr}(),Lr),_r.exports=Vr},2100:(_r,Tr,Rr)=>{_r.exports=Rr(9482)},9482:(_r,Tr,Rr)=>{var Ar=Tr;function Pr(){Ar.util._configure(),Ar.Writer._configure(Ar.BufferWriter),Ar.Reader._configure(Ar.BufferReader)}Ar.build="minimal",Ar.Writer=Rr(1173),Ar.BufferWriter=Rr(3155),Ar.Reader=Rr(1408),Ar.BufferReader=Rr(593),Ar.util=Rr(9693),Ar.rpc=Rr(5994),Ar.roots=Rr(5054),Ar.configure=Pr,Pr()},1408:(_r,Tr,Rr)=>{_r.exports=zr;var Ar,Pr=Rr(9693),Lr=Pr.LongBits,Mr=Pr.utf8;function Fr(Wr,qr){return RangeError("index out of range: "+Wr.pos+" + "+(qr||1)+" > "+Wr.len)}function zr(Wr){this.buf=Wr,this.pos=0,this.len=Wr.length}var Ur,Vr=typeof Uint8Array<"u"?function(Wr){if(Wr instanceof Uint8Array||Array.isArray(Wr))return new zr(Wr);throw Error("illegal buffer")}:function(Wr){if(Array.isArray(Wr))return new zr(Wr);throw Error("illegal buffer")},Nr=function(){return Pr.Buffer?function(Wr){return(zr.create=function(qr){return Pr.Buffer.isBuffer(qr)?new Ar(qr):Vr(qr)})(Wr)}:Vr};function Dr(){var Wr=new Lr(0,0),qr=0;if(!(this.len-this.pos>4)){for(;qr<3;++qr){if(this.pos>=this.len)throw Fr(this);if(Wr.lo=(Wr.lo|(127&this.buf[this.pos])<<7*qr)>>>0,this.buf[this.pos++]<128)return Wr}return Wr.lo=(Wr.lo|(127&this.buf[this.pos++])<<7*qr)>>>0,Wr}for(;qr<4;++qr)if(Wr.lo=(Wr.lo|(127&this.buf[this.pos])<<7*qr)>>>0,this.buf[this.pos++]<128)return Wr;if(Wr.lo=(Wr.lo|(127&this.buf[this.pos])<<28)>>>0,Wr.hi=(Wr.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return Wr;if(qr=0,this.len-this.pos>4){for(;qr<5;++qr)if(Wr.hi=(Wr.hi|(127&this.buf[this.pos])<<7*qr+3)>>>0,this.buf[this.pos++]<128)return Wr}else for(;qr<5;++qr){if(this.pos>=this.len)throw Fr(this);if(Wr.hi=(Wr.hi|(127&this.buf[this.pos])<<7*qr+3)>>>0,this.buf[this.pos++]<128)return Wr}throw Error("invalid varint encoding")}function jr(Wr,qr){return(Wr[qr-4]|Wr[qr-3]<<8|Wr[qr-2]<<16|Wr[qr-1]<<24)>>>0}function Gr(){if(this.pos+8>this.len)throw Fr(this,8);return new Lr(jr(this.buf,this.pos+=4),jr(this.buf,this.pos+=4))}zr.create=Nr(),zr.prototype._slice=Pr.Array.prototype.subarray||Pr.Array.prototype.slice,zr.prototype.uint32=(Ur=4294967295,function(){if(Ur=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(Ur=(Ur|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(Ur=(Ur|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(Ur=(Ur|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(Ur=(Ur|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return Ur;if((this.pos+=5)>this.len)throw this.pos=this.len,Fr(this,10);return Ur}),zr.prototype.int32=function(){return 0|this.uint32()},zr.prototype.sint32=function(){var Wr=this.uint32();return Wr>>>1^-(1&Wr)|0},zr.prototype.bool=function(){return this.uint32()!==0},zr.prototype.fixed32=function(){if(this.pos+4>this.len)throw Fr(this,4);return jr(this.buf,this.pos+=4)},zr.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Fr(this,4);return 0|jr(this.buf,this.pos+=4)},zr.prototype.float=function(){if(this.pos+4>this.len)throw Fr(this,4);var Wr=Pr.float.readFloatLE(this.buf,this.pos);return this.pos+=4,Wr},zr.prototype.double=function(){if(this.pos+8>this.len)throw Fr(this,4);var Wr=Pr.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,Wr},zr.prototype.bytes=function(){var Wr=this.uint32(),qr=this.pos,Kr=this.pos+Wr;if(Kr>this.len)throw Fr(this,Wr);return this.pos+=Wr,Array.isArray(this.buf)?this.buf.slice(qr,Kr):qr===Kr?new this.buf.constructor(0):this._slice.call(this.buf,qr,Kr)},zr.prototype.string=function(){var Wr=this.bytes();return Mr.read(Wr,0,Wr.length)},zr.prototype.skip=function(Wr){if(typeof Wr=="number"){if(this.pos+Wr>this.len)throw Fr(this,Wr);this.pos+=Wr}else do if(this.pos>=this.len)throw Fr(this);while(128&this.buf[this.pos++]);return this},zr.prototype.skipType=function(Wr){switch(Wr){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(Wr=7&this.uint32())!=4;)this.skipType(Wr);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+Wr+" at offset "+this.pos)}return this},zr._configure=function(Wr){Ar=Wr,zr.create=Nr(),Ar._configure();var qr=Pr.Long?"toLong":"toNumber";Pr.merge(zr.prototype,{int64:function(){return Dr.call(this)[qr](!1)},uint64:function(){return Dr.call(this)[qr](!0)},sint64:function(){return Dr.call(this).zzDecode()[qr](!1)},fixed64:function(){return Gr.call(this)[qr](!0)},sfixed64:function(){return Gr.call(this)[qr](!1)}})}},593:(_r,Tr,Rr)=>{_r.exports=Lr;var Ar=Rr(1408);(Lr.prototype=Object.create(Ar.prototype)).constructor=Lr;var Pr=Rr(9693);function Lr(Mr){Ar.call(this,Mr)}Lr._configure=function(){Pr.Buffer&&(Lr.prototype._slice=Pr.Buffer.prototype.slice)},Lr.prototype.string=function(){var Mr=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+Mr,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+Mr,this.len))},Lr._configure()},5054:_r=>{_r.exports={}},5994:(_r,Tr,Rr)=>{Tr.Service=Rr(7948)},7948:(_r,Tr,Rr)=>{_r.exports=Pr;var Ar=Rr(9693);function Pr(Lr,Mr,Fr){if(typeof Lr!="function")throw TypeError("rpcImpl must be a function");Ar.EventEmitter.call(this),this.rpcImpl=Lr,this.requestDelimited=!!Mr,this.responseDelimited=!!Fr}(Pr.prototype=Object.create(Ar.EventEmitter.prototype)).constructor=Pr,Pr.prototype.rpcCall=function Lr(Mr,Fr,zr,Ur,Vr){if(!Ur)throw TypeError("request must be specified");var Nr=this;if(!Vr)return Ar.asPromise(Lr,Nr,Mr,Fr,zr,Ur);if(Nr.rpcImpl)try{return Nr.rpcImpl(Mr,Fr[Nr.requestDelimited?"encodeDelimited":"encode"](Ur).finish(),function(Dr,jr){if(Dr)return Nr.emit("error",Dr,Mr),Vr(Dr);if(jr!==null){if(!(jr instanceof zr))try{jr=zr[Nr.responseDelimited?"decodeDelimited":"decode"](jr)}catch(Gr){return Nr.emit("error",Gr,Mr),Vr(Gr)}return Nr.emit("data",jr,Mr),Vr(null,jr)}Nr.end(!0)})}catch(Dr){return Nr.emit("error",Dr,Mr),void setTimeout(function(){Vr(Dr)},0)}else setTimeout(function(){Vr(Error("already ended"))},0)},Pr.prototype.end=function(Lr){return this.rpcImpl&&(Lr||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(_r,Tr,Rr)=>{_r.exports=Pr;var Ar=Rr(9693);function Pr(zr,Ur){this.lo=zr>>>0,this.hi=Ur>>>0}var Lr=Pr.zero=new Pr(0,0);Lr.toNumber=function(){return 0},Lr.zzEncode=Lr.zzDecode=function(){return this},Lr.length=function(){return 1};var Mr=Pr.zeroHash="\0\0\0\0\0\0\0\0";Pr.fromNumber=function(zr){if(zr===0)return Lr;var Ur=zr<0;Ur&&(zr=-zr);var Vr=zr>>>0,Nr=(zr-Vr)/4294967296>>>0;return Ur&&(Nr=~Nr>>>0,Vr=~Vr>>>0,++Vr>4294967295&&(Vr=0,++Nr>4294967295&&(Nr=0))),new Pr(Vr,Nr)},Pr.from=function(zr){if(typeof zr=="number")return Pr.fromNumber(zr);if(Ar.isString(zr)){if(!Ar.Long)return Pr.fromNumber(parseInt(zr,10));zr=Ar.Long.fromString(zr)}return zr.low||zr.high?new Pr(zr.low>>>0,zr.high>>>0):Lr},Pr.prototype.toNumber=function(zr){if(!zr&&this.hi>>>31){var Ur=1+~this.lo>>>0,Vr=~this.hi>>>0;return Ur||(Vr=Vr+1>>>0),-(Ur+4294967296*Vr)}return this.lo+4294967296*this.hi},Pr.prototype.toLong=function(zr){return Ar.Long?new Ar.Long(0|this.lo,0|this.hi,!!zr):{low:0|this.lo,high:0|this.hi,unsigned:!!zr}};var Fr=String.prototype.charCodeAt;Pr.fromHash=function(zr){return zr===Mr?Lr:new Pr((Fr.call(zr,0)|Fr.call(zr,1)<<8|Fr.call(zr,2)<<16|Fr.call(zr,3)<<24)>>>0,(Fr.call(zr,4)|Fr.call(zr,5)<<8|Fr.call(zr,6)<<16|Fr.call(zr,7)<<24)>>>0)},Pr.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},Pr.prototype.zzEncode=function(){var zr=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^zr)>>>0,this.lo=(this.lo<<1^zr)>>>0,this},Pr.prototype.zzDecode=function(){var zr=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^zr)>>>0,this.hi=(this.hi>>>1^zr)>>>0,this},Pr.prototype.length=function(){var zr=this.lo,Ur=(this.lo>>>28|this.hi<<4)>>>0,Vr=this.hi>>>24;return Vr===0?Ur===0?zr<16384?zr<128?1:2:zr<2097152?3:4:Ur<16384?Ur<128?5:6:Ur<2097152?7:8:Vr<128?9:10}},9693:function(_r,Tr,Rr){var Ar=Tr;function Pr(Mr,Fr,zr){for(var Ur=Object.keys(Fr),Vr=0;Vr<Ur.length;++Vr)Mr[Ur[Vr]]!==void 0&&zr||(Mr[Ur[Vr]]=Fr[Ur[Vr]]);return Mr}function Lr(Mr){function Fr(zr,Ur){if(!(this instanceof Fr))return new Fr(zr,Ur);Object.defineProperty(this,"message",{get:function(){return zr}}),Error.captureStackTrace?Error.captureStackTrace(this,Fr):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Ur&&Pr(this,Ur)}return(Fr.prototype=Object.create(Error.prototype)).constructor=Fr,Object.defineProperty(Fr.prototype,"name",{get:function(){return Mr}}),Fr.prototype.toString=function(){return this.name+": "+this.message},Fr}Ar.asPromise=Rr(4537),Ar.base64=Rr(7419),Ar.EventEmitter=Rr(9211),Ar.float=Rr(945),Ar.inquire=Rr(7199),Ar.utf8=Rr(4997),Ar.pool=Rr(6662),Ar.LongBits=Rr(1945),Ar.isNode=!!(Rr.g!==void 0&&Rr.g&&Rr.g.process&&Rr.g.process.versions&&Rr.g.process.versions.node),Ar.global=Ar.isNode&&Rr.g||typeof window<"u"&&window||typeof self<"u"&&self||this,Ar.emptyArray=Object.freeze?Object.freeze([]):[],Ar.emptyObject=Object.freeze?Object.freeze({}):{},Ar.isInteger=Number.isInteger||function(Mr){return typeof Mr=="number"&&isFinite(Mr)&&Math.floor(Mr)===Mr},Ar.isString=function(Mr){return typeof Mr=="string"||Mr instanceof String},Ar.isObject=function(Mr){return Mr&&typeof Mr=="object"},Ar.isset=Ar.isSet=function(Mr,Fr){var zr=Mr[Fr];return!(zr==null||!Mr.hasOwnProperty(Fr))&&(typeof zr!="object"||(Array.isArray(zr)?zr.length:Object.keys(zr).length)>0)},Ar.Buffer=function(){try{var Mr=Ar.inquire("buffer").Buffer;return Mr.prototype.utf8Write?Mr:null}catch{return null}}(),Ar._Buffer_from=null,Ar._Buffer_allocUnsafe=null,Ar.newBuffer=function(Mr){return typeof Mr=="number"?Ar.Buffer?Ar._Buffer_allocUnsafe(Mr):new Ar.Array(Mr):Ar.Buffer?Ar._Buffer_from(Mr):typeof Uint8Array>"u"?Mr:new Uint8Array(Mr)},Ar.Array=typeof Uint8Array<"u"?Uint8Array:Array,Ar.Long=Ar.global.dcodeIO&&Ar.global.dcodeIO.Long||Ar.global.Long||Ar.inquire("long"),Ar.key2Re=/^true|false|0|1$/,Ar.key32Re=/^-?(?:0|[1-9][0-9]*)$/,Ar.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,Ar.longToHash=function(Mr){return Mr?Ar.LongBits.from(Mr).toHash():Ar.LongBits.zeroHash},Ar.longFromHash=function(Mr,Fr){var zr=Ar.LongBits.fromHash(Mr);return Ar.Long?Ar.Long.fromBits(zr.lo,zr.hi,Fr):zr.toNumber(!!Fr)},Ar.merge=Pr,Ar.lcFirst=function(Mr){return Mr.charAt(0).toLowerCase()+Mr.substring(1)},Ar.newError=Lr,Ar.ProtocolError=Lr("ProtocolError"),Ar.oneOfGetter=function(Mr){for(var Fr={},zr=0;zr<Mr.length;++zr)Fr[Mr[zr]]=1;return function(){for(var Ur=Object.keys(this),Vr=Ur.length-1;Vr>-1;--Vr)if(Fr[Ur[Vr]]===1&&this[Ur[Vr]]!==void 0&&this[Ur[Vr]]!==null)return Ur[Vr]}},Ar.oneOfSetter=function(Mr){return function(Fr){for(var zr=0;zr<Mr.length;++zr)Mr[zr]!==Fr&&delete this[Mr[zr]]}},Ar.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},Ar._configure=function(){var Mr=Ar.Buffer;Mr?(Ar._Buffer_from=Mr.from!==Uint8Array.from&&Mr.from||function(Fr,zr){return new Mr(Fr,zr)},Ar._Buffer_allocUnsafe=Mr.allocUnsafe||function(Fr){return new Mr(Fr)}):Ar._Buffer_from=Ar._Buffer_allocUnsafe=null}},1173:(_r,Tr,Rr)=>{_r.exports=Nr;var Ar,Pr=Rr(9693),Lr=Pr.LongBits,Mr=Pr.base64,Fr=Pr.utf8;function zr(Xr,Zr,Jr){this.fn=Xr,this.len=Zr,this.next=void 0,this.val=Jr}function Ur(){}function Vr(Xr){this.head=Xr.head,this.tail=Xr.tail,this.len=Xr.len,this.next=Xr.states}function Nr(){this.len=0,this.head=new zr(Ur,0,0),this.tail=this.head,this.states=null}var Dr=function(){return Pr.Buffer?function(){return(Nr.create=function(){return new Ar})()}:function(){return new Nr}};function jr(Xr,Zr,Jr){Zr[Jr]=255&Xr}function Gr(Xr,Zr){this.len=Xr,this.next=void 0,this.val=Zr}function Wr(Xr,Zr,Jr){for(;Xr.hi;)Zr[Jr++]=127&Xr.lo|128,Xr.lo=(Xr.lo>>>7|Xr.hi<<25)>>>0,Xr.hi>>>=7;for(;Xr.lo>127;)Zr[Jr++]=127&Xr.lo|128,Xr.lo=Xr.lo>>>7;Zr[Jr++]=Xr.lo}function qr(Xr,Zr,Jr){Zr[Jr]=255&Xr,Zr[Jr+1]=Xr>>>8&255,Zr[Jr+2]=Xr>>>16&255,Zr[Jr+3]=Xr>>>24}Nr.create=Dr(),Nr.alloc=function(Xr){return new Pr.Array(Xr)},Pr.Array!==Array&&(Nr.alloc=Pr.pool(Nr.alloc,Pr.Array.prototype.subarray)),Nr.prototype._push=function(Xr,Zr,Jr){return this.tail=this.tail.next=new zr(Xr,Zr,Jr),this.len+=Zr,this},Gr.prototype=Object.create(zr.prototype),Gr.prototype.fn=function(Xr,Zr,Jr){for(;Xr>127;)Zr[Jr++]=127&Xr|128,Xr>>>=7;Zr[Jr]=Xr},Nr.prototype.uint32=function(Xr){return this.len+=(this.tail=this.tail.next=new Gr((Xr>>>=0)<128?1:Xr<16384?2:Xr<2097152?3:Xr<268435456?4:5,Xr)).len,this},Nr.prototype.int32=function(Xr){return Xr<0?this._push(Wr,10,Lr.fromNumber(Xr)):this.uint32(Xr)},Nr.prototype.sint32=function(Xr){return this.uint32((Xr<<1^Xr>>31)>>>0)},Nr.prototype.uint64=function(Xr){var Zr=Lr.from(Xr);return this._push(Wr,Zr.length(),Zr)},Nr.prototype.int64=Nr.prototype.uint64,Nr.prototype.sint64=function(Xr){var Zr=Lr.from(Xr).zzEncode();return this._push(Wr,Zr.length(),Zr)},Nr.prototype.bool=function(Xr){return this._push(jr,1,Xr?1:0)},Nr.prototype.fixed32=function(Xr){return this._push(qr,4,Xr>>>0)},Nr.prototype.sfixed32=Nr.prototype.fixed32,Nr.prototype.fixed64=function(Xr){var Zr=Lr.from(Xr);return this._push(qr,4,Zr.lo)._push(qr,4,Zr.hi)},Nr.prototype.sfixed64=Nr.prototype.fixed64,Nr.prototype.float=function(Xr){return this._push(Pr.float.writeFloatLE,4,Xr)},Nr.prototype.double=function(Xr){return this._push(Pr.float.writeDoubleLE,8,Xr)};var Kr=Pr.Array.prototype.set?function(Xr,Zr,Jr){Zr.set(Xr,Jr)}:function(Xr,Zr,Jr){for(var _i=0;_i<Xr.length;++_i)Zr[Jr+_i]=Xr[_i]};Nr.prototype.bytes=function(Xr){var Zr=Xr.length>>>0;if(!Zr)return this._push(jr,1,0);if(Pr.isString(Xr)){var Jr=Nr.alloc(Zr=Mr.length(Xr));Mr.decode(Xr,Jr,0),Xr=Jr}return this.uint32(Zr)._push(Kr,Zr,Xr)},Nr.prototype.string=function(Xr){var Zr=Fr.length(Xr);return Zr?this.uint32(Zr)._push(Fr.write,Zr,Xr):this._push(jr,1,0)},Nr.prototype.fork=function(){return this.states=new Vr(this),this.head=this.tail=new zr(Ur,0,0),this.len=0,this},Nr.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new zr(Ur,0,0),this.len=0),this},Nr.prototype.ldelim=function(){var Xr=this.head,Zr=this.tail,Jr=this.len;return this.reset().uint32(Jr),Jr&&(this.tail.next=Xr.next,this.tail=Zr,this.len+=Jr),this},Nr.prototype.finish=function(){for(var Xr=this.head.next,Zr=this.constructor.alloc(this.len),Jr=0;Xr;)Xr.fn(Xr.val,Zr,Jr),Jr+=Xr.len,Xr=Xr.next;return Zr},Nr._configure=function(Xr){Ar=Xr,Nr.create=Dr(),Ar._configure()}},3155:(_r,Tr,Rr)=>{_r.exports=Lr;var Ar=Rr(1173);(Lr.prototype=Object.create(Ar.prototype)).constructor=Lr;var Pr=Rr(9693);function Lr(){Ar.call(this)}function Mr(Fr,zr,Ur){Fr.length<40?Pr.utf8.write(Fr,zr,Ur):zr.utf8Write?zr.utf8Write(Fr,Ur):zr.write(Fr,Ur)}Lr._configure=function(){Lr.alloc=Pr._Buffer_allocUnsafe,Lr.writeBytesBuffer=Pr.Buffer&&Pr.Buffer.prototype instanceof Uint8Array&&Pr.Buffer.prototype.set.name==="set"?function(Fr,zr,Ur){zr.set(Fr,Ur)}:function(Fr,zr,Ur){if(Fr.copy)Fr.copy(zr,Ur,0,Fr.length);else for(var Vr=0;Vr<Fr.length;)zr[Ur++]=Fr[Vr++]}},Lr.prototype.bytes=function(Fr){Pr.isString(Fr)&&(Fr=Pr._Buffer_from(Fr,"base64"));var zr=Fr.length>>>0;return this.uint32(zr),zr&&this._push(Lr.writeBytesBuffer,zr,Fr),this},Lr.prototype.string=function(Fr){var zr=Pr.Buffer.byteLength(Fr);return this.uint32(zr),zr&&this._push(Mr,zr,Fr),this},Lr._configure()},4154:_r=>{_r.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},7067:()=>{},1296:()=>{},760:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(_r,Tr,Rr)=>{Rr.r(Tr),Rr.d(Tr,{flatbuffers:()=>Ar});var Ar={};Ar.Offset,Ar.Table,Ar.SIZEOF_SHORT=2,Ar.SIZEOF_INT=4,Ar.FILE_IDENTIFIER_LENGTH=4,Ar.SIZE_PREFIX_LENGTH=4,Ar.Encoding={UTF8_BYTES:1,UTF16_STRING:2},Ar.int32=new Int32Array(2),Ar.float32=new Float32Array(Ar.int32.buffer),Ar.float64=new Float64Array(Ar.int32.buffer),Ar.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,Ar.Long=function(Pr,Lr){this.low=0|Pr,this.high=0|Lr},Ar.Long.create=function(Pr,Lr){return Pr==0&&Lr==0?Ar.Long.ZERO:new Ar.Long(Pr,Lr)},Ar.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},Ar.Long.prototype.equals=function(Pr){return this.low==Pr.low&&this.high==Pr.high},Ar.Long.ZERO=new Ar.Long(0,0),Ar.Builder=function(Pr){if(Pr)Lr=Pr;else var Lr=1024;this.bb=Ar.ByteBuffer.allocate(Lr),this.space=Lr,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},Ar.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},Ar.Builder.prototype.forceDefaults=function(Pr){this.force_defaults=Pr},Ar.Builder.prototype.dataBuffer=function(){return this.bb},Ar.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},Ar.Builder.prototype.prep=function(Pr,Lr){Pr>this.minalign&&(this.minalign=Pr);for(var Mr=1+~(this.bb.capacity()-this.space+Lr)&Pr-1;this.space<Mr+Pr+Lr;){var Fr=this.bb.capacity();this.bb=Ar.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-Fr}this.pad(Mr)},Ar.Builder.prototype.pad=function(Pr){for(var Lr=0;Lr<Pr;Lr++)this.bb.writeInt8(--this.space,0)},Ar.Builder.prototype.writeInt8=function(Pr){this.bb.writeInt8(this.space-=1,Pr)},Ar.Builder.prototype.writeInt16=function(Pr){this.bb.writeInt16(this.space-=2,Pr)},Ar.Builder.prototype.writeInt32=function(Pr){this.bb.writeInt32(this.space-=4,Pr)},Ar.Builder.prototype.writeInt64=function(Pr){this.bb.writeInt64(this.space-=8,Pr)},Ar.Builder.prototype.writeFloat32=function(Pr){this.bb.writeFloat32(this.space-=4,Pr)},Ar.Builder.prototype.writeFloat64=function(Pr){this.bb.writeFloat64(this.space-=8,Pr)},Ar.Builder.prototype.addInt8=function(Pr){this.prep(1,0),this.writeInt8(Pr)},Ar.Builder.prototype.addInt16=function(Pr){this.prep(2,0),this.writeInt16(Pr)},Ar.Builder.prototype.addInt32=function(Pr){this.prep(4,0),this.writeInt32(Pr)},Ar.Builder.prototype.addInt64=function(Pr){this.prep(8,0),this.writeInt64(Pr)},Ar.Builder.prototype.addFloat32=function(Pr){this.prep(4,0),this.writeFloat32(Pr)},Ar.Builder.prototype.addFloat64=function(Pr){this.prep(8,0),this.writeFloat64(Pr)},Ar.Builder.prototype.addFieldInt8=function(Pr,Lr,Mr){(this.force_defaults||Lr!=Mr)&&(this.addInt8(Lr),this.slot(Pr))},Ar.Builder.prototype.addFieldInt16=function(Pr,Lr,Mr){(this.force_defaults||Lr!=Mr)&&(this.addInt16(Lr),this.slot(Pr))},Ar.Builder.prototype.addFieldInt32=function(Pr,Lr,Mr){(this.force_defaults||Lr!=Mr)&&(this.addInt32(Lr),this.slot(Pr))},Ar.Builder.prototype.addFieldInt64=function(Pr,Lr,Mr){!this.force_defaults&&Lr.equals(Mr)||(this.addInt64(Lr),this.slot(Pr))},Ar.Builder.prototype.addFieldFloat32=function(Pr,Lr,Mr){(this.force_defaults||Lr!=Mr)&&(this.addFloat32(Lr),this.slot(Pr))},Ar.Builder.prototype.addFieldFloat64=function(Pr,Lr,Mr){(this.force_defaults||Lr!=Mr)&&(this.addFloat64(Lr),this.slot(Pr))},Ar.Builder.prototype.addFieldOffset=function(Pr,Lr,Mr){(this.force_defaults||Lr!=Mr)&&(this.addOffset(Lr),this.slot(Pr))},Ar.Builder.prototype.addFieldStruct=function(Pr,Lr,Mr){Lr!=Mr&&(this.nested(Lr),this.slot(Pr))},Ar.Builder.prototype.nested=function(Pr){if(Pr!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},Ar.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},Ar.Builder.prototype.slot=function(Pr){this.vtable[Pr]=this.offset()},Ar.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},Ar.Builder.growByteBuffer=function(Pr){var Lr=Pr.capacity();if(3221225472&Lr)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var Mr=Lr<<1,Fr=Ar.ByteBuffer.allocate(Mr);return Fr.setPosition(Mr-Lr),Fr.bytes().set(Pr.bytes(),Mr-Lr),Fr},Ar.Builder.prototype.addOffset=function(Pr){this.prep(Ar.SIZEOF_INT,0),this.writeInt32(this.offset()-Pr+Ar.SIZEOF_INT)},Ar.Builder.prototype.startObject=function(Pr){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=Pr;for(var Lr=0;Lr<Pr;Lr++)this.vtable[Lr]=0;this.isNested=!0,this.object_start=this.offset()},Ar.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var Pr=this.offset(),Lr=this.vtable_in_use-1;Lr>=0&&this.vtable[Lr]==0;Lr--);for(var Mr=Lr+1;Lr>=0;Lr--)this.addInt16(this.vtable[Lr]!=0?Pr-this.vtable[Lr]:0);this.addInt16(Pr-this.object_start);var Fr=(Mr+2)*Ar.SIZEOF_SHORT;this.addInt16(Fr);var zr=0,Ur=this.space;e:for(Lr=0;Lr<this.vtables.length;Lr++){var Vr=this.bb.capacity()-this.vtables[Lr];if(Fr==this.bb.readInt16(Vr)){for(var Nr=Ar.SIZEOF_SHORT;Nr<Fr;Nr+=Ar.SIZEOF_SHORT)if(this.bb.readInt16(Ur+Nr)!=this.bb.readInt16(Vr+Nr))continue e;zr=this.vtables[Lr];break}}return zr?(this.space=this.bb.capacity()-Pr,this.bb.writeInt32(this.space,zr-Pr)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-Pr,this.offset()-Pr)),this.isNested=!1,Pr},Ar.Builder.prototype.finish=function(Pr,Lr,Mr){var Fr=Mr?Ar.SIZE_PREFIX_LENGTH:0;if(Lr){var zr=Lr;if(this.prep(this.minalign,Ar.SIZEOF_INT+Ar.FILE_IDENTIFIER_LENGTH+Fr),zr.length!=Ar.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+Ar.FILE_IDENTIFIER_LENGTH);for(var Ur=Ar.FILE_IDENTIFIER_LENGTH-1;Ur>=0;Ur--)this.writeInt8(zr.charCodeAt(Ur))}this.prep(this.minalign,Ar.SIZEOF_INT+Fr),this.addOffset(Pr),Fr&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},Ar.Builder.prototype.finishSizePrefixed=function(Pr,Lr){this.finish(Pr,Lr,!0)},Ar.Builder.prototype.requiredField=function(Pr,Lr){var Mr=this.bb.capacity()-Pr,Fr=Mr-this.bb.readInt32(Mr);if(this.bb.readInt16(Fr+Lr)==0)throw new Error("FlatBuffers: field "+Lr+" must be set")},Ar.Builder.prototype.startVector=function(Pr,Lr,Mr){this.notNested(),this.vector_num_elems=Lr,this.prep(Ar.SIZEOF_INT,Pr*Lr),this.prep(Mr,Pr*Lr)},Ar.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},Ar.Builder.prototype.createString=function(Pr){if(Pr instanceof Uint8Array)var Lr=Pr;else{Lr=[];for(var Mr=0;Mr<Pr.length;){var Fr,zr=Pr.charCodeAt(Mr++);(Fr=zr<55296||zr>=56320?zr:(zr<<10)+Pr.charCodeAt(Mr++)+-56613888)<128?Lr.push(Fr):(Fr<2048?Lr.push(Fr>>6&31|192):(Fr<65536?Lr.push(Fr>>12&15|224):Lr.push(Fr>>18&7|240,Fr>>12&63|128),Lr.push(Fr>>6&63|128)),Lr.push(63&Fr|128))}}this.addInt8(0),this.startVector(1,Lr.length,1),this.bb.setPosition(this.space-=Lr.length),Mr=0;for(var Ur=this.space,Vr=this.bb.bytes();Mr<Lr.length;Mr++)Vr[Ur++]=Lr[Mr];return this.endVector()},Ar.Builder.prototype.createLong=function(Pr,Lr){return Ar.Long.create(Pr,Lr)},Ar.ByteBuffer=function(Pr){this.bytes_=Pr,this.position_=0},Ar.ByteBuffer.allocate=function(Pr){return new Ar.ByteBuffer(new Uint8Array(Pr))},Ar.ByteBuffer.prototype.clear=function(){this.position_=0},Ar.ByteBuffer.prototype.bytes=function(){return this.bytes_},Ar.ByteBuffer.prototype.position=function(){return this.position_},Ar.ByteBuffer.prototype.setPosition=function(Pr){this.position_=Pr},Ar.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},Ar.ByteBuffer.prototype.readInt8=function(Pr){return this.readUint8(Pr)<<24>>24},Ar.ByteBuffer.prototype.readUint8=function(Pr){return this.bytes_[Pr]},Ar.ByteBuffer.prototype.readInt16=function(Pr){return this.readUint16(Pr)<<16>>16},Ar.ByteBuffer.prototype.readUint16=function(Pr){return this.bytes_[Pr]|this.bytes_[Pr+1]<<8},Ar.ByteBuffer.prototype.readInt32=function(Pr){return this.bytes_[Pr]|this.bytes_[Pr+1]<<8|this.bytes_[Pr+2]<<16|this.bytes_[Pr+3]<<24},Ar.ByteBuffer.prototype.readUint32=function(Pr){return this.readInt32(Pr)>>>0},Ar.ByteBuffer.prototype.readInt64=function(Pr){return new Ar.Long(this.readInt32(Pr),this.readInt32(Pr+4))},Ar.ByteBuffer.prototype.readUint64=function(Pr){return new Ar.Long(this.readUint32(Pr),this.readUint32(Pr+4))},Ar.ByteBuffer.prototype.readFloat32=function(Pr){return Ar.int32[0]=this.readInt32(Pr),Ar.float32[0]},Ar.ByteBuffer.prototype.readFloat64=function(Pr){return Ar.int32[Ar.isLittleEndian?0:1]=this.readInt32(Pr),Ar.int32[Ar.isLittleEndian?1:0]=this.readInt32(Pr+4),Ar.float64[0]},Ar.ByteBuffer.prototype.writeInt8=function(Pr,Lr){this.bytes_[Pr]=Lr},Ar.ByteBuffer.prototype.writeUint8=function(Pr,Lr){this.bytes_[Pr]=Lr},Ar.ByteBuffer.prototype.writeInt16=function(Pr,Lr){this.bytes_[Pr]=Lr,this.bytes_[Pr+1]=Lr>>8},Ar.ByteBuffer.prototype.writeUint16=function(Pr,Lr){this.bytes_[Pr]=Lr,this.bytes_[Pr+1]=Lr>>8},Ar.ByteBuffer.prototype.writeInt32=function(Pr,Lr){this.bytes_[Pr]=Lr,this.bytes_[Pr+1]=Lr>>8,this.bytes_[Pr+2]=Lr>>16,this.bytes_[Pr+3]=Lr>>24},Ar.ByteBuffer.prototype.writeUint32=function(Pr,Lr){this.bytes_[Pr]=Lr,this.bytes_[Pr+1]=Lr>>8,this.bytes_[Pr+2]=Lr>>16,this.bytes_[Pr+3]=Lr>>24},Ar.ByteBuffer.prototype.writeInt64=function(Pr,Lr){this.writeInt32(Pr,Lr.low),this.writeInt32(Pr+4,Lr.high)},Ar.ByteBuffer.prototype.writeUint64=function(Pr,Lr){this.writeUint32(Pr,Lr.low),this.writeUint32(Pr+4,Lr.high)},Ar.ByteBuffer.prototype.writeFloat32=function(Pr,Lr){Ar.float32[0]=Lr,this.writeInt32(Pr,Ar.int32[0])},Ar.ByteBuffer.prototype.writeFloat64=function(Pr,Lr){Ar.float64[0]=Lr,this.writeInt32(Pr,Ar.int32[Ar.isLittleEndian?0:1]),this.writeInt32(Pr+4,Ar.int32[Ar.isLittleEndian?1:0])},Ar.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+Ar.SIZEOF_INT+Ar.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var Pr="",Lr=0;Lr<Ar.FILE_IDENTIFIER_LENGTH;Lr++)Pr+=String.fromCharCode(this.readInt8(this.position_+Ar.SIZEOF_INT+Lr));return Pr},Ar.ByteBuffer.prototype.__offset=function(Pr,Lr){var Mr=Pr-this.readInt32(Pr);return Lr<this.readInt16(Mr)?this.readInt16(Mr+Lr):0},Ar.ByteBuffer.prototype.__union=function(Pr,Lr){return Pr.bb_pos=Lr+this.readInt32(Lr),Pr.bb=this,Pr},Ar.ByteBuffer.prototype.__string=function(Pr,Lr){Pr+=this.readInt32(Pr);var Mr=this.readInt32(Pr),Fr="",zr=0;if(Pr+=Ar.SIZEOF_INT,Lr===Ar.Encoding.UTF8_BYTES)return this.bytes_.subarray(Pr,Pr+Mr);for(;zr<Mr;){var Ur,Vr=this.readUint8(Pr+zr++);if(Vr<192)Ur=Vr;else{var Nr=this.readUint8(Pr+zr++);if(Vr<224)Ur=(31&Vr)<<6|63&Nr;else{var Dr=this.readUint8(Pr+zr++);Ur=Vr<240?(15&Vr)<<12|(63&Nr)<<6|63&Dr:(7&Vr)<<18|(63&Nr)<<12|(63&Dr)<<6|63&this.readUint8(Pr+zr++)}}Ur<65536?Fr+=String.fromCharCode(Ur):(Ur-=65536,Fr+=String.fromCharCode(55296+(Ur>>10),56320+(1023&Ur)))}return Fr},Ar.ByteBuffer.prototype.__indirect=function(Pr){return Pr+this.readInt32(Pr)},Ar.ByteBuffer.prototype.__vector=function(Pr){return Pr+this.readInt32(Pr)+Ar.SIZEOF_INT},Ar.ByteBuffer.prototype.__vector_len=function(Pr){return this.readInt32(Pr+this.readInt32(Pr))},Ar.ByteBuffer.prototype.__has_identifier=function(Pr){if(Pr.length!=Ar.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+Ar.FILE_IDENTIFIER_LENGTH);for(var Lr=0;Lr<Ar.FILE_IDENTIFIER_LENGTH;Lr++)if(Pr.charCodeAt(Lr)!=this.readInt8(this.position_+Ar.SIZEOF_INT+Lr))return!1;return!0},Ar.ByteBuffer.prototype.createLong=function(Pr,Lr){return Ar.Long.create(Pr,Lr)}}},__webpack_module_cache__={};function __nested_webpack_require_606622__(_r){var Tr=__webpack_module_cache__[_r];if(Tr!==void 0)return Tr.exports;var Rr=__webpack_module_cache__[_r]={exports:{}};return __webpack_modules__[_r].call(Rr.exports,Rr,Rr.exports,__nested_webpack_require_606622__),Rr.exports}__nested_webpack_require_606622__.n=_r=>{var Tr=_r&&_r.__esModule?()=>_r.default:()=>_r;return __nested_webpack_require_606622__.d(Tr,{a:Tr}),Tr},__nested_webpack_require_606622__.d=(_r,Tr)=>{for(var Rr in Tr)__nested_webpack_require_606622__.o(Tr,Rr)&&!__nested_webpack_require_606622__.o(_r,Rr)&&Object.defineProperty(_r,Rr,{enumerable:!0,get:Tr[Rr]})},__nested_webpack_require_606622__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__nested_webpack_require_606622__.o=(_r,Tr)=>Object.prototype.hasOwnProperty.call(_r,Tr),__nested_webpack_require_606622__.r=_r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_r,"__esModule",{value:!0})};var __nested_webpack_exports__=__nested_webpack_require_606622__(1057);return __nested_webpack_exports__})(),module.exports=t()},60:_r=>{_r.exports="https://unpkg.com/@imgly/background-removal@1.0.6/dist/a620c8c752bdf5c69d98.onnx"},920:_r=>{_r.exports="https://unpkg.com/@imgly/background-removal@1.0.6/dist/2ebb460f4adfe0ebf34d.onnx"},111:_r=>{_r.exports="https://unpkg.com/@imgly/background-removal@1.0.6/dist/ec79eeba92555e43251e.wasm"},965:_r=>{_r.exports="https://unpkg.com/@imgly/background-removal@1.0.6/dist/5fd9e75c3bb1f31c2207.wasm"},48:_r=>{_r.exports="https://unpkg.com/@imgly/background-removal@1.0.6/dist/deea8254622ca47c4771.wasm"},884:_r=>{_r.exports="https://unpkg.com/@imgly/background-removal@1.0.6/dist/9f4d6e330a4b1cebd316.wasm"},342:_r=>{_r.exports="https://unpkg.com/@imgly/background-removal@1.0.6/dist/eac818d9d05525e8f209.wasm"},393:_r=>{_r.exports="https://unpkg.com/@imgly/background-removal@1.0.6/dist/c285eb5377ad8280cf32.wasm"}},__webpack_module_cache__={};function __webpack_require__(_r){var Tr=__webpack_module_cache__[_r];if(Tr!==void 0)return Tr.exports;var Rr=__webpack_module_cache__[_r]={id:_r,loaded:!1,exports:{}};return __webpack_modules__[_r].call(Rr.exports,Rr,Rr.exports,__webpack_require__),Rr.loaded=!0,Rr.exports}__webpack_require__.d=(_r,Tr)=>{for(var Rr in Tr)__webpack_require__.o(Tr,Rr)&&!__webpack_require__.o(_r,Rr)&&Object.defineProperty(_r,Rr,{enumerable:!0,get:Tr[Rr]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(_r,Tr)=>Object.prototype.hasOwnProperty.call(_r,Tr),__webpack_require__.nmd=_r=>(_r.paths=[],_r.children||(_r.children=[]),_r);var __webpack_exports__={};(()=>{function _r(bs,os,cs,_s){return new(cs||(cs=Promise))(function(ss,Es){function $s(Ms){try{Cs(_s.next(Ms))}catch(Hs){Es(Hs)}}function ws(Ms){try{Cs(_s.throw(Ms))}catch(Hs){Es(Hs)}}function Cs(Ms){var Hs;Ms.done?ss(Ms.value):(Hs=Ms.value,Hs instanceof cs?Hs:new cs(function(lo){lo(Hs)})).then($s,ws)}Cs((_s=_s.apply(bs,os||[])).next())})}function Tr(bs,os){var cs,_s,ss,Es,$s={label:0,sent:function(){if(1&ss[0])throw ss[1];return ss[1]},trys:[],ops:[]};return Es={next:ws(0),throw:ws(1),return:ws(2)},typeof Symbol=="function"&&(Es[Symbol.iterator]=function(){return this}),Es;function ws(Cs){return function(Ms){return function(Hs){if(cs)throw new TypeError("Generator is already executing.");for(;Es&&(Es=0,Hs[0]&&($s=0)),$s;)try{if(cs=1,_s&&(ss=2&Hs[0]?_s.return:Hs[0]?_s.throw||((ss=_s.return)&&ss.call(_s),0):_s.next)&&!(ss=ss.call(_s,Hs[1])).done)return ss;switch(_s=0,ss&&(Hs=[2&Hs[0],ss.value]),Hs[0]){case 0:case 1:ss=Hs;break;case 4:return $s.label++,{value:Hs[1],done:!1};case 5:$s.label++,_s=Hs[1],Hs=[0];continue;case 7:Hs=$s.ops.pop(),$s.trys.pop();continue;default:if(!((ss=(ss=$s.trys).length>0&&ss[ss.length-1])||Hs[0]!==6&&Hs[0]!==2)){$s=0;continue}if(Hs[0]===3&&(!ss||Hs[1]>ss[0]&&Hs[1]<ss[3])){$s.label=Hs[1];break}if(Hs[0]===6&&$s.label<ss[1]){$s.label=ss[1],ss=Hs;break}if(ss&&$s.label<ss[2]){$s.label=ss[2],$s.ops.push(Hs);break}ss[2]&&$s.ops.pop(),$s.trys.pop();continue}Hs=os.call(bs,$s)}catch(lo){Hs=[6,lo],_s=0}finally{cs=ss=0}if(5&Hs[0])throw Hs[1];return{value:Hs[0]?Hs[1]:void 0,done:!0}}([Cs,Ms])}}}function Rr(bs){return _r(this,void 0,void 0,function(){return Tr(this,function(os){switch(os.label){case 0:return[4,createImageBitmap(bs)];case 1:return[2,Pr(os.sent())]}})})}function Ar(bs,os,cs){return os===void 0&&(os=.8),cs===void 0&&(cs="image/png"),_r(this,void 0,void 0,function(){var _s;return Tr(this,function(ss){return(_s=new OffscreenCanvas(bs.width,bs.height)).getContext("2d").putImageData(bs,0,0),[2,_s.convertToBlob({quality:os,type:cs})]})})}function Pr(bs){var os=new OffscreenCanvas(bs.width,bs.height),cs=os.getContext("2d");return cs.drawImage(bs,0,0),cs.getImageData(0,0,os.width,os.height)}function Lr(bs,os,cs){return _r(this,void 0,void 0,function(){return Tr(this,function(_s){switch(_s.label){case 0:return[4,createImageBitmap(bs,{resizeWidth:os,resizeHeight:cs,resizeQuality:"high",premultiplyAlpha:"premultiply"})];case 1:return[2,Pr(_s.sent())]}})})}function Mr(bs){return function(os){return new RegExp("^(?:[a-z+]+:)?//","i").test(os)}(bs)?bs:new URL(bs,window.location.href).href}function Fr(bs){return _r(this,void 0,void 0,function(){return Tr(this,function(os){switch(os.label){case 0:return typeof bs=="string"&&(bs=Mr(bs),bs=new URL(bs)),bs instanceof URL?[4,fetch(bs,{})]:[3,3];case 1:return[4,os.sent().blob()];case 2:bs=os.sent(),os.label=3;case 3:return(bs instanceof ArrayBuffer||ArrayBuffer.isView(bs))&&(bs=new Blob([bs])),bs instanceof Blob?[4,Rr(bs)]:[3,5];case 4:bs=os.sent(),os.label=5;case 5:return[2,bs]}})})}function zr(bs,os,cs,_s){return _r(this,void 0,void 0,function(){var ss,Es,$s,ws,Cs,Ms,Hs,lo,Io,Oo,qo,Mo,Qo,Xo,Ko,Uo;return Tr(this,function(jo){switch(jo.label){case 0:return os.progress&&os.progress("compute:inference",0,1),ss=1024,Es=bs.width,$s=bs.height,ws=[1,3,ss,ss],[4,Lr(bs,ss,ss)];case 1:return Cs=jo.sent(),Ms=function(Vl,Rl,Ql){Rl===void 0&&(Rl=[128,128,128]),Ql===void 0&&(Ql=[256,256,256]);for(var Wl=Vl.data,mu=Vl.width*Vl.height,fu=new Float32Array(3*mu),wu=0,ou=0;wu<Wl.length;wu+=4,ou+=1)fu[ou]=(Wl[wu]-Rl[0])/Ql[0],fu[ou+mu]=(Wl[wu+1]-Rl[1])/Ql[1],fu[ou+mu+mu]=(Wl[wu+2]-Rl[2])/Ql[2];return fu}(Cs),[4,cs.runSession(_s,[["input",{data:Ms,shape:ws,dataType:"float32"}]],["output"])];case 2:for(Hs=jo.sent(),lo=ss*ss,Io=0;Io<4*lo;Io+=4)Oo=Io/4,qo=Hs[0].data[Oo],Cs.data[Io+3]=255*qo;return zo=bs.width,Jo=bs.height,Ho=ss/zo,yl=ss/Jo,_l=Math.min(Ho,yl),Mo=[Math.floor(zo*_l),Math.floor(Jo*_l)],Qo=Mo[0],Xo=Mo[1],Ko=Math.min(Qo,Es),Uo=Math.min(Xo,$s),[4,Lr(Cs,Ko,Uo)];case 3:return Cs=jo.sent(),os.progress&&os.progress("compute:inference",1,1),[2,Cs]}var zo,Jo,Ho,yl,_l})})}var Ur,Vr;__webpack_require__.d(__webpack_exports__,{Z:()=>zs}),typeof SuppressedError=="function"&&SuppressedError,function(bs){bs.assertEqual=os=>os,bs.assertIs=function(os){},bs.assertNever=function(os){throw new Error},bs.arrayToEnum=os=>{const cs={};for(const _s of os)cs[_s]=_s;return cs},bs.getValidEnumValues=os=>{const cs=bs.objectKeys(os).filter(ss=>typeof os[os[ss]]!="number"),_s={};for(const ss of cs)_s[ss]=os[ss];return bs.objectValues(_s)},bs.objectValues=os=>bs.objectKeys(os).map(function(cs){return os[cs]}),bs.objectKeys=typeof Object.keys=="function"?os=>Object.keys(os):os=>{const cs=[];for(const _s in os)Object.prototype.hasOwnProperty.call(os,_s)&&cs.push(_s);return cs},bs.find=(os,cs)=>{for(const _s of os)if(cs(_s))return _s},bs.isInteger=typeof Number.isInteger=="function"?os=>Number.isInteger(os):os=>typeof os=="number"&&isFinite(os)&&Math.floor(os)===os,bs.joinValues=function(os,cs=" | "){return os.map(_s=>typeof _s=="string"?`'${_s}'`:_s).join(cs)},bs.jsonStringifyReplacer=(os,cs)=>typeof cs=="bigint"?cs.toString():cs}(Ur||(Ur={})),function(bs){bs.mergeShapes=(os,cs)=>({...os,...cs})}(Vr||(Vr={}));const Nr=Ur.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Dr=bs=>{switch(typeof bs){case"undefined":return Nr.undefined;case"string":return Nr.string;case"number":return isNaN(bs)?Nr.nan:Nr.number;case"boolean":return Nr.boolean;case"function":return Nr.function;case"bigint":return Nr.bigint;case"symbol":return Nr.symbol;case"object":return Array.isArray(bs)?Nr.array:bs===null?Nr.null:bs.then&&typeof bs.then=="function"&&bs.catch&&typeof bs.catch=="function"?Nr.promise:typeof Map<"u"&&bs instanceof Map?Nr.map:typeof Set<"u"&&bs instanceof Set?Nr.set:typeof Date<"u"&&bs instanceof Date?Nr.date:Nr.object;default:return Nr.unknown}},jr=Ur.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Gr extends Error{constructor(os){super(),this.issues=[],this.addIssue=_s=>{this.issues=[...this.issues,_s]},this.addIssues=(_s=[])=>{this.issues=[...this.issues,..._s]};const cs=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,cs):this.__proto__=cs,this.name="ZodError",this.issues=os}get errors(){return this.issues}format(os){const cs=os||function(Es){return Es.message},_s={_errors:[]},ss=Es=>{for(const $s of Es.issues)if($s.code==="invalid_union")$s.unionErrors.map(ss);else if($s.code==="invalid_return_type")ss($s.returnTypeError);else if($s.code==="invalid_arguments")ss($s.argumentsError);else if($s.path.length===0)_s._errors.push(cs($s));else{let ws=_s,Cs=0;for(;Cs<$s.path.length;){const Ms=$s.path[Cs];Cs===$s.path.length-1?(ws[Ms]=ws[Ms]||{_errors:[]},ws[Ms]._errors.push(cs($s))):ws[Ms]=ws[Ms]||{_errors:[]},ws=ws[Ms],Cs++}}};return ss(this),_s}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ur.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(os=cs=>cs.message){const cs={},_s=[];for(const ss of this.issues)ss.path.length>0?(cs[ss.path[0]]=cs[ss.path[0]]||[],cs[ss.path[0]].push(os(ss))):_s.push(os(ss));return{formErrors:_s,fieldErrors:cs}}get formErrors(){return this.flatten()}}Gr.create=bs=>new Gr(bs);const Wr=(bs,os)=>{let cs;switch(bs.code){case jr.invalid_type:cs=bs.received===Nr.undefined?"Required":`Expected ${bs.expected}, received ${bs.received}`;break;case jr.invalid_literal:cs=`Invalid literal value, expected ${JSON.stringify(bs.expected,Ur.jsonStringifyReplacer)}`;break;case jr.unrecognized_keys:cs=`Unrecognized key(s) in object: ${Ur.joinValues(bs.keys,", ")}`;break;case jr.invalid_union:cs="Invalid input";break;case jr.invalid_union_discriminator:cs=`Invalid discriminator value. Expected ${Ur.joinValues(bs.options)}`;break;case jr.invalid_enum_value:cs=`Invalid enum value. Expected ${Ur.joinValues(bs.options)}, received '${bs.received}'`;break;case jr.invalid_arguments:cs="Invalid function arguments";break;case jr.invalid_return_type:cs="Invalid function return type";break;case jr.invalid_date:cs="Invalid date";break;case jr.invalid_string:typeof bs.validation=="object"?"includes"in bs.validation?(cs=`Invalid input: must include "${bs.validation.includes}"`,typeof bs.validation.position=="number"&&(cs=`${cs} at one or more positions greater than or equal to ${bs.validation.position}`)):"startsWith"in bs.validation?cs=`Invalid input: must start with "${bs.validation.startsWith}"`:"endsWith"in bs.validation?cs=`Invalid input: must end with "${bs.validation.endsWith}"`:Ur.assertNever(bs.validation):cs=bs.validation!=="regex"?`Invalid ${bs.validation}`:"Invalid";break;case jr.too_small:cs=bs.type==="array"?`Array must contain ${bs.exact?"exactly":bs.inclusive?"at least":"more than"} ${bs.minimum} element(s)`:bs.type==="string"?`String must contain ${bs.exact?"exactly":bs.inclusive?"at least":"over"} ${bs.minimum} character(s)`:bs.type==="number"?`Number must be ${bs.exact?"exactly equal to ":bs.inclusive?"greater than or equal to ":"greater than "}${bs.minimum}`:bs.type==="date"?`Date must be ${bs.exact?"exactly equal to ":bs.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(bs.minimum))}`:"Invalid input";break;case jr.too_big:cs=bs.type==="array"?`Array must contain ${bs.exact?"exactly":bs.inclusive?"at most":"less than"} ${bs.maximum} element(s)`:bs.type==="string"?`String must contain ${bs.exact?"exactly":bs.inclusive?"at most":"under"} ${bs.maximum} character(s)`:bs.type==="number"?`Number must be ${bs.exact?"exactly":bs.inclusive?"less than or equal to":"less than"} ${bs.maximum}`:bs.type==="bigint"?`BigInt must be ${bs.exact?"exactly":bs.inclusive?"less than or equal to":"less than"} ${bs.maximum}`:bs.type==="date"?`Date must be ${bs.exact?"exactly":bs.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(bs.maximum))}`:"Invalid input";break;case jr.custom:cs="Invalid input";break;case jr.invalid_intersection_types:cs="Intersection results could not be merged";break;case jr.not_multiple_of:cs=`Number must be a multiple of ${bs.multipleOf}`;break;case jr.not_finite:cs="Number must be finite";break;default:cs=os.defaultError,Ur.assertNever(bs)}return{message:cs}};let qr=Wr;function Kr(){return qr}const Xr=bs=>{const{data:os,path:cs,errorMaps:_s,issueData:ss}=bs,Es=[...cs,...ss.path||[]],$s={...ss,path:Es};let ws="";const Cs=_s.filter(Ms=>!!Ms).slice().reverse();for(const Ms of Cs)ws=Ms($s,{data:os,defaultError:ws}).message;return{...ss,path:Es,message:ss.message||ws}};function Zr(bs,os){const cs=Xr({issueData:os,data:bs.data,path:bs.path,errorMaps:[bs.common.contextualErrorMap,bs.schemaErrorMap,Kr(),Wr].filter(_s=>!!_s)});bs.common.issues.push(cs)}class Jr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(os,cs){const _s=[];for(const ss of cs){if(ss.status==="aborted")return _i;ss.status==="dirty"&&os.dirty(),_s.push(ss.value)}return{status:os.value,value:_s}}static async mergeObjectAsync(os,cs){const _s=[];for(const ss of cs)_s.push({key:await ss.key,value:await ss.value});return Jr.mergeObjectSync(os,_s)}static mergeObjectSync(os,cs){const _s={};for(const ss of cs){const{key:Es,value:$s}=ss;if(Es.status==="aborted"||$s.status==="aborted")return _i;Es.status==="dirty"&&os.dirty(),$s.status==="dirty"&&os.dirty(),($s.value!==void 0||ss.alwaysSet)&&(_s[Es.value]=$s.value)}return{status:os.value,value:_s}}}const _i=Object.freeze({status:"aborted"}),es=bs=>({status:"dirty",value:bs}),ts=bs=>({status:"valid",value:bs}),rs=bs=>bs.status==="aborted",ns=bs=>bs.status==="dirty",as=bs=>bs.status==="valid",ls=bs=>typeof Promise<"u"&&bs instanceof Promise;var us;(function(bs){bs.errToObj=os=>typeof os=="string"?{message:os}:os||{},bs.toString=os=>typeof os=="string"?os:os==null?void 0:os.message})(us||(us={}));class xs{constructor(os,cs,_s,ss){this._cachedPath=[],this.parent=os,this.data=cs,this._path=_s,this._key=ss}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ts=(bs,os)=>{if(as(os))return{success:!0,data:os.value};if(!bs.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const cs=new Gr(bs.common.issues);return this._error=cs,this._error}}};function vs(bs){if(!bs)return{};const{errorMap:os,invalid_type_error:cs,required_error:_s,description:ss}=bs;if(os&&(cs||_s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return os?{errorMap:os,description:ss}:{errorMap:(Es,$s)=>Es.code!=="invalid_type"?{message:$s.defaultError}:$s.data===void 0?{message:_s??$s.defaultError}:{message:cs??$s.defaultError},description:ss}}class gs{constructor(os){this.spa=this.safeParseAsync,this._def=os,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(os){return Dr(os.data)}_getOrReturnCtx(os,cs){return cs||{common:os.parent.common,data:os.data,parsedType:Dr(os.data),schemaErrorMap:this._def.errorMap,path:os.path,parent:os.parent}}_processInputParams(os){return{status:new Jr,ctx:{common:os.parent.common,data:os.data,parsedType:Dr(os.data),schemaErrorMap:this._def.errorMap,path:os.path,parent:os.parent}}}_parseSync(os){const cs=this._parse(os);if(ls(cs))throw new Error("Synchronous parse encountered promise.");return cs}_parseAsync(os){const cs=this._parse(os);return Promise.resolve(cs)}parse(os,cs){const _s=this.safeParse(os,cs);if(_s.success)return _s.data;throw _s.error}safeParse(os,cs){var _s;const ss={common:{issues:[],async:(_s=cs==null?void 0:cs.async)!==null&&_s!==void 0&&_s,contextualErrorMap:cs==null?void 0:cs.errorMap},path:(cs==null?void 0:cs.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:os,parsedType:Dr(os)},Es=this._parseSync({data:os,path:ss.path,parent:ss});return Ts(ss,Es)}async parseAsync(os,cs){const _s=await this.safeParseAsync(os,cs);if(_s.success)return _s.data;throw _s.error}async safeParseAsync(os,cs){const _s={common:{issues:[],contextualErrorMap:cs==null?void 0:cs.errorMap,async:!0},path:(cs==null?void 0:cs.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:os,parsedType:Dr(os)},ss=this._parse({data:os,path:_s.path,parent:_s}),Es=await(ls(ss)?ss:Promise.resolve(ss));return Ts(_s,Es)}refine(os,cs){const _s=ss=>typeof cs=="string"||cs===void 0?{message:cs}:typeof cs=="function"?cs(ss):cs;return this._refinement((ss,Es)=>{const $s=os(ss),ws=()=>Es.addIssue({code:jr.custom,..._s(ss)});return typeof Promise<"u"&&$s instanceof Promise?$s.then(Cs=>!!Cs||(ws(),!1)):!!$s||(ws(),!1)})}refinement(os,cs){return this._refinement((_s,ss)=>!!os(_s)||(ss.addIssue(typeof cs=="function"?cs(_s,ss):cs),!1))}_refinement(os){return new Ps({schema:this,typeName:So.ZodEffects,effect:{type:"refinement",refinement:os}})}superRefine(os){return this._refinement(os)}optional(){return Ls.create(this,this._def)}nullable(){return Zs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ro.create(this,this._def)}promise(){return ps.create(this,this._def)}or(os){return No.create([this,os],this._def)}and(os){return ko.create(this,os,this._def)}transform(os){return new Ps({...vs(this._def),schema:this,typeName:So.ZodEffects,effect:{type:"transform",transform:os}})}default(os){const cs=typeof os=="function"?os:()=>os;return new Eo({...vs(this._def),innerType:this,defaultValue:cs,typeName:So.ZodDefault})}brand(){return new Yo({typeName:So.ZodBranded,type:this,...vs(this._def)})}catch(os){const cs=typeof os=="function"?os:()=>os;return new yo({...vs(this._def),innerType:this,catchValue:cs,typeName:So.ZodCatch})}describe(os){return new this.constructor({...this._def,description:os})}pipe(os){return Go.create(this,os)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const fs=/^c[^\s-]{8,}$/i,ys=/^[a-z][a-z0-9]*$/,ks=/[0-9A-HJKMNP-TV-Z]{26}/,Fs=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Us=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,Vs=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,ao=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,qs=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class Qs extends gs{constructor(){super(...arguments),this._regex=(os,cs,_s)=>this.refinement(ss=>os.test(ss),{validation:cs,code:jr.invalid_string,...us.errToObj(_s)}),this.nonempty=os=>this.min(1,us.errToObj(os)),this.trim=()=>new Qs({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Qs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Qs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(os){if(this._def.coerce&&(os.data=String(os.data)),this._getType(os)!==Nr.string){const ws=this._getOrReturnCtx(os);return Zr(ws,{code:jr.invalid_type,expected:Nr.string,received:ws.parsedType}),_i}const cs=new Jr;let _s;for(const ws of this._def.checks)if(ws.kind==="min")os.data.length<ws.value&&(_s=this._getOrReturnCtx(os,_s),Zr(_s,{code:jr.too_small,minimum:ws.value,type:"string",inclusive:!0,exact:!1,message:ws.message}),cs.dirty());else if(ws.kind==="max")os.data.length>ws.value&&(_s=this._getOrReturnCtx(os,_s),Zr(_s,{code:jr.too_big,maximum:ws.value,type:"string",inclusive:!0,exact:!1,message:ws.message}),cs.dirty());else if(ws.kind==="length"){const Cs=os.data.length>ws.value,Ms=os.data.length<ws.value;(Cs||Ms)&&(_s=this._getOrReturnCtx(os,_s),Cs?Zr(_s,{code:jr.too_big,maximum:ws.value,type:"string",inclusive:!0,exact:!0,message:ws.message}):Ms&&Zr(_s,{code:jr.too_small,minimum:ws.value,type:"string",inclusive:!0,exact:!0,message:ws.message}),cs.dirty())}else if(ws.kind==="email")Us.test(os.data)||(_s=this._getOrReturnCtx(os,_s),Zr(_s,{validation:"email",code:jr.invalid_string,message:ws.message}),cs.dirty());else if(ws.kind==="emoji")Vs.test(os.data)||(_s=this._getOrReturnCtx(os,_s),Zr(_s,{validation:"emoji",code:jr.invalid_string,message:ws.message}),cs.dirty());else if(ws.kind==="uuid")Fs.test(os.data)||(_s=this._getOrReturnCtx(os,_s),Zr(_s,{validation:"uuid",code:jr.invalid_string,message:ws.message}),cs.dirty());else if(ws.kind==="cuid")fs.test(os.data)||(_s=this._getOrReturnCtx(os,_s),Zr(_s,{validation:"cuid",code:jr.invalid_string,message:ws.message}),cs.dirty());else if(ws.kind==="cuid2")ys.test(os.data)||(_s=this._getOrReturnCtx(os,_s),Zr(_s,{validation:"cuid2",code:jr.invalid_string,message:ws.message}),cs.dirty());else if(ws.kind==="ulid")ks.test(os.data)||(_s=this._getOrReturnCtx(os,_s),Zr(_s,{validation:"ulid",code:jr.invalid_string,message:ws.message}),cs.dirty());else if(ws.kind==="url")try{new URL(os.data)}catch{_s=this._getOrReturnCtx(os,_s),Zr(_s,{validation:"url",code:jr.invalid_string,message:ws.message}),cs.dirty()}else ws.kind==="regex"?(ws.regex.lastIndex=0,ws.regex.test(os.data)||(_s=this._getOrReturnCtx(os,_s),Zr(_s,{validation:"regex",code:jr.invalid_string,message:ws.message}),cs.dirty())):ws.kind==="trim"?os.data=os.data.trim():ws.kind==="includes"?os.data.includes(ws.value,ws.position)||(_s=this._getOrReturnCtx(os,_s),Zr(_s,{code:jr.invalid_string,validation:{includes:ws.value,position:ws.position},message:ws.message}),cs.dirty()):ws.kind==="toLowerCase"?os.data=os.data.toLowerCase():ws.kind==="toUpperCase"?os.data=os.data.toUpperCase():ws.kind==="startsWith"?os.data.startsWith(ws.value)||(_s=this._getOrReturnCtx(os,_s),Zr(_s,{code:jr.invalid_string,validation:{startsWith:ws.value},message:ws.message}),cs.dirty()):ws.kind==="endsWith"?os.data.endsWith(ws.value)||(_s=this._getOrReturnCtx(os,_s),Zr(_s,{code:jr.invalid_string,validation:{endsWith:ws.value},message:ws.message}),cs.dirty()):ws.kind==="datetime"?(($s=ws).precision?$s.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${$s.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${$s.precision}}Z$`):$s.precision===0?$s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):$s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(os.data)||(_s=this._getOrReturnCtx(os,_s),Zr(_s,{code:jr.invalid_string,validation:"datetime",message:ws.message}),cs.dirty()):ws.kind==="ip"?(ss=os.data,((Es=ws.version)!=="v4"&&Es||!ao.test(ss))&&(Es!=="v6"&&Es||!qs.test(ss))&&(_s=this._getOrReturnCtx(os,_s),Zr(_s,{validation:"ip",code:jr.invalid_string,message:ws.message}),cs.dirty())):Ur.assertNever(ws);var ss,Es,$s;return{status:cs.value,value:os.data}}_addCheck(os){return new Qs({...this._def,checks:[...this._def.checks,os]})}email(os){return this._addCheck({kind:"email",...us.errToObj(os)})}url(os){return this._addCheck({kind:"url",...us.errToObj(os)})}emoji(os){return this._addCheck({kind:"emoji",...us.errToObj(os)})}uuid(os){return this._addCheck({kind:"uuid",...us.errToObj(os)})}cuid(os){return this._addCheck({kind:"cuid",...us.errToObj(os)})}cuid2(os){return this._addCheck({kind:"cuid2",...us.errToObj(os)})}ulid(os){return this._addCheck({kind:"ulid",...us.errToObj(os)})}ip(os){return this._addCheck({kind:"ip",...us.errToObj(os)})}datetime(os){var cs;return typeof os=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:os}):this._addCheck({kind:"datetime",precision:(os==null?void 0:os.precision)===void 0?null:os==null?void 0:os.precision,offset:(cs=os==null?void 0:os.offset)!==null&&cs!==void 0&&cs,...us.errToObj(os==null?void 0:os.message)})}regex(os,cs){return this._addCheck({kind:"regex",regex:os,...us.errToObj(cs)})}includes(os,cs){return this._addCheck({kind:"includes",value:os,position:cs==null?void 0:cs.position,...us.errToObj(cs==null?void 0:cs.message)})}startsWith(os,cs){return this._addCheck({kind:"startsWith",value:os,...us.errToObj(cs)})}endsWith(os,cs){return this._addCheck({kind:"endsWith",value:os,...us.errToObj(cs)})}min(os,cs){return this._addCheck({kind:"min",value:os,...us.errToObj(cs)})}max(os,cs){return this._addCheck({kind:"max",value:os,...us.errToObj(cs)})}length(os,cs){return this._addCheck({kind:"length",value:os,...us.errToObj(cs)})}get isDatetime(){return!!this._def.checks.find(os=>os.kind==="datetime")}get isEmail(){return!!this._def.checks.find(os=>os.kind==="email")}get isURL(){return!!this._def.checks.find(os=>os.kind==="url")}get isEmoji(){return!!this._def.checks.find(os=>os.kind==="emoji")}get isUUID(){return!!this._def.checks.find(os=>os.kind==="uuid")}get isCUID(){return!!this._def.checks.find(os=>os.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(os=>os.kind==="cuid2")}get isULID(){return!!this._def.checks.find(os=>os.kind==="ulid")}get isIP(){return!!this._def.checks.find(os=>os.kind==="ip")}get minLength(){let os=null;for(const cs of this._def.checks)cs.kind==="min"&&(os===null||cs.value>os)&&(os=cs.value);return os}get maxLength(){let os=null;for(const cs of this._def.checks)cs.kind==="max"&&(os===null||cs.value<os)&&(os=cs.value);return os}}function mo(bs,os){const cs=(bs.toString().split(".")[1]||"").length,_s=(os.toString().split(".")[1]||"").length,ss=cs>_s?cs:_s;return parseInt(bs.toFixed(ss).replace(".",""))%parseInt(os.toFixed(ss).replace(".",""))/Math.pow(10,ss)}Qs.create=bs=>{var os;return new Qs({checks:[],typeName:So.ZodString,coerce:(os=bs==null?void 0:bs.coerce)!==null&&os!==void 0&&os,...vs(bs)})};class Xs extends gs{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(os){if(this._def.coerce&&(os.data=Number(os.data)),this._getType(os)!==Nr.number){const ss=this._getOrReturnCtx(os);return Zr(ss,{code:jr.invalid_type,expected:Nr.number,received:ss.parsedType}),_i}let cs;const _s=new Jr;for(const ss of this._def.checks)ss.kind==="int"?Ur.isInteger(os.data)||(cs=this._getOrReturnCtx(os,cs),Zr(cs,{code:jr.invalid_type,expected:"integer",received:"float",message:ss.message}),_s.dirty()):ss.kind==="min"?(ss.inclusive?os.data<ss.value:os.data<=ss.value)&&(cs=this._getOrReturnCtx(os,cs),Zr(cs,{code:jr.too_small,minimum:ss.value,type:"number",inclusive:ss.inclusive,exact:!1,message:ss.message}),_s.dirty()):ss.kind==="max"?(ss.inclusive?os.data>ss.value:os.data>=ss.value)&&(cs=this._getOrReturnCtx(os,cs),Zr(cs,{code:jr.too_big,maximum:ss.value,type:"number",inclusive:ss.inclusive,exact:!1,message:ss.message}),_s.dirty()):ss.kind==="multipleOf"?mo(os.data,ss.value)!==0&&(cs=this._getOrReturnCtx(os,cs),Zr(cs,{code:jr.not_multiple_of,multipleOf:ss.value,message:ss.message}),_s.dirty()):ss.kind==="finite"?Number.isFinite(os.data)||(cs=this._getOrReturnCtx(os,cs),Zr(cs,{code:jr.not_finite,message:ss.message}),_s.dirty()):Ur.assertNever(ss);return{status:_s.value,value:os.data}}gte(os,cs){return this.setLimit("min",os,!0,us.toString(cs))}gt(os,cs){return this.setLimit("min",os,!1,us.toString(cs))}lte(os,cs){return this.setLimit("max",os,!0,us.toString(cs))}lt(os,cs){return this.setLimit("max",os,!1,us.toString(cs))}setLimit(os,cs,_s,ss){return new Xs({...this._def,checks:[...this._def.checks,{kind:os,value:cs,inclusive:_s,message:us.toString(ss)}]})}_addCheck(os){return new Xs({...this._def,checks:[...this._def.checks,os]})}int(os){return this._addCheck({kind:"int",message:us.toString(os)})}positive(os){return this._addCheck({kind:"min",value:0,inclusive:!1,message:us.toString(os)})}negative(os){return this._addCheck({kind:"max",value:0,inclusive:!1,message:us.toString(os)})}nonpositive(os){return this._addCheck({kind:"max",value:0,inclusive:!0,message:us.toString(os)})}nonnegative(os){return this._addCheck({kind:"min",value:0,inclusive:!0,message:us.toString(os)})}multipleOf(os,cs){return this._addCheck({kind:"multipleOf",value:os,message:us.toString(cs)})}finite(os){return this._addCheck({kind:"finite",message:us.toString(os)})}safe(os){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:us.toString(os)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:us.toString(os)})}get minValue(){let os=null;for(const cs of this._def.checks)cs.kind==="min"&&(os===null||cs.value>os)&&(os=cs.value);return os}get maxValue(){let os=null;for(const cs of this._def.checks)cs.kind==="max"&&(os===null||cs.value<os)&&(os=cs.value);return os}get isInt(){return!!this._def.checks.find(os=>os.kind==="int"||os.kind==="multipleOf"&&Ur.isInteger(os.value))}get isFinite(){let os=null,cs=null;for(const _s of this._def.checks){if(_s.kind==="finite"||_s.kind==="int"||_s.kind==="multipleOf")return!0;_s.kind==="min"?(cs===null||_s.value>cs)&&(cs=_s.value):_s.kind==="max"&&(os===null||_s.value<os)&&(os=_s.value)}return Number.isFinite(cs)&&Number.isFinite(os)}}Xs.create=bs=>new Xs({checks:[],typeName:So.ZodNumber,coerce:(bs==null?void 0:bs.coerce)||!1,...vs(bs)});class so extends gs{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(os){if(this._def.coerce&&(os.data=BigInt(os.data)),this._getType(os)!==Nr.bigint){const ss=this._getOrReturnCtx(os);return Zr(ss,{code:jr.invalid_type,expected:Nr.bigint,received:ss.parsedType}),_i}let cs;const _s=new Jr;for(const ss of this._def.checks)ss.kind==="min"?(ss.inclusive?os.data<ss.value:os.data<=ss.value)&&(cs=this._getOrReturnCtx(os,cs),Zr(cs,{code:jr.too_small,type:"bigint",minimum:ss.value,inclusive:ss.inclusive,message:ss.message}),_s.dirty()):ss.kind==="max"?(ss.inclusive?os.data>ss.value:os.data>=ss.value)&&(cs=this._getOrReturnCtx(os,cs),Zr(cs,{code:jr.too_big,type:"bigint",maximum:ss.value,inclusive:ss.inclusive,message:ss.message}),_s.dirty()):ss.kind==="multipleOf"?os.data%ss.value!==BigInt(0)&&(cs=this._getOrReturnCtx(os,cs),Zr(cs,{code:jr.not_multiple_of,multipleOf:ss.value,message:ss.message}),_s.dirty()):Ur.assertNever(ss);return{status:_s.value,value:os.data}}gte(os,cs){return this.setLimit("min",os,!0,us.toString(cs))}gt(os,cs){return this.setLimit("min",os,!1,us.toString(cs))}lte(os,cs){return this.setLimit("max",os,!0,us.toString(cs))}lt(os,cs){return this.setLimit("max",os,!1,us.toString(cs))}setLimit(os,cs,_s,ss){return new so({...this._def,checks:[...this._def.checks,{kind:os,value:cs,inclusive:_s,message:us.toString(ss)}]})}_addCheck(os){return new so({...this._def,checks:[...this._def.checks,os]})}positive(os){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:us.toString(os)})}negative(os){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:us.toString(os)})}nonpositive(os){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:us.toString(os)})}nonnegative(os){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:us.toString(os)})}multipleOf(os,cs){return this._addCheck({kind:"multipleOf",value:os,message:us.toString(cs)})}get minValue(){let os=null;for(const cs of this._def.checks)cs.kind==="min"&&(os===null||cs.value>os)&&(os=cs.value);return os}get maxValue(){let os=null;for(const cs of this._def.checks)cs.kind==="max"&&(os===null||cs.value<os)&&(os=cs.value);return os}}so.create=bs=>{var os;return new so({checks:[],typeName:So.ZodBigInt,coerce:(os=bs==null?void 0:bs.coerce)!==null&&os!==void 0&&os,...vs(bs)})};class uo extends gs{_parse(os){if(this._def.coerce&&(os.data=!!os.data),this._getType(os)!==Nr.boolean){const cs=this._getOrReturnCtx(os);return Zr(cs,{code:jr.invalid_type,expected:Nr.boolean,received:cs.parsedType}),_i}return ts(os.data)}}uo.create=bs=>new uo({typeName:So.ZodBoolean,coerce:(bs==null?void 0:bs.coerce)||!1,...vs(bs)});class bo extends gs{_parse(os){if(this._def.coerce&&(os.data=new Date(os.data)),this._getType(os)!==Nr.date){const ss=this._getOrReturnCtx(os);return Zr(ss,{code:jr.invalid_type,expected:Nr.date,received:ss.parsedType}),_i}if(isNaN(os.data.getTime()))return Zr(this._getOrReturnCtx(os),{code:jr.invalid_date}),_i;const cs=new Jr;let _s;for(const ss of this._def.checks)ss.kind==="min"?os.data.getTime()<ss.value&&(_s=this._getOrReturnCtx(os,_s),Zr(_s,{code:jr.too_small,message:ss.message,inclusive:!0,exact:!1,minimum:ss.value,type:"date"}),cs.dirty()):ss.kind==="max"?os.data.getTime()>ss.value&&(_s=this._getOrReturnCtx(os,_s),Zr(_s,{code:jr.too_big,message:ss.message,inclusive:!0,exact:!1,maximum:ss.value,type:"date"}),cs.dirty()):Ur.assertNever(ss);return{status:cs.value,value:new Date(os.data.getTime())}}_addCheck(os){return new bo({...this._def,checks:[...this._def.checks,os]})}min(os,cs){return this._addCheck({kind:"min",value:os.getTime(),message:us.toString(cs)})}max(os,cs){return this._addCheck({kind:"max",value:os.getTime(),message:us.toString(cs)})}get minDate(){let os=null;for(const cs of this._def.checks)cs.kind==="min"&&(os===null||cs.value>os)&&(os=cs.value);return os!=null?new Date(os):null}get maxDate(){let os=null;for(const cs of this._def.checks)cs.kind==="max"&&(os===null||cs.value<os)&&(os=cs.value);return os!=null?new Date(os):null}}bo.create=bs=>new bo({checks:[],coerce:(bs==null?void 0:bs.coerce)||!1,typeName:So.ZodDate,...vs(bs)});class wo extends gs{_parse(os){if(this._getType(os)!==Nr.symbol){const cs=this._getOrReturnCtx(os);return Zr(cs,{code:jr.invalid_type,expected:Nr.symbol,received:cs.parsedType}),_i}return ts(os.data)}}wo.create=bs=>new wo({typeName:So.ZodSymbol,...vs(bs)});class Co extends gs{_parse(os){if(this._getType(os)!==Nr.undefined){const cs=this._getOrReturnCtx(os);return Zr(cs,{code:jr.invalid_type,expected:Nr.undefined,received:cs.parsedType}),_i}return ts(os.data)}}Co.create=bs=>new Co({typeName:So.ZodUndefined,...vs(bs)});class ds extends gs{_parse(os){if(this._getType(os)!==Nr.null){const cs=this._getOrReturnCtx(os);return Zr(cs,{code:jr.invalid_type,expected:Nr.null,received:cs.parsedType}),_i}return ts(os.data)}}ds.create=bs=>new ds({typeName:So.ZodNull,...vs(bs)});class Is extends gs{constructor(){super(...arguments),this._any=!0}_parse(os){return ts(os.data)}}Is.create=bs=>new Is({typeName:So.ZodAny,...vs(bs)});class Gs extends gs{constructor(){super(...arguments),this._unknown=!0}_parse(os){return ts(os.data)}}Gs.create=bs=>new Gs({typeName:So.ZodUnknown,...vs(bs)});class to extends gs{_parse(os){const cs=this._getOrReturnCtx(os);return Zr(cs,{code:jr.invalid_type,expected:Nr.never,received:cs.parsedType}),_i}}to.create=bs=>new to({typeName:So.ZodNever,...vs(bs)});class no extends gs{_parse(os){if(this._getType(os)!==Nr.undefined){const cs=this._getOrReturnCtx(os);return Zr(cs,{code:jr.invalid_type,expected:Nr.void,received:cs.parsedType}),_i}return ts(os.data)}}no.create=bs=>new no({typeName:So.ZodVoid,...vs(bs)});class Ro extends gs{_parse(os){const{ctx:cs,status:_s}=this._processInputParams(os),ss=this._def;if(cs.parsedType!==Nr.array)return Zr(cs,{code:jr.invalid_type,expected:Nr.array,received:cs.parsedType}),_i;if(ss.exactLength!==null){const $s=cs.data.length>ss.exactLength.value,ws=cs.data.length<ss.exactLength.value;($s||ws)&&(Zr(cs,{code:$s?jr.too_big:jr.too_small,minimum:ws?ss.exactLength.value:void 0,maximum:$s?ss.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:ss.exactLength.message}),_s.dirty())}if(ss.minLength!==null&&cs.data.length<ss.minLength.value&&(Zr(cs,{code:jr.too_small,minimum:ss.minLength.value,type:"array",inclusive:!0,exact:!1,message:ss.minLength.message}),_s.dirty()),ss.maxLength!==null&&cs.data.length>ss.maxLength.value&&(Zr(cs,{code:jr.too_big,maximum:ss.maxLength.value,type:"array",inclusive:!0,exact:!1,message:ss.maxLength.message}),_s.dirty()),cs.common.async)return Promise.all([...cs.data].map(($s,ws)=>ss.type._parseAsync(new xs(cs,$s,cs.path,ws)))).then($s=>Jr.mergeArray(_s,$s));const Es=[...cs.data].map(($s,ws)=>ss.type._parseSync(new xs(cs,$s,cs.path,ws)));return Jr.mergeArray(_s,Es)}get element(){return this._def.type}min(os,cs){return new Ro({...this._def,minLength:{value:os,message:us.toString(cs)}})}max(os,cs){return new Ro({...this._def,maxLength:{value:os,message:us.toString(cs)}})}length(os,cs){return new Ro({...this._def,exactLength:{value:os,message:us.toString(cs)}})}nonempty(os){return this.min(1,os)}}function ro(bs){if(bs instanceof go){const os={};for(const cs in bs.shape){const _s=bs.shape[cs];os[cs]=Ls.create(ro(_s))}return new go({...bs._def,shape:()=>os})}return bs instanceof Ro?new Ro({...bs._def,type:ro(bs.element)}):bs instanceof Ls?Ls.create(ro(bs.unwrap())):bs instanceof Zs?Zs.create(ro(bs.unwrap())):bs instanceof $a?$a.create(bs.items.map(os=>ro(os))):bs}Ro.create=(bs,os)=>new Ro({type:bs,minLength:null,maxLength:null,exactLength:null,typeName:So.ZodArray,...vs(os)});class go extends gs{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const os=this._def.shape(),cs=Ur.objectKeys(os);return this._cached={shape:os,keys:cs}}_parse(os){if(this._getType(os)!==Nr.object){const Cs=this._getOrReturnCtx(os);return Zr(Cs,{code:jr.invalid_type,expected:Nr.object,received:Cs.parsedType}),_i}const{status:cs,ctx:_s}=this._processInputParams(os),{shape:ss,keys:Es}=this._getCached(),$s=[];if(!(this._def.catchall instanceof to&&this._def.unknownKeys==="strip"))for(const Cs in _s.data)Es.includes(Cs)||$s.push(Cs);const ws=[];for(const Cs of Es){const Ms=ss[Cs],Hs=_s.data[Cs];ws.push({key:{status:"valid",value:Cs},value:Ms._parse(new xs(_s,Hs,_s.path,Cs)),alwaysSet:Cs in _s.data})}if(this._def.catchall instanceof to){const Cs=this._def.unknownKeys;if(Cs==="passthrough")for(const Ms of $s)ws.push({key:{status:"valid",value:Ms},value:{status:"valid",value:_s.data[Ms]}});else if(Cs==="strict")$s.length>0&&(Zr(_s,{code:jr.unrecognized_keys,keys:$s}),cs.dirty());else if(Cs!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const Cs=this._def.catchall;for(const Ms of $s){const Hs=_s.data[Ms];ws.push({key:{status:"valid",value:Ms},value:Cs._parse(new xs(_s,Hs,_s.path,Ms)),alwaysSet:Ms in _s.data})}}return _s.common.async?Promise.resolve().then(async()=>{const Cs=[];for(const Ms of ws){const Hs=await Ms.key;Cs.push({key:Hs,value:await Ms.value,alwaysSet:Ms.alwaysSet})}return Cs}).then(Cs=>Jr.mergeObjectSync(cs,Cs)):Jr.mergeObjectSync(cs,ws)}get shape(){return this._def.shape()}strict(os){return us.errToObj,new go({...this._def,unknownKeys:"strict",...os!==void 0?{errorMap:(cs,_s)=>{var ss,Es,$s,ws;const Cs=($s=(Es=(ss=this._def).errorMap)===null||Es===void 0?void 0:Es.call(ss,cs,_s).message)!==null&&$s!==void 0?$s:_s.defaultError;return cs.code==="unrecognized_keys"?{message:(ws=us.errToObj(os).message)!==null&&ws!==void 0?ws:Cs}:{message:Cs}}}:{}})}strip(){return new go({...this._def,unknownKeys:"strip"})}passthrough(){return new go({...this._def,unknownKeys:"passthrough"})}extend(os){return new go({...this._def,shape:()=>({...this._def.shape(),...os})})}merge(os){return new go({unknownKeys:os._def.unknownKeys,catchall:os._def.catchall,shape:()=>({...this._def.shape(),...os._def.shape()}),typeName:So.ZodObject})}setKey(os,cs){return this.augment({[os]:cs})}catchall(os){return new go({...this._def,catchall:os})}pick(os){const cs={};return Ur.objectKeys(os).forEach(_s=>{os[_s]&&this.shape[_s]&&(cs[_s]=this.shape[_s])}),new go({...this._def,shape:()=>cs})}omit(os){const cs={};return Ur.objectKeys(this.shape).forEach(_s=>{os[_s]||(cs[_s]=this.shape[_s])}),new go({...this._def,shape:()=>cs})}deepPartial(){return ro(this)}partial(os){const cs={};return Ur.objectKeys(this.shape).forEach(_s=>{const ss=this.shape[_s];os&&!os[_s]?cs[_s]=ss:cs[_s]=ss.optional()}),new go({...this._def,shape:()=>cs})}required(os){const cs={};return Ur.objectKeys(this.shape).forEach(_s=>{if(os&&!os[_s])cs[_s]=this.shape[_s];else{let ss=this.shape[_s];for(;ss instanceof Ls;)ss=ss._def.innerType;cs[_s]=ss}}),new go({...this._def,shape:()=>cs})}keyof(){return Bs(Ur.objectKeys(this.shape))}}go.create=(bs,os)=>new go({shape:()=>bs,unknownKeys:"strip",catchall:to.create(),typeName:So.ZodObject,...vs(os)}),go.strictCreate=(bs,os)=>new go({shape:()=>bs,unknownKeys:"strict",catchall:to.create(),typeName:So.ZodObject,...vs(os)}),go.lazycreate=(bs,os)=>new go({shape:bs,unknownKeys:"strip",catchall:to.create(),typeName:So.ZodObject,...vs(os)});class No extends gs{_parse(os){const{ctx:cs}=this._processInputParams(os),_s=this._def.options;if(cs.common.async)return Promise.all(_s.map(async ss=>{const Es={...cs,common:{...cs.common,issues:[]},parent:null};return{result:await ss._parseAsync({data:cs.data,path:cs.path,parent:Es}),ctx:Es}})).then(function(ss){for(const $s of ss)if($s.result.status==="valid")return $s.result;for(const $s of ss)if($s.result.status==="dirty")return cs.common.issues.push(...$s.ctx.common.issues),$s.result;const Es=ss.map($s=>new Gr($s.ctx.common.issues));return Zr(cs,{code:jr.invalid_union,unionErrors:Es}),_i});{let ss;const Es=[];for(const ws of _s){const Cs={...cs,common:{...cs.common,issues:[]},parent:null},Ms=ws._parseSync({data:cs.data,path:cs.path,parent:Cs});if(Ms.status==="valid")return Ms;Ms.status!=="dirty"||ss||(ss={result:Ms,ctx:Cs}),Cs.common.issues.length&&Es.push(Cs.common.issues)}if(ss)return cs.common.issues.push(...ss.ctx.common.issues),ss.result;const $s=Es.map(ws=>new Gr(ws));return Zr(cs,{code:jr.invalid_union,unionErrors:$s}),_i}}get options(){return this._def.options}}No.create=(bs,os)=>new No({options:bs,typeName:So.ZodUnion,...vs(os)});const Do=bs=>bs instanceof cu?Do(bs.schema):bs instanceof Ps?Do(bs.innerType()):bs instanceof Vo?[bs.value]:bs instanceof Ws?bs.options:bs instanceof ms?Object.keys(bs.enum):bs instanceof Eo?Do(bs._def.innerType):bs instanceof Co?[void 0]:bs instanceof ds?[null]:null;class To extends gs{_parse(os){const{ctx:cs}=this._processInputParams(os);if(cs.parsedType!==Nr.object)return Zr(cs,{code:jr.invalid_type,expected:Nr.object,received:cs.parsedType}),_i;const _s=this.discriminator,ss=cs.data[_s],Es=this.optionsMap.get(ss);return Es?cs.common.async?Es._parseAsync({data:cs.data,path:cs.path,parent:cs}):Es._parseSync({data:cs.data,path:cs.path,parent:cs}):(Zr(cs,{code:jr.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[_s]}),_i)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(os,cs,_s){const ss=new Map;for(const Es of cs){const $s=Do(Es.shape[os]);if(!$s)throw new Error(`A discriminator value for key \`${os}\` could not be extracted from all schema options`);for(const ws of $s){if(ss.has(ws))throw new Error(`Discriminator property ${String(os)} has duplicate value ${String(ws)}`);ss.set(ws,Es)}}return new To({typeName:So.ZodDiscriminatedUnion,discriminator:os,options:cs,optionsMap:ss,...vs(_s)})}}function Wo(bs,os){const cs=Dr(bs),_s=Dr(os);if(bs===os)return{valid:!0,data:bs};if(cs===Nr.object&&_s===Nr.object){const ss=Ur.objectKeys(os),Es=Ur.objectKeys(bs).filter(ws=>ss.indexOf(ws)!==-1),$s={...bs,...os};for(const ws of Es){const Cs=Wo(bs[ws],os[ws]);if(!Cs.valid)return{valid:!1};$s[ws]=Cs.data}return{valid:!0,data:$s}}if(cs===Nr.array&&_s===Nr.array){if(bs.length!==os.length)return{valid:!1};const ss=[];for(let Es=0;Es<bs.length;Es++){const $s=Wo(bs[Es],os[Es]);if(!$s.valid)return{valid:!1};ss.push($s.data)}return{valid:!0,data:ss}}return cs===Nr.date&&_s===Nr.date&&+bs==+os?{valid:!0,data:bs}:{valid:!1}}class ko extends gs{_parse(os){const{status:cs,ctx:_s}=this._processInputParams(os),ss=(Es,$s)=>{if(rs(Es)||rs($s))return _i;const ws=Wo(Es.value,$s.value);return ws.valid?((ns(Es)||ns($s))&&cs.dirty(),{status:cs.value,value:ws.data}):(Zr(_s,{code:jr.invalid_intersection_types}),_i)};return _s.common.async?Promise.all([this._def.left._parseAsync({data:_s.data,path:_s.path,parent:_s}),this._def.right._parseAsync({data:_s.data,path:_s.path,parent:_s})]).then(([Es,$s])=>ss(Es,$s)):ss(this._def.left._parseSync({data:_s.data,path:_s.path,parent:_s}),this._def.right._parseSync({data:_s.data,path:_s.path,parent:_s}))}}ko.create=(bs,os,cs)=>new ko({left:bs,right:os,typeName:So.ZodIntersection,...vs(cs)});class $a extends gs{_parse(os){const{status:cs,ctx:_s}=this._processInputParams(os);if(_s.parsedType!==Nr.array)return Zr(_s,{code:jr.invalid_type,expected:Nr.array,received:_s.parsedType}),_i;if(_s.data.length<this._def.items.length)return Zr(_s,{code:jr.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_i;!this._def.rest&&_s.data.length>this._def.items.length&&(Zr(_s,{code:jr.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),cs.dirty());const ss=[..._s.data].map((Es,$s)=>{const ws=this._def.items[$s]||this._def.rest;return ws?ws._parse(new xs(_s,Es,_s.path,$s)):null}).filter(Es=>!!Es);return _s.common.async?Promise.all(ss).then(Es=>Jr.mergeArray(cs,Es)):Jr.mergeArray(cs,ss)}get items(){return this._def.items}rest(os){return new $a({...this._def,rest:os})}}$a.create=(bs,os)=>{if(!Array.isArray(bs))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $a({items:bs,typeName:So.ZodTuple,rest:null,...vs(os)})};class Il extends gs{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(os){const{status:cs,ctx:_s}=this._processInputParams(os);if(_s.parsedType!==Nr.object)return Zr(_s,{code:jr.invalid_type,expected:Nr.object,received:_s.parsedType}),_i;const ss=[],Es=this._def.keyType,$s=this._def.valueType;for(const ws in _s.data)ss.push({key:Es._parse(new xs(_s,ws,_s.path,ws)),value:$s._parse(new xs(_s,_s.data[ws],_s.path,ws))});return _s.common.async?Jr.mergeObjectAsync(cs,ss):Jr.mergeObjectSync(cs,ss)}get element(){return this._def.valueType}static create(os,cs,_s){return new Il(cs instanceof gs?{keyType:os,valueType:cs,typeName:So.ZodRecord,...vs(_s)}:{keyType:Qs.create(),valueType:os,typeName:So.ZodRecord,...vs(cs)})}}class eu extends gs{_parse(os){const{status:cs,ctx:_s}=this._processInputParams(os);if(_s.parsedType!==Nr.map)return Zr(_s,{code:jr.invalid_type,expected:Nr.map,received:_s.parsedType}),_i;const ss=this._def.keyType,Es=this._def.valueType,$s=[..._s.data.entries()].map(([ws,Cs],Ms)=>({key:ss._parse(new xs(_s,ws,_s.path,[Ms,"key"])),value:Es._parse(new xs(_s,Cs,_s.path,[Ms,"value"]))}));if(_s.common.async){const ws=new Map;return Promise.resolve().then(async()=>{for(const Cs of $s){const Ms=await Cs.key,Hs=await Cs.value;if(Ms.status==="aborted"||Hs.status==="aborted")return _i;Ms.status!=="dirty"&&Hs.status!=="dirty"||cs.dirty(),ws.set(Ms.value,Hs.value)}return{status:cs.value,value:ws}})}{const ws=new Map;for(const Cs of $s){const Ms=Cs.key,Hs=Cs.value;if(Ms.status==="aborted"||Hs.status==="aborted")return _i;Ms.status!=="dirty"&&Hs.status!=="dirty"||cs.dirty(),ws.set(Ms.value,Hs.value)}return{status:cs.value,value:ws}}}}eu.create=(bs,os,cs)=>new eu({valueType:os,keyType:bs,typeName:So.ZodMap,...vs(cs)});class Fl extends gs{_parse(os){const{status:cs,ctx:_s}=this._processInputParams(os);if(_s.parsedType!==Nr.set)return Zr(_s,{code:jr.invalid_type,expected:Nr.set,received:_s.parsedType}),_i;const ss=this._def;ss.minSize!==null&&_s.data.size<ss.minSize.value&&(Zr(_s,{code:jr.too_small,minimum:ss.minSize.value,type:"set",inclusive:!0,exact:!1,message:ss.minSize.message}),cs.dirty()),ss.maxSize!==null&&_s.data.size>ss.maxSize.value&&(Zr(_s,{code:jr.too_big,maximum:ss.maxSize.value,type:"set",inclusive:!0,exact:!1,message:ss.maxSize.message}),cs.dirty());const Es=this._def.valueType;function $s(Cs){const Ms=new Set;for(const Hs of Cs){if(Hs.status==="aborted")return _i;Hs.status==="dirty"&&cs.dirty(),Ms.add(Hs.value)}return{status:cs.value,value:Ms}}const ws=[..._s.data.values()].map((Cs,Ms)=>Es._parse(new xs(_s,Cs,_s.path,Ms)));return _s.common.async?Promise.all(ws).then(Cs=>$s(Cs)):$s(ws)}min(os,cs){return new Fl({...this._def,minSize:{value:os,message:us.toString(cs)}})}max(os,cs){return new Fl({...this._def,maxSize:{value:os,message:us.toString(cs)}})}size(os,cs){return this.min(os,cs).max(os,cs)}nonempty(os){return this.min(1,os)}}Fl.create=(bs,os)=>new Fl({valueType:bs,minSize:null,maxSize:null,typeName:So.ZodSet,...vs(os)});class Kl extends gs{constructor(){super(...arguments),this.validate=this.implement}_parse(os){const{ctx:cs}=this._processInputParams(os);if(cs.parsedType!==Nr.function)return Zr(cs,{code:jr.invalid_type,expected:Nr.function,received:cs.parsedType}),_i;function _s(ws,Cs){return Xr({data:ws,path:cs.path,errorMaps:[cs.common.contextualErrorMap,cs.schemaErrorMap,Kr(),Wr].filter(Ms=>!!Ms),issueData:{code:jr.invalid_arguments,argumentsError:Cs}})}function ss(ws,Cs){return Xr({data:ws,path:cs.path,errorMaps:[cs.common.contextualErrorMap,cs.schemaErrorMap,Kr(),Wr].filter(Ms=>!!Ms),issueData:{code:jr.invalid_return_type,returnTypeError:Cs}})}const Es={errorMap:cs.common.contextualErrorMap},$s=cs.data;return this._def.returns instanceof ps?ts(async(...ws)=>{const Cs=new Gr([]),Ms=await this._def.args.parseAsync(ws,Es).catch(lo=>{throw Cs.addIssue(_s(ws,lo)),Cs}),Hs=await $s(...Ms);return await this._def.returns._def.type.parseAsync(Hs,Es).catch(lo=>{throw Cs.addIssue(ss(Hs,lo)),Cs})}):ts((...ws)=>{const Cs=this._def.args.safeParse(ws,Es);if(!Cs.success)throw new Gr([_s(ws,Cs.error)]);const Ms=$s(...Cs.data),Hs=this._def.returns.safeParse(Ms,Es);if(!Hs.success)throw new Gr([ss(Ms,Hs.error)]);return Hs.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...os){return new Kl({...this._def,args:$a.create(os).rest(Gs.create())})}returns(os){return new Kl({...this._def,returns:os})}implement(os){return this.parse(os)}strictImplement(os){return this.parse(os)}static create(os,cs,_s){return new Kl({args:os||$a.create([]).rest(Gs.create()),returns:cs||Gs.create(),typeName:So.ZodFunction,...vs(_s)})}}class cu extends gs{get schema(){return this._def.getter()}_parse(os){const{ctx:cs}=this._processInputParams(os);return this._def.getter()._parse({data:cs.data,path:cs.path,parent:cs})}}cu.create=(bs,os)=>new cu({getter:bs,typeName:So.ZodLazy,...vs(os)});class Vo extends gs{_parse(os){if(os.data!==this._def.value){const cs=this._getOrReturnCtx(os);return Zr(cs,{received:cs.data,code:jr.invalid_literal,expected:this._def.value}),_i}return{status:"valid",value:os.data}}get value(){return this._def.value}}function Bs(bs,os){return new Ws({values:bs,typeName:So.ZodEnum,...vs(os)})}Vo.create=(bs,os)=>new Vo({value:bs,typeName:So.ZodLiteral,...vs(os)});class Ws extends gs{_parse(os){if(typeof os.data!="string"){const cs=this._getOrReturnCtx(os),_s=this._def.values;return Zr(cs,{expected:Ur.joinValues(_s),received:cs.parsedType,code:jr.invalid_type}),_i}if(this._def.values.indexOf(os.data)===-1){const cs=this._getOrReturnCtx(os),_s=this._def.values;return Zr(cs,{received:cs.data,code:jr.invalid_enum_value,options:_s}),_i}return ts(os.data)}get options(){return this._def.values}get enum(){const os={};for(const cs of this._def.values)os[cs]=cs;return os}get Values(){const os={};for(const cs of this._def.values)os[cs]=cs;return os}get Enum(){const os={};for(const cs of this._def.values)os[cs]=cs;return os}extract(os){return Ws.create(os)}exclude(os){return Ws.create(this.options.filter(cs=>!os.includes(cs)))}}Ws.create=Bs;class ms extends gs{_parse(os){const cs=Ur.getValidEnumValues(this._def.values),_s=this._getOrReturnCtx(os);if(_s.parsedType!==Nr.string&&_s.parsedType!==Nr.number){const ss=Ur.objectValues(cs);return Zr(_s,{expected:Ur.joinValues(ss),received:_s.parsedType,code:jr.invalid_type}),_i}if(cs.indexOf(os.data)===-1){const ss=Ur.objectValues(cs);return Zr(_s,{received:_s.data,code:jr.invalid_enum_value,options:ss}),_i}return ts(os.data)}get enum(){return this._def.values}}ms.create=(bs,os)=>new ms({values:bs,typeName:So.ZodNativeEnum,...vs(os)});class ps extends gs{unwrap(){return this._def.type}_parse(os){const{ctx:cs}=this._processInputParams(os);if(cs.parsedType!==Nr.promise&&cs.common.async===!1)return Zr(cs,{code:jr.invalid_type,expected:Nr.promise,received:cs.parsedType}),_i;const _s=cs.parsedType===Nr.promise?cs.data:Promise.resolve(cs.data);return ts(_s.then(ss=>this._def.type.parseAsync(ss,{path:cs.path,errorMap:cs.common.contextualErrorMap})))}}ps.create=(bs,os)=>new ps({type:bs,typeName:So.ZodPromise,...vs(os)});class Ps extends gs{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===So.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(os){const{status:cs,ctx:_s}=this._processInputParams(os),ss=this._def.effect||null;if(ss.type==="preprocess"){const $s=ss.transform(_s.data);return _s.common.async?Promise.resolve($s).then(ws=>this._def.schema._parseAsync({data:ws,path:_s.path,parent:_s})):this._def.schema._parseSync({data:$s,path:_s.path,parent:_s})}const Es={addIssue:$s=>{Zr(_s,$s),$s.fatal?cs.abort():cs.dirty()},get path(){return _s.path}};if(Es.addIssue=Es.addIssue.bind(Es),ss.type==="refinement"){const $s=ws=>{const Cs=ss.refinement(ws,Es);if(_s.common.async)return Promise.resolve(Cs);if(Cs instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return ws};if(_s.common.async===!1){const ws=this._def.schema._parseSync({data:_s.data,path:_s.path,parent:_s});return ws.status==="aborted"?_i:(ws.status==="dirty"&&cs.dirty(),$s(ws.value),{status:cs.value,value:ws.value})}return this._def.schema._parseAsync({data:_s.data,path:_s.path,parent:_s}).then(ws=>ws.status==="aborted"?_i:(ws.status==="dirty"&&cs.dirty(),$s(ws.value).then(()=>({status:cs.value,value:ws.value}))))}if(ss.type==="transform"){if(_s.common.async===!1){const $s=this._def.schema._parseSync({data:_s.data,path:_s.path,parent:_s});if(!as($s))return $s;const ws=ss.transform($s.value,Es);if(ws instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:cs.value,value:ws}}return this._def.schema._parseAsync({data:_s.data,path:_s.path,parent:_s}).then($s=>as($s)?Promise.resolve(ss.transform($s.value,Es)).then(ws=>({status:cs.value,value:ws})):$s)}Ur.assertNever(ss)}}Ps.create=(bs,os,cs)=>new Ps({schema:bs,typeName:So.ZodEffects,effect:os,...vs(cs)}),Ps.createWithPreprocess=(bs,os,cs)=>new Ps({schema:os,effect:{type:"preprocess",transform:bs},typeName:So.ZodEffects,...vs(cs)});class Ls extends gs{_parse(os){return this._getType(os)===Nr.undefined?ts(void 0):this._def.innerType._parse(os)}unwrap(){return this._def.innerType}}Ls.create=(bs,os)=>new Ls({innerType:bs,typeName:So.ZodOptional,...vs(os)});class Zs extends gs{_parse(os){return this._getType(os)===Nr.null?ts(null):this._def.innerType._parse(os)}unwrap(){return this._def.innerType}}Zs.create=(bs,os)=>new Zs({innerType:bs,typeName:So.ZodNullable,...vs(os)});class Eo extends gs{_parse(os){const{ctx:cs}=this._processInputParams(os);let _s=cs.data;return cs.parsedType===Nr.undefined&&(_s=this._def.defaultValue()),this._def.innerType._parse({data:_s,path:cs.path,parent:cs})}removeDefault(){return this._def.innerType}}Eo.create=(bs,os)=>new Eo({innerType:bs,typeName:So.ZodDefault,defaultValue:typeof os.default=="function"?os.default:()=>os.default,...vs(os)});class yo extends gs{_parse(os){const{ctx:cs}=this._processInputParams(os),_s={...cs,common:{...cs.common,issues:[]}},ss=this._def.innerType._parse({data:_s.data,path:_s.path,parent:{..._s}});return ls(ss)?ss.then(Es=>({status:"valid",value:Es.status==="valid"?Es.value:this._def.catchValue({get error(){return new Gr(_s.common.issues)},input:_s.data})})):{status:"valid",value:ss.status==="valid"?ss.value:this._def.catchValue({get error(){return new Gr(_s.common.issues)},input:_s.data})}}removeCatch(){return this._def.innerType}}yo.create=(bs,os)=>new yo({innerType:bs,typeName:So.ZodCatch,catchValue:typeof os.catch=="function"?os.catch:()=>os.catch,...vs(os)});class io extends gs{_parse(os){if(this._getType(os)!==Nr.nan){const cs=this._getOrReturnCtx(os);return Zr(cs,{code:jr.invalid_type,expected:Nr.nan,received:cs.parsedType}),_i}return{status:"valid",value:os.data}}}io.create=bs=>new io({typeName:So.ZodNaN,...vs(bs)});const Lo=Symbol("zod_brand");class Yo extends gs{_parse(os){const{ctx:cs}=this._processInputParams(os),_s=cs.data;return this._def.type._parse({data:_s,path:cs.path,parent:cs})}unwrap(){return this._def.type}}class Go extends gs{_parse(os){const{status:cs,ctx:_s}=this._processInputParams(os);if(_s.common.async)return(async()=>{const ss=await this._def.in._parseAsync({data:_s.data,path:_s.path,parent:_s});return ss.status==="aborted"?_i:ss.status==="dirty"?(cs.dirty(),es(ss.value)):this._def.out._parseAsync({data:ss.value,path:_s.path,parent:_s})})();{const ss=this._def.in._parseSync({data:_s.data,path:_s.path,parent:_s});return ss.status==="aborted"?_i:ss.status==="dirty"?(cs.dirty(),{status:"dirty",value:ss.value}):this._def.out._parseSync({data:ss.value,path:_s.path,parent:_s})}}static create(os,cs){return new Go({in:os,out:cs,typeName:So.ZodPipeline})}}const Ks=(bs,os={},cs)=>bs?Is.create().superRefine((_s,ss)=>{var Es,$s;if(!bs(_s)){const ws=typeof os=="function"?os(_s):typeof os=="string"?{message:os}:os,Cs=($s=(Es=ws.fatal)!==null&&Es!==void 0?Es:cs)===null||$s===void 0||$s,Ms=typeof ws=="string"?{message:ws}:ws;ss.addIssue({code:"custom",...Ms,fatal:Cs})}}):Is.create(),$o={object:go.lazycreate};var So;(function(bs){bs.ZodString="ZodString",bs.ZodNumber="ZodNumber",bs.ZodNaN="ZodNaN",bs.ZodBigInt="ZodBigInt",bs.ZodBoolean="ZodBoolean",bs.ZodDate="ZodDate",bs.ZodSymbol="ZodSymbol",bs.ZodUndefined="ZodUndefined",bs.ZodNull="ZodNull",bs.ZodAny="ZodAny",bs.ZodUnknown="ZodUnknown",bs.ZodNever="ZodNever",bs.ZodVoid="ZodVoid",bs.ZodArray="ZodArray",bs.ZodObject="ZodObject",bs.ZodUnion="ZodUnion",bs.ZodDiscriminatedUnion="ZodDiscriminatedUnion",bs.ZodIntersection="ZodIntersection",bs.ZodTuple="ZodTuple",bs.ZodRecord="ZodRecord",bs.ZodMap="ZodMap",bs.ZodSet="ZodSet",bs.ZodFunction="ZodFunction",bs.ZodLazy="ZodLazy",bs.ZodLiteral="ZodLiteral",bs.ZodEnum="ZodEnum",bs.ZodEffects="ZodEffects",bs.ZodNativeEnum="ZodNativeEnum",bs.ZodOptional="ZodOptional",bs.ZodNullable="ZodNullable",bs.ZodDefault="ZodDefault",bs.ZodCatch="ZodCatch",bs.ZodPromise="ZodPromise",bs.ZodBranded="ZodBranded",bs.ZodPipeline="ZodPipeline"})(So||(So={}));const Yl=Qs.create,xu=Xs.create,ju=io.create,_f=so.create,zu=uo.create,_h=bo.create,ep=wo.create,Ru=Co.create,Su=ds.create,lp=Is.create,du=Gs.create,Dl=to.create,Hu=no.create,Ou=Ro.create,tp=go.create,up=go.strictCreate,cp=No.create,dp=To.create,Rp=ko.create,Zu=$a.create,fp=Il.create,Qu=eu.create,Vu=Fl.create,Ol=Kl.create,hp=cu.create,Ap=Vo.create,Ip=Ws.create,Ml=ms.create,Bl=ps.create,Nu=Ps.create,pp=Ls.create,mp=Zs.create,Fu=Ps.createWithPreprocess,Pp=Go.create;var iu=Object.freeze({__proto__:null,defaultErrorMap:Wr,setErrorMap:function(bs){qr=bs},getErrorMap:Kr,makeIssue:Xr,EMPTY_PATH:[],addIssueToContext:Zr,ParseStatus:Jr,INVALID:_i,DIRTY:es,OK:ts,isAborted:rs,isDirty:ns,isValid:as,isAsync:ls,get util(){return Ur},get objectUtil(){return Vr},ZodParsedType:Nr,getParsedType:Dr,ZodType:gs,ZodString:Qs,ZodNumber:Xs,ZodBigInt:so,ZodBoolean:uo,ZodDate:bo,ZodSymbol:wo,ZodUndefined:Co,ZodNull:ds,ZodAny:Is,ZodUnknown:Gs,ZodNever:to,ZodVoid:no,ZodArray:Ro,ZodObject:go,ZodUnion:No,ZodDiscriminatedUnion:To,ZodIntersection:ko,ZodTuple:$a,ZodRecord:Il,ZodMap:eu,ZodSet:Fl,ZodFunction:Kl,ZodLazy:cu,ZodLiteral:Vo,ZodEnum:Ws,ZodNativeEnum:ms,ZodPromise:ps,ZodEffects:Ps,ZodTransformer:Ps,ZodOptional:Ls,ZodNullable:Zs,ZodDefault:Eo,ZodCatch:yo,ZodNaN:io,BRAND:Lo,ZodBranded:Yo,ZodPipeline:Go,custom:Ks,Schema:gs,ZodSchema:gs,late:$o,get ZodFirstPartyTypeKind(){return So},coerce:{string:bs=>Qs.create({...bs,coerce:!0}),number:bs=>Xs.create({...bs,coerce:!0}),boolean:bs=>uo.create({...bs,coerce:!0}),bigint:bs=>so.create({...bs,coerce:!0}),date:bs=>bo.create({...bs,coerce:!0})},any:lp,array:Ou,bigint:_f,boolean:zu,date:_h,discriminatedUnion:dp,effect:Nu,enum:Ip,function:Ol,instanceof:(bs,os={message:`Input not instance of ${bs.name}`})=>Ks(cs=>cs instanceof bs,os),intersection:Rp,lazy:hp,literal:Ap,map:Qu,nan:ju,nativeEnum:Ml,never:Dl,null:Su,nullable:mp,number:xu,object:tp,oboolean:()=>zu().optional(),onumber:()=>xu().optional(),optional:pp,ostring:()=>Yl().optional(),pipeline:Pp,preprocess:Fu,promise:Bl,record:fp,set:Vu,strictObject:up,string:Yl,symbol:ep,transformer:Nu,tuple:Zu,undefined:Ru,union:cp,unknown:du,void:Hu,NEVER:_i,ZodIssueCode:jr,quotelessJson:bs=>JSON.stringify(bs,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:Gr}),yp=iu.object({publicPath:iu.string().optional().describe("The public path to the wasm files and the onnx model.").transform(function(bs){return bs&&Mr(bs)}),debug:iu.boolean().default(!1).describe("Whether to enable debug logging."),proxyToWorker:iu.boolean().default(!0).describe("Whether to proxy inference to a web worker."),fetchArgs:iu.object({}).default({}).describe("Arguments to pass to fetch when loading the model."),progress:iu.function().args(iu.string(),iu.number(),iu.number()).returns(iu.undefined()).describe("Progress callback.").optional(),model:iu.enum(["small","medium"]).default("medium")}).default({});const Ju=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]));var Nl=__webpack_require__(793),zl=new Map([["small",{url:__webpack_require__(60),size:44342436,mime:"application/octet-stream"}],["medium",{url:__webpack_require__(920),size:88188479,mime:"application/octet-stream"}],["ort-wasm-simd-threaded.jsep.wasm",{url:__webpack_require__(111),size:18215132,mime:"application/wasm"}],["ort-wasm-simd.jsep.wasm",{url:__webpack_require__(48),size:16836274,mime:"application/wasm"}],["ort-wasm-simd-threaded.wasm",{url:__webpack_require__(965),size:10281838,mime:"application/wasm"}],["ort-wasm-simd.wasm",{url:__webpack_require__(884),size:10335238,mime:"application/wasm"}],["ort-wasm-threaded.wasm",{url:__webpack_require__(342),size:9413659,mime:"application/wasm"}],["ort-wasm.wasm",{url:__webpack_require__(393),size:9487920,mime:"application/wasm"}]]);function Eu(bs,os){return _r(this,void 0,void 0,function(){var cs,_s,ss,Es,$s;return Tr(this,function(ws){switch(ws.label){case 0:return cs=zl.get(bs),_s=cs.url,os.publicPath&&(_s=new URL(_s.split("/").pop(),os.publicPath).toString()),[4,fetch(_s,os.fetchArgs)];case 1:return ss=ws.sent(),os.progress?[4,As(ss,cs,os,bs)]:[3,3];case 2:return Es=ws.sent(),[3,5];case 3:return[4,ss.blob()];case 4:Es=[ws.sent()],ws.label=5;case 5:if(($s=new Blob(Es,{type:cs.mime})).size!==cs.size)throw new Error("Failed to fetch ".concat(bs," with size ").concat(cs.size," but got ").concat($s.size));return[2,$s]}})})}function As(bs,os,cs,_s){var ss;return _r(this,void 0,void 0,function(){var Es,$s,ws,Cs,Ms,Hs,lo;return Tr(this,function(Io){switch(Io.label){case 0:Es=bs.body.getReader(),$s=(ss=os.size)!==null&&ss!==void 0?ss:0,ws=0,Cs=[],Io.label=1;case 1:return[4,Es.read()];case 2:return Ms=Io.sent(),Hs=Ms.done,lo=Ms.value,Hs?[3,3]:(Cs.push(lo),ws+=lo.length,cs.progress&&cs.progress("fetch:".concat(_s),ws,$s),[3,1]);case 3:return[2,Cs]}})})}var Ds=__webpack_require__(486);const zs=function(bs,os){var cs;return _r(this,void 0,void 0,function(){var _s,ss,Es,$s;return Tr(this,function(ws){switch(ws.label){case 0:return[4,vo(os)];case 1:return _s=ws.sent(),ss=_s.config,Es=_s.imports,$s=_s.session,ss.debug&&(ss.progress=(cs=ss.progress)!==null&&cs!==void 0?cs:function(Cs,Ms,Hs){console.debug("Downloading ".concat(Cs,": ").concat(Ms," of ").concat(Hs))},crossOriginIsolated||console.debug("Cross-Origin-Isolated is not enabled. Performance will be degraded. Please see  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer.")),[4,Fr(bs)];case 2:if(!((bs=ws.sent())instanceof ImageData))throw new Error("Image not an ImageData | ArrayBuffer | Uint8Array | Blob | URL | string");return[4,zr(bs,ss,Es,$s)];case 3:return[4,Ar(ws.sent())];case 4:return[2,ws.sent()]}})})};function eo(bs,os){return _r(this,void 0,void 0,function(){var cs;return Tr(this,function(_s){switch(_s.label){case 0:return bs.debug&&console.debug("Loading model..."),[4,Eu(bs.model,bs)];case 1:return[4,_s.sent().arrayBuffer()];case 2:return cs=_s.sent(),[4,os.createSession(cs)];case 3:return[2,_s.sent()]}})})}var vo=(0,Ds.memoize)(function(bs){return _r(this,void 0,void 0,function(){var os,cs;return Tr(this,function(_s){switch(_s.label){case 0:return bs=function(ss){var Es=yp.parse(ss??{});return Es.debug&&console.log("Config:",Es),Es}(bs),os=function(ss){var Es=this;return{createSession:function($s){return _r(Es,void 0,void 0,function(){var ws,Cs,Ms,Hs,lo,Io,Oo,qo,Mo,Qo,Xo,Ko,Uo,jo,zo,Jo,Ho,yl,_l;return Tr(this,function(Vl){switch(Vl.label){case 0:return Ho={},[4,Ju()];case 1:return Ho.simd=Vl.sent(),[4,(async Rl=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(Rl)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))];case 2:return Ho.threads=Vl.sent(),Ho.SharedArrayBuffer=typeof SharedArrayBuffer<"u",Ho.numThreads=(_l=navigator.hardwareConcurrency)!==null&&_l!==void 0?_l:4,Ho.webgpu=navigator.gpu!==void 0,ws=Ho,ss.debug&&(console.debug("Capabilities:",ws),Nl.env.debug=!0,Nl.env.logLevel="verbose"),Nl.env.wasm.numThreads=ws.numThreads,Nl.env.wasm.simd=ws.simd,Nl.env.wasm.proxy=ss.proxyToWorker,Cs=Nl.env.wasm,yl={},Ms="ort-wasm-simd-threaded.wasm",lo=(Hs=URL).createObjectURL,[4,Eu("ort-wasm-simd-threaded.wasm",ss)];case 3:return yl[Ms]=lo.apply(Hs,[Vl.sent()]),Io="ort-wasm-simd.wasm",qo=(Oo=URL).createObjectURL,[4,Eu("ort-wasm-simd.wasm",ss)];case 4:return yl[Io]=qo.apply(Oo,[Vl.sent()]),Mo="ort-wasm-threaded.wasm",Xo=(Qo=URL).createObjectURL,[4,Eu("ort-wasm-threaded.wasm",ss)];case 5:return yl[Mo]=Xo.apply(Qo,[Vl.sent()]),Ko="ort-wasm.wasm",jo=(Uo=URL).createObjectURL,[4,Eu("ort-wasm.wasm",ss)];case 6:return Cs.wasmPaths=(yl[Ko]=jo.apply(Uo,[Vl.sent()]),yl),ss.debug&&console.debug("ort.env.wasm:",Nl.env.wasm),zo={executionProviders:["wasm"],graphOptimizationLevel:"all",executionMode:"parallel",enableCpuMemArena:!0},[4,Nl.InferenceSession.create($s,zo).catch(function(Rl){throw new Error("Failed to create session: ".concat(Rl,". Please check if the publicPath is set correctly."))})];case 7:return Jo=Vl.sent(),URL.revokeObjectURL(Nl.env.wasm.wasmPaths["ort-wasm-simd-threaded.wasm"]),URL.revokeObjectURL(Nl.env.wasm.wasmPaths["ort-wasm-simd.wasm"]),URL.revokeObjectURL(Nl.env.wasm.wasmPaths["ort-wasm-threaded.wasm"]),URL.revokeObjectURL(Nl.env.wasm.wasmPaths["ort-wasm.wasm"]),[2,Jo]}})})},runSession:function($s,ws,Cs){return _r(Es,void 0,void 0,function(){var Ms,Hs,lo,Io,Oo,qo,Mo,Qo,Xo,Ko,Uo;return Tr(this,function(jo){switch(jo.label){case 0:for(Ms={},Hs=0,lo=ws;Hs<lo.length;Hs++)Io=lo[Hs],Xo=Io[0],Uo=Io[1],Ms[Xo]=new Nl.Tensor("float32",new Float32Array(Uo.data),Uo.shape);return[4,$s.run(Ms,{})];case 1:for(Oo=jo.sent(),qo=[],Mo=0,Qo=Cs;Mo<Qo.length;Mo++)Xo=Qo[Mo],Ko=Oo[Xo],Uo={data:Ko.data,shape:Ko.dims,dataType:"float32"},qo.push(Uo);return[2,qo]}})})}}}(bs),[4,eo(bs,os)];case 1:return cs=_s.sent(),[2,{config:bs,imports:os,session:cs}]}})})},function(bs){return JSON.stringify(bs)})})();var __webpack_exports__default=__webpack_exports__.Z;const config={model:"small",progress:(_r,Tr,Rr)=>{console.log(`Downloading ${_r}: ${Tr} of ${Rr}`)}};async function findIIIFImageURL(_r){try{const Tr=await fetch(_r);if(!Tr.ok)throw new Error(Tr.statusText);const Rr=await Tr.json();return"@type"in Rr?Rr["@type"]!="sc:Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type of sc:Manifest but has a type of: "+Rr["@type"]),null):loadv2(Rr):"type"in Rr?Rr.type!="Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a type of Manifest but has a type of: "+Rr.type),null):loadv3(Rr):(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type or type value of Manifest"),null)}catch(Tr){return console.log("I was unable to get the Manifest you supplied due to: "+Tr),null}}function isObject(_r){return typeof _r=="object"&&!Array.isArray(_r)&&_r!==null}function loadv2(_r){var Tr,Rr,Ar;if("sequences"in _r){let Pr=_r.sequences;isObject(Pr)&&(Pr=[Pr]);let Lr=!1;for(const Mr of Pr)if("canvases"in Mr){Lr=!0;for(const Fr of Mr.canvases){const zr=(Ar=(Rr=(Tr=Fr.images[0])==null?void 0:Tr.resource)==null?void 0:Rr.service)==null?void 0:Ar["@id"];if(zr)return zr}}else Lr||console.log("The manifest you supplied contains no canvases so there are no images to show.")}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function loadv3(_r){if("items"in _r){const Tr=_r.items;for(const Rr of Tr){const Ar=Rr.items[0].items[0].body.service[0]["@id"];if(Ar)return Ar}}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function getStyle(_r,Tr){return parseFloat(window.getComputedStyle(_r).getPropertyValue(Tr))}function getImageSelectionData(_r,Tr){const Rr=Tr.width,Ar=Tr.height,Pr=1280;let Lr="full";const Mr="0",Fr="default",zr=".jpg",Ur=document.getElementsByClassName("displayregioncontainer")[0],Vr=document.getElementsByClassName("displayregion")[0],Nr=Rr*Ur.clientHeight/Ar,Dr=(Ur.clientWidth-Nr)/2,jr=Rr/Nr;console.log("Multiplier: ",jr),console.log(`Image resolution (width, height): ${Rr},${Ar}`),console.log(`Canvas resolution (width, height): ${Nr},${Ur.clientHeight}`);const Gr=9,Wr=getStyle(Vr,"left"),qr=getStyle(Vr,"top"),Kr=Math.round(Vr.clientWidth+Gr),Xr=Math.round(Vr.clientHeight+Gr);console.log(`Selection region (x, y, width, height): ${Wr},${qr},${Kr},${Xr}`);const Zr=Math.max(Math.round((Wr-Dr)*jr),0),Jr=Math.max(Math.round(qr*jr),0),_i=Math.min(Math.round(Kr*jr),Rr),es=Math.min(Math.round(Xr*jr),Ar);return Lr=`${Zr},${Jr},${_i},${es}`,console.log(`Calculated selection region (x, y, width, height): ${Zr},${Jr},${_i},${es}`),`${_r}/${Lr}/${Pr},/${Mr}/${Fr}${zr}`}const utils={bgRemoval:async _r=>{const Tr=Date.now();try{const Rr=await __webpack_exports__default(_r,config),Ar=URL.createObjectURL(Rr),Pr=(Date.now()-Tr)/1e3;return console.log("Duration for background removal: ",Pr),console.log("Object URL: ",Ar),Ar}catch(Rr){throw console.error(Rr),Rr}},getIIIFImageURL:async _r=>{try{return await findIIIFImageURL(_r)}catch(Tr){return console.error(Tr),null}},getCroppedImagePath:async _r=>{console.log("Image URL: ",_r);try{const Tr=_r+"/info.json",Rr=await fetch(Tr);if(!Rr.ok)throw new Error(Rr.statusText);const Ar=await Rr.json();return getImageSelectionData(_r,Ar)}catch(Tr){console.error(Tr)}}},options={canvasBackgroundColor:"010A01",gestureSettingsTouch:{dragToPan:!1,dblClickToZoom:!1,dblClickDragToZoom:!1,flickEnabled:!1,pinchRotate:!0},informationPanel:{open:!1},openSeadragon:{loadTilesWithAjax:!0,showNavigationControl:!1},showTitle:!1,showZoomControl:!1};function Collect(){const[_r,Tr]=reactExports.useState(0),[Rr,Ar]=reactExports.useState([]),[Pr,Lr]=reactExports.useState(""),Mr=reactExports.useRef(_r),Fr=reactExports.useRef(null),zr=reactExports.useCallback(async Jr=>{if(!Jr)return;const _i=async ns=>{try{const as=await utils.getIIIFImageURL(ns);return console.log("Image URL: ",as),as}catch(as){return console.error("Error:",as),null}},es=Jr.map(async ns=>{const as=await _i(ns.iiif.value);return as!==null?{id:ns.work.value,name:ns.workLabel.value,year:ns.year.value,country:ns.countryLabel.value,location:ns.locationLabel.value,url:ns.iiif.value,image:as}:null}),rs=(await Promise.all(es)).filter(ns=>ns!==null);console.log("Data elements: ",Jr),console.log("Data images: ",rs),Ar(rs)},[]);reactExports.useEffect(()=>{(async()=>{try{const{data:_i}=await axios$1.get(api.sparqlQuery());zr(_i.results.bindings)}catch(_i){console.error(_i)}})()},[zr]);const Ur=Jr=>{Tr(Jr),Mr.current=Jr},Vr=_r<Rr.length+1,Nr=_r>=0,Dr=Jr=>{Ur(Jr+1)},jr=(Jr,_i)=>{var es;console.log(`${Jr} (${_i}) left the screen!`,Mr.current),Mr.current>=_i&&((es=Fr.current)==null||es.restoreCard())},Gr=async Jr=>{var _i;Nr&&_r<Rr.length&&await((_i=Fr.current)==null?void 0:_i.swipe(Jr))},Wr=async()=>{var _i;if(!Vr)return;const Jr=_r-1;Ur(Jr),await((_i=Fr.current)==null?void 0:_i.restoreCard())},qr=Rr[_r],Kr=Jr=>{Jr&&console.log("Active canvas ID: ",Jr)},Xr=async Jr=>{try{const _i=await utils.getCroppedImagePath(Jr);console.log("Cropped image path: ",_i),_i&&Zr(_i)}catch(_i){console.error("Error:",_i)}},Zr=async Jr=>{try{const _i=await utils.bgRemoval(Jr);Lr(_i),console.log("Resulting image URL: ",_i)}catch(_i){console.error("Error:",_i)}};return jsxRuntimeExports.jsxs(Card,{className:"h-full rounded-none",margin:0,children:[qr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TinderCard$1,{ref:Fr,className:"swipe relative h-full",onSwipe:()=>Dr(_r),onCardLeftScreen:()=>jr(qr.name,_r),preventSwipe:["up","down"],children:jsxRuntimeExports.jsx(Or,{iiifContent:qr.url,options,canvasIdCallback:Kr})},qr.id),jsxRuntimeExports.jsxs("p",{className:"px-4 py-2 space-x-2",children:[qr.name," (",qr.year,") - ",qr.location," ",qr.country]})]}),jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 space-x-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>Xr(Rr[_r].image),rounded:!0,inline:!0,children:"Lift subject"}),jsxRuntimeExports.jsx(Button,{onClick:()=>Gr("left"),rounded:!0,inline:!0,outline:!0,children:"Left"}),jsxRuntimeExports.jsx(Button,{onClick:()=>Wr(),rounded:!0,inline:!0,outline:!0,children:"Undo"}),jsxRuntimeExports.jsx(Button,{onClick:()=>Gr("right"),rounded:!0,inline:!0,outline:!0,children:"Right"}),Pr&&jsxRuntimeExports.jsx("img",{src:Pr,alt:"Background Removed"})]})]})}function Start(){return jsxRuntimeExports.jsxs(Block,{className:"flex flex-col gap-16 container mx-auto justify-center content-evenly",children:[jsxRuntimeExports.jsx("h1",{className:"neon neonFont",children:"GLAMorouS Europe"}),jsxRuntimeExports.jsx(Link,{to:"/collect",component:NavLink,children:jsxRuntimeExports.jsx(Button,{large:!0,rounded:!0,className:"k-color-brand-secondary",children:"Collect the items"})})]})}function Create(){return jsxRuntimeExports.jsxs(Block,{className:"flex flex-col gap-16 container mx-auto justify-center content-evenly",children:[jsxRuntimeExports.jsx("h1",{className:"neon neonFont",children:"GLAMorouS Europe"}),jsxRuntimeExports.jsx(Link,{to:"/collect",component:NavLink,children:jsxRuntimeExports.jsx(Button,{large:!0,rounded:!0,className:"k-color-brand-secondary",children:"Collect the items"})})]})}function App(){return jsxRuntimeExports.jsx(Routes,{children:jsxRuntimeExports.jsxs(Route,{path:"/",element:jsxRuntimeExports.jsx(Layout,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(Start,{})}),jsxRuntimeExports.jsx(Route,{path:"collect",element:jsxRuntimeExports.jsx(Collect,{})}),jsxRuntimeExports.jsx(Route,{path:"create",element:jsxRuntimeExports.jsx(Create,{})})]})})}const index="";createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React$1.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})})}));
