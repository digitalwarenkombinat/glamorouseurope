function nS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();var ti=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function FV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var TR={exports:{}},y1={},IR={exports:{}},qt={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Kh=Symbol.for("react.element"),AV=Symbol.for("react.portal"),DV=Symbol.for("react.fragment"),LV=Symbol.for("react.strict_mode"),zV=Symbol.for("react.profiler"),BV=Symbol.for("react.provider"),jV=Symbol.for("react.context"),UV=Symbol.for("react.forward_ref"),VV=Symbol.for("react.suspense"),WV=Symbol.for("react.memo"),GV=Symbol.for("react.lazy"),_R=Symbol.iterator;function HV(t){return t===null||typeof t!="object"?null:(t=_R&&t[_R]||t["@@iterator"],typeof t=="function"?t:null)}var RR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$R=Object.assign,OR={};function Pd(t,e,n){this.props=t,this.context=e,this.refs=OR,this.updater=n||RR}Pd.prototype.isReactComponent={},Pd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},Pd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function MR(){}MR.prototype=Pd.prototype;function rS(t,e,n){this.props=t,this.context=e,this.refs=OR,this.updater=n||RR}var aS=rS.prototype=new MR;aS.constructor=rS,$R(aS,Pd.prototype),aS.isPureReactComponent=!0;var PR=Array.isArray,FR=Object.prototype.hasOwnProperty,iS={current:null},AR={key:!0,ref:!0,__self:!0,__source:!0};function DR(t,e,n){var r,a={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)FR.call(e,r)&&!AR.hasOwnProperty(r)&&(a[r]=e[r]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:Kh,type:t,key:i,ref:o,props:a,_owner:iS.current}}function qV(t,e){return{$$typeof:Kh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function oS(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kh}function KV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var LR=/\/+/g;function sS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KV(""+t.key):e.toString(36)}function b1(t,e,n,r,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Kh:case AV:o=!0}}if(o)return o=t,a=a(o),t=r===""?"."+sS(o,0):r,PR(a)?(n="",t!=null&&(n=t.replace(LR,"$&/")+"/"),b1(a,e,n,"",function(u){return u})):a!=null&&(oS(a)&&(a=qV(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(LR,"$&/")+"/")+t)),e.push(a)),1;if(o=0,r=r===""?".":r+":",PR(t))for(var s=0;s<t.length;s++){i=t[s];var l=r+sS(i,s);o+=b1(i,e,n,l,a)}else if(l=HV(t),typeof l=="function")for(t=l.call(t),s=0;!(i=t.next()).done;)i=i.value,l=r+sS(i,s++),o+=b1(i,e,n,l,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function v1(t,e,n){if(t==null)return t;var r=[],a=0;return b1(t,r,"","",function(i){return e.call(n,i,a++)}),r}function XV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ni={current:null},x1={transition:null},QV={ReactCurrentDispatcher:ni,ReactCurrentBatchConfig:x1,ReactCurrentOwner:iS};qt.Children={map:v1,forEach:function(t,e,n){v1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return v1(t,function(){e++}),e},toArray:function(t){return v1(t,function(e){return e})||[]},only:function(t){if(!oS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},qt.Component=Pd,qt.Fragment=DV,qt.Profiler=zV,qt.PureComponent=rS,qt.StrictMode=LV,qt.Suspense=VV,qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QV,qt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$R({},t.props),a=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=iS.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)FR.call(e,l)&&!AR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Kh,type:t.type,key:a,ref:i,props:r,_owner:o}},qt.createContext=function(t){return t={$$typeof:jV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BV,_context:t},t.Consumer=t},qt.createElement=DR,qt.createFactory=function(t){var e=DR.bind(null,t);return e.type=t,e},qt.createRef=function(){return{current:null}},qt.forwardRef=function(t){return{$$typeof:UV,render:t}},qt.isValidElement=oS,qt.lazy=function(t){return{$$typeof:GV,_payload:{_status:-1,_result:t},_init:XV}},qt.memo=function(t,e){return{$$typeof:WV,type:t,compare:e===void 0?null:e}},qt.startTransition=function(t){var e=x1.transition;x1.transition={};try{t()}finally{x1.transition=e}},qt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},qt.useCallback=function(t,e){return ni.current.useCallback(t,e)},qt.useContext=function(t){return ni.current.useContext(t)},qt.useDebugValue=function(){},qt.useDeferredValue=function(t){return ni.current.useDeferredValue(t)},qt.useEffect=function(t,e){return ni.current.useEffect(t,e)},qt.useId=function(){return ni.current.useId()},qt.useImperativeHandle=function(t,e,n){return ni.current.useImperativeHandle(t,e,n)},qt.useInsertionEffect=function(t,e){return ni.current.useInsertionEffect(t,e)},qt.useLayoutEffect=function(t,e){return ni.current.useLayoutEffect(t,e)},qt.useMemo=function(t,e){return ni.current.useMemo(t,e)},qt.useReducer=function(t,e,n){return ni.current.useReducer(t,e,n)},qt.useRef=function(t){return ni.current.useRef(t)},qt.useState=function(t){return ni.current.useState(t)},qt.useSyncExternalStore=function(t,e,n){return ni.current.useSyncExternalStore(t,e,n)},qt.useTransition=function(){return ni.current.useTransition()},qt.version="18.2.0",IR.exports=qt;var _=IR.exports;const V=Zi(_),zR=nS({__proto__:null,default:V},[_]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var YV=_,JV=Symbol.for("react.element"),ZV=Symbol.for("react.fragment"),eW=Object.prototype.hasOwnProperty,tW=YV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nW={key:!0,ref:!0,__self:!0,__source:!0};function BR(t,e,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)eW.call(e,r)&&!nW.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)a[r]===void 0&&(a[r]=e[r]);return{$$typeof:JV,type:t,key:i,ref:o,props:a,_owner:tW.current}}y1.Fragment=ZV,y1.jsx=BR,y1.jsxs=BR,TR.exports=y1;var K=TR.exports;const rW={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};let aW=class Y5{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||rW,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,a){return a&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Y5(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Y5(this.logger,e)}};var ds=new aW;class w1{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const a=this.observers[r].get(n)||0;this.observers[r].set(n,a+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(i=>{let[o,s]=i;for(let l=0;l<s;l++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(i=>{let[o,s]=i;for(let l=0;l<s;l++)o.apply(o,[e,...r])})}}function Xh(){let t,e;const n=new Promise((r,a)=>{t=r,e=a});return n.resolve=t,n.reject=e,n}function jR(t){return t==null?"":""+t}function iW(t,e,n){t.forEach(r=>{e[r]&&(n[r]=e[r])})}const oW=/###/g;function Qh(t,e,n){function r(s){return s&&s.indexOf("###")>-1?s.replace(oW,"."):s}function a(){return!t||typeof t=="string"}const i=typeof e!="string"?e:e.split(".");let o=0;for(;o<i.length-1;){if(a())return{};const s=r(i[o]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++o}return a()?{}:{obj:t,k:r(i[o])}}function UR(t,e,n){const{obj:r,k:a}=Qh(t,e,Object);if(r!==void 0||e.length===1){r[a]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),s=Qh(t,o,Object);for(;s.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),s=Qh(t,o,Object),s&&s.obj&&typeof s.obj[`${s.k}.${i}`]<"u"&&(s.obj=void 0);s.obj[`${s.k}.${i}`]=n}function sW(t,e,n,r){const{obj:a,k:i}=Qh(t,e,Object);a[i]=a[i]||[],r&&(a[i]=a[i].concat(n)),r||a[i].push(n)}function k1(t,e){const{obj:n,k:r}=Qh(t,e);if(n)return n[r]}function lW(t,e,n){const r=k1(t,n);return r!==void 0?r:k1(e,n)}function VR(t,e,n){for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):VR(t[r],e[r],n):t[r]=e[r]);return t}function Fd(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var uW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function cW(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>uW[e]):t}class dW{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const pW=[" ",",","?","!",";"],hW=new dW(20);function fW(t,e,n){e=e||"",n=n||"";const r=pW.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const a=hW.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!a.test(t);if(!i){const o=t.indexOf(n);o>0&&!a.test(t.substring(0,o))&&(i=!0)}return i}function lS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let a=t;for(let i=0;i<r.length;){if(!a||typeof a!="object")return;let o,s="";for(let l=i;l<r.length;++l)if(l!==i&&(s+=n),s+=r[l],o=a[s],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}a=o}return a}function S1(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class WR extends w1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,o=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,n],r&&(Array.isArray(r)?s.push(...r):typeof r=="string"&&i?s.push(...r.split(i)):s.push(r)));const l=k1(this.data,s);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=s[0],n=s[1],r=s.slice(2).join(".")),l||!o||typeof r!="string"?l:lS(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,a){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let s=[e,n];r&&(s=s.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(s=e.split("."),a=n,n=s[1]),this.addNamespaces(n),UR(this.data,s,a),i.silent||this.emit("added",e,n,r,a)}addResources(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(typeof r[i]=="string"||Object.prototype.toString.apply(r[i])==="[object Array]")&&this.addResource(e,n,i,r[i],{silent:!0});a.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},s=[e,n];e.indexOf(".")>-1&&(s=e.split("."),a=r,r=n,n=s[1]),this.addNamespaces(n);let l=k1(this.data,s)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),a?VR(l,r,i):l={...l,...r},UR(this.data,s,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var GR={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,a){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,a))}),e}};const HR={};class Yw extends w1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),iW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ds.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,s=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!fW(e,r,a);if(o&&!s){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:i};const u=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(a)}return typeof i=="string"&&(i=[i]),{key:e,namespaces:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:s}=this.extractFromKey(e[e.length-1],n),l=s[s.length-1],u=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const w=n.nsSeparator||this.options.nsSeparator;return a?{res:`${l}${w}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${w}${o}`}return a?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const d=this.resolve(e,n);let p=d&&d.res;const f=d&&d.usedKey||o,g=d&&d.exactUsedKey||o,y=Object.prototype.toString.apply(p),v=["[object Number]","[object Function]","[object RegExp]"],b=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject;if(x&&p&&typeof p!="string"&&typeof p!="boolean"&&typeof p!="number"&&v.indexOf(y)<0&&!(typeof b=="string"&&y==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,p,{...n,ns:s}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(d.res=w,d.usedParams=this.getUsedParamsDetails(n),d):w}if(i){const w=y==="[object Array]",S=w?[]:{},C=w?g:f;for(const E in p)if(Object.prototype.hasOwnProperty.call(p,E)){const R=`${C}${i}${E}`;S[E]=this.translate(R,{...n,joinArrays:!1,ns:s}),S[E]===R&&(S[E]=p[E])}p=S}}else if(x&&typeof b=="string"&&y==="[object Array]")p=p.join(b),p&&(p=this.extendTranslation(p,e,n,r));else{let w=!1,S=!1;const C=n.count!==void 0&&typeof n.count!="string",E=Yw.hasDefaultValue(n),R=C?this.pluralResolver.getSuffix(u,n.count,n):"",T=n.ordinal&&C?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",$=C&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),P=$&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${R}`]||n[`defaultValue${T}`]||n.defaultValue;!this.isValidLookup(p)&&E&&(w=!0,p=P),this.isValidLookup(p)||(S=!0,p=o);const D=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:p,B=E&&P!==p&&this.options.updateMissing;if(S||w||B){if(this.logger.log(B?"updateKey":"missingKey",u,l,o,B?P:p),i){const J=this.resolve(o,{...n,keySeparator:!1});J&&J.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let z=[];const q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&q&&q[0])for(let J=0;J<q.length;J++)z.push(q[J]);else this.options.saveMissingTo==="all"?z=this.languageUtils.toResolveHierarchy(n.lng||this.language):z.push(n.lng||this.language);const Y=(J,H,L)=>{const Q=E&&L!==p?L:D;this.options.missingKeyHandler?this.options.missingKeyHandler(J,l,H,Q,B,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(J,l,H,Q,B,n),this.emit("missingKey",J,l,H,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?z.forEach(J=>{const H=this.pluralResolver.getSuffixes(J,n);$&&n[`defaultValue${this.options.pluralSeparator}zero`]&&H.indexOf(`${this.options.pluralSeparator}zero`)<0&&H.push(`${this.options.pluralSeparator}zero`),H.forEach(L=>{Y([J],o+L,n[`defaultValue${L}`]||P)})}):Y(z,o,P))}p=this.extendTranslation(p,e,n,d,r),S&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${o}`),(S||w)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,w?p:void 0):p=this.options.parseMissingKeyHandler(p))}return a?(d.res=p,d.usedParams=this.getUsedParamsDetails(n),d):p}extendTranslation(e,n,r,a,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const p=e.match(this.interpolator.nestingRegexp);c=p&&p.length}let d=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language,r),u){const p=e.match(this.interpolator.nestingRegexp),f=p&&p.length;c<f&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(r.lng=a.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,f=new Array(p),g=0;g<p;g++)f[g]=arguments[g];return i&&i[0]===f[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${n[0]}`),null):o.translate(...f,n)},r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,l=typeof s=="string"?[s]:s;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=GR.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,a,i,o,s;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;a=c;let d=u.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const p=n.count!==void 0&&typeof n.count!="string",f=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),g=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(v=>{this.isValidLookup(r)||(s=v,!HR[`${y[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(HR[`${y[0]}-${v}`]=!0,this.logger.warn(`key "${a}" for languages "${y.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(b=>{if(this.isValidLookup(r))return;o=b;const x=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(x,c,b,v,n);else{let S;p&&(S=this.pluralResolver.getSuffix(b,n.count,n));const C=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(x.push(c+S),n.ordinal&&S.indexOf(E)===0&&x.push(c+S.replace(E,this.options.pluralSeparator)),f&&x.push(c+C)),g){const R=`${c}${this.options.contextSeparator}${n.context}`;x.push(R),p&&(x.push(R+S),n.ordinal&&S.indexOf(E)===0&&x.push(R+S.replace(E,this.options.pluralSeparator)),f&&x.push(R+C))}}let w;for(;w=x.pop();)this.isValidLookup(r)||(i=w,r=this.getResource(b,v,w,n))}))})}),{res:r,usedKey:a,exactUsedKey:i,usedLng:o,usedNS:s}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,a):this.resourceStore.getResource(e,n,r,a)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let a=r?e.replace:e;if(r&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const i of n)delete a[i]}return a}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}function uS(t){return t.charAt(0).toUpperCase()+t.slice(1)}class qR{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ds.create("languageUtils")}getScriptPartFromCode(e){if(e=S1(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=S1(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(a=>a.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=uS(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=uS(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=uS(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(n=a)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(i=>{if(i===a||!(i.indexOf("-")<0&&a.indexOf("-")<0)&&i.indexOf(a)===0)return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),a=[],i=o=>{o&&(this.isSupportedCode(o)?a.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):typeof e=="string"&&i(this.formatLanguageCode(e)),r.forEach(o=>{a.indexOf(o)<0&&i(this.formatLanguageCode(o))}),a}}let mW=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],gW={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};const yW=["v1","v2","v3"],bW=["v4"],KR={zero:0,one:1,two:2,few:3,many:4,other:5};function vW(){const t={};return mW.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:gW[e.fc]}})}),t}class xW{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=ds.create("pluralResolver"),(!this.options.compatibilityJSON||bW.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=vW()}addRule(e,n){this.rules[e]=n}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(S1(e==="dev"?"en":e),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(a=>`${n}${a}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((a,i)=>KR[a]-KR[i]).map(a=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a}`):r.numbers.map(a=>this.getSuffix(e,a,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,r);return a?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(n)}`:this.getSuffixRetroCompatible(a,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let a=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const i=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!yW.includes(this.options.compatibilityJSON)}}function XR(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=lW(t,e,n);return!i&&a&&typeof n=="string"&&(i=lS(t,n,r),i===void 0&&(i=lS(e,n,r))),i}class wW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ds.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const n=e.interpolation;this.escape=n.escape!==void 0?n.escape:cW,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?Fd(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?Fd(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?Fd(n.nestingPrefix):n.nestingPrefixEscaped||Fd("$t("),this.nestingSuffix=n.nestingSuffix?Fd(n.nestingSuffix):n.nestingSuffixEscaped||Fd(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,a){let i,o,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(f){return f.replace(/\$/g,"$$$$")}const c=f=>{if(f.indexOf(this.formatSeparator)<0){const b=XR(n,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,r,{...a,...n,interpolationkey:f}):b}const g=f.split(this.formatSeparator),y=g.shift().trim(),v=g.join(this.formatSeparator).trim();return this.format(XR(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...a,...n,interpolationkey:y})};this.resetRegExp();const d=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,p=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>u(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?u(this.escape(f)):u(f)}].forEach(f=>{for(s=0;i=f.regex.exec(e);){const g=i[1].trim();if(o=c(g),o===void 0)if(typeof d=="function"){const v=d(e,i,a);o=typeof v=="string"?v:""}else if(a&&Object.prototype.hasOwnProperty.call(a,g))o="";else if(p){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=jR(o));const y=f.safeValue(o);if(e=e.replace(i[0],y),p?(f.regex.lastIndex+=o.length,f.regex.lastIndex-=i[0].length):f.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,i,o;function s(l,u){const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const d=l.split(new RegExp(`${c}[ ]*{`));let p=`{${d[1]}`;l=d[0],p=this.interpolate(p,o);const f=p.match(/'/g),g=p.match(/"/g);(f&&f.length%2===0&&!g||g.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),u&&(o={...u,...o})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,y),`${l}${c}${p}`}return delete o.defaultValue,l}for(;a=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const c=a[1].split(this.formatSeparator).map(d=>d.trim());a[1]=c.shift(),l=c,u=!0}if(i=n(s.call(this,a[1].trim(),o),o),i&&a[0]===e&&typeof i!="string")return i;typeof i!="string"&&(i=jR(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),u&&(i=l.reduce((c,d)=>this.format(c,d,r.lng,{...r,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}function kW(t){let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);e==="currency"&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(i=>{if(!i)return;const[o,...s]=i.split(":"),l=s.join(":").trim().replace(/^'+|'+$/g,"");n[o.trim()]||(n[o.trim()]=l),l==="false"&&(n[o.trim()]=!1),l==="true"&&(n[o.trim()]=!0),isNaN(l)||(n[o.trim()]=parseInt(l,10))})}return{formatName:e,formatOptions:n}}function Ad(t){const e={};return function(n,r,a){const i=r+JSON.stringify(a);let o=e[i];return o||(o=t(S1(r),a),e[i]=o),o(n)}}class SW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ds.create("formatter"),this.options=e,this.formats={number:Ad((n,r)=>{const a=new Intl.NumberFormat(n,{...r});return i=>a.format(i)}),currency:Ad((n,r)=>{const a=new Intl.NumberFormat(n,{...r,style:"currency"});return i=>a.format(i)}),datetime:Ad((n,r)=>{const a=new Intl.DateTimeFormat(n,{...r});return i=>a.format(i)}),relativetime:Ad((n,r)=>{const a=new Intl.RelativeTimeFormat(n,{...r});return i=>a.format(i,r.range||"day")}),list:Ad((n,r)=>{const a=new Intl.ListFormat(n,{...r});return i=>a.format(i)})},this.init(e)}init(e){const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Ad(n)}format(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((i,o)=>{const{formatName:s,formatOptions:l}=kW(o);if(this.formats[s]){let u=i;try{const c=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},d=c.locale||c.lng||a.locale||a.lng||r;u=this.formats[s](i,d,{...l,...a,...c})}catch(c){this.logger.warn(c)}return u}else this.logger.warn(`there was no format function for ${s}`);return i},e)}}function CW(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}class EW extends w1{constructor(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=ds.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,a.backend,a)}queueLoad(e,n,r,a){const i={},o={},s={},l={};return e.forEach(u=>{let c=!0;n.forEach(d=>{const p=`${u}|${d}`;!r.reload&&this.store.hasResourceBundle(u,d)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,c=!1,o[p]===void 0&&(o[p]=!0),i[p]===void 0&&(i[p]=!0),l[d]===void 0&&(l[d]=!0)))}),c||(s[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const a=e.split("|"),i=a[0],o=a[1];n&&this.emit("failedLoading",i,o,n),r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2;const s={};this.queue.forEach(l=>{sW(l.loaded,[i],o),CW(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{s[u]||(s[u]={});const c=l.loaded[u];c.length&&c.forEach(d=>{s[u][d]===void 0&&(s[u][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:a,wait:i,callback:o});return}this.readingCalls++;const s=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(u&&c&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,a+1,i*2,o)},i);return}o(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(c=>s(null,c)).catch(s):s(null,u)}catch(u){s(u)}return}return l(e,n,s)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const i=this.queueLoad(e,n,r,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),a=r[0],i=r[1];this.read(a,i,"read",void 0,void 0,(o,s)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${a} failed`,o),!o&&s&&this.logger.log(`${n}loaded namespace ${i} for language ${a}`,s),this.loaded(e,o,s)})}saveMissing(e,n,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(e,n,r,a,l):c=u(e,n,r,a),c&&typeof c.then=="function"?c.then(d=>s(null,d)).catch(s):s(null,c)}catch(c){s(c)}else u(e,n,r,a,s,l)}!e||!e[0]||this.store.addResource(e[0],n,r,a)}}}function QR(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let e={};if(typeof t[1]=="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function YR(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function C1(){}function NW(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(e=>{typeof t[e]=="function"&&(t[e]=t[e].bind(t))})}class O0 extends w1{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=YR(e),this.services={},this.logger=ds,this.modules={external:[]},NW(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const a=QR();this.options={...a,...this.options,...YR(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function i(l){return l?typeof l=="function"?new l:l:null}if(!this.options.isClone){this.modules.logger?ds.init(i(this.modules.logger),this.options):ds.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=SW);const u=new qR(this.options);this.store=new WR(this.options.resources,this.options);const c=this.services;c.logger=ds,c.resourceStore=this.store,c.languageUtils=u,c.pluralResolver=new xW(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(c.formatter=i(l),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new wW(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new EW(i(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(d){for(var p=arguments.length,f=new Array(p>1?p-1:0),g=1;g<p;g++)f[g-1]=arguments[g];e.emit(d,...f)}),this.modules.languageDetector&&(c.languageDetector=i(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=i(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new Yw(this.services,this.options),this.translator.on("*",function(d){for(var p=arguments.length,f=new Array(p>1?p-1:0),g=1;g<p;g++)f[g-1]=arguments[g];e.emit(d,...f)}),this.modules.external.forEach(d=>{d.init&&d.init(this)})}if(this.format=this.options.interpolation.format,r||(r=C1),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=function(){return e.store[l](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=function(){return e.store[l](...arguments),e}});const o=Xh(),s=()=>{const l=(u,c)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(c),r(u,c)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),o}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C1;const r=typeof e=="string"?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const a=[],i=o=>{!o||o==="cimode"||this.services.languageUtils.toResolveHierarchy(o).forEach(s=>{s!=="cimode"&&a.indexOf(s)<0&&a.push(s)})};r?i(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(o=>i(o)),this.options.preload&&this.options.preload.forEach(o=>i(o)),this.services.backendConnector.load(a,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(o)})}else n(null)}reloadResources(e,n,r){const a=Xh();return e||(e=this.languages),n||(n=this.options.ns),r||(r=C1),this.services.backendConnector.reload(e,n,i=>{a.resolve(),r(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&GR.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const a=Xh();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,a.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},s=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{o(c,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),a}getFixedT(e,n,r){var a=this;const i=function(o,s){let l;if(typeof s!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),d=2;d<u;d++)c[d-2]=arguments[d];l=a.options.overloadTranslationOptionHandler([o,s].concat(c))}else l={...s};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix=l.keyPrefix||r||i.keyPrefix;const p=a.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(o)?f=o.map(g=>`${l.keyPrefix}${p}${g}`):f=l.keyPrefix?`${l.keyPrefix}${p}${o}`:o,a.t(f,l)};return typeof e=="string"?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=this.services.backendConnector.state[`${s}|${l}`];return u===-1||u===2};if(n.precheck){const s=n.precheck(this,o);if(s!==void 0)return s}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!a||o(i,e)))}loadNamespaces(e,n){const r=Xh();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Xh();typeof e=="string"&&(e=[e]);const a=this.options.preload||[],i=e.filter(o=>a.indexOf(o)<0);return i.length?(this.options.preload=a.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new qR(QR());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new O0(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C1;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new O0(a);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new WR(this.store.data,a),i.services.resourceStore=i.store),i.translator=new Yw(i.services,a),i.translator.on("*",function(o){for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];i.emit(o,...l)}),i.init(a,n),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const fa=O0.createInstance();fa.createInstance=O0.createInstance,fa.createInstance,fa.dir,fa.init,fa.loadResources,fa.reloadResources,fa.use,fa.changeLanguage,fa.getFixedT,fa.t,fa.exists,fa.setDefaultNamespace,fa.hasLoadedNamespace,fa.loadNamespaces,fa.loadLanguages;var JR={exports:{}},$i={},ZR={exports:{}},e$={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(t){function e(L,Q){var Z=L.length;L.push(Q);e:for(;0<Z;){var te=Z-1>>>1,oe=L[te];if(0<a(oe,Q))L[te]=Q,L[Z]=oe,Z=te;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var Q=L[0],Z=L.pop();if(Z!==Q){L[0]=Z;e:for(var te=0,oe=L.length,he=oe>>>1;te<he;){var ae=2*(te+1)-1,de=L[ae],ke=ae+1,X=L[ke];if(0>a(de,Z))ke<oe&&0>a(X,de)?(L[te]=X,L[ke]=Z,te=ke):(L[te]=de,L[ae]=Z,te=ae);else if(ke<oe&&0>a(X,Z))L[te]=X,L[ke]=Z,te=ke;else break e}}return Q}function a(L,Q){var Z=L.sortIndex-Q.sortIndex;return Z!==0?Z:L.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,d=null,p=3,f=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var Q=n(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=L)r(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(u)}}function S(L){if(y=!1,w(L),!g)if(n(l)!==null)g=!0,J(C);else{var Q=n(u);Q!==null&&H(S,Q.startTime-L)}}function C(L,Q){g=!1,y&&(y=!1,b(T),T=-1),f=!0;var Z=p;try{for(w(Q),d=n(l);d!==null&&(!(d.expirationTime>Q)||L&&!D());){var te=d.callback;if(typeof te=="function"){d.callback=null,p=d.priorityLevel;var oe=te(d.expirationTime<=Q);Q=t.unstable_now(),typeof oe=="function"?d.callback=oe:d===n(l)&&r(l),w(Q)}else r(l);d=n(l)}if(d!==null)var he=!0;else{var ae=n(u);ae!==null&&H(S,ae.startTime-Q),he=!1}return he}finally{d=null,p=Z,f=!1}}var E=!1,R=null,T=-1,$=5,P=-1;function D(){return!(t.unstable_now()-P<$)}function B(){if(R!==null){var L=t.unstable_now();P=L;var Q=!0;try{Q=R(!0,L)}finally{Q?z():(E=!1,R=null)}}else E=!1}var z;if(typeof x=="function")z=function(){x(B)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Y=q.port2;q.port1.onmessage=B,z=function(){Y.postMessage(null)}}else z=function(){v(B,0)};function J(L){R=L,E||(E=!0,z())}function H(L,Q){T=v(function(){L(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,J(C))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var Z=p;p=Q;try{return L()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,Q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var Z=p;p=L;try{return Q()}finally{p=Z}},t.unstable_scheduleCallback=function(L,Q,Z){var te=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?te+Z:te):Z=te,L){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Z+oe,L={id:c++,callback:Q,priorityLevel:L,startTime:Z,expirationTime:oe,sortIndex:-1},Z>te?(L.sortIndex=Z,e(u,L),n(l)===null&&L===n(u)&&(y?(b(T),T=-1):y=!0,H(S,Z-te))):(L.sortIndex=oe,e(l,L),g||f||(g=!0,J(C))),L},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(L){var Q=p;return function(){var Z=p;p=Q;try{return L.apply(this,arguments)}finally{p=Z}}}})(e$),ZR.exports=e$;var Yh=ZR.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var t$=_,Oi=Yh;function Ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n$=new Set,Jh={};function sc(t,e){Dd(t,e),Dd(t+"Capture",e)}function Dd(t,e){for(Jh[t]=e,t=0;t<e.length;t++)n$.add(e[t])}var Hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cS=Object.prototype.hasOwnProperty,TW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r$={},a$={};function IW(t){return cS.call(a$,t)?!0:cS.call(r$,t)?!1:TW.test(t)?a$[t]=!0:(r$[t]=!0,!1)}function _W(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RW(t,e,n,r){if(e===null||typeof e>"u"||_W(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ri(t,e,n,r,a,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ma[t]=new ri(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ma[e]=new ri(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){ma[t]=new ri(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ma[t]=new ri(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ma[t]=new ri(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){ma[t]=new ri(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){ma[t]=new ri(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){ma[t]=new ri(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){ma[t]=new ri(t,5,!1,t.toLowerCase(),null,!1,!1)});var dS=/[\-:]([a-z])/g;function pS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dS,pS);ma[e]=new ri(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dS,pS);ma[e]=new ri(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dS,pS);ma[e]=new ri(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){ma[t]=new ri(t,1,!1,t.toLowerCase(),null,!1,!1)}),ma.xlinkHref=new ri("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){ma[t]=new ri(t,1,!1,t.toLowerCase(),null,!0,!0)});function hS(t,e,n,r){var a=ma.hasOwnProperty(e)?ma[e]:null;(a!==null?a.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RW(e,n,a,r)&&(n=null),r||a===null?IW(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qs=t$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E1=Symbol.for("react.element"),Ld=Symbol.for("react.portal"),zd=Symbol.for("react.fragment"),fS=Symbol.for("react.strict_mode"),mS=Symbol.for("react.profiler"),i$=Symbol.for("react.provider"),o$=Symbol.for("react.context"),gS=Symbol.for("react.forward_ref"),yS=Symbol.for("react.suspense"),bS=Symbol.for("react.suspense_list"),vS=Symbol.for("react.memo"),Vl=Symbol.for("react.lazy"),s$=Symbol.for("react.offscreen"),l$=Symbol.iterator;function Zh(t){return t===null||typeof t!="object"?null:(t=l$&&t[l$]||t["@@iterator"],typeof t=="function"?t:null)}var tr=Object.assign,xS;function ef(t){if(xS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xS=e&&e[1]||""}return`
`+xS+t}var wS=!1;function kS(t,e){if(!t||wS)return"";wS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{wS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ef(t):""}function $W(t){switch(t.tag){case 5:return ef(t.type);case 16:return ef("Lazy");case 13:return ef("Suspense");case 19:return ef("SuspenseList");case 0:case 2:case 15:return t=kS(t.type,!1),t;case 11:return t=kS(t.type.render,!1),t;case 1:return t=kS(t.type,!0),t;default:return""}}function SS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zd:return"Fragment";case Ld:return"Portal";case mS:return"Profiler";case fS:return"StrictMode";case yS:return"Suspense";case bS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case o$:return(t.displayName||"Context")+".Consumer";case i$:return(t._context.displayName||"Context")+".Provider";case gS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vS:return e=t.displayName||null,e!==null?e:SS(t.type)||"Memo";case Vl:e=t._payload,t=t._init;try{return SS(t(e))}catch{}}return null}function OW(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return SS(e);case 8:return e===fS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function u$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function MW(t){var e=u$(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function N1(t){t._valueTracker||(t._valueTracker=MW(t))}function c$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=u$(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function T1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function CS(t,e){var n=e.checked;return tr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function d$(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function p$(t,e){e=e.checked,e!=null&&hS(t,"checked",e,!1)}function ES(t,e){p$(t,e);var n=Wl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?NS(t,e.type,n):e.hasOwnProperty("defaultValue")&&NS(t,e.type,Wl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function h$(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function NS(t,e,n){(e!=="number"||T1(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tf=Array.isArray;function Bd(t,e,n,r){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wl(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function TS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return tr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function f$(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ie(92));if(tf(n)){if(1<n.length)throw Error(Ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wl(n)}}function m$(t,e){var n=Wl(e.value),r=Wl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function g$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function y$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?y$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var I1,b$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(I1=I1||document.createElement("div"),I1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=I1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PW=["Webkit","ms","Moz","O"];Object.keys(rf).forEach(function(t){PW.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rf[e]=rf[t]})});function v$(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||rf.hasOwnProperty(t)&&rf[t]?(""+e).trim():e+"px"}function x$(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=v$(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var FW=tr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _S(t,e){if(e){if(FW[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ie(62))}}function RS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $S=null;function OS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var MS=null,jd=null,Ud=null;function w$(t){if(t=Nf(t)){if(typeof MS!="function")throw Error(Ie(280));var e=t.stateNode;e&&(e=Y1(e),MS(t.stateNode,t.type,e))}}function k$(t){jd?Ud?Ud.push(t):Ud=[t]:jd=t}function S$(){if(jd){var t=jd,e=Ud;if(Ud=jd=null,w$(t),e)for(t=0;t<e.length;t++)w$(e[t])}}function C$(t,e){return t(e)}function E$(){}var PS=!1;function N$(t,e,n){if(PS)return t(e,n);PS=!0;try{return C$(t,e,n)}finally{PS=!1,(jd!==null||Ud!==null)&&(E$(),S$())}}function af(t,e){var n=t.stateNode;if(n===null)return null;var r=Y1(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ie(231,e,typeof n));return n}var FS=!1;if(Hs)try{var of={};Object.defineProperty(of,"passive",{get:function(){FS=!0}}),window.addEventListener("test",of,of),window.removeEventListener("test",of,of)}catch{FS=!1}function AW(t,e,n,r,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var sf=!1,_1=null,R1=!1,AS=null,DW={onError:function(t){sf=!0,_1=t}};function LW(t,e,n,r,a,i,o,s,l){sf=!1,_1=null,AW.apply(DW,arguments)}function zW(t,e,n,r,a,i,o,s,l){if(LW.apply(this,arguments),sf){if(sf){var u=_1;sf=!1,_1=null}else throw Error(Ie(198));R1||(R1=!0,AS=u)}}function lc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function T$(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function I$(t){if(lc(t)!==t)throw Error(Ie(188))}function BW(t){var e=t.alternate;if(!e){if(e=lc(t),e===null)throw Error(Ie(188));return e!==t?null:t}for(var n=t,r=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return I$(a),t;if(i===r)return I$(a),e;i=i.sibling}throw Error(Ie(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o)throw Error(Ie(189))}}if(n.alternate!==r)throw Error(Ie(190))}if(n.tag!==3)throw Error(Ie(188));return n.stateNode.current===n?t:e}function _$(t){return t=BW(t),t!==null?R$(t):null}function R$(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=R$(t);if(e!==null)return e;t=t.sibling}return null}var $$=Oi.unstable_scheduleCallback,O$=Oi.unstable_cancelCallback,jW=Oi.unstable_shouldYield,UW=Oi.unstable_requestPaint,wr=Oi.unstable_now,VW=Oi.unstable_getCurrentPriorityLevel,DS=Oi.unstable_ImmediatePriority,M$=Oi.unstable_UserBlockingPriority,$1=Oi.unstable_NormalPriority,WW=Oi.unstable_LowPriority,P$=Oi.unstable_IdlePriority,O1=null,ps=null;function GW(t){if(ps&&typeof ps.onCommitFiberRoot=="function")try{ps.onCommitFiberRoot(O1,t,void 0,(t.current.flags&128)===128)}catch{}}var Mo=Math.clz32?Math.clz32:KW,HW=Math.log,qW=Math.LN2;function KW(t){return t>>>=0,t===0?32:31-(HW(t)/qW|0)|0}var M1=64,P1=4194304;function lf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function F1(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~a;s!==0?r=lf(s):(i&=o,i!==0&&(r=lf(i)))}else o=n&~a,o!==0?r=lf(o):i!==0&&(r=lf(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&a)&&(a=r&-r,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mo(e),a=1<<n,r|=t[n],e&=~a;return r}function XW(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QW(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Mo(i),s=1<<o,l=a[o];l===-1?(!(s&n)||s&r)&&(a[o]=XW(s,e)):l<=e&&(t.expiredLanes|=s),i&=~s}}function LS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function F$(){var t=M1;return M1<<=1,!(M1&4194240)&&(M1=64),t}function zS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function uf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mo(e),t[e]=n}function YW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-Mo(n),i=1<<a;e[a]=0,r[a]=-1,t[a]=-1,n&=~i}}function BS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mo(n),a=1<<r;a&e|t[r]&e&&(t[r]|=e),n&=~a}}var xn=0;function A$(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var D$,jS,L$,z$,B$,US=!1,A1=[],Gl=null,Hl=null,ql=null,cf=new Map,df=new Map,Kl=[],JW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function j$(t,e){switch(t){case"focusin":case"focusout":Gl=null;break;case"dragenter":case"dragleave":Hl=null;break;case"mouseover":case"mouseout":ql=null;break;case"pointerover":case"pointerout":cf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":df.delete(e.pointerId)}}function pf(t,e,n,r,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Nf(e),e!==null&&jS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function ZW(t,e,n,r,a){switch(e){case"focusin":return Gl=pf(Gl,t,e,n,r,a),!0;case"dragenter":return Hl=pf(Hl,t,e,n,r,a),!0;case"mouseover":return ql=pf(ql,t,e,n,r,a),!0;case"pointerover":var i=a.pointerId;return cf.set(i,pf(cf.get(i)||null,t,e,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,df.set(i,pf(df.get(i)||null,t,e,n,r,a)),!0}return!1}function U$(t){var e=uc(t.target);if(e!==null){var n=lc(e);if(n!==null){if(e=n.tag,e===13){if(e=T$(n),e!==null){t.blockedOn=e,B$(t.priority,function(){L$(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function D1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=WS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$S=r,n.target.dispatchEvent(r),$S=null}else return e=Nf(n),e!==null&&jS(e),t.blockedOn=n,!1;e.shift()}return!0}function V$(t,e,n){D1(t)&&n.delete(e)}function eG(){US=!1,Gl!==null&&D1(Gl)&&(Gl=null),Hl!==null&&D1(Hl)&&(Hl=null),ql!==null&&D1(ql)&&(ql=null),cf.forEach(V$),df.forEach(V$)}function hf(t,e){t.blockedOn===e&&(t.blockedOn=null,US||(US=!0,Oi.unstable_scheduleCallback(Oi.unstable_NormalPriority,eG)))}function ff(t){function e(a){return hf(a,t)}if(0<A1.length){hf(A1[0],t);for(var n=1;n<A1.length;n++){var r=A1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gl!==null&&hf(Gl,t),Hl!==null&&hf(Hl,t),ql!==null&&hf(ql,t),cf.forEach(e),df.forEach(e),n=0;n<Kl.length;n++)r=Kl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kl.length&&(n=Kl[0],n.blockedOn===null);)U$(n),n.blockedOn===null&&Kl.shift()}var Vd=qs.ReactCurrentBatchConfig,L1=!0;function tG(t,e,n,r){var a=xn,i=Vd.transition;Vd.transition=null;try{xn=1,VS(t,e,n,r)}finally{xn=a,Vd.transition=i}}function nG(t,e,n,r){var a=xn,i=Vd.transition;Vd.transition=null;try{xn=4,VS(t,e,n,r)}finally{xn=a,Vd.transition=i}}function VS(t,e,n,r){if(L1){var a=WS(t,e,n,r);if(a===null)sC(t,e,r,z1,n),j$(t,r);else if(ZW(a,t,e,n,r))r.stopPropagation();else if(j$(t,r),e&4&&-1<JW.indexOf(t)){for(;a!==null;){var i=Nf(a);if(i!==null&&D$(i),i=WS(t,e,n,r),i===null&&sC(t,e,r,z1,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else sC(t,e,r,null,n)}}var z1=null;function WS(t,e,n,r){if(z1=null,t=OS(r),t=uc(t),t!==null)if(e=lc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=T$(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return z1=t,null}function W$(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VW()){case DS:return 1;case M$:return 4;case $1:case WW:return 16;case P$:return 536870912;default:return 16}default:return 16}}var Xl=null,GS=null,B1=null;function G$(){if(B1)return B1;var t,e=GS,n=e.length,r,a="value"in Xl?Xl.value:Xl.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===a[i-r];r++);return B1=a.slice(t,1<r?1-r:void 0)}function j1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function U1(){return!0}function H$(){return!1}function Mi(t){function e(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?U1:H$,this.isPropagationStopped=H$,this}return tr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=U1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=U1)},persist:function(){},isPersistent:U1}),e}var Wd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},HS=Mi(Wd),mf=tr({},Wd,{view:0,detail:0}),rG=Mi(mf),qS,KS,gf,V1=tr({},mf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:QS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gf&&(gf&&t.type==="mousemove"?(qS=t.screenX-gf.screenX,KS=t.screenY-gf.screenY):KS=qS=0,gf=t),qS)},movementY:function(t){return"movementY"in t?t.movementY:KS}}),q$=Mi(V1),aG=tr({},V1,{dataTransfer:0}),iG=Mi(aG),oG=tr({},mf,{relatedTarget:0}),XS=Mi(oG),sG=tr({},Wd,{animationName:0,elapsedTime:0,pseudoElement:0}),lG=Mi(sG),uG=tr({},Wd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cG=Mi(uG),dG=tr({},Wd,{data:0}),K$=Mi(dG),pG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mG(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fG[t])?!!e[t]:!1}function QS(){return mG}var gG=tr({},mf,{key:function(t){if(t.key){var e=pG[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=j1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hG[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:QS,charCode:function(t){return t.type==="keypress"?j1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?j1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yG=Mi(gG),bG=tr({},V1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X$=Mi(bG),vG=tr({},mf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:QS}),xG=Mi(vG),wG=tr({},Wd,{propertyName:0,elapsedTime:0,pseudoElement:0}),kG=Mi(wG),SG=tr({},V1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CG=Mi(SG),EG=[9,13,27,32],YS=Hs&&"CompositionEvent"in window,yf=null;Hs&&"documentMode"in document&&(yf=document.documentMode);var NG=Hs&&"TextEvent"in window&&!yf,Q$=Hs&&(!YS||yf&&8<yf&&11>=yf),Y$=" ",J$=!1;function Z$(t,e){switch(t){case"keyup":return EG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eO(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gd=!1;function TG(t,e){switch(t){case"compositionend":return eO(e);case"keypress":return e.which!==32?null:(J$=!0,Y$);case"textInput":return t=e.data,t===Y$&&J$?null:t;default:return null}}function IG(t,e){if(Gd)return t==="compositionend"||!YS&&Z$(t,e)?(t=G$(),B1=GS=Xl=null,Gd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Q$&&e.locale!=="ko"?null:e.data;default:return null}}var _G={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_G[t.type]:e==="textarea"}function nO(t,e,n,r){k$(r),e=K1(e,"onChange"),0<e.length&&(n=new HS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bf=null,vf=null;function RG(t){xO(t,0)}function W1(t){var e=Qd(t);if(c$(e))return t}function $G(t,e){if(t==="change")return e}var rO=!1;if(Hs){var JS;if(Hs){var ZS="oninput"in document;if(!ZS){var aO=document.createElement("div");aO.setAttribute("oninput","return;"),ZS=typeof aO.oninput=="function"}JS=ZS}else JS=!1;rO=JS&&(!document.documentMode||9<document.documentMode)}function iO(){bf&&(bf.detachEvent("onpropertychange",oO),vf=bf=null)}function oO(t){if(t.propertyName==="value"&&W1(vf)){var e=[];nO(e,vf,t,OS(t)),N$(RG,e)}}function OG(t,e,n){t==="focusin"?(iO(),bf=e,vf=n,bf.attachEvent("onpropertychange",oO)):t==="focusout"&&iO()}function MG(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return W1(vf)}function PG(t,e){if(t==="click")return W1(e)}function FG(t,e){if(t==="input"||t==="change")return W1(e)}function AG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Po=typeof Object.is=="function"?Object.is:AG;function xf(t,e){if(Po(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!cS.call(e,a)||!Po(t[a],e[a]))return!1}return!0}function sO(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lO(t,e){var n=sO(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sO(n)}}function uO(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uO(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cO(){for(var t=window,e=T1();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=T1(t.document)}return e}function eC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DG(t){var e=cO(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uO(n.ownerDocument.documentElement,n)){if(r!==null&&eC(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!t.extend&&i>r&&(a=r,r=i,i=a),a=lO(n,i);var o=lO(n,r);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LG=Hs&&"documentMode"in document&&11>=document.documentMode,Hd=null,tC=null,wf=null,nC=!1;function dO(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nC||Hd==null||Hd!==T1(r)||(r=Hd,"selectionStart"in r&&eC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wf&&xf(wf,r)||(wf=r,r=K1(tC,"onSelect"),0<r.length&&(e=new HS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hd)))}function G1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qd={animationend:G1("Animation","AnimationEnd"),animationiteration:G1("Animation","AnimationIteration"),animationstart:G1("Animation","AnimationStart"),transitionend:G1("Transition","TransitionEnd")},rC={},pO={};Hs&&(pO=document.createElement("div").style,"AnimationEvent"in window||(delete qd.animationend.animation,delete qd.animationiteration.animation,delete qd.animationstart.animation),"TransitionEvent"in window||delete qd.transitionend.transition);function H1(t){if(rC[t])return rC[t];if(!qd[t])return t;var e=qd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pO)return rC[t]=e[n];return t}var hO=H1("animationend"),fO=H1("animationiteration"),mO=H1("animationstart"),gO=H1("transitionend"),yO=new Map,bO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ql(t,e){yO.set(t,e),sc(e,[t])}for(var aC=0;aC<bO.length;aC++){var iC=bO[aC],zG=iC.toLowerCase(),BG=iC[0].toUpperCase()+iC.slice(1);Ql(zG,"on"+BG)}Ql(hO,"onAnimationEnd"),Ql(fO,"onAnimationIteration"),Ql(mO,"onAnimationStart"),Ql("dblclick","onDoubleClick"),Ql("focusin","onFocus"),Ql("focusout","onBlur"),Ql(gO,"onTransitionEnd"),Dd("onMouseEnter",["mouseout","mouseover"]),Dd("onMouseLeave",["mouseout","mouseover"]),Dd("onPointerEnter",["pointerout","pointerover"]),Dd("onPointerLeave",["pointerout","pointerover"]),sc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sc("onBeforeInput",["compositionend","keypress","textInput","paste"]),sc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jG=new Set("cancel close invalid load scroll toggle".split(" ").concat(kf));function vO(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,zW(r,e,void 0,t),t.currentTarget=null}function xO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;vO(a,s,u),i=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;vO(a,s,u),i=l}}}if(R1)throw t=AS,R1=!1,AS=null,t}function Bn(t,e){var n=e[hC];n===void 0&&(n=e[hC]=new Set);var r=t+"__bubble";n.has(r)||(wO(e,t,2,!1),n.add(r))}function oC(t,e,n){var r=0;e&&(r|=4),wO(n,t,r,e)}var q1="_reactListening"+Math.random().toString(36).slice(2);function Sf(t){if(!t[q1]){t[q1]=!0,n$.forEach(function(n){n!=="selectionchange"&&(jG.has(n)||oC(n,!1,t),oC(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[q1]||(e[q1]=!0,oC("selectionchange",!1,e))}}function wO(t,e,n,r){switch(W$(e)){case 1:var a=tG;break;case 4:a=nG;break;default:a=VS}n=a.bind(null,e,n,t),a=void 0,!FS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function sC(t,e,n,r,a){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=uc(s),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}s=s.parentNode}}r=r.return}N$(function(){var u=i,c=OS(n),d=[];e:{var p=yO.get(t);if(p!==void 0){var f=HS,g=t;switch(t){case"keypress":if(j1(n)===0)break e;case"keydown":case"keyup":f=yG;break;case"focusin":g="focus",f=XS;break;case"focusout":g="blur",f=XS;break;case"beforeblur":case"afterblur":f=XS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=q$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=iG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=xG;break;case hO:case fO:case mO:f=lG;break;case gO:f=kG;break;case"scroll":f=rG;break;case"wheel":f=CG;break;case"copy":case"cut":case"paste":f=cG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=X$}var y=(e&4)!==0,v=!y&&t==="scroll",b=y?p!==null?p+"Capture":null:p;y=[];for(var x=u,w;x!==null;){w=x;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,b!==null&&(S=af(x,b),S!=null&&y.push(Cf(x,S,w)))),v)break;x=x.return}0<y.length&&(p=new f(p,g,null,n,c),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==$S&&(g=n.relatedTarget||n.fromElement)&&(uc(g)||g[Ks]))break e;if((f||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=u,g=g?uc(g):null,g!==null&&(v=lc(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(y=q$,S="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=X$,S="onPointerLeave",b="onPointerEnter",x="pointer"),v=f==null?p:Qd(f),w=g==null?p:Qd(g),p=new y(S,x+"leave",f,n,c),p.target=v,p.relatedTarget=w,S=null,uc(c)===u&&(y=new y(b,x+"enter",g,n,c),y.target=w,y.relatedTarget=v,S=y),v=S,f&&g)t:{for(y=f,b=g,x=0,w=y;w;w=Kd(w))x++;for(w=0,S=b;S;S=Kd(S))w++;for(;0<x-w;)y=Kd(y),x--;for(;0<w-x;)b=Kd(b),w--;for(;x--;){if(y===b||b!==null&&y===b.alternate)break t;y=Kd(y),b=Kd(b)}y=null}else y=null;f!==null&&kO(d,p,f,y,!1),g!==null&&v!==null&&kO(d,v,g,y,!0)}}e:{if(p=u?Qd(u):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var C=$G;else if(tO(p))if(rO)C=FG;else{C=MG;var E=OG}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=PG);if(C&&(C=C(t,u))){nO(d,C,n,c);break e}E&&E(t,p,u),t==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&NS(p,"number",p.value)}switch(E=u?Qd(u):window,t){case"focusin":(tO(E)||E.contentEditable==="true")&&(Hd=E,tC=u,wf=null);break;case"focusout":wf=tC=Hd=null;break;case"mousedown":nC=!0;break;case"contextmenu":case"mouseup":case"dragend":nC=!1,dO(d,n,c);break;case"selectionchange":if(LG)break;case"keydown":case"keyup":dO(d,n,c)}var R;if(YS)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Gd?Z$(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Q$&&n.locale!=="ko"&&(Gd||T!=="onCompositionStart"?T==="onCompositionEnd"&&Gd&&(R=G$()):(Xl=c,GS="value"in Xl?Xl.value:Xl.textContent,Gd=!0)),E=K1(u,T),0<E.length&&(T=new K$(T,t,null,n,c),d.push({event:T,listeners:E}),R?T.data=R:(R=eO(n),R!==null&&(T.data=R)))),(R=NG?TG(t,n):IG(t,n))&&(u=K1(u,"onBeforeInput"),0<u.length&&(c=new K$("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=R))}xO(d,e)})}function Cf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function K1(t,e){for(var n=e+"Capture",r=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=af(t,n),i!=null&&r.unshift(Cf(t,i,a)),i=af(t,e),i!=null&&r.push(Cf(t,i,a))),t=t.return}return r}function Kd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kO(t,e,n,r,a){for(var i=e._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,a?(l=af(n,i),l!=null&&o.unshift(Cf(n,l,s))):a||(l=af(n,i),l!=null&&o.push(Cf(n,l,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var UG=/\r\n?/g,VG=/\u0000|\uFFFD/g;function SO(t){return(typeof t=="string"?t:""+t).replace(UG,`
`).replace(VG,"")}function X1(t,e,n){if(e=SO(e),SO(t)!==e&&n)throw Error(Ie(425))}function Q1(){}var lC=null,uC=null;function cC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dC=typeof setTimeout=="function"?setTimeout:void 0,WG=typeof clearTimeout=="function"?clearTimeout:void 0,CO=typeof Promise=="function"?Promise:void 0,GG=typeof queueMicrotask=="function"?queueMicrotask:typeof CO<"u"?function(t){return CO.resolve(null).then(t).catch(HG)}:dC;function HG(t){setTimeout(function(){throw t})}function pC(t,e){var n=e,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),ff(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);ff(e)}function Yl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function EO(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xd=Math.random().toString(36).slice(2),hs="__reactFiber$"+Xd,Ef="__reactProps$"+Xd,Ks="__reactContainer$"+Xd,hC="__reactEvents$"+Xd,qG="__reactListeners$"+Xd,KG="__reactHandles$"+Xd;function uc(t){var e=t[hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ks]||n[hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=EO(t);t!==null;){if(n=t[hs])return n;t=EO(t)}return e}t=n,n=t.parentNode}return null}function Nf(t){return t=t[hs]||t[Ks],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ie(33))}function Y1(t){return t[Ef]||null}var fC=[],Yd=-1;function Jl(t){return{current:t}}function jn(t){0>Yd||(t.current=fC[Yd],fC[Yd]=null,Yd--)}function Pn(t,e){Yd++,fC[Yd]=t.current,t.current=e}var Zl={},Aa=Jl(Zl),mi=Jl(!1),cc=Zl;function Jd(t,e){var n=t.type.contextTypes;if(!n)return Zl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function gi(t){return t=t.childContextTypes,t!=null}function J1(){jn(mi),jn(Aa)}function NO(t,e,n){if(Aa.current!==Zl)throw Error(Ie(168));Pn(Aa,e),Pn(mi,n)}function TO(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in e))throw Error(Ie(108,OW(t)||"Unknown",a));return tr({},n,r)}function Z1(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zl,cc=Aa.current,Pn(Aa,t),Pn(mi,mi.current),!0}function IO(t,e,n){var r=t.stateNode;if(!r)throw Error(Ie(169));n?(t=TO(t,e,cc),r.__reactInternalMemoizedMergedChildContext=t,jn(mi),jn(Aa),Pn(Aa,t)):jn(mi),Pn(mi,n)}var Xs=null,ey=!1,mC=!1;function _O(t){Xs===null?Xs=[t]:Xs.push(t)}function XG(t){ey=!0,_O(t)}function eu(){if(!mC&&Xs!==null){mC=!0;var t=0,e=xn;try{var n=Xs;for(xn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xs=null,ey=!1}catch(a){throw Xs!==null&&(Xs=Xs.slice(t+1)),$$(DS,eu),a}finally{xn=e,mC=!1}}return null}var Zd=[],ep=0,ty=null,ny=0,eo=[],to=0,dc=null,Qs=1,Ys="";function pc(t,e){Zd[ep++]=ny,Zd[ep++]=ty,ty=t,ny=e}function RO(t,e,n){eo[to++]=Qs,eo[to++]=Ys,eo[to++]=dc,dc=t;var r=Qs;t=Ys;var a=32-Mo(r)-1;r&=~(1<<a),n+=1;var i=32-Mo(e)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Qs=1<<32-Mo(e)+a|n<<a|r,Ys=i+t}else Qs=1<<i|n<<a|r,Ys=t}function gC(t){t.return!==null&&(pc(t,1),RO(t,1,0))}function yC(t){for(;t===ty;)ty=Zd[--ep],Zd[ep]=null,ny=Zd[--ep],Zd[ep]=null;for(;t===dc;)dc=eo[--to],eo[to]=null,Ys=eo[--to],eo[to]=null,Qs=eo[--to],eo[to]=null}var Pi=null,Fi=null,qn=!1,Fo=null;function $O(t,e){var n=io(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function OO(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pi=t,Fi=Yl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pi=t,Fi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=dc!==null?{id:Qs,overflow:Ys}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=io(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pi=t,Fi=null,!0):!1;default:return!1}}function bC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vC(t){if(qn){var e=Fi;if(e){var n=e;if(!OO(t,e)){if(bC(t))throw Error(Ie(418));e=Yl(n.nextSibling);var r=Pi;e&&OO(t,e)?$O(r,n):(t.flags=t.flags&-4097|2,qn=!1,Pi=t)}}else{if(bC(t))throw Error(Ie(418));t.flags=t.flags&-4097|2,qn=!1,Pi=t}}}function MO(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pi=t}function ry(t){if(t!==Pi)return!1;if(!qn)return MO(t),qn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cC(t.type,t.memoizedProps)),e&&(e=Fi)){if(bC(t))throw PO(),Error(Ie(418));for(;e;)$O(t,e),e=Yl(e.nextSibling)}if(MO(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fi=Yl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fi=null}}else Fi=Pi?Yl(t.stateNode.nextSibling):null;return!0}function PO(){for(var t=Fi;t;)t=Yl(t.nextSibling)}function tp(){Fi=Pi=null,qn=!1}function xC(t){Fo===null?Fo=[t]:Fo.push(t)}var QG=qs.ReactCurrentBatchConfig;function Ao(t,e){if(t&&t.defaultProps){e=tr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ay=Jl(null),iy=null,np=null,wC=null;function kC(){wC=np=iy=null}function SC(t){var e=ay.current;jn(ay),t._currentValue=e}function CC(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function rp(t,e){iy=t,wC=np=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yi=!0),t.firstContext=null)}function no(t){var e=t._currentValue;if(wC!==t)if(t={context:t,memoizedValue:e,next:null},np===null){if(iy===null)throw Error(Ie(308));np=t,iy.dependencies={lanes:0,firstContext:t}}else np=np.next=t;return e}var hc=null;function EC(t){hc===null?hc=[t]:hc.push(t)}function FO(t,e,n,r){var a=e.interleaved;return a===null?(n.next=n,EC(e)):(n.next=a.next,a.next=n),e.interleaved=n,Js(t,r)}function Js(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var tu=!1;function NC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,en&2){var a=r.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),r.pending=e,Js(t,n)}return a=r.interleaved,a===null?(e.next=e,EC(r)):(e.next=a.next,a.next=e),r.interleaved=e,Js(t,n)}function oy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,BS(t,n)}}function DO(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sy(t,e,n,r){var a=t.updateQueue;tu=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;o=0,c=u=l=null,s=i;do{var p=s.lane,f=s.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=t,y=s;switch(p=e,f=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(f,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,p=typeof g=="function"?g.call(f,d,p):g,p==null)break e;d=tr({},d,p);break e;case 2:tu=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,p=a.effects,p===null?a.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=p;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;p=s,s=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(c===null&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);gc|=o,t.lanes=o,t.memoizedState=d}}function LO(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Ie(191,a));a.call(r)}}}var zO=new t$.Component().refs;function TC(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ly={isMounted:function(t){return(t=t._reactInternals)?lc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ii(),a=ou(t),i=Zs(r,a);i.payload=e,n!=null&&(i.callback=n),e=nu(t,i,a),e!==null&&(zo(e,t,a,r),oy(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ii(),a=ou(t),i=Zs(r,a);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=nu(t,i,a),e!==null&&(zo(e,t,a,r),oy(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ii(),r=ou(t),a=Zs(n,r);a.tag=2,e!=null&&(a.callback=e),e=nu(t,a,r),e!==null&&(zo(e,t,r,n),oy(e,t,r))}};function BO(t,e,n,r,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!xf(n,r)||!xf(a,i):!0}function jO(t,e,n){var r=!1,a=Zl,i=e.contextType;return typeof i=="object"&&i!==null?i=no(i):(a=gi(e)?cc:Aa.current,r=e.contextTypes,i=(r=r!=null)?Jd(t,a):Zl),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ly,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function UO(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ly.enqueueReplaceState(e,e.state,null)}function IC(t,e,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs=zO,NC(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=no(i):(i=gi(e)?cc:Aa.current,a.context=Jd(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(TC(t,e,i,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&ly.enqueueReplaceState(a,a.state,null),sy(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Tf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ie(309));var r=n.stateNode}if(!r)throw Error(Ie(147,t));var a=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var s=a.refs;s===zO&&(s=a.refs={}),o===null?delete s[i]:s[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ie(284));if(!n._owner)throw Error(Ie(290,t))}return t}function uy(t,e){throw t=Object.prototype.toString.call(e),Error(Ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function VO(t){var e=t._init;return e(t._payload)}function WO(t){function e(b,x){if(t){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function a(b,x){return b=lu(b,x),b.index=0,b.sibling=null,b}function i(b,x,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function s(b,x,w,S){return x===null||x.tag!==6?(x=c3(w,b.mode,S),x.return=b,x):(x=a(x,w),x.return=b,x)}function l(b,x,w,S){var C=w.type;return C===zd?c(b,x,w.props.children,S,w.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Vl&&VO(C)===x.type)?(S=a(x,w.props),S.ref=Tf(b,x,w),S.return=b,S):(S=Iy(w.type,w.key,w.props,null,b.mode,S),S.ref=Tf(b,x,w),S.return=b,S)}function u(b,x,w,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=d3(w,b.mode,S),x.return=b,x):(x=a(x,w.children||[]),x.return=b,x)}function c(b,x,w,S,C){return x===null||x.tag!==7?(x=xc(w,b.mode,S,C),x.return=b,x):(x=a(x,w),x.return=b,x)}function d(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=c3(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case E1:return w=Iy(x.type,x.key,x.props,null,b.mode,w),w.ref=Tf(b,null,x),w.return=b,w;case Ld:return x=d3(x,b.mode,w),x.return=b,x;case Vl:var S=x._init;return d(b,S(x._payload),w)}if(tf(x)||Zh(x))return x=xc(x,b.mode,w,null),x.return=b,x;uy(b,x)}return null}function p(b,x,w,S){var C=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:s(b,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case E1:return w.key===C?l(b,x,w,S):null;case Ld:return w.key===C?u(b,x,w,S):null;case Vl:return C=w._init,p(b,x,C(w._payload),S)}if(tf(w)||Zh(w))return C!==null?null:c(b,x,w,S,null);uy(b,w)}return null}function f(b,x,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(w)||null,s(x,b,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case E1:return b=b.get(S.key===null?w:S.key)||null,l(x,b,S,C);case Ld:return b=b.get(S.key===null?w:S.key)||null,u(x,b,S,C);case Vl:var E=S._init;return f(b,x,w,E(S._payload),C)}if(tf(S)||Zh(S))return b=b.get(w)||null,c(x,b,S,C,null);uy(x,S)}return null}function g(b,x,w,S){for(var C=null,E=null,R=x,T=x=0,$=null;R!==null&&T<w.length;T++){R.index>T?($=R,R=null):$=R.sibling;var P=p(b,R,w[T],S);if(P===null){R===null&&(R=$);break}t&&R&&P.alternate===null&&e(b,R),x=i(P,x,T),E===null?C=P:E.sibling=P,E=P,R=$}if(T===w.length)return n(b,R),qn&&pc(b,T),C;if(R===null){for(;T<w.length;T++)R=d(b,w[T],S),R!==null&&(x=i(R,x,T),E===null?C=R:E.sibling=R,E=R);return qn&&pc(b,T),C}for(R=r(b,R);T<w.length;T++)$=f(R,b,T,w[T],S),$!==null&&(t&&$.alternate!==null&&R.delete($.key===null?T:$.key),x=i($,x,T),E===null?C=$:E.sibling=$,E=$);return t&&R.forEach(function(D){return e(b,D)}),qn&&pc(b,T),C}function y(b,x,w,S){var C=Zh(w);if(typeof C!="function")throw Error(Ie(150));if(w=C.call(w),w==null)throw Error(Ie(151));for(var E=C=null,R=x,T=x=0,$=null,P=w.next();R!==null&&!P.done;T++,P=w.next()){R.index>T?($=R,R=null):$=R.sibling;var D=p(b,R,P.value,S);if(D===null){R===null&&(R=$);break}t&&R&&D.alternate===null&&e(b,R),x=i(D,x,T),E===null?C=D:E.sibling=D,E=D,R=$}if(P.done)return n(b,R),qn&&pc(b,T),C;if(R===null){for(;!P.done;T++,P=w.next())P=d(b,P.value,S),P!==null&&(x=i(P,x,T),E===null?C=P:E.sibling=P,E=P);return qn&&pc(b,T),C}for(R=r(b,R);!P.done;T++,P=w.next())P=f(R,b,T,P.value,S),P!==null&&(t&&P.alternate!==null&&R.delete(P.key===null?T:P.key),x=i(P,x,T),E===null?C=P:E.sibling=P,E=P);return t&&R.forEach(function(B){return e(b,B)}),qn&&pc(b,T),C}function v(b,x,w,S){if(typeof w=="object"&&w!==null&&w.type===zd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case E1:e:{for(var C=w.key,E=x;E!==null;){if(E.key===C){if(C=w.type,C===zd){if(E.tag===7){n(b,E.sibling),x=a(E,w.props.children),x.return=b,b=x;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Vl&&VO(C)===E.type){n(b,E.sibling),x=a(E,w.props),x.ref=Tf(b,E,w),x.return=b,b=x;break e}n(b,E);break}else e(b,E);E=E.sibling}w.type===zd?(x=xc(w.props.children,b.mode,S,w.key),x.return=b,b=x):(S=Iy(w.type,w.key,w.props,null,b.mode,S),S.ref=Tf(b,x,w),S.return=b,b=S)}return o(b);case Ld:e:{for(E=w.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(b,x.sibling),x=a(x,w.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=d3(w,b.mode,S),x.return=b,b=x}return o(b);case Vl:return E=w._init,v(b,x,E(w._payload),S)}if(tf(w))return g(b,x,w,S);if(Zh(w))return y(b,x,w,S);uy(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(b,x.sibling),x=a(x,w),x.return=b,b=x):(n(b,x),x=c3(w,b.mode,S),x.return=b,b=x),o(b)):n(b,x)}return v}var ap=WO(!0),GO=WO(!1),If={},fs=Jl(If),_f=Jl(If),Rf=Jl(If);function fc(t){if(t===If)throw Error(Ie(174));return t}function _C(t,e){switch(Pn(Rf,e),Pn(_f,t),Pn(fs,If),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:IS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=IS(e,t)}jn(fs),Pn(fs,e)}function ip(){jn(fs),jn(_f),jn(Rf)}function HO(t){fc(Rf.current);var e=fc(fs.current),n=IS(e,t.type);e!==n&&(Pn(_f,t),Pn(fs,n))}function RC(t){_f.current===t&&(jn(fs),jn(_f))}var nr=Jl(0);function cy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $C=[];function OC(){for(var t=0;t<$C.length;t++)$C[t]._workInProgressVersionPrimary=null;$C.length=0}var dy=qs.ReactCurrentDispatcher,MC=qs.ReactCurrentBatchConfig,mc=0,rr=null,Lr=null,Zr=null,py=!1,$f=!1,Of=0,YG=0;function Da(){throw Error(Ie(321))}function PC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Po(t[n],e[n]))return!1;return!0}function FC(t,e,n,r,a,i){if(mc=i,rr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dy.current=t===null||t.memoizedState===null?tH:nH,t=n(r,a),$f){i=0;do{if($f=!1,Of=0,25<=i)throw Error(Ie(301));i+=1,Zr=Lr=null,e.updateQueue=null,dy.current=rH,t=n(r,a)}while($f)}if(dy.current=my,e=Lr!==null&&Lr.next!==null,mc=0,Zr=Lr=rr=null,py=!1,e)throw Error(Ie(300));return t}function AC(){var t=Of!==0;return Of=0,t}function ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zr===null?rr.memoizedState=Zr=t:Zr=Zr.next=t,Zr}function ro(){if(Lr===null){var t=rr.alternate;t=t!==null?t.memoizedState:null}else t=Lr.next;var e=Zr===null?rr.memoizedState:Zr.next;if(e!==null)Zr=e,Lr=t;else{if(t===null)throw Error(Ie(310));Lr=t,t={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},Zr===null?rr.memoizedState=Zr=t:Zr=Zr.next=t}return Zr}function Mf(t,e){return typeof e=="function"?e(t):e}function DC(t){var e=ro(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=Lr,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var s=o=null,l=null,u=i;do{var c=u.lane;if((mc&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=r):l=l.next=d,rr.lanes|=c,gc|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=s,Po(r,e.memoizedState)||(yi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do i=a.lane,rr.lanes|=i,gc|=i,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function LC(t){var e=ro(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);Po(i,e.memoizedState)||(yi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function qO(){}function KO(t,e){var n=rr,r=ro(),a=e(),i=!Po(r.memoizedState,a);if(i&&(r.memoizedState=a,yi=!0),r=r.queue,zC(YO.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Zr!==null&&Zr.memoizedState.tag&1){if(n.flags|=2048,Pf(9,QO.bind(null,n,r,a,e),void 0,null),ea===null)throw Error(Ie(349));mc&30||XO(n,e,a)}return a}function XO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rr.updateQueue,e===null?(e={lastEffect:null,stores:null},rr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QO(t,e,n,r){e.value=n,e.getSnapshot=r,JO(e)&&ZO(t)}function YO(t,e,n){return n(function(){JO(e)&&ZO(t)})}function JO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Po(t,n)}catch{return!0}}function ZO(t){var e=Js(t,1);e!==null&&zo(e,t,1,-1)}function e6(t){var e=ms();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mf,lastRenderedState:t},e.queue=t,t=t.dispatch=eH.bind(null,rr,t),[e.memoizedState,t]}function Pf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rr.updateQueue,e===null?(e={lastEffect:null,stores:null},rr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function t6(){return ro().memoizedState}function hy(t,e,n,r){var a=ms();rr.flags|=t,a.memoizedState=Pf(1|e,n,void 0,r===void 0?null:r)}function fy(t,e,n,r){var a=ro();r=r===void 0?null:r;var i=void 0;if(Lr!==null){var o=Lr.memoizedState;if(i=o.destroy,r!==null&&PC(r,o.deps)){a.memoizedState=Pf(e,n,i,r);return}}rr.flags|=t,a.memoizedState=Pf(1|e,n,i,r)}function n6(t,e){return hy(8390656,8,t,e)}function zC(t,e){return fy(2048,8,t,e)}function r6(t,e){return fy(4,2,t,e)}function a6(t,e){return fy(4,4,t,e)}function i6(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function o6(t,e,n){return n=n!=null?n.concat([t]):null,fy(4,4,i6.bind(null,e,t),n)}function BC(){}function s6(t,e){var n=ro();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&PC(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function l6(t,e){var n=ro();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&PC(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function u6(t,e,n){return mc&21?(Po(n,e)||(n=F$(),rr.lanes|=n,gc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yi=!0),t.memoizedState=n)}function JG(t,e){var n=xn;xn=n!==0&&4>n?n:4,t(!0);var r=MC.transition;MC.transition={};try{t(!1),e()}finally{xn=n,MC.transition=r}}function c6(){return ro().memoizedState}function ZG(t,e,n){var r=ou(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},d6(t))p6(e,n);else if(n=FO(t,e,n,r),n!==null){var a=ii();zo(n,t,r,a),h6(n,e,r)}}function eH(t,e,n){var r=ou(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(d6(t))p6(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,Po(s,o)){var l=e.interleaved;l===null?(a.next=a,EC(e)):(a.next=l.next,l.next=a),e.interleaved=a;return}}catch{}finally{}n=FO(t,e,a,r),n!==null&&(a=ii(),zo(n,t,r,a),h6(n,e,r))}}function d6(t){var e=t.alternate;return t===rr||e!==null&&e===rr}function p6(t,e){$f=py=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function h6(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,BS(t,n)}}var my={readContext:no,useCallback:Da,useContext:Da,useEffect:Da,useImperativeHandle:Da,useInsertionEffect:Da,useLayoutEffect:Da,useMemo:Da,useReducer:Da,useRef:Da,useState:Da,useDebugValue:Da,useDeferredValue:Da,useTransition:Da,useMutableSource:Da,useSyncExternalStore:Da,useId:Da,unstable_isNewReconciler:!1},tH={readContext:no,useCallback:function(t,e){return ms().memoizedState=[t,e===void 0?null:e],t},useContext:no,useEffect:n6,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hy(4194308,4,i6.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hy(4194308,4,t,e)},useInsertionEffect:function(t,e){return hy(4,2,t,e)},useMemo:function(t,e){var n=ms();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ms();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ZG.bind(null,rr,t),[r.memoizedState,t]},useRef:function(t){var e=ms();return t={current:t},e.memoizedState=t},useState:e6,useDebugValue:BC,useDeferredValue:function(t){return ms().memoizedState=t},useTransition:function(){var t=e6(!1),e=t[0];return t=JG.bind(null,t[1]),ms().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rr,a=ms();if(qn){if(n===void 0)throw Error(Ie(407));n=n()}else{if(n=e(),ea===null)throw Error(Ie(349));mc&30||XO(r,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,n6(YO.bind(null,r,i,t),[t]),r.flags|=2048,Pf(9,QO.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ms(),e=ea.identifierPrefix;if(qn){var n=Ys,r=Qs;n=(r&~(1<<32-Mo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Of++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=YG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nH={readContext:no,useCallback:s6,useContext:no,useEffect:zC,useImperativeHandle:o6,useInsertionEffect:r6,useLayoutEffect:a6,useMemo:l6,useReducer:DC,useRef:t6,useState:function(){return DC(Mf)},useDebugValue:BC,useDeferredValue:function(t){var e=ro();return u6(e,Lr.memoizedState,t)},useTransition:function(){var t=DC(Mf)[0],e=ro().memoizedState;return[t,e]},useMutableSource:qO,useSyncExternalStore:KO,useId:c6,unstable_isNewReconciler:!1},rH={readContext:no,useCallback:s6,useContext:no,useEffect:zC,useImperativeHandle:o6,useInsertionEffect:r6,useLayoutEffect:a6,useMemo:l6,useReducer:LC,useRef:t6,useState:function(){return LC(Mf)},useDebugValue:BC,useDeferredValue:function(t){var e=ro();return Lr===null?e.memoizedState=t:u6(e,Lr.memoizedState,t)},useTransition:function(){var t=LC(Mf)[0],e=ro().memoizedState;return[t,e]},useMutableSource:qO,useSyncExternalStore:KO,useId:c6,unstable_isNewReconciler:!1};function op(t,e){try{var n="",r=e;do n+=$W(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function jC(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function UC(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var aH=typeof WeakMap=="function"?WeakMap:Map;function f6(t,e,n){n=Zs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ky||(ky=!0,n3=r),UC(t,e)},n}function m6(t,e,n){n=Zs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=e.value;n.payload=function(){return r(a)},n.callback=function(){UC(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){UC(t,e),typeof r!="function"&&(au===null?au=new Set([this]):au.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function g6(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new aH;var a=new Set;r.set(e,a)}else a=r.get(e),a===void 0&&(a=new Set,r.set(e,a));a.has(n)||(a.add(n),t=bH.bind(null,t,e,n),e.then(t,t))}function y6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function b6(t,e,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zs(-1,1),e.tag=2,nu(n,e,1))),n.lanes|=1),t)}var iH=qs.ReactCurrentOwner,yi=!1;function ai(t,e,n,r){e.child=t===null?GO(e,null,n,r):ap(e,t.child,n,r)}function v6(t,e,n,r,a){n=n.render;var i=e.ref;return rp(e,a),r=FC(t,e,n,r,i,a),n=AC(),t!==null&&!yi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,el(t,e,a)):(qn&&n&&gC(e),e.flags|=1,ai(t,e,r,a),e.child)}function x6(t,e,n,r,a){if(t===null){var i=n.type;return typeof i=="function"&&!u3(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,w6(t,e,i,r,a)):(t=Iy(n.type,null,r,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:xf,n(o,r)&&t.ref===e.ref)return el(t,e,a)}return e.flags|=1,t=lu(i,r),t.ref=e.ref,t.return=e,e.child=t}function w6(t,e,n,r,a){if(t!==null){var i=t.memoizedProps;if(xf(i,r)&&t.ref===e.ref)if(yi=!1,e.pendingProps=r=i,(t.lanes&a)!==0)t.flags&131072&&(yi=!0);else return e.lanes=t.lanes,el(t,e,a)}return VC(t,e,n,r,a)}function k6(t,e,n){var r=e.pendingProps,a=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pn(lp,Ai),Ai|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pn(lp,Ai),Ai|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Pn(lp,Ai),Ai|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Pn(lp,Ai),Ai|=r;return ai(t,e,a,n),e.child}function S6(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function VC(t,e,n,r,a){var i=gi(n)?cc:Aa.current;return i=Jd(e,i),rp(e,a),n=FC(t,e,n,r,i,a),r=AC(),t!==null&&!yi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,el(t,e,a)):(qn&&r&&gC(e),e.flags|=1,ai(t,e,n,a),e.child)}function C6(t,e,n,r,a){if(gi(n)){var i=!0;Z1(e)}else i=!1;if(rp(e,a),e.stateNode===null)yy(t,e),jO(e,n,r),IC(e,n,r,a),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=no(u):(u=gi(n)?cc:Aa.current,u=Jd(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&UO(e,o,r,u),tu=!1;var p=e.memoizedState;o.state=p,sy(e,r,o,a),l=e.memoizedState,s!==r||p!==l||mi.current||tu?(typeof c=="function"&&(TC(e,n,c,r),l=e.memoizedState),(s=tu||BO(e,n,s,r,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,AO(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:Ao(e.type,s),o.props=u,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=no(l):(l=gi(n)?cc:Aa.current,l=Jd(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||p!==l)&&UO(e,o,r,l),tu=!1,p=e.memoizedState,o.state=p,sy(e,r,o,a);var g=e.memoizedState;s!==d||p!==g||mi.current||tu?(typeof f=="function"&&(TC(e,n,f,r),g=e.memoizedState),(u=tu||BO(e,n,u,r,p,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return WC(t,e,n,r,i,a)}function WC(t,e,n,r,a,i){S6(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return a&&IO(e,n,!1),el(t,e,i);r=e.stateNode,iH.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ap(e,t.child,null,i),e.child=ap(e,null,s,i)):ai(t,e,s,i),e.memoizedState=r.state,a&&IO(e,n,!0),e.child}function E6(t){var e=t.stateNode;e.pendingContext?NO(t,e.pendingContext,e.pendingContext!==e.context):e.context&&NO(t,e.context,!1),_C(t,e.containerInfo)}function N6(t,e,n,r,a){return tp(),xC(a),e.flags|=256,ai(t,e,n,r),e.child}var GC={dehydrated:null,treeContext:null,retryLane:0};function HC(t){return{baseLanes:t,cachePool:null,transitions:null}}function T6(t,e,n){var r=e.pendingProps,a=nr.current,i=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(a&2)!==0),s?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Pn(nr,a&1),t===null)return vC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_y(o,r,0,null),t=xc(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=HC(n),e.memoizedState=GC,t):qC(e,o));if(a=t.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return oH(t,e,o,r,s,a,n);if(i){i=r.fallback,o=e.mode,a=t.child,s=a.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==a?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=lu(a,l),r.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=lu(s,i):(i=xc(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?HC(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=GC,r}return i=t.child,t=i.sibling,r=lu(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qC(t,e){return e=_y({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gy(t,e,n,r){return r!==null&&xC(r),ap(e,t.child,null,n),t=qC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function oH(t,e,n,r,a,i,o){if(n)return e.flags&256?(e.flags&=-257,r=jC(Error(Ie(422))),gy(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,a=e.mode,r=_y({mode:"visible",children:r.children},a,0,null),i=xc(i,a,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ap(e,t.child,null,o),e.child.memoizedState=HC(o),e.memoizedState=GC,i);if(!(e.mode&1))return gy(t,e,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(Ie(419)),r=jC(i,r,void 0),gy(t,e,o,r)}if(s=(o&t.childLanes)!==0,yi||s){if(r=ea,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Js(t,a),zo(r,t,a,-1))}return l3(),r=jC(Error(Ie(421))),gy(t,e,o,r)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=vH.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Fi=Yl(a.nextSibling),Pi=e,qn=!0,Fo=null,t!==null&&(eo[to++]=Qs,eo[to++]=Ys,eo[to++]=dc,Qs=t.id,Ys=t.overflow,dc=e),e=qC(e,r.children),e.flags|=4096,e)}function I6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),CC(t.return,e,n)}function KC(t,e,n,r,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function _6(t,e,n){var r=e.pendingProps,a=r.revealOrder,i=r.tail;if(ai(t,e,r.children,n),r=nr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&I6(t,n,e);else if(t.tag===19)I6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pn(nr,r),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&cy(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),KC(e,!1,a,n,i);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&cy(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}KC(e,!0,n,null,i);break;case"together":KC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function el(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ie(153));if(e.child!==null){for(t=e.child,n=lu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=lu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sH(t,e,n){switch(e.tag){case 3:E6(e),tp();break;case 5:HO(e);break;case 1:gi(e.type)&&Z1(e);break;case 4:_C(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,a=e.memoizedProps.value;Pn(ay,r._currentValue),r._currentValue=a;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pn(nr,nr.current&1),e.flags|=128,null):n&e.child.childLanes?T6(t,e,n):(Pn(nr,nr.current&1),t=el(t,e,n),t!==null?t.sibling:null);Pn(nr,nr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _6(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Pn(nr,nr.current),r)break;return null;case 22:case 23:return e.lanes=0,k6(t,e,n)}return el(t,e,n)}var R6,XC,$6,O6;R6=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},XC=function(){},$6=function(t,e,n,r){var a=t.memoizedProps;if(a!==r){t=e.stateNode,fc(fs.current);var i=null;switch(n){case"input":a=CS(t,a),r=CS(t,r),i=[];break;case"select":a=tr({},a,{value:void 0}),r=tr({},r,{value:void 0}),i=[];break;case"textarea":a=TS(t,a),r=TS(t,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Q1)}_S(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Jh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(s=a?.[u],r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Jh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Bn("scroll",t),i||s===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}},O6=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ff(t,e){if(!qn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function La(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function lH(t,e,n){var r=e.pendingProps;switch(yC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return La(e),null;case 1:return gi(e.type)&&J1(),La(e),null;case 3:return r=e.stateNode,ip(),jn(mi),jn(Aa),OC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ry(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fo!==null&&(i3(Fo),Fo=null))),XC(t,e),La(e),null;case 5:RC(e);var a=fc(Rf.current);if(n=e.type,t!==null&&e.stateNode!=null)$6(t,e,n,r,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ie(166));return La(e),null}if(t=fc(fs.current),ry(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hs]=e,r[Ef]=i,t=(e.mode&1)!==0,n){case"dialog":Bn("cancel",r),Bn("close",r);break;case"iframe":case"object":case"embed":Bn("load",r);break;case"video":case"audio":for(a=0;a<kf.length;a++)Bn(kf[a],r);break;case"source":Bn("error",r);break;case"img":case"image":case"link":Bn("error",r),Bn("load",r);break;case"details":Bn("toggle",r);break;case"input":d$(r,i),Bn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Bn("invalid",r);break;case"textarea":f$(r,i),Bn("invalid",r)}_S(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&X1(r.textContent,s,t),a=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&X1(r.textContent,s,t),a=["children",""+s]):Jh.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Bn("scroll",r)}switch(n){case"input":N1(r),h$(r,i,!0);break;case"textarea":N1(r),g$(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Q1)}r=a,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=y$(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hs]=e,t[Ef]=r,R6(t,e,!1,!1),e.stateNode=t;e:{switch(o=RS(n,r),n){case"dialog":Bn("cancel",t),Bn("close",t),a=r;break;case"iframe":case"object":case"embed":Bn("load",t),a=r;break;case"video":case"audio":for(a=0;a<kf.length;a++)Bn(kf[a],t);a=r;break;case"source":Bn("error",t),a=r;break;case"img":case"image":case"link":Bn("error",t),Bn("load",t),a=r;break;case"details":Bn("toggle",t),a=r;break;case"input":d$(t,r),a=CS(t,r),Bn("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=tr({},r,{value:void 0}),Bn("invalid",t);break;case"textarea":f$(t,r),a=TS(t,r),Bn("invalid",t);break;default:a=r}_S(n,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?x$(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&b$(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&nf(t,l):typeof l=="number"&&nf(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Jh.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Bn("scroll",t):l!=null&&hS(t,i,l,o))}switch(n){case"input":N1(t),h$(t,r,!1);break;case"textarea":N1(t),g$(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wl(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Bd(t,!!r.multiple,i,!1):r.defaultValue!=null&&Bd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Q1)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return La(e),null;case 6:if(t&&e.stateNode!=null)O6(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ie(166));if(n=fc(Rf.current),fc(fs.current),ry(e)){if(r=e.stateNode,n=e.memoizedProps,r[hs]=e,(i=r.nodeValue!==n)&&(t=Pi,t!==null))switch(t.tag){case 3:X1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&X1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hs]=e,e.stateNode=r}return La(e),null;case 13:if(jn(nr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qn&&Fi!==null&&e.mode&1&&!(e.flags&128))PO(),tp(),e.flags|=98560,i=!1;else if(i=ry(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ie(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ie(317));i[hs]=e}else tp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;La(e),i=!1}else Fo!==null&&(i3(Fo),Fo=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nr.current&1?zr===0&&(zr=3):l3())),e.updateQueue!==null&&(e.flags|=4),La(e),null);case 4:return ip(),XC(t,e),t===null&&Sf(e.stateNode.containerInfo),La(e),null;case 10:return SC(e.type._context),La(e),null;case 17:return gi(e.type)&&J1(),La(e),null;case 19:if(jn(nr),i=e.memoizedState,i===null)return La(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ff(i,!1);else{if(zr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=cy(t),o!==null){for(e.flags|=128,Ff(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pn(nr,nr.current&1|2),e.child}t=t.sibling}i.tail!==null&&wr()>up&&(e.flags|=128,r=!0,Ff(i,!1),e.lanes=4194304)}else{if(!r)if(t=cy(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ff(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qn)return La(e),null}else 2*wr()-i.renderingStartTime>up&&n!==1073741824&&(e.flags|=128,r=!0,Ff(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=wr(),e.sibling=null,n=nr.current,Pn(nr,r?n&1|2:n&1),e):(La(e),null);case 22:case 23:return s3(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ai&1073741824&&(La(e),e.subtreeFlags&6&&(e.flags|=8192)):La(e),null;case 24:return null;case 25:return null}throw Error(Ie(156,e.tag))}function uH(t,e){switch(yC(e),e.tag){case 1:return gi(e.type)&&J1(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ip(),jn(mi),jn(Aa),OC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return RC(e),null;case 13:if(jn(nr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ie(340));tp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return jn(nr),null;case 4:return ip(),null;case 10:return SC(e.type._context),null;case 22:case 23:return s3(),null;case 24:return null;default:return null}}var by=!1,za=!1,cH=typeof WeakSet=="function"?WeakSet:Set,He=null;function sp(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){cr(t,e,r)}else n.current=null}function M6(t,e,n){try{n()}catch(r){cr(t,e,r)}}var P6=!1;function dH(t,e){if(lC=L1,t=cO(),eC(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,c=0,d=t,p=null;t:for(;;){for(var f;d!==n||a!==0&&d.nodeType!==3||(s=o+a),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)p=d,d=f;for(;;){if(d===t)break t;if(p===n&&++u===a&&(s=o),p===i&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=f}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(uC={focusedElem:t,selectionRange:n},L1=!1,He=e;He!==null;)if(e=He,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,He=t;else for(;He!==null;){e=He;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ao(e.type,y),v);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(S){cr(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,He=t;break}He=e.return}return g=P6,P6=!1,g}function Af(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&M6(e,n,i)}a=a.next}while(a!==r)}}function vy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function QC(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function F6(t){var e=t.alternate;e!==null&&(t.alternate=null,F6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hs],delete e[Ef],delete e[hC],delete e[qG],delete e[KG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function A6(t){return t.tag===5||t.tag===3||t.tag===4}function D6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||A6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function YC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Q1));else if(r!==4&&(t=t.child,t!==null))for(YC(t,e,n),t=t.sibling;t!==null;)YC(t,e,n),t=t.sibling}function JC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(JC(t,e,n),t=t.sibling;t!==null;)JC(t,e,n),t=t.sibling}var ga=null,Do=!1;function ru(t,e,n){for(n=n.child;n!==null;)L6(t,e,n),n=n.sibling}function L6(t,e,n){if(ps&&typeof ps.onCommitFiberUnmount=="function")try{ps.onCommitFiberUnmount(O1,n)}catch{}switch(n.tag){case 5:za||sp(n,e);case 6:var r=ga,a=Do;ga=null,ru(t,e,n),ga=r,Do=a,ga!==null&&(Do?(t=ga,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ga.removeChild(n.stateNode));break;case 18:ga!==null&&(Do?(t=ga,n=n.stateNode,t.nodeType===8?pC(t.parentNode,n):t.nodeType===1&&pC(t,n),ff(t)):pC(ga,n.stateNode));break;case 4:r=ga,a=Do,ga=n.stateNode.containerInfo,Do=!0,ru(t,e,n),ga=r,Do=a;break;case 0:case 11:case 14:case 15:if(!za&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&M6(n,e,o),a=a.next}while(a!==r)}ru(t,e,n);break;case 1:if(!za&&(sp(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){cr(n,e,s)}ru(t,e,n);break;case 21:ru(t,e,n);break;case 22:n.mode&1?(za=(r=za)||n.memoizedState!==null,ru(t,e,n),za=r):ru(t,e,n);break;default:ru(t,e,n)}}function z6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cH),e.forEach(function(r){var a=xH.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Lo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:ga=s.stateNode,Do=!1;break e;case 3:ga=s.stateNode.containerInfo,Do=!0;break e;case 4:ga=s.stateNode.containerInfo,Do=!0;break e}s=s.return}if(ga===null)throw Error(Ie(160));L6(i,o,a),ga=null,Do=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){cr(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)B6(e,t),e=e.sibling}function B6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lo(e,t),gs(t),r&4){try{Af(3,t,t.return),vy(3,t)}catch(y){cr(t,t.return,y)}try{Af(5,t,t.return)}catch(y){cr(t,t.return,y)}}break;case 1:Lo(e,t),gs(t),r&512&&n!==null&&sp(n,n.return);break;case 5:if(Lo(e,t),gs(t),r&512&&n!==null&&sp(n,n.return),t.flags&32){var a=t.stateNode;try{nf(a,"")}catch(y){cr(t,t.return,y)}}if(r&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&p$(a,i),RS(s,o);var u=RS(s,i);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?x$(a,d):c==="dangerouslySetInnerHTML"?b$(a,d):c==="children"?nf(a,d):hS(a,c,d,u)}switch(s){case"input":ES(a,i);break;case"textarea":m$(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Bd(a,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?Bd(a,!!i.multiple,i.defaultValue,!0):Bd(a,!!i.multiple,i.multiple?[]:"",!1))}a[Ef]=i}catch(y){cr(t,t.return,y)}}break;case 6:if(Lo(e,t),gs(t),r&4){if(t.stateNode===null)throw Error(Ie(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(y){cr(t,t.return,y)}}break;case 3:if(Lo(e,t),gs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ff(e.containerInfo)}catch(y){cr(t,t.return,y)}break;case 4:Lo(e,t),gs(t);break;case 13:Lo(e,t),gs(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(t3=wr())),r&4&&z6(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(za=(u=za)||c,Lo(e,t),za=u):Lo(e,t),gs(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(He=t,c=t.child;c!==null;){for(d=He=c;He!==null;){switch(p=He,f=p.child,p.tag){case 0:case 11:case 14:case 15:Af(4,p,p.return);break;case 1:sp(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){cr(r,n,y)}}break;case 5:sp(p,p.return);break;case 22:if(p.memoizedState!==null){V6(d);continue}}f!==null?(f.return=p,He=f):V6(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=v$("display",o))}catch(y){cr(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){cr(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Lo(e,t),gs(t),r&4&&z6(t);break;case 21:break;default:Lo(e,t),gs(t)}}function gs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(A6(n)){var r=n;break e}n=n.return}throw Error(Ie(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(nf(a,""),r.flags&=-33);var i=D6(t);JC(t,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,s=D6(t);YC(t,s,o);break;default:throw Error(Ie(161))}}catch(l){cr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pH(t,e,n){He=t,j6(t)}function j6(t,e,n){for(var r=(t.mode&1)!==0;He!==null;){var a=He,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||by;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||za;s=by;var u=za;if(by=o,(za=l)&&!u)for(He=a;He!==null;)o=He,l=o.child,o.tag===22&&o.memoizedState!==null?W6(a):l!==null?(l.return=o,He=l):W6(a);for(;i!==null;)He=i,j6(i),i=i.sibling;He=a,by=s,za=u}U6(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,He=i):U6(t)}}function U6(t){for(;He!==null;){var e=He;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:za||vy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!za)if(n===null)r.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:Ao(e.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&LO(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}LO(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&ff(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}za||e.flags&512&&QC(e)}catch(p){cr(e,e.return,p)}}if(e===t){He=null;break}if(n=e.sibling,n!==null){n.return=e.return,He=n;break}He=e.return}}function V6(t){for(;He!==null;){var e=He;if(e===t){He=null;break}var n=e.sibling;if(n!==null){n.return=e.return,He=n;break}He=e.return}}function W6(t){for(;He!==null;){var e=He;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vy(4,e)}catch(l){cr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var a=e.return;try{r.componentDidMount()}catch(l){cr(e,a,l)}}var i=e.return;try{QC(e)}catch(l){cr(e,i,l)}break;case 5:var o=e.return;try{QC(e)}catch(l){cr(e,o,l)}}}catch(l){cr(e,e.return,l)}if(e===t){He=null;break}var s=e.sibling;if(s!==null){s.return=e.return,He=s;break}He=e.return}}var hH=Math.ceil,xy=qs.ReactCurrentDispatcher,ZC=qs.ReactCurrentOwner,ao=qs.ReactCurrentBatchConfig,en=0,ea=null,Rr=null,ya=0,Ai=0,lp=Jl(0),zr=0,Df=null,gc=0,wy=0,e3=0,Lf=null,bi=null,t3=0,up=1/0,tl=null,ky=!1,n3=null,au=null,Sy=!1,iu=null,Cy=0,zf=0,r3=null,Ey=-1,Ny=0;function ii(){return en&6?wr():Ey!==-1?Ey:Ey=wr()}function ou(t){return t.mode&1?en&2&&ya!==0?ya&-ya:QG.transition!==null?(Ny===0&&(Ny=F$()),Ny):(t=xn,t!==0||(t=window.event,t=t===void 0?16:W$(t.type)),t):1}function zo(t,e,n,r){if(50<zf)throw zf=0,r3=null,Error(Ie(185));uf(t,n,r),(!(en&2)||t!==ea)&&(t===ea&&(!(en&2)&&(wy|=n),zr===4&&su(t,ya)),vi(t,r),n===1&&en===0&&!(e.mode&1)&&(up=wr()+500,ey&&eu()))}function vi(t,e){var n=t.callbackNode;QW(t,e);var r=F1(t,t===ea?ya:0);if(r===0)n!==null&&O$(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&O$(n),e===1)t.tag===0?XG(H6.bind(null,t)):_O(H6.bind(null,t)),GG(function(){!(en&6)&&eu()}),n=null;else{switch(A$(r)){case 1:n=DS;break;case 4:n=M$;break;case 16:n=$1;break;case 536870912:n=P$;break;default:n=$1}n=eM(n,G6.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function G6(t,e){if(Ey=-1,Ny=0,en&6)throw Error(Ie(327));var n=t.callbackNode;if(cp()&&t.callbackNode!==n)return null;var r=F1(t,t===ea?ya:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ty(t,r);else{e=r;var a=en;en|=2;var i=K6();(ea!==t||ya!==e)&&(tl=null,up=wr()+500,bc(t,e));do try{gH();break}catch(s){q6(t,s)}while(!0);kC(),xy.current=i,en=a,Rr!==null?e=0:(ea=null,ya=0,e=zr)}if(e!==0){if(e===2&&(a=LS(t),a!==0&&(r=a,e=a3(t,a))),e===1)throw n=Df,bc(t,0),su(t,r),vi(t,wr()),n;if(e===6)su(t,r);else{if(a=t.current.alternate,!(r&30)&&!fH(a)&&(e=Ty(t,r),e===2&&(i=LS(t),i!==0&&(r=i,e=a3(t,i))),e===1))throw n=Df,bc(t,0),su(t,r),vi(t,wr()),n;switch(t.finishedWork=a,t.finishedLanes=r,e){case 0:case 1:throw Error(Ie(345));case 2:vc(t,bi,tl);break;case 3:if(su(t,r),(r&130023424)===r&&(e=t3+500-wr(),10<e)){if(F1(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){ii(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=dC(vc.bind(null,t,bi,tl),e);break}vc(t,bi,tl);break;case 4:if(su(t,r),(r&4194240)===r)break;for(e=t.eventTimes,a=-1;0<r;){var o=31-Mo(r);i=1<<o,o=e[o],o>a&&(a=o),r&=~i}if(r=a,r=wr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hH(r/1960))-r,10<r){t.timeoutHandle=dC(vc.bind(null,t,bi,tl),r);break}vc(t,bi,tl);break;case 5:vc(t,bi,tl);break;default:throw Error(Ie(329))}}}return vi(t,wr()),t.callbackNode===n?G6.bind(null,t):null}function a3(t,e){var n=Lf;return t.current.memoizedState.isDehydrated&&(bc(t,e).flags|=256),t=Ty(t,e),t!==2&&(e=bi,bi=n,e!==null&&i3(e)),t}function i3(t){bi===null?bi=t:bi.push.apply(bi,t)}function fH(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Po(i(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function su(t,e){for(e&=~e3,e&=~wy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mo(e),r=1<<n;t[n]=-1,e&=~r}}function H6(t){if(en&6)throw Error(Ie(327));cp();var e=F1(t,0);if(!(e&1))return vi(t,wr()),null;var n=Ty(t,e);if(t.tag!==0&&n===2){var r=LS(t);r!==0&&(e=r,n=a3(t,r))}if(n===1)throw n=Df,bc(t,0),su(t,e),vi(t,wr()),n;if(n===6)throw Error(Ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vc(t,bi,tl),vi(t,wr()),null}function o3(t,e){var n=en;en|=1;try{return t(e)}finally{en=n,en===0&&(up=wr()+500,ey&&eu())}}function yc(t){iu!==null&&iu.tag===0&&!(en&6)&&cp();var e=en;en|=1;var n=ao.transition,r=xn;try{if(ao.transition=null,xn=1,t)return t()}finally{xn=r,ao.transition=n,en=e,!(en&6)&&eu()}}function s3(){Ai=lp.current,jn(lp)}function bc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WG(n)),Rr!==null)for(n=Rr.return;n!==null;){var r=n;switch(yC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&J1();break;case 3:ip(),jn(mi),jn(Aa),OC();break;case 5:RC(r);break;case 4:ip();break;case 13:jn(nr);break;case 19:jn(nr);break;case 10:SC(r.type._context);break;case 22:case 23:s3()}n=n.return}if(ea=t,Rr=t=lu(t.current,null),ya=Ai=e,zr=0,Df=null,e3=wy=gc=0,bi=Lf=null,hc!==null){for(e=0;e<hc.length;e++)if(n=hc[e],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}hc=null}return t}function q6(t,e){do{var n=Rr;try{if(kC(),dy.current=my,py){for(var r=rr.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}py=!1}if(mc=0,Zr=Lr=rr=null,$f=!1,Of=0,ZC.current=null,n===null||n.return===null){zr=1,Df=e,Rr=null;break}e:{var i=t,o=n.return,s=n,l=e;if(e=ya,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=y6(o);if(f!==null){f.flags&=-257,b6(f,o,s,i,e),f.mode&1&&g6(i,u,e),e=f,l=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){g6(i,u,e),l3();break e}l=Error(Ie(426))}}else if(qn&&s.mode&1){var v=y6(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),b6(v,o,s,i,e),xC(op(l,s));break e}}i=l=op(l,s),zr!==4&&(zr=2),Lf===null?Lf=[i]:Lf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=f6(i,l,e);DO(i,b);break e;case 1:s=l;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(au===null||!au.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=m6(i,s,e);DO(i,S);break e}}i=i.return}while(i!==null)}Q6(n)}catch(C){e=C,Rr===n&&n!==null&&(Rr=n=n.return);continue}break}while(!0)}function K6(){var t=xy.current;return xy.current=my,t===null?my:t}function l3(){(zr===0||zr===3||zr===2)&&(zr=4),ea===null||!(gc&268435455)&&!(wy&268435455)||su(ea,ya)}function Ty(t,e){var n=en;en|=2;var r=K6();(ea!==t||ya!==e)&&(tl=null,bc(t,e));do try{mH();break}catch(a){q6(t,a)}while(!0);if(kC(),en=n,xy.current=r,Rr!==null)throw Error(Ie(261));return ea=null,ya=0,zr}function mH(){for(;Rr!==null;)X6(Rr)}function gH(){for(;Rr!==null&&!jW();)X6(Rr)}function X6(t){var e=Z6(t.alternate,t,Ai);t.memoizedProps=t.pendingProps,e===null?Q6(t):Rr=e,ZC.current=null}function Q6(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uH(n,e),n!==null){n.flags&=32767,Rr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zr=6,Rr=null;return}}else if(n=lH(n,e,Ai),n!==null){Rr=n;return}if(e=e.sibling,e!==null){Rr=e;return}Rr=e=t}while(e!==null);zr===0&&(zr=5)}function vc(t,e,n){var r=xn,a=ao.transition;try{ao.transition=null,xn=1,yH(t,e,n,r)}finally{ao.transition=a,xn=r}return null}function yH(t,e,n,r){do cp();while(iu!==null);if(en&6)throw Error(Ie(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ie(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(YW(t,i),t===ea&&(Rr=ea=null,ya=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sy||(Sy=!0,eM($1,function(){return cp(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ao.transition,ao.transition=null;var o=xn;xn=1;var s=en;en|=4,ZC.current=null,dH(t,n),B6(n,t),DG(uC),L1=!!lC,uC=lC=null,t.current=n,pH(n),UW(),en=s,xn=o,ao.transition=i}else t.current=n;if(Sy&&(Sy=!1,iu=t,Cy=a),i=t.pendingLanes,i===0&&(au=null),GW(n.stateNode),vi(t,wr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(ky)throw ky=!1,t=n3,n3=null,t;return Cy&1&&t.tag!==0&&cp(),i=t.pendingLanes,i&1?t===r3?zf++:(zf=0,r3=t):zf=0,eu(),null}function cp(){if(iu!==null){var t=A$(Cy),e=ao.transition,n=xn;try{if(ao.transition=null,xn=16>t?16:t,iu===null)var r=!1;else{if(t=iu,iu=null,Cy=0,en&6)throw Error(Ie(331));var a=en;for(en|=4,He=t.current;He!==null;){var i=He,o=i.child;if(He.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(He=u;He!==null;){var c=He;switch(c.tag){case 0:case 11:case 15:Af(8,c,i)}var d=c.child;if(d!==null)d.return=c,He=d;else for(;He!==null;){c=He;var p=c.sibling,f=c.return;if(F6(c),c===u){He=null;break}if(p!==null){p.return=f,He=p;break}He=f}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}He=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,He=o;else e:for(;He!==null;){if(i=He,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Af(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,He=b;break e}He=i.return}}var x=t.current;for(He=x;He!==null;){o=He;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,He=w;else e:for(o=x;He!==null;){if(s=He,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:vy(9,s)}}catch(C){cr(s,s.return,C)}if(s===o){He=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,He=S;break e}He=s.return}}if(en=a,eu(),ps&&typeof ps.onPostCommitFiberRoot=="function")try{ps.onPostCommitFiberRoot(O1,t)}catch{}r=!0}return r}finally{xn=n,ao.transition=e}}return!1}function Y6(t,e,n){e=op(n,e),e=f6(t,e,1),t=nu(t,e,1),e=ii(),t!==null&&(uf(t,1,e),vi(t,e))}function cr(t,e,n){if(t.tag===3)Y6(t,t,n);else for(;e!==null;){if(e.tag===3){Y6(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(au===null||!au.has(r))){t=op(n,t),t=m6(e,t,1),e=nu(e,t,1),t=ii(),e!==null&&(uf(e,1,t),vi(e,t));break}}e=e.return}}function bH(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ii(),t.pingedLanes|=t.suspendedLanes&n,ea===t&&(ya&n)===n&&(zr===4||zr===3&&(ya&130023424)===ya&&500>wr()-t3?bc(t,0):e3|=n),vi(t,e)}function J6(t,e){e===0&&(t.mode&1?(e=P1,P1<<=1,!(P1&130023424)&&(P1=4194304)):e=1);var n=ii();t=Js(t,e),t!==null&&(uf(t,e,n),vi(t,n))}function vH(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),J6(t,n)}function xH(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ie(314))}r!==null&&r.delete(e),J6(t,n)}var Z6;Z6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mi.current)yi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yi=!1,sH(t,e,n);yi=!!(t.flags&131072)}else yi=!1,qn&&e.flags&1048576&&RO(e,ny,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yy(t,e),t=e.pendingProps;var a=Jd(e,Aa.current);rp(e,n),a=FC(null,e,r,t,a,n);var i=AC();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gi(r)?(i=!0,Z1(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,NC(e),a.updater=ly,e.stateNode=a,a._reactInternals=e,IC(e,r,t,n),e=WC(null,e,r,!0,i,n)):(e.tag=0,qn&&i&&gC(e),ai(null,e,a,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yy(t,e),t=e.pendingProps,a=r._init,r=a(r._payload),e.type=r,a=e.tag=kH(r),t=Ao(r,t),a){case 0:e=VC(null,e,r,t,n);break e;case 1:e=C6(null,e,r,t,n);break e;case 11:e=v6(null,e,r,t,n);break e;case 14:e=x6(null,e,r,Ao(r.type,t),n);break e}throw Error(Ie(306,r,""))}return e;case 0:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Ao(r,a),VC(t,e,r,a,n);case 1:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Ao(r,a),C6(t,e,r,a,n);case 3:e:{if(E6(e),t===null)throw Error(Ie(387));r=e.pendingProps,i=e.memoizedState,a=i.element,AO(t,e),sy(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=op(Error(Ie(423)),e),e=N6(t,e,r,n,a);break e}else if(r!==a){a=op(Error(Ie(424)),e),e=N6(t,e,r,n,a);break e}else for(Fi=Yl(e.stateNode.containerInfo.firstChild),Pi=e,qn=!0,Fo=null,n=GO(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tp(),r===a){e=el(t,e,n);break e}ai(t,e,r,n)}e=e.child}return e;case 5:return HO(e),t===null&&vC(e),r=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,cC(r,a)?o=null:i!==null&&cC(r,i)&&(e.flags|=32),S6(t,e),ai(t,e,o,n),e.child;case 6:return t===null&&vC(e),null;case 13:return T6(t,e,n);case 4:return _C(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ap(e,null,r,n):ai(t,e,r,n),e.child;case 11:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Ao(r,a),v6(t,e,r,a,n);case 7:return ai(t,e,e.pendingProps,n),e.child;case 8:return ai(t,e,e.pendingProps.children,n),e.child;case 12:return ai(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,a=e.pendingProps,i=e.memoizedProps,o=a.value,Pn(ay,r._currentValue),r._currentValue=o,i!==null)if(Po(i.value,o)){if(i.children===a.children&&!mi.current){e=el(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Zs(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),CC(i.return,n,e),s.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ie(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),CC(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ai(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,r=e.pendingProps.children,rp(e,n),a=no(a),r=r(a),e.flags|=1,ai(t,e,r,n),e.child;case 14:return r=e.type,a=Ao(r,e.pendingProps),a=Ao(r.type,a),x6(t,e,r,a,n);case 15:return w6(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Ao(r,a),yy(t,e),e.tag=1,gi(r)?(t=!0,Z1(e)):t=!1,rp(e,n),jO(e,r,a),IC(e,r,a,n),WC(null,e,r,!0,t,n);case 19:return _6(t,e,n);case 22:return k6(t,e,n)}throw Error(Ie(156,e.tag))};function eM(t,e){return $$(t,e)}function wH(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function io(t,e,n,r){return new wH(t,e,n,r)}function u3(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kH(t){if(typeof t=="function")return u3(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gS)return 11;if(t===vS)return 14}return 2}function lu(t,e){var n=t.alternate;return n===null?(n=io(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Iy(t,e,n,r,a,i){var o=2;if(r=t,typeof t=="function")u3(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zd:return xc(n.children,a,i,e);case fS:o=8,a|=8;break;case mS:return t=io(12,n,e,a|2),t.elementType=mS,t.lanes=i,t;case yS:return t=io(13,n,e,a),t.elementType=yS,t.lanes=i,t;case bS:return t=io(19,n,e,a),t.elementType=bS,t.lanes=i,t;case s$:return _y(n,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case i$:o=10;break e;case o$:o=9;break e;case gS:o=11;break e;case vS:o=14;break e;case Vl:o=16,r=null;break e}throw Error(Ie(130,t==null?t:typeof t,""))}return e=io(o,n,e,a),e.elementType=t,e.type=r,e.lanes=i,e}function xc(t,e,n,r){return t=io(7,t,r,e),t.lanes=n,t}function _y(t,e,n,r){return t=io(22,t,r,e),t.elementType=s$,t.lanes=n,t.stateNode={isHidden:!1},t}function c3(t,e,n){return t=io(6,t,null,e),t.lanes=n,t}function d3(t,e,n){return e=io(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function SH(t,e,n,r,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zS(0),this.expirationTimes=zS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zS(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function p3(t,e,n,r,a,i,o,s,l){return t=new SH(t,e,n,s,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=io(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},NC(i),t}function CH(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ld,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tM(t){if(!t)return Zl;t=t._reactInternals;e:{if(lc(t)!==t||t.tag!==1)throw Error(Ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ie(171))}if(t.tag===1){var n=t.type;if(gi(n))return TO(t,n,e)}return e}function nM(t,e,n,r,a,i,o,s,l){return t=p3(n,r,!0,t,a,i,o,s,l),t.context=tM(null),n=t.current,r=ii(),a=ou(n),i=Zs(r,a),i.callback=e??null,nu(n,i,a),t.current.lanes=a,uf(t,a,r),vi(t,r),t}function Ry(t,e,n,r){var a=e.current,i=ii(),o=ou(a);return n=tM(n),e.context===null?e.context=n:e.pendingContext=n,e=Zs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nu(a,e,o),t!==null&&(zo(t,a,o,i),oy(t,a,o)),o}function $y(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rM(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function h3(t,e){rM(t,e),(t=t.alternate)&&rM(t,e)}function EH(){return null}var aM=typeof reportError=="function"?reportError:function(t){console.error(t)};function f3(t){this._internalRoot=t}Oy.prototype.render=f3.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ie(409));Ry(t,e,null,null)},Oy.prototype.unmount=f3.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yc(function(){Ry(null,t,null,null)}),e[Ks]=null}};function Oy(t){this._internalRoot=t}Oy.prototype.unstable_scheduleHydration=function(t){if(t){var e=z$();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kl.length&&e!==0&&e<Kl[n].priority;n++);Kl.splice(n,0,t),n===0&&U$(t)}};function m3(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function My(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function iM(){}function NH(t,e,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=$y(o);i.call(u)}}var o=nM(e,r,t,0,null,!1,!1,"",iM);return t._reactRootContainer=o,t[Ks]=o.current,Sf(t.nodeType===8?t.parentNode:t),yc(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var s=r;r=function(){var u=$y(l);s.call(u)}}var l=p3(t,0,!1,null,null,!1,!1,"",iM);return t._reactRootContainer=l,t[Ks]=l.current,Sf(t.nodeType===8?t.parentNode:t),yc(function(){Ry(e,l,n,r)}),l}function Py(t,e,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=$y(o);s.call(l)}}Ry(e,o,t,a)}else o=NH(n,e,t,a,r);return $y(o)}D$=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=lf(e.pendingLanes);n!==0&&(BS(e,n|1),vi(e,wr()),!(en&6)&&(up=wr()+500,eu()))}break;case 13:yc(function(){var r=Js(t,1);if(r!==null){var a=ii();zo(r,t,1,a)}}),h3(t,1)}},jS=function(t){if(t.tag===13){var e=Js(t,134217728);if(e!==null){var n=ii();zo(e,t,134217728,n)}h3(t,134217728)}},L$=function(t){if(t.tag===13){var e=ou(t),n=Js(t,e);if(n!==null){var r=ii();zo(n,t,e,r)}h3(t,e)}},z$=function(){return xn},B$=function(t,e){var n=xn;try{return xn=t,e()}finally{xn=n}},MS=function(t,e,n){switch(e){case"input":if(ES(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var a=Y1(r);if(!a)throw Error(Ie(90));c$(r),ES(r,a)}}}break;case"textarea":m$(t,n);break;case"select":e=n.value,e!=null&&Bd(t,!!n.multiple,e,!1)}},C$=o3,E$=yc;var TH={usingClientEntryPoint:!1,Events:[Nf,Qd,Y1,k$,S$,o3]},Bf={findFiberByHostInstance:uc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},IH={bundleType:Bf.bundleType,version:Bf.version,rendererPackageName:Bf.rendererPackageName,rendererConfig:Bf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_$(t),t===null?null:t.stateNode},findFiberByHostInstance:Bf.findFiberByHostInstance||EH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fy.isDisabled&&Fy.supportsFiber)try{O1=Fy.inject(IH),ps=Fy}catch{}}$i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TH,$i.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m3(e))throw Error(Ie(200));return CH(t,e,null,n)},$i.createRoot=function(t,e){if(!m3(t))throw Error(Ie(299));var n=!1,r="",a=aM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=p3(t,1,!1,null,null,n,!1,r,a),t[Ks]=e.current,Sf(t.nodeType===8?t.parentNode:t),new f3(e)},$i.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ie(188)):(t=Object.keys(t).join(","),Error(Ie(268,t)));return t=_$(e),t=t===null?null:t.stateNode,t},$i.flushSync=function(t){return yc(t)},$i.hydrate=function(t,e,n){if(!My(e))throw Error(Ie(200));return Py(null,t,e,!0,n)},$i.hydrateRoot=function(t,e,n){if(!m3(t))throw Error(Ie(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=aM;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nM(e,null,t,1,n??null,a,!1,i,o),t[Ks]=e.current,Sf(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new Oy(e)},$i.render=function(t,e,n){if(!My(e))throw Error(Ie(200));return Py(null,t,e,!1,n)},$i.unmountComponentAtNode=function(t){if(!My(t))throw Error(Ie(40));return t._reactRootContainer?(yc(function(){Py(null,null,t,!1,function(){t._reactRootContainer=null,t[Ks]=null})}),!0):!1},$i.unstable_batchedUpdates=o3,$i.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!My(n))throw Error(Ie(200));if(t==null||t._reactInternals===void 0)throw Error(Ie(38));return Py(t,e,n,!1,r)},$i.version="18.2.0-next-9e3b772b8-20220608";function oM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oM)}catch(t){console.error(t)}}oM(),JR.exports=$i;var Bo=JR.exports;const sM=Zi(Bo),_H=nS({__proto__:null,default:sM},[Bo]);var lM,uM=Bo;lM=uM.createRoot,uM.hydrateRoot;var RH={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const $H=Zi(RH);var OH=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function cM(t){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=t.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(e.name=n[1],($H[n[1]]||t.charAt(t.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=t.indexOf("-->");return{type:"comment",comment:r!==-1?t.slice(4,r):""}}for(var a=new RegExp(OH),i=null;(i=a.exec(t))!==null;)if(i[0].trim())if(i[1]){var o=i[1].trim(),s=[o,""];o.indexOf("=")>-1&&(s=o.split("=")),e.attrs[s[0]]=s[1],a.lastIndex--}else i[2]&&(e.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return e}var MH=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,PH=/^\s*$/,FH=Object.create(null);function dM(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(n){var r=[];for(var a in n)r.push(a+'="'+n[a]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(dM,"")+"</"+e.name+">";case"comment":return t+"<!--"+e.comment+"-->"}}var AH={parse:function(t,e){e||(e={}),e.components||(e.components=FH);var n,r=[],a=[],i=-1,o=!1;if(t.indexOf("<")!==0){var s=t.indexOf("<");r.push({type:"text",content:s===-1?t:t.substring(0,s)})}return t.replace(MH,function(l,u){if(o){if(l!=="</"+n.name+">")return;o=!1}var c,d=l.charAt(1)!=="/",p=l.startsWith("<!--"),f=u+l.length,g=t.charAt(f);if(p){var y=cM(l);return i<0?(r.push(y),r):((c=a[i]).children.push(y),r)}if(d&&(i++,(n=cM(l)).type==="tag"&&e.components[n.name]&&(n.type="component",o=!0),n.voidElement||o||!g||g==="<"||n.children.push({type:"text",content:t.slice(f,t.indexOf("<",f))}),i===0&&r.push(n),(c=a[i-1])&&c.children.push(n),a[i]=n),(!d||n.voidElement)&&(i>-1&&(n.voidElement||n.name===l.slice(2,-1))&&(i--,n=i===-1?r:a[i]),!o&&g!=="<"&&g)){c=i===-1?r:a[i].children;var v=t.indexOf("<",f),b=t.slice(f,v===-1?void 0:v);PH.test(b)&&(b=" "),(v>-1&&i+c.length>=0||b!==" ")&&c.push({type:"text",content:b})}}),r},stringify:function(t){return t.reduce(function(e,n){return e+dM("",n)},"")}};function Ay(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const pM={};function Dy(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&pM[e[0]]||(typeof e[0]=="string"&&(pM[e[0]]=new Date),Ay(...e))}const hM=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function fM(t,e,n){t.loadNamespaces(e,hM(t,n))}function mM(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(a=>{t.options.ns.indexOf(a)<0&&t.options.ns.push(a)}),t.loadLanguages(e,hM(t,r))}function DH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],a=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=e.services.backendConnector.state[`${s}|${l}`];return u===-1||u===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!a||o(i,t)))}function LH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Dy("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!a(r.isLanguageChangingTo,t))return!1}}):DH(t,e,n)}const zH=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,BH={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xA9","&#169;":"\xA9","&reg;":"\xAE","&#174;":"\xAE","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},jH=t=>BH[t],UH=t=>t.replace(zH,jH);let VH={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:UH};function gM(){return VH}let WH;function g3(){return WH}function y3(t,e){if(!t)return!1;const n=t.props?t.props.children:t.children;return e?n.length>0:!!n}function b3(t){if(!t)return[];const e=t.props?t.props.children:t.children;return t.props&&t.props.i18nIsDynamicList?dp(e):e}function GH(t){return Object.prototype.toString.call(t)!=="[object Array]"?!1:t.every(e=>_.isValidElement(e))}function dp(t){return Array.isArray(t)?t:[t]}function HH(t,e){const n={...e};return n.props=Object.assign(t.props,e.props),n}function yM(t,e){if(!t)return"";let n="";const r=dp(t),a=e.transSupportBasicHtmlNodes&&e.transKeepBasicHtmlNodesFor?e.transKeepBasicHtmlNodesFor:[];return r.forEach((i,o)=>{if(typeof i=="string")n+=`${i}`;else if(_.isValidElement(i)){const s=Object.keys(i.props).length,l=a.indexOf(i.type)>-1,u=i.props.children;if(!u&&l&&s===0)n+=`<${i.type}/>`;else if(!u&&(!l||s!==0))n+=`<${o}></${o}>`;else if(i.props.i18nIsDynamicList)n+=`<${o}></${o}>`;else if(l&&s===1&&typeof u=="string")n+=`<${i.type}>${u}</${i.type}>`;else{const c=yM(u,e);n+=`<${o}>${c}</${o}>`}}else if(i===null)Ay("Trans: the passed in value is invalid - seems you passed in a null child.");else if(typeof i=="object"){const{format:s,...l}=i,u=Object.keys(l);if(u.length===1){const c=s?`${u[0]}, ${s}`:u[0];n+=`{{${c}}}`}else Ay("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",i)}else Ay("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",i)}),n}function qH(t,e,n,r,a,i){if(e==="")return[];const o=r.transKeepBasicHtmlNodesFor||[],s=e&&new RegExp(o.map(v=>`<${v}`).join("|")).test(e);if(!t&&!s&&!i)return[e];const l={};function u(v){dp(v).forEach(b=>{typeof b!="string"&&(y3(b)?u(b3(b)):typeof b=="object"&&!_.isValidElement(b)&&Object.assign(l,b))})}u(t);const c=AH.parse(`<0>${e}</0>`),d={...l,...a};function p(v,b,x){const w=b3(v),S=g(w,b.children,x);return GH(w)&&S.length===0||v.props&&v.props.i18nIsDynamicList?w:S}function f(v,b,x,w,S){v.dummy?(v.children=b,x.push(_.cloneElement(v,{key:w},S?void 0:b))):x.push(..._.Children.map([v],C=>{const E={...C.props};return delete E.i18nIsDynamicList,_.createElement(C.type,{...E,key:w,ref:C.ref},S?null:b)}))}function g(v,b,x){const w=dp(v);return dp(b).reduce((S,C,E)=>{const R=C.children&&C.children[0]&&C.children[0].content&&n.services.interpolator.interpolate(C.children[0].content,d,n.language);if(C.type==="tag"){let T=w[parseInt(C.name,10)];x.length===1&&!T&&(T=x[0][C.name]),T||(T={});const $=Object.keys(C.attrs).length!==0?HH({props:C.attrs},T):T,P=_.isValidElement($),D=P&&y3(C,!0)&&!C.voidElement,B=s&&typeof $=="object"&&$.dummy&&!P,z=typeof t=="object"&&t!==null&&Object.hasOwnProperty.call(t,C.name);if(typeof $=="string"){const q=n.services.interpolator.interpolate($,d,n.language);S.push(q)}else if(y3($)||D){const q=p($,C,x);f($,q,S,E)}else if(B){const q=g(w,C.children,x);f($,q,S,E)}else if(Number.isNaN(parseFloat(C.name)))if(z){const q=p($,C,x);f($,q,S,E,C.voidElement)}else if(r.transSupportBasicHtmlNodes&&o.indexOf(C.name)>-1)if(C.voidElement)S.push(_.createElement(C.name,{key:`${C.name}-${E}`}));else{const q=g(w,C.children,x);S.push(_.createElement(C.name,{key:`${C.name}-${E}`},q))}else if(C.voidElement)S.push(`<${C.name} />`);else{const q=g(w,C.children,x);S.push(`<${C.name}>${q}</${C.name}>`)}else if(typeof $=="object"&&!P){const q=C.children[0]?R:null;q&&S.push(q)}else f($,R,S,E,C.children.length!==1||!R)}else if(C.type==="text"){const T=r.transWrapTextNodes,$=i?r.unescape(n.services.interpolator.interpolate(C.content,d,n.language)):n.services.interpolator.interpolate(C.content,d,n.language);T?S.push(_.createElement(T,{key:`${C.name}-${E}`},$)):S.push($)}return S},[])}const y=g([{dummy:!0,children:t||[]}],c,dp(t||[]));return b3(y[0])}function KH(t){let{children:e,count:n,parent:r,i18nKey:a,context:i,tOptions:o={},values:s,defaults:l,components:u,ns:c,i18n:d,t:p,shouldUnescape:f,...g}=t;const y=d||g3();if(!y)return Dy("You will need to pass in an i18next instance by using i18nextReactModule"),e;const v=p||y.t.bind(y)||(B=>B);i&&(o.context=i);const b={...gM(),...y.options&&y.options.react};let x=c||v.ns||y.options&&y.options.defaultNS;x=typeof x=="string"?[x]:x||["translation"];const w=yM(e,b),S=l||w||b.transEmptyNodeValue||a,{hashTransKey:C}=b,E=a||(C?C(w||S):w||S);y.options&&y.options.interpolation&&y.options.interpolation.defaultVariables&&(s=s&&Object.keys(s).length>0?{...s,...y.options.interpolation.defaultVariables}:{...y.options.interpolation.defaultVariables});const R=s||n!==void 0?o.interpolation:{interpolation:{...o.interpolation,prefix:"#$?",suffix:"?$#"}},T={...o,count:n,...s,...R,defaultValue:S,ns:x},$=E?v(E,T):S;u&&Object.keys(u).forEach(B=>{const z=u[B];if(typeof z.type=="function"||!z.props||!z.props.children||$.indexOf(`${B}/>`)<0&&$.indexOf(`${B} />`)<0)return;function q(){return _.createElement(_.Fragment,null,z)}u[B]=_.createElement(q)});const P=qH(u||e,$,y,b,T,f),D=r!==void 0?r:b.defaultTransParent;return D?_.createElement(D,g,P):P}const v3=_.createContext();class XH{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function x3(t){let{children:e,count:n,parent:r,i18nKey:a,context:i,tOptions:o={},values:s,defaults:l,components:u,ns:c,i18n:d,t:p,shouldUnescape:f,...g}=t;const{i18n:y,defaultNS:v}=_.useContext(v3)||{},b=d||y||g3(),x=p||b&&b.t.bind(b);return KH({children:e,count:n,parent:r,i18nKey:a,context:i,tOptions:o,values:s,defaults:l,components:u,ns:c||x&&x.ns||v||b&&b.options&&b.options.defaultNS,i18n:b,t:p,shouldUnescape:f,...g})}const QH=(t,e)=>{const n=_.useRef();return _.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current};function bM(t,e,n,r){return t.getFixedT(e,n,r)}function YH(t,e,n,r){return _.useCallback(bM(t,e,n,r),[t,e,n,r])}function ys(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:a}=_.useContext(v3)||{},i=n||r||g3();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new XH),!i){Dy("You will need to pass in an i18next instance by using initReactI18next");const C=(R,T)=>typeof T=="string"?T:T&&typeof T=="object"&&typeof T.defaultValue=="string"?T.defaultValue:Array.isArray(R)?R[R.length-1]:R,E=[C,{},!1];return E.t=C,E.i18n={},E.ready=!1,E}i.options.react&&i.options.react.wait!==void 0&&Dy("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...gM(),...i.options.react,...e},{useSuspense:s,keyPrefix:l}=o;let u=t||a||i.options&&i.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const c=(i.isInitialized||i.initializedStoreOnce)&&u.every(C=>LH(C,i,o)),d=YH(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),p=()=>d,f=()=>bM(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),[g,y]=_.useState(p);let v=u.join();e.lng&&(v=`${e.lng}${v}`);const b=QH(v),x=_.useRef(!0);_.useEffect(()=>{const{bindI18n:C,bindI18nStore:E}=o;x.current=!0,!c&&!s&&(e.lng?mM(i,e.lng,u,()=>{x.current&&y(f)}):fM(i,u,()=>{x.current&&y(f)})),c&&b&&b!==v&&x.current&&y(f);function R(){x.current&&y(f)}return C&&i&&i.on(C,R),E&&i&&i.store.on(E,R),()=>{x.current=!1,C&&i&&C.split(" ").forEach(T=>i.off(T,R)),E&&i&&E.split(" ").forEach(T=>i.store.off(T,R))}},[i,v]);const w=_.useRef(!0);_.useEffect(()=>{x.current&&!w.current&&y(p),w.current=!1},[i,l]);const S=[g,i,c];if(S.t=g,S.i18n=i,S.ready=c,c||!c&&!s)return S;throw new Promise(C=>{e.lng?mM(i,e.lng,u,()=>C()):fM(i,u,()=>C())})}function JH(t){let{i18n:e,defaultNS:n,children:r}=t;const a=_.useMemo(()=>({i18n:e,defaultNS:n}),[e,n]);return _.createElement(v3.Provider,{value:a},r)}const ZH="modulepreload",eq=function(t){return"/"+t},vM={},xM=function(t,e,n){let r=Promise.resolve();if(e&&e.length>0){const a=document.getElementsByTagName("link");r=Promise.all(e.map(i=>{if(i=eq(i),i in vM)return;vM[i]=!0;const o=i.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(n)for(let u=a.length-1;u>=0;u--){const c=a[u];if(c.href===i&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${s}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":ZH,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((u,c)=>{l.addEventListener("load",u),l.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})}))}return r.then(()=>t()).catch(a=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a})};function tq(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:a,onRegisteredSW:i,onRegisterError:o}=t;let s,l;const u=async(d=!0)=>{await l};async function c(){if("serviceWorker"in navigator){if(s=await xM(()=>import("./workbox-window.prod.es5-prqDwDSL.js"),$0([])).then(({Workbox:d})=>new d("/sw.js",{scope:"/",type:"classic"})).catch(d=>{o?.(d)}),!s)return;s.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),s.addEventListener("installed",d=>{d.isUpdate===!1&&r?.()}),s.register({immediate:e}).then(d=>{i?i("/sw.js",d):a?.(d)}).catch(d=>{o?.(d)})}}return l=c(),u}/**
* @remix-run/router v1.15.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function dr(){return dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dr.apply(this,arguments)}var kr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(kr||(kr={}));const wM="popstate";function nq(t){t===void 0&&(t={});function e(r,a){let{pathname:i,search:o,hash:s}=r.location;return jf("",{pathname:i,search:o,hash:s},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:wc(a)}return aq(e,n,null,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rq(){return Math.random().toString(36).substr(2,8)}function kM(t,e){return{usr:t.state,key:t.key,idx:e}}function jf(t,e,n,r){return n===void 0&&(n=null),dr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?nl(e):e,{state:n,key:e&&e.key||r||rq()})}function wc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function nl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function aq(t,e,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,s=kr.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(dr({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){s=kr.Pop;let v=c(),b=v==null?null:v-u;u=v,l&&l({action:s,location:y.location,delta:b})}function p(v,b){s=kr.Push;let x=jf(y.location,v,b);n&&n(x,v),u=c()+1;let w=kM(x,u),S=y.createHref(x);try{o.pushState(w,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(S)}i&&l&&l({action:s,location:y.location,delta:1})}function f(v,b){s=kr.Replace;let x=jf(y.location,v,b);n&&n(x,v),u=c();let w=kM(x,u),S=y.createHref(x);o.replaceState(w,"",S),i&&l&&l({action:s,location:y.location,delta:0})}function g(v){let b=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof v=="string"?v:wc(v);return x=x.replace(/ $/,"%20"),Et(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let y={get action(){return s},get location(){return t(a,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(wM,d),l=v,()=>{a.removeEventListener(wM,d),l=null}},createHref(v){return e(a,v)},createURL:g,encodeLocation(v){let b=g(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:f,go(v){return o.go(v)}};return y}var pr;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(pr||(pr={}));const iq=new Set(["lazy","caseSensitive","path","id","index","children"]);function oq(t){return t.index===!0}function w3(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((a,i)=>{let o=[...n,i],s=typeof a.id=="string"?a.id:o.join("-");if(Et(a.index!==!0||!a.children,"Cannot specify children on an index route"),Et(!r[s],'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),oq(a)){let l=dr({},a,e(a),{id:s});return r[s]=l,l}else{let l=dr({},a,e(a),{id:s,children:void 0});return r[s]=l,a.children&&(l.children=w3(a.children,e,o,r)),l}})}function hp(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?nl(e):e,a=bs(r.pathname||"/",n);if(a==null)return null;let i=CM(t);sq(i);let o=null;for(let s=0;o==null&&s<i.length;++s){let l=bq(a);o=gq(i[s],l)}return o}function SM(t,e){let{route:n,pathname:r,params:a}=t;return{id:n.id,pathname:r,params:a,data:e[n.id],handle:n.handle}}function CM(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,s)=>{let l={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Et(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=rl([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(Et(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),CM(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:fq(u,i.index),routesMeta:c})};return t.forEach((i,o)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))a(i,o);else for(let l of EM(i.path))a(i,o,l)}),e}function EM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=EM(r.join("/")),s=[];return s.push(...o.map(l=>l===""?i:[i,l].join("/"))),a&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function sq(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mq(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lq=/^:[\w-]+$/,uq=3,cq=2,dq=1,pq=10,hq=-2,NM=t=>t==="*";function fq(t,e){let n=t.split("/"),r=n.length;return n.some(NM)&&(r+=hq),e&&(r+=cq),n.filter(a=>!NM(a)).reduce((a,i)=>a+(lq.test(i)?uq:i===""?dq:pq),r)}function mq(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function gq(t,e){let{routesMeta:n}=t,r={},a="/",i=[];for(let o=0;o<n.length;++o){let s=n[o],l=o===n.length-1,u=a==="/"?e:e.slice(a.length)||"/",c=Ly({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let d=s.route;i.push({params:r,pathname:rl([a,c.pathname]),pathnameBase:wq(rl([a,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(a=rl([a,c.pathnameBase]))}return i}function Ly(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=yq(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((l,u,c)=>{let{paramName:d,isOptional:p}=u;if(d==="*"){let g=s[c]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const f=s[c];return p&&!f?l[d]=void 0:l[d]=(f||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function yq(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),pp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,s)=>(r.push({paramName:o,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function bq(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function vq(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?nl(t):t;return{pathname:n?n.startsWith("/")?n:xq(n,e):e,search:kq(r),hash:Sq(a)}}function xq(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function k3(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function TM(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function S3(t,e){let n=TM(t);return e?n.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function C3(t,e,n,r){r===void 0&&(r=!1);let a;typeof t=="string"?a=nl(t):(a=dr({},t),Et(!a.pathname||!a.pathname.includes("?"),k3("?","pathname","search",a)),Et(!a.pathname||!a.pathname.includes("#"),k3("#","pathname","hash",a)),Et(!a.search||!a.search.includes("#"),k3("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,s;if(o==null)s=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;a.pathname=p.join("/")}s=d>=0?e[d]:"/"}let l=vq(a,s),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const rl=t=>t.join("/").replace(/\/\/+/g,"/"),wq=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kq=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Sq=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class E3{constructor(e,n,r,a){a===void 0&&(a=!1),this.status=e,this.statusText=n||"",this.internal=a,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function IM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _M=["post","put","patch","delete"],Cq=new Set(_M),Eq=["get",..._M],Nq=new Set(Eq),Tq=new Set([301,302,303,307,308]),Iq=new Set([307,308]),N3={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},_q={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Uf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},RM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rq=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),$M="remix-router-transitions";function $q(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Et(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let a;if(t.mapRouteProperties)a=t.mapRouteProperties;else if(t.detectErrorBoundary){let le=t.detectErrorBoundary;a=fe=>({hasErrorBoundary:le(fe)})}else a=Rq;let i={},o=w3(t.routes,a,void 0,i),s,l=t.basename||"/",u=dr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),c=null,d=new Set,p=null,f=null,g=null,y=t.hydrationData!=null,v=hp(o,t.history.location,l),b=null;if(v==null){let le=oo(404,{pathname:t.history.location.pathname}),{matches:fe,route:xe}=BM(o);v=fe,b={[xe.id]:le}}let x,w=v.some(le=>le.route.lazy),S=v.some(le=>le.route.loader);if(w)x=!1;else if(!S)x=!0;else if(u.v7_partialHydration){let le=t.hydrationData?t.hydrationData.loaderData:null,fe=t.hydrationData?t.hydrationData.errors:null;x=v.every(xe=>xe.route.loader&&xe.route.loader.hydrate!==!0&&(le&&le[xe.route.id]!==void 0||fe&&fe[xe.route.id]!==void 0))}else x=t.hydrationData!=null;let C,E={historyAction:t.history.action,location:t.history.location,matches:v,initialized:x,navigation:N3,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},R=kr.Pop,T=!1,$,P=!1,D=new Map,B=null,z=!1,q=!1,Y=[],J=[],H=new Map,L=0,Q=-1,Z=new Map,te=new Set,oe=new Map,he=new Map,ae=new Set,de=new Map,ke=new Map,X=!1;function se(){if(c=t.history.listen(le=>{let{action:fe,location:xe,delta:_e}=le;if(X){X=!1;return}pp(ke.size===0||_e!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ze=Ta({currentLocation:E.location,nextLocation:xe,historyAction:fe});if(ze&&_e!=null){X=!0,t.history.go(_e*-1),Ya(ze,{state:"blocked",location:xe,proceed(){Ya(ze,{state:"proceeding",proceed:void 0,reset:void 0,location:xe}),t.history.go(_e)},reset(){let it=new Map(E.blockers);it.set(ze,Uf),Se({blockers:it})}});return}return $e(fe,xe)}),n){Uq(e,D);let le=()=>Vq(e,D);e.addEventListener("pagehide",le),B=()=>e.removeEventListener("pagehide",le)}return E.initialized||$e(kr.Pop,E.location,{initialHydration:!0}),C}function pe(){c&&c(),B&&B(),d.clear(),$&&$.abort(),E.fetchers.forEach((le,fe)=>hn(fe)),E.blockers.forEach((le,fe)=>la(fe))}function Ne(le){return d.add(le),()=>d.delete(le)}function Se(le,fe){fe===void 0&&(fe={}),E=dr({},E,le);let xe=[],_e=[];u.v7_fetcherPersist&&E.fetchers.forEach((ze,it)=>{ze.state==="idle"&&(ae.has(it)?_e.push(it):xe.push(it))}),[...d].forEach(ze=>ze(E,{deletedFetchers:_e,unstable_viewTransitionOpts:fe.viewTransitionOpts,unstable_flushSync:fe.flushSync===!0})),u.v7_fetcherPersist&&(xe.forEach(ze=>E.fetchers.delete(ze)),_e.forEach(ze=>hn(ze)))}function Te(le,fe,xe){var _e,ze;let{flushSync:it}=xe===void 0?{}:xe,nt=E.actionData!=null&&E.navigation.formMethod!=null&&jo(E.navigation.formMethod)&&E.navigation.state==="loading"&&((_e=le.state)==null?void 0:_e._isRedirect)!==!0,at;fe.actionData?Object.keys(fe.actionData).length>0?at=fe.actionData:at=null:nt?at=E.actionData:at=null;let Qe=fe.loaderData?zM(E.loaderData,fe.loaderData,fe.matches||[],fe.errors):E.loaderData,bt=E.blockers;bt.size>0&&(bt=new Map(bt),bt.forEach((Zt,bn)=>bt.set(bn,Uf)));let cn=T===!0||E.navigation.formMethod!=null&&jo(E.navigation.formMethod)&&((ze=le.state)==null?void 0:ze._isRedirect)!==!0;s&&(o=s,s=void 0),z||R===kr.Pop||(R===kr.Push?t.history.push(le,le.state):R===kr.Replace&&t.history.replace(le,le.state));let ft;if(R===kr.Pop){let Zt=D.get(E.location.pathname);Zt&&Zt.has(le.pathname)?ft={currentLocation:E.location,nextLocation:le}:D.has(le.pathname)&&(ft={currentLocation:le,nextLocation:E.location})}else if(P){let Zt=D.get(E.location.pathname);Zt?Zt.add(le.pathname):(Zt=new Set([le.pathname]),D.set(E.location.pathname,Zt)),ft={currentLocation:E.location,nextLocation:le}}Se(dr({},fe,{actionData:at,loaderData:Qe,historyAction:R,location:le,initialized:!0,navigation:N3,revalidation:"idle",restoreScrollPosition:Vn(le,fe.matches||E.matches),preventScrollReset:cn,blockers:bt}),{viewTransitionOpts:ft,flushSync:it===!0}),R=kr.Pop,T=!1,P=!1,z=!1,q=!1,Y=[],J=[]}async function Pe(le,fe){if(typeof le=="number"){t.history.go(le);return}let xe=T3(E.location,E.matches,l,u.v7_prependBasename,le,u.v7_relativeSplatPath,fe?.fromRouteId,fe?.relative),{path:_e,submission:ze,error:it}=OM(u.v7_normalizeFormMethod,!1,xe,fe),nt=E.location,at=jf(E.location,_e,fe&&fe.state);at=dr({},at,t.history.encodeLocation(at));let Qe=fe&&fe.replace!=null?fe.replace:void 0,bt=kr.Push;Qe===!0?bt=kr.Replace:Qe===!1||ze!=null&&jo(ze.formMethod)&&ze.formAction===E.location.pathname+E.location.search&&(bt=kr.Replace);let cn=fe&&"preventScrollReset"in fe?fe.preventScrollReset===!0:void 0,ft=(fe&&fe.unstable_flushSync)===!0,Zt=Ta({currentLocation:nt,nextLocation:at,historyAction:bt});if(Zt){Ya(Zt,{state:"blocked",location:at,proceed(){Ya(Zt,{state:"proceeding",proceed:void 0,reset:void 0,location:at}),Pe(le,fe)},reset(){let bn=new Map(E.blockers);bn.set(Zt,Uf),Se({blockers:bn})}});return}return await $e(bt,at,{submission:ze,pendingError:it,preventScrollReset:cn,replace:fe&&fe.replace,enableViewTransition:fe&&fe.unstable_viewTransition,flushSync:ft})}function We(){if(Gt(),Se({revalidation:"loading"}),E.navigation.state!=="submitting"){if(E.navigation.state==="idle"){$e(E.historyAction,E.location,{startUninterruptedRevalidation:!0});return}$e(R||E.historyAction,E.navigation.location,{overrideNavigation:E.navigation})}}async function $e(le,fe,xe){$&&$.abort(),$=null,R=le,z=(xe&&xe.startUninterruptedRevalidation)===!0,or(E.location,E.matches),T=(xe&&xe.preventScrollReset)===!0,P=(xe&&xe.enableViewTransition)===!0;let _e=s||o,ze=xe&&xe.overrideNavigation,it=hp(_e,fe,l),nt=(xe&&xe.flushSync)===!0;if(!it){let bn=oo(404,{pathname:fe.pathname}),{matches:Fr,route:sr}=BM(_e);Co(),Te(fe,{matches:Fr,loaderData:{},errors:{[sr.id]:bn}},{flushSync:nt});return}if(E.initialized&&!q&&Aq(E.location,fe)&&!(xe&&xe.submission&&jo(xe.submission.formMethod))){Te(fe,{matches:it},{flushSync:nt});return}$=new AbortController;let at=Wf(t.history,fe,$.signal,xe&&xe.submission),Qe,bt;if(xe&&xe.pendingError)bt={[Gf(it).route.id]:xe.pendingError};else if(xe&&xe.submission&&jo(xe.submission.formMethod)){let bn=await lt(at,fe,xe.submission,it,{replace:xe.replace,flushSync:nt});if(bn.shortCircuited)return;Qe=bn.pendingActionData,bt=bn.pendingActionError,ze=$3(fe,xe.submission),nt=!1,at=new Request(at.url,{signal:at.signal})}let{shortCircuited:cn,loaderData:ft,errors:Zt}=await Je(at,fe,it,ze,xe&&xe.submission,xe&&xe.fetcherSubmission,xe&&xe.replace,xe&&xe.initialHydration===!0,nt,Qe,bt);cn||($=null,Te(fe,dr({matches:it},Qe?{actionData:Qe}:{},{loaderData:ft,errors:Zt})))}async function lt(le,fe,xe,_e,ze){ze===void 0&&(ze={}),Gt();let it=Bq(fe,xe);Se({navigation:it},{flushSync:ze.flushSync===!0});let nt,at=R3(_e,fe);if(!at.route.action&&!at.route.lazy)nt={type:pr.error,error:oo(405,{method:le.method,pathname:fe.pathname,routeId:at.route.id})};else if(nt=await Vf("action",le,at,_e,i,a,l,u.v7_relativeSplatPath),le.signal.aborted)return{shortCircuited:!0};if(Sc(nt)){let Qe;return ze&&ze.replace!=null?Qe=ze.replace:Qe=nt.location===E.location.pathname+E.location.search,await $t(E,nt,{submission:xe,replace:Qe}),{shortCircuited:!0}}if(fp(nt)){let Qe=Gf(_e,at.route.id);return(ze&&ze.replace)!==!0&&(R=kr.Push),{pendingActionData:{},pendingActionError:{[Qe.route.id]:nt.error}}}if(kc(nt))throw oo(400,{type:"defer-action"});return{pendingActionData:{[at.route.id]:nt.data}}}async function Je(le,fe,xe,_e,ze,it,nt,at,Qe,bt,cn){let ft=_e||$3(fe,ze),Zt=ze||it||GM(ft),bn=s||o,[Fr,sr]=MM(t.history,E,xe,Zt,fe,u.v7_partialHydration&&at===!0,q,Y,J,ae,oe,te,bn,l,bt,cn);if(Co(rn=>!(xe&&xe.some(fn=>fn.route.id===rn))||Fr&&Fr.some(fn=>fn.route.id===rn)),Q=++L,Fr.length===0&&sr.length===0){let rn=ui();return Te(fe,dr({matches:xe,loaderData:{},errors:cn||null},bt?{actionData:bt}:{},rn?{fetchers:new Map(E.fetchers)}:{}),{flushSync:Qe}),{shortCircuited:!0}}if(!z&&(!u.v7_partialHydration||!at)){sr.forEach(fn=>{let Er=E.fetchers.get(fn.key),Dt=Hf(void 0,Er?Er.data:void 0);E.fetchers.set(fn.key,Dt)});let rn=bt||E.actionData;Se(dr({navigation:ft},rn?Object.keys(rn).length===0?{actionData:null}:{actionData:rn}:{},sr.length>0?{fetchers:new Map(E.fetchers)}:{}),{flushSync:Qe})}sr.forEach(rn=>{H.has(rn.key)&&yn(rn.key),rn.controller&&H.set(rn.key,rn.controller)});let vr=()=>sr.forEach(rn=>yn(rn.key));$&&$.signal.addEventListener("abort",vr);let{results:ns,loaderResults:Gi,fetcherResults:Ia}=await Wt(E.matches,xe,Fr,sr,le);if(le.signal.aborted)return{shortCircuited:!0};$&&$.signal.removeEventListener("abort",vr),sr.forEach(rn=>H.delete(rn.key));let Eo=jM(ns);if(Eo){if(Eo.idx>=Fr.length){let rn=sr[Eo.idx-Fr.length].key;te.add(rn)}return await $t(E,Eo.result,{replace:nt}),{shortCircuited:!0}}let{loaderData:Xu,errors:Qu}=LM(E,xe,Fr,Gi,cn,sr,Ia,de);de.forEach((rn,fn)=>{rn.subscribe(Er=>{(Er||rn.done)&&de.delete(fn)})});let $l=ui(),rs=Qa(Q),No=$l||rs||sr.length>0;return dr({loaderData:Xu,errors:Qu},No?{fetchers:new Map(E.fetchers)}:{})}function Ze(le,fe,xe,_e){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(le)&&yn(le);let ze=(_e&&_e.unstable_flushSync)===!0,it=s||o,nt=T3(E.location,E.matches,l,u.v7_prependBasename,xe,u.v7_relativeSplatPath,fe,_e?.relative),at=hp(it,nt,l);if(!at){wt(le,fe,oo(404,{pathname:nt}),{flushSync:ze});return}let{path:Qe,submission:bt,error:cn}=OM(u.v7_normalizeFormMethod,!0,nt,_e);if(cn){wt(le,fe,cn,{flushSync:ze});return}let ft=R3(at,Qe);if(T=(_e&&_e.preventScrollReset)===!0,bt&&jo(bt.formMethod)){Ve(le,fe,Qe,ft,at,ze,bt);return}oe.set(le,{routeId:fe,path:Qe}),Vt(le,fe,Qe,ft,at,ze,bt)}async function Ve(le,fe,xe,_e,ze,it,nt){if(Gt(),oe.delete(le),!_e.route.action&&!_e.route.lazy){let fn=oo(405,{method:nt.formMethod,pathname:xe,routeId:fe});wt(le,fe,fn,{flushSync:it});return}let at=E.fetchers.get(le);Ot(le,jq(nt,at),{flushSync:it});let Qe=new AbortController,bt=Wf(t.history,xe,Qe.signal,nt);H.set(le,Qe);let cn=L,ft=await Vf("action",bt,_e,ze,i,a,l,u.v7_relativeSplatPath);if(bt.signal.aborted){H.get(le)===Qe&&H.delete(le);return}if(u.v7_fetcherPersist&&ae.has(le)){if(Sc(ft)||fp(ft)){Ot(le,uu(void 0));return}}else{if(Sc(ft))if(H.delete(le),Q>cn){Ot(le,uu(void 0));return}else return te.add(le),Ot(le,Hf(nt)),$t(E,ft,{fetcherSubmission:nt});if(fp(ft)){wt(le,fe,ft.error);return}}if(kc(ft))throw oo(400,{type:"defer-action"});let Zt=E.navigation.location||E.location,bn=Wf(t.history,Zt,Qe.signal),Fr=s||o,sr=E.navigation.state!=="idle"?hp(Fr,E.navigation.location,l):E.matches;Et(sr,"Didn't find any matches after fetcher action");let vr=++L;Z.set(le,vr);let ns=Hf(nt,ft.data);E.fetchers.set(le,ns);let[Gi,Ia]=MM(t.history,E,sr,nt,Zt,!1,q,Y,J,ae,oe,te,Fr,l,{[_e.route.id]:ft.data},void 0);Ia.filter(fn=>fn.key!==le).forEach(fn=>{let Er=fn.key,Dt=E.fetchers.get(Er),Ol=Hf(void 0,Dt?Dt.data:void 0);E.fetchers.set(Er,Ol),H.has(Er)&&yn(Er),fn.controller&&H.set(Er,fn.controller)}),Se({fetchers:new Map(E.fetchers)});let Eo=()=>Ia.forEach(fn=>yn(fn.key));Qe.signal.addEventListener("abort",Eo);let{results:Xu,loaderResults:Qu,fetcherResults:$l}=await Wt(E.matches,sr,Gi,Ia,bn);if(Qe.signal.aborted)return;Qe.signal.removeEventListener("abort",Eo),Z.delete(le),H.delete(le),Ia.forEach(fn=>H.delete(fn.key));let rs=jM(Xu);if(rs){if(rs.idx>=Gi.length){let fn=Ia[rs.idx-Gi.length].key;te.add(fn)}return $t(E,rs.result)}let{loaderData:No,errors:rn}=LM(E,E.matches,Gi,Qu,void 0,Ia,$l,de);if(E.fetchers.has(le)){let fn=uu(ft.data);E.fetchers.set(le,fn)}Qa(vr),E.navigation.state==="loading"&&vr>Q?(Et(R,"Expected pending action"),$&&$.abort(),Te(E.navigation.location,{matches:sr,loaderData:No,errors:rn,fetchers:new Map(E.fetchers)})):(Se({errors:rn,loaderData:zM(E.loaderData,No,sr,rn),fetchers:new Map(E.fetchers)}),q=!1)}async function Vt(le,fe,xe,_e,ze,it,nt){let at=E.fetchers.get(le);Ot(le,Hf(nt,at?at.data:void 0),{flushSync:it});let Qe=new AbortController,bt=Wf(t.history,xe,Qe.signal);H.set(le,Qe);let cn=L,ft=await Vf("loader",bt,_e,ze,i,a,l,u.v7_relativeSplatPath);if(kc(ft)&&(ft=await WM(ft,bt.signal,!0)||ft),H.get(le)===Qe&&H.delete(le),!bt.signal.aborted){if(ae.has(le)){Ot(le,uu(void 0));return}if(Sc(ft))if(Q>cn){Ot(le,uu(void 0));return}else{te.add(le),await $t(E,ft);return}if(fp(ft)){wt(le,fe,ft.error);return}Et(!kc(ft),"Unhandled fetcher deferred data"),Ot(le,uu(ft.data))}}async function $t(le,fe,xe){let{submission:_e,fetcherSubmission:ze,replace:it}=xe===void 0?{}:xe;fe.revalidate&&(q=!0);let nt=jf(le.location,fe.location,{_isRedirect:!0});if(Et(nt,"Expected a location on the redirect navigation"),n){let Zt=!1;if(fe.reloadDocument)Zt=!0;else if(RM.test(fe.location)){const bn=t.history.createURL(fe.location);Zt=bn.origin!==e.location.origin||bs(bn.pathname,l)==null}if(Zt){it?e.location.replace(fe.location):e.location.assign(fe.location);return}}$=null;let at=it===!0?kr.Replace:kr.Push,{formMethod:Qe,formAction:bt,formEncType:cn}=le.navigation;!_e&&!ze&&Qe&&bt&&cn&&(_e=GM(le.navigation));let ft=_e||ze;if(Iq.has(fe.status)&&ft&&jo(ft.formMethod))await $e(at,nt,{submission:dr({},ft,{formAction:fe.location}),preventScrollReset:T});else{let Zt=$3(nt,_e);await $e(at,nt,{overrideNavigation:Zt,fetcherSubmission:ze,preventScrollReset:T})}}async function Wt(le,fe,xe,_e,ze){let it=await Promise.all([...xe.map(Qe=>Vf("loader",ze,Qe,fe,i,a,l,u.v7_relativeSplatPath)),..._e.map(Qe=>Qe.matches&&Qe.match&&Qe.controller?Vf("loader",Wf(t.history,Qe.path,Qe.controller.signal),Qe.match,Qe.matches,i,a,l,u.v7_relativeSplatPath):{type:pr.error,error:oo(404,{pathname:Qe.path})})]),nt=it.slice(0,xe.length),at=it.slice(xe.length);return await Promise.all([VM(le,xe,nt,nt.map(()=>ze.signal),!1,E.loaderData),VM(le,_e.map(Qe=>Qe.match),at,_e.map(Qe=>Qe.controller?Qe.controller.signal:null),!0)]),{results:it,loaderResults:nt,fetcherResults:at}}function Gt(){q=!0,Y.push(...Co()),oe.forEach((le,fe)=>{H.has(fe)&&(J.push(fe),yn(fe))})}function Ot(le,fe,xe){xe===void 0&&(xe={}),E.fetchers.set(le,fe),Se({fetchers:new Map(E.fetchers)},{flushSync:(xe&&xe.flushSync)===!0})}function wt(le,fe,xe,_e){_e===void 0&&(_e={});let ze=Gf(E.matches,fe);hn(le),Se({errors:{[ze.route.id]:xe},fetchers:new Map(E.fetchers)},{flushSync:(_e&&_e.flushSync)===!0})}function ln(le){return u.v7_fetcherPersist&&(he.set(le,(he.get(le)||0)+1),ae.has(le)&&ae.delete(le)),E.fetchers.get(le)||_q}function hn(le){let fe=E.fetchers.get(le);H.has(le)&&!(fe&&fe.state==="loading"&&Z.has(le))&&yn(le),oe.delete(le),Z.delete(le),te.delete(le),ae.delete(le),E.fetchers.delete(le)}function br(le){if(u.v7_fetcherPersist){let fe=(he.get(le)||0)-1;fe<=0?(he.delete(le),ae.add(le)):he.set(le,fe)}else hn(le);Se({fetchers:new Map(E.fetchers)})}function yn(le){let fe=H.get(le);Et(fe,"Expected fetch controller: "+le),fe.abort(),H.delete(le)}function Jn(le){for(let fe of le){let xe=ln(fe),_e=uu(xe.data);E.fetchers.set(fe,_e)}}function ui(){let le=[],fe=!1;for(let xe of te){let _e=E.fetchers.get(xe);Et(_e,"Expected fetcher: "+xe),_e.state==="loading"&&(te.delete(xe),le.push(xe),fe=!0)}return Jn(le),fe}function Qa(le){let fe=[];for(let[xe,_e]of Z)if(_e<le){let ze=E.fetchers.get(xe);Et(ze,"Expected fetcher: "+xe),ze.state==="loading"&&(yn(xe),Z.delete(xe),fe.push(xe))}return Jn(fe),fe.length>0}function un(le,fe){let xe=E.blockers.get(le)||Uf;return ke.get(le)!==fe&&ke.set(le,fe),xe}function la(le){E.blockers.delete(le),ke.delete(le)}function Ya(le,fe){let xe=E.blockers.get(le)||Uf;Et(xe.state==="unblocked"&&fe.state==="blocked"||xe.state==="blocked"&&fe.state==="blocked"||xe.state==="blocked"&&fe.state==="proceeding"||xe.state==="blocked"&&fe.state==="unblocked"||xe.state==="proceeding"&&fe.state==="unblocked","Invalid blocker state transition: "+xe.state+" -> "+fe.state);let _e=new Map(E.blockers);_e.set(le,fe),Se({blockers:_e})}function Ta(le){let{currentLocation:fe,nextLocation:xe,historyAction:_e}=le;if(ke.size===0)return;ke.size>1&&pp(!1,"A router only supports one blocker at a time");let ze=Array.from(ke.entries()),[it,nt]=ze[ze.length-1],at=E.blockers.get(it);if(!(at&&at.state==="proceeding")&&nt({currentLocation:fe,nextLocation:xe,historyAction:_e}))return it}function Co(le){let fe=[];return de.forEach((xe,_e)=>{(!le||le(_e))&&(xe.cancel(),fe.push(_e),de.delete(_e))}),fe}function Kr(le,fe,xe){if(p=le,g=fe,f=xe||null,!y&&E.navigation===N3){y=!0;let _e=Vn(E.location,E.matches);_e!=null&&Se({restoreScrollPosition:_e})}return()=>{p=null,g=null,f=null}}function ts(le,fe){return f&&f(le,fe.map(xe=>SM(xe,E.loaderData)))||le.key}function or(le,fe){if(p&&g){let xe=ts(le,fe);p[xe]=g()}}function Vn(le,fe){if(p){let xe=ts(le,fe),_e=p[xe];if(typeof _e=="number")return _e}return null}function dt(le){i={},s=w3(le,a,void 0,i)}return C={get basename(){return l},get future(){return u},get state(){return E},get routes(){return o},get window(){return e},initialize:se,subscribe:Ne,enableScrollRestoration:Kr,navigate:Pe,fetch:Ze,revalidate:We,createHref:le=>t.history.createHref(le),encodeLocation:le=>t.history.encodeLocation(le),getFetcher:ln,deleteFetcher:br,dispose:pe,getBlocker:un,deleteBlocker:la,_internalFetchControllers:H,_internalActiveDeferreds:de,_internalSetRoutes:dt},C}function Oq(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function T3(t,e,n,r,a,i,o,s){let l,u;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){u=d;break}}else l=e,u=e[e.length-1];let c=C3(a||".",S3(l,i),bs(t.pathname,n)||t.pathname,s==="path");return a==null&&(c.search=t.search,c.hash=t.hash),(a==null||a===""||a===".")&&u&&u.route.index&&!_3(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:rl([n,c.pathname])),wc(c)}function OM(t,e,n,r){if(!r||!Oq(r))return{path:n};if(r.formMethod&&!zq(r.formMethod))return{path:n,error:oo(405,{method:r.formMethod})};let a=()=>({path:n,error:oo(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),s=UM(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!jo(o))return a();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,g)=>{let[y,v]=g;return""+f+y+"="+v+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:s,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!jo(o))return a();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:s,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return a()}}}Et(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=I3(r.formData),u=r.formData;else if(r.body instanceof FormData)l=I3(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=DM(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=DM(l)}catch{return a()}let c={formMethod:o,formAction:s,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(jo(c.formMethod))return{path:n,submission:c};let d=nl(n);return e&&d.search&&_3(d.search)&&l.append("index",""),d.search="?"+l,{path:wc(d),submission:c}}function Mq(t,e){let n=t;if(e){let r=t.findIndex(a=>a.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function MM(t,e,n,r,a,i,o,s,l,u,c,d,p,f,g,y){let v=y?Object.values(y)[0]:g?Object.values(g)[0]:void 0,b=t.createURL(e.location),x=t.createURL(a),w=y?Object.keys(y)[0]:void 0,S=Mq(n,w).filter((E,R)=>{let{route:T}=E;if(T.lazy)return!0;if(T.loader==null)return!1;if(i)return T.loader.hydrate?!0:e.loaderData[T.id]===void 0&&(!e.errors||e.errors[T.id]===void 0);if(Pq(e.loaderData,e.matches[R],E)||s.some(D=>D===E.route.id))return!0;let $=e.matches[R],P=E;return FM(E,dr({currentUrl:b,currentParams:$.params,nextUrl:x,nextParams:P.params},r,{actionResult:v,defaultShouldRevalidate:o||b.pathname+b.search===x.pathname+x.search||b.search!==x.search||PM($,P)}))}),C=[];return c.forEach((E,R)=>{if(i||!n.some(B=>B.route.id===E.routeId)||u.has(R))return;let T=hp(p,E.path,f);if(!T){C.push({key:R,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let $=e.fetchers.get(R),P=R3(T,E.path),D=!1;d.has(R)?D=!1:l.includes(R)?D=!0:$&&$.state!=="idle"&&$.data===void 0?D=o:D=FM(P,dr({currentUrl:b,currentParams:e.matches[e.matches.length-1].params,nextUrl:x,nextParams:n[n.length-1].params},r,{actionResult:v,defaultShouldRevalidate:o})),D&&C.push({key:R,routeId:E.routeId,path:E.path,matches:T,match:P,controller:new AbortController})}),[S,C]}function Pq(t,e,n){let r=!e||n.route.id!==e.route.id,a=t[n.route.id]===void 0;return r||a}function PM(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function FM(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function AM(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let a=n[t.id];Et(a,"No route found in manifest");let i={};for(let o in r){let s=a[o]!==void 0&&o!=="hasErrorBoundary";pp(!s,'Route "'+a.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!s&&!iq.has(o)&&(i[o]=r[o])}Object.assign(a,i),Object.assign(a,dr({},e(a),{lazy:void 0}))}async function Vf(t,e,n,r,a,i,o,s,l){l===void 0&&(l={});let u,c,d,p=y=>{let v,b=new Promise((x,w)=>v=w);return d=()=>v(),e.signal.addEventListener("abort",d),Promise.race([y({request:e,params:n.params,context:l.requestContext}),b])};try{let y=n.route[t];if(n.route.lazy)if(y){let v,b=await Promise.all([p(y).catch(x=>{v=x}),AM(n.route,i,a)]);if(v)throw v;c=b[0]}else if(await AM(n.route,i,a),y=n.route[t],y)c=await p(y);else if(t==="action"){let v=new URL(e.url),b=v.pathname+v.search;throw oo(405,{method:e.method,pathname:b,routeId:n.route.id})}else return{type:pr.data,data:void 0};else if(y)c=await p(y);else{let v=new URL(e.url),b=v.pathname+v.search;throw oo(404,{pathname:b})}Et(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(y){u=pr.error,c=y}finally{d&&e.signal.removeEventListener("abort",d)}if(Lq(c)){let y=c.status;if(Tq.has(y)){let b=c.headers.get("Location");if(Et(b,"Redirects returned/thrown from loaders/actions must have a Location header"),!RM.test(b))b=T3(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,b,s);else if(!l.isStaticRequest){let x=new URL(e.url),w=b.startsWith("//")?new URL(x.protocol+b):new URL(b),S=bs(w.pathname,o)!=null;w.origin===x.origin&&S&&(b=w.pathname+w.search+w.hash)}if(l.isStaticRequest)throw c.headers.set("Location",b),c;return{type:pr.redirect,status:y,location:b,revalidate:c.headers.get("X-Remix-Revalidate")!==null,reloadDocument:c.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:u===pr.error?pr.error:pr.data,response:c};let v;try{let b=c.headers.get("Content-Type");b&&/\bapplication\/json\b/.test(b)?c.body==null?v=null:v=await c.json():v=await c.text()}catch(b){return{type:pr.error,error:b}}return u===pr.error?{type:u,error:new E3(y,c.statusText,v),headers:c.headers}:{type:pr.data,data:v,statusCode:c.status,headers:c.headers}}if(u===pr.error)return{type:u,error:c};if(Dq(c)){var f,g;return{type:pr.deferred,deferredData:c,statusCode:(f=c.init)==null?void 0:f.status,headers:((g=c.init)==null?void 0:g.headers)&&new Headers(c.init.headers)}}return{type:pr.data,data:c}}function Wf(t,e,n,r){let a=t.createURL(UM(e)).toString(),i={signal:n};if(r&&jo(r.formMethod)){let{formMethod:o,formEncType:s}=r;i.method=o.toUpperCase(),s==="application/json"?(i.headers=new Headers({"Content-Type":s}),i.body=JSON.stringify(r.json)):s==="text/plain"?i.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?i.body=I3(r.formData):i.body=r.formData}return new Request(a,i)}function I3(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function DM(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function Fq(t,e,n,r,a){let i={},o=null,s,l=!1,u={};return n.forEach((c,d)=>{let p=e[d].route.id;if(Et(!Sc(c),"Cannot handle redirect results in processLoaderData"),fp(c)){let f=Gf(t,p),g=c.error;r&&(g=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=g),i[p]=void 0,l||(l=!0,s=IM(c.error)?c.error.status:500),c.headers&&(u[p]=c.headers)}else kc(c)?(a.set(p,c.deferredData),i[p]=c.deferredData.data):i[p]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(s=c.statusCode),c.headers&&(u[p]=c.headers)}),r&&(o=r,i[Object.keys(r)[0]]=void 0),{loaderData:i,errors:o,statusCode:s||200,loaderHeaders:u}}function LM(t,e,n,r,a,i,o,s){let{loaderData:l,errors:u}=Fq(e,n,r,a,s);for(let c=0;c<i.length;c++){let{key:d,match:p,controller:f}=i[c];Et(o!==void 0&&o[c]!==void 0,"Did not find corresponding fetcher result");let g=o[c];if(!(f&&f.signal.aborted))if(fp(g)){let y=Gf(t.matches,p?.route.id);u&&u[y.route.id]||(u=dr({},u,{[y.route.id]:g.error})),t.fetchers.delete(d)}else if(Sc(g))Et(!1,"Unhandled fetcher revalidation redirect");else if(kc(g))Et(!1,"Unhandled fetcher deferred data");else{let y=uu(g.data);t.fetchers.set(d,y)}}return{loaderData:l,errors:u}}function zM(t,e,n,r){let a=dr({},e);for(let i of n){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(a[o]=e[o]):t[o]!==void 0&&i.route.loader&&(a[o]=t[o]),r&&r.hasOwnProperty(o))break}return a}function Gf(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function BM(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function oo(t,e){let{pathname:n,routeId:r,method:a,type:i}=e===void 0?{}:e,o="Unknown Server Error",s="Unknown @remix-run/router error";return t===400?(o="Bad Request",a&&n&&r?s="You made a "+a+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?s="defer() is not supported in actions":i==="invalid-body"&&(s="Unable to encode submission body")):t===403?(o="Forbidden",s='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",s='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",a&&n&&r?s="You made a "+a.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":a&&(s='Invalid request method "'+a.toUpperCase()+'"')),new E3(t||500,o,new Error(s),!0)}function jM(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Sc(n))return{result:n,idx:e}}}function UM(t){let e=typeof t=="string"?nl(t):t;return wc(dr({},e,{hash:""}))}function Aq(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function kc(t){return t.type===pr.deferred}function fp(t){return t.type===pr.error}function Sc(t){return(t&&t.type)===pr.redirect}function Dq(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Lq(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function zq(t){return Nq.has(t.toLowerCase())}function jo(t){return Cq.has(t.toLowerCase())}async function VM(t,e,n,r,a,i){for(let o=0;o<n.length;o++){let s=n[o],l=e[o];if(!l)continue;let u=t.find(d=>d.route.id===l.route.id),c=u!=null&&!PM(u,l)&&(i&&i[l.route.id])!==void 0;if(kc(s)&&(a||c)){let d=r[o];Et(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await WM(s,d,a).then(p=>{p&&(n[o]=p||n[o])})}}}async function WM(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:pr.data,data:t.deferredData.unwrappedData}}catch(r){return{type:pr.error,error:r}}return{type:pr.data,data:t.deferredData.data}}}function _3(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function R3(t,e){let n=typeof e=="string"?nl(e).search:e.search;if(t[t.length-1].route.index&&_3(n||""))return t[t.length-1];let r=TM(t);return r[r.length-1]}function GM(t){let{formMethod:e,formAction:n,formEncType:r,text:a,formData:i,json:o}=t;if(!(!e||!n||!r)){if(a!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:a};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function $3(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Bq(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Hf(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function jq(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function uu(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Uq(t,e){try{let n=t.sessionStorage.getItem($M);if(n){let r=JSON.parse(n);for(let[a,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(a,new Set(i||[]))}}catch{}}function Vq(t,e){if(e.size>0){let n={};for(let[r,a]of e)n[r]=[...a];try{t.sessionStorage.setItem($M,JSON.stringify(n))}catch(r){pp(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
* React Router v6.22.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function qf(){return qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qf.apply(this,arguments)}const Kf=_.createContext(null),zy=_.createContext(null),al=_.createContext(null),By=_.createContext(null),cu=_.createContext({outlet:null,matches:[],isDataRoute:!1}),HM=_.createContext(null);function Wq(t,e){let{relative:n}=e===void 0?{}:e;mp()||Et(!1);let{basename:r,navigator:a}=_.useContext(al),{hash:i,pathname:o,search:s}=so(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:rl([r,o])),a.createHref({pathname:l,search:s,hash:i})}function mp(){return _.useContext(By)!=null}function Cc(){return mp()||Et(!1),_.useContext(By).location}function du(t){mp()||Et(!1);let{pathname:e}=Cc();return _.useMemo(()=>Ly(t,e),[e,t])}function qM(t){_.useContext(al).static||_.useLayoutEffect(t)}function KM(){let{isDataRoute:t}=_.useContext(cu);return t?iK():Gq()}function Gq(){mp()||Et(!1);let t=_.useContext(Kf),{basename:e,future:n,navigator:r}=_.useContext(al),{matches:a}=_.useContext(cu),{pathname:i}=Cc(),o=JSON.stringify(S3(a,n.v7_relativeSplatPath)),s=_.useRef(!1);return qM(()=>{s.current=!0}),_.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let c=C3(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:rl([e,c.pathname])),(u.replace?r.replace:r.push)(c,u.state,u)},[e,r,o,i,t])}const Hq=_.createContext(null);function qq(t){let e=_.useContext(cu).outlet;return e&&_.createElement(Hq.Provider,{value:t},e)}function so(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(al),{matches:a}=_.useContext(cu),{pathname:i}=Cc(),o=JSON.stringify(S3(a,r.v7_relativeSplatPath));return _.useMemo(()=>C3(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Kq(t,e,n,r){mp()||Et(!1);let{navigator:a}=_.useContext(al),{matches:i}=_.useContext(cu),o=i[i.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Cc(),c;if(e){var d;let v=typeof e=="string"?nl(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||Et(!1),c=v}else c=u;let p=c.pathname||"/",f=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=hp(t,{pathname:f}),y=Zq(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:rl([l,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:rl([l,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&y?_.createElement(By.Provider,{value:{location:qf({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:kr.Pop}},y):y}function Xq(){let t=aK(),e=IM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:r},n):null,null)}const Qq=_.createElement(Xq,null);class Yq extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(cu.Provider,{value:this.props.routeContext},_.createElement(HM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jq(t){let{routeContext:e,match:n,children:r}=t,a=_.useContext(Kf);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(cu.Provider,{value:e},r)}function Zq(t,e,n,r){var a;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,s=(a=n)==null?void 0:a.errors;if(s!=null){let c=o.findIndex(d=>d.route.id&&s?.[d.route.id]);c>=0||Et(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:p,errors:f}=n,g=d.route.loader&&p[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,p)=>{let f,g=!1,y=null,v=null;n&&(f=s&&d.route.id?s[d.route.id]:void 0,y=d.route.errorElement||Qq,l&&(u<0&&p===0?(oK("route-fallback",!1),g=!0,v=null):u===p&&(g=!0,v=d.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),x=()=>{let w;return f?w=y:g?w=v:d.route.Component?w=_.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,_.createElement(Jq,{match:d,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?_.createElement(Yq,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var XM=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(XM||{}),gp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gp||{});function eK(t){let e=_.useContext(Kf);return e||Et(!1),e}function O3(t){let e=_.useContext(zy);return e||Et(!1),e}function tK(t){let e=_.useContext(cu);return e||Et(!1),e}function QM(t){let e=tK(),n=e.matches[e.matches.length-1];return n.route.id||Et(!1),n.route.id}function nK(){return O3(gp.UseNavigation).navigation}function rK(){let{matches:t,loaderData:e}=O3(gp.UseMatches);return _.useMemo(()=>t.map(n=>SM(n,e)),[t,e])}function aK(){var t;let e=_.useContext(HM),n=O3(gp.UseRouteError),r=QM(gp.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function iK(){let{router:t}=eK(XM.UseNavigateStable),e=QM(gp.UseNavigateStable),n=_.useRef(!1);return qM(()=>{n.current=!0}),_.useCallback(function(r,a){a===void 0&&(a={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,qf({fromRouteId:e},a)))},[t,e])}const YM={};function oK(t,e,n){!e&&!YM[t]&&(YM[t]=!0)}function sK(t){return qq(t.context)}function pu(t){Et(!1)}function lK(t){let{basename:e="/",children:n=null,location:r,navigationType:a=kr.Pop,navigator:i,static:o=!1,future:s}=t;mp()&&Et(!1);let l=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:l,navigator:i,static:o,future:qf({v7_relativeSplatPath:!1},s)}),[l,s,i,o]);typeof r=="string"&&(r=nl(r));let{pathname:c="/",search:d="",hash:p="",state:f=null,key:g="default"}=r,y=_.useMemo(()=>{let v=bs(c,l);return v==null?null:{location:{pathname:v,search:d,hash:p,state:f,key:g},navigationType:a}},[l,c,d,p,f,g,a]);return y==null?null:_.createElement(al.Provider,{value:u},_.createElement(By.Provider,{children:n,value:y}))}new Promise(()=>{});function M3(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,a)=>{if(!_.isValidElement(r))return;let i=[...e,a];if(r.type===_.Fragment){n.push.apply(n,M3(r.props.children,i));return}r.type!==pu&&Et(!1),!r.props.index||!r.props.children||Et(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=M3(r.props.children,i)),n.push(o)}),n}function uK(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:_.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:_.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:_.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
* React Router DOM v6.22.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Ec(){return Ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ec.apply(this,arguments)}function JM(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function cK(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dK(t,e){return t.button===0&&(!e||e==="_self")&&!cK(t)}const pK=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],hK=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],fK="6";try{window.__reactRouterVersion=fK}catch{}function mK(t,e){return $q({basename:e?.basename,future:Ec({},e?.future,{v7_prependBasename:!0}),history:nq({window:e?.window}),hydrationData:e?.hydrationData||gK(),routes:t,mapRouteProperties:uK,window:e?.window}).initialize()}function gK(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Ec({},e,{errors:yK(e.errors)})),e}function yK(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,a]of e)if(a&&a.__type==="RouteErrorResponse")n[r]=new E3(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let i=window[a.__subType];if(typeof i=="function")try{let o=new i(a.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let i=new Error(a.message);i.stack="",n[r]=i}}else n[r]=a;return n}const ZM=_.createContext({isTransitioning:!1}),bK=_.createContext(new Map),vK="startTransition",e8=zR[vK],xK="flushSync",t8=_H[xK];function wK(t){e8?e8(t):t()}function Xf(t){t8?t8(t):t()}class kK{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function SK(t){let{fallbackElement:e,router:n,future:r}=t,[a,i]=_.useState(n.state),[o,s]=_.useState(),[l,u]=_.useState({isTransitioning:!1}),[c,d]=_.useState(),[p,f]=_.useState(),[g,y]=_.useState(),v=_.useRef(new Map),{v7_startTransition:b}=r||{},x=_.useCallback(R=>{b?wK(R):R()},[b]),w=_.useCallback((R,T)=>{let{deletedFetchers:$,unstable_flushSync:P,unstable_viewTransitionOpts:D}=T;$.forEach(z=>v.current.delete(z)),R.fetchers.forEach((z,q)=>{z.data!==void 0&&v.current.set(q,z.data)});let B=n.window==null||typeof n.window.document.startViewTransition!="function";if(!D||B){P?Xf(()=>i(R)):x(()=>i(R));return}if(P){Xf(()=>{p&&(c&&c.resolve(),p.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let z=n.window.document.startViewTransition(()=>{Xf(()=>i(R))});z.finished.finally(()=>{Xf(()=>{d(void 0),f(void 0),s(void 0),u({isTransitioning:!1})})}),Xf(()=>f(z));return}p?(c&&c.resolve(),p.skipTransition(),y({state:R,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(s(R),u({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[n.window,p,c,v,x]);_.useLayoutEffect(()=>n.subscribe(w),[n,w]),_.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new kK)},[l]),_.useEffect(()=>{if(c&&o&&n.window){let R=o,T=c.promise,$=n.window.document.startViewTransition(async()=>{x(()=>i(R)),await T});$.finished.finally(()=>{d(void 0),f(void 0),s(void 0),u({isTransitioning:!1})}),f($)}},[x,o,c,n.window]),_.useEffect(()=>{c&&o&&a.location.key===o.location.key&&c.resolve()},[c,p,a.location,o]),_.useEffect(()=>{!l.isTransitioning&&g&&(s(g.state),u({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),y(void 0))},[l.isTransitioning,g]),_.useEffect(()=>{},[]);let S=_.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:R=>n.navigate(R),push:(R,T,$)=>n.navigate(R,{state:T,preventScrollReset:$?.preventScrollReset}),replace:(R,T,$)=>n.navigate(R,{replace:!0,state:T,preventScrollReset:$?.preventScrollReset})}),[n]),C=n.basename||"/",E=_.useMemo(()=>({router:n,navigator:S,static:!1,basename:C}),[n,S,C]);return _.createElement(_.Fragment,null,_.createElement(Kf.Provider,{value:E},_.createElement(zy.Provider,{value:a},_.createElement(bK.Provider,{value:v.current},_.createElement(ZM.Provider,{value:l},_.createElement(lK,{basename:C,location:a.location,navigationType:a.historyAction,navigator:S,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},a.initialized||n.future.v7_partialHydration?_.createElement(CK,{routes:n.routes,future:n.future,state:a}):e))))),null)}function CK(t){let{routes:e,future:n,state:r}=t;return Kq(e,void 0,r,n)}const EK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,P3=_.forwardRef(function(t,e){let{onClick:n,relative:r,reloadDocument:a,replace:i,state:o,target:s,to:l,preventScrollReset:u,unstable_viewTransition:c}=t,d=JM(t,pK),{basename:p}=_.useContext(al),f,g=!1;if(typeof l=="string"&&NK.test(l)&&(f=l,EK))try{let x=new URL(window.location.href),w=l.startsWith("//")?new URL(x.protocol+l):new URL(l),S=bs(w.pathname,p);w.origin===x.origin&&S!=null?l=S+w.search+w.hash:g=!0}catch{}let y=Wq(l,{relative:r}),v=_K(l,{replace:i,state:o,target:s,preventScrollReset:u,relative:r,unstable_viewTransition:c});function b(x){n&&n(x),x.defaultPrevented||v(x)}return _.createElement("a",Ec({},d,{href:f||y,onClick:g||a?n:b,ref:e,target:s}))}),yp=_.forwardRef(function(t,e){let{"aria-current":n="page",caseSensitive:r=!1,className:a="",end:i=!1,style:o,to:s,unstable_viewTransition:l,children:u}=t,c=JM(t,hK),d=so(s,{relative:c.relative}),p=Cc(),f=_.useContext(zy),{navigator:g,basename:y}=_.useContext(al),v=f!=null&&OK(d)&&l===!0,b=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,x=p.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(x=x.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&y&&(w=bs(w,y)||w);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let C=x===b||!i&&x.startsWith(b)&&x.charAt(S)==="/",E=w!=null&&(w===b||!i&&w.startsWith(b)&&w.charAt(b.length)==="/"),R={isActive:C,isPending:E,isTransitioning:v},T=C?n:void 0,$;typeof a=="function"?$=a(R):$=[a,C?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(R):o;return _.createElement(P3,Ec({},c,{"aria-current":T,className:$,ref:e,style:P,to:s,unstable_viewTransition:l}),typeof u=="function"?u(R):u)});function TK(t){let{getKey:e,storageKey:n}=t;return RK({getKey:e,storageKey:n}),null}var jy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jy||(jy={}));var F3;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(F3||(F3={}));function n8(t){let e=_.useContext(Kf);return e||Et(!1),e}function IK(t){let e=_.useContext(zy);return e||Et(!1),e}function _K(t,e){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:s}=e===void 0?{}:e,l=KM(),u=Cc(),c=so(t,{relative:o});return _.useCallback(d=>{if(dK(d,n)){d.preventDefault();let p=r!==void 0?r:wc(u)===wc(c);l(t,{replace:p,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:s})}},[u,l,c,r,a,n,t,i,o,s])}const r8="react-router-scroll-positions";let Uy={};function RK(t){let{getKey:e,storageKey:n}=t===void 0?{}:t,{router:r}=n8(jy.UseScrollRestoration),{restoreScrollPosition:a,preventScrollReset:i}=IK(F3.UseScrollRestoration),{basename:o}=_.useContext(al),s=Cc(),l=rK(),u=nK();_.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),$K(_.useCallback(()=>{if(u.state==="idle"){let c=(e?e(s,l):null)||s.key;Uy[c]=window.scrollY}try{sessionStorage.setItem(n||r8,JSON.stringify(Uy))}catch{}window.history.scrollRestoration="auto"},[n,e,u.state,s,l])),typeof document<"u"&&(_.useLayoutEffect(()=>{try{let c=sessionStorage.getItem(n||r8);c&&(Uy=JSON.parse(c))}catch{}},[n]),_.useLayoutEffect(()=>{let c=e&&o!=="/"?(p,f)=>e(Ec({},p,{pathname:bs(p.pathname,o)||p.pathname}),f):e,d=r?.enableScrollRestoration(Uy,()=>window.scrollY,c);return()=>d&&d()},[r,o,e]),_.useLayoutEffect(()=>{if(a!==!1){if(typeof a=="number"){window.scrollTo(0,a);return}if(s.hash){let c=document.getElementById(decodeURIComponent(s.hash.slice(1)));if(c){c.scrollIntoView();return}}i!==!0&&window.scrollTo(0,0)}},[s,a,i]))}function $K(t,e){let{capture:n}=e||{};_.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("pagehide",t,r),()=>{window.removeEventListener("pagehide",t,r)}},[t,n])}function OK(t,e){e===void 0&&(e={});let n=_.useContext(ZM);n==null&&Et(!1);let{basename:r}=n8(jy.useViewTransitionState),a=so(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=bs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=bs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ly(a.pathname,o)!=null||Ly(a.pathname,i)!=null}const Qf=V.createContext({theme:"material",dark:!0,touchRipple:!0});function MK(t,e){return typeof window>"u"?_.useEffect(t,e):_.useLayoutEffect(t,e)}const a8=function(t,e){e===void 0&&(e=!0);const[n,r]=_.useState(t);return MK(()=>{if(e){if(t==="ios"||t==="material")n!==t&&r(t);else if(n==="parent"&&typeof window<"u"&&typeof document<"u"){const a=document.documentElement;a&&(a.classList.contains("ios")?r("ios"):(a.classList.contains("md")||a.classList.contains("material"))&&r("material"))}}},[t]),e?n:t},PK=t=>{const{theme:e,dark:n,touchRipple:r=!0,autoThemeDetection:a=!0,children:i}=t,o=a8(e,a);return V.createElement(Qf.Provider,{value:{theme:o,dark:n,touchRipple:r}},i)};function F(){const t=[];for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>{typeof i=="object"&&i.constructor===Object?Object.keys(i).forEach(o=>{i[o]&&t.push(o)}):Array.isArray(i)?t.push(...i):typeof i=="function"?t.push(i()):i&&i.value?t.push(i.value):i&&t.push(i)});const a=[];return t.forEach(i=>{a.indexOf(i)<0&&a.push(i)}),a.filter(i=>!!i).join(" ")}const ar=function(t,e){return e===void 0&&(e=""),!e||typeof e!="string"?t:["static","relative","absolute","fixed","sticky"].filter(n=>e.indexOf(n)>=0).length>0?"":t},FK=(t,e,n)=>{const{safeAreas:r}=t;return F(e==="ios"&&"k-ios",e==="material"&&"k-material","k-app w-full h-full min-h-screen",r&&"safe-areas",ar("relative",n),n)};function A3(){return A3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A3.apply(this,arguments)}const i8=_.forwardRef((t,e)=>{const{component:n="div",className:r,theme:a="material",dark:i=!0,touchRipple:o=!0,safeAreas:s=!0,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=a8(a),g=FK({...t,safeAreas:s},f,r);return V.createElement(PK,{theme:f,dark:i,touchRipple:o,autoThemeDetection:!1},V.createElement(d,A3({ref:c,className:g},p),l))});i8.displayName="App";const D3=(t,e,n)=>{if(typeof t=="string")return t;const r=[t.common,t[e]];return n&&t[n]&&(typeof t[n]=="string"?r.push(t[n]):r.push(t[n].common,t[n][e])),r},AK=(t,e,n)=>{const r={},a=["common","ios","material"];return Object.keys(t).forEach(i=>{const o=i==="base"?n:"";if(!(typeof t[i]!="string"&&Object.keys(t[i]).filter(l=>!a.includes(l)).length>0)){r[i]=F(D3(t[i],e),o);return}r[i]={};const s=D3(t[i],e);r[i].default=F(s,o),Object.keys(t[i]).filter(l=>!a.includes(l)).forEach(l=>{r[i][l]=F(s,D3(t[i],e,l),o)})}),r},ut=function(t){let{ios:e,material:n}=t===void 0?{}:t,r=_.useContext(Qf).theme||"ios";return e&&(r="ios"),n&&(r="material"),(a,i)=>AK(a,r,i)},DK=(t,e)=>({base:{common:F("transition-transform z-40 left-1/2 bottom-0 transform -translate-x-1/2 max-w-md w-full overflow-hidden",ar("fixed",e)),ios:"pt-2 px-2 pb-2-safe duration-300",material:"pb-safe last-child-hairline-b-none rounded-t-2xl duration-400 ease-material-in",opened:"",closed:"translate-y-full"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}});function L3(){return L3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L3.apply(this,arguments)}const LK=_.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,opened:o,backdrop:s=!0,onBackdropClick:l,children:u,...c}=t,d=_.useRef(null);_.useImperativeHandle(e,()=>({el:d.current}));const p=o?"opened":"closed",f=n,g={...c},y=ut({ios:a,material:i})(DK(t,r),r);return V.createElement(V.Fragment,null,s&&V.createElement("div",{className:y.backdrop[p],onClick:l}),V.createElement(f,L3({ref:d,className:y.base[p]},g),u))});LK.displayName="Actions";const zK=t=>{const{dividers:e}=t;return{base:{common:"relative",ios:"mt-2 first:mt-0 last-child-hairline-b-none",material:F(e&&"hairline-b")}}};function z3(){return z3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z3.apply(this,arguments)}const BK=_.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,dividers:o=!0,children:s,...l}=t,u=_.useRef(null);_.useImperativeHandle(e,()=>({el:u.current}));const c=n,d={...l},p=ut({ios:a,material:i})(zK({dividers:o,...t}),r);return V.createElement(c,z3({ref:u,className:p.base},d),s)});BK.displayName="ActionsGroup";const wn=function(t){let{ios:e,material:n}=t===void 0?{}:t,r=_.useContext(Qf).theme||"ios";return e&&(r="ios"),n&&(r="material"),r};class jK{constructor(e,n,r){const a=this;if(!e)return;a.el=e;const{left:i,top:o,width:s,height:l}=e.getBoundingClientRect(),u={x:n-i,y:r-o};let c=Math.max((l**2+s**2)**.5,48);const d=e.classList.contains("k-touch-ripple-inset");d&&(c=Math.max(Math.min(s,l),48));const p=typeof window<"u"&&window.getComputedStyle(e,null).getPropertyValue("overflow")==="hidden";if(!d&&p){const g=((u.x-s/2)**2+(u.y-l/2)**2)**.5,y=(c/2+g)/(c/2);a.rippleTransform=`translate3d(0px, 0px, 0) scale(${y})`}else a.rippleTransform=`translate3d(${-u.x+s/2}px, ${-u.y+l/2}px, 0) scale(1)`;a.rippleWaveEl=document.createElement("span"),a.rippleWaveEl.classList.add("k-touch-ripple-wave"),a.rippleWaveEl.setAttribute("hidden",""),a.rippleWaveEl.style=`
      width: ${c}px;
      height: ${c}px;
      margin-top:-${c/2}px;
      margin-left:-${c/2}px;
      left:${u.x}px;
      top:${u.y}px; --k-ripple-transform: ${a.rippleTransform}`,e.insertAdjacentElement("afterbegin",a.rippleWaveEl);const f=()=>{a.rippleWaveEl.removeEventListener("animationend",f),a.rippleWaveEl&&(a.rippleWaveEl.classList.contains("k-touch-ripple-wave-out")||(a.rippleWaveEl.classList.add("k-touch-ripple-wave-in"),a.shouldBeRemoved&&a.out()))};return a.rippleWaveEl.addEventListener("animationend",f),a}destroy(){let e=this;e.rippleWaveEl&&e.el.removeChild(e.rippleWaveEl),Object.keys(e).forEach(n=>{e[n]=null,delete e[n]}),e=null}out(){const e=this,{rippleWaveEl:n}=this;clearTimeout(e.removeTimeout),n.classList.add("k-touch-ripple-wave-out"),e.removeTimeout=setTimeout(()=>{e.destroy()},300);const r=()=>{e.rippleWaveEl.removeEventListener("animationend",r),clearTimeout(e.removeTimeout),e.destroy()};e.rippleWaveEl.addEventListener("animationend",r)}remove(){const e=this;e.shouldBeRemoved||(e.removeTimeout=setTimeout(()=>{e.destroy()},400),e.shouldBeRemoved=!0,e.rippleWaveEl.classList.contains("k-touch-ripple-wave-in")&&e.out())}}const Uo=(t,e,n)=>{const r=_.useContext(Qf);n||(n=t);const a=_.useRef(null),i=()=>{a.current&&a.current.remove(),a.current=null},o=f=>{a.current=new jK(t.current,f.pageX,f.pageY)},s=()=>{i()},l=()=>{i()},u=()=>{if(!r.touchRipple)return;const f=n.current;f.addEventListener("pointerdown",o),f.addEventListener("pointermove",s),f.addEventListener("pointerup",l),f.addEventListener("pointercancel",l),f.addEventListener("contextmenu",l)},c=()=>{const f=n.current;f.removeEventListener("pointerdown",o),f.removeEventListener("pointermove",s),f.removeEventListener("pointerup",l),f.removeEventListener("pointercancel",l),f.removeEventListener("contextmenu",l)},d=()=>{!n||!n.current||!e||u()},p=()=>{!n||!n.current||!e||c()};_.useEffect(()=>(d(),()=>p()))},Rt=()=>{const t=_.useContext(Qf);return e=>t.dark?e:""},UK=(t,e,n)=>{const{fontSizeIos:r,fontSizeMaterial:a,bold:i,dividers:o}=t;return{base:{common:F("flex items-center w-full px-4 relative z-10 overflow-hidden",o&&"hairline-b"),ios:F("h-14",e.textIos,e.bgIos,e.activeBgIos,r,"first:rounded-t-xl last:rounded-b-xl justify-center",i&&"font-semibold"),material:F("h-12",e.textMaterial,e.bgMaterial,e.activeBgMaterial,a,"justify-start",n("dark:touch-ripple-white"),i&&"font-medium")}}},VK=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-white",e("dark:bg-neutral-800")),bgMaterial:F("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),activeBgIos:F("active:bg-neutral-200",e("dark:active:bg-neutral-700")),activeBgMaterial:"",textIos:"text-primary",textMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t}};function B3(){return B3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B3.apply(this,arguments)}const WK=_.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,bold:s,boldIos:l=!1,boldMaterial:u=!1,fontSizeIos:c="text-xl",fontSizeMaterial:d="text-base",href:p,touchRipple:f=!0,dividers:g=void 0,children:y,...v}=t,b=_.useRef(null);_.useImperativeHandle(e,()=>({el:b.current}));let x=n;typeof t.component>"u"&&(p||p==="")&&(x="a");const w={href:p,...v},S=wn({ios:i,material:o}),C=ut({ios:i,material:o}),E=Rt();Uo(b,S==="material"&&f);const R=VK(a,E),T=C(UK({fontSizeIos:c,fontSizeMaterial:d,bold:typeof s>"u"?S==="ios"?l:u:s,dividers:typeof g>"u"?S==="ios":g,...t},R,E),r);return V.createElement(x,B3({ref:b,role:"button",tabIndex:"0",className:T.base},w),y)});WK.displayName="ActionsButton";const GK=(t,e)=>{const{fontSizeIos:n,fontSizeMaterial:r,dividers:a}=t;return{base:{common:F(`flex items-center w-full px-4 relative z-10 overflow-hidden ${e.activeBg}`,a&&"hairline-b"),ios:F("h-14",e.bgIos,e.textIos,n,"first:rounded-t-xl last:rounded-b-xl justify-center"),material:F("h-12",e.bgMaterial,e.textMaterial,r,"font-medium","justify-start")}}},HK=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-white",e("dark:bg-neutral-800")),bgMaterial:F("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),textIos:F("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),textMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function j3(){return j3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j3.apply(this,arguments)}const qK=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,fontSizeIos:s="text-sm",fontSizeMaterial:l="text-sm",dividers:u=void 0,children:c,...d}=t,p=_.useRef(null);_.useImperativeHandle(e,()=>({el:p.current}));const f=n,g={...d},y=wn({ios:i,material:o}),v=ut({ios:i,material:o}),b=Rt(),x=HK(a,b),w=v(GK({fontSizeIos:s,fontSizeMaterial:l,dividers:typeof u>"u"?y==="ios":u,...t},x),r);return V.createElement(f,j3({ref:p,className:w.base},g),c)});qK.displayName="ActionsLabel";const KK=(t,e)=>({base:{common:`${e.text} ${e.bg} inline-flex items-center justify-center rounded-full leading-none`,ios:"font-semibold",material:"font-medium",sm:"text-2xs min-w-4 min-h-4 px-0.5",md:"text-xs min-w-5 min-h-5 px-1.5 py-0.5"}}),XK=function(t){return t===void 0&&(t={}),{bg:"bg-primary",text:"text-white",...t}};function U3(){return U3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U3.apply(this,arguments)}const o8=_.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,small:i,ios:o,material:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=ut({ios:o,material:s}),g=XK(a),y=i?"sm":"md",v=f(KK(t,g),r);return V.createElement(d,U3({ref:c,className:v.base[y]},p),l)});o8.displayName="Badge";const QK=(t,e,n)=>{const{inset:r,nested:a,margin:i,padding:o,strong:s,outline:l}=t;return{base:{common:F("text-sm z-10",ar("relative",n),!r&&!a&&l&&"hairline-t hairline-b",r&&l&&"border",r&&"px-4",!r&&"pl-4-safe pr-4-safe",!a&&i,(s||l)&&o),ios:F(e.textIos,s&&e.strongBgIos,r&&l&&e.outlineIos),material:F(e.textMaterial,s&&e.strongBgMaterial,r&&l&&e.outlineMaterial)},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"}}},YK=function(t,e){return t===void 0&&(t={}),{outlineIos:F("border-black border-opacity-20",e("dark:border-white dark:border-opacity-15")),outlineMaterial:F("border-md-light-outline",e("border-md-dark-outline")),strongBgIos:F("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),strongBgMaterial:F("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),textIos:"",textMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t}};function V3(){return V3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V3.apply(this,arguments)}const ba=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,margin:i="my-8",padding:o="py-4",inset:s,insetIos:l,insetMaterial:u,strong:c,strongIos:d,strongMaterial:p,outline:f,outlineIos:g,outlineMaterial:y,nested:v,ios:b,material:x,children:w,...S}=t,C=_.useRef(null);_.useImperativeHandle(e,()=>({el:C.current}));const E=n,R={...S},T=wn({ios:b,material:x}),$=ut({ios:b,material:x}),P=Rt(),D=YK(a,P),B=typeof c>"u"?T==="ios"?d:p:c,z=typeof f>"u"?T==="ios"?g:y:f,q=typeof s>"u"?T==="ios"?l:u:s,Y=$(QK({...t,margin:i,padding:o,inset:q,strong:B,outline:z},D,r)),J=F(Y.base,q&&Y.inset,r);return V.createElement(E,V3({ref:C,className:J},R),w)});ba.displayName="Block";const JK=(t,e)=>{const{inset:n}=t;return{base:{common:F("mb-8 flex items-center -mt-6 text-sm",n?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:e.textIos,material:e.textMaterial}}},ZK=function(t,e){return t===void 0&&(t={}),{textIos:F("text-black text-opacity-75",e("dark:text-white dark:text-opacity-75")),textMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function W3(){return W3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W3.apply(this,arguments)}const eX=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,inset:s,insetIos:l,insetMaterial:u,children:c,...d}=t,p=_.useRef(null);_.useImperativeHandle(e,()=>({el:p.current}));const f=wn(),g=typeof s>"u"?f==="ios"?l:u:s,y=n,v={...d},b=ut({ios:i,material:o}),x=Rt(),w=ZK(a,x),S=b(JK({...t,inset:g},w),r);return V.createElement(y,W3({ref:p,className:S.base},v),c)});eX.displayName="BlockFooter";const tX=(t,e)=>{const{inset:n}=t;return{base:{common:F("mt-8 flex items-center -mb-6 text-sm",n?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:e.textIos,material:e.textMaterial}}},nX=function(t,e){return t===void 0&&(t={}),{textIos:F("text-black",e("dark:text-white")),textMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function G3(){return G3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G3.apply(this,arguments)}const rX=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,inset:s,insetIos:l,insetMaterial:u,children:c,...d}=t,p=_.useRef(null);_.useImperativeHandle(e,()=>({el:p.current}));const f=n,g={...d},y=wn(),v=typeof s>"u"?y==="ios"?l:u:s,b=ut({ios:i,material:o}),x=Rt(),w=nX(a,x),S=b(tX({...t,inset:v},w),r);return V.createElement(f,G3({ref:p,className:S.base},g),c)});rX.displayName="BlockHeader";const aX=(t,e)=>{const{withBlock:n,medium:r,large:a}=t;return{base:{common:`pl-4-safe pr-4-safe mt-8 flex justify-between items-center ${n?"-mb-6":"mb-2"}`,ios:F(`font-semibold ${e.textIos}`,a&&"text-[1.5rem]",r&&"text-[1.125rem]",!r&&!a&&"text-[1rem]"),material:F(`font-medium ${e.textMaterial}`,a&&"text-[1.375rem]",r&&"text-[1rem]",!r&&!a&&"text-[0.875rem]")}}},iX=function(t,e){return t===void 0&&(t={}),{textIos:"",textMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function H3(){return H3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H3.apply(this,arguments)}const oX=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,withBlock:i=!0,medium:o,large:s,ios:l,material:u,children:c,...d}=t,p=_.useRef(null);_.useImperativeHandle(e,()=>({el:p.current}));const f=n,g={...d},y=ut({ios:l,material:u}),v=Rt(),b=iX(a,v),x=y(aX({...t,withBlock:i},b),r);return V.createElement(f,H3({ref:p,className:x.base},g),c)});oX.displayName="BlockTitle";const sX=t=>{const{fontSizeIos:e,fontSizeMaterial:n}=t;return{base:{common:"flex items-center justify-start overflow-auto whitespace-nowrap py-1 px-0 space-x-3 no-scrollbar rtl:space-x-reverse",ios:e,material:n}}};function q3(){return q3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q3.apply(this,arguments)}const lX=_.forwardRef((t,e)=>{const{component:n="div",className:r,fontSizeIos:a="text-[17px]",fontSizeMaterial:i="text-[14px]",ios:o,material:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=ut({ios:o,material:s})(sX({...t,fontSizeIos:a,fontSizeMaterial:i}),r);return V.createElement(d,q3({ref:c,className:f.base},p),l)});lX.displayName="Breadcrumbs";const uX=(t,e)=>{const{active:n}=t;return{base:{common:F("flex items-center overflow-hidden"),ios:F(e.textIos,e.bgIos,n?e.textActiveIos:e.textIos,n&&"font-semibold"),material:F("font-medium px-2 py-1 rounded-lg",e.bgMaterial,n?e.textActiveMaterial:e.textMaterial)}}},cX=function(t,e){return t===void 0&&(t={}),{textIos:F("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),textMaterial:F("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),bgIos:"",bgMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),textActiveIos:F("text-black",e("dark:text-white")),textActiveMaterial:F("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),...t}};function K3(){return K3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K3.apply(this,arguments)}const dX=_.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,colors:o,active:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=ut({ios:a,material:i}),g=Rt(),y=cX(o,g),v=f(uX({...t},y),r);return V.createElement(d,K3({ref:c,className:v.base,role:"menuitem",tabIndex:"0"},p),l)});dX.displayName="BreadcrumbsItem";const pX=()=>({base:{common:"w-3 opacity-35 flex justify-center",ios:"",material:""},icon:{common:"rtl:rotate-180",ios:"h-3",material:"h-2.5"}});function X3(){return X3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X3.apply(this,arguments)}const s8=t=>V.createElement("svg",X3({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"14",viewBox:"0 0 12 20",fill:"currentcolor"},t),V.createElement("path",{d:"M11.518406,10.5648622 C11.4831857,10.6163453 11.4426714,10.6653692 11.3968592,10.7111814 L2.5584348,19.5496058 C1.9753444,20.1326962 1.03186648,20.1345946 0.44199608,19.5447242 C-0.14379032,18.9589377 -0.14922592,18.0146258 0.43711448,17.4282854 L7.87507783,9.9903221 L0.4431923,2.5584366 C-0.1398981,1.9753462 -0.1417965,1.0318683 0.448074,0.4419979 C1.0338604,-0.1437886 1.9781723,-0.1492241 2.56451268,0.4371163 L11.4029371,9.2755407 C11.7556117,9.6282153 11.7969345,10.1725307 11.518406,10.5648622 Z"}));function Q3(){return Q3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Q3.apply(this,arguments)}const hX=_.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,children:o,...s}=t,l=_.useRef(null);_.useImperativeHandle(e,()=>({el:l.current}));const u=n,c={...s},d=ut({ios:a,material:i})(pX({...t}),r);return V.createElement(u,Q3({ref:l,className:d.base},c),V.createElement(s8,{className:d.icon}),o)});hX.displayName="BreadcrumbsSeparator";const fX=(t,e)=>({base:{common:`flex items-center cursor-pointer space-x-0.75 rtl:space-x-reverse ${e.bg}`,ios:F("rounded active:opacity-30 px-1.5 h-[1em] duration-300 active:duration-0",e.bgIos),material:F("py-3 px-2 rounded-lg",e.bgMaterial)},dot:{common:`w-1 h-1 rounded-full ${e.dotBg}`,ios:e.dotBgIos,material:e.dotBgMaterial}}),mX=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-black bg-opacity-15",e("dark:bg-white dark:bg-opacity-15")),bgMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),dotBgIos:F("bg-black",e("dark:bg-white")),dotBgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function Y3(){return Y3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y3.apply(this,arguments)}const gX=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,...l}=t,u=_.useRef(null);_.useImperativeHandle(e,()=>({el:u.current}));const c=Rt(),d=mX(a,c),p=n,f={...l},g=ut({ios:i,material:o})(fX({...t},d),r);return V.createElement(p,Y3({ref:u,role:"button",tabIndex:"0",className:g.base},f),V.createElement("span",{className:g.dot}),V.createElement("span",{className:g.dot}),V.createElement("span",{className:g.dot}),s)});gX.displayName="BreadcrumbsCollapsed";const yX=(t,e,n,r)=>{const{inline:a,segmented:i,segmentedStrong:o,segmentedActive:s,disabled:l}=t;return{base:{common:F("flex text-center justify-center items-center appearance-none py-1 transition-colors focus:outline-none cursor-pointer select-none overflow-hidden z-10",a?"inline-flex":"w-full flex",ar("relative",n),l&&"pointer-events-none",o&&s&&"k-segmented-strong-button-active"),ios:"uppercase duration-100 font-semibold px-2",material:"duration-300 font-medium px-4",square:{ios:i&&!o?"first:rounded-s last:rounded-e":"rounded",material:i&&!o?"first:rounded-lg-s last:rounded-lg-e":"rounded-lg"},rounded:i&&!o?"":"rounded-full"},style:{fill:{common:F(l&&F(e.disabledBg,e.disabledText)),ios:F(l?F(e.disabledBg,e.disabledText):`${e.fillTextIos} ${e.fillBgIos} ${e.fillActiveBgIos}`),material:F(l?F(e.disabledBg,e.disabledText):F(e.fillTextMaterial,e.fillBgMaterial,e.fillActiveBgMaterial,e.fillTouchRipple))},outline:{common:F(l?F(e.disabledText,e.disabledBorder):F("active:bg-opacity-15",e.touchRipple)),ios:F(!i&&"border-2",!l&&!i&&e.outlineBorderIos,!l&&F(e.textIos,e.activeBgIos)),material:F(!i&&"border",!l&&!i&&e.outlineBorderMaterial,!l&&F(e.textMaterial,e.activeBgMaterial))},clear:{common:F(l?e.disabledText:`active:bg-opacity-15 ${e.touchRipple}`),ios:!l&&F(e.textIos,e.activeBgIos),material:!l&&F(e.textMaterial,e.activeBgMaterial)},tonal:{common:l?F(e.disabledBg,e.disabledText):F(e.touchRipple),ios:!l&&F(e.tonalTextIos,e.tonalBgIos,e.activeBgIos,"bg-opacity-15 active:bg-opacity-25"),material:!l&&F(e.tonalTextMaterial,e.tonalBgMaterial,e.activeBgMaterial)},segmentedStrong:F("active:bg-black active:bg-opacity-10",r("dark:active:bg-white dark:active:bg-opacity-5 dark:touch-ripple-white")),segmentedStrongActive:"duration-0"},size:{small:{ios:"text-xs h-7",material:"text-sm h-8"},medium:{common:"text-sm",ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},raised:"shadow active:shadow-lg"}},bX=function(t,e){return t===void 0&&(t={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:F("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:F("text-white"),fillTextMaterial:F("text-md-light-on-primary",e("dark:text-md-dark-on-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillBgIos:"bg-primary",fillBgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),fillTouchRipple:F("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),tonalBgIos:"bg-primary",tonalBgMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),tonalTextIos:"text-primary",tonalTextMaterial:F("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),touchRipple:"touch-ripple-primary",disabledText:F("text-black text-opacity-30",e("dark:text-white dark:text-opacity-30")),disabledBg:F("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-10")),disabledBorder:F("border-black border-opacity-10",e("dark:border-white dark:border-opacity-10")),...t}};function J3(){return J3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J3.apply(this,arguments)}const hr=_.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,disabled:s,href:l,outline:u,outlineIos:c,outlineMaterial:d,clear:p,clearIos:f,clearMaterial:g,tonal:y,tonalIos:v,tonalMaterial:b,rounded:x,roundedIos:w,roundedMaterial:S,small:C,smallIos:E,smallMaterial:R,large:T,largeIos:$,largeMaterial:P,raised:D,raisedIos:B,raisedMaterial:z,inline:q,segmented:Y,segmentedStrong:J,segmentedActive:H,touchRipple:L=!0,children:Q,...Z}=t,te=_.useRef(null);_.useImperativeHandle(e,()=>({el:te.current}));let oe=n;typeof t.component>"u"&&(l||l==="")&&(oe="a");const he={href:l,...Z},ae=wn({ios:i,material:o}),de=ut({ios:i,material:o}),ke=Rt();Uo(te,ae==="material"&&L);const X=(Pe=>{const We={};return Object.keys(Pe).forEach($e=>{We[$e]=typeof Pe[$e]>"u"?ae==="ios"?t[`${$e}Ios`]:t[`${$e}Material`]:Pe[$e]}),We})({outline:u,clear:p,tonal:y,rounded:x,small:C,large:T,raised:D}),se=X.large?"large":X.small?"small":"medium";let pe=X.outline?"outline":X.clear||Y&&!H?"clear":X.tonal?"tonal":"fill";J&&(pe="segmentedStrong"),J&&H&&(pe="segmentedStrongActive");const Ne=bX(a,ke),Se=de(yX({...t,...X},Ne,r,ke)),Te=F(Se.base[X.rounded?"rounded":"square"],Se.style[pe],Se.size[se],X.raised&&Se.raised,r);return V.createElement(oe,J3({ref:te,className:Te,disabled:s,role:"button",tabIndex:"0"},he),Q)});hr.displayName="Button";const vX=(t,e)=>{const{margin:n,headerDivider:r,footerDivider:a,contentWrapPadding:i}=t;return{base:{common:F(n,"overflow-hidden"),ios:F("rounded-lg",e.bgIos,e.textIos),material:F("rounded-2xl",e.bgMaterial,e.textMaterial),plain:"",raised:"shadow",outline:{common:F("border"),ios:e.outlineIos,material:e.outlineMaterial}},header:{common:F(r&&"border-b","p-4"),ios:F(r&&e.outlineIos,t.headerFontSizeIos),material:F(r&&e.outlineMaterial,t.headerFontSizeMaterial)},content:F(i,"text-sm"),footer:{common:F(r&&"border-t","text-sm p-4"),ios:F(e.footerTextIos,a&&e.outlineIos),material:F(e.footerTextMaterial,a&&e.outlineMaterial)}}},xX=function(t,e){return t===void 0&&(t={}),{textIos:F(""),textMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),bgIos:F("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),bgMaterial:F("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),footerTextIos:F("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),footerTextMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),outlineIos:F("border-black border-opacity-20",e("dark:border-white dark:border-opacity-20")),outlineMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function Z3(){return Z3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z3.apply(this,arguments)}const l8=_.forwardRef((t,e)=>{const{component:n="div",className:r,margin:a="m-4",colors:i,header:o,footer:s,ios:l,material:u,headerFontSizeIos:c="text-[17px]",headerFontSizeMaterial:d="text-[22px]",contentWrap:p=!0,contentWrapPadding:f="p-4",raised:g,raisedIos:y,raisedMaterial:v,outline:b,outlineIos:x,outlineMaterial:w,headerDivider:S=!1,footerDivider:C=!1,children:E,...R}=t,T=_.useRef(null);_.useImperativeHandle(e,()=>({el:T.current}));const $=n,P={...R},D=wn(),B=ut({ios:l,material:u}),z=Rt(),q=xX(i,z),Y=typeof b>"u"?D==="ios"?x:w:b,J=typeof g>"u"?D==="ios"?y:v:g,H=Y?"outline":J?"raised":"plain",L=B(vX({...t,margin:a,contentWrapPadding:f,headerDivider:S,footerDivider:C,headerFontSizeIos:c,headerFontSizeMaterial:d,outline:Y,raised:J},q),r);return V.createElement($,Z3({ref:T,className:L.base[H]},P),o&&V.createElement("div",{className:L.header},o),p?V.createElement("div",{className:L.content},E):E,s&&V.createElement("div",{className:L.footer},s))});l8.displayName="Card";const wX=(t,e,n,r)=>({base:F("cursor-pointer inline-flex align-middle",ar("relative",n),r("dark:touch-ripple-white")),iconWrap:{common:F("flex items-center justify-center text-white",r("dark:text-black")),ios:"w-5.5 h-5.5 rounded-full border",material:"w-4.5 h-4.5 rounded-sm border-2",notChecked:{ios:e.borderIos,material:e.borderMaterial},checked:{ios:`${e.bgCheckedIos} ${e.borderCheckedIos}`,material:`${e.bgCheckedMaterial} ${e.borderCheckedMaterial}`}},icon:{notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:F("bg-white w-3/4",r("dark:bg-black")),ios:"h-0.5 rounded-full",material:"h-0.5"},input:"hidden"}),kX=function(t,e){return t===void 0&&(t={}),{borderIos:F("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),borderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:F("border-md-light-primary",e("dark:border-md-dark-primary")),...t}};function Vy(){return Vy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vy.apply(this,arguments)}const u8=t=>{const{ios:e,material:n,fill:r,...a}=t;return wn({ios:e,material:n})==="ios"?V.createElement("svg",Vy({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},a),V.createElement("path",{fill:r||"currentColor",fillRule:"evenodd",d:"M10.6461792,0.119820016 C11.0022676,0.346673312 11.1070333,0.819240884 10.88018,1.17532923 L5.59004012,9.47918548 C5.44456028,9.70754308 5.19802823,9.83254199 4.94596825,9.83309245 C4.59813173,9.83364386 4.39457446,9.67360825 4.28105047,9.53831563 L1.17887189,5.84128316 C0.907480501,5.5178515 0.949667479,5.03565214 1.27309914,4.76426075 C1.59653081,4.49286936 2.07873017,4.53505633 2.35012156,4.858488 L4.8346263,7.81909046 L9.59067001,0.353820775 C9.81752331,-0.00226757161 10.2900909,-0.10703328 10.6461792,0.119820016 Z",transform:"translate(4 5.483)"})):V.createElement("svg",Vy({xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 18 14",fill:"currentcolor"},a),V.createElement("polygon",{fill:r,points:"6 11.17 1.83 7 .41 8.41 6 14 18 2 16.59 .59"}))};function eE(){return eE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eE.apply(this,arguments)}const SX=_.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,indeterminate:s,name:l,value:u,disabled:c,readOnly:d,onChange:p,ios:f,material:g,touchRipple:y=!0,children:v,...b}=t,x=_.useRef(null),w=_.useRef(null);_.useImperativeHandle(e,()=>({el:w.current,inputEl:x.current}));const S=n,C={...b},E=wn({ios:f,material:g}),R=ut({ios:f,material:g}),T=Rt();Uo(w,E==="material"&&y);const $=kX(a,T),P=o||i&&!p||s?"checked":"notChecked",D=R(wX(t,$,r,T),r);return _.useEffect(()=>{x.current&&(x.current.indeterminate=!!s)},[s]),V.createElement(S,eE({ref:w,className:D.base},C),V.createElement("input",{ref:x,type:"checkbox",name:l,value:u,disabled:c,readOnly:d,checked:o,defaultChecked:i,onChange:p,className:D.input}),V.createElement("i",{className:D.iconWrap[P]},s?V.createElement("span",{className:D.indeterminateIcon}):V.createElement(u8,{ios:f,material:g,className:D.icon[P]})),v)});SX.displayName="Checkbox";const CX=(t,e)=>({base:{common:"text-sm inline-flex items-center justify-center align-middle rounded-full px-3",ios:"rounded-full h-7",material:"rounded-lg h-8 font-medium",fill:{ios:F(e.fillBg||e.fillBgIos,e.fillText||e.fillTextIos),material:F(e.fillBg||e.fillBgMaterial,e.fillText||e.fillTextMaterial)},outline:{common:"border",ios:F(e.outlineText||e.outlineTextIos,e.outlineBorder||e.outlineBorderIos),material:F(e.outlineText||e.outlineTextMaterial,e.outlineBorder||e.outlineBorderMaterial)}},media:{common:"-my-1 me-1 select-none",ios:"-ms-3",material:"-ms-2"},deleteButton:"-me-2 -my-1 ms-1 h-full flex items-center justify-center w-6 cursor-pointer opacity-50 active:opacity-100 select-none"}),EX=function(t,e){return t===void 0&&(t={}),{fillTextIos:"text-current",fillTextMaterial:F("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),fillBgIos:F("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-10")),fillBgMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),outlineTextIos:F("text-current"),outlineTextMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),outlineBorderIos:F("border-black border-opacity-20",e("dark:border-white dark:border-opacity-20")),outlineBorderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function Wy(){return Wy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wy.apply(this,arguments)}const Yf=t=>{let{theme:e,...n}=t;return e==="ios"?V.createElement("svg",Wy({xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 28 28",fill:"currentcolor"},n),V.createElement("path",{d:"M14,0 C21.7319865,0 28,6.2680135 28,14 C28,21.7319865 21.7319865,28 14,28 C6.2680135,28 0,21.7319865 0,14 C0,6.2680135 6.2680135,0 14,0 Z M18.9393398,6.93933983 L14,11.8786797 L9.06066017,6.93933983 L6.93933983,9.06066017 L11.8786797,14 L6.93933983,18.9393398 L9.06066017,21.0606602 L14,16.1213203 L18.9393398,21.0606602 L21.0606602,18.9393398 L16.1213203,14 L21.0606602,9.06066017 L18.9393398,6.93933983 Z"})):V.createElement("svg",Wy({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),V.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.47 2 2 6.47 2 12C2 17.53 6.47 22 12 22C17.53 22 22 17.53 22 12C22 6.47 17.53 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM12 10.59L15.59 7L17 8.41L13.41 12L17 15.59L15.59 17L12 13.41L8.41 17L7 15.59L10.59 12L7 8.41L8.41 7L12 10.59Z",fill:"currentcolor"}))};function tE(){return tE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tE.apply(this,arguments)}const NX=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,media:i,deleteButton:o,onDelete:s,ios:l,material:u,outline:c,children:d,...p}=t,f=_.useRef(null);_.useImperativeHandle(e,()=>({el:f.current}));const g=n,y={...p},v=ut({ios:l,material:u}),b=wn({ios:l,material:u}),x=Rt(),w=c?"outline":"fill",S=EX(a,x),C=v(CX(t,S),r);return V.createElement(g,tE({ref:f,className:C.base[w]},y),i&&V.createElement("div",{className:C.media},i),d,o&&V.createElement("div",{className:C.deleteButton,role:"button",tabIndex:"0",onClick:s},V.createElement(Yf,{theme:b,className:"h-4 w-4"})))});NX.displayName="Chip";const TX=(t,e,n,r)=>{let{hasButtons:a}=r;const{titleFontSizeMaterial:i,titleFontSizeIos:o,translucent:s,sizeIos:l,sizeMaterial:u}=t;return{base:{common:F("left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40 max-h-full overflow-hidden duration-400",ar("fixed",n)),ios:F("rounded-xl max-w-full",l,e.bgIos,s&&"translucent"),material:F("rounded-[1.75rem] p-6 max-w-[90%]",u,e.bgMaterial),opened:"",closed:"scale-[0.85] opacity-0 pointer-events-none"},contentWrap:{common:"flex flex-col items-center justify-center",material:"space-y-3",ios:F("p-4 space-y-1 relative",a&&"hairline-b")},title:{common:F("w-full"),ios:F(e.titleIos,o,"font-semibold text-center"),material:F(e.titleMaterial,i)},content:{common:F("text-sm w-full"),ios:F(e.contentTextIos,"text-center"),material:F(e.contentTextMaterial)},buttons:{common:"flex items-center",ios:F("justify-center last-child-hairline-r-none"),material:F("justify-end pt-6 space-x-2 rtl:space-x-reverse")},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},IX=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-white",e("dark:bg-neutral-800")),bgMaterial:F("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),titleIos:"",titleMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),contentTextIos:"",contentTextMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function nE(){return nE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nE.apply(this,arguments)}const _X=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,opened:i,backdrop:o=!0,onBackdropClick:s,translucent:l=!0,sizeIos:u="w-[16.875rem]",sizeMaterial:c="w-[19.5rem]",titleFontSizeIos:d="text-[18px]",titleFontSizeMaterial:p="text-[24px]",title:f,content:g,buttons:y,ios:v,material:b,children:x,...w}=t,S=_.useRef(null);_.useImperativeHandle(e,()=>({el:S.current}));const C=i?"opened":"closed",E=n,R={...w},T=ut({ios:v,material:b}),$=Rt(),P=IX(a,$),D=T(TX({...t,titleFontSizeIos:d,titleFontSizeMaterial:p,translucent:l,sizeIos:u,sizeMaterial:c},P,r,{hasButtons:!!y}),r);return V.createElement(V.Fragment,null,o&&V.createElement("div",{className:D.backdrop[C],onClick:s}),V.createElement(E,nE({ref:S,className:D.base[C]},R),V.createElement("div",{className:D.contentWrap},f&&V.createElement("div",{className:D.title},f),(g||x)&&V.createElement("div",{className:D.content},g,x)),y&&V.createElement("div",{className:D.buttons},y)))});_X.displayName="Dialog";const RX=(t,e)=>{const{strong:n,disabled:r}=t;return{base:{ios:F("text-center text-[17px] flex items-center justify-center h-11 w-full hairline-r rtl:hairline-l relative first:rounded-bl-xl last:rounded-br-xl rtl:first:rounded-br-xl rtl:first:rounded-bl-none rtl:last:rounded-bl-xl rtl:last:rounded-br-none",r?e.disabledTextIos:e.textIos,n&&"font-semibold",!r&&e.activeBgIos)}}},$X=function(t,e){return t===void 0&&(t={}),{activeBgIos:F("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),textIos:"text-primary",disabledTextIos:F("text-black text-opacity-30",e("dark:text-white dark:text-opacity-30")),...t}};function Gy(){return Gy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gy.apply(this,arguments)}const OX=_.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,disabled:s,strong:l,strongIos:u,strongMaterial:c,children:d,...p}=t,f=_.useRef(null);_.useImperativeHandle(e,()=>({el:f.current}));const g={...p},y=wn({ios:i,material:o}),v=ut({ios:i,material:o}),b=Rt(),x=$X(a,b),w=typeof l>"u"?y==="ios"?u:c:l,S=v(RX({...t,strong:w},x),r),C=n;return y==="ios"?V.createElement(C,Gy({className:S.base,disabled:s,role:"button",tabIndex:"0"},g),d):V.createElement(hr,Gy({component:n,inline:!0,rounded:!0,disabled:s,clear:!w,className:r},g),d)});OX.displayName="DialogButton";const MX=(t,e)=>({base:{common:"flex items-center justify-center space-x-2 rtl:!space-x-reverse cursor-pointer overflow-hidden select-none",ios:`h-12 duration-100 rounded-full shadow-lg ${e.bgIos} ${e.activeBgIos} ${e.textIos}`,material:`duration-300 rounded-2xl shadow ${e.bgMaterial} ${e.activeBgMaterial} ${e.textMaterial} ${e.touchRipple}`,iconOnly:{ios:"w-12",material:"w-14 h-14"},withText:{common:"px-4",material:"h-14"}},text:{common:"text-sm",ios:"font-semibold uppercase",material:"font-medium"},icon:{common:"h-1em w-1em",ios:"text-icon-ios",material:"text-icon-material"}}),PX=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-primary",bgMaterial:F("bg-md-light-primary-container",e("dark:bg-md-dark-primary-container")),activeBgIos:"active:bg-ios-primary-shade",activeBgMaterial:"",textIos:"text-white",textMaterial:F("text-md-light-on-primary-container",e("dark:text-md-dark-on-primary-container")),touchRipple:F("touch-ripple-primary",e("dark:touch-ripple-white")),...t}};function rE(){return rE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rE.apply(this,arguments)}const FX=_.forwardRef((t,e)=>{const{component:n="a",className:r,colors:a,href:i,text:o,textPosition:s="after",icon:l,ios:u,material:c,touchRipple:d=!0,children:p,...f}=t,g=_.useRef(null);_.useImperativeHandle(e,()=>({el:g.current}));const y=n,v={...f},b=wn({ios:u,material:c}),x=ut({ios:u,material:c}),w=Rt();Uo(g,b==="material"&&d);const S=PX(a,w),C=x(MX(t,S),r);return V.createElement(y,rE({className:o?C.base.withText:C.base.iconOnly,href:i,ref:g,role:"button",tabIndex:"0"},v),o&&s==="before"&&V.createElement("span",{className:C.text},o),l&&V.createElement("span",{className:C.icon},l),o&&s==="after"&&V.createElement("span",{className:C.text},o),p)});FX.displayName="Fab";const AX=(t,e)=>({base:`${ar("relative",e)} inline-block not-italic`,badge:"absolute -end-1.5 -top-0.5"});function aE(){return aE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aE.apply(this,arguments)}const va=_.forwardRef((t,e)=>{const{component:n="i",className:r,ios:a,material:i,badge:o,badgeColors:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=ut(),g=wn(),y=f(AX(t,r),r);return V.createElement(d,aE({ref:c,className:y.base},p),g==="ios"?a:i,typeof o<"u"&&o!==null&&V.createElement(o8,{small:!0,className:y.badge,colors:s},o),l)});va.displayName="Icon";const DX=(t,e,n)=>{let{textColor:r,needsTouchRipple:a}=e;const{iconOnly:i,tabbar:o}=t;return{base:{common:F(!o&&r,"inline-flex space-x-1 rtl:!space-x-reverse justify-center items-center cursor-pointer select-none",a&&`touch-ripple-primary ${ar("relative",n)} z-10`),notTabbar:{ios:"active:opacity-30 duration-300 active:duration-0",material:a?"":"active:opacity-55"}},tabbar:{common:F(ar("relative",n),"w-full h-full duration-300"),material:"font-medium text-sm z-10",active:"k-tabbar-link-active",inactive:""},toolbar:{common:F("h-full max-h-12",i&&"k-touch-ripple-inset"),material:"px-3 text-sm font-medium"},navbar:{common:F("h-full max-h-12",i&&"k-touch-ripple-inset"),material:"px-3"}}},LX=function(t,e){return t===void 0&&(t={}),{textIos:"text-primary",textMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),navbarTextIos:"text-primary",navbarTextMaterial:"",...t}};function iE(){return iE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iE.apply(this,arguments)}const Nt=_.forwardRef((t,e)=>{const{component:n="a",className:r,colors:a,navbar:i,toolbar:o,iconOnly:s,linkProps:l={},tabbar:u,tabbarActive:c,touchRipple:d=void 0,ios:p,material:f,onClick:g,children:y,...v}=t,b=_.useRef(null);_.useImperativeHandle(e,()=>({el:b.current}));const x=n,w={...l,...v},S=wn({ios:p,material:f}),C=ut({ios:p,material:f}),E=Rt(),R=S==="material"&&(d||(o||u||i)&&typeof d>"u");Uo(b,R);const T=LX(a,E),$=t.navbar?S==="material"?T.navbarTextMaterial:T.navbarTextIos:S==="material"?T.textMaterial:T.textIos,P=u&&!c?T.tabbarInactive:$,D=c?"active":"inactive",B=C(DX(t,{textColor:P,needsTouchRipple:R},r)),z=F(B.base[u?"default":"notTabbar"],o&&B.toolbar,i&&B.navbar,u&&B.tabbar[D],r);return V.createElement(x,iE({ref:b,className:z},w,{role:"link",tabIndex:"0",onClick:g}),y)});Nt.displayName="Link";const zX=(t,e,n)=>{const{nested:r,margin:a,inset:i,strong:o,outline:s}=t;return{base:{common:F(!r&&a,!i&&!r&&s&&"hairline-t hairline-b",i&&s&&"border",ar("relative",n),"z-10"),ios:F(o&&e.strongBgIos,i&&s&&e.outlineIos),material:F(o&&e.strongBgMaterial,i&&s&&e.outlineMaterial)},ul:{common:F(i&&"no-safe-areas","last-child-hairline-b-none")},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"},menuList:{common:"py-1"}}},BX=function(t,e){return t===void 0&&(t={}),{outlineIos:F("border-black border-opacity-20",e("dark:border-white dark:border-opacity-15")),outlineMaterial:F("border-md-light-outline",e("border-md-dark-outline")),strongBgIos:F("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),strongBgMaterial:F("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),...t}},c8=V.createContext(!1);function oE(){return oE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oE.apply(this,arguments)}const bp=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,margin:i="my-8",nested:o,menuList:s,dividers:l,dividersIos:u=!0,dividersMaterial:c=!1,inset:d,insetIos:p,insetMaterial:f,strong:g,strongIos:y,strongMaterial:v,outline:b,outlineIos:x,outlineMaterial:w,ios:S,material:C,children:E,...R}=t,T=_.useRef(null);_.useImperativeHandle(e,()=>({el:T.current}));const $=n,P={...R},D=wn(),B=ut({ios:S,material:C}),z=Rt(),q=typeof l>"u"?D==="ios"?u:c:l,Y=typeof g>"u"?D==="ios"?y:v:g,J=typeof b>"u"?D==="ios"?x:w:b,H=typeof d>"u"?D==="ios"?p:f:d,L=BX(a,z),Q=B(zX({...t,margin:i,inset:H,strong:Y,outline:J},L,r)),Z=F(Q.base,H&&Q.inset,s&&Q.menuList,r);return V.createElement(c8.Provider,{value:q},V.createElement($,oE({ref:T,className:Z},P),V.createElement("ul",{className:Q.ul},E)))});bp.displayName="List";function sE(){return sE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sE.apply(this,arguments)}const jX=_.forwardRef((t,e)=>{const{children:n,...r}=t,a=_.useRef(null);_.useImperativeHandle(e,()=>({el:a.current}));const i={...r};return V.createElement("li",{ref:a},V.createElement(bp,sE({nested:!0},i),n))});jX.displayName="ListGroup";const UX=(t,e,n)=>{const{dividers:r}=t;return{base:"",button:{common:F(ar("relative",n),r&&"hairline-b active:hairline-transparent",`flex items-center justify-center px-4 space-x-1 w-full duration-300 active:duration-0 focus:outline-none ${e.touchRipple} overflow-hidden select-none`),ios:F("h-11",e.textIos,e.activeBgIos,e.activeBgIos),material:F("h-12",e.textMaterial,e.activeBgMaterial)}}},VX=function(t,e){return t===void 0&&(t={}),{textIos:"text-primary",textMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),activeBgIos:"active:bg-primary active:bg-opacity-15",activeBgMaterial:"",touchRipple:"touch-ripple-primary",...t}},d8=()=>_.useContext(c8);function Hy(){return Hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hy.apply(this,arguments)}const WX=_.forwardRef((t,e)=>{const{component:n="li",className:r,colors:a,href:i,target:o,type:s,value:l,linkComponent:u="a",linkProps:c={},ios:d,material:p,touchRipple:f=!0,children:g,...y}=t,v=_.useRef(null),b=_.useRef(null),x=d8();_.useImperativeHandle(e,()=>({el:v.current}));const w=n,S={...y},C=wn({ios:d,material:p}),E=ut({ios:d,material:p});Uo(b,C==="material"&&f);const R=Rt(),T=VX(a,R),$=E(UX({...t,dividers:x},T,r),r),P=!!i||i==="",D={href:!P||i===!0||i===!1?void 0:i||"",target:o,type:s,value:l,...c},B=P?u:"button";return V.createElement(w,Hy({ref:v,className:$.base},S),V.createElement(B,Hy({ref:b,className:$.button},D),g))});WX.displayName="ListButton";const GX=(t,e,n)=>{let{className:r,isMediaItem:a,theme:i,textColor:o,needsTouchRipple:s,isMenuListItemActive:l,autoStrongTitle:u}=n;const{menuListItem:c,dividers:d,mediaClassName:p="",mediaClass:f="",innerClassName:g="",innerClass:y="",contentClassName:v="",contentClass:b="",titleWrapClassName:x="",titleWrapClass:w="",titleFontSizeIos:S,titleFontSizeMaterial:C,strongTitle:E,contacts:R}=t;return{base:{common:c?`${o} py-1`:"",material:R&&"[&:nth-child(2)]:-mt-12"},itemContent:{common:F(`flex items-center ${v||b}`),ios:F(!c&&F(e.primaryTextIos,"ps-4-safe"),c&&"rounded-lg ml-2-safe mr-2-safe ps-2"),material:F(!c&&F(e.primaryTextMaterial,a?"ml-2-safe mr-2-safe rounded-2xl ps-2":"ps-4-safe",R&&"ml-10"),c&&"rounded-full min-h-[3.5rem] ml-4-safe mr-4-safe ps-4"),link:F("duration-300 active:duration-0 cursor-pointer select-none",d&&i==="ios"&&"active:hairline-transparent",s&&F("relative overflow-hidden z-10",e.touchRipple),F(l?i==="ios"?e.menuListItemActiveBgIos:e.menuListItemActiveBgMaterial:c?i==="ios"?e.menuListItemBgIos:e.menuListItemBgMaterial:i==="ios"?e.activeBgIos:e.activeBgMaterial))},media:{common:`shrink-0 flex ${p||f}`,ios:"py-2 me-4",material:F("py-3",c?"me-3":"me-4")},inner:{common:F("w-full relative",!c&&d&&"hairline-b",g||y),ios:"py-2.5 pe-4-safe",material:F("py-3",a&&!c?"pe-2":"pe-4-safe")},titleWrap:{common:F(`flex justify-between items-center ${x||w}`),ios:F(!c&&S),material:F(!c&&C)},title:{common:"shrink",menuListItem:F("text-sm",E===!0||u?"font-semibold":"font-medium"),strong:{common:"",ios:"font-semibold",material:"font-medium"}},after:{common:F("shrink-0 ms-auto ps-1 flex items-center space-x-1"),ios:e.secondaryTextIos,material:F(e.secondaryTextMaterial,"text-sm")},chevron:"opacity-20 shrink-0 ms-3 rtl:rotate-180",subtitle:"text-sm",text:{common:F("text-sm line-clamp-2"),ios:e.secondaryTextIos,material:e.secondaryTextMaterial},header:{common:"text-xs mb-0.5",ios:e.secondaryTextIos,material:e.secondaryTextMaterial},footer:{common:F("text-xs mt-0.5"),ios:e.secondaryTextIos,material:e.secondaryTextMaterial},groupTitle:{common:F("pl-4-safe pr-4-safe py-1 flex items-center z-20",ar("relative",r)),ios:`h-8${d?" hairline-t":""} -mt-px ${S} ${e.secondaryTextIos} ${e.groupTitleBgIos} ${R&&F("font-semibold top-11-safe sticky",e.groupTitleContactsTextIos,e.groupTitleContactsBgIos)}`,material:`h-12 ${C} ${e.secondaryTextMaterial} ${e.groupTitleBgMaterial} ${R&&F("pointer-events-none overflow-visible h-12 box-border text-xl font-medium flex max-w-full items-center px-4 top-16-safe sticky",e.groupTitleContactsTextMaterial,e.groupTitleContactsBgMaterial)}`}}},HX=function(t,e){return t===void 0&&(t={}),{primaryTextIos:F("text-black",e("dark:text-white")),primaryTextMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),secondaryTextIos:F("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),secondaryTextMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),activeBgIos:F("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),activeBgMaterial:"",groupTitleBgIos:F("bg-ios-light-surface-variant",e("dark:bg-ios-dark-surface-variant")),groupTitleBgMaterial:F("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),menuListItemTextIos:F("text-black",e("dark:text-white")),menuListItemTextMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),menuListItemBgIos:F("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),menuListItemBgMaterial:F("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),menuListItemActiveTextIos:F("text-primary",e("dark:text-white")),menuListItemActiveTextMaterial:F("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),menuListItemActiveBgIos:F("bg-primary bg-opacity-15",e("dark:bg-primary")),menuListItemActiveBgMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),touchRipple:F("touch-ripple-black",e("dark:touch-ripple-white")),groupTitleContactsTextIos:F("text-opacity-90",e("dark:text-opacity-90")),groupTitleContactsTextMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),groupTitleContactsBgIos:F(e("dark:bg-[#323234]")),groupTitleContactsBgMaterial:F("bg-transparent",e("dark:bg-transparent")),...t}};function qy(){return qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qy.apply(this,arguments)}const vp=_.forwardRef((t,e)=>{const{component:n="li",colors:r,className:a,mediaClassName:i="",innerClassName:o="",innerChildren:s,contentClassName:l="",contentChildren:u,titleWrapClassName:c="",titleFontSizeIos:d="text-[17px]",titleFontSizeMaterial:p="text-[16px]",title:f,subtitle:g,text:y,after:v,media:b,header:x,footer:w,menuListItem:S,menuListItemActive:C,groupTitle:E,strongTitle:R="auto",label:T,chevron:$=void 0,chevronIos:P=!0,chevronMaterial:D=!0,chevronIcon:B,href:z,target:q,link:Y,linkComponent:J="a",linkProps:H={},dividers:L,contacts:Q,ios:Z,material:te,touchRipple:oe=!0,children:he,...ae}=t,de=_.useRef(null),ke=_.useRef(null);_.useImperativeHandle(e,()=>({el:ke.current}));const X=n,se={...ae},pe=typeof L>"u"?d8():L,Ne=wn({ios:Z,material:te}),Se=ut({ios:Z,material:te}),Te=Rt(),Pe=typeof $>"u"?Ne==="ios"?P:D:$,We=HX(r,Te),$e=S&&C,lt=We[`${$e?"menuListItemActiveText":S?"menuListItemText":"text"}${Ne==="ios"?"Ios":"Material"}`],Je=!!z||z===""||S||Y,Ze=!!T,Ve=Ne==="material"&&(Ze||Je)&&oe;Uo(de,Ve);const Vt=z===!0||z===!1||typeof z>"u"?void 0:z||"",$t=Je?J:Ze?"label":"div",Wt=Je?{href:Vt,target:q,...H}:{},Gt=f&&(g||y),Ot=R==="auto"&&Gt,wt=Se(GX({...t,titleFontSizeIos:d,titleFontSizeMaterial:p,dividers:pe,strongTitle:R,mediaClassName:i,innerClassName:o,contentClassName:l,titleWrapClassName:c},We,{isMediaItem:Gt,theme:Ne,textColor:lt,needsTouchRipple:Ve,isMenuListItemActive:$e,darkClasses:Te,autoStrongTitle:Ot,className:a}),a),ln=Je||Ze?wt.itemContent.link:wt.itemContent.default,hn=S?wt.title.menuListItem:R===!0||Ot?wt.title.strong:wt.title.default;return E?V.createElement(X,{className:F(wt.groupTitle,a)},f,he):V.createElement(X,qy({ref:ke,className:wt.base},se),V.createElement($t,qy({ref:de,className:ln},Wt),b&&V.createElement("div",{className:wt.media},b),V.createElement("div",{className:wt.inner},x&&V.createElement("div",{className:wt.header},x),(f||v)&&V.createElement("div",{className:wt.titleWrap},f&&V.createElement("div",{className:hn},f),v&&V.createElement("div",{className:wt.after},v),Je&&Pe&&!S&&(B||V.createElement(s8,{className:wt.chevron}))),g&&V.createElement("div",{className:wt.subtitle},g),y&&V.createElement("div",{className:wt.text},y),w&&V.createElement("div",{className:wt.footer},w),s),u),he)});vp.displayName="ListItem";function lE(){return lE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lE.apply(this,arguments)}const qX=t=>V.createElement("svg",lE({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"5",viewBox:"0 0 8 5",fill:"currentcolor"},t),V.createElement("polygon",{fillRule:"evenodd",points:"0 0 8 0 4 5"})),KX=(t,e,n)=>{let{isFloatingTransformed:r,isFocused:a,darkClasses:i,getLabelColor:o,hasLabel:s}=n;const{error:l,type:u,outline:c,inputClassName:d="",inputClass:p=""}=t;return{base:{common:"",ios:F(c&&"my-4"),material:F("py-2")},itemContent:{common:"relative",ios:F(c&&"ml-4 mr-4 rounded-lg",!c&&e.bgIos),material:F("min-h-[56px] ml-4 mr-4",c?F("rounded"):F(e.bgMaterial,"rounded-t relative "))},inner:{common:"",material:F(c?"pt-4 pb-4":"pt-2 pb-2"),stacked:"",floating:""},label:{common:F("duration-200 text-xs",o(),c&&"flex"),ios:F(c&&"-mt-4"),material:F(c&&"-mt-4"),stacked:"",floating:{common:F("pointer-events-none duration-200 transform origin-left rtl:origin-right max-w-[66%]",r&&"scale-133"),ios:r?c?"translate-y-6":"translate-y-4":"",material:r?c?"translate-y-8":"translate-y-3":""}},labelText:{common:F(c&&"relative p-1 block -m-1"),ios:F(c&&F("-top-1",e.outlineLabelBgIos)),material:F(c&&F("-top-2",e.outlineLabelBgMaterial))},inputWrap:{common:"relative",ios:F((!s||c)&&"-mt-2.5","-mb-2.5"),stacked:"",floating:""},media:{material:""},titleWrap:{material:`duration-200 ${o()}`},input:{common:`block text-base appearance-none w-full focus:outline-none bg-transparent ${d||p}`,ios:"h-10",material:"h-6",notFloating:{common:F("placeholder-black placeholder-opacity-30",i("dark:placeholder-white dark:placeholder-opacity-30")),material:F(u==="textarea"&&"py-1"),ios:F(u==="textarea"&&"py-2")},floating:r?"placeholder-transparent":F("placeholder-black placeholder-opacity-30",i("dark:placeholder-white dark:placeholder-opacity-30"))},errorInfo:{common:"text-xs relative z-10",ios:"mt-1",material:""},error:e.errorText,info:"opacity-50",clearButton:{common:"absolute end-0 top-1/2 transform -translate-y-1/2 cursor-pointer",ios:F("w-3.5 h-3.5 opacity-45 active:opacity-30",e.labelTextIos),material:F("w-6 h-6 active:opacity-55",e.labelTextMaterial)},dropdown:"absolute end-0 top-1/2 transform -translate-y-1/2 pointer-events-none opacity-50",border:{common:"pointer-events-none absolute start-0 bottom-0 duration-200 w-full",ios:c&&F(l?e.errorBorder:a?e.outlineBorderFocusIos:e.outlineBorderIos,"h-full border rounded-lg -z-10"),material:F(l?e.errorBorder:a?e.outlineBorderFocusMaterial:e.outlineBorderMaterial,c&&F("h-full border rounded -z-10",a&&"border-2"),!c&&F("border-b h-px origin-bottom",a&&"scale-y-[2]"))}}},XX=function(t,e){return t===void 0&&(t={}),{bgIos:"",bgMaterial:F("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),outlineBorderIos:F("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),outlineBorderFocusIos:"border-primary",outlineBorderMaterial:F("border-md-light-on-surface",e("dark:border-md-dark-on-surface")),outlineBorderFocusMaterial:F("border-md-light-primary",e("dark:border-md-dark-primary")),outlineLabelBgIos:F("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),outlineLabelBgMaterial:F("bg-md-light-surface",e("dark:bg-md-dark-surface")),labelTextIos:"",labelTextFocusIos:"",labelTextMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),labelTextFocusMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),errorText:"text-red-500",errorBorder:"border-red-500",...t}};function uE(){return uE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uE.apply(this,arguments)}const QX=_.forwardRef((t,e)=>{const{component:n="li",className:r,colors:a,label:i,floatingLabel:o,outline:s,outlineIos:l,outlineMaterial:u,media:c,input:d,info:p,error:f,clearButton:g,dropdown:y,inputId:v,inputStyle:b,inputClassName:x="",name:w,value:S,defaultValue:C,type:E="text",inputMode:R,readOnly:T,required:$,disabled:P,placeholder:D,size:B,accept:z,autoComplete:q,autoCorrect:Y,autoCapitalize:J,spellCheck:H,autoFocus:L,autoSave:Q,max:Z,min:te,step:oe,maxLength:he,minLength:ae,multiple:de,pattern:ke,tabIndex:X,onInput:se,onChange:pe,onFocus:Ne,onBlur:Se,onClear:Te,ios:Pe,material:We,children:$e,...lt}=t,Je=_.useRef(null),Ze=_.useRef(null);_.useImperativeHandle(e,()=>({el:Ze.current,inputEl:Je.current}));const[Ve,Vt]=_.useState(!1),$t=wn({ios:Pe,material:We}),Wt=ut({ios:Pe,material:We}),Gt=Rt(),Ot=XX(a,Gt),wt=i&&o?"floating":"stacked",ln=wt==="floating"?"floating":"notFloating",hn=()=>{if(Je.current)return Je.current.value},br=i&&o&&!(()=>{const Kr=hn();return typeof S>"u"?Kr||Kr===0:S||S===0})()&&!Ve,yn=()=>f?Ot.errorText:$t==="material"?Ve?Ot.labelTextFocusMaterial:Ot.labelTextMaterial:$t==="ios"?Ve?Ot.labelTextFocusIos:Ot.labelTextIos:"",Jn=Kr=>{Vt(!0),Ne&&Ne(Kr)},ui=Kr=>{Vt(!1),Se&&Se(Kr)},Qa=typeof s>"u"?$t==="ios"?l:u:s,un=Wt(KX({...t,outline:Qa},Ot,{isFloatingTransformed:br,isFocused:Ve,darkClasses:Gt,getLabelColor:yn,inputClassName:x,hasLabel:!!i})),la={...lt},Ya=()=>{if(d)return d;const Kr=E==="select"||E==="textarea"?E:"input",ts=Kr==="input";return V.createElement(Kr,{id:v,ref:Je,className:un.input[ln],style:b,name:w,type:ts?E:void 0,placeholder:D,inputMode:R,size:B,accept:z,autoComplete:q,autoCorrect:Y,autoCapitalize:J,spellCheck:H,autoFocus:L,autoSave:Q,disabled:P,max:Z,maxLength:he,min:te,minLength:ae,step:oe,multiple:de,readOnly:T,required:$,pattern:ke,tabIndex:X,value:S,defaultValue:C,onInput:se,onChange:pe,onFocus:Jn,onBlur:ui},E==="select"?$e:null)},Ta=V.createElement(V.Fragment,null,f&&f!==!0&&V.createElement("div",{className:F(un.errorInfo,un.error)},f),p&&!f&&V.createElement("div",{className:F(un.errorInfo,un.info)},p)),Co=V.createElement(V.Fragment,null,i&&V.createElement("div",{className:un.label[wt]},V.createElement("div",{className:un.labelText},i)),V.createElement("div",{className:un.inputWrap[wt]},Ya(),g&&V.createElement(Yf,{theme:$t,onClick:Te,className:un.clearButton}),y&&V.createElement(qX,{className:un.dropdown})),Ta);return V.createElement(vp,uE({ref:Ze,component:n,media:c,className:un.base,title:null,mediaClassName:un.media,innerClassName:un.inner[wt],contentClassName:un.itemContent,titleWrapClassName:un.titleWrap,innerChildren:Co,contentChildren:(Qa||$t==="material")&&V.createElement("span",{className:un.border}),dividers:$t==="material"||Qa?!1:void 0},la),E!=="select"?$e:null)});QX.displayName="ListInput";function cE(){return cE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cE.apply(this,arguments)}const YX=_.forwardRef((t,e)=>{const{children:n,...r}=t,a=_.useRef(null);_.useImperativeHandle(e,()=>({el:a.current}));const i={...r};return V.createElement(bp,cE({ref:a,menuList:!0},i),n)});YX.displayName="MenuList";function dE(){return dE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dE.apply(this,arguments)}const JX=_.forwardRef((t,e)=>{const{active:n,href:r,children:a,...i}=t,o=_.useRef(null);_.useImperativeHandle(e,()=>({el:o.current}));const s={...i};return V.createElement(vp,dE({ref:o,menuListItem:!0,menuListItemActive:n,href:r||!1},s),a)});JX.displayName="MenuListItem";const ZX=(t,e)=>{const{type:n}=t;return{message:{common:"max-w-[70%] box-border flex relative z-1 transform translate-z-0 mb-2 first:mt-2"},messageSent:{common:F("self-end",e.messageSent)},messageReceived:{common:e.messageReceived},messageName:{common:"text-xs",ios:F("mb-0.5 ms-4",e.messageNameIos),material:F("ms-4 mb-0.5",e.messageNameMd)},messageHeader:{common:"text-xs",ios:F("mb-0.5 ms-4",e.messageNameIos),material:F("ms-4 mb-0.5",e.messageNameMd)},messageFooter:{common:"text-xs",ios:F("mb-0.5 ms-4",e.messageNameIos),material:F("ms-4 mb-0.5",e.messageNameMd)},messageAvatar:{common:F("rounded-full relative bg-cover self-end shrink-0 me-1.5 w-8 h-8")},messageContent:{common:"flex flex-col"},messageBubble:{...n==="sent"&&{ios:F("rounded-3xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",e.bubbleSentIos),material:F("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4",e.bubbleSentMd)},...n==="received"&&{ios:F("rounded-2xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",e.bubbleReceivedIos),material:F("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4 ",e.bubbleReceivedMd)}},messageTextHeader:{common:"w-full text-left leading-tight text-sm opacity-80"},messageTextFooter:{common:"w-full text-left leading-tight text-sm opacity-80"},messageText:{common:"w-full text-left leading-tight"}}},eQ=function(t,e){return t===void 0&&(t={}),{messageSent:"text-white",messageReceived:"text-inherit",messageNameIos:F("text-black text-opacity-45",e("dark:text-white dark:text-opacity-45")),messageNameMd:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),bubbleSentIos:F("bg-primary"),bubbleSentMd:F("bg-md-light-primary",e("dark:bg-md-dark-primary dark:text-md-dark-on-primary")),bubbleReceivedIos:F("bg-[#e5e5ea]",e("dark:bg-[#252525]")),bubbleReceivedMd:F(e("dark:bg-md-dark-surface-variant"),"bg-[#e5e5ea]"),...t}};function pE(){return pE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pE.apply(this,arguments)}const tQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,text:o,name:s,type:l="sent",header:u,footer:c,textHeader:d,textFooter:p,avatar:f,ios:g,material:y,children:v,...b}=t,x=_.useRef(null);_.useImperativeHandle(e,()=>({el:x.current}));const w=ut({ios:g,material:y}),S=Rt(),C=eQ(a,S),E=w(ZX({...t},C)),R=n,T={...b},$=F(r,E.message,{[E.messageSent]:l==="sent",[E.messageReceived]:l==="received"});return V.createElement(R,pE({id:i,ref:x,className:$},T),f&&V.createElement("div",{className:E.messageAvatar},f),V.createElement("div",{className:E.messageContent},s&&V.createElement("div",{className:E.messageName},s),u&&V.createElement("div",{className:E.messageHeader},u),V.createElement("div",{className:E.messageBubble},d&&V.createElement("div",{className:E.messageTextHeader},d),o&&V.createElement("div",{className:E.messageText},o),p&&V.createElement("div",{className:E.messageTextFooter},p)),c&&V.createElement("div",{className:E.messageFooter},c)))});tQ.displayName="Message";const nQ=(t,e,n)=>{let{isFocused:r}=n;const{rightClassName:a="",rightClass:i="",leftClassName:o="",leftClass:s=""}=t;return{base:{common:"fixed bottom-0 start-0 w-full"},toolbar:{material:e.bgMessage},left:{common:F("mt-1 -ms-2",o||s),ios:F("px-2",e.toolbarIconIos),material:F("",e.toolbarIconMd)},right:{common:F("mt-1 -me-2",a||i),ios:F("px-2",e.toolbarIconIos)},messagebarArea:{common:"w-full"},messagebarInput:{common:F("block w-full focus:outline-none resize-none",r&&"outline-offset-0"),ios:F("border h-8 rounded-3xl px-4 leading-4 py-1.5",e.inputBgIos,e.borderIos,e.placeholderIos),material:F("rounded-3xl h-12 px-4 py-4 leading-4 ",e.inputBgMd,e.placeholderMd)}}},rQ=function(t,e){return t===void 0&&(t={}),{toolbarIconIos:F("fill-primary",e("dark:fill-md-dark-primary")),toolbarIconMd:F("fill-black"),inputBgIos:F("bg-transparent"),borderIos:F("border-[#c8c8cd]",e("dark:border-white dark:border-opacity-30")),inputBgMd:F("bg-md-light-surface-2",e("dark:bg-md-dark-surface-variant")),placeholderIos:F(e("dark:placeholder-white dark:placeholder-opacity-40")),placeholderMd:F("placeholder-md-light-on-surface-variant",e("dark:placeholder-md-dark-on-surface-variant")),bgIos:F("bg-white",e("dark:bg-black")),bgMaterial:F("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}},aQ=(t,e,n)=>{const{bgClassName:r="",bgClass:a="",outline:i,translucent:o,innerClassName:s="",innerClass:l="",tabbar:u,tabbarIcons:c,top:d}=t;return{base:{common:F("w-full z-20",ar("relative",n),!d&&"pb-safe")},bg:{common:F("absolute w-full h-full left-0 top-0",i&&(d?"hairline-b":"hairline-t"),r||a),ios:F(e.bgIos,o&&"translucent"),material:F(`${e.bgMaterial}`)},inner:{common:F("flex relative justify-between items-center w-full overflow-hidden",s||l),ios:F("pl-2-safe pr-2-safe",c?"h-12.5":"h-11"),material:F(u?"":"pl-2-safe pr-2-safe",c?"h-20":"h-14")},highlight:{common:F(d?"bottom-0":"top-0","absolute left-0 w-full h-0.5 duration-200 pointer-events-none transition-transform"),ios:e.tabbarHighlightBgIos,material:e.tabbarHighlightBgMaterial}}},iQ=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-ios-light-surface-2",e("dark:bg-ios-dark-surface-2")),bgMaterial:F("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),tabbarHighlightBgIos:"bg-primary",tabbarHighlightBgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function hE(){return hE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hE.apply(this,arguments)}const fE=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,translucent:i=!0,bgClassName:o="",innerClassName:s="",outline:l,tabbar:u,tabbarIcons:c,tabbarLabels:d,top:p,ios:f,material:g,children:y,...v}=t,b=_.useRef(null),x=_.useRef(null);_.useImperativeHandle(e,()=>({el:x.current}));const w=n,[S,C]=_.useState({transform:"",width:""}),E=wn({ios:f,material:g}),R=ut({ios:f,material:g}),T=Rt(),$={...v},P=iQ(a,T),D=R(aQ({...t,outline:typeof l>"u"?E==="ios":l,translucent:i,bgClassName:o,innerClassName:s},P,r),r),B=E==="material"&&u&&!c;return _.useEffect(()=>{if(B&&b.current){const z=b.current.previousElementSibling,q=1/z.children.length*100,Y=[...z.children].indexOf(z.querySelector(".k-tabbar-link-active"));C({...S,width:`${q}%`,transform:`translateX(${Y*100}%)`})}},[y]),V.createElement(w,hE({ref:x,className:D.base},$),V.createElement("div",{className:D.bg}),V.createElement("div",{className:D.inner},y),B&&V.createElement("span",{className:D.highlight,style:S,ref:b}))});fE.displayName="Toolbar";function mE(){return mE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mE.apply(this,arguments)}const oQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,style:o,name:s,placeholder:l="Message",value:u,outline:c=!1,leftClassName:d="",rightClassName:p="",textareaId:f,disabled:g,size:y,left:v,right:b,ios:x,material:w,onInput:S,onChange:C,onFocus:E,children:R,...T}=t,$=_.useRef(null),P=_.useRef(null);_.useImperativeHandle(e,()=>({el:$.current,areaElRef:P.current}));const[D,B]=_.useState(!1),z=ut({ios:x,material:w}),q=Rt(),Y=rQ(a,q),J=Z=>{B(!0),E&&E(Z)},H=z(nQ({...t},Y,{isFocused:D})),L=n,Q={...T};return V.createElement(L,mE({ref:$,id:i,style:o,className:H.base},Q),V.createElement(fE,{colors:Y,outline:c},v&&V.createElement("div",{className:H.left},v),V.createElement("div",{className:H.messagebarArea},V.createElement("textarea",{id:f,ref:P,type:"textarea",className:H.messagebarInput,placeholder:l,name:s,size:y,disabled:g,onInput:S,onChange:C,onFocus:J,value:u})),b&&V.createElement("div",{className:H.right},b)))});oQ.displayName="Messagebar";const sQ=()=>({base:{common:F("flex flex-col relative z-1 px-2"),ios:"mb-12",material:"mb-16"}});function gE(){return gE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gE.apply(this,arguments)}const lQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,ios:o,material:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=ut({ios:o,material:s})(sQ({...t})),p=n,f={...u};return V.createElement(p,gE({id:i,className:d.base,ref:c},f),l)});lQ.displayName="Messages";const uQ=(t,e)=>({base:{common:F("text-center text-xs leading-none"),ios:F("w-full mt-2.5",e.titleIos),material:F("mt-4",e.titleMd)}}),cQ=function(t,e){return t===void 0&&(t={}),{titleIos:F("text-black text-opacity-45",e("dark:text-white dark:text-opacity-45")),titleMd:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function yE(){return yE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yE.apply(this,arguments)}const dQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,id:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=ut({ios:i,material:o}),p=Rt(),f=cQ(a,p),g=d(uQ({...t},f)),y=n,v={...u};return V.createElement(y,yE({id:s,className:g.base,ref:c},v),l)});dQ.displayName="MessagesTitle";const pQ=(t,e,n)=>{const{outline:r,translucent:a,large:i,medium:o,transparent:s,left:l,right:u,fontSizeIos:c,fontSizeMaterial:d,titleFontSizeIos:p,titleFontSizeMaterial:f,titleLargeFontSizeIos:g,titleLargeFontSizeMaterial:y,titleMediumFontSizeIos:v,titleMediumFontSizeMaterial:b,bgClassName:x="",bgClass:w="",subnavbarClassName:S="",subnavbarClass:C="",innerClassName:E="",innerClass:R="",leftClassName:T="",leftClass:$="",titleClassName:P="",titleClass:D="",subtitleClassName:B="",subtitleClass:z="",rightClassName:q="",rightClass:Y="",centerTitle:J}=t;return{base:{common:F("w-full z-20 top-0 pt-safe",(i||o)&&"pointer-events-none",ar("sticky",n)),ios:F(c,e.textIos),material:F(d,e.textMaterial)},bg:{common:F("absolute w-full h-full left-0 top-0",r&&"hairline-b",x||w),ios:F(e.bgIos,a&&"translucent"),material:`${e.bgMaterial}`},subnavbar:{common:F("relative flex items-center",S||C,(i||o)&&"pointer-events-auto"),ios:"h-11 pl-2-safe pr-2-safe",material:"h-14 pl-4-safe pr-4-safe"},inner:{common:F("flex relative items-center w-full overflow-hidden",E||R,(i||o)&&"pointer-events-auto z-10"),ios:F("pl-2-safe pr-2-safe h-11",!l&&u?"justify-end":"justify-between"),material:"justify-start h-16 pl-safe pr-safe"},titleContainer:{common:F("flex items-center px-4 relative",(i||o)&&"pointer-events-auto"),ios:F(o&&F(v,"h-11 font-semibold"),i&&F(g,"h-13 font-bold")),material:F(o&&F(b,"h-12 pb-4"),i&&F(y,"h-[5.5rem]"))},left:{common:F("flex justify-center items-center h-full",T||$),ios:"me-2 transform transform-gpu",material:"mx-1"},title:{common:F("whitespace-nowrap leading-tight",P||D,(i||o||s)&&"opacity-0",J?"absolute top-1/2 left-1/2 transform-gpu -translate-x-1/2 -translate-y-1/2 text-center":"text-start"),ios:F(`${p} font-semibold`,!J&&"first:mx-2"),material:F(`${f} font-normal`,!J&&"first:mx-4")},subtitle:{common:F("font-normal leading-none",B||z),ios:"text-2xs opacity-55",material:"text-sm opacity-85"},right:{common:F("flex justify-center items-center h-full",q||Y),ios:F("transform transform-gpu",J?"ms-2":"ms-auto"),material:"ms-auto me-1"}}},hQ=(t,e)=>({bgIos:F("bg-ios-light-surface-2",e("dark:bg-ios-dark-surface-2")),bgMaterial:F("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),textIos:F("text-black",e("dark:text-white")),textMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t});function bE(){return bE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bE.apply(this,arguments)}const Ky=_.forwardRef((t,e)=>{const{component:n="div",className:r,bgClassName:a="",innerClassName:i="",leftClassName:o="",titleClassName:s="",subtitleClassName:l="",rightClassName:u="",subnavbarClassName:c="",centerTitle:d,colors:p,translucent:f=!0,outline:g,medium:y,large:v,transparent:b,fontSizeIos:x="text-[17px]",fontSizeMaterial:w="text-[16px]",titleFontSizeIos:S="text-[17px]",titleFontSizeMaterial:C="text-[22px]",titleMediumFontSizeIos:E="text-[24px]",titleMediumFontSizeMaterial:R="text-[24px]",titleLargeFontSizeIos:T="text-[34px]",titleLargeFontSizeMaterial:$="text-[28px]",scrollEl:P,left:D,title:B,subtitle:z,right:q,subnavbar:Y,ios:J,material:H,children:L,...Q}=t,Z=_.useRef(null),te=_.useRef(0),oe=_.useRef(null),he=_.useRef(null),ae=_.useRef(null),de=_.useRef(null),ke=_.useRef(null),X=_.useRef(null);_.useImperativeHandle(e,()=>({el:Z.current}));const se=n,pe=wn({ios:J,material:H}),Ne=ut({ios:J,material:H}),Se=Rt(),Te={...Q},Pe=hQ(p,Se),We=Ve=>{const{scrollTop:Vt}=Ve.target;if(!b&&!v&&!y){X.current&&(de.current&&(de.current.style.opacity=""),oe.current&&(oe.current.style.opacity=""));return}const $t=te.current,Wt=Math.max(Math.min(Vt/$t,1),0);oe.current.style.opacity=b?-.5+Wt*1.5:"",(y||v)&&(oe.current.style.transform=`translateY(-${Wt*$t}px)`),ae.current&&(ae.current.style.transform=`translateY(-${Wt*$t}px)`,ae.current.style.opacity=1-Wt*2),de.current&&(de.current.style.opacity=-.5+Wt*1.5),(y||v)&&ke.current&&(ke.current.style.transform=`translateY(-${Wt*$t}px)`)},$e=()=>typeof P>"u"?Z.current&&Z.current.parentNode:P.current||P,lt=()=>{if(!v&&!y&&!b){X.current&&(We({target:{scrollTop:0}}),X.current=!1);return}X.current=!0,ae.current?te.current=ae.current.offsetHeight:te.current=he.current.offsetHeight;const Ve=$e();Ve?(Ve.addEventListener("scroll",We),We({target:Ve})):We({target:{scrollTop:0}})},Je=()=>{const Ve=$e();Ve&&Ve.removeEventListener("scroll",We)};_.useEffect(()=>(lt(),Je));const Ze=Ne(pQ({...t,centerTitle:typeof d>"u"?pe==="ios":d,translucent:f,outline:typeof g>"u"?pe==="ios":g,fontSizeIos:x,fontSizeMaterial:w,titleFontSizeIos:S,titleFontSizeMaterial:C,titleMediumFontSizeIos:E,titleMediumFontSizeMaterial:R,titleLargeFontSizeIos:T,titleLargeFontSizeMaterial:$,bgClassName:a,innerClassName:i,leftClassName:o,titleClassName:s,subtitleClassName:l,rightClassName:u,subnavbarClassName:c},Pe,r),r);return V.createElement(se,bE({ref:Z,className:Ze.base},Te),V.createElement("div",{className:Ze.bg,ref:oe}),V.createElement("div",{className:Ze.inner,ref:he},D&&V.createElement("div",{className:Ze.left},D),(B||z)&&V.createElement("div",{className:Ze.title,ref:de},B,z&&V.createElement("div",{className:Ze.subtitle},z)),q&&V.createElement("div",{className:Ze.right},q),L),(v||y)&&V.createElement("div",{className:Ze.titleContainer,ref:ae},B),Y&&V.createElement("div",{className:Ze.subnavbar,ref:ke},Y))});Ky.displayName="Navbar";function Xy(){return Xy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xy.apply(this,arguments)}const p8=t=>{let{theme:e,...n}=t;return e==="ios"?V.createElement("svg",Xy({xmlns:"http://www.w3.org/2000/svg",width:"12",height:"20",viewBox:"0 0 12 20",fill:"currentcolor"},n),V.createElement("path",{d:"M0.18261596,9.4221638 C0.21783626,9.37068075 0.25835058,9.32165682 0.30416276,9.27584463 L9.1425872,0.4374202 C9.7256776,-0.14567018 10.6691555,-0.1475686 11.2590259,0.44230183 C11.8448123,1.02808827 11.8502479,1.97240019 11.2639075,2.55874056 L3.82594417,9.9967039 L11.2578297,17.4285894 C11.8409201,18.0116798 11.8428185,18.9551577 11.252948,19.5450281 C10.6671616,20.1308146 9.7228497,20.1362501 9.13650932,19.5499097 L0.2980849,10.7114853 C-0.0545897,10.3588107 -0.0959125,9.8144953 0.18261596,9.4221638 Z"})):V.createElement("svg",Xy({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentcolor"},n),V.createElement("polygon",{points:"16 7 3.83 7 9.42 1.41 8 0 0 8 8 16 9.41 14.59 3.83 9 16 9"}))},fQ=()=>({base:{common:"cursor-pointer",material:"min-w-12 k-touch-ripple-inset"},icon:"rtl:rotate-180"});function vE(){return vE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vE.apply(this,arguments)}const mQ=_.forwardRef((t,e)=>{const{component:n="a",className:r,text:a="Back",showText:i="auto",ios:o,material:s,onClick:l,children:u,...c}=t,d=_.useRef(null);_.useImperativeHandle(e,()=>({el:d.current}));const p={...c},f=wn({ios:o,material:s}),g=ut({ios:o,material:s}),y=i==="auto"&&f==="ios"||i===!0,v=g(fQ(),r);return V.createElement(Nt,vE({ref:d,component:n,className:v.base,navbar:!0},p,{onClick:l}),V.createElement("span",{className:v.icon},V.createElement(p8,{theme:f})),y&&V.createElement("span",null,a),u)});mQ.displayName="NavbarBackLink";const gQ=(t,e,n)=>{const{opened:r,translucent:a}=t;return{base:{common:F(ar("absolute",n),"z-50 transform transition-transform-opacity box-border duration-500",!r&&"-translate-y-full opacity-0 pointer-events-none transition duration-500","md:w-[568px] md:end-auto md:start-1/2 md:-ms-[256px]"),ios:F("rounded-xl px-2.5 py-2.5 start-2 end-2 top-2 shadow-lg",e.bgIos,a&&"translucent"),material:F("rounded-2xl py-5 px-4 start-4 end-4 top-4",e.bgMaterial)},content:{common:"",ios:"mt-2.5 ",material:F("mt-2")},header:{common:F("flex justify-start"),ios:"items-center",material:"items-start"},icon:{ios:F("me-2"),material:"me-4"},contentTitle:{material:F("flex flex-row items-center")},title:{ios:F("tracking-wide text-[13px] uppercase",e.titleIos),material:F("font-medium")},titleRightText:{ios:F("me-1 ms-auto text-[13px]",e.titleRightIos),material:F("ms-1 text-xs before:w-0.75 before:h-0.75 before:rounded-full before:inline-block before:align-middle before:me-1",e.titleRightMd)},button:{ios:F("me-1 ms-auto cursor-pointer"),material:F("ms-auto cursor-pointer")},deleteIcon:{ios:F("w-5 h-5",e.deleteIconIos),material:F("w-6 h-6",e.deleteIconMd)},subtitle:{ios:F("text-[15px] font-semibold",e.subtitleIos),material:F("text-sm")},text:{ios:F("text-[15px]"),material:F("text-sm",e.textMaterial)}}},yQ=(t,e)=>({bgIos:F("bg-white",e("dark:bg-[#1e1e1e]")),bgMaterial:F("bg-md-light-surface-5",e("dark:bg-md-dark-surface-5")),titleIos:F("text-black",e("dark:text-white")),titleRightIos:F("text-opacity-45 text-black",e("dark:text-white dark:text-opacity-45")),titleRightMd:F("text-md-light-on-surface-variant before:bg-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant before:dark:bg-md-dark-on-surface-variant")),subtitleIos:F("text-black ",e("dark:text-white")),textMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant ")),deleteIconIos:F("fill-stone-400 active:fill-stone-200",e("dark:fill-stone-500 dark:active:fill-stone-700")),deleteIconMd:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t});function Qy(){return Qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qy.apply(this,arguments)}const bQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,button:i,icon:o,title:s,titleRightText:l,subtitle:u,text:c,translucent:d=!0,opened:p,onClose:f,ios:g,material:y,children:v,...b}=t,x=_.useRef(null);_.useImperativeHandle(e,()=>({el:x.current}));const w=n,S={...b},C=wn({ios:g,material:y}),E=ut({ios:g,material:y}),R=Rt(),T=yQ(a,R),$=E(gQ({...t,translucent:d},T,r),r);return C==="ios"?V.createElement(w,Qy({ref:x,className:$.base},S),V.createElement("div",{className:$.header},o&&V.createElement("div",{className:$.icon},o),s&&V.createElement("div",{className:$.title},s),l&&V.createElement("div",{className:$.titleRightText},l),i&&V.createElement("div",{className:$.button,role:"button",tabIndex:"0",onClick:f},V.createElement(Yf,{theme:C,className:$.deleteIcon}))),V.createElement("div",{className:$.content},u&&V.createElement("div",{className:$.subtitle},u),c&&V.createElement("div",{className:$.text},c),v)):V.createElement(w,Qy({ref:x,className:$.base},S),V.createElement("div",{className:$.header},o&&V.createElement("div",{className:$.icon},o),V.createElement("div",{className:$.contentWrapper},V.createElement("div",{className:$.contentTitle},s&&V.createElement("div",{className:$.title},s),l&&V.createElement("div",{className:$.titleRightText},l)),V.createElement("div",{className:$.content},u&&V.createElement("div",{className:$.subtitle},u),c&&V.createElement("div",{className:$.text},c),v)),i&&V.createElement("div",{className:$.button,role:"button",tabIndex:"0",onClick:f},V.createElement(Yf,{theme:C,className:$.deleteIcon}))))});bQ.displayName="Notification";const vQ=(t,e,n)=>({base:{common:F("h-full w-full left-0 top-0 overflow-auto",ar("absolute",n)),ios:e.bgIos,material:e.bgMaterial}}),xQ=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-ios-light-surface",e("dark:bg-ios-dark-surface")),bgMaterial:F("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}};function xE(){return xE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xE.apply(this,arguments)}const Yy=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,...l}=t,u=_.useRef(null);_.useImperativeHandle(e,()=>({el:u.current}));const c=n,d={...l},p=ut({ios:i,material:o}),f=Rt(),g=xQ(a,f),y=p(vQ(t,g,r),r);return V.createElement(c,xE({ref:u,className:y.base},d),s)});Yy.displayName="Page";const wQ=(t,e,n)=>{const{size:r,floating:a}=t;return{base:{common:F("transition-transform transform duration-400 z-40 max-w-full overflow-hidden",a?"top-2-safe bottom-2-safe !h-auto":"top-0 max-h-full",e.bg,ar("fixed",n),r),ios:"",material:"ease-material-in"},left:{common:F("no-safe-areas-right",a?"right-full -mr-2 rounded-2xl":"right-full"),material:F(!a&&"rounded-r-2xl"),opened:"translate-x-full",closed:"-translate-x-2"},right:{common:F("no-safe-areas-left",a?"left-full -ml-2 rounded-2xl":"left-full"),material:F(!a&&"rounded-l-2xl"),opened:"-translate-x-full",closed:"translate-x-2"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},kQ=function(t,e){return t===void 0&&(t={}),{bg:F("bg-white",e("dark:bg-black")),...t}};function wE(){return wE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wE.apply(this,arguments)}const h8=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,size:i="w-72 h-screen",side:o="left",opened:s,backdrop:l=!0,floating:u=!1,onBackdropClick:c,ios:d,material:p,children:f,...g}=t,y=_.useRef(null);_.useImperativeHandle(e,()=>({el:y.current}));const v=s?"opened":"closed",b=n,x={...g},w=ut({ios:d,material:p}),S=Rt(),C=kQ(a,S),E=w(wQ({...t,size:i,floating:u},C,r),r),R=F(E.base,E[o][v]);return V.createElement(V.Fragment,null,l&&V.createElement("div",{className:E.backdrop[v],onClick:c}),V.createElement(b,wE({ref:y,className:R},x),f))});h8.displayName="Panel";const SQ=t=>{let{popoverEl:e,targetEl:n,angleEl:r,needsAngle:a,targetX:i,targetY:o,targetWidth:s=0,targetHeight:l=0,theme:u}=t;n.current?n=n.current:n.value?n=n.value:n.el?n=n.el:n.$el&&(n=n.$el),typeof n=="string"&&(n=document.querySelector(n));let c=document.body.offsetWidth,d=document.body.offsetHeight;c===0&&(c=window.innerWidth),d===0&&(d=window.innerHeight);const[p,f]=[e.offsetWidth,e.offsetHeight];let g=0,y,v,b="";a&&(g=r.offsetWidth/2);let x,w;const S=window.getComputedStyle(n);let C=parseInt(S.getPropertyValue("--k-safe-area-top"),10)||0,E=parseInt(S.getPropertyValue("--k-safe-area-left"),10)||0,R=parseInt(S.getPropertyValue("--k-safe-area-right"),10)||0;if(Number.isNaN(C)&&(C=0),Number.isNaN(E)&&(E=0),Number.isNaN(R)&&(R=0),n){s=n.offsetWidth,l=n.offsetHeight;const Y=n.getBoundingClientRect();x=Y.left,w=Y.top}else typeof i<"u"&&o!=="undefined"&&(x=i,w=o);let[T,$,P]=[0,0,0];const D=u==="ios"?13:23;let B="top";f+g<w-C?$=w-f-g:f+g<d-w-l?(B="bottom",$=w+l+g):(B="middle",$=l/2+w-f/2,P=$,$=Math.max(5,Math.min($,d-f-5)),P-=$),B==="top"||B==="bottom"?(T=s/2+x-p/2,P=T,T=Math.max(5,Math.min(T,c-p-5)),E&&(T=Math.max(T,E)),R&&T+p>c-5-R&&(T=c-5-R-p),B==="top"&&(b="bottom"),B==="bottom"&&(b="top"),P-=T,y=p/2-g+P,y=Math.max(Math.min(y,p-g*2-D),D)):B==="middle"&&(T=x-p-g,b="right",(T<5||T+p+R>c||T<E)&&(T<5&&(T=x+s+g),T+p+R>c&&(T=c-p-5-R),T<E&&(T=E),b="left"),v=f/2-g+P,v=Math.max(Math.min(v,f-g*2-D),D));const z=B,q=T<x?"left":"right";return{set:!0,angleTop:typeof v>"u"?void 0:`${v}px`,angleLeft:typeof y>"u"?void 0:`${y}px`,anglePosition:b,popoverTop:`${$}px`,popoverLeft:`${T}px`,popoverPosition:`${z}-${q}`}},CQ=(t,e,n)=>{const{size:r,translucent:a,angleClassName:i,angleClass:o}=t;return{base:{common:F("transition-transform-opacity z-40 no-safe-areas",ar("fixed",n),r),ios:"duration-300",material:"duration-400 ease-material-in",opened:"",closed:{common:"opacity-0 pointer-events-none",ios:"",material:"scale-x-90 scale-y-75"}},inner:{common:F("overflow-hidden relative"),ios:F("rounded-xl",a&&"translucent",e.bgIos),material:F("rounded-[1.75rem]",e.bgMaterial)},angleWrap:{common:F(i||o||"","pointer-events-none"),ios:F("absolute w-6.5 h-6.5 z-50 overflow-hidden",a&&"opacity-80"),material:F("absolute w-6.5 h-6.5 z-50 overflow-hidden"),bottom:"top-full",top:"bottom-full",left:"right-full",right:"left-full"},angleArrow:{common:F("absolute rounded w-full h-full transform rotate-45"),ios:e.bgIos,material:e.bgMaterial,bottom:"-top-4.75",top:"top-4.75",left:"left-4.75",right:"-left-4.75"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}}},EQ=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-ios-light-surface-3",e("dark:bg-ios-dark-surface-3")),bgMaterial:F("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),...t}};function kE(){return kE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kE.apply(this,arguments)}const NQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,angle:a=!0,angleClassName:i="",colors:o,size:s="w-64",opened:l,backdrop:u=!0,onBackdropClick:c,target:d,targetX:p,targetY:f,targetWidth:g,targetHeight:y,translucent:v=!0,ios:b,material:x,children:w,style:S={},...C}=t,E=_.useRef(null),R=_.useRef(null),[T,$]=_.useState({set:!1,angleTop:0,angleLeft:0,anglePosition:"bottom",popoverTop:0,popoverLeft:0,popoverPosition:"top-left"});_.useImperativeHandle(e,()=>({el:E.current}));const P=l?"opened":"closed",D=n,B={...C},z=wn({ios:b,material:x}),q=ut({ios:b,material:x}),Y=Rt(),J=EQ(o,Y),H=q(CQ({...t,size:s,angleClassName:i,translucent:v},J,r),r),L=()=>{!d||!E.current||!l||$(SQ({popoverEl:E.current,targetEl:d,angleEl:R.current,needsAngle:a,targetX:p,targetY:f,targetHeight:y,targetWidth:g,theme:z}))},Q=()=>{typeof window>"u"||window.addEventListener("resize",L)},Z=()=>{typeof window>"u"||window.removeEventListener("resize",L)};_.useEffect(()=>(Q(),()=>Z())),_.useEffect(()=>{L()},[l]);const te=T.set?{...S||{},left:T.popoverLeft,top:T.popoverTop}:S,oe=T.set?{left:T.angleLeft,top:T.angleTop}:void 0,he={"top-right":"origin-bottom-left","top-left":"origin-bottom-right","middle-left":"origin-right","middle-right":"origin-left","bottom-right":"origin-top-left","bottom-left":"origin-top-right"},ae=F(H.base[P],z==="material"&&he[T.popoverPosition]);return V.createElement(V.Fragment,null,u&&V.createElement("div",{className:H.backdrop[P],onClick:c}),V.createElement(D,kE({ref:E,className:ae,style:te},B),a&&V.createElement("div",{ref:R,style:oe,className:H.angleWrap[T.anglePosition]},V.createElement("div",{className:H.angleArrow[T.anglePosition]})),V.createElement("div",{className:H.inner},w)))});NQ.displayName="Popover";const TQ=(t,e,n)=>{const{size:r}=t;return{base:{common:F("left-1/2 top-1/2 transition-transform transform -translate-x-1/2 z-40 max-w-full max-h-full overflow-hidden md:no-safe-areas",e.bg,ar("fixed",n),r),ios:"duration-400 md:rounded-lg",material:" md:rounded-[1.75rem]",opened:{common:"-translate-y-1/2",material:F("ease-material-in-popup duration-[600ms]")},closed:{common:"translate-y-full",material:"duration-400"}},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},IQ=function(t,e){return t===void 0&&(t={}),{bg:F("bg-white",e("dark:bg-black")),...t}};function SE(){return SE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SE.apply(this,arguments)}const f8=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,size:i="w-screen h-screen md:w-160 md:h-160",opened:o,backdrop:s=!0,onBackdropClick:l,ios:u,material:c,children:d,...p}=t,f=_.useRef(null);_.useImperativeHandle(e,()=>({el:f.current}));const g=o?"opened":"closed",y=n,v={...p},b=ut({ios:u,material:c}),x=Rt(),w=IQ(a,x),S=b(TQ({...t,size:i},w,r),r);return V.createElement(V.Fragment,null,s&&V.createElement("div",{className:S.backdrop[g],onClick:l}),V.createElement(y,SE({ref:f,className:S.base[g]},v),d))});f8.displayName="Popup";function CE(){return CE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CE.apply(this,arguments)}const _Q=t=>V.createElement("svg",CE({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},t),V.createElement("path",{d:"M10,0 C10.5522847,0 11,0.44771525 11,1 L11,6 C11,6.55228475 10.5522847,7 10,7 C9.44771525,7 9,6.55228475 9,6 L9,1 C9,0.44771525 9.44771525,0 10,0 Z"}),V.createElement("path",{d:"M10,13 C10.5522847,13 11,13.4477153 11,14 L11,19 C11,19.5522847 10.5522847,20 10,20 C9.44771525,20 9,19.5522847 9,19 L9,14 C9,13.4477153 9.44771525,13 10,13 Z",opacity:".64"}),V.createElement("path",{d:"M13,10 C13,9.44771525 13.4477153,9 14,9 L19,9 C19.5522847,9 20,9.44771525 20,10 C20,10.5522847 19.5522847,11 19,11 L14,11 C13.4477153,11 13,10.5522847 13,10 Z",opacity:".82"}),V.createElement("path",{d:"M-3.8285687e-16,10 C-3.8285687e-16,9.44771525 0.44771525,9 1,9 L6,9 C6.55228475,9 7,9.44771525 7,10 C7,10.5522847 6.55228475,11 6,11 L1,11 C0.44771525,11 -3.8285687e-16,10.5522847 -3.8285687e-16,10 Z",opacity:".46"}),V.createElement("path",{d:"M2.92912627,2.92912627 C3.31965056,2.53860197 3.95281554,2.53860197 4.34333983,2.92912627 L7.87887373,6.46466017 C8.26939803,6.85518446 8.26939803,7.48834944 7.87887373,7.87887373 C7.48834944,8.26939803 6.85518446,8.26939803 6.46466017,7.87887373 L2.92912627,4.34333983 C2.53860197,3.95281554 2.53860197,3.31965056 2.92912627,2.92912627 Z",opacity:".37"}),V.createElement("path",{d:"M12.1211263,12.1211263 C12.5116506,11.730602 13.1448155,11.730602 13.5353398,12.1211263 L17.0708737,15.6566602 C17.461398,16.0471845 17.461398,16.6803494 17.0708737,17.0708737 C16.6803494,17.461398 16.0471845,17.461398 15.6566602,17.0708737 L12.1211263,13.5353398 C11.730602,13.1448155 11.730602,12.5116506 12.1211263,12.1211263 Z",opacity:".73"}),V.createElement("path",{d:"M12.1211263,7.87887373 C11.730602,7.48834944 11.730602,6.85518446 12.1211263,6.46466017 L15.6566602,2.92912627 C16.0471845,2.53860197 16.6803494,2.53860197 17.0708737,2.92912627 C17.461398,3.31965056 17.461398,3.95281554 17.0708737,4.34333983 L13.5353398,7.87887373 C13.1448155,8.26939803 12.5116506,8.26939803 12.1211263,7.87887373 Z",opacity:".91"}),V.createElement("path",{d:"M2.92912627,17.0708737 C2.53860197,16.6803494 2.53860197,16.0471845 2.92912627,15.6566602 L6.46466017,12.1211263 C6.85518446,11.730602 7.48834944,11.730602 7.87887373,12.1211263 C8.26939803,12.5116506 8.26939803,13.1448155 7.87887373,13.5353398 L4.34333983,17.0708737 C3.95281554,17.461398 3.31965056,17.461398 2.92912627,17.0708737 Z",opacity:".55"}));function EE(){return EE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EE.apply(this,arguments)}const RQ=t=>V.createElement("svg",EE({viewBox:"0 0 36 36"},t,{fill:"none",stroke:"currentcolor"}),V.createElement("circle",{cx:"18",cy:"18",r:"16"})),$Q=(t,e,n)=>{const{size:r}=t;return{base:{common:F(n==="ios"?"k-ios-preloader":"k-material-preloader",`inline-block ${r}`),ios:e.iconIos,material:`stroke-4 ${e.iconMaterial}`},inner:{common:"block w-full h-full"}}},OQ=function(t,e){return t===void 0&&(t={}),{iconIos:"text-primary",iconMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function NE(){return NE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NE.apply(this,arguments)}const MQ=_.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,size:i="w-8 h-8",ios:o,material:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=wn({ios:o,material:s}),g=ut({ios:o,material:s}),y=Rt(),v=OQ(a,y),b=f==="ios"?_Q:RQ,x=g($Q({...t,size:i},v,f),r);return V.createElement(d,NE({ref:c,className:x.base},p),V.createElement("span",{className:x.inner},V.createElement(b,{className:"w-full h-full"})),l)});MQ.displayName="Preloader";const PQ=t=>({base:{common:"block h-1 bg-opacity-30 dark:bg-opacity-30 overflow-hidden rtl:rotate-180",ios:"bg-black rounded-full",material:t.bgMaterial},inner:{common:"block duration-200 w-full h-full",ios:t.bgIos,material:t.bgMaterial}}),FQ=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-primary",bgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function TE(){return TE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TE.apply(this,arguments)}const AQ=_.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,ios:i,material:o,progress:s=0,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=ut({ios:i,material:o}),g=Rt(),y=FQ(a,g),v=f(PQ(y),r);return V.createElement(d,TE({ref:c,className:v.base},p),V.createElement("span",{className:v.inner,style:{transform:`translateX(-${100-s/1*100}%)`}}),l)});AQ.displayName="Progressbar";const DQ=(t,e,n,r)=>({base:F("cursor-pointer inline-flex align-middle",ar("relative",n),r("dark:touch-ripple-white")),iconWrap:{common:"flex items-center justify-center rounded-full",ios:"w-5.5 h-5.5 border",material:"w-5 h-5 border-2",notChecked:{ios:e.borderIos,material:e.borderMaterial},checked:{ios:e.borderCheckedIos,material:e.borderCheckedMaterial}},icon:{ios:"text-primary",material:`w-3 h-3 rounded-full ${e.bgCheckedMaterial}`,notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:"bg-white w-3/4",ios:"h-0.25",material:"h-0.5"},input:{common:"hidden"}}),LQ=function(t,e){return t===void 0&&(t={}),{borderIos:F("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),borderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:F("border-md-light-primary",e("dark:border-md-dark-primary")),...t}};function IE(){return IE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IE.apply(this,arguments)}const zQ=_.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,name:s,value:l,disabled:u,readOnly:c,onChange:d,ios:p,material:f,touchRipple:g=!0,children:y,...v}=t,b=_.useRef(null);_.useImperativeHandle(e,()=>({el:b.current}));const x=n,w={...v},S=wn({ios:p,material:f}),C=ut({ios:p,material:f}),E=Rt();Uo(b,S==="material"&&g);const R=LQ(a,E),T=o||i&&!d?"checked":"notChecked",$=C(DQ(t,R,r,E),r);return V.createElement(x,IE({ref:b,className:$.base},w),V.createElement("input",{type:"radio",name:s,value:l,disabled:u,readOnly:c,checked:o,defaultChecked:i,onChange:d,className:$.input}),V.createElement("i",{className:$.iconWrap[T]},S==="ios"?V.createElement(u8,{className:$.icon[T]}):V.createElement("span",{className:$.icon[T]})),y)});zQ.displayName="Radio";const BQ=(t,e,n)=>({base:{common:"block relative select-none w-full self-center touch-pan-y",ios:"h-7",material:"h-5"},trackBg:{common:F("absolute top-1/2 left-0 w-full transform -translate-y-1/2 bg-black bg-opacity-20",n("dark:bg-white dark:bg-opacity-20")),ios:"h-1 rounded-full",material:"h-0.5"},trackValue:{common:"absolute top-1/2 start-0 w-full transform -translate-y-1/2",ios:`h-1 rounded-full ${e.valueBgIos}`,material:`h-0.5 ${e.valueBgMaterial}`},input:{common:"appearance-none w-full bg-transparent cursor-pointer block focus:outline-none relative",ios:"h-7",material:"h-5"},inputThumb:{common:"range-thumb:relative range-thumb:appearance-none range-thumb:rounded-full range-thumb:border-none",ios:`range-thumb:w-7 range-thumb:h-7 range-thumb:-mt-3.5 ${e.thumbBgIos} range-thumb:shadow-ios-toggle`,material:`range-thumb:w-3 range-thumb:h-3 ${e.thumbBgMaterial} range-thumb:-mt-1.5 range-thumb:transform range-thumb:duration-200 active:range-thumb:scale-150`},inputTrack:{common:"range-track:appearance-none range-track:h-px"}}),jQ=function(t,e){return t===void 0&&(t={}),{valueBgIos:"bg-primary",valueBgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),thumbBgIos:"range-thumb:bg-white",thumbBgMaterial:F("range-thumb:bg-md-light-primary",e("dark:range-thumb:bg-md-dark-primary")),...t}};function _E(){return _E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_E.apply(this,arguments)}const Jy=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,inputId:l,name:u,value:c=void 0,defaultValue:d,readOnly:p,disabled:f,step:g=1,min:y=0,max:v=100,onInput:b,onChange:x,onFocus:w,onBlur:S,...C}=t,E=_.useRef(null);_.useImperativeHandle(e,()=>({el:E.current}));const R=n,T={...C},$=ut({ios:i,material:o}),P=Rt(),D=jQ(a,P),B=$(BQ(t,D,P),r),z=((c||0)-y)/(v-y)*100;return V.createElement(R,_E({ref:E,className:B.base},T),V.createElement("span",{className:B.trackBg}),V.createElement("span",{className:B.trackValue,style:{width:`${z}%`}}),V.createElement("input",{className:F(B.input,B.inputThumb,B.inputTrack),type:"range",id:l,name:u,min:y,max:v,step:g,value:c,defaultValue:d,readOnly:p,disabled:f,onInput:b,onChange:x,onFocus:w,onBlur:S}))});Jy.displayName="Range";const UQ=(t,e,n)=>{let{isEnabled:r,darkClasses:a}=n;return{base:{common:"relative flex overflow-hidden items-center",ios:"px-2 w-full",material:"px-0 py-2 -mx-2 w-[calc(100%+32px)]"},inner:{common:"w-full shrink-1 relative",ios:"transition-all duration-300"},searchIconWrap:{common:"absolute inset-y-0 flex items-center z-40",ios:"start-2",material:"start-4"},clearButton:{common:"absolute justify-center inset-y-0 flex items-center z-40 cursor-pointer end-0",ios:"w-8 h-8",material:"w-12 h-12"},input:{common:"block appearance-none  w-full py-2  focus:outline-none z-30",ios:F("h-8 bg-black/10 pl-7 pr-7 rounded-lg text-base",a("dark:placeholder-white dark:placeholder-opacity-30 dark:bg-white/10"),e.placeholderIos,e.inputBgIos),material:F("h-12 ps-12 pe-4 rounded-full",e.placeholderMaterial,e.inputBgMaterial)},deleteIcon:{common:"",ios:"w-3.5 h-3.5 opacity-45",material:"w-6 h-6 active:opacity-20"},searchIcon:{common:"",ios:F("w-4 h-4 opacity-45"),material:F("w-5 h-5 z-30",r?"opacity-0 transform rotate-90 scale-50 transition-transform-opacity  duration-400 ":"block transform transition-transform-opacity scale-100 rotate-0 duration-400")},cancelButton:{ios:F("ps-2 flex items-center h-8 cursor-pointer bg-transparent text-primary shrink-0 z-40 transition-all duration-300 active:opacity-30",r?"":"opacity-0"),material:F("absolute left-4 cursor-pointer",r?"z-40 transform scale-100 rotate-0 transition-transform-opacity  duration-400":"opacity-0 transform -rotate-90 scale-50 transition-transform-opacity duration-400")}}},VQ=function(t,e){return t===void 0&&(t={}),{inputBgIos:"",inputBgMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),placeholderIos:"",placeholderMaterial:F("placeholder-md-light-on-surface-variant",e("dark:placeholder-md-dark-on-surface-variant")),...t}};function Zy(){return Zy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zy.apply(this,arguments)}const WQ=t=>{let{theme:e,...n}=t;return e==="ios"?V.createElement("svg",Zy({xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 56 56",fill:"currentcolor"},n),V.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"})):V.createElement("svg",Zy({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 56 56",fill:"currentcolor"},n),V.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"}))};function RE(){return RE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RE.apply(this,arguments)}const GQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,placeholder:i="Search",value:o,inputId:s,inputStyle:l,disableButton:u=!1,disableButtonText:c="Cancel",clearButton:d=!0,onInput:p,onChange:f,onFocus:g,onBlur:y,onClear:v,onDisable:b,ios:x,material:w,...S}=t,C=_.useRef(null),E=_.useRef(null),R=_.useRef(null),[T,$]=_.useState(0),P=_.useRef(null),D=_.useRef(!1);_.useImperativeHandle(e,()=>({el:E.current,searchEl:C.current}));const[B,z]=_.useState(!1),q=wn({ios:x,material:w}),Y=ut({ios:x,material:w}),J=Rt(),H=VQ(a,J),L=pe=>{p&&p(pe)},Q=pe=>{f&&f(pe)},Z=pe=>{z(!0),g&&g(pe)},te=pe=>{y&&y(pe)},oe=()=>{o||(P.current=setTimeout(()=>{z(!1)}))},he=()=>{clearTimeout(P.current)},ae=pe=>{pe.preventDefault(),z(!1),C.current&&C.current.blur(),b&&b(),v&&v()};_.useEffect(()=>{R.current&&$(R.current.offsetWidth),requestAnimationFrame(()=>{requestAnimationFrame(()=>{D.current=!0})})},[]);const de=Y(UQ({...t},H,{isEnabled:B,darkClasses:J})),ke=q==="ios"?V.createElement("button",{type:"button",ref:R,style:{marginRight:B?0:`-${T}px`,transitionDuration:D.current?"":"0ms"},className:de.cancelButton,onClick:ae,onPointerDown:pe=>pe.preventDefault()},c):V.createElement(p8,{theme:q,onClick:ae,className:F(de.cancelButton),onPointerDown:pe=>pe.preventDefault()}),X=n,se={...S};return V.createElement(X,RE({ref:E,className:de.base},se,{onBlurCapture:oe,onFocusCapture:he}),V.createElement("div",{className:de.inner},V.createElement("span",{className:de.searchIconWrap},V.createElement(WQ,{ios:x,material:w,className:de.searchIcon})),V.createElement("input",{id:s,ref:C,className:F(de.input),style:l,type:"text",name:"search",placeholder:i,value:o,onInput:L,onChange:Q,onFocus:Z,onBlur:te}),o&&d&&V.createElement("button",{className:de.clearButton,onClick:v,type:"button"},V.createElement(Yf,{theme:q,className:de.deleteIcon}))),u&&ke)});GQ.displayName="Searchbar";const HQ=(t,e,n)=>{const{outline:r,rounded:a}=t;return{base:{common:"flex justify-center items-center overflow-hidden w-full",square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},raised:r?"shadow":"shadow divide-x divide-black divide-opacity-10 rtl:divide-x-reverse",outline:{common:"",ios:`${e.borderIos} border-2`,material:`${e.borderMaterial} border`},outlineInner:{common:"-m-0.5 flex w-full justify-center items-center rtl:divide-x-reverse",ios:`divide-x-2 ${e.divideIos}`,material:`divide-x ${e.divideMaterial}`},strong:{common:F("p-0.5 space-x-1 relative"),ios:e.strongBgIos,material:e.strongBgMaterial},strongHighlight:{common:F("absolute start-0.5 top-0.5 bottom-0.5 !ms-0 pointer-events-none duration-200",a&&"rounded-full","bg-white shadow",n("dark:bg-opacity-15 dark:touch-ripple-white")),ios:F(!a&&"rounded"),material:F(!a&&"rounded-md")}}},qQ=function(t,e){return t===void 0&&(t={}),{strongBgIos:F("bg-black bg-opacity-5",e("dark:bg-white dark:bg-opacity-10")),strongBgMaterial:F("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),borderIos:"border-primary",borderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),divideIos:"divide-primary",divideMaterial:F("divide-md-light-outline",e("dark:divide-md-dark-outline")),...t}};function $E(){return $E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$E.apply(this,arguments)}const KQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,raised:s,outline:l,strong:u,rounded:c,children:d,...p}=t,f=_.useRef(null),g=_.useRef(null);_.useImperativeHandle(e,()=>({el:f.current}));const[y,v]=_.useState({transform:"",width:""}),b=n,x={...p},w=ut({ios:i,material:o}),S=Rt(),C=qQ(a,S),E=w(HQ(t,C,S)),R=F(c?E.base.rounded:E.base.square,s&&E.raised,l&&E.outline,u&&E.strong,r);return _.useEffect(()=>{if(u&&g.current){const T=g.current.parentElement,$=T.children.length-1,P=[...T.children].indexOf(T.querySelector(".k-segmented-strong-button-active")),D="4px";v({...y,width:`calc((100% - 2px * 2 - ${D} * (${$} - 1)) / ${$})`,transform:`translateX(calc((${P} * 100% + ${P} * ${D}) * var(--k-rtl-reverse)))`})}},[d]),V.createElement(b,$E({ref:f,className:R},x),l?V.createElement("span",{className:E.outlineInner},d):d,u&&V.createElement("span",{ref:g,className:E.strongHighlight,style:y}))});KQ.displayName="Segmented";function OE(){return OE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OE.apply(this,arguments)}const XQ=_.forwardRef((t,e)=>{const{active:n,children:r,outline:a,strong:i,clear:o,rounded:s,...l}=t,u=_.useRef(null);return _.useImperativeHandle(e,()=>({el:u.current})),V.createElement(hr,OE({ref:u,segmented:!0,segmentedActive:n,segmentedStrong:i,rounded:s&&i},l),r)});XQ.displayName="SegmentedButton";const QQ=(t,e,n)=>({base:{common:F("left-0 top-full transition-transform duration-400 z-40 overflow-hidden",ar("fixed",n)),ios:"",material:`rounded-t-2xl ease-material-in ${e.bgIos}`,opened:`-translate-y-full ${e.bgMaterial}`,closed:""},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}),YQ=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-white",e("dark:bg-black")),bgMaterial:F("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}};function ME(){return ME=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ME.apply(this,arguments)}const JQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,opened:i,backdrop:o=!0,onBackdropClick:s,ios:l,material:u,children:c,...d}=t,p=_.useRef(null);_.useImperativeHandle(e,()=>({el:p.current}));const f=i?"opened":"closed",g=n,y={...d},v=ut({ios:l,material:u}),b=Rt(),x=YQ(a,b),w=v(QQ(t,x,r),r);return V.createElement(V.Fragment,null,o&&V.createElement("div",{className:w.backdrop[f],onClick:s}),V.createElement(g,ME({ref:p,className:w.base[f]},y),c))});JQ.displayName="Sheet";const ZQ=(t,e)=>{const{buttonsOnly:n}=t;return{base:`${e.text} inline-flex items-stretch`,raised:"shadow",size:{small:{ios:"h-6",material:"h-8"},medium:{ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},shape:{square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},button:{common:"relative flex items-center justify-center w-10 cursor-pointer overflow-hidden z-10 select-none"},buttonLeftShape:{square:{ios:"rounded-s",material:"rounded-s-lg"},rounded:"rounded-s-full"},buttonRightShape:{square:{ios:"rounded-e",material:"rounded-e-lg"},rounded:"rounded-e-full"},buttonStyle:{fill:{common:F(e.fillTouchRipple,n&&"first:border-r border-black border-opacity-10 rtl:first:border-l rtl:first:border-r-0"),ios:F(e.fillBgIos,e.fillTextIos,e.fillActiveBgIos),material:F(e.fillBgMaterial,e.fillTextMaterial,e.fillActiveBgMaterial)},outline:{common:F(e.touchRipple,"active:bg-opacity-15",n&&"first:border-r-0 rtl:last:border-r-0"),ios:F("border-2",e.textIos,e.activeBgIos,e.outlineBorderIos,n&&"rtl:first:border-r-2"),material:F("border",e.textMaterial,e.activeBgMaterial,e.outlineBorderMaterial,n&&"rtl:first:border-r")},clear:{common:`${e.touchRipple} active:bg-opacity-15 last:border-l rtl:last:border-l-0 rtl:first:border-l border-black border-opacity-10`,ios:F(e.textIos,e.activeBgIos),material:F(e.textMaterial,e.activeBgMaterial)}},input:{common:"focus:outline-none text-center appearance-none bg-transparent"},value:{common:"w-11 flex items-center justify-center font-medium",ios:`text-base ${e.textIos}`,material:`text-sm ${e.textMaterial}`,fill:{common:"",ios:`border-t-2 border-b-2 ${e.outlineBorderIos}`,material:`border-t border-b ${e.outlineBorderMaterial}`},outline:{common:"",ios:`border-t-2 border-b-2 ${e.outlineBorderIos}`,material:`border-t border-b ${e.outlineBorderMaterial}`},clear:"border-l border-black border-opacity-10"},hBar:"w-4 h-0.5 bg-current block",vBar:"w-0.5 h-4 bg-current block absolute inset-1/2 transform -translate-x-1/2 rtl:translate-x-1/2 -translate-y-1/2"}},eY=function(t,e){return t===void 0&&(t={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:F("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:F("text-white"),fillTextMaterial:F("text-md-light-on-primary",e("dark:text-md-dark-on-primary")),fillBgIos:"bg-primary",fillBgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillTouchRipple:F("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),touchRipple:"touch-ripple-primary",...t}};function PE(){return PE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PE.apply(this,arguments)}const tY=_.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,value:i=0,defaultValue:o,input:s=!1,inputType:l="text",inputPlaceholder:u,inputDisabled:c,inputReadOnly:d,buttonsOnly:p,rounded:f,roundedIos:g,roundedMaterial:y,small:v,smallIos:b,smallMaterial:x,large:w,largeIos:S,largeMaterial:C,raised:E,raisedIos:R,raisedMaterial:T,outline:$,outlineIos:P,outlineMaterial:D,onInput:B,onChange:z,onFocus:q,onBlur:Y,onMinus:J,onPlus:H,ios:L,material:Q,touchRipple:Z=!0,children:te,...oe}=t,he=_.useRef(null),ae=_.useRef(null),de=_.useRef(null);_.useImperativeHandle(e,()=>({el:he.current}));const ke=n,X=wn({ios:L,material:Q}),se=ut({ios:L,material:Q});Uo(ae,X==="material"&&Z),Uo(de,X==="material"&&Z);const pe=typeof f>"u"?X==="ios"?g:y:f,Ne=typeof v>"u"?X==="ios"?b:x:v,Se=typeof w>"u"?X==="ios"?S:C:w,Te=typeof E>"u"?X==="ios"?R:T:E,Pe=typeof $>"u"?X==="ios"?P:D:$,We=Rt(),$e=eY(a,We),lt=Se?"large":Ne?"small":"medium",Je=Pe&&Te?"clear":Pe?"outline":"fill",Ze=pe?"rounded":"square",Ve=se(ZQ({...t,rounded:pe,small:Ne,large:Se,raised:Te,outline:Pe},$e)),Vt={...oe},$t=F(Ve.base,Te&&Ve.raised,Ve.size[lt],Ve.shape[Ze],r),Wt=F(Ve.button,Ve.buttonStyle[Je],Ve.buttonLeftShape[Ze]),Gt=F(Ve.button,Ve.buttonStyle[Je],Ve.buttonRightShape[Ze]),Ot=F(s&&Ve.input,Ve.value[Je]);return V.createElement(ke,PE({ref:he,className:$t},Vt),V.createElement("span",{ref:ae,className:Wt,role:"button",tabIndex:"0",onClick:J},V.createElement("span",{className:Ve.hBar})),s&&!p&&V.createElement("input",{className:Ot,placeholder:u,type:l,value:i,defaultValue:o,disabled:c,readOnly:d,onInput:B,onChange:z,onFocus:q,onBlur:Y}),!s&&!p&&V.createElement("span",{className:Ot},i),V.createElement("span",{ref:de,className:Gt,role:"button",tabIndex:"0",onClick:H},V.createElement("span",{className:Ve.hBar}),V.createElement("span",{className:Ve.vBar})))});tY.displayName="Stepper";function FE(){return FE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FE.apply(this,arguments)}const m8=_.forwardRef((t,e)=>{const{labels:n,icons:r,children:a,...i}=t,o=_.useRef(null);_.useImperativeHandle(e,()=>({el:o.current}));const s={...i};return V.createElement(fE,FE({ref:o,tabbar:!0,tabbarIcons:r,tabbarLabels:n},s),a)});m8.displayName="Tabbar";const nY=function(t,e){let{hasIcon:n,hasLabel:r,active:a}=t===void 0?{}:t;return e===void 0&&(e={}),{content:{common:"flex flex-col items-center justify-center h-full",ios:F("py-1",a?e.textActiveIos:e.textIos),material:F("py-2",n&&r&&"space-y-1",a?e.textActiveMaterial:e.textMaterial)},iconContainer:{common:"flex items-center justify-center k-tabbar-link-icon relative",ios:F("w-7 h-7"),material:F("w-16 h-8 rounded-full")},iconBg:{common:"absolute left-0 top-0 w-full h-full rounded-full duration-200 -z-10 pointer-events-none",ios:F(a?e.iconBgActiveIos:e.iconBgIos),material:F(a?e.iconBgActiveMaterial:e.iconBgMaterial,!a&&"scale-x-[0.5] opacity-0")},label:{ios:F(n?"text-xs font-medium":"",""),material:F(n?"text-xs":"text-sm","font-medium")}}},rY=function(t,e){return t===void 0&&(t={}),{textIos:F("text-black text-opacity-40",e("dark:text-white dark:text-opacity-55")),textActiveIos:"text-primary",textMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),textActiveMaterial:F("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),iconBgIos:"",iconBgActiveIos:"",iconBgMaterial:"",iconBgActiveMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),...t}};function AE(){return AE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AE.apply(this,arguments)}const Jf=_.forwardRef((t,e)=>{const{className:n,active:r,ios:a,material:i,colors:o,linkProps:s={},icon:l,label:u,children:c,...d}=t,p=_.useRef(null);_.useImperativeHandle(e,()=>({el:p.current}));const f={...s,...d},g=Rt(),y=rY(o,g),v=ut({ios:a,material:i}),b=!!l,x=u||c&&c.length,w=v(nY({hasLabel:x,hasIcon:b,active:r},y));return V.createElement(Nt,AE({ref:p,tabbar:!0,tabbarActive:r,className:n},f),V.createElement("span",{className:w.content},l&&V.createElement("span",{className:w.iconContainer},V.createElement("span",{className:w.iconBg}),l),(u||c&&c.length)&&V.createElement("span",{className:w.label},u,c)))});Jf.displayName="TabbarLink";const aY=()=>({base:{common:"w-full border-none p-0 m-0 border-collapse text-left table",ios:"",material:""}});function DE(){return DE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DE.apply(this,arguments)}const iY=_.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=_.useRef(null);_.useImperativeHandle(e,()=>({el:s.current}));const l=ut({ios:r,material:a})(aY({...t})),u={...o};return V.createElement("table",DE({className:l.base,ref:s},u),i)});iY.displayName="Table";const oY=()=>({base:{common:"text-sm",ios:"",material:""}});function LE(){return LE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LE.apply(this,arguments)}const sY=_.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=_.useRef(null);_.useImperativeHandle(e,()=>({el:s.current}));const l=ut({ios:r,material:a})(oY({...t})),u={...o};return V.createElement("tbody",LE({className:l.base,ref:s},u),i)});sY.displayName="TableBody";const lY=(t,e,n)=>{const{header:r}=t;return{base:{common:F("align-middle",n),ios:F(r?`text-xs font-semibold overflow-hidden whitespace-nowrap leading-4 h-11 bg-transparent ${e.textHeaderIos} py-0 px-4`:"h-11 relative py-0 px-4"),material:F(r?`${e.textHeaderMaterial} px-6 py-0  text-xs font-medium overflow-hidden text-ellipsis whitespace-nowrap leading-4 h-14 bg-transparent`:"py-0 first:px-6 px-7 h-12")}}},uY=function(t,e){return t===void 0&&(t={}),{textHeaderIos:F("text-black/45",e("dark:text-white/55")),textHeaderMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function zE(){return zE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zE.apply(this,arguments)}const cY=_.forwardRef((t,e)=>{const{className:n,colors:r,header:a,ios:i,material:o,children:s,...l}=t,u=_.useRef(null);_.useImperativeHandle(e,()=>({el:u.current}));const c=a?"th":"td",d=ut({ios:i,material:o}),p=Rt(),f=uY(r,p),g=d(lY({...t},f,n)),y={...l};return V.createElement(c,zE({className:g.base,ref:u},y),s)});cY.displayName="TableCell";const dY=()=>({base:{common:"align-middle relative",ios:"hairline-b",material:""}});function BE(){return BE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BE.apply(this,arguments)}const pY=_.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=_.useRef(null);_.useImperativeHandle(e,()=>({el:s.current}));const l=ut({ios:r,material:a})(dY({...t})),u={...o};return V.createElement("thead",BE({className:l.base,ref:s},u),i)});pY.displayName="TableHead";const hY=(t,e)=>{const{header:n}=t;return{base:{common:"align-middle relative",ios:n?"":F(e.bgIos,"hairline-b last:hairline-transparent"),material:n?"":F(e.bgMaterial,`border-t ${e.dividerMaterial}`)}}},fY=function(t,e){return t===void 0&&(t={}),{bgIos:F("hover:bg-black/5",e("dark:hover:bg-white/10")),bgMaterial:F("hover:bg-md-light-secondary-container",e("dark:hover:bg-md-dark-secondary-container")),dividerMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function jE(){return jE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jE.apply(this,arguments)}const mY=_.forwardRef((t,e)=>{const{className:n,colors:r,header:a,ios:i,material:o,children:s,...l}=t,u=_.useRef(null);_.useImperativeHandle(e,()=>({el:u.current}));const c=ut({ios:i,material:o}),d=Rt(),p=fY(r,d),f=c(hY({...t},p)),g={...l};return V.createElement("tr",jE({className:f.base,ref:u},g),s)});mY.displayName="TableRow";const gY=(t,e,n)=>{const{translucent:r,opened:a}=t;return{base:{common:F(ar("fixed",n),"z-50 transform transition-transform-opacity w-full sm:w-auto start-0 bottom-0 sm:max-w-lg",!a&&"translate-y-full opacity-0 pointer-events-none"),ios:F("sm:rounded-lg duration-300",e.textIos,e.bgIos,r&&"translucent"),material:F("sm:rounded-2xl duration-200",e.textMaterial,e.bgMaterial),left:"sm:start-4-safe sm:bottom-4-safe",right:"sm:end-4-safe sm:bottom-4-safe sm:start-auto",center:"sm:left-1/2 sm:bottom-4-safe sm:-translate-x-1/2"},content:{common:"flex items-center justify-between",ios:"pl-4-safe pr-4-safe pt-3 pb-3-safe sm:px-4 sm:py-3",material:"pl-6-safe pr-6-safe py-3.5 pb-3.5-safe sm:px-6 sm:py-3.5"},button:{common:"-my-2 shrink-0 ms-4",ios:"",material:"-me-2"}}},yY=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-black",bgMaterial:F("bg-md-light-surface-5",e("dark:bg-md-dark-surface-5")),textIos:"text-white",textMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function UE(){return UE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UE.apply(this,arguments)}const bY=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,translucent:i=!0,button:o,position:s="left",opened:l,ios:u,material:c,children:d,...p}=t,f=_.useRef(null);_.useImperativeHandle(e,()=>({el:f.current}));const g=n,y={...p},v=ut({ios:u,material:c}),b=Rt(),x=yY(a,b),w=v(gY({...t,translucent:i},x,r),r);return V.createElement(g,UE({ref:f,className:w.base[s]},y),V.createElement("div",{className:w.content},d,o&&V.createElement("div",{className:w.button},o)))});bY.displayName="Toast";const vY=(t,e,n,r)=>({base:{common:F(ar("relative",n),"cursor-pointer select-none inline-block align-middle relative duration-300 rounded-full group",r("dark:touch-ripple-white")),ios:"h-8 w-13 p-0.5",material:"w-13 h-8 border-2",notChecked:{ios:e.bgIos,material:F(e.bgMaterial,e.borderMaterial)},checked:{ios:`${e.checkedBgIos}`,material:F(e.checkedBgMaterial,e.checkedBorderMaterial)}},inner:{ios:F("w-full h-full bg-white rounded-full block duration-300 transform",r("dark:bg-opacity-0")),notChecked:{},checked:{ios:"scale-0"}},thumbWrap:{common:"rounded-full absolute duration-300 transform",ios:"w-7 h-7 start-0.5 top-0.5",material:"w-6 h-6 start-0.5 top-0.5",checked:{ios:F("translate-x-5 rtl:!-translate-x-5"),material:F("translate-x-5 rtl:!-translate-x-5")},notChecked:""},thumb:{common:"w-full h-full rounded-full absolute duration-300 transform start-0 top-0",ios:"shadow-ios-toggle",material:"group-active:scale-[1.1]",checked:{ios:F(e.checkedThumbBgIos),material:F(e.checkedThumbBgMaterial)},notChecked:{ios:e.thumbBgIos,material:F("scale-[0.666]",e.thumbBgMaterial)}},input:{common:"hidden"}}),xY=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-20")),checkedBgIos:"bg-primary",thumbBgIos:"bg-white",checkedThumbBgIos:"bg-white",bgMaterial:F("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),checkedBgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),checkedBorderMaterial:F("border-md-light-primary",e("dark:border-md-dark-primary")),thumbBgMaterial:F("bg-md-light-outline",e("dark:bg-md-dark-outline")),checkedThumbBgMaterial:F("bg-md-light-on-primary",e("dark:bg-md-dark-on-primary")),...t}};function VE(){return VE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VE.apply(this,arguments)}const g8=_.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,name:s,value:l,disabled:u,readOnly:c,onChange:d,touchRipple:p=!0,ios:f,material:g,children:y,...v}=t,b=_.useRef(null),x=_.useRef(null);_.useImperativeHandle(e,()=>({el:b.current}));const w=n,S={...v},C=wn({ios:f,material:g}),E=ut({ios:f,material:g}),R=Rt();Uo(x,C==="material"&&p,b);const T=xY(a,R),$=o||i&&!d?"checked":"notChecked",P=E(vY(t,T,r,R),r);return V.createElement(w,VE({ref:b,className:P.base[$]},S),V.createElement("input",{type:"checkbox",name:s,value:l,disabled:u,readOnly:c,checked:o,defaultChecked:i,onChange:d,className:P.input}),V.createElement("span",{className:P.inner[$]}),V.createElement("span",{ref:x,className:P.thumbWrap[$]},V.createElement("span",{className:P.thumb[$]})),y)});g8.displayName="Toggle";function wY(){const{t}=ys();return K.jsxs(K.Fragment,{children:[K.jsxs(ba,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 md:gap-8 justify-center content-center text-center mx-auto",children:[K.jsx("h1",{className:"text-5xl mb-8",children:t("about.title")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph1")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph2")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph3")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph4")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph5")})]}),K.jsxs(ba,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[K.jsx("h2",{className:"text-3xl",children:t("about.license")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.licenseparagraph1")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.licenseparagraph2")})]}),K.jsxs(ba,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[K.jsx("h2",{className:"text-3xl",children:t("about.vision")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.visionparagraph1")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.visionparagraph2")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:K.jsxs(x3,{i18nKey:"about.visionparagraph3",children:[K.jsx("p",{children:t("about.visionparagraph3")}),K.jsx(Nt,{href:"mailto:info@digitalwarenkombinat.de",children:"info@digitalwarenkombinat.de"})]})}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:K.jsxs(x3,{i18nKey:"about.visionparagraph4",children:[K.jsx("p",{children:t("about.visionparagraph4")}),K.jsx(Nt,{href:"https://www.instagram.com/digitalwarenkombinat/",target:"_blank",children:"Instagram"}),K.jsx(Nt,{href:"https://www.linkedin.com/company/digitalwarenkombinat",target:"_blank",children:"LinkedIn"}),K.jsx(Nt,{href:"https://twitter.com/digiwako",target:"_blank",children:"X"})]})})]}),K.jsxs(ba,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[K.jsx("h2",{className:"text-3xl",children:t("about.usage")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.usageparagraph1")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.usageparagraph2")}),K.jsx("h2",{className:"text-2xl",children:t("about.usagecollage")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q79712290",target:"_blank",children:t("about.usagecollage1")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q56763836",target:"_blank",children:t("about.usagecollage2")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q4289290",target:"_blank",children:t("about.usagecollage3")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q20496956",target:"_blank",children:t("about.usagecollage4")}),K.jsx(Nt,{href:"https://www.europeana.eu/item/401/item_4FRF3Y3P73JWEB3C3EQ3MVSGQNJEABL4",target:"_blank",children:t("about.usagecollage5")}),K.jsx(Nt,{href:"https://www.europeana.eu/item/2048429/item_QUMU4MBTZZCJBHK6YXBACA3PKV43JFX5",target:"_blank",children:t("about.usagecollage6")}),K.jsx(Nt,{href:"https://www.europeana.eu/item/90402/RP_F_F15156",target:"_blank",children:t("about.usagecollage7")}),K.jsx(Nt,{href:"https://www.europeana.eu/item/91625/nomu_photo_NMA0031751",target:"_blank",children:t("about.usagecollage8")}),K.jsx(Nt,{href:"https://polona.pl/item-view/5c91b4ce-75e9-41f1-a8cd-5eb409abd482?page=0",target:"_blank",children:t("about.usagecollage9")}),K.jsx(Nt,{href:"https://polona.pl/item-view/1ae2a6d2-946a-444b-a01b-cb579f2847c6?page=0",target:"_blank",children:t("about.usagecollage10")}),K.jsx(Nt,{href:"https://polona.pl/item-view/d26338c2-3997-49ab-988d-e5b754925a50?page=0",target:"_blank",children:t("about.usagecollage11")}),K.jsx(Nt,{href:"https://polona.pl/item-view/3b8154bd-ff84-4b2a-8752-8ca14a8e50a2?page=0",target:"_blank",children:t("about.usagecollage12")}),K.jsx("h2",{className:"text-2xl",children:t("about.usagesticker")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q20537703",target:"_blank",children:t("about.usagesticker1")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q3698180",target:"_blank",children:t("about.usagesticker2")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q103297971",target:"_blank",children:t("about.usagesticker3")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q18359104",target:"_blank",children:t("about.usagesticker4")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q15008032",target:"_blank",children:t("about.usagesticker5")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q56763848",target:"_blank",children:t("about.usagesticker6")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q103304534",target:"_blank",children:t("about.usagesticker7")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q21781576",target:"_blank",children:t("about.usagesticker8")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q4193020",target:"_blank",children:t("about.usagesticker9")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q102974237",target:"_blank",children:t("about.usagesticker10")}),K.jsx("h2",{className:"text-2xl",children:t("about.usageframes")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q79712290",target:"_blank",children:t("about.usageframes1")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q51185223",target:"_blank",children:t("about.usageframes2")}),K.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q51184973",target:"_blank",children:t("about.usageframes3")}),K.jsx(Nt,{href:"https://www.kisscc0.com/clipart/picture-frames-line-angle-arvindeco-frame-2-sbi2yk/",target:"_blank",children:t("about.usageframes4")}),K.jsx(Nt,{href:"https://www.kisscc0.com/clipart/computer-icons-picture-frames-line-art-calligraphy-dml9j1/",target:"_blank",children:t("about.usageframes5")}),K.jsx(Nt,{href:"https://www.kisscc0.com/clipart/picture-frames-computer-icons-square-drawing-docum-em07vq/",target:"_blank",children:t("about.usageframes6")}),K.jsx("h2",{className:"text-2xl",children:t("about.usagefonts")}),K.jsx(Nt,{href:"https://www.1001fonts.com/average-sans-font.html",target:"_blank",children:t("about.usagefonts1")}),K.jsx(Nt,{href:"https://www.1001fonts.com/beautyschooldropout-font.html",target:"_blank",children:t("about.usagefonts2")}),K.jsx(Nt,{href:"https://www.1001fonts.com/neucha-font.html",target:"_blank",children:t("about.usagefonts3")})]})]})}function kY({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const SY=_.forwardRef(kY),CY=SY;function EY({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 15-6 6m0 0-6-6m6 6V9a6 6 0 0 1 12 0v3"}))}const NY=_.forwardRef(EY),TY=NY;function IY({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 9 6-6m0 0 6 6m-6-6v12a6 6 0 0 1-12 0v-3"}))}const _Y=_.forwardRef(IY),RY=_Y;function $Y({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const OY=_.forwardRef($Y),MY=OY;function PY({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const FY=_.forwardRef(PY),AY=FY;function DY({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const LY=_.forwardRef(DY),zY=LY;function BY({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 0 0 .303-.54"}))}const jY=_.forwardRef(BY),UY=jY;function VY({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"}))}const WY=_.forwardRef(VY),GY=WY;function HY({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const qY=_.forwardRef(HY),KY=qY;function XY({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const QY=_.forwardRef(XY),YY=QY;function JY({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const ZY=_.forwardRef(JY),eJ=ZY;function tJ({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const nJ=_.forwardRef(tJ),rJ=nJ;function aJ({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 8.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v8.25A2.25 2.25 0 0 0 6 16.5h2.25m8.25-8.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-7.5A2.25 2.25 0 0 1 8.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 0 0-2.25 2.25v6"}))}const iJ=_.forwardRef(aJ),oJ=iJ;function sJ({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const lJ=_.forwardRef(sJ),uJ=lJ;function cJ({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const dJ=_.forwardRef(cJ),pJ=dJ;function hJ({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const fJ=_.forwardRef(hJ),mJ=fJ;var gJ={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const y8=t=>{let e;const n=new Set,r=(s,l)=>{const u=typeof s=="function"?s(e):s;if(!Object.is(u,e)){const c=e;e=l??(typeof u!="object"||u===null)?u:Object.assign({},e,u),n.forEach(d=>d(e,c))}},a=()=>e,i={setState:r,getState:a,getInitialState:()=>o,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(gJ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},o=e=t(r,a,i);return i},yJ=t=>t?y8(t):y8;var b8={exports:{}},v8={},x8={exports:{}},w8={};/**
* @license React
* use-sync-external-store-shim.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var xp=_;function bJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vJ=typeof Object.is=="function"?Object.is:bJ,xJ=xp.useState,wJ=xp.useEffect,kJ=xp.useLayoutEffect,SJ=xp.useDebugValue;function CJ(t,e){var n=e(),r=xJ({inst:{value:n,getSnapshot:e}}),a=r[0].inst,i=r[1];return kJ(function(){a.value=n,a.getSnapshot=e,WE(a)&&i({inst:a})},[t,n,e]),wJ(function(){return WE(a)&&i({inst:a}),t(function(){WE(a)&&i({inst:a})})},[t]),SJ(n),n}function WE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vJ(t,n)}catch{return!0}}function EJ(t,e){return e()}var NJ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?EJ:CJ;w8.useSyncExternalStore=xp.useSyncExternalStore!==void 0?xp.useSyncExternalStore:NJ,x8.exports=w8;var TJ=x8.exports;/**
* @license React
* use-sync-external-store-shim/with-selector.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var eb=_,IJ=TJ;function _J(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var RJ=typeof Object.is=="function"?Object.is:_J,$J=IJ.useSyncExternalStore,OJ=eb.useRef,MJ=eb.useEffect,PJ=eb.useMemo,FJ=eb.useDebugValue;v8.useSyncExternalStoreWithSelector=function(t,e,n,r,a){var i=OJ(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=PJ(function(){function l(f){if(!u){if(u=!0,c=f,f=r(f),a!==void 0&&o.hasValue){var g=o.value;if(a(g,f))return d=g}return d=f}if(g=d,RJ(c,f))return g;var y=r(f);return a!==void 0&&a(g,y)?g:(c=f,d=y)}var u=!1,c,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,a]);var s=$J(t,i[0],i[1]);return MJ(function(){o.hasValue=!0,o.value=s},[s]),FJ(s),s},b8.exports=v8;var AJ=b8.exports;const DJ=Zi(AJ);var k8={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:LJ}=V,{useSyncExternalStoreWithSelector:zJ}=DJ;let S8=!1;const BJ=t=>t;function jJ(t,e=BJ,n){(k8?"production":void 0)!=="production"&&n&&!S8&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),S8=!0);const r=zJ(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return LJ(r),r}const C8=t=>{(k8?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?yJ(t):t,n=(r,a)=>jJ(e,r,a);return Object.assign(n,e),n},UJ=t=>t?C8(t):C8;var tb={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const GE=new Map,nb=t=>{const e=GE.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},VJ=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=GE.get(n.name);if(r)return{type:"tracked",store:t,...r};const a={connection:e.connect(n),stores:{}};return GE.set(n.name,a),{type:"tracked",store:t,...a}},WJ=(t,e={})=>(n,r,a)=>{const{enabled:i,anonymousActionType:o,store:s,...l}=e;let u;try{u=(i??(tb?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(tb?"production":void 0)!=="production"&&i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(n,r,a);const{connection:c,...d}=VJ(s,u,l);let p=!0;a.setState=(y,v,b)=>{const x=n(y,v);if(!p)return x;const w=b===void 0?{type:o||"anonymous"}:typeof b=="string"?{type:b}:b;return s===void 0?(c?.send(w,r()),x):(c?.send({...w,type:`${s}/${w.type}`},{...nb(l.name),[s]:a.getState()}),x)};const f=(...y)=>{const v=p;p=!1,n(...y),p=v},g=t(a.setState,r,a);if(d.type==="untracked"?c?.init(g):(d.stores[d.store]=a,c?.init(Object.fromEntries(Object.entries(d.stores).map(([y,v])=>[y,y===d.store?g:v.getState()])))),a.dispatchFromDevtools&&typeof a.dispatch=="function"){let y=!1;const v=a.dispatch;a.dispatch=(...b)=>{(tb?"production":void 0)!=="production"&&b[0].type==="__setState"&&!y&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),y=!0),v(...b)}}return c.subscribe(y=>{var v;switch(y.type){case"ACTION":if(typeof y.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return HE(y.payload,b=>{if(b.type==="__setState"){if(s===void 0){f(b.state);return}Object.keys(b.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const x=b.state[s];if(x==null)return;JSON.stringify(a.getState())!==JSON.stringify(x)&&f(x);return}a.dispatchFromDevtools&&typeof a.dispatch=="function"&&a.dispatch(b)});case"DISPATCH":switch(y.payload.type){case"RESET":return f(g),s===void 0?c?.init(a.getState()):c?.init(nb(l.name));case"COMMIT":if(s===void 0){c?.init(a.getState());return}return c?.init(nb(l.name));case"ROLLBACK":return HE(y.state,b=>{if(s===void 0){f(b),c?.init(a.getState());return}f(b[s]),c?.init(nb(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return HE(y.state,b=>{if(s===void 0){f(b);return}JSON.stringify(a.getState())!==JSON.stringify(b[s])&&f(b[s])});case"IMPORT_STATE":{const{nextLiftedState:b}=y.payload,x=(v=b.computedStates.slice(-1)[0])==null?void 0:v.state;if(!x)return;f(s===void 0?x:x[s]),c?.send(null,b);return}case"PAUSE_RECORDING":return p=!p}return}}),g},GJ=WJ,HE=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function HJ(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var a;const i=s=>s===null?null:JSON.parse(s,e?.reviver),o=(a=n.getItem(r))!=null?a:null;return o instanceof Promise?o.then(i):i(o)},setItem:(r,a)=>n.setItem(r,JSON.stringify(a,e?.replacer)),removeItem:r=>n.removeItem(r)}}const Zf=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Zf(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Zf(r)(n)}}}},qJ=(t,e)=>(n,r,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,b)=>({...b,...v}),...e},o=!1;const s=new Set,l=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,a);const c=Zf(i.serialize),d=()=>{const v=i.partialize({...r()});let b;const x=c({state:v,version:i.version}).then(w=>u.setItem(i.name,w)).catch(w=>{b=w});if(b)throw b;return x},p=a.setState;a.setState=(v,b)=>{p(v,b),d()};const f=t((...v)=>{n(...v),d()},r,a);let g;const y=()=>{var v;if(!u)return;o=!1,s.forEach(x=>x(r()));const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,r()))||void 0;return Zf(u.getItem.bind(u))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var w;return g=i.merge(x,(w=r())!=null?w:f),n(g,!0),d()}).then(()=>{b?.(g,void 0),o=!0,l.forEach(x=>x(g))}).catch(x=>{b?.(void 0,x)})};return a.persist={setOptions:v=>{i={...i,...v},v.getStorage&&(u=v.getStorage())},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:v=>(s.add(v),()=>{s.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},y(),g||f},KJ=(t,e)=>(n,r,a)=>{let i={storage:HJ(()=>localStorage),partialize:y=>y,version:0,merge:(y,v)=>({...v,...y}),...e},o=!1;const s=new Set,l=new Set;let u=i.storage;if(!u)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...y)},r,a);const c=()=>{const y=i.partialize({...r()});return u.setItem(i.name,{state:y,version:i.version})},d=a.setState;a.setState=(y,v)=>{d(y,v),c()};const p=t((...y)=>{n(...y),c()},r,a);a.getInitialState=()=>p;let f;const g=()=>{var y,v;if(!u)return;o=!1,s.forEach(x=>{var w;return x((w=r())!=null?w:p)});const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(y=r())!=null?y:p))||void 0;return Zf(u.getItem.bind(u))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var w;return f=i.merge(x,(w=r())!=null?w:p),n(f,!0),c()}).then(()=>{b?.(f,void 0),f=r(),o=!0,l.forEach(x=>x(f))}).catch(x=>{b?.(void 0,x)})};return a.persist={setOptions:y=>{i={...i,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:y=>(s.add(y),()=>{s.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},i.skipHydration||g(),f||p},XJ=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((tb?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),qJ(t,e)):KJ(t,e),QJ=XJ,E8=[{id:1,image:"./frame/frame_1.png",front:"./frame/frame_1_front.png"},{id:2,image:"./frame/frame_2.png",front:"./frame/frame_2_front.png"},{id:3,image:"./frame/frame_3.png",front:"./frame/frame_3_front.png"},{id:4,image:"./frame/frame_4.png",front:"./frame/frame_4_front.png"},{id:5,image:"./frame/frame_5.png",front:"./frame/frame_5_front.png"}],YJ=[{id:"Betende_Frau_Maria",image:"./sticker/Betende_Frau_Maria.png"},{id:"Blumentopf",image:"./sticker/Blumentopf.png"},{id:"Blume",image:"./sticker/Blume.png"},{id:"Frau_in_gelbem_Kleid",image:"./sticker/Frau_in_gelbem_Kleid.png"},{id:"Magd",image:"./sticker/Magd.png"},{id:"Mann_liegend",image:"./sticker/Mann_liegend.png"},{id:"Mann",image:"./sticker/Mann.png"},{id:"Mucha_Dekor",image:"./sticker/Mucha_Dekor.png"},{id:"The_Hare",image:"./sticker/The_Hare.png"},{id:"Wasserspeier",image:"./sticker/Wasserspeier.png"}],JJ=[{id:"http://www.wikidata.org/entity/Q20355536",name:"A Street in Torello, Italy",year:"1890",country:"Denmark",location:"Statens Museum for Kunst",creator:"Peder Severin Kr\xF8yer",url:"https://api.smk.dk/api/v1/iiif/manifest/?id=KMS1435",identifier:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2",image:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2/full/400,/0/default.jpg",thumbnail:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q20537703",name:"At the French Windows. The Artist's Wife",year:"1897",country:"Denmark",location:"Statens Museum for Kunst",creator:"Laurits Andersen Ring",url:"https://api.smk.dk/api/v1/iiif/manifest/?id=KMS3716",identifier:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2",image:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2/full/400,/0/default.jpg",thumbnail:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103297795",name:"Brot! (Bread!)",year:"1924",country:"Germany",location:"Vanderbilt University Fine Arts Gallery",creator:"K\xE4the Kollwitz",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1977/1977.011.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103297971",name:"Business-Man, from Genius, Zeitschrift f\xFCr werdende und alte Kunst (Magazine for Emerging and Ancient Art), Year 2, no. 1",year:"1920",country:"Belgium",location:"Vanderbilt University Fine Arts Gallery",creator:"Frans Masereel",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.032.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103300860",name:"Half-Figure Prophet",year:"1450",country:"France",location:"Vanderbilt University Fine Arts Gallery",creator:"http://www.wikidata.org/.well-known/genid/d7c4865c9fae865605be887d7277ab75",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1975/1975.005.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q102967848",name:"Landscape with Shepherds",year:"",country:"Netherlands",location:"Vanderbilt University Fine Arts Gallery",creator:"Jan Both",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1979/1979.0195P.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q106582838",name:"The Blacksmith Worker",year:"",country:"Switzerland",location:"Vanderbilt University Fine Arts Gallery",creator:"Antonello da Messina",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.036.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q104032628",name:"The Empty Jug",year:"1653",country:"Netherlands",location:"Vanderbilt University Fine Arts Gallery",creator:"Adriaen van Ostade",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1979/1979.0845P.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q102975484",name:"Trostung (Consolation), from Genius, Zeitschrift f\xFCr werdende und alte Kunst (Magazine for Emerging and Ancient Art), Year 2, no. 1",year:"1920",country:"Austria",location:"Vanderbilt University Fine Arts Gallery",creator:"Georg Ehrlich",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.031.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg/full/100,100/0/default.jpg"}],N8={artworkList:YJ,frame:E8[1],imageList:JJ.sort(()=>Math.random()-.5),canvasList:[],imageLikeList:[]},Nc=UJ()(GJ(QJ(t=>({...N8,addToArtwork:(e,n)=>t(r=>({artworkList:[{id:e,image:n},...r.artworkList]})),addToCanvas:(e,n,r)=>t(a=>({canvasList:[...a.canvasList,{brightness:0,contrast:0,height:400,id:`${a.canvasList.length+1}`,image:e,isDragging:!1,opacity:1,width:400,x:n,y:r}]})),addToImageList:e=>t(n=>({imageList:[...n.imageList,...e]})),removeFromImageList:e=>t(n=>({imageList:n.imageList.filter(r=>r.id!==e)})),likeImage:e=>t(n=>({imageLikeList:[...n.imageLikeList,e]})),resetState:()=>t(N8),removeFromCanvas:e=>t(n=>({canvasList:n.canvasList.filter(r=>r.id!==e)})),setFrame:e=>t(()=>({frame:E8.find(n=>n.id===e)})),transformCanvasImage:e=>t(n=>({canvasList:n.canvasList.map(r=>r.id!==e.id?r:{...r,height:e.height,width:e.width,x:e.x,y:e.y,brightness:e.brightness,contrast:e.contrast,opacity:e.opacity})})),moveCanvasImage:(e,n)=>t(r=>{const a=r.canvasList.findIndex(i=>i.id===e);if(a!==-1){const i=n?a+1:a-1;if(i>=0&&i<r.canvasList.length){const o=[...r.canvasList],[s]=o.splice(a,1);return o.splice(i,0,s),{canvasList:o}}}return{}})}),{name:"glamStore",version:2}))),rb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function wp(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function qE(t){return"nodeType"in t}function oi(t){var e,n;return t?wp(t)?t:qE(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function KE(t){const{Document:e}=oi(t);return t instanceof e}function em(t){return wp(t)?!1:t instanceof oi(t).HTMLElement}function T8(t){return t instanceof oi(t).SVGElement}function kp(t){return t?wp(t)?t.document:qE(t)?KE(t)?t:em(t)||T8(t)?t.ownerDocument:document:document:document}const vs=rb?_.useLayoutEffect:_.useEffect;function ab(t){const e=_.useRef(t);return vs(()=>{e.current=t}),_.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.current==null?void 0:e.current(...r)},[])}function ZJ(){const t=_.useRef(null),e=_.useCallback((r,a)=>{t.current=setInterval(r,a)},[]),n=_.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function tm(t,e){e===void 0&&(e=[t]);const n=_.useRef(t);return vs(()=>{n.current!==t&&(n.current=t)},e),n}function nm(t,e){const n=_.useRef();return _.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function ib(t){const e=ab(t),n=_.useRef(null),r=_.useCallback(a=>{a!==n.current&&e?.(a,n.current),n.current=a},[]);return[n,r]}function ob(t){const e=_.useRef();return _.useEffect(()=>{e.current=t},[t]),e.current}let XE={};function sb(t,e){return _.useMemo(()=>{if(e)return e;const n=XE[t]==null?0:XE[t]+1;return XE[t]=n,t+"-"+n},[t,e])}function I8(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,o)=>{const s=Object.entries(o);for(const[l,u]of s){const c=i[l];c!=null&&(i[l]=c+t*u)}return i},{...e})}}const Sp=I8(1),lb=I8(-1);function eZ(t){return"clientX"in t&&"clientY"in t}function QE(t){if(!t)return!1;const{KeyboardEvent:e}=oi(t.target);return e&&t instanceof e}function tZ(t){if(!t)return!1;const{TouchEvent:e}=oi(t.target);return e&&t instanceof e}function ub(t){if(tZ(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return eZ(t)?{x:t.clientX,y:t.clientY}:null}const rm=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[rm.Translate.toString(t),rm.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),_8="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function nZ(t){return t.matches(_8)?t:t.querySelector(_8)}const rZ={display:"none"};function aZ(t){let{id:e,value:n}=t;return V.createElement("div",{id:e,style:rZ},n)}function iZ(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const a={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return V.createElement("div",{id:e,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function oZ(){const[t,e]=_.useState("");return{announce:_.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const R8=_.createContext(null);function $8(t){const e=_.useContext(R8);_.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function sZ(){const[t]=_.useState(()=>new Set),e=_.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[_.useCallback(n=>{let{type:r,event:a}=n;t.forEach(i=>{var o;return(o=i[r])==null?void 0:o.call(i,a)})},[t]),e]}const lZ={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},uZ={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function cZ(t){let{announcements:e=uZ,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=lZ}=t;const{announce:i,announcement:o}=oZ(),s=sb("DndLiveRegion"),[l,u]=_.useState(!1);if(_.useEffect(()=>{u(!0)},[]),$8(_.useMemo(()=>({onDragStart(d){let{active:p}=d;i(e.onDragStart({active:p}))},onDragMove(d){let{active:p,over:f}=d;e.onDragMove&&i(e.onDragMove({active:p,over:f}))},onDragOver(d){let{active:p,over:f}=d;i(e.onDragOver({active:p,over:f}))},onDragEnd(d){let{active:p,over:f}=d;i(e.onDragEnd({active:p,over:f}))},onDragCancel(d){let{active:p,over:f}=d;i(e.onDragCancel({active:p,over:f}))}}),[i,e])),!l)return null;const c=V.createElement(V.Fragment,null,V.createElement(aZ,{id:r,value:a.draggable}),V.createElement(iZ,{id:s,announcement:o}));return n?Bo.createPortal(c,n):c}var Br;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Br||(Br={}));function cb(){}const Vo=Object.freeze({x:0,y:0});function dZ(t,e){const n=ub(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function pZ(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function hZ(t,e){if(!t||t.length===0)return null;const[n]=t;return e?n[e]:n}function fZ(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=a-r,s=i-n;if(r<a&&n<i){const l=e.width*e.height,u=t.width*t.height,c=o*s,d=c/(l+u-c);return Number(d.toFixed(4))}return 0}const mZ=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const a=[];for(const i of r){const{id:o}=i,s=n.get(o);if(s){const l=fZ(s,e);l>0&&a.push({id:o,data:{droppableContainer:i,value:l}})}}return a.sort(pZ)};function gZ(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function O8(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Vo}function yZ(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,o)=>({...i,top:i.top+t*o.y,bottom:i.bottom+t*o.y,left:i.left+t*o.x,right:i.right+t*o.x}),{...e})}}const bZ=yZ(1);function M8(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function vZ(t,e,n){const r=M8(e);if(!r)return t;const{scaleX:a,scaleY:i,x:o,y:s}=r,l=t.left-o-(1-a)*parseFloat(n),u=t.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),c=a?t.width/a:t.width,d=i?t.height/i:t.height;return{width:c,height:d,top:u,right:l+c,bottom:u+d,left:l}}const xZ={ignoreTransform:!1};function am(t,e){e===void 0&&(e=xZ);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:c}=oi(t).getComputedStyle(t);u&&(n=vZ(n,u,c))}const{top:r,left:a,width:i,height:o,bottom:s,right:l}=n;return{top:r,left:a,width:i,height:o,bottom:s,right:l}}function P8(t){return am(t,{ignoreTransform:!0})}function wZ(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function kZ(t,e){return e===void 0&&(e=oi(t).getComputedStyle(t)),e.position==="fixed"}function SZ(t,e){e===void 0&&(e=oi(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const a=e[r];return typeof a=="string"?n.test(a):!1})}function YE(t,e){const n=[];function r(a){if(e!=null&&n.length>=e||!a)return n;if(KE(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!em(a)||T8(a)||n.includes(a))return n;const i=oi(t).getComputedStyle(a);return a!==t&&SZ(a,i)&&n.push(a),kZ(a,i)?n:r(a.parentNode)}return t?r(t):n}function F8(t){const[e]=YE(t,1);return e??null}function JE(t){return!rb||!t?null:wp(t)?t:qE(t)?KE(t)||t===kp(t).scrollingElement?window:em(t)?t:null:null}function A8(t){return wp(t)?t.scrollX:t.scrollLeft}function D8(t){return wp(t)?t.scrollY:t.scrollTop}function ZE(t){return{x:A8(t),y:D8(t)}}var ta;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ta||(ta={}));function L8(t){return!rb||!t?!1:t===document.scrollingElement}function z8(t){const e={x:0,y:0},n=L8(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,s=t.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:o,isRight:s,maxScroll:r,minScroll:e}}const CZ={x:.2,y:.2};function EZ(t,e,n,r,a){let{top:i,left:o,right:s,bottom:l}=n;r===void 0&&(r=10),a===void 0&&(a=CZ);const{isTop:u,isBottom:c,isLeft:d,isRight:p}=z8(t),f={x:0,y:0},g={x:0,y:0},y={height:e.height*a.y,width:e.width*a.x};return!u&&i<=e.top+y.height?(f.y=ta.Backward,g.y=r*Math.abs((e.top+y.height-i)/y.height)):!c&&l>=e.bottom-y.height&&(f.y=ta.Forward,g.y=r*Math.abs((e.bottom-y.height-l)/y.height)),!p&&s>=e.right-y.width?(f.x=ta.Forward,g.x=r*Math.abs((e.right-y.width-s)/y.width)):!d&&o<=e.left+y.width&&(f.x=ta.Backward,g.x=r*Math.abs((e.left+y.width-o)/y.width)),{direction:f,speed:g}}function NZ(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:a}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:a,width:t.clientWidth,height:t.clientHeight}}function B8(t){return t.reduce((e,n)=>Sp(e,ZE(n)),Vo)}function TZ(t){return t.reduce((e,n)=>e+A8(n),0)}function IZ(t){return t.reduce((e,n)=>e+D8(n),0)}function j8(t,e){if(e===void 0&&(e=am),!t)return;const{top:n,left:r,bottom:a,right:i}=e(t);F8(t)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const _Z=[["x",["left","right"],TZ],["y",["top","bottom"],IZ]];let e4=class{constructor(t,e){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=YE(e),r=B8(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,i,o]of _Z)for(const s of i)Object.defineProperty(this,s,{get:()=>{const l=o(n),u=r[a]-l;return this.rect[s]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}};class im{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var a;(a=this.target)==null||a.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function RZ(t){const{EventTarget:e}=oi(t);return t instanceof e?t:kp(t)}function t4(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var lo;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(lo||(lo={}));function U8(t){t.preventDefault()}function $Z(t){t.stopPropagation()}var Fn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(Fn||(Fn={}));const V8={start:[Fn.Space,Fn.Enter],cancel:[Fn.Esc],end:[Fn.Space,Fn.Enter]},OZ=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Fn.Right:return{...n,x:n.x+25};case Fn.Left:return{...n,x:n.x-25};case Fn.Down:return{...n,y:n.y+25};case Fn.Up:return{...n,y:n.y-25}}};class W8{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new im(kp(n)),this.windowListeners=new im(oi(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(lo.Resize,this.handleCancel),this.windowListeners.add(lo.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(lo.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&j8(r),n(Vo)}handleKeyDown(e){if(QE(e)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=V8,coordinateGetter:o=OZ,scrollBehavior:s="smooth"}=a,{code:l}=e;if(i.end.includes(l)){this.handleEnd(e);return}if(i.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=r.current,c=u?{x:u.left,y:u.top}:Vo;this.referenceCoordinates||(this.referenceCoordinates=c);const d=o(e,{active:n,context:r.current,currentCoordinates:c});if(d){const p=lb(d,c),f={x:0,y:0},{scrollableAncestors:g}=r.current;for(const y of g){const v=e.code,{isTop:b,isRight:x,isLeft:w,isBottom:S,maxScroll:C,minScroll:E}=z8(y),R=NZ(y),T={x:Math.min(v===Fn.Right?R.right-R.width/2:R.right,Math.max(v===Fn.Right?R.left:R.left+R.width/2,d.x)),y:Math.min(v===Fn.Down?R.bottom-R.height/2:R.bottom,Math.max(v===Fn.Down?R.top:R.top+R.height/2,d.y))},$=v===Fn.Right&&!x||v===Fn.Left&&!w,P=v===Fn.Down&&!S||v===Fn.Up&&!b;if($&&T.x!==d.x){const D=y.scrollLeft+p.x,B=v===Fn.Right&&D<=C.x||v===Fn.Left&&D>=E.x;if(B&&!p.y){y.scrollTo({left:D,behavior:s});return}B?f.x=y.scrollLeft-D:f.x=v===Fn.Right?y.scrollLeft-C.x:y.scrollLeft-E.x,f.x&&y.scrollBy({left:-f.x,behavior:s});break}else if(P&&T.y!==d.y){const D=y.scrollTop+p.y,B=v===Fn.Down&&D<=C.y||v===Fn.Up&&D>=E.y;if(B&&!p.x){y.scrollTo({top:D,behavior:s});return}B?f.y=y.scrollTop-D:f.y=v===Fn.Down?y.scrollTop-C.y:y.scrollTop-E.y,f.y&&y.scrollBy({top:-f.y,behavior:s});break}}this.handleMove(e,Sp(lb(d,this.referenceCoordinates),f))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}W8.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=V8,onActivation:a}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const s=i.activatorNode.current;return s&&t.target!==s?!1:(t.preventDefault(),a?.({event:t.nativeEvent}),!0)}return!1}}];function G8(t){return!!(t&&"distance"in t)}function H8(t){return!!(t&&"delay"in t)}class n4{constructor(e,n,r){var a;r===void 0&&(r=RZ(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=kp(o),this.documentListeners=new im(this.document),this.listeners=new im(r),this.windowListeners=new im(oi(o)),this.initialCoordinates=(a=ub(i))!=null?a:Vo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(lo.Resize,this.handleCancel),this.windowListeners.add(lo.DragStart,U8),this.windowListeners.add(lo.VisibilityChange,this.handleCancel),this.windowListeners.add(lo.ContextMenu,U8),this.documentListeners.add(lo.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(H8(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(G8(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(lo.Click,$Z,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(lo.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:s}}=i;if(!a)return;const l=(n=ub(e))!=null?n:Vo,u=lb(a,l);if(!r&&s){if(G8(s)){if(s.tolerance!=null&&t4(u,s.tolerance))return this.handleCancel();if(t4(u,s.distance))return this.handleStart()}return H8(s)&&t4(u,s.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===Fn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const MZ={move:{name:"pointermove"},end:{name:"pointerup"}};class q8 extends n4{constructor(e){const{event:n}=e,r=kp(n.target);super(e,MZ,r)}}q8.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const PZ={move:{name:"mousemove"},end:{name:"mouseup"}};var r4;(function(t){t[t.RightClick=2]="RightClick"})(r4||(r4={}));class FZ extends n4{constructor(e){super(e,PZ,kp(e.event.target))}}FZ.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===r4.RightClick?!1:(r?.({event:n}),!0)}}];const a4={move:{name:"touchmove"},end:{name:"touchend"}};class AZ extends n4{constructor(e){super(e,a4)}static setup(){return window.addEventListener(a4.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(a4.move.name,e)};function e(){}}}AZ.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:a}=n;return a.length>1?!1:(r?.({event:n}),!0)}}];var om;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(om||(om={}));var db;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(db||(db={}));function DZ(t){let{acceleration:e,activator:n=om.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:o=5,order:s=db.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:c,delta:d,threshold:p}=t;const f=zZ({delta:d,disabled:!i}),[g,y]=ZJ(),v=_.useRef({x:0,y:0}),b=_.useRef({x:0,y:0}),x=_.useMemo(()=>{switch(n){case om.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case om.DraggableRect:return a}},[n,a,l]),w=_.useRef(null),S=_.useCallback(()=>{const E=w.current;if(!E)return;const R=v.current.x*b.current.x,T=v.current.y*b.current.y;E.scrollBy(R,T)},[]),C=_.useMemo(()=>s===db.TreeOrder?[...u].reverse():u,[s,u]);_.useEffect(()=>{if(!i||!u.length||!x){y();return}for(const E of C){if(r?.(E)===!1)continue;const R=u.indexOf(E),T=c[R];if(!T)continue;const{direction:$,speed:P}=EZ(E,T,x,e,p);for(const D of["x","y"])f[D][$[D]]||(P[D]=0,$[D]=0);if(P.x>0||P.y>0){y(),w.current=E,g(S,o),v.current=P,b.current=$;return}}v.current={x:0,y:0},b.current={x:0,y:0},y()},[e,S,r,y,i,o,JSON.stringify(x),JSON.stringify(f),g,u,C,c,JSON.stringify(p)])}const LZ={x:{[ta.Backward]:!1,[ta.Forward]:!1},y:{[ta.Backward]:!1,[ta.Forward]:!1}};function zZ(t){let{delta:e,disabled:n}=t;const r=ob(e);return nm(a=>{if(n||!r||!a)return LZ;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[ta.Backward]:a.x[ta.Backward]||i.x===-1,[ta.Forward]:a.x[ta.Forward]||i.x===1},y:{[ta.Backward]:a.y[ta.Backward]||i.y===-1,[ta.Forward]:a.y[ta.Forward]||i.y===1}}},[n,e,r])}function BZ(t,e){const n=e!==null?t.get(e):void 0,r=n?n.node.current:null;return nm(a=>{var i;return e===null?null:(i=r??a)!=null?i:null},[r,e])}function jZ(t,e){return _.useMemo(()=>t.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var sm;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(sm||(sm={}));var i4;(function(t){t.Optimized="optimized"})(i4||(i4={}));const K8=new Map;function UZ(t,e){let{dragging:n,dependencies:r,config:a}=e;const[i,o]=_.useState(null),{frequency:s,measure:l,strategy:u}=a,c=_.useRef(t),d=v(),p=tm(d),f=_.useCallback(function(b){b===void 0&&(b=[]),!p.current&&o(x=>x===null?b:x.concat(b.filter(w=>!x.includes(w))))},[p]),g=_.useRef(null),y=nm(b=>{if(d&&!n)return K8;if(!b||b===K8||c.current!==t||i!=null){const x=new Map;for(let w of t){if(!w)continue;if(i&&i.length>0&&!i.includes(w.id)&&w.rect.current){x.set(w.id,w.rect.current);continue}const S=w.node.current,C=S?new e4(l(S),S):null;w.rect.current=C,C&&x.set(w.id,C)}return x}return b},[t,i,n,d,l]);return _.useEffect(()=>{c.current=t},[t]),_.useEffect(()=>{d||f()},[n,d]),_.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),_.useEffect(()=>{d||typeof s!="number"||g.current!==null||(g.current=setTimeout(()=>{f(),g.current=null},s))},[s,d,f,...r]),{droppableRects:y,measureDroppableContainers:f,measuringScheduled:i!=null};function v(){switch(u){case sm.Always:return!1;case sm.BeforeDragging:return n;default:return!n}}}function o4(t,e){return nm(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function VZ(t,e){return o4(t,e)}function WZ(t){let{callback:e,disabled:n}=t;const r=ab(e),a=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return _.useEffect(()=>()=>a?.disconnect(),[a]),a}function pb(t){let{callback:e,disabled:n}=t;const r=ab(e),a=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return _.useEffect(()=>()=>a?.disconnect(),[a]),a}function GZ(t){return new e4(am(t),t)}function X8(t,e,n){e===void 0&&(e=GZ);const[r,a]=_.useReducer(s,null),i=WZ({callback(l){if(t)for(const u of l){const{type:c,target:d}=u;if(c==="childList"&&d instanceof HTMLElement&&d.contains(t)){a();break}}}}),o=pb({callback:a});return vs(()=>{a(),t?(o?.observe(t),i?.observe(document.body,{childList:!0,subtree:!0})):(o?.disconnect(),i?.disconnect())},[t]),r;function s(l){if(!t)return null;if(t.isConnected===!1){var u;return(u=l??n)!=null?u:null}const c=e(t);return JSON.stringify(l)===JSON.stringify(c)?l:c}}function HZ(t){const e=o4(t);return O8(t,e)}const Q8=[];function qZ(t){const e=_.useRef(t),n=nm(r=>t?r&&r!==Q8&&t&&e.current&&t.parentNode===e.current.parentNode?r:YE(t):Q8,[t]);return _.useEffect(()=>{e.current=t},[t]),n}function KZ(t){const[e,n]=_.useState(null),r=_.useRef(t),a=_.useCallback(i=>{const o=JE(i.target);o&&n(s=>s?(s.set(o,ZE(o)),new Map(s)):null)},[]);return _.useEffect(()=>{const i=r.current;if(t!==i){o(i);const s=t.map(l=>{const u=JE(l);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,ZE(u)]):null}).filter(l=>l!=null);n(s.length?new Map(s):null),r.current=t}return()=>{o(t),o(i)};function o(s){s.forEach(l=>{const u=JE(l);u?.removeEventListener("scroll",a)})}},[a,t]),_.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Sp(i,o),Vo):B8(t):Vo,[t,e])}function Y8(t,e){e===void 0&&(e=[]);const n=_.useRef(null);return _.useEffect(()=>{n.current=null},e),_.useEffect(()=>{const r=t!==Vo;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?lb(t,n.current):Vo}function XZ(t){_.useEffect(()=>{if(!rb)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function QZ(t,e){return _.useMemo(()=>t.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=o=>{i(o,e)},n},{}),[t,e])}function J8(t){return _.useMemo(()=>t?wZ(t):null,[t])}const s4=[];function YZ(t,e){e===void 0&&(e=am);const[n]=t,r=J8(n?oi(n):null),[a,i]=_.useReducer(s,s4),o=pb({callback:i});return t.length>0&&a===s4&&i(),vs(()=>{t.length?t.forEach(l=>o?.observe(l)):(o?.disconnect(),i())},[t]),a;function s(){return t.length?t.map(l=>L8(l)?r:new e4(e(l),l)):s4}}function Z8(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return em(e)?e:t}function JZ(t){let{measure:e}=t;const[n,r]=_.useState(null),a=_.useCallback(u=>{for(const{target:c}of u)if(em(c)){r(d=>{const p=e(c);return d?{...d,width:p.width,height:p.height}:p});break}},[e]),i=pb({callback:a}),o=_.useCallback(u=>{const c=Z8(u);i?.disconnect(),c&&i?.observe(c),r(c?e(c):null)},[e,i]),[s,l]=ib(o);return _.useMemo(()=>({nodeRef:s,rect:n,setRef:l}),[n,s,l])}const ZZ=[{sensor:q8,options:{}},{sensor:W8,options:{}}],eee={current:{}},hb={draggable:{measure:P8},droppable:{measure:P8,strategy:sm.WhileDragging,frequency:i4.Optimized},dragOverlay:{measure:am}};class lm extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const tee={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new lm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:cb},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:hb,measureDroppableContainers:cb,windowRect:null,measuringScheduled:!1},eP={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:cb,draggableNodes:new Map,over:null,measureDroppableContainers:cb},um=_.createContext(eP),tP=_.createContext(tee);function nee(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new lm}}}function ree(t,e){switch(e.type){case Br.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Br.DragMove:return t.draggable.active?{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}}:t;case Br.DragEnd:case Br.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Br.RegisterDroppable:{const{element:n}=e,{id:r}=n,a=new lm(t.droppable.containers);return a.set(r,n),{...t,droppable:{...t.droppable,containers:a}}}case Br.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new lm(t.droppable.containers);return o.set(n,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case Br.UnregisterDroppable:{const{id:n,key:r}=e,a=t.droppable.containers.get(n);if(!a||r!==a.key)return t;const i=new lm(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function aee(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:a}=_.useContext(um),i=ob(r),o=ob(n?.id);return _.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!QE(i)||document.activeElement===i.target)return;const s=a.get(o);if(!s)return;const{activatorNode:l,node:u}=s;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const c of[l.current,u.current]){if(!c)continue;const d=nZ(c);if(d){d.focus();break}}})}},[r,e,a,o,i]),null}function nP(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...r}),n):n}function iee(t){return _.useMemo(()=>({draggable:{...hb.draggable,...t?.draggable},droppable:{...hb.droppable,...t?.droppable},dragOverlay:{...hb.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function oee(t){let{activeNode:e,measure:n,initialRect:r,config:a=!0}=t;const i=_.useRef(!1),{x:o,y:s}=typeof a=="boolean"?{x:a,y:a}:a;vs(()=>{if(!o&&!s||!e){i.current=!1;return}if(i.current||!r)return;const l=e?.node.current;if(!l||l.isConnected===!1)return;const u=n(l),c=O8(u,r);if(o||(c.x=0),s||(c.y=0),i.current=!0,Math.abs(c.x)>0||Math.abs(c.y)>0){const d=F8(l);d&&d.scrollBy({top:c.y,left:c.x})}},[e,o,s,r,n])}const fb=_.createContext({...Vo,scaleX:1,scaleY:1});var hu;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(hu||(hu={}));const see=_.memo(function(t){var e,n,r,a;let{id:i,accessibility:o,autoScroll:s=!0,children:l,sensors:u=ZZ,collisionDetection:c=mZ,measuring:d,modifiers:p,...f}=t;const g=_.useReducer(ree,void 0,nee),[y,v]=g,[b,x]=sZ(),[w,S]=_.useState(hu.Uninitialized),C=w===hu.Initialized,{draggable:{active:E,nodes:R,translate:T},droppable:{containers:$}}=y,P=E?R.get(E):null,D=_.useRef({initial:null,translated:null}),B=_.useMemo(()=>{var or;return E!=null?{id:E,data:(or=P?.data)!=null?or:eee,rect:D}:null},[E,P]),z=_.useRef(null),[q,Y]=_.useState(null),[J,H]=_.useState(null),L=tm(f,Object.values(f)),Q=sb("DndDescribedBy",i),Z=_.useMemo(()=>$.getEnabled(),[$]),te=iee(d),{droppableRects:oe,measureDroppableContainers:he,measuringScheduled:ae}=UZ(Z,{dragging:C,dependencies:[T.x,T.y],config:te.droppable}),de=BZ(R,E),ke=_.useMemo(()=>J?ub(J):null,[J]),X=ts(),se=VZ(de,te.draggable.measure);oee({activeNode:E?R.get(E):null,config:X.layoutShiftCompensation,initialRect:se,measure:te.draggable.measure});const pe=X8(de,te.draggable.measure,se),Ne=X8(de?de.parentElement:null),Se=_.useRef({activatorEvent:null,active:null,activeNode:de,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=$.getNodeFor((e=Se.current.over)==null?void 0:e.id),Pe=JZ({measure:te.dragOverlay.measure}),We=(n=Pe.nodeRef.current)!=null?n:de,$e=C?(r=Pe.rect)!=null?r:pe:null,lt=!!(Pe.nodeRef.current&&Pe.rect),Je=HZ(lt?null:pe),Ze=J8(We?oi(We):null),Ve=qZ(C?Te??de:null),Vt=YZ(Ve),$t=nP(p,{transform:{x:T.x-Je.x,y:T.y-Je.y,scaleX:1,scaleY:1},activatorEvent:J,active:B,activeNodeRect:pe,containerNodeRect:Ne,draggingNodeRect:$e,over:Se.current.over,overlayNodeRect:Pe.rect,scrollableAncestors:Ve,scrollableAncestorRects:Vt,windowRect:Ze}),Wt=ke?Sp(ke,T):null,Gt=KZ(Ve),Ot=Y8(Gt),wt=Y8(Gt,[pe]),ln=Sp($t,Ot),hn=$e?bZ($e,$t):null,br=B&&hn?c({active:B,collisionRect:hn,droppableRects:oe,droppableContainers:Z,pointerCoordinates:Wt}):null,yn=hZ(br,"id"),[Jn,ui]=_.useState(null),Qa=lt?$t:Sp($t,wt),un=gZ(Qa,(a=Jn?.rect)!=null?a:null,pe),la=_.useCallback((or,Vn)=>{let{sensor:dt,options:le}=Vn;if(z.current==null)return;const fe=R.get(z.current);if(!fe)return;const xe=or.nativeEvent,_e=new dt({active:z.current,activeNode:fe,event:xe,options:le,context:Se,onStart(it){const nt=z.current;if(nt==null)return;const at=R.get(nt);if(!at)return;const{onDragStart:Qe}=L.current,bt={active:{id:nt,data:at.data,rect:D}};Bo.unstable_batchedUpdates(()=>{Qe?.(bt),S(hu.Initializing),v({type:Br.DragStart,initialCoordinates:it,active:nt}),b({type:"onDragStart",event:bt})})},onMove(it){v({type:Br.DragMove,coordinates:it})},onEnd:ze(Br.DragEnd),onCancel:ze(Br.DragCancel)});Bo.unstable_batchedUpdates(()=>{Y(_e),H(or.nativeEvent)});function ze(it){return async function(){const{active:nt,collisions:at,over:Qe,scrollAdjustedTranslate:bt}=Se.current;let cn=null;if(nt&&bt){const{cancelDrop:ft}=L.current;cn={activatorEvent:xe,active:nt,collisions:at,delta:bt,over:Qe},it===Br.DragEnd&&typeof ft=="function"&&await Promise.resolve(ft(cn))&&(it=Br.DragCancel)}z.current=null,Bo.unstable_batchedUpdates(()=>{v({type:it}),S(hu.Uninitialized),ui(null),Y(null),H(null);const ft=it===Br.DragEnd?"onDragEnd":"onDragCancel";if(cn){const Zt=L.current[ft];Zt?.(cn),b({type:ft,event:cn})}})}}},[R]),Ya=_.useCallback((or,Vn)=>(dt,le)=>{const fe=dt.nativeEvent,xe=R.get(le);if(z.current!==null||!xe||fe.dndKit||fe.defaultPrevented)return;const _e={active:xe};or(dt,Vn.options,_e)===!0&&(fe.dndKit={capturedBy:Vn.sensor},z.current=le,la(dt,Vn))},[R,la]),Ta=jZ(u,Ya);XZ(u),vs(()=>{pe&&w===hu.Initializing&&S(hu.Initialized)},[pe,w]),_.useEffect(()=>{const{onDragMove:or}=L.current,{active:Vn,activatorEvent:dt,collisions:le,over:fe}=Se.current;if(!Vn||!dt)return;const xe={active:Vn,activatorEvent:dt,collisions:le,delta:{x:ln.x,y:ln.y},over:fe};Bo.unstable_batchedUpdates(()=>{or?.(xe),b({type:"onDragMove",event:xe})})},[ln.x,ln.y]),_.useEffect(()=>{const{active:or,activatorEvent:Vn,collisions:dt,droppableContainers:le,scrollAdjustedTranslate:fe}=Se.current;if(!or||z.current==null||!Vn||!fe)return;const{onDragOver:xe}=L.current,_e=le.get(yn),ze=_e&&_e.rect.current?{id:_e.id,rect:_e.rect.current,data:_e.data,disabled:_e.disabled}:null,it={active:or,activatorEvent:Vn,collisions:dt,delta:{x:fe.x,y:fe.y},over:ze};Bo.unstable_batchedUpdates(()=>{ui(ze),xe?.(it),b({type:"onDragOver",event:it})})},[yn]),vs(()=>{Se.current={activatorEvent:J,active:B,activeNode:de,collisionRect:hn,collisions:br,droppableRects:oe,draggableNodes:R,draggingNode:We,draggingNodeRect:$e,droppableContainers:$,over:Jn,scrollableAncestors:Ve,scrollAdjustedTranslate:ln},D.current={initial:$e,translated:hn}},[B,de,br,hn,R,We,$e,oe,$,Jn,Ve,ln]),DZ({...X,delta:T,draggingRect:hn,pointerCoordinates:Wt,scrollableAncestors:Ve,scrollableAncestorRects:Vt});const Co=_.useMemo(()=>({active:B,activeNode:de,activeNodeRect:pe,activatorEvent:J,collisions:br,containerNodeRect:Ne,dragOverlay:Pe,draggableNodes:R,droppableContainers:$,droppableRects:oe,over:Jn,measureDroppableContainers:he,scrollableAncestors:Ve,scrollableAncestorRects:Vt,measuringConfiguration:te,measuringScheduled:ae,windowRect:Ze}),[B,de,pe,J,br,Ne,Pe,R,$,oe,Jn,he,Ve,Vt,te,ae,Ze]),Kr=_.useMemo(()=>({activatorEvent:J,activators:Ta,active:B,activeNodeRect:pe,ariaDescribedById:{draggable:Q},dispatch:v,draggableNodes:R,over:Jn,measureDroppableContainers:he}),[J,Ta,B,pe,v,Q,R,Jn,he]);return V.createElement(R8.Provider,{value:x},V.createElement(um.Provider,{value:Kr},V.createElement(tP.Provider,{value:Co},V.createElement(fb.Provider,{value:un},l)),V.createElement(aee,{disabled:o?.restoreFocus===!1})),V.createElement(cZ,{...o,hiddenTextDescribedById:Q}));function ts(){const or=q?.autoScrollEnabled===!1,Vn=typeof s=="object"?s.enabled===!1:s===!1,dt=C&&!or&&!Vn;return typeof s=="object"?{...s,enabled:dt}:{enabled:dt}}}),lee=_.createContext(null),rP="button",uee="Droppable";function cee(t){let{id:e,data:n,disabled:r=!1,attributes:a}=t;const i=sb(uee),{activators:o,activatorEvent:s,active:l,activeNodeRect:u,ariaDescribedById:c,draggableNodes:d,over:p}=_.useContext(um),{role:f=rP,roleDescription:g="draggable",tabIndex:y=0}=a??{},v=l?.id===e,b=_.useContext(v?fb:lee),[x,w]=ib(),[S,C]=ib(),E=QZ(o,e),R=tm(n);vs(()=>(d.set(e,{id:e,key:i,node:x,activatorNode:S,data:R}),()=>{const $=d.get(e);$&&$.key===i&&d.delete(e)}),[d,e]);const T=_.useMemo(()=>({role:f,tabIndex:y,"aria-disabled":r,"aria-pressed":v&&f===rP?!0:void 0,"aria-roledescription":g,"aria-describedby":c.draggable}),[r,f,y,v,g,c.draggable]);return{active:l,activatorEvent:s,activeNodeRect:u,attributes:T,isDragging:v,listeners:r?void 0:E,node:x,over:p,setNodeRef:w,setActivatorNodeRef:C,transform:b}}function dee(){return _.useContext(tP)}const pee="Droppable",hee={timeout:25};function fee(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:a}=t;const i=sb(pee),{active:o,dispatch:s,over:l,measureDroppableContainers:u}=_.useContext(um),c=_.useRef({disabled:n}),d=_.useRef(!1),p=_.useRef(null),f=_.useRef(null),{disabled:g,updateMeasurementsFor:y,timeout:v}={...hee,...a},b=tm(y??r),x=_.useCallback(()=>{if(!d.current){d.current=!0;return}f.current!=null&&clearTimeout(f.current),f.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),f.current=null},v)},[v]),w=pb({callback:x,disabled:g||!o}),S=_.useCallback((T,$)=>{w&&($&&(w.unobserve($),d.current=!1),T&&w.observe(T))},[w]),[C,E]=ib(S),R=tm(e);return _.useEffect(()=>{!w||!C.current||(w.disconnect(),d.current=!1,w.observe(C.current))},[C,w]),vs(()=>(s({type:Br.RegisterDroppable,element:{id:r,key:i,disabled:n,node:C,rect:p,data:R}}),()=>s({type:Br.UnregisterDroppable,key:i,id:r})),[r]),_.useEffect(()=>{n!==c.current.disabled&&(s({type:Br.SetDroppableDisabled,id:r,key:i,disabled:n}),c.current.disabled=n)},[r,i,n,s]),{active:o,rect:p,isOver:l?.id===r,node:C,over:l,setNodeRef:E}}function mee(t){let{animation:e,children:n}=t;const[r,a]=_.useState(null),[i,o]=_.useState(null),s=ob(n);return!n&&!r&&s&&a(s),vs(()=>{if(!i)return;const l=r?.key,u=r?.props.id;if(l==null||u==null){a(null);return}Promise.resolve(e(u,i)).then(()=>{a(null)})},[e,r,i]),V.createElement(V.Fragment,null,n,r?_.cloneElement(r,{ref:o}):null)}const gee={x:0,y:0,scaleX:1,scaleY:1};function yee(t){let{children:e}=t;return V.createElement(um.Provider,{value:eP},V.createElement(fb.Provider,{value:gee},e))}const bee={position:"fixed",touchAction:"none"},vee=t=>QE(t)?"transform 250ms ease":void 0,xee=_.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:a,children:i,className:o,rect:s,style:l,transform:u,transition:c=vee}=t;if(!s)return null;const d=a?u:{...u,scaleX:1,scaleY:1},p={...bee,width:s.width,height:s.height,top:s.top,left:s.left,transform:rm.Transform.toString(d),transformOrigin:a&&r?dZ(r,s):void 0,transition:typeof c=="function"?c(r):c,...l};return V.createElement(n,{className:o,style:p,ref:e},i)}),wee=t=>e=>{let{active:n,dragOverlay:r}=e;const a={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[s,l]of Object.entries(i.active))l!==void 0&&(a[s]=n.node.style.getPropertyValue(s),n.node.style.setProperty(s,l));if(i!=null&&i.dragOverlay)for(const[s,l]of Object.entries(i.dragOverlay))l!==void 0&&r.node.style.setProperty(s,l);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[s,l]of Object.entries(a))n.node.style.setProperty(s,l);o!=null&&o.active&&n.node.classList.remove(o.active)}},kee=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:rm.Transform.toString(e)},{transform:rm.Transform.toString(n)}]},See={duration:250,easing:"ease",keyframes:kee,sideEffects:wee({styles:{active:{opacity:"0"}}})};function Cee(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:a}=t;return ab((i,o)=>{if(e===null)return;const s=n.get(i);if(!s)return;const l=s.node.current;if(!l)return;const u=Z8(o);if(!u)return;const{transform:c}=oi(o).getComputedStyle(o),d=M8(c);if(!d)return;const p=typeof e=="function"?e:Eee(e);return j8(l,a.draggable.measure),p({active:{id:i,data:s.data,node:l,rect:a.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:o,rect:a.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:a,transform:d})})}function Eee(t){const{duration:e,easing:n,sideEffects:r,keyframes:a}={...See,...t};return i=>{let{active:o,dragOverlay:s,transform:l,...u}=i;if(!e)return;const c={x:s.rect.left-o.rect.left,y:s.rect.top-o.rect.top},d={scaleX:l.scaleX!==1?o.rect.width*l.scaleX/s.rect.width:1,scaleY:l.scaleY!==1?o.rect.height*l.scaleY/s.rect.height:1},p={x:l.x-c.x,y:l.y-c.y,...d},f=a({...u,active:o,dragOverlay:s,transform:{initial:l,final:p}}),[g]=f,y=f[f.length-1];if(JSON.stringify(g)===JSON.stringify(y))return;const v=r?.({active:o,dragOverlay:s,...u}),b=s.node.animate(f,{duration:e,easing:n,fill:"forwards"});return new Promise(x=>{b.onfinish=()=>{v?.(),x()}})}}let aP=0;function Nee(t){return _.useMemo(()=>{if(t!=null)return aP++,aP},[t])}const Tee=V.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:a,transition:i,modifiers:o,wrapperElement:s="div",className:l,zIndex:u=999}=t;const{activatorEvent:c,active:d,activeNodeRect:p,containerNodeRect:f,draggableNodes:g,droppableContainers:y,dragOverlay:v,over:b,measuringConfiguration:x,scrollableAncestors:w,scrollableAncestorRects:S,windowRect:C}=dee(),E=_.useContext(fb),R=Nee(d?.id),T=nP(o,{activatorEvent:c,active:d,activeNodeRect:p,containerNodeRect:f,draggingNodeRect:v.rect,over:b,overlayNodeRect:v.rect,scrollableAncestors:w,scrollableAncestorRects:S,transform:E,windowRect:C}),$=o4(p),P=Cee({config:r,draggableNodes:g,droppableContainers:y,measuringConfiguration:x}),D=$?v.setRef:void 0;return V.createElement(yee,null,V.createElement(mee,{animation:P},d&&R?V.createElement(xee,{key:R,id:d.id,ref:D,as:s,activatorEvent:c,adjustScale:e,className:l,transition:i,rect:$,style:{zIndex:u,...a},transform:T},n):null))});function l4(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var Iee=["color"],_ee=_.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,a=l4(t,Iee);return _.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:e}),_.createElement("path",{d:"M3 9C3 6.5 4.5 4.25 7.5 1.5C10.5 4.25 12 6.5 12 9C12 11.4853 9.98528 13.5 7.5 13.5C5.01472 13.5 3 11.4853 3 9ZM10.9524 8.30307C9.67347 7.82121 8.2879 8.46208 6.98956 9.06259C5.9327 9.55142 4.93365 10.0135 4.09695 9.82153C4.03357 9.55804 4 9.28294 4 9C4 7.11203 5.02686 5.27195 7.5 2.87357C9.66837 4.97639 10.725 6.65004 10.9524 8.30307Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Ree=["color"],$ee=_.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,a=l4(t,Ree);return _.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:e}),_.createElement("path",{d:"M7.85367 1.48956C7.65841 1.29429 7.34182 1.29429 7.14656 1.48956L1.48971 7.14641C1.29445 7.34167 1.29445 7.65825 1.48971 7.85352L7.14656 13.5104C7.34182 13.7056 7.65841 13.7056 7.85367 13.5104L13.5105 7.85352C13.7058 7.65825 13.7058 7.34167 13.5105 7.14641L7.85367 1.48956ZM7.5 2.55033L2.55037 7.49996L7.5 12.4496V2.55033Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Oee=["color"],Mee=_.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,a=l4(t,Oee);return _.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:e}),_.createElement("path",{d:"M2.85714 2H12.1429C12.6162 2 13 2.38376 13 2.85714V12.1429C13 12.6162 12.6162 13 12.1429 13H2.85714C2.38376 13 2 12.6162 2 12.1429V2.85714C2 2.38376 2.38376 2 2.85714 2ZM1 2.85714C1 1.83147 1.83147 1 2.85714 1H12.1429C13.1685 1 14 1.83147 14 2.85714V12.1429C14 13.1685 13.1685 14 12.1429 14H2.85714C1.83147 14 1 13.1685 1 12.1429V2.85714ZM7.49988 5.00012C7.77602 5.00012 7.99988 4.77626 7.99988 4.50012C7.99988 4.22398 7.77602 4.00012 7.49988 4.00012C7.22374 4.00012 6.99988 4.22398 6.99988 4.50012C6.99988 4.77626 7.22374 5.00012 7.49988 5.00012ZM4.49988 11.0001C4.77602 11.0001 4.99988 10.7763 4.99988 10.5001C4.99988 10.224 4.77602 10.0001 4.49988 10.0001C4.22374 10.0001 3.99988 10.224 3.99988 10.5001C3.99988 10.7763 4.22374 11.0001 4.49988 11.0001ZM4.99988 7.50012C4.99988 7.77626 4.77602 8.00012 4.49988 8.00012C4.22374 8.00012 3.99988 7.77626 3.99988 7.50012C3.99988 7.22398 4.22374 7.00012 4.49988 7.00012C4.77602 7.00012 4.99988 7.22398 4.99988 7.50012ZM4.49988 5.00012C4.77602 5.00012 4.99988 4.77626 4.99988 4.50012C4.99988 4.22398 4.77602 4.00012 4.49988 4.00012C4.22374 4.00012 3.99988 4.22398 3.99988 4.50012C3.99988 4.77626 4.22374 5.00012 4.49988 5.00012ZM10.9999 10.5001C10.9999 10.7763 10.776 11.0001 10.4999 11.0001C10.2237 11.0001 9.99988 10.7763 9.99988 10.5001C9.99988 10.224 10.2237 10.0001 10.4999 10.0001C10.776 10.0001 10.9999 10.224 10.9999 10.5001ZM10.4999 8.00012C10.776 8.00012 10.9999 7.77626 10.9999 7.50012C10.9999 7.22398 10.776 7.00012 10.4999 7.00012C10.2237 7.00012 9.99988 7.22398 9.99988 7.50012C9.99988 7.77626 10.2237 8.00012 10.4999 8.00012ZM10.9999 4.50012C10.9999 4.77626 10.776 5.00012 10.4999 5.00012C10.2237 5.00012 9.99988 4.77626 9.99988 4.50012C9.99988 4.22398 10.2237 4.00012 10.4999 4.00012C10.776 4.00012 10.9999 4.22398 10.9999 4.50012ZM7.49988 11.0001C7.77602 11.0001 7.99988 10.7763 7.99988 10.5001C7.99988 10.224 7.77602 10.0001 7.49988 10.0001C7.22374 10.0001 6.99988 10.224 6.99988 10.5001C6.99988 10.7763 7.22374 11.0001 7.49988 11.0001Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),iP={exports:{}};(function(t,e){(function(n,r){r()})(ti,function(){function n(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,c,d){var p=new XMLHttpRequest;p.open("GET",u),p.responseType="blob",p.onload=function(){l(p.response,c,d)},p.onerror=function(){console.error("could not download file")},p.send()}function a(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function i(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ti=="object"&&ti.global===ti?ti:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(u,c,d){var p=o.URL||o.webkitURL,f=document.createElement("a");c=c||u.name||"download",f.download=c,f.rel="noopener",typeof u=="string"?(f.href=u,f.origin===location.origin?i(f):a(f.href)?r(u,c,d):i(f,f.target="_blank")):(f.href=p.createObjectURL(u),setTimeout(function(){p.revokeObjectURL(f.href)},4e4),setTimeout(function(){i(f)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,d){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,d),c);else if(a(u))r(u,c,d);else{var p=document.createElement("a");p.href=u,p.target="_blank",setTimeout(function(){i(p)})}}:function(u,c,d,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof u=="string")return r(u,c,d);var f=u.type==="application/octet-stream",g=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||f&&g||s)&&typeof FileReader<"u"){var v=new FileReader;v.onloadend=function(){var w=v.result;w=y?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=w:location=w,p=null},v.readAsDataURL(u)}else{var b=o.URL||o.webkitURL,x=b.createObjectURL(u);p?p.location=x:location.href=x,p=null,setTimeout(function(){b.revokeObjectURL(x)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(iP);var Pee=iP.exports,u4={exports:{}},mb={},gb={},Lt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof ti<"u"?ti:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.3",isBrowser:n(),isUnminified:/param/.test(function(a){}.toString()),dblClickWindow:400,getAngle(a){return t.Konva.angleDeg?a*e:a},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(a){t.glob.Konva=a}};const r=a=>{t.Konva[a.prototype.getClassName()]=a};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(Lt);var ir={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=Lt;class n{constructor(S=[1,0,0,1,0,0]){this.dirty=!1,this.m=S&&S.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(S){S.m[0]=this.m[0],S.m[1]=this.m[1],S.m[2]=this.m[2],S.m[3]=this.m[3],S.m[4]=this.m[4],S.m[5]=this.m[5]}point(S){var C=this.m;return{x:C[0]*S.x+C[2]*S.y+C[4],y:C[1]*S.x+C[3]*S.y+C[5]}}translate(S,C){return this.m[4]+=this.m[0]*S+this.m[2]*C,this.m[5]+=this.m[1]*S+this.m[3]*C,this}scale(S,C){return this.m[0]*=S,this.m[1]*=S,this.m[2]*=C,this.m[3]*=C,this}rotate(S){var C=Math.cos(S),E=Math.sin(S),R=this.m[0]*C+this.m[2]*E,T=this.m[1]*C+this.m[3]*E,$=this.m[0]*-E+this.m[2]*C,P=this.m[1]*-E+this.m[3]*C;return this.m[0]=R,this.m[1]=T,this.m[2]=$,this.m[3]=P,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(S,C){var E=this.m[0]+this.m[2]*C,R=this.m[1]+this.m[3]*C,T=this.m[2]+this.m[0]*S,$=this.m[3]+this.m[1]*S;return this.m[0]=E,this.m[1]=R,this.m[2]=T,this.m[3]=$,this}multiply(S){var C=this.m[0]*S.m[0]+this.m[2]*S.m[1],E=this.m[1]*S.m[0]+this.m[3]*S.m[1],R=this.m[0]*S.m[2]+this.m[2]*S.m[3],T=this.m[1]*S.m[2]+this.m[3]*S.m[3],$=this.m[0]*S.m[4]+this.m[2]*S.m[5]+this.m[4],P=this.m[1]*S.m[4]+this.m[3]*S.m[5]+this.m[5];return this.m[0]=C,this.m[1]=E,this.m[2]=R,this.m[3]=T,this.m[4]=$,this.m[5]=P,this}invert(){var S=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*S,E=-this.m[1]*S,R=-this.m[2]*S,T=this.m[0]*S,$=S*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),P=S*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=E,this.m[2]=R,this.m[3]=T,this.m[4]=$,this.m[5]=P,this}getMatrix(){return this.m}decompose(){var S=this.m[0],C=this.m[1],E=this.m[2],R=this.m[3],T=this.m[4],$=this.m[5],P=S*R-C*E;let D={x:T,y:$,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(S!=0||C!=0){var B=Math.sqrt(S*S+C*C);D.rotation=C>0?Math.acos(S/B):-Math.acos(S/B),D.scaleX=B,D.scaleY=P/B,D.skewX=(S*E+C*R)/P,D.skewY=0}else if(E!=0||R!=0){var z=Math.sqrt(E*E+R*R);D.rotation=Math.PI/2-(R>0?Math.acos(-E/z):-Math.acos(E/z)),D.scaleX=P/z,D.scaleY=z,D.skewX=0,D.skewY=(S*E+C*R)/P}return D.rotation=t.Util._getRotation(D.rotation),D}}t.Transform=n;var r="[object Array]",a="[object Number]",i="[object String]",o="[object Boolean]",s=Math.PI/180,l=180/Math.PI,u="#",c="",d="0",p="Konva warning: ",f="Konva error: ",g="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,b=[];const x=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(w){setTimeout(w,60)};t.Util={_isElement(w){return!!(w&&w.nodeType==1)},_isFunction(w){return!!(w&&w.constructor&&w.call&&w.apply)},_isPlainObject(w){return!!w&&w.constructor===Object},_isArray(w){return Object.prototype.toString.call(w)===r},_isNumber(w){return Object.prototype.toString.call(w)===a&&!isNaN(w)&&isFinite(w)},_isString(w){return Object.prototype.toString.call(w)===i},_isBoolean(w){return Object.prototype.toString.call(w)===o},isObject(w){return w instanceof Object},isValidSelector(w){if(typeof w!="string")return!1;var S=w[0];return S==="#"||S==="."||S===S.toUpperCase()},_sign(w){return w===0||w>0?1:-1},requestAnimFrame(w){b.push(w),b.length===1&&x(function(){const S=b;b=[],S.forEach(function(C){C()})})},createCanvasElement(){var w=document.createElement("canvas");try{w.style=w.style||{}}catch{}return w},createImageElement(){return document.createElement("img")},_isInDocument(w){for(;w=w.parentNode;)if(w==document)return!0;return!1},_urlToImage(w,S){var C=t.Util.createImageElement();C.onload=function(){S(C)},C.src=w},_rgbToHex(w,S,C){return((1<<24)+(w<<16)+(S<<8)+C).toString(16).slice(1)},_hexToRgb(w){w=w.replace(u,c);var S=parseInt(w,16);return{r:S>>16&255,g:S>>8&255,b:S&255}},getRandomColor(){for(var w=(Math.random()*16777215<<0).toString(16);w.length<6;)w=d+w;return u+w},getRGB(w){var S;return w in y?(S=y[w],{r:S[0],g:S[1],b:S[2]}):w[0]===u?this._hexToRgb(w.substring(1)):w.substr(0,4)===g?(S=v.exec(w.replace(/ /g,"")),{r:parseInt(S[1],10),g:parseInt(S[2],10),b:parseInt(S[3],10)}):{r:0,g:0,b:0}},colorToRGBA(w){return w=w||"black",t.Util._namedColorToRBA(w)||t.Util._hex3ColorToRGBA(w)||t.Util._hex4ColorToRGBA(w)||t.Util._hex6ColorToRGBA(w)||t.Util._hex8ColorToRGBA(w)||t.Util._rgbColorToRGBA(w)||t.Util._rgbaColorToRGBA(w)||t.Util._hslColorToRGBA(w)},_namedColorToRBA(w){var S=y[w.toLowerCase()];return S?{r:S[0],g:S[1],b:S[2],a:1}:null},_rgbColorToRGBA(w){if(w.indexOf("rgb(")===0){w=w.match(/rgb\(([^)]+)\)/)[1];var S=w.split(/ *, */).map(Number);return{r:S[0],g:S[1],b:S[2],a:1}}},_rgbaColorToRGBA(w){if(w.indexOf("rgba(")===0){w=w.match(/rgba\(([^)]+)\)/)[1];var S=w.split(/ *, */).map((C,E)=>C.slice(-1)==="%"?E===3?parseInt(C)/100:parseInt(C)/100*255:Number(C));return{r:S[0],g:S[1],b:S[2],a:S[3]}}},_hex8ColorToRGBA(w){if(w[0]==="#"&&w.length===9)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:parseInt(w.slice(7,9),16)/255}},_hex6ColorToRGBA(w){if(w[0]==="#"&&w.length===7)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:1}},_hex4ColorToRGBA(w){if(w[0]==="#"&&w.length===5)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:parseInt(w[4]+w[4],16)/255}},_hex3ColorToRGBA(w){if(w[0]==="#"&&w.length===4)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:1}},_hslColorToRGBA(w){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(w)){const[S,...C]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(w),E=Number(C[0])/360,R=Number(C[1])/100,T=Number(C[2])/100;let $,P,D;if(R===0)return D=T*255,{r:Math.round(D),g:Math.round(D),b:Math.round(D),a:1};T<.5?$=T*(1+R):$=T+R-T*R;const B=2*T-$,z=[0,0,0];for(let q=0;q<3;q++)P=E+1/3*-(q-1),P<0&&P++,P>1&&P--,6*P<1?D=B+($-B)*6*P:2*P<1?D=$:3*P<2?D=B+($-B)*(2/3-P)*6:D=B,z[q]=D*255;return{r:Math.round(z[0]),g:Math.round(z[1]),b:Math.round(z[2]),a:1}}},haveIntersection(w,S){return!(S.x>w.x+w.width||S.x+S.width<w.x||S.y>w.y+w.height||S.y+S.height<w.y)},cloneObject(w){var S={};for(var C in w)this._isPlainObject(w[C])?S[C]=this.cloneObject(w[C]):this._isArray(w[C])?S[C]=this.cloneArray(w[C]):S[C]=w[C];return S},cloneArray(w){return w.slice(0)},degToRad(w){return w*s},radToDeg(w){return w*l},_degToRad(w){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(w)},_radToDeg(w){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(w)},_getRotation(w){return e.Konva.angleDeg?t.Util.radToDeg(w):w},_capitalize(w){return w.charAt(0).toUpperCase()+w.slice(1)},throw(w){throw new Error(f+w)},error(w){console.error(f+w)},warn(w){e.Konva.showWarnings&&console.warn(p+w)},each(w,S){for(var C in w)S(C,w[C])},_inRange(w,S,C){return S<=w&&w<C},_getProjectionToSegment(w,S,C,E,R,T){var $,P,D,B=(w-C)*(w-C)+(S-E)*(S-E);if(B==0)$=w,P=S,D=(R-C)*(R-C)+(T-E)*(T-E);else{var z=((R-w)*(C-w)+(T-S)*(E-S))/B;z<0?($=w,P=S,D=(w-R)*(w-R)+(S-T)*(S-T)):z>1?($=C,P=E,D=(C-R)*(C-R)+(E-T)*(E-T)):($=w+z*(C-w),P=S+z*(E-S),D=($-R)*($-R)+(P-T)*(P-T))}return[$,P,D]},_getProjectionToLine(w,S,C){var E=t.Util.cloneObject(w),R=Number.MAX_VALUE;return S.forEach(function(T,$){if(!(!C&&$===S.length-1)){var P=S[($+1)%S.length],D=t.Util._getProjectionToSegment(T.x,T.y,P.x,P.y,w.x,w.y),B=D[0],z=D[1],q=D[2];q<R&&(E.x=B,E.y=z,R=q)}}),E},_prepareArrayForTween(w,S,C){var E,R=[],T=[];if(w.length>S.length){var $=S;S=w,w=$}for(E=0;E<w.length;E+=2)R.push({x:w[E],y:w[E+1]});for(E=0;E<S.length;E+=2)T.push({x:S[E],y:S[E+1]});var P=[];return T.forEach(function(D){var B=t.Util._getProjectionToLine(D,R,C);P.push(B.x),P.push(B.y)}),P},_prepareToStringify(w){var S;w.visitedByCircularReferenceRemoval=!0;for(var C in w)if(w.hasOwnProperty(C)&&w[C]&&typeof w[C]=="object"){if(S=Object.getOwnPropertyDescriptor(w,C),w[C].visitedByCircularReferenceRemoval||t.Util._isElement(w[C]))if(S.configurable)delete w[C];else return null;else if(t.Util._prepareToStringify(w[C])===null)if(S.configurable)delete w[C];else return null}return delete w.visitedByCircularReferenceRemoval,w},_assign(w,S){for(var C in S)w[C]=S[C];return w},_getFirstPointerId(w){return w.touches?w.changedTouches[0].identifier:w.pointerId||999},releaseCanvas(...w){e.Konva.releaseCanvasOnDestroy&&w.forEach(S=>{S.width=0,S.height=0})},drawRoundedRectPath(w,S,C,E){let R=0,T=0,$=0,P=0;typeof E=="number"?R=T=$=P=Math.min(E,S/2,C/2):(R=Math.min(E[0]||0,S/2,C/2),T=Math.min(E[1]||0,S/2,C/2),P=Math.min(E[2]||0,S/2,C/2),$=Math.min(E[3]||0,S/2,C/2)),w.moveTo(R,0),w.lineTo(S-T,0),w.arc(S-T,T,T,Math.PI*3/2,0,!1),w.lineTo(S,C-P),w.arc(S-P,C-P,P,0,Math.PI/2,!1),w.lineTo($,C),w.arc($,C-$,$,Math.PI/2,Math.PI,!1),w.lineTo(0,R),w.arc(R,R,R,Math.PI,Math.PI*3/2,!1)}}})(ir);var Kn={},zt={},tt={};Object.defineProperty(tt,"__esModule",{value:!0}),tt.getComponentValidator=tt.getBooleanValidator=tt.getNumberArrayValidator=tt.getFunctionValidator=tt.getStringOrGradientValidator=tt.getStringValidator=tt.getNumberOrAutoValidator=tt.getNumberOrArrayOfNumbersValidator=tt.getNumberValidator=tt.alphaComponent=tt.RGBComponent=void 0;const il=Lt,fr=ir;function ol(t){return fr.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||fr.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function Fee(t){return t>255?255:t<0?0:Math.round(t)}tt.RGBComponent=Fee;function Aee(t){return t>1?1:t<1e-4?1e-4:t}tt.alphaComponent=Aee;function Dee(){if(il.Konva.isUnminified)return function(t,e){return fr.Util._isNumber(t)||fr.Util.warn(ol(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}tt.getNumberValidator=Dee;function Lee(t){if(il.Konva.isUnminified)return function(e,n){let r=fr.Util._isNumber(e),a=fr.Util._isArray(e)&&e.length==t;return!r&&!a&&fr.Util.warn(ol(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}tt.getNumberOrArrayOfNumbersValidator=Lee;function zee(){if(il.Konva.isUnminified)return function(t,e){var n=fr.Util._isNumber(t),r=t==="auto";return n||r||fr.Util.warn(ol(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}tt.getNumberOrAutoValidator=zee;function Bee(){if(il.Konva.isUnminified)return function(t,e){return fr.Util._isString(t)||fr.Util.warn(ol(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}tt.getStringValidator=Bee;function jee(){if(il.Konva.isUnminified)return function(t,e){const n=fr.Util._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||fr.Util.warn(ol(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}tt.getStringOrGradientValidator=jee;function Uee(){if(il.Konva.isUnminified)return function(t,e){return fr.Util._isFunction(t)||fr.Util.warn(ol(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}tt.getFunctionValidator=Uee;function Vee(){if(il.Konva.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(fr.Util._isArray(t)?t.forEach(function(r){fr.Util._isNumber(r)||fr.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):fr.Util.warn(ol(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}tt.getNumberArrayValidator=Vee;function Wee(){if(il.Konva.isUnminified)return function(t,e){var n=t===!0||t===!1;return n||fr.Util.warn(ol(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}tt.getBooleanValidator=Wee;function Gee(t){if(il.Konva.isUnminified)return function(e,n){return e==null||fr.Util.isObject(e)||fr.Util.warn(ol(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}tt.getComponentValidator=Gee,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=ir,n=tt;var r="get",a="set";t.Factory={addGetterSetter(i,o,s,l,u){t.Factory.addGetter(i,o,s),t.Factory.addSetter(i,o,l,u),t.Factory.addOverloadedGetterSetter(i,o)},addGetter(i,o,s){var l=r+e.Util._capitalize(o);i.prototype[l]=i.prototype[l]||function(){var u=this.attrs[o];return u===void 0?s:u}},addSetter(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]||t.Factory.overWriteSetter(i,o,s,l)},overWriteSetter(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]=function(c){return s&&c!==void 0&&c!==null&&(c=s.call(this,c,o)),this._setAttr(o,c),l&&l.call(this),this}},addComponentsGetterSetter(i,o,s,l,u){var c=s.length,d=e.Util._capitalize,p=r+d(o),f=a+d(o),g,y;i.prototype[p]=function(){var b={};for(g=0;g<c;g++)y=s[g],b[y]=this.getAttr(o+d(y));return b};var v=(0,n.getComponentValidator)(s);i.prototype[f]=function(b){var x=this.attrs[o],w;l&&(b=l.call(this,b)),v&&v.call(this,b,o);for(w in b)b.hasOwnProperty(w)&&this._setAttr(o+d(w),b[w]);return b||s.forEach(S=>{this._setAttr(o+d(S),void 0)}),this._fireChangeEvent(o,x,b),u&&u.call(this),this},t.Factory.addOverloadedGetterSetter(i,o)},addOverloadedGetterSetter(i,o){var s=e.Util._capitalize(o),l=a+s,u=r+s;i.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(i,o,s,l){e.Util.error("Adding deprecated "+o);var u=r+e.Util._capitalize(o),c=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";i.prototype[u]=function(){e.Util.error(c);var d=this.attrs[o];return d===void 0?s:d},t.Factory.addSetter(i,o,l,function(){e.Util.error(c)}),t.Factory.addOverloadedGetterSetter(i,o)},backCompat(i,o){e.Util.each(o,function(s,l){var u=i.prototype[l],c=r+e.Util._capitalize(s),d=a+e.Util._capitalize(s);function p(){u.apply(this,arguments),e.Util.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}i.prototype[s]=p,i.prototype[c]=p,i.prototype[d]=p})},afterSetFilter(){this._filterUpToDate=!1}}}(zt);var Wo={},sl={};Object.defineProperty(sl,"__esModule",{value:!0}),sl.HitContext=sl.SceneContext=sl.Context=void 0;const oP=ir,Hee=Lt;function qee(t){var e=[],n=t.length,r=oP.Util,a,i;for(a=0;a<n;a++)i=t[a],r._isNumber(i)?i=Math.round(i*1e3)/1e3:r._isString(i)||(i=i+""),e.push(i);return e}var sP=",",Kee="(",Xee=")",Qee="([",Yee="])",Jee=";",Zee="()",ete="=",lP=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],tte=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const nte=100;class yb{constructor(e){this.canvas=e,Hee.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var r=this.traceArr,a=r.length,i="",o,s,l,u;for(o=0;o<a;o++)s=r[o],l=s.method,l?(u=s.args,i+=l,e?i+=Zee:oP.Util._isArray(u[0])?i+=Qee+u.join(sP)+Yee:(n&&(u=u.map(c=>typeof c=="number"?Math.floor(c):c)),i+=Kee+u.join(sP)+Xee)):(i+=s.property,e||(i+=ete+s.val)),i+=Jee;return i}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,r;n.push(e),r=n.length,r>=nte&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,a,i,o){this._context.arc(e,n,r,a,i,o)}arcTo(e,n,r,a,i){this._context.arcTo(e,n,r,a,i)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,a,i,o){this._context.bezierCurveTo(e,n,r,a,i,o)}clearRect(e,n,r,a){this._context.clearRect(e,n,r,a)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){var r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,a){return this._context.createLinearGradient(e,n,r,a)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,a,i,o){return this._context.createRadialGradient(e,n,r,a,i,o)}drawImage(e,n,r,a,i,o,s,l,u){var c=arguments,d=this._context;c.length===3?d.drawImage(e,n,r):c.length===5?d.drawImage(e,n,r,a,i):c.length===9&&d.drawImage(e,n,r,a,i,o,s,l,u)}ellipse(e,n,r,a,i,o,s,l){this._context.ellipse(e,n,r,a,i,o,s,l)}isPointInPath(e,n,r,a){return r?this._context.isPointInPath(r,e,n,a):this._context.isPointInPath(e,n,a)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,r,a){this._context.fillRect(e,n,r,a)}strokeRect(e,n,r,a){this._context.strokeRect(e,n,r,a)}fillText(e,n,r,a){a?this._context.fillText(e,n,r,a):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,a){return this._context.getImageData(e,n,r,a)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,a){this._context.rect(e,n,r,a)}roundRect(e,n,r,a,i){this._context.roundRect(e,n,r,a,i)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,a){this._context.quadraticCurveTo(e,n,r,a)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,a,i,o){this._context.setTransform(e,n,r,a,i,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,a){this._context.strokeText(e,n,r,a)}transform(e,n,r,a,i,o){this._context.transform(e,n,r,a,i,o)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=lP.length,r=this.setAttr,a,i,o=function(s){var l=e[s],u;e[s]=function(){return i=qee(Array.prototype.slice.call(arguments,0)),u=l.apply(e,arguments),e._trace({method:s,args:i}),u}};for(a=0;a<n;a++)o(lP[a]);e.setAttr=function(){r.apply(e,arguments);var s=arguments[0],l=arguments[1];(s==="shadowOffsetX"||s==="shadowOffsetY"||s==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:s,val:l})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var r=!n||n==="source-over";r||this.setAttr("globalCompositeOperation",n)}}sl.Context=yb,tte.forEach(function(t){Object.defineProperty(yb.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class rte extends yb{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}const a=e.getFillPatternImage();if(a&&r==="pattern"){this._fillPattern(e);return}const i=e.getFillLinearGradientColorStops();if(i&&r==="linear-gradient"){this._fillLinearGradient(e);return}const o=e.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):a?this._fillPattern(e):i?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),a=e.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(n.x,n.y,r.x,r.y);if(a){for(var o=0;o<a.length;o+=2)i.addColorStop(a[o],a[o+1]);this.setAttr("strokeStyle",i)}}_stroke(e){var n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var i=e.getStrokeLinearGradientColorStops();i?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,a,i=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",o=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,s=(a=e.getShadowOffset())!==null&&a!==void 0?a:{x:0,y:0},l=e.getAbsoluteScale(),u=this.canvas.getPixelRatio(),c=l.x*u,d=l.y*u;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",o*Math.min(Math.abs(c),Math.abs(d))),this.setAttr("shadowOffsetX",s.x*c),this.setAttr("shadowOffsetY",s.y*d)}}sl.SceneContext=rte;class ate extends yb{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const i=e.getStrokeScaleEnabled();if(!i){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var r=e.hitStrokeWidth(),a=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",a),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),i||this.restore()}}}sl.HitContext=ate,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.HitCanvas=Wo.SceneCanvas=Wo.Canvas=void 0;const bb=ir,uP=sl,cP=Lt,ite=zt,ote=tt;var vb;function ste(){if(vb)return vb;var t=bb.Util.createCanvasElement(),e=t.getContext("2d");return vb=function(){var n=cP.Konva._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),bb.Util.releaseCanvas(t),vb}class xb{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},r=n.pixelRatio||cP.Konva.pixelRatio||ste();this.pixelRatio=r,this._canvas=bb.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(r){return bb.Util.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Wo.Canvas=xb,ite.Factory.addGetterSetter(xb,"pixelRatio",void 0,(0,ote.getNumberValidator)());class lte extends xb{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new uP.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Wo.SceneCanvas=lte;class ute extends xb{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new uP.HitContext(this),this.setSize(e.width,e.height)}}Wo.HitCanvas=ute;var wb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=Lt,n=ir;t.DD={get isDragging(){var r=!1;return t.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){var r;return t.DD._dragElements.forEach(a=>{r=a.node}),r},_dragElements:new Map,_drag(r){const a=[];t.DD._dragElements.forEach((i,o)=>{const{node:s}=i,l=s.getStage();l.setPointersPositions(r),i.pointerId===void 0&&(i.pointerId=n.Util._getFirstPointerId(r));const u=l._changedPointerPositions.find(p=>p.id===i.pointerId);if(u){if(i.dragStatus!=="dragging"){var c=s.dragDistance(),d=Math.max(Math.abs(u.x-i.startPointerPos.x),Math.abs(u.y-i.startPointerPos.y));if(d<c||(s.startDrag({evt:r}),!s.isDragging()))return}s._setDragPosition(r,i),a.push(s)}}),a.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:r},!0)})},_endDragBefore(r){const a=[];t.DD._dragElements.forEach(i=>{const{node:o}=i,s=o.getStage();if(r&&s.setPointersPositions(r),!s._changedPointerPositions.find(u=>u.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,i.dragStatus="stopped");const l=i.node.getLayer()||i.node instanceof e.Konva.Stage&&i.node;l&&a.indexOf(l)===-1&&a.push(l)}),a.forEach(i=>{i.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((a,i)=>{a.dragStatus==="stopped"&&a.node.fire("dragend",{type:"dragend",target:a.node,evt:r},!0),a.dragStatus!=="dragging"&&t.DD._dragElements.delete(i)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1))})(wb),Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.Node=void 0;const Kt=ir,cm=zt,dm=Wo,Tc=Lt,uo=wb,Sr=tt;var kb="absoluteOpacity",Sb="allEventListeners",ll="absoluteTransform",dP="absoluteScale",Ic="canvas",cte="Change",dte="children",pte="konva",c4="listening",pP="mouseenter",hP="mouseleave",fP="set",mP="Shape",Cb=" ",gP="stage",fu="transform",hte="Stage",d4="visible",fte=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Cb);let mte=1;class xt{constructor(e){this._id=mte++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===fu||e===ll)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var r=this._cache.get(e),a=e===fu||e===ll,i=r===void 0||a&&r.dirty===!0;return i&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const a=n.map(i=>i+"Change.konva").join(Cb);this.on(a,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(Ic)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===ll&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Ic)){const{scene:e,filter:n,hit:r}=this._cache.get(Ic);Kt.Util.releaseCanvas(e,n,r),this._cache.delete(Ic)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var a=Math.ceil(n.width||r.width),i=Math.ceil(n.height||r.height),o=n.pixelRatio,s=n.x===void 0?Math.floor(r.x):n.x,l=n.y===void 0?Math.floor(r.y):n.y,u=n.offset||0,c=n.drawBorder||!1,d=n.hitCanvasPixelRatio||1;if(!a||!i){Kt.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const p=Math.abs(Math.round(r.x)-s)>.5?1:0,f=Math.abs(Math.round(r.y)-l)>.5?1:0;a+=u*2+p,i+=u*2+f,s-=u,l-=u;var g=new dm.SceneCanvas({pixelRatio:o,width:a,height:i}),y=new dm.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),v=new dm.HitCanvas({pixelRatio:d,width:a,height:i}),b=g.getContext(),x=v.getContext();return v.isCache=!0,g.isCache=!0,this._cache.delete(Ic),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(g.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1),b.save(),x.save(),b.translate(-s,-l),x.translate(-s,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(kb),this._clearSelfAndDescendantCache(dP),this.drawScene(g,this),this.drawHit(v,this),this._isUnderCache=!1,b.restore(),x.restore(),c&&(b.save(),b.beginPath(),b.rect(0,0,a,i),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(Ic,{scene:g,filter:y,hit:v,x:s,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Ic)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],a=1/0,i=1/0,o=-1/0,s=-1/0,l=this.getAbsoluteTransform(n);return r.forEach(function(u){var c=l.point(u);a===void 0&&(a=o=c.x,i=s=c.y),a=Math.min(a,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y)}),{x:a,y:i,width:o-a,height:s-i}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var r=this._getCachedSceneCanvas(),a=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/a,r.height/a),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),r=n.scene,a=n.filter,i=a.getContext(),o,s,l,u;if(e){if(!this._filterUpToDate){var c=r.pixelRatio;a.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=e.length,i.clear(),i.drawImage(r._canvas,0,0,r.getWidth()/c,r.getHeight()/c),s=i.getImageData(0,0,a.getWidth(),a.getHeight()),l=0;l<o;l++){if(u=e[l],typeof u!="function"){Kt.Util.error("Filter should be type of function, but got "+typeof u+" instead. Please check correct filters");continue}u.call(this,s),i.putImageData(s,0,0)}}catch(d){Kt.Util.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return a}return r}on(e,n){if(this._cache&&this._cache.delete(Sb),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split(Cb),a=r.length,i,o,s,l,u;for(i=0;i<a;i++)o=r[i],s=o.split("."),l=s[0],u=s[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:u,handler:n});return this}off(e,n){var r=(e||"").split(Cb),a=r.length,i,o,s,l,u,c;if(this._cache&&this._cache.delete(Sb),!e)for(o in this.eventListeners)this._off(o);for(i=0;i<a;i++)if(s=r[i],l=s.split("."),u=l[0],c=l[1],u)this.eventListeners[u]&&this._off(u,c,n);else for(o in this.eventListeners)this._off(o,c,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){var a=this;this.on(e,function(i){for(var o=i.target.findAncestors(n,!0,a),s=0;s<o.length;s++)i=Kt.Util.cloneObject(i),i.currentTarget=o[s],r.call(o[s],i)})}remove(){return this.isDragging()&&this.stopDrag(),uo.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ll),this._clearSelfAndDescendantCache(kb),this._clearSelfAndDescendantCache(dP),this._clearSelfAndDescendantCache(gP),this._clearSelfAndDescendantCache(d4),this._clearSelfAndDescendantCache(c4)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+Kt.Util._capitalize(e);return Kt.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,r;if(!e)return this;for(n in e)n!==dte&&(r=fP+Kt.Util._capitalize(n),Kt.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(c4,this._isListening)}_isListening(e){if(!this.listening())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(d4,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),a=!1;uo.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(a=!0)});var i=!n&&!Tc.Konva.hitOnDragEnabled&&a;return this.isListening()&&this.isVisible()&&!i}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,r=0,a,i,o,s;function l(c){for(a=[],i=c.length,o=0;o<i;o++)s=c[o],r++,s.nodeType!==mP&&(a=a.concat(s.getChildren().slice())),s._id===n._id&&(o=i);a.length>0&&a[0].getDepth()<=e&&l(a)}const u=this.getStage();return n.nodeType!==hte&&u&&l(u.getChildren()),r}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(fu),this._clearSelfAndDescendantCache(ll)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var n=e.getPointerPosition();if(!n)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);var a=this.getAbsoluteTransform(e).getMatrix(),i=new Kt.Transform,o=this.offset();return i.m=a.slice(),i.translate(o.x,o.y),i.getTranslation()}setAbsolutePosition(e){const{x:n,y:r,...a}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(fu);var i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(e.x,e.y),e={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(a),this.setPosition({x:e.x,y:e.y}),this._clearCache(fu),this._clearSelfAndDescendantCache(ll),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,r=e.y,a=this.x(),i=this.y();return n!==void 0&&(a+=n),r!==void 0&&(i+=r),this.setPosition({x:a,y:i}),this}_eachAncestorReverse(e,n){var r=[],a=this.getParent(),i,o;if(!(n&&n._id===this._id)){for(r.unshift(this);a&&(!n||a._id!==n._id);)r.unshift(a),a=a.parent;for(i=r.length,o=0;o<i;o++)e(r[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Kt.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Kt.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Kt.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Kt.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Kt.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Kt.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(kb,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e=this.getAttrs(),n,r,a,i,o;const s={attrs:{},className:this.getClassName()};for(n in e)r=e[n],o=Kt.Util.isObject(r)&&!Kt.Util._isPlainObject(r)&&!Kt.Util._isArray(r),!o&&(a=typeof this[n]=="function"&&this[n],delete e[n],i=a?a.call(this):null,e[n]=r,i!==r&&(s.attrs[n]=r));return Kt.Util._prepareToStringify(s)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){var a=[];n&&this._isMatch(e)&&a.push(this);for(var i=this.parent;i;){if(i===r)return a;i._isMatch(e)&&a.push(i),i=i.parent}return a}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),r=n.length,a,i;for(a=0;a<r;a++)if(i=n[a],Kt.Util.isValidSelector(i)||(Kt.Util.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Kt.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Kt.Util.warn("Konva is awesome, right?")),i.charAt(0)==="#"){if(this.id()===i.slice(1))return!0}else if(i.charAt(0)==="."){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(gP,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(ll,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new Kt.Transform,this._eachAncestorReverse(function(a){var i=a.transformsEnabled();i==="all"?n.multiply(a.getTransform()):i==="position"&&n.translate(a.x()-a.offsetX(),a.y()-a.offsetY())},e),n;n=this._cache.get(ll)||new Kt.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const a=this.attrs.x||0,i=this.attrs.y||0,o=this.attrs.offsetX||0,s=this.attrs.offsetY||0;n.translate(a-o,i-s)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(fu,this._getTransform)}_getTransform(){var e,n,r=this._cache.get(fu)||new Kt.Transform;r.reset();var a=this.x(),i=this.y(),o=Tc.Konva.getAngle(this.rotation()),s=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,u=this.attrs.skewX||0,c=this.attrs.skewY||0,d=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return(a!==0||i!==0)&&r.translate(a,i),o!==0&&r.rotate(o),(u!==0||c!==0)&&r.skew(u,c),(s!==1||l!==1)&&r.scale(s,l),(d!==0||p!==0)&&r.translate(-1*d,-1*p),r.dirty=!1,r}clone(e){var n=Kt.Util.cloneObject(this.attrs),r,a,i,o,s;for(r in e)n[r]=e[r];var l=new this.constructor(n);for(r in this.eventListeners)for(a=this.eventListeners[r],i=a.length,o=0;o<i;o++)s=a[o],s.name.indexOf(pte)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(s));return l}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),r=this.getStage(),a=e.x!==void 0?e.x:Math.floor(n.x),i=e.y!==void 0?e.y:Math.floor(n.y),o=e.pixelRatio||1,s=new dm.SceneCanvas({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:o}),l=s.getContext();const u=new dm.SceneCanvas({width:s.width/s.pixelRatio+Math.abs(a),height:s.height/s.pixelRatio+Math.abs(i),pixelRatio:s.pixelRatio});return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(a||i)&&l.translate(-1*a,-1*i),this.drawScene(s,void 0,u),l.restore(),s}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,r=e.quality||null,a=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(a),a}toImage(e){return new Promise((n,r)=>{try{const a=e?.callback;a&&delete e.callback,Kt.Util._urlToImage(this.toDataURL(e),function(i){n(i),a?.(i)})}catch(a){r(a)}})}toBlob(e){return new Promise((n,r)=>{try{const a=e?.callback;a&&delete e.callback,this.toCanvas(e).toBlob(i=>{n(i),a?.(i)},e?.mimeType,e?.quality)}catch(a){r(a)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Tc.Konva.dragDistance}_off(e,n,r){var a=this.eventListeners[e],i,o,s;for(i=0;i<a.length;i++)if(o=a[i].name,s=a[i].handler,(o!=="konva"||n==="konva")&&(!n||o===n)&&(!r||r===s)){if(a.splice(i,1),a.length===0){delete this.eventListeners[e];break}i--}}_fireChangeEvent(e,n,r){this._fire(e+cte,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){var n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var r=(n||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){var r=this[fP+Kt.Util._capitalize(e)];return Kt.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(Tc.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){var r=this.attrs[e];r===n&&!Kt.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){var a;r!==void 0&&(a=this.attrs[e],a||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,a,r))}_fireAndBubble(e,n,r){n&&this.nodeType===mP&&(n.target=this);var a=(e===pP||e===hP)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!a){this._fire(e,n);var i=(e===pP||e===hP)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!i&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,r,a;const i=(n=this._cache.get(Sb))!==null&&n!==void 0?n:{};let o=i?.[e];if(o===void 0){o=[];let s=Object.getPrototypeOf(this);for(;s;){const l=(a=(r=s.eventListeners)===null||r===void 0?void 0:r[e])!==null&&a!==void 0?a:[];o.push(...l),s=Object.getPrototypeOf(s)}i[e]=o,this._cache.set(Sb,i)}return o}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(var a=0;a<r.length;a++)r[a].handler.call(this,n);const i=this.eventListeners[e];if(i)for(var a=0;a<i.length;a++)i[a].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,r=this.getStage(),a=this.getAbsolutePosition();if(r){var i=r._getPointerById(n)||r._changedPointerPositions[0]||a;uo.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-a.x,y:i.y-a.y},dragStatus:"ready",pointerId:n})}}startDrag(e,n=!0){uo.DD._dragElements.has(this._id)||this._createDragElement(e);const r=uo.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(r){var a={x:r.x-n.offset.x,y:r.y-n.offset.y},i=this.dragBoundFunc();if(i!==void 0){const o=i.call(this,a,e);o?a=o:Kt.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==a.x||this._lastPos.y!==a.y)&&(this.setAbsolutePosition(a),this._requestDraw()),this._lastPos=a}}stopDrag(e){const n=uo.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),uo.DD._endDragBefore(e),uo.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=uo.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,r=!n||Tc.Konva.dragButtons.indexOf(e.evt.button)>=0;if(r&&!this.isDragging()){var a=!1;uo.DD._dragElements.forEach(i=>{this.isAncestorOf(i.node)&&(a=!0)}),a||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=uo.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",a=n&&n.dragStatus==="ready";r?this.stopDrag():a&&uo.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return Kt.Util.haveIntersection(r,this.getClientRect())}static create(e,n){return Kt.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var r=xt.prototype.getClassName.call(e),a=e.children,i,o,s;n&&(e.attrs.container=n),Tc.Konva[r]||(Kt.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=Tc.Konva[r];if(i=new l(e.attrs),a)for(o=a.length,s=0;s<o;s++)i.add(xt._createNode(a[s]));return i}}Kn.Node=xt,xt.prototype.nodeType="Node",xt.prototype._attrsAffectingSize=[],xt.prototype.eventListeners={},xt.prototype.on.call(xt.prototype,fte,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(fu),this._clearSelfAndDescendantCache(ll)}),xt.prototype.on.call(xt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(d4)}),xt.prototype.on.call(xt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(c4)}),xt.prototype.on.call(xt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(kb)});const Tn=cm.Factory.addGetterSetter;Tn(xt,"zIndex"),Tn(xt,"absolutePosition"),Tn(xt,"position"),Tn(xt,"x",0,(0,Sr.getNumberValidator)()),Tn(xt,"y",0,(0,Sr.getNumberValidator)()),Tn(xt,"globalCompositeOperation","source-over",(0,Sr.getStringValidator)()),Tn(xt,"opacity",1,(0,Sr.getNumberValidator)()),Tn(xt,"name","",(0,Sr.getStringValidator)()),Tn(xt,"id","",(0,Sr.getStringValidator)()),Tn(xt,"rotation",0,(0,Sr.getNumberValidator)()),cm.Factory.addComponentsGetterSetter(xt,"scale",["x","y"]),Tn(xt,"scaleX",1,(0,Sr.getNumberValidator)()),Tn(xt,"scaleY",1,(0,Sr.getNumberValidator)()),cm.Factory.addComponentsGetterSetter(xt,"skew",["x","y"]),Tn(xt,"skewX",0,(0,Sr.getNumberValidator)()),Tn(xt,"skewY",0,(0,Sr.getNumberValidator)()),cm.Factory.addComponentsGetterSetter(xt,"offset",["x","y"]),Tn(xt,"offsetX",0,(0,Sr.getNumberValidator)()),Tn(xt,"offsetY",0,(0,Sr.getNumberValidator)()),Tn(xt,"dragDistance",null,(0,Sr.getNumberValidator)()),Tn(xt,"width",0,(0,Sr.getNumberValidator)()),Tn(xt,"height",0,(0,Sr.getNumberValidator)()),Tn(xt,"listening",!0,(0,Sr.getBooleanValidator)()),Tn(xt,"preventDefault",!0,(0,Sr.getBooleanValidator)()),Tn(xt,"filters",null,function(t){return this._filterUpToDate=!1,t}),Tn(xt,"visible",!0,(0,Sr.getBooleanValidator)()),Tn(xt,"transformsEnabled","all",(0,Sr.getStringValidator)()),Tn(xt,"size"),Tn(xt,"dragBoundFunc"),Tn(xt,"draggable",!1,(0,Sr.getBooleanValidator)()),cm.Factory.backCompat(xt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var _c={};Object.defineProperty(_c,"__esModule",{value:!0}),_c.Container=void 0;const Cp=zt,p4=Kn,Eb=tt;class Rc extends p4.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var r=[];return n.forEach(function(a){e(a)&&r.push(a)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}const r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var r=[];return this._descendants(a=>{const i=a._isMatch(e);return i&&r.push(a),!!(i&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const a of r)if(n=e(a),n||a.hasChildren()&&(n=a._descendants(e),n))return!0;return!1}toObject(){var e=p4.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=p4.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n,r){var a=this.getLayer(),i=e||a&&a.getCanvas(),o=i&&i.getContext(),s=this._getCanvasCache(),l=s&&s.scene,u=i&&i.isCache;if(!this.isVisible()&&!u)return this;if(l){o.save();var c=this.getAbsoluteTransform(n).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,n,r);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var r=this.getLayer(),a=e||r&&r.hitCanvas,i=a&&a.getContext(),o=this._getCanvasCache(),s=o&&o.hit;if(s){i.save();var l=this.getAbsoluteTransform(n).getMatrix();i.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",a,n);return this}_drawChildren(e,n,r,a){var i,o=n&&n.getContext(),s=this.clipWidth(),l=this.clipHeight(),u=this.clipFunc(),c=s&&l||u;const d=r===this;if(c){o.save();var p=this.getAbsoluteTransform(r),f=p.getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o.beginPath();let b;if(u)b=u.call(this,o,this);else{var g=this.clipX(),y=this.clipY();o.rect(g,y,s,l)}o.clip.apply(o,b),f=p.copy().invert().getMatrix(),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var v=!d&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";v&&(o.save(),o._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(b){b[e](n,r,a)}),v&&o.restore(),c&&o.restore()}getClientRect(e={}){var n,r=e.skipTransform,a=e.relativeTo,i,o,s,l,u={x:1/0,y:1/0,width:0,height:0},c=this;(n=this.children)===null||n===void 0||n.forEach(function(y){if(y.visible()){var v=y.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});v.width===0&&v.height===0||(i===void 0?(i=v.x,o=v.y,s=v.x+v.width,l=v.y+v.height):(i=Math.min(i,v.x),o=Math.min(o,v.y),s=Math.max(s,v.x+v.width),l=Math.max(l,v.y+v.height)))}});for(var d=this.find("Shape"),p=!1,f=0;f<d.length;f++){var g=d[f];if(g._isVisible(this)){p=!0;break}}return p&&i!==void 0?u={x:i,y:o,width:s-i,height:l-o}:u={x:0,y:0,width:0,height:0},r?u:this._transformedRect(u,a)}}_c.Container=Rc,Cp.Factory.addComponentsGetterSetter(Rc,"clip",["x","y","width","height"]),Cp.Factory.addGetterSetter(Rc,"clipX",void 0,(0,Eb.getNumberValidator)()),Cp.Factory.addGetterSetter(Rc,"clipY",void 0,(0,Eb.getNumberValidator)()),Cp.Factory.addGetterSetter(Rc,"clipWidth",void 0,(0,Eb.getNumberValidator)()),Cp.Factory.addGetterSetter(Rc,"clipHeight",void 0,(0,Eb.getNumberValidator)()),Cp.Factory.addGetterSetter(Rc,"clipFunc");var yP={},Di={};Object.defineProperty(Di,"__esModule",{value:!0}),Di.releaseCapture=Di.setPointerCapture=Di.hasPointerCapture=Di.createEvent=Di.getCapturedShape=void 0;const gte=Lt,pm=new Map,bP=gte.Konva._global.PointerEvent!==void 0;function yte(t){return pm.get(t)}Di.getCapturedShape=yte;function h4(t){return{evt:t,pointerId:t.pointerId}}Di.createEvent=h4;function bte(t,e){return pm.get(t)===e}Di.hasPointerCapture=bte;function vte(t,e){vP(t),e.getStage()&&(pm.set(t,e),bP&&e._fire("gotpointercapture",h4(new PointerEvent("gotpointercapture"))))}Di.setPointerCapture=vte;function vP(t,e){const n=pm.get(t);if(!n)return;const r=n.getStage();r&&r.content,pm.delete(t),bP&&n._fire("lostpointercapture",h4(new PointerEvent("lostpointercapture")))}Di.releaseCapture=vP,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=ir,n=zt,r=_c,a=Lt,i=Wo,o=wb,s=Lt,l=Di;var u="Stage",c="string",d="px",p="mouseout",f="mouseleave",g="mouseover",y="mouseenter",v="mousemove",b="mousedown",x="mouseup",w="pointermove",S="pointerdown",C="pointerup",E="pointercancel",R="lostpointercapture",T="pointerout",$="pointerleave",P="pointerover",D="pointerenter",B="contextmenu",z="touchstart",q="touchend",Y="touchmove",J="touchcancel",H="wheel",L=5,Q=[[y,"_pointerenter"],[b,"_pointerdown"],[v,"_pointermove"],[x,"_pointerup"],[f,"_pointerleave"],[z,"_pointerdown"],[Y,"_pointermove"],[q,"_pointerup"],[J,"_pointercancel"],[g,"_pointerover"],[H,"_wheel"],[B,"_contextmenu"],[S,"_pointerdown"],[w,"_pointermove"],[C,"_pointerup"],[E,"_pointercancel"],[R,"_lostpointercapture"]];const Z={mouse:{[T]:p,[$]:f,[P]:g,[D]:y,[w]:v,[S]:b,[C]:x,[E]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[T]:"touchout",[$]:"touchleave",[P]:"touchover",[D]:"touchenter",[w]:Y,[S]:z,[C]:q,[E]:J,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[T]:T,[$]:$,[P]:P,[D]:D,[w]:w,[S]:S,[C]:C,[E]:E,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},te=ke=>ke.indexOf("pointer")>=0?"pointer":ke.indexOf("touch")>=0?"touch":"mouse",oe=ke=>{const X=te(ke);if(X==="pointer")return a.Konva.pointerEventsEnabled&&Z.pointer;if(X==="touch")return Z.touch;if(X==="mouse")return Z.mouse};function he(ke={}){return(ke.clipFunc||ke.clipWidth||ke.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ke}const ae="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class de extends r.Container{constructor(X){super(he(X)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{he(this.attrs)}),this._checkVisibility()}_validateAdd(X){const se=X.getType()==="Layer",pe=X.getType()==="FastLayer";se||pe||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const X=this.visible()?"":"none";this.content.style.display=X}setContainer(X){if(typeof X===c){if(X.charAt(0)==="."){var se=X.slice(1);X=document.getElementsByClassName(se)[0]}else{var pe;X.charAt(0)!=="#"?pe=X:pe=X.slice(1),X=document.getElementById(pe)}if(!X)throw"Can not find container in document with id "+pe}return this._setAttr("container",X),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),X.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var X=this.children,se=X.length,pe;for(pe=0;pe<se;pe++)X[pe].clear();return this}clone(X){return X||(X={}),X.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,X)}destroy(){super.destroy();var X=this.content;X&&e.Util._isInDocument(X)&&this.container().removeChild(X);var se=t.stages.indexOf(this);return se>-1&&t.stages.splice(se,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const X=this._pointerPositions[0]||this._changedPointerPositions[0];return X?{x:X.x,y:X.y}:(e.Util.warn(ae),null)}_getPointerById(X){return this._pointerPositions.find(se=>se.id===X)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(X){X=X||{},X.x=X.x||0,X.y=X.y||0,X.width=X.width||this.width(),X.height=X.height||this.height();var se=new i.SceneCanvas({width:X.width,height:X.height,pixelRatio:X.pixelRatio||1}),pe=se.getContext()._context,Ne=this.children;return(X.x||X.y)&&pe.translate(-1*X.x,-1*X.y),Ne.forEach(function(Se){if(Se.isVisible()){var Te=Se._toKonvaCanvas(X);pe.drawImage(Te._canvas,X.x,X.y,Te.getWidth()/Te.getPixelRatio(),Te.getHeight()/Te.getPixelRatio())}}),se}getIntersection(X){if(!X)return null;var se=this.children,pe=se.length,Ne=pe-1,Se;for(Se=Ne;Se>=0;Se--){const Te=se[Se].getIntersection(X);if(Te)return Te}return null}_resizeDOM(){var X=this.width(),se=this.height();this.content&&(this.content.style.width=X+d,this.content.style.height=se+d),this.bufferCanvas.setSize(X,se),this.bufferHitCanvas.setSize(X,se),this.children.forEach(pe=>{pe.setSize({width:X,height:se}),pe.draw()})}add(X,...se){if(arguments.length>1){for(var pe=0;pe<arguments.length;pe++)this.add(arguments[pe]);return this}super.add(X);var Ne=this.children.length;return Ne>L&&e.Util.warn("The stage has "+Ne+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),X.setSize({width:this.width(),height:this.height()}),X.draw(),a.Konva.isBrowser&&this.content.appendChild(X.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(X){return l.hasPointerCapture(X,this)}setPointerCapture(X){l.setPointerCapture(X,this)}releaseCapture(X){l.releaseCapture(X,this)}getLayers(){return this.children}_bindContentEvents(){a.Konva.isBrowser&&Q.forEach(([X,se])=>{this.content.addEventListener(X,pe=>{this[se](pe)},{passive:!1})})}_pointerenter(X){this.setPointersPositions(X);const se=oe(X.type);se&&this._fire(se.pointerenter,{evt:X,target:this,currentTarget:this})}_pointerover(X){this.setPointersPositions(X);const se=oe(X.type);se&&this._fire(se.pointerover,{evt:X,target:this,currentTarget:this})}_getTargetShape(X){let se=this[X+"targetShape"];return se&&!se.getStage()&&(se=null),se}_pointerleave(X){const se=oe(X.type),pe=te(X.type);if(se){this.setPointersPositions(X);var Ne=this._getTargetShape(pe),Se=!o.DD.isDragging||a.Konva.hitOnDragEnabled;Ne&&Se?(Ne._fireAndBubble(se.pointerout,{evt:X}),Ne._fireAndBubble(se.pointerleave,{evt:X}),this._fire(se.pointerleave,{evt:X,target:this,currentTarget:this}),this[pe+"targetShape"]=null):Se&&(this._fire(se.pointerleave,{evt:X,target:this,currentTarget:this}),this._fire(se.pointerout,{evt:X,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(X){const se=oe(X.type),pe=te(X.type);if(se){this.setPointersPositions(X);var Ne=!1;this._changedPointerPositions.forEach(Se=>{var Te=this.getIntersection(Se);if(o.DD.justDragged=!1,a.Konva["_"+pe+"ListenClick"]=!0,!Te||!Te.isListening())return;a.Konva.capturePointerEventsEnabled&&Te.setPointerCapture(Se.id),this[pe+"ClickStartShape"]=Te,Te._fireAndBubble(se.pointerdown,{evt:X,pointerId:Se.id}),Ne=!0;const Pe=X.type.indexOf("touch")>=0;Te.preventDefault()&&X.cancelable&&Pe&&X.preventDefault()}),Ne||this._fire(se.pointerdown,{evt:X,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(X){const se=oe(X.type),pe=te(X.type);if(!se)return;o.DD.isDragging&&o.DD.node.preventDefault()&&X.cancelable&&X.preventDefault(),this.setPointersPositions(X);var Ne=!o.DD.isDragging||a.Konva.hitOnDragEnabled;if(!Ne)return;var Se={};let Te=!1;var Pe=this._getTargetShape(pe);this._changedPointerPositions.forEach(We=>{const $e=l.getCapturedShape(We.id)||this.getIntersection(We),lt=We.id,Je={evt:X,pointerId:lt};var Ze=Pe!==$e;if(Ze&&Pe&&(Pe._fireAndBubble(se.pointerout,{...Je},$e),Pe._fireAndBubble(se.pointerleave,{...Je},$e)),$e){if(Se[$e._id])return;Se[$e._id]=!0}$e&&$e.isListening()?(Te=!0,Ze&&($e._fireAndBubble(se.pointerover,{...Je},Pe),$e._fireAndBubble(se.pointerenter,{...Je},Pe),this[pe+"targetShape"]=$e),$e._fireAndBubble(se.pointermove,{...Je})):Pe&&(this._fire(se.pointerover,{evt:X,target:this,currentTarget:this,pointerId:lt}),this[pe+"targetShape"]=null)}),Te||this._fire(se.pointermove,{evt:X,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(X){const se=oe(X.type),pe=te(X.type);if(!se)return;this.setPointersPositions(X);const Ne=this[pe+"ClickStartShape"],Se=this[pe+"ClickEndShape"];var Te={};let Pe=!1;this._changedPointerPositions.forEach(We=>{const $e=l.getCapturedShape(We.id)||this.getIntersection(We);if($e){if($e.releaseCapture(We.id),Te[$e._id])return;Te[$e._id]=!0}const lt=We.id,Je={evt:X,pointerId:lt};let Ze=!1;a.Konva["_"+pe+"InDblClickWindow"]?(Ze=!0,clearTimeout(this[pe+"DblTimeout"])):o.DD.justDragged||(a.Konva["_"+pe+"InDblClickWindow"]=!0,clearTimeout(this[pe+"DblTimeout"])),this[pe+"DblTimeout"]=setTimeout(function(){a.Konva["_"+pe+"InDblClickWindow"]=!1},a.Konva.dblClickWindow),$e&&$e.isListening()?(Pe=!0,this[pe+"ClickEndShape"]=$e,$e._fireAndBubble(se.pointerup,{...Je}),a.Konva["_"+pe+"ListenClick"]&&Ne&&Ne===$e&&($e._fireAndBubble(se.pointerclick,{...Je}),Ze&&Se&&Se===$e&&$e._fireAndBubble(se.pointerdblclick,{...Je}))):(this[pe+"ClickEndShape"]=null,a.Konva["_"+pe+"ListenClick"]&&this._fire(se.pointerclick,{evt:X,target:this,currentTarget:this,pointerId:lt}),Ze&&this._fire(se.pointerdblclick,{evt:X,target:this,currentTarget:this,pointerId:lt}))}),Pe||this._fire(se.pointerup,{evt:X,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a.Konva["_"+pe+"ListenClick"]=!1,X.cancelable&&pe!=="touch"&&X.preventDefault()}_contextmenu(X){this.setPointersPositions(X);var se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(B,{evt:X}):this._fire(B,{evt:X,target:this,currentTarget:this})}_wheel(X){this.setPointersPositions(X);var se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(H,{evt:X}):this._fire(H,{evt:X,target:this,currentTarget:this})}_pointercancel(X){this.setPointersPositions(X);const se=l.getCapturedShape(X.pointerId)||this.getIntersection(this.getPointerPosition());se&&se._fireAndBubble(C,l.createEvent(X)),l.releaseCapture(X.pointerId)}_lostpointercapture(X){l.releaseCapture(X.pointerId)}setPointersPositions(X){var se=this._getContentPosition(),pe=null,Ne=null;X=X||window.event,X.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(X.touches,Se=>{this._pointerPositions.push({id:Se.identifier,x:(Se.clientX-se.left)/se.scaleX,y:(Se.clientY-se.top)/se.scaleY})}),Array.prototype.forEach.call(X.changedTouches||X.touches,Se=>{this._changedPointerPositions.push({id:Se.identifier,x:(Se.clientX-se.left)/se.scaleX,y:(Se.clientY-se.top)/se.scaleY})})):(pe=(X.clientX-se.left)/se.scaleX,Ne=(X.clientY-se.top)/se.scaleY,this.pointerPos={x:pe,y:Ne},this._pointerPositions=[{x:pe,y:Ne,id:e.Util._getFirstPointerId(X)}],this._changedPointerPositions=[{x:pe,y:Ne,id:e.Util._getFirstPointerId(X)}])}_setPointerPosition(X){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(X)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var X=this.content.getBoundingClientRect();return{top:X.top,left:X.left,scaleX:X.width/this.content.clientWidth||1,scaleY:X.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new i.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new i.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!a.Konva.isBrowser){var X=this.container();if(!X)throw"Stage has no container. A container is required.";X.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),X.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(X){X.batchDraw()}),this}}t.Stage=de,de.prototype.nodeType=u,(0,s._registerNode)(de),n.Factory.addGetterSetter(de,"container")}(yP);var hm={},jr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=Lt,n=ir,r=zt,a=Kn,i=tt,o=Lt,s=Di;var l="hasShadow",u="shadowRGBA",c="patternImage",d="linearGradient",p="radialGradient";let f;function g(){return f||(f=n.Util.createCanvasElement().getContext("2d"),f)}t.shapes={};function y($){const P=this.attrs.fillRule;P?$.fill(P):$.fill()}function v($){$.stroke()}function b($){$.fill()}function x($){$.stroke()}function w(){this._clearCache(l)}function S(){this._clearCache(u)}function C(){this._clearCache(c)}function E(){this._clearCache(d)}function R(){this._clearCache(p)}class T extends a.Node{constructor(P){super(P);let D;for(;D=n.Util.getRandomColor(),!(D&&!(D in t.shapes)););this.colorKey=D,t.shapes[D]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var P=g();const D=P.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(D&&D.setTransform){const B=new n.Transform;B.translate(this.fillPatternX(),this.fillPatternY()),B.rotate(e.Konva.getAngle(this.fillPatternRotation())),B.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),B.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const z=B.getMatrix(),q=typeof DOMMatrix>"u"?{a:z[0],b:z[1],c:z[2],d:z[3],e:z[4],f:z[5]}:new DOMMatrix(z);D.setTransform(q)}return D}}_getLinearGradient(){return this._getCache(d,this.__getLinearGradient)}__getLinearGradient(){var P=this.fillLinearGradientColorStops();if(P){for(var D=g(),B=this.fillLinearGradientStartPoint(),z=this.fillLinearGradientEndPoint(),q=D.createLinearGradient(B.x,B.y,z.x,z.y),Y=0;Y<P.length;Y+=2)q.addColorStop(P[Y],P[Y+1]);return q}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){var P=this.fillRadialGradientColorStops();if(P){for(var D=g(),B=this.fillRadialGradientStartPoint(),z=this.fillRadialGradientEndPoint(),q=D.createRadialGradient(B.x,B.y,this.fillRadialGradientStartRadius(),z.x,z.y,this.fillRadialGradientEndRadius()),Y=0;Y<P.length;Y+=2)q.addColorStop(P[Y],P[Y+1]);return q}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var P=n.Util.colorToRGBA(this.shadowColor());if(P)return"rgba("+P.r+","+P.g+","+P.b+","+P.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const P=this.hitStrokeWidth();return P==="auto"?this.hasStroke():this.strokeEnabled()&&!!P}intersects(P){var D=this.getStage();if(!D)return!1;const B=D.bufferHitCanvas;return B.getContext().clear(),this.drawHit(B,void 0,!0),B.context.getImageData(Math.round(P.x),Math.round(P.y),1,1).data[3]>0}destroy(){return a.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(P){var D;if(!(!((D=this.attrs.perfectDrawEnabled)!==null&&D!==void 0)||D))return!1;const B=P||this.hasFill(),z=this.hasStroke(),q=this.getAbsoluteOpacity()!==1;if(B&&z&&q)return!0;const Y=this.hasShadow(),J=this.shadowForStrokeEnabled();return!!(B&&z&&Y&&J)}setStrokeHitEnabled(P){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),P?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var P=this.size();return{x:this._centroid?-P.width/2:0,y:this._centroid?-P.height/2:0,width:P.width,height:P.height}}getClientRect(P={}){const D=P.skipTransform,B=P.relativeTo,z=this.getSelfRect(),q=!P.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,Y=z.width+q,J=z.height+q,H=!P.skipShadow&&this.hasShadow(),L=H?this.shadowOffsetX():0,Q=H?this.shadowOffsetY():0,Z=Y+Math.abs(L),te=J+Math.abs(Q),oe=H&&this.shadowBlur()||0,he=Z+oe*2,ae=te+oe*2,de={width:he,height:ae,x:-(q/2+oe)+Math.min(L,0)+z.x,y:-(q/2+oe)+Math.min(Q,0)+z.y};return D?de:this._transformedRect(de,B)}drawScene(P,D,B){var z=this.getLayer(),q=P||z.getCanvas(),Y=q.getContext(),J=this._getCanvasCache(),H=this.getSceneFunc(),L=this.hasShadow(),Q,Z,te=q.isCache,oe=D===this;if(!this.isVisible()&&!oe)return this;if(J){Y.save();var he=this.getAbsoluteTransform(D).getMatrix();return Y.transform(he[0],he[1],he[2],he[3],he[4],he[5]),this._drawCachedSceneCanvas(Y),Y.restore(),this}if(!H)return this;if(Y.save(),this._useBufferCanvas()&&!te){Q=this.getStage();const ke=B||Q.bufferCanvas;Z=ke.getContext(),Z.clear(),Z.save(),Z._applyLineJoin(this);var ae=this.getAbsoluteTransform(D).getMatrix();Z.transform(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]),H.call(this,Z,this),Z.restore();var de=ke.pixelRatio;L&&Y._applyShadow(this),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this),Y.drawImage(ke._canvas,0,0,ke.width/de,ke.height/de)}else{if(Y._applyLineJoin(this),!oe){var ae=this.getAbsoluteTransform(D).getMatrix();Y.transform(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this)}L&&Y._applyShadow(this),H.call(this,Y,this)}return Y.restore(),this}drawHit(P,D,B=!1){if(!this.shouldDrawHit(D,B))return this;var z=this.getLayer(),q=P||z.hitCanvas,Y=q&&q.getContext(),J=this.hitFunc()||this.sceneFunc(),H=this._getCanvasCache(),L=H&&H.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),L){Y.save();var Q=this.getAbsoluteTransform(D).getMatrix();return Y.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),this._drawCachedHitCanvas(Y),Y.restore(),this}if(!J)return this;if(Y.save(),Y._applyLineJoin(this),this!==D){var Z=this.getAbsoluteTransform(D).getMatrix();Y.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5])}return J.call(this,Y,this),Y.restore(),this}drawHitFromCache(P=0){var D=this._getCanvasCache(),B=this._getCachedSceneCanvas(),z=D.hit,q=z.getContext(),Y=z.getWidth(),J=z.getHeight(),H,L,Q,Z,te,oe;q.clear(),q.drawImage(B._canvas,0,0,Y,J);try{for(H=q.getImageData(0,0,Y,J),L=H.data,Q=L.length,Z=n.Util._hexToRgb(this.colorKey),te=0;te<Q;te+=4)oe=L[te+3],oe>P?(L[te]=Z.r,L[te+1]=Z.g,L[te+2]=Z.b,L[te+3]=255):L[te+3]=0;q.putImageData(H,0,0)}catch(he){n.Util.error("Unable to draw hit graph from cached scene canvas. "+he.message)}return this}hasPointerCapture(P){return s.hasPointerCapture(P,this)}setPointerCapture(P){s.setPointerCapture(P,this)}releaseCapture(P){s.releaseCapture(P,this)}}t.Shape=T,T.prototype._fillFunc=y,T.prototype._strokeFunc=v,T.prototype._fillFuncHit=b,T.prototype._strokeFuncHit=x,T.prototype._centroid=!1,T.prototype.nodeType="Shape",(0,o._registerNode)(T),T.prototype.eventListeners={},T.prototype.on.call(T.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),T.prototype.on.call(T.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",S),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",E),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",R),r.Factory.addGetterSetter(T,"stroke",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(T,"strokeWidth",2,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(T,"hitStrokeWidth","auto",(0,i.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(T,"strokeHitEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(T,"perfectDrawEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(T,"shadowForStrokeEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(T,"lineJoin"),r.Factory.addGetterSetter(T,"lineCap"),r.Factory.addGetterSetter(T,"sceneFunc"),r.Factory.addGetterSetter(T,"hitFunc"),r.Factory.addGetterSetter(T,"dash"),r.Factory.addGetterSetter(T,"dashOffset",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowColor",void 0,(0,i.getStringValidator)()),r.Factory.addGetterSetter(T,"shadowBlur",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowOpacity",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(T,"shadowOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternImage"),r.Factory.addGetterSetter(T,"fill",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(T,"fillPatternX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(T,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(T,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(T,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(T,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(T,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(T,"fillEnabled",!0),r.Factory.addGetterSetter(T,"strokeEnabled",!0),r.Factory.addGetterSetter(T,"shadowEnabled",!0),r.Factory.addGetterSetter(T,"dashEnabled",!0),r.Factory.addGetterSetter(T,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(T,"fillPriority","color"),r.Factory.addComponentsGetterSetter(T,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(T,"fillPatternOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(T,"fillPatternScaleX",1,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternScaleY",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(T,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(T,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(T,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(T,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(T,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(T,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(T,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(T,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(T,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(T,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(T,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(T,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(T,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(T,"fillPatternRotation",0),r.Factory.addGetterSetter(T,"fillRule",void 0,(0,i.getStringValidator)()),r.Factory.backCompat(T,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(jr),Object.defineProperty(hm,"__esModule",{value:!0}),hm.Layer=void 0;const ul=ir,f4=_c,Ep=Kn,m4=zt,xP=Wo,xte=tt,wte=jr,kte=Lt;var Ste="#",Cte="beforeDraw",Ete="draw",wP=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Nte=wP.length;let Np=class extends f4.Container{constructor(t){super(t),this.canvas=new xP.SceneCanvas,this.hitCanvas=new xP.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Ep.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=Ep.Node.prototype.moveUp.call(this);if(!t)return!1;var e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Ep.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Ep.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return Ep.Node.prototype.remove.call(this),t&&t.parentNode&&ul.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){var e=t.getType();e!=="Group"&&e!=="Shape"&&ul.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Ep.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){ul.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){ul.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,ul.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,n=!1;;){for(let r=0;r<Nte;r++){const a=wP[r],i=this._getIntersection({x:t.x+a.x*e,y:t.y+a.y*e}),o=i.shape;if(o)return o;if(n=!!i.antialiased,!i.antialiased)break}if(n)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=n[3];if(r===255){const a=ul.Util._rgbToHex(n[0],n[1],n[2]),i=wte.shapes[Ste+a];return i?{shape:i}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas();return this._fire(Cte,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),f4.Container.prototype.drawScene.call(this,r,e),this._fire(Ete,{node:this}),this}drawHit(t,e){var n=this.getLayer(),r=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),f4.Container.prototype.drawHit.call(this,r,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){ul.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return ul.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,e=!!this.hitCanvas._canvas.parentNode;e?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return ul.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};hm.Layer=Np,Np.prototype.nodeType="Layer",(0,kte._registerNode)(Np),m4.Factory.addGetterSetter(Np,"imageSmoothingEnabled",!0),m4.Factory.addGetterSetter(Np,"clearBeforeDraw",!0),m4.Factory.addGetterSetter(Np,"hitGraphEnabled",!0,(0,xte.getBooleanValidator)());var Nb={};Object.defineProperty(Nb,"__esModule",{value:!0}),Nb.FastLayer=void 0;const Tte=ir,Ite=hm,_te=Lt;class g4 extends Ite.Layer{constructor(e){super(e),this.listening(!1),Tte.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Nb.FastLayer=g4,g4.prototype.nodeType="FastLayer",(0,_te._registerNode)(g4);var Tp={};Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.Group=void 0;const Rte=ir,$te=_c,Ote=Lt;class y4 extends $te.Container{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&Rte.Util.throw("You may only add groups and shapes to groups.")}}Tp.Group=y4,y4.prototype.nodeType="Group",(0,Ote._registerNode)(y4);var Ip={};Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.Animation=void 0;const b4=Lt,kP=ir,v4=function(){return b4.glob.performance&&b4.glob.performance.now?function(){return b4.glob.performance.now()}:function(){return new Date().getTime()}}();class Fs{constructor(e,n){this.id=Fs.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:v4(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,r=n.length;for(let a=0;a<r;a++)if(n[a]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const e=Fs.animations,n=e.length;for(let r=0;r<n;r++)if(e[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=v4(),Fs._addAnimation(this),this}stop(){return Fs._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,r=this.animations,a=r.length;for(let i=0;i<a;i++)if(r[i].id===n){this.animations.splice(i,1);break}}static _runFrames(){const e={},n=this.animations;for(let r=0;r<n.length;r++){const a=n[r],i=a.layers,o=a.func;a._updateFrameObject(v4());const s=i.length;let l;if(o?l=o.call(a,a.frame)!==!1:l=!0,!!l)for(let u=0;u<s;u++){const c=i[u];c._id!==void 0&&(e[c._id]=c)}}for(let r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){const e=Fs;e.animations.length?(e._runFrames(),kP.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,kP.Util.requestAnimFrame(this._animationLoop))}}Ip.Animation=Fs,Fs.animations=[],Fs.animIdCounter=0,Fs.animRunning=!1;var SP={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=ir,n=Ip,r=Kn,a=Lt;var i={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,s=2,l=3,u=0,c=["fill","stroke","shadowColor"];class d{constructor(g,y,v,b,x,w,S){this.prop=g,this.propFunc=y,this.begin=b,this._pos=b,this.duration=w,this._change=0,this.prevPos=0,this.yoyo=S,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=x-this.begin,this.pause()}fire(g){var y=this[g];y&&y()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=s,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var g=this.getTimer()-this._startTime;this.state===s?this.setTime(g):this.state===l&&this.setTime(this.duration-g)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class p{constructor(g){var y=this,v=g.node,b=v._id,x,w=g.easing||t.Easings.Linear,S=!!g.yoyo,C;typeof g.duration>"u"?x=.3:g.duration===0?x=.001:x=g.duration,this.node=v,this._id=u++;var E=v.getLayer()||(v instanceof a.Konva.Stage?v.getLayers():null);E||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){y.tween.onEnterFrame()},E),this.tween=new d(C,function(R){y._tweenFunc(R)},w,0,1,x*1e3,S),this._addListeners(),p.attrs[b]||(p.attrs[b]={}),p.attrs[b][this._id]||(p.attrs[b][this._id]={}),p.tweens[b]||(p.tweens[b]={});for(C in g)i[C]===void 0&&this._addAttr(C,g[C]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,y){var v=this.node,b=v._id,x,w,S,C,E,R,T,$;if(S=p.tweens[b][g],S&&delete p.attrs[b][S][g],x=v.getAttr(g),e.Util._isArray(y))if(w=[],E=Math.max(y.length,x.length),g==="points"&&y.length!==x.length&&(y.length>x.length?(T=x,x=e.Util._prepareArrayForTween(x,y,v.closed())):(R=y,y=e.Util._prepareArrayForTween(y,x,v.closed()))),g.indexOf("fill")===0)for(C=0;C<E;C++)if(C%2===0)w.push(y[C]-x[C]);else{var P=e.Util.colorToRGBA(x[C]);$=e.Util.colorToRGBA(y[C]),x[C]=P,w.push({r:$.r-P.r,g:$.g-P.g,b:$.b-P.b,a:$.a-P.a})}else for(C=0;C<E;C++)w.push(y[C]-x[C]);else c.indexOf(g)!==-1?(x=e.Util.colorToRGBA(x),$=e.Util.colorToRGBA(y),w={r:$.r-x.r,g:$.g-x.g,b:$.b-x.b,a:$.a-x.a}):w=y-x;p.attrs[b][this._id][g]={start:x,diff:w,end:y,trueEnd:R,trueStart:T},p.tweens[b][g]=this._id}_tweenFunc(g){var y=this.node,v=p.attrs[y._id][this._id],b,x,w,S,C,E,R,T;for(b in v){if(x=v[b],w=x.start,S=x.diff,T=x.end,e.Util._isArray(w))if(C=[],R=Math.max(w.length,T.length),b.indexOf("fill")===0)for(E=0;E<R;E++)E%2===0?C.push((w[E]||0)+S[E]*g):C.push("rgba("+Math.round(w[E].r+S[E].r*g)+","+Math.round(w[E].g+S[E].g*g)+","+Math.round(w[E].b+S[E].b*g)+","+(w[E].a+S[E].a*g)+")");else for(E=0;E<R;E++)C.push((w[E]||0)+S[E]*g);else c.indexOf(b)!==-1?C="rgba("+Math.round(w.r+S.r*g)+","+Math.round(w.g+S.g*g)+","+Math.round(w.b+S.b*g)+","+(w.a+S.a*g)+")":C=w+S*g;y.setAttr(b,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueEnd&&g.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueStart&&g.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var g=this.node._id,y=this._id,v=p.tweens[g],b;this.pause();for(b in v)delete p.tweens[g][b];delete p.attrs[g][y]}}t.Tween=p,p.attrs={},p.tweens={},r.Node.prototype.to=function(f){var g=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),g&&g()};var y=new p(f);y.play()},t.Easings={BackEaseIn(f,g,y,v){var b=1.70158;return y*(f/=v)*f*((b+1)*f-b)+g},BackEaseOut(f,g,y,v){var b=1.70158;return y*((f=f/v-1)*f*((b+1)*f+b)+1)+g},BackEaseInOut(f,g,y,v){var b=1.70158;return(f/=v/2)<1?y/2*(f*f*(((b*=1.525)+1)*f-b))+g:y/2*((f-=2)*f*(((b*=1.525)+1)*f+b)+2)+g},ElasticEaseIn(f,g,y,v,b,x){var w=0;return f===0?g:(f/=v)===1?g+y:(x||(x=v*.3),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),-(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x))+g)},ElasticEaseOut(f,g,y,v,b,x){var w=0;return f===0?g:(f/=v)===1?g+y:(x||(x=v*.3),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),b*Math.pow(2,-10*f)*Math.sin((f*v-w)*(2*Math.PI)/x)+y+g)},ElasticEaseInOut(f,g,y,v,b,x){var w=0;return f===0?g:(f/=v/2)===2?g+y:(x||(x=v*(.3*1.5)),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),f<1?-.5*(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x))+g:b*Math.pow(2,-10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x)*.5+y+g)},BounceEaseOut(f,g,y,v){return(f/=v)<1/2.75?y*(7.5625*f*f)+g:f<2/2.75?y*(7.5625*(f-=1.5/2.75)*f+.75)+g:f<2.5/2.75?y*(7.5625*(f-=2.25/2.75)*f+.9375)+g:y*(7.5625*(f-=2.625/2.75)*f+.984375)+g},BounceEaseIn(f,g,y,v){return y-t.Easings.BounceEaseOut(v-f,0,y,v)+g},BounceEaseInOut(f,g,y,v){return f<v/2?t.Easings.BounceEaseIn(f*2,0,y,v)*.5+g:t.Easings.BounceEaseOut(f*2-v,0,y,v)*.5+y*.5+g},EaseIn(f,g,y,v){return y*(f/=v)*f+g},EaseOut(f,g,y,v){return-y*(f/=v)*(f-2)+g},EaseInOut(f,g,y,v){return(f/=v/2)<1?y/2*f*f+g:-y/2*(--f*(f-2)-1)+g},StrongEaseIn(f,g,y,v){return y*(f/=v)*f*f*f*f+g},StrongEaseOut(f,g,y,v){return y*((f=f/v-1)*f*f*f*f+1)+g},StrongEaseInOut(f,g,y,v){return(f/=v/2)<1?y/2*f*f*f*f*f+g:y/2*((f-=2)*f*f*f*f+2)+g},Linear(f,g,y,v){return y*f/v+g}}})(SP),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=Lt,n=ir,r=Kn,a=_c,i=yP,o=hm,s=Nb,l=Tp,u=wb,c=jr,d=Ip,p=SP,f=sl,g=Wo;t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:a.Container,Stage:i.Stage,stages:i.stages,Layer:o.Layer,FastLayer:s.FastLayer,Group:l.Group,DD:u.DD,Shape:c.Shape,shapes:c.shapes,Animation:d.Animation,Tween:p.Tween,Easings:p.Easings,Context:f.Context,Canvas:g.Canvas}),t.default=t.Konva}(gb);var Tb={};Object.defineProperty(Tb,"__esModule",{value:!0}),Tb.Arc=void 0;const Ib=zt,Mte=jr,CP=Lt,_b=tt,Pte=Lt;class cl extends Mte.Shape{_sceneFunc(e){var n=CP.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),a=CP.Konva.getAngle(r?360-this.angle():this.angle()),i=Math.cos(Math.min(a,Math.PI)),o=1,s=Math.sin(Math.min(Math.max(Math.PI,a),3*Math.PI/2)),l=Math.sin(Math.min(a,Math.PI/2)),u=i*(i>0?e:n),c=o*n,d=s*(s>0?e:n),p=l*(l>0?n:e);return{x:u,y:r?-1*p:d,width:c-u,height:p-d}}}Tb.Arc=cl,cl.prototype._centroid=!0,cl.prototype.className="Arc",cl.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Pte._registerNode)(cl),Ib.Factory.addGetterSetter(cl,"innerRadius",0,(0,_b.getNumberValidator)()),Ib.Factory.addGetterSetter(cl,"outerRadius",0,(0,_b.getNumberValidator)()),Ib.Factory.addGetterSetter(cl,"angle",0,(0,_b.getNumberValidator)()),Ib.Factory.addGetterSetter(cl,"clockwise",!1,(0,_b.getBooleanValidator)());var Rb={},fm={};Object.defineProperty(fm,"__esModule",{value:!0}),fm.Line=void 0;const $b=zt,Fte=jr,EP=tt,Ate=Lt;function x4(t,e,n,r,a,i,o){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(a-n,2)+Math.pow(i-r,2)),u=o*s/(s+l),c=o*l/(s+l),d=n-u*(a-t),p=r-u*(i-e),f=n+c*(a-t),g=r+c*(i-e);return[d,p,f,g]}function NP(t,e){var n=t.length,r=[],a,i;for(a=2;a<n-2;a+=2)i=x4(t[a-2],t[a-1],t[a],t[a+1],t[a+2],t[a+3],e),!isNaN(i[0])&&(r.push(i[0]),r.push(i[1]),r.push(t[a]),r.push(t[a+1]),r.push(i[2]),r.push(i[3]));return r}class mu extends Fte.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),r=n.length,a=this.tension(),i=this.closed(),o=this.bezier(),s,l,u;if(r){if(e.beginPath(),e.moveTo(n[0],n[1]),a!==0&&r>4){for(s=this.getTensionPoints(),l=s.length,u=i?0:4,i||e.quadraticCurveTo(s[0],s[1],s[2],s[3]);u<l-2;)e.bezierCurveTo(s[u++],s[u++],s[u++],s[u++],s[u++],s[u++]);i||e.quadraticCurveTo(s[l-2],s[l-1],n[r-2],n[r-1])}else if(o)for(u=2;u<r;)e.bezierCurveTo(n[u++],n[u++],n[u++],n[u++],n[u++],n[u++]);else for(u=2;u<r;u+=2)e.lineTo(n[u],n[u+1]);i?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():NP(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,r=this.tension(),a=x4(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),i=x4(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),o=NP(e,r),s=[a[2],a[3]].concat(o).concat([i[0],i[1],e[n-2],e[n-1],i[2],i[3],a[0],a[1],e[0],e[1]]);return s}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],r=e[0],a=e[1],i=e[1],o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),a=Math.min(a,s),i=Math.max(i,s);return{x:n,y:a,width:r-n,height:i-a}}}fm.Line=mu,mu.prototype.className="Line",mu.prototype._attrsAffectingSize=["points","bezier","tension"],(0,Ate._registerNode)(mu),$b.Factory.addGetterSetter(mu,"closed",!1),$b.Factory.addGetterSetter(mu,"bezier",!1),$b.Factory.addGetterSetter(mu,"tension",0,(0,EP.getNumberValidator)()),$b.Factory.addGetterSetter(mu,"points",[],(0,EP.getNumberArrayValidator)());var _p={},TP={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,s,l)=>{let u,c,d;u=l/2,c=0;for(let p=0;p<20;p++)d=u*t.tValues[20][p]+u,c+=t.cValues[20][p]*r(o,s,d);return u*c};t.getCubicArcLength=e;const n=(o,s,l)=>{l===void 0&&(l=1);const u=o[0]-2*o[1]+o[2],c=s[0]-2*s[1]+s[2],d=2*o[1]-2*o[0],p=2*s[1]-2*s[0],f=4*(u*u+c*c),g=4*(u*d+c*p),y=d*d+p*p;if(f===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(s[2]-s[0],2));const v=g/(2*f),b=y/f,x=l+v,w=b-v*v,S=x*x+w>0?Math.sqrt(x*x+w):0,C=v*v+w>0?Math.sqrt(v*v+w):0,E=v+Math.sqrt(v*v+w)!==0?w*Math.log(Math.abs((x+S)/(v+C))):0;return Math.sqrt(f)/2*(x*S-v*C+E)};t.getQuadraticArcLength=n;function r(o,s,l){const u=a(1,l,o),c=a(1,l,s),d=u*u+c*c;return Math.sqrt(d)}const a=(o,s,l)=>{const u=l.length-1;let c,d;if(u===0)return 0;if(o===0){d=0;for(let p=0;p<=u;p++)d+=t.binomialCoefficients[u][p]*Math.pow(1-s,u-p)*Math.pow(s,p)*l[p];return d}else{c=new Array(u);for(let p=0;p<u;p++)c[p]=u*(l[p+1]-l[p]);return a(o-1,s,c)}},i=(o,s,l)=>{let u=1,c=o/s,d=(o-l(c))/s,p=0;for(;u>.001;){const f=l(c+d),g=Math.abs(o-f)/s;if(g<u)u=g,c+=d;else{const y=l(c-d),v=Math.abs(o-y)/s;v<u?(u=v,c-=d):d/=2}if(p++,p>500)break}return c};t.t2length=i})(TP),Object.defineProperty(_p,"__esModule",{value:!0}),_p.Path=void 0;const Dte=zt,Lte=jr,zte=Lt,Rp=TP;class qr extends Lte.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=qr.parsePathData(this.data()),this.pathLength=qr.getPathLength(this.dataArray)}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var r=!1,a=0;a<n.length;a++){var i=n[a].command,o=n[a].points;switch(i){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var s=o[0],l=o[1],u=o[2],c=o[3],d=o[4],p=o[5],f=o[6],g=o[7],y=u>c?u:c,v=u>c?1:u/c,b=u>c?c/u:1;e.translate(s,l),e.rotate(f),e.scale(v,b),e.arc(0,0,y,d,d+p,1-g),e.scale(1/v,1/b),e.rotate(-f),e.translate(-s,-l);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(u){if(u.command==="A"){var c=u.points[4],d=u.points[5],p=u.points[4]+d,f=Math.PI/180;if(Math.abs(c-p)<f&&(f=Math.abs(c-p)),d<0)for(let g=c-f;g>p;g-=f){const y=qr.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],g,0);e.push(y.x,y.y)}else for(let g=c+f;g<p;g+=f){const y=qr.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],g,0);e.push(y.x,y.y)}}else if(u.command==="C")for(let g=0;g<=1;g+=.01){const y=qr.getPointOnCubicBezier(g,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);e.push(y.x,y.y)}else e=e.concat(u.points)});for(var n=e[0],r=e[0],a=e[1],i=e[1],o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],isNaN(o)||(n=Math.min(n,o),r=Math.max(r,o)),isNaN(s)||(a=Math.min(a,s),i=Math.max(i,s));return{x:n,y:a,width:r-n,height:i-a}}getLength(){return this.pathLength}getPointAtLength(e){return qr.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,r,a){return Math.sqrt((r-e)*(r-e)+(a-n)*(a-n))}static getPathLength(e){let n=0;for(var r=0;r<e.length;++r)n+=e[r].pathLength;return n}static getPointAtLengthOfDataArray(e,n){var r,a=0,i=n.length;if(!i)return null;for(;a<i&&e>n[a].pathLength;)e-=n[a].pathLength,++a;if(a===i)return r=n[a-1].points.slice(-2),{x:r[0],y:r[1]};if(e<.01)return r=n[a].points.slice(0,2),{x:r[0],y:r[1]};var o=n[a],s=o.points;switch(o.command){case"L":return qr.getPointOnLine(e,o.start.x,o.start.y,s[0],s[1]);case"C":return qr.getPointOnCubicBezier((0,Rp.t2length)(e,qr.getPathLength(n),y=>(0,Rp.getCubicArcLength)([o.start.x,s[0],s[2],s[4]],[o.start.y,s[1],s[3],s[5]],y)),o.start.x,o.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return qr.getPointOnQuadraticBezier((0,Rp.t2length)(e,qr.getPathLength(n),y=>(0,Rp.getQuadraticArcLength)([o.start.x,s[0],s[2]],[o.start.y,s[1],s[3]],y)),o.start.x,o.start.y,s[0],s[1],s[2],s[3]);case"A":var l=s[0],u=s[1],c=s[2],d=s[3],p=s[4],f=s[5],g=s[6];return p+=f*e/o.pathLength,qr.getPointOnEllipticalArc(l,u,c,d,p,g)}return null}static getPointOnLine(e,n,r,a,i,o,s){o===void 0&&(o=n),s===void 0&&(s=r);var l=(i-r)/(a-n+1e-8),u=Math.sqrt(e*e/(1+l*l));a<n&&(u*=-1);var c=l*u,d;if(a===n)d={x:o,y:s+c};else if((s-r)/(o-n+1e-8)===l)d={x:o+u,y:s+c};else{var p,f,g=this.getLineLength(n,r,a,i),y=(o-n)*(a-n)+(s-r)*(i-r);y=y/(g*g),p=n+y*(a-n),f=r+y*(i-r);var v=this.getLineLength(o,s,p,f),b=Math.sqrt(e*e-v*v);u=Math.sqrt(b*b/(1+l*l)),a<n&&(u*=-1),c=l*u,d={x:p+u,y:f+c}}return d}static getPointOnCubicBezier(e,n,r,a,i,o,s,l,u){function c(v){return v*v*v}function d(v){return 3*v*v*(1-v)}function p(v){return 3*v*(1-v)*(1-v)}function f(v){return(1-v)*(1-v)*(1-v)}var g=l*c(e)+o*d(e)+a*p(e)+n*f(e),y=u*c(e)+s*d(e)+i*p(e)+r*f(e);return{x:g,y}}static getPointOnQuadraticBezier(e,n,r,a,i,o,s){function l(f){return f*f}function u(f){return 2*f*(1-f)}function c(f){return(1-f)*(1-f)}var d=o*l(e)+a*u(e)+n*c(e),p=s*l(e)+i*u(e)+r*c(e);return{x:d,y:p}}static getPointOnEllipticalArc(e,n,r,a,i,o){var s=Math.cos(o),l=Math.sin(o),u={x:r*Math.cos(i),y:a*Math.sin(i)};return{x:e+(u.x*s-u.y*l),y:n+(u.x*l+u.y*s)}}static parsePathData(e){if(!e)return[];var n=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var a=0;a<r.length;a++)n=n.replace(new RegExp(r[a],"g"),"|"+r[a]);var i=n.split("|"),o=[],s=[],l=0,u=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,d;for(a=1;a<i.length;a++){var p=i[a],f=p.charAt(0);for(p=p.slice(1),s.length=0;d=c.exec(p);)s.push(d[0]);for(var g=[],y=0,v=s.length;y<v;y++){if(s[y]==="00"){g.push(0,0);continue}var b=parseFloat(s[y]);isNaN(b)?g.push(0):g.push(b)}for(;g.length>0&&!isNaN(g[0]);){var x="",w=[],S=l,C=u,E,R,T,$,P,D,B,z,q,Y;switch(f){case"l":l+=g.shift(),u+=g.shift(),x="L",w.push(l,u);break;case"L":l=g.shift(),u=g.shift(),w.push(l,u);break;case"m":var J=g.shift(),H=g.shift();if(l+=J,u+=H,x="M",o.length>2&&o[o.length-1].command==="z"){for(var L=o.length-2;L>=0;L--)if(o[L].command==="M"){l=o[L].points[0]+J,u=o[L].points[1]+H;break}}w.push(l,u),f="l";break;case"M":l=g.shift(),u=g.shift(),x="M",w.push(l,u),f="L";break;case"h":l+=g.shift(),x="L",w.push(l,u);break;case"H":l=g.shift(),x="L",w.push(l,u);break;case"v":u+=g.shift(),x="L",w.push(l,u);break;case"V":u=g.shift(),x="L",w.push(l,u);break;case"C":w.push(g.shift(),g.shift(),g.shift(),g.shift()),l=g.shift(),u=g.shift(),w.push(l,u);break;case"c":w.push(l+g.shift(),u+g.shift(),l+g.shift(),u+g.shift()),l+=g.shift(),u+=g.shift(),x="C",w.push(l,u);break;case"S":R=l,T=u,E=o[o.length-1],E.command==="C"&&(R=l+(l-E.points[2]),T=u+(u-E.points[3])),w.push(R,T,g.shift(),g.shift()),l=g.shift(),u=g.shift(),x="C",w.push(l,u);break;case"s":R=l,T=u,E=o[o.length-1],E.command==="C"&&(R=l+(l-E.points[2]),T=u+(u-E.points[3])),w.push(R,T,l+g.shift(),u+g.shift()),l+=g.shift(),u+=g.shift(),x="C",w.push(l,u);break;case"Q":w.push(g.shift(),g.shift()),l=g.shift(),u=g.shift(),w.push(l,u);break;case"q":w.push(l+g.shift(),u+g.shift()),l+=g.shift(),u+=g.shift(),x="Q",w.push(l,u);break;case"T":R=l,T=u,E=o[o.length-1],E.command==="Q"&&(R=l+(l-E.points[0]),T=u+(u-E.points[1])),l=g.shift(),u=g.shift(),x="Q",w.push(R,T,l,u);break;case"t":R=l,T=u,E=o[o.length-1],E.command==="Q"&&(R=l+(l-E.points[0]),T=u+(u-E.points[1])),l+=g.shift(),u+=g.shift(),x="Q",w.push(R,T,l,u);break;case"A":$=g.shift(),P=g.shift(),D=g.shift(),B=g.shift(),z=g.shift(),q=l,Y=u,l=g.shift(),u=g.shift(),x="A",w=this.convertEndpointToCenterParameterization(q,Y,l,u,B,z,$,P,D);break;case"a":$=g.shift(),P=g.shift(),D=g.shift(),B=g.shift(),z=g.shift(),q=l,Y=u,l+=g.shift(),u+=g.shift(),x="A",w=this.convertEndpointToCenterParameterization(q,Y,l,u,B,z,$,P,D);break}o.push({command:x||f,points:w,start:{x:S,y:C},pathLength:this.calcLength(S,C,x||f,w)})}(f==="z"||f==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,n,r,a){var i,o,s,l,u=qr;switch(r){case"L":return u.getLineLength(e,n,a[0],a[1]);case"C":return(0,Rp.getCubicArcLength)([e,a[0],a[2],a[4]],[n,a[1],a[3],a[5]],1);case"Q":return(0,Rp.getQuadraticArcLength)([e,a[0],a[2]],[n,a[1],a[3]],1);case"A":i=0;var c=a[4],d=a[5],p=a[4]+d,f=Math.PI/180;if(Math.abs(c-p)<f&&(f=Math.abs(c-p)),o=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],c,0),d<0)for(l=c-f;l>p;l-=f)s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(l=c+f;l<p;l+=f)s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],p,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),i}return 0}static convertEndpointToCenterParameterization(e,n,r,a,i,o,s,l,u){var c=u*(Math.PI/180),d=Math.cos(c)*(e-r)/2+Math.sin(c)*(n-a)/2,p=-1*Math.sin(c)*(e-r)/2+Math.cos(c)*(n-a)/2,f=d*d/(s*s)+p*p/(l*l);f>1&&(s*=Math.sqrt(f),l*=Math.sqrt(f));var g=Math.sqrt((s*s*(l*l)-s*s*(p*p)-l*l*(d*d))/(s*s*(p*p)+l*l*(d*d)));i===o&&(g*=-1),isNaN(g)&&(g=0);var y=g*s*p/l,v=g*-l*d/s,b=(e+r)/2+Math.cos(c)*y-Math.sin(c)*v,x=(n+a)/2+Math.sin(c)*y+Math.cos(c)*v,w=function(P){return Math.sqrt(P[0]*P[0]+P[1]*P[1])},S=function(P,D){return(P[0]*D[0]+P[1]*D[1])/(w(P)*w(D))},C=function(P,D){return(P[0]*D[1]<P[1]*D[0]?-1:1)*Math.acos(S(P,D))},E=C([1,0],[(d-y)/s,(p-v)/l]),R=[(d-y)/s,(p-v)/l],T=[(-1*d-y)/s,(-1*p-v)/l],$=C(R,T);return S(R,T)<=-1&&($=Math.PI),S(R,T)>=1&&($=0),o===0&&$>0&&($=$-2*Math.PI),o===1&&$<0&&($=$+2*Math.PI),[b,x,s,l,E,$,c,o]}}_p.Path=qr,qr.prototype.className="Path",qr.prototype._attrsAffectingSize=["data"],(0,zte._registerNode)(qr),Dte.Factory.addGetterSetter(qr,"data"),Object.defineProperty(Rb,"__esModule",{value:!0}),Rb.Arrow=void 0;const Ob=zt,Bte=fm,IP=tt,jte=Lt,_P=_p;class $c extends Bte.Line{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,r=this.points(),a=r,i=this.tension()!==0&&r.length>4;i&&(a=this.getTensionPoints());var o=this.pointerLength(),s=r.length,l,u;if(i){const p=[a[a.length-4],a[a.length-3],a[a.length-2],a[a.length-1],r[s-2],r[s-1]],f=_P.Path.calcLength(a[a.length-4],a[a.length-3],"C",p),g=_P.Path.getPointOnQuadraticBezier(Math.min(1,1-o/f),p[0],p[1],p[2],p[3],p[4],p[5]);l=r[s-2]-g.x,u=r[s-1]-g.y}else l=r[s-2]-r[s-4],u=r[s-1]-r[s-3];var c=(Math.atan2(u,l)+n)%n,d=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[s-2],r[s-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-o,d/2),e.lineTo(-o,-d/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),i?(l=(a[0]+a[2])/2-r[0],u=(a[1]+a[3])/2-r[1]):(l=r[2]-r[0],u=r[3]-r[1]),e.rotate((Math.atan2(-u,-l)+n)%n),e.moveTo(0,0),e.lineTo(-o,d/2),e.lineTo(-o,-d/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}Rb.Arrow=$c,$c.prototype.className="Arrow",(0,jte._registerNode)($c),Ob.Factory.addGetterSetter($c,"pointerLength",10,(0,IP.getNumberValidator)()),Ob.Factory.addGetterSetter($c,"pointerWidth",10,(0,IP.getNumberValidator)()),Ob.Factory.addGetterSetter($c,"pointerAtBeginning",!1),Ob.Factory.addGetterSetter($c,"pointerAtEnding",!0);var Mb={};Object.defineProperty(Mb,"__esModule",{value:!0}),Mb.Circle=void 0;const Ute=zt,Vte=jr,Wte=tt,Gte=Lt;class $p extends Vte.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Mb.Circle=$p,$p.prototype._centroid=!0,$p.prototype.className="Circle",$p.prototype._attrsAffectingSize=["radius"],(0,Gte._registerNode)($p),Ute.Factory.addGetterSetter($p,"radius",0,(0,Wte.getNumberValidator)());var Pb={};Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.Ellipse=void 0;const w4=zt,Hte=jr,RP=tt,qte=Lt;class gu extends Hte.Shape{_sceneFunc(e){var n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Pb.Ellipse=gu,gu.prototype.className="Ellipse",gu.prototype._centroid=!0,gu.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,qte._registerNode)(gu),w4.Factory.addComponentsGetterSetter(gu,"radius",["x","y"]),w4.Factory.addGetterSetter(gu,"radiusX",0,(0,RP.getNumberValidator)()),w4.Factory.addGetterSetter(gu,"radiusY",0,(0,RP.getNumberValidator)());var Fb={};Object.defineProperty(Fb,"__esModule",{value:!0}),Fb.Image=void 0;const k4=ir,Oc=zt,Kte=jr,Xte=Lt,mm=tt;let xs=class nV extends Kte.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),a=this.cornerRadius(),i=this.attrs.image;let o;if(i){const s=this.attrs.cropWidth,l=this.attrs.cropHeight;s&&l?o=[i,this.cropX(),this.cropY(),s,l,0,0,n,r]:o=[i,0,0,n,r]}(this.hasFill()||this.hasStroke()||a)&&(e.beginPath(),a?k4.Util.drawRoundedRectPath(e,n,r,a):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),i&&(a&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){var n=this.width(),r=this.height(),a=this.cornerRadius();e.beginPath(),a?k4.Util.drawRoundedRectPath(e,n,r,a):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){var a=k4.Util.createImageElement();a.onload=function(){var i=new nV({image:a});n(i)},a.onerror=r,a.crossOrigin="Anonymous",a.src=e}};Fb.Image=xs,xs.prototype.className="Image",(0,Xte._registerNode)(xs),Oc.Factory.addGetterSetter(xs,"cornerRadius",0,(0,mm.getNumberOrArrayOfNumbersValidator)(4)),Oc.Factory.addGetterSetter(xs,"image"),Oc.Factory.addComponentsGetterSetter(xs,"crop",["x","y","width","height"]),Oc.Factory.addGetterSetter(xs,"cropX",0,(0,mm.getNumberValidator)()),Oc.Factory.addGetterSetter(xs,"cropY",0,(0,mm.getNumberValidator)()),Oc.Factory.addGetterSetter(xs,"cropWidth",0,(0,mm.getNumberValidator)()),Oc.Factory.addGetterSetter(xs,"cropHeight",0,(0,mm.getNumberValidator)());var Op={};Object.defineProperty(Op,"__esModule",{value:!0}),Op.Tag=Op.Label=void 0;const Ab=zt,Qte=jr,Yte=Tp,S4=tt,$P=Lt;var OP=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Jte="Change.konva",Zte="none",C4="up",E4="right",N4="down",T4="left",ene=OP.length;class I4 extends Yte.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,r,a=function(){n._sync()};for(r=0;r<ene;r++)e.on(OP[r]+Jte,a)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),r,a,i,o,s,l,u;if(e&&n){switch(r=e.width(),a=e.height(),i=n.pointerDirection(),o=n.pointerWidth(),u=n.pointerHeight(),s=0,l=0,i){case C4:s=r/2,l=-1*u;break;case E4:s=r+o,l=a/2;break;case N4:s=r/2,l=a+u;break;case T4:s=-1*o,l=a/2;break}n.setAttrs({x:-1*s,y:-1*l,width:r,height:a}),e.setAttrs({x:-1*s,y:-1*l})}}}Op.Label=I4,I4.prototype.className="Label",(0,$P._registerNode)(I4);class Mc extends Qte.Shape{_sceneFunc(e){var n=this.width(),r=this.height(),a=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),s=this.cornerRadius();let l=0,u=0,c=0,d=0;typeof s=="number"?l=u=c=d=Math.min(s,n/2,r/2):(l=Math.min(s[0]||0,n/2,r/2),u=Math.min(s[1]||0,n/2,r/2),d=Math.min(s[2]||0,n/2,r/2),c=Math.min(s[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(l,0),a===C4&&(e.lineTo((n-i)/2,0),e.lineTo(n/2,-1*o),e.lineTo((n+i)/2,0)),e.lineTo(n-u,0),e.arc(n-u,u,u,Math.PI*3/2,0,!1),a===E4&&(e.lineTo(n,(r-o)/2),e.lineTo(n+i,r/2),e.lineTo(n,(r+o)/2)),e.lineTo(n,r-d),e.arc(n-d,r-d,d,0,Math.PI/2,!1),a===N4&&(e.lineTo((n+i)/2,r),e.lineTo(n/2,r+o),e.lineTo((n-i)/2,r)),e.lineTo(c,r),e.arc(c,r-c,c,Math.PI/2,Math.PI,!1),a===T4&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*i,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,r=this.pointerWidth(),a=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),s=this.height();return i===C4?(n-=a,s+=a):i===N4?s+=a:i===T4?(e-=r*1.5,o+=r):i===E4&&(o+=r*1.5),{x:e,y:n,width:o,height:s}}}Op.Tag=Mc,Mc.prototype.className="Tag",(0,$P._registerNode)(Mc),Ab.Factory.addGetterSetter(Mc,"pointerDirection",Zte),Ab.Factory.addGetterSetter(Mc,"pointerWidth",0,(0,S4.getNumberValidator)()),Ab.Factory.addGetterSetter(Mc,"pointerHeight",0,(0,S4.getNumberValidator)()),Ab.Factory.addGetterSetter(Mc,"cornerRadius",0,(0,S4.getNumberOrArrayOfNumbersValidator)(4));var gm={};Object.defineProperty(gm,"__esModule",{value:!0}),gm.Rect=void 0;const tne=zt,nne=jr,rne=Lt,ane=ir,ine=tt;class Db extends nne.Shape{_sceneFunc(e){var n=this.cornerRadius(),r=this.width(),a=this.height();e.beginPath(),n?ane.Util.drawRoundedRectPath(e,r,a,n):e.rect(0,0,r,a),e.closePath(),e.fillStrokeShape(this)}}gm.Rect=Db,Db.prototype.className="Rect",(0,rne._registerNode)(Db),tne.Factory.addGetterSetter(Db,"cornerRadius",0,(0,ine.getNumberOrArrayOfNumbersValidator)(4));var Lb={};Object.defineProperty(Lb,"__esModule",{value:!0}),Lb.RegularPolygon=void 0;const MP=zt,one=jr,PP=tt,sne=Lt;class Pc extends one.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(var a=0;a<e;a++)r.push({x:n*Math.sin(a*2*Math.PI/e),y:-1*n*Math.cos(a*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();var n=e[0].x,r=e[0].y,a=e[0].x,i=e[0].y;return e.forEach(o=>{n=Math.min(n,o.x),r=Math.max(r,o.x),a=Math.min(a,o.y),i=Math.max(i,o.y)}),{x:n,y:a,width:r-n,height:i-a}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Lb.RegularPolygon=Pc,Pc.prototype.className="RegularPolygon",Pc.prototype._centroid=!0,Pc.prototype._attrsAffectingSize=["radius"],(0,sne._registerNode)(Pc),MP.Factory.addGetterSetter(Pc,"radius",0,(0,PP.getNumberValidator)()),MP.Factory.addGetterSetter(Pc,"sides",0,(0,PP.getNumberValidator)());var zb={};Object.defineProperty(zb,"__esModule",{value:!0}),zb.Ring=void 0;const FP=zt,lne=jr,AP=tt,une=Lt;var DP=Math.PI*2;class Fc extends lne.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,DP,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),DP,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}zb.Ring=Fc,Fc.prototype.className="Ring",Fc.prototype._centroid=!0,Fc.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,une._registerNode)(Fc),FP.Factory.addGetterSetter(Fc,"innerRadius",0,(0,AP.getNumberValidator)()),FP.Factory.addGetterSetter(Fc,"outerRadius",0,(0,AP.getNumberValidator)());var Bb={};Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.Sprite=void 0;const Ac=zt,cne=jr,dne=Ip,LP=tt,pne=Lt;class ws extends cne.Shape{constructor(e){super(e),this._updated=!0,this.anim=new dne.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),r=this.frameIndex(),a=r*4,i=this.animations()[n],o=this.frameOffsets(),s=i[a+0],l=i[a+1],u=i[a+2],c=i[a+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,u,c),e.closePath(),e.fillStrokeShape(this)),d)if(o){var p=o[n],f=r*2;e.drawImage(d,s,l,u,c,p[f+0],p[f+1],u,c)}else e.drawImage(d,s,l,u,c,0,0,u,c)}_hitFunc(e){var n=this.animation(),r=this.frameIndex(),a=r*4,i=this.animations()[n],o=this.frameOffsets(),s=i[a+2],l=i[a+3];if(e.beginPath(),o){var u=o[n],c=r*2;e.rect(u[c+0],u[c+1],s,l)}else e.rect(0,0,s,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),r=this.animations(),a=r[n],i=a.length/4;e<i-1?this.frameIndex(e+1):this.frameIndex(0)}}Bb.Sprite=ws,ws.prototype.className="Sprite",(0,pne._registerNode)(ws),Ac.Factory.addGetterSetter(ws,"animation"),Ac.Factory.addGetterSetter(ws,"animations"),Ac.Factory.addGetterSetter(ws,"frameOffsets"),Ac.Factory.addGetterSetter(ws,"image"),Ac.Factory.addGetterSetter(ws,"frameIndex",0,(0,LP.getNumberValidator)()),Ac.Factory.addGetterSetter(ws,"frameRate",17,(0,LP.getNumberValidator)()),Ac.Factory.backCompat(ws,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var jb={};Object.defineProperty(jb,"__esModule",{value:!0}),jb.Star=void 0;const _4=zt,hne=jr,R4=tt,fne=Lt;class yu extends hne.Shape{_sceneFunc(e){var n=this.innerRadius(),r=this.outerRadius(),a=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var i=1;i<a*2;i++){var o=i%2===0?r:n,s=o*Math.sin(i*Math.PI/a),l=-1*o*Math.cos(i*Math.PI/a);e.lineTo(s,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}jb.Star=yu,yu.prototype.className="Star",yu.prototype._centroid=!0,yu.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,fne._registerNode)(yu),_4.Factory.addGetterSetter(yu,"numPoints",5,(0,R4.getNumberValidator)()),_4.Factory.addGetterSetter(yu,"innerRadius",0,(0,R4.getNumberValidator)()),_4.Factory.addGetterSetter(yu,"outerRadius",0,(0,R4.getNumberValidator)());var Dc={};Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.Text=Dc.stringToArray=void 0;const $4=ir,Ba=zt,mne=jr,bu=tt,gne=Lt;function zP(t){return Array.from(t)}Dc.stringToArray=zP;var Mp="auto",yne="center",BP="inherit",ym="justify",bne="Change.konva",vne="2d",jP="-",UP="left",xne="text",wne="Text",kne="top",Sne="bottom",VP="middle",WP="normal",Cne="px ",Ub=" ",Ene="right",GP="rtl",Nne="word",Tne="char",HP="none",O4="\u2026",qP=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Ine=qP.length;function _ne(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}var M4;function P4(){return M4||(M4=$4.Util.createCanvasElement().getContext(vne),M4)}function Rne(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function $ne(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function One(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class mr extends mne.Shape{constructor(e){super(One(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<Ine;n++)this.on(qP[n]+bne,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,r=n.length;if(this.text()){var a=this.padding(),i=this.fontSize(),o=this.lineHeight()*i,s=this.verticalAlign(),l=this.direction(),u=0,c=this.align(),d=this.getWidth(),p=this.letterSpacing(),f=this.fill(),g=this.textDecoration(),y=g.indexOf("underline")!==-1,v=g.indexOf("line-through")!==-1,b;l=l===BP?e.direction:l;var x=0,x=o/2,w=0,S=0;for(l===GP&&e.setAttr("direction",l),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",VP),e.setAttr("textAlign",UP),s===VP?u=(this.getHeight()-r*o-a*2)/2:s===Sne&&(u=this.getHeight()-r*o-a*2),e.translate(a,u+a),b=0;b<r;b++){var w=0,S=0,C=n[b],E=C.text,R=C.width,T=C.lastInParagraph,$,P,D;if(e.save(),c===Ene?w+=d-R-a*2:c===yne&&(w+=(d-R-a*2)/2),y){e.save(),e.beginPath(),e.moveTo(w,x+S+Math.round(i/2)),$=E.split(" ").length-1,P=$===0,D=c===ym&&!T?d-a*2:R,e.lineTo(w+Math.round(D),x+S+Math.round(i/2)),e.lineWidth=i/15;const H=this._getLinearGradient();e.strokeStyle=H||f,e.stroke(),e.restore()}if(v){e.save(),e.beginPath(),e.moveTo(w,x+S),$=E.split(" ").length-1,P=$===0,D=c===ym&&T&&!P?d-a*2:R,e.lineTo(w+Math.round(D),x+S),e.lineWidth=i/15;const H=this._getLinearGradient();e.strokeStyle=H||f,e.stroke(),e.restore()}if(l!==GP&&(p!==0||c===ym)){$=E.split(" ").length-1;for(var B=zP(E),z=0;z<B.length;z++){var q=B[z];q===" "&&!T&&c===ym&&(w+=(d-a*2-R)/$),this._partialTextX=w,this._partialTextY=x+S,this._partialText=q,e.fillStrokeShape(this),w+=this.measureSize(q).width+p}}else p!==0&&e.setAttr("letterSpacing",`${p}px`),this._partialTextX=w,this._partialTextY=x+S,this._partialText=E,e.fillStrokeShape(this);e.restore(),r>1&&(x+=o)}}}_hitFunc(e){var n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=$4.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(xne,n),this}getWidth(){var e=this.attrs.width===Mp||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Mp||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return $4.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=P4(),r=this.fontSize(),a;return n.save(),n.font=this._getContextFont(),a=n.measureText(e),n.restore(),{width:a.width,height:r}}_getContextFont(){return this.fontStyle()+Ub+this.fontVariant()+Ub+(this.fontSize()+Cne)+_ne(this.fontFamily())}_addTextLine(e){this.align()===ym&&(e=e.trim());var n=this._getTextWidth(e);return this.textArr.push({text:e,width:n,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),r=e.length;return P4().measureText(e).width+(r?n*(r-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),r=0,a=this.lineHeight()*n,i=this.attrs.width,o=this.attrs.height,s=i!==Mp&&i!==void 0,l=o!==Mp&&o!==void 0,u=this.padding(),c=i-u*2,d=o-u*2,p=0,f=this.wrap(),g=f!==HP,y=f!==Tne&&g,v=this.ellipsis();this.textArr=[],P4().font=this._getContextFont();for(var b=v?this._getTextWidth(O4):0,x=0,w=e.length;x<w;++x){var S=e[x],C=this._getTextWidth(S);if(s&&C>c)for(;S.length>0;){for(var E=0,R=S.length,T="",$=0;E<R;){var P=E+R>>>1,D=S.slice(0,P+1),B=this._getTextWidth(D)+b;B<=c?(E=P+1,T=D,$=B):R=P}if(T){if(y){var z,q=S[T.length],Y=q===Ub||q===jP;Y&&$<=c?z=T.length:z=Math.max(T.lastIndexOf(Ub),T.lastIndexOf(jP))+1,z>0&&(E=z,T=T.slice(0,E),$=this._getTextWidth(T))}T=T.trimRight(),this._addTextLine(T),r=Math.max(r,$),p+=a;var J=this._shouldHandleEllipsis(p);if(J){this._tryToAddEllipsisToLastLine();break}if(S=S.slice(E),S=S.trimLeft(),S.length>0&&(C=this._getTextWidth(S),C<=c)){this._addTextLine(S),p+=a,r=Math.max(r,C);break}}else break}else this._addTextLine(S),p+=a,r=Math.max(r,C),this._shouldHandleEllipsis(p)&&x<w-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&p+a>d)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){var n=+this.fontSize(),r=this.lineHeight()*n,a=this.attrs.height,i=a!==Mp&&a!==void 0,o=this.padding(),s=a-o*2,l=this.wrap(),u=l!==HP;return!u||i&&e+r>s}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==Mp&&e!==void 0,r=this.padding(),a=e-r*2,i=this.ellipsis(),o=this.textArr[this.textArr.length-1];if(!(!o||!i)){if(n){var s=this._getTextWidth(o.text+O4)<a;s||(o.text=o.text.slice(0,o.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+O4)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}}Dc.Text=mr,mr.prototype._fillFunc=Rne,mr.prototype._strokeFunc=$ne,mr.prototype.className=wne,mr.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,gne._registerNode)(mr),Ba.Factory.overWriteSetter(mr,"width",(0,bu.getNumberOrAutoValidator)()),Ba.Factory.overWriteSetter(mr,"height",(0,bu.getNumberOrAutoValidator)()),Ba.Factory.addGetterSetter(mr,"direction",BP),Ba.Factory.addGetterSetter(mr,"fontFamily","Arial"),Ba.Factory.addGetterSetter(mr,"fontSize",12,(0,bu.getNumberValidator)()),Ba.Factory.addGetterSetter(mr,"fontStyle",WP),Ba.Factory.addGetterSetter(mr,"fontVariant",WP),Ba.Factory.addGetterSetter(mr,"padding",0,(0,bu.getNumberValidator)()),Ba.Factory.addGetterSetter(mr,"align",UP),Ba.Factory.addGetterSetter(mr,"verticalAlign",kne),Ba.Factory.addGetterSetter(mr,"lineHeight",1,(0,bu.getNumberValidator)()),Ba.Factory.addGetterSetter(mr,"wrap",Nne),Ba.Factory.addGetterSetter(mr,"ellipsis",!1,(0,bu.getBooleanValidator)()),Ba.Factory.addGetterSetter(mr,"letterSpacing",0,(0,bu.getNumberValidator)()),Ba.Factory.addGetterSetter(mr,"text","",(0,bu.getStringValidator)()),Ba.Factory.addGetterSetter(mr,"textDecoration","");var Vb={};Object.defineProperty(Vb,"__esModule",{value:!0}),Vb.TextPath=void 0;const F4=ir,Go=zt,Mne=jr,bm=_p,A4=Dc,KP=tt,Pne=Lt;var Fne="",XP="normal";function QP(t){t.fillText(this.partialText,0,0)}function YP(t){t.strokeText(this.partialText,0,0)}class Ur extends Mne.Shape{constructor(e){super(e),this.dummyCanvas=F4.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return bm.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:bm.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=bm.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),r=this.fill(),a=this.fontSize(),i=this.glyphInfo;n==="underline"&&e.beginPath();for(var o=0;o<i.length;o++){e.save();var s=i[o].p0;e.translate(s.x,s.y),e.rotate(i[o].rotation),this.partialText=i[o].text,e.fillStrokeShape(this),n==="underline"&&(o===0&&e.moveTo(0,a/2+1),e.lineTo(a,a/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=a/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var r=n[0].p0;e.moveTo(r.x,r.y)}for(var a=0;a<n.length;a++){var i=n[a].p1;e.lineTo(i.x,i.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return F4.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return A4.Text.prototype.setText.call(this,e)}_getContextFont(){return A4.Text.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,r=n.getContext("2d");r.save(),r.font=this._getContextFont();var a=r.measureText(e);return r.restore(),{width:a.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),a=this.align(),i=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let s=0;a==="center"&&(s=Math.max(0,this.pathLength/2-o/2)),a==="right"&&(s=Math.max(0,this.pathLength-o));const l=(0,A4.stringToArray)(this.text());let u=s;for(var c=0;c<l.length;c++){const d=this._getPointAtLength(u);if(!d)return;let p=this._getTextSize(l[c]).width+r;if(l[c]===" "&&a==="justify"){const x=this.text().split(" ").length-1;p+=(this.pathLength-o)/x}const f=this._getPointAtLength(u+p);if(!f)return;const g=bm.Path.getLineLength(d.x,d.y,f.x,f.y);let y=0;if(i)try{y=i(l[c-1],l[c])*this.fontSize()}catch{y=0}d.x+=y,f.x+=y,this.textWidth+=y;const v=bm.Path.getPointOnLine(y+g/2,d.x,d.y,f.x,f.y),b=Math.atan2(f.y-d.y,f.x-d.x);this.glyphInfo.push({transposeX:v.x,transposeY:v.y,text:l[c],rotation:b,p0:d,p1:f}),u+=p}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(c){e.push(c.p0.x),e.push(c.p0.y),e.push(c.p1.x),e.push(c.p1.y)});for(var n=e[0]||0,r=e[0]||0,a=e[1]||0,i=e[1]||0,o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),a=Math.min(a,s),i=Math.max(i,s);var u=this.fontSize();return{x:n-u/2,y:a-u/2,width:r-n+u,height:i-a+u}}destroy(){return F4.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Vb.TextPath=Ur,Ur.prototype._fillFunc=QP,Ur.prototype._strokeFunc=YP,Ur.prototype._fillFuncHit=QP,Ur.prototype._strokeFuncHit=YP,Ur.prototype.className="TextPath",Ur.prototype._attrsAffectingSize=["text","fontSize","data"],(0,Pne._registerNode)(Ur),Go.Factory.addGetterSetter(Ur,"data"),Go.Factory.addGetterSetter(Ur,"fontFamily","Arial"),Go.Factory.addGetterSetter(Ur,"fontSize",12,(0,KP.getNumberValidator)()),Go.Factory.addGetterSetter(Ur,"fontStyle",XP),Go.Factory.addGetterSetter(Ur,"align","left"),Go.Factory.addGetterSetter(Ur,"letterSpacing",0,(0,KP.getNumberValidator)()),Go.Factory.addGetterSetter(Ur,"textBaseline","middle"),Go.Factory.addGetterSetter(Ur,"fontVariant",XP),Go.Factory.addGetterSetter(Ur,"text",Fne),Go.Factory.addGetterSetter(Ur,"textDecoration",null),Go.Factory.addGetterSetter(Ur,"kerningFunc",null);var Wb={};Object.defineProperty(Wb,"__esModule",{value:!0}),Wb.Transformer=void 0;const kn=ir,dn=zt,JP=Kn,Ane=jr,Dne=gm,ZP=Tp,Ho=Lt,vu=tt,Lne=Lt;var eF="tr-konva",zne=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${eF}`).join(" "),tF="nodesRect",Bne=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],jne={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Une="ontouchstart"in Ho.Konva._global;function Vne(t,e,n){if(t==="rotater")return n;e+=kn.Util.degToRad(jne[t]||0);var r=(kn.Util.radToDeg(e)%360+360)%360;return kn.Util._inRange(r,315+22.5,360)||kn.Util._inRange(r,0,22.5)?"ns-resize":kn.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":kn.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":kn.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":kn.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":kn.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":kn.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":kn.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(kn.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}var Gb=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],nF=1e8;function Wne(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function rF(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),a=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:r,y:a}}function Gne(t,e){const n=Wne(t);return rF(t,e,n)}function Hne(t,e,n){let r=e;for(let a=0;a<t.length;a++){const i=Ho.Konva.getAngle(t[a]),o=Math.abs(i-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<n&&(r=i)}return r}let Yt=class extends ZP.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(zne,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return kn.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return eF+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(r=>r.isAncestorOf(this)?(kn.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const a=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},i=r._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");r.on(i,a),r.on(Bne.map(o=>o+`.${this._getEventNamespace()}`).join(" "),a),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,a),this._proxyDrag(r)}),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,n=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(n,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!e)return;const r=t.getAbsolutePosition(),a=r.x-e.x,i=r.y-e.y;this.nodes().forEach(o=>{if(o===t||o.isDragging())return;const s=o.getAbsolutePosition();o.setAbsolutePosition({x:s.x+a,y:s.y+i}),o.startDrag(n)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(tF),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(tF,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),n){var r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=t.getAbsoluteScale(n),i=t.getAbsolutePosition(n),o=r.x*a.x-t.offsetX()*a.x,s=r.y*a.y-t.offsetY()*a.y;const l=(Ho.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),u={x:i.x+o*Math.cos(l)+s*Math.sin(-l),y:i.y+s*Math.cos(l)+o*Math.sin(l),width:r.width*a.x,height:r.height*a.y,rotation:l};return rF(u,-Ho.Konva.getAngle(e),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-nF,y:-nF,width:0,height:0,rotation:0};const e=[];this.nodes().map(l=>{const u=l.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var c=[{x:u.x,y:u.y},{x:u.x+u.width,y:u.y},{x:u.x+u.width,y:u.y+u.height},{x:u.x,y:u.y+u.height}],d=l.getAbsoluteTransform();c.forEach(function(p){var f=d.point(p);e.push(f)})});const n=new kn.Transform;n.rotate(-Ho.Konva.getAngle(this.rotation()));var r=1/0,a=1/0,i=-1/0,o=-1/0;e.forEach(function(l){var u=n.point(l);r===void 0&&(r=i=u.x,a=o=u.y),r=Math.min(r,u.x),a=Math.min(a,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}),n.invert();const s=n.point({x:r,y:a});return{x:s.x,y:s.y,width:i-r,height:o-a,rotation:Ho.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Gb.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){var e=new Dne.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Une?10:"auto"}),n=this;e.on("mousedown touchstart",function(r){n._handleMouseDown(r)}),e.on("dragstart",r=>{e.stopDrag(),r.cancelBubble=!0}),e.on("dragend",r=>{r.cancelBubble=!0}),e.on("mouseenter",()=>{var r=Ho.Konva.getAngle(this.rotation()),a=this.rotateAnchorCursor(),i=Vne(t,r,a);e.getStage().content&&(e.getStage().content.style.cursor=i),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){var t=new Ane.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(e,n){var r=n.getParent(),a=r.padding();e.beginPath(),e.rect(-a,-a,n.width()+a*2,n.height()+a*2),e.moveTo(n.width()/2,-a),r.rotateEnabled()&&r.rotateLineVisible()&&e.lineTo(n.width()/2,-r.rotateAnchorOffset()*kn.Util._sign(n.height())-a),e.fillStrokeShape(n)},hitFunc:(e,n)=>{if(this.shouldOverdrawWholeArea()){var r=this.padding();e.beginPath(),e.rect(-r,-r,n.width()+r*2,n.height()+r*2),e.fillStrokeShape(n)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,r=e.height,a=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/a),this.cos=Math.abs(n/a),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var i=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-i.x,y:o.y-i.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(s=>{s._fire("transformstart",{evt:t.evt,target:s})})}_handleMouseMove(t){var e,n,r,a=this.findOne("."+this._movingAnchorName),i=a.getStage();i.setPointersPositions(t);const o=i.getPointerPosition();let s={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const l=a.getAbsolutePosition();this.anchorDragBoundFunc()&&(s=this.anchorDragBoundFunc()(l,s,t)),a.setAbsolutePosition(s);const u=a.getAbsolutePosition();if(!(l.x===u.x&&l.y===u.y)){if(this._movingAnchorName==="rotater"){var c=this._getNodeRect();e=a.x()-c.width/2,n=-a.y()+c.height/2;let B=Math.atan2(-n,e)+Math.PI/2;c.height<0&&(B-=Math.PI);var d=Ho.Konva.getAngle(this.rotation());const z=d+B,q=Ho.Konva.getAngle(this.rotationSnapTolerance()),Y=Hne(this.rotationSnaps(),z,q)-c.rotation,J=Gne(c,Y);this._fitNodesInto(J,t);return}var p=this.shiftBehavior(),f;p==="inverted"?f=this.keepRatio()&&!t.shiftKey:p==="none"?f=this.keepRatio():f=this.keepRatio()||t.shiftKey;var x=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(g.x-a.x(),2)+Math.pow(g.y-a.y(),2));var y=this.findOne(".top-left").x()>g.x?-1:1,v=this.findOne(".top-left").y()>g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".top-left").x(g.x-e),this.findOne(".top-left").y(g.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(a.y());else if(this._movingAnchorName==="top-right"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(a.x()-g.x,2)+Math.pow(g.y-a.y(),2));var y=this.findOne(".top-right").x()<g.x?-1:1,v=this.findOne(".top-right").y()>g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".top-right").x(g.x+e),this.findOne(".top-right").y(g.y-n)}var b=a.position();this.findOne(".top-left").y(b.y),this.findOne(".bottom-right").x(b.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(a.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(a.x());else if(this._movingAnchorName==="bottom-left"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(g.x-a.x(),2)+Math.pow(a.y()-g.y,2));var y=g.x<a.x()?-1:1,v=a.y()<g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,a.x(g.x-e),a.y(g.y+n)}b=a.position(),this.findOne(".top-left").x(b.x),this.findOne(".bottom-right").y(b.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(a.y());else if(this._movingAnchorName==="bottom-right"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(a.x()-g.x,2)+Math.pow(a.y()-g.y,2));var y=this.findOne(".bottom-right").x()<g.x?-1:1,v=this.findOne(".bottom-right").y()<g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".bottom-right").x(g.x+e),this.findOne(".bottom-right").y(g.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var x=this.centeredScaling()||t.altKey;if(x){var w=this.findOne(".top-left"),S=this.findOne(".bottom-right"),C=w.x(),E=w.y(),R=this.getWidth()-S.x(),T=this.getHeight()-S.y();S.move({x:-C,y:-E}),w.move({x:R,y:T})}var $=this.findOne(".top-left").getAbsolutePosition();e=$.x,n=$.y;var P=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),D=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:P,height:D,rotation:Ho.Konva.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach(n=>{n._fire("transformend",{evt:t,target:n})}),this._movingAnchorName=null}}_fitNodesInto(t,e){var n=this._getNodeRect();const r=1;if(kn.Util._inRange(t.width,-this.padding()*2-r,r)){this.update();return}if(kn.Util._inRange(t.height,-this.padding()*2-r,r)){this.update();return}var a=new kn.Transform;if(a.rotate(Ho.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const d=a.point({x:-this.padding()*2,y:0});t.x+=d.x,t.y+=d.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const d=a.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const d=a.point({x:0,y:-this.padding()*2});t.x+=d.x,t.y+=d.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const d=a.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const d=this.boundBoxFunc()(n,t);d?t=d:kn.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const i=1e7,o=new kn.Transform;o.translate(n.x,n.y),o.rotate(n.rotation),o.scale(n.width/i,n.height/i);const s=new kn.Transform,l=t.width/i,u=t.height/i;this.flipEnabled()===!1?(s.translate(t.x,t.y),s.rotate(t.rotation),s.translate(t.width<0?t.width:0,t.height<0?t.height:0),s.scale(Math.abs(l),Math.abs(u))):(s.translate(t.x,t.y),s.rotate(t.rotation),s.scale(l,u));const c=s.multiply(o.invert());this._nodes.forEach(d=>{var p;const f=d.getParent().getAbsoluteTransform(),g=d.getTransform().copy();g.translate(d.offsetX(),d.offsetY());const y=new kn.Transform;y.multiply(f.copy().invert()).multiply(c).multiply(f).multiply(g);const v=y.decompose();d.setAttrs(v),this._fire("transform",{evt:e,target:d}),d._fire("transform",{evt:e,target:d}),(p=d.getLayer())===null||p===void 0||p.batchDraw()}),this.rotation(kn.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t,e=this._getNodeRect();this.rotation(kn.Util._getRotation(e.rotation));var n=e.width,r=e.height,a=this.enabledAnchors(),i=this.resizeEnabled(),o=this.padding(),s=this.anchorSize();const l=this.find("._anchor");l.forEach(c=>{c.setAttrs({width:s,height:s,offsetX:s/2,offsetY:s/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:s/2+o,offsetY:s/2+o,visible:i&&a.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:s/2+o,visible:i&&a.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:s/2-o,offsetY:s/2+o,visible:i&&a.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:s/2+o,visible:i&&a.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:r/2,offsetX:s/2-o,visible:i&&a.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:s/2+o,offsetY:s/2-o,visible:i&&a.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:r,offsetY:s/2-o,visible:i&&a.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:r,offsetX:s/2-o,offsetY:s/2-o,visible:i&&a.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*kn.Util._sign(r)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const u=this.anchorStyleFunc();u&&l.forEach(c=>{u(c)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),ZP.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return JP.Node.prototype.toObject.call(this)}clone(t){var e=JP.Node.prototype.clone.call(this,t);return e}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Wb.Transformer=Yt;function qne(t){return t instanceof Array||kn.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){Gb.indexOf(e)===-1&&kn.Util.warn("Unknown anchor name: "+e+". Available names are: "+Gb.join(", "))}),t||[]}Yt.prototype.className="Transformer",(0,Lne._registerNode)(Yt),dn.Factory.addGetterSetter(Yt,"enabledAnchors",Gb,qne),dn.Factory.addGetterSetter(Yt,"flipEnabled",!0,(0,vu.getBooleanValidator)()),dn.Factory.addGetterSetter(Yt,"resizeEnabled",!0),dn.Factory.addGetterSetter(Yt,"anchorSize",10,(0,vu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"rotateEnabled",!0),dn.Factory.addGetterSetter(Yt,"rotateLineVisible",!0),dn.Factory.addGetterSetter(Yt,"rotationSnaps",[]),dn.Factory.addGetterSetter(Yt,"rotateAnchorOffset",50,(0,vu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"rotateAnchorCursor","crosshair"),dn.Factory.addGetterSetter(Yt,"rotationSnapTolerance",5,(0,vu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"borderEnabled",!0),dn.Factory.addGetterSetter(Yt,"anchorStroke","rgb(0, 161, 255)"),dn.Factory.addGetterSetter(Yt,"anchorStrokeWidth",1,(0,vu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"anchorFill","white"),dn.Factory.addGetterSetter(Yt,"anchorCornerRadius",0,(0,vu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"borderStroke","rgb(0, 161, 255)"),dn.Factory.addGetterSetter(Yt,"borderStrokeWidth",1,(0,vu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"borderDash"),dn.Factory.addGetterSetter(Yt,"keepRatio",!0),dn.Factory.addGetterSetter(Yt,"shiftBehavior","default"),dn.Factory.addGetterSetter(Yt,"centeredScaling",!1),dn.Factory.addGetterSetter(Yt,"ignoreStroke",!1),dn.Factory.addGetterSetter(Yt,"padding",0,(0,vu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"node"),dn.Factory.addGetterSetter(Yt,"nodes"),dn.Factory.addGetterSetter(Yt,"boundBoxFunc"),dn.Factory.addGetterSetter(Yt,"anchorDragBoundFunc"),dn.Factory.addGetterSetter(Yt,"anchorStyleFunc"),dn.Factory.addGetterSetter(Yt,"shouldOverdrawWholeArea",!1),dn.Factory.addGetterSetter(Yt,"useSingleNodeRotation",!0),dn.Factory.backCompat(Yt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Hb={};Object.defineProperty(Hb,"__esModule",{value:!0}),Hb.Wedge=void 0;const qb=zt,Kne=jr,Xne=Lt,aF=tt,Qne=Lt;class dl extends Kne.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Xne.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Hb.Wedge=dl,dl.prototype.className="Wedge",dl.prototype._centroid=!0,dl.prototype._attrsAffectingSize=["radius"],(0,Qne._registerNode)(dl),qb.Factory.addGetterSetter(dl,"radius",0,(0,aF.getNumberValidator)()),qb.Factory.addGetterSetter(dl,"angle",0,(0,aF.getNumberValidator)()),qb.Factory.addGetterSetter(dl,"clockwise",!1),qb.Factory.backCompat(dl,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Kb={};Object.defineProperty(Kb,"__esModule",{value:!0}),Kb.Blur=void 0;const iF=zt,Yne=Kn,Jne=tt;function oF(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var Zne=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],ere=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function tre(t,e){var n=t.data,r=t.width,a=t.height,i,o,s,l,u,c,d,p,f,g,y,v,b,x,w,S,C,E,R,T,$,P,D,B,z=e+e+1,q=r-1,Y=a-1,J=e+1,H=J*(J+1)/2,L=new oF,Q=null,Z=L,te=null,oe=null,he=Zne[e],ae=ere[e];for(s=1;s<z;s++)Z=Z.next=new oF,s===J&&(Q=Z);for(Z.next=L,d=c=0,o=0;o<a;o++){for(S=C=E=R=p=f=g=y=0,v=J*(T=n[c]),b=J*($=n[c+1]),x=J*(P=n[c+2]),w=J*(D=n[c+3]),p+=H*T,f+=H*$,g+=H*P,y+=H*D,Z=L,s=0;s<J;s++)Z.r=T,Z.g=$,Z.b=P,Z.a=D,Z=Z.next;for(s=1;s<J;s++)l=c+((q<s?q:s)<<2),p+=(Z.r=T=n[l])*(B=J-s),f+=(Z.g=$=n[l+1])*B,g+=(Z.b=P=n[l+2])*B,y+=(Z.a=D=n[l+3])*B,S+=T,C+=$,E+=P,R+=D,Z=Z.next;for(te=L,oe=Q,i=0;i<r;i++)n[c+3]=D=y*he>>ae,D!==0?(D=255/D,n[c]=(p*he>>ae)*D,n[c+1]=(f*he>>ae)*D,n[c+2]=(g*he>>ae)*D):n[c]=n[c+1]=n[c+2]=0,p-=v,f-=b,g-=x,y-=w,v-=te.r,b-=te.g,x-=te.b,w-=te.a,l=d+((l=i+e+1)<q?l:q)<<2,S+=te.r=n[l],C+=te.g=n[l+1],E+=te.b=n[l+2],R+=te.a=n[l+3],p+=S,f+=C,g+=E,y+=R,te=te.next,v+=T=oe.r,b+=$=oe.g,x+=P=oe.b,w+=D=oe.a,S-=T,C-=$,E-=P,R-=D,oe=oe.next,c+=4;d+=r}for(i=0;i<r;i++){for(C=E=R=S=f=g=y=p=0,c=i<<2,v=J*(T=n[c]),b=J*($=n[c+1]),x=J*(P=n[c+2]),w=J*(D=n[c+3]),p+=H*T,f+=H*$,g+=H*P,y+=H*D,Z=L,s=0;s<J;s++)Z.r=T,Z.g=$,Z.b=P,Z.a=D,Z=Z.next;for(u=r,s=1;s<=e;s++)c=u+i<<2,p+=(Z.r=T=n[c])*(B=J-s),f+=(Z.g=$=n[c+1])*B,g+=(Z.b=P=n[c+2])*B,y+=(Z.a=D=n[c+3])*B,S+=T,C+=$,E+=P,R+=D,Z=Z.next,s<Y&&(u+=r);for(c=i,te=L,oe=Q,o=0;o<a;o++)l=c<<2,n[l+3]=D=y*he>>ae,D>0?(D=255/D,n[l]=(p*he>>ae)*D,n[l+1]=(f*he>>ae)*D,n[l+2]=(g*he>>ae)*D):n[l]=n[l+1]=n[l+2]=0,p-=v,f-=b,g-=x,y-=w,v-=te.r,b-=te.g,x-=te.b,w-=te.a,l=i+((l=o+J)<Y?l:Y)*r<<2,p+=S+=te.r=n[l],f+=C+=te.g=n[l+1],g+=E+=te.b=n[l+2],y+=R+=te.a=n[l+3],te=te.next,v+=T=oe.r,b+=$=oe.g,x+=P=oe.b,w+=D=oe.a,S-=T,C-=$,E-=P,R-=D,oe=oe.next,c+=r}}const nre=function(t){var e=Math.round(this.blurRadius());e>0&&tre(t,e)};Kb.Blur=nre,iF.Factory.addGetterSetter(Yne.Node,"blurRadius",0,(0,Jne.getNumberValidator)(),iF.Factory.afterSetFilter);var Xb={};Object.defineProperty(Xb,"__esModule",{value:!0}),Xb.Brighten=void 0;const sF=zt,rre=Kn,are=tt,ire=function(t){var e=this.brightness()*255,n=t.data,r=n.length,a;for(a=0;a<r;a+=4)n[a]+=e,n[a+1]+=e,n[a+2]+=e};Xb.Brighten=ire,sF.Factory.addGetterSetter(rre.Node,"brightness",0,(0,are.getNumberValidator)(),sF.Factory.afterSetFilter);var Qb={};Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.Contrast=void 0;const lF=zt,ore=Kn,sre=tt,lre=function(t){var e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length,a=150,i=150,o=150,s;for(s=0;s<r;s+=4)a=n[s],i=n[s+1],o=n[s+2],a/=255,a-=.5,a*=e,a+=.5,a*=255,i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,a=a<0?0:a>255?255:a,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,n[s]=a,n[s+1]=i,n[s+2]=o};Qb.Contrast=lre,lF.Factory.addGetterSetter(ore.Node,"contrast",0,(0,sre.getNumberValidator)(),lF.Factory.afterSetFilter);var Yb={};Object.defineProperty(Yb,"__esModule",{value:!0}),Yb.Emboss=void 0;const xu=zt,Jb=Kn,ure=ir,uF=tt,cre=function(t){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),a=this.embossBlend(),i=0,o=0,s=t.data,l=t.width,u=t.height,c=l*4,d=u;switch(r){case"top-left":i=-1,o=-1;break;case"top":i=-1,o=0;break;case"top-right":i=-1,o=1;break;case"right":i=0,o=1;break;case"bottom-right":i=1,o=1;break;case"bottom":i=1,o=0;break;case"bottom-left":i=1,o=-1;break;case"left":i=0,o=-1;break;default:ure.Util.error("Unknown emboss direction: "+r)}do{var p=(d-1)*c,f=i;d+f<1&&(f=0),d+f>u&&(f=0);var g=(d-1+f)*l*4,y=l;do{var v=p+(y-1)*4,b=o;y+b<1&&(b=0),y+b>l&&(b=0);var x=g+(y-1+b)*4,w=s[v]-s[x],S=s[v+1]-s[x+1],C=s[v+2]-s[x+2],E=w,R=E>0?E:-E,T=S>0?S:-S,$=C>0?C:-C;if(T>R&&(E=S),$>R&&(E=C),E*=e,a){var P=s[v]+E,D=s[v+1]+E,B=s[v+2]+E;s[v]=P>255?255:P<0?0:P,s[v+1]=D>255?255:D<0?0:D,s[v+2]=B>255?255:B<0?0:B}else{var z=n-E;z<0?z=0:z>255&&(z=255),s[v]=s[v+1]=s[v+2]=z}}while(--y)}while(--d)};Yb.Emboss=cre,xu.Factory.addGetterSetter(Jb.Node,"embossStrength",.5,(0,uF.getNumberValidator)(),xu.Factory.afterSetFilter),xu.Factory.addGetterSetter(Jb.Node,"embossWhiteLevel",.5,(0,uF.getNumberValidator)(),xu.Factory.afterSetFilter),xu.Factory.addGetterSetter(Jb.Node,"embossDirection","top-left",null,xu.Factory.afterSetFilter),xu.Factory.addGetterSetter(Jb.Node,"embossBlend",!1,null,xu.Factory.afterSetFilter);var Zb={};Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.Enhance=void 0;const cF=zt,dre=Kn,pre=tt;function D4(t,e,n,r,a){var i=n-e,o=a-r,s;return i===0?r+o/2:o===0?r:(s=(t-e)/i,s=o*s+r,s)}const hre=function(t){var e=t.data,n=e.length,r=e[0],a=r,i,o=e[1],s=o,l,u=e[2],c=u,d,p,f=this.enhance();if(f!==0){for(p=0;p<n;p+=4)i=e[p+0],i<r?r=i:i>a&&(a=i),l=e[p+1],l<o?o=l:l>s&&(s=l),d=e[p+2],d<u?u=d:d>c&&(c=d);a===r&&(a=255,r=0),s===o&&(s=255,o=0),c===u&&(c=255,u=0);var g,y,v,b,x,w,S,C,E;for(f>0?(y=a+f*(255-a),v=r-f*(r-0),x=s+f*(255-s),w=o-f*(o-0),C=c+f*(255-c),E=u-f*(u-0)):(g=(a+r)*.5,y=a+f*(a-g),v=r+f*(r-g),b=(s+o)*.5,x=s+f*(s-b),w=o+f*(o-b),S=(c+u)*.5,C=c+f*(c-S),E=u+f*(u-S)),p=0;p<n;p+=4)e[p+0]=D4(e[p+0],r,a,v,y),e[p+1]=D4(e[p+1],o,s,w,x),e[p+2]=D4(e[p+2],u,c,E,C)}};Zb.Enhance=hre,cF.Factory.addGetterSetter(dre.Node,"enhance",0,(0,pre.getNumberValidator)(),cF.Factory.afterSetFilter);var ev={};Object.defineProperty(ev,"__esModule",{value:!0}),ev.Grayscale=void 0;const fre=function(t){var e=t.data,n=e.length,r,a;for(r=0;r<n;r+=4)a=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=a,e[r+1]=a,e[r+2]=a};ev.Grayscale=fre;var tv={};Object.defineProperty(tv,"__esModule",{value:!0}),tv.HSL=void 0;const Pp=zt,L4=Kn,z4=tt;Pp.Factory.addGetterSetter(L4.Node,"hue",0,(0,z4.getNumberValidator)(),Pp.Factory.afterSetFilter),Pp.Factory.addGetterSetter(L4.Node,"saturation",0,(0,z4.getNumberValidator)(),Pp.Factory.afterSetFilter),Pp.Factory.addGetterSetter(L4.Node,"luminance",0,(0,z4.getNumberValidator)(),Pp.Factory.afterSetFilter);const mre=function(t){var e=t.data,n=e.length,r=1,a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=this.luminance()*127,s,l=r*a*Math.cos(i*Math.PI/180),u=r*a*Math.sin(i*Math.PI/180),c=.299*r+.701*l+.167*u,d=.587*r-.587*l+.33*u,p=.114*r-.114*l-.497*u,f=.299*r-.299*l-.328*u,g=.587*r+.413*l+.035*u,y=.114*r-.114*l+.293*u,v=.299*r-.3*l+1.25*u,b=.587*r-.586*l-1.05*u,x=.114*r+.886*l-.2*u,w,S,C,E;for(s=0;s<n;s+=4)w=e[s+0],S=e[s+1],C=e[s+2],E=e[s+3],e[s+0]=c*w+d*S+p*C+o,e[s+1]=f*w+g*S+y*C+o,e[s+2]=v*w+b*S+x*C+o,e[s+3]=E};tv.HSL=mre;var nv={};Object.defineProperty(nv,"__esModule",{value:!0}),nv.HSV=void 0;const Fp=zt,B4=Kn,j4=tt,gre=function(t){var e=t.data,n=e.length,r=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o,s=r*a*Math.cos(i*Math.PI/180),l=r*a*Math.sin(i*Math.PI/180),u=.299*r+.701*s+.167*l,c=.587*r-.587*s+.33*l,d=.114*r-.114*s-.497*l,p=.299*r-.299*s-.328*l,f=.587*r+.413*s+.035*l,g=.114*r-.114*s+.293*l,y=.299*r-.3*s+1.25*l,v=.587*r-.586*s-1.05*l,b=.114*r+.886*s-.2*l,x,w,S,C;for(o=0;o<n;o+=4)x=e[o+0],w=e[o+1],S=e[o+2],C=e[o+3],e[o+0]=u*x+c*w+d*S,e[o+1]=p*x+f*w+g*S,e[o+2]=y*x+v*w+b*S,e[o+3]=C};nv.HSV=gre,Fp.Factory.addGetterSetter(B4.Node,"hue",0,(0,j4.getNumberValidator)(),Fp.Factory.afterSetFilter),Fp.Factory.addGetterSetter(B4.Node,"saturation",0,(0,j4.getNumberValidator)(),Fp.Factory.afterSetFilter),Fp.Factory.addGetterSetter(B4.Node,"value",0,(0,j4.getNumberValidator)(),Fp.Factory.afterSetFilter);var rv={};Object.defineProperty(rv,"__esModule",{value:!0}),rv.Invert=void 0;const yre=function(t){var e=t.data,n=e.length,r;for(r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};rv.Invert=yre;var av={};Object.defineProperty(av,"__esModule",{value:!0}),av.Kaleidoscope=void 0;const iv=zt,dF=Kn,pF=ir,hF=tt;var bre=function(t,e,n){var r=t.data,a=e.data,i=t.width,o=t.height,s=n.polarCenterX||i/2,l=n.polarCenterY||o/2,u,c,d,p=0,f=0,g=0,y=0,v,b=Math.sqrt(s*s+l*l);c=i-s,d=o-l,v=Math.sqrt(c*c+d*d),b=v>b?v:b;var x=o,w=i,S,C,E=360/w*Math.PI/180,R,T;for(C=0;C<w;C+=1)for(R=Math.sin(C*E),T=Math.cos(C*E),S=0;S<x;S+=1)c=Math.floor(s+b*S/x*T),d=Math.floor(l+b*S/x*R),u=(d*i+c)*4,p=r[u+0],f=r[u+1],g=r[u+2],y=r[u+3],u=(C+S*i)*4,a[u+0]=p,a[u+1]=f,a[u+2]=g,a[u+3]=y},vre=function(t,e,n){var r=t.data,a=e.data,i=t.width,o=t.height,s=n.polarCenterX||i/2,l=n.polarCenterY||o/2,u,c,d,p,f,g=0,y=0,v=0,b=0,x,w=Math.sqrt(s*s+l*l);c=i-s,d=o-l,x=Math.sqrt(c*c+d*d),w=x>w?x:w;var S=o,C=i,E,R,T=n.polarRotation||0,$,P;for(c=0;c<i;c+=1)for(d=0;d<o;d+=1)p=c-s,f=d-l,E=Math.sqrt(p*p+f*f)*S/w,R=(Math.atan2(f,p)*180/Math.PI+360+T)%360,R=R*C/360,$=Math.floor(R),P=Math.floor(E),u=(P*i+$)*4,g=r[u+0],y=r[u+1],v=r[u+2],b=r[u+3],u=(d*i+c)*4,a[u+0]=g,a[u+1]=y,a[u+2]=v,a[u+3]=b};const xre=function(t){var e=t.width,n=t.height,r,a,i,o,s,l,u,c,d,p,f=Math.round(this.kaleidoscopePower()),g=Math.round(this.kaleidoscopeAngle()),y=Math.floor(e*(g%360)/360);if(!(f<1)){var v=pF.Util.createCanvasElement();v.width=e,v.height=n;var b=v.getContext("2d").getImageData(0,0,e,n);pF.Util.releaseCanvas(v),bre(t,b,{polarCenterX:e/2,polarCenterY:n/2});for(var x=e/Math.pow(2,f);x<=8;)x=x*2,f-=1;x=Math.ceil(x);var w=x,S=0,C=w,E=1;for(y+x>e&&(S=w,C=0,E=-1),a=0;a<n;a+=1)for(r=S;r!==C;r+=E)i=Math.round(r+y)%e,d=(e*a+i)*4,s=b.data[d+0],l=b.data[d+1],u=b.data[d+2],c=b.data[d+3],p=(e*a+r)*4,b.data[p+0]=s,b.data[p+1]=l,b.data[p+2]=u,b.data[p+3]=c;for(a=0;a<n;a+=1)for(w=Math.floor(x),o=0;o<f;o+=1){for(r=0;r<w+1;r+=1)d=(e*a+r)*4,s=b.data[d+0],l=b.data[d+1],u=b.data[d+2],c=b.data[d+3],p=(e*a+w*2-r-1)*4,b.data[p+0]=s,b.data[p+1]=l,b.data[p+2]=u,b.data[p+3]=c;w*=2}vre(b,t,{polarRotation:0})}};av.Kaleidoscope=xre,iv.Factory.addGetterSetter(dF.Node,"kaleidoscopePower",2,(0,hF.getNumberValidator)(),iv.Factory.afterSetFilter),iv.Factory.addGetterSetter(dF.Node,"kaleidoscopeAngle",0,(0,hF.getNumberValidator)(),iv.Factory.afterSetFilter);var ov={};Object.defineProperty(ov,"__esModule",{value:!0}),ov.Mask=void 0;const fF=zt,wre=Kn,kre=tt;function sv(t,e,n){var r=(n*t.width+e)*4,a=[];return a.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),a}function vm(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function Sre(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function Cre(t,e){var n=sv(t,0,0),r=sv(t,t.width-1,0),a=sv(t,0,t.height-1),i=sv(t,t.width-1,t.height-1),o=e||10;if(vm(n,r)<o&&vm(r,i)<o&&vm(i,a)<o&&vm(a,n)<o){for(var s=Sre([r,n,i,a]),l=[],u=0;u<t.width*t.height;u++){var c=vm(s,[t.data[u*4],t.data[u*4+1],t.data[u*4+2]]);l[u]=c<o?0:255}return l}}function Ere(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function Nre(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,g=l+p-i;if(f>=0&&f<n&&g>=0&&g<e){var y=f*e+g,v=r[d*a+p];c+=t[y]*v}}o[u]=c===255*8?255:0}return o}function Tre(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,g=l+p-i;if(f>=0&&f<n&&g>=0&&g<e){var y=f*e+g,v=r[d*a+p];c+=t[y]*v}}o[u]=c>=255*4?255:0}return o}function Ire(t,e,n){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,g=l+p-i;if(f>=0&&f<n&&g>=0&&g<e){var y=f*e+g,v=r[d*a+p];c+=t[y]*v}}o[u]=c}return o}const _re=function(t){var e=this.threshold(),n=Cre(t,e);return n&&(n=Nre(n,t.width,t.height),n=Tre(n,t.width,t.height),n=Ire(n,t.width,t.height),Ere(t,n)),t};ov.Mask=_re,fF.Factory.addGetterSetter(wre.Node,"threshold",0,(0,kre.getNumberValidator)(),fF.Factory.afterSetFilter);var lv={};Object.defineProperty(lv,"__esModule",{value:!0}),lv.Noise=void 0;const mF=zt,Rre=Kn,$re=tt,Ore=function(t){var e=this.noise()*255,n=t.data,r=n.length,a=e/2,i;for(i=0;i<r;i+=4)n[i+0]+=a-2*a*Math.random(),n[i+1]+=a-2*a*Math.random(),n[i+2]+=a-2*a*Math.random()};lv.Noise=Ore,mF.Factory.addGetterSetter(Rre.Node,"noise",.2,(0,$re.getNumberValidator)(),mF.Factory.afterSetFilter);var uv={};Object.defineProperty(uv,"__esModule",{value:!0}),uv.Pixelate=void 0;const gF=zt,Mre=ir,Pre=Kn,Fre=tt,Are=function(t){var e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,a,i,o,s,l,u,c,d=Math.ceil(n/e),p=Math.ceil(r/e),f,g,y,v,b,x,w,S=t.data;if(e<=0){Mre.Util.error("pixelSize value can not be <= 0");return}for(b=0;b<d;b+=1)for(x=0;x<p;x+=1){for(s=0,l=0,u=0,c=0,f=b*e,g=f+e,y=x*e,v=y+e,w=0,a=f;a<g;a+=1)if(!(a>=n))for(i=y;i<v;i+=1)i>=r||(o=(n*i+a)*4,s+=S[o+0],l+=S[o+1],u+=S[o+2],c+=S[o+3],w+=1);for(s=s/w,l=l/w,u=u/w,c=c/w,a=f;a<g;a+=1)if(!(a>=n))for(i=y;i<v;i+=1)i>=r||(o=(n*i+a)*4,S[o+0]=s,S[o+1]=l,S[o+2]=u,S[o+3]=c)}};uv.Pixelate=Are,gF.Factory.addGetterSetter(Pre.Node,"pixelSize",8,(0,Fre.getNumberValidator)(),gF.Factory.afterSetFilter);var cv={};Object.defineProperty(cv,"__esModule",{value:!0}),cv.Posterize=void 0;const yF=zt,Dre=Kn,Lre=tt,zre=function(t){var e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,a=255/e,i;for(i=0;i<r;i+=1)n[i]=Math.floor(n[i]/a)*a};cv.Posterize=zre,yF.Factory.addGetterSetter(Dre.Node,"levels",.5,(0,Lre.getNumberValidator)(),yF.Factory.afterSetFilter);var dv={};Object.defineProperty(dv,"__esModule",{value:!0}),dv.RGB=void 0;const pv=zt,U4=Kn,Bre=tt,jre=function(t){var e=t.data,n=e.length,r=this.red(),a=this.green(),i=this.blue(),o,s;for(o=0;o<n;o+=4)s=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=s*r,e[o+1]=s*a,e[o+2]=s*i,e[o+3]=e[o+3]};dv.RGB=jre,pv.Factory.addGetterSetter(U4.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),pv.Factory.addGetterSetter(U4.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),pv.Factory.addGetterSetter(U4.Node,"blue",0,Bre.RGBComponent,pv.Factory.afterSetFilter);var hv={};Object.defineProperty(hv,"__esModule",{value:!0}),hv.RGBA=void 0;const xm=zt,fv=Kn,Ure=tt,Vre=function(t){var e=t.data,n=e.length,r=this.red(),a=this.green(),i=this.blue(),o=this.alpha(),s,l;for(s=0;s<n;s+=4)l=1-o,e[s]=r*o+e[s]*l,e[s+1]=a*o+e[s+1]*l,e[s+2]=i*o+e[s+2]*l};hv.RGBA=Vre,xm.Factory.addGetterSetter(fv.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),xm.Factory.addGetterSetter(fv.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),xm.Factory.addGetterSetter(fv.Node,"blue",0,Ure.RGBComponent,xm.Factory.afterSetFilter),xm.Factory.addGetterSetter(fv.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});var mv={};Object.defineProperty(mv,"__esModule",{value:!0}),mv.Sepia=void 0;const Wre=function(t){var e=t.data,n=e.length,r,a,i,o;for(r=0;r<n;r+=4)a=e[r+0],i=e[r+1],o=e[r+2],e[r+0]=Math.min(255,a*.393+i*.769+o*.189),e[r+1]=Math.min(255,a*.349+i*.686+o*.168),e[r+2]=Math.min(255,a*.272+i*.534+o*.131)};mv.Sepia=Wre;var gv={};Object.defineProperty(gv,"__esModule",{value:!0}),gv.Solarize=void 0;const Gre=function(t){var e=t.data,n=t.width,r=t.height,a=n*4,i=r;do{var o=(i-1)*a,s=n;do{var l=o+(s-1)*4,u=e[l],c=e[l+1],d=e[l+2];u>127&&(u=255-u),c>127&&(c=255-c),d>127&&(d=255-d),e[l]=u,e[l+1]=c,e[l+2]=d}while(--s)}while(--i)};gv.Solarize=Gre;var yv={};Object.defineProperty(yv,"__esModule",{value:!0}),yv.Threshold=void 0;const bF=zt,Hre=Kn,qre=tt,Kre=function(t){var e=this.threshold()*255,n=t.data,r=n.length,a;for(a=0;a<r;a+=1)n[a]=n[a]<e?0:255};yv.Threshold=Kre,bF.Factory.addGetterSetter(Hre.Node,"threshold",.5,(0,qre.getNumberValidator)(),bF.Factory.afterSetFilter),Object.defineProperty(mb,"__esModule",{value:!0}),mb.Konva=void 0;const vF=gb,Xre=Tb,Qre=Rb,Yre=Mb,Jre=Pb,Zre=Fb,xF=Op,eae=fm,tae=_p,nae=gm,rae=Lb,aae=zb,iae=Bb,oae=jb,sae=Dc,lae=Vb,uae=Wb,cae=Hb,dae=Kb,pae=Xb,hae=Qb,fae=Yb,mae=Zb,gae=ev,yae=tv,bae=nv,vae=rv,xae=av,wae=ov,kae=lv,Sae=uv,Cae=cv,Eae=dv,Nae=hv,Tae=mv,Iae=gv,_ae=yv;mb.Konva=vF.Konva.Util._assign(vF.Konva,{Arc:Xre.Arc,Arrow:Qre.Arrow,Circle:Yre.Circle,Ellipse:Jre.Ellipse,Image:Zre.Image,Label:xF.Label,Tag:xF.Tag,Line:eae.Line,Path:tae.Path,Rect:nae.Rect,RegularPolygon:rae.RegularPolygon,Ring:aae.Ring,Sprite:iae.Sprite,Star:oae.Star,Text:sae.Text,TextPath:lae.TextPath,Transformer:uae.Transformer,Wedge:cae.Wedge,Filters:{Blur:dae.Blur,Brighten:pae.Brighten,Contrast:hae.Contrast,Emboss:fae.Emboss,Enhance:mae.Enhance,Grayscale:gae.Grayscale,HSL:yae.HSL,HSV:bae.HSV,Invert:vae.Invert,Kaleidoscope:xae.Kaleidoscope,Mask:wae.Mask,Noise:kae.Noise,Pixelate:Sae.Pixelate,Posterize:Cae.Posterize,RGB:Eae.RGB,RGBA:Nae.RGBA,Sepia:Tae.Sepia,Solarize:Iae.Solarize,Threshold:_ae.Threshold}});var Rae=u4.exports;Object.defineProperty(Rae,"__esModule",{value:!0});const $ae=mb;u4.exports=$ae.Konva;var Oae=u4.exports;const wF=Zi(Oae);var V4={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=gb;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=gb;t.exports=r.Konva})(V4,V4.exports);var Mae=V4.exports;const wm=Zi(Mae);var kF={exports:{}};/**
* @license React
* react-reconciler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Pae=function(t){var e={},n=_,r=Yh,a=Object.assign;function i(h){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+h,k=1;k<arguments.length;k++)m+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,s=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),S=Symbol.iterator;function C(h){return h===null||typeof h!="object"?null:(h=S&&h[S]||h["@@iterator"],typeof h=="function"?h:null)}function E(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case l:return"Portal";case d:return"Profiler";case c:return"StrictMode";case y:return"Suspense";case v:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case f:return(h.displayName||"Context")+".Consumer";case p:return(h._context.displayName||"Context")+".Provider";case g:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case b:return m=h.displayName||null,m!==null?m:E(h.type)||"Memo";case x:m=h._payload,h=h._init;try{return E(h(m))}catch{}}return null}function R(h){var m=h.type;switch(h.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=m.render,h=h.displayName||h.name||"",m.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(m);case 8:return m===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function T(h){var m=h,k=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,m.flags&4098&&(k=m.return),h=m.return;while(h)}return m.tag===3?k:null}function $(h){if(T(h)!==h)throw Error(i(188))}function P(h){var m=h.alternate;if(!m){if(m=T(h),m===null)throw Error(i(188));return m!==h?null:h}for(var k=h,N=m;;){var I=k.return;if(I===null)break;var M=I.alternate;if(M===null){if(N=I.return,N!==null){k=N;continue}break}if(I.child===M.child){for(M=I.child;M;){if(M===k)return $(I),h;if(M===N)return $(I),m;M=M.sibling}throw Error(i(188))}if(k.return!==N.return)k=I,N=M;else{for(var G=!1,ue=I.child;ue;){if(ue===k){G=!0,k=I,N=M;break}if(ue===N){G=!0,N=I,k=M;break}ue=ue.sibling}if(!G){for(ue=M.child;ue;){if(ue===k){G=!0,k=M,N=I;break}if(ue===N){G=!0,N=M,k=I;break}ue=ue.sibling}if(!G)throw Error(i(189))}}if(k.alternate!==N)throw Error(i(190))}if(k.tag!==3)throw Error(i(188));return k.stateNode.current===k?h:m}function D(h){return h=P(h),h!==null?B(h):null}function B(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var m=B(h);if(m!==null)return m;h=h.sibling}return null}function z(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var m=z(h);if(m!==null)return m}h=h.sibling}return null}var q=Array.isArray,Y=t.getPublicInstance,J=t.getRootHostContext,H=t.getChildHostContext,L=t.prepareForCommit,Q=t.resetAfterCommit,Z=t.createInstance,te=t.appendInitialChild,oe=t.finalizeInitialChildren,he=t.prepareUpdate,ae=t.shouldSetTextContent,de=t.createTextInstance,ke=t.scheduleTimeout,X=t.cancelTimeout,se=t.noTimeout,pe=t.isPrimaryRenderer,Ne=t.supportsMutation,Se=t.supportsPersistence,Te=t.supportsHydration,Pe=t.getInstanceFromNode,We=t.preparePortalMount,$e=t.getCurrentEventPriority,lt=t.detachDeletedInstance,Je=t.supportsMicrotasks,Ze=t.scheduleMicrotask,Ve=t.supportsTestSelectors,Vt=t.findFiberRoot,$t=t.getBoundingRect,Wt=t.getTextContent,Gt=t.isHiddenSubtree,Ot=t.matchAccessibilityRole,wt=t.setFocusIfFocusable,ln=t.setupIntersectionObserver,hn=t.appendChild,br=t.appendChildToContainer,yn=t.commitTextUpdate,Jn=t.commitMount,ui=t.commitUpdate,Qa=t.insertBefore,un=t.insertInContainerBefore,la=t.removeChild,Ya=t.removeChildFromContainer,Ta=t.resetTextContent,Co=t.hideInstance,Kr=t.hideTextInstance,ts=t.unhideInstance,or=t.unhideTextInstance,Vn=t.clearContainer,dt=t.cloneInstance,le=t.createContainerChildSet,fe=t.appendChildToContainerChildSet,xe=t.finalizeContainerChildren,_e=t.replaceContainerChildren,ze=t.cloneHiddenInstance,it=t.cloneHiddenTextInstance,nt=t.canHydrateInstance,at=t.canHydrateTextInstance,Qe=t.canHydrateSuspenseInstance,bt=t.isSuspenseInstancePending,cn=t.isSuspenseInstanceFallback,ft=t.getSuspenseInstanceFallbackErrorDetails,Zt=t.registerSuspenseInstanceRetry,bn=t.getNextHydratableSibling,Fr=t.getFirstHydratableChild,sr=t.getFirstHydratableChildWithinContainer,vr=t.getFirstHydratableChildWithinSuspenseInstance,ns=t.hydrateInstance,Gi=t.hydrateTextInstance,Ia=t.hydrateSuspenseInstance,Eo=t.getNextHydratableInstanceAfterSuspenseInstance,Xu=t.commitHydratedContainer,Qu=t.commitHydratedSuspenseInstance,$l=t.clearSuspenseBoundary,rs=t.clearSuspenseBoundaryFromContainer,No=t.shouldDeleteUnhydratedTailInstances,rn=t.didNotMatchHydratedContainerTextInstance,fn=t.didNotMatchHydratedTextInstance,Er;function Dt(h){if(Er===void 0)try{throw Error()}catch(k){var m=k.stack.trim().match(/\n( *(at )?)/);Er=m&&m[1]||""}return`
`+Er+h}var Ol=!1;function Rh(h,m){if(!h||Ol)return"";Ol=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Oe){var N=Oe}Reflect.construct(h,[],m)}else{try{m.call()}catch(Oe){N=Oe}h.call(m.prototype)}else{try{throw Error()}catch(Oe){N=Oe}h()}}catch(Oe){if(Oe&&N&&typeof Oe.stack=="string"){for(var I=Oe.stack.split(`
`),M=N.stack.split(`
`),G=I.length-1,ue=M.length-1;1<=G&&0<=ue&&I[G]!==M[ue];)ue--;for(;1<=G&&0<=ue;G--,ue--)if(I[G]!==M[ue]){if(G!==1||ue!==1)do if(G--,ue--,0>ue||I[G]!==M[ue]){var ye=`
`+I[G].replace(" at new "," at ");return h.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",h.displayName)),ye}while(1<=G&&0<=ue);break}}}finally{Ol=!1,Error.prepareStackTrace=k}return(h=h?h.displayName||h.name:"")?Dt(h):""}var nk=Object.prototype.hasOwnProperty,Yu=[],Ml=-1;function Hi(h){return{current:h}}function En(h){0>Ml||(h.current=Yu[Ml],Yu[Ml]=null,Ml--)}function vn(h,m){Ml++,Yu[Ml]=h.current,h.current=m}var qi={},Xr=Hi(qi),_a=Hi(!1),As=qi;function Pl(h,m){var k=h.type.contextTypes;if(!k)return qi;var N=h.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===m)return N.__reactInternalMemoizedMaskedChildContext;var I={},M;for(M in k)I[M]=m[M];return N&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=m,h.__reactInternalMemoizedMaskedChildContext=I),I}function Ra(h){return h=h.childContextTypes,h!=null}function kd(){En(_a),En(Xr)}function M0(h,m,k){if(Xr.current!==qi)throw Error(i(168));vn(Xr,m),vn(_a,k)}function Wn(h,m,k){var N=h.stateNode;if(m=m.childContextTypes,typeof N.getChildContext!="function")return k;N=N.getChildContext();for(var I in N)if(!(I in m))throw Error(i(108,R(h)||"Unknown",I));return a({},k,N)}function as(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||qi,As=Xr.current,vn(Xr,h),vn(_a,_a.current),!0}function Ju(h,m,k){var N=h.stateNode;if(!N)throw Error(i(169));k?(h=Wn(h,m,As),N.__reactInternalMemoizedMergedChildContext=h,En(_a),En(Xr),vn(Xr,h)):En(_a),vn(_a,k)}var _i=Math.clz32?Math.clz32:rk,P0=Math.log,$h=Math.LN2;function rk(h){return h>>>=0,h===0?32:31-(P0(h)/$h|0)|0}var Sd=64,Ds=4194304;function Zu(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Ls(h,m){var k=h.pendingLanes;if(k===0)return 0;var N=0,I=h.suspendedLanes,M=h.pingedLanes,G=k&268435455;if(G!==0){var ue=G&~I;ue!==0?N=Zu(ue):(M&=G,M!==0&&(N=Zu(M)))}else G=k&~I,G!==0?N=Zu(G):M!==0&&(N=Zu(M));if(N===0)return 0;if(m!==0&&m!==N&&!(m&I)&&(I=N&-N,M=m&-m,I>=M||I===16&&(M&4194240)!==0))return m;if(N&4&&(N|=k&16),m=h.entangledLanes,m!==0)for(h=h.entanglements,m&=N;0<m;)k=31-_i(m),I=1<<k,N|=h[k],m&=~I;return N}function A(h,m){switch(h){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W(h,m){for(var k=h.suspendedLanes,N=h.pingedLanes,I=h.expirationTimes,M=h.pendingLanes;0<M;){var G=31-_i(M),ue=1<<G,ye=I[G];ye===-1?(!(ue&k)||ue&N)&&(I[G]=A(ue,m)):ye<=m&&(h.expiredLanes|=ue),M&=~ue}}function ee(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function ie(){var h=Sd;return Sd<<=1,!(Sd&4194240)&&(Sd=64),h}function ve(h){for(var m=[],k=0;31>k;k++)m.push(h);return m}function Ee(h,m,k){h.pendingLanes|=m,m!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,m=31-_i(m),h[m]=k}function Ae(h,m){var k=h.pendingLanes&~m;h.pendingLanes=m,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=m,h.mutableReadLanes&=m,h.entangledLanes&=m,m=h.entanglements;var N=h.eventTimes;for(h=h.expirationTimes;0<k;){var I=31-_i(k),M=1<<I;m[I]=0,N[I]=-1,h[I]=-1,k&=~M}}function Me(h,m){var k=h.entangledLanes|=m;for(h=h.entanglements;k;){var N=31-_i(k),I=1<<N;I&m|h[N]&m&&(h[N]|=m),k&=~I}}var Re=0;function Ue(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var vt=r.unstable_scheduleCallback,ot=r.unstable_cancelCallback,Pt=r.unstable_shouldYield,St=r.unstable_requestPaint,Ye=r.unstable_now,pt=r.unstable_ImmediatePriority,mt=r.unstable_UserBlockingPriority,st=r.unstable_NormalPriority,Ct=r.unstable_IdlePriority,ct=null,kt=null;function lr(h){if(kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(ct,h,void 0,(h.current.flags&128)===128)}catch{}}function ci(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var Ht=typeof Object.is=="function"?Object.is:ci,Gn=null,Ln=!1,$a=!1;function Ja(h){Gn===null?Gn=[h]:Gn.push(h)}function To(h){Ln=!0,Ja(h)}function Nr(){if(!$a&&Gn!==null){$a=!0;var h=0,m=Re;try{var k=Gn;for(Re=1;h<k.length;h++){var N=k[h];do N=N(!0);while(N!==null)}Gn=null,Ln=!1}catch(I){throw Gn!==null&&(Gn=Gn.slice(h+1)),vt(pt,Nr),I}finally{Re=m,$a=!1}}return null}var gt=[],Mt=0,Tr=null,Ir=0,mn=[],Mn=0,ua=null,Io=1,ca="";function zs(h,m){gt[Mt++]=Ir,gt[Mt++]=Tr,Tr=h,Ir=m}function Oh(h,m,k){mn[Mn++]=Io,mn[Mn++]=ca,mn[Mn++]=ua,ua=h;var N=Io;h=ca;var I=32-_i(N)-1;N&=~(1<<I),k+=1;var M=32-_i(m)+I;if(30<M){var G=I-I%5;M=(N&(1<<G)-1).toString(32),N>>=G,I-=G,Io=1<<32-_i(m)+I|k<<I|N,ca=M+h}else Io=1<<M|k<<I|N,ca=h}function Za(h){h.return!==null&&(zs(h,1),Oh(h,1,0))}function Bs(h){for(;h===Tr;)Tr=gt[--Mt],gt[Mt]=null,Ir=gt[--Mt],gt[Mt]=null;for(;h===ua;)ua=mn[--Mn],mn[Mn]=null,ca=mn[--Mn],mn[Mn]=null,Io=mn[--Mn],mn[Mn]=null}var ur=null,da=null,an=!1,js=!1,_o=null;function J5(h,m){var k=Ji(5,null,null,0);k.elementType="DELETED",k.stateNode=m,k.return=h,m=h.deletions,m===null?(h.deletions=[k],h.flags|=16):m.push(k)}function Z5(h,m){switch(h.tag){case 5:return m=nt(m,h.type,h.pendingProps),m!==null?(h.stateNode=m,ur=h,da=Fr(m),!0):!1;case 6:return m=at(m,h.pendingProps),m!==null?(h.stateNode=m,ur=h,da=null,!0):!1;case 13:if(m=Qe(m),m!==null){var k=ua!==null?{id:Io,overflow:ca}:null;return h.memoizedState={dehydrated:m,treeContext:k,retryLane:1073741824},k=Ji(18,null,null,0),k.stateNode=m,k.return=h,h.child=k,ur=h,da=null,!0}return!1;default:return!1}}function ak(h){return(h.mode&1)!==0&&(h.flags&128)===0}function ik(h){if(an){var m=da;if(m){var k=m;if(!Z5(h,m)){if(ak(h))throw Error(i(418));m=bn(k);var N=ur;m&&Z5(h,m)?J5(N,k):(h.flags=h.flags&-4097|2,an=!1,ur=h)}}else{if(ak(h))throw Error(i(418));h.flags=h.flags&-4097|2,an=!1,ur=h}}}function e_(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;ur=h}function F0(h){if(!Te||h!==ur)return!1;if(!an)return e_(h),an=!0,!1;if(h.tag!==3&&(h.tag!==5||No(h.type)&&!ae(h.type,h.memoizedProps))){var m=da;if(m){if(ak(h))throw t_(),Error(i(418));for(;m;)J5(h,m),m=bn(m)}}if(e_(h),h.tag===13){if(!Te)throw Error(i(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));da=Eo(h)}else da=ur?bn(h.stateNode):null;return!0}function t_(){for(var h=da;h;)h=bn(h)}function Cd(){Te&&(da=ur=null,js=an=!1)}function ok(h){_o===null?_o=[h]:_o.push(h)}var rV=o.ReactCurrentBatchConfig;function A0(h,m){if(Ht(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var k=Object.keys(h),N=Object.keys(m);if(k.length!==N.length)return!1;for(N=0;N<k.length;N++){var I=k[N];if(!nk.call(m,I)||!Ht(h[I],m[I]))return!1}return!0}function aV(h){switch(h.tag){case 5:return Dt(h.type);case 16:return Dt("Lazy");case 13:return Dt("Suspense");case 19:return Dt("SuspenseList");case 0:case 2:case 15:return h=Rh(h.type,!1),h;case 11:return h=Rh(h.type.render,!1),h;case 1:return h=Rh(h.type,!0),h;default:return""}}function Ro(h,m){if(h&&h.defaultProps){m=a({},m),h=h.defaultProps;for(var k in h)m[k]===void 0&&(m[k]=h[k]);return m}return m}var D0=Hi(null),L0=null,Ed=null,sk=null;function lk(){sk=Ed=L0=null}function n_(h,m,k){pe?(vn(D0,m._currentValue),m._currentValue=k):(vn(D0,m._currentValue2),m._currentValue2=k)}function uk(h){var m=D0.current;En(D0),pe?h._currentValue=m:h._currentValue2=m}function ck(h,m,k){for(;h!==null;){var N=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,N!==null&&(N.childLanes|=m)):N!==null&&(N.childLanes&m)!==m&&(N.childLanes|=m),h===k)break;h=h.return}}function Nd(h,m){L0=h,sk=Ed=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&m&&(di=!0),h.firstContext=null)}function Ki(h){var m=pe?h._currentValue:h._currentValue2;if(sk!==h)if(h={context:h,memoizedValue:m,next:null},Ed===null){if(L0===null)throw Error(i(308));Ed=h,L0.dependencies={lanes:0,firstContext:h}}else Ed=Ed.next=h;return m}var ec=null;function dk(h){ec===null?ec=[h]:ec.push(h)}function r_(h,m,k,N){var I=m.interleaved;return I===null?(k.next=k,dk(m)):(k.next=I.next,I.next=k),m.interleaved=k,is(h,N)}function is(h,m){h.lanes|=m;var k=h.alternate;for(k!==null&&(k.lanes|=m),k=h,h=h.return;h!==null;)h.childLanes|=m,k=h.alternate,k!==null&&(k.childLanes|=m),k=h,h=h.return;return k.tag===3?k.stateNode:null}var Fl=!1;function pk(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a_(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Us(h,m){return{eventTime:h,lane:m,tag:0,payload:null,callback:null,next:null}}function Al(h,m,k){var N=h.updateQueue;if(N===null)return null;if(N=N.shared,jt&2){var I=N.pending;return I===null?m.next=m:(m.next=I.next,I.next=m),N.pending=m,is(h,k)}return I=N.interleaved,I===null?(m.next=m,dk(N)):(m.next=I.next,I.next=m),N.interleaved=m,is(h,k)}function z0(h,m,k){if(m=m.updateQueue,m!==null&&(m=m.shared,(k&4194240)!==0)){var N=m.lanes;N&=h.pendingLanes,k|=N,m.lanes=k,Me(h,k)}}function i_(h,m){var k=h.updateQueue,N=h.alternate;if(N!==null&&(N=N.updateQueue,k===N)){var I=null,M=null;if(k=k.firstBaseUpdate,k!==null){do{var G={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};M===null?I=M=G:M=M.next=G,k=k.next}while(k!==null);M===null?I=M=m:M=M.next=m}else I=M=m;k={baseState:N.baseState,firstBaseUpdate:I,lastBaseUpdate:M,shared:N.shared,effects:N.effects},h.updateQueue=k;return}h=k.lastBaseUpdate,h===null?k.firstBaseUpdate=m:h.next=m,k.lastBaseUpdate=m}function B0(h,m,k,N){var I=h.updateQueue;Fl=!1;var M=I.firstBaseUpdate,G=I.lastBaseUpdate,ue=I.shared.pending;if(ue!==null){I.shared.pending=null;var ye=ue,Oe=ye.next;ye.next=null,G===null?M=Oe:G.next=Oe,G=ye;var Xe=h.alternate;Xe!==null&&(Xe=Xe.updateQueue,ue=Xe.lastBaseUpdate,ue!==G&&(ue===null?Xe.firstBaseUpdate=Oe:ue.next=Oe,Xe.lastBaseUpdate=ye))}if(M!==null){var It=I.baseState;G=0,Xe=Oe=ye=null,ue=M;do{var Be=ue.lane,zn=ue.eventTime;if((N&Be)===Be){Xe!==null&&(Xe=Xe.next={eventTime:zn,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var Nn=h,fi=ue;switch(Be=m,zn=k,fi.tag){case 1:if(Nn=fi.payload,typeof Nn=="function"){It=Nn.call(zn,It,Be);break e}It=Nn;break e;case 3:Nn.flags=Nn.flags&-65537|128;case 0:if(Nn=fi.payload,Be=typeof Nn=="function"?Nn.call(zn,It,Be):Nn,Be==null)break e;It=a({},It,Be);break e;case 2:Fl=!0}}ue.callback!==null&&ue.lane!==0&&(h.flags|=64,Be=I.effects,Be===null?I.effects=[ue]:Be.push(ue))}else zn={eventTime:zn,lane:Be,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},Xe===null?(Oe=Xe=zn,ye=It):Xe=Xe.next=zn,G|=Be;if(ue=ue.next,ue===null){if(ue=I.shared.pending,ue===null)break;Be=ue,ue=Be.next,Be.next=null,I.lastBaseUpdate=Be,I.shared.pending=null}}while(!0);if(Xe===null&&(ye=It),I.baseState=ye,I.firstBaseUpdate=Oe,I.lastBaseUpdate=Xe,m=I.shared.interleaved,m!==null){I=m;do G|=I.lane,I=I.next;while(I!==m)}else M===null&&(I.shared.lanes=0);nc|=G,h.lanes=G,h.memoizedState=It}}function o_(h,m,k){if(h=m.effects,m.effects=null,h!==null)for(m=0;m<h.length;m++){var N=h[m],I=N.callback;if(I!==null){if(N.callback=null,N=k,typeof I!="function")throw Error(i(191,I));I.call(N)}}}var s_=new n.Component().refs;function hk(h,m,k,N){m=h.memoizedState,k=k(N,m),k=k==null?m:a({},m,k),h.memoizedState=k,h.lanes===0&&(h.updateQueue.baseState=k)}var j0={isMounted:function(h){return(h=h._reactInternals)?T(h)===h:!1},enqueueSetState:function(h,m,k){h=h._reactInternals;var N=Fa(),I=zl(h),M=Us(N,I);M.payload=m,k!=null&&(M.callback=k),m=Al(h,M,I),m!==null&&(Yi(m,h,I,N),z0(m,h,I))},enqueueReplaceState:function(h,m,k){h=h._reactInternals;var N=Fa(),I=zl(h),M=Us(N,I);M.tag=1,M.payload=m,k!=null&&(M.callback=k),m=Al(h,M,I),m!==null&&(Yi(m,h,I,N),z0(m,h,I))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var k=Fa(),N=zl(h),I=Us(k,N);I.tag=2,m!=null&&(I.callback=m),m=Al(h,I,N),m!==null&&(Yi(m,h,N,k),z0(m,h,N))}};function l_(h,m,k,N,I,M,G){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(N,M,G):m.prototype&&m.prototype.isPureReactComponent?!A0(k,N)||!A0(I,M):!0}function u_(h,m,k){var N=!1,I=qi,M=m.contextType;return typeof M=="object"&&M!==null?M=Ki(M):(I=Ra(m)?As:Xr.current,N=m.contextTypes,M=(N=N!=null)?Pl(h,I):qi),m=new m(k,M),h.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=j0,h.stateNode=m,m._reactInternals=h,N&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=I,h.__reactInternalMemoizedMaskedChildContext=M),m}function c_(h,m,k,N){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(k,N),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(k,N),m.state!==h&&j0.enqueueReplaceState(m,m.state,null)}function fk(h,m,k,N){var I=h.stateNode;I.props=k,I.state=h.memoizedState,I.refs=s_,pk(h);var M=m.contextType;typeof M=="object"&&M!==null?I.context=Ki(M):(M=Ra(m)?As:Xr.current,I.context=Pl(h,M)),I.state=h.memoizedState,M=m.getDerivedStateFromProps,typeof M=="function"&&(hk(h,m,M,k),I.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(m=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),m!==I.state&&j0.enqueueReplaceState(I,I.state,null),B0(h,k,I,N),I.state=h.memoizedState),typeof I.componentDidMount=="function"&&(h.flags|=4194308)}function Mh(h,m,k){if(h=k.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(i(309));var N=k.stateNode}if(!N)throw Error(i(147,h));var I=N,M=""+h;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===M?m.ref:(m=function(G){var ue=I.refs;ue===s_&&(ue=I.refs={}),G===null?delete ue[M]:ue[M]=G},m._stringRef=M,m)}if(typeof h!="string")throw Error(i(284));if(!k._owner)throw Error(i(290,h))}return h}function U0(h,m){throw h=Object.prototype.toString.call(m),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h))}function d_(h){var m=h._init;return m(h._payload)}function p_(h){function m(ge,ce){if(h){var we=ge.deletions;we===null?(ge.deletions=[ce],ge.flags|=16):we.push(ce)}}function k(ge,ce){if(!h)return null;for(;ce!==null;)m(ge,ce),ce=ce.sibling;return null}function N(ge,ce){for(ge=new Map;ce!==null;)ce.key!==null?ge.set(ce.key,ce):ge.set(ce.index,ce),ce=ce.sibling;return ge}function I(ge,ce){return ge=jl(ge,ce),ge.index=0,ge.sibling=null,ge}function M(ge,ce,we){return ge.index=we,h?(we=ge.alternate,we!==null?(we=we.index,we<ce?(ge.flags|=2,ce):we):(ge.flags|=2,ce)):(ge.flags|=1048576,ce)}function G(ge){return h&&ge.alternate===null&&(ge.flags|=2),ge}function ue(ge,ce,we,je){return ce===null||ce.tag!==6?(ce=eS(we,ge.mode,je),ce.return=ge,ce):(ce=I(ce,we),ce.return=ge,ce)}function ye(ge,ce,we,je){var ht=we.type;return ht===u?Xe(ge,ce,we.props.children,je,we.key):ce!==null&&(ce.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===x&&d_(ht)===ce.type)?(je=I(ce,we.props),je.ref=Mh(ge,ce,we),je.return=ge,je):(je=f1(we.type,we.key,we.props,null,ge.mode,je),je.ref=Mh(ge,ce,we),je.return=ge,je)}function Oe(ge,ce,we,je){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==we.containerInfo||ce.stateNode.implementation!==we.implementation?(ce=tS(we,ge.mode,je),ce.return=ge,ce):(ce=I(ce,we.children||[]),ce.return=ge,ce)}function Xe(ge,ce,we,je,ht){return ce===null||ce.tag!==7?(ce=oc(we,ge.mode,je,ht),ce.return=ge,ce):(ce=I(ce,we),ce.return=ge,ce)}function It(ge,ce,we){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=eS(""+ce,ge.mode,we),ce.return=ge,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case s:return we=f1(ce.type,ce.key,ce.props,null,ge.mode,we),we.ref=Mh(ge,null,ce),we.return=ge,we;case l:return ce=tS(ce,ge.mode,we),ce.return=ge,ce;case x:var je=ce._init;return It(ge,je(ce._payload),we)}if(q(ce)||C(ce))return ce=oc(ce,ge.mode,we,null),ce.return=ge,ce;U0(ge,ce)}return null}function Be(ge,ce,we,je){var ht=ce!==null?ce.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return ht!==null?null:ue(ge,ce,""+we,je);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case s:return we.key===ht?ye(ge,ce,we,je):null;case l:return we.key===ht?Oe(ge,ce,we,je):null;case x:return ht=we._init,Be(ge,ce,ht(we._payload),je)}if(q(we)||C(we))return ht!==null?null:Xe(ge,ce,we,je,null);U0(ge,we)}return null}function zn(ge,ce,we,je,ht){if(typeof je=="string"&&je!==""||typeof je=="number")return ge=ge.get(we)||null,ue(ce,ge,""+je,ht);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case s:return ge=ge.get(je.key===null?we:je.key)||null,ye(ce,ge,je,ht);case l:return ge=ge.get(je.key===null?we:je.key)||null,Oe(ce,ge,je,ht);case x:var Ft=je._init;return zn(ge,ce,we,Ft(je._payload),ht)}if(q(je)||C(je))return ge=ge.get(we)||null,Xe(ce,ge,je,ht,null);U0(ce,je)}return null}function Nn(ge,ce,we,je){for(var ht=null,Ft=null,_t=ce,on=ce=0,Jr=null;_t!==null&&on<we.length;on++){_t.index>on?(Jr=_t,_t=null):Jr=_t.sibling;var sn=Be(ge,_t,we[on],je);if(sn===null){_t===null&&(_t=Jr);break}h&&_t&&sn.alternate===null&&m(ge,_t),ce=M(sn,ce,on),Ft===null?ht=sn:Ft.sibling=sn,Ft=sn,_t=Jr}if(on===we.length)return k(ge,_t),an&&zs(ge,on),ht;if(_t===null){for(;on<we.length;on++)_t=It(ge,we[on],je),_t!==null&&(ce=M(_t,ce,on),Ft===null?ht=_t:Ft.sibling=_t,Ft=_t);return an&&zs(ge,on),ht}for(_t=N(ge,_t);on<we.length;on++)Jr=zn(_t,ge,on,we[on],je),Jr!==null&&(h&&Jr.alternate!==null&&_t.delete(Jr.key===null?on:Jr.key),ce=M(Jr,ce,on),Ft===null?ht=Jr:Ft.sibling=Jr,Ft=Jr);return h&&_t.forEach(function(Ul){return m(ge,Ul)}),an&&zs(ge,on),ht}function fi(ge,ce,we,je){var ht=C(we);if(typeof ht!="function")throw Error(i(150));if(we=ht.call(we),we==null)throw Error(i(151));for(var Ft=ht=null,_t=ce,on=ce=0,Jr=null,sn=we.next();_t!==null&&!sn.done;on++,sn=we.next()){_t.index>on?(Jr=_t,_t=null):Jr=_t.sibling;var Ul=Be(ge,_t,sn.value,je);if(Ul===null){_t===null&&(_t=Jr);break}h&&_t&&Ul.alternate===null&&m(ge,_t),ce=M(Ul,ce,on),Ft===null?ht=Ul:Ft.sibling=Ul,Ft=Ul,_t=Jr}if(sn.done)return k(ge,_t),an&&zs(ge,on),ht;if(_t===null){for(;!sn.done;on++,sn=we.next())sn=It(ge,sn.value,je),sn!==null&&(ce=M(sn,ce,on),Ft===null?ht=sn:Ft.sibling=sn,Ft=sn);return an&&zs(ge,on),ht}for(_t=N(ge,_t);!sn.done;on++,sn=we.next())sn=zn(_t,ge,on,sn.value,je),sn!==null&&(h&&sn.alternate!==null&&_t.delete(sn.key===null?on:sn.key),ce=M(sn,ce,on),Ft===null?ht=sn:Ft.sibling=sn,Ft=sn);return h&&_t.forEach(function(PV){return m(ge,PV)}),an&&zs(ge,on),ht}function Gs(ge,ce,we,je){if(typeof we=="object"&&we!==null&&we.type===u&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case s:e:{for(var ht=we.key,Ft=ce;Ft!==null;){if(Ft.key===ht){if(ht=we.type,ht===u){if(Ft.tag===7){k(ge,Ft.sibling),ce=I(Ft,we.props.children),ce.return=ge,ge=ce;break e}}else if(Ft.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===x&&d_(ht)===Ft.type){k(ge,Ft.sibling),ce=I(Ft,we.props),ce.ref=Mh(ge,Ft,we),ce.return=ge,ge=ce;break e}k(ge,Ft);break}else m(ge,Ft);Ft=Ft.sibling}we.type===u?(ce=oc(we.props.children,ge.mode,je,we.key),ce.return=ge,ge=ce):(je=f1(we.type,we.key,we.props,null,ge.mode,je),je.ref=Mh(ge,ce,we),je.return=ge,ge=je)}return G(ge);case l:e:{for(Ft=we.key;ce!==null;){if(ce.key===Ft)if(ce.tag===4&&ce.stateNode.containerInfo===we.containerInfo&&ce.stateNode.implementation===we.implementation){k(ge,ce.sibling),ce=I(ce,we.children||[]),ce.return=ge,ge=ce;break e}else{k(ge,ce);break}else m(ge,ce);ce=ce.sibling}ce=tS(we,ge.mode,je),ce.return=ge,ge=ce}return G(ge);case x:return Ft=we._init,Gs(ge,ce,Ft(we._payload),je)}if(q(we))return Nn(ge,ce,we,je);if(C(we))return fi(ge,ce,we,je);U0(ge,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,ce!==null&&ce.tag===6?(k(ge,ce.sibling),ce=I(ce,we),ce.return=ge,ge=ce):(k(ge,ce),ce=eS(we,ge.mode,je),ce.return=ge,ge=ce),G(ge)):k(ge,ce)}return Gs}var Td=p_(!0),h_=p_(!1),Ph={},Xi=Hi(Ph),Fh=Hi(Ph),Id=Hi(Ph);function os(h){if(h===Ph)throw Error(i(174));return h}function mk(h,m){vn(Id,m),vn(Fh,h),vn(Xi,Ph),h=J(m),En(Xi),vn(Xi,h)}function _d(){En(Xi),En(Fh),En(Id)}function f_(h){var m=os(Id.current),k=os(Xi.current);m=H(k,h.type,m),k!==m&&(vn(Fh,h),vn(Xi,m))}function gk(h){Fh.current===h&&(En(Xi),En(Fh))}var Zn=Hi(0);function V0(h){for(var m=h;m!==null;){if(m.tag===13){var k=m.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||bt(k)||cn(k)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var yk=[];function bk(){for(var h=0;h<yk.length;h++){var m=yk[h];pe?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}yk.length=0}var W0=o.ReactCurrentDispatcher,vk=o.ReactCurrentBatchConfig,tc=0,er=null,Ar=null,Qr=null,G0=!1,Ah=!1,Dh=0,iV=0;function Oa(){throw Error(i(321))}function xk(h,m){if(m===null)return!1;for(var k=0;k<m.length&&k<h.length;k++)if(!Ht(h[k],m[k]))return!1;return!0}function wk(h,m,k,N,I,M){if(tc=M,er=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,W0.current=h===null||h.memoizedState===null?uV:cV,h=k(N,I),Ah){M=0;do{if(Ah=!1,Dh=0,25<=M)throw Error(i(301));M+=1,Qr=Ar=null,m.updateQueue=null,W0.current=dV,h=k(N,I)}while(Ah)}if(W0.current=K0,m=Ar!==null&&Ar.next!==null,tc=0,Qr=Ar=er=null,G0=!1,m)throw Error(i(300));return h}function kk(){var h=Dh!==0;return Dh=0,h}function ss(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qr===null?er.memoizedState=Qr=h:Qr=Qr.next=h,Qr}function Qi(){if(Ar===null){var h=er.alternate;h=h!==null?h.memoizedState:null}else h=Ar.next;var m=Qr===null?er.memoizedState:Qr.next;if(m!==null)Qr=m,Ar=h;else{if(h===null)throw Error(i(310));Ar=h,h={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},Qr===null?er.memoizedState=Qr=h:Qr=Qr.next=h}return Qr}function Lh(h,m){return typeof m=="function"?m(h):m}function Sk(h){var m=Qi(),k=m.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=h;var N=Ar,I=N.baseQueue,M=k.pending;if(M!==null){if(I!==null){var G=I.next;I.next=M.next,M.next=G}N.baseQueue=I=M,k.pending=null}if(I!==null){M=I.next,N=N.baseState;var ue=G=null,ye=null,Oe=M;do{var Xe=Oe.lane;if((tc&Xe)===Xe)ye!==null&&(ye=ye.next={lane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),N=Oe.hasEagerState?Oe.eagerState:h(N,Oe.action);else{var It={lane:Xe,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null};ye===null?(ue=ye=It,G=N):ye=ye.next=It,er.lanes|=Xe,nc|=Xe}Oe=Oe.next}while(Oe!==null&&Oe!==M);ye===null?G=N:ye.next=ue,Ht(N,m.memoizedState)||(di=!0),m.memoizedState=N,m.baseState=G,m.baseQueue=ye,k.lastRenderedState=N}if(h=k.interleaved,h!==null){I=h;do M=I.lane,er.lanes|=M,nc|=M,I=I.next;while(I!==h)}else I===null&&(k.lanes=0);return[m.memoizedState,k.dispatch]}function Ck(h){var m=Qi(),k=m.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=h;var N=k.dispatch,I=k.pending,M=m.memoizedState;if(I!==null){k.pending=null;var G=I=I.next;do M=h(M,G.action),G=G.next;while(G!==I);Ht(M,m.memoizedState)||(di=!0),m.memoizedState=M,m.baseQueue===null&&(m.baseState=M),k.lastRenderedState=M}return[M,N]}function m_(){}function g_(h,m){var k=er,N=Qi(),I=m(),M=!Ht(N.memoizedState,I);if(M&&(N.memoizedState=I,di=!0),N=N.queue,Ek(v_.bind(null,k,N,h),[h]),N.getSnapshot!==m||M||Qr!==null&&Qr.memoizedState.tag&1){if(k.flags|=2048,zh(9,b_.bind(null,k,N,I,m),void 0,null),Yr===null)throw Error(i(349));tc&30||y_(k,m,I)}return I}function y_(h,m,k){h.flags|=16384,h={getSnapshot:m,value:k},m=er.updateQueue,m===null?(m={lastEffect:null,stores:null},er.updateQueue=m,m.stores=[h]):(k=m.stores,k===null?m.stores=[h]:k.push(h))}function b_(h,m,k,N){m.value=k,m.getSnapshot=N,x_(m)&&w_(h)}function v_(h,m,k){return k(function(){x_(m)&&w_(h)})}function x_(h){var m=h.getSnapshot;h=h.value;try{var k=m();return!Ht(h,k)}catch{return!0}}function w_(h){var m=is(h,1);m!==null&&Yi(m,h,1,-1)}function k_(h){var m=ss();return typeof h=="function"&&(h=h()),m.memoizedState=m.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lh,lastRenderedState:h},m.queue=h,h=h.dispatch=lV.bind(null,er,h),[m.memoizedState,h]}function zh(h,m,k,N){return h={tag:h,create:m,destroy:k,deps:N,next:null},m=er.updateQueue,m===null?(m={lastEffect:null,stores:null},er.updateQueue=m,m.lastEffect=h.next=h):(k=m.lastEffect,k===null?m.lastEffect=h.next=h:(N=k.next,k.next=h,h.next=N,m.lastEffect=h)),h}function S_(){return Qi().memoizedState}function H0(h,m,k,N){var I=ss();er.flags|=h,I.memoizedState=zh(1|m,k,void 0,N===void 0?null:N)}function q0(h,m,k,N){var I=Qi();N=N===void 0?null:N;var M=void 0;if(Ar!==null){var G=Ar.memoizedState;if(M=G.destroy,N!==null&&xk(N,G.deps)){I.memoizedState=zh(m,k,M,N);return}}er.flags|=h,I.memoizedState=zh(1|m,k,M,N)}function C_(h,m){return H0(8390656,8,h,m)}function Ek(h,m){return q0(2048,8,h,m)}function E_(h,m){return q0(4,2,h,m)}function N_(h,m){return q0(4,4,h,m)}function T_(h,m){if(typeof m=="function")return h=h(),m(h),function(){m(null)};if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function I_(h,m,k){return k=k!=null?k.concat([h]):null,q0(4,4,T_.bind(null,m,h),k)}function Nk(){}function __(h,m){var k=Qi();m=m===void 0?null:m;var N=k.memoizedState;return N!==null&&m!==null&&xk(m,N[1])?N[0]:(k.memoizedState=[h,m],h)}function R_(h,m){var k=Qi();m=m===void 0?null:m;var N=k.memoizedState;return N!==null&&m!==null&&xk(m,N[1])?N[0]:(h=h(),k.memoizedState=[h,m],h)}function $_(h,m,k){return tc&21?(Ht(k,m)||(k=ie(),er.lanes|=k,nc|=k,h.baseState=!0),m):(h.baseState&&(h.baseState=!1,di=!0),h.memoizedState=k)}function oV(h,m){var k=Re;Re=k!==0&&4>k?k:4,h(!0);var N=vk.transition;vk.transition={};try{h(!1),m()}finally{Re=k,vk.transition=N}}function O_(){return Qi().memoizedState}function sV(h,m,k){var N=zl(h);if(k={lane:N,action:k,hasEagerState:!1,eagerState:null,next:null},M_(h))P_(m,k);else if(k=r_(h,m,k,N),k!==null){var I=Fa();Yi(k,h,N,I),F_(k,m,N)}}function lV(h,m,k){var N=zl(h),I={lane:N,action:k,hasEagerState:!1,eagerState:null,next:null};if(M_(h))P_(m,I);else{var M=h.alternate;if(h.lanes===0&&(M===null||M.lanes===0)&&(M=m.lastRenderedReducer,M!==null))try{var G=m.lastRenderedState,ue=M(G,k);if(I.hasEagerState=!0,I.eagerState=ue,Ht(ue,G)){var ye=m.interleaved;ye===null?(I.next=I,dk(m)):(I.next=ye.next,ye.next=I),m.interleaved=I;return}}catch{}finally{}k=r_(h,m,I,N),k!==null&&(I=Fa(),Yi(k,h,N,I),F_(k,m,N))}}function M_(h){var m=h.alternate;return h===er||m!==null&&m===er}function P_(h,m){Ah=G0=!0;var k=h.pending;k===null?m.next=m:(m.next=k.next,k.next=m),h.pending=m}function F_(h,m,k){if(k&4194240){var N=m.lanes;N&=h.pendingLanes,k|=N,m.lanes=k,Me(h,k)}}var K0={readContext:Ki,useCallback:Oa,useContext:Oa,useEffect:Oa,useImperativeHandle:Oa,useInsertionEffect:Oa,useLayoutEffect:Oa,useMemo:Oa,useReducer:Oa,useRef:Oa,useState:Oa,useDebugValue:Oa,useDeferredValue:Oa,useTransition:Oa,useMutableSource:Oa,useSyncExternalStore:Oa,useId:Oa,unstable_isNewReconciler:!1},uV={readContext:Ki,useCallback:function(h,m){return ss().memoizedState=[h,m===void 0?null:m],h},useContext:Ki,useEffect:C_,useImperativeHandle:function(h,m,k){return k=k!=null?k.concat([h]):null,H0(4194308,4,T_.bind(null,m,h),k)},useLayoutEffect:function(h,m){return H0(4194308,4,h,m)},useInsertionEffect:function(h,m){return H0(4,2,h,m)},useMemo:function(h,m){var k=ss();return m=m===void 0?null:m,h=h(),k.memoizedState=[h,m],h},useReducer:function(h,m,k){var N=ss();return m=k!==void 0?k(m):m,N.memoizedState=N.baseState=m,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:m},N.queue=h,h=h.dispatch=sV.bind(null,er,h),[N.memoizedState,h]},useRef:function(h){var m=ss();return h={current:h},m.memoizedState=h},useState:k_,useDebugValue:Nk,useDeferredValue:function(h){return ss().memoizedState=h},useTransition:function(){var h=k_(!1),m=h[0];return h=oV.bind(null,h[1]),ss().memoizedState=h,[m,h]},useMutableSource:function(){},useSyncExternalStore:function(h,m,k){var N=er,I=ss();if(an){if(k===void 0)throw Error(i(407));k=k()}else{if(k=m(),Yr===null)throw Error(i(349));tc&30||y_(N,m,k)}I.memoizedState=k;var M={value:k,getSnapshot:m};return I.queue=M,C_(v_.bind(null,N,M,h),[h]),N.flags|=2048,zh(9,b_.bind(null,N,M,k,m),void 0,null),k},useId:function(){var h=ss(),m=Yr.identifierPrefix;if(an){var k=ca,N=Io;k=(N&~(1<<32-_i(N)-1)).toString(32)+k,m=":"+m+"R"+k,k=Dh++,0<k&&(m+="H"+k.toString(32)),m+=":"}else k=iV++,m=":"+m+"r"+k.toString(32)+":";return h.memoizedState=m},unstable_isNewReconciler:!1},cV={readContext:Ki,useCallback:__,useContext:Ki,useEffect:Ek,useImperativeHandle:I_,useInsertionEffect:E_,useLayoutEffect:N_,useMemo:R_,useReducer:Sk,useRef:S_,useState:function(){return Sk(Lh)},useDebugValue:Nk,useDeferredValue:function(h){var m=Qi();return $_(m,Ar.memoizedState,h)},useTransition:function(){var h=Sk(Lh)[0],m=Qi().memoizedState;return[h,m]},useMutableSource:m_,useSyncExternalStore:g_,useId:O_,unstable_isNewReconciler:!1},dV={readContext:Ki,useCallback:__,useContext:Ki,useEffect:Ek,useImperativeHandle:I_,useInsertionEffect:E_,useLayoutEffect:N_,useMemo:R_,useReducer:Ck,useRef:S_,useState:function(){return Ck(Lh)},useDebugValue:Nk,useDeferredValue:function(h){var m=Qi();return Ar===null?m.memoizedState=h:$_(m,Ar.memoizedState,h)},useTransition:function(){var h=Ck(Lh)[0],m=Qi().memoizedState;return[h,m]},useMutableSource:m_,useSyncExternalStore:g_,useId:O_,unstable_isNewReconciler:!1};function Rd(h,m){try{var k="",N=m;do k+=aV(N),N=N.return;while(N);var I=k}catch(M){I=`
Error generating stack: `+M.message+`
`+M.stack}return{value:h,source:m,stack:I,digest:null}}function Tk(h,m,k){return{value:h,source:null,stack:k??null,digest:m??null}}function Ik(h,m){try{console.error(m.value)}catch(k){setTimeout(function(){throw k})}}var pV=typeof WeakMap=="function"?WeakMap:Map;function A_(h,m,k){k=Us(-1,k),k.tag=3,k.payload={element:null};var N=m.value;return k.callback=function(){l1||(l1=!0,qk=N),Ik(h,m)},k}function D_(h,m,k){k=Us(-1,k),k.tag=3;var N=h.type.getDerivedStateFromError;if(typeof N=="function"){var I=m.value;k.payload=function(){return N(I)},k.callback=function(){Ik(h,m)}}var M=h.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(k.callback=function(){Ik(h,m),typeof N!="function"&&(Dl===null?Dl=new Set([this]):Dl.add(this));var G=m.stack;this.componentDidCatch(m.value,{componentStack:G!==null?G:""})}),k}function L_(h,m,k){var N=h.pingCache;if(N===null){N=h.pingCache=new pV;var I=new Set;N.set(m,I)}else I=N.get(m),I===void 0&&(I=new Set,N.set(m,I));I.has(k)||(I.add(k),h=NV.bind(null,h,m,k),m.then(h,h))}function z_(h){do{var m;if((m=h.tag===13)&&(m=h.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return h;h=h.return}while(h!==null);return null}function B_(h,m,k,N,I){return h.mode&1?(h.flags|=65536,h.lanes=I,h):(h===m?h.flags|=65536:(h.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(m=Us(-1,1),m.tag=2,Al(k,m,1))),k.lanes|=1),h)}var hV=o.ReactCurrentOwner,di=!1;function ei(h,m,k,N){m.child=h===null?h_(m,null,k,N):Td(m,h.child,k,N)}function j_(h,m,k,N,I){k=k.render;var M=m.ref;return Nd(m,I),N=wk(h,m,k,N,M,I),k=kk(),h!==null&&!di?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~I,Vs(h,m,I)):(an&&k&&Za(m),m.flags|=1,ei(h,m,N,I),m.child)}function U_(h,m,k,N,I){if(h===null){var M=k.type;return typeof M=="function"&&!Zk(M)&&M.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(m.tag=15,m.type=M,V_(h,m,M,N,I)):(h=f1(k.type,null,N,m,m.mode,I),h.ref=m.ref,h.return=m,m.child=h)}if(M=h.child,!(h.lanes&I)){var G=M.memoizedProps;if(k=k.compare,k=k!==null?k:A0,k(G,N)&&h.ref===m.ref)return Vs(h,m,I)}return m.flags|=1,h=jl(M,N),h.ref=m.ref,h.return=m,m.child=h}function V_(h,m,k,N,I){if(h!==null){var M=h.memoizedProps;if(A0(M,N)&&h.ref===m.ref)if(di=!1,m.pendingProps=N=M,(h.lanes&I)!==0)h.flags&131072&&(di=!0);else return m.lanes=h.lanes,Vs(h,m,I)}return _k(h,m,k,N,I)}function W_(h,m,k){var N=m.pendingProps,I=N.children,M=h!==null?h.memoizedState:null;if(N.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},vn(Od,Ri),Ri|=k;else{if(!(k&1073741824))return h=M!==null?M.baseLanes|k:k,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:h,cachePool:null,transitions:null},m.updateQueue=null,vn(Od,Ri),Ri|=h,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=M!==null?M.baseLanes:k,vn(Od,Ri),Ri|=N}else M!==null?(N=M.baseLanes|k,m.memoizedState=null):N=k,vn(Od,Ri),Ri|=N;return ei(h,m,I,k),m.child}function G_(h,m){var k=m.ref;(h===null&&k!==null||h!==null&&h.ref!==k)&&(m.flags|=512,m.flags|=2097152)}function _k(h,m,k,N,I){var M=Ra(k)?As:Xr.current;return M=Pl(m,M),Nd(m,I),k=wk(h,m,k,N,M,I),N=kk(),h!==null&&!di?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~I,Vs(h,m,I)):(an&&N&&Za(m),m.flags|=1,ei(h,m,k,I),m.child)}function H_(h,m,k,N,I){if(Ra(k)){var M=!0;as(m)}else M=!1;if(Nd(m,I),m.stateNode===null)Q0(h,m),u_(m,k,N),fk(m,k,N,I),N=!0;else if(h===null){var G=m.stateNode,ue=m.memoizedProps;G.props=ue;var ye=G.context,Oe=k.contextType;typeof Oe=="object"&&Oe!==null?Oe=Ki(Oe):(Oe=Ra(k)?As:Xr.current,Oe=Pl(m,Oe));var Xe=k.getDerivedStateFromProps,It=typeof Xe=="function"||typeof G.getSnapshotBeforeUpdate=="function";It||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ue!==N||ye!==Oe)&&c_(m,G,N,Oe),Fl=!1;var Be=m.memoizedState;G.state=Be,B0(m,N,G,I),ye=m.memoizedState,ue!==N||Be!==ye||_a.current||Fl?(typeof Xe=="function"&&(hk(m,k,Xe,N),ye=m.memoizedState),(ue=Fl||l_(m,k,ue,N,Be,ye,Oe))?(It||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(m.flags|=4194308)):(typeof G.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=N,m.memoizedState=ye),G.props=N,G.state=ye,G.context=Oe,N=ue):(typeof G.componentDidMount=="function"&&(m.flags|=4194308),N=!1)}else{G=m.stateNode,a_(h,m),ue=m.memoizedProps,Oe=m.type===m.elementType?ue:Ro(m.type,ue),G.props=Oe,It=m.pendingProps,Be=G.context,ye=k.contextType,typeof ye=="object"&&ye!==null?ye=Ki(ye):(ye=Ra(k)?As:Xr.current,ye=Pl(m,ye));var zn=k.getDerivedStateFromProps;(Xe=typeof zn=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ue!==It||Be!==ye)&&c_(m,G,N,ye),Fl=!1,Be=m.memoizedState,G.state=Be,B0(m,N,G,I);var Nn=m.memoizedState;ue!==It||Be!==Nn||_a.current||Fl?(typeof zn=="function"&&(hk(m,k,zn,N),Nn=m.memoizedState),(Oe=Fl||l_(m,k,Oe,N,Be,Nn,ye)||!1)?(Xe||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(N,Nn,ye),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(N,Nn,ye)),typeof G.componentDidUpdate=="function"&&(m.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof G.componentDidUpdate!="function"||ue===h.memoizedProps&&Be===h.memoizedState||(m.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ue===h.memoizedProps&&Be===h.memoizedState||(m.flags|=1024),m.memoizedProps=N,m.memoizedState=Nn),G.props=N,G.state=Nn,G.context=ye,N=Oe):(typeof G.componentDidUpdate!="function"||ue===h.memoizedProps&&Be===h.memoizedState||(m.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ue===h.memoizedProps&&Be===h.memoizedState||(m.flags|=1024),N=!1)}return Rk(h,m,k,N,M,I)}function Rk(h,m,k,N,I,M){G_(h,m);var G=(m.flags&128)!==0;if(!N&&!G)return I&&Ju(m,k,!1),Vs(h,m,M);N=m.stateNode,hV.current=m;var ue=G&&typeof k.getDerivedStateFromError!="function"?null:N.render();return m.flags|=1,h!==null&&G?(m.child=Td(m,h.child,null,M),m.child=Td(m,null,ue,M)):ei(h,m,ue,M),m.memoizedState=N.state,I&&Ju(m,k,!0),m.child}function q_(h){var m=h.stateNode;m.pendingContext?M0(h,m.pendingContext,m.pendingContext!==m.context):m.context&&M0(h,m.context,!1),mk(h,m.containerInfo)}function K_(h,m,k,N,I){return Cd(),ok(I),m.flags|=256,ei(h,m,k,N),m.child}var $k={dehydrated:null,treeContext:null,retryLane:0};function Ok(h){return{baseLanes:h,cachePool:null,transitions:null}}function X_(h,m,k){var N=m.pendingProps,I=Zn.current,M=!1,G=(m.flags&128)!==0,ue;if((ue=G)||(ue=h!==null&&h.memoizedState===null?!1:(I&2)!==0),ue?(M=!0,m.flags&=-129):(h===null||h.memoizedState!==null)&&(I|=1),vn(Zn,I&1),h===null)return ik(m),h=m.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(m.mode&1?cn(h)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(G=N.children,h=N.fallback,M?(N=m.mode,M=m.child,G={mode:"hidden",children:G},!(N&1)&&M!==null?(M.childLanes=0,M.pendingProps=G):M=m1(G,N,0,null),h=oc(h,N,k,null),M.return=m,h.return=m,M.sibling=h,m.child=M,m.child.memoizedState=Ok(k),m.memoizedState=$k,h):Mk(m,G));if(I=h.memoizedState,I!==null&&(ue=I.dehydrated,ue!==null))return fV(h,m,G,N,ue,I,k);if(M){M=N.fallback,G=m.mode,I=h.child,ue=I.sibling;var ye={mode:"hidden",children:N.children};return!(G&1)&&m.child!==I?(N=m.child,N.childLanes=0,N.pendingProps=ye,m.deletions=null):(N=jl(I,ye),N.subtreeFlags=I.subtreeFlags&14680064),ue!==null?M=jl(ue,M):(M=oc(M,G,k,null),M.flags|=2),M.return=m,N.return=m,N.sibling=M,m.child=N,N=M,M=m.child,G=h.child.memoizedState,G=G===null?Ok(k):{baseLanes:G.baseLanes|k,cachePool:null,transitions:G.transitions},M.memoizedState=G,M.childLanes=h.childLanes&~k,m.memoizedState=$k,N}return M=h.child,h=M.sibling,N=jl(M,{mode:"visible",children:N.children}),!(m.mode&1)&&(N.lanes=k),N.return=m,N.sibling=null,h!==null&&(k=m.deletions,k===null?(m.deletions=[h],m.flags|=16):k.push(h)),m.child=N,m.memoizedState=null,N}function Mk(h,m){return m=m1({mode:"visible",children:m},h.mode,0,null),m.return=h,h.child=m}function X0(h,m,k,N){return N!==null&&ok(N),Td(m,h.child,null,k),h=Mk(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function fV(h,m,k,N,I,M,G){if(k)return m.flags&256?(m.flags&=-257,N=Tk(Error(i(422))),X0(h,m,G,N)):m.memoizedState!==null?(m.child=h.child,m.flags|=128,null):(M=N.fallback,I=m.mode,N=m1({mode:"visible",children:N.children},I,0,null),M=oc(M,I,G,null),M.flags|=2,N.return=m,M.return=m,N.sibling=M,m.child=N,m.mode&1&&Td(m,h.child,null,G),m.child.memoizedState=Ok(G),m.memoizedState=$k,M);if(!(m.mode&1))return X0(h,m,G,null);if(cn(I))return N=ft(I).digest,M=Error(i(419)),N=Tk(M,N,void 0),X0(h,m,G,N);if(k=(G&h.childLanes)!==0,di||k){if(N=Yr,N!==null){switch(G&-G){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}I=I&(N.suspendedLanes|G)?0:I,I!==0&&I!==M.retryLane&&(M.retryLane=I,is(h,I),Yi(N,h,I,-1))}return Jk(),N=Tk(Error(i(421))),X0(h,m,G,N)}return bt(I)?(m.flags|=128,m.child=h.child,m=TV.bind(null,h),Zt(I,m),null):(h=M.treeContext,Te&&(da=vr(I),ur=m,an=!0,_o=null,js=!1,h!==null&&(mn[Mn++]=Io,mn[Mn++]=ca,mn[Mn++]=ua,Io=h.id,ca=h.overflow,ua=m)),m=Mk(m,N.children),m.flags|=4096,m)}function Q_(h,m,k){h.lanes|=m;var N=h.alternate;N!==null&&(N.lanes|=m),ck(h.return,m,k)}function Pk(h,m,k,N,I){var M=h.memoizedState;M===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:N,tail:k,tailMode:I}:(M.isBackwards=m,M.rendering=null,M.renderingStartTime=0,M.last=N,M.tail=k,M.tailMode=I)}function Y_(h,m,k){var N=m.pendingProps,I=N.revealOrder,M=N.tail;if(ei(h,m,N.children,k),N=Zn.current,N&2)N=N&1|2,m.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Q_(h,k,m);else if(h.tag===19)Q_(h,k,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}N&=1}if(vn(Zn,N),!(m.mode&1))m.memoizedState=null;else switch(I){case"forwards":for(k=m.child,I=null;k!==null;)h=k.alternate,h!==null&&V0(h)===null&&(I=k),k=k.sibling;k=I,k===null?(I=m.child,m.child=null):(I=k.sibling,k.sibling=null),Pk(m,!1,I,k,M);break;case"backwards":for(k=null,I=m.child,m.child=null;I!==null;){if(h=I.alternate,h!==null&&V0(h)===null){m.child=I;break}h=I.sibling,I.sibling=k,k=I,I=h}Pk(m,!0,k,null,M);break;case"together":Pk(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Q0(h,m){!(m.mode&1)&&h!==null&&(h.alternate=null,m.alternate=null,m.flags|=2)}function Vs(h,m,k){if(h!==null&&(m.dependencies=h.dependencies),nc|=m.lanes,!(k&m.childLanes))return null;if(h!==null&&m.child!==h.child)throw Error(i(153));if(m.child!==null){for(h=m.child,k=jl(h,h.pendingProps),m.child=k,k.return=m;h.sibling!==null;)h=h.sibling,k=k.sibling=jl(h,h.pendingProps),k.return=m;k.sibling=null}return m.child}function mV(h,m,k){switch(m.tag){case 3:q_(m),Cd();break;case 5:f_(m);break;case 1:Ra(m.type)&&as(m);break;case 4:mk(m,m.stateNode.containerInfo);break;case 10:n_(m,m.type._context,m.memoizedProps.value);break;case 13:var N=m.memoizedState;if(N!==null)return N.dehydrated!==null?(vn(Zn,Zn.current&1),m.flags|=128,null):k&m.child.childLanes?X_(h,m,k):(vn(Zn,Zn.current&1),h=Vs(h,m,k),h!==null?h.sibling:null);vn(Zn,Zn.current&1);break;case 19:if(N=(k&m.childLanes)!==0,h.flags&128){if(N)return Y_(h,m,k);m.flags|=128}var I=m.memoizedState;if(I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),vn(Zn,Zn.current),N)break;return null;case 22:case 23:return m.lanes=0,W_(h,m,k)}return Vs(h,m,k)}function ls(h){h.flags|=4}function J_(h,m){if(h!==null&&h.child===m.child)return!0;if(m.flags&16)return!1;for(h=m.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var Bh,jh,Y0,J0;if(Ne)Bh=function(h,m){for(var k=m.child;k!==null;){if(k.tag===5||k.tag===6)te(h,k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===m)break;for(;k.sibling===null;){if(k.return===null||k.return===m)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},jh=function(){},Y0=function(h,m,k,N,I){if(h=h.memoizedProps,h!==N){var M=m.stateNode,G=os(Xi.current);k=he(M,k,h,N,I,G),(m.updateQueue=k)&&ls(m)}},J0=function(h,m,k,N){k!==N&&ls(m)};else if(Se){Bh=function(h,m,k,N){for(var I=m.child;I!==null;){if(I.tag===5){var M=I.stateNode;k&&N&&(M=ze(M,I.type,I.memoizedProps,I)),te(h,M)}else if(I.tag===6)M=I.stateNode,k&&N&&(M=it(M,I.memoizedProps,I)),te(h,M);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)M=I.child,M!==null&&(M.return=I),Bh(h,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===m)break;for(;I.sibling===null;){if(I.return===null||I.return===m)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};var Z_=function(h,m,k,N){for(var I=m.child;I!==null;){if(I.tag===5){var M=I.stateNode;k&&N&&(M=ze(M,I.type,I.memoizedProps,I)),fe(h,M)}else if(I.tag===6)M=I.stateNode,k&&N&&(M=it(M,I.memoizedProps,I)),fe(h,M);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)M=I.child,M!==null&&(M.return=I),Z_(h,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===m)break;for(;I.sibling===null;){if(I.return===null||I.return===m)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};jh=function(h,m){var k=m.stateNode;if(!J_(h,m)){h=k.containerInfo;var N=le(h);Z_(N,m,!1,!1),k.pendingChildren=N,ls(m),xe(h,N)}},Y0=function(h,m,k,N,I){var M=h.stateNode,G=h.memoizedProps;if((h=J_(h,m))&&G===N)m.stateNode=M;else{var ue=m.stateNode,ye=os(Xi.current),Oe=null;G!==N&&(Oe=he(ue,k,G,N,I,ye)),h&&Oe===null?m.stateNode=M:(M=dt(M,Oe,k,G,N,m,h,ue),oe(M,k,N,I,ye)&&ls(m),m.stateNode=M,h?ls(m):Bh(M,m,!1,!1))}},J0=function(h,m,k,N){k!==N?(h=os(Id.current),k=os(Xi.current),m.stateNode=de(N,h,k,m),ls(m)):m.stateNode=h.stateNode}}else jh=function(){},Y0=function(){},J0=function(){};function Uh(h,m){if(!an)switch(h.tailMode){case"hidden":m=h.tail;for(var k=null;m!==null;)m.alternate!==null&&(k=m),m=m.sibling;k===null?h.tail=null:k.sibling=null;break;case"collapsed":k=h.tail;for(var N=null;k!==null;)k.alternate!==null&&(N=k),k=k.sibling;N===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:N.sibling=null}}function Ma(h){var m=h.alternate!==null&&h.alternate.child===h.child,k=0,N=0;if(m)for(var I=h.child;I!==null;)k|=I.lanes|I.childLanes,N|=I.subtreeFlags&14680064,N|=I.flags&14680064,I.return=h,I=I.sibling;else for(I=h.child;I!==null;)k|=I.lanes|I.childLanes,N|=I.subtreeFlags,N|=I.flags,I.return=h,I=I.sibling;return h.subtreeFlags|=N,h.childLanes=k,m}function gV(h,m,k){var N=m.pendingProps;switch(Bs(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ma(m),null;case 1:return Ra(m.type)&&kd(),Ma(m),null;case 3:return k=m.stateNode,_d(),En(_a),En(Xr),bk(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(h===null||h.child===null)&&(F0(m)?ls(m):h===null||h.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,_o!==null&&(Qk(_o),_o=null))),jh(h,m),Ma(m),null;case 5:gk(m),k=os(Id.current);var I=m.type;if(h!==null&&m.stateNode!=null)Y0(h,m,I,N,k),h.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!N){if(m.stateNode===null)throw Error(i(166));return Ma(m),null}if(h=os(Xi.current),F0(m)){if(!Te)throw Error(i(175));h=ns(m.stateNode,m.type,m.memoizedProps,k,h,m,!js),m.updateQueue=h,h!==null&&ls(m)}else{var M=Z(I,N,k,h,m);Bh(M,m,!1,!1),m.stateNode=M,oe(M,I,N,k,h)&&ls(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Ma(m),null;case 6:if(h&&m.stateNode!=null)J0(h,m,h.memoizedProps,N);else{if(typeof N!="string"&&m.stateNode===null)throw Error(i(166));if(h=os(Id.current),k=os(Xi.current),F0(m)){if(!Te)throw Error(i(176));if(h=m.stateNode,k=m.memoizedProps,(N=Gi(h,k,m,!js))&&(I=ur,I!==null))switch(I.tag){case 3:rn(I.stateNode.containerInfo,h,k,(I.mode&1)!==0);break;case 5:fn(I.type,I.memoizedProps,I.stateNode,h,k,(I.mode&1)!==0)}N&&ls(m)}else m.stateNode=de(N,h,k,m)}return Ma(m),null;case 13:if(En(Zn),N=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(an&&da!==null&&m.mode&1&&!(m.flags&128))t_(),Cd(),m.flags|=98560,I=!1;else if(I=F0(m),N!==null&&N.dehydrated!==null){if(h===null){if(!I)throw Error(i(318));if(!Te)throw Error(i(344));if(I=m.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(i(317));Ia(I,m)}else Cd(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;Ma(m),I=!1}else _o!==null&&(Qk(_o),_o=null),I=!0;if(!I)return m.flags&65536?m:null}return m.flags&128?(m.lanes=k,m):(k=N!==null,k!==(h!==null&&h.memoizedState!==null)&&k&&(m.child.flags|=8192,m.mode&1&&(h===null||Zn.current&1?Dr===0&&(Dr=3):Jk())),m.updateQueue!==null&&(m.flags|=4),Ma(m),null);case 4:return _d(),jh(h,m),h===null&&We(m.stateNode.containerInfo),Ma(m),null;case 10:return uk(m.type._context),Ma(m),null;case 17:return Ra(m.type)&&kd(),Ma(m),null;case 19:if(En(Zn),I=m.memoizedState,I===null)return Ma(m),null;if(N=(m.flags&128)!==0,M=I.rendering,M===null)if(N)Uh(I,!1);else{if(Dr!==0||h!==null&&h.flags&128)for(h=m.child;h!==null;){if(M=V0(h),M!==null){for(m.flags|=128,Uh(I,!1),h=M.updateQueue,h!==null&&(m.updateQueue=h,m.flags|=4),m.subtreeFlags=0,h=k,k=m.child;k!==null;)N=k,I=h,N.flags&=14680066,M=N.alternate,M===null?(N.childLanes=0,N.lanes=I,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=M.childLanes,N.lanes=M.lanes,N.child=M.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=M.memoizedProps,N.memoizedState=M.memoizedState,N.updateQueue=M.updateQueue,N.type=M.type,I=M.dependencies,N.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext}),k=k.sibling;return vn(Zn,Zn.current&1|2),m.child}h=h.sibling}I.tail!==null&&Ye()>Hk&&(m.flags|=128,N=!0,Uh(I,!1),m.lanes=4194304)}else{if(!N)if(h=V0(M),h!==null){if(m.flags|=128,N=!0,h=h.updateQueue,h!==null&&(m.updateQueue=h,m.flags|=4),Uh(I,!0),I.tail===null&&I.tailMode==="hidden"&&!M.alternate&&!an)return Ma(m),null}else 2*Ye()-I.renderingStartTime>Hk&&k!==1073741824&&(m.flags|=128,N=!0,Uh(I,!1),m.lanes=4194304);I.isBackwards?(M.sibling=m.child,m.child=M):(h=I.last,h!==null?h.sibling=M:m.child=M,I.last=M)}return I.tail!==null?(m=I.tail,I.rendering=m,I.tail=m.sibling,I.renderingStartTime=Ye(),m.sibling=null,h=Zn.current,vn(Zn,N?h&1|2:h&1),m):(Ma(m),null);case 22:case 23:return Yk(),k=m.memoizedState!==null,h!==null&&h.memoizedState!==null!==k&&(m.flags|=8192),k&&m.mode&1?Ri&1073741824&&(Ma(m),Ne&&m.subtreeFlags&6&&(m.flags|=8192)):Ma(m),null;case 24:return null;case 25:return null}throw Error(i(156,m.tag))}function yV(h,m){switch(Bs(m),m.tag){case 1:return Ra(m.type)&&kd(),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return _d(),En(_a),En(Xr),bk(),h=m.flags,h&65536&&!(h&128)?(m.flags=h&-65537|128,m):null;case 5:return gk(m),null;case 13:if(En(Zn),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(i(340));Cd()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return En(Zn),null;case 4:return _d(),null;case 10:return uk(m.type._context),null;case 22:case 23:return Yk(),null;case 24:return null;default:return null}}var Z0=!1,Pa=!1,bV=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function $d(h,m){var k=h.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(N){Hn(h,m,N)}else k.current=null}function eR(h,m,k){try{k()}catch(N){Hn(h,m,N)}}var tR=!1;function vV(h,m){for(L(h.containerInfo),Ge=m;Ge!==null;)if(h=Ge,m=h.child,(h.subtreeFlags&1028)!==0&&m!==null)m.return=h,Ge=m;else for(;Ge!==null;){h=Ge;try{var k=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var N=k.memoizedProps,I=k.memoizedState,M=h.stateNode,G=M.getSnapshotBeforeUpdate(h.elementType===h.type?N:Ro(h.type,N),I);M.__reactInternalSnapshotBeforeUpdate=G}break;case 3:Ne&&Vn(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(ue){Hn(h,h.return,ue)}if(m=h.sibling,m!==null){m.return=h.return,Ge=m;break}Ge=h.return}return k=tR,tR=!1,k}function Vh(h,m,k){var N=m.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var I=N=N.next;do{if((I.tag&h)===h){var M=I.destroy;I.destroy=void 0,M!==void 0&&eR(m,k,M)}I=I.next}while(I!==N)}}function e1(h,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var k=m=m.next;do{if((k.tag&h)===h){var N=k.create;k.destroy=N()}k=k.next}while(k!==m)}}function Fk(h){var m=h.ref;if(m!==null){var k=h.stateNode;switch(h.tag){case 5:h=Y(k);break;default:h=k}typeof m=="function"?m(h):m.current=h}}function nR(h){var m=h.alternate;m!==null&&(h.alternate=null,nR(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&lt(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function rR(h){return h.tag===5||h.tag===3||h.tag===4}function aR(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||rR(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Ak(h,m,k){var N=h.tag;if(N===5||N===6)h=h.stateNode,m?un(k,h,m):br(k,h);else if(N!==4&&(h=h.child,h!==null))for(Ak(h,m,k),h=h.sibling;h!==null;)Ak(h,m,k),h=h.sibling}function Dk(h,m,k){var N=h.tag;if(N===5||N===6)h=h.stateNode,m?Qa(k,h,m):hn(k,h);else if(N!==4&&(h=h.child,h!==null))for(Dk(h,m,k),h=h.sibling;h!==null;)Dk(h,m,k),h=h.sibling}var pa=null,$o=!1;function us(h,m,k){for(k=k.child;k!==null;)Lk(h,m,k),k=k.sibling}function Lk(h,m,k){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(ct,k)}catch{}switch(k.tag){case 5:Pa||$d(k,m);case 6:if(Ne){var N=pa,I=$o;pa=null,us(h,m,k),pa=N,$o=I,pa!==null&&($o?Ya(pa,k.stateNode):la(pa,k.stateNode))}else us(h,m,k);break;case 18:Ne&&pa!==null&&($o?rs(pa,k.stateNode):$l(pa,k.stateNode));break;case 4:Ne?(N=pa,I=$o,pa=k.stateNode.containerInfo,$o=!0,us(h,m,k),pa=N,$o=I):(Se&&(N=k.stateNode.containerInfo,I=le(N),_e(N,I)),us(h,m,k));break;case 0:case 11:case 14:case 15:if(!Pa&&(N=k.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){I=N=N.next;do{var M=I,G=M.destroy;M=M.tag,G!==void 0&&(M&2||M&4)&&eR(k,m,G),I=I.next}while(I!==N)}us(h,m,k);break;case 1:if(!Pa&&($d(k,m),N=k.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=k.memoizedProps,N.state=k.memoizedState,N.componentWillUnmount()}catch(ue){Hn(k,m,ue)}us(h,m,k);break;case 21:us(h,m,k);break;case 22:k.mode&1?(Pa=(N=Pa)||k.memoizedState!==null,us(h,m,k),Pa=N):us(h,m,k);break;default:us(h,m,k)}}function iR(h){var m=h.updateQueue;if(m!==null){h.updateQueue=null;var k=h.stateNode;k===null&&(k=h.stateNode=new bV),m.forEach(function(N){var I=IV.bind(null,h,N);k.has(N)||(k.add(N),N.then(I,I))})}}function Oo(h,m){var k=m.deletions;if(k!==null)for(var N=0;N<k.length;N++){var I=k[N];try{var M=h,G=m;if(Ne){var ue=G;e:for(;ue!==null;){switch(ue.tag){case 5:pa=ue.stateNode,$o=!1;break e;case 3:pa=ue.stateNode.containerInfo,$o=!0;break e;case 4:pa=ue.stateNode.containerInfo,$o=!0;break e}ue=ue.return}if(pa===null)throw Error(i(160));Lk(M,G,I),pa=null,$o=!1}else Lk(M,G,I);var ye=I.alternate;ye!==null&&(ye.return=null),I.return=null}catch(Oe){Hn(I,m,Oe)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)oR(m,h),m=m.sibling}function oR(h,m){var k=h.alternate,N=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(Oo(m,h),cs(h),N&4){try{Vh(3,h,h.return),e1(3,h)}catch(Be){Hn(h,h.return,Be)}try{Vh(5,h,h.return)}catch(Be){Hn(h,h.return,Be)}}break;case 1:Oo(m,h),cs(h),N&512&&k!==null&&$d(k,k.return);break;case 5:if(Oo(m,h),cs(h),N&512&&k!==null&&$d(k,k.return),Ne){if(h.flags&32){var I=h.stateNode;try{Ta(I)}catch(Be){Hn(h,h.return,Be)}}if(N&4&&(I=h.stateNode,I!=null)){var M=h.memoizedProps;if(k=k!==null?k.memoizedProps:M,N=h.type,m=h.updateQueue,h.updateQueue=null,m!==null)try{ui(I,m,N,k,M,h)}catch(Be){Hn(h,h.return,Be)}}}break;case 6:if(Oo(m,h),cs(h),N&4&&Ne){if(h.stateNode===null)throw Error(i(162));I=h.stateNode,M=h.memoizedProps,k=k!==null?k.memoizedProps:M;try{yn(I,k,M)}catch(Be){Hn(h,h.return,Be)}}break;case 3:if(Oo(m,h),cs(h),N&4){if(Ne&&Te&&k!==null&&k.memoizedState.isDehydrated)try{Xu(m.containerInfo)}catch(Be){Hn(h,h.return,Be)}if(Se){I=m.containerInfo,M=m.pendingChildren;try{_e(I,M)}catch(Be){Hn(h,h.return,Be)}}}break;case 4:if(Oo(m,h),cs(h),N&4&&Se){M=h.stateNode,I=M.containerInfo,M=M.pendingChildren;try{_e(I,M)}catch(Be){Hn(h,h.return,Be)}}break;case 13:Oo(m,h),cs(h),I=h.child,I.flags&8192&&(M=I.memoizedState!==null,I.stateNode.isHidden=M,!M||I.alternate!==null&&I.alternate.memoizedState!==null||(Gk=Ye())),N&4&&iR(h);break;case 22:var G=k!==null&&k.memoizedState!==null;if(h.mode&1?(Pa=(k=Pa)||G,Oo(m,h),Pa=k):Oo(m,h),cs(h),N&8192){if(k=h.memoizedState!==null,(h.stateNode.isHidden=k)&&!G&&h.mode&1)for(Ge=h,N=h.child;N!==null;){for(m=Ge=N;Ge!==null;){G=Ge;var ue=G.child;switch(G.tag){case 0:case 11:case 14:case 15:Vh(4,G,G.return);break;case 1:$d(G,G.return);var ye=G.stateNode;if(typeof ye.componentWillUnmount=="function"){var Oe=G,Xe=G.return;try{var It=Oe;ye.props=It.memoizedProps,ye.state=It.memoizedState,ye.componentWillUnmount()}catch(Be){Hn(Oe,Xe,Be)}}break;case 5:$d(G,G.return);break;case 22:if(G.memoizedState!==null){uR(m);continue}}ue!==null?(ue.return=G,Ge=ue):uR(m)}N=N.sibling}if(Ne){e:if(N=null,Ne)for(m=h;;){if(m.tag===5){if(N===null){N=m;try{I=m.stateNode,k?Co(I):ts(m.stateNode,m.memoizedProps)}catch(Be){Hn(h,h.return,Be)}}}else if(m.tag===6){if(N===null)try{M=m.stateNode,k?Kr(M):or(M,m.memoizedProps)}catch(Be){Hn(h,h.return,Be)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;N===m&&(N=null),m=m.return}N===m&&(N=null),m.sibling.return=m.return,m=m.sibling}}}break;case 19:Oo(m,h),cs(h),N&4&&iR(h);break;case 21:break;default:Oo(m,h),cs(h)}}function cs(h){var m=h.flags;if(m&2){try{if(Ne){e:{for(var k=h.return;k!==null;){if(rR(k)){var N=k;break e}k=k.return}throw Error(i(160))}switch(N.tag){case 5:var I=N.stateNode;N.flags&32&&(Ta(I),N.flags&=-33);var M=aR(h);Dk(h,M,I);break;case 3:case 4:var G=N.stateNode.containerInfo,ue=aR(h);Ak(h,ue,G);break;default:throw Error(i(161))}}}catch(ye){Hn(h,h.return,ye)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function xV(h,m,k){Ge=h,sR(h)}function sR(h,m,k){for(var N=(h.mode&1)!==0;Ge!==null;){var I=Ge,M=I.child;if(I.tag===22&&N){var G=I.memoizedState!==null||Z0;if(!G){var ue=I.alternate,ye=ue!==null&&ue.memoizedState!==null||Pa;ue=Z0;var Oe=Pa;if(Z0=G,(Pa=ye)&&!Oe)for(Ge=I;Ge!==null;)G=Ge,ye=G.child,G.tag===22&&G.memoizedState!==null?cR(I):ye!==null?(ye.return=G,Ge=ye):cR(I);for(;M!==null;)Ge=M,sR(M),M=M.sibling;Ge=I,Z0=ue,Pa=Oe}lR(h)}else I.subtreeFlags&8772&&M!==null?(M.return=I,Ge=M):lR(h)}}function lR(h){for(;Ge!==null;){var m=Ge;if(m.flags&8772){var k=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:Pa||e1(5,m);break;case 1:var N=m.stateNode;if(m.flags&4&&!Pa)if(k===null)N.componentDidMount();else{var I=m.elementType===m.type?k.memoizedProps:Ro(m.type,k.memoizedProps);N.componentDidUpdate(I,k.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var M=m.updateQueue;M!==null&&o_(m,M,N);break;case 3:var G=m.updateQueue;if(G!==null){if(k=null,m.child!==null)switch(m.child.tag){case 5:k=Y(m.child.stateNode);break;case 1:k=m.child.stateNode}o_(m,G,k)}break;case 5:var ue=m.stateNode;k===null&&m.flags&4&&Jn(ue,m.type,m.memoizedProps,m);break;case 6:break;case 4:break;case 12:break;case 13:if(Te&&m.memoizedState===null){var ye=m.alternate;if(ye!==null){var Oe=ye.memoizedState;if(Oe!==null){var Xe=Oe.dehydrated;Xe!==null&&Qu(Xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Pa||m.flags&512&&Fk(m)}catch(It){Hn(m,m.return,It)}}if(m===h){Ge=null;break}if(k=m.sibling,k!==null){k.return=m.return,Ge=k;break}Ge=m.return}}function uR(h){for(;Ge!==null;){var m=Ge;if(m===h){Ge=null;break}var k=m.sibling;if(k!==null){k.return=m.return,Ge=k;break}Ge=m.return}}function cR(h){for(;Ge!==null;){var m=Ge;try{switch(m.tag){case 0:case 11:case 15:var k=m.return;try{e1(4,m)}catch(ye){Hn(m,k,ye)}break;case 1:var N=m.stateNode;if(typeof N.componentDidMount=="function"){var I=m.return;try{N.componentDidMount()}catch(ye){Hn(m,I,ye)}}var M=m.return;try{Fk(m)}catch(ye){Hn(m,M,ye)}break;case 5:var G=m.return;try{Fk(m)}catch(ye){Hn(m,G,ye)}}}catch(ye){Hn(m,m.return,ye)}if(m===h){Ge=null;break}var ue=m.sibling;if(ue!==null){ue.return=m.return,Ge=ue;break}Ge=m.return}}var t1=0,n1=1,r1=2,a1=3,i1=4;if(typeof Symbol=="function"&&Symbol.for){var Wh=Symbol.for;t1=Wh("selector.component"),n1=Wh("selector.has_pseudo_class"),r1=Wh("selector.role"),a1=Wh("selector.test_id"),i1=Wh("selector.text")}function zk(h){var m=Pe(h);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(i(364));return m}if(h=Vt(h),h===null)throw Error(i(362));return h.stateNode.current}function Bk(h,m){switch(m.$$typeof){case t1:if(h.type===m.value)return!0;break;case n1:e:{m=m.value,h=[h,0];for(var k=0;k<h.length;){var N=h[k++],I=h[k++],M=m[I];if(N.tag!==5||!Gt(N)){for(;M!=null&&Bk(N,M);)I++,M=m[I];if(I===m.length){m=!0;break e}else for(N=N.child;N!==null;)h.push(N,I),N=N.sibling}}m=!1}return m;case r1:if(h.tag===5&&Ot(h.stateNode,m.value))return!0;break;case i1:if((h.tag===5||h.tag===6)&&(h=Wt(h),h!==null&&0<=h.indexOf(m.value)))return!0;break;case a1:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function jk(h){switch(h.$$typeof){case t1:return"<"+(E(h.value)||"Unknown")+">";case n1:return":has("+(jk(h)||"")+")";case r1:return'[role="'+h.value+'"]';case i1:return'"'+h.value+'"';case a1:return'[data-testname="'+h.value+'"]';default:throw Error(i(365))}}function dR(h,m){var k=[];h=[h,0];for(var N=0;N<h.length;){var I=h[N++],M=h[N++],G=m[M];if(I.tag!==5||!Gt(I)){for(;G!=null&&Bk(I,G);)M++,G=m[M];if(M===m.length)k.push(I);else for(I=I.child;I!==null;)h.push(I,M),I=I.sibling}}return k}function Uk(h,m){if(!Ve)throw Error(i(363));h=zk(h),h=dR(h,m),m=[],h=Array.from(h);for(var k=0;k<h.length;){var N=h[k++];if(N.tag===5)Gt(N)||m.push(N.stateNode);else for(N=N.child;N!==null;)h.push(N),N=N.sibling}return m}var wV=Math.ceil,o1=o.ReactCurrentDispatcher,Vk=o.ReactCurrentOwner,xr=o.ReactCurrentBatchConfig,jt=0,Yr=null,_r=null,ha=0,Ri=0,Od=Hi(0),Dr=0,Gh=null,nc=0,s1=0,Wk=0,Hh=null,pi=null,Gk=0,Hk=1/0,Ws=null;function Md(){Hk=Ye()+500}var l1=!1,qk=null,Dl=null,u1=!1,Ll=null,c1=0,qh=0,Kk=null,d1=-1,p1=0;function Fa(){return jt&6?Ye():d1!==-1?d1:d1=Ye()}function zl(h){return h.mode&1?jt&2&&ha!==0?ha&-ha:rV.transition!==null?(p1===0&&(p1=ie()),p1):(h=Re,h!==0?h:$e()):1}function Yi(h,m,k,N){if(50<qh)throw qh=0,Kk=null,Error(i(185));Ee(h,k,N),(!(jt&2)||h!==Yr)&&(h===Yr&&(!(jt&2)&&(s1|=k),Dr===4&&Bl(h,ha)),hi(h,N),k===1&&jt===0&&!(m.mode&1)&&(Md(),Ln&&Nr()))}function hi(h,m){var k=h.callbackNode;W(h,m);var N=Ls(h,h===Yr?ha:0);if(N===0)k!==null&&ot(k),h.callbackNode=null,h.callbackPriority=0;else if(m=N&-N,h.callbackPriority!==m){if(k!=null&&ot(k),m===1)h.tag===0?To(hR.bind(null,h)):Ja(hR.bind(null,h)),Je?Ze(function(){!(jt&6)&&Nr()}):vt(pt,Nr),k=null;else{switch(Ue(N)){case 1:k=pt;break;case 4:k=mt;break;case 16:k=st;break;case 536870912:k=Ct;break;default:k=st}k=kR(k,pR.bind(null,h))}h.callbackPriority=m,h.callbackNode=k}}function pR(h,m){if(d1=-1,p1=0,jt&6)throw Error(i(327));var k=h.callbackNode;if(ic()&&h.callbackNode!==k)return null;var N=Ls(h,h===Yr?ha:0);if(N===0)return null;if(N&30||N&h.expiredLanes||m)m=h1(h,N);else{m=N;var I=jt;jt|=2;var M=gR();(Yr!==h||ha!==m)&&(Ws=null,Md(),rc(h,m));do try{CV();break}catch(ue){mR(h,ue)}while(!0);lk(),o1.current=M,jt=I,_r!==null?m=0:(Yr=null,ha=0,m=Dr)}if(m!==0){if(m===2&&(I=ee(h),I!==0&&(N=I,m=Xk(h,I))),m===1)throw k=Gh,rc(h,0),Bl(h,N),hi(h,Ye()),k;if(m===6)Bl(h,N);else{if(I=h.current.alternate,!(N&30)&&!kV(I)&&(m=h1(h,N),m===2&&(M=ee(h),M!==0&&(N=M,m=Xk(h,M))),m===1))throw k=Gh,rc(h,0),Bl(h,N),hi(h,Ye()),k;switch(h.finishedWork=I,h.finishedLanes=N,m){case 0:case 1:throw Error(i(345));case 2:ac(h,pi,Ws);break;case 3:if(Bl(h,N),(N&130023424)===N&&(m=Gk+500-Ye(),10<m)){if(Ls(h,0)!==0)break;if(I=h.suspendedLanes,(I&N)!==N){Fa(),h.pingedLanes|=h.suspendedLanes&I;break}h.timeoutHandle=ke(ac.bind(null,h,pi,Ws),m);break}ac(h,pi,Ws);break;case 4:if(Bl(h,N),(N&4194240)===N)break;for(m=h.eventTimes,I=-1;0<N;){var G=31-_i(N);M=1<<G,G=m[G],G>I&&(I=G),N&=~M}if(N=I,N=Ye()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*wV(N/1960))-N,10<N){h.timeoutHandle=ke(ac.bind(null,h,pi,Ws),N);break}ac(h,pi,Ws);break;case 5:ac(h,pi,Ws);break;default:throw Error(i(329))}}}return hi(h,Ye()),h.callbackNode===k?pR.bind(null,h):null}function Xk(h,m){var k=Hh;return h.current.memoizedState.isDehydrated&&(rc(h,m).flags|=256),h=h1(h,m),h!==2&&(m=pi,pi=k,m!==null&&Qk(m)),h}function Qk(h){pi===null?pi=h:pi.push.apply(pi,h)}function kV(h){for(var m=h;;){if(m.flags&16384){var k=m.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var N=0;N<k.length;N++){var I=k[N],M=I.getSnapshot;I=I.value;try{if(!Ht(M(),I))return!1}catch{return!1}}}if(k=m.child,m.subtreeFlags&16384&&k!==null)k.return=m,m=k;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Bl(h,m){for(m&=~Wk,m&=~s1,h.suspendedLanes|=m,h.pingedLanes&=~m,h=h.expirationTimes;0<m;){var k=31-_i(m),N=1<<k;h[k]=-1,m&=~N}}function hR(h){if(jt&6)throw Error(i(327));ic();var m=Ls(h,0);if(!(m&1))return hi(h,Ye()),null;var k=h1(h,m);if(h.tag!==0&&k===2){var N=ee(h);N!==0&&(m=N,k=Xk(h,N))}if(k===1)throw k=Gh,rc(h,0),Bl(h,m),hi(h,Ye()),k;if(k===6)throw Error(i(345));return h.finishedWork=h.current.alternate,h.finishedLanes=m,ac(h,pi,Ws),hi(h,Ye()),null}function fR(h){Ll!==null&&Ll.tag===0&&!(jt&6)&&ic();var m=jt;jt|=1;var k=xr.transition,N=Re;try{if(xr.transition=null,Re=1,h)return h()}finally{Re=N,xr.transition=k,jt=m,!(jt&6)&&Nr()}}function Yk(){Ri=Od.current,En(Od)}function rc(h,m){h.finishedWork=null,h.finishedLanes=0;var k=h.timeoutHandle;if(k!==se&&(h.timeoutHandle=se,X(k)),_r!==null)for(k=_r.return;k!==null;){var N=k;switch(Bs(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&kd();break;case 3:_d(),En(_a),En(Xr),bk();break;case 5:gk(N);break;case 4:_d();break;case 13:En(Zn);break;case 19:En(Zn);break;case 10:uk(N.type._context);break;case 22:case 23:Yk()}k=k.return}if(Yr=h,_r=h=jl(h.current,null),ha=Ri=m,Dr=0,Gh=null,Wk=s1=nc=0,pi=Hh=null,ec!==null){for(m=0;m<ec.length;m++)if(k=ec[m],N=k.interleaved,N!==null){k.interleaved=null;var I=N.next,M=k.pending;if(M!==null){var G=M.next;M.next=I,N.next=G}k.pending=N}ec=null}return h}function mR(h,m){do{var k=_r;try{if(lk(),W0.current=K0,G0){for(var N=er.memoizedState;N!==null;){var I=N.queue;I!==null&&(I.pending=null),N=N.next}G0=!1}if(tc=0,Qr=Ar=er=null,Ah=!1,Dh=0,Vk.current=null,k===null||k.return===null){Dr=1,Gh=m,_r=null;break}e:{var M=h,G=k.return,ue=k,ye=m;if(m=ha,ue.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Oe=ye,Xe=ue,It=Xe.tag;if(!(Xe.mode&1)&&(It===0||It===11||It===15)){var Be=Xe.alternate;Be?(Xe.updateQueue=Be.updateQueue,Xe.memoizedState=Be.memoizedState,Xe.lanes=Be.lanes):(Xe.updateQueue=null,Xe.memoizedState=null)}var zn=z_(G);if(zn!==null){zn.flags&=-257,B_(zn,G,ue,M,m),zn.mode&1&&L_(M,Oe,m),m=zn,ye=Oe;var Nn=m.updateQueue;if(Nn===null){var fi=new Set;fi.add(ye),m.updateQueue=fi}else Nn.add(ye);break e}else{if(!(m&1)){L_(M,Oe,m),Jk();break e}ye=Error(i(426))}}else if(an&&ue.mode&1){var Gs=z_(G);if(Gs!==null){!(Gs.flags&65536)&&(Gs.flags|=256),B_(Gs,G,ue,M,m),ok(Rd(ye,ue));break e}}M=ye=Rd(ye,ue),Dr!==4&&(Dr=2),Hh===null?Hh=[M]:Hh.push(M),M=G;do{switch(M.tag){case 3:M.flags|=65536,m&=-m,M.lanes|=m;var ge=A_(M,ye,m);i_(M,ge);break e;case 1:ue=ye;var ce=M.type,we=M.stateNode;if(!(M.flags&128)&&(typeof ce.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(Dl===null||!Dl.has(we)))){M.flags|=65536,m&=-m,M.lanes|=m;var je=D_(M,ue,m);i_(M,je);break e}}M=M.return}while(M!==null)}bR(k)}catch(ht){m=ht,_r===k&&k!==null&&(_r=k=k.return);continue}break}while(!0)}function gR(){var h=o1.current;return o1.current=K0,h===null?K0:h}function Jk(){(Dr===0||Dr===3||Dr===2)&&(Dr=4),Yr===null||!(nc&268435455)&&!(s1&268435455)||Bl(Yr,ha)}function h1(h,m){var k=jt;jt|=2;var N=gR();(Yr!==h||ha!==m)&&(Ws=null,rc(h,m));do try{SV();break}catch(I){mR(h,I)}while(!0);if(lk(),jt=k,o1.current=N,_r!==null)throw Error(i(261));return Yr=null,ha=0,Dr}function SV(){for(;_r!==null;)yR(_r)}function CV(){for(;_r!==null&&!Pt();)yR(_r)}function yR(h){var m=wR(h.alternate,h,Ri);h.memoizedProps=h.pendingProps,m===null?bR(h):_r=m,Vk.current=null}function bR(h){var m=h;do{var k=m.alternate;if(h=m.return,m.flags&32768){if(k=yV(k,m),k!==null){k.flags&=32767,_r=k;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Dr=6,_r=null;return}}else if(k=gV(k,m,Ri),k!==null){_r=k;return}if(m=m.sibling,m!==null){_r=m;return}_r=m=h}while(m!==null);Dr===0&&(Dr=5)}function ac(h,m,k){var N=Re,I=xr.transition;try{xr.transition=null,Re=1,EV(h,m,k,N)}finally{xr.transition=I,Re=N}return null}function EV(h,m,k,N){do ic();while(Ll!==null);if(jt&6)throw Error(i(327));k=h.finishedWork;var I=h.finishedLanes;if(k===null)return null;if(h.finishedWork=null,h.finishedLanes=0,k===h.current)throw Error(i(177));h.callbackNode=null,h.callbackPriority=0;var M=k.lanes|k.childLanes;if(Ae(h,M),h===Yr&&(_r=Yr=null,ha=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||u1||(u1=!0,kR(st,function(){return ic(),null})),M=(k.flags&15990)!==0,k.subtreeFlags&15990||M){M=xr.transition,xr.transition=null;var G=Re;Re=1;var ue=jt;jt|=4,Vk.current=null,vV(h,k),oR(k,h),Q(h.containerInfo),h.current=k,xV(k),St(),jt=ue,Re=G,xr.transition=M}else h.current=k;if(u1&&(u1=!1,Ll=h,c1=I),M=h.pendingLanes,M===0&&(Dl=null),lr(k.stateNode),hi(h,Ye()),m!==null)for(N=h.onRecoverableError,k=0;k<m.length;k++)I=m[k],N(I.value,{componentStack:I.stack,digest:I.digest});if(l1)throw l1=!1,h=qk,qk=null,h;return c1&1&&h.tag!==0&&ic(),M=h.pendingLanes,M&1?h===Kk?qh++:(qh=0,Kk=h):qh=0,Nr(),null}function ic(){if(Ll!==null){var h=Ue(c1),m=xr.transition,k=Re;try{if(xr.transition=null,Re=16>h?16:h,Ll===null)var N=!1;else{if(h=Ll,Ll=null,c1=0,jt&6)throw Error(i(331));var I=jt;for(jt|=4,Ge=h.current;Ge!==null;){var M=Ge,G=M.child;if(Ge.flags&16){var ue=M.deletions;if(ue!==null){for(var ye=0;ye<ue.length;ye++){var Oe=ue[ye];for(Ge=Oe;Ge!==null;){var Xe=Ge;switch(Xe.tag){case 0:case 11:case 15:Vh(8,Xe,M)}var It=Xe.child;if(It!==null)It.return=Xe,Ge=It;else for(;Ge!==null;){Xe=Ge;var Be=Xe.sibling,zn=Xe.return;if(nR(Xe),Xe===Oe){Ge=null;break}if(Be!==null){Be.return=zn,Ge=Be;break}Ge=zn}}}var Nn=M.alternate;if(Nn!==null){var fi=Nn.child;if(fi!==null){Nn.child=null;do{var Gs=fi.sibling;fi.sibling=null,fi=Gs}while(fi!==null)}}Ge=M}}if(M.subtreeFlags&2064&&G!==null)G.return=M,Ge=G;else e:for(;Ge!==null;){if(M=Ge,M.flags&2048)switch(M.tag){case 0:case 11:case 15:Vh(9,M,M.return)}var ge=M.sibling;if(ge!==null){ge.return=M.return,Ge=ge;break e}Ge=M.return}}var ce=h.current;for(Ge=ce;Ge!==null;){G=Ge;var we=G.child;if(G.subtreeFlags&2064&&we!==null)we.return=G,Ge=we;else e:for(G=ce;Ge!==null;){if(ue=Ge,ue.flags&2048)try{switch(ue.tag){case 0:case 11:case 15:e1(9,ue)}}catch(ht){Hn(ue,ue.return,ht)}if(ue===G){Ge=null;break e}var je=ue.sibling;if(je!==null){je.return=ue.return,Ge=je;break e}Ge=ue.return}}if(jt=I,Nr(),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(ct,h)}catch{}N=!0}return N}finally{Re=k,xr.transition=m}}return!1}function vR(h,m,k){m=Rd(k,m),m=A_(h,m,1),h=Al(h,m,1),m=Fa(),h!==null&&(Ee(h,1,m),hi(h,m))}function Hn(h,m,k){if(h.tag===3)vR(h,h,k);else for(;m!==null;){if(m.tag===3){vR(m,h,k);break}else if(m.tag===1){var N=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(Dl===null||!Dl.has(N))){h=Rd(k,h),h=D_(m,h,1),m=Al(m,h,1),h=Fa(),m!==null&&(Ee(m,1,h),hi(m,h));break}}m=m.return}}function NV(h,m,k){var N=h.pingCache;N!==null&&N.delete(m),m=Fa(),h.pingedLanes|=h.suspendedLanes&k,Yr===h&&(ha&k)===k&&(Dr===4||Dr===3&&(ha&130023424)===ha&&500>Ye()-Gk?rc(h,0):Wk|=k),hi(h,m)}function xR(h,m){m===0&&(h.mode&1?(m=Ds,Ds<<=1,!(Ds&130023424)&&(Ds=4194304)):m=1);var k=Fa();h=is(h,m),h!==null&&(Ee(h,m,k),hi(h,k))}function TV(h){var m=h.memoizedState,k=0;m!==null&&(k=m.retryLane),xR(h,k)}function IV(h,m){var k=0;switch(h.tag){case 13:var N=h.stateNode,I=h.memoizedState;I!==null&&(k=I.retryLane);break;case 19:N=h.stateNode;break;default:throw Error(i(314))}N!==null&&N.delete(m),xR(h,k)}var wR;wR=function(h,m,k){if(h!==null)if(h.memoizedProps!==m.pendingProps||_a.current)di=!0;else{if(!(h.lanes&k)&&!(m.flags&128))return di=!1,mV(h,m,k);di=!!(h.flags&131072)}else di=!1,an&&m.flags&1048576&&Oh(m,Ir,m.index);switch(m.lanes=0,m.tag){case 2:var N=m.type;Q0(h,m),h=m.pendingProps;var I=Pl(m,Xr.current);Nd(m,k),I=wk(null,m,N,h,I,k);var M=kk();return m.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Ra(N)?(M=!0,as(m)):M=!1,m.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,pk(m),I.updater=j0,m.stateNode=I,I._reactInternals=m,fk(m,N,h,k),m=Rk(null,m,N,!0,M,k)):(m.tag=0,an&&M&&Za(m),ei(null,m,I,k),m=m.child),m;case 16:N=m.elementType;e:{switch(Q0(h,m),h=m.pendingProps,I=N._init,N=I(N._payload),m.type=N,I=m.tag=RV(N),h=Ro(N,h),I){case 0:m=_k(null,m,N,h,k);break e;case 1:m=H_(null,m,N,h,k);break e;case 11:m=j_(null,m,N,h,k);break e;case 14:m=U_(null,m,N,Ro(N.type,h),k);break e}throw Error(i(306,N,""))}return m;case 0:return N=m.type,I=m.pendingProps,I=m.elementType===N?I:Ro(N,I),_k(h,m,N,I,k);case 1:return N=m.type,I=m.pendingProps,I=m.elementType===N?I:Ro(N,I),H_(h,m,N,I,k);case 3:e:{if(q_(m),h===null)throw Error(i(387));N=m.pendingProps,M=m.memoizedState,I=M.element,a_(h,m),B0(m,N,null,k);var G=m.memoizedState;if(N=G.element,Te&&M.isDehydrated)if(M={element:N,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},m.updateQueue.baseState=M,m.memoizedState=M,m.flags&256){I=Rd(Error(i(423)),m),m=K_(h,m,N,k,I);break e}else if(N!==I){I=Rd(Error(i(424)),m),m=K_(h,m,N,k,I);break e}else for(Te&&(da=sr(m.stateNode.containerInfo),ur=m,an=!0,_o=null,js=!1),k=h_(m,null,N,k),m.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(Cd(),N===I){m=Vs(h,m,k);break e}ei(h,m,N,k)}m=m.child}return m;case 5:return f_(m),h===null&&ik(m),N=m.type,I=m.pendingProps,M=h!==null?h.memoizedProps:null,G=I.children,ae(N,I)?G=null:M!==null&&ae(N,M)&&(m.flags|=32),G_(h,m),ei(h,m,G,k),m.child;case 6:return h===null&&ik(m),null;case 13:return X_(h,m,k);case 4:return mk(m,m.stateNode.containerInfo),N=m.pendingProps,h===null?m.child=Td(m,null,N,k):ei(h,m,N,k),m.child;case 11:return N=m.type,I=m.pendingProps,I=m.elementType===N?I:Ro(N,I),j_(h,m,N,I,k);case 7:return ei(h,m,m.pendingProps,k),m.child;case 8:return ei(h,m,m.pendingProps.children,k),m.child;case 12:return ei(h,m,m.pendingProps.children,k),m.child;case 10:e:{if(N=m.type._context,I=m.pendingProps,M=m.memoizedProps,G=I.value,n_(m,N,G),M!==null)if(Ht(M.value,G)){if(M.children===I.children&&!_a.current){m=Vs(h,m,k);break e}}else for(M=m.child,M!==null&&(M.return=m);M!==null;){var ue=M.dependencies;if(ue!==null){G=M.child;for(var ye=ue.firstContext;ye!==null;){if(ye.context===N){if(M.tag===1){ye=Us(-1,k&-k),ye.tag=2;var Oe=M.updateQueue;if(Oe!==null){Oe=Oe.shared;var Xe=Oe.pending;Xe===null?ye.next=ye:(ye.next=Xe.next,Xe.next=ye),Oe.pending=ye}}M.lanes|=k,ye=M.alternate,ye!==null&&(ye.lanes|=k),ck(M.return,k,m),ue.lanes|=k;break}ye=ye.next}}else if(M.tag===10)G=M.type===m.type?null:M.child;else if(M.tag===18){if(G=M.return,G===null)throw Error(i(341));G.lanes|=k,ue=G.alternate,ue!==null&&(ue.lanes|=k),ck(G,k,m),G=M.sibling}else G=M.child;if(G!==null)G.return=M;else for(G=M;G!==null;){if(G===m){G=null;break}if(M=G.sibling,M!==null){M.return=G.return,G=M;break}G=G.return}M=G}ei(h,m,I.children,k),m=m.child}return m;case 9:return I=m.type,N=m.pendingProps.children,Nd(m,k),I=Ki(I),N=N(I),m.flags|=1,ei(h,m,N,k),m.child;case 14:return N=m.type,I=Ro(N,m.pendingProps),I=Ro(N.type,I),U_(h,m,N,I,k);case 15:return V_(h,m,m.type,m.pendingProps,k);case 17:return N=m.type,I=m.pendingProps,I=m.elementType===N?I:Ro(N,I),Q0(h,m),m.tag=1,Ra(N)?(h=!0,as(m)):h=!1,Nd(m,k),u_(m,N,I),fk(m,N,I,k),Rk(null,m,N,!0,h,k);case 19:return Y_(h,m,k);case 22:return W_(h,m,k)}throw Error(i(156,m.tag))};function kR(h,m){return vt(h,m)}function _V(h,m,k,N){this.tag=h,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(h,m,k,N){return new _V(h,m,k,N)}function Zk(h){return h=h.prototype,!(!h||!h.isReactComponent)}function RV(h){if(typeof h=="function")return Zk(h)?1:0;if(h!=null){if(h=h.$$typeof,h===g)return 11;if(h===b)return 14}return 2}function jl(h,m){var k=h.alternate;return k===null?(k=Ji(h.tag,m,h.key,h.mode),k.elementType=h.elementType,k.type=h.type,k.stateNode=h.stateNode,k.alternate=h,h.alternate=k):(k.pendingProps=m,k.type=h.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=h.flags&14680064,k.childLanes=h.childLanes,k.lanes=h.lanes,k.child=h.child,k.memoizedProps=h.memoizedProps,k.memoizedState=h.memoizedState,k.updateQueue=h.updateQueue,m=h.dependencies,k.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},k.sibling=h.sibling,k.index=h.index,k.ref=h.ref,k}function f1(h,m,k,N,I,M){var G=2;if(N=h,typeof h=="function")Zk(h)&&(G=1);else if(typeof h=="string")G=5;else e:switch(h){case u:return oc(k.children,I,M,m);case c:G=8,I|=8;break;case d:return h=Ji(12,k,m,I|2),h.elementType=d,h.lanes=M,h;case y:return h=Ji(13,k,m,I),h.elementType=y,h.lanes=M,h;case v:return h=Ji(19,k,m,I),h.elementType=v,h.lanes=M,h;case w:return m1(k,I,M,m);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case p:G=10;break e;case f:G=9;break e;case g:G=11;break e;case b:G=14;break e;case x:G=16,N=null;break e}throw Error(i(130,h==null?h:typeof h,""))}return m=Ji(G,k,m,I),m.elementType=h,m.type=N,m.lanes=M,m}function oc(h,m,k,N){return h=Ji(7,h,N,m),h.lanes=k,h}function m1(h,m,k,N){return h=Ji(22,h,N,m),h.elementType=w,h.lanes=k,h.stateNode={isHidden:!1},h}function eS(h,m,k){return h=Ji(6,h,null,m),h.lanes=k,h}function tS(h,m,k){return m=Ji(4,h.children!==null?h.children:[],h.key,m),m.lanes=k,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}function $V(h,m,k,N,I){this.tag=m,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=se,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ve(0),this.expirationTimes=ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ve(0),this.identifierPrefix=N,this.onRecoverableError=I,Te&&(this.mutableSourceEagerHydrationData=null)}function SR(h,m,k,N,I,M,G,ue,ye){return h=new $V(h,m,k,ue,ye),m===1?(m=1,M===!0&&(m|=8)):m=0,M=Ji(3,null,null,m),h.current=M,M.stateNode=h,M.memoizedState={element:N,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},pk(M),h}function CR(h){if(!h)return qi;h=h._reactInternals;e:{if(T(h)!==h||h.tag!==1)throw Error(i(170));var m=h;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Ra(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(i(171))}if(h.tag===1){var k=h.type;if(Ra(k))return Wn(h,k,m)}return m}function ER(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=D(m),h===null?null:h.stateNode}function NR(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var k=h.retryLane;h.retryLane=k!==0&&k<m?k:m}}function g1(h,m){NR(h,m),(h=h.alternate)&&NR(h,m)}function OV(h){return h=D(h),h===null?null:h.stateNode}function MV(){return null}return e.attemptContinuousHydration=function(h){if(h.tag===13){var m=is(h,134217728);if(m!==null){var k=Fa();Yi(m,h,134217728,k)}g1(h,134217728)}},e.attemptDiscreteHydration=function(h){if(h.tag===13){var m=is(h,1);if(m!==null){var k=Fa();Yi(m,h,1,k)}g1(h,1)}},e.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var m=zl(h),k=is(h,m);if(k!==null){var N=Fa();Yi(k,h,m,N)}g1(h,m)}},e.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var m=h.stateNode;if(m.current.memoizedState.isDehydrated){var k=Zu(m.pendingLanes);k!==0&&(Me(m,k|1),hi(m,Ye()),!(jt&6)&&(Md(),Nr()))}break;case 13:fR(function(){var N=is(h,1);if(N!==null){var I=Fa();Yi(N,h,1,I)}}),g1(h,1)}},e.batchedUpdates=function(h,m){var k=jt;jt|=1;try{return h(m)}finally{jt=k,jt===0&&(Md(),Ln&&Nr())}},e.createComponentSelector=function(h){return{$$typeof:t1,value:h}},e.createContainer=function(h,m,k,N,I,M,G){return SR(h,m,!1,null,k,N,I,M,G)},e.createHasPseudoClassSelector=function(h){return{$$typeof:n1,value:h}},e.createHydrationContainer=function(h,m,k,N,I,M,G,ue,ye){return h=SR(k,N,!0,h,I,M,G,ue,ye),h.context=CR(null),k=h.current,N=Fa(),I=zl(k),M=Us(N,I),M.callback=m??null,Al(k,M,I),h.current.lanes=I,Ee(h,I,N),hi(h,N),h},e.createPortal=function(h,m,k){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:N==null?null:""+N,children:h,containerInfo:m,implementation:k}},e.createRoleSelector=function(h){return{$$typeof:r1,value:h}},e.createTestNameSelector=function(h){return{$$typeof:a1,value:h}},e.createTextSelector=function(h){return{$$typeof:i1,value:h}},e.deferredUpdates=function(h){var m=Re,k=xr.transition;try{return xr.transition=null,Re=16,h()}finally{Re=m,xr.transition=k}},e.discreteUpdates=function(h,m,k,N,I){var M=Re,G=xr.transition;try{return xr.transition=null,Re=1,h(m,k,N,I)}finally{Re=M,xr.transition=G,jt===0&&Md()}},e.findAllNodes=Uk,e.findBoundingRects=function(h,m){if(!Ve)throw Error(i(363));m=Uk(h,m),h=[];for(var k=0;k<m.length;k++)h.push($t(m[k]));for(m=h.length-1;0<m;m--){k=h[m];for(var N=k.x,I=N+k.width,M=k.y,G=M+k.height,ue=m-1;0<=ue;ue--)if(m!==ue){var ye=h[ue],Oe=ye.x,Xe=Oe+ye.width,It=ye.y,Be=It+ye.height;if(N>=Oe&&M>=It&&I<=Xe&&G<=Be){h.splice(m,1);break}else if(N!==Oe||k.width!==ye.width||Be<M||It>G){if(!(M!==It||k.height!==ye.height||Xe<N||Oe>I)){Oe>N&&(ye.width+=Oe-N,ye.x=N),Xe<I&&(ye.width=I-Oe),h.splice(m,1);break}}else{It>M&&(ye.height+=It-M,ye.y=M),Be<G&&(ye.height=G-It),h.splice(m,1);break}}}return h},e.findHostInstance=ER,e.findHostInstanceWithNoPortals=function(h){return h=P(h),h=h!==null?z(h):null,h===null?null:h.stateNode},e.findHostInstanceWithWarning=function(h){return ER(h)},e.flushControlled=function(h){var m=jt;jt|=1;var k=xr.transition,N=Re;try{xr.transition=null,Re=1,h()}finally{Re=N,xr.transition=k,jt=m,jt===0&&(Md(),Nr())}},e.flushPassiveEffects=ic,e.flushSync=fR,e.focusWithin=function(h,m){if(!Ve)throw Error(i(363));for(h=zk(h),m=dR(h,m),m=Array.from(m),h=0;h<m.length;){var k=m[h++];if(!Gt(k)){if(k.tag===5&&wt(k.stateNode))return!0;for(k=k.child;k!==null;)m.push(k),k=k.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Re},e.getFindAllNodesFailureDescription=function(h,m){if(!Ve)throw Error(i(363));var k=0,N=[];h=[zk(h),0];for(var I=0;I<h.length;){var M=h[I++],G=h[I++],ue=m[G];if((M.tag!==5||!Gt(M))&&(Bk(M,ue)&&(N.push(jk(ue)),G++,G>k&&(k=G)),G<m.length))for(M=M.child;M!==null;)h.push(M,G),M=M.sibling}if(k<m.length){for(h=[];k<m.length;k++)h.push(jk(m[k]));return`findAllNodes was able to match part of the selector:
  `+(N.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},e.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return Y(h.child.stateNode);default:return h.child.stateNode}},e.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:OV,findFiberByHostInstance:h.findFiberByHostInstance||MV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)h=!0;else{try{ct=m.inject(h),kt=m}catch{}h=!!m.checkDCE}}return h},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(h,m,k,N){if(!Ve)throw Error(i(363));h=Uk(h,m);var I=ln(h,k,N).disconnect;return{disconnect:function(){I()}}},e.registerMutableSourceForHydration=function(h,m){var k=m._getVersion;k=k(m._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[m,k]:h.mutableSourceEagerHydrationData.push(m,k)},e.runWithPriority=function(h,m){var k=Re;try{return Re=h,m()}finally{Re=k}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(h,m,k,N){var I=m.current,M=Fa(),G=zl(I);return k=CR(k),m.context===null?m.context=k:m.pendingContext=k,m=Us(M,G),m.payload={element:h},N=N===void 0?null:N,N!==null&&(m.callback=N),h=Al(I,m,G),h!==null&&(Yi(h,I,G,M),z0(h,I,G)),G},e};kF.exports=Pae;var Fae=kF.exports;const Aae=Zi(Fae);var SF={exports:{}},Lc={};/**
* @license React
* react-reconciler-constants.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/Lc.ConcurrentRoot=1,Lc.ContinuousEventPriority=4,Lc.DefaultEventPriority=16,Lc.DiscreteEventPriority=1,Lc.IdleEventPriority=536870912,Lc.LegacyRoot=0,SF.exports=Lc;var CF=SF.exports;const EF={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let NF=!1,TF=!1;const W4=".react-konva-event",Dae=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Lae=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,zae={};function bv(t,e,n=zae){if(!NF&&"zIndex"in e&&(console.warn(Lae),NF=!0),!TF&&e.draggable){var r=e.x!==void 0||e.y!==void 0,a=e.onDragEnd||e.onDragMove;r&&!a&&(console.warn(Dae),TF=!0)}for(var i in n)if(!EF[i]){var o=i.slice(0,2)==="on",s=n[i]!==e[i];if(o&&s){var l=i.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t.off(l,n[i])}var u=!e.hasOwnProperty(i);u&&t.setAttr(i,void 0)}var c=e._useStrictMode,d={},p=!1;const f={};for(var i in e)if(!EF[i]){var o=i.slice(0,2)==="on",g=n[i]!==e[i];if(o&&g){var l=i.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e[i]&&(f[l]=e[i])}!o&&(e[i]!==n[i]||c&&e[i]!==t.getAttr(i))&&(p=!0,d[i]=e[i])}p&&(t.setAttrs(d),wu(t));for(var l in f)t.on(l+W4,f[l])}function wu(t){if(!Lt.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const IF={},Bae={};wm.Node.prototype._applyProps=bv;function jae(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),wu(t)}function Uae(t,e,n){let r=wm[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=wm.Group);const a={},i={};for(var o in e){var s=o.slice(0,2)==="on";s?i[o]=e[o]:a[o]=e[o]}const l=new r(a);return bv(l,i),l}function Vae(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function Wae(t,e,n){return!1}function Gae(t){return t}function Hae(){return null}function qae(){return null}function Kae(t,e,n,r){return Bae}function Xae(){}function Qae(t){}function Yae(t,e){return!1}function Jae(){return IF}function Zae(){return IF}const eie=setTimeout,tie=clearTimeout,nie=-1;function rie(t,e){return!1}const aie=!1,iie=!0,oie=!0;function sie(t,e){e.parent===t?e.moveToTop():t.add(e),wu(t)}function lie(t,e){e.parent===t?e.moveToTop():t.add(e),wu(t)}function _F(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),wu(t)}function uie(t,e,n){_F(t,e,n)}function cie(t,e){e.destroy(),e.off(W4),wu(t)}function die(t,e){e.destroy(),e.off(W4),wu(t)}function pie(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function hie(t,e,n){}function fie(t,e,n,r,a){bv(t,a,r)}function mie(t){t.hide(),wu(t)}function gie(t){}function yie(t,e){(e.visible==null||e.visible)&&t.show()}function bie(t,e){}function vie(t){}function xie(){}const wie=()=>CF.DefaultEventPriority,kie=Object.freeze(Object.defineProperty({__proto__:null,appendChild:sie,appendChildToContainer:lie,appendInitialChild:jae,cancelTimeout:tie,clearContainer:vie,commitMount:hie,commitTextUpdate:pie,commitUpdate:fie,createInstance:Uae,createTextInstance:Vae,detachDeletedInstance:xie,finalizeInitialChildren:Wae,getChildHostContext:Zae,getCurrentEventPriority:wie,getPublicInstance:Gae,getRootHostContext:Jae,hideInstance:mie,hideTextInstance:gie,idlePriority:Yh.unstable_IdlePriority,insertBefore:_F,insertInContainerBefore:uie,isPrimaryRenderer:aie,noTimeout:nie,now:Yh.unstable_now,prepareForCommit:Hae,preparePortalMount:qae,prepareUpdate:Kae,removeChild:cie,removeChildFromContainer:die,resetAfterCommit:Xae,resetTextContent:Qae,run:Yh.unstable_runWithPriority,scheduleTimeout:eie,shouldDeprioritizeSubtree:Yae,shouldSetTextContent:rie,supportsMutation:oie,unhideInstance:yie,unhideTextInstance:bie,warnsIfNotActing:iie},Symbol.toStringTag,{value:"Module"}));var Sie=Object.defineProperty,Cie=Object.defineProperties,Eie=Object.getOwnPropertyDescriptors,RF=Object.getOwnPropertySymbols,Nie=Object.prototype.hasOwnProperty,Tie=Object.prototype.propertyIsEnumerable,$F=(t,e,n)=>e in t?Sie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OF=(t,e)=>{for(var n in e||(e={}))Nie.call(e,n)&&$F(t,n,e[n]);if(RF)for(var n of RF(e))Tie.call(e,n)&&$F(t,n,e[n]);return t},Iie=(t,e)=>Cie(t,Eie(e));function MF(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const a=MF(r,e,n);if(a)return a;r=e?null:r.sibling}}function PF(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const G4=PF(_.createContext(null));class FF extends _.Component{render(){return _.createElement(G4.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:AF,ReactCurrentDispatcher:DF}=_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function _ie(){const t=_.useContext(G4);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=_.useId();return _.useMemo(()=>{for(const n of[AF?.current,t,t?.alternate]){if(!n)continue;const r=MF(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===e)return!0;i=i.next}});if(r)return r}},[t,e])}function Rie(){var t,e;const n=_ie(),[r]=_.useState(()=>new Map);r.clear();let a=n;for(;a;){const i=(t=a.type)==null?void 0:t._context;i&&i!==G4&&!r.has(i)&&r.set(i,(e=DF?.current)==null?void 0:e.readContext(PF(i))),a=a.return}return r}function $ie(){const t=Rie();return _.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>_.createElement(e,null,_.createElement(n.Provider,Iie(OF({},r),{value:t.get(n)}))),e=>_.createElement(FF,OF({},e))),[t])}function Oie(t){const e=V.useRef({});return V.useLayoutEffect(()=>{e.current=t}),V.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const Mie=t=>{const e=V.useRef(),n=V.useRef(),r=V.useRef(),a=Oie(t),i=$ie(),o=s=>{const{forwardedRef:l}=t;l&&(typeof l=="function"?l(s):l.current=s)};return V.useLayoutEffect(()=>(n.current=new wm.Stage({width:t.width,height:t.height,container:e.current}),o(n.current),r.current=km.createContainer(n.current,CF.LegacyRoot,!1,null),km.updateContainer(V.createElement(i,{},t.children),r.current),()=>{wm.isBrowser&&(o(null),km.updateContainer(null,r.current,null),n.current.destroy())}),[]),V.useLayoutEffect(()=>{o(n.current),bv(n.current,t,a),km.updateContainer(V.createElement(i,{},t.children),r.current,null)}),V.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},H4="Layer",LF="Image",Pie="Transformer",km=Aae(kie);km.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:V.version,rendererPackageName:"react-konva"});const Fie=V.forwardRef((t,e)=>V.createElement(FF,{},V.createElement(Mie,{...t,forwardedRef:e})));var zc=_,Aie=function(t,e,n){const r=zc.useRef("loading"),a=zc.useRef(),[i,o]=zc.useState(0),s=zc.useRef(),l=zc.useRef(),u=zc.useRef();return(s.current!==t||l.current!==e||u.current!==n)&&(r.current="loading",a.current=void 0,s.current=t,l.current=e,u.current=n),zc.useLayoutEffect(function(){if(!t)return;var c=document.createElement("img");function d(){r.current="loaded",a.current=c,o(Math.random())}function p(){r.current="failed",a.current=void 0,o(Math.random())}return c.addEventListener("load",d),c.addEventListener("error",p),e&&(c.crossOrigin=e),n&&(c.referrerPolicy=n),c.src=t,function(){c.removeEventListener("load",d),c.removeEventListener("error",p)}},[t,e,n]),[a.current,r.current]};const zF=Zi(Aie),BF=({front:t})=>{const{frame:e}=Nc(),[n]=zF(t?e.front:e.image,"anonymous");return K.jsx(LF,{image:n,draggable:!1})},Die=({canvasImage:t,isSelected:e,onSelect:n})=>{const r=_.useRef(),a=_.useRef(),[i]=zF(t.image,"anonymous"),o=Nc(c=>c.transformCanvasImage);_.useEffect(()=>{var c;e&&(a.current.nodes([r.current]),(c=a.current.getLayer())==null||c.batchDraw())},[e]),_.useEffect(()=>{i&&r.current.cache()},[i]);const s=()=>{o({...t,isDragging:!0})},l=c=>{o({...t,isDragging:!1,x:c.target.x(),y:c.target.y()})},u=()=>{var c;const d=r.current,p=d.scaleX(),f=d.scaleY(),g=Math.max(5,d.width()*p),y=Math.max(d.height()*f);o({...t,x:d.x(),y:d.y(),width:g,height:y}),a.current.nodes([r.current]),(c=a.current.getLayer())==null||c.batchDraw()};return K.jsxs(K.Fragment,{children:[K.jsx(LF,{brightness:t.brightness,contrast:t.contrast,draggable:!0,filters:[wF.Filters.Brighten,wF.Filters.Contrast],id:t.id,image:i,onClick:n,onDragEnd:l,onDragStart:s,onTap:n,onTransformEnd:u,opacity:t.opacity||1,perfectDrawEnabled:!1,ref:r,scaleX:.5,scaleY:.5,x:t.x,y:t.y},t.id),e&&K.jsx(Pie,{ref:a,flipEnabled:!1,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],borderStroke:"#BC13FE"})]})},Lie=()=>{const{addToCanvas:t,artworkList:e,canvasList:n,frame:r,moveCanvasImage:a,removeFromCanvas:i,setFrame:o,transformCanvasImage:s}=Nc(),{t:l}=ys(),u=_.useRef(null),[c,d]=_.useState(null),[p,f]=_.useState(0),[g,y]=_.useState(0),[v,b]=_.useState(1),[x,w]=_.useState(!1),[S,C]=_.useState(!1),[E,R]=_.useState(!1),T=1080,$=1080;_.useEffect(()=>{const ae=()=>{const de=(window.innerWidth*.95||0)/T;u.current&&(u.current.width(T*de),u.current.height($*de),u.current.scale({x:de,y:de}))};return ae(),window.addEventListener("resize",ae),()=>{window.removeEventListener("resize",ae)}},[]);const P=ae=>{ae.target===ae.target.getStage()&&d(null)},D=ae=>{d(ae),f(ae.brightness),y(ae.contrast),b(ae.opacity)},B=ae=>{c&&a(c.id,ae)},z=(ae,de)=>{if(!c)return;const ke={...c,[de]:ae};switch(s(ke),de){case"brightness":f(ae);break;case"contrast":y(ae);break;case"opacity":b(ae);break}},q=()=>{c&&(i(c.id),d(null))},Y=async()=>{if(navigator.share)try{const ae=u.current;if(!ae){console.error("Canvas element not found");return}const de=await fetch(ae.toDataURL()).then(ke=>ke.blob());if(!de){console.error("Failed to create blob from canvas");return}await navigator.share({files:[new File([de],"canvas.png",{type:"image/png"})],title:"GLAMorous Europe",text:"Check out my GLAMorous Europe artwork!"}),console.log("Share successful")}catch(ae){console.error("Error sharing:",ae)}else console.log("Web Share API not supported")},J=()=>{var ae;const de=(ae=u.current)==null?void 0:ae.toDataURL();de&&Pee.saveAs(de,"GLAMorousEurope.png")},H=()=>{w(!x),R(!1),C(!1)},L=()=>{C(!S),R(!1),w(!1)},Q=()=>{R(!E),C(!1),w(!1)};$8({onDragEnd(ae){var de,ke;const{active:X,over:se}=ae;if(se&&(ke=se.data.current)!=null&&ke.accepts.includes((de=X.data.current)==null?void 0:de.type)){const pe=ae.active.id;if(pe){const Ne=e.find(Se=>Se.id===pe);if(Ne){const Se=u.current;if(Se){Se.setPointersPositions(ae.activatorEvent);const Te=Se.getPointerPosition();Te&&t(Ne.image,Te.x,Te.y)}}}}}});const{isOver:Z,setNodeRef:te}=fee({id:"droppable",data:{accepts:["artwork"]}}),oe=Z;let he="transparent";return oe&&(he="#ebb2ff"),K.jsxs(K.Fragment,{children:[K.jsxs(ba,{margin:"my-0",className:"flex flex-wrap gap-1 container justify-center content-center text-center mx-auto",children:[K.jsx(hr,{rounded:!0,inline:!0,onClick:Y,children:K.jsx(va,{material:K.jsx(rJ,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),K.jsx(hr,{rounded:!0,inline:!0,onClick:J,children:K.jsx(va,{material:K.jsx(CY,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),K.jsx(hr,{rounded:!0,inline:!0,onClick:()=>o(r.id>=5?1:r.id+1),children:K.jsx(va,{material:K.jsx(Mee,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),c&&K.jsxs(K.Fragment,{children:[K.jsx(hr,{rounded:!0,inline:!0,onClick:()=>B(!0),children:K.jsx(va,{material:K.jsx(RY,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),K.jsx(hr,{rounded:!0,inline:!0,onClick:()=>B(!1),children:K.jsx(va,{material:K.jsx(TY,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),K.jsx(hr,{rounded:!0,inline:!0,onClick:q,children:K.jsx(va,{material:K.jsx(pJ,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),K.jsx(hr,{style:{backgroundColor:E&&"#BC13FE"},rounded:!0,inline:!0,onClick:Q,children:K.jsx(va,{material:K.jsx(_ee,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),K.jsx(hr,{style:{backgroundColor:x&&"#BC13FE"},rounded:!0,inline:!0,onClick:H,children:K.jsx(va,{material:K.jsx(uJ,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),K.jsx(hr,{style:{backgroundColor:S&&"#BC13FE"},rounded:!0,inline:!0,onClick:L,children:K.jsx(va,{material:K.jsx($ee,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),E&&K.jsx(bp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:K.jsx(vp,{innerClassName:"flex space-x-4 w-6",innerChildren:K.jsxs(K.Fragment,{children:[K.jsx("p",{children:l("artworkCanvasOpacity")}),K.jsx(Jy,{value:v,min:0,max:1,step:.01,onChange:ae=>z(parseFloat(ae.target.value),"opacity")})]})})}),x&&K.jsx(bp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:K.jsx(vp,{innerClassName:"flex space-x-4 w-6",innerChildren:K.jsxs(K.Fragment,{children:[K.jsx("p",{children:l("artworkCanvasBrightness")}),K.jsx(Jy,{value:p,min:-1,max:1,step:.01,onChange:ae=>z(parseFloat(ae.target.value),"brightness")})]})})}),S&&K.jsx(bp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:K.jsx(vp,{innerClassName:"flex space-x-4 w-6",innerChildren:K.jsxs(K.Fragment,{children:[K.jsx("p",{children:l("artworkCanvasContrast")}),K.jsx(Jy,{value:g,min:-100,max:100,step:1,onChange:ae=>z(parseFloat(ae.target.value),"contrast")})]})})})]})]}),K.jsx("div",{className:"mx-auto flex items-center",ref:te,children:K.jsxs(Fie,{style:{border:"4px solid",borderColor:he},pixelRatio:1,width:T,height:$,ref:u,onMouseDown:P,onTouchStart:P,children:[K.jsx(H4,{listening:!1,children:K.jsx(BF,{front:!1})}),K.jsx(H4,{children:n.map(ae=>K.jsx(Die,{canvasImage:ae,isSelected:c?.id===ae.id,onSelect:()=>D(ae)},ae.id))}),K.jsx(H4,{listening:!1,children:K.jsx(BF,{front:!0})})]})})]})};function zie({id:t,image:e}){const{active:n,attributes:r,listeners:a,setNodeRef:i}=cee({id:t,data:{id:t,image:e,type:"artwork"}});return K.jsx("img",{src:e,alt:t,className:"max-h-[100px] md:max-h-[150px]",style:{display:"inline-block",cursor:"move",paddingRight:"10px",touchAction:"none",width:"auto",opacity:n?.id===t?.4:1},...a,...r,ref:i})}function Bie(){const{t}=ys(),{artworkList:e}=Nc(),n=_.useRef(null),r=a=>{n.current&&(n.current.scrollLeft+=a)};return K.jsxs(ba,{margin:"my-4",className:"flex flex-col flex-wrap gap-2 lg:gap-8 justify-center content-center text-center mx-auto",children:[K.jsx("h1",{className:"text-lg leading-6 px-8 md:px-24 md:text-xl lg:px-48",children:t("artworkTitle")}),K.jsxs(ba,{margin:"my-4",className:"flex flex-row mx-0 gap-1 justify-center",children:[K.jsx("div",{className:"self-center",children:K.jsx(hr,{rounded:!0,inline:!0,onClick:()=>r(-100),children:K.jsx(va,{material:K.jsx(AY,{className:"w-4 h-4 lg:w-6 lg:h-6"})})})}),K.jsx("div",{className:"overflow-auto whitespace-nowrap",ref:n,children:e.map((a,i)=>K.jsx(zie,{...a},a.id+i))}),K.jsx("div",{className:"self-center",children:K.jsx(hr,{rounded:!0,inline:!0,onClick:()=>r(100),children:K.jsx(va,{material:K.jsx(zY,{className:"w-4 h-4 lg:w-6 lg:h-6"})})})})]}),K.jsx(Lie,{})]})}let jie={data:""},Uie=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||jie,Vie=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Wie=/\/\*[^]*?\*\/|  +/g,jF=/\n+/g,ku=(t,e)=>{let n="",r="",a="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?ku(o,i):i+"{"+ku(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=ku(o,e?e.replace(/([^,])+/g,s=>i.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,s):s?s+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=ku.p?ku.p(i,o):i+":"+o+";")}return n+(e&&a?e+"{"+a+"}":a)+r},pl={},UF=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+UF(t[n]);return e}return t},Gie=(t,e,n,r,a)=>{let i=UF(t),o=pl[i]||(pl[i]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(i));if(!pl[o]){let l=i!==t?t:(u=>{let c,d,p=[{}];for(;c=Vie.exec(u.replace(Wie,""));)c[4]?p.shift():c[3]?(d=c[3].replace(jF," ").trim(),p.unshift(p[0][d]=p[0][d]||{})):p[0][c[1]]=c[2].replace(jF," ").trim();return p[0]})(t);pl[o]=ku(a?{["@keyframes "+o]:l}:l,n?"":"."+o)}let s=n&&pl.g?pl.g:null;return n&&(pl.g=pl[o]),((l,u,c,d)=>{d?u.data=u.data.replace(d,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(pl[o],e,r,s),o},Hie=(t,e,n)=>t.reduce((r,a,i)=>{let o=e[i];if(o&&o.call){let s=o(n),l=s&&s.props&&s.props.className||/^go/.test(s)&&s;o=l?"."+l:s&&typeof s=="object"?s.props?"":ku(s,""):s===!1?"":s}return r+a+(o??"")},"");function vv(t){let e=this||{},n=t.call?t(e.p):t;return Gie(n.unshift?n.raw?Hie(n,[].slice.call(arguments,1),e.p):n.reduce((r,a)=>Object.assign(r,a&&a.call?a(e.p):a),{}):n,Uie(e.target),e.g,e.o,e.k)}let VF,q4,K4;vv.bind({g:1});let hl=vv.bind({k:1});function qie(t,e,n,r){ku.p=e,VF=t,q4=n,K4=r}function Su(t,e){let n=this||{};return function(){let r=arguments;function a(i,o){let s=Object.assign({},i),l=s.className||a.className;n.p=Object.assign({theme:q4&&q4()},s),n.o=/ *go\d+/.test(l),s.className=vv.apply(n,r)+(l?" "+l:""),e&&(s.ref=o);let u=t;return t[0]&&(u=s.as||t,delete s.as),K4&&u[0]&&K4(s),VF(u,s)}return e?e(a):a}}var Kie=t=>typeof t=="function",xv=(t,e)=>Kie(t)?t(e):t,Xie=(()=>{let t=0;return()=>(++t).toString()})(),WF=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Qie=20,wv=new Map,Yie=1e3,GF=t=>{if(wv.has(t))return;let e=setTimeout(()=>{wv.delete(t),Bc({type:4,toastId:t})},Yie);wv.set(t,e)},Jie=t=>{let e=wv.get(t);e&&clearTimeout(e)},X4=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Qie)};case 1:return e.toast.id&&Jie(e.toast.id),{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return t.toasts.find(i=>i.id===n.id)?X4(t,{type:1,toast:n}):X4(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?GF(r):t.toasts.forEach(i=>{GF(i.id)}),{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let a=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+a}))}}},kv=[],Sv={toasts:[],pausedAt:void 0},Bc=t=>{Sv=X4(Sv,t),kv.forEach(e=>{e(Sv)})},Zie={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},eoe=(t={})=>{let[e,n]=_.useState(Sv);_.useEffect(()=>(kv.push(n),()=>{let a=kv.indexOf(n);a>-1&&kv.splice(a,1)}),[e]);let r=e.toasts.map(a=>{var i,o;return{...t,...t[a.type],...a,duration:a.duration||((i=t[a.type])==null?void 0:i.duration)||t?.duration||Zie[a.type],style:{...t.style,...(o=t[a.type])==null?void 0:o.style,...a.style}}});return{...e,toasts:r}},toe=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||Xie()}),Sm=t=>(e,n)=>{let r=toe(e,t,n);return Bc({type:2,toast:r}),r.id},Li=(t,e)=>Sm("blank")(t,e);Li.error=Sm("error"),Li.success=Sm("success"),Li.loading=Sm("loading"),Li.custom=Sm("custom"),Li.dismiss=t=>{Bc({type:3,toastId:t})},Li.remove=t=>Bc({type:4,toastId:t}),Li.promise=(t,e,n)=>{let r=Li.loading(e.loading,{...n,...n?.loading});return t.then(a=>(Li.success(xv(e.success,a),{id:r,...n,...n?.success}),a)).catch(a=>{Li.error(xv(e.error,a),{id:r,...n,...n?.error})}),t};var noe=(t,e)=>{Bc({type:1,toast:{id:t,height:e}})},roe=()=>{Bc({type:5,time:Date.now()})},aoe=t=>{let{toasts:e,pausedAt:n}=eoe(t);_.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(s=>{if(s.duration===1/0)return;let l=(s.duration||0)+s.pauseDuration-(i-s.createdAt);if(l<0){s.visible&&Li.dismiss(s.id);return}return setTimeout(()=>Li.dismiss(s.id),l)});return()=>{o.forEach(s=>s&&clearTimeout(s))}},[e,n]);let r=_.useCallback(()=>{n&&Bc({type:6,time:Date.now()})},[n]),a=_.useCallback((i,o)=>{let{reverseOrder:s=!1,gutter:l=8,defaultPosition:u}=o||{},c=e.filter(f=>(f.position||u)===(i.position||u)&&f.height),d=c.findIndex(f=>f.id===i.id),p=c.filter((f,g)=>g<d&&f.visible).length;return c.filter(f=>f.visible).slice(...s?[p+1]:[0,p]).reduce((f,g)=>f+(g.height||0)+l,0)},[e]);return{toasts:e,handlers:{updateHeight:noe,startPause:roe,endPause:r,calculateOffset:a}}},ioe=hl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ooe=hl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,soe=hl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,loe=Su("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ioe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ooe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${soe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,uoe=hl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,coe=Su("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${uoe} 1s linear infinite;
`,doe=hl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,poe=hl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,hoe=Su("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${doe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${poe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,foe=Su("div")`
  position: absolute;
`,moe=Su("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,goe=hl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,yoe=Su("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${goe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,boe=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?_.createElement(yoe,null,e):e:n==="blank"?null:_.createElement(moe,null,_.createElement(coe,{...r}),n!=="loading"&&_.createElement(foe,null,n==="error"?_.createElement(loe,{...r}):_.createElement(hoe,{...r})))},voe=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,xoe=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,woe="0%{opacity:0;} 100%{opacity:1;}",koe="0%{opacity:1;} 100%{opacity:0;}",Soe=Su("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Coe=Su("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Eoe=(t,e)=>{let n=t.includes("top")?1:-1,[r,a]=WF()?[woe,koe]:[voe(n),xoe(n)];return{animation:e?`${hl(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${hl(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Noe=_.memo(({toast:t,position:e,style:n,children:r})=>{let a=t.height?Eoe(t.position||e||"top-center",t.visible):{opacity:0},i=_.createElement(boe,{toast:t}),o=_.createElement(Coe,{...t.ariaProps},xv(t.message,t));return _.createElement(Soe,{className:t.className,style:{...a,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):_.createElement(_.Fragment,null,i,o))});qie(_.createElement);var Toe=({id:t,className:e,style:n,onHeightUpdate:r,children:a})=>{let i=_.useCallback(o=>{if(o){let s=()=>{let l=o.getBoundingClientRect().height;r(t,l)};s(),new MutationObserver(s).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return _.createElement("div",{ref:i,className:e,style:n},a)},Ioe=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:WF()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...a}},_oe=vv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Cv=16,Roe=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:a,containerStyle:i,containerClassName:o})=>{let{toasts:s,handlers:l}=aoe(n);return _.createElement("div",{style:{position:"fixed",zIndex:9999,top:Cv,left:Cv,right:Cv,bottom:Cv,pointerEvents:"none",...i},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},s.map(u=>{let c=u.position||e,d=l.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),p=Ioe(c,d);return _.createElement(Toe,{id:u.id,key:u.id,onHeightUpdate:l.updateHeight,className:u.visible?_oe:"",style:p},u.type==="custom"?xv(u.message,u):a?a(u):_.createElement(Noe,{toast:u,position:c}))}))},$oe=Li,HF={exports:{}},Ooe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Moe=Ooe,Poe=Moe;function qF(){}function KF(){}KF.resetWarningCache=qF;var Foe=function(){function t(r,a,i,o,s,l){if(l!==Poe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:KF,resetWarningCache:qF};return n.PropTypes=n,n};HF.exports=Foe();var Aoe=HF.exports;const xa=Zi(Aoe);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Q4=function(t,e){return Q4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},Q4(t,e)};function XF(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Q4(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var qo=function(){return qo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},qo.apply(this,arguments)};function QF(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function jc(t,e){for(var n=0,r=e.length,a=t.length;n<r;n++,a++)t[a]=e[n];return t}var Doe=function(t){return Object.keys(t).filter(function(e){return t[e]}).join(" ")},Ev=function(t,e){return t.x===e.x&&t.y===e.y},Nv=function(t,e){return!t&&e||t&&!e||t.length!==e.length?!1:t.every(function(n,r){return Ev(n,e[r])})},Uc=function(t,e){var n=t.x,r=t.y;return e===void 0&&(e=1),{x:Math.round((n+Number.EPSILON)*e)/e,y:Math.round((r+Number.EPSILON)*e)/e}},Loe=function(t,e,n){n===void 0&&(n=0);var r=t.findIndex(function(a){return Math.max(Math.abs(a.x-e.x),Math.abs(a.y-e.y))<=n});return{point:qo({},t[r]||{x:NaN,y:NaN}),index:r}},YF=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)},JF=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},zoe=function(t,e,n){var r=YF(t,e),a=JF(t,e),i=Math.round(a/n)*n;return{x:t.x+r*Math.cos(i),y:t.y+r*Math.sin(i)}},Boe=function(t,e,n){var r=YF(t,e),a=JF(t,e),i=n.reduce(function(o,s){return Math.abs(s-a)<Math.abs(o-a)?s:o},1/0);return i!==1/0&&(e.x=t.x+r*Math.cos(i),e.y=t.y+r*Math.sin(i)),e},joe=function(t){for(var e=[],n=1;n<t.length;n++){var r=Math.atan2(t[n].y-t[n-1].y,t[n].x-t[n-1].x),a=r+Math.PI;e.push(r,a>Math.PI?a-2*Math.PI:a)}return e.filter(function(i,o,s){return s.indexOf(i)===o})};function Uoe(t,e,n,r){r===void 0&&(r=!0);var a=new Image;a.crossOrigin="Anonymous";var i=document.createElement("canvas"),o=i.getContext("2d");if(!o)return n(new Error("CTX is null"),i);a.onerror=function(){n(new Error("Failed to load image"),i)},a.onload=function(){try{if(i.width=a.naturalWidth+2,i.height=a.naturalHeight+2,o.drawImage(a,0,0),e.length<3){n(null,i);return}if(o.beginPath(),o.moveTo(0,0),o.lineTo(i.width,0),o.lineTo(i.width,i.height),o.lineTo(0,i.height),o.lineTo(0,0),o.lineTo(e[0].x+1,e[0].y+1),e.slice(1).forEach(function(w){var S=w.x,C=w.y;return o.lineTo(S+1,C+1)}),o.lineTo(e[0].x+1,e[0].y+1),o.lineTo(0,0),o.closePath(),o.clip("evenodd"),o.globalCompositeOperation="destination-out",o.fill(),r){var s=e.map(function(w){var S=w.x;return S+1}),l=e.map(function(w){var S=w.y;return S+1}),u=[Math.min.apply(null,s),Math.min.apply(null,l)],c=u[0],d=u[1],p=[Math.max.apply(null,s),Math.max.apply(null,l)],f=p[0],g=p[1],y=[f-c,g-d],v=y[0],b=y[1],x=o.getImageData(c,d,v,b);i.width=v,i.height=b,o.putImageData(x,0,0)}n(null,i)}catch(w){n(w instanceof Error?w:new Error(String(w)),i)}},a.src=t}var ZF=function(){function t(e){this.getSvgElement=e}return t.prototype.getSvg=function(){var e=this.getSvgElement();if(!e)throw new Error("SVG is null");return e},t.prototype.getCTM=function(){var e=this.getSvg(),n=e.getCTM();if(n===null){var r=e.querySelector('rect[visibility="hidden"]');n=r.getCTM()}if(!n)throw new Error("CTM is null");return n},t.prototype.getViewboxSize=function(){return this.getSvg().viewBox.baseVal},t.prototype.getRealSize=function(){var e=this.getSvg();return{width:e.clientWidth,height:e.clientHeight}},t.prototype.getViewboxOffset=function(){var e=this.getSvg(),n=this.getRealSize(),r=n.width,a=n.height,i=this.getViewboxSize(),o=i.width,s=i.height,l=Object.assign(e.createSVGPoint(),{x:r,y:a}),u=this.getCTM(),c=l.matrixTransform(u.inverse()),d=c.x,p=c.y;return{x:d-o,y:p-s}},t.prototype.convertViewboxPointsToReal=function(e){var n=this.getSvg(),r=this.getCTM();return e.map(function(a){var i=a.x,o=a.y,s=Object.assign(n.createSVGPoint(),{x:i,y:o}).matrixTransform(r);return Uc(s)})},t.prototype.convertRealPointsToViewbox=function(e){var n=this.getSvg(),r=this.getCTM().inverse();return e.map(function(a){var i=a.x,o=a.y,s=Object.assign(n.createSVGPoint(),{x:i,y:o}).matrixTransform(r);return Uc(s,1e3)})},t.prototype.getBorderPoints=function(e){e===void 0&&(e=!0);var n=this.getViewboxSize(),r=n.width,a=n.height,i=this.getViewboxOffset(),o=i.x,s=i.y,l=[{x:-o,y:-s},{x:r+o,y:-s},{x:r+o,y:a+s},{x:-o,y:a+s}];return e&&l.push({x:-o,y:-s}),l},t.prototype.isAboveTheBorder=function(e){var n=e.x,r=e.y,a=this.getViewboxSize(),i=a.width,o=a.height,s=this.getViewboxOffset(),l=s.x,u=s.y;return n<-l||n>i+l||r<-u||r>o+u},t.prototype.getMouseCoordinates=function(e){var n=e,r=n.changedTouches&&n.touches?n.changedTouches[0]||n.touches[0]:n,a=r.clientX,i=r.clientY,o=this.getSvg(),s=o.getScreenCTM();if(!s)throw new Error("ScreenCTM is null");var l=o.createSVGPoint();l.x=a,l.y=i;var u=l.matrixTransform(s.inverse()),c=u.x,d=u.y;return{x:c,y:d}},t}(),eA=function(t){return function(e){XF(n,e);function n(){var r=e!==null&&e.apply(this,arguments)||this;return r.ref=V.createRef(),r.svg=new ZF(function(){var a,i;return(i=(a=r.ref)===null||a===void 0?void 0:a.current)===null||i===void 0?void 0:i.ownerSVGElement}),r.dragLastPosition=null,r.wasMoved=!1,r.onMouseTouchDown=function(a){if(a.target===r.ref.current&&r.props.draggable){a.stopImmediatePropagation(),a.preventDefault();var i=a.target;r.dragLastPosition=r.getMousePosition(a),i.ownerSVGElement&&i.ownerSVGElement.focus({preventScroll:!0})}},r.onMouseTouchMove=function(a){if(r.dragLastPosition){a.stopImmediatePropagation(),a.preventDefault();var i=r.getMousePosition(a),o=i.x,s=i.y,l=o-r.dragLastPosition.x,u=s-r.dragLastPosition.y;!r.wasMoved&&r.props.onDragStart&&r.props.onDragStart({x:r.dragLastPosition.x,y:r.dragLastPosition.y,dx:l,dy:u}),r.props.onDrag&&r.props.onDrag({dx:l,dy:u}),r.dragLastPosition={x:o,y:s},r.wasMoved=!0}},r.onMouseTouchUp=function(a){r.dragLastPosition&&r.wasMoved&&(a.stopImmediatePropagation(),a.preventDefault(),(a instanceof MouseEvent||!a.touches)&&window.addEventListener("click",function(i){return i.stopPropagation()},{capture:!0,once:!0}),r.props.onDragEnd&&r.props.onDragEnd({x:r.dragLastPosition.x,y:r.dragLastPosition.y})),r.dragLastPosition=null,r.wasMoved=!1},r}return n.prototype.render=function(){var r=this.props,a=r.draggable;r.onDrag,r.onDragStart,r.onDragEnd;var i=QF(r,["draggable","onDrag","onDragStart","onDragEnd"]);return V.createElement(t,qo({ref:this.ref},i,{draggable:a}))},n.prototype.componentDidUpdate=function(r){r.draggable&&!this.props.draggable&&this.dragLastPosition&&this.wasMoved&&(this.props.onDragEnd&&this.props.onDragEnd({x:this.dragLastPosition.x,y:this.dragLastPosition.y}),this.dragLastPosition=null,this.wasMoved=!1)},n.prototype.componentDidMount=function(){window.addEventListener("mousedown",this.onMouseTouchDown,!0),window.addEventListener("mousemove",this.onMouseTouchMove,!0),window.addEventListener("mouseup",this.onMouseTouchUp,!0),window.addEventListener("touchstart",this.onMouseTouchDown,!0),window.addEventListener("touchmove",this.onMouseTouchMove,!0),window.addEventListener("touchend",this.onMouseTouchUp,!0)},n.prototype.componentWillUnmount=function(){window.removeEventListener("mousedown",this.onMouseTouchDown),window.removeEventListener("mousemove",this.onMouseTouchMove),window.removeEventListener("mouseup",this.onMouseTouchUp),window.removeEventListener("touchstart",this.onMouseTouchDown),window.removeEventListener("touchmove",this.onMouseTouchMove),window.removeEventListener("touchend",this.onMouseTouchUp)},n.prototype.getMousePosition=function(r){var a=r;return this.svg.getMouseCoordinates(a)},n}(V.Component)},Voe=eA(V.forwardRef(function(t,e){var n=t.path,r=t.animate,a=t.draggable;return V.createElement("polyline",{ref:e,style:{cursor:a?"move":""},points:n.map(function(i){var o=i.x,s=i.y;return o+","+s}).join(" "),fill:"rgba(0,0,0,0)",stroke:"white",strokeWidth:"1.5",shapeRendering:"geometricPrecision",strokeDasharray:"3",strokeDashoffset:"0",vectorEffect:"non-scaling-stroke"},r&&V.createElement("animate",{attributeName:"stroke-dashoffset",values:"0;1000;0",dur:"100s",repeatCount:"indefinite"}))}));function Woe(t){var e=t.path;return V.createElement("polygon",{style:{pointerEvents:"none",transform:"translate(-1px, -1px)"},points:e.map(function(n){var r=n.x,a=n.y;return r+","+a}).join(" "),fill:"rgba(0, 0, 0, 0.5)",fillRule:"evenodd",stroke:"null",shapeRendering:"geometricPrecision"})}var Goe=eA(V.forwardRef(function(t,e){var n=t.x,r=t.y,a=t.onClickTouchEvent,i=t.draggable,o=t.style,s=o.cursor,l=s===void 0?i?"move":"default":s,u=QF(o,["cursor"]);return V.createElement("rect",{style:qo({cursor:l},u),ref:e,x:n-10,y:r-10,onClick:function(c){c.stopPropagation(),c.preventDefault(),a(c)},onTouchEnd:function(c){c.stopPropagation(),c.preventDefault(),a(c)},width:"20px",height:"20",fill:"rgba(0, 0, 0, 0)",stroke:"white",strokeWidth:"1.25",vectorEffect:"non-scaling-stroke"})})),Vr;(function(t){t.ADD="ADD",t.DELETE="DELETE",t.MODIFY="MODIFY",t.MOVE="MOVE",t.RESET="RESET",t.CHANGE="CHANGE"})(Vr||(Vr={}));function Hoe(t,e){var n=t.points.length;switch(e.type){case Vr.ADD:{if(t.closed)return[t,!1];if(n>0&&Ev(t.points[n-1],e.payload)||n>1&&Ev(t.points[n-2],e.payload))return[t,!1];var r=n>2&&Ev(t.points[0],e.payload);return r?[{points:jc([],t.points),closed:!0},!0]:[{points:jc(jc([],t.points,!0),[e.payload]),closed:!1},!0]}case Vr.DELETE:return[{points:jc([],t.points.filter(function(u,c){return e.payload!==c})),closed:n>4&&t.closed},!0];case Vr.MODIFY:{var a=t.points[e.payload.index],i=a.x,o=a.y,s=t.points.map(function(u){var c=u.x,d=u.y;return c===i&&d===o?{x:e.payload.x,y:e.payload.y}:{x:c,y:d}});return[{points:s,closed:t.closed},!!(e.payload.x||e.payload.y)]}case Vr.MOVE:return[{points:t.points.map(function(u){var c=u.x,d=u.y;return{x:c+e.payload.x,y:d+e.payload.y}}),closed:t.closed},!!(e.payload.x||e.payload.y)];case Vr.CHANGE:{var l=!Nv(e.payload,t.points);return[{points:e.payload,closed:l?e.payload.length>2:t.closed},l]}case Vr.RESET:return[{points:[],closed:!1},!!t.points.length];default:return[t,!1]}}var qoe=function(t){XF(e,t);function e(n){var r=t.call(this,n)||this;return r.imageRef=V.createRef(),r.svgRef=V.createRef(),r.svg=new ZF(function(){var a;return(a=r.svgRef)===null||a===void 0?void 0:a.current}),r.angles=[],r.path={points:[],closed:!1},r.lastEmittedPoints=[],r.lastUpdatedPoints=[],r.imgError=!1,r.setPathFromPropsOnMediaLoad=!0,r.hidePointer=function(){var a=r.path.points[r.path.points.length-1]||{x:0,y:0};r.setPointer(qo({},a),!0)},r.onShapeDrag=function(a){var i=a.dx,o=a.dy,s=r.path.points.map(function(l){var u=l.x,c=l.y;return{x:u+i,y:c+o}});s.some(function(l){return r.svg.isAboveTheBorder(l)})||r.dispatchPathAction({type:Vr.MOVE,payload:{x:i,y:o}})},r.onPointDrag=function(a,i){var o=i.dx,s=i.dy,l=qo({},r.path.points[a]);l.x+=o,l.y+=s,r.svg.isAboveTheBorder(l)||r.dispatchPathAction({type:Vr.MODIFY,payload:qo(qo({},l),{index:a})})},r.onPointClick=function(a){r.isLoaded()&&!r.props.disabled&&!r.path.closed&&r.dispatchPathAction({type:Vr.ADD,payload:r.path.points[a]})},r.onDragEnd=function(){r.checkIfPathUpdated(!1)},r.onMediaLoaded=function(a){r.setPathFromPropsOnMediaLoad&&(r.setPathStateFromProps(),r.setPathFromPropsOnMediaLoad=!1),r.imgError=!1,r.props.onImageLoad(a)},r.onMediaError=function(a){r.dispatchPathAction({type:Vr.RESET}),r.imgError=!0,r.props.onImageError(a)},r.onClickTouchEvent=function(a){if(r.isLoaded()&&!r.props.disabled){if(r.path.closed){a.target===r.svgRef.current&&r.dispatchPathAction({type:Vr.RESET});return}var i=r.getMousePosition(a)[0];r.svg.isAboveTheBorder(i)?r.hidePointer():r.dispatchPathAction({type:Vr.ADD,payload:Uc(i,1e3),pointer:i})}},r.onClick=function(a){r.onClickTouchEvent(a)},r.onTouchEnd=function(a){a.cancelable&&(a.preventDefault(),r.onClickTouchEvent(a)),r.hidePointer()},r.onMouseTouchMove=function(a){if(r.isLoaded()){var i=r.getMousePosition(a)[0];r.setPointer(i)}},r.onContextMenu=function(a){if(r.isLoaded()&&(a.preventDefault(),!r.props.disabled&&!r.path.closed)){var i=r.getMousePosition(a),o=i[0],s=i[1].index;s>-1?r.dispatchPathAction({type:Vr.DELETE,payload:s,pointer:o}):r.setPointer(o)}},r.state={path:{points:[],closed:!1},pointer:{x:n.viewBox.width/2,y:n.viewBox.width/2}},r}return e.prototype.render=function(){var n=this;return V.createElement("div",{className:Doe({ReactFreeSelect__Component:!0,ReactFreeSelect__Closed:this.state.path.closed,ReactFreeSelect__Disabled:this.props.disabled}),style:qo({display:"inline-block",position:"relative",margin:"0",padding:"0",fontSize:"0",cursor:this.props.disabled?"not-allowed":"default"},this.props.style)},V.createElement("img",{ref:this.imageRef,src:this.props.src,alt:this.props.imageAlt,crossOrigin:this.props.crossOrigin,style:this.props.imageStyle,onLoad:this.onMediaLoaded,onError:this.onMediaError}),V.createElement("svg",{ref:this.svgRef,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden",userSelect:"none",touchAction:"none"},viewBox:"0 0 "+this.props.viewBox.width+" "+this.props.viewBox.height,onMouseMove:this.onMouseTouchMove,onTouchMove:this.onMouseTouchMove,onClick:this.onClick,onTouchEnd:this.onTouchEnd,onContextMenu:this.onContextMenu,onMouseLeave:this.hidePointer},V.createElement("rect",{visibility:"hidden"}),!!this.state.path.points.length&&V.createElement(Woe,{path:this.getPolygonPoints()}),V.createElement(Voe,{draggable:this.state.path.closed&&!this.props.disabled,onDrag:this.onShapeDrag,onDragEnd:this.onDragEnd,animate:!this.props.disabled,path:this.getPolylinePoints()}),this.getRoundedPoints().map(function(r,a){var i=r.x,o=r.y;return V.createElement(Goe,{key:a,x:i,y:o,draggable:!n.props.disabled,style:{cursor:!a&&n.state.path.points.length>2&&!n.state.path.closed?"pointer":void 0},onDrag:function(s){var l=s.dx,u=s.dy;return n.onPointDrag(a,{dx:l,dy:u})},onDragEnd:n.onDragEnd,onClickTouchEvent:function(){return n.onPointClick(a)}})})))},e.prototype.componentDidUpdate=function(n){!n.disabled&&this.props.disabled&&!this.path.closed&&this.hidePointer(),n.src&&n.src!==this.props.src?this.dispatchPathAction({type:Vr.RESET}):Nv(n.value,this.props.value)||(this.isLoaded()?this.setPathStateFromProps():this.setPathFromPropsOnMediaLoad=!0)},e.prototype.convertPoints=function(n){var r=this.getAspectRatio();return this.svg.convertViewboxPointsToReal(n).map(function(a){var i=a.x,o=a.y;return{x:Math.round(i/r.x),y:Math.round(o/r.y)}})},e.prototype.checkIfPathUpdated=function(n){if(this.path.closed||n){var r=this.convertPoints(this.path.points);Nv(r,this.lastUpdatedPoints)||(this.emitOnComplete(r),this.lastUpdatedPoints=r.map(function(a){var i=a.x,o=a.y;return{x:i,y:o}}))}},e.prototype.emitOnChange=function(n){var r=n.points;if(this.props.onChange){var a=this.convertPoints(r);this.lastEmittedPoints=a,this.props.onChange(a)}},e.prototype.emitOnComplete=function(n){this.props.onComplete&&this.props.onComplete(n)},e.prototype.setPointer=function(n,r){var a=n.x,i=n.y;r===void 0&&(r=!1),(r||!this.props.disabled)&&this.setState({path:this.path,pointer:{x:a,y:i}})},e.prototype.dispatchPathAction=function(n){var r=this.path.closed,a=Hoe(this.path,n),i=a[0],o=a[1];i.points=i.points.map(function(s){return Uc(s,1e3)}),o&&(this.path=i,this.setState({pointer:n.pointer||this.path.points[this.path.points.length-1]||{x:0,y:0},path:i}),this.angles=joe(i.points),this.emitOnChange(i),[Vr.MODIFY,Vr.MOVE].includes(n.type)||this.checkIfPathUpdated(r))},e.prototype.isLoaded=function(){if(this.imgError||!this.svgRef.current)return!1;var n=this.svgRef.current;return!!(n.width.baseVal.value&&n.height.baseVal.value)},e.prototype.getAspectRatio=function(){return this.imageRef.current?{x:this.imageRef.current.clientWidth/this.imageRef.current.naturalWidth,y:this.imageRef.current.clientHeight/this.imageRef.current.naturalHeight}:{x:NaN,y:NaN}},e.prototype.setPathStateFromProps=function(){if(!Nv(this.lastEmittedPoints,this.props.value)){var n=this.getAspectRatio(),r=this.svg.convertRealPointsToViewbox(this.props.value.map(function(a){var i=a.x,o=a.y;return{x:i*n.x,y:o*n.y}}));this.dispatchPathAction({type:Vr.CHANGE,payload:r})}},e.prototype.getRoundedPoints=function(){return this.state.path.points.map(function(n){return Uc(n)})},e.prototype.getBorder=function(){return this.svg.getBorderPoints().map(function(n){return Uc(n)}).map(function(n){var r=n.x,a=n.y;return{x:r-1,y:a+1}})},e.prototype.getPolygonPoints=function(){var n=this.getRoundedPoints(),r=this.getBorder();return this.state.path.closed?jc(jc(jc([],r,!0),n,!0),[n[0],r[0]]):r},e.prototype.getPolylinePoints=function(){var n=this.getRoundedPoints();return n.concat(this.state.path.closed?n[0]:Uc(this.state.pointer))},e.prototype.getMousePosition=function(n,r,a){r===void 0&&(r=!0),a===void 0&&(a=!0);var i=this.svg.getMouseCoordinates(n);if(a){var o=navigator.platform.includes("Mac")?n.metaKey:n.ctrlKey,s=this.path.points[this.path.points.length-1];o&&s&&(n.shiftKey?i=Boe(s,i,this.angles):i=zoe(s,i,Math.PI/12))}var l=Loe(this.path.points,i,10),u=l.point,c=l.index;return r&&c>-1&&(i=qo({},u)),[i,{point:u,index:c}]},e.propTypes={value:xa.arrayOf(xa.exact({x:xa.number.isRequired,y:xa.number.isRequired})),style:xa.shape({}),viewBox:xa.exact({width:xa.number.isRequired,height:xa.number.isRequired}),disabled:xa.bool,onChange:xa.func,onComplete:xa.func,src:xa.string.isRequired,imageAlt:xa.string,crossOrigin:xa.string,imageStyle:xa.shape({}),onImageLoad:xa.func,onImageError:xa.func},e.defaultProps={value:[],style:{},imageStyle:{},viewBox:{width:1e3,height:1e3},disabled:!1,onImageError:Function.prototype,onImageLoad:Function.prototype},e}(V.Component);let Tv;const Koe=new Uint8Array(16);function Xoe(){if(!Tv&&(Tv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Tv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tv(Koe)}const wa=[];for(let t=0;t<256;++t)wa.push((t+256).toString(16).slice(1));function Qoe(t,e=0){return wa[t[e+0]]+wa[t[e+1]]+wa[t[e+2]]+wa[t[e+3]]+"-"+wa[t[e+4]]+wa[t[e+5]]+"-"+wa[t[e+6]]+wa[t[e+7]]+"-"+wa[t[e+8]]+wa[t[e+9]]+"-"+wa[t[e+10]]+wa[t[e+11]]+wa[t[e+12]]+wa[t[e+13]]+wa[t[e+14]]+wa[t[e+15]]}const Yoe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),tA={randomUUID:Yoe};function nA(t,e,n){if(tA.randomUUID&&!e&&!t)return tA.randomUUID();t=t||{};const r=t.random||(t.rng||Xoe)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let a=0;a<16;++a)e[n+a]=r[a];return e}return Qoe(r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Joe=1e-7,Zoe=1e-4;class Y4{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Iv{refCount(e){return zi("refCount")}incRef(e){return zi("incRef")}timerAvailable(){return!0}time(e){return zi("time")}read(e){return zi("read")}readSync(e){return zi("readSync")}readToGPU(e,n){return zi("readToGPU")}numDataIds(){return zi("numDataIds")}disposeData(e,n){return zi("disposeData")}write(e,n,r){return zi("write")}move(e,n,r,a,i){return zi("move")}memory(){return zi("memory")}floatPrecision(){return zi("floatPrecision")}epsilon(){return this.floatPrecision()===32?Joe:Zoe}dispose(){return zi("dispose")}}function zi(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rA(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,fl(t,e,n)}function ese(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,fl(t,n,r),fl(e,n,r)}function Cu(t,e,n){return Math.max(t,Math.min(e,n))}function _v(t){return t%2===0?t:t+1}function fl(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function aA(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function tse(t,e){const n=Math.random();return e*n+(1-n)*t}function nse(t,e){let n=0;for(let r=0;r<t.length;r++){const a=Number(t[r])-Number(e[r]);n+=a*a}return n}function U(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function na(t,e,n=""){U(Sn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Vc(t){U(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ml(t,e=[],n=!1){if(e==null&&(e=[]),Array.isArray(t)||ka(t)&&!n)for(let r=0;r<t.length;++r)ml(t[r],e,n);else e.push(t);return e}function be(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function rse(t){return t.length===0}function Sn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Wc(t){return t%1===0}function ase(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function Rv(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function ise(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return rA(e),e}function Gc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function J4(t,e=a=>0,n,r=setTimeout){return new Promise((a,i)=>{let o=0;const s=()=>{if(t()){a();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r(s,l)};s()})}function Z4(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const a=t.slice();return a[r]=e/n,a}function Jt(t,e){const n=e.length;return t=t==null?e.map((r,a)=>a):[].concat(t),U(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),U(t.every(r=>Wc(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function gl(t,e){const n=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||a?null:Jt(e,t).sort();let o=0;for(let s=0;s<t.length;++s){if(i!=null){if(i[o]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(i[o]==null||i[o]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),i[o]<=s&&o++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function $r(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Or(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function iA(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function oA(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function eN(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function ka(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function $v(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function sA(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function ks(t){return typeof t=="string"||t instanceof String}function lA(t){return typeof t=="boolean"}function uA(t){return typeof t=="number"}function Ap(t){return Array.isArray(t)?Ap(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":uA(t)?"float32":ks(t)?"string":lA(t)?"bool":"float32"}function Eu(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Ov(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function rt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function cA(t,e,n,r=!1){const a=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)a[o]=n[t+o]}else{const i=e[0],o=e.slice(1),s=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<i;l++)a[l]=cA(t+l*s,o,n,r)}return a}function Bi(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((a,i)=>a*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return cA(0,t,e,n)}function Mv(t,e){const n=ra(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function ra(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function tN(t,e){const n=t.reduce((r,a)=>r*a,1);if(e==null||e==="float32")return Bi(t,new Float32Array(n));if(e==="int32")return Bi(t,new Int32Array(n));if(e==="bool")return Bi(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function nN(t){t.forEach(e=>{U(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Ko(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let a=0;a<t.length-1;++a)r+=n[a]*t[a];return r}function Hc(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(t/n[a]),t-=r[a]*n[a];return r[r.length-1]=t,r}function qc(t){return t&&t.then&&typeof t.then=="function"}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dA="tfjsflags";class pA{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ose,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(me().getBool("IS_TEST")||me().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const a=this.urlFlags[e];me().getBool("IS_TEST")||me().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${a}.`),this.set(e,a)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(qc(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);dA in e&&e[dA].split(",").forEach(n=>{const[r,a]=n.split(":");this.urlFlags[r]=lse(r,a)})}}function ose(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(sse(e,r[0],r[1]),r.join("="))),e}function sse(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function lse(t,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function me(){return rN}let rN=null;function use(t){rN=t}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/let aN;function hA(){if(aN==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");aN=t}return aN}function cse(){const t=hA();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function iN(t,e){const n=cse();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Pv="Abs",Cm="Acos",Em="Acosh",Dp="Add",Fv="AddN",Av="All",Dv="Any",Lv="ArgMax",zv="ArgMin",Nm="Asin",Tm="Asinh",Im="Atan",_m="Atanh",Rm="Atan2",Bv="AvgPool",oN="AvgPoolGrad",jv="AvgPool3D",sN="AvgPool3DGrad",Uv="BatchMatMul",Vv="BatchToSpaceND",Wv="Bincount",dse="BroadcastTo",Gv="BroadcastArgs",$m="Cast",Om="Ceil",Mm="ClipByValue",Hv="Complex",qv="ComplexAbs",Kv="Concat",Xv="Conv2D",Qv="Conv2DBackpropFilter",Yv="Conv2DBackpropInput",Jv="Conv3D",lN="Conv3DBackpropFilterV2",Zv="Conv3DBackpropInputV2",Pm="Cos",Fm="Cosh",ex="Cumprod",tx="Cumsum",nx="CropAndResize",rx="DenseBincount",ax="DepthToSpace",ix="DepthwiseConv2dNative",ox="DepthwiseConv2dNativeBackpropFilter",sx="DepthwiseConv2dNativeBackpropInput",lx="Diag",ux="Dilation2D",uN="Dilation2DBackpropInput",cN="Dilation2DBackpropFilter",Am="RealDiv",cx="Einsum",Dm="Elu",dN="EluGrad",Lm="Erf",zm="Equal",Bm="Exp",dx="ExpandDims",jm="Expm1",px="FFT",hx="Fill",fx="FlipLeftRight",Um="Floor",Vm="FloorDiv",mx="FusedBatchNorm",gx="GatherV2",yx="GatherNd",Wm="Greater",Gm="GreaterEqual",Hm="Identity",bx="IFFT",vx="Imag",qm="IsFinite",Km="IsInf",Xm="IsNan",xx="LeakyRelu",Qm="Less",Ym="LessEqual",wx="LinSpace",Jm="Log",Zm="Log1p",eg="LogicalAnd",tg="LogicalNot",ng="LogicalOr",pse="LogicalXor",hse="LogSoftmax",fse="LowerBound",kx="LRN",pN="LRNGrad",Sx="Max",rg="Maximum",Cx="MaxPool",hN="MaxPoolGrad",Ex="MaxPool3D",fN="MaxPool3DGrad",Nx="MaxPoolWithArgmax",Tx="Mean",Ix="Min",ag="Minimum",_x="MirrorPad",ig="Mod",Rx="Multinomial",og="Multiply",$x="Neg",sg="NotEqual",Ox="NonMaxSuppressionV3",Mx="NonMaxSuppressionV4",Px="NonMaxSuppressionV5",Fx="OnesLike",Ax="OneHot",Dx="Pack",Lx="PadV2",mse="Pool",lg="Pow",zx="Prelu",Bx="Prod",jx="RaggedGather",Ux="RaggedTensorToTensor",Vx="Range",Wx="Real",ug="Reciprocal",cg="Relu",Gx="Reshape",Hx="ResizeNearestNeighbor",mN="ResizeNearestNeighborGrad",qx="ResizeBilinear",gN="ResizeBilinearGrad",dg="Relu6",Kx="Reverse",pg="Round",hg="Rsqrt",Xx="ScatterNd",Qx="SearchSorted",Yx="Select",fg="Selu",Jx="Slice",mg="Sin",gg="Sinh",yg="Sign",bg="Sigmoid",vg="Softplus",xg="Sqrt",Zx="Sum",e2="SpaceToBatchND",t2="SplitV",n2="Softmax",r2="SparseFillEmptyRows",a2="SparseReshape",i2="SparseSegmentMean",o2="SparseSegmentSum",s2="SparseToDense",wg="SquaredDifference",yN="Square",l2="StridedSlice",u2="StringNGrams",c2="StringSplit",d2="StringToHashBucketFast",kg="Sub",Sg="Tan",Cg="Tanh",Eg="Tile",p2="TopK",h2="Transform",Lp="Transpose",f2="Unique",m2="Unpack",g2="UnsortedSegmentSum",gse="UpperBound",y2="ZerosLike",Ng="Step",b2="FromPixels",v2="RotateWithOffset",Tg="_FusedMatMul",Ig="FusedConv2D",_g="FusedDepthwiseConv2D";/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ji(...t){me().getBool("IS_TEST")||me().getBool("PROD")||console.warn(...t)}function yse(...t){me().getBool("IS_TEST")||me().getBool("PROD")||console.log(...t)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zp=iN("kernelRegistry",()=>new Map),Rg=iN("gradRegistry",()=>new Map);function x2(t,e){const n=vN(t,e);return zp.get(n)}function bN(t){return Rg.get(t)}function w2(t){const e=zp.entries(),n=[];for(;;){const{done:r,value:a}=e.next();if(r)break;const[i,o]=a,[s]=i.split("_");s===t&&n.push(o)}return n}function k2(t){const{kernelName:e,backendName:n}=t,r=vN(e,n);zp.has(r)&&ji(`The kernel '${e}' for backend '${n}' is already registered`),zp.set(r,t)}function bse(t){const{kernelName:e}=t;Rg.has(e)&&me().getBool("DEBUG")&&ji(`Overriding the gradient for '${e}'`),Rg.set(e,t)}function vse(t,e){const n=vN(t,e);if(!zp.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);zp.delete(n)}function xse(t){if(!Rg.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);Rg.delete(t)}function wse(t,e){w2(t).forEach(n=>{const r=Object.assign({},n,{backendName:e});k2(r)})}function vN(t,e){return`${e}_${t}`}var fA=An,co=null;try{co=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function An(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}An.prototype.__isLong__,Object.defineProperty(An.prototype,"__isLong__",{value:!0});function xi(t){return(t&&t.__isLong__)===!0}An.isLong=xi;var mA={},gA={};function Kc(t,e){var n,r,a;return e?(t>>>=0,(a=0<=t&&t<256)&&(r=gA[t],r)?r:(n=Dn(t,(t|0)<0?-1:0,!0),a&&(gA[t]=n),n)):(t|=0,(a=-128<=t&&t<128)&&(r=mA[t],r)?r:(n=Dn(t,t<0?-1:0,!1),a&&(mA[t]=n),n))}An.fromInt=Kc;function po(t,e){if(isNaN(t))return e?Xc:ho;if(e){if(t<0)return Xc;if(t>=bA)return SA}else{if(t<=-vA)return wi;if(t+1>=vA)return kA}return t<0?po(-t,e).neg():Dn(t%Bp|0,t/Bp|0,e)}An.fromNumber=po;function Dn(t,e,n){return new An(t,e,n)}An.fromBits=Dn;var S2=Math.pow;function xN(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return ho;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return xN(t.substring(1),e,n).neg();for(var a=po(S2(n,8)),i=ho,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+s),n);if(s<8){var u=po(S2(n,s));i=i.mul(u).add(po(l))}else i=i.mul(a),i=i.add(po(l))}return i.unsigned=e,i}An.fromString=xN;function Xo(t,e){return typeof t=="number"?po(t,e):typeof t=="string"?xN(t,e):Dn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}An.fromValue=Xo;var yA=65536,kse=1<<24,Bp=yA*yA,bA=Bp*Bp,vA=bA/2,xA=Kc(kse),ho=Kc(0);An.ZERO=ho;var Xc=Kc(0,!0);An.UZERO=Xc;var jp=Kc(1);An.ONE=jp;var wA=Kc(1,!0);An.UONE=wA;var wN=Kc(-1);An.NEG_ONE=wN;var kA=Dn(-1,2147483647,!1);An.MAX_VALUE=kA;var SA=Dn(-1,-1,!0);An.MAX_UNSIGNED_VALUE=SA;var wi=Dn(0,-2147483648,!1);An.MIN_VALUE=wi;var Fe=An.prototype;Fe.toInt=function(){return this.unsigned?this.low>>>0:this.low},Fe.toNumber=function(){return this.unsigned?(this.high>>>0)*Bp+(this.low>>>0):this.high*Bp+(this.low>>>0)},Fe.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(wi)){var e=po(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var a=po(S2(t,6),this.unsigned),i=this,o="";;){var s=i.div(a),l=i.sub(s.mul(a)).toInt()>>>0,u=l.toString(t);if(i=s,i.isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},Fe.getHighBits=function(){return this.high},Fe.getHighBitsUnsigned=function(){return this.high>>>0},Fe.getLowBits=function(){return this.low},Fe.getLowBitsUnsigned=function(){return this.low>>>0},Fe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(wi)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1},Fe.isZero=function(){return this.high===0&&this.low===0},Fe.eqz=Fe.isZero,Fe.isNegative=function(){return!this.unsigned&&this.high<0},Fe.isPositive=function(){return this.unsigned||this.high>=0},Fe.isOdd=function(){return(this.low&1)===1},Fe.isEven=function(){return(this.low&1)===0},Fe.equals=function(t){return xi(t)||(t=Xo(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},Fe.eq=Fe.equals,Fe.notEquals=function(t){return!this.eq(t)},Fe.neq=Fe.notEquals,Fe.ne=Fe.notEquals,Fe.lessThan=function(t){return this.comp(t)<0},Fe.lt=Fe.lessThan,Fe.lessThanOrEqual=function(t){return this.comp(t)<=0},Fe.lte=Fe.lessThanOrEqual,Fe.le=Fe.lessThanOrEqual,Fe.greaterThan=function(t){return this.comp(t)>0},Fe.gt=Fe.greaterThan,Fe.greaterThanOrEqual=function(t){return this.comp(t)>=0},Fe.gte=Fe.greaterThanOrEqual,Fe.ge=Fe.greaterThanOrEqual,Fe.compare=function(t){if(xi(t)||(t=Xo(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Fe.comp=Fe.compare,Fe.negate=function(){return!this.unsigned&&this.eq(wi)?wi:this.not().add(jp)},Fe.neg=Fe.negate,Fe.add=function(t){xi(t)||(t=Xo(t));var e=this.high>>>16,n=this.high&65535,r=this.low>>>16,a=this.low&65535,i=t.high>>>16,o=t.high&65535,s=t.low>>>16,l=t.low&65535,u=0,c=0,d=0,p=0;return p+=a+l,d+=p>>>16,p&=65535,d+=r+s,c+=d>>>16,d&=65535,c+=n+o,u+=c>>>16,c&=65535,u+=e+i,u&=65535,Dn(d<<16|p,u<<16|c,this.unsigned)},Fe.subtract=function(t){return xi(t)||(t=Xo(t)),this.add(t.neg())},Fe.sub=Fe.subtract,Fe.multiply=function(t){if(this.isZero())return ho;if(xi(t)||(t=Xo(t)),co){var e=co.mul(this.low,this.high,t.low,t.high);return Dn(e,co.get_high(),this.unsigned)}if(t.isZero())return ho;if(this.eq(wi))return t.isOdd()?wi:ho;if(t.eq(wi))return this.isOdd()?wi:ho;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(xA)&&t.lt(xA))return po(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,r=this.high&65535,a=this.low>>>16,i=this.low&65535,o=t.high>>>16,s=t.high&65535,l=t.low>>>16,u=t.low&65535,c=0,d=0,p=0,f=0;return f+=i*u,p+=f>>>16,f&=65535,p+=a*u,d+=p>>>16,p&=65535,p+=i*l,d+=p>>>16,p&=65535,d+=r*u,c+=d>>>16,d&=65535,d+=a*l,c+=d>>>16,d&=65535,d+=i*s,c+=d>>>16,d&=65535,c+=n*u+r*l+a*s+i*o,c&=65535,Dn(p<<16|f,c<<16|d,this.unsigned)},Fe.mul=Fe.multiply,Fe.divide=function(t){if(xi(t)||(t=Xo(t)),t.isZero())throw Error("division by zero");if(co){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?co.div_u:co.div_s)(this.low,this.high,t.low,t.high);return Dn(e,co.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Xc:ho;var n,r,a;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Xc;if(t.gt(this.shru(1)))return wA;a=Xc}else{if(this.eq(wi)){if(t.eq(jp)||t.eq(wN))return wi;if(t.eq(wi))return jp;var i=this.shr(1);return n=i.div(t).shl(1),n.eq(ho)?t.isNegative()?jp:wN:(r=this.sub(t.mul(n)),a=n.add(r.div(t)),a)}else if(t.eq(wi))return this.unsigned?Xc:ho;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=ho}for(r=this;r.gte(t);){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),s=o<=48?1:S2(2,o-48),l=po(n),u=l.mul(t);u.isNegative()||u.gt(r);)n-=s,l=po(n,this.unsigned),u=l.mul(t);l.isZero()&&(l=jp),a=a.add(l),r=r.sub(u)}return a},Fe.div=Fe.divide,Fe.modulo=function(t){if(xi(t)||(t=Xo(t)),co){var e=(this.unsigned?co.rem_u:co.rem_s)(this.low,this.high,t.low,t.high);return Dn(e,co.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},Fe.mod=Fe.modulo,Fe.rem=Fe.modulo,Fe.not=function(){return Dn(~this.low,~this.high,this.unsigned)},Fe.and=function(t){return xi(t)||(t=Xo(t)),Dn(this.low&t.low,this.high&t.high,this.unsigned)},Fe.or=function(t){return xi(t)||(t=Xo(t)),Dn(this.low|t.low,this.high|t.high,this.unsigned)},Fe.xor=function(t){return xi(t)||(t=Xo(t)),Dn(this.low^t.low,this.high^t.high,this.unsigned)},Fe.shiftLeft=function(t){return xi(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Dn(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Dn(0,this.low<<t-32,this.unsigned)},Fe.shl=Fe.shiftLeft,Fe.shiftRight=function(t){return xi(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Dn(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Dn(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Fe.shr=Fe.shiftRight,Fe.shiftRightUnsigned=function(t){if(xi(t)&&(t=t.toInt()),t&=63,t===0)return this;var e=this.high;if(t<32){var n=this.low;return Dn(n>>>t|e<<32-t,e>>>t,this.unsigned)}else return t===32?Dn(e,0,this.unsigned):Dn(e>>>t-32,0,this.unsigned)},Fe.shru=Fe.shiftRightUnsigned,Fe.shr_u=Fe.shiftRightUnsigned,Fe.toSigned=function(){return this.unsigned?Dn(this.low,this.high,!1):this},Fe.toUnsigned=function(){return this.unsigned?this:Dn(this.low,this.high,!0)},Fe.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Fe.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},Fe.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]},An.fromBytes=function(t,e,n){return n?An.fromBytesLE(t,e):An.fromBytesBE(t,e)},An.fromBytesLE=function(t,e){return new An(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},An.fromBytesBE=function(t,e){return new An(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};const CA=Zi(fA),Sse=nS({__proto__:null,default:CA},[fA]);/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Qc=CA||Sse;function $g(t){return Qc.fromString(t,!0,16)}const EA=$g("c3a5c85c97cb3127"),Yc=$g("b492b66fbe98f273"),ja=$g("9ae16a3b2f90404f");function kN(t){return t.xor(t.shru(47))}function NA(t,e,n){const r=t.slice(e,e+n);return Qc.fromBytes(Array.from(r),!0,!0)}function In(t,e){return NA(t,e,8)}function TA(t,e){return NA(t,e,4)}function Wr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Nu(t,e,n=$g("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let a=e.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function Cse(t,e,n,r,a,i){a=a.add(t),i=Wr(i.add(a).add(r),21);const o=a;return a=a.add(e),a=a.add(n),i=i.add(Wr(a,44)),[a.add(r),i.add(o)]}function C2(t,e,n,r){return Cse(In(t,e),In(t,e+8),In(t,e+16),In(t,e+24),n,r)}function Ese(t,e=t.length){if(e>=8){const n=ja.add(e*2),r=In(t,0).add(ja),a=In(t,e-8),i=Wr(a,37).mul(n).add(r),o=Wr(r,25).add(a).mul(n);return Nu(i,o,n)}if(e>=4){const n=ja.add(e*2),r=TA(t,0);return Nu(r.shl(3).add(e),TA(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],a=t[e-1],i=n+(r<<8),o=e+(a<<2);return kN(ja.mul(i).xor(EA.mul(o))).mul(ja)}return ja}function Nse(t,e=t.length){const n=ja.add(e*2),r=In(t,0).mul(Yc),a=In(t,8),i=In(t,e-8).mul(n),o=In(t,e-16).mul(ja);return Nu(Wr(r.add(a),43).add(Wr(i,30)).add(o),r.add(Wr(a.add(ja),18)).add(i),n)}function Tse(t,e=t.length){const n=ja.add(e*2),r=In(t,0).mul(ja),a=In(t,8),i=In(t,e-8).mul(n),o=In(t,e-16).mul(ja),s=Wr(r.add(a),43).add(Wr(i,30)).add(o),l=Nu(s,r.add(Wr(a.add(ja),18)).add(i),n),u=In(t,16).mul(n),c=In(t,24),d=s.add(In(t,e-32)).mul(n),p=l.add(In(t,e-24)).mul(n);return Nu(Wr(u.add(c),43).add(Wr(d,30)).add(p),u.add(Wr(c.add(r),18)).add(d),n)}function IA(t,e=t.length){const n=Qc.fromNumber(81,!0);if(e<=32)return e<=16?Ese(t,e):Nse(t,e);if(e<=64)return Tse(t,e);let r=n,a=n.mul(Yc).add(113),i=kN(a.mul(ja).add(113)).mul(ja),o=[Qc.UZERO,Qc.UZERO],s=[Qc.UZERO,Qc.UZERO];r=r.mul(ja).add(In(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=Wr(r.add(a).add(o[0]).add(In(t,l+8)),37).mul(Yc),a=Wr(a.add(o[1]).add(In(t,l+48)),42).mul(Yc),r=r.xor(s[1]),a=a.add(o[0]).add(In(t,l+40)),i=Wr(i.add(s[0]),33).mul(Yc),o=C2(t,l,o[1].mul(Yc),r.add(s[0])),s=C2(t,l+32,i.add(s[1]),a.add(In(t,l+16))),[i,r]=[r,i],l+=64;while(l!==u);const d=Yc.add(i.and(255).shl(1));return l=c,s[0]=s[0].add(e-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=Wr(r.add(a).add(o[0]).add(In(t,l+8)),37).mul(d),a=Wr(a.add(o[1]).add(In(t,l+48)),42).mul(d),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(In(t,l+40))),i=Wr(i.add(s[0]),33).mul(d),o=C2(t,l,o[1].mul(d),r.add(s[0])),s=C2(t,l+32,i.add(s[1]),a.add(In(t,l+16))),[i,r]=[r,i],Nu(Nu(o[0],s[0],d).add(kN(a).mul(EA)).add(i),Nu(o[1],s[1],d).add(r),d)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yl(t,e){return e==="string"?Ss(t):Tu([t],e)}function Ise(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Tu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ml(t)),me().getBool("DEBUG")&&iA(t,e),Ise(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function ki(){return me().platform.now()}function _se(t,e){return me().platform.fetch(t,e)}function Ss(t,e="utf-8"){return e=e||"utf-8",me().platform.encode(t,e)}function bl(t,e="utf-8"){return e=e||"utf-8",me().platform.decode(t,e)}const Rse=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:Sn,assert:U,assertNonNegativeIntegerDimensions:nN,assertNonNull:Vc,assertShapesMatch:na,bytesFromStringArray:sA,bytesPerElement:$v,checkConversionForErrors:iA,clamp:Cu,computeStrides:rt,createScalarValue:yl,createShuffledIndices:ise,decodeString:bl,distSquared:nse,encodeString:Ss,fetch:_se,fingerPrint64:IA,flatten:ml,getArrayFromDType:Or,getTypedArrayFromDType:$r,hasEncodingLoss:eN,hexToLong:$g,indexToLoc:Hc,inferDtype:Ap,inferFromImplicitShape:Z4,isBoolean:lA,isFunction:Eu,isInt:Wc,isNumber:uA,isPromise:qc,isScalarShape:rse,isString:ks,isTypedArray:ka,isValidDtype:oA,locToIndex:Ko,makeOnesTypedArray:Mv,makeZerosNestedTypedArray:tN,makeZerosTypedArray:ra,nearestDivisor:Ov,nearestLargerEven:_v,now:ki,parseAxisParam:Jt,randUniform:tse,repeatedTry:J4,rightPad:Gc,shuffle:rA,shuffleCombo:ese,sizeFromShape:be,sizeToSquarishShape:Rv,squeezeShape:gl,sum:aA,swap:fl,tanh:ase,toNestedArray:Bi,toTypedArray:Tu},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class $se{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Mse)}profileKernel(e,n,r){let a;const i=()=>{a=r()};let o;const s=ki();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const l of a)l.dataSync();o=Promise.resolve({kernelMs:ki()-s})}if(me().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<a.length;l++){const u=a[l];u.data().then(c=>{Ose(c,u.dtype,e)})}return{kernelName:e,outputs:a,inputs:n,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:a,inputs:i,extraInfo:o}=e;r.forEach(s=>{Promise.all([s.data(),a,o]).then(l=>{this.logger.logKernelProfile(n,s,l[0],l[1],i,l[2])})})}}function Ose(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const a=t[r];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}class Mse{logKernelProfile(e,n,r,a,i,o){const s=typeof a=="number"?Gc(`${a}ms`,9):a.error,l=Gc(e,25),u=n.rank,c=n.size,d=Gc(n.shape.toString(),14);let p="";for(const f in i){const g=i[f];if(g!=null){const y=g.shape||n.shape,v=y.length;p+=`${f}: ${v}D ${v>0?y:""} `}}console.log(`%c${l}	%c${s}	%c${u}D ${d}	%c${c}	%c${p}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pse(t,e,n){const r={},a={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const d in c){const p=c[d];let f=!1;for(let g=0;g<e.length;g++)if(r[p.id]){u.outputs.forEach(y=>r[y.id]=!0),f=!0,a[u.id]=!0;break}if(f)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(i[u.outputs[d].id]){for(const p in c)i[c[p].id]=!0,o[u.id]=!0;break}}const s=[];for(let l=0;l<t.length;l++){const u=t[l];if(a[u.id]&&o[u.id]){const c={};for(const p in u.inputs){const f=u.inputs[p];r[f.id]&&(c[p]=f)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,s.push(d)}}return s}function Fse(t,e,n,r){for(let a=e.length-1;a>=0;a--){const i=e[a],o=[];if(i.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const s=i.gradient(o);for(const l in i.inputs){if(!(l in s))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(s)}.`);const u=n(()=>s[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=i.inputs[l];if(!Sn(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const d=t[c.id];t[c.id]=r(d,u),d.dispose()}}}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _A=20,Og=3,SN=7;function Ase(t,e,n,r){const a=rt(e),i=Dse(t,e,n,a),o=e.length,s=E2(t,e,n,a,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(s.map(u=>"    "+u).join(`
`)),l.join(`
`)}function Dse(t,e,n,r){const a=be(e),i=r[r.length-1],o=new Array(i).fill(0),s=e.length,l=n==="complex64"?Pg(t):t;if(s>1)for(let u=0;u<a/i;u++){const c=u*i;for(let d=0;d<i;d++)o[d]=Math.max(o[d],Mg(l[c+d],0,n).length)}return o}function Mg(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(SN))} + ${parseFloat(t[1].toFixed(SN))}j`:ks(t)?r=`'${t}'`:n==="bool"?r=RA(t):r=parseFloat(t.toFixed(SN)).toString(),Gc(r,e)}function RA(t){return t===0?"false":"true"}function E2(t,e,n,r,a,i=!0){const o=n==="complex64"?2:1,s=e[0],l=e.length;if(l===0){if(n==="complex64"){const y=Pg(t);return[Mg(y[0],0,n)]}return n==="bool"?[RA(t[0])]:[t[0].toString()]}if(l===1){if(s>_A){const y=Og*o;let v=Array.from(t.slice(0,y)),b=Array.from(t.slice((s-Og)*o,s*o));return n==="complex64"&&(v=Pg(v),b=Pg(b)),["["+v.map((x,w)=>Mg(x,a[w],n)).join(", ")+", ..., "+b.map((x,w)=>Mg(x,a[s-Og+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?Pg(t):Array.from(t)).map((y,v)=>Mg(y,a[v],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),d=r[0]*o,p=[];if(s>_A){for(let y=0;y<Og;y++){const v=y*d,b=v+d;p.push(...E2(t.slice(v,b),u,n,c,a,!1))}p.push("...");for(let y=s-Og;y<s;y++){const v=y*d,b=v+d;p.push(...E2(t.slice(v,b),u,n,c,a,y===s-1))}}else for(let y=0;y<s;y++){const v=y*d,b=v+d;p.push(...E2(t.slice(v,b),u,n,c,a,y===s-1))}const f=l===2?",":"";p[0]="["+p[0]+f;for(let y=1;y<p.length-1;y++)p[y]=" "+p[y]+f;let g=`,
`;for(let y=2;y<l;y++)g+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":g),p}function Pg(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Mr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=be(e),r!=null){const a=r.length;U(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Or(n,this.size),this.strides=rt(e)}set(e,...n){n.length===0&&(n=[0]),U(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const a of e){if(a<0||a>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=this.strides[a]*e[a];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Qo().makeTensor(this.values,this.shape,this.dtype)}}let Qo=null,Up=null;function Lse(t){Qo=t}function zse(t){Up=t}class Xn{constructor(e,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=be(e),this.strides=rt(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Up.buffer(this.shape,this.dtype,e)}bufferSync(){return Up.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Bi(this.shape,e,this.dtype==="complex64")}arraySync(){return Bi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Qo().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>bl(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Qo().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Qo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>bl(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Qo().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(Qo().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Up.print(this,e)}clone(){return this.throwIfDisposed(),Up.clone(this)}toString(e=!1){const n=this.dataSync();return Ase(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Up.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Qo().makeVariable(this,e,n,r)}}Object.defineProperty(Xn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Bse(){return iN("Tensor",()=>Xn)}Bse();class Fg extends Xn{constructor(e,n,r,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Sn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Qo().disposeTensor(this),this.dataId=e.dataId,Qo().incRef(this,null)}dispose(){Qo().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Fg,Symbol.hasInstance,{value:t=>t instanceof Xn&&t.assign!=null&&t.assign instanceof Function});/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var CN;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(CN||(CN={}));var EN;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(EN||(EN={}));var NN;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(NN||(NN={}));var TN;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(TN||(TN={}));var IN;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(IN||(IN={}));const jse={float32:TN,int32:EN,bool:NN,complex64:IN};function si(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return jse[t][e]}function N2(t){return si(t,"int32")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qn(t,e){if(t.dtype===e.dtype)return[t,e];const n=si(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function $A(t,e){U(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function Use(t,e){return e.some(n=>n.id===t.id)}function _N(t){const e=[];return OA(t,e,new Set),e}function OA(t,e,n){if(t==null)return;if(t instanceof Xn){e.push(t);return}if(!Vse(t))return;const r=t;for(const a in r){const i=r[a];n.has(i)||(n.add(i),OA(i,e,n))}}function Vse(t){return Array.isArray(t)||typeof t=="object"}const Wse=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:$A,getTensorsInContainer:_N,isTensorInList:Use,makeTypesMatch:Qn},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function RN(t){return t.kernelName!=null}class MA{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class _h{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new MA}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(ji(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new $se(this.backendInstance),!0}setupRegisteredKernels(){w2(this.backendName).forEach(e=>{e.setupFunc!=null&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){w2(e).forEach(n=>{n.disposeFunc!=null&&n.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof Iv)&&typeof r.then=="function"){const a=++this.pendingBackendInitId,i=r.then(o=>a<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,ji(`Initialization of backend ${e} failed`),ji(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return ji(`Initialization of backend ${e} failed`),ji(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:a,asyncInit:i}=this.initializeBackend(r);if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n),o=a.refCount(n);a.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let a;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(a),()=>(a=n(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(e,n,r){e();try{const a=r();return n(),a}catch(a){throw n(),a}}nextTensorId(){return _h.nextTensorId++}nextVariableId(){return _h.nextVariableId++}clone(e){const n=re.runKernel(Hm,{x:e}),r={x:e},a=o=>({x:()=>{const s="float32",l={x:o},u={dtype:s};return re.runKernel($m,l,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,x2(e,this.backendName)==null)throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const a=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-i-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const a=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let l;const u=RN(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(RN(e)){const{kernelName:g,inputs:y,attrs:v}=e;this.backendName==null&&this.backend;const b=x2(g,this.backendName);U(b!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),s=()=>{const x=this.backend.numDataIds();l=b.kernelFunc({inputs:y,attrs:v,backend:this.backend});const w=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,x,w);const S=w.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(a){const C=this.getTensorsForGradient(g,y,S);r=this.saveTensorsForBackwardMode(C)}return S}}else{const{forwardFunc:g}=e,y=v=>{a&&(r=v.map(b=>this.keep(this.clone(b))))};s=()=>{const v=this.backend.numDataIds();l=this.tidy(()=>g(this.backend,y));const b=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,v,b),b}}const{inputs:c,attrs:d}=e,p=RN(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=s():(f=this.profiler.profileKernel(u,c,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),a&&this.addTapeNode(u,c,n,p,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(g=>c[g]!=null?c[g].shape:null),outputShapes:n.map(g=>g.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(n=>this.keep(this.clone(n)))}getTensorsForGradient(e,n,r){const a=bN(e);if(a!=null){const i=a.inputsToSave||[],o=a.outputsToSave||[];let s;a.saveAllInputs?(U(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(n).map(u=>n[u])):s=i.map(u=>n[u]);const l=r.filter((u,c)=>o[c]);return s.concat(l)}return[]}makeTensor(e,n,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;let i=e;r==="string"&&ks(e[0])&&(i=e.map(l=>Ss(l)));const o=a.write(i,n,r),s=new Xn(n,r,o,this.nextTensorId());if(this.trackTensor(s,a),r==="string"){const l=this.state.tensorInfo.get(o),u=sA(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return s}makeTensorFromDataId(e,n,r,a){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,a)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:a,dtype:i}=e,o=new Xn(a,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,a){r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));const i=new Fg(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*$v(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Fg||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*$v(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,a,i,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=bN(e);l!=null&&(a=l.gradFunc),a!=null&&(s.gradient=u=>(u=u.map((c,d)=>{if(c==null){const p=r[d],f=ra(p.size,p.dtype);return this.makeTensor(f,p.shape,p.dtype)}return c}),a(u.length>1?u:u[0],i,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=_N(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===a.id&&this.track(i)})}gradients(e,n,r,a=!1){if(U(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));U(i instanceof Xn,()=>"The result y returned by f() must be a tensor.");const o=Pse(this.state.activeTape,n,i);if(!a&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const s={};s[i.id]=r??Gse(i.shape),Fse(s,o,u=>this.tidy(u),Hse);const l=n.map(u=>s[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return U(Eu(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{U(n.every(s=>s instanceof Xn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const a={};n.forEach((s,l)=>{a[l]=s});const i=(s,l)=>(r=e(...n,l),U(r.value instanceof Xn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),U(Eu(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(s,l)=>{const u=r.gradFunc(s,l),c=Array.isArray(u)?u:[u];U(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),U(c.every(p=>p instanceof Xn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((p,f)=>{d[f]=()=>p}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=ki(),r=await this.backend.time(e);return r.wallMs=ki()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new MA;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}_h.nextTensorId=0,_h.nextVariableId=0;function Gse(t){const e=Mv(be(t),"float32");return re.makeTensor(e,t,"float32")}function PA(){const t=hA();if(t._tfengine==null){const e=new pA(t);t._tfengine=new _h(e)}return use(t._tfengine.ENV),Lse(()=>t._tfengine),t._tfengine}const re=PA();function Hse(t,e){const n={a:t,b:e};return re.runKernel(Dp,n)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qse(){return typeof navigator<"u"&&navigator!=null}let $N;function Kse(t){$N=t}function ON(t){if($N!==void 0)return $N;if(t||qse()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function MN(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const Xse=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:MN,isMobile:ON,mockIsMobile:Kse},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Si=me();Si.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Si.registerFlag("IS_BROWSER",()=>MN()),Si.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"),Si.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),Si.registerFlag("PROD",()=>!1),Si.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Si.getBool("DEBUG")),Si.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),Si.registerFlag("IS_TEST",()=>!1),Si.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),Si.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),Si.registerFlag("ENGINE_COMPILE_ONLY",()=>!1),Si.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),Si.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cs(t,e){let n=t;if(ka(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||ka(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&me().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&FA(t,r,[]),r}function FA(t,e,n){if(n=n||[],!Array.isArray(t)&&!ka(t)){U(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}U(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),U(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let a=0;a<t.length;++a)FA(t[a],r,n.concat(a))}function AA(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function j(t,e,n,r="numeric"){if(t instanceof Xn)return AA(r,t.dtype,e,n),t;let a=Ap(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),AA(r,a,e,n),t==null||!ka(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const s=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${s}'`)}const i=Cs(t,a);!ka(t)&&!Array.isArray(t)&&(t=[t]);const o=a!=="string"?Tu(t,a):ml(t,[],!0);return re.makeTensor(o,i,a)}function Ag(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((a,i)=>j(a,`${e}[${i}]`,n,r))}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const PN="__op";function ne(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+PN;const a=(...i)=>{re.startScope(n);try{const o=r(...i);return qc(o)&&console.error("Cannot return a Promise inside of tidy."),re.endScope(o),o}catch(o){throw re.endScope(null),o}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qse(t,e){const n=j(t,"real","complex"),r=j(e,"imag","complex");na(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const a={real:n,imag:r};return re.runKernel(Hv,a)}const vl=ne({complex_:Qse});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Iu(t,e,n,r){if(r==null&&(r=Ap(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ka(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){nN(e);const a=be(e),i=be(n);U(a===i,()=>`Based on the provided shape, [${e}], the tensor should have ${a} values but has ${i}`);for(let o=0;o<n.length;++o){const s=n[o],l=o===n.length-1?s!==be(e.slice(o)):!0;U(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!ka(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Tu(t,r):ml(t,[],!0),re.makeTensor(t,e,r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yo(t,e,n){const r=Cs(t,n);return Iu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const FN={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const T2=4;async function Yse(t,e){const n=[],r=[],a=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<a.length;++o){const s=a[o],l=Array.isArray(t)?t[o].tensor:t[s];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${s}': ${l.dtype}`);const u={name:s,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const p=await l.bytes(),f=p.reduce((v,b)=>v+b.length,0)+T2*p.length,g=new Uint8Array(f);let y=0;for(let v=0;v<p.length;v++){const b=p[v],x=new Uint8Array(new Uint32Array([b.length]).buffer);g.set(x,y),y+=T2,g.set(b,y),y+=b.length}d(g)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const i=await Promise.all(r);return{data:Jse(i),specs:n}}function DA(t,e){const n={};let r,a=0;for(const i of e){const o=i.name,s=i.dtype,l=i.shape,u=be(l);let c;if("quantization"in i){const d=i.quantization;if(d.dtype==="uint8"||d.dtype==="uint16"){if(!("min"in d&&"scale"in d))throw new Error(`Weight ${i.name} with quantization ${d.dtype} doesn't have corresponding metadata min and scale.`)}else if(d.dtype==="float16"){if(s!=="float32")throw new Error(`Weight ${i.name} is quantized with ${d.dtype} which only supports weights of type float32 not ${s}.`)}else throw new Error(`Weight ${i.name} has unknown quantization dtype ${d.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const p=FN[d.dtype],f=t.slice(a,a+u*p),g=d.dtype==="uint8"?new Uint8Array(f):new Uint16Array(f);if(s==="float32")if(d.dtype==="uint8"||d.dtype==="uint16"){c=new Float32Array(g.length);for(let y=0;y<g.length;y++){const v=g[y];c[y]=v*d.scale+d.min}}else if(d.dtype==="float16")r===void 0&&(r=ale()),c=r(g);else throw new Error(`Unsupported quantization type ${d.dtype} for weight type float32.`);else if(s==="int32"){if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error(`Unsupported quantization type ${d.dtype} for weight type int32.`);c=new Int32Array(g.length);for(let y=0;y<g.length;y++){const v=g[y];c[y]=Math.round(v*d.scale+d.min)}}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);a+=u*p}else if(s==="string"){const d=be(i.shape);c=[];for(let p=0;p<d;p++){const f=new Uint32Array(t.slice(a,a+T2))[0];a+=T2;const g=new Uint8Array(t.slice(a,a+f));c.push(g),a+=f}}else{const d=FN[s],p=t.slice(a,a+u*d);if(s==="float32")c=new Float32Array(p);else if(s==="int32")c=new Int32Array(p);else if(s==="bool")c=new Uint8Array(p);else if(s==="complex64"){c=new Float32Array(p);const f=new Float32Array(c.length/2),g=new Float32Array(c.length/2);for(let b=0;b<f.length;b++)f[b]=c[b*2],g[b]=c[b*2+1];const y=Yo(f,l,"float32"),v=Yo(g,l,"float32");n[o]=vl(y,v),y.dispose(),v.dispose()}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);a+=u*d}s!=="complex64"&&(n[o]=Yo(c,l,s))}return n}function Jse(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let a=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}const AN=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function LA(t){return AN?Buffer.byteLength(t):new Blob([t]).size}function Zse(t){if(AN)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function ele(t){if(AN){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function DN(t){if(t.length===1)return t[0];let e=0;t.forEach(a=>{e+=a.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(a=>{n.set(new Uint8Array(a),r),r+=a.byteLength}),n.buffer}function zA(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function BA(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function jA(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),r}async function LN(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),jA(t,n,r)}function Dg(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:LA(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:LA(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}function UA(t){const e=[];for(const n of t)e.push(...n.weights);return e}function tle(){const t=n=>{let r=n<<13,a=0;for(;!(r&8388608);)a-=8388608,r<<=1;return r&=-8388609,a+=947912704,r|a},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function nle(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function rle(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function ale(){const t=tle(),e=nle(),n=rle();return r=>{const a=new ArrayBuffer(4*r.length),i=new Uint32Array(a);for(let o=0;o<r.length;o++){const s=r[o],l=t[n[s>>10]+(s&1023)]+e[s>>10];i[o]=l}return new Float32Array(a)}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Yn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Yn.instance==null&&(Yn.instance=new Yn),Yn.instance}static registerSaveRouter(e){Yn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Yn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Yn.getHandlers(e,"save")}static getLoadHandlers(e,n){return Yn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const a=[];return(n==="load"?Yn.getInstance().loadRouters:Yn.getInstance().saveRouters).forEach(i=>{const o=i(e,r);o!==null&&a.push(o)}),a}}const ile=t=>Yn.registerSaveRouter(t),ole=t=>Yn.registerLoadRouter(t),sle=t=>Yn.getSaveHandlers(t),lle=(t,e)=>Yn.getLoadHandlers(t,e);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zN="tensorflowjs",BN=1,Jc="models_store",_u="model_info_store";function VA(){if(!me().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function jN(t){const e=t.result;e.createObjectStore(Jc,{keyPath:"modelPath"}),e.createObjectStore(_u,{keyPath:"modelPath"})}class Zc{constructor(e){if(this.indexedDB=VA(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,a)=>{const i=this.indexedDB.open(zN,BN);i.onupgradeneeded=()=>jN(i),i.onsuccess=()=>{const o=i.result;if(n==null){const s=o.transaction(Jc,"readonly"),l=s.objectStore(Jc).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return o.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=u=>(o.close(),a(l.error)),s.oncomplete=()=>o.close()}else{const s=Dg(n),l=o.transaction(_u,"readwrite");let u=l.objectStore(_u);const c=u.put({modelPath:this.modelPath,modelArtifactsInfo:s});let d;c.onsuccess=()=>{d=o.transaction(Jc,"readwrite");const p=d.objectStore(Jc).put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:s});p.onsuccess=()=>r({modelArtifactsInfo:s}),p.onerror=f=>{u=l.objectStore(_u);const g=u.delete(this.modelPath);g.onsuccess=()=>(o.close(),a(p.error)),g.onerror=y=>(o.close(),a(p.error))}},c.onerror=p=>(o.close(),a(c.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},i.onerror=o=>a(i.error)})}}Zc.URL_SCHEME="indexeddb://";const WA=t=>me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Zc.URL_SCHEME)?ule(t.slice(Zc.URL_SCHEME.length)):null;Yn.registerSaveRouter(WA),Yn.registerLoadRouter(WA);function ule(t){return new Zc(t)}function cle(t){return t.startsWith(Zc.URL_SCHEME)?t.slice(Zc.URL_SCHEME.length):t}class dle{constructor(){this.indexedDB=VA()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(zN,BN);r.onupgradeneeded=()=>jN(r),r.onsuccess=()=>{const a=r.result,i=a.transaction(_u,"readonly"),o=i.objectStore(_u).getAll();o.onsuccess=()=>{const s={};for(const l of o.result)s[l.modelPath]=l.modelArtifactsInfo;e(s)},o.onerror=s=>(a.close(),n(o.error)),i.oncomplete=()=>a.close()},r.onerror=a=>n(r.error)})}async removeModel(e){return e=cle(e),new Promise((n,r)=>{const a=this.indexedDB.open(zN,BN);a.onupgradeneeded=()=>jN(a),a.onsuccess=()=>{const i=a.result,o=i.transaction(_u,"readwrite"),s=o.objectStore(_u),l=s.get(e);let u;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=s.delete(e),d=()=>{u=i.transaction(Jc,"readwrite");const p=u.objectStore(Jc).delete(e);p.onsuccess=()=>n(l.result.modelArtifactsInfo),p.onerror=f=>r(l.error)};c.onsuccess=d,c.onerror=p=>(d(),i.close(),r(l.error))}},l.onerror=c=>(i.close(),r(l.error)),o.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},a.onerror=i=>r(a.error)})}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xl="/",Vp="tensorflowjs_models",GA="info",ple="model_topology",hle="weight_specs",fle="weight_data",mle="model_metadata";function HA(t){return{info:[Vp,t,GA].join(xl),topology:[Vp,t,ple].join(xl),weightSpecs:[Vp,t,hle].join(xl),weightData:[Vp,t,fle].join(xl),modelMetadata:[Vp,t,mle].join(xl)}}function qA(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function gle(t){const e=t.split(xl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(xl)}function yle(t){return t.startsWith(ed.URL_SCHEME)?t.slice(ed.URL_SCHEME.length):t}class ed{constructor(e){if(!me().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=HA(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Dg(e);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Zse(e.weightData));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:a}}catch{throw qA(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=a;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const s=JSON.parse(i);n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy,s.signature!=null&&(n.signature=s.signature),s.userDefinedMetadata!=null&&(n.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(n.modelInitializer=s.modelInitializer),s.trainingConfig!=null&&(n.trainingConfig=s.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=ele(o),n}}ed.URL_SCHEME="localstorage://";const KA=t=>me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ed.URL_SCHEME)?ble(t.slice(ed.URL_SCHEME.length)):null;Yn.registerSaveRouter(KA),Yn.registerLoadRouter(KA);function ble(t){return new ed(t)}class vle{constructor(){U(me().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),U(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Vp+xl,r=xl+GA;for(let a=0;a<this.LS.length;++a){const i=this.LS.key(a);if(i.startsWith(n)&&i.endsWith(r)){const o=gle(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=yle(e);const n=HA(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return qA(n),r}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Wp="://";class Xa{constructor(){this.managers={}}static getInstance(){return Xa.instance==null&&(Xa.instance=new Xa),Xa.instance}static registerManager(e,n){U(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Wp)&&(e=e.slice(0,e.indexOf(Wp))),U(e.length>0,()=>"scheme must not be an empty string.");const r=Xa.getInstance();U(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Xa.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Xa.getInstance().managers)}}function I2(t){if(t.indexOf(Wp)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Xa.getSchemes().join(",")}`);return{scheme:t.split(Wp)[0],path:t.split(Wp)[1]}}async function XA(t,e,n=!1){U(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Yn.getLoadHandlers(t);U(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),U(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const a=r[0],i=Yn.getSaveHandlers(e);U(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),U(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],s=I2(t).scheme,l=I2(t).path,u=s===I2(t).scheme,c=await a.load();n&&u&&await Xa.getManager(s).removeModel(l);const d=await o.save(c);return n&&!u&&await Xa.getManager(s).removeModel(l),d.modelArtifactsInfo}async function xle(){const t=Xa.getSchemes(),e={};for(const n of t){const r=await Xa.getManager(n).listModels();for(const a in r){const i=n+Wp+a;e[i]=r[a]}}return e}async function wle(t){const e=I2(t);return Xa.getManager(e.scheme).removeModel(e.path)}async function kle(t,e){return XA(t,e,!1)}async function Sle(t,e){return XA(t,e,!0)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Cle{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(!window||!me().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const a=this.functionRefs[r.data.index];a(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}}if(me().get("IS_BROWSER")){me().setPlatform("browser",new Cle);try{Xa.registerManager(ed.URL_SCHEME,new vle)}catch{}try{Xa.registerManager(Zc.URL_SCHEME,new dle)}catch{}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ele={importFetch:()=>require("node-fetch")};let UN;class Nle{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return me().global.fetch!=null?me().global.fetch(e,n):(UN==null&&(UN=Ele.importFetch()),UN(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}}me().get("IS_NODE")&&!me().get("IS_BROWSER")&&me().setPlatform("node",new Nle);/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tt(t,e="float32",n){return e=e||"float32",nN(t),new Mr(t,e,n)}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tle(t,e){const n=j(t,"x","cast");if(!oA(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:e};return re.runKernel($m,r,a)}const Un=ne({cast_:Tle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ile(t){const e={x:j(t,"x","clone","string_or_numeric")};return re.runKernel(Hm,e)}const wl=ne({clone_:Ile});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function VN(t,e=!1){console.log(t.toString(e))}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/PA();const _le={buffer:Tt,cast:Un,clone:wl,print:VN};zse(_le);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Rle="model",$le=".json",Ole=".weights.bin";function QA(t){return new Promise(e=>setTimeout(e)).then(t)}class xd{constructor(e){if(!me().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(xd.URL_SCHEME)&&(e=e.slice(xd.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Rle),this.modelJsonFileName=e+$le,this.weightDataFileName=e+Ole}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=BA(e,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await QA(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;s.download=this.weightDataFileName,s.href=n,await QA(()=>s.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Dg(e)}}}}xd.URL_SCHEME="downloads://";class Mle{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=a=>{const i=JSON.parse(a.target.result),o=i.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const s=LN(i,l=>this.loadWeights(l));e(s)},r.onerror=a=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const a=this.checkManifestAndWeightFiles(e),i=r.map(o=>this.loadWeightsFile(o,a[o]));return Promise.all(i).then(o=>[n,DN(o)])}loadWeightsFile(e,n){return new Promise((r,a)=>{const i=new FileReader;i.onload=o=>{const s=o.target.result;r(s)},i.onerror=o=>a(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>zA(i.name)),a={};for(const i of e)i.paths.forEach(o=>{const s=zA(o);if(n.indexOf(s)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(n.push(s),r.indexOf(s)===-1)throw new Error(`Weight file with basename '${s}' is not provided.`);a[o]=this.weightsFiles[r.indexOf(s)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return a}}const Ple=t=>me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(xd.URL_SCHEME)?Fle(t.slice(xd.URL_SCHEME.length)):null;Yn.registerSaveRouter(Ple);function Fle(t="model"){return new xd(t)}function Ale(t){return new Mle(t)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function YA(t,e,n,r){o(t),n=n??0,r=r??1,s(n,r);let a=0;const i=l=>(l.then(u=>{const c=n+ ++a/t.length*(r-n);return e(c),u}),l);function o(l){U(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function s(l,u){U(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),U(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),U(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(i))}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function JA(t,e){e==null&&(e={});const n=e.fetchFunc==null?me().platform.fetch:e.fetchFunc,r=t.map(u=>n(u,e.requestInit,{isBinary:!0})),a=0,i=.5,o=(e.onProgress==null?await Promise.all(r):await YA(r,e.onProgress,a,i)).map(u=>u.arrayBuffer());return e.onProgress==null?await Promise.all(o):await YA(o,e.onProgress,.5,1)}async function Dle(t,e="",n,r){return ZA(a=>JA(a,{requestInit:r}))(t,e,n)}function ZA(t){return async(e,n="",r)=>{const a=e.map(()=>!1),i={},o=r!=null?r.map(()=>!1):[],s=[];if(e.forEach((f,g)=>{let y=0;f.weights.forEach(v=>{const b="quantization"in v?v.quantization.dtype:v.dtype,x=FN[b]*be(v.shape),w=()=>{a[g]=!0,i[g]==null&&(i[g]=[]),i[g].push({manifestEntry:v,groupOffset:y,sizeBytes:x})};r!=null?r.forEach((S,C)=>{S===v.name&&(w(),o[C]=!0)}):w(),s.push(v.name),y+=x})}),!o.every(f=>f)){const f=r.filter((g,y)=>!o[y]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${s.join(", ")}.`)}const l=a.reduce((f,g,y)=>(g&&f.push(y),f),[]),u=[];l.forEach(f=>{e[f].paths.forEach(g=>{const y=n+(n.endsWith("/")?"":"/")+g;u.push(y)})});const c=await t(u),d={};let p=0;return l.forEach(f=>{const g=e[f].paths.length;let y=0;for(let w=0;w<g;w++)y+=c[p+w].byteLength;const v=new ArrayBuffer(y),b=new Uint8Array(v);let x=0;for(let w=0;w<g;w++){const S=new Uint8Array(c[p+w]);b.set(S,x),x+=S.byteLength}i[f].forEach(w=>{const S=v.slice(w.groupOffset,w.groupOffset+w.sizeBytes),C=DA(S,[w.manifestEntry]);for(const E in C)d[E]=C[E]}),p+=g}),d}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Lle="application/octet-stream",zle="application/json";class WN{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(U(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=me().platform.fetch,U(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&U(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=BA(e,r);n.body.append("model.json",new Blob([JSON.stringify(a)],{type:zle}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:Lle}),"model.weights.bin");const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:Dg(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=n.modelTopology,a=n.weightsManifest;if(r==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return LN(n,i=>this.loadWeights(i))}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,a]=Ble(n),i=this.weightPathPrefix||r,o=UA(e),s=[],l=[];for(const c of e)for(const d of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(d)):s.push(i+d+a);this.weightUrlConverter&&s.push(...await Promise.all(l));const u=await JA(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,DN(u)]}}WN.URL_SCHEME_REGEX=/^https?:\/\//;function Ble(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),a=n>e?t.substring(n):"";return[r+"/",a]}function GN(t){return t.match(WN.URL_SCHEME_REGEX)!=null}const e9=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>GN(r)):n=GN(t),n)return HN(t,e)}return null};Yn.registerSaveRouter(e9),Yn.registerLoadRouter(e9);function HN(t,e){return new WN(t,e)}function jle(t,e){return HN(t,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class qN{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class t9{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class Ule{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function Vle(t,e,n,r){const a=arguments;return new Ule(n9(...a))}function n9(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new qN(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new qN({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new qN({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function Wle(t){return new t9(t)}function Gle(t){return new t9(t)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const KN=Object.freeze(Object.defineProperty({__proto__:null,browserFiles:Ale,browserHTTPRequest:jle,concatenateArrayBuffers:DN,copyModel:kle,decodeWeights:DA,encodeWeights:Yse,fromMemory:Vle,fromMemorySync:n9,getLoadHandlers:lle,getModelArtifactsForJSON:LN,getModelArtifactsForJSONSync:jA,getModelArtifactsInfoForJSON:Dg,getSaveHandlers:sle,getWeightSpecs:UA,http:HN,isHTTPScheme:GN,listModels:xle,loadWeights:Dle,moveModel:Sle,registerLoadRouter:ole,registerSaveRouter:ile,removeModel:wle,weightsLoaderFactory:ZA,withSaveHandler:Wle,withSaveHandlerSync:Gle},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hle(t,e,n=!1,r=!1){let a=j(t,"a","matMul"),i=j(e,"b","matMul");[a,i]=Qn(a,i);const o={a,b:i},s={transposeA:n,transposeB:r};return re.runKernel(Uv,o,s)}const pn=ne({matMul_:Hle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qle(t,e,n=1,r=0,a="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:j(t,"indices","oneHot","int32")},o={dtype:a,depth:e,onValue:n,offValue:r};return re.runKernel(Ax,i,o)}const _2=ne({oneHot_:qle});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kle(){me().set("PROD",!0)}function Xle(){me().set("DEBUG",!0)}function Qle(){me().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Yle(t){me().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Jle(){re.disposeVariables()}function kl(){return re}function Zle(){return re.memory()}function eue(t){return re.profile(t)}function Xt(t,e){return re.tidy(t,e)}function Sa(t){_N(t).forEach(e=>e.dispose())}function Es(t){return re.keep(t)}function tue(t){return re.time(t)}function nue(t){return re.setBackend(t)}function rue(){return re.ready()}function aue(){return re.backendName}function iue(t){re.removeBackend(t)}function oue(t){return re.findBackend(t)}function sue(t){return re.findBackendFactory(t)}function XN(t,e,n=1){return re.registerBackend(t,e,n)}function lue(){return re.backend}function uue(t,e){me().setPlatform(t,e)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cue(t){const e={input:j(t,"input","imag")};return re.runKernel(vx,e)}const Lg=ne({imag_:cue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function due(t){const e={x:j(t,"x","neg")};return re.runKernel($x,e)}const Ns=ne({neg_:due});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pue(t){const e={input:j(t,"input","real")};return re.runKernel(Wx,e)}const Gp=ne({real_:pue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hue(t,e,n){const r=j(t,"x","transpose");if(e==null&&(e=r.shape.map((o,s)=>s).reverse()),U(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{U(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const a={x:r},i={perm:e};return r.dtype==="complex64"?Xt(()=>{let o=Gp(r),s=Lg(r);return o=re.runKernel(Lp,{x:o},i),s=re.runKernel(Lp,{x:s},i),n&&(s=Ns(s)),vl(o,s)}):re.runKernel(Lp,a,i)}const zg=ne({transpose_:hue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fue(t,e,n){const r=j(t,"labels","confusionMatrix"),a=j(e,"predictions","confusionMatrix");U(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),U(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),U(a.rank===1,()=>`Expected the rank of predictions to be 1, but got ${a.rank}`),U(r.shape[0]===a.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${a.shape[0]}. Labels and predictions should have the same number of elements.`),U(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const i=_2(Un(r,"int32"),n),o=_2(Un(a,"int32"),n),s=zg(i),l=pn(s,o);return Un(l,"int32")}const mue=ne({confusionMatrix_:fue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gue=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:mue},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function td(t,e){const n=t.length,r=[];for(let a=0;a<n;a++){const i=n-1-a,o=t[i]||1;(e[e.length-1-a]||1)>1&&o===1&&r.unshift(i)}return r}function QN(t,e){const n=[];for(let r=0;r<e.length;r++){const a=t[t.length-r-1],i=e.length-r-1,o=e[i];(a==null||a===1&&o>1)&&n.unshift(i)}return n}function Ut(t,e){const n=[],r=Math.max(t.length,e.length);for(let a=0;a<r;a++){let i=t[t.length-a-1];i==null&&(i=1);let o=e[e.length-a-1];if(o==null&&(o=1),i===1)n.unshift(o);else if(o===1)n.unshift(i);else if(i!==o){const s=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(s)}else n.unshift(i)}return n}const yue=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:Ut,getBroadcastDims:td,getReductionAxes:QN},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function YN(t,e,n){if(Vc(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Cs(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Iu(t,e,r,n)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/let nd;function r9(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)s=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(x2(b2,re.backendName)!=null){const p={pixels:t},f={numChannels:e};return re.runKernel(b2,p,f)}const[l,u]=a?[t.videoWidth,t.videoHeight]:[t.width,t.height];let c;if(o)c=t.getContext("2d").getImageData(0,0,l,u).data;else if(r||n)c=t.data;else if(i||a||s){if(nd==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")nd=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else nd=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});nd.canvas.width=l,nd.canvas.height=u,nd.drawImage(t,0,0,l,u),c=nd.getImageData(0,0,l,u).data}let d;if(e===4)d=new Int32Array(c);else{const p=l*u;d=new Int32Array(p*e);for(let f=0;f<p;f++)for(let g=0;g<e;++g)d[f*e+g]=c[f*4+g]}return YN(d,[u,l,e],"int32")}function bue(t){return t!=null&&t.data instanceof Uint8Array}function vue(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function xue(t){return t!=null&&t.width!==0&&t.height!==0}function wue(t){return vue()&&!(t instanceof ImageBitmap)&&xue(t)&&!bue(t)}async function kue(t,e=3){let n=null;if(me().getBool("WRAP_TO_IMAGEBITMAP")&&wue(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return r9(n,e)}async function a9(t,e){let n=j(t,"img","toPixels");if(!(t instanceof Xn)){const u=n;n=Un(u,"int32"),u.dispose()}if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,a]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2];if(i>4||i===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${i}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const o=await n.data(),s=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(a*r*4);for(let u=0;u<r*a;++u){const c=[0,0,0,255];for(let p=0;p<i;p++){const f=o[u*i+p];if(n.dtype==="float32"){if(f<0||f>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${f}.`)}else if(n.dtype==="int32"&&(f<0||f>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${f}.`);i===1?(c[0]=f*s,c[1]=f*s,c[2]=f*s):c[p]=f*s}const d=u*4;l[d+0]=Math.round(c[0]),l[d+1]=Math.round(c[1]),l[d+2]=Math.round(c[2]),l[d+3]=Math.round(c[3])}if(e!=null){e.width=a,e.height=r;const u=e.getContext("2d"),c=new ImageData(l,a,r);u.putImageData(c,0,0)}return n!==t&&n.dispose(),l}const i9=ne({fromPixels_:r9}),Sue=Object.freeze(Object.defineProperty({__proto__:null,fromPixels:i9,fromPixelsAsync:kue,toPixels:a9},Symbol.toStringTag,{value:"Module"}));function R2(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(be(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const a=e.shape,i=a[a.length-1];let o=1;for(let d=0;d<a.length-1;++d)o*=a[d];const s=t.shape,l=a.slice();l.pop();let u=1;for(let d=i;d<n;++d)u*=s[d],l.push(s[d]);const c=[...rt(t.shape).map(d=>d/u),1].slice(0,i);return[l,o,u,c]}const Cue=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:R2},Symbol.toStringTag,{value:"Module"}));function JN(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(i+` update.rank < ${a}. `);if(t.length<r+(n.rank-a))throw new Error(i+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+t.length-r)throw new Error(i+` update.rank != ${a+t.length-r}`);for(let o=0;o<a;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-a;++o)if(n.shape[o+a]!==t[o+r])throw new Error(i+` updates.shape[${o+a}] (${n.shape[o+a]}) != shape[${o+a}] (${t[o+a]})`)}function ZN(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}JN(n,e,t)}function Hp(t,e,n){const r=e.shape.length,a=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let d=a;d<i;++d)o*=n[d];const s=a<1?1:a,l=be(e.shape)/s,u=[...rt(n.slice(0,a)),1],c=be(n);return{sliceRank:a,numUpdates:l,sliceSize:o,strides:u,outputSize:c}}const Eue=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Hp,validateInput:ZN,validateUpdateShape:JN},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const eT=-2,Nue=-1;function tT(t,e,n){const r=t.shape.length;U(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),U(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)U(e[a]+n[a]<=t.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${e[a]+n[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function Tue(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function nT(t,e,n){const r=[];for(let a=0;a<t.length;a++)r[a]=Math.ceil((e[a]-t[a])/n[a]);return r}function o9(t,e,n,r){const a=[...t];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)i===0?a[e]=1:(a.splice(e,0,1),a.pop());return a}function s9(t,e,n){return n<=t?n:n-(e-1)}function l9(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Iue(t,e,n,r,a,i,o,s,l){const u=t.length;let c=new Array(u),d=new Array(u),p=new Array(u);if(e.length&&n>0){const f=e[0],g=n+1;c=u9(o,f,g,r,t),d=c9(s,f,g,a,t),p=o9(i,f,g,t)}else for(let f=0;f<u;f++)c[f]=p9(o,r,i,t,f,l),d[f]=h9(s,a,i,t,f,l),p[f]=d9(i,f,l);return{begin:c,end:d,strides:p}}function u9(t,e,n,r,a){const i=[...a],o=l9(n,e);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{const l=s9(e,n,s);let u=r[l];t&1<<l&&(u=0),i[s]=u}return i}function c9(t,e,n,r,a){const i=[...a],o=l9(n,e);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{const l=s9(e,n,s);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[s]=u}for(let s=0;s<i.length;s++){const l=a[s];i[s]<0&&(i[s]+=l),i[s]=Cu(0,i[s],a[s])}return i}function d9(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function p9(t,e,n,r,a,i){let o=e[a];const s=n[a]||1;(t&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),o=Cu(0,o,l-1),o}function h9(t,e,n,r,a,i){let o=e[a];const s=n[a]||1;(t&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),s>0?o=Cu(0,o,l):o=Cu(-1,o,l-1),o}function rT(t,e,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(e[a]>0||n[a]!==t[a])return!1;return!0}function aT(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function iT(t,e,n){let r;const a=t.shape.length;typeof e=="number"?r=[e,...new Array(a-1).fill(0)]:e.length<a?r=e.concat(new Array(a-e.length).fill(0)):r=e.slice(),r.forEach(o=>{U(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=[n,...new Array(a-1).fill(-1)]:n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map((o,s)=>o>=0?o:(U(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${s}.`),t.shape[s]-r[s])),[r,i]}function oT(t,e,n,r,a,i,o,s,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)c&&1<<x&s&&d.numAddAxisAfterEllipsis++,1<<x&o&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};_ue(d,p);let f=!0,g=!0,y=!0;const v=[],b=[];for(let x=0;x<t.length;++x){if(p.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const w=!!(p.shrinkAxisMask&1<<x),S=t[x];if(S===-1){v.push(w?1:-1);continue}const C=[p.beginMask&1<<x,p.endMask&1<<x],E=[p.strides[x]>0?0:-1,p.strides[x]>0?S:S-1];if(w&&p.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&p.strides[x]===1;const R=!!(p.beginMask&1<<x&&p.endMask&1<<x);if(p.beginValid&&p.endValid){if(w){const D=p.begin[x]<0?S+p.begin[x]:p.begin[x];if(p.begin[x]=D,p.end[x]=p.begin[x]+1,D<0||D>=S)throw Error(`slice index ${p.begin[x]} of dimension ${x} out of bounds.`)}else p.begin[x]=f9(p.begin[x],0,p.strides[x],S,C,E),p.end[x]=f9(p.end[x],1,p.strides[x],S,C,E);const P=p.strides[x]===1&&p.begin[x]===0&&p.end[x]===S;f=f&&P,g=g&&(x===0&&p.strides[x]===1||P)}else f=f&&p.strides[x]===1&&R,g=g&&(x===0&&p.strides[x]===1||R);let T,$=!1;if(p.beginValid&&p.endValid?(T=p.end[x]-p.begin[x],$=!0):w?(T=1,$=!0):R&&S>=0&&(p.strides[x]<0?T=-S:T=S,$=!0),$){let P;T===0||T<0!=p.strides[x]<0?P=0:P=Math.trunc(T/p.strides[x])+(T%p.strides[x]!==0?1:0),v.push(P)}else v.push(-1)}for(let x=0;x<p.finalShapeGatherIndices.length;++x){const w=p.finalShapeGatherIndices[x];w>=0?b.push(v[w]):w===eT&&b.push(1)}return{finalShapeSparse:b.filter((x,w)=>p.finalShapeGatherIndices[w]!==eT),finalShape:b,isIdentity:f,sliceDim0:g,isSimpleSlice:y,begin:p.begin,end:p.end,strides:p.strides}}function _ue(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const a=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<a;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(eT),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(Nue),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function f9(t,e,n,r,a,i){if(a[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const m9=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:tT,computeFlatOffset:aT,computeOutShape:nT,getNormalizedAxes:Iue,isSliceContinous:rT,maskToAxes:Tue,parseSliceParams:iT,sliceInfo:oT,startForAxis:p9,startIndicesWithElidedDims:u9,stopForAxis:h9,stopIndicesWithElidedDims:c9,stridesForAxis:d9,stridesWithElidedDims:o9},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class g9{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Ku{constructor(){this.classNameMap={}}static getMap(){return Ku.instance==null&&(Ku.instance=new Ku),Ku.instance}static register(e){Ku.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Ru(t){U(t.className!=null,()=>"Class being registered does not have the static className property defined."),U(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),U(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Ku.register(t)}const Rue=Object.freeze(Object.defineProperty({__proto__:null,Serializable:g9,SerializationMap:Ku,registerClass:Ru},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $ue=.001,y9=.1;function Oue(t,e,n){return n==null&&(n=sT()),lT(t,e,(r,a)=>uT(r,a,n))}function sT(){return re.backend.floatPrecision()===32?$ue:y9}function lT(t,e,n){let r=!0;if((ka(t)||ka(e))&&(r=!1),ka(t)&&ka(e)&&(r=!0),r){const o=t.constructor.name,s=e.constructor.name;if(o!==s)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${s}`)}if(Array.isArray(t)&&Array.isArray(e)){const o=Cs(t),s=Cs(e);if(!Sn(o,s))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${s}]`)}const a=ka(t)?t:ml(t),i=ka(e)?e:ml(e);if(a.length!==i.length)throw new Error(`Arrays have different lengths actual: ${a.length} vs expected: ${i.length}.
Actual:   ${a}.
Expected: ${i}.`);for(let o=0;o<i.length;++o){const s=a[o],l=i[o];if(!n(s,l))throw new Error(`Arrays differ: actual[${o}] = ${s}, expected[${o}] = ${l}.
Actual:   ${a}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function Mue(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function Pue(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return ks(t)||ks(t[0])||ks(e)||ks(e[0])?lT(t,n,(r,a)=>r==a):lT(t,e,(r,a)=>uT(r,a,0))}function Fue(t,e,n){if(n==null&&(n=sT()),!uT(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function uT(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function Aue(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function Due(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error(`Expected ArrayBuffer value at ${a} to be ${r[a]} but got ${n[a]} instead`)}function b9(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?b9(n):t[e]=Ss(n)}return t}function Lue(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function zue(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const Bue=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:y9,createVideoElement:Lue,encodeStrings:b9,expectArrayBuffersEqual:Due,expectArraysClose:Oue,expectArraysEqual:Pue,expectNumbersClose:Fue,expectPromiseToFail:Mue,expectValuesInRange:Aue,play:zue,testEpsilon:sT},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const jue="3.21.0";/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uue(t,e){let n=j(t,"a","add"),r=j(e,"b","add");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(Dp,a)}const yt=ne({add_:Uue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vue(t,e){let n=j(t,"a","floorDiv"),r=j(e,"b","floorDiv");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(Vm,a)}const cT=ne({floorDiv_:Vue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wue(t,e){let n=j(t,"a","div"),r=j(e,"b","div");if([n,r]=Qn(n,r),n.dtype==="int32"&&r.dtype==="int32")return cT(n,r);const a={a:n,b:r},i={};return re.runKernel(Am,a,i)}const _n=ne({div_:Wue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gue(t,e){let n=j(t,"a","mul"),r=j(e,"b","mul");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(og,a)}const De=ne({mul_:Gue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hue(t){const e=j(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return re.runKernel(qv,n)}else{const n={x:e};return re.runKernel(Pv,n)}}const Ci=ne({abs_:Hue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function que(t){const e={x:j(t,"x","acos")};return re.runKernel(Cm,e)}const v9=ne({acos_:que});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kue(t){const e={x:j(t,"x","acosh")};return re.runKernel(Em,e)}const x9=ne({acosh_:Kue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xue(t){U(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),U(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((a,i)=>j(a,`tensors${i}`,"addN")),n=e[0];e.forEach(a=>{if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(a=>{if(!Sn(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return re.runKernel(Fv,r)}const w9=ne({addN_:Xue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Que(t,e=null,n=!1){const r={x:j(t,"x","all","bool")},a={axis:e,keepDims:n};return re.runKernel(Av,r,a)}const k9=ne({all_:Que});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yue(t,e=null,n=!1){const r={x:j(t,"x","any","bool")},a={axis:e,keepDims:n};return re.runKernel(Dv,r,a)}const S9=ne({any_:Yue});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jue(t,e=0){const n={x:j(t,"x","argMax")},r={axis:e};return re.runKernel(Lv,n,r)}const C9=ne({argMax_:Jue});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zue(t,e=0){const n={x:j(t,"x","argMin")},r={axis:e};return re.runKernel(zv,n,r)}const E9=ne({argMin_:Zue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ece(t){const e={x:j(t,"x","asin")};return re.runKernel(Nm,e)}const N9=ne({asin_:ece});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tce(t){const e={x:j(t,"x","asinh")};return re.runKernel(Tm,e)}const T9=ne({asinh_:tce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nce(t){const e={x:j(t,"x","atan")};return re.runKernel(Im,e)}const I9=ne({atan_:nce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rce(t,e){let n=j(t,"a","atan2"),r=j(e,"b","atan2");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(Rm,a)}const _9=ne({atan2_:rce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ace(t){const e={x:j(t,"x","atanh")};return re.runKernel(_m,e)}const R9=ne({atanh_:ace});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bg(t,e,n,r,a="NHWC",i){const o=t[3],s=[...e,o],l=Cl(a);return Gr(t,s,n,i,r,null,null,l)}function fo(t,e,n,r,a,i,o="channelsLast"){const[s,l]=$2(e);let u;if(o==="channelsLast")u=[s,l,t[3],t[3]];else if(o==="channelsFirst")u=[s,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Gr(t,u,n,r,a,i,!1,o)}function Sl(t,e,n,r,a,i,o="NDHWC"){const[s,l,u]=pT(e);let c,d;if(o==="NDHWC")d="channelsLast",c=[s,l,u,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",c=[s,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return $u(t,c,n,r,a,!1,d,i)}function Gr(t,e,n,r,a,i,o=!1,s="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(s==="channelsLast")[l,u,c,d]=t;else if(s==="channelsFirst")[l,d,u,c]=t;else throw new Error(`Unknown dataFormat ${s}`);const[p,f,,g]=e,[y,v]=$2(n),[b,x]=$2(r),w=qp(p,b),S=qp(f,x),{padInfo:C,outHeight:E,outWidth:R}=sce(a,u,c,y,v,w,S,i,s),T=o?g*d:g;let $;return s==="channelsFirst"?$=[l,T,E,R]:s==="channelsLast"&&($=[l,E,R,T]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:d,outHeight:E,outWidth:R,outChannels:T,padInfo:C,strideHeight:y,strideWidth:v,filterHeight:p,filterWidth:f,effectiveFilterHeight:w,effectiveFilterWidth:S,dilationHeight:b,dilationWidth:x,inShape:t,outShape:$,filterShape:e}}function $u(t,e,n,r,a,i=!1,o="channelsLast",s){let[l,u,c,d,p]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,d,p]=t;else if(o==="channelsFirst")[l,p,u,c,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[f,g,y,,v]=e,[b,x,w]=pT(n),[S,C,E]=pT(r),R=qp(f,S),T=qp(g,C),$=qp(y,E),{padInfo:P,outDepth:D,outHeight:B,outWidth:z}=lce(a,u,c,d,b,x,w,R,T,$,s),q=i?v*p:v;let Y;return o==="channelsFirst"?Y=[l,q,D,B,z]:o==="channelsLast"&&(Y=[l,D,B,z,q]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:d,inChannels:p,outDepth:D,outHeight:B,outWidth:z,outChannels:q,padInfo:P,strideDepth:b,strideHeight:x,strideWidth:w,filterDepth:f,filterHeight:g,filterWidth:y,effectiveFilterDepth:R,effectiveFilterHeight:T,effectiveFilterWidth:$,dilationDepth:S,dilationHeight:C,dilationWidth:E,inShape:t,outShape:Y,filterShape:e}}function ice(t,e,n,r,a){r==null&&(r=dT(t,e,n));const i=t[0],o=t[1],s=rd((i-e+2*r)/n+1,a),l=rd((o-e+2*r)/n+1,a);return[s,l]}function oce(t,e,n,r,a,i){a==null&&(a=dT(t,e,r));const o=t[0],s=t[1],l=t[2],u=rd((o-e+2*a)/r+1,i),c=rd((s-e+2*a)/r+1,i),d=rd((l-e+2*a)/r+1,i);return[u,c,d,n]}function dT(t,e,n,r=1){const a=qp(e,r);return Math.floor((t[0]*(n-1)-n+a)/2)}function $2(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function pT(t){return typeof t=="number"?[t,t,t]:t}function qp(t,e){return e<=1?t:t+(t-1)*(e-1)}function sce(t,e,n,r,a,i,o,s,l){let u,c,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const p=ice([e,n],i,r,t,s);c=p[0],d=p[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/a);const p=Math.max(0,(c-1)*r+i-e),f=Math.max(0,(d-1)*a+o-n),g=Math.floor(p/2),y=p-g,v=Math.floor(f/2),b=f-v;u={top:g,bottom:y,left:v,right:b,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),d=Math.ceil((n-o+1)/a);else if(typeof t=="object"){const p=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],g=l==="channelsLast"?t[2][0]:t[3][0],y=l==="channelsLast"?t[2][1]:t[3][1];u={top:p,bottom:f,left:g,right:y,type:p===0&&f===0&&g===0&&y===0?"VALID":"EXPLICIT"},c=rd((e-i+p+f)/r+1,s),d=rd((n-o+g+y)/a+1,s)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:d}}function lce(t,e,n,r,a,i,o,s,l,u,c){let d,p,f,g;if(typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=oce([e,n,r,1],s,1,a,t,c);p=y[0],f=y[1],g=y[2]}else if(t==="same"){p=Math.ceil(e/a),f=Math.ceil(n/i),g=Math.ceil(r/o);const y=(p-1)*a+s-e,v=(f-1)*i+l-n,b=(g-1)*o+u-r,x=Math.floor(y/2),w=y-x,S=Math.floor(v/2),C=v-S,E=Math.floor(b/2),R=b-E;d={top:S,bottom:C,left:E,right:R,front:x,back:w,type:"SAME"}}else if(t==="valid")d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((e-s+1)/a),f=Math.ceil((n-l+1)/i),g=Math.ceil((r-u+1)/o);else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:f,outWidth:g}}function rd(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function jg(t){const[e,n,r]=$2(t);return e===1&&n===1&&r===1}function Ca(t,e){return jg(t)||jg(e)}function Cl(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function mo(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")U(Wc(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(a=>{U(Wc(a),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${a}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uce(t,e){const n={x:j(t,"x","reshape","string_or_numeric")},r={shape:e};return re.runKernel(Gx,n,r)}const Ce=ne({reshape_:uce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cce(t,e,n,r,a){const i=j(t,"x","avgPool","float32"),o=1;U(Ca(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let s=i,l=!1;i.rank===3&&(l=!0,s=Ce(i,[1,i.shape[0],i.shape[1],i.shape[2]])),U(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),mo("avgPool",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a};let d=re.runKernel(Bv,u,c);return d=Un(d,i.dtype),l?Ce(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const hT=ne({avgPool_:cce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dce(t,e,n,r,a,i="NDHWC"){const o=j(t,"x","avgPool3d","float32");let s=o,l=!1;o.rank===4&&(l=!0,s=Ce(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(s.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),U(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),mo("avgPool3d",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i};let d=re.runKernel(jv,u,c);return d=Un(d,s.dtype),l?Ce(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const $9=ne({avgPool3d_:dce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pce(t,e=0){U(t.length>=1,()=>"Pass at least one tensor to concat");const n=Ag(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return wl(n[0]);const r=n,a={axis:e};return re.runKernel(Kv,r,a)}const Ea=ne({concat_:pce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hce(t){const e={x:j(t,"x","sigmoid","float32")};return re.runKernel(bg,e)}const ad=ne({sigmoid_:hce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fce(t,e,n){const r=j(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const a={x:r},i={begin:e,size:n};return re.runKernel(Jx,a,i)}const Cn=ne({slice_:fce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mce(t){const e={x:j(t,"x","tanh","float32")};return re.runKernel(Cg,e)}const O2=ne({tanh_:mce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gce(t,e,n,r,a,i){const o=j(t,"forgetBias","basicLSTMCell"),s=j(e,"lstmKernel","basicLSTMCell"),l=j(n,"lstmBias","basicLSTMCell"),u=j(r,"data","basicLSTMCell"),c=j(a,"c","basicLSTMCell"),d=j(i,"h","basicLSTMCell"),p=Ea([u,d],1),f=pn(p,s),g=yt(f,l),y=g.shape[0],v=g.shape[1]/4,b=[y,v],x=Cn(g,[0,0],b),w=Cn(g,[0,v],b),S=Cn(g,[0,v*2],b),C=Cn(g,[0,v*3],b),E=yt(De(ad(x),O2(w)),De(c,ad(yt(o,S)))),R=De(O2(E),ad(C));return[E,R]}const O9=ne({basicLSTMCell_:gce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yce(t,e,n){const r=j(t,"x","batchToSpaceND"),a=e.reduce((s,l)=>s*l);U(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),U(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),U(r.shape[0]%a===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${a}`);const i={x:r},o={blockShape:e,crops:n};return re.runKernel(Vv,i,o)}const fT=ne({batchToSpaceND_:yce});function bce(t){let e;return t.rank===0||t.rank===1?e=Ce(t,[1,1,1,t.size]):t.rank===2?e=Ce(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=Ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vce(t,e,n,r,a,i){i==null&&(i=.001);const o=j(t,"x","batchNorm"),s=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let u;a!=null&&(u=j(a,"scale","batchNorm"));let c;r!=null&&(c=j(r,"offset","batchNorm")),U(s.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(c==null||s.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(u==null||s.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:bce(o),scale:u,offset:c,mean:s,variance:l},p={varianceEpsilon:i},f=re.runKernel(mx,d,p);return Ce(f,o.shape)}const Ug=ne({batchNorm_:vce});function xce(t,e,n,r,a,i){const o=j(t,"x","batchNorm"),s=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let u;a!=null&&(u=j(a,"scale","batchNorm"));let c;return r!=null&&(c=j(r,"offset","batchNorm")),U(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),U(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),U(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&U(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&U(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Ug(o,s,l,c,u,i)}const M9=ne({batchNorm2d_:xce});function wce(t,e,n,r,a,i){const o=j(t,"x","batchNorm"),s=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let u;a!=null&&(u=j(a,"scale","batchNorm"));let c;return r!=null&&(c=j(r,"offset","batchNorm")),U(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),U(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),U(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&U(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&U(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Ug(o,s,l,c,u,i)}const P9=ne({batchNorm3d_:wce});function kce(t,e,n,r,a,i){const o=j(t,"x","batchNorm"),s=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let u;a!=null&&(u=j(a,"scale","batchNorm"));let c;return r!=null&&(c=j(r,"offset","batchNorm")),U(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),U(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),U(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&U(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&U(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Ug(o,s,l,c,u,i)}const F9=ne({batchNorm4d_:kce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sce(t,e,n){const r=j(t,"x","bincount"),a=j(e,"weights","bincount");U(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),U(n>=0,()=>`size must be non-negative, but got ${n}.`),U(a.size===r.size||a.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`);const i={x:r,weights:a},o={size:n};return re.runKernel(Wv,i,o)}const mT=ne({bincount_:Sce});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cce(t,e){const n=j(t,"s0","broadcastArgs","int32"),r=j(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const a={s0:n,s1:r};return re.runKernel(Gv,a)}const A9=ne({broadcastArgs_:Cce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ece(t,e){let n=j(t,"broadcastTo","x");const r=n.shape;if(e.some(l=>!(l>0)||l%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=Ce(n,l)}const a=n.shape,i=Array.from(e);for(let l=e.length-1;l>=0;l--)if(a[l]===e[l])i[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((l,u)=>l>1?u:-1).filter(l=>l>=0).length===0)return wl(n);const o={x:n},s={reps:i};return re.runKernel(Eg,o,s)}const Kp=ne({broadcastTo_:Ece});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nce(t){const e={x:j(t,"x","ceil","float32")};return re.runKernel(Om,e)}const D9=ne({ceil_:Nce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xp(t,e,n){const r={shape:t,value:e,dtype:n};return re.runKernel(hx,{},r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tce(t,e,n){const r=j(t,"x","clipByValue");if(U(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Xp(r.shape,e,r.dtype);const a={x:r},i={clipValueMin:e,clipValueMax:n};return re.runKernel(Mm,a,i)}const L9=ne({clipByValue_:Tce});function Ice(t){return Ea(t,0)}const z9=ne({concat1d_:Ice});function _ce(t,e){return Ea(t,e)}const B9=ne({concat2d_:_ce});function Rce(t,e){return Ea(t,e)}const j9=ne({concat3d_:Rce});function $ce(t,e){return Ea(t,e)}const U9=ne({concat4d_:$ce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Oce(t,e,n,r,a="NHWC",i=[1,1],o){const s=j(t,"x","conv2d","float32"),l=j(e,"filter","conv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=Ce(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),U(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),mo("conv2d",r,o);const d=a==="NHWC"?u.shape[3]:u.shape[1];U(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),U(Ca(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const p={x:u,filter:l},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},g=re.runKernel(Xv,p,f);return c?Ce(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Vg=ne({conv2d_:Oce});function Mce(t,e,n,r,a="NWC",i=1,o){const s=j(t,"x","conv1d"),l=j(e,"filter","conv1d");let u=s,c=!1;s.rank===2&&(c=!0,u=Ce(s,[1,s.shape[0],s.shape[1]])),U(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),U(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),mo("conv1d",r,o),U(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),U(Ca(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),U(a==="NWC",()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);const d=Ce(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=Ce(u,[u.shape[0],1,u.shape[1],u.shape[2]]),f=Vg(p,d,[1,n],r,"NHWC",[1,i],o);return c?Ce(f,[f.shape[2],f.shape[3]]):Ce(f,[f.shape[0],f.shape[2],f.shape[3]])}const V9=ne({conv1d_:Mce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pce(t,e,n,r,a,i="NHWC",o){U(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,l=e,u=!1;e.rank===3&&(u=!0,l=Ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,t[0],t[1],t[2]]),U(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),U(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),U(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?s[3]:s[1],d=i==="NHWC"?l.shape[3]:l.shape[1];U(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),U(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),mo("conv2dDerInput",a,o);const p={dy:l,filter:n},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},g=re.runKernel(Yv,p,f);return u?Ce(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const W9=ne({conv2DBackpropInput_:Pce});function Fce(t,e,n,r,a,i){const o=j(t,"x","conv2dTranspose"),s=j(e,"filter","conv2dTranspose");return W9(n,o,s,r,a,"NHWC",i)}const G9=ne({conv2dTranspose_:Fce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ace(t,e,n,r,a="NDHWC",i=[1,1,1]){const o=j(t,"x","conv3d"),s=j(e,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=Ce(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),U(s.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),U(l.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`),U(Ca(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),U(a==="NDHWC",()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`);const c={x:l,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:i},p=re.runKernel(Jv,c,d);return u?Ce(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const H9=ne({conv3d_:Ace});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dce(t,e,n,r,a){U(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,s=!1;e.rank===4&&(s=!0,o=Ce(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],u=o.shape[4];U(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),U(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),U(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),U(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),U(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},d={pad:a,strides:r,inputShape:i},p=re.runKernel(Zv,c,d);return s?Ce(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const Lce=ne({conv3DBackpropInput_:Dce});function zce(t,e,n,r,a){const i=j(t,"x","conv3dTranspose"),o=j(e,"filter","conv3dTranspose");return Lce(n,i,o,r,a)}const q9=ne({conv3dTranspose_:zce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bce(t){const e={x:j(t,"x","cos","float32")};return re.runKernel(Pm,e)}const K9=ne({cos_:Bce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jce(t){const e={x:j(t,"x","cosh","float32")};return re.runKernel(Fm,e)}const X9=ne({cosh_:jce});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uce(t,e=0,n=!1,r=!1){const a={x:j(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return re.runKernel(ex,a,i)}const Q9=ne({cumprod_:Uce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vce(t,e=0,n=!1,r=!1){const a={x:j(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return re.runKernel(tx,a,i)}const Y9=ne({cumsum_:Vce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wce(t,e,n,r=!1){const a=j(t,"x","denseBincount"),i=j(e,"weights","denseBincount");U(a.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),U(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),U(n>=0,()=>`size must be non-negative, but got ${n}.`),U(i.size===a.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${i.shape}.`);const o={x:a,weights:i},s={size:n,binaryOutput:r};return re.runKernel(rx,o,s)}const J9=ne({denseBincount_:Wce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gce(t,e,n="NHWC"){const r=j(t,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];U(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),U(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e}  for depthToSpace with input shape
    ${r.shape}`),U(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),U(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const s={x:r},l={blockSize:e,dataFormat:n};return re.runKernel(ax,s,l)}const Z9=ne({depthToSpace_:Gce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hce(t,e,n,r,a="NHWC",i=[1,1],o){const s=j(t,"x","depthwiseConv2d","float32"),l=j(e,"filter","depthwiseConv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=Ce(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),U(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=a==="NHWC"?u.shape[3]:u.shape[1];U(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),mo("depthwiseConv2d",r,o);const p={x:u,filter:l},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},g=re.runKernel(ix,p,f);return c?Ce(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const M2=ne({depthwiseConv2d_:Hce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qce(t){const e={x:j(t,"x","diag")};return re.runKernel(lx,e)}const eD=ne({diag_:qce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kce(t,e,n,r,a=[1,1],i="NHWC"){const o=j(t,"x","dilation2d"),s=j(e,"filter","dilation2d");U(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),U(s.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),U(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,u=!1;o.rank===3&&(l=Ce(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0);const c={x:l,filter:s},d={strides:n,pad:r,dilations:a},p=re.runKernel(ux,c,d);return u?Ce(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const tD=ne({dilation2d_:Kce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xce(t,e){let n=j(t,"a","equal","string_or_numeric"),r=j(e,"b","equal","string_or_numeric");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(zm,a)}const gT=ne({equal_:Xce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qce(t,e,n){const r=j(e,"a","where"),a=j(n,"b","where"),i=j(t,"condition","where","bool"),o=Ut(Ut(i.shape,r.shape),a.shape),s=Kp(i,o),l=Kp(r,o),u=Kp(a,o),c={condition:s,t:l,e:u};return re.runKernel(Yx,c)}const id=ne({where_:Qce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yce(t){const e={x:j(t,"x","zerosLike")};return re.runKernel(y2,e)}const Ei=ne({zerosLike_:Yce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jce(t,e){let n=j(t,"a","div"),r=j(e,"b","div");[n,r]=Qn(n,r);const a=_n(n,r),i=Ei(a),o=gT(r,i);return id(o,i,a)}const nD=ne({divNoNan_:Jce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zce(t,e){const n=j(t,"t1","dot"),r=j(e,"t2","dot");U((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(U(a===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${i}.`),n.rank===1&&r.rank===1){const o=Ce(n,[1,-1]),s=Ce(r,[-1,1]),l=pn(o,s);return Ce(l,[])}else if(n.rank===1&&r.rank===2){const o=Ce(n,[1,-1]),s=Ce(r,[r.shape[0],r.shape[1]]),l=pn(o,s);return Ce(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=Ce(r,[-1,1]),s=pn(n,o);return Ce(s,[s.size])}else{const o=Ce(r,[r.shape[0],r.shape[1]]);return pn(n,o)}}const rD=ne({dot_:Zce});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ede(t,...e){const n=e.map((a,i)=>j(a,`tensors${i}`,"einsum")),r={equation:t};return re.runKernel(cx,n,r)}const aD=ne({einsum_:ede});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tde(t){const e={x:j(t,"x","elu","float32")};return re.runKernel(Dm,e)}const yT=ne({elu_:tde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nde(t){let e=j(t,"x","erf");U(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Un(e,"float32"));const n={x:e};return re.runKernel(Lm,n)}const iD=ne({erf_:nde});/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bT(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function oD(t,e,n){const r=t.length+e.length,a=[];let i=0,o=0;for(let s=0;s<r;s++)n.indexOf(s)===-1?a.push(t[i++]):a.push(e[o++]);return a}function aa(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const a=e.map(i=>t[i]);return[n,a]}function Pr(t,e){const n=e.map(r=>1);return oD(t,n,e)}function ia(t,e,n){U(bT(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function gr(t,e){if(bT(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Wg(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function yr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rde(t,e=null,n=!1){const r={x:j(t,"x","max")},a={reductionIndices:e,keepDims:n};return re.runKernel(Sx,r,a)}const od=ne({max_:rde});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ade(t,e=null,n=!1){const r={x:j(t,"x","min")},a={axis:e,keepDims:n};return re.runKernel(Ix,r,a)}const P2=ne({min_:ade});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ide(t,e){let n=j(t,"base","pow"),r=j(e,"exp","pow");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(lg,a)}const Qp=ne({pow_:ide});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bt(t,e){if((ka(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&ka(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Iu(t,[],[],e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ode(t){const e={x:j(t,"x","sqrt","float32")};return re.runKernel(xg,e)}const Ts=ne({sqrt_:ode});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sde(t){const e=j(t,"x","square"),n={};return re.runKernel("Square",{x:e},n)}const go=ne({square_:sde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lde(t,e=null,n=!1){let r=j(t,"x","sum");r.dtype==="bool"&&(r=Un(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return re.runKernel(Zx,a,i)}const Rn=ne({sum_:lde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ude(t,e="euclidean",n=null,r=!1){t=j(t,"x","norm");const a=sD(t,e,n);let i=a.shape;if(r){const o=Jt(n,t.shape);i=Pr(a.shape,o)}return Ce(a,i)}function sD(t,e,n=null){if(t.rank===0)return Ci(t);if(t.rank!==1&&n===null)return sD(Ce(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Rn(Ci(t),n);if(e===1/0)return od(Ci(t),n);if(e===-1/0)return P2(Ci(t),n);if(e==="euclidean"||e===2)return Ts(Rn(Qp(Ci(t),Bt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return od(Rn(Ci(t),n[0]),n[1]-1);if(e===1/0)return od(Rn(Ci(t),n[1]),n[0]);if(e===-1/0)return P2(Rn(Ci(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Ts(Rn(go(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Gg=ne({norm_:ude});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cde(t,e=null,n=!1){return Gg(t,"euclidean",e,n)}const lD=ne({euclideanNorm_:cde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dde(t){const e={x:j(t,"x","exp")};return re.runKernel(Bm,e)}const Ou=ne({exp_:dde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pde(t,e=0){const n=j(t,"x","expandDims","string_or_numeric");U(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:e};return re.runKernel(dx,r,a)}const El=ne({expandDims_:pde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hde(t){const e={x:j(t,"x","expm1")};return re.runKernel(jm,e)}const uD=ne({expm1_:hde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fde(t,e){const n=j(t,"x","tile","string_or_numeric");U(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},a={reps:e};return re.runKernel(Eg,r,a)}const Yp=ne({tile_:fde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mde(t,e,n,r="float32"){e==null&&(e=t);const a=Tt([t,e],r),i=t<=e?t:e;for(let s=0;s<i;++s)a.set(1,s,s);const o=Ce(a.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Yp(El(o,0),[n[0],1,1]);if(n.length===2)return Yp(El(El(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Yp(El(El(El(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const vT=ne({eye_:mde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gde(t){const e={x:j(t,"x","floor","float32")};return re.runKernel(Um,e)}const xT=ne({floor_:gde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yde(t,e,n=0,r=0){const a=j(t,"x","gather"),i=j(e,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return re.runKernel(gx,o,s)}const wT=ne({gather_:yde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bde(t,e){let n=j(t,"a","greater","string_or_numeric"),r=j(e,"b","greater","string_or_numeric");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(Wm,a)}const Hg=ne({greater_:bde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vde(t,e){let n=j(t,"a","greaterEqual","string_or_numeric"),r=j(e,"b","greaterEqual","string_or_numeric");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(Gm,a)}const kT=ne({greaterEqual_:vde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xde(t){const e={x:j(t,"x","isFinite")};return re.runKernel(qm,e)}const cD=ne({isFinite_:xde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wde(t){const e={x:j(t,"x","isInf")};return re.runKernel(Km,e)}const dD=ne({isInf_:wde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kde(t){const e={x:j(t,"x","isNaN")};return re.runKernel(Xm,e)}const pD=ne({isNaN_:kde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sde(t,e=.2){const n={x:j(t,"x","leakyRelu")},r={alpha:e};return re.runKernel(xx,n,r)}const ST=ne({leakyRelu_:Sde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cde(t,e){let n=j(t,"a","less","string_or_numeric"),r=j(e,"b","less","string_or_numeric");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(Qm,a)}const hD=ne({less_:Cde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ede(t,e){let n=j(t,"a","lessEqual","string_or_numeric"),r=j(e,"b","lessEqual","string_or_numeric");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(Ym,a)}const F2=ne({lessEqual_:Ede});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fD(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return re.runKernel(wx,{},r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nde(t,e=5,n=1,r=1,a=.5){const i=j(t,"x","localResponseNormalization");U(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),U(Wc(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,s=!1;i.rank===3&&(s=!0,o=Ce(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},u={depthRadius:e,bias:n,alpha:r,beta:a},c=re.runKernel(kx,l,u);return s?Ce(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const mD=ne({localResponseNormalization_:Nde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tde(t){const e={x:j(t,"x","log","float32")};return re.runKernel(Jm,e)}const Jp=ne({log_:Tde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ide(t){const e={x:j(t,"x","log1p")};return re.runKernel(Zm,e)}const CT=ne({log1p_:Ide});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _de(t){return U(Eu(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=j(e,"x","tf.grad","string_or_numeric"),a=n!=null?j(n,"dy","tf.grad"):null;return re.tidy(()=>{const{value:i,grads:o}=re.gradients(()=>t(r),[r],a);return a!=null&&na(i.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),A2(o),o[0]})}}function Rde(t){return U(Eu(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{U(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=Ag(e,"args","tf.grads","string_or_numeric"),a=n!=null?j(n,"dy","tf.grads"):null;return re.tidy(()=>{const{value:i,grads:o}=re.gradients(()=>t(...r),r,a);return a!=null&&na(i.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),A2(o),o})}}function $de(t){return U(Eu(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{U(e instanceof Xn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),U(n==null||n instanceof Xn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:a}=re.gradients(()=>t(e),[e],n);return A2(r),{grad:r[0],value:a}}}function Ode(t){return U(Eu(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{U(Array.isArray(e)&&e.every(a=>a instanceof Xn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),U(n==null||n instanceof Xn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=re.gradients(()=>t(...e),e,n);return n!=null&&na(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),A2(r.grads),r}}function gD(t,e){U(Eu(t),()=>"The f passed in variableGrads(f) must be a function"),U(e==null||Array.isArray(e)&&e.every(u=>u instanceof Fg),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in re.registeredVariables)e.push(re.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,a=e.length;e=e.filter(u=>u.trainable),U(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const i=!0,{value:o,grads:s}=re.gradients(t,e,null,i);U(s.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),U(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,c)=>{s[c]!=null&&(l[u.name]=s[c])}),r?.forEach(u=>l[u.name]=null),{value:o,grads:l}}function Is(t){return re.customGrad(t)}function A2(t){if(t.filter(e=>e==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mde(t){const e={x:j(t,"x","softplus")};return re.runKernel(vg,e)}const ET=ne({softplus_:Mde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pde(t){const e=j(t,"x","logSigmoid");return Is(n=>({value:Ns(ET(Ns(n))),gradFunc:r=>De(r,ad(Ns(n)))}))(e)}const yD=ne({logSigmoid_:Pde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fde(t,e){let n=j(t,"a","sub"),r=j(e,"b","sub");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(kg,a)}const At=ne({sub_:Fde});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ade(t,e=-1){const n=j(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Is((r,a)=>{const i=od(r,e,!0),o=At(r,i),s=At(Un(o,"float32"),Jp(Rn(Ou(o),e,!0)));return a([s]),{value:s,gradFunc:(l,u)=>{const[c]=u,d=!0,p=Ou(c);return At(l,De(Rn(l,e,d),p))}}})(n)}const bD=ne({logSoftmax_:Ade});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dde(t,e=null,n=!1){const r=j(t,"x","logSumExp"),a=Jt(e,r.shape),i=od(r,a,!0),o=At(r,i),s=Ou(o),l=Rn(s,a),u=Jp(l),c=yt(Ce(i,u.shape),u);if(n){const d=Pr(c.shape,a);return Ce(c,d)}return c}const NT=ne({logSumExp_:Dde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lde(t,e){const n=j(t,"a","logicalAnd","bool"),r=j(e,"b","logicalAnd","bool");Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(eg,a)}const qg=ne({logicalAnd_:Lde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zde(t){const e={x:j(t,"x","logicalNot","bool")};return re.runKernel(tg,e)}const TT=ne({logicalNot_:zde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bde(t,e){const n=j(t,"a","logicalOr","bool"),r=j(e,"b","logicalOr","bool");Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(ng,a)}const IT=ne({logicalOr_:Bde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jde(t,e){const n=j(t,"a","logicalXor","bool"),r=j(e,"b","logicalXor","bool");return Ut(n.shape,r.shape),qg(IT(t,e),TT(qg(t,e)))}const vD=ne({logicalXor_:jde});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const D2=2147483648;function Ude(t,e,n="left"){const r=j(t,"sortedSequence","searchSorted"),a=j(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=Ce(r,[-1,i]),l=Ce(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(be(l.shape)>=D2)throw new Error(`values tensor size must less than ${D2}`);if(s.shape[1]>=D2)throw new Error(`trailing dim_size must less than ${D2} for int32 output type, was ${s.shape[1]}`);const u={sortedSequence:s,values:l},c={side:n};return re.runKernel(Qx,u,c)}const L2=ne({searchSorted_:Ude});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xD(t,e){return L2(t,e,"left")}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vde(t,e,n,r,a){const i=j(t,"x","maxPool"),o=1;let s=i,l=!1;i.rank===3&&(l=!0,s=Ce(i,[1,i.shape[0],i.shape[1],i.shape[2]])),U(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),U(Ca(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),mo("maxPool",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a},d=re.runKernel(Cx,u,c);return l?Ce(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const _T=ne({maxPool_:Vde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wde(t,e=[1,1,1],n,r,a,i="NDHWC"){const o=j(t,"x","maxPool3d");let s=o,l=!1;o.rank===4&&(l=!0,s=Ce(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(s.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),U(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),mo("maxPool3d",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=re.runKernel(Ex,u,c);return l?Ce(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const wD=ne({maxPool3d_:Wde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gde(t,e,n,r,a=!1){const i={x:j(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:a},s=re.runKernel(Nx,i,o);return{result:s[0],indexes:s[1]}}const kD=ne({maxPoolWithArgmax_:Gde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hde(t,e){let n=j(t,"a","maximum"),r=j(e,"b","maximum");[n,r]=Qn(n,r),n.dtype==="bool"&&(n=Un(n,"int32"),r=Un(r,"int32")),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(rg,a)}const RT=ne({maximum_:Hde});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qde(t,e=null,n=!1){const r={x:j(t,"x","mean")},a={axis:e,keepDims:n};return re.runKernel(Tx,r,a)}const Kg=ne({mean_:qde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mu(t,e="float32"){if(e==="complex64"){const r=Mu(t,"float32"),a=Mu(t,"float32");return vl(r,a)}const n=ra(be(t),e);return re.makeTensor(n,t,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pu(t,e="float32"){if(e==="complex64"){const r=Pu(t,"float32"),a=Mu(t,"float32");return vl(r,a)}const n=Mv(be(t),e);return re.makeTensor(n,t,e)}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function SD(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=j(t,"x","meshgrid",t instanceof Xn?t.dtype:"float32");if(e===void 0)return[r];let a=j(e,"y","meshgrid",e instanceof Xn?e.dtype:"float32");const i=be(r.shape),o=be(a.shape);return n==="xy"?(r=Ce(r,[1,-1]),a=Ce(a,[-1,1]),[pn(Pu([o,1],r.dtype),r),pn(a,Pu([1,i],a.dtype))]):(r=Ce(r,[-1,1]),a=Ce(a,[1,-1]),[pn(r,Pu([1,o],r.dtype)),pn(Pu([i,1],a.dtype),a)])}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kde(t,e){let n=j(t,"a","minimum"),r=j(e,"b","minimum");[n,r]=Qn(n,r),n.dtype==="bool"&&(n=Un(n,"int32"),r=Un(r,"int32")),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(ag,a)}const $T=ne({minimum_:Kde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xde(t,e,n){U(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=j(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");U(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const a=n==="reflect"?1:0;for(let s=0;s<r.rank;s++)U(e[s].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),U(e[s][0]>=0&&e[s][0]<=r.shape[s]-a&&e[s][1]>=0&&e[s][1]<=r.shape[s]-a,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-a} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return re.runKernel(_x,o,i)}const CD=ne({mirrorPad_:Xde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qde(t,e){let n=j(t,"a","mod"),r=j(e,"b","mod");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(ig,a)}const ED=ne({mod_:Qde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yde(t,e=null,n=!1){t=j(t,"x","moments");const r=Jt(e,t.shape),a=Kg(t,r,n);let i=a.shape;n||(i=Pr(a.shape,r));const o=go(At(Un(t,"float32"),Ce(a,i))),s=Kg(o,r,n);return{mean:a,variance:s}}const ND=ne({moments_:Yde});function Jde(t,e,n,r){const a=j(e,"data","multiRNNCell"),i=Ag(n,"c","multiRNNCell"),o=Ag(r,"h","multiRNNCell");let s=a;const l=[];for(let d=0;d<t.length;d++){const p=t[d](s,i[d],o[d]);l.push(p[0]),l.push(p[1]),s=p[1]}const u=[],c=[];for(let d=0;d<l.length;d+=2)u.push(l[d]),c.push(l[d+1]);return[u,c]}const TD=ne({multiRNNCell_:Jde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zde(t,e,n,r=!1){const a=j(t,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const s={logits:o===1?Ce(a,[1,-1]):a},l={numSamples:e,seed:n,normalized:r},u=re.runKernel(Rx,s,l);return o===1?Ce(u,[u.size]):u}const ID=ne({multinomial_:Zde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function epe(t,e){let n=j(t,"a","notEqual","string_or_numeric"),r=j(e,"b","notEqual","string_or_numeric");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(sg,a)}const OT=ne({notEqual_:epe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tpe(t){const e={x:j(t,"x","onesLike")};return re.runKernel(Fx,e)}const _D=ne({onesLike_:tpe});function npe(t,e){const n=j(t,"v1","outerProduct"),r=j(e,"v2","outerProduct");U(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const a=Ce(n,[-1,1]),i=Ce(r,[1,-1]);return pn(a,i)}const RD=ne({outerProduct_:npe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rpe(t,e,n=0){const r=j(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:e,constantValue:n},i={x:r};return re.runKernel(Lx,i,a)}const Zp=ne({pad_:rpe});function ape(t,e,n=0){return U(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Zp(t,[e],n)}const $D=ne({pad1d_:ape});function ipe(t,e,n=0){return U(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Zp(t,e,n)}const OD=ne({pad2d_:ipe});function ope(t,e,n=0){return U(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Zp(t,e,n)}const MD=ne({pad3d_:ope});function spe(t,e,n=0){return U(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Zp(t,e,n)}const PD=ne({pad4d_:spe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lpe(t,e,n){const r=j(t,"x","spaceToBatchND");U(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),U(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),U(r.shape.reduce((o,s,l)=>l>0&&l<=e.length?o&&(s+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const a={x:r},i={blockShape:e,paddings:n};return re.runKernel(e2,a,i)}const MT=ne({spaceToBatchND_:lpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function upe(t,e,n,r,a,i,o){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");const s=j(t,"x","maxPool");let l=s,u=!1;s.rank===3&&(u=!0,l=Ce(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(Ca(i,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const c=fo(l.shape,e,i,a,r),d=[c.dilationHeight,c.dilationWidth];let p;r==="same"?p=dpe([c.filterHeight,c.filterWidth],d):p=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[g,y]=cpe([c.inHeight,c.inWidth],d,p),v=f?r:"valid",b=f?l:MT(l,d,g),x=(n==="avg"?()=>hT(b,e,i,v,o):()=>_T(b,e,i,v,o))(),w=f?x:fT(x,d,y);return u?Ce(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function cpe(t,e,n){const r=n.map(c=>c[0]),a=n.map(c=>c[1]),i=t.concat(r,a),o=e.map((c,d)=>(c-i[d]%c)%c),s=a.map((c,d)=>c+o[d]),l=e.map((c,d)=>[r[d],s[d]]),u=e.map((c,d)=>[0,o[d]]);return[l,u]}function dpe(t,e){const n=t.map((i,o)=>i+(i-1)*(e[o]-1)).map(i=>i-1),r=n.map(i=>Math.floor(i/2)),a=n.map((i,o)=>i-r[o]);return n.map((i,o)=>[r[o],a[o]])}const FD=ne({pool_:upe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ppe(t,e){const n=j(t,"x","prelu"),r=j(e,"alpha","prelu"),a={x:n,alpha:r};return re.runKernel(zx,a)}const PT=ne({prelu_:ppe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hpe(t,e=null,n=!1){let r=j(t,"x","prod");r.dtype==="bool"&&(r=Un(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return re.runKernel(Bx,a,i)}const AD=ne({prod_:hpe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fpe(t,e,n,r){const a=t.map((c,d)=>j(c,`tensors${d}`,"raggedGather","int32")),i=j(e,"paramsDenseValues","raggedGather"),o=j(n,"indices","raggedGather","int32"),s={paramsNestedSplits:a,paramsDenseValues:i,indices:o},l={outputRaggedRank:r},u=re.runKernel(jx,s,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const DD=ne({raggedGather_:fpe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mpe(t,e,n,r,a){const i=j(t,"shape","raggedTensorToTensor","int32"),o=j(e,"values","raggedTensorToTensor"),s=j(n,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((d,p)=>j(d,`tensors${p}`,"raggedTensorToTensor","int32")),u={shape:i,values:o,defaultValue:s,rowPartitionTensors:l},c={rowPartitionTypes:a};return re.runKernel(Ux,u,c)}const LD=ne({raggedTensorToTensor_:mpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gpe(t,e,n){const r=be(t);let a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)a[i]=e();return re.makeTensor(a,t,n)}const zD=ne({rand_:gpe});var FT={exports:{}};FT.exports,function(t){(function(e,n,r){function a(l){var u=this,c=s();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new a(l),d=u&&u.state,p=c.next;return p.int32=function(){return c.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,d&&(typeof d=="object"&&i(d,c),p.state=function(){return i(c,{})}),p}function s(){var l=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(ti,t,!1)}(FT);var ype=FT.exports,AT={exports:{}};AT.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(ti,t,!1)}(AT);var bpe=AT.exports,DT={exports:{}};DT.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(ti,t,!1)}(DT);var vpe=DT.exports,LT={exports:{}};LT.exports,function(t){(function(e,n,r){function a(s){var l=this;l.next=function(){var c=l.x,d=l.i,p,f;return p=c[d],p^=p>>>7,f=p^p<<24,p=c[d+1&7],f^=p^p>>>10,p=c[d+3&7],f^=p^p>>>3,p=c[d+4&7],f^=p^p<<7,p=c[d+7&7],p=p^p<<13,f^=p^p<<9,c[d]=f,l.i=d+1&7,f};function u(c,d){var p,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,p=0;p<d.length;++p)f[p&7]=f[p&7]<<15^d.charCodeAt(p)+f[p+1&7]<<13;for(;f.length<8;)f.push(0);for(p=0;p<8&&f[p]===0;++p);for(p==8?f[7]=-1:f[p],c.x=f,c.i=0,p=256;p>0;--p)c.next()}u(l,s)}function i(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(c.x&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(ti,t,!1)}(LT);var xpe=LT.exports,zT={exports:{}};zT.exports,function(t){(function(e,n,r){function a(s){var l=this;l.next=function(){var c=l.w,d=l.X,p=l.i,f,g;return l.w=c=c+1640531527|0,g=d[p+34&127],f=d[p=p+1&127],g^=g<<13,f^=f<<17,g^=g>>>15,f^=f>>>12,g=d[p]=g^f,l.i=p,g+(c^c>>>16)|0};function u(c,d){var p,f,g,y,v,b=[],x=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,x=Math.max(x,d.length)),g=0,y=-32;y<x;++y)d&&(f^=d.charCodeAt((y+32)%d.length)),y===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,y>=0&&(v=v+1640531527|0,p=b[y&127]^=f+v,g=p==0?g+1:0);for(g>=128&&(b[(d&&d.length||0)&127]=-1),g=127,y=4*128;y>0;--y)f=b[g+34&127],p=b[g=g+1&127],f^=f<<13,p^=p<<17,f^=f>>>15,p^=p>>>12,b[g]=f^p;c.w=v,c.X=b,c.i=g}u(l,s)}function i(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(c.X&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(ti,t,!1)}(zT);var wpe=zT.exports,BT={exports:{}};BT.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.next=function(){var d=l.b,p=l.c,f=l.d,g=l.a;return d=d<<25^d>>>7^p,p=p-f|0,f=f<<24^f>>>8^g,g=g-d|0,l.b=d=d<<20^d>>>12^p,l.c=p=p-f|0,l.d=f<<16^p>>>16^g,l.a=g-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(ti,t,!1)}(BT);var kpe=BT.exports,BD={exports:{}};const Spe={},Cpe=Object.freeze(Object.defineProperty({__proto__:null,default:Spe},Symbol.toStringTag,{value:"Module"})),jD=FV(Cpe);(function(t){(function(e,n,r){var a=256,i=6,o=52,s="random",l=r.pow(a,i),u=r.pow(2,o),c=u*2,d=a-1,p;function f(S,C,E){var R=[];C=C==!0?{entropy:!0}:C||{};var T=b(v(C.entropy?[S,w(n)]:S??x(),3),R),$=new g(R),P=function(){for(var D=$.g(i),B=l,z=0;D<u;)D=(D+z)*a,B*=a,z=$.g(1);for(;D>=c;)D/=2,B/=2,z>>>=1;return(D+z)/B};return P.int32=function(){return $.g(4)|0},P.quick=function(){return $.g(4)/4294967296},P.double=P,b(w($.S),n),(C.pass||E||function(D,B,z,q){return q&&(q.S&&y(q,$),D.state=function(){return y($,{})}),z?(r[s]=D,B):D})(P,T,"global"in C?C.global:this==r,C.state)}function g(S){var C,E=S.length,R=this,T=0,$=R.i=R.j=0,P=R.S=[];for(E||(S=[E++]);T<a;)P[T]=T++;for(T=0;T<a;T++)P[T]=P[$=d&$+S[T%E]+(C=P[T])],P[$]=C;(R.g=function(D){for(var B,z=0,q=R.i,Y=R.j,J=R.S;D--;)B=J[q=d&q+1],z=z*a+J[d&(J[q]=J[Y=d&Y+B])+(J[Y]=B)];return R.i=q,R.j=Y,z})(a)}function y(S,C){return C.i=S.i,C.j=S.j,C.S=S.S.slice(),C}function v(S,C){var E=[],R=typeof S,T;if(C&&R=="object")for(T in S)try{E.push(v(S[T],C-1))}catch{}return E.length?E:R=="string"?S:S+"\0"}function b(S,C){for(var E=S+"",R,T=0;T<E.length;)C[d&T]=d&(R^=C[d&T]*19)+E.charCodeAt(T++);return w(C)}function x(){try{var S;return p&&(S=p.randomBytes)?S=S(a):(S=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(S)),w(S)}catch{var C=e.navigator,E=C&&C.plugins;return[+new Date,e,E,e.screen,w(n)]}}function w(S){return String.fromCharCode.apply(0,S)}if(b(r.random(),n),t.exports){t.exports=f;try{p=jD}catch{}}else r["seed"+s]=f})(typeof self<"u"?self:ti,[],Math)})(BD);var Epe=BD.exports,Npe=ype,Tpe=bpe,Ipe=vpe,_pe=xpe,Rpe=wpe,$pe=kpe,sd=Epe;sd.alea=Npe,sd.xor128=Tpe,sd.xorwow=Ipe,sd.xorshift7=_pe,sd.xor4096=Rpe,sd.tychei=$pe;var z2=sd;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class jT{constructor(e,n,r,a,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=z2.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const a=this.nextVal;return this.nextVal=NaN,a}let e,n,r=!1;for(;!r;){let a,i,o;do a=2*this.random()-1,i=2*this.random()-1,o=a*a+i*i;while(o>=1||o===0);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Ope{constructor(e,n,r,a){this.alpha=e,this.beta=1/n,this.dtype=r;const i=a||Math.random();this.randu=z2.alea(i.toString()),this.randn=new jT(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,a,i,o;for(;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,e=a*a,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class Mpe{constructor(e=0,n=1,r,a){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=z2.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ppe(t,e,n=1,r="float32",a){if(n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new Ope(e,n,r,a),o=Tt(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const UD=ne({randomGamma_:Ppe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fpe(t,e=0,n=1,r,a){if(r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new jT(e,n,r,!1,a),o=Tt(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const UT=ne({randomNormal_:Fpe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ape(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return UT(t,0,1,e,n)}const VD=ne({randomStandardNormal_:Ape});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dpe(t,e=0,n=1,r="float32",a){const i=Tt(t,r),o=new Mpe(e,n,null,a);for(let s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}const VT=ne({randomUniform_:Dpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eh(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const a={start:t,stop:e,step:n,dtype:r};return re.runKernel(Vx,{},a)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lpe(t){const e={x:j(t,"x","reciprocal")};return re.runKernel(ug,e)}const WD=ne({reciprocal_:Lpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zpe(t){const e={x:j(t,"x","relu")};return re.runKernel(cg,e)}const Xg=ne({relu_:zpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bpe(t){const e={x:j(t,"x","relu6")};return re.runKernel(dg,e)}const WT=ne({relu6_:Bpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jpe(t,e){const n={x:j(t,"x","reverse")},r={dims:e};return re.runKernel(Kx,n,r)}const Fu=ne({reverse_:jpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Upe(t){const e=j(t,"x","reverse");return U(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Fu(e,0)}const GD=ne({reverse1d_:Upe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vpe(t,e){const n=j(t,"x","reverse");return U(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Fu(n,e)}const HD=ne({reverse2d_:Vpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wpe(t,e){const n=j(t,"x","reverse");return U(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Fu(n,e)}const qD=ne({reverse3d_:Wpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gpe(t,e){const n=j(t,"x","reverse");return U(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Fu(n,e)}const KD=ne({reverse4d_:Gpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hpe(t){const e={x:j(t,"x","round")};return re.runKernel(pg,e)}const GT=ne({round_:Hpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qpe(t){const e={x:j(t,"x","rsqrt","float32")};return re.runKernel(hg,e)}const XD=ne({rsqrt_:qpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kpe(t){const e={x:j(t,"x","selu")};return re.runKernel(fg,e)}const QD=ne({selu_:Kpe});function Xpe(t,e,n,r,a,i=[1,1],o="NHWC"){const s=j(t,"x","separableConv2d"),l=j(e,"depthwiseFilter","separableConv2d"),u=j(n,"pointwiseFilter","separableConv2d");let c=s,d=!1;if(s.rank===3&&(d=!0,c=Ce(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");U(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),U(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),U(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),U(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),U(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const p=l.shape[2],f=l.shape[3];U(u.shape[2]===p*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*f}, but got ${u.shape[2]}.`);const g=M2(c,l,r,a,o,i),y=Vg(g,u,1,"valid",o);return d?Ce(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const YD=ne({separableConv2d_:Xpe});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Qpe(t,e){const n=j(t,"x","setdiff1d"),r=j(e,"y","setdiff1d");U(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),U(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),U(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const a=await n.data(),i=await r.data(),o=new Set(i);let s=0;for(let c=0;c<a.length;c++)o.has(a[c])||s++;const l=new Mr([s],n.dtype),u=new Mr([s],"int32");for(let c=0,d=0;c<a.length;c++)o.has(a[c])||(l.values[d]=a[c],u.values[d]=c,d++);return[l.toTensor(),u.toTensor()]}const JD=Qpe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ype(t){const e={x:j(t,"x","sign")};return re.runKernel(yg,e)}const ZD=ne({sign_:Ype});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jpe(t){const e={x:j(t,"x","sin","float32")};return re.runKernel(mg,e)}const eL=ne({sin_:Jpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zpe(t){const e={x:j(t,"x","sinh")};return re.runKernel(gg,e)}const tL=ne({sinh_:Zpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ehe(t,e,n){const r=j(t,"x","slice1d");return U(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Cn(r,[e],[n])}const nL=ne({slice1d_:ehe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function the(t,e,n){const r=j(t,"x","slice2d");return U(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Cn(r,e,n)}const rL=ne({slice2d_:the});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nhe(t,e,n){const r=j(t,"x","slice3d");return U(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Cn(r,e,n)}const aL=ne({slice3d_:nhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rhe(t,e,n){const r=j(t,"x","slice4d");return U(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Cn(r,e,n)}const iL=ne({slice4d_:rhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ahe(t,e=-1){const n=j(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},a={dim:e};return re.runKernel(n2,r,a)}const oL=ne({softmax_:ahe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ihe(t){U(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(px,e)}const B2=ne({fft_:ihe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ohe(t){U(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(bx,e)}const Qg=ne({ifft_:ohe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function she(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const a=Ce(t,[n,e]);r=Qg(a)}else{const a=[n,2*(e-1)],i=Ce(Gp(t),[n,e]),o=Ce(Lg(t),[n,e]),s=Fu(Cn(i,[0,1],[n,e-2]),1),l=De(Fu(Cn(o,[0,1],[n,e-2]),1),Bt(-1)),u=Ea([i,s],1),c=Ea([o,l],1),d=Ce(vl(u,c),[a[0],a[1]]);r=Qg(d)}if(r=Gp(r),t.rank===3&&t.shape[0]!==0){const a=r,i=t.shape[0];r=Ce(r,[i,r.shape[0]/i,r.shape[1]]),a.dispose()}return r}const HT=ne({irfft_:she});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lhe(t,e,n=0){const r={x:j(t,"x","split")},a={numOrSizeSplits:e,axis:n};return re.runKernel(t2,r,a)}const th=ne({split_:lhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uhe(t,e){U(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let a;if(e!=null&&e<n){const g=t.shape.map(v=>0),y=t.shape.map(v=>v);y[t.shape.length-1]=e,a=Cn(t,g,y),n=e}else if(e!=null&&e>n){const g=t.shape.map(y=>y);g[t.shape.length-1]=e-n,a=Ea([t,Mu(g)],t.shape.length-1),n=e}else a=t;const i=Ei(a),o=Ce(vl(a,i),[r,n]),s=B2(o),l=Math.floor(n/2)+1,u=Gp(s),c=Lg(s),d=th(u,[l,n-l],u.shape.length-1),p=th(c,[l,n-l],c.shape.length-1),f=a.shape.slice();return f[a.shape.length-1]=l,Ce(vl(d[0],p[0]),f)}const j2=ne({rfft_:uhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function che(t,e){let n=j(t,"a","squaredDifference"),r=j(e,"b","squaredDifference");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r},i={};return re.runKernel(wg,a,i)}const qT=ne({squaredDifference_:che});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dhe(t,e){const n=j(t,"x","squeeze","string_or_numeric");return Ce(n,gl(n.shape,e).newShape)}const Yg=ne({squeeze_:dhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function phe(t,e=0){const n=Ag(t,"tensors","stack","string_or_numeric");U(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&U(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:e};return re.runKernel(Dx,r,a)}const _s=ne({stack_:phe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hhe(t,e=0){const n={x:j(t,"x","step")},r={alpha:e};return re.runKernel(Ng,n,r)}const KT=ne({step_:hhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fhe(t,e,n,r,a=0,i=0,o=0,s=0,l=0){const u={x:j(t,"x","stridedSlice","string_or_numeric")},c={begin:e,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};return re.runKernel(l2,u,c)}const sL=ne({stridedSlice_:fhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mhe(t){const e={x:j(t,"x","tan","float32")};return re.runKernel(Sg,e)}const lL=ne({tan_:mhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yo(t,e){Vc(t);const n=Cs(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Iu(t,null,n,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nh(t,e,n){if(Vc(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Cs(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Iu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uL(t,e,n){if(Vc(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Cs(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Iu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cL(t,e,n){if(Vc(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Cs(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Iu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dL(t,e,n){if(Vc(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Cs(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Iu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ghe(t,e=1,n=!0){const r=j(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[s,l]=re.runKernel(p2,i,o);return{values:s,indices:l}}const pL=ne({topk_:ghe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yhe(t,e=0,n=1,r,a){if(r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new jT(e,n,r,!0,a),o=Tt(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const hL=ne({truncatedNormal_:yhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bhe(t,e=0){const n=j(t,"x","unique","string_or_numeric");U(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:e},[i,o]=re.runKernel(f2,r,a);return{values:i,indices:o}}const fL=ne({unique_:bhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vhe(t,e,n){const r=j(t,"x","unsortedSegmentSum"),a=j(e,"segmentIds","unsortedSegmentSum","int32");U(Wc(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:a},o={numSegments:n};return re.runKernel(g2,i,o)}const mL=ne({unsortedSegmentSum_:vhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xhe(t,e=0){const n=j(t,"x","unstack","string_or_numeric");U(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},a={axis:e};return re.runKernel(m2,r,a)}const Au=ne({unstack_:xhe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gL(t,e){return L2(t,e,"right")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yL(t,e=!0,n,r){return re.makeVariable(t,e,n,r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function U2(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=Tt(t,"int32"),a=Tt([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),s=i*t.length;a.values.set(o,s)}return a.toTensor()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function whe(t){const e=j(t,"condition","whereAsync","bool"),n=await e.data(),r=U2(e.shape,n);return t!==e&&e.dispose(),r}const XT=whe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function khe(t,e,n){const r=j(t,"tensor","boolMask"),a=j(e,"mask","boolMask","bool"),i=n??0,o=a.rank,s=r.shape;U(o>0,()=>"mask cannot be scalar"),na(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let y=i;y<i+o;y++)l*=s[y];const u=s.slice(0,i).concat([l],s.slice(i+o)),c=Ce(r,u),d=Ce(a,[-1]),p=await XT(d),f=Yg(p,[1]),g=wT(c,f,i);return t!==r&&r.dispose(),e!==a&&a.dispose(),f.dispose(),c.dispose(),d.dispose(),p.dispose(),g}const bL=khe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function She(t,e,n,r,a=!0){const i=j(t,"v","movingAverage"),o=j(e,"x","movingAverage"),s=j(n,"decay","movingAverage");$A(i,o),U(Sn(i.shape,o.shape),()=>"Shape mismatch in v and x");const l=Bt(1),u=At(l,s);let c=De(At(o,i),u);if(a){U(r!=null,()=>"When using zeroDebias: true, step is required.");const d=j(r,"step","movingAverage");c=_n(c,At(l,Qp(s,d)))}return yt(i,c)}const vL=ne({movingAverage_:She});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Che(t,e,n){const r=j(t,"indices","scatterND","int32"),a=j(e,"updates","scatterND");ZN(a,r,n);const i={indices:r,updates:a},o={shape:n};return re.runKernel(Xx,i,o)}const xL=ne({scatterND_:Che});function Ehe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const a=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===a))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${a}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nhe(t,e,n,r=0){const a=j(t,"sparseIndices","sparseToDense","int32"),i=j(e,"sparseValues","sparseToDense","string_or_numeric"),o=j(r,"defaultValue","sparseToDense",i.dtype);Ehe(a,i,n,o);const s={sparseIndices:a,sparseValues:i,defaultValue:o},l={outputShape:n};return re.runKernel(s2,s,l)}const wL=ne({sparseToDense_:Nhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function The(t,e){const n=j(e,"indices","gatherND","int32"),r={params:j(t,"x","gatherND","string_or_numeric"),indices:n};return re.runKernel(yx,r)}const kL=ne({gatherND_:The});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ihe(t,e){if(e==null)return t.shape.slice();if(Sn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _he(t,e,n,r){const a=j(t,"x","dropout");if(U(a.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),U(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Xn?a.clone():a;const i=Ihe(a,n),o=1-e,s=_n(xT(yt(VT(i,0,1,"float32",r),o)),o);return De(a,s)}const SL=ne({dropout_:_he});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function QT(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function V2(t,e,n){const r=1-t%2,a=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);a[i]=e-n*Math.cos(o)}return yo(a,"float32")}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Rhe(t,e,n=1){const r=j(t,"predictions","inTopK"),a=j(e,"targets","inTopK");U(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),U(r.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`),na(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];U(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const o=await r.data(),s=await a.data(),[l,u]=[o.length/i,i],c=$r("bool",l);for(let d=0;d<l;d++){const p=d*u,f=o.subarray(p,p+u),g=[];for(let y=0;y<f.length;y++)g.push({value:f[y],index:y});g.sort((y,v)=>v.value-y.value),c[d]=0;for(let y=0;y<n;y++)if(g[y].index===s[d]){c[d]=1;break}}return t!==r&&r.dispose(),e!==a&&a.dispose(),Yo(c,a.shape,"bool")}const CL=Rhe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $he(t,e,n,r,a,i="NHWC",o){let s=t;t.rank===3&&(s=Ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Ce(e,[1,e.shape[0],e.shape[1],e.shape[2]])),U(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),U(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),U(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];U(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),U(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),mo("conv2dDerFilter",a,o);const d={x:s,dy:l},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return re.runKernel(Qv,d,p)}const Ohe=ne({conv2DBackpropFilter_:$he});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function W2(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return De(t,KT(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function G2(t,e){let n=e;const r=QN(t.shape,e.shape);return r.length>0&&(n=Rn(n,r)),Ce(n,t.shape)}function H2(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Xg(t);if(e==="elu")return yT(t);if(e==="relu6")return WT(t);if(e==="prelu")return PT(t,n);if(e==="leakyrelu")return ST(t,r);if(e==="sigmoid")return ad(t);throw new Error(`Unknown fused activation ${e}.`)}const q2=(t,e)=>!(t>0)||e==="linear";/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mhe({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",q2(re.state.gradientDepth,l)===!1){U(a==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=Vg(t,e,n,r,a,i,o);return s!=null&&(E=yt(E,s)),H2(E,l,u,c)}const d=j(t,"x","conv2d","float32"),p=j(e,"filter","conv2d","float32");let f=d,g=!1;d.rank===3&&(g=!0,f=Ce(d,[1,d.shape[0],d.shape[1],d.shape[2]])),U(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),U(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),mo("fused conv2d",r,o);const y=a==="NHWC"?f.shape[3]:f.shape[1];U(p.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${p.shape[2]}.`),U(Ca(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const v=Gr(f.shape,p.shape,n,i,r,o);let b;s!=null&&(b=j(s,"bias","fused conv2d"),[b]=Qn(b,d),a==="NHWC"?Ut(v.outShape,b.shape):(U(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),U(b.shape.length===0||b.shape[0]===v.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let x;if(u!=null){const E=u.shape;if(U(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)U(E[0]===1||E[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${v.outChannels}).`);else if(E.length===3)try{Ut(E,v.outShape)}catch{const R=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(R)}x=j(u,"prelu weights","fused conv2d")}const w=(E,R)=>{U(a==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);const[T,$,P,D]=R,B=W2(E,P,l);U(jg(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const z=W9($.shape,B,T,n,r),q=Ohe($,B,T.shape,n,r),Y=[z,q];if(D!=null){const J=G2(D,B);Y.push(J)}return Y},S={x:f,filter:p,bias:b,preluActivationWeights:x},C={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return s==null?Is((E,R,T)=>{let $=re.runKernel(Ig,S,C);return T([R,E,$]),g&&($=Ce($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:w}})(f,p):Is((E,R,T,$)=>{let P=re.runKernel(Ig,S,C);return $([R,E,P,T]),g&&(P=Ce(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:w}})(f,p,b)}const Phe=ne({fusedConv2d_:Mhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fhe(t,e,n,r,a,i=[1,1],o){let s=t;t.rank===3&&(s=Ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:s,dy:l},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return re.runKernel(ox,u,c)}const Ahe=ne({depthwiseConv2dNativeBackpropFilter_:Fhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dhe(t,e,n,r,a,i=[1,1],o){let s=e,l=!1;e.rank===3&&(l=!0,s=Ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:t},d=re.runKernel(sx,u,c);return l?Ce(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Lhe=ne({depthwiseConv2dNativeBackpropInput_:Dhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zhe({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(q2(re.state.gradientDepth,l)===!1){let C=M2(t,e,n,r,a,i,o);return s!=null&&(C=yt(C,s)),H2(C,l,u,c)}const d=j(t,"x","depthwiseConv2d","float32"),p=j(e,"filter","depthwiseConv2d","float32");let f=d,g=!1;d.rank===3&&(g=!0,f=Ce(d,[1,d.shape[0],d.shape[1],d.shape[2]])),U(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),U(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),U(f.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),U(Ca(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),mo("fused depthwiseConv2d",r,o);const y=Gr(f.shape,p.shape,n,i,r,o,!0);let v;s!=null&&(v=j(s,"bias","fused conv2d"),[v]=Qn(v,d),Ut(y.outShape,v.shape));let b;u!=null&&(b=j(u,"prelu weights","fused depthwiseConv2d"));const x=(C,E)=>{U(jg(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[R,T,$,P]=E,D=W2(C,$,l),B=Lhe(T.shape,D,R,n,r,i,o),z=Ahe(T,D,R.shape,n,r,i,o);if(P!=null){const q=G2(v,D);return[B,z,q]}return[B,z]},w={x:f,filter:p,bias:v,preluActivationWeights:b},S={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return s==null?Is((C,E,R)=>{let T=re.runKernel(_g,w,S);return R([E,C,T]),g&&(T=Ce(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:x}})(f,p):Is((C,E,R,T)=>{let $=re.runKernel(_g,w,S);return T([E,C,$,R]),g&&($=Ce($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:x}})(f,p,v)}const Bhe=ne({fusedDepthwiseConv2d_:zhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jhe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:a,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:s=.2}){if(q2(re.state.gradientDepth,i)===!1){let P=pn(t,e,n,r);return a!=null&&(P=yt(P,a)),H2(P,i,o,s)}let l=j(t,"a","fused matMul"),u=j(e,"b","fused matMul");[l,u]=Qn(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=r?u.shape[u.rank-2]:u.shape[u.rank-1],g=l.shape.slice(0,-2),y=u.shape.slice(0,-2),v=be(g),b=be(y);U(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=Ut(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,f]),w=n?Ce(l,[v,c,p]):Ce(l,[v,p,c]),S=r?Ce(u,[b,f,d]):Ce(u,[b,d,f]);let C;a!=null&&(C=j(a,"bias","fused matMul"),[C]=Qn(C,l),Ut(x,C.shape));let E;o!=null&&(E=j(o,"prelu weights","fused matMul"));const R=(P,D)=>{const[B,z,q,Y]=D,J=W2(Ce(P,q.shape),q,i);let H,L;if(!n&&!r?(H=pn(J,z,!1,!0),L=pn(B,J,!0,!1)):!n&&r?(H=pn(J,z,!1,!1),L=pn(J,B,!0,!1)):n&&!r?(H=pn(z,J,!1,!0),L=pn(B,J,!1,!1)):(H=pn(z,J,!0,!0),L=pn(J,B,!0,!0)),a!=null){const Q=G2(Y,J);return[H,L,Q]}else return[H,L]},T={a:w,b:S,bias:C,preluActivationWeights:E},$={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:s};return a==null?Is((P,D,B)=>{const z=re.runKernel(Tg,T,$);return B([P,D,z]),{value:Ce(z,x),gradFunc:R}})(w,S):Is((P,D,B,z)=>{const q=re.runKernel(Tg,T,$);return z([P,D,q,B]),{value:Ce(q,x),gradFunc:R}})(w,S,C)}const Uhe=ne({fusedMatMul_:jhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const EL=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Phe,depthwiseConv2d:Bhe,matMul:Uhe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vhe(t){return V2(t,.54,.46)}const Whe=ne({hammingWindow_:Vhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ghe(t){return V2(t,.5,.5)}const NL=ne({hannWindow_:Ghe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hhe(t,e,n,r=!1,a=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(Cn(t,i,e)),i+=n;if(r)for(;i<t.size;){const s=i+e-t.size,l=Ea([Cn(t,i,e-s),Xp([s],a)]);o.push(l),i+=n}return o.length===0?nh([],[0,e]):Ce(Ea(o),[o.length,e])}const TL=ne({frame_:Hhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qhe(t,e,n,r,a=NL){r==null&&(r=QT(e));const i=TL(t,e,n),o=De(i,a(e));return j2(o,r)}const Khe=ne({stft_:qhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xhe(t,e,n,r,a="bilinear",i=0){const o=j(t,"image","cropAndResize"),s=j(e,"boxes","cropAndResize","float32"),l=j(n,"boxInd","cropAndResize","int32"),u=s.shape[0];U(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),U(s.rank===2&&s.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`),U(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`),U(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),U(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),U(a==="bilinear"||a==="nearest",()=>`method must be bilinear or nearest, but was ${a}`);const c={image:o,boxes:s,boxInd:l},d={method:a,extrapolationValue:i,cropSize:r};return re.runKernel(nx,c,d)}const Qhe=ne({cropAndResize_:Xhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yhe(t){const e=j(t,"image","flipLeftRight","float32");U(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return re.runKernel(fx,n,{})}const Jhe=ne({flipLeftRight_:Yhe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zhe(t){const e=j(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];U(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),U(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const a=new Array(e.rank);return a.fill(1,0,n),a[n]=3,Yp(e,a)}const efe=ne({grayscaleToRGB_:Zhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tfe(t,e,n=0,r=.5){const a=j(t,"image","rotateWithOffset","float32");U(a.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);const i={image:a},o={radians:e,fillValue:n,center:r};return re.runKernel(v2,i,o)}const nfe=ne({rotateWithOffset_:tfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rh(t,e,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),U(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),U(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),U(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),U(e.rank===1,()=>"scores must be a 1D tensor"),U(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),U(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rfe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=j(t,"boxes","nonMaxSuppression","float32"),o=j(e,"scores","nonMaxSuppression","float32"),s=rh(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return re.runKernel(Ox,{boxes:i,scores:o},l)}const afe=ne({nonMaxSuppression_:rfe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ife(t,e,n){const r=ofe(t,e,n),a=r<0?-(r+1):r;t.splice(a,0,e)}function ofe(t,e,n){return lfe(t,e,n||sfe)}function sfe(t,e){return t>e?1:t<e?-1:0}function lfe(t,e,n){let r=0,a=t.length,i=0,o=!1;for(;r<a;){i=r+(a-r>>>1);const s=n(e,t[i]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function K2(t,e,n,r,a){return YT(t,e,n,r,a,0)}function X2(t,e,n,r,a,i){return YT(t,e,n,r,a,0,!1,i,!0)}function Q2(t,e,n,r,a,i){return YT(t,e,n,r,a,i,!0)}function YT(t,e,n,r,a,i,o=!1,s=!1,l=!1){const u=[];for(let v=0;v<e.length;v++)e[v]>a&&u.push({score:e[v],boxIndex:v,suppressBeginIndex:0});u.sort(IL);const c=i>0?-.5/i:0,d=[],p=[];for(;d.length<n&&u.length>0;){const v=u.pop(),{score:b,boxIndex:x,suppressBeginIndex:w}=v;if(b<a)break;let S=!1;for(let C=d.length-1;C>=w;--C){const E=ufe(t,x,d[C]);if(E>=r){S=!0;break}if(v.score=v.score*cfe(r,c,E),v.score<=a)break}v.suppressBeginIndex=d.length,S||(v.score===b?(d.push(x),p.push(v.score)):v.score>a&&ife(u,v,IL))}const f=d.length,g=n-f;s&&g>0&&(d.push(...new Array(g).fill(0)),p.push(...new Array(g).fill(0)));const y={selectedIndices:d};return o&&(y.selectedScores=p),l&&(y.validOutputs=f),y}function ufe(t,e,n){const r=t.subarray(e*4,e*4+4),a=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),f=(s-i)*(l-o),g=(d-u)*(p-c);if(f<=0||g<=0)return 0;const y=Math.max(i,u),v=Math.max(o,c),b=Math.min(s,d),x=Math.min(l,p),w=Math.max(b-y,0)*Math.max(x-v,0);return w/(f+g-w)}function cfe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function IL(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function dfe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=j(t,"boxes","nonMaxSuppressionAsync"),o=j(e,"scores","nonMaxSuppressionAsync"),s=rh(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),u=l[0],c=l[1],{selectedIndices:d}=K2(u,c,n,r,a);return i!==t&&i.dispose(),o!==e&&o.dispose(),yo(d,"int32")}const pfe=dfe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hfe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const o=j(t,"boxes","nonMaxSuppression"),s=j(e,"scores","nonMaxSuppression"),l=rh(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const u={boxes:o,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},d=re.runKernel(Px,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const ffe=ne({nonMaxSuppressionWithScore_:hfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function mfe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const o=j(t,"boxes","nonMaxSuppressionAsync"),s=j(e,"scores","nonMaxSuppressionAsync"),l=rh(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const u=await Promise.all([o.data(),s.data()]),c=u[0],d=u[1],{selectedIndices:p,selectedScores:f}=Q2(c,d,n,r,a,i);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:yo(p,"int32"),selectedScores:yo(f)}}const gfe=mfe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yfe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const o=j(t,"boxes","nonMaxSuppression"),s=j(e,"scores","nonMaxSuppression"),l=rh(o,s,n,r,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,p={boxes:o,scores:s},f={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:i},g=re.runKernel(Mx,p,f);return{selectedIndices:g[0],validOutputs:g[1]}}const bfe=ne({nonMaxSuppressionPadded_:yfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function vfe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const o=j(t,"boxes","nonMaxSuppressionAsync"),s=j(e,"scores","nonMaxSuppressionAsync"),l=rh(o,s,n,r,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[p,f]=await Promise.all([o.data(),s.data()]),{selectedIndices:g,validOutputs:y}=X2(p,f,u,c,d,i);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:yo(g,"int32"),validOutputs:Bt(y,"int32")}}const xfe=vfe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wfe(t,e,n=!1,r=!1){const a=j(t,"images","resizeBilinear");U(a.rank===3||a.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),U(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),U(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=Ce(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const s={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=re.runKernel(qx,s,l);return o?Ce(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const kfe=ne({resizeBilinear_:wfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sfe(t,e,n=!1,r=!1){const a=j(t,"images","resizeNearestNeighbor");U(a.rank===3||a.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),U(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),U(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),U(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=Ce(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const s={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=re.runKernel(Hx,s,l);return o?Ce(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Cfe=ne({resizeNearestNeighbor_:Sfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* https://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Efe(t,e="binary",n=!1,r=.5){const a=j(t,"image","threshold"),i=.2989,o=.587,s=.114,l=a.shape[0]*a.shape[1];let u=De(yo([r]),255),c,d,p,f;if(U(a.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`),U(a.shape[2]===3||a.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`),U(a.dtype==="int32"||a.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`),U(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),a.shape[2]===3){[c,d,p]=th(a,[1,1,1],-1);const y=De(c,i),v=De(d,o),b=De(p,s);f=yt(yt(y,v),b)}else f=t;if(e==="otsu"){const y=mT(Un(GT(f),"int32"),Yo([]),256);u=Nfe(y,l)}const g=n?F2(f,u):Hg(f,u);return Un(De(g,255),"int32")}function Nfe(t,e){let n=yo([-1]),r=yo([0]),a=yo([0]),i,o,s,l,u,c;for(let d=0;d<t.size-1;d++){i=Cn(t,0,d+1),o=Cn(t,d+1),u=_n(Rn(i),e),c=_n(Rn(o),e);const p=Rn(De(i,eh(0,i.size)));s=_n(p,Rn(i));const f=Xp(o.shape,i.size),g=yt(eh(0,o.size),f),y=De(o,g);l=_n(Rn(y),Rn(o));const v=At(s,l),b=At(s,l),x=De(u,c);a=De(De(x,v),b);const w=Hg(a,r);r=id(w,a,r),n=id(w,yo([d]),n)}return n}const Tfe=ne({threshold_:Efe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ife(t,e,n="nearest",r="constant",a=0,i){const o=j(t,"image","transform","float32"),s=j(e,"transforms","transform","float32");U(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),U(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),U(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:s},u={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return re.runKernel(h2,l,u)}const _fe=ne({transform_:Ife});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rfe(t,e,n){U(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),U(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=j(t,"a","bandPart");U(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const a=r.shape,[i,o]=r.shape.slice(-2);if(!(e<=i))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);e<0&&(e=i),n<0&&(n=o);const s=Ce(eh(0,i,1,"int32"),[-1,1]),l=eh(0,o,1,"int32"),u=At(s,l),c=qg(F2(u,Bt(+e,"int32")),kT(u,Bt(-n,"int32"))),d=Mu([i,o],r.dtype);return Ce(_s(Au(Ce(r,[-1,i,o])).map(p=>id(c,p,d))),a)}const $fe=ne({bandPart_:Rfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ofe(t){let e;if(Array.isArray(t)){e=!1,U(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const a=t[0].shape[0];for(let i=1;i<t.length;++i)U(t[i].shape[0]===a,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${a})`)}else e=!0,t=th(t,t.shape[0],0).map(a=>Yg(a,[0]));U(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let a=0;a<t.length;++a)n.push(re.tidy(()=>{let i=r[a];if(a>0)for(let o=0;o<a;++o){const s=De(Rn(De(n[o],i)),n[o]);i=At(i,s)}return _n(i,Gg(i,"euclidean"))}));return e?_s(n,0):n}const Mfe=ne({gramSchmidt_:Ofe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pfe(t,e=!1){if(U(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return _L(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Au(Ce(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],i=[];r.forEach(l=>{const[u,c]=_L(l,e);a.push(u),i.push(c)});const o=Ce(_s(a,0),t.shape),s=Ce(_s(i,0),t.shape);return[o,s]}}function _L(t,e=!1){return re.tidy(()=>{U(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let a=vT(n),i=wl(t);const o=nh([[1]],[1,1]);let s=wl(o);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=i,d=s,p=a;[s,i,a]=re.tidy(()=>{const f=Cn(i,[u,u],[n-u,1]),g=Gg(f),y=Cn(i,[u,u],[1,1]),v=id(Hg(y,0),nh([[-1]]),nh([[1]])),b=At(y,De(v,g)),x=_n(f,b);x.shape[0]===1?s=wl(o):s=Ea([o,Cn(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const w=Ns(_n(pn(v,b),g)),S=Cn(i,[u,0],[n-u,r]),C=De(w,s),E=zg(s);if(u===0)i=At(S,pn(C,pn(E,S)));else{const $=At(S,pn(C,pn(E,S)));i=Ea([Cn(i,[0,0],[u,r]),$],0)}const R=zg(C),T=Cn(a,[0,u],[n,a.shape[1]-u]);if(u===0)a=At(T,pn(pn(T,s),R));else{const $=At(T,pn(pn(T,s),R));a=Ea([Cn(a,[0,0],[n,u]),$],1)}return[s,i,a]}),Sa([c,d,p])}return!e&&n>r&&(a=Cn(a,[0,0],[n,r]),i=Cn(i,[0,0],[r,r])),[a,i]})}const Ffe=ne({qr_:Pfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Ua;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Ua||(Ua={}));function Afe(t,e,n=Ua.SUM_BY_NONZERO_WEIGHTS){const r=j(t,"losses","computeWeightedLoss");let a=null;e!=null&&(a=j(e,"weights","computeWeightedLoss"));const i=a==null?r:De(r,a);if(n===Ua.NONE)return i;if(n===Ua.SUM)return Rn(i);if(n===Ua.MEAN){if(a==null)return Kg(i);{const o=r.size/a.size,s=_n(Rn(i),Rn(a));return o>1?_n(s,Bt(o)):s}}if(n===Ua.SUM_BY_NONZERO_WEIGHTS){if(a==null)return _n(Rn(i),Bt(r.size));{const o=De(a,Pu(r.shape)),s=Un(Rn(OT(o,Bt(0))),"float32");return _n(Rn(i),s)}}throw Error(`Unknown reduction: ${n}`)}const Nl=ne({computeWeightedLoss_:Afe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dfe(t,e,n,r=Ua.SUM_BY_NONZERO_WEIGHTS){const a=j(t,"labels","absoluteDifference"),i=j(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=j(n,"weights","absoluteDifference")),na(a.shape,i.shape,"Error in absoluteDifference: ");const s=Ci(At(a,i));return Nl(s,o,r)}const Lfe=ne({absoluteDifference_:Dfe});function zfe(t,e,n,r,a=Ua.SUM_BY_NONZERO_WEIGHTS){const i=j(t,"labels","cosineDistance"),o=j(e,"predictions","cosineDistance");let s=null;r!=null&&(s=j(r,"weights","cosineDistance")),na(i.shape,o.shape,"Error in cosineDistance: ");const l=Bt(1),u=At(l,Rn(De(i,o),n,!0));return Nl(u,s,a)}const Bfe=ne({cosineDistance_:zfe});function jfe(t,e,n,r=Ua.SUM_BY_NONZERO_WEIGHTS){let a=j(t,"labels","hingeLoss");const i=j(e,"predictions","hingeLoss");let o=null;n!=null&&(o=j(n,"weights","hingeLoss")),na(a.shape,i.shape,"Error in hingeLoss: ");const s=Bt(1);a=At(De(Bt(2),a),s);const l=Xg(At(s,De(a,i)));return Nl(l,o,r)}const Ufe=ne({hingeLoss_:jfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vfe(t,e,n,r=1,a=Ua.SUM_BY_NONZERO_WEIGHTS){const i=j(t,"labels","huberLoss"),o=j(e,"predictions","huberLoss");let s=null;n!=null&&(s=j(n,"weights","huberLoss")),na(i.shape,o.shape,"Error in huberLoss: ");const l=Bt(r),u=Ci(At(o,i)),c=$T(u,l),d=At(u,c),p=yt(De(Bt(.5),go(c)),De(l,d));return Nl(p,s,a)}const Wfe=ne({huberLoss_:Vfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gfe(t,e,n,r=1e-7,a=Ua.SUM_BY_NONZERO_WEIGHTS){const i=j(t,"labels","logLoss"),o=j(e,"predictions","logLoss");let s=null;n!=null&&(s=j(n,"weights","logLoss")),na(i.shape,o.shape,"Error in logLoss: ");const l=Bt(1),u=Bt(r),c=Ns(De(i,Jp(yt(o,u)))),d=De(At(l,i),Jp(yt(At(l,o),u))),p=At(c,d);return Nl(p,s,a)}const Hfe=ne({logLoss_:Gfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qfe(t,e,n,r=Ua.SUM_BY_NONZERO_WEIGHTS){const a=j(t,"labels","meanSquaredError"),i=j(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=j(n,"weights","meanSquaredError")),na(a.shape,i.shape,"Error in meanSquaredError: ");const s=qT(a,i);return Nl(s,o,r)}const Kfe=ne({meanSquaredError_:qfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xfe(t,e){const n=j(t,"labels","sigmoidCrossEntropyWithLogits"),r=j(e,"logits","sigmoidCrossEntropyWithLogits");na(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=Xg(r),i=De(r,n),o=CT(Ou(Ns(Ci(r))));return yt(At(a,i),o)}function Qfe(t,e,n,r=0,a=Ua.SUM_BY_NONZERO_WEIGHTS){let i=j(t,"multiClassLabels","sigmoidCrossEntropy");const o=j(e,"logits","sigmoidCrossEntropy");let s=null;if(n!=null&&(s=j(n,"weights","sigmoidCrossEntropy")),na(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=Bt(r),c=Bt(1),d=Bt(.5);i=yt(De(i,At(c,u)),De(d,u))}const l=Xfe(i,o);return Nl(l,s,a)}const Yfe=ne({sigmoidCrossEntropy_:Qfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jfe(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Is((r,a,i)=>{const o=NT(a,[n],!0),s=At(Un(a,"float32"),o);i([r,s]);const l=Ns(De(s,r));return{value:Rn(l,[n]),gradFunc:(u,c)=>{const[d,p]=c,f=Pr(u.shape,[n]);return[De(Ce(u,f),At(Un(d,"float32"),Ou(p))),De(Ce(u,f),At(Ou(p),Un(d,"float32")))]}}})(t,e)}function Zfe(t,e,n,r=0,a=Ua.SUM_BY_NONZERO_WEIGHTS){let i=j(t,"onehotLabels","softmaxCrossEntropy");const o=j(e,"logits","softmaxCrossEntropy");let s=null;if(n!=null&&(s=j(n,"weights","softmaxCrossEntropy")),na(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const u=Bt(r),c=Bt(1),d=Bt(i.shape[1]);i=yt(De(i,At(c,u)),_n(u,d))}const l=Jfe(i,o);return Nl(l,s,a)}const eme=ne({softmaxCrossEntropy_:Zfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tme(t,e,n,r){const a=j(t,"indices","sparseFillEmptyRows","int32"),i=j(e,"values","sparseFillEmptyRows"),o=j(n,"denseShape","sparseFillEmptyRows","int32"),s=j(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${a.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(s.rank!==0)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const l={indices:a,values:i,denseShape:o,defaultValue:s},u=re.runKernel(r2,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const nme=ne({sparseFillEmptyRows_:tme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rme(t,e,n){const r=j(t,"inputIndices","sparseReshape","int32"),a=j(e,"inputShape","sparseReshape","int32"),i=j(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(a.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:a,newShape:i},s=re.runKernel(a2,o);return{outputIndices:s[0],outputShape:s[1]}}const ame=ne({sparseReshape_:rme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ime(t,e,n){const r=j(t,"data","sparseSegmentMean"),a=j(e,"indices","sparseSegmentMean","int32"),i=j(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:a,segmentIds:i};return re.runKernel(i2,o)}const ome=ne({sparseSegmentMean_:ime});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sme(t,e,n){const r=j(t,"data","sparseSegmentSum"),a=j(e,"indices","sparseSegmentSum","int32"),i=j(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:a,segmentIds:i};return re.runKernel(o2,o)}const lme=ne({sparseSegmentSum_:sme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ume(t,e,n,r,a,i,o,s){const l=j(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=j(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:l,dataSplits:u},p=re.runKernel(u2,d,c);return{nGrams:p[0],nGramsSplits:p[1]}}const cme=ne({stringNGrams_:ume});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dme(t,e,n=!0){const r=j(t,"input","stringSplit","string"),a=j(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(a.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${a.shape}`);const i={skipEmpty:n},o={input:r,delimiter:a},s=re.runKernel(c2,o,i);return{indices:s[0],values:s[1],shape:s[2]}}const pme=ne({stringSplit_:dme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hme(t,e){const n=j(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return re.runKernel(d2,a,r)}const fme=ne({stringToHashBucketFast_:hme});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const RL={fft:B2,ifft:Qg,rfft:j2,irfft:HT},$L={hammingWindow:Whe,hannWindow:NL,frame:TL,stft:Khe},JT={flipLeftRight:Jhe,grayscaleToRGB:efe,resizeNearestNeighbor:Cfe,resizeBilinear:kfe,rotateWithOffset:nfe,cropAndResize:Qhe,nonMaxSuppression:afe,nonMaxSuppressionAsync:pfe,nonMaxSuppressionWithScore:ffe,nonMaxSuppressionWithScoreAsync:gfe,nonMaxSuppressionPadded:bfe,nonMaxSuppressionPaddedAsync:xfe,threshold:Tfe,transform:_fe},OL={bandPart:$fe,gramSchmidt:Mfe,qr:Ffe},ML={absoluteDifference:Lfe,computeWeightedLoss:Nl,cosineDistance:Bfe,hingeLoss:Ufe,huberLoss:Wfe,logLoss:Hfe,meanSquaredError:Kfe,sigmoidCrossEntropy:Yfe,softmaxCrossEntropy:eme},PL={sparseFillEmptyRows:nme,sparseReshape:ame,sparseSegmentMean:ome,sparseSegmentSum:lme},FL={stringNGrams:cme,stringSplit:pme,stringToHashBucketFast:fme};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Du extends g9{minimize(e,n=!1,r){const{value:a,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(s=>({name:s.name,tensor:i[s.name]}));this.applyGradients(o)}else this.applyGradients(i);return Sa(i),n?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return gD(e,n)}dispose(){this.iterations_!=null&&Sa(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Bt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Du,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Y2 extends Du{constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=re.registeredVariables[n],i=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accum_grad`,variable:Xt(()=>Ei(a).variable(i))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${n}/accum_var`,variable:Xt(()=>Ei(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[n];if(o==null)return;const s=this.accumulatedGrads[r].variable,l=this.accumulatedUpdates[r].variable;Xt(()=>{const u=yt(De(s,this.rho),De(go(o),1-this.rho)),c=De(_n(Ts(yt(l,this.epsilon)),Ts(yt(s,this.epsilon))),o),d=yt(De(l,this.rho),De(go(c),1-this.rho));s.assign(u),l.assign(d);const p=yt(De(c,-this.learningRate),a);a.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Sa(this.accumulatedGrads.map(e=>e.variable)),Sa(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}Y2.className="Adadelta",Ru(Y2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class J2 extends Du{constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=re.registeredVariables[n];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accumulator`,variable:Xt(()=>Xp(a.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[r].tensor:e[n];if(i==null)return;const o=this.accumulatedGrads[r].variable;Xt(()=>{const s=yt(o,go(i));o.assign(s);const l=yt(De(_n(i,Ts(yt(s,re.backend.epsilon()))),-this.learningRate),a);a.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Sa(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}J2.className="Adagrad",Ru(J2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Z2 extends Du{constructor(e,n,r,a=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Xt(()=>{this.accBeta1=Bt(n).variable(),this.accBeta2=Bt(r).variable()}),a==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Xt(()=>{const r=At(1,this.accBeta1),a=At(1,this.accBeta2);n.forEach((i,o)=>{const s=re.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Xt(()=>Ei(s).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:Xt(()=>Ei(s).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,p=yt(De(c,this.beta1),De(u,1-this.beta1)),f=yt(De(d,this.beta2),De(go(u),1-this.beta2)),g=_n(p,r),y=_n(f,a);c.assign(p),d.assign(f);const v=yt(De(_n(g,yt(Ts(y),this.epsilon)),-this.learningRate),s);s.assign(v)}),this.accBeta1.assign(De(this.accBeta1,this.beta1)),this.accBeta2.assign(De(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Sa(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Sa(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Xt(()=>{this.accBeta1.assign(Qp(this.beta1,this.iterations_+1)),this.accBeta2.assign(Qp(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}Z2.className="Adam",Ru(Z2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class ew extends Du{constructor(e,n,r,a=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Xt(()=>{this.iteration=Bt(0).variable(),this.accBeta1=Bt(n).variable()}),a==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Xt(()=>{const r=At(1,this.accBeta1),a=_n(-this.learningRate,yt(De(this.iteration,this.decay),1));n.forEach((i,o)=>{const s=re.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Ei(s).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:Ei(s).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,p=yt(De(c,this.beta1),De(u,1-this.beta1)),f=De(d,this.beta2),g=Ci(u),y=RT(f,g);c.assign(p),d.assign(y);const v=yt(De(_n(a,r),_n(p,yt(y,this.epsilon))),s);s.assign(v)}),this.iteration.assign(yt(this.iteration,1)),this.accBeta1.assign(De(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Sa(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Sa(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}ew.className="Adamax",Ru(ew);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Jg extends Du{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=Array.isArray(e)?e[r].tensor:e[n];if(a==null)return;const i=re.registeredVariables[n];Xt(()=>{const o=yt(De(this.c,a),i);i.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Es(Bt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}Jg.className="SGD",Ru(Jg);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class tw extends Jg{constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Bt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=re.registeredVariables[n];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${n}/momentum`,variable:Xt(()=>Ei(a).variable(!1))});const i=this.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];o!=null&&Xt(()=>{let s;const l=yt(De(this.m,i),o);this.useNesterov?s=yt(De(this.c,yt(o,De(l,this.m))),a):s=yt(De(this.c,l),a),i.assign(l),a.assign(s)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Sa(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}tw.className="Momentum",Ru(tw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class nw extends Du{constructor(e,n=.9,r=0,a=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,a==null&&(this.epsilon=re.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=re.registeredVariables[n],i=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${n}/rms`,variable:Xt(()=>Ei(a).variable(i))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${n}/momentum`,variable:Xt(()=>Ei(a).variable(i))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${n}/mg`,variable:Xt(()=>Ei(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[n];if(o==null)return;const s=this.accumulatedMeanSquares[r].variable,l=this.accumulatedMoments[r].variable;Xt(()=>{const u=yt(De(s,this.decay),De(go(o),1-this.decay));if(this.centered){const c=this.accumulatedMeanGrads[r].variable,d=yt(De(c,this.decay),De(o,1-this.decay)),p=_n(De(o,this.learningRate),Ts(At(u,yt(go(d),this.epsilon)))),f=yt(De(l,this.momentum),p);s.assign(u),c.assign(d),l.assign(f);const g=At(a,f);a.assign(g)}else{const c=yt(De(s,this.decay),De(go(o),1-this.decay)),d=yt(De(l,this.momentum),_n(De(o,this.learningRate),Ts(yt(c,this.epsilon))));s.assign(c),l.assign(d);const p=At(a,d);a.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Sa(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Sa(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Sa(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}nw.className="RMSProp",Ru(nw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Lu{static sgd(e){return new Jg(e)}static momentum(e,n,r=!1){return new tw(e,n,r)}static rmsprop(e,n=.9,r=0,a=null,i=!1){return new nw(e,n,r,a,i)}static adam(e=.001,n=.9,r=.999,a=null){return new Z2(e,n,r,a)}static adadelta(e=.001,n=.95,r=null){return new Y2(e,n,r)}static adamax(e=.002,n=.9,r=.999,a=null,i=0){return new ew(e,n,r,a,i)}static adagrad(e,n=.1){return new J2(e,n)}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mme={sgd:Lu.sgd,momentum:Lu.momentum,adadelta:Lu.adadelta,adagrad:Lu.adagrad,rmsprop:Lu.rmsprop,adamax:Lu.adamax,adam:Lu.adam};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gme=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function AL(){return new Promise(t=>gme(()=>t()))}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ZT(t,e){const n=t[0].length;t.forEach((a,i)=>{U(a.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),U(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((a,i)=>{for(let o=0;o<n;o++)U(o===e||a[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${a}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function Rs(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Jo;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Jo||(Jo={}));function DL(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let a=1;a<n.length;++a){const i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${a+t}] = ${i} but shape[${a+t}] = ${s}`)}else r[o]=i}return r}function LL(t){const e={FIRST_DIM_SIZE:Jo.FIRST_DIM_SIZE,VALUE_ROWIDS:Jo.VALUE_ROWIDS,ROW_LENGTHS:Jo.ROW_LENGTHS,ROW_SPLITS:Jo.ROW_SPLITS,ROW_LIMITS:Jo.ROW_LIMITS,ROW_STARTS:Jo.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function zL(t){return t.length===0?0:t[0]===Jo.FIRST_DIM_SIZE?t.length-1:t.length}function BL(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let a=0;a<Math.min(n,r-1);++a){const i=t[a],o=e[a+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${a-t.length}] = ${i} but ragged tensor input.flatValues.shape[${a-t.length}] = ${o}`)}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const eI=30;function rw(t){return t<=eI?t:Ov(t,Math.floor(Math.sqrt(t)))}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tI(t,e,n){const r=n*(typeof t=="number"?t:t[0]),a=e*(typeof t=="number"?t:t[1]);return[r,a]}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zg(t,e,n,r=!0){let a=[];if(r)a=a.concat(e.slice(0)),a.push(t[0]/n),a=a.concat(t.slice(1));else{a=a.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)a=a.concat([t[o+1]/e[o],e[o]]);a=a.concat(t.slice(i+1))}return a}function e0(t,e,n=!0){const r=[];if(n){r.push(e);for(let a=e+1;a<t;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{const a=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):a.push(o);r.push(...a),r.push(0),r.push(...i)}return r}function t0(t,e,n,r=!0){const a=[];r?a.push(t[0]/n):a.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?a.push(e[i-1]*t[i]):a.push(t[i]/e[i-1]):a.push(t[i]);return a}function nI(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function rI(t,e,n){const r=t.slice(0,1);for(let a=0;a<n;++a)r.push(t[a+1]-e[a][0]-e[a][1]);return r}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const aI=1.7580993408473768,iI=1.0507009873554805;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const oI=.3275911,sI=.254829592,lI=-.284496736,uI=1.421413741,cI=-1.453152027,dI=1.061405429;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tl(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function jL(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function UL(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=0;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function VL(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=2;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function pI(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function WL(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function GL(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let a=0;a<Math.ceil(t/2);a++){const i=(e?2:-2)*Math.PI*(a/t);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function HL(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),a=Math.cos(r),i=Math.sin(r);return{real:a,imag:i}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hI="->",yme=/->/g,qL=",",KL="...";function fI(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(yme,"").length)/hI.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${hI}").`);const[r,a]=t.split(hI);U(r.indexOf(KL)===-1,()=>`The ellipsis notation ("${KL}") is not supported yet.`);const i=r.split(qL),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let p=0;p<a.length;++p){const f=a[p];if(!i.some(g=>g.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);s.indexOf(f)===-1&&s.push(f)}for(let p=0;p<r.length;++p){const f=r[p];s.indexOf(f)===-1&&f!==qL&&s.push(f)}const l=new Array(i.length);for(let p=0;p<o;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let f=0;f<i[p].length;++f)l[p].push(s.indexOf(i[p][f]))}const u=s.length,c=a.length,d=[];for(let p=c;p<u;++p)d.push(p);return{allDims:s,summedDims:d,idDims:l}}function mI(t,e){let n=new Array(t);n.fill(-1);for(let a=0;a<e.length;++a)n[e[a]]=a;const r=[];for(let a=0;a<t;++a)n[a]===-1&&r.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:r}}function gI(t,e,n){const r=new Array(t);for(let a=0;a<n.length;++a){const i=n[a].shape;for(let o=0;o<e[a].length;++o)r[e[a][o]]===void 0?r[e[a][o]]=i[o]:U(r[e[a][o]]===i[o],()=>`Expected dimension ${r[e[a][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function yI(t,e){const n=t,r=[];let a=0;t.length===0&&n.push(-1),a=t.length+1;for(let o=0;o<a;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const s=n[o],l=bme(e,s);for(const u of l)i.indexOf(u)===-1&&(r[o].push(u),i.push(u))}return{path:n,steps:r}}function bI(t){return t.every((e,n)=>e===n)}function bme(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function vI(t,e,n=0){let r=[];if(typeof e=="number")U(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const a=e.reduce((o,s)=>(s===-1&&(o+=1),o),0);U(a<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((s,l)=>l>0?s+l:s);e[i]=t.shape[n]-o}U(t.shape[n]===e.reduce((o,s)=>o+s),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function XL(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function QL(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function YL(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function JL(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function ZL(t,e){return`size ${t} must be non-negative, not ${e}`}function e7(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function t7(t,e){const n=be(t),r=be(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function n7(t,e){const n=be(t),r=be(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xI(){return"segment ids must be >= 0"}function r7(){return"segment ids are not increasing"}function a7(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function i7(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function o7(t,e){let n=!1,r;for(t<=eI?(r=t,n=!0):r=Ov(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=Ov(t,r+1);return r}function s7(t,e,n){const r=[],a=t.length;for(let i=0;i<a;i++)i!==e?r.push(t[i]):r.push(n);return r}function wI(t,e,n,r){const a=e.shape.length,i=t.shape.length;if(r!==0&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],s=[];let l=1,u=1,c=1;for(let d=0;d<r;++d)s.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)s.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<a;d++)s.push(e.shape[d]);for(let d=n+1;d<i;d++)s.push(t.shape[d]),c*=t.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:s}}const vme=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:wI,computeOutShape:s7,segOpComputeOptimalWindowSize:o7},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ld(t){try{return t.map(e=>bl(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function l7(t){return t.map(e=>Ss(e))}const u7=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:sI,ERF_A2:lI,ERF_A3:uI,ERF_A4:cI,ERF_A5:dI,ERF_P:oI,PARALLELIZE_THRESHOLD:eI,get RowPartitionType(){return Jo},SELU_SCALE:iI,SELU_SCALEALPHA:aI,applyActivation:H2,assertAndGetBroadcastShape:Ut,assertAxesAreInnerMostDims:ia,assertParamsConsistent:ZT,assignToTypedArray:WL,axesAreInnerMostDims:bT,calculateShapes:Hp,checkEinsumDimSizes:gI,checkPadOnDimRoundingMode:mo,combineLocations:oD,combineRaggedTensorToTensorShapes:DL,complexWithEvenIndex:UL,complexWithOddIndex:VL,computeConv2DInfo:Gr,computeConv3DInfo:$u,computeDefaultPad:dT,computeDilation2DInfo:Bg,computeOptimalWindowSize:rw,computeOutAndReduceShapes:aa,computeOutShape:Rs,computePool2DInfo:fo,computePool3DInfo:Sl,convertConv2DDataFormat:Cl,decodeEinsumEquation:fI,eitherStridesOrDilationsAreOne:Ca,expandShapeToKeepDim:Pr,exponent:HL,exponents:GL,fromStringArrayToUint8:l7,fromUint8ToStringArray:ld,getAxesPermutation:gr,getBroadcastDims:td,getComplexWithIndex:pI,getEinsumComputePath:yI,getEinsumPermutation:mI,getFusedBiasGradient:G2,getFusedDyActivation:W2,getImageCenter:tI,getInnerMostAxes:yr,getPermuted:e0,getRaggedRank:zL,getReductionAxes:QN,getReshaped:Zg,getReshapedPermuted:t0,getRowPartitionTypesHelper:LL,getSliceBeginCoords:nI,getSliceSize:rI,getSparseFillEmptyRowsIndicesDenseShapeMismatch:XL,getSparseFillEmptyRowsNegativeIndexErrorMessage:QL,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:YL,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:e7,getSparseReshapeInputOutputMismatchErrorMessage:n7,getSparseReshapeInputOutputMultipleErrorMessage:t7,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:JL,getSparseReshapeNegativeOutputDimErrorMessage:ZL,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:i7,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:xI,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:r7,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:a7,getUndoAxesPermutation:Wg,isIdentityPermutation:bI,log:yse,mergeRealAndImagArrays:Tl,prepareAndValidate:R2,prepareSplitSize:vI,segment_util:vme,shouldFuse:q2,slice_util:m9,splitRealAndImagArrays:jL,tupleValuesAreOne:jg,upcastType:si,validateDefaultValueShape:BL,validateInput:ZN,validateUpdateShape:JN,warn:ji},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xme=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:K2,nonMaxSuppressionV4Impl:X2,nonMaxSuppressionV5Impl:Q2,whereImpl:U2},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wme=Object.freeze(Object.defineProperty({__proto__:null,Abs:Pv,Acos:Cm,Acosh:Em,AdadeltaOptimizer:Y2,AdagradOptimizer:J2,AdamOptimizer:Z2,AdamaxOptimizer:ew,Add:Dp,AddN:Fv,All:Av,Any:Dv,ArgMax:Lv,ArgMin:zv,Asin:Nm,Asinh:Tm,Atan:Im,Atan2:Rm,Atanh:_m,AvgPool:Bv,AvgPool3D:jv,AvgPool3DGrad:sN,AvgPoolGrad:oN,BatchMatMul:Uv,BatchToSpaceND:Vv,Bincount:Wv,BroadcastArgs:Gv,BroadcastTo:dse,Cast:$m,Ceil:Om,ClipByValue:Mm,Complex:Hv,ComplexAbs:qv,Concat:Kv,Conv2D:Xv,Conv2DBackpropFilter:Qv,Conv2DBackpropInput:Yv,Conv3D:Jv,Conv3DBackpropFilterV2:lN,Conv3DBackpropInputV2:Zv,Cos:Pm,Cosh:Fm,CropAndResize:nx,Cumprod:ex,Cumsum:tx,DataStorage:Y4,DenseBincount:rx,DepthToSpace:ax,DepthwiseConv2dNative:ix,DepthwiseConv2dNativeBackpropFilter:ox,DepthwiseConv2dNativeBackpropInput:sx,Diag:lx,Dilation2D:ux,Dilation2DBackpropFilter:cN,Dilation2DBackpropInput:uN,get ENV(){return rN},Einsum:cx,Elu:Dm,EluGrad:dN,Environment:pA,Equal:zm,Erf:Lm,Exp:Bm,ExpandDims:dx,Expm1:jm,FFT:px,Fill:hx,FlipLeftRight:fx,Floor:Um,FloorDiv:Vm,FromPixels:b2,FusedBatchNorm:mx,FusedConv2D:Ig,FusedDepthwiseConv2D:_g,GatherNd:yx,GatherV2:gx,Greater:Wm,GreaterEqual:Gm,IFFT:bx,Identity:Hm,Imag:vx,IsFinite:qm,IsInf:Km,IsNan:Xm,KernelBackend:Iv,LRN:kx,LRNGrad:pN,LeakyRelu:xx,Less:Qm,LessEqual:Ym,LinSpace:wx,Log:Jm,Log1p:Zm,LogSoftmax:hse,LogicalAnd:eg,LogicalNot:tg,LogicalOr:ng,LogicalXor:pse,LowerBound:fse,Max:Sx,MaxPool:Cx,MaxPool3D:Ex,MaxPool3DGrad:fN,MaxPoolGrad:hN,MaxPoolWithArgmax:Nx,Maximum:rg,Mean:Tx,Min:Ix,Minimum:ag,MirrorPad:_x,Mod:ig,MomentumOptimizer:tw,Multinomial:Rx,Multiply:og,Neg:$x,NonMaxSuppressionV3:Ox,NonMaxSuppressionV4:Mx,NonMaxSuppressionV5:Px,NotEqual:sg,OP_SCOPE_SUFFIX:PN,OneHot:Ax,OnesLike:Fx,Optimizer:Du,OptimizerConstructors:Lu,Pack:Dx,PadV2:Lx,Pool:mse,Pow:lg,Prelu:zx,Prod:Bx,RMSPropOptimizer:nw,RaggedGather:jx,RaggedTensorToTensor:Ux,Range:Vx,get Rank(){return CN},Real:Wx,RealDiv:Am,Reciprocal:ug,get Reduction(){return Ua},Relu:cg,Relu6:dg,Reshape:Gx,ResizeBilinear:qx,ResizeBilinearGrad:gN,ResizeNearestNeighbor:Hx,ResizeNearestNeighborGrad:mN,Reverse:Kx,RotateWithOffset:v2,Round:pg,Rsqrt:hg,SGDOptimizer:Jg,ScatterNd:Xx,SearchSorted:Qx,Select:Yx,Selu:fg,Sigmoid:bg,Sign:yg,Sin:mg,Sinh:gg,Slice:Jx,Softmax:n2,Softplus:vg,SpaceToBatchND:e2,SparseFillEmptyRows:r2,SparseReshape:a2,SparseSegmentMean:i2,SparseSegmentSum:o2,SparseToDense:s2,SplitV:t2,Sqrt:xg,Square:yN,SquaredDifference:wg,Step:Ng,StridedSlice:l2,StringNGrams:u2,StringSplit:c2,StringToHashBucketFast:d2,Sub:kg,Sum:Zx,Tan:Sg,Tanh:Cg,Tensor:Xn,TensorBuffer:Mr,Tile:Eg,TopK:p2,Transform:h2,Transpose:Lp,Unique:f2,Unpack:m2,UnsortedSegmentSum:g2,UpperBound:gse,Variable:Fg,ZerosLike:y2,_FusedMatMul:Tg,abs:Ci,acos:v9,acosh:x9,add:yt,addN:w9,all:k9,any:S9,argMax:C9,argMin:E9,asin:N9,asinh:T9,atan:I9,atan2:_9,atanh:R9,avgPool:hT,avgPool3d:$9,backend:lue,backend_util:u7,basicLSTMCell:O9,batchNorm:Ug,batchNorm2d:M9,batchNorm3d:P9,batchNorm4d:F9,batchToSpaceND:fT,bincount:mT,booleanMaskAsync:bL,broadcastArgs:A9,broadcastTo:Kp,broadcast_util:yue,browser:Sue,buffer:Tt,cast:Un,ceil:D9,clipByValue:L9,clone:wl,complex:vl,concat:Ea,concat1d:z9,concat2d:B9,concat3d:j9,concat4d:U9,conv1d:V9,conv2d:Vg,conv2dTranspose:G9,conv3d:H9,conv3dTranspose:q9,copyRegisteredKernels:wse,cos:K9,cosh:X9,cosineWindow:V2,cumprod:Q9,cumsum:Y9,customGrad:Is,denseBincount:J9,deprecationWarn:Yle,depthToSpace:Z9,depthwiseConv2d:M2,device_util:Xse,diag:eD,dilation2d:tD,disableDeprecationWarnings:Qle,dispose:Sa,disposeVariables:Jle,div:_n,divNoNan:nD,dot:rD,dropout:SL,einsum:aD,elu:yT,enableDebugMode:Xle,enableProdMode:Kle,enclosingPowerOfTwo:QT,engine:kl,env:me,equal:gT,erf:iD,euclideanNorm:lD,exp:Ou,expandDims:El,expm1:uD,eye:vT,fft:B2,fill:Xp,findBackend:oue,findBackendFactory:sue,floor:xT,floorDiv:cT,fused:EL,gather:wT,gatherND:kL,gather_util:Cue,getBackend:aue,getGradient:bN,getKernel:x2,getKernelsForBackend:w2,grad:_de,grads:Rde,greater:Hg,greaterEqual:kT,ifft:Qg,imag:Lg,image:JT,inTopKAsync:CL,io:KN,irfft:HT,isFinite:cD,isInf:dD,isNaN:pD,keep:Es,kernel_impls:xme,leakyRelu:ST,less:hD,lessEqual:F2,linalg:OL,linspace:fD,localResponseNormalization:mD,log:Jp,log1p:CT,logSigmoid:yD,logSoftmax:bD,logSumExp:NT,logicalAnd:qg,logicalNot:TT,logicalOr:IT,logicalXor:vD,losses:ML,lowerBound:xD,matMul:pn,math:gue,max:od,maxPool:_T,maxPool3d:wD,maxPoolWithArgmax:kD,maximum:RT,mean:Kg,memory:Zle,meshgrid:SD,min:P2,minimum:$T,mirrorPad:CD,mod:ED,moments:ND,movingAverage:vL,mul:De,multiRNNCell:TD,multinomial:ID,neg:Ns,nextFrame:AL,norm:Gg,notEqual:OT,oneHot:_2,ones:Pu,onesLike:_D,op:ne,outerProduct:RD,pad:Zp,pad1d:$D,pad2d:OD,pad3d:MD,pad4d:PD,pool:FD,pow:Qp,prelu:PT,print:VN,prod:AD,profile:eue,raggedGather:DD,raggedTensorToTensor:LD,rand:zD,randomGamma:UD,randomNormal:UT,randomStandardNormal:VD,randomUniform:VT,range:eh,ready:rue,real:Gp,reciprocal:WD,registerBackend:XN,registerGradient:bse,registerKernel:k2,relu:Xg,relu6:WT,removeBackend:iue,reshape:Ce,reverse:Fu,reverse1d:GD,reverse2d:HD,reverse3d:qD,reverse4d:KD,rfft:j2,round:GT,rsqrt:XD,scalar:Bt,scatterND:xL,scatter_util:Eue,searchSorted:L2,selu:QD,separableConv2d:YD,serialization:Rue,setBackend:nue,setPlatform:uue,setdiff1dAsync:JD,sigmoid:ad,sign:ZD,signal:$L,sin:eL,sinh:tL,slice:Cn,slice1d:nL,slice2d:rL,slice3d:aL,slice4d:iL,slice_util:m9,softmax:oL,softplus:ET,spaceToBatchND:MT,sparse:PL,sparseToDense:wL,spectral:RL,split:th,sqrt:Ts,square:go,squaredDifference:qT,squeeze:Yg,stack:_s,step:KT,stridedSlice:sL,string:FL,sub:At,sum:Rn,sumOutType:N2,tan:lL,tanh:O2,tensor:Yo,tensor1d:yo,tensor2d:nh,tensor3d:YN,tensor4d:uL,tensor5d:cL,tensor6d:dL,tensor_util:Wse,test_util:Bue,tidy:Xt,tile:Yp,time:tue,topk:pL,train:mme,transpose:zg,truncatedNormal:hL,unique:fL,unregisterGradient:xse,unregisterKernel:vse,unsortedSegmentSum:mL,unstack:Au,upcastType:si,upperBound:gL,util:Rse,valueAndGrad:$de,valueAndGrads:Ode,variable:yL,variableGrads:gD,version_core:jue,where:id,whereAsync:XT,zeros:Mu,zerosLike:Ei},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kme=me();kme.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
* =============================================================================
*/var bo;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(bo||(bo={}));var c7;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(c7||(c7={}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Sme={};function d7(t){return Sme[t]}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function O(t,e,n,r,a){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const s=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?s+1:i.inputIndexEnd;if(i.type==="tensor")return Va(e.inputNames[i.inputIndexStart],n,r,a);if(i.type==="tensors")return e.inputNames.slice(s,l).map(d=>Va(d,n,r,a));const u=Va(e.inputNames.slice(s)[0],n,r,a),c=u.dataSync();return i.type==="number"?c[0]:Bi(u.shape,c)}const o=e.attrParams[t];return o&&o.value}function Va(t,e,n,r){const[a,i]=Ni(t);if(r!=null){const s=r.getHashTableHandleByName(a);if(s!=null)return s}const o=n.currentContextIds.find(s=>!!e[aw(a,s)]);return o!==void 0?e[aw(a,o)][i]:void 0}function Cme(t,e,n){return e[aw(t,n.currentContextId)]}function $s(t,e){const[n,r,a]=Ni(t);return[aw(n,e&&e.currentContextId),r,a]}function aw(t,e){return e?`${t}-${e}`:t}function Ni(t){const e=t.split(":");if(e.length===1)return[t,0,void 0];const n=e[0],r=e.length===3?e[1]:void 0,a=Number(e[e.length-1]);return[n,a,r]}function iw(t,e,n){let r=O("pad",t,e,n);if(r==="explicit"){r=O("explicitPaddings",t,e,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)a[i][0]=r[i*2],a[i][1]=r[i*2+1];return a}return r}function Il(t){return t.kept?t:wl(t)}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Eme=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Nme=Object.freeze(Object.defineProperty({__proto__:null,json:Eme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Tme=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Ime=Object.freeze(Object.defineProperty({__proto__:null,json:Tme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _me=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],Rme=Object.freeze(Object.defineProperty({__proto__:null,json:_me},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $me=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],Ome=Object.freeze(Object.defineProperty({__proto__:null,json:$me},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Mme=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Pme=Object.freeze(Object.defineProperty({__proto__:null,json:Mme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Fme=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Ame=Object.freeze(Object.defineProperty({__proto__:null,json:Fme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Dme=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Lme=Object.freeze(Object.defineProperty({__proto__:null,json:Dme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zme=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Bme=Object.freeze(Object.defineProperty({__proto__:null,json:zme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jme=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],Ume=Object.freeze(Object.defineProperty({__proto__:null,json:jme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Vme=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Wme=Object.freeze(Object.defineProperty({__proto__:null,json:Vme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gme=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Hme=Object.freeze(Object.defineProperty({__proto__:null,json:Gme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qme=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],Kme=Object.freeze(Object.defineProperty({__proto__:null,json:qme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xme=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],Qme=Object.freeze(Object.defineProperty({__proto__:null,json:Xme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Yme=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Jme=Object.freeze(Object.defineProperty({__proto__:null,json:Yme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Zme=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],ege=Object.freeze(Object.defineProperty({__proto__:null,json:Zme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const tge=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],nge=Object.freeze(Object.defineProperty({__proto__:null,json:tge},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rge=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],age=Object.freeze(Object.defineProperty({__proto__:null,json:rge},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ige=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],oge=Object.freeze(Object.defineProperty({__proto__:null,json:ige},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sge=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],lge=Object.freeze(Object.defineProperty({__proto__:null,json:sge},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class p7{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[Nme,Ime,Rme,Ome,Pme,Ame,Lme,Bme,Ume,Wme,Hme,Kme,Qme,Jme,ege,nge,age,oge,lge],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,a)=>(r[a.tfOpName]=a,r),{})}transformGraph(e,n={}){const r=e.node,a=[],i=[],o=[],s=r.reduce((y,v)=>(y[v.name]=this.mapNode(v),v.op.startsWith("Placeholder")?a.push(y[v.name]):v.op==="Const"?i.push(y[v.name]):(v.input==null||v.input.length===0)&&o.push(y[v.name]),y),{});let l=[];const u=[];let c={},d={};n!=null&&(c=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const p=Object.keys(s);p.forEach(y=>{const v=s[y];v.inputNames.forEach((b,x)=>{const[w,,S]=$s(b),C=s[w];if(C.outputs!=null){const E=C.outputs.indexOf(S);if(E!==-1){const R=`${w}:${E}`;v.inputNames[x]=R}}v.inputs.push(C),C.children.push(v)})}),Object.keys(d).length===0?p.forEach(y=>{const v=s[y];v.children.length===0&&u.push(v)}):Object.keys(d).forEach(y=>{const[v]=$s(y),b=s[v];b!=null&&(b.signatureKey=d[y],u.push(b))}),Object.keys(c).length>0?Object.keys(c).forEach(y=>{const[v]=$s(y),b=s[v];b&&(b.signatureKey=c[y],l.push(b))}):l=a;let f={};e.library!=null&&e.library.function!=null&&(f=e.library.function.reduce((y,v)=>(y[v.signature.name]=this.mapFunction(v),y),{}));const g={nodes:s,inputs:l,outputs:u,weights:i,placeholders:a,signature:n,functions:f};return o.length>0&&(g.initNodes=o),g}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=d7(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(a=>a.startsWith("^")?a.slice(1):a),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((a,i)=>(a[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},a),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((a,i)=>{const o=i.type;let s;switch(i.type){case"string":s=kI(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=kI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":s=RI(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=RI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":s=CI(e.attr,i.tfName,i.defaultValue||0),s===void 0&&i.tfDeprecatedName&&(s=CI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":s=_I(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=_I(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":s=SI(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=SI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":s=OI(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=OI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":s=II(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=II(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":s=$I(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=$I(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":s=NI(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=NI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":s=TI(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=TI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":s=f7(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=f7(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return a[i.name]={value:s,type:o},a},{})),r}mapFunction(e){const n=e.nodeDef,r=[],a=[];let i={};n!=null&&(i=n.reduce((c,d)=>(c[d.name]=this.mapNode(d),d.op==="Const"&&a.push(c[d.name]),c),{}));const o=[],s=[];e.signature.inputArg.forEach(c=>{const[d]=$s(c.name),p={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:EI(c.type),type:"dtype"}},children:[]};p.signatureKey=c.name,o.push(p),i[d]=p}),Object.keys(i).forEach(c=>{const d=i[c];d.inputNames.forEach((p,f)=>{const[g,,y]=$s(p),v=i[g];if(v.outputs!=null){const b=v.outputs.indexOf(y);if(b!==-1){const x=`${g}:${b}`;d.inputNames[f]=x}}d.inputs.push(v),v.children.push(d)})});const l=e.ret;e.signature.outputArg.forEach(c=>{const[d,p]=$s(l[c.name]),f=i[d];f!=null&&(f.defaultOutput=p,s.push(f))});const u=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:s,weights:a,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function uge(t){const e=me().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function h7(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):uge(t);return e?n:n.toLowerCase()}function kI(t,e,n,r=!1){const a=t[e];return a!=null?h7(a.s,r):n}function SI(t,e,n){const r=t[e];return r?r.b:n}function CI(t,e,n){const r=t[e]||{},a=r.i!=null?r.i:r.f!=null?r.f:n;return typeof a=="number"?a:parseInt(a,10)}function EI(t){switch(typeof t=="string"&&(t=bo[t]),t){case bo.DT_FLOAT:case bo.DT_HALF:return"float32";case bo.DT_INT32:case bo.DT_INT64:case bo.DT_INT8:case bo.DT_UINT8:return"int32";case bo.DT_BOOL:return"bool";case bo.DT_DOUBLE:return"float32";case bo.DT_STRING:return"string";default:return null}}function f7(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function NI(t,e,n){const r=t[e];return r&&r.type?EI(r.type):n}function TI(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(a=>EI(a)):n}function m7(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function II(t,e,n){const r=t[e];return r&&r.shape?m7(r.shape):n}function _I(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(a=>typeof a=="number"?a:parseInt(a,10)):n}function RI(t,e,n,r=!1){const a=t[e];return a&&a.list&&a.list.s?a.list.s.map(i=>h7(i,r)):n}function $I(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(a=>m7(a)):n}function OI(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class cge{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(a=>this.getInput(a)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((a,i)=>(a[i]=this.getAttr(i),a),{}))}getInput(e){return Va(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Va(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return CI(this.node.rawAttrs,e,n);if(r.s!=null)return kI(this.node.rawAttrs,e,n);if(r.b!=null)return SI(this.node.rawAttrs,e,n);if(r.shape!=null)return II(this.node.rawAttrs,e,n);if(r.type!=null)return NI(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return _I(this.node.rawAttrs,e,n);if(r.list.s!=null)return RI(this.node.rawAttrs,e,n);if(r.list.shape!=null)return $I(this.node.rawAttrs,e,n);if(r.list.b!=null)return OI(this.node.rawAttrs,e,n);if(r.list.type!=null)return TI(this.node.rawAttrs,e,n)}return n}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Na=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:PN,abs:Ci,acos:v9,acosh:x9,add:yt,addN:w9,all:k9,any:S9,argMax:C9,argMin:E9,asin:N9,asinh:T9,atan:I9,atan2:_9,atanh:R9,avgPool:hT,avgPool3d:$9,basicLSTMCell:O9,batchNorm:Ug,batchNorm2d:M9,batchNorm3d:P9,batchNorm4d:F9,batchToSpaceND:fT,bincount:mT,booleanMaskAsync:bL,broadcastArgs:A9,broadcastTo:Kp,buffer:Tt,cast:Un,ceil:D9,clipByValue:L9,clone:wl,complex:vl,concat:Ea,concat1d:z9,concat2d:B9,concat3d:j9,concat4d:U9,conv1d:V9,conv2d:Vg,conv2dTranspose:G9,conv3d:H9,conv3dTranspose:q9,cos:K9,cosh:X9,cosineWindow:V2,cumprod:Q9,cumsum:Y9,denseBincount:J9,depthToSpace:Z9,depthwiseConv2d:M2,diag:eD,dilation2d:tD,div:_n,divNoNan:nD,dot:rD,dropout:SL,einsum:aD,elu:yT,enclosingPowerOfTwo:QT,equal:gT,erf:iD,euclideanNorm:lD,exp:Ou,expandDims:El,expm1:uD,eye:vT,fft:B2,fill:Xp,floor:xT,floorDiv:cT,fused:EL,gather:wT,gatherND:kL,greater:Hg,greaterEqual:kT,ifft:Qg,imag:Lg,image:JT,inTopKAsync:CL,irfft:HT,isFinite:cD,isInf:dD,isNaN:pD,leakyRelu:ST,less:hD,lessEqual:F2,linalg:OL,linspace:fD,localResponseNormalization:mD,log:Jp,log1p:CT,logSigmoid:yD,logSoftmax:bD,logSumExp:NT,logicalAnd:qg,logicalNot:TT,logicalOr:IT,logicalXor:vD,losses:ML,lowerBound:xD,matMul:pn,max:od,maxPool:_T,maxPool3d:wD,maxPoolWithArgmax:kD,maximum:RT,mean:Kg,meshgrid:SD,min:P2,minimum:$T,mirrorPad:CD,mod:ED,moments:ND,movingAverage:vL,mul:De,multiRNNCell:TD,multinomial:ID,neg:Ns,norm:Gg,notEqual:OT,oneHot:_2,ones:Pu,onesLike:_D,op:ne,outerProduct:RD,pad:Zp,pad1d:$D,pad2d:OD,pad3d:MD,pad4d:PD,pool:FD,pow:Qp,prelu:PT,print:VN,prod:AD,raggedGather:DD,raggedTensorToTensor:LD,rand:zD,randomGamma:UD,randomNormal:UT,randomStandardNormal:VD,randomUniform:VT,range:eh,real:Gp,reciprocal:WD,relu:Xg,relu6:WT,reshape:Ce,reverse:Fu,reverse1d:GD,reverse2d:HD,reverse3d:qD,reverse4d:KD,rfft:j2,round:GT,rsqrt:XD,scalar:Bt,scatterND:xL,searchSorted:L2,selu:QD,separableConv2d:YD,setdiff1dAsync:JD,sigmoid:ad,sign:ZD,signal:$L,sin:eL,sinh:tL,slice:Cn,slice1d:nL,slice2d:rL,slice3d:aL,slice4d:iL,softmax:oL,softplus:ET,spaceToBatchND:MT,sparse:PL,sparseToDense:wL,spectral:RL,split:th,sqrt:Ts,square:go,squaredDifference:qT,squeeze:Yg,stack:_s,step:KT,stridedSlice:sL,string:FL,sub:At,sum:Rn,tan:lL,tanh:O2,tensor:Yo,tensor1d:yo,tensor2d:nh,tensor3d:YN,tensor4d:uL,tensor5d:cL,tensor6d:dL,tile:Yp,topk:pL,transpose:zg,truncatedNormal:hL,unique:fL,unsortedSegmentSum:mL,unstack:Au,upperBound:gL,variable:yL,where:id,whereAsync:XT,zeros:Mu,zerosLike:Ei},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dge=(t,e,n,r=Na)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(O("a",t,e,n),O("b",t,e,n))];case"AddN":return[r.addN(O("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(O("a",t,e,n),O("b",t,e,n))];case"Mul":return[r.mul(O("a",t,e,n),O("b",t,e,n))];case"RealDiv":case"Div":return[r.div(O("a",t,e,n),O("b",t,e,n))];case"DivNoNan":return[r.divNoNan(O("a",t,e,n),O("b",t,e,n))];case"FloorDiv":return[r.floorDiv(O("a",t,e,n),O("b",t,e,n))];case"Sub":return[r.sub(O("a",t,e,n),O("b",t,e,n))];case"Minimum":return[r.minimum(O("a",t,e,n),O("b",t,e,n))];case"Maximum":return[r.maximum(O("a",t,e,n),O("b",t,e,n))];case"Pow":return[r.pow(O("a",t,e,n),O("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(O("a",t,e,n),O("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pge=(t,e,n,r=Na)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(O("x",t,e,n))];case"Acos":return[r.acos(O("x",t,e,n))];case"Acosh":return[r.acosh(O("x",t,e,n))];case"Asin":return[r.asin(O("x",t,e,n))];case"Asinh":return[r.asinh(O("x",t,e,n))];case"Atan":return[r.atan(O("x",t,e,n))];case"Atan2":return[r.atan2(O("x",t,e,n),O("y",t,e,n))];case"Atanh":return[r.atanh(O("x",t,e,n))];case"Ceil":return[r.ceil(O("x",t,e,n))];case"Complex":return[r.complex(O("real",t,e,n),O("imag",t,e,n))];case"Cos":return[r.cos(O("x",t,e,n))];case"Cosh":return[r.cosh(O("x",t,e,n))];case"Elu":return[r.elu(O("x",t,e,n))];case"Erf":return[r.erf(O("x",t,e,n))];case"Exp":return[r.exp(O("x",t,e,n))];case"Expm1":return[r.expm1(O("x",t,e,n))];case"Floor":return[r.floor(O("x",t,e,n))];case"Log":return[r.log(O("x",t,e,n))];case"Log1p":return[r.log1p(O("x",t,e,n))];case"Imag":return[r.imag(O("x",t,e,n))];case"Neg":return[r.neg(O("x",t,e,n))];case"Reciprocal":return[r.reciprocal(O("x",t,e,n))];case"Real":return[r.real(O("x",t,e,n))];case"Relu":return[r.relu(O("x",t,e,n))];case"Round":return[r.round(O("x",t,e,n))];case"Selu":return[r.selu(O("x",t,e,n))];case"Sigmoid":return[r.sigmoid(O("x",t,e,n))];case"Sin":return[r.sin(O("x",t,e,n))];case"Sign":return[r.sign(O("x",t,e,n))];case"Sinh":return[r.sinh(O("x",t,e,n))];case"Softplus":return[r.softplus(O("x",t,e,n))];case"Sqrt":return[r.sqrt(O("x",t,e,n))];case"Square":return[r.square(O("x",t,e,n))];case"Tanh":return[r.tanh(O("x",t,e,n))];case"Tan":return[r.tan(O("x",t,e,n))];case"ClipByValue":return[r.clipByValue(O("x",t,e,n),O("clipValueMin",t,e,n),O("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(O("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Va(t.inputNames[0],e,n))];case"Prod":return[r.prod(O("x",t,e,n),O("axes",t,e,n))];case"LeakyRelu":return[r.leakyRelu(O("x",t,e,n),O("alpha",t,e,n))];case"Prelu":return[r.prelu(O("x",t,e,n),O("alpha",t,e,n))];case"IsNan":return[r.isNaN(Va(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vo(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){U(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const a=t[r],i=e[r];U(a<0||i<0||a===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function g7(t){return!(typeof t=="number"||t.some(e=>e<0))}function n0(t,e,n){let r=MI(t,n);const a=!g7(r);if(a&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&e.forEach(i=>{r=MI(i.shape,r)}),!g7(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function MI(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const a=t[r],i=e[r];if(a>=0&&i>=0&&a!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=a>=0?a:i}return n}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class hge{constructor(e,n,r,a,i,o,s){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Bt(0),Es(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),vo(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,Es(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,a)=>this.write(r,n[a]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let a=0;a<this.size();a++)e.push(a)}if(e.length===0)return Yo([],[0].concat(this.elementShape));const r=this.readMany(e);return vo(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),_s(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Yo([],[0].concat(this.elementShape));const n=[];for(let a=0;a<this.size();a++)n.push(a);const r=this.readMany(n);return vo(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Ea(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Au(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const a=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];Xt(()=>{n=Ce(n,[1,r,i]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:a[l-1],0],c=[1,e[l],i];o[l]=Ce(Cn(n,u,c),this.elementShape)}return o});const s=[];for(let l=0;l<e.length;l++)s[l]=l;this.writeMany(s,o)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class wd{constructor(e,n,r,a=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);vo(n,i.shape,"TensorList shape mismatch: "),Es(i)}),this.idTensor=Bt(0),this.maxNumElements=a,Es(this.idTensor)}get id(){return this.idTensor.id}copy(){return new wd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);vo(e,this.elementShape,"TensorList shape mismatch: ");const a=n0(this.elementShape,this.tensors,e);return Xt(()=>{const i=this.tensors.map(o=>Ce(o,a));return _s(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=n0(this.elementShape,this.tensors,e),a=this.tensors.pop();return a.kept=!1,vo(a.shape,e,"TensorList shape mismatch: "),Ce(a,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(vo(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Es(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new wd([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);vo(this.tensors[e].shape,n,"TensorList shape mismatch: ");const a=n0(this.elementShape,this.tensors,n);return Ce(this.tensors[e],a)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);vo(this.elementShape,n.shape,"TensorList shape mismatch: "),Es(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);vo(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const a=n0(this.elementShape,this.tensors,r);return e.length===0?Yo([],[0].concat(a)):Xt(()=>{const i=e.map(o=>Ce(this.tensors[o],a));return _s(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);vo(this.elementShape,n,"TensorList shape mismatch: ");const r=n0(this.elementShape,this.tensors,n);return this.size()===0?Yo([],[0].concat(r)):Xt(()=>{const a=this.tensors.map(i=>Ce(i,r));return Ea(a,0)})}}function fge(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const a=t.shape.slice(1);vo(a,e,"TensorList shape mismatch: ");const i=Au(t);return new wd(i,e,r)}function mge(t,e,n,r){return new wd([],t,e,r)}function gge(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const a=Math.max(...e);if(r!=null&&r!==-1&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const i=new wd([],n,t.dtype,r),o=Au(t,0);return e.forEach((s,l)=>{i.setItem(s,o[l])}),i}function yge(t,e,n){let r=0;const a=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=MI(i,n),s=r===0?0:t.size/r,l=Xt(()=>{const c=[];t=Ce(t,[1,r,s]);for(let d=0;d<e.length;++d){const p=[0,d===0?0:a[d-1],0],f=[1,e[d],s];c[d]=Ce(Cn(t,p,f),o)}return t.dispose(),c}),u=new wd([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const bge=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=O("thenBranch",t,e,n),a=O("elseBranch",t,e,n),i=O("cond",t,e,n),o=O("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=O("body",t,e,n),a=O("cond",t,e,n),i=O("args",t,e,n),o=await n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),s=i.map(c=>c.id);let l=await o[0].data();o.forEach(c=>{!c.kept&&s.indexOf(c.id)===-1&&c.dispose()});let u=i;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const d=u.map(f=>f.id);c.forEach(f=>{!f.kept&&s.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()});const p=await n.functionMap[a].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await p[0].data(),p.forEach(f=>{!f.kept&&s.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()})}return u}case"LoopCond":{const r=O("pred",t,e,n);return[Il(r)]}case"Switch":{const r=O("pred",t,e,n);let a=O("data",t,e,n);return a.kept||(a=Il(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=t.inputNames.find(a=>Va(a,e,n)!==void 0);if(r){const a=Va(r,e,n);return[Il(a)]}return}case"Enter":{const r=O("frameName",t,e,n),a=O("tensor",t,e,n);return n.enterFrame(r),[Il(a)]}case"Exit":{const r=O("tensor",t,e,n);return n.exitFrame(),[Il(r)]}case"NextIteration":{const r=O("tensor",t,e,n);return n.nextIteration(),[Il(r)]}case"TensorArrayV3":{const r=O("size",t,e,n),a=O("dtype",t,e,n),i=O("elementShape",t,e,n),o=O("dynamicSize",t,e,n),s=O("clearAfterRead",t,e,n),l=O("identicalElementShapes",t,e,n),u=O("name",t,e,n),c=new hge(u,a,r,i,l,o,s);return n.addTensorArray(c),[c.idTensor,Bt(1)]}case"TensorArrayWriteV3":{const r=O("tensorArrayId",t,e,n),a=O("index",t,e,n),i=O("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(a,i),[o.idTensor]}case"TensorArrayReadV3":{const r=O("tensorArrayId",t,e,n),a=O("index",t,e,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=O("tensorArrayId",t,e,n),a=O("indices",t,e,n),i=O("dtype",t,e,n);return[n.getTensorArray(r.id).gather(a,i)]}case"TensorArrayScatterV3":{const r=O("tensorArrayId",t,e,n),a=O("indices",t,e,n),i=O("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(a,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=O("tensorArrayId",t,e,n),a=n.getTensorArray(r.id),i=O("dtype",t,e,n);return[a.concat(i)]}case"TensorArraySplitV3":{const r=O("tensorArrayId",t,e,n),a=O("tensor",t,e,n),i=O("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,a),[o.idTensor]}case"TensorArraySizeV3":{const r=O("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return[Bt(a.size(),"int32")]}case"TensorArrayCloseV3":{const r=O("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=O("tensorListId",t,e,n),a=O("index",t,e,n),i=O("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(a,i),[o.idTensor]}case"TensorListGetItem":{const r=O("tensorListId",t,e,n),a=O("index",t,e,n),i=O("elementShape",t,e,n),o=O("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(a,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=O("indices",t,e,n),a=O("tensor",t,e,n),i=O("elementShape",t,e,n),o=O("numElements",t,e,n),s=gge(a,r,i,o);return n.addTensorList(s),[s.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=O("elementShape",t,e,n),a=O("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=O(i,t,e,n),s=t.op==="TensorListReserve"?-1:o,l=mge(r,a,o,s);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=O("tensorListId",t,e,n),a=O("indices",t,e,n),i=O("elementShape",t,e,n),o=O("elementDType",t,e,n);return[n.getTensorList(r.id).gather(a,o,i)]}case"TensorListStack":{const r=O("tensorListId",t,e,n),a=O("elementShape",t,e,n),i=O("elementDType",t,e,n),o=O("numElements",t,e,n);return[n.getTensorList(r.id).stack(a,i,o)]}case"TensorListFromTensor":{const r=O("tensor",t,e,n),a=O("elementShape",t,e,n),i=O("elementDType",t,e,n),o=fge(r,a,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=O("tensorListId",t,e,n),a=n.getTensorList(r.id),i=O("dtype",t,e,n),o=O("elementShape",t,e,n);return[a.concat(i,o)]}case"TensorListPushBack":{const r=O("tensorListId",t,e,n),a=O("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(a),[i.idTensor]}case"TensorListPopBack":{const r=O("tensorListId",t,e,n),a=O("elementShape",t,e,n),i=O("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(a,i)]}case"TensorListSplit":{const r=O("tensor",t,e,n),a=O("elementShape",t,e,n),i=O("lengths",t,e,n),o=yge(r,i,a);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=O("tensorListId",t,e,n),a=n.getTensorList(r.id);return[Bt(a.size(),"int32")]}case"TensorListResize":{const r=O("tensorListId",t,e,n),a=O("size",t,e,n),i=n.getTensorList(r.id).resize(a);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y7(t,e,n){const[r,a]=O("fusedOps",t,e,n),i=r==="biasadd",o=!i,s=a==="prelu",l=r==="fusedbatchnorm",u=O("numArgs",t,e,n);if(i){if(s&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&i&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=O("strides",t,e,n),d=iw(t,e,n),p=O("dataFormat",t,e,n).toUpperCase(),f=O("dilations",t,e,n);let[g,y]=O("args",t,e,n);o&&(y=g,g=void 0);const v=O("leakyreluAlpha",t,e,n);return{stride:c,pad:d,dataFormat:p,dilations:f,biasArg:g,preluArg:y,activationFunc:a,leakyreluAlpha:v}}const vge=(t,e,n,r=Na)=>{switch(t.op){case"Conv1D":{const a=O("stride",t,e,n),i=O("pad",t,e,n),o=O("dataFormat",t,e,n).toUpperCase(),s=O("dilation",t,e,n);return[r.conv1d(O("x",t,e,n),O("filter",t,e,n),a,i,o,s)]}case"Conv2D":{const a=O("strides",t,e,n),i=iw(t,e,n),o=O("dataFormat",t,e,n).toUpperCase(),s=O("dilations",t,e,n);return[r.conv2d(O("x",t,e,n),O("filter",t,e,n),[a[1],a[2]],i,o,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=y7(t,e,n);return[r.fused.conv2d({x:O("x",t,e,n),filter:O("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=y7(t,e,n);return[r.fused.depthwiseConv2d({x:O("x",t,e,n),filter:O("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const a=O("outputShape",t,e,n),i=O("strides",t,e,n),o=iw(t,e,n);return[r.conv2dTranspose(O("x",t,e,n),O("filter",t,e,n),a,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const a=O("strides",t,e,n),i=iw(t,e,n),o=O("dilations",t,e,n),s=O("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(O("input",t,e,n),O("filter",t,e,n),[a[1],a[2]],i,s,[o[1],o[2]])]}case"Conv3D":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("dataFormat",t,e,n).toUpperCase(),s=O("dilations",t,e,n);return[r.conv3d(O("x",t,e,n),O("filter",t,e,n),[a[1],a[2],a[3]],i,o,[s[1],s[2],s[3]])]}case"AvgPool":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("kernelSize",t,e,n);return[r.avgPool(O("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPool":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("kernelSize",t,e,n);return[r.maxPool(O("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("kernelSize",t,e,n),s=O("includeBatchInIndex",t,e,n),{result:l,indexes:u}=r.maxPoolWithArgmax(O("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i,s);return[l,u]}case"AvgPool3D":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("kernelSize",t,e,n);return[r.avgPool3d(O("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("kernelSize",t,e,n);return[r.maxPool3d(O("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("dilations",t,e,n),s=a[1],l=a[2],u=o[1],c=o[2];return[r.dilation2d(O("x",t,e,n),O("filter",t,e,n),[s,l],i,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xge=(t,e,n,r=Na)=>{switch(t.op){case"Fill":{const a=O("shape",t,e,n),i=O("dtype",t,e,n),o=O("value",t,e,n);return[r.fill(a,o,i)]}case"LinSpace":{const a=O("start",t,e,n),i=O("stop",t,e,n),o=O("num",t,e,n);return[r.linspace(a,i,o)]}case"Multinomial":{const a=O("logits",t,e,n),i=O("numSamples",t,e,n),o=O("seed",t,e,n);return[r.multinomial(a,i,o)]}case"OneHot":{const a=O("indices",t,e,n),i=O("depth",t,e,n),o=O("onValue",t,e,n),s=O("offValue",t,e,n),l=O("dtype",t,e,n);return[r.oneHot(a,i,o,s,l)]}case"Ones":return[r.ones(O("shape",t,e,n),O("dtype",t,e,n))];case"OnesLike":return[r.onesLike(O("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(O("shape",t,e,n),O("dtype",t,e,n),O("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(O("shape",t,e,n),O("minval",t,e,n),O("maxval",t,e,n),O("dtype",t,e,n))];case"Range":{const a=O("start",t,e,n),i=O("stop",t,e,n),o=O("step",t,e,n);return[r.range(a,i,o,O("dtype",t,e,n))]}case"TruncatedNormal":{const a=O("shape",t,e,n),i=O("mean",t,e,n),o=O("stdDev",t,e,n),s=O("seed",t,e,n);return[r.truncatedNormal(a,i,o,O("dtype",t,e,n),s)]}case"Zeros":return[r.zeros(O("shape",t,e,n),O("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(O("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function PI(t,e,n){const r=O("boxes",t,e,n),a=O("scores",t,e,n),i=O("maxOutputSize",t,e,n),o=O("iouThreshold",t,e,n),s=O("scoreThreshold",t,e,n),l=O("softNmsSigma",t,e,n);return{boxes:r,scores:a,maxOutputSize:i,iouThreshold:o,scoreThreshold:s,softNmsSigma:l}}const wge=async(t,e,n,r,a=Na)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=PI(t,e,n),d=await a.image.nonMaxSuppressionWithScoreAsync(i,o,s,l,u,c);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u}=PI(t,e,n),c=O("padToMaxOutputSize",t,e,n),d=await a.image.nonMaxSuppressionPaddedAsync(i,o,s,l,u,c);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u}=PI(t,e,n);return[await a.image.nonMaxSuppressionAsync(i,o,s,l,u)]}case"Where":{const i=a.cast(O("condition",t,e,n),"bool"),o=[await a.whereAsync(i)];return i.dispose(),o}case"ListDiff":return a.setdiff1dAsync(O("x",t,e,n),O("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kge=(t,e,n,r=Na)=>{switch(t.op){case"LowerBound":{const a=O("sortedSequence",t,e,n),i=O("values",t,e,n);return[r.lowerBound(a,i)]}case"TopKV2":{const a=O("x",t,e,n),i=O("k",t,e,n),o=O("sorted",t,e,n),s=r.topk(a,i,o);return[s.values,s.indices]}case"UpperBound":{const a=O("sortedSequence",t,e,n),i=O("values",t,e,n);return[r.upperBound(a,i)]}case"Unique":{const a=O("x",t,e,n),i=r.unique(a);return[i.values,i.indices]}case"UniqueV2":{const a=O("x",t,e,n),i=O("axis",t,e,n),o=r.unique(a,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Sge=(t,e,n,r=Na)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const a=O("default",t,e,n);return[Va(t.name,e,n)||a];case"Placeholder":return[Va(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=O("x",t,e,n);return[Il(c)]}case"IdentityN":return O("x",t,e,n).map(c=>Il(c));case"Snapshot":const i=O("x",t,e,n);return[Il(i)];case"Shape":return[r.tensor1d(O("x",t,e,n).shape,"int32")];case"ShapeN":return O("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(O("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(O("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=O("x",t,e,n),s=O("data",t,e,n),l=O("message",t,e,n),u=O("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<s.length;c++)console.log(Array.prototype.slice.call(s[c].dataSync()).slice(0,u));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Cge{constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=Bt(0),this.tensorMap=new Map,Es(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Bt(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(a=>a.dispose()),this.tensorMap.clear(),Xt(()=>{const a=Au(n),i=r.length,o=a.length;U(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let s=0;s<i;s++){const l=r[s],u=a[s];Es(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return Xt(()=>{const a=[];for(let i=0;i<r.length;i++){const o=r[i],s=this.findWithDefault(o,n);a.push(s)}return _s(a)})}findWithDefault(e,n){return this.tensorMap.get(e)??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ege=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const a=O("keyDType",t,e,n),i=O("valueDType",t,e,n),o=new Cge(a,i);return r.addHashTable(t.name,o),[o.handle]}case"LookupTableImport":case"LookupTableImportV2":{const a=O("tableHandle",t,e,n,r),i=O("keys",t,e,n),o=O("values",t,e,n);return[await r.getHashTableById(a.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const a=O("tableHandle",t,e,n,r),i=O("keys",t,e,n),o=O("defaultValue",t,e,n);return[await r.getHashTableById(a.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=O("tableHandle",t,e,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Nge=(t,e,n,r=Na)=>{switch(t.op){case"ResizeBilinear":{const a=O("images",t,e,n),i=O("size",t,e,n),o=O("alignCorners",t,e,n),s=O("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)]}case"ResizeNearestNeighbor":{const a=O("images",t,e,n),i=O("size",t,e,n),o=O("alignCorners",t,e,n),s=O("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],o,s)]}case"CropAndResize":{const a=O("image",t,e,n),i=O("boxes",t,e,n),o=O("boxInd",t,e,n),s=O("cropSize",t,e,n),l=O("method",t,e,n),u=O("extrapolationValue",t,e,n);return[r.image.cropAndResize(a,i,o,s,l,u)]}case"ImageProjectiveTransformV3":{const a=O("images",t,e,n),i=O("transforms",t,e,n),o=O("outputShape",t,e,n),s=O("fillValue",t,e,n),l=O("interpolation",t,e,n),u=O("fillMode",t,e,n);return[r.image.transform(a,i,l.toLowerCase(),u.toLowerCase(),s,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Tge=(t,e,n,r=Na)=>{switch(t.op){case"Equal":return[r.equal(O("a",t,e,n),O("b",t,e,n))];case"NotEqual":return[r.notEqual(O("a",t,e,n),O("b",t,e,n))];case"Greater":return[r.greater(O("a",t,e,n),O("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(O("a",t,e,n),O("b",t,e,n))];case"Less":return[r.less(O("a",t,e,n),O("b",t,e,n))];case"LessEqual":return[r.lessEqual(O("a",t,e,n),O("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(O("a",t,e,n),O("b",t,e,n))];case"LogicalNot":return[r.logicalNot(O("a",t,e,n))];case"LogicalOr":return[r.logicalOr(O("a",t,e,n),O("b",t,e,n))];case"Select":case"SelectV2":return[r.where(O("condition",t,e,n),O("a",t,e,n),O("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ige=(t,e,n,r=Na)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(O("a",t,e,n),O("b",t,e,n),O("transposeA",t,e,n),O("transposeB",t,e,n))];case"Einsum":return[r.einsum(O("equation",t,e,n),...O("tensors",t,e,n))];case"Transpose":return[r.transpose(O("x",t,e,n),O("perm",t,e,n))];case"_FusedMatMul":const[a,i]=O("fusedOps",t,e,n),o=a==="biasadd",s=i==="prelu",l=O("numArgs",t,e,n),u=O("leakyreluAlpha",t,e,n);if(o){if(s&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,d]=O("args",t,e,n);return[r.fused.matMul({a:O("a",t,e,n),b:O("b",t,e,n),transposeA:O("transposeA",t,e,n),transposeB:O("transposeB",t,e,n),bias:c,activation:i,preluActivationWeights:d,leakyreluAlpha:u})];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _ge=(t,e,n,r=Na)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(O("x",t,e,n),O("axis",t,e,n),O("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(O("x",t,e,n),O("mean",t,e,n),O("variance",t,e,n),O("offset",t,e,n),O("scale",t,e,n),O("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(O("x",t,e,n),O("mean",t,e,n),O("variance",t,e,n),O("offset",t,e,n),O("scale",t,e,n),O("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(O("x",t,e,n),O("radius",t,e,n),O("bias",t,e,n),O("alpha",t,e,n),O("beta",t,e,n))];case"Softmax":return[r.softmax(O("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(O("x",t,e,n))];case"SparseToDense":return[r.sparseToDense(O("sparseIndices",t,e,n),O("outputShape",t,e,n),O("sparseValues",t,e,n),O("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Rge=(t,e,n,r=Na)=>{switch(t.op){case"Max":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.max(O("x",t,e,n),s,l)]}case"Mean":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.mean(O("x",t,e,n),s,l)]}case"Min":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.min(O("x",t,e,n),s,l)]}case"Sum":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.sum(O("x",t,e,n),s,l)]}case"All":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.all(O("x",t,e,n),s,l)]}case"Any":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.any(O("x",t,e,n),s,l)]}case"ArgMax":{const s=O("axis",t,e,n);return[r.argMax(O("x",t,e,n),s)]}case"ArgMin":{const s=O("axis",t,e,n);return[r.argMin(O("x",t,e,n),s)]}case"Prod":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.prod(O("x",t,e,n),s,l)]}case"Cumprod":{const s=O("axis",t,e,n),l=O("exclusive",t,e,n),u=O("reverse",t,e,n);return[r.cumprod(O("x",t,e,n),s,l,u)]}case"Cumsum":{const s=O("axis",t,e,n),l=O("exclusive",t,e,n),u=O("reverse",t,e,n);return[r.cumsum(O("x",t,e,n),s,l,u)]}case"Bincount":const a=O("x",t,e,n),i=O("weights",t,e,n),o=O("size",t,e,n);return[r.bincount(a,i,o)];case"DenseBincount":{const s=O("x",t,e,n),l=O("weights",t,e,n),u=O("size",t,e,n),c=O("binaryOutput",t,e,n);return[r.denseBincount(s,l,u,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $ge=(t,e,n,r=Na)=>{switch(t.op){case"ConcatV2":case"Concat":{const a=O("n",t,e,n),i=O("axis",t,e,n);let o=O("tensors",t,e,n);return o=o.slice(0,a),[r.concat(o,i)]}case"Gather":{const a=O("x",t,e,n),i=O("indices",t,e,n);return[r.gather(a,r.cast(i,"int32"),0)]}case"GatherV2":{const a=O("axis",t,e,n),i=O("batchDims",t,e,n),o=O("x",t,e,n),s=O("indices",t,e,n);return[r.gather(o,r.cast(s,"int32"),a,i)]}case"Reverse":{const a=O("dims",t,e,n),i=[];for(let s=0;s<a.length;s++)a[s]&&i.push(s);const o=O("x",t,e,n);return[r.reverse(o,i)]}case"ReverseV2":{const a=O("axis",t,e,n),i=O("x",t,e,n);return[r.reverse(i,a)]}case"Slice":{const a=O("begin",t,e,n),i=O("size",t,e,n);return[r.slice(O("x",t,e,n),a,i)]}case"StridedSlice":{const a=O("begin",t,e,n),i=O("end",t,e,n),o=O("strides",t,e,n),s=O("beginMask",t,e,n),l=O("endMask",t,e,n),u=O("ellipsisMask",t,e,n),c=O("newAxisMask",t,e,n),d=O("shrinkAxisMask",t,e,n),p=O("x",t,e,n);return[r.stridedSlice(p,a,i,o,s,l,u,c,d)]}case"Pack":return Xt(()=>{const a=O("axis",t,e,n),i=O("tensors",t,e,n),o=i[0].shape,s=r.squeeze(i[0]).shape,l=i.map(u=>{const c=Sn(u.shape,o);if(!c&&!Sn(r.squeeze(u).shape,s))throw new Error("the input tensors shape does not match");return c?u:r.reshape(u,o)});return[r.stack(l,a)]});case"Unpack":{const a=O("axis",t,e,n),i=O("tensor",t,e,n);return r.unstack(i,a)}case"Tile":{const a=O("reps",t,e,n);return[r.tile(O("x",t,e,n),a)]}case"Split":case"SplitV":{const a=O("axis",t,e,n),i=O("numOrSizeSplits",t,e,n),o=O("x",t,e,n);return r.split(o,i,a)}case"ScatterNd":{const a=O("indices",t,e,n),i=O("values",t,e,n),o=O("shape",t,e,n);return[r.scatterND(a,i,o)]}case"GatherNd":{const a=O("x",t,e,n),i=O("indices",t,e,n);return[r.gatherND(a,i)]}case"SparseToDense":{const a=O("sparseIndices",t,e,n),i=O("outputShape",t,e,n),o=O("sparseValues",t,e,n),s=O("defaultValue",t,e,n);return[r.sparseToDense(a,o,i,o.dtype===s.dtype?s:r.cast(s,o.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Oge=(t,e,n,r=Na)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:a,outputValues:i,emptyRowIndicator:o,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(O("indices",t,e,n),O("values",t,e,n),O("denseShape",t,e,n),O("defaultValue",t,e,n));return[a,i,o,s]}case"SparseReshape":{const{outputIndices:a,outputShape:i}=r.sparse.sparseReshape(O("inputIndices",t,e,n),O("inputShape",t,e,n),O("newShape",t,e,n));return[a,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(O("data",t,e,n),O("indices",t,e,n),O("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(O("data",t,e,n),O("indices",t,e,n),O("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Mge=(t,e,n,r=Na)=>{switch(t.op){case"FFT":return[r.fft(O("x",t,e,n))];case"IFFT":return[r.ifft(O("x",t,e,n))];case"RFFT":return[r.rfft(O("x",t,e,n))];case"IRFFT":return[r.irfft(O("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Pge=(t,e,n,r=Na)=>{switch(t.op){case"StringNGrams":{const{nGrams:a,nGramsSplits:i}=r.string.stringNGrams(O("data",t,e,n),O("dataSplits",t,e,n),O("separator",t,e,n),O("nGramWidths",t,e,n),O("leftPad",t,e,n),O("rightPad",t,e,n),O("padWidth",t,e,n),O("preserveShortSequences",t,e,n));return[a,i]}case"StringSplit":{const{indices:a,values:i,shape:o}=r.string.stringSplit(O("input",t,e,n),O("delimiter",t,e,n),O("skipEmpty",t,e,n));return[a,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(O("input",t,e,n),O("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Fge=(t,e,n,r=Na)=>{switch(t.op){case"Cast":return[r.cast(O("x",t,e,n),O("dtype",t,e,n))];case"ExpandDims":{const a=O("axis",t,e,n);return[r.expandDims(O("x",t,e,n),a)]}case"Squeeze":{const a=O("axis",t,e,n);return[r.squeeze(O("x",t,e,n),a)]}case"Reshape":return[r.reshape(O("x",t,e,n),O("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(O("x",t,e,n),O("padding",t,e,n),O("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(O("x",t,e,n),O("padding",t,e,n),O("constantValue",t,e,n))];case"SpaceToBatchND":{const a=O("blockShape",t,e,n),i=O("paddings",t,e,n);return[r.spaceToBatchND(O("x",t,e,n),a,i)]}case"BatchToSpaceND":{const a=O("blockShape",t,e,n),i=O("crops",t,e,n);return[r.batchToSpaceND(O("x",t,e,n),a,i)]}case"DepthToSpace":{const a=O("blockSize",t,e,n),i=O("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(O("x",t,e,n),a,i)]}case"BroadcastTo":return[r.broadcastTo(O("x",t,e,n),O("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(O("s0",t,e,n),O("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b7(t,e,n,r,a=Xt){const i=((o,s,l)=>{switch(o.category){case"arithmetic":return a(()=>dge(o,s,l));case"basic_math":return a(()=>pge(o,s,l));case"control":return bge(o,s,l);case"convolution":return a(()=>vge(o,s,l));case"creation":return a(()=>xge(o,s,l));case"dynamic":return wge(o,s,l);case"evaluation":return a(()=>kge(o,s,l));case"image":return a(()=>Nge(o,s,l));case"graph":return a(()=>Sge(o,s,l));case"logical":return a(()=>Tge(o,s,l));case"matrices":return a(()=>Ige(o,s,l));case"normalization":return a(()=>_ge(o,s,l));case"reduction":return a(()=>Rge(o,s,l));case"slice_join":return a(()=>$ge(o,s,l));case"sparse":return a(()=>Oge(o,s,l));case"spectral":return a(()=>Mge(o,s,l));case"string":return a(()=>Pge(o,s,l));case"transformation":return a(()=>Fge(o,s,l));case"hash_table":return Ege(o,s,l,r);case"custom":const u=d7(o.op);if(u&&u.customExecutor)return u.customExecutor(new cge(o,s,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return qc(i)?i.then(o=>[].concat(o)):[].concat(i)}class v7{constructor(e={},n={},r={},a={}){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function x7(t,e,n,r){const a=new Set,i=[];let o=null,s=null;const l=new Set,u=Object.keys(t).map(p=>Ni(p)[0]);let c=[];r!=null&&(c=r.map(p=>Ni(p.name)[0]));const d=[...e];for(;d.length>0;){const p=d.pop();if((w7(p)||Bge(p)||jge(p))&&o==null&&(o=p,s=o.children.map(f=>f.name).filter(f=>a.has(f))),a.add(p.name),n[p.name]==null&&u.indexOf(p.name)===-1&&c.indexOf(p.name)===-1){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),d.push(f))})}}return{inputs:t,outputs:e,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}function Age(t,e,n){const{usedNodes:r,inputs:a}=n,i=[],o=Object.keys(a).map(c=>Ni(c)[0]).map(c=>t.nodes[c]),s=t.initNodes;o.forEach(c=>{r.has(c.name)&&i.push(c)}),t.weights.forEach(c=>{r.has(c.name)&&i.push(c)}),s?.forEach(c=>{r.has(c.name)&&i.push(c)});const l=new Set,u=[];for(;i.length>0;){const c=i.pop();l.add(c.name),e[c.name]||u.push(c),c.children.forEach(d=>{!l.has(d.name)&&r.has(d.name)&&d.inputs.every(p=>l.has(p.name))&&i.push(d)})}return u}const Dge=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],Lge=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],zge=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function w7(t){return Dge.indexOf(t.op)>=0}function Bge(t){return Lge.indexOf(t.op)>=0}function jge(t){return zge.indexOf(t.op)>=0}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Jw{constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new Jw(e.functions[r],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(a=>a.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),a=n.map(i=>i.name).sort();return r.join(this.SEPERATOR)+"--"+a.join(this.SEPERATOR)}compile(e,n){const r=x7(e,n,this.weightMap,this._initNodes),{missingInputs:a,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(a.length>0){const s=n.map(u=>u.name),l=Object.keys(e);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs [${l}]. Missing the following inputs: [${a}]`)}return Age(this.graph,this.weightMap,r)}execute(e,n){e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const a=r.map(d=>this.graph.nodes[Ni(d)[0]]),i=n.map(d=>Ni(d)[0]);let o=i.map(d=>this.graph.nodes[d]);this.resetIntermediateTensors(),o.length===0&&(o=this._outputs);const s=this.getCompilationKey(a,o);let l=this.compiledMap.get(s);l==null&&(l=this.compile(e,o),this.compiledMap.set(s,l));const u={},c={};return Xt(()=>{const d=new v7(this.weightMap,u,c,this.functionExecutorMap),p=Object.assign({},this.weightMap);Object.keys(e).forEach(y=>{const[v,b]=Ni(y),x=[];x[b]=e[y],p[v]=x});const f=this.getFrozenTensorIds(p),g={};for(let y=0;y<l.length;y++){const v=l[y];if(!p[v.name]){const b=b7(v,p,d,this._resourceManager);if(qc(b))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);p[v.name]=b,this.checkTensorForDisposal(v.name,v,p,d,f,i,g)}}return this.parent==null&&d.dispose(f),n.map(y=>Va(y,p,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(a=>a.id)));return new Set(n)}checkTensorForDisposal(e,n,r,a,i,o,s){n.category==="control"||o.indexOf(e)!==-1||(r[e].forEach(l=>{l!=null&&(s[l.id]=(s[l.id]||0)+n.children.length)}),n.inputs.forEach(l=>{if(l.category!=="control"){const u=Cme(l.name,r,a);u?.forEach(c=>{if(c&&!c.kept&&!i.has(c.id)){const d=s[c.id];if(d===1){if(!this.keepTensorForDebug)c.dispose();else{const[p,f]=$s(n.name,a);this.intermediateTensors[p]?this.intermediateTensors[p][f]=c:(this.intermediateTensors[p]=[],this.intermediateTensors[p][f]=c)}delete s[c.id]}else d!=null&&s[c.id]--}})}}))}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach(e=>this.intermediateTensors[e].forEach(n=>n.dispose())),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach(e=>{this.tensorsMap[e].forEach(n=>{n&&!n.kept&&!n.isDisposed&&!this.keepIds.has(n.id)&&n.dispose()})})}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach(n=>n.dispose()),delete this.intermediateTensors[e]}async _executeAsync(e,n,r=!1,a={},i={}){r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=me().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(c){console.warn(c.message)}this.resetIntermediateTensors();const o=new v7(this.weightMap,a,i,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,o,n,r);const s=n.map(c=>Va(c,this.tensorsMap,o)),l=s.map(c=>c.id),u=Object.keys(e).map(c=>e[c].id);return this.keepIds=new Set([...l,...u,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),this.parent==null&&o.dispose(this.keepIds),s}async executeFunctionAsync(e,n,r){const a=e.reduce((i,o,s)=>(i[this.inputs[s].name]=o,i),{});return this._executeAsync(a,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,a){const i=Object.keys(e),o=i.map(w=>this.graph.nodes[Ni(w)[0]]),s=r.map(w=>Ni(w)[0]);let l=s.map(w=>this.graph.nodes[w]);l.length===0&&(l=this._outputs);const{usedNodes:u,missingInputs:c,dynamicNode:d,syncInputs:p}=x7(e,l,this.weightMap,this._initNodes),f=[...o,...this.graph.weights,...this._initNodes||[]].map(w=>({node:w,contexts:n.currentContext})),g=Object.assign({},this.weightMap);Object.keys(e).forEach(w=>{const[S,C]=Ni(w),E=[];E[C]=e[w],g[S]=E});const y={},v=this.getFrozenTensorIds(g),b={};for(;f.length>0;){const w=this.processStack(o,f,n,g,b,v,s,y,u);await Promise.all(w)}d==null&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const x=l.filter(w=>!w7(w)&&!Va(w.name,g,n)).map(w=>w.name);if(x.length>0){let w="";throw d!=null&&(w=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${x}] from the provided inputs [${i}]. Consider providing the following inputs: [${c}]. ${w}`)}return g}processStack(e,n,r,a,i,o,s,l,u){const c=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let p="";if(d.node.op==="Enter"&&O("isConstant",d.node,a,r)&&([p]=$s(d.node.name,r)),a[d.node.name]==null){const f=b7(d.node,a,r,this._resourceManager);p||([p]=$s(d.node.name,r));const g=r.currentContext;qc(f)?c.push(f.then(y=>(a[p]=y,r.currentContext=g,this.checkTensorForDisposal(p,d.node,a,r,o,s,l),this.processChildNodes(d.node,n,r,a,i,u),y))):(a[p]=f,this.checkTensorForDisposal(p,d.node,a,r,o,s,l),this.processChildNodes(d.node,n,r,a,i,u))}else this.processChildNodes(d.node,n,r,a,i,u)}return c}processChildNodes(e,n,r,a,i,o){e.children.forEach(s=>{const[l]=$s(s.name,r);i[l]||!o.has(s.name)||(s.op==="Merge"?s.inputNames.some(u=>!!Va(u,a,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})):s.inputNames.every(u=>!!Va(u,a,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[a]=Ni(n),i=this.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((l,u)=>o[u]===-1||o[u]===l);U(s,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&U(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){const n={};for(const r in e)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[r]!=null){const a=this._signature.inputs[r];n[a.name]=e[r]}else n[r]=e[r];return n}checkInputs(e){const n=Object.keys(e).filter(r=>{const[a]=Ni(r);return this.graph.nodes[a]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>this._signature!=null&&this._signature.outputs!=null&&this._signature.outputs[n]!=null?this._signature.outputs[n].name:n,{})}checkOutputs(e){e.forEach(n=>{const[r]=Ni(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class Uge{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Vge="?tfjs-format=file",Wge="model.json";class Gge{constructor(e,n={},r=KN){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Uge}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return qc(e)?e.then(n=>this.loadSync(n)):this.loadSync(e)}loadSync(e){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(r=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;const a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Jw(p7.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=p7.Instance.transformGraph(e.modelInitializer);this.initializer=new Jw(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,n){const r=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){const a=r instanceof Xn?[r]:r,i={};return a.forEach((o,s)=>i[this.structuredOutputKeys[s]]=o),i}return r}normalizeInputs(e){if(!(e instanceof Xn)&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((n,r,a)=>(n[r]=e[a],n),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function Hge(t,e={},n=KN){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=qge(t));const r=new Gge(t,e,n);return await r.load(),r}function qge(t){return t.endsWith("/")||(t=t+"/"),`${t}${Wge}${Vge}`}/**
* @license
* Copyright 2023 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
* @license
* Copyright 2023 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ow(t,e,n,r){return new(n||(n=Promise))(function(a,i){function o(u){try{l(r.next(u))}catch(c){i(c)}}function s(u){try{l(r.throw(u))}catch(c){i(c)}}function l(u){u.done?a(u.value):new n(function(c){c(u.value)}).then(o,s)}l((r=r.apply(t,e||[])).next())})}function sw(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!((a=a.length>0&&a[a.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(c[0]===6&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(d){c=[6,d],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Kge="https://tfhub.dev/tensorflow/tfjs-model/deeplab",Xge=513,FI={ADE20K:[[0,0,0],[120,120,120],[180,120,120],[6,230,230],[80,50,50],[4,200,3],[120,120,80],[140,140,140],[204,5,255],[230,230,230],[4,250,7],[224,5,255],[235,255,7],[150,5,61],[120,120,70],[8,255,51],[255,6,82],[143,255,140],[204,255,4],[255,51,7],[204,70,3],[0,102,200],[61,230,250],[255,6,51],[11,102,255],[255,7,71],[255,9,224],[9,7,230],[220,220,220],[255,9,92],[112,9,255],[8,255,214],[7,255,224],[255,184,6],[10,255,71],[255,41,10],[7,255,255],[224,255,8],[102,8,255],[255,61,6],[255,194,7],[255,122,8],[0,255,20],[255,8,41],[255,5,153],[6,51,255],[235,12,255],[160,150,20],[0,163,255],[140,140,140],[250,10,15],[20,255,0],[31,255,0],[255,31,0],[255,224,0],[153,255,0],[0,0,255],[255,71,0],[0,235,255],[0,173,255],[31,0,255],[11,200,200],[255,82,0],[0,255,245],[0,61,255],[0,255,112],[0,255,133],[255,0,0],[255,163,0],[255,102,0],[194,255,0],[0,143,255],[51,255,0],[0,82,255],[0,255,41],[0,255,173],[10,0,255],[173,255,0],[0,255,153],[255,92,0],[255,0,255],[255,0,245],[255,0,102],[255,173,0],[255,0,20],[255,184,184],[0,31,255],[0,255,61],[0,71,255],[255,0,204],[0,255,194],[0,255,82],[0,10,255],[0,112,255],[51,0,255],[0,194,255],[0,122,255],[0,255,163],[255,153,0],[0,255,10],[255,112,0],[143,255,0],[82,0,255],[163,255,0],[255,235,0],[8,184,170],[133,0,255],[0,255,92],[184,0,255],[255,0,31],[0,184,255],[0,214,255],[255,0,112],[92,255,0],[0,224,255],[112,224,255],[70,184,160],[163,0,255],[153,0,255],[71,255,0],[255,0,163],[255,204,0],[255,0,143],[0,255,235],[133,255,0],[255,0,235],[245,0,255],[255,0,122],[255,245,0],[10,190,212],[214,255,0],[0,204,255],[20,0,255],[255,255,0],[0,153,255],[0,41,255],[0,255,204],[41,0,255],[41,255,0],[173,0,255],[0,245,255],[71,0,255],[122,0,255],[0,255,184],[0,92,255],[184,255,0],[0,133,255],[255,214,0],[25,194,194],[102,255,0],[92,0,255]],CITYSCAPES:[[128,64,128],[244,35,232],[70,70,70],[102,102,156],[190,153,153],[153,153,153],[250,170,30],[220,220,0],[107,142,35],[152,251,152],[70,130,180],[220,20,60],[255,0,0],[0,0,142],[0,0,70],[0,60,100],[0,80,100],[0,0,230],[119,11,32]],PASCAL:[[0,0,0],[128,0,0],[0,128,0],[128,128,0],[0,0,128],[128,0,128],[0,128,128],[128,128,128],[64,0,0],[192,0,0],[64,128,0],[192,128,0],[64,0,128],[192,0,128],[64,128,128],[192,128,128],[0,64,0],[128,64,0],[0,192,0],[128,192,0],[0,64,128],[128,64,128],[0,192,128],[128,192,128],[64,64,0],[192,64,0],[64,192,0],[192,192,0],[64,64,128],[192,64,128],[64,192,128],[192,192,128],[0,0,64],[128,0,64],[0,128,64],[128,128,64],[0,0,192],[128,0,192],[0,128,192],[128,128,192],[64,0,64],[192,0,64],[64,128,64],[192,128,64],[64,0,192],[192,0,192],[64,128,192],[192,128,192],[0,64,64],[128,64,64],[0,192,64],[128,192,64],[0,64,192],[128,64,192],[0,192,192],[128,192,192],[64,64,64],[192,64,64],[64,192,64],[192,192,64],[64,64,192],[192,64,192],[64,192,192],[192,192,192],[32,0,0],[160,0,0],[32,128,0],[160,128,0],[32,0,128],[160,0,128],[32,128,128],[160,128,128],[96,0,0],[224,0,0],[96,128,0],[224,128,0],[96,0,128],[224,0,128],[96,128,128],[224,128,128],[32,64,0],[160,64,0],[32,192,0],[160,192,0],[32,64,128],[160,64,128],[32,192,128],[160,192,128],[96,64,0],[224,64,0],[96,192,0],[224,192,0],[96,64,128],[224,64,128],[96,192,128],[224,192,128],[32,0,64],[160,0,64],[32,128,64],[160,128,64],[32,0,192],[160,0,192],[32,128,192],[160,128,192],[96,0,64],[224,0,64],[96,128,64],[224,128,64],[96,0,192],[224,0,192],[96,128,192],[224,128,192],[32,64,64],[160,64,64],[32,192,64],[160,192,64],[32,64,192],[160,64,192],[32,192,192],[160,192,192],[96,64,64],[224,64,64],[96,192,64],[224,192,64],[96,64,192],[224,64,192],[96,192,192],[224,192,192],[0,32,0],[128,32,0],[0,160,0],[128,160,0],[0,32,128],[128,32,128],[0,160,128],[128,160,128],[64,32,0],[192,32,0],[64,160,0],[192,160,0],[64,32,128],[192,32,128],[64,160,128],[192,160,128],[0,96,0],[128,96,0],[0,224,0],[128,224,0],[0,96,128],[128,96,128],[0,224,128],[128,224,128],[64,96,0],[192,96,0],[64,224,0],[192,224,0],[64,96,128],[192,96,128],[64,224,128],[192,224,128],[0,32,64],[128,32,64],[0,160,64],[128,160,64],[0,32,192],[128,32,192],[0,160,192],[128,160,192],[64,32,64],[192,32,64],[64,160,64],[192,160,64],[64,32,192],[192,32,192],[64,160,192],[192,160,192],[0,96,64],[128,96,64],[0,224,64],[128,224,64],[0,96,192],[128,96,192],[0,224,192],[128,224,192],[64,96,64],[192,96,64],[64,224,64],[192,224,64],[64,96,192],[192,96,192],[64,224,192],[192,224,192],[32,32,0],[160,32,0],[32,160,0],[160,160,0],[32,32,128],[160,32,128],[32,160,128],[160,160,128],[96,32,0],[224,32,0],[96,160,0],[224,160,0],[96,32,128],[224,32,128],[96,160,128],[224,160,128],[32,96,0],[160,96,0],[32,224,0],[160,224,0],[32,96,128],[160,96,128],[32,224,128],[160,224,128],[96,96,0],[224,96,0],[96,224,0],[224,224,0],[96,96,128],[224,96,128],[96,224,128],[224,224,128],[32,32,64],[160,32,64],[32,160,64],[160,160,64],[32,32,192],[160,32,192],[32,160,192],[160,160,192],[96,32,64],[224,32,64],[96,160,64],[224,160,64],[96,32,192],[224,32,192],[96,160,192],[224,160,192],[32,96,64],[160,96,64],[32,224,64],[160,224,64],[32,96,192],[160,96,192],[32,224,192],[160,224,192],[96,96,64],[224,96,64],[96,224,64],[224,224,64],[96,96,192],[224,96,192],[96,224,192],[224,224,192]]},AI={PASCAL:["background","aeroplane","bicycle","bird","boat","bottle","bus","car","cat","chair","cow","dining table","dog","horse","motorbike","person","potted plant","sheep","sofa","train","TV"],CITYSCAPES:["road","sidewalk","building","wall","fence","pole","traffic light","traffic sign","vegetation","terrain","sky","person","rider","car","truck","bus","train","motorcycle","bicycle"],ADE20K:["background","wall","building","sky","floor","tree","ceiling","road","bed","windowpane","grass","cabinet","sidewalk","person","earth","door","table","mountain","plant","curtain","chair","car","water","painting","sofa","shelf","house","sea","mirror","rug","field","armchair","seat","fence","desk","rock","wardrobe","lamp","bathtub","railing","cushion","base","box","column","signboard","chest","counter","sand","sink","skyscraper","fireplace","refrigerator","grandstand","path","stairs","runway","case","pool","pillow","screen","stairway","river","bridge","bookcase","blind","coffee","toilet","flower","book","hill","bench","countertop","stove","palm","kitchen","computer","swivel","boat","bar","arcade","hovel","bus","towel","light","truck","tower","chandelier","awning","streetlight","booth","television","airplane","dirt","apparel","pole","land","bannister","escalator","ottoman","bottle","buffet","poster","stage","van","ship","fountain","conveyer","canopy","washer","plaything","swimming","stool","barrel","basket","waterfall","tent","bag","minibike","cradle","oven","ball","food","step","tank","trade","microwave","pot","animal","bicycle","lake","dishwasher","screen","blanket","sculpture","hood","sconce","vase","traffic","tray","ashcan","fan","pier","screen","plate","monitor","bulletin","shower","radiator","glass","clock","flag"]};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qge(t,e){return""+Kge+"/"+(e===4?t+"/1/default/1/model.json":t+"/1/quantized/"+e+"/1/model.json")+"?tfjs-format=file"}function Yge(t){if(t==="pascal")return FI.PASCAL;if(t==="ade20k")return FI.ADE20K;if(t==="cityscapes")return FI.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function Jge(t){if(t==="pascal")return AI.PASCAL;if(t==="ade20k")return AI.ADE20K;if(t==="cityscapes")return AI.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function Zge(t,e,n,r){return ow(this,void 0,void 0,function(){var a,i,o,s,l,u,c,d,p,f,g,y,v,b;return sw(this,function(x){switch(x.label){case 0:if(t.length<e.length)throw new Error("The colormap must be expansive enough to encode each label. Aborting, since the given colormap has length "+t.length+", but there are "+e.length+" labels.");return a=n.shape,i=a[0],o=a[1],s=Tt([i,o,3],"int32"),[4,n.array()];case 1:for(l=x.sent(),u=new Set,c=0;c<i;++c)for(d=0;d<o;++d)b=l[c][d],u.add(b),s.set(t[b][0],c,d,0),s.set(t[b][1],c,d,1),s.set(t[b][2],c,d,2);return p=s.toTensor(),[4,a9(p,r)];case 2:for(f=x.sent(),Sa(p),g={},y=0,v=Array.from(u);y<v.length;y++)b=v[y],g[e[b]]=t[b];return[2,{legend:g,segmentationMap:f}]}})})}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function e0e(t){return t===void 0&&(t={base:"pascal",quantizationBytes:2}),ow(this,void 0,void 0,function(){var e;return sw(this,function(n){switch(n.label){case 0:if(wme==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(t.base){if(["pascal","cityscapes","ade20k"].indexOf(t.base)===-1)throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t.base+". Try one of 'pascal', 'cityscapes' and 'ade20k'.");if([1,2,4].indexOf(t.quantizationBytes)===-1)throw new Error("Only quantization to 1, 2 or 4 bytes is supported.")}else if(!t.modelUrl)throw new Error("SemanticSegmentation can be constructed either by passing the weights URL or one of the supported base model names from 'pascal', 'cityscapes' and 'ade20k',together with the degree of quantization (either 1, 2 or 4).Aborting, since neither has been provided.");return[4,Hge(t.modelUrl||Qge(t.base,t.quantizationBytes))];case 1:return e=n.sent(),[2,new t0e(e,t.base)]}})})}var t0e=function(){function t(e,n){this.model=e,this.base=n}return t.prototype.predict=function(e){var n=this;return Xt(function(){var r=Un(function(a){return Xt(function(){var i=a instanceof Xn?a:i9(a),o=i.shape,s=o[0],l=o[1],u=Xge/Math.max(l,s),c=Math.round(s*u),d=Math.round(l*u);return El(JT.resizeBilinear(i,[c,d]))})}(e),"int32");return Yg(n.model.execute(r))})},t.prototype.segment=function(e,n){return n===void 0&&(n={}),ow(this,void 0,void 0,function(){var r,a,i,o,s,l,u,c,d,p,f=this;return sw(this,function(g){switch(g.label){case 0:if(!(n.colormap&&n.labels||this.base))throw new Error("Calling the 'segment' method requires either the 'base' attribute to be defined (e.g. 'pascal', 'cityscapes' or'ade20k'), or 'colormap' and 'labels' options to be set. Aborting, since neither has been provided.");return n.colormap&&n.labels||(n.colormap=Yge(this.base),n.labels=Jge(this.base)),r=n.colormap,a=n.labels,i=n.canvas,o=Xt(function(){return f.predict(e)}),s=o.shape,l=s[0],u=s[1],[4,Zge(r,a,o,i)];case 1:return c=g.sent(),d=c.legend,p=c.segmentationMap,Sa(o),[2,{legend:d,height:l,width:u,segmentationMap:p}]}})})},t.prototype.dispose=function(){return ow(this,void 0,void 0,function(){return sw(this,function(e){return this.model&&this.model.dispose(),[2]})})},t}();/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qe(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&U(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const n0e=U2;class Zw extends Iv{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Y4(this,kl())}nextDataId(){return Zw.nextDataId++}write(e,n,r){this.firstUse&&(this.firstUse=!1,me().get("IS_NODE")&&ji(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:r,refCount:1}),a}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&ks(r[0])){const i=r.map(o=>Ss(o));a=this.write(i,e,n)}else a=this.write(r,e,n);return{dataId:a,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,a,i){this.data.set(e,{values:n,dtype:a,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return Tl(a,i)}return this.data.get(e).values}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>bl(a));return Tt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Tt(e.shape,e.dtype,n)}makeOutput(e,n,r){return kl().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=ki();return e(),{kernelMs:ki()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){qe([e],"where");const n=this.readSync(e.dataId);return n0e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Zw.nextDataId=0;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function k7(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const r0e=t=>{const{x:e}=t.inputs,n=t.backend;qe(e,"abs");let r=new Float32Array(be(e.shape));const a=n.data.get(e.dataId).values;return r=k7(a),n.makeOutput(r,e.shape,e.dtype)},a0e={kernelName:Pv,backendName:"cpu",kernelFunc:r0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cr(t){return(e,n,r,a,i)=>{const o=Ut(e,n),s=o.length,l=rt(o),u=be(o),c=$r(i,u),d=e.length,p=n.length,f=rt(e),g=rt(n),y=td(e,o),v=td(n,o);if(y.length+v.length===0)for(let b=0;b<c.length;++b)c[b]=t(r[b%r.length],a[b%a.length]);else for(let b=0;b<c.length;++b){const x=Hc(b,s,l),w=x.slice(-d);y.forEach(R=>w[R]=0);const S=Ko(w,d,f),C=x.slice(-p);v.forEach(R=>C[R]=0);const E=Ko(C,p,g);c[b]=t(r[S],a[E])}return[c,o]}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ti(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(s.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}const i0e={kernelName:Hv,backendName:"cpu",kernelFunc:Ti};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lw(t,e,n="float32"){if(n==="complex64"){const a=lw(t,e,"float32"),i=lw(t,e,"float32");return Ti({inputs:{real:a,imag:i},backend:t})}const r=ra(be(e),n);return t.makeTensorInfo(e,n,r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Os(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const o0e={kernelName:Hm,backendName:"cpu",kernelFunc:Os};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ud(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const s0e={kernelName:Wx,backendName:"cpu",kernelFunc:ud};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function S7(t,e,n,r){if(r==="int32"){const a=Int32Array.from(t);return[e,"int32",a]}if(r==="bool"){const a=Tu([0],n),[i,o]=Cr((s,l)=>s!==l?1:0)(e,[],t,a,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function zu(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return Os({inputs:{x:a},backend:n});const c=lw(n,a.shape,a.dtype),d=zu({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),p=Ti({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),p}if(a.dtype==="complex64"){const c=ud({inputs:{input:a},backend:n}),d=zu({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),d}if(!eN(a.dtype,i)){const c=Os({inputs:{x:a},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:i}}const o=n.data.get(a.dataId).values,[s,l,u]=S7(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,l,u)}const l0e={kernelName:$m,backendName:"cpu",kernelFunc:zu};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hr(t,e,n,r){return n==null?({inputs:a,backend:i})=>{const{a:o,b:s}=a,l=i;qe([o,s],t);const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,d=o.dtype==="string"?ld(u):u,p=o.dtype==="string"?ld(c):c,f=r||o.dtype,[g,y]=e(o.shape,s.shape,d,p,f);return l.makeTensorInfo(y,f,g)}:({inputs:a,backend:i})=>{const{a:o,b:s}=a,l=i;if(o.dtype==="complex64"||s.dtype==="complex64"){const u=zu({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,p=c.complexTensorInfos.imag,f=l.data.get(d.dataId).values,g=l.data.get(p.dataId).values,y=zu({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(y.dataId),b=v.complexTensorInfos.real,x=v.complexTensorInfos.imag,w=l.data.get(b.dataId).values,S=l.data.get(x.dataId).values,[C,E,R]=n(o.shape,s.shape,f,g,w,S),T=l.makeTensorInfo(R,"float32",C),$=l.makeTensorInfo(R,"float32",E),P=Ti({inputs:{real:T,imag:$},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(y),l.disposeIntermediateTensorInfo(T),l.disposeIntermediateTensorInfo($),P}else{const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,d=r||o.dtype,[p,f]=e(o.shape,s.shape,u,c,d);return l.makeTensorInfo(f,d,p)}}}function DI(t){return(e,n,r,a,i,o)=>{const s=Ut(e,n),l=be(s),u=s.length,c=rt(s),d=$r("float32",l),p=$r("float32",l),f=td(e,s),g=td(n,s),y=Tl(r,a),v=Tl(i,o),b=e.length,x=rt(e),w=n.length,S=rt(n);if(f.length+g.length===0)for(let C=0;C<d.length;C++){const E=C%y.length,R=C%v.length,T=t(y[E*2],y[E*2+1],v[R*2],v[R*2+1]);d[C]=T.real,p[C]=T.imag}else for(let C=0;C<d.length;C++){const E=Hc(C,u,c),R=E.slice(-b);f.forEach(B=>R[B]=0);const T=Ko(R,b,x),$=E.slice(-w);g.forEach(B=>$[B]=0);const P=Ko($,w,S),D=t(y[T*2],y[T*2+1],v[P*2],v[P*2+1]);d[C]=D.real,p[C]=D.imag}return[d,p,s]}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const C7=Cr((t,e)=>t+e),u0e=DI((t,e,n,r)=>({real:t+n,imag:e+r})),ah=Hr(Dp,C7,u0e),c0e={kernelName:Dp,backendName:"cpu",kernelFunc:ah};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function LI(t,e,n,r,a){const i=be(r),o=ra(a,n);for(let s=0;s<t.length;s++){const l=t[s];if(l<0)throw new Error("Input x must be non-negative!");l>=a||(i>0?o[l]+=e[s]:o[l]+=1)}return o}function E7(t,e,n,r=!1){const a=t.shape[0],i=t.shape[1],o=Tt([a,n],e.dtype);for(let s=0;s<a;s++)for(let l=0;l<i;l++){const u=t.get(s,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,s,u):e.size>0?o.set(o.get(s,u)+e.get(s,l),s,u):o.set(o.get(s,u)+1,s,u))}return o}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bu(t){return(e,n,r)=>{const a=$r(n,e.length);for(let i=0;i<e.length;++i)a[i]=t(e[i],r);return a}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gn(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:o}=r;if(qe(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const s=i,l=s.data.get(o.dataId).values,u=be(o.shape),c=n||o.dtype,d=Or(c,u);for(let p=0;p<u;++p)d[p]=e(l[p],a);return s.makeTensorInfo(o.shape,c,d)}}function ih(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:o}=r;if(qe(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const s=i,l=s.data.get(o.dataId).values,u=n||o.dtype,c=e(l,u,a);return s.makeTensorInfo(o.shape,u,c)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const N7=Bu(t=>Math.ceil(t)),d0e=ih(Om,N7),p0e={kernelName:Om,backendName:"cpu",kernelFunc:d0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function T7(t,e,n,r){const a=Or(n,be(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const s=be(o.shape);a.set(o.vals,i),i+=s})}else{let i=0;t.forEach(o=>{const s=n==="string"?ld(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const c=u*e[1]+i;for(let d=0;d<o.shape[1];++d)a[c+d]=s[l++]}i+=o.shape[1]})}return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const I7=Cr((t,e)=>t===e?1:0),_7=Hr(zm,I7,null,"bool"),h0e={kernelName:zm,backendName:"cpu",kernelFunc:_7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const R7=Bu(t=>Math.exp(t)),$7=ih(Bm,R7,"float32"),f0e={kernelName:Bm,backendName:"cpu",kernelFunc:$7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const O7=Bu(t=>Math.expm1(t)),m0e=ih(jm,O7),g0e={kernelName:jm,backendName:"cpu",kernelFunc:m0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const M7=Bu(t=>Math.floor(t)),y0e=ih(Um,M7),b0e={kernelName:Um,backendName:"cpu",kernelFunc:y0e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function P7(t,e,n,r,a,i,o,s,l){const u=Tt([r,i],n);for(let c=0;c<r;c++){const d=[];let p=0;for(let f=0;f<a;f++){const g=t[c*a+f];p+=g*o[f],d.push(g)}if(p<0||p>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${s}`);for(let f=0;f<i;f++)u.values[c*i+f]=e.get(...e.indexToLoc(p*i+f))}return u}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function F7(t,e,n){const r=Tt(n,t.dtype);for(let a=0;a<r.size;++a){const i=r.indexToLoc(a).slice(),o=i[0],s=i[2],l=e.locToIndex([o,s]);i[2]=e.values[l];const u=t.locToIndex(i);0<=u&&u<t.values.length&&(r.values[a]=t.values[u])}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A7=Cr((t,e)=>t>e?1:0),v0e=Hr(Wm,A7,null,"bool"),x0e={kernelName:Wm,backendName:"cpu",kernelFunc:v0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const D7=Cr((t,e)=>t>=e?1:0),w0e=Hr(Gm,D7,null,"bool"),k0e={kernelName:Gm,backendName:"cpu",kernelFunc:w0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const L7=Cr((t,e)=>t<e?1:0),S0e=Hr(Qm,L7,null,"bool"),C0e={kernelName:Qm,backendName:"cpu",kernelFunc:S0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const z7=Cr((t,e)=>t<=e?1:0),E0e=Hr(Ym,z7,null,"bool"),N0e={kernelName:Ym,backendName:"cpu",kernelFunc:E0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function B7(t,e,n){const r=(e-t)/(n-1),a=ra(n,"float32");a[0]=t;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const j7=Bu(t=>Math.log(t)),T0e=ih(Jm,j7),I0e={kernelName:Jm,backendName:"cpu",kernelFunc:T0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function U7(t,e,n,r){const a=$r(r,be(n));for(let i=0;i<a.length;++i){const o=i*e;let s=t[o];for(let l=0;l<e;++l){const u=t[o+l];(Number.isNaN(u)||u>s)&&(s=u)}a[i]=s}return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const V7=Cr((t,e)=>Math.max(t,e)),_0e=Hr(rg,V7),R0e={kernelName:rg,backendName:"cpu",kernelFunc:_0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const W7=Cr((t,e)=>Math.min(t,e)),$0e=Hr(ag,W7),O0e={kernelName:ag,backendName:"cpu",kernelFunc:$0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zI=Cr((t,e)=>t*e),M0e=DI((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),uw=Hr(og,zI,M0e),P0e={kernelName:og,backendName:"cpu",kernelFunc:uw};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function G7(t,e,n){const r=yl(-1,n);return zI([],e,r,t,n)}function F0e(t){const{inputs:e,backend:n}=t,{x:r}=e;qe(r,"neg");const a=n.data.get(r.dataId).values,[i,o]=G7(a,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const A0e={kernelName:$x,backendName:"cpu",kernelFunc:F0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const H7=Cr((t,e)=>t!==e?1:0),D0e=Hr(sg,H7,null,"bool"),L0e={kernelName:sg,backendName:"cpu",kernelFunc:D0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function BI(t,e,n,r,a){const i=e.length,o=be(e),s=rt(e),l=rt(a),u=$r(n,be(a));for(let c=0;c<o;++c){const d=Hc(c,i,s),p=new Array(d.length);for(let g=0;g<p.length;g++)p[g]=d[r[g]];const f=Ko(p,i,l);u[f]=t[c]}return u}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function li(t){const{inputs:e,attrs:n,backend:r}=t,{x:a}=e,{perm:i}=n;qe(a,"transpose");const o=a.shape.length,s=new Array(o);for(let c=0;c<s.length;c++)s[c]=a.shape[i[c]];const l=r.data.get(a.dataId).values,u=BI(l,a.shape,a.dtype,i,s);return{dataId:r.write(u,s,a.dtype),shape:s,dtype:a.dtype}}const z0e={kernelName:Lp,backendName:"cpu",kernelFunc:li};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function q7(t,e,n,r){const[a,i]=aa(t,r),o=si(e,"int32"),s=ra(be(a),o),l=be(i);for(let u=0;u<s.length;++u){const c=u*l;let d=1;for(let p=0;p<l;++p)d*=n[c+p];s[u]=d}return{outVals:s,outShape:a,outDtype:o}}function B0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;qe(a,"prod");const s=a.shape.length,l=Jt(i,a.shape),u=gr(l,s);let c=l,d=a;const p=[];u!=null&&(d=li({inputs:{x:a},backend:n,attrs:{perm:u}}),p.push(d),c=yr(c.length,s));const f=n.data.get(d.dataId).values,{outVals:g,outShape:y,outDtype:v}=q7(d.shape,d.dtype,f,c);let b=y;return o&&(b=Pr(y,l)),p.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(b,v,g)}const j0e={kernelName:Bx,backendName:"cpu",kernelFunc:B0e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function U0e(t,e,n){t.forEach((r,a)=>{if(r<0||r>=n){const i=Hc(a,e.length,rt(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function V0e(t,e){for(let n=0;n<t.length;++n){const r=t[n],a=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function W0e(t,e,n,r){const a=[];let i=0;const o=e.length-1+n.length,s=new Array(o).fill(null).map(()=>[0]);V0e(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let d=1;d<l+1;++d)s[u].push(d*c)}for(let u=0;u<t.length;++u){let c=t[u],d=t[u]+1;for(let p=0;p<n.length;++p){const f=n[p],g=p+e.length-1;if(g>=0){const y=s[g],v=y[y.length-1]-f[c];for(let b=c;b<d;++b)s[g].push(f[b+1]+v)}c=f[c],d=f[d]}d!==c&&(a.push([c,d]),i+=d-c)}return{outSplits:s,valueSlices:a,numValues:i}}function G0e(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,a=Or("int32",r);e.push(a),t[n].forEach((i,o)=>a[o]=i)}return e}function K7(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function H0e(t,e,n,r,a,i){const o=K7(e,2)[1],s=K7(i,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let d=0;d<r;++d)a[l*s+d]=t[c*o+d];++l}}function q0e(t,e,n,r,a){const i=e.slice();i[0]=a;const o=Or(n,be(i)),s=t.length,l=s===0?0:s/e[0];return H0e(t,e,r,l,o,i),[o,i]}function X7(t,e,n,r,a,i,o,s){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(U0e(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:d,numValues:p}=W0e(i,o,t,u),f=G0e(c),g=q0e(n,r,a,d,p);return[f,g[0],g[1]]}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var xo=Jo;class ek{constructor(e,n,r,a,i,o,s,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=LL(c),this.raggedRank=zL(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===xo.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===xo.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case xo.VALUE_ROWIDS:return ek.getMaxWidthValueRowID(n);case xo.ROW_SPLITS:return ek.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${xo[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let a=0;a<n-1;++a){const i=e[a+1]-e[a];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,a=e[0],i=0;for(let o=1;o<n;++o){const s=e[o];s!==a&&(a=s,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Y7(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;BL(r,n);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=DL(this.raggedRank,a,n);i[0]<0&&(i[0]=e);for(let o=1;o<=this.raggedRank;++o)i[o]<0&&(i[o]=this.getMaxWidth(o));return i}calculateFirstParentOutputIndex(e,n,r){const a=Math.min(e,r),i=[];let o=0;for(let s=0;s<a;++s,o+=n)i.push(o);for(let s=a;s<e;++s)i.push(-1);return U(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,a){const i=e.length,o=[];for(let s=0;s<i-1;++s){const l=e[s+1]-e[s];let u=Math.min(a,l),c=n[s];c===-1&&(u=0);for(let d=0;d<u;++d)o.push(c),c+=r;for(let d=0;d<l-u;++d)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,a){const i=e.length,o=[];if(i===0)return[];let s=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];o.push(u);for(let c=1;c<i;++c){const d=e[c];if(d===l)u>=0&&(++s,s<a?u+=r:u=-1);else{if(s=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,a){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case xo.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,a);case xo.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,a);default:throw new Error(`Unsupported partition type: ${xo[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case xo.FIRST_DIM_SIZE:return e[0];case xo.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case xo.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${xo[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),n=this.calculateOutputSize(e),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let o=r.length-2;o>=0;--o)r[o]=r[o+1]*n[o+1];const a=Y7(n,!1),i=Or(this.valuesDType,be(a));if(r[0]*n[0]>0){let o=this.calculateFirstParentOutputIndex(e,r[0],n[0]);for(let s=1;s<=this.raggedRank;++s)o=this.calculateOutputIndex(s-1,o,r[s],n[s]);this.setOutput(this.raggedRank,o,i,a)}return[a,i]}setOutput(e,n,r,a){if(r.length===0)return;const i=this.values,o=r;let s=a.slice();s=s.slice(e+1);const l=be(s),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const g=this.defaultValueShape;Xt(()=>{const y=Ce(c,g);c=Kp(y,s).dataSync()})}let d=0,p=0,f=0;for(let g=0;g<=u;++g){let y=g<u?n[g]:-1;if(y===f){++f;continue}if(p<f){const v=i.subarray(d*l),b=o.subarray(p*l),x=(f-p)*l;Q7(b,v,x)}if(g>=u){const v=r.length;y=Math.floor(v/l)}if(y>f)if(this.defaultValue.length===1)o.subarray(f*l,y*l).fill(this.defaultValue[0]),f=y;else for(;y>f;){const v=o.slice(f*l);Q7(v,c,l),++f}y<0?(d=g+1,p=f):(d=g,p=f,f=p+1)}}}function Q7(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function Y7(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function J7(t,e,n,r,a,i,o,s,l,u){return new ek(t,e,n,r,a,i,o,s,l,u).compute()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Z7(t,e,n,r){const a=t===e,i=t<e&&n<0,o=e<t&&n>1;if(a||i||o)return ra(0,r);const s=Math.abs(Math.ceil((e-t)/n)),l=ra(s,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ez=Bu(t=>1/Math.sqrt(t)),K0e=ih(hg,ez),X0e={kernelName:hg,backendName:"cpu",kernelFunc:K0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oh(t,e,n,r,a,i,o,s,l,u){const c=[r/a,a],d=t.values,p=e.values;if(r===0)return Tt(n,e.dtype);const f=Tt(c,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let g=0;g<i;g++){const y=[];let v=0;for(let b=0;b<o;b++){const x=d[g*o+b];y.push(x),v+=x*s[b]}if(v<0||v>=r/a)throw new Error(`Invalid indices: ${y} does not index into ${n}`);for(let b=0;b<a;b++)u?f.values[v*a+b]+=p[g*a+b]:f.values[v*a+b]=e.rank===0?p[0]:p[g*a+b]}return f}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Q0e=Bu(t=>1/(1+Math.exp(-t))),tz=gn(bg,t=>1/(1+Math.exp(-t))),Y0e={kernelName:bg,backendName:"cpu",kernelFunc:tz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nz(t,e,n,r,a){const i=rT(r,e,n),o=be(n),s=rt(r);if(i){const d=aT(e,s);return a==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=a==="string"?ld(t):t,u=Tt(r,a,l),c=Tt(n,a);for(let d=0;d<c.size;++d){const p=c.indexToLoc(d),f=p.map((g,y)=>g+e[y]);c.set(u.get(...f),...p)}return a==="string"?l7(c.values):c.values}function cd(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:o}=r;qe(a,"slice");const[s,l]=iT(a,i,o);tT(a,s,l);const u=n.data.get(a.dataId).values,c=nz(u,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,c)}const J0e={kernelName:Jx,backendName:"cpu",kernelFunc:cd};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rz(t,e,n,r,a,i,o){const s=e[0],l=i[0],u=new Array(l),c=new Array(s),d=e[1];if(l===0){if(s!==0)throw new Error(XL(s));const v=Or(n,0),b=Or(a,0);return[v,[0,d],b,u,c]}let p=!0,f=0;const g=new Array(l).fill(0);for(let v=0;v<s;++v){const b=t[v*d];if(b<0)throw new Error(QL(v,b));if(b>=l)throw new Error(YL(v,b,l));++g[b],p=p&&b>=f,f=b}let y=!0;for(let v=0;v<l;++v){const b=g[v]===0;u[v]=b,y=y&&!b,g[v]=Math.max(g[v],1),v>0&&(g[v]+=g[v-1])}if(y&&p){const v=t,b=r;for(let x=0;x<s;++x)c[x]=x;return[v,[s,d],b,u,c]}else{const v=g[l-1],b=Or(n,v*d),x=Or(a,v),w=new Array(l).fill(0);for(let S=0;S<s;++S){const C=t[S*d],E=w[C],R=(C===0?0:g[C-1])+E;w[C]++;for(let T=0;T<d;++T)b[R*d+T]=t[S*d+T];x[R]=r[S],c[S]=R}for(let S=0;S<l;++S)if(w[S]===0){const C=S===0?0:g[S-1];b[C*d+0]=S;for(let E=1;E<d;++E)b[C*d+E]=0;x[C]=o}return[b,[v,d],x,u,c]}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function az(t,e,n,r,a){const i=be(r),o=e[0],s=a.length,l=[];let u=1,c=-1;for(let y=0;y<s;++y){const v=a[y];if(v===-1){if(c!==-1)throw new Error(JL(c,y));c=y,l.push(1)}else{if(v<0)throw new Error(ZL(y,v));u*=v,l.push(v)}}if(c!==-1){if(u<=0)throw new Error(e7());const y=Math.trunc(i/u);if(u*y!==i)throw new Error(t7(r,l));l[c]=y}if(be(l)!==i)throw new Error(n7(r,l));const d=r.length,p=[];if(d>0){p[d-1]=1;for(let y=d-2;y>=0;--y)p[y]=p[y+1]*r[y+1]}const f=[];if(s>0){f[s-1]=1;for(let y=s-2;y>=0;--y)f[y]=f[y+1]*l[y+1]}const g=Or(n,o*s);for(let y=0;y<o;++y){let v=0;for(let b=0;b<d;++b)v+=t[y*d+b]*p[b];for(let b=0;b<s;++b)g[y*s+b]=Math.trunc(v/f[b]),v%=f[b]}return[g,[o,s],l]}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jI(t,e,n,r,a,i=!1,o=0){const s=r.length,l=[e[0],t.length/e[0]],u=l[1],c=s>0?a[s-1]+1:0;if(c<0)throw new Error(xI());const d=e.slice();d[0]=c;const p=d.reduce((x,w)=>x*w,1),f=Or(n,p);if(s===0)return c>0&&f.fill(o),[f,d];if(c<=0)throw new Error(xI());let g=0,y=1,v=0,b=a[g];for(;;){let x=0;if(y<s){if(x=a[y],b===x){++y;continue}if(b>=x)throw new Error(r7())}if(b<0||b>=c)throw new Error(a7(b,c));b>v&&f.fill(o,v*u,b*u);for(let w=g;w<y;++w){const S=r[w];if(S<0||S>=l[0])throw new Error(i7(w,r[w],l[0]));for(let C=0;C<u;C++)f[b*u+C]+=t[S*u+C]}if(i)for(let w=0;w<u;w++)f[b*u+w]/=y-g;if(g=y,++y,v=b+1,b=x,y>s)break}return v<c&&f.fill(o,v*u,c*u),[f,d]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Z0e=Bu(t=>Math.sqrt(t)),e1e=gn(xg,t=>Math.sqrt(t)),t1e={kernelName:xg,backendName:"cpu",kernelFunc:e1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const iz=Cr((t,e)=>{const n=t-e;return n*n}),n1e=Hr(wg,iz),r1e={kernelName:wg,backendName:"cpu",kernelFunc:n1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oz(t,e,n,r){const a=Tt(t,e.dtype);for(let i=0;i<a.size;i++){const o=a.indexToLoc(i),s=new Array(o.length);for(let l=0;l<s.length;l++)s[l]=o[l]*n[l]+r[l];a.set(e.get(...s),...o)}return a}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class a1e{constructor(e,n,r,a,i,o){this.separator=Ss(e),this.nGramWidths=n,this.leftPad=Ss(r),this.rightPad=Ss(a),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,a,i,o){for(let s=0;s<i;++s){const l=this.getPadWidth(o),u=Math.max(0,l-s),c=Math.max(0,l-(i-(s+1))),d=o-(u+c),p=n+(u>0?0:s-l);let f=0;f+=u*this.leftPad.length;for(let x=0;x<d;++x)f+=e[p+x].length;f+=c*this.rightPad.length;const g=u+c+d-1;f+=g*this.separator.length,r[a+s]=new Uint8Array(f);const y=r[a+s];let v=0;const b=x=>x.forEach(w=>y[v++]=w);for(let x=0;x<u;++x)b(this.leftPad),b(this.separator);for(let x=0;x<d-1;++x)b(e[p+x]),b(this.separator);if(d>0){b(e[p+d-1]);for(let x=0;x<c;++x)b(this.separator),b(this.rightPad)}else{for(let x=0;x<c-1;++x)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(e,n){const r=e.length,a=n.length;if(a>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<a;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=a-1,o=Or("int32",a);if(r===0||a===0){const l=new Array(r);for(let u=0;u<=i;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),o[l]=o[l-1]+c}const s=new Array(o[i]);for(let l=0;l<i;++l){const u=n[l];let c=o[l];if(this.nGramWidths.forEach(d=>{const p=n[l+1]-n[l],f=this.getNumNGrams(p,d);this.createNGrams(e,u,s,c,f,d),c+=f}),this.preserveShort&&c===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const p=d+2*this.padWidth;this.createNGrams(e,u,s,c,1,p)}}return[s,o]}}function sz(t,e,n,r,a,i,o,s){return new a1e(n,r,a,i,o,s).compute(t,e)}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function i1e(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const s=t.subarray(0,o);(!n||s.length!==0)&&r.push(s),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let a=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(a,i);(!n||o.length!==0)&&r.push(o),a=i+1}}function lz(t,e,n){const r=t.length,a=[];let i=0,o=0;const s=new Array(r);for(let p=0;p<r;++p){const f=a.length;i1e(t[p],e,n,a);const g=a.length-f;s[p]=g,i+=g,o=Math.max(o,g)}const l=Or("int32",i*2),u=new Array(i),c=[r,o];let d=0;for(let p=0;p<r;++p)for(let f=0;f<s[p];++f)l[d*2]=p,l[d*2+1]=f,u[d]=a[d],++d;return[l,u,c]}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uz(t,e){const n=Or("int32",t.length);for(let r=0;r<t.length;++r)n[r]=IA(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cz=Cr((t,e)=>t-e),o1e=DI((t,e,n,r)=>({real:t-n,imag:e-r})),UI=Hr(kg,cz,o1e),s1e={kernelName:kg,backendName:"cpu",kernelFunc:UI};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dz(t,e){const n=new Array(t.rank);for(let a=0;a<n.length;a++)n[a]=t.shape[a]*e[a];const r=Tt(n,t.dtype);for(let a=0;a<r.values.length;++a){const i=r.indexToLoc(a),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const s=t.locToIndex(o);r.values[a]=t.values[s]}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r0=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function pz(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const s=r-n+1,l=e-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(s-c)/s)*Math.sign(l-s/2),p=Math.max(n,Math.floor(e-l*c/s+d)),f=Math.min(r,Math.floor(e+(s-l)*c/s+d));pz(t,e,p,f)}const a=t[e];let i=n,o=r;for(fl(t,n,e),r0(t[r],a)>0&&fl(t,n,r);i<o;){for(fl(t,i,o),i++,o--;r0(t[i],a)<0;)i=i+1;for(;r0(t[o],a)>0;)o=o-1}r0(t[n],a)===0?fl(t,n,o):(o=o+1,fl(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function hz(t,e,n,r,a){const i=e[e.length-1],[o,s]=[t.length/i,i],l=$r(n,o*r),u=$r("int32",o*r);for(let d=0;d<o;d++){const p=d*s,f=t.subarray(p,p+s);let g=new Array(f.length);f.forEach((x,w)=>g[w]={value:x,index:w}),r<g.length&&(pz(g,r),g=g.slice(0,r)),a&&g.sort(r0);const y=d*r,v=l.subarray(y,y+r),b=u.subarray(y,y+r);for(let x=0;x<r;x++)v[x]=g[x].value,b[x]=g[x].index}const c=e.slice();return c[c.length-1]=r,[Tt(c,n,l),Tt(c,"int32",u)]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fz(t,e,n,r){const a=Jt(e,n)[0],i=[1,n[0],1];for(let g=0;g<a;g++)i[0]*=n[g];i[1]=n[a];for(let g=a+1;g<n.length;g++)i[2]*=n[g];const o={},s=new Int32Array(n[a]),l=new Mr(i,r,t),u=[],c=i[0]===1&&i[2]===1;for(let g=0;g<n[a];g++){let y;if(c)y=t[g].toString();else{const v=[];for(let b=0;b<i[0];b++)for(let x=0;x<i[2];x++)v.push(l.get(b,g,x));y=v.join(",")}if(o[y]!==void 0)s[g]=o[y];else{const v=Object.keys(o).length;o[y]=v,s[g]=v,u.push(g)}}const d=i.slice();d[1]=Object.keys(o).length;const p=new Mr(d,r);u.forEach((g,y)=>{for(let v=0;v<i[0];v++)for(let b=0;b<i[2];b++)p.set(l.get(v,g,b),v,y,b)});const f=n.slice();return f[a]=d[1],{outputValues:p.values,outputShape:f,indices:s}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const l1e=Object.freeze(Object.defineProperty({__proto__:null,addImpl:C7,bincountImpl:LI,bincountReduceImpl:E7,castImpl:S7,ceilImpl:N7,concatImpl:T7,equalImpl:I7,expImpl:R7,expm1Impl:O7,floorImpl:M7,gatherNdImpl:P7,gatherV2Impl:F7,greaterEqualImpl:D7,greaterImpl:A7,lessEqualImpl:z7,lessImpl:L7,linSpaceImpl:B7,logImpl:j7,maxImpl:U7,maximumImpl:V7,minimumImpl:W7,multiplyImpl:zI,negImpl:G7,notEqualImpl:H7,prodImpl:q7,raggedGatherImpl:X7,raggedTensorToTensorImpl:J7,rangeImpl:Z7,rsqrtImpl:ez,scatterImpl:oh,sigmoidImpl:Q0e,simpleAbsImpl:k7,sliceImpl:nz,sparseFillEmptyRowsImpl:rz,sparseReshapeImpl:az,sparseSegmentReductionImpl:jI,sqrtImpl:Z0e,squaredDifferenceImpl:iz,stridedSliceImpl:oz,stringNGramsImpl:sz,stringSplitImpl:lz,stringToHashBucketFastImpl:uz,subImpl:cz,tileImpl:dz,topKImpl:hz,transposeImpl:BI,uniqueImpl:fz},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/XN("cpu",()=>new Zw,1);/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mz=gn(Dm,t=>t>=0?t:Math.exp(t)-1),u1e={kernelName:Dm,backendName:"cpu",kernelFunc:mz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r;qe([a],"leakyRelu");const o=be(a.shape),s=n.data.get(a.dataId).values,l=$r("float32",o);for(let u=0;u<s.length;u++)l[u]=s[u]<0?i*s[u]:s[u];return n.makeTensorInfo(a.shape,"float32",l)}const c1e={kernelName:xx,backendName:"cpu",kernelFunc:gz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const d1e=Cr((t,e)=>t<0?e*t:t);function yz(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e;qe([r,a],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,[s,l]=d1e(r.shape,a.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",s)}const p1e={kernelName:zx,backendName:"cpu",kernelFunc:yz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const bz=gn(cg,t=>Math.max(0,t)),h1e={kernelName:cg,backendName:"cpu",kernelFunc:bz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vz=gn(dg,t=>Math.min(Math.max(0,t),6)),f1e={kernelName:dg,backendName:"cpu",kernelFunc:vz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cw(t,e,n,r,a){if(n==="linear")return Os({inputs:{x:e},backend:t});if(n==="relu")return bz({inputs:{x:e},backend:t});if(n==="elu")return mz({inputs:{x:e},backend:t});if(n==="relu6")return vz({inputs:{x:e},backend:t});if(n==="prelu")return yz({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return gz({inputs:{x:e},backend:t,attrs:{alpha:a}});if(n==="sigmoid")return tz({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $n(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,o=be(a.shape),s=Z4(i,o),l=be(s);U(o===l,()=>`The new shape (${s}) has ${l} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);const u=n.data.get(a.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}const m1e={kernelName:Gx,backendName:"cpu",kernelFunc:$n};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xz(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:o,transposeB:s}=r;qe([a,i],"matMul");const l=a.shape.length,u=i.shape.length,c=o?a.shape[l-2]:a.shape[l-1],d=s?i.shape[u-1]:i.shape[u-2],p=o?a.shape[l-1]:a.shape[l-2],f=s?i.shape[u-2]:i.shape[u-1],g=a.shape.slice(0,-2),y=i.shape.slice(0,-2),v=be(g),b=be(y),x=Ut(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,f]);U(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${a.shape} and ${i.shape} and transposeA=${o} and transposeB=${s} must match.`);const w=o?[v,c,p]:[v,p,c],S=s?[b,f,d]:[b,d,f],C=$n({inputs:{x:a},backend:n,attrs:{shape:w}}),E=$n({inputs:{x:i},backend:n,attrs:{shape:S}}),R=o?C.shape[1]:C.shape[2],T=o?C.shape[2]:C.shape[1],$=s?E.shape[1]:E.shape[2],P=Math.max(v,b),D=n.data.get(C.dataId).values,B=n.data.get(E.dataId).values,z=rt(C.shape),q=rt(E.shape),[Y,J,H]=o?[z[0],1,z[1]]:[z[0],z[1],1],[L,Q,Z]=s?[1,q[1],q[0]]:[q[1],1,q[0]],te=T*$,oe=Tt([P,T,$],C.dtype),he=oe.values,ae=n.blockSize;for(let de=0;de<P;de++)for(let ke=0;ke<T;ke+=ae)for(let X=0;X<$;X+=ae)for(let se=0;se<R;se+=ae){const pe=Math.min(ke+ae,T),Ne=Math.min(X+ae,$),Se=Math.min(se+ae,R);for(let Te=ke;Te<pe;Te++)for(let Pe=X;Pe<Ne;Pe++){let We=0;for(let $e=se;$e<Se;$e++){const lt=Math.min(de,v-1)*Y,Je=Math.min(de,b-1)*Z,Ze=D[lt+Te*J+$e*H],Ve=B[$e*L+Pe*Q+Je];We+=Ze*Ve}he[de*te+(Te*$+Pe)]+=We}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(E),n.makeTensorInfo(x,oe.dtype,oe.values)}const g1e={kernelName:Uv,backendName:"cpu",kernelFunc:xz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y1e(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;let p,f,g;const y=[];p=xz({inputs:{a,b:i},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(f=ah({inputs:{a:p,b:o},backend:n}),y.push(p),p=f),c&&(g=cw(n,p,c,s,d),y.push(p),p=g);for(const v of y)n.disposeIntermediateTensorInfo(v);return p}const b1e={kernelName:Tg,backendName:"cpu",kernelFunc:y1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const v1e=gn(Cm,t=>Math.acos(t)),x1e={kernelName:Cm,backendName:"cpu",kernelFunc:v1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const w1e=gn(Em,t=>Math.acosh(t)),k1e={kernelName:Em,backendName:"cpu",kernelFunc:w1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function S1e(t){const{inputs:e,backend:n}=t,r=e;qe(e,"addN");const a=r.map(s=>n.data.get(s.dataId).values),i=Tt(r[0].shape,r[0].dtype),o=i.values;for(let s=0;s<r.length;s++){const l=a[s];for(let u=0;u<o.length;u++)o[u]+=l[u]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const C1e={kernelName:Fv,backendName:"cpu",kernelFunc:S1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function E1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;qe(a,"all");const s=Jt(i,a.shape);let l=s;const u=gr(l,a.shape.length);let c=a;u!=null&&(c=li({inputs:{x:a},backend:n,attrs:{perm:u}}),l=yr(l.length,a.shape.length)),ia("all",l,c.shape.length);const[d,p]=aa(c.shape,l),f=be(p),g=ra(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<g.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];w=w&&C}g[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,g);if(o){const b=Pr(d,s),x=$n({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const N1e={kernelName:Av,backendName:"cpu",kernelFunc:E1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function T1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;qe(a,"any");const s=Jt(i,a.shape);let l=s;const u=gr(l,a.shape.length);let c=a;u!=null&&(c=li({inputs:{x:a},backend:n,attrs:{perm:u}}),l=yr(l.length,a.shape.length)),ia("any",l,c.shape.length);const[d,p]=aa(c.shape,l),f=be(p),g=ra(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<g.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];w=w||C}g[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,g);if(o){const b=Pr(d,s),x=$n({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const I1e={kernelName:Dv,backendName:"cpu",kernelFunc:T1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;qe(a,"argMax");let o=Jt(i,a.shape);const s=gr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=li({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=yr(o.length,l.shape.length)),o=[o[0]],ia("argMax",o,l.shape.length);const[c,d]=aa(l.shape,o),p=be(c),f=ra(p,"int32"),g=be(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const b=v*g;let x=y[b],w=0;for(let S=0;S<g;++S){const C=y[b+S];C>x&&(x=C,w=S)}f[v]=w}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",f)}const R1e={kernelName:Lv,backendName:"cpu",kernelFunc:_1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;qe(a,"argMin");let o=Jt(i,a.shape);const s=gr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=li({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=yr(o.length,l.shape.length)),o=[o[0]],ia("argMin",o,l.shape.length);const[c,d]=aa(l.shape,o),p=be(c),f=ra(p,"int32"),g=be(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const b=v*g;let x=y[b],w=0;for(let S=0;S<g;++S){const C=y[b+S];C<x&&(x=C,w=S)}f[v]=w}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",f)}const O1e={kernelName:zv,backendName:"cpu",kernelFunc:$1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const M1e=gn(Nm,t=>Math.asin(t)),P1e={kernelName:Nm,backendName:"cpu",kernelFunc:M1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const F1e=gn(Tm,t=>Math.asinh(t)),A1e={kernelName:Tm,backendName:"cpu",kernelFunc:F1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const D1e=gn(Im,t=>Math.atan(t)),L1e={kernelName:Im,backendName:"cpu",kernelFunc:D1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const z1e=Cr((t,e)=>Math.atan2(t,e)),B1e=Hr(Rm,z1e),j1e={kernelName:Rm,backendName:"cpu",kernelFunc:B1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const U1e=gn(_m,t=>Math.atanh(t)),V1e={kernelName:_m,backendName:"cpu",kernelFunc:U1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function VI(t,e,n,r,a,i){const o=a.strideHeight,s=a.strideWidth,l=a.dilationHeight,u=a.dilationWidth,c=a.effectiveFilterHeight,d=a.effectiveFilterWidth,p=a.padInfo.top,f=a.padInfo.left,g=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=Tt(a.outShape,n),v=y.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],x=a.outShape[2]*a.outShape[3],w=a.outShape[3];for(let S=0;S<a.batchSize;++S){const C=S*b,E=S*r[0];for(let R=0;R<a.inChannels;++R)for(let T=0;T<a.outHeight;++T){const $=T*o-p,P=Math.max(0,$),D=Math.min(a.inHeight,c+$),B=C+T*x;for(let z=0;z<a.outWidth;++z){const q=z*s-f,Y=Math.max(0,q),J=Math.min(a.inWidth,d+q);let H=g,L=0,Q=0;for(let te=P;te<D;te+=l){const oe=E+te*r[1];for(let he=Y;he<J;he+=u){const ae=oe+he*r[2],de=t[ae+R];i==="max"&&de>H?H=de:i==="avg"&&(L+=de,Q++)}if(isNaN(H))break}const Z=B+z*w+R;v[Z]=i==="avg"?L/Q:H}}}return y}function wz(t,e,n,r,a=!1,i=!1){const o=Tt(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=r.padInfo.top,g=r.padInfo.left,y=Tt(e,n,t);for(let v=0;v<r.batchSize;++v)for(let b=0;b<r.inChannels;++b)for(let x=0;x<r.outHeight;++x){const w=x*s-f;let S=w;for(;S<0;)S+=u;const C=Math.min(r.inHeight,d+w);for(let E=0;E<r.outWidth;++E){const R=E*l-g;let T=R;for(;T<0;)T+=c;const $=Math.min(r.inWidth,p+R);let P=Number.NEGATIVE_INFINITY,D=-1;for(let B=S;B<C;B+=u){const z=B-w;for(let q=T;q<$;q+=c){const Y=q-R,J=y.get(v,B,q,b);J>P&&(P=J,a?D=i?((v*r.inHeight+B)*r.inWidth+q)*r.inChannels+b:(B*r.inWidth+q)*r.inChannels+b:D=z*p+Y)}}o.set(D,v,x,E,b)}}return o}function kz(t,e,n,r,a,i){const o=a.strideDepth,s=a.strideHeight,l=a.strideWidth,u=a.dilationDepth,c=a.dilationHeight,d=a.dilationWidth,p=a.effectiveFilterDepth,f=a.effectiveFilterHeight,g=a.effectiveFilterWidth,y=a.padInfo.front,v=a.padInfo.top,b=a.padInfo.left,x=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=Tt(a.outShape,n),S=w.values,C=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],E=a.outShape[2]*a.outShape[3]*a.outShape[4],R=a.outShape[3]*a.outShape[4],T=a.outShape[4];for(let $=0;$<a.batchSize;++$){const P=$*C,D=$*r[0];for(let B=0;B<a.inChannels;++B)for(let z=0;z<a.outDepth;++z){const q=z*o-y;let Y=q;for(;Y<0;)Y+=u;const J=Math.min(a.inDepth,p+q),H=P+z*E;for(let L=0;L<a.outHeight;++L){const Q=L*s-v;let Z=Q;for(;Z<0;)Z+=c;const te=Math.min(a.inHeight,f+Q),oe=H+L*R;for(let he=0;he<a.outWidth;++he){const ae=he*l-b;let de=ae;for(;de<0;)de+=d;const ke=Math.min(a.inWidth,g+ae),X=oe+he*T;let se=x,pe=0,Ne=0;for(let Te=Y;Te<J;Te+=u){const Pe=D+Te*r[1];for(let We=Z;We<te;We+=c){const $e=Pe+We*r[2];for(let lt=de;lt<ke;lt+=d){const Je=$e+lt*r[3],Ze=t[Je+B];if(i==="max"&&Ze>se?se=Ze:i==="avg"&&(pe+=Ze,Ne++),isNaN(se))break}if(isNaN(se))break}if(isNaN(se))break}const Se=X+B;S[Se]=i==="avg"?pe/Ne:se}}}}return w}function W1e(t,e){const n=Tt(e.outShape,"int32"),r=e.strideDepth,a=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.front,f=e.padInfo.top,g=e.padInfo.left;for(let y=0;y<e.batchSize;++y)for(let v=0;v<e.inChannels;++v)for(let b=0;b<e.outDepth;++b){const x=b*r-p;let w=x;for(;w<0;)w+=o;const S=Math.min(e.inDepth,u+x);for(let C=0;C<e.outHeight;++C){const E=C*a-f;let R=E;for(;R<0;)R+=s;const T=Math.min(e.inHeight,c+E);for(let $=0;$<e.outWidth;++$){const P=$*i-g;let D=P;for(;D<0;)D+=l;const B=Math.min(e.inWidth,d+P);let z=Number.NEGATIVE_INFINITY,q=-1;for(let Y=w;Y<S;Y+=o){const J=Y-x;for(let H=R;H<T;H+=s){const L=H-E;for(let Q=D;Q<B;Q+=l){const Z=Q-P,te=t.get(y,Y,H,Q,v);te>=z&&(z=te,q=J*c*d+L*c+Z)}}}n.set(q,y,b,C,$,v)}}}return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function G1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;qe(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;U(Ca(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=fo(a.shape,i,o,u,s,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Sn(c.inShape,c.outShape))d=Os({inputs:{x:a},backend:n});else{const p=n.data.get(a.dataId).values,f=rt(a.shape),g=VI(p,a.shape,a.dtype,f,c,"avg");d=n.makeTensorInfo(c.outShape,a.dtype,g.values)}return d}const H1e={kernelName:Bv,backendName:"cpu",kernelFunc:G1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function q1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;qe(a,"avgPool3d");const c=Sl(a.shape,i,o,1,s,l,u),d=n.data.get(a.dataId).values,p=kz(d,a.shape,a.dtype,rt(a.shape),c,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const K1e={kernelName:jv,backendName:"cpu",kernelFunc:q1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function X1e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;qe([a,i],"avgPool3DGrad");const c=Sl(i.shape,o,s,1,l,u),d=c.strideDepth,p=c.strideHeight,f=c.strideWidth,g=c.filterDepth,y=c.filterHeight,v=c.filterWidth,b=c.dilationDepth,x=c.dilationHeight,w=c.dilationWidth,S=c.effectiveFilterDepth,C=c.effectiveFilterHeight,E=c.effectiveFilterWidth,R=S-1-c.padInfo.front,T=E-1-c.padInfo.left,$=C-1-c.padInfo.top,P=Tt(i.shape,"float32"),D=1/(g*y*v),B=n.bufferSync(a);for(let z=0;z<c.batchSize;++z)for(let q=0;q<c.inChannels;++q)for(let Y=0;Y<c.inDepth;++Y)for(let J=0;J<c.inHeight;++J)for(let H=0;H<c.inWidth;++H){const L=Y-R,Q=J-$,Z=H-T;let te=0;for(let oe=0;oe<S;oe+=b){const he=(L+oe)/d;if(!(he<0||he>=c.outDepth||Math.floor(he)!==he))for(let ae=0;ae<C;ae+=x){const de=(Q+ae)/p;if(!(de<0||de>=c.outHeight||Math.floor(de)!==de))for(let ke=0;ke<E;ke+=w){const X=(Z+ke)/f;if(X<0||X>=c.outWidth||Math.floor(X)!==X)continue;const se=B.get(z,he,de,X,q);te+=se}}}P.set(te*D,z,Y,J,H,q)}return n.makeTensorInfo(P.shape,P.dtype,P.values)}const Q1e={kernelName:sN,backendName:"cpu",kernelFunc:X1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Y1e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i;qe([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=fo(o.shape,s,l,1,u),d=c.strideHeight,p=c.strideWidth,f=c.filterHeight,g=c.filterWidth,y=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=x-1-c.padInfo.left,S=b-1-c.padInfo.top,C=Tt(o.shape,"float32"),E=1/(f*g),R=n.data.get(a.dataId).values,T=Tt(a.shape,"float32",R);for(let $=0;$<c.batchSize;++$)for(let P=0;P<c.inChannels;++P)for(let D=0;D<c.inHeight;++D)for(let B=0;B<c.inWidth;++B){const z=D-S,q=B-w;let Y=0;for(let J=0;J<b;J+=y){const H=(z+J)/d;if(!(H<0||H>=c.outHeight||Math.floor(H)!==H))for(let L=0;L<x;L+=v){const Q=(q+L)/p;if(Q<0||Q>=c.outWidth||Math.floor(Q)!==Q)continue;const Z=T.get($,H,Q,P);Y+=Z}}C.set(Y*E,$,D,B,P)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const J1e={kernelName:oN,backendName:"cpu",kernelFunc:Y1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Z1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,scale:i,offset:o,mean:s,variance:l}=e;U(s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),qe([a,s,l,i,o],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,p=n.data.get(l.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),g=o?n.data.get(o.dataId).values:new Float32Array([0]),y=new Float32Array(c.length),v=g.length,b=f.length,x=p.length,w=d.length;let S=0,C=0,E=0,R=0;for(let T=0;T<c.length;++T)y[T]=g[S++]+(c[T]-d[C++])*f[E++]/Math.sqrt(p[R++]+u),S>=v&&(S=0),C>=w&&(C=0),E>=b&&(E=0),R>=x&&(R=0);return n.makeTensorInfo(a.shape,a.dtype,y)}const eye={kernelName:mx,backendName:"cpu",kernelFunc:Z1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:o}=r;qe([a],"batchToSpaceND");const s=i.reduce((b,x)=>b*x),l=Zg(a.shape,i,s),u=e0(l.length,i.length),c=t0(a.shape,i,s),d=nI(o,i.length),p=rI(c,o,i.length),f=$n({inputs:{x:a},backend:n,attrs:{shape:l}}),g=li({inputs:{x:f},backend:n,attrs:{perm:u}}),y=$n({inputs:{x:g},backend:n,attrs:{shape:c}}),v=cd({inputs:{x:y},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}const nye={kernelName:Vv,backendName:"cpu",kernelFunc:tye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o}=r,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=LI(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const aye={kernelName:Wv,backendName:"cpu",kernelFunc:rye};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function iye(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=Ut(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const oye={kernelName:Gv,backendName:"cpu",kernelFunc:iye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sye=gn(Mm,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),lye={kernelName:Mm,backendName:"cpu",kernelFunc:sye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const uye=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(be(e.shape)),a=n.data.get(e.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<s.length;u++){const c=s[u],d=l[u];r[u]=Math.hypot(c,d)}return n.makeOutput(r,e.shape,"float32")},cye={kernelName:qv,backendName:"cpu",kernelFunc:uye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sh(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const dye={kernelName:vx,backendName:"cpu",kernelFunc:sh};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lh(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=Jt(a,e[0].shape)[0],o=e.map(y=>y.shape);ZT(o,i);let s=Rs(e.map(y=>y.shape),i);if(be(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(y=>be(y.shape)>0);if(l.length===1)return Os({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const y=l.map(S=>ud({inputs:{input:S},backend:n})),v=l.map(S=>sh({inputs:{input:S},backend:n})),b=lh({inputs:y,backend:n,attrs:{axis:i}}),x=lh({inputs:v,backend:n,attrs:{axis:i}}),w=Ti({inputs:{real:b,imag:x},backend:n});return y.forEach(S=>n.disposeIntermediateTensorInfo(S)),v.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),w}const u=l.map(y=>{const v=[-1,be(y.shape.slice(i))];return $n({inputs:{x:y},backend:n,attrs:{shape:v}})}),c=u.map(y=>({vals:n.data.get(y.dataId).values,shape:y.shape}));s=Rs(u.map(y=>y.shape),1);const d=u[0].shape[0]===1,p=T7(c,s,e[0].dtype,d),f=Rs(l.map(y=>y.shape),i),g=n.makeTensorInfo(f,e[0].dtype,p);return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const pye={kernelName:Kv,backendName:"cpu",kernelFunc:lh};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r;qe([a,i],"conv2d");const d=Cl(l),p=Gr(a.shape,i.shape,o,u,s,c,!1,d),f=p.filterHeight,g=p.filterWidth,y=p.dilationHeight,v=p.dilationWidth,b=p.padInfo.left,x=p.padInfo.top,w=p.dataFormat==="channelsLast",S=new Mr(p.outShape,a.dtype),C=rt(a.shape),E=rt(i.shape),R=C[0],T=w?C[1]:C[2],$=w?C[2]:1,P=w?1:C[1],D=S.strides[0],B=w?S.strides[1]:S.strides[2],z=w?S.strides[2]:1,q=w?1:S.strides[1],Y=n.data.get(a.dataId).values,J=n.data.get(i.dataId).values,H=S.values;for(let L=0;L<p.batchSize;++L){const Q=L*R,Z=L*D;for(let te=0;te<p.outHeight;++te){const oe=Z+te*B,he=te*p.strideHeight-x;for(let ae=0;ae<f;++ae){const de=he+ae*y;if(de<0||de>=p.inHeight)continue;const ke=ae*E[0],X=Q+de*T;for(let se=0;se<p.outWidth;++se){const pe=oe+se*z,Ne=se*p.strideWidth-b;for(let Se=0;Se<g;++Se){const Te=Ne+Se*v;if(Te<0||Te>=p.inWidth)continue;const Pe=ke+Se*E[1],We=X+Te*$;let $e=Pe;for(let lt=0;lt<p.inChannels;++lt){const Je=Y[We+lt*P];for(let Ze=0;Ze<p.outChannels;++Ze)H[pe+Ze*q]+=Je*J[$e+Ze];$e+=p.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,H)}const hye={kernelName:Xv,backendName:"cpu",kernelFunc:Sz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;qe([a,i],"conv2dBackpropFilter");const d=Cl(l),p=Gr(a.shape,c,o,1,s,u,!1,d),{strideHeight:f,strideWidth:g,filterHeight:y,filterWidth:v}=p,b=p.dataFormat==="channelsLast",x=new Mr(p.filterShape,"float32"),w=p.padInfo.left,S=p.padInfo.top,C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,R=new Mr(a.shape,a.dtype,C),T=new Mr(i.shape,i.dtype,E);for(let $=0;$<y;++$){const P=Math.max(0,Math.ceil((S-$)/f)),D=Math.min(p.outHeight,(p.inHeight+S-$)/f);for(let B=0;B<v;++B){const z=Math.max(0,Math.ceil((w-B)/g)),q=Math.min(p.outWidth,(p.inWidth+w-B)/g);for(let Y=0;Y<p.inChannels;++Y)for(let J=0;J<p.outChannels;++J){let H=0;for(let L=0;L<p.batchSize;++L)for(let Q=P;Q<D;++Q){const Z=$+Q*f-S;for(let te=z;te<q;++te){const oe=B+te*g-w;b?H+=R.get(L,Z,oe,Y)*T.get(L,Q,te,J):H+=R.get(L,Y,Z,oe)*T.get(L,J,Q,te)}}x.set(H,$,B,Y,J)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const mye={kernelName:Qv,backendName:"cpu",kernelFunc:fye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gye(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r;qe([a,i],"conv2dBackpropInput");const d=rt(i.shape),p=rt(a.shape);let f=Cl(u);const g=Gr(o,i.shape,s,1,l,c,!1,f),y=new Mr(g.inShape,"float32"),v=y.values,b=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,[w,S,C]=d,{batchSize:E,filterHeight:R,filterWidth:T,inChannels:$,inHeight:P,inWidth:D,outChannels:B,outHeight:z,outWidth:q,strideHeight:Y,strideWidth:J}=g;f=g.dataFormat;const H=R-1-g.padInfo.top,L=T-1-g.padInfo.left,Q=f==="channelsLast",Z=y.strides[0],te=Q?y.strides[1]:y.strides[2],oe=Q?y.strides[2]:1,he=Q?1:y.strides[1],ae=p[0],de=Q?p[1]:p[2],ke=Q?p[2]:1,X=Q?1:p[1];for(let se=0;se<E;++se)for(let pe=0;pe<$;++pe)for(let Ne=0;Ne<P;++Ne){const Se=Ne-H,Te=Math.max(0,Math.ceil(Se/Y)),Pe=Math.min(z,(R+Se)/Y);for(let We=0;We<D;++We){const $e=We-L,lt=Math.max(0,Math.ceil($e/J)),Je=Math.min(q,(T+$e)/J);let Ze=0;for(let Vt=Te;Vt<Pe;++Vt){const $t=Vt*Y-Se;for(let Wt=lt;Wt<Je;++Wt){const Gt=Wt*J-$e,Ot=ae*se+de*Vt+ke*Wt,wt=w*(R-1-$t)+S*(T-1-Gt)+C*pe;for(let ln=0;ln<B;++ln){const hn=b[Ot+X*ln],br=x[wt+ln];Ze+=hn*br}}}const Ve=Z*se+te*Ne+oe*We+he*pe;v[Ve]=Ze}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const yye={kernelName:Yv,backendName:"cpu",kernelFunc:gye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r;qe([a,i],"conv3d");const u=$u(a.shape,i.shape,o,l,s),{filterDepth:c,filterHeight:d,filterWidth:p,dilationDepth:f,dilationHeight:g,dilationWidth:y,padInfo:v}=u,b=v.front,x=v.left,w=v.top,S=new Mr(u.outShape,a.dtype),C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,R=S.values,T=rt(a.shape),$=rt(i.shape);for(let P=0;P<u.batchSize;++P){const D=P*T[0],B=P*S.strides[0];for(let z=0;z<u.outDepth;++z){const q=B+z*S.strides[1],Y=z*u.strideDepth-b;for(let J=0;J<c;++J){const H=Y+J*f;if(H<0||H>=u.inDepth)continue;const L=J*$[0],Q=D+H*T[1];for(let Z=0;Z<u.outHeight;++Z){const te=q+Z*S.strides[2],oe=Z*u.strideHeight-w;for(let he=0;he<d;++he){const ae=oe+he*g;if(ae<0||ae>=u.inHeight)continue;const de=L+he*$[1],ke=Q+ae*T[2];for(let X=0;X<u.outWidth;++X){const se=te+X*u.outChannels,pe=X*u.strideWidth-x;for(let Ne=0;Ne<p;++Ne){const Se=pe+Ne*y;if(Se<0||Se>=u.inWidth)continue;const Te=de+Ne*$[2],Pe=ke+Se*u.inChannels;let We=Te;for(let $e=0;$e<u.inChannels;++$e){const lt=C[Pe+$e];for(let Je=0;Je<u.outChannels;++Je)R[se+Je]+=lt*E[We+Je];We+=u.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const vye={kernelName:Jv,backendName:"cpu",kernelFunc:bye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,filterShape:l}=r;qe([a,i],"conv3dBackpropFilterV2");const u=rt(a.shape),c=rt(i.shape),d=$u(a.shape,l,o,1,s),p=d.strideDepth,f=d.strideHeight,g=d.strideWidth,y=d.filterDepth,v=d.filterHeight,b=d.filterWidth,x=new Mr(d.filterShape,"float32"),w=x.values,[S,C,E,R]=x.strides,T=n.data.get(i.dataId).values,[$,P,D,B]=c,z=n.data.get(a.dataId).values,[q,Y,J,H]=u,L=d.padInfo.front,Q=d.padInfo.left,Z=d.padInfo.top;for(let te=0;te<y;++te){const oe=Math.max(0,Math.ceil((L-te)/p)),he=Math.min(d.outDepth,(d.inDepth+L-te)/p),ae=te*S;for(let de=0;de<v;++de){const ke=Math.max(0,Math.ceil((Z-de)/f)),X=Math.min(d.outHeight,(d.inHeight+Z-de)/f),se=de*C+ae;for(let pe=0;pe<b;++pe){const Ne=Math.max(0,Math.ceil((Q-pe)/g)),Se=Math.min(d.outWidth,(d.inWidth+Q-pe)/g),Te=pe*E+se;for(let Pe=0;Pe<d.inChannels;++Pe){const We=Pe*R+Te;for(let $e=0;$e<d.outChannels;++$e){let lt=0;for(let Je=0;Je<d.batchSize;++Je){const Ze=Je*q,Ve=Je*$;for(let Vt=oe;Vt<he;++Vt){const $t=(te+Vt*p-L)*Y+Ze,Wt=Vt*P+Ve;for(let Gt=ke;Gt<X;++Gt){const Ot=(de+Gt*f-Z)*J+$t,wt=Gt*D+Wt;for(let ln=Ne;ln<Se;++ln){const hn=(pe+ln*g-Q)*H+Ot,br=ln*B+wt;lt+=z[hn+Pe]*T[br+$e]}}}}w[We+$e]=lt}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const wye={kernelName:lN,backendName:"cpu",kernelFunc:xye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kye(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:o,strides:s,inputShape:l}=r;qe([a],"conv3dBackpropInputV2");const u=rt(a.shape),c=rt(i.shape),d=$u(l,i.shape,s,1,o),p=new Mr(d.inShape,"float32"),f=p.values,[g,y,v,b]=p.strides,x=n.data.get(a.dataId).values,[w,S,C,E]=u,R=n.data.get(i.dataId).values,[T,$,P,D]=c,{batchSize:B,filterDepth:z,filterHeight:q,filterWidth:Y,inChannels:J,inDepth:H,inHeight:L,inWidth:Q,outChannels:Z,outDepth:te,outHeight:oe,outWidth:he,strideDepth:ae,strideHeight:de,strideWidth:ke}=d,X=z-1-d.padInfo.front,se=q-1-d.padInfo.top,pe=Y-1-d.padInfo.left;for(let Ne=0;Ne<B;++Ne)for(let Se=0;Se<J;++Se)for(let Te=0;Te<H;++Te){const Pe=Te-X,We=Math.max(0,Math.ceil(Pe/ae)),$e=Math.min(te,(z+Pe)/ae);for(let lt=0;lt<L;++lt){const Je=lt-se,Ze=Math.max(0,Math.ceil(Je/de)),Ve=Math.min(oe,(q+Je)/de);for(let Vt=0;Vt<Q;++Vt){const $t=Vt-pe,Wt=Math.max(0,Math.ceil($t/ke)),Gt=Math.min(he,(Y+$t)/ke);let Ot=0;for(let wt=We;wt<$e;++wt){const ln=wt*ae-Pe;for(let hn=Ze;hn<Ve;++hn){const br=hn*de-Je;for(let yn=Wt;yn<Gt;++yn){const Jn=yn*ke-$t,ui=w*Ne+S*wt+C*hn+E*yn,Qa=T*(z-1-ln)+$*(q-1-br)+P*(Y-1-Jn)+D*Se;for(let un=0;un<Z;++un){const la=x[ui+un],Ya=R[Qa+un];Ot+=la*Ya}}}}f[g*Ne+y*Te+v*lt+b*Vt+Se]=Ot}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const Sye={kernelName:Zv,backendName:"cpu",kernelFunc:kye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Cye=gn(Pm,t=>Math.cos(t)),Eye={kernelName:Pm,backendName:"cpu",kernelFunc:Cye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Nye=gn(Fm,t=>Math.cosh(t)),Tye={kernelName:Fm,backendName:"cpu",kernelFunc:Nye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Iye(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,[c,d,p,f]=a.shape,g=i.shape[0],[y,v]=s,b=Tt([g,y,v,f],"float32"),x=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,S=n.data.get(a.dataId).values,C=rt(a.shape),E=rt(b.shape);for(let R=0;R<g;R++){const T=R*4,$=x[T],P=x[T+1],D=x[T+2],B=x[T+3],z=w[R];if(z>=c)continue;const q=y>1?(D-$)*(d-1)/(y-1):0,Y=v>1?(B-P)*(p-1)/(v-1):0;for(let J=0;J<y;J++){const H=y>1?$*(d-1)+J*q:.5*($+D)*(d-1);if(H<0||H>d-1){for(let L=0;L<v;L++)for(let Q=0;Q<f;Q++){const Z=Q+L*E[2]+J*E[1]+R*E[0];b.values[Z]=u}continue}if(l==="bilinear"){const L=Math.floor(H),Q=Math.ceil(H),Z=H-L;for(let te=0;te<v;te++){const oe=v>1?P*(p-1)+te*Y:.5*(P+B)*(p-1);if(oe<0||oe>p-1){for(let ke=0;ke<f;ke++){const X=ke+te*E[2]+J*E[1]+R*E[0];b.values[X]=u}continue}const he=Math.floor(oe),ae=Math.ceil(oe),de=oe-he;for(let ke=0;ke<f;ke++){let X=ke+he*C[2]+L*C[1]+z*C[0];const se=S[X];X=ke+ae*C[2]+L*C[1]+z*C[0];const pe=S[X];X=ke+he*C[2]+Q*C[1]+z*C[0];const Ne=S[X];X=ke+ae*C[2]+Q*C[1]+z*C[0];const Se=S[X],Te=se+(pe-se)*de,Pe=Ne+(Se-Ne)*de;X=ke+te*E[2]+J*E[1]+R*E[0],b.values[X]=Te+(Pe-Te)*Z}}}else for(let L=0;L<v;++L){const Q=v>1?P*(p-1)+L*Y:.5*(P+B)*(p-1);if(Q<0||Q>p-1){for(let oe=0;oe<f;oe++){const he=oe+L*E[2]+J*E[1]+R*E[0];b.values[he]=u}continue}const Z=Math.round(Q),te=Math.round(H);for(let oe=0;oe<f;oe++){const he=oe+Z*C[2]+te*C[1]+z*C[0],ae=oe+L*E[2]+J*E[1]+R*E[0];b.values[ae]=S[he]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const _ye={kernelName:nx,backendName:"cpu",kernelFunc:Iye};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;qe(a,"cumprod");const l=gr([i],a.shape.length);let u=a;l!=null&&(u=li({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=yr(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=si(u.dtype,"int32"),p=Mv(be(u.shape),d),f=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],y=s?(b,x)=>b+g-x-1:(b,x)=>b+x;for(let b=0;b<f.length;b+=g)for(let x=0;x<g;x++){const w=y(b,x);if(x===0)p[w]=o?1:f[w];else{const S=y(b,x-1);p[w]=o?f[S]*p[S]:f[w]*p[S]}}const v=n.makeTensorInfo(u.shape,d,p);if(l!=null){const b=Wg(l),x=li({inputs:{x:v},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const $ye={kernelName:ex,backendName:"cpu",kernelFunc:Rye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Oye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;qe(a,"cumsum");const l=gr([i],a.shape.length);let u=a;l!=null&&(u=li({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=yr(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=si(u.dtype,"int32"),p=ra(be(u.shape),d),f=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],y=s?(b,x)=>b+g-x-1:(b,x)=>b+x;for(let b=0;b<f.length;b+=g)for(let x=0;x<g;x++){const w=y(b,x);if(x===0)p[w]=o?0:f[w];else{const S=y(b,x-1);p[w]=o?f[S]+p[S]:f[w]+p[S]}}const v=n.makeTensorInfo(u.shape,d,p);if(l!=null){const b=Wg(l),x=li({inputs:{x:v},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const Mye={kernelName:tx,backendName:"cpu",kernelFunc:Oye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o,binaryOutput:s}=r;if(a.shape.length===1){const l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=LI(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){const l=n.bufferSync(a),u=n.bufferSync(i),c=E7(l,u,o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const Fye={kernelName:rx,backendName:"cpu",kernelFunc:Pye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Aye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:o}=r;U(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const s=a.shape[0],l=a.shape[1],u=a.shape[2],c=a.shape[3],d=l*i,p=u*i,f=c/(i*i),g=n.data.get(a.dataId).values,y=new Float32Array(s*d*p*f);let v=0;for(let b=0;b<s;++b)for(let x=0;x<d;++x){const w=Math.floor(x/i),S=x%i;for(let C=0;C<p;++C){const E=Math.floor(C/i),R=C%i,T=(S*i+R)*f;for(let $=0;$<f;++$){const P=$+T+c*(E+u*(w+l*b));y[v++]=g[P]}}}return n.makeTensorInfo([s,d,p,f],a.dtype,y)}const Dye={kernelName:ax,backendName:"cpu",kernelFunc:Aye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;qe([a,i],"depthwiseConv2DNative");const c=rt(a.shape),d=rt(i.shape);let p=l;p==null&&(p=[1,1]),U(Ca(o,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${p}'`);const f=Gr(a.shape,i.shape,o,p,s,u,!0),{filterHeight:g,filterWidth:y,dilationHeight:v,dilationWidth:b,padInfo:x}=f,w=x.left,S=x.top,C=f.outChannels/f.inChannels,E=new Mr(f.outShape,a.dtype),R=n.data.get(a.dataId).values,T=n.data.get(i.dataId).values,$=E.values;for(let P=0;P<f.batchSize;++P){const D=P*c[0],B=P*E.strides[0];for(let z=0;z<f.outHeight;++z){const q=B+z*E.strides[1],Y=z*f.strideHeight-S;for(let J=0;J<g;++J){const H=Y+J*v;if(H<0||H>=f.inHeight)continue;const L=J*d[0],Q=D+H*c[1];for(let Z=0;Z<f.outWidth;++Z){const te=q+Z*E.strides[2],oe=Z*f.strideWidth-w;for(let he=0;he<y;++he){const ae=oe+he*b;if(ae<0||ae>=f.inWidth)continue;const de=L+he*d[1],ke=Q+ae*f.inChannels;let X=te,se=de;for(let pe=0;pe<f.inChannels;++pe){const Ne=R[ke+pe];for(let Se=0;Se<C;++Se)$[X+Se]+=Ne*T[se+Se];X+=C,se+=C}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const Lye={kernelName:ix,backendName:"cpu",kernelFunc:Cz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r;qe([a,i],"depthwiseConv2dNativeBackpropFilter");const d=Gr(a.shape,c,o,s,l,u,!0),{strideHeight:p,strideWidth:f,filterHeight:g,filterWidth:y}=d,v=new Mr(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=d.outChannels/d.inChannels,S=n.data.get(a.dataId).values,C=new Mr(a.shape,a.dtype,S),E=n.data.get(i.dataId).values,R=new Mr(i.shape,i.dtype,E);for(let T=0;T<g;++T){const $=Math.max(0,Math.ceil((x-T)/p)),P=Math.min(d.outHeight,(d.inHeight+x-T)/p);for(let D=0;D<y;++D){const B=Math.max(0,Math.ceil((b-D)/f)),z=Math.min(d.outWidth,(d.inWidth+b-D)/f);for(let q=0;q<d.outChannels;++q){const Y=Math.trunc(q/w),J=q%w;let H=0;for(let L=0;L<d.batchSize;++L)for(let Q=$;Q<P;++Q){const Z=T+Q*p-x;for(let te=B;te<z;++te){const oe=D+te*f-b;H+=C.get(L,Z,oe,Y)*R.get(L,Q,te,q)}}v.set(H,T,D,Y,J)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const Bye={kernelName:ox,backendName:"cpu",kernelFunc:zye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jye(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r;qe([a,i],"depthwiseConv2DNativeBackpropInput");const d=rt(a.shape),p=rt(i.shape),f=Gr(c,i.shape,o,s,l,u,!0),g=new Mr(f.inShape,"float32"),y=g.values,[v,b,x]=g.strides,w=n.data.get(a.dataId).values,[S,C,E]=d,R=n.data.get(i.dataId).values,[T,$,P]=p,{batchSize:D,filterHeight:B,filterWidth:z,inChannels:q,inHeight:Y,inWidth:J,outChannels:H,outHeight:L,outWidth:Q,strideHeight:Z,strideWidth:te}=f,oe=B-1-f.padInfo.top,he=z-1-f.padInfo.left,ae=H/q;for(let de=0;de<D;++de)for(let ke=0;ke<q;++ke)for(let X=0;X<Y;++X){const se=X-oe,pe=Math.max(0,Math.ceil(se/Z)),Ne=Math.min(L,(B+se)/Z);for(let Se=0;Se<J;++Se){const Te=Se-he,Pe=Math.max(0,Math.ceil(Te/te)),We=Math.min(Q,(z+Te)/te);let $e=0;for(let lt=pe;lt<Ne;++lt){const Je=lt*Z-se;for(let Ze=Pe;Ze<We;++Ze){const Ve=Ze*te-Te,Vt=S*de+C*lt+E*Ze,$t=T*(B-1-Je)+$*(z-1-Ve)+P*ke;for(let Wt=0;Wt<ae;++Wt){const Gt=ke*ae+Wt,Ot=w[Vt+Gt],wt=R[$t+Wt];$e+=Ot*wt}}}y[v*de+b*X+x*Se+ke]=$e}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const Uye={kernelName:sx,backendName:"cpu",kernelFunc:jye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vye(t){const{inputs:e,backend:n}=t,{x:r}=e,a=be(r.shape),i=n.data.get(r.dataId).values,o=Tt([a,a],r.dtype),s=o.values;for(let u=0;u<i.length;u++)s[u*a+u]=i[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const Wye={kernelName:lx,backendName:"cpu",kernelFunc:Vye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gye={kernelName:ux,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a}=t,{strides:i,pad:o,dilations:s}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,d=l.data.get(a.dataId).values,p=a.shape.length,{batchSize:f,inHeight:g,inWidth:y,inChannels:v,outHeight:b,outWidth:x,padInfo:w,strideHeight:S,strideWidth:C,filterHeight:E,filterWidth:R,dilationHeight:T,dilationWidth:$,outShape:P}=Bg(r.shape,a.shape,i,o,"NHWC",s),D=be(P),B=P.length,z=Or(r.dtype,D);for(let q=0;q<f;++q)for(let Y=0;Y<b;++Y){const J=Y*S-w.top;for(let H=0;H<x;++H){const L=H*C-w.left;for(let Q=0;Q<v;++Q){let Z=Number.MIN_SAFE_INTEGER;for(let oe=0;oe<E;++oe){const he=J+oe*T;if(he>=0&&he<g)for(let ae=0;ae<R;++ae){const de=L+ae*$;if(de>=0&&de<y){const ke=Ko([q,he,de,Q],c,rt(r.shape)),X=Ko([oe,ae,Q],p,rt(a.shape)),se=u[ke]+d[X];se>Z&&(Z=se)}}}const te=Ko([q,Y,H,Q],B,rt(P));z[te]=Z}}}return{dataId:l.write(Tu(z,r.dtype),P,r.dtype),shape:P,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Hye={kernelName:cN,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=Bi(r.shape,u.data.get(r.dataId).values),d=Bi(a.shape,u.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:R,dilationWidth:T,outShape:$}=Bg(r.shape,a.shape,o,s,"NHWC",l);U(i.rank===$.length,()=>`Error in ${cN}, dy must have the same rank as output ${$.length}, but got ${i.rank}`);const P=Bi($,u.data.get(i.dataId).values),D=tN(a.shape,a.dtype);for(let B=0;B<p;++B)for(let z=0;z<v;++z){const q=z*w-x.top;for(let Y=0;Y<b;++Y){const J=Y*S-x.left;for(let H=0;H<y;++H){let L=Number.MIN_SAFE_INTEGER,Q=0,Z=0;for(let te=0;te<C;++te){const oe=q+te*R;if(oe>=0&&oe<f)for(let he=0;he<E;++he){const ae=J+he*T;if(ae>=0&&ae<g){const de=c[B][oe][ae][H]+d[te][he][H];de>L&&(L=de,Q=te,Z=he)}}}D[Q][Z][H]+=P[B][z][Y][H]}}}return{dataId:u.write(Tu(D,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qye={kernelName:uN,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=Bi(r.shape,u.data.get(r.dataId).values),d=Bi(a.shape,u.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:R,dilationWidth:T,outShape:$}=Bg(r.shape,a.shape,o,s,"NHWC",l);U(i.rank===$.length,()=>`Error in ${uN}, dy must have the same rank as output ${$.length}, but got ${i.rank}`);const P=Bi($,u.data.get(i.dataId).values),D=tN(r.shape,r.dtype);for(let B=0;B<p;++B)for(let z=0;z<v;++z){const q=z*w-x.top;for(let Y=0;Y<b;++Y){const J=Y*S-x.left;for(let H=0;H<y;++H){let L=Number.MIN_SAFE_INTEGER,Q=q<0?0:q,Z=J<0?0:J;for(let te=0;te<C;++te){const oe=q+te*R;if(oe>=0&&oe<f)for(let he=0;he<E;++he){const ae=J+he*T;if(ae>=0&&ae<g){const de=c[B][oe][ae][H]+d[te][he][H];de>L&&(L=de,Q=oe,Z=ae)}}}D[B][Q][Z][H]+=P[B][z][Y][H]}}}return{dataId:u.write(Tu(D,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function a0(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;qe(a,"sum");let s;a.dtype==="bool"?s=zu({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):s=Os({inputs:{x:a},backend:n});const l=s.shape.length,u=Jt(i,s.shape),c=gr(u,l);let d=u,p=s;c!=null&&(p=li({inputs:{x:s},backend:n,attrs:{perm:c}}),d=yr(d.length,l)),ia("sum",d,p.shape.length);const[f,g]=aa(p.shape,d),y=si(p.dtype,"int32");let v=lw(n,f,y);const b=be(g),x=n.data.get(v.dataId).values,w=n.data.get(p.dataId).values;for(let S=0;S<x.length;++S){const C=S*b;let E=0;for(let R=0;R<b;++R)E+=w[C+R];x[S]=E}if(o){const S=Pr(v.shape,u),C=v;v=$n({inputs:{x:v},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(C)}return n.disposeIntermediateTensorInfo(s),c!=null&&n.disposeIntermediateTensorInfo(p),v}const Kye={kernelName:Zx,backendName:"cpu",kernelFunc:a0};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xye(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:o,summedDims:s,idDims:l}=fI(a,i.length);gI(o.length,l,i);const{path:u,steps:c}=yI(s,l),d=c.length;let p=null,f=o.length;const g=[];for(let y=0;y<d;++y){for(const v of c[y]){const{permutationIndices:b,expandDims:x}=mI(f,l[v]);let w;bI(b)?w=i[v]:(w=li({inputs:{x:i[v]},backend:n,attrs:{perm:b}}),g.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);Sn(w.shape,S)||(w=$n({inputs:{x:w},backend:n,attrs:{shape:S}}),g.push(w)),p===null?p=w:(p=uw({inputs:{a:w,b:p},backend:n}),g.push(p))}y<d-1&&(u[y]>=0&&(p=a0({inputs:{x:p},backend:n,attrs:{axis:u[y]-(o.length-f),keepDims:!1}}),g.push(p)),f--)}for(const y of g)y!==p&&n.disposeIntermediateTensorInfo(y);return p}const Qye={kernelName:cx,backendName:"cpu",kernelFunc:Xye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yye(t){const{inputs:e,backend:n}=t,{dy:r,y:a}=e;qe([r,a],"eluGrad");const i=new Float32Array(be(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const u=o[l];u>=1?i[l]=s[l]:i[l]=s[l]*(u+1)}return n.makeTensorInfo(a.shape,"float32",i)}const Jye={kernelName:dN,backendName:"cpu",kernelFunc:Yye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Zye=oI,ebe=sI,tbe=lI,nbe=uI,rbe=cI,abe=dI,ibe=gn(Lm,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+Zye*n);return e*(1-((((abe*r+rbe)*r+nbe)*r+tbe)*r+ebe)*r*Math.exp(-n*n))}),obe={kernelName:Lm,backendName:"cpu",kernelFunc:ibe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dw(t){const{inputs:e,backend:n,attrs:r}=t,{input:a}=e,{dim:i}=r,o=a.shape.length,s=a.shape.slice();let l=i;return i<0&&(U(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),s.splice(l,0,1),$n({inputs:{x:a},backend:n,attrs:{shape:s}})}const sbe={kernelName:dx,backendName:"cpu",kernelFunc:dw};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lbe=Cr((t,e)=>t/e),WI=Hr(Am,lbe),GI={kernelName:Am,backendName:"cpu",kernelFunc:WI};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ez(t,e,n){const r=t.shape,a=r[0],i=r[1],o=n.data.get(t.dataId),s=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[a,i],c=be(u),d=$r("float32",c),p=$r("float32",c);for(let v=0;v<a;v++){const b=cd({inputs:{x:s},backend:n,attrs:{begin:[v,0],size:[1,i]}}),x=cd({inputs:{x:l},backend:n,attrs:{begin:[v,0],size:[1,i]}}),w=Ti({inputs:{real:b,imag:x},backend:n}),{real:S,imag:C}=ube(w,e,n),E=Tl(S,C);for(let R=0;R<i;R++){const T=pI(E,R);d[v*i+R]=T.real,p[v*i+R]=T.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w)}const f=n.makeTensorInfo(u,"float32",d),g=n.makeTensorInfo(u,"float32",p),y=Ti({inputs:{real:f,imag:g},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}function ube(t,e,n){const r=be(t.shape),a=n.data.get(t.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(cbe(r)){const s=HI(i,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",s.real),c=n.makeTensorInfo(l,"float32",s.imag),d=n.makeTensorInfo([],"float32",yl(r,"float32")),p=Os({inputs:{x:d},backend:n}),f=GI.kernelFunc({inputs:{a:u,b:d},backend:n}),g=GI.kernelFunc({inputs:{a:c,b:p},backend:n}),y=n.data.get(f.dataId).values,v=n.data.get(g.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),{real:y,imag:v}}return s}else{const s=Tl(i,o),l=dbe(s,r,e);return jL(l)}}function cbe(t){return(t&t-1)===0}function HI(t,e,n,r,a){if(n===1)return{real:t,imag:e};const i=Tl(t,e),o=n/2,s=UL(i),l=s.real,u=s.imag,c=[l.length],d=a.makeTensorInfo(c,"float32",l),p=a.makeTensorInfo(c,"float32",u),f=Ti({inputs:{real:d,imag:p},backend:a}),g=VL(i),y=g.real,v=g.imag,b=[y.length],x=a.makeTensorInfo(b,"float32",y),w=a.makeTensorInfo(b,"float32",v),S=Ti({inputs:{real:x,imag:w},backend:a}),C=HI(l,u,o,r,a),E=C.real,R=C.imag,T=[E.length],$=a.makeTensorInfo(T,"float32",E),P=a.makeTensorInfo(T,"float32",R),D=Ti({inputs:{real:$,imag:P},backend:a}),B=HI(y,v,o,r,a),z=B.real,q=B.imag,Y=[z.length],J=a.makeTensorInfo(Y,"float32",z),H=a.makeTensorInfo(Y,"float32",q),L=Ti({inputs:{real:J,imag:H},backend:a}),Q=GL(n,r),Z=[Q.real.length],te=a.makeTensorInfo(Z,"float32",Q.real),oe=a.makeTensorInfo(Z,"float32",Q.imag),he=Ti({inputs:{real:te,imag:oe},backend:a}),ae=uw({inputs:{a:he,b:L},backend:a}),de=ah({inputs:{a:D,b:ae},backend:a}),ke=UI({inputs:{a:D,b:ae},backend:a}),X=ud({inputs:{input:de},backend:a}),se=ud({inputs:{input:ke},backend:a}),pe=sh({inputs:{input:de},backend:a}),Ne=sh({inputs:{input:ke},backend:a}),Se=lh({inputs:[X,se],backend:a,attrs:{axis:0}}),Te=lh({inputs:[pe,Ne],backend:a,attrs:{axis:0}}),Pe=a.data.get(Se.dataId).values,We=a.data.get(Te.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo($),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(J),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(te),a.disposeIntermediateTensorInfo(oe),a.disposeIntermediateTensorInfo(he),a.disposeIntermediateTensorInfo(ae),a.disposeIntermediateTensorInfo(de),a.disposeIntermediateTensorInfo(ke),a.disposeIntermediateTensorInfo(X),a.disposeIntermediateTensorInfo(pe),a.disposeIntermediateTensorInfo(se),a.disposeIntermediateTensorInfo(Ne),a.disposeIntermediateTensorInfo(Se),a.disposeIntermediateTensorInfo(Te),{real:Pe,imag:We}}function dbe(t,e,n){const r=new Float32Array(e*2);for(let a=0;a<e;a++){let i=0,o=0;for(let s=0;s<e;s++){const l=HL(a*s,e,n),u=pI(t,s);i+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(i/=e,o/=e),WL(r,i,o,a)}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pbe(t){const{inputs:e,backend:n}=t,{input:r}=e,a=be(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=$n({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=Ez(s,!1,n),u=$n({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const hbe={kernelName:px,backendName:"cpu",kernelFunc:pbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qI(t){const{backend:e,attrs:n}=t,{shape:r,value:a,dtype:i}=n,o=i||Ap(a),s=Or(o,be(r));return mbe(s,a,o),e.makeTensorInfo(r,o,s)}const fbe={kernelName:hx,backendName:"cpu",kernelFunc:qI};function mbe(t,e,n){t.fill(e)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gbe={kernelName:fx,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,a=n,i=$r(r.dtype,be(r.shape)),[o,s,l,u]=r.shape,c=a.data.get(r.dataId).values;for(let d=0;d<o;d++){const p=d*l*s*u;for(let f=0;f<s;f++){const g=f*(l*u);for(let y=0;y<l;y++){const v=y*u;for(let b=0;b<u;b++){const x=Math.round(l-y-1),w=p+g+v+b;let S=c[w];if(x>=0&&x<l){const C=x*u,E=p+g+C+b;S=c[E]}i[w]=S}}}}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ybe=Cr((t,e)=>Math.floor(t/e)),bbe=Hr(Vm,ybe,null,"int32"),vbe={kernelName:Vm,backendName:"cpu",kernelFunc:bbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:g}=r;let y=Sz({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(o){const v=y;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const b=$n({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});y=ah({inputs:{a:y,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else y=ah({inputs:{a:y,b:o},backend:n});n.disposeIntermediateTensorInfo(v)}if(f){const v=y;if(c==="NCHW"&&f==="prelu"&&s.shape.length===1&&s.shape[0]!==1){const b=$n({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});y=cw(n,y,f,b,g),n.disposeIntermediateTensorInfo(b)}else y=cw(n,y,f,s,g);n.disposeIntermediateTensorInfo(v)}return y}const wbe={kernelName:Ig,backendName:"cpu",kernelFunc:xbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:g}=r;let y=Cz({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(o){const v=y;y=ah({inputs:{a:y,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(f){const v=y;y=cw(n,y,f,s,g),n.disposeIntermediateTensorInfo(v)}return y}const Sbe={kernelName:_g,backendName:"cpu",kernelFunc:kbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cbe(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=be(r.shape),o=a.shape,s=o[o.length-1],[l,u,c,d]=R2(r,a);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(a.dataId).values,f=n.bufferSync(r),g=P7(p,f,r.dtype,u,s,c,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,g.values)}const Ebe={kernelName:yx,backendName:"cpu",kernelFunc:Cbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:o,batchDims:s}=r;qe([a,i],"gatherV2");const l=Jt(o,a.shape)[0],u=n.data.get(i.dataId).values,c=a.shape[l];for(let S=0;S<u.length;++S){const C=u[S];U(C<=c-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${c-1}]`)}let d=s;s==null&&(d=0);const p=be(i.shape),f=wI(a,i,l,d),g=$n({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),y=$n({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,p/f.batchSize]}}),v=[f.batchSize,f.outerSize,p/f.batchSize,f.sliceSize],b=n.bufferSync(y),x=n.bufferSync(g),w=F7(x,b,v);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(f.outputShape,w.dtype,w.values)}const Tbe={kernelName:gx,backendName:"cpu",kernelFunc:Nbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ibe(t){const{inputs:e,backend:n}=t,{input:r}=e,a=be(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=$n({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=Ez(s,!0,n),u=$n({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const _be={kernelName:bx,backendName:"cpu",kernelFunc:Ibe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Rbe=gn(qm,t=>Number.isFinite(t)?1:0,"bool"),$be={kernelName:qm,backendName:"cpu",kernelFunc:Rbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Obe=gn(Km,t=>Math.abs(t)===1/0?1:0,"bool"),Mbe={kernelName:Km,backendName:"cpu",kernelFunc:Obe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Pbe=gn(Xm,t=>Number.isNaN(t)?1:0,"bool"),Fbe={kernelName:Xm,backendName:"cpu",kernelFunc:Pbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Abe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,o=B7(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}const Dbe={kernelName:wx,backendName:"cpu",kernelFunc:Abe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Lbe=gn(Zm,t=>Math.log1p(t)),zbe={kernelName:Zm,backendName:"cpu",kernelFunc:Lbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Bbe=Cr((t,e)=>t&&e),jbe=Hr(eg,Bbe,null,"bool"),Ube={kernelName:eg,backendName:"cpu",kernelFunc:jbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Vbe=gn(tg,t=>t?0:1,"bool"),Wbe={kernelName:tg,backendName:"cpu",kernelFunc:Vbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gbe=Cr((t,e)=>t||e),Hbe=Hr(ng,Gbe,null,"bool"),qbe={kernelName:ng,backendName:"cpu",kernelFunc:Hbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:o,alpha:s,beta:l}=r;qe(a,"LRN");const u=a.shape[3],c=u-1,d=n.data.get(a.dataId).values,p=be(a.shape),f=new Float32Array(p);function g(y){const v=y%u;let b=y-v+Math.max(0,v-i);const x=y-v+Math.min(v+i,c);let w=0;for(;b<=x;b++){const S=d[b];w+=S*S}return w}for(let y=0;y<p;y++){const v=g(y),b=d[y]*Math.pow(o+s*v,-l);f[y]=b}return n.makeTensorInfo(a.shape,a.dtype,f)}const Xbe={kernelName:kx,backendName:"cpu",kernelFunc:Kbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r;qe(o,"LRNGrad");const d=be(o.shape),p=o.shape[3],f=n.data.get(o.dataId).values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,v=new Float32Array(d),b=d;for(let x=0;x<b;x++){const w=x%p,S=x-w+Math.max(0,w-s),C=x-w+Math.min(p,w+s+1);let E=0;for(let R=S;R<C;R++)E+=Math.pow(g[R],2);E=u*E+l;for(let R=S;R<C;R++){let T=-2*u*c*g[R]*y[x]/E;x===R&&(T+=Math.pow(E,-c)),T*=f[x],v[R]+=T}}return n.makeTensorInfo(o.shape,a.dtype,v)}const Ybe={kernelName:pN,backendName:"cpu",kernelFunc:Qbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:o}=r,s=n;let l=a.shape;const u=l.length,c=Jt(i,l);let d=c;const p=gr(d,u);let f=s.data.get(a.dataId).values;if(p!=null){const S=new Array(u);for(let C=0;C<S.length;C++)S[C]=l[p[C]];f=BI(f,l,a.dtype,p,S),d=yr(d.length,u),l=S}qe(a,"max"),ia("max",d,u);const[g,y]=aa(l,d),v=be(y),b=U7(f,v,g,a.dtype),x=s.write(b,g,a.dtype);let w=g;return o&&(w=Pr(g,c)),{dataId:x,shape:w,dtype:a.dtype}}const Jbe={kernelName:Sx,backendName:"cpu",kernelFunc:Nz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;qe(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;U(Ca(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=fo(a.shape,i,o,u,s,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Sn(c.inShape,c.outShape))d=Os({inputs:{x:a},backend:n});else{const p=n.data.get(a.dataId).values,f=rt(a.shape),g=VI(p,a.shape,a.dtype,f,c,"max");d=n.makeTensorInfo(c.outShape,a.dtype,g.values)}return d}const eve={kernelName:Cx,backendName:"cpu",kernelFunc:Zbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;qe(a,"maxPool3d");const c=Sl(a.shape,i,o,1,s,l,u),d=n.data.get(a.dataId).values,p=kz(d,a.shape,a.dtype,rt(a.shape),c,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const nve={kernelName:Ex,backendName:"cpu",kernelFunc:tve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rve(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;qe([a,i],"maxPool3DGrad");const c=Sl(i.shape,o,s,1,l,u),d=n.bufferSync(i),p=W1e(d,c),f=c.strideDepth,g=c.strideHeight,y=c.strideWidth,v=c.dilationDepth,b=c.dilationHeight,x=c.dilationWidth,w=c.effectiveFilterDepth,S=c.effectiveFilterHeight,C=c.effectiveFilterWidth,E=w-1-c.padInfo.front,R=C-1-c.padInfo.left,T=S-1-c.padInfo.top,$=Tt(i.shape,"float32"),P=n.bufferSync(a);for(let D=0;D<c.batchSize;++D)for(let B=0;B<c.inChannels;++B)for(let z=0;z<c.inDepth;++z)for(let q=0;q<c.inHeight;++q)for(let Y=0;Y<c.inWidth;++Y){const J=z-E,H=q-T,L=Y-R;let Q=0;for(let Z=0;Z<w;Z+=v){const te=(J+Z)/f;if(!(te<0||te>=c.outDepth||Math.floor(te)!==te))for(let oe=0;oe<S;oe+=b){const he=(H+oe)/g;if(!(he<0||he>=c.outHeight||Math.floor(he)!==he))for(let ae=0;ae<C;ae+=x){const de=(L+ae)/y;if(de<0||de>=c.outWidth||Math.floor(de)!==de)continue;const ke=w*S*C-1-p.get(D,te,he,de,B),X=Z*S*C+oe*C+ae,se=ke===X?1:0;if(se===0)continue;const pe=P.get(D,te,he,de,B);Q+=pe*se}}}$.set(Q,D,z,q,Y,B)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const ave={kernelName:fN,backendName:"cpu",kernelFunc:rve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ive(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:o}=e,s=i;qe([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,p=fo(s.shape,l,u,1,c,d),f=n.data.get(s.dataId).values,g=Tt(p.outShape,s.dtype,wz(f,s.shape,s.dtype,p).values),y=p.strideHeight,v=p.strideWidth,b=p.dilationHeight,x=p.dilationWidth,w=p.effectiveFilterHeight,S=p.effectiveFilterWidth,C=S-1-p.padInfo.left,E=w-1-p.padInfo.top,R=Tt(s.shape,"float32"),T=n.data.get(a.dataId).values,$=Tt(a.shape,"float32",T);for(let P=0;P<p.batchSize;++P)for(let D=0;D<p.inChannels;++D)for(let B=0;B<p.inHeight;++B)for(let z=0;z<p.inWidth;++z){const q=B-E,Y=z-C;let J=0;for(let H=0;H<w;H+=b){const L=(q+H)/y;if(!(L<0||L>=p.outHeight||Math.floor(L)!==L))for(let Q=0;Q<S;Q+=x){const Z=(Y+Q)/v;if(Z<0||Z>=p.outWidth||Math.floor(Z)!==Z)continue;const te=w*S-1-g.get(P,L,Z,D),oe=H*S+Q,he=te===oe?1:0;if(he===0)continue;const ae=$.get(P,L,Z,D);J+=ae*he}}R.set(J,P,B,z,D)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const ove={kernelName:hN,backendName:"cpu",kernelFunc:ive};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sve(t,e,n,r,a){const i=rt(e),o=VI(t,e,n,i,a,"max"),s=wz(t,e,n,a,!0,r);return[o.values,s.values]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lve={kernelName:Nx,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=e,l=n;qe(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=fo(r.shape,a,i,[1,1],o),[d,p]=sve(u,r.shape,r.dtype,s,c),f=l.write(d,c.outShape,r.dtype),g=l.write(p,c.outShape,r.dtype);return[{dataId:f,shape:c.outShape,dtype:r.dtype},{dataId:g,shape:c.outShape,dtype:"int32"}]}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=Jt(i,a.shape),l=aa(a.shape,s)[1],u=be(l),c=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(d);const p=zu({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(p);const f=WI({inputs:{a:p,b:d},backend:n});c.push(f);const g=a0({inputs:{x:f},backend:n,attrs:{axis:i,keepDims:o}});return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const cve={kernelName:Tx,backendName:"cpu",kernelFunc:uve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;qe(a,"min");const s=Jt(i,a.shape);let l=s;const u=gr(l,a.shape.length);let c=a;u!=null&&(c=li({inputs:{x:a},backend:n,attrs:{perm:u}}),l=yr(l.length,a.shape.length)),ia("min",l,c.shape.length);const[d,p]=aa(c.shape,l),f=be(p),g=ra(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<g.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];(Number.isNaN(C)||C<w)&&(w=C)}g[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,g);if(o){const b=Pr(d,s),x=$n({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const pve={kernelName:Ix,backendName:"cpu",kernelFunc:dve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,mode:o}=r;qe(a,"mirrorPad");const s=i.map((x,w)=>x[0]+a.shape[w]+x[1]),l=i.map(x=>x[0]),u=i.map((x,w)=>x[0]+a.shape[w]),c=o==="reflect"?0:1,d=n.data.get(a.dataId).values,p=a.shape.length,f=rt(a.shape),g=be(s),y=s.length,v=rt(s),b=$r(a.dtype,g);for(let x=0;x<g;x++){let w=Hc(x,y,v);for(let C=0;C<y;C++)w[C]<l[C]?w[C]=l[C]*2-w[C]-c:w[C]>=u[C]&&(w[C]=(u[C]-1)*2-w[C]+c);w=w.map((C,E)=>C-l[E]);const S=Ko(w,p,f);b[x]=d[S]}return{dataId:n.write(b,s,a.dtype),shape:s,dtype:a.dtype}}const fve={kernelName:_x,backendName:"cpu",kernelFunc:hve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mve=Cr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),gve=Hr(ig,mve),yve={kernelName:ig,backendName:"cpu",kernelFunc:gve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tz(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,o=a.shape.length;let s=i;if(s===-1&&(s=o-1),s!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${s}`);const l=Jt([s],a.shape),u=Nz({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Pr(u.shape,l),d=$n({inputs:{x:u},backend:n,attrs:{shape:c}}),p=UI({inputs:{a,b:d},backend:n}),f=$7({inputs:{x:p},backend:n}),g=a0({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),y=$n({inputs:{x:g},backend:n,attrs:{shape:c}}),v=WI({inputs:{a:f,b:y},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}const bve={kernelName:n2,backendName:"cpu",kernelFunc:Tz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vve(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:o,normalized:s}=r;qe(a,"multinomial");const l=s?a:Tz({inputs:{logits:a},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,p=[u,i],f=ra(be(p),"int32");for(let g=0;g<u;++g){const y=g*c,v=new Float32Array(c-1);v[0]=d[y];for(let w=1;w<v.length;++w)v[w]=v[w-1]+d[y+w];const b=z2.alea(o.toString()),x=g*i;for(let w=0;w<i;++w){const S=b();f[x+w]=v.length;for(let C=0;C<v.length;C++)if(S<v[C]){f[x+w]=C;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",f)}const xve={kernelName:Rx,backendName:"cpu",kernelFunc:vve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wve=K2;function kve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r;qe(a,"NonMaxSuppression");const u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:d}=wve(u,c,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Sve={kernelName:Ox,backendName:"cpu",kernelFunc:kve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Cve=X2;function Eve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r;qe(a,"NonMaxSuppressionPadded");const c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:p,validOutputs:f}=Cve(c,d,o,s,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const Nve={kernelName:Mx,backendName:"cpu",kernelFunc:Eve};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Tve=Q2;function Ive(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r;qe(a,"NonMaxSuppressionWithScore");const c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,p=o,f=s,g=l,y=u,{selectedIndices:v,selectedScores:b}=Tve(c,d,p,f,g,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const _ve={kernelName:Px,backendName:"cpu",kernelFunc:Ive};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rve(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:o,onValue:s,offValue:l}=r;qe(a,"oneHot");const u=be(a.shape),c=new Float32Array(u*o);c.fill(l);const d=n.data.get(a.dataId).values;for(let p=0;p<u;++p)d[p]>=0&&d[p]<o&&(c[p*o+d[p]]=s);return n.makeTensorInfo([...a.shape,o],i,c)}const $ve={kernelName:Ax,backendName:"cpu",kernelFunc:Rve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pw(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const a=ud({inputs:{input:r},backend:n}),i=pw({inputs:{x:a},backend:n}),o=sh({inputs:{input:r},backend:n}),s=pw({inputs:{x:o},backend:n}),l=Ti({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return qI({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Ove={kernelName:y2,backendName:"cpu",kernelFunc:pw};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Iz(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const a=ud({inputs:{input:r},backend:n}),i=Iz({inputs:{x:a},backend:n}),o=sh({inputs:{input:r},backend:n}),s=pw({inputs:{x:o},backend:n}),l=Ti({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return qI({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const Mve={kernelName:Fx,backendName:"cpu",kernelFunc:Iz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _z(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return dw({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{na(i,c.shape,"All tensors passed to stack must have matching shapes"),U(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const d=dw({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(d),d}),u=lh({inputs:l,backend:n,attrs:{axis:a}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const Pve={kernelName:Dx,backendName:"cpu",kernelFunc:_z};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:o}=r;qe(a,"pad");const s=i.map((b,x)=>b[0]+a.shape[x]+b[1]),l=i.map(b=>b[0]),u=n.data.get(a.dataId).values,c=be(a.shape),d=a.shape.length,p=rt(a.shape),f=be(s),g=s.length,y=rt(s),v=$r(a.dtype,f);o!==0&&v.fill(o);for(let b=0;b<c;b++){const x=Hc(b,d,p).map((S,C)=>S+l[C]),w=Ko(x,g,y);v[w]=u[b]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}const Rz={kernelName:Lx,backendName:"cpu",kernelFunc:Fve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ave=Cr((t,e)=>Math.pow(t,e)),Dve=Hr(lg,Ave),Lve={kernelName:lg,backendName:"cpu",kernelFunc:Dve};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zve(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=e,s=a.map(v=>n.data.get(v.dataId).values),l=a.map(v=>v.shape),u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,[d,p,f]=X7(s,l,u,i.shape,i.dtype,c,o.shape),g=d.map(v=>n.makeTensorInfo([v.length],"int32",v)),y=n.makeTensorInfo(f,i.dtype,p);return g.concat([y])}const Bve={kernelName:jx,backendName:"cpu",kernelFunc:zve};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jve(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,p=s.map(v=>n.data.get(v.dataId).values),f=s.map(v=>v.shape),[g,y]=J7(u,a.shape,c,i.shape,i.dtype,d,o.shape,p,f,l);return n.makeTensorInfo(g,i.dtype,y)}const Uve={kernelName:Ux,backendName:"cpu",kernelFunc:jve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vve(t){const{backend:e,attrs:n}=t,{start:r,stop:a,dtype:i,step:o}=n,s=Z7(r,a,o,i);return e.makeTensorInfo([s.length],i,s)}const Wve={kernelName:Vx,backendName:"cpu",kernelFunc:Vve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gve=gn(ug,t=>1/t),Hve={kernelName:ug,backendName:"cpu",kernelFunc:Gve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r;qe(a,"resizeBilinear");const l=rt(a.shape),[u,c]=s,[d,p,f,g]=a.shape,y=n.data.get(a.dataId).values,v=new Float32Array(be([d,u,c,g])),b=[i&&u>1?p-1:p,i&&c>1?f-1:f],x=[i&&u>1?u-1:u,i&&c>1?c-1:c];let w=0;const S=b[0]/x[0],C=b[1]/x[1];for(let E=0;E<d;E++)for(let R=0;R<u;R++){let T;o?T=S*(R+.5)-.5:T=S*R;const $=Math.max(0,Math.floor(T)),P=T-$,D=Math.min(p-1,Math.ceil(T)),B=E*l[0]+$*l[1],z=E*l[0]+D*l[1];for(let q=0;q<c;q++){let Y;o?Y=C*(q+.5)-.5:Y=C*q;const J=Math.max(0,Math.floor(Y)),H=Y-J,L=Math.min(f-1,Math.ceil(Y)),Q=B+J*l[2],Z=z+J*l[2],te=B+L*l[2],oe=z+L*l[2];for(let he=0;he<g;he++){const ae=y[Q+he],de=y[Z+he],ke=y[te+he],X=y[oe+he],se=ae+(ke-ae)*H,pe=de+(X-de)*H,Ne=se+(pe-se)*P;v[w++]=Ne}}}return n.makeTensorInfo([d,u,c,g],"float32",v)}const Kve={kernelName:qx,backendName:"cpu",kernelFunc:qve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r;qe([i,a],"resizeBilinearGrad");const s=rt(a.shape),[l,u,c,d]=a.shape,[,p,f]=i.shape,g=new Float32Array(l*u*c*d),y=[o&&p>1?u-1:u,o&&f>1?c-1:c],v=[o&&p>1?p-1:p,o&&f>1?f-1:f],b=y[0]/v[0],x=y[1]/v[1],w=n.data.get(i.dataId).values;let S=0;for(let C=0;C<l;C++){const E=C*s[0];for(let R=0;R<p;R++){const T=R*b,$=Math.floor(T),P=Math.min(Math.ceil(T),u-1),D=E+$*s[1],B=E+P*s[1],z=T-$,q=1-z;for(let Y=0;Y<f;Y++){const J=Y*x,H=Math.floor(J),L=Math.min(Math.ceil(J),c-1),Q=J-H,Z=1-Q,te=D+H*s[2],oe=D+L*s[2],he=B+H*s[2],ae=B+L*s[2],de=q*Z,ke=q*Q,X=z*Z,se=z*Q;for(let pe=0;pe<d;pe++){const Ne=w[S++];g[te+pe]+=Ne*de,g[oe+pe]+=Ne*ke,g[he+pe]+=Ne*X,g[ae+pe]+=Ne*se}}}}return n.makeTensorInfo([l,c,u,d],"float32",g)}const Qve={kernelName:gN,backendName:"cpu",kernelFunc:Xve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r;qe(a,"resizeNearestNeighbor");const l=rt(a.shape),[u,c]=s,[d,p,f,g]=a.shape,y=n.data.get(a.dataId).values,v=new Float32Array(d*u*c*g),b=[i&&u>1?p-1:p,i&&c>1?f-1:f],x=[i&&u>1?u-1:u,i&&c>1?c-1:c],w=b[0]/x[0],S=b[1]/x[1];let C=0;for(let E=0;E<d;E++){const R=E*l[0];for(let T=0;T<u;T++){const $=o?w*(T+.5):w*T;let P=Math.min(p-1,i?Math.round($):Math.floor($));o&&(P=Math.max(0,P));const D=R+P*l[1];for(let B=0;B<c;B++){const z=o?S*(B+.5):S*B;let q=Math.min(f-1,i?Math.round(z):Math.floor(z));o&&(q=Math.max(0,q));const Y=D+q*l[2];for(let J=0;J<g;J++){const H=y[Y+J];v[C++]=H}}}}return n.makeTensorInfo([d,u,c,g],a.dtype,v)}const Jve={kernelName:Hx,backendName:"cpu",kernelFunc:Yve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r;qe([i,a],"resizeNearestNeighborGrad");const s=rt(a.shape),l=rt(i.shape),[u,c,d,p]=a.shape,[,f,g]=i.shape,y=new Float32Array(u*c*d*p),v=n.data.get(i.dataId).values,b=[o&&f>1?c-1:c,o&&g>1?d-1:d],x=[o&&f>1?f-1:f,o&&g>1?g-1:g],w=b[0]/x[0],S=b[1]/x[1],C=1/w,E=1/S,R=Math.ceil(C)*2+2,T=Math.ceil(E)*2+2;for(let $=0;$<u;$++){const P=$*s[0];for(let D=0;D<c;D++){const B=P+D*s[1],z=Math.floor(D*C),q=Math.floor(z-R/2);for(let Y=0;Y<d;Y++){const J=B+Y*s[2],H=Math.floor(Y*E),L=Math.floor(H-T/2);for(let Q=0;Q<p;Q++){let Z=0;for(let te=0;te<R;te++){const oe=te+q;if(oe<0||oe>=f)continue;const he=P+oe*l[1],ae=oe*w,de=Math.min(c-1,o?Math.round(ae):Math.floor(ae));if(D===de)for(let ke=0;ke<T;ke++){const X=ke+L;if(X<0||X>=g)continue;const se=he+X*l[2],pe=X*S,Ne=Math.min(d-1,o?Math.round(pe):Math.floor(pe));Y===Ne&&(Z+=v[se+Q])}}y[J+Q]=Z}}}}return n.makeTensorInfo(a.shape,a.dtype,y)}const exe={kernelName:mN,backendName:"cpu",kernelFunc:Zve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function txe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r;qe(a,"reverse");const o=a.shape.length,s=Jt(i,a.shape);if(o===0)return Os({inputs:{x:a},backend:n});const l=new Mr(a.shape,a.dtype),u=n.bufferSync(a);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),p=d.slice();s.forEach(f=>p[f]=a.shape[f]-1-p[f]),l.set(u.get(...p),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const nxe={kernelName:Kx,backendName:"cpu",kernelFunc:txe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rxe={kernelName:v2,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:o}=e,s=n,l=$r(r.dtype,be(r.shape)),[u,c,d,p]=r.shape,[f,g]=tI(o,c,d),y=255,v=Math.sin(a),b=Math.cos(a),x=s.data.get(r.dataId).values;for(let w=0;w<u;w++){const S=w*d*c*p;for(let C=0;C<c;C++){const E=C*(d*p);for(let R=0;R<d;R++){const T=R*p;for(let $=0;$<p;$++){const P=[u,C,R,$],D=P[2],B=P[1];let z=(D-f)*b-(B-g)*v,q=(D-f)*v+(B-g)*b;z=Math.round(z+f),q=Math.round(q+g);let Y=i;if(typeof i!="number"&&($===3?Y=y:Y=i[$]),z>=0&&z<d&&q>=0&&q<c){const H=q*(d*p),L=z*p,Q=S+H+L+$;Y=x[Q]}const J=S+E+T+$;l[J]=Y}}}}return{dataId:s.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const axe=gn(pg,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),ixe={kernelName:pg,backendName:"cpu",kernelFunc:axe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oxe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Hp(i,a,o),p=!0,f=n.bufferSync(a),g=n.bufferSync(i),y=oh(f,g,o,d,u,l,s,c,0,p);return n.makeTensorInfo(o,y.dtype,y.values)}const sxe={kernelName:Xx,backendName:"cpu",kernelFunc:oxe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lxe(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<e?n=a+1:r=a;return r}function uxe(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<=e?n=a+1:r=a;return r}function cxe(t,e,n,r,a,i){const o=Or("int32",n*a);for(let s=0;s<n;++s){const l=t.slice(s*r,(s+1)*r),u=s*a;for(let c=0;c<a;++c)o[u+c]=i==="left"?lxe(l,e[c+u]):uxe(l,e[c+u])}return o}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dxe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:o}=r,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=cxe(s,l,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",u)}const pxe={kernelName:Qx,backendName:"cpu",kernelFunc:dxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hxe(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e;qe([r,a,i],"select");const o=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=si(a.dtype,i.dtype),d=ra(be(a.shape),c);let p=0;const f=o===0||o>1||a.shape.length===1?1:be(a.shape.slice(1));for(let g=0;g<s.length;g++)for(let y=0;y<f;y++)s[g]===1?d[p++]=l[g]:d[p++]=u[g];return n.makeTensorInfo(a.shape,c,d)}const fxe={kernelName:Yx,backendName:"cpu",kernelFunc:hxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mxe=aI,gxe=iI,yxe=gn(fg,t=>t>=0?gxe*t:mxe*(Math.exp(t)-1)),bxe={kernelName:fg,backendName:"cpu",kernelFunc:yxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vxe=gn(yg,t=>t<0?-1:t>0?1:0),xxe={kernelName:yg,backendName:"cpu",kernelFunc:vxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wxe=gn(mg,t=>Math.sin(t)),kxe={kernelName:mg,backendName:"cpu",kernelFunc:wxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Sxe=gn(gg,t=>Math.sinh(t)),Cxe={kernelName:gg,backendName:"cpu",kernelFunc:Sxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Exe=11920928955078125e-23,$z=Math.log(Exe)+2,Nxe=gn(vg,t=>{const e=t>-$z,n=t<$z,r=Math.exp(t);let a;return n?a=r:e?a=t:a=Math.log(1+r),a}),Txe={kernelName:vg,backendName:"cpu",kernelFunc:Nxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ixe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:o}=r;qe([a],"spaceToBatchND");const s=be(i),l=[[0,0]];l.push(...o);for(let v=1+i.length;v<a.shape.length;++v)l.push([0,0]);const u=Rz.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),c=Zg(u.shape,i,s,!1),d=e0(c.length,i.length,!1),p=t0(u.shape,i,s,!1),f=$n({inputs:{x:u},backend:n,attrs:{shape:c}}),g=li({inputs:{x:f},backend:n,attrs:{perm:d}}),y=$n({inputs:{x:g},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}const _xe={kernelName:e2,backendName:"cpu",kernelFunc:Ixe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rxe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${a.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],[d,p,f,g,y]=rz(s,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,f),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const $xe={kernelName:r2,backendName:"cpu",kernelFunc:Rxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Oxe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[u,c,d]=az(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const Mxe={kernelName:a2,backendName:"cpu",kernelFunc:Oxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pxe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[u,c]=jI(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const Fxe={kernelName:i2,backendName:"cpu",kernelFunc:Pxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Axe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[u,c]=jI(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const Dxe={kernelName:o2,backendName:"cpu",kernelFunc:Axe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lxe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=Hp(i,a,s),f=!1,g=n.bufferSync(a);let y;switch(i.dtype){case"bool":{const v=n.bufferSync(i),b=!!n.data.get(o.dataId).values[0];y=oh(g,v,s,p,c,u,l,d,b,f);break}case"float32":{const v=n.bufferSync(i),b=n.data.get(o.dataId).values[0];y=oh(g,v,s,p,c,u,l,d,b,f);break}case"int32":{const v=n.bufferSync(i),b=n.data.get(o.dataId).values[0];y=oh(g,v,s,p,c,u,l,d,b,f);break}case"string":{const v=n.bufferSync(i),b=bl(n.data.get(o.dataId).values[0]);y=oh(g,v,s,p,c,u,l,d,b,f);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(s,y.dtype,y.values)}const zxe={kernelName:s2,backendName:"cpu",kernelFunc:Lxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:o}=r,s=Jt(o,a.shape)[0],l=vI(a,i,s),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return l.map(d=>{const p=[...c];p[s]=d;const f=cd({inputs:{x:a},backend:n,attrs:{begin:u,size:p}});return u[s]+=d,f})}const jxe={kernelName:t2,backendName:"cpu",kernelFunc:Bxe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Uxe={kernelName:yN,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;qe(n,"square");const a=r.data.get(n.dataId).values,i=new Float32Array(a.length);for(let o=0;o<a.length;++o){const s=a[o];i[o]=s*s}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Vxe=gn(Ng,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),Wxe={kernelName:Ng,backendName:"cpu",kernelFunc:Vxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r;qe(a,"stridedSlice");const{finalShapeSparse:f,finalShape:g,isIdentity:y,sliceDim0:v,isSimpleSlice:b,begin:x,end:w,strides:S}=oT(a.shape,i,o,s,l,u,c,d,p);let C;if(y)C=$n({inputs:{x:a},backend:n,attrs:{shape:g}});else if(v||b){U(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const E=nT(x,w,S),R=cd({inputs:{x:a},backend:n,attrs:{begin:x,size:E}});C=$n({inputs:{x:R},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(R)}else{const E=n.bufferSync(a),R=oz(f,E,S,x);C=n.makeTensorInfo(g,R.dtype,R.values)}return C}const Hxe={kernelName:l2,backendName:"cpu",kernelFunc:Gxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qxe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,p=n.data.get(c.dataId).values,f=n.data.get(d.dataId).values,[g,y]=sz(p,f,a,i,o,s,l,u);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}const Kxe={kernelName:u2,backendName:"cpu",kernelFunc:qxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xxe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,d]=lz(s,l,a),p=c.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const Qxe={kernelName:c2,backendName:"cpu",kernelFunc:Xxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yxe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(i.dataId).values,s=uz(o,a);return n.makeTensorInfo(i.shape,"int32",s)}const Jxe={kernelName:d2,backendName:"cpu",kernelFunc:Yxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Zxe=gn(Sg,t=>Math.tan(t)),e2e={kernelName:Sg,backendName:"cpu",kernelFunc:Zxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const t2e=gn(Cg,t=>Math.tanh(t)),n2e={kernelName:Cg,backendName:"cpu",kernelFunc:t2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function r2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;qe(a,"tile");const o=dz(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const a2e={kernelName:Eg,backendName:"cpu",kernelFunc:r2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function i2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:o}=r;qe(a,"topk");const s=n.data.get(a.dataId).values,[l,u]=hz(s,a.shape,a.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const o2e={kernelName:p2,backendName:"cpu",kernelFunc:i2e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function s2e(t){const{inputs:e,attrs:n,backend:r}=t,{image:a,transforms:i}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=n,[c,d,p,f]=a.shape,[g,y]=u??[d,p],v=[c,g,y,f],b=rt(a.shape),x=b[0],w=b[1],S=b[2],C=rt(v),E=C[0],R=C[1],T=C[2],$=$r(a.dtype,be(v));$.fill(l);const P=r.data.get(a.dataId).values,D=r.data.get(i.dataId).values;for(let B=0;B<c;++B){const z=i.shape[0]===1?D:D.subarray(B*8,B*8+8);for(let q=0;q<g;++q)for(let Y=0;Y<y;++Y)for(let J=0;J<f;++J){let H;const L=z[6]*Y+z[7]*q+1;if(L===0)continue;const Q=(z[0]*Y+z[1]*q+z[2])/L,Z=(z[3]*Y+z[4]*q+z[5])/L,te=Oz(Q,p,s),oe=Oz(Z,d,s);switch(o){case"nearest":H=h2e(P,d,p,x,w,S,B,oe,te,J,l);break;case"bilinear":H=f2e(P,d,p,x,w,S,B,oe,te,J,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const he=B*E+q*R+Y*T+J;$[he]=H}return r.makeTensorInfo(v,a.dtype,$)}return{dataId:r.write($,v,a.dtype),shape:a.shape,dtype:a.dtype}}const l2e={kernelName:h2,backendName:"cpu",kernelFunc:s2e};function Oz(t,e,n){switch(n){case"reflect":return u2e(t,e);case"wrap":return c2e(t,e);case"nearest":return p2e(t,e);case"constant":default:return d2e(t)}}function u2e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Cu(0,n,e-1)}function c2e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Cu(0,n,e-1)}function d2e(t,e){return t}function p2e(t,e){return Cu(0,t,e-1)}function i0(t,e,n,r,a,i,o,s,l,u,c){const d=o*r+s*a+l*i+u;return 0<=s&&s<e&&0<=l&&l<n?t[d]:c}function h2e(t,e,n,r,a,i,o,s,l,u,c){const d=Math.round(s),p=Math.round(l);return i0(t,e,n,r,a,i,o,d,p,u,c)}function f2e(t,e,n,r,a,i,o,s,l,u,c){const d=Math.floor(s),p=Math.floor(l),f=d+1,g=p+1,y=(g-l)*i0(t,e,n,r,a,i,o,d,p,u,c)+(l-p)*i0(t,e,n,r,a,i,o,d,g,u,c),v=(g-l)*i0(t,e,n,r,a,i,o,f,p,u,c)+(l-p)*i0(t,e,n,r,a,i,o,f,g,u,c);return(f-s)*y+(s-d)*v}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m2e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;qe(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:s,outputShape:l,indices:u}=fz(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const g2e={kernelName:f2,backendName:"cpu",kernelFunc:m2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y2e(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a.shape.length,s=a.shape[i],l=new Array(o-1);let u=0;for(let f=0;f<o;f++)f!==i&&(l[u++]=a.shape[f]);const c=new Array(o).fill(0),d=a.shape.slice();d[i]=1;const p=new Array(s);for(let f=0;f<p.length;f++){c[i]=f;const g=cd({inputs:{x:a},backend:n,attrs:{begin:c,size:d}});p[f]=$n({inputs:{x:g},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(g)}return p}const b2e={kernelName:m2,backendName:"cpu",kernelFunc:y2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function v2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:o}=r;qe(a,"unsortedSegmentSum");const s=a.shape.length,l=i.shape.length,u=[],c=[],d=s-l;let p=i;for(let g=0;g<d;++g){const y=dw({inputs:{input:p},backend:n,attrs:{dim:g+1}});p=y,c.push(y)}for(let g=0;g<o;++g){const y=yl(g,"int32"),v=n.makeTensorInfo([],"int32",y),b=_7({inputs:{a:v,b:p},backend:n}),x=zu({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),w=uw({inputs:{a:x,b:a},backend:n}),S=a0({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});u.push(S),c.push(v),c.push(b),c.push(x),c.push(w),c.push(S)}const f=_z({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),f}const x2e={kernelName:g2,backendName:"cpu",kernelFunc:v2e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const w2e=[b1e,a0e,x1e,k1e,c0e,C1e,N1e,I1e,R1e,O1e,P1e,A1e,L1e,j1e,V1e,H1e,K1e,Q1e,J1e,g1e,eye,nye,aye,oye,l0e,p0e,lye,i0e,cye,pye,hye,mye,yye,vye,wye,Sye,Eye,Tye,_ye,$ye,Mye,Fye,Dye,Lye,Bye,Uye,Wye,Gye,Hye,qye,Qye,u1e,Jye,h0e,obe,f0e,sbe,g0e,hbe,fbe,gbe,b0e,vbe,wbe,Sbe,Ebe,Tbe,x0e,k0e,o0e,_be,dye,$be,Mbe,Fbe,c1e,C0e,N0e,Dbe,I0e,zbe,Ube,Wbe,qbe,Xbe,Ybe,Jbe,R0e,eve,nve,ave,ove,lve,cve,pve,O0e,fve,yve,xve,P0e,A0e,Sve,Nve,_ve,L0e,$ve,Mve,Pve,Rz,Lve,p1e,j0e,Bve,Uve,Wve,s0e,GI,Hve,h1e,f1e,m1e,Kve,Qve,Jve,exe,nxe,rxe,ixe,X0e,sxe,pxe,fxe,bxe,Y0e,xxe,kxe,Cxe,J0e,bve,Txe,_xe,$xe,Mxe,Fxe,Dxe,zxe,jxe,t1e,Uxe,r1e,Wxe,Hxe,Kxe,Qxe,Jxe,s1e,Kye,e2e,n2e,a2e,o2e,l2e,z0e,g2e,b2e,x2e,Ove];for(const t of w2e)k2(t);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dd={},hw={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function k2e(t,e){dd[t]=e}function Zo(t,e){if(!(t in dd)||e!=null){const r=C2e(t,e);if(r!==null)dd[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=dd[t];return n==null||n.isContextLost()?(delete dd[t],Zo(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),dd[t])}function S2e(t){if(typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function C2e(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??S2e(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete dd[t]},!1),me().getBool("SOFTWARE_WEBGL_ENABLED")&&(hw.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",hw)||n.getContext("experimental-webgl",hw):n.getContext("webgl2",hw)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var o0;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(o0||(o0={}));var Ui;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Ui||(Ui={}));var oa;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(oa||(oa={}));function s0(t,e){return[e,t]}function E2e(t,e){return t*e}function fw(t){const e=be(t),n=Math.ceil(e/4);return Rv(n)}function uh(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function N2e(t,e){const[n,r]=uh(t,e);return n*r*4}function KI(t,e){const n=t;let r,a,i,o,s,l,u,c,d,p;return me().getNumber("WEBGL_VERSION")===2?(r=n.R32F,a=n.R16F,i=n.RGBA16F,o=n.RGBA32F,s=n.RED,u=4,c=1,d=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=t.RGBA,a=t.RGBA,i=t.RGBA,o=n.RGBA,s=t.RGBA,u=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:p}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ke(t,e){const n=e();return me().getBool("DEBUG")&&T2e(t),n}function T2e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+$2e(t,e))}const I2e=596e-10,_2e=65504;function R2e(t){return!!(me().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||I2e<Math.abs(t)&&Math.abs(t)<_2e)}function $2e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function mw(t,e){return _l(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function O2e(t,e){const n=_l(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Ke(t,()=>t.shaderSource(n,e)),Ke(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function M2e(t,e){const n=_l(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Ke(t,()=>t.shaderSource(n,e)),Ke(t,()=>t.compileShader(n)),me().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw Mz(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const P2e=/ERROR: [0-9]+:([0-9]+):/g;function Mz(t,e){const n=P2e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],a=t.split(`
`),i=a.length.toString().length+2,o=a.map((d,p)=>Gc((p+1).toString(),i)+d);let s=0;for(let d=0;d<o.length;d++)s=Math.max(o[d].length,s);const l=o.slice(0,r-1),u=o.slice(r-1,r),c=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Gc(u[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function F2e(t){return _l(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function A2e(t,e){if(Ke(t,()=>t.linkProgram(e)),!me().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function XI(t,e){if(Ke(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function D2e(t,e){const n=_l(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ke(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Ke(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function L2e(t,e){const n=_l(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ke(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Ke(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function z2e(t){return _l(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function B2e(t,e){const n=me().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,a=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function j2e(t){return _l(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function Pz(t,e,n,r,a,i,o){const s=t.getAttribLocation(e,n);return s===-1?!1:(Ke(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Ke(t,()=>t.vertexAttribPointer(s,a,t.FLOAT,!1,i,o)),Ke(t,()=>t.enableVertexAttribArray(s)),!0)}function U2e(t,e,n){q2e(t,n),Ke(t,()=>t.activeTexture(t.TEXTURE0+n)),Ke(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function V2e(t,e,n){return _l(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function W2e(t,e,n){return t.getUniformLocation(e,n)}function G2e(t,e,n,r){Ke(t,()=>U2e(t,e,r)),Ke(t,()=>t.uniform1i(n,r))}function QI(t,e,n){Ke(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Ke(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function Fz(t,e){Ke(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Ke(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function gw(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+H2e(t,e))}function H2e(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function _l(t,e,n){const r=Ke(t,()=>e());if(r==null)throw new Error(n);return r}function q2e(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const a=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${a}.`)}}function ch(t,e=2){return be(t.slice(0,t.length-e))}function dh(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function YI(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[ch(t),...dh(t)]),e}function K2e(t,e=!1){let n=me().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=me().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&me().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((s,l)=>l>=t.length-2?_v(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=gl(t).newShape);let a=be(t),i=null;t.length<=1&&a<=n?i=[1,a]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const s=ch(t);let l=2,u=2;t.length&&([l,u]=dh(t)),a=s*(l/2)*(u/2),i=Rv(a).map(c=>c*2)}else i=Rv(a);return i}function yw(t){return t%2===0}function bw(t,e){if(t=t.slice(-2),e=e.slice(-2),Sn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||yw(n)&&yw(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&yw(t[0])&&yw(e[0])}let JI,ZI;function X2e(t){if(JI==null){const e=Zo(t);JI=e.getParameter(e.MAX_TEXTURE_SIZE)}return JI}function Q2e(t){if(ZI==null){const e=Zo(t);ZI=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ZI)}function Y2e(t){if(t===0)return 0;let e;const n=Zo(t);return wo(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:wo(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function wo(t,e){return t.getExtension(e)!=null}function Az(t){try{if(Zo(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function J2e(t){if(t===0)return!1;const e=Zo(t);if(t===1){if(!wo(e,"OES_texture_float"))return!1}else if(!wo(e,"EXT_color_buffer_float"))return!1;return e5(e)}function Z2e(t){if(t===0)return!1;const e=Zo(t);if(t===1){if(!wo(e,"OES_texture_float")||!wo(e,"WEBGL_color_buffer_float"))return!1}else{if(wo(e,"EXT_color_buffer_float"))return e5(e);const n="EXT_color_buffer_half_float";if(wo(e,n)){const r=e.getExtension(n);return ewe(e,r)}return!1}return e5(e)}function e5(t){const e=KI(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function ewe(t,e){const n=KI(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),s}function twe(t){return t!==2?!1:Zo(t).fenceSync!=null}function l0(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&U(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const et=me();et.registerFlag("HAS_WEBGL",()=>et.getNumber("WEBGL_VERSION")>0),et.registerFlag("WEBGL_VERSION",()=>Az(2)?2:Az(1)?1:0),et.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),et.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>et.get("WEBGL_VERSION")===2),et.registerFlag("WEBGL_CPU_FORWARD",()=>!0),et.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),et.registerFlag("WEBGL_PACK",()=>et.getBool("HAS_WEBGL")),et.registerFlag("WEBGL_PACK_NORMALIZATION",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_CLIP",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_REDUCE",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_LAZILY_UNPACK",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_CONV_IM2COL",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>X2e(et.getNumber("WEBGL_VERSION"))),et.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>Q2e(et.getNumber("WEBGL_VERSION"))),et.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=et.getNumber("WEBGL_VERSION");return t===0?0:Y2e(t)}),et.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>et.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!ON()),et.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>J2e(et.getNumber("WEBGL_VERSION"))),et.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>et.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:et.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),et.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Z2e(et.getNumber("WEBGL_VERSION"))),et.registerFlag("WEBGL_FENCE_API_ENABLED",()=>twe(et.getNumber("WEBGL_VERSION"))),et.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>et.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),et.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)}),et.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>ON()?1:-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)}),et.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),et.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),et.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),et.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),et.registerFlag("WEBGL_EXP_CONV",()=>!1),et.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>et.getBool("IS_TEST")),et.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),et.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),et.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wa(){let t,e,n,r,a,i,o,s,l,u;return me().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=me().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pd(t,e,n="index"){const r=rt(e);return r.map((a,i)=>{const o=`int ${t[i]} = ${n} / ${a}`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${a}`:`index -= ${t[i]} * ${a}`;return`${o}; ${s};`}).join("")}function vw(t,e,n="index"){const r=rt(e);return r.map((a,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${s};`}).join("")}function nwe(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]=`(${a[i+1]} * ${r[i+1]})`;return a}function rwe(t,e,n="index"){const r=t.map((i,o)=>o),a=nwe(r,e);return a.map((i,o)=>{const s=`int ${t[o]} = ${n} / ${a[o]}`,l=o===a.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${a[o]}`:`index -= ${t[o]} * ${a[o]}`;return`${s}; ${l};`}).join("")}function t5(t){const e=rt(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function n5(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const Dz=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const{getBroadcastDims:Lz}=u7;function awe(t,e,n){const r=[];if(t.forEach(p=>{const f=be(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?r.push(`uniform float ${p.name}${f>1?`[${f}]`:""};`):(r.push(`uniform sampler2D ${p.name};`),r.push(`uniform int offset${p.name};`)),n.enableShapeUniforms){const{uniformShape:g}=r5(n.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(g.length){case 1:r.push(`uniform int ${p.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${p.name}Shape;`);break}r.push(`uniform ivec2 ${p.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(p=>{r.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const a=r.join(`
`),i=t.map(p=>iwe(p,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,s=Wa(),l=lwe(s);let u,c,d=dwe(s);return e.isPacked?(u=owe(e.logicalShape,o,n.enableShapeUniforms),c=cwe(s)):(u=swe(e.logicalShape,o,n.enableShapeUniforms),c=uwe(s)),n.packedInputs&&(d+=mwe),[d,l,c,a,u,i,n.userCode].join(`
`)}function ph(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Twe(t,e);case 1:return _we(t,e);case 2:return $we(t,e);case 3:return Mwe(t,e);case 4:return Fwe(t,e);case 5:return Awe(t);case 6:return Dwe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function zz(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return Nwe(t);case 1:return Iwe(t,e);case 2:return Rwe(t,e);case 3:return Owe(t,e);default:return Pwe(t,e)}}function iwe(t,e,n=!1,r){let a="";n?a+=zz(t,r):a+=ph(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?a+=Lwe(t,e):a+=zwe(t,e)),a}function owe(t,e,n){switch(t.length){case 0:return Bz();case 1:return gwe(t,e,n);case 2:return Cwe(t,e,n);case 3:return bwe(t,e,n);default:return xwe(t,e,n)}}function swe(t,e,n){switch(t.length){case 0:return Bz();case 1:return ywe(t,e,n);case 2:return Ewe(t,e,n);case 3:return vwe(t,e,n);case 4:return wwe(t,e,n);case 5:return kwe(t,e);case 6:return Swe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function lwe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function uwe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function cwe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function dwe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${pwe}
    ${hwe}
    ${fwe}
  `}const pwe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,hwe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,fwe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,mwe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Bz(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function gwe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function ywe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function bwe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[2]/2),i=a*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec3(b, r, c);
    }
  `}function vwe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${vw(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=pd(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function xwe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[t.length-1]/2),i=a*Math.ceil(t[t.length-2]/2);let o=i,s="",l="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],s=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+s,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${s}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec${t.length}(${l});
    }
  `}function wwe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${vw(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=pd(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function kwe(t,e){const n=pd(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Swe(t,e){const n=pd(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Cwe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Sn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const a=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec2(r, c);
    }
  `}function Ewe(t,e,n){return Sn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function hd(t){return`offset${t}`}function Nwe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Wa();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Twe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[a,i]=t.shapeInfo.texShape;if(a===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=hd(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[s,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${s}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function Iwe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape,i=Wa();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function _we(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${hh(t)}
      }
    `;const a=t.shapeInfo.texShape,i=a[0],o=a[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=hd(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${s});
      return sampleTexture(${n}, uv);
    }
  `}function Rwe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],s=i[1],l=Wa();if(i!=null&&Sn(n,i))return e?`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${a}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${a}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function $we(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&Sn(n,i)){if(e)return`
      float ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=i[0],f=i[1];return`
    float ${a}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:s}=gl(n),l=o;if(l.length<n.length){const p=fh(t,l),f=["row","col"];return`
      ${ph(p,e)}
      float ${a}(int row, int col) {
        return ${a}(${mh(f,s)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${hh(t)}
      }
    `;const u=i[0],c=i[1],d=hd(r);return c===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${a}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${a}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function Owe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const p=n.slice(1),f=[1,2],g=fh(t,p),y=["b","row","col"];return`
        ${zz(g,e)}
        vec4 ${a}(int b, int row, int col) {
          return ${a}(${mh(y,f)});
        }
      `}const s=Wa();if(e)return`
    vec4 ${a}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `;const l=o[0],u=o[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${a}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `}function Mwe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:s,keptDims:l}=gl(n),u=s;if(u.length<n.length){const y=fh(t,u),v=["row","col","depth"];return`
        ${ph(y,e)}
        float ${a}(int row, int col, int depth) {
          return ${a}(${mh(v,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${hh(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],p=c[1],f=t.shapeInfo.flatOffset;if(p===i&&f==null)return e?`
      float ${a}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${a}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===o&&f==null)return e?`
      float ${a}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const g=hd(r);return e?`
    float ${a}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${g};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${a}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${g};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Pwe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Wa();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,s=t.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=l[0],c=l[1],d=Math.ceil(i[o-1]/2);let p=d*Math.ceil(i[o-2]/2),f="int b, int row, int col",g=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let y=2;y<o-1;y++)f=`int b${y}, `+f,p*=i[o-y-1],g=`b${y} * ${p} + `+g;return`
    vec4 ${r}(${f}) {
      int index = ${g};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${a.texture2D}(${n}, uv);
    }
  `}function Fwe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,{newShape:l,keptDims:u}=gl(n);if(l.length<n.length){const x=fh(t,l),w=["row","col","depth","depth2"];return`
      ${ph(x,e)}
      float ${a}(int row, int col, int depth, int depth2) {
        return ${a}(${mh(w,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${s}, ${o}, ${i}, 1)));
        ${hh(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1],g=`int stride2 = ${r}Shape[3];`,y=`int stride1 = ${r}Shape[2] * stride2;`,v=`int stride0 = ${r}Shape[1] * stride1;`;if(f===s&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        ${g}
        ${y}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===i&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const b=hd(r);return e?`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${g}
      ${y}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${b});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${p}, ${f}, index + ${b});
      return sampleTexture(${r}, uv);
    }
  `}function Awe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e[4],i=e[3]*a,o=e[2]*i,s=e[1]*o,{newShape:l,keptDims:u}=gl(e);if(l.length<e.length){const y=fh(t,l),v=["row","col","depth","depth2","depth3"];return`
      ${ph(y)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${mh(v,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${s}, ${o}, ${i}, ${a})) +
          depth3;
        ${hh(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1];if(f===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=hd(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} + depth * ${i} +
          depth2 * ${a} + depth3 + ${g};
      vec2 uv = uvFromFlat(${p}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Dwe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=gl(e);if(a.length<e.length){const v=fh(t,a),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${ph(v)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${mh(b,i)});
      }
    `}const o=e[5],s=e[4]*o,l=e[3]*s,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${s})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${hh(t)}
      }
    `;const d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,f=p[0],g=p[1];if(g===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${s}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=hd(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${s} + depth3 * ${o} + depth4 + ${y};
      vec2 uv = uvFromFlat(${f}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function hh(t){const e=t.name,n=be(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function Lwe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,s=Lz(t.shapeInfo.logicalShape,e.logicalShape),l=On(o),u=o-i;let c;const d=["x","y","z","w","u","v"];i===0?c="":o<2&&s.length>=1?c="coords = 0;":c=s.map(v=>`coords.${d[v+u]} = 0;`).join(`
`);let p="";o<2&&i>0?p="coords":p=t.shapeInfo.logicalShape.map((v,b)=>`coords.${d[b+u]}`).join(", ");let f="return outputValue;";const g=be(t.shapeInfo.logicalShape)===1,y=be(e.logicalShape)===1;if(i===1&&!g&&!y)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!y)o===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(s.length){const v=i-2,b=i-1;s.indexOf(v)>-1&&s.indexOf(b)>-1?f="return vec4(outputValue.x);":s.indexOf(v)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(b)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${a}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${p});
      ${f}
    }
  `}function zwe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===l&&t.shapeInfo.flatOffset==null&&Sn(o,i))return`
      float ${a}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=On(l),c=Lz(t.shapeInfo.logicalShape,e.logicalShape),d=l-s;let p;const f=["x","y","z","w","u","v"];s===0?p="":l<2&&c.length>=1?p="coords = 0;":p=c.map(y=>`coords.${f[y+d]} = 0;`).join(`
`);let g="";return l<2&&s>0?g="coords":g=t.shapeInfo.logicalShape.map((y,v)=>`coords.${f[v+d]}`).join(", "),`
    float ${a}() {
      ${u} coords = getOutputCoords();
      ${p}
      return get${r}(${g});
    }
  `}function On(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function r5(t,e,n){const{newShape:r,keptDims:a}=gl(e),i=e.length,o=t&&i===3&&e[0]===1,s=o?e.slice(1):r,l=!t&&i>1&&!Sn(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?s:e,keptDims:a}}function fh(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function mh(t,e){return e.map(n=>t[n]).join(", ")}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bwe(t,e,n,r){const a=n.map((c,d)=>{const p={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(p.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:p}}),i=a.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=awe(a,o,e),l=M2e(t.gl,s),u=t.createProgram(l);return me().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:i,outShapeInfo:o},jz(t,e,u))}function jz(t,e,n){const r={},a={},i={},o=[];let s,l,u,c=null,d=null;d=t.getUniformLocation(n,"NAN",!1),me().getNumber("WEBGL_VERSION")===1&&(c=t.getUniformLocation(n,"INFINITY",!1));const p=!1;for(let f=0;f<e.variableNames.length;f++){const g=e.variableNames[f];r[g]=t.getUniformLocation(n,g,p),r[`offset${g}`]=t.getUniformLocation(n,`offset${g}`,p),e.enableShapeUniforms&&(a[`${g}Shape`]=t.getUniformLocation(n,`${g}Shape`,p),i[`${g}TexShape`]=t.getUniformLocation(n,`${g}TexShape`,p))}return e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",p),u=t.getUniformLocation(n,"outShapeStrides",p),l=t.getUniformLocation(n,"outTexShape",p)),e.customUniforms&&e.customUniforms.forEach((f,g)=>{o[g]=t.getUniformLocation(n,f.name,p)}),{uniformLocations:r,customUniformLocations:o,infLoc:c,nanLoc:d,inShapesLocations:a,inTexShapesLocations:i,outShapeLocation:s,outShapeStridesLocation:u,outTexShapeLocation:l}}function Uz(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const a=n.logicalShape,i=e[r],o=i.shape;if(!Sn(a,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${a} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const s=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!Sn(s,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${l} must match`)})}function jwe(t,e,n,r,a){e.program.enableShapeUniforms||(Uz(e.inShapeInfos,n),Uz([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),me().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((l,u)=>{const c=e.program.variableNames[u],d=e.uniformLocations[c],p=e.uniformLocations[`offset${c}`],f=e.inShapesLocations[`${c}Shape`],g=e.inTexShapesLocations[`${c}TexShape`];if(f){const{uniformShape:y}=r5(e.program.packedInputs,l.shape,l.texData.texShape);switch(y.length){case 1:t.gl.uniform1iv(f,new Int32Array(y));break;case 2:t.gl.uniform2iv(f,new Int32Array(y));break;case 3:t.gl.uniform3iv(f,new Int32Array(y));break;case 4:t.gl.uniform4iv(f,new Int32Array(y));break}}if(g&&t.gl.uniform2i(g,l.texData.texShape[0],l.texData.texShape[1]),d!=null){if(l.isUniform){if(be(l.shape)<2)t.gl.uniform1f(d,l.uniformValues[0]);else{let y=l.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),t.gl.uniform1fv(d,y)}return}l.texData.slice!=null&&p!=null&&t.gl.uniform1i(p,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,d,u)}});const s=e.outShapeLocation;if(s)switch(r.shape.length){case 1:t.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(s,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=rt(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&a&&e.program.customUniforms.forEach((l,u)=>{const c=e.customUniformLocations[u],d=a[u];if(l.type==="float")t.gl.uniform1fv(c,d);else if(l.type==="vec2")t.gl.uniform2fv(c,d);else if(l.type==="vec3")t.gl.uniform3fv(c,d);else if(l.type==="vec4")t.gl.uniform4fv(c,d);else if(l.type==="int")t.gl.uniform1iv(c,d);else if(l.type==="ivec2")t.gl.uniform2iv(c,d);else if(l.type==="ivec3")t.gl.uniform3iv(c,d);else if(l.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}),t.executeProgram()}function Uwe(t,e,n){let r="";e.concat(n).forEach(o=>{const s=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=r5(t.packedInputs,o.shape,l);let p="",f="",g="";if(c.length===1&&t.packedInputs){const C=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${C[0]>1}_${C[1]>1}`}else if(c.length===2&&!t.packedInputs)f=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const C=rt(c);g=`${C[0]===l[1]}_${C[C.length-1]===l[1]}`}const y=o.shape.length,v=c.length===2&&Sn(o.shape,l),b=be(o.shape)===1,x=td(o.shape,n.shape),w=!t.packedInputs&&y===n.shape.length&&Sn(l,n.texData.texShape),S=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${y}_${w}_${u?d:""}_${c.length}_${b}_${x}_${v}_${p}_${f}_${g}_${S}_${s}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${s}`}});const a=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+a+`${me().getNumber("WEBGL_VERSION")}`,i}function Ga(t){return me().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Vwe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=o0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Wa();this.outputShape=e,this.enableShapeUniforms=Ga(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?vw(["r","c","d"],e):pd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Wwe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=o0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Wa();this.outputShape=e,this.enableShapeUniforms=Ga(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?vw(["r","c","d"],e):pd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Gwe{constructor(e){this.variableNames=["A"],this.outTexUsage=Ui.DOWNLOAD;const n=Wa();this.outputShape=e,this.userCode=`
      ${Dz}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Hwe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ui.DOWNLOAD;const n=Wa();this.outputShape=e,this.userCode=`
      ${Dz}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class qwe{constructor(e,n=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Wa();this.outputShape=e,this.enableShapeUniforms=Ga(this.outputShape.length);let a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?n5():t5(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${r.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${r.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Kwe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Wa();this.outputShape=e,this.enableShapeUniforms=Ga(this.outputShape.length);let a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){const l=o*2+s;a+=`
          localCoords = coords;
          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${s};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?n5():t5(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${a}

          ${r.output} = ${i};
        }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xwe(t){const e=Wa(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return O2e(t,n)}function Qwe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return D2e(t,e)}function Ywe(t){const e=new Uint16Array([0,1,2,2,1,3]);return L2e(t,e)}function u0(t,e,n,r,a,i){B2e(e,n);const o=z2e(t),s=t.TEXTURE_2D;return Ke(t,()=>t.bindTexture(s,o)),Ke(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Ke(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Ke(t,()=>t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)),Ke(t,()=>t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)),me().getNumber("WEBGL_VERSION")===1?Ke(t,()=>t.texImage2D(s,0,r,e,n,0,a,i,null)):Ke(t,()=>t.texStorage2D(s,1,r,e,n)),Ke(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function Vz(t){return t.internalFormatFloat}function Jwe(t,e,n,r){const[a,i]=s0(e,n);return u0(t,a,i,Vz(r),r.textureFormatFloat,t.FLOAT)}function Wz(t){return t.internalFormatHalfFloat}function Zwe(t,e,n,r){const[a,i]=s0(e,n);return u0(t,a,i,Wz(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function Gz(t){return t.downloadTextureFormat}function eke(t,e,n,r){const[a,i]=s0(e,n);return u0(t,a,i,Gz(r),t.RGBA,t.UNSIGNED_BYTE)}function Hz(t){return t.internalFormatPackedFloat}function tke(t,e,n,r){const[a,i]=uh(e,n);return u0(t,a,i,Hz(r),t.RGBA,t.FLOAT)}function qz(t){return t.internalFormatPackedHalfFloat}function nke(t,e,n,r){const[a,i]=uh(e,n);return u0(t,a,i,qz(r),t.RGBA,r.textureTypeHalfFloat)}function rke(t,e,n){return Ke(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Pz(t,e,"clipSpacePos",n,3,20,0)&&Pz(t,e,"uv",n,2,20,12)}function ake(t,e,n,r,a,i){Ke(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,s,l;a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),s=t.FLOAT,l=i.internalFormatPackedFloat),o.set(a),me().getNumber("WEBGL_VERSION")===2?Ke(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,s,o)):Ke(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,s,o)),Ke(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function ike(t,e,n){Ke(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?me().getNumber("WEBGL_VERSION")===2?Ke(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ke(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):me().getNumber("WEBGL_VERSION")===2?Ke(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Ke(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Ke(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function oke(t,e,n,r){const a=t.createBuffer();Ke(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,a));const i=4*4*e*n;return Ke(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)),Ke(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Ke(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),a}function ske(t,e,n){const r=t,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function lke(t,e,n,r){const[a,i]=s0(e,n),o=4,s=new Uint8Array(E2e(e*n,o));return Ke(t,()=>t.readPixels(0,0,a,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function uke(t,e,n,r,a,i,o,s){const l=t,u=new Float32Array(N2e(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function cke(t,e,n){const r=new Float32Array(e*n*4);return Ke(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class a5{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=me().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,k2e(n,e)):this.gl=Zo(n);let r="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),me().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=mw(this.gl,i),wo(this.gl,o))this.textureHalfFloatExtension=mw(this.gl,o);else if(me().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),wo(this.gl,a))this.colorBufferHalfFloatExtension=mw(this.gl,a);else if(me().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",wo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(wo(this.gl,a))this.colorBufferHalfFloatExtension=this.gl.getExtension(a);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=Qwe(this.gl),this.indexBuffer=Ywe(this.gl),this.framebuffer=j2e(this.gl),this.textureConfig=KI(this.gl,this.textureHalfFloatExtension)}get debug(){return me().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Ke(e,()=>e.finish()),Ke(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Ke(e,()=>e.deleteFramebuffer(this.framebuffer)),Ke(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Ke(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Ke(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),Jwe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),Zwe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),eke(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),ike(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,a){this.throwIfDisposed(),ake(this.gl,e,n,r,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),nke(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),tke(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(Fz(this.gl,this.framebuffer),this.outputTexture=null),Ke(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>lke(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,a,i,o){return uke(this.gl,e,n,r,a,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return ske(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const a=oke(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(me().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=a.clientWaitSync(i,0,0);return o===a.ALREADY_SIGNALED||o===a.CONDITION_SATISFIED},n=i}else me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>cke(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=Xwe(n));const r=F2e(n);return Ke(n,()=>n.attachShader(r,this.vertexShader)),Ke(n,()=>n.attachShader(r,e)),A2e(n,r),this.debug&&XI(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=rke(n,this.program,this.vertexBuffer)),r}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Ke(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&XI(this.gl,this.program),Ke(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?V2e(this.gl,e,n):W2e(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Ke(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),G2e(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[a,i]=uh(n,r);this.setOutputMatrixTextureDriver(e,a,i)}setOutputMatrixWriteRegion(e,n,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,n)}setOutputPackedMatrixWriteRegion(e,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&XI(this.gl,this.program),gw(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),Ke(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Ke(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=mw(this.gl,me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(a.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await J4(()=>this.disposed||this.isQueryAvailable(e,me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),a=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=dke(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in me().platform&&(r=me().platform.setTimeoutCustom.bind(me().platform)),J4(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),QI(this.gl,e,this.framebuffer),this.debug&&gw(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(QI(this.gl,this.outputTexture,this.framebuffer),this.debug&&gw(this.gl)):Fz(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const a=this.gl;QI(a,e,this.framebuffer),this.debug&&gw(a),this.outputTexture=e,Ke(a,()=>a.viewport(0,0,n,r)),Ke(a,()=>a.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,a){this.throwIfDisposed(),Ke(this.gl,()=>this.gl.scissor(e,n,r,a))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function dke(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const{addImpl:pke,bincountImpl:Kz,bincountReduceImpl:hke,castImpl:fke,ceilImpl:mke,concatImpl:gke,equalImpl:yke,expImpl:bke,expm1Impl:vke,floorImpl:xke,gatherNdImpl:wke,gatherV2Impl:kke,greaterImpl:Ske,greaterEqualImpl:Cke,lessImpl:Eke,lessEqualImpl:Nke,linSpaceImpl:Tke,logImpl:Ike,maxImpl:_ke,maximumImpl:Rke,minimumImpl:$ke,multiplyImpl:Oke,negImpl:Mke,notEqualImpl:Pke,prodImpl:Fke,raggedGatherImpl:Ake,raggedTensorToTensorImpl:Dke,rangeImpl:Lke,rsqrtImpl:zke,scatterImpl:Bke,sigmoidImpl:jke,simpleAbsImpl:Xz,sliceImpl:Uke,sparseFillEmptyRowsImpl:Vke,sparseReshapeImpl:Wke,sparseSegmentReductionImpl:Qz,sqrtImpl:Gke,stridedSliceImpl:Hke,stringNGramsImpl:qke,stringSplitImpl:Kke,stringToHashBucketFastImpl:Xke,subImpl:Qke,tileImpl:Yke,topKImpl:Jke,transposeImpl:i5,uniqueImpl:Zke}=l1e;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yz(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Ha(t,e){return e===1?[t]:Yz(t,e)}function eSe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class tSe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Ga(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Ha("rc",this.rank),r=On(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${a}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let i=`${r===0?"r":"rp1"}, ${a===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],a=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${a};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Jz{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Ga(this.outputShape.length);let r="";for(let a=0;a<4;a++){let i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${a}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${a>0?"}":""}
      `}this.userCode=`
      ${nSe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?n5():t5(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function nSe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?rwe(["r","c","d"],"inputShape"):pd(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class rSe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,n,r){const a=eB(n,r),i=tB(e,a,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=Zz(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].shift();return this.usedTextures[i].push(l),l}let s;return a===oa.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===oa.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===oa.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===oa.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===oa.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,n,r,a){if(this.freeTextures==null)return;const i=eB(r,a),o=tB(n,i,a);o in this.freeTextures||(this.freeTextures[o]=[]);const s=Zz(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,a),l=me().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function aSe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F||e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function Zz(t,e,n,r,a){const i=iSe(e,r);let o;if(a){const[l,u]=uh(t[0],t[1]);o=l*u}else{const[l,u]=s0(t[0],t[1]);o=l*u}const s=aSe(n,i);return o*s}function iSe(t,e){switch(t){case oa.PACKED_2X2_FLOAT32:return Hz(e);case oa.PACKED_2X2_FLOAT16:return qz(e);case oa.UNPACKED_FLOAT32:return Vz(e);case oa.UNPACKED_FLOAT16:return Wz(e);case oa.PACKED_4X1_UNSIGNED_BYTE:return Gz(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function oSe(t){return me().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?oa.PACKED_2X2_FLOAT32:oa.UNPACKED_FLOAT32:t?oa.PACKED_2X2_FLOAT16:oa.UNPACKED_FLOAT16}function eB(t,e){if(t===Ui.UPLOAD)return oa.PACKED_2X2_FLOAT32;if(t===Ui.RENDER||t==null)return oSe(e);if(t===Ui.DOWNLOAD||t===Ui.PIXELS)return oa.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function tB(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Rl{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Ga(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const ko="if (isnan(x)) return x;",sSe="return x;",nB="return abs(x);",lSe="return (x >= 0.0) ? x : (exp(x) - 1.0);",uSe=ko+`
  return (x < 0.0) ? 0.0 : x;
`,cSe=ko+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,gh="return x;",dSe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pSe="return x;",hSe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,fSe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mSe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,gSe="return 1.0 / (1.0 + exp(-1.0 * x));";class fd{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Ga(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class ySe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Ga(this.outputShape.length);const n=e.length,r=Ha("rc",n),a=On(n),i=eSe(n,r),o=r.slice(-2),s=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${a} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${s}));
      }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const bSe=U2,vSe=1e-7,xSe=1e-4,o5={};function wSe(t){return t in o5||(o5[t]={}),o5[t]}const kSe=me().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),SSe=600;function CSe(){return me().global.screen==null?1024:me().global.screen.height*me().global.screen.width*window.devicePixelRatio*SSe/1024/1024}class tk extends Iv{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!me().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof a5)n=e;else{const r=Zo(me().getNumber("WEBGL_VERSION"),e);n=new a5(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Zo(me().getNumber("WEBGL_VERSION"));n=new a5(r),this.binaryCache=wSe(me().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new rSe(this.gpgpu),this.numMBBeforeWarning=CSe(),this.texData=new Y4(this,kl())}nextDataId(){return tk.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,n,r){if((me().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||me().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:n,dtype:r,values:e,usage:Ui.UPLOAD,refCount:1}),a}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,a,i){if(me().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:a,values:n,usage:Ui.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:a,complexTensorInfos:i,slice:o,shape:s,isPacked:l}=n;if(o!=null){let p;l?p=new fd(s,gh):p=new Rl(s,gh);const f=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:a}],a),g=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(a==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=ki());let d;if(a==="complex64"){const p=this.readSync(i.real.dataId),f=this.readSync(i.imag.dataId);d=Tl(p,f)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=ki()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const g=this.pendingRead.get(e);return new Promise(y=>g.push(y))}const n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:o,complexTensorInfos:s,isPacked:l}=n;if(i!=null){let g;l?g=new fd(a,gh):g=new Rl(a,gh);const y=this.runWebGLProgram(g,[{dataId:e,shape:a,dtype:o}],o),v=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),v}if(r!=null)return this.convertAndCacheOnCPU(e);if(me().getBool("DEBUG")&&!me().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&me().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(o!=="complex64"&&me().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const g=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(g.texture.texture,...fw(a))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const g=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),y=g[0],v=g[1];d=Tl(y,v)}else if(u==null)d=this.getValuesFromTexture(e);else{const g=be(a);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,g)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const g=this.gpgpu.gl;Ke(g,()=>g.deleteBuffer(u))}const p=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(g=>g(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&kl().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const r=this.texData.get(e),{values:a,shape:i,slice:o,dtype:s,isPacked:l,texture:u}=r;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let f;l?f=new fd(i,gh):f=new Rl(i,gh);const g=this.runWebGLProgram(f,[{dataId:e,shape:i,dtype:s}],s),y=this.readToGPU(g,n);return this.disposeIntermediateTensorInfo(g),y}if(u==null)throw a!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=kl().makeTensorFromTensorInfo(c),p=this.texData.get(c.dataId);return Object.assign({tensorRef:d},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>bl(a));return Tt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Tt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!R2e(r))throw me().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:a}=this.texData.get(e),i=be(n);if(me().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),f=this.texData.get(p.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...fw(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(p),g}const o=me().getBool("WEBGL_PACK")&&a===!0,s=o?YI(n):n,l=o?new Hwe(s):new Gwe(s),u=this.runWebGLProgram(l,[{shape:s,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let a=!1;this.programTimersStack==null?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=ml(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=ml(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,a&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);s.kernelMs=aA(l),s.getExtraProfileInfo=()=>l.map((u,c)=>({name:o[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ki(),endMs:null}}endTimer(e){return me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=ki(),e)}async getQueryTime(e){if(me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:a,usage:i,isPacked:o,slice:s}=this.texData.get(e),l=s&&s.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=kSe){return me().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&be(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){ji("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return bSe(e.shape,n)}packedUnaryOp(e,n,r){const a=new fd(e.shape,n),i=this.compileAndRun(a,[e],r);return kl().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const a=Xz(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,a)}if(me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,nB,e.dtype);const n=new Rl(e.shape,nB),r=this.compileAndRun(n,[e]);return kl().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&ks(r[0])){const i=r.map(o=>Ss(o));a=this.write(i,e,n)}else a=this.write(r,e,n);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:n}}makeOutput(e,n,r){return kl().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new ySe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new tSe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[ch(e.shape),...dh(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[ch(n),...dh(n)],o=new Jz(i,r),s=!0,l=[r],u=this.runWebGLProgram(o,[a],e.dtype,l,s);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:a,shape:i,dtype:o}=r;if(n!=null){const p=be(i),f=n[0]*n[1]*4;U(p<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=YI(i);let l;a?l=new Wwe(s):l=new Vwe(s);const u=!0,c=[n??fw(s)],d=this.runWebGLProgram(l,[{shape:s,dtype:o,dataId:e}],o,c,u,n);return{dtype:o,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,a,i=!1,o){const s=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(s.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===o0.DENSE){const b=o??fw(e.outputShape);l.texShape=b.map(x=>x*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),be(s.shape)===0)return l.values=$r(s.dtype,0),s;const u=[],c=n.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(b.dataId);if(x.texture==null){if(!e.packedInputs&&be(b.shape)<=me().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!x.isPacked!=!!e.packedInputs)b=x.isPacked?this.unpackTensor(b):this.packTensor(b),u.push(b),x=this.texData.get(b.dataId);else if(x.isPacked&&!bw(x.shape,b.shape)){const w=b,S=b.shape;b.shape=x.shape,b=this.packedReshape(b,S),u.push(b),x=this.texData.get(b.dataId),w.shape=S}return{shape:b.shape,texData:x,isUniform:!1}});this.uploadToGPU(s.dataId);const d={shape:s.shape,texData:l,isUniform:!1},p=Uwe(e,c,d),f=this.getAndSaveBinary(p,()=>Bwe(this.gpgpu,e,c,d)),g=this.activeTimers!=null;let y;g&&(y=this.startTimer()),me().get("ENGINE_COMPILE_ONLY")||jwe(this.gpgpu,f,c,d,a),u.forEach(b=>this.disposeIntermediateTensorInfo(b)),g&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const v=me().get("WEBGL_FLUSH_THRESHOLD");if(v>0){const b=ki();b-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!me().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}compileAndRun(e,n,r,a,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,a,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(me().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Xt(()=>{if(!me().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=me().getBool("DEBUG");me().set("DEBUG",!1);const n=this.abs(Bt(1e-8)).dataSync()[0];if(me().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?vSe:xSe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:a,values:i,texture:o,usage:s,isPacked:l}=n;if(o!=null)return;const u=this.activeTimers!=null;let c;u&&(c=ki());let d=n.texShape;if(d==null&&(d=K2e(r,l),n.texShape=d),i!=null){const p=YI(r);let f,g=d[1],y=d[0];const v=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!v)&&([g,y]=uh(d[0],d[1])),l?f=new Kwe(p,v):f=new qwe(p,v);const b=v?[y,g]:d,x=this.makeTensorInfo(b,a),w=this.texData.get(x.dataId);v?w.usage=Ui.PIXELS:w.usage=Ui.UPLOAD,w.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),g,y,i);const S=[[y,g]],C=!0,E=this.runWebGLProgram(f,[x],a,S,C),R=this.texData.get(E.dataId);n.texShape=R.texShape,n.isPacked=R.isPacked,n.usage=R.usage,me().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(n.texture=R.texture,n.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(x),u&&(this.uploadWaitMs+=ki()-c)}else{const p=this.acquireTexture(d,s,a,l);n.texture=p}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:a}=r;return this.releaseGPUData(e),n!=null&&(r.values=ESe(n,a)),r.values}acquireTexture(e,n,r,a){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,a)}computeBytes(e,n){return e[0]*e[1]*$v(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(a=>{try{this.checkCompletion_(n),a(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await AL(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(Mz(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:n,customUniformLocations:r,infLoc:a,nanLoc:i,inShapesLocations:o,inTexShapesLocations:s,outShapeLocation:l,outShapeStridesLocation:u,outTexShapeLocation:c}=jz(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=n,e.customUniformLocations=r,e.infLoc=a,e.nanLoc=i,e.inShapesLocations=o,e.inTexShapesLocations=s,e.outShapeLocation=l,e.outShapeStridesLocation=u,e.outTexShapeLocation=c}}}tk.nextDataId=0;function ESe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/MN()&&XN("webgl",()=>new tk,2);/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const s5=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class yh{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Ut(n,r),this.enableShapeUniforms=Ga(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const c0=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class d0{constructor(e,n,r,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ut(n,r);const i=this.outputShape.length;this.enableShapeUniforms=Ga(i);let o="";if(a)if(i===0||be(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${On(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const s=Ha("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ii(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const NSe={kernelName:Hm,backendName:"webgl",kernelFunc:Ii};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ju(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=Ii({inputs:{x:r},backend:n}),l=Ii({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:l},i}const TSe={kernelName:Hv,backendName:"webgl",kernelFunc:ju};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rB="return (a < 0.) ? b * a : a;",aB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function ISe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",yl(i,"float32")),s=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new d0(aB,a.shape,o.shape):new yh(rB,a.shape,o.shape),l=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const _Se={kernelName:xx,backendName:"webgl",kernelFunc:ISe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const iB="return (a < 0.) ? b * a : a;",oB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function RSe(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e,i=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new d0(oB,r.shape,a.shape):new yh(iB,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}const $Se={kernelName:zx,backendName:"webgl",kernelFunc:RSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const bh="if (isnan(x)) return x;";function Qt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:i})=>{const{x:o}=a,s=i,l=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&n!=null){const d=s.texData.get(o.dataId),p=n(d.values,l);return s.makeTensorInfo(o.shape,l,p)}const u=me().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new fd(o.shape,e):c=new Rl(o.shape,t),s.runWebGLProgram(c,[o],l)}}function sa({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:i}){return({inputs:o,backend:s})=>{const{a:l,b:u}=o,c=s;if(r&&l.dtype==="complex64"){const g=c.texData.get(l.dataId),y=c.texData.get(u.dataId),[v,b]=[[g.complexTensorInfos.real,y.complexTensorInfos.real],[g.complexTensorInfos.imag,y.complexTensorInfos.imag]].map(w=>{const[S,C]=w,E={dataId:S.dataId,dtype:S.dtype,shape:l.shape},R={dataId:C.dataId,dtype:C.dtype,shape:u.shape},T=new yh(t,l.shape,u.shape);return c.runWebGLProgram(T,[E,R],si(S.dtype,C.dtype))}),x=ju({inputs:{real:v,imag:b},backend:c});return c.disposeIntermediateTensorInfo(v),c.disposeIntermediateTensorInfo(b),x}const d=i||si(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&a!=null){const g=c.texData.get(l.dataId).values,y=c.texData.get(u.dataId).values,v=l.dtype==="string"?ld(g):g,b=l.dtype==="string"?ld(y):y,[x,w]=a(l.shape,u.shape,v,b,d),S=c.makeTensorInfo(w,d),C=c.texData.get(S.dataId);return C.values=x,S}const p=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return p?f=new d0(e,l.shape,u.shape,n):f=new yh(t,l.shape,u.shape),c.runWebGLProgram(f,[l,u],d)}}function p0(t,e=!1){if(t==="linear")return e?pSe:sSe;if(t==="relu")return e?fSe:uSe;if(t==="elu")return e?hSe:lSe;if(t==="relu6")return e?mSe:cSe;if(t==="prelu")return e?oB:iB;if(t==="leakyrelu")return e?aB:rB;if(t==="sigmoid")return e?gSe:dSe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class sB{constructor(e,n,r,a=!1,i=!1,o=!1,s=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Ga(this.outputShape.length);const c=a?e[1]:e[2],d=Math.ceil(c/2),p=a?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",g=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],y=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",b="";s&&(l?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:u?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:v=`vec4 activation(vec4 x) {
          ${s}
        }`,b="result = activation(result);");const x=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let w="rc.x",S="rc.x";e[0]<n[0]?w=`int(min(float(rc.x), ${e[0]-1}.))`:n[0]<e[0]&&(S=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${d}; i++) {
          int batchA = ${w};
          int batchB = ${S};
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${g[0]} * ${y[0]});
          result += (${g[1]} * ${y[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${b}

        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lB={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class uB{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ut(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cB="return a * b;";function l5(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,i=si(r.dtype,a.dtype);if(r.dtype==="complex64"){const s=n.texData.get(r.dataId),l=n.texData.get(a.dataId),u=new uB(lB.REAL,r.shape,a.shape),c=new uB(lB.IMAG,r.shape,a.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:r.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:a.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:a.shape}],p=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),g=ju({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}if(n.shouldExecuteOnCPU([r,a])){const s=n.texData.get(r.dataId),l=n.texData.get(a.dataId),[u,c]=Oke(r.shape,a.shape,s.values,l.values,i),d=n.makeTensorInfo(c,i),p=n.texData.get(d.dataId);return p.values=u,d}let o;return me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new d0(cB,r.shape,a.shape):o=new yh(cB,r.shape,a.shape),n.runWebGLProgram(o,[r,a],i)}const OSe={kernelName:og,backendName:"webgl",kernelFunc:l5};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function MSe(t,e,n){const r=[ch(t.shape),...dh(t.shape)],a={dtype:t.dtype,shape:r,dataId:t.dataId},i=[ch(e),...dh(e)],o=new Jz(i,r),s=!0,l=[r],u=n.runWebGLProgram(o,[a],t.dtype,l,s);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Le(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,o=n,s=be(a.shape),l=Z4(i,s),u=be(l);U(s===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${a.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(a.dataId);return c.isPacked&&!bw(a.shape,l)&&!(c.texture!==null&&bw(c.shape,l))?MSe(a,l,o):(o.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype})}const PSe={kernelName:Gx,backendName:"webgl",kernelFunc:Le};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class dB{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:o}=e;this.outputShape=[a,o];const s=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${Wc(d)?d.toPrecision(2):d}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${s};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class FSe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:o}=e;this.outputShape=[a,o];let s="0.0",l="";n==="prod"?s="1.0":n==="min"?(s="1.0 / 1e-20",l="min"):n==="max"&&(s="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,d=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(s="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(s="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let g="";i%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${s};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${s});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ASe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=rw(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function md(t,e,n,r){const a=ASe(t.shape);let i=t;for(let o=0;o<a.length;o++){const{inSize:s,windowSize:l,outSize:u}=a[o];let c,d;n==="mean"?c=o===0?new dB({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},s):new dB({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u}):c=new FSe({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},n),d=i,i=r.runWebGLProgram(c,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class DSe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const a=On(this.rank),i=LSe(n);this.userCode=`
    void main() {
      ${a} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function LSe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let a=0;a<t.length;a++)r[t[a]]=n[a];return r.join()}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class zSe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=On(this.rank),i=Yz("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=i[c];const s=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`
    void main() {
      ${a} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xw(t,e,n){const r=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zSe(t.shape,e):new DSe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function BSe(t,e,n,r){const a=e,i=t.shape.length,o=Jt(a,t.shape);let s=o;const l=gr(s,i),u=l!=null;let c=t;u&&(c=xw(t,l,r),s=yr(s.length,i)),ia("sum",s,i);const[d,p]=aa(c.shape,s);let f=d;n&&(f=Pr(d,o));const g=be(p),y=be(t.shape)/g,v=Le({inputs:{x:c},attrs:{shape:[y,g]},backend:r}),b=N2(t.dtype),x=md(v,b,"sum",r),w=Le({inputs:{x},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(x),u&&r.disposeIntermediateTensorInfo(c),w}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ww(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;return BSe(a,i,o,n)}const jSe={kernelName:Zx,backendName:"webgl",kernelFunc:ww};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qa(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{perm:i}=r,o=n,s=a.shape.length,l=new Array(s);for(let c=0;c<l.length;c++)l[c]=a.shape[i[c]];let u;if(o.shouldExecuteOnCPU([a])){const c=o.texData.get(a.dataId).values,d=i5(c,a.shape,a.dtype,i,l);u=o.makeTensorInfo(l,a.dtype);const p=o.texData.get(u.dataId);p.values=d}else u=xw(a,i,o);return u}const USe={kernelName:Lp,backendName:"webgl",kernelFunc:qa};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pB=1e3;function kw({a:t,b:e,transposeA:n,transposeB:r,backend:a,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],p=r?e.shape[c-1]:e.shape[c-2],f=n?t.shape[u-1]:t.shape[u-2],g=r?e.shape[c-2]:e.shape[c-1],y=t.shape.slice(0,-2),v=e.shape.slice(0,-2),b=be(y),x=be(v),w=Ut(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,g]);U(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const S=n?[b,d,f]:[b,f,d],C=r?[x,g,p]:[x,p,g],E=Le({inputs:{x:t},backend:a,attrs:{shape:S}}),R=Le({inputs:{x:e},backend:a,attrs:{shape:C}}),T=[E,R],$=Math.max(b,x),P=n?E.shape[1]:E.shape[2],D=i!=null,B=o!=null,z=l==="leakyrelu",q=l!=null?p0(l,!0):null,Y=D||B||z||q!=null;let J;if((f===1||g===1)&&P>pB&&Y===!1){let L=E,Q=R;n&&(L=qa({inputs:{x:E},backend:a,attrs:{perm:[0,2,1]}}),T.push(L)),r&&(Q=qa({inputs:{x:R},backend:a,attrs:{perm:[0,2,1]}}),T.push(Q));const Z=g!==1,te=g===1;let oe=L;Z&&(oe=Le({inputs:{x:L},backend:a,attrs:{shape:[$,P,1]}}),T.push(oe));const he=g===1?2:1;let ae=Q;te&&(ae=Le({inputs:{x:Q},backend:a,attrs:{shape:[$,1,P]}}),T.push(ae));const de=l5({inputs:{a:oe,b:ae},backend:a});J=ww({inputs:{x:de},backend:a,attrs:{axis:he,keepDims:!0}}),T.push(de)}else{const L=si(t.dtype,e.dtype),Q=new sB(S,C,[$,f,g],n,r,D,q,B,z),Z=[E,R];if(i!=null&&Z.push(i),B&&Z.push(o),z){const te=a.makeTensorInfo([],"float32",yl(s,"float32"));Z.push(te),T.push(te)}J=a.runWebGLProgram(Q,Z,L)}const H=Le({inputs:{x:J},backend:a,attrs:{shape:w}});T.push(J);for(const L of T)a.disposeIntermediateTensorInfo(L);return H}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function VSe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return kw({a,b:i,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:d,activation:c})}const WSe={kernelName:Tg,backendName:"webgl",kernelFunc:VSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hB="return abs(x);";function GSe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=Xz(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let a;return me().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new fd(r.shape,hB):a=new Rl(r.shape,hB),n.runWebGLProgram(a,[r],r.dtype)}const HSe={kernelName:Pv,backendName:"webgl",kernelFunc:GSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qSe=ko+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,KSe=Qt({opSnippet:qSe}),XSe={kernelName:Cm,backendName:"webgl",kernelFunc:KSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const QSe=ko+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,YSe=Qt({opSnippet:QSe}),JSe={kernelName:Em,backendName:"webgl",kernelFunc:YSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fB="return a + b;",ZSe=sa({opSnippet:fB,packedOpSnippet:fB,supportsComplex:!0,cpuKernelImpl:pke}),eCe={kernelName:Dp,backendName:"webgl",kernelFunc:ZSe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class tCe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${a};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class nCe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${a};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sw(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Ii({inputs:{x:r[0]},backend:n});if(r.length>me().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const s=Math.floor(r.length/2),l=Sw({inputs:r.slice(0,s),backend:n}),u=Sw({inputs:r.slice(s),backend:n});return Sw({inputs:[l,u],backend:n})}const a=r.map(s=>s.dtype).reduce((s,l)=>si(s,l)),i=r.map(s=>s.shape),o=me().getBool("WEBGL_PACK")?new nCe(r[0].shape,i):new tCe(r[0].shape,i);return n.runWebGLProgram(o,r,a)}const rCe={kernelName:Fv,backendName:"webgl",kernelFunc:Sw};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function aCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Jt(i,a.shape);let u=l;const c=gr(u,s);let d=a;c!=null&&(d=qa({inputs:{x:a},backend:n,attrs:{perm:c}}),u=yr(u.length,s)),ia("all",u,s);const[p,f]=aa(d.shape,u),g=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=md(y,y.dtype,"all",n);let b;if(o){const x=Pr(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const iCe={kernelName:Av,backendName:"webgl",kernelFunc:aCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Jt(i,a.shape);let u=l;const c=gr(u,s);let d=a;c!=null&&(d=qa({inputs:{x:a},backend:n,attrs:{perm:c}}),u=yr(u.length,s)),ia("any",u,s);const[p,f]=aa(d.shape,u),g=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=md(y,y.dtype,"any",n);let b;if(o){const x=Pr(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const sCe={kernelName:Dv,backendName:"webgl",kernelFunc:oCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lCe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:a,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const s=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${a};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${a}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${s} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class uCe{constructor(e,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,U(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");const s=this.outputShape,l=s.length,u=On(l),c=Ha("coords",l);let d,p;if(o===1){p=l+1;const T=On(p);d=`
        ${T} sourceLocR = ${T}(${c.join()}, 0);
        ++${c[l-1]};
        ${T} sourceLocG = ${T}(${c.join()}, 0);
        ++${c[l-2]};
        ${T} sourceLocA = ${T}(${c.join()}, 0);
        --${c[l-1]};
        ${T} sourceLocB = ${T}(${c.join()}, 0);
        --${c[l-2]};`}else p=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,p),g="."+f[p-1],y=f.map(T=>"int "+T),v=Ha("sourceLocR",p-1).concat("inIdx.r"),b=Ha("sourceLocG",p-1).concat("inIdx.g"),x=Ha("sourceLocB",p-1).concat("inIdx.b"),w=Ha("sourceLocA",p-1).concat("inIdx.a"),S=r==="max"?"greaterThan":"lessThan",C=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${w.join()})));`,E=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,R=a?"":`
      float getBestIndicesAChannel(${y.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${y.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${R}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${s[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${s[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},
          sourceLocB${g}, sourceLocA${g}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${S}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mB(t,e,n,r=null){let a=e.shape[0],i=e.shape[1];r!=null&&(a=r.shape[0],i=r.shape[1]);const o=rw(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},l=new lCe(s,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=mB(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function gB(t,e,n,r=null){const a=r!=null?r.shape:e.shape,i=a[a.length-1],o=rw(i),s=new uCe(a,o,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(s,l,"int32");if(u.shape.length===e.shape.length){const c=gB(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function yB(t,e,n,r){const a=[n];if(ia("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,e.shape.length),!me().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),s=o!==null&&o.isPacked;let l=e;s&&(l=t.unpackTensor(e),i.push(l));const[u,c]=aa(l.shape,a),d=be(c),p=Le({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(p);const f=mB(t,p,r);i.push(f);const g=Le({inputs:{x:f},backend:t,attrs:{shape:u}});return i.forEach(y=>t.disposeIntermediateTensorInfo(y)),g}return gB(t,e,r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let o=Jt(i,a.shape);const s=gr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=qa({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=yr(o.length,l.shape.length)),ia("argMax",[o[0]],l.shape.length);const c=yB(n,l,o[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const dCe={kernelName:Lv,backendName:"webgl",kernelFunc:cCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let o=Jt(i,a.shape);const s=gr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=qa({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=yr(o.length,l.shape.length)),ia("argMin",[o[0]],l.shape.length);const c=yB(n,l,o[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const hCe={kernelName:zv,backendName:"webgl",kernelFunc:pCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fCe=ko+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,mCe=Qt({opSnippet:fCe}),gCe={kernelName:Nm,backendName:"webgl",kernelFunc:mCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yCe=ko+"return log(x + sqrt(x * x + 1.0));",bCe=Qt({opSnippet:yCe}),vCe={kernelName:Tm,backendName:"webgl",kernelFunc:bCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xCe=ko+`
  return atan(x);
`,wCe=Qt({opSnippet:xCe}),kCe={kernelName:Im,backendName:"webgl",kernelFunc:wCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const SCe=s5+`
  return atan(a, b);
`,CCe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+c0+`
  return result;
`,ECe=sa({opSnippet:SCe,packedOpSnippet:CCe}),NCe={kernelName:Rm,backendName:"webgl",kernelFunc:ECe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const TCe=ko+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,ICe=Qt({opSnippet:TCe}),_Ce={kernelName:_m,backendName:"webgl",kernelFunc:ICe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class h0{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const y=n==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,b=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let x="0.0";if(y||(x="-1.0 / 1e-20"),r){const T=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${l});
        const ivec2 pads = ivec2(${f}, ${g});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${T} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${a?i?v:b:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / count");const C=Math.floor(o/4)*4,E=o%4,R=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${l});
      const ivec2 pads = ivec2(${f}, ${g});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${R}
          }

          int xC = xCCorner + ${C};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${R}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${R}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${R}
          }
        }
        setOutput(${S});
      }
    `}}class u5{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,p=e.dilationWidth,f=e.effectiveFilterDepth,g=e.effectiveFilterHeight,y=e.effectiveFilterWidth,v=e.padInfo.front,b=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const w=n==="avg";let S="0.0";if(w||(S="-1.0 / 1e-20"),r){const P=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${l}, ${u});
        const ivec3 pads = ivec3(${v}, ${b}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${g};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${y};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${P} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${a?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${g} * ${y} +
                      wR * ${y} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let E=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(E="avgValue / count");const R=Math.floor(o/4)*4,T=o%4,$=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${l}, ${u});
      const ivec3 pads = ivec3(${v}, ${b}, ${x});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${R}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${$}
            }

            int xC = xCCorner + ${R};
            if (${T===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${T===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${T===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${$}
            }
          }
          setOutput(${E});
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function RCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;l0(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;U(Ca(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=fo(a.shape,i,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&Sn(c.inShape,c.outShape))return Ii({inputs:{x:a},backend:n});const d=new h0(c,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}const $Ce={kernelName:Bv,backendName:"webgl",kernelFunc:RCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function OCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],d=Sl(a.shape,i,o,c,s,l,u),p=new u5(d,"avg",!1);return n.runWebGLProgram(p,[a],"float32")}const MCe={kernelName:jv,backendName:"webgl",kernelFunc:OCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class PCe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,d=u-1-e.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class FCe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,g=d-1-e.padInfo.front,y=p-1-e.padInfo.top,v=f-1-e.padInfo.left,b=1/(n*r*a);this.userCode=`
      const ivec3 pads = ivec3(${g}, ${y}, ${v});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ACe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],p=Sl(o.shape,s,l,d,u,c),f=new FCe(p);return n.runWebGLProgram(f,[a],o.dtype)}const DCe={kernelName:sN,backendName:"webgl",kernelFunc:ACe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function LCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i;l0([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=fo(o.shape,s,l,1,u),d=new PCe(c);return n.runWebGLProgram(d,[a],o.dtype)}const zCe={kernelName:oN,backendName:"webgl",kernelFunc:LCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function BCe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:o,transposeB:s}=r;return kw({a,b:i,transposeA:o,transposeB:s,backend:n})}const jCe={kernelName:Uv,backendName:"webgl",kernelFunc:BCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class UCe{constructor(e,n,r,a,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Ut(e,n),Ut(e,r);let s="0.0";a!=null&&(Ut(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="1.0";i!=null&&(Ut(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class VCe{constructor(e,n,r,a,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ut(e,n),Ut(e,r);let s="vec4(0.0)";a!=null&&(Ut(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(Ut(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const WCe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:a,variance:i,offset:o,scale:s}=t;U(a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,a,i];let c=null;o!=null&&(c=o.shape,u.push(o));let d=null;s!=null&&(d=s.shape,u.push(s));const p=me().getBool("WEBGL_PACK_NORMALIZATION")?new VCe(r.shape,a.shape,i.shape,c,d,l):new UCe(r.shape,a.shape,i.shape,c,d,l);return e.runWebGLProgram(p,u,u[0].dtype)},GCe={kernelName:mx,backendName:"webgl",kernelFunc:WCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class HCe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=On(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=qCe(this.rank);let a;const i=e.map((o,s)=>`sourceLoc.${c5[s]} = start[${s}] + coords.${c5[s]};`);a=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${a}
        setOutput(getSource(${r}));
      }
    `}}const c5=["x","y","z","w","u","v"];function qCe(t){if(t===1)return"sourceLoc";if(t<=6)return c5.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class KCe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=On(this.rank),r=Ha("coords",this.rank),a=Ha("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${a.slice(-2).join()})`,o=`getChannel(getSource(${a.join()}), ${i})`,s=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${a[this.rank-1]};
        result.y = ${o};
        --${a[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${a[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${a[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${a[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${s}
        ${l}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function XCe(t,e,n,r){const a=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=t.dtype;let s=aT(e,rt(t.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function vh(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:o}=r,[s,l]=iT(a,i,o);if(tT(a,s,l),be(l)===0)return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){const d=n.texData.get(a.dataId),p=Uke(d.values,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,p)}const{isPacked:u}=n.texData.get(a.dataId),c=rT(a.shape,s,l);if(u||!c){const d=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new KCe(l):new HCe(l),p=[s];return n.runWebGLProgram(d,[a],a.dtype,p)}return n.uploadToGPU(a.dataId),XCe(a,s,l,n)}const QCe={kernelName:Jx,backendName:"webgl",kernelFunc:vh};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const YCe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:o}=r;U(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((x,w)=>x*w),l=Zg(a.shape,i,s),u=e0(l.length,i.length),c=t0(a.shape,i,s),d=nI(o,i.length),p=rI(c,o,i.length),f=[],g=Le({inputs:{x:a},backend:n,attrs:{shape:l}}),y=qa({inputs:{x:g},backend:n,attrs:{perm:u}}),v=Le({inputs:{x:y},backend:n,attrs:{shape:c}}),b=vh({inputs:{x:v},backend:n,attrs:{begin:d,size:p}});return f.push(g),f.push(y),f.push(v),f.forEach(x=>n.disposeIntermediateTensorInfo(x)),b},JCe={kernelName:Vv,backendName:"webgl",kernelFunc:YCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ZCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o}=r,s=n.readSync(a.dataId),l=n.readSync(i.dataId),u=Kz(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const e3e={kernelName:Wv,backendName:"webgl",kernelFunc:ZCe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function t3e(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=Ut(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const n3e={kernelName:Gv,backendName:"webgl",kernelFunc:t3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r3e="return float(a != b);",bB=sa({opSnippet:r3e,cpuKernelImpl:Pke,dtype:"bool"}),a3e={kernelName:sg,backendName:"webgl",kernelFunc:bB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function f0(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return Ii({inputs:{x:a.complexTensorInfos.real},backend:n})}const i3e={kernelName:Wx,backendName:"webgl",kernelFunc:f0};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const o3e="return float(int(x));";function s3e(t,e){const n=new Rl(t.shape,o3e),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function d5(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return Ii({inputs:{x:a},backend:n});const o=Mu(a.shape),s=d5({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),l=ju({inputs:{real:s,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(s),l}if(a.dtype==="complex64"){const o=f0({inputs:{input:a},backend:n}),s=d5({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),s}if(!eN(a.dtype,i)){const o=Ii({inputs:{x:a},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){const o=n.texData.get(a.dataId).values,[s,l,u]=fke(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,l,u)}if(i==="int32")return s3e(a,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",$r("bool",1)),s=bB({inputs:{a,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),s}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}const l3e={kernelName:$m,backendName:"webgl",kernelFunc:d5};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vB="return ceil(x);",u3e=Qt({opSnippet:vB,packedOpSnippet:vB,cpuKernelImpl:mke}),c3e={kernelName:Om,backendName:"webgl",kernelFunc:u3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class d3e{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class p3e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{clipValueMin:i,clipValueMax:o}=r;let s;me().getBool("WEBGL_PACK_CLIP")?s=new p3e(a.shape):s=new d3e(a.shape);const l=[[i],[o]];return n.runWebGLProgram(s,[a],a.dtype,l)}const f3e={kernelName:Mm,backendName:"webgl",kernelFunc:h3e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class m3e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xB(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function g3e(t){const{inputs:e,backend:n}=t,{x:r}=e,a=n.texData.get(r.dataId),i=new m3e(r.shape),o=[xB(r,a.complexTensorInfos.real),xB(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const y3e={kernelName:qv,backendName:"webgl",kernelFunc:g3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class b3e{constructor(e){this.outputShape=[],this.outputShape=Rs(e,1),this.variableNames=e.map((o,s)=>`T${s}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const s=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${s}));`)}const a=n.length,i=n[n.length-1];r.push(`else setOutput(getT${a}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class v3e{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Rs(e,n);const r=this.outputShape,a=r.length,i=On(a),o=Ha("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map((y,v)=>`T${v}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let y=1;y<l.length;y++)l[y]=l[y-1]+e[y][n];const u=s[n],c=s.slice(-2),d=s.join();let p=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let y=1;y<l.length;y++){const v=l[y-1];p+=`
        if (${u} < ${l[y]}  && ${u} >= ${l[y-1]}) {
          return getChannel(
            getT${y}(${Cw(s,u,v)}),
            vec2(${Cw(c,u,v)}));
        }`}const f=l.length,g=l[l.length-1];p+=`
        return getChannel(
          getT${f}(${Cw(s,u,g)}),
          vec2(${Cw(c,u,g)}));`,this.userCode=`
      float getValue(${s.map(y=>"int "+y)}) {
        ${p}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[a-1]} = ${o[a-1]} + 1;
        if (${o[a-1]} < ${r[a-1]}) {
          result.g = getValue(${o});
        }

        ${o[a-2]} = ${o[a-2]} + 1;
        if (${o[a-2]} < ${r[a-2]}) {
          result.a = getValue(${o});
        }

        ${o[a-1]} = ${o[a-1]} - 1;
        if (${o[a-2]} < ${r[a-2]} &&
            ${o[a-1]} < ${r[a-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function Cw(t,e,n){const r=t.indexOf(e);return t.map((a,i)=>i===r?`${a} - ${n}`:a).join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ew(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return Ii({inputs:{x:a.complexTensorInfos.imag},backend:n})}const x3e={kernelName:vx,backendName:"webgl",kernelFunc:Ew};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m0(t,e,n){const r=t[0].dtype;if(r==="complex64"){const d=t.map(v=>f0({inputs:{input:v},backend:n})),p=t.map(v=>Ew({inputs:{input:v},backend:n})),f=m0(d,e,n),g=m0(p,e,n),y=ju({inputs:{real:f,imag:g},backend:n});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}let a=n.shouldExecuteOnCPU(t);if(r==="string"&&(a=!0),a){const d=t.map(x=>{const w=[-1,be(x.shape.slice(e))];return Le({inputs:{x},backend:n,attrs:{shape:w}})}),p=d.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),f=Rs(d.map(x=>x.shape),1),g=d[0].shape[0]===1,y=gke(p,f,r,g),v=Rs(t.map(x=>x.shape),e),b=n.makeTensorInfo(v,r,y);return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const i=me().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(t.length>i){const d=[];for(let f=0;f<t.length;f+=i){const g=t.slice(f,f+i);d.push(m0(g,e,n))}const p=m0(d,e,n);for(const f of d)n.disposeIntermediateTensorInfo(f);return p}if(me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].shape.length>1){const d=new v3e(t.map(p=>p.shape),e);return n.runWebGLProgram(d,t,r)}const{tensors2D:o,outShape:s}=w3e(t,e,n),l=new b3e(o.map(d=>d.shape)),u=n.runWebGLProgram(l,o,r);o.forEach(d=>n.disposeIntermediateTensorInfo(d));const c=Le({inputs:{x:u},attrs:{shape:s},backend:n});return n.disposeIntermediateTensorInfo(u),c}function w3e(t,e,n){const r=Rs(t.map(a=>a.shape),e);return{tensors2D:t.map(a=>Le({inputs:{x:a},attrs:{shape:[-1,be(a.shape.slice(e))]},backend:n})),outShape:r}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wB(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=Jt(a,e[0].shape)[0],o=e.map(u=>u.shape);ZT(o,i);const s=Rs(e.map(u=>u.shape),i);if(be(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(u=>be(u.shape)>0);return l.length===1?Ii({inputs:{x:l[0]},backend:n}):m0(l,i,n)}const k3e={kernelName:Kv,backendName:"webgl",kernelFunc:wB};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class kB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,f=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4,v=e.dataFormat==="channelsLast",b=v?1:2,x=v?2:3,w=v?3:1;let S="",C="";r&&(a?S=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?S=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:S=`
          float activation(float x) {
            ${r}
          }
        `,C="result = activation(result);");const E=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${g}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${y===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${g}) *
                    getW(wR, wC, ${g}, d2);
              } else {
                dotProd +=
                    getX(batch, ${g}, xR, xC) *
                    getW(wR, wC, ${g}, d2);
              }

            } else if (${y===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${y===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2),
                getW(wR, wC, ${g} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1),
                  getX(batch, xR, xC, ${g} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC),
                  getX(batch, ${g} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${C}
        setOutput(result);
      }
    `}}class S3e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,p=e.filterHeight,f=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${s});
      const ivec3 pads = ivec3(${n}, ${r}, ${a});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${g}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${y===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${g}) *
                  getW(wF, wR, wC, ${g}, d2);
              } else if (${y===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${y===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1),
                  getX(batch, xF, xR, xC, ${g} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2),
                  getW(wF, wR, wC, ${g} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class SB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ga(this.outputShape.length);const o=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<c;v++)p+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;p+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<c;v++)p+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(d+1)/2;v++){const b=v*2;if(p+=`
           xC = xCCorner + ${b*l};
           `,s===1){if(b<c&&(o%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,l===1&&b>0?p+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<c)){const x=o%2===0?_v(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:p+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):x===1?p+=`
                     xC${b+1} = xTexelC${b};
                     `:p+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<c&&(o%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<c&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<c&&(p+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<c&&(p+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<c&&(p+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let f="",g="";r&&(a?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,g="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${y}
         ${g}
         setOutput(result);
       }
     `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class C3e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Ga(this.outputShape.length);const{dataFormat:r}=n,a=Wa(),i=r==="channelsLast",o=i?1:2,s=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${s}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${a.output} = result;
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nw(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function CB({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],p=n.outChannels,f=n.dataFormat==="channelsLast",g=!1,y=!1;let v;const b=[];if(i!=null){const x=Nw(i.shape,f);x!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:x}}),b.push(i))}if(a!=null){const x=Nw(a.shape,f);x!=null&&(a=Le({inputs:{x:a},backend:r,attrs:{shape:x}}),b.push(a))}if(!((d===1||p===1)&&c>pB)&&u.isPacked&&f&&u.texture!=null&&l[2]%2!==0&&Sn(u.shape.slice(-3),l.slice(-3))){const x=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},S=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,U(bw(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const C=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(C);const E=kw({a:w,b:C,backend:r,transposeA:g,transposeB:y,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o}),R=r.texData.get(E.dataId);U(R.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=S,R.shape=n.outShape,v=Ii({inputs:{x:E},backend:r}),v.shape=n.outShape,b.push(E)}else{const x=n.outHeight*n.outWidth,w=Le({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,x,n.inChannels]:[n.batchSize,n.inChannels,x]}}),S=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=kw({a:f?w:S,b:f?S:w,transposeA:!f,transposeB:y,backend:r,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o});v=Le({inputs:{x:C},backend:r,attrs:{shape:n.outShape}}),b.push(w),b.push(S),b.push(C)}for(const x of b)r.disposeIntermediateTensorInfo(x);return v}function EB({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:p,dataFormat:f}=n,g=f==="channelsLast",y=l*u*c,v=p*d,b=[n.batchSize,y,v],x=!0,w=!1,S=[];if(i!=null){const L=Nw(i.shape,g);L!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:L}}),S.push(i))}if(a!=null){const L=Nw(a.shape,g);L!=null&&(a=Le({inputs:{x:a},backend:r,attrs:{shape:L}}),S.push(a))}const C=Le({inputs:{x:e},backend:r,attrs:{shape:[1,y,be(e.shape)/y]}});S.push(C);const E=new C3e(b,n),R=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],T=r.runWebGLProgram(E,[t],"float32",R),$=Le({inputs:{x:T},backend:r,attrs:{shape:b}});S.push(T),S.push($);const P=a!=null,D=i!=null,B=s==="leakyrelu",z=s?p0(s,!0):null,q=new sB(g?$.shape:C.shape,g?C.shape:$.shape,g?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],x,w,P,z,D,B),Y=g?[$,C]:[C,$];if(a&&Y.push(a),D&&Y.push(i),B){const L=r.makeTensorInfo([],"float32",yl(o,"float32"));Y.push(L),S.push(L)}const J=r.runWebGLProgram(q,Y,"float32"),H=Le({inputs:{x:J},backend:r,attrs:{shape:n.outShape}});S.push(J);for(const L of S)r.disposeIntermediateTensorInfo(L);return H}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function E3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=Cl(l),p=Gr(a.shape,i.shape,o,u,s,c,!1,d);let f;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))f=CB({x:a,filter:i,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&me().getBool("WEBGL_EXP_CONV")){const y=new SB(p),v=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];f=n.runWebGLProgram(y,[a,i],"float32",v)}else if(me().getBool("WEBGL_CONV_IM2COL"))f=EB({x:a,filter:i,convInfo:p,backend:n});else{const y=new kB(p);f=n.runWebGLProgram(y,[a,i],"float32")}const g=Le({inputs:{x:f},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(f),g}const N3e={kernelName:Xv,backendName:"webgl",kernelFunc:E3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class T3e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${o}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class I3e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",s=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=o?1:2,c=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class _3e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${a} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class R3e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=a-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${a}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${a} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=Cl(l),p=Gr(a.shape,c,o,1,s,u,!1,d),f=new T3e(p);return n.runWebGLProgram(f,[a,i],"float32")}const O3e={kernelName:Qv,backendName:"webgl",kernelFunc:$3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function M3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=Cl(u),p=Gr(o,i.shape,s,1,l,c,!1,d),f=new I3e(p);return n.runWebGLProgram(f,[a,i],"float32")}const P3e={kernelName:Yv,backendName:"webgl",kernelFunc:M3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function F3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r,u=$u(a.shape,i.shape,o,l,s),c=new S3e(u);return n.runWebGLProgram(c,[a,i],"float32")}const A3e={kernelName:Jv,backendName:"webgl",kernelFunc:F3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function D3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,filterShape:l}=r,u=$u(a.shape,l,o,1,s),c=new _3e(u);return n.runWebGLProgram(c,[a,i],"float32")}const L3e={kernelName:lN,backendName:"webgl",kernelFunc:D3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function z3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:o,strides:s,inputShape:l}=r,u=$u(l,i.shape,s,1,o),c=new R3e(u);return n.runWebGLProgram(c,[a,i],"float32")}const B3e={kernelName:Zv,backendName:"webgl",kernelFunc:z3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const j3e=bh+`
  return cos(x);
`,U3e=Qt({opSnippet:j3e}),V3e={kernelName:Pm,backendName:"webgl",kernelFunc:U3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const W3e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,G3e=Qt({opSnippet:W3e}),H3e={kernelName:Fm,backendName:"webgl",kernelFunc:G3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class q3e{constructor(e,n,r,a,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,l,u]=e,[c]=n,[d,p]=r;this.outputShape=[c,d,p,u];const f=a==="bilinear"?1:0,[g,y]=[`${s-1}.0`,`${l-1}.0`],[v,b,x]=d>1?[`${(s-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[w,S,C]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${y} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${y}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${S};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${g} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${y} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const K3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,c=new q3e(a.shape,i.shape,s,l,u);return n.runWebGLProgram(c,[a,i,o],"float32")},X3e={kernelName:nx,backendName:"webgl",kernelFunc:K3e};var g0;(function(t){t.Prod="*",t.Sum="+"})(g0||(g0={}));class NB{constructor(e,n,r,a){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===g0.Prod?"1.0":"0.0",s=r?o:`getX(${TB(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=a?`end != ${l-1}`:"end != 0",c=a?"end + 1":"end - 1"):(u=a?`end + pow2 < ${l}`:"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${On(i)} coords = getOutputCoords();
        int end = ${IB(i,"coords",this.op)};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${IB(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${TB(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function TB(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function IB(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _B(t,e,n,r,a,i){const o=e.shape.length,s=gr([r],o);let l=e;s!=null&&(l=qa({inputs:{x:e},backend:n,attrs:{perm:s}}));const u=yr(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let d=Ii({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(c))-1;p++){const f=new NB(t,l.shape,!1,i),g=[[p]],y=d;d=n.runWebGLProgram(f,[d],d.dtype,g),n.disposeIntermediateTensorInfo(y)}if(a){const p=new NB(t,l.shape,a,i),f=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(s!=null){const p=Wg(s),f=qa({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),f}return d}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Q3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;return _B(g0.Prod,a,n,i,o,s)}const Y3e={kernelName:ex,backendName:"webgl",kernelFunc:Q3e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function J3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;return _B(g0.Sum,a,n,i,o,s)}const Z3e={kernelName:tx,backendName:"webgl",kernelFunc:J3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o,binaryOutput:s}=r;if(a.shape.length===1){const l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=Kz(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){const l=n.bufferSync(a),u=n.bufferSync(i),c=hke(l,u,o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const tEe={kernelName:rx,backendName:"webgl",kernelFunc:eEe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class nEe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:o}=r,s=a.shape[0],l=o==="NHWC"?a.shape[1]:a.shape[2],u=o==="NHWC"?a.shape[2]:a.shape[3],c=o==="NHWC"?a.shape[3]:a.shape[1],d=l*i,p=u*i,f=c/(i*i),g=o==="NHWC"?[s,d,p,f]:[s,f,d,p],y=new nEe(g,i,o);return n.runWebGLProgram(y,[a],a.dtype)}const aEe={kernelName:ax,backendName:"webgl",kernelFunc:rEe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class RB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ga(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(a?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${s}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class $B{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ga(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,p=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<d;b++)f+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;f+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let b=0;b<d;b++)f+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(p+1)/2;b++){const x=b*2;if(f+=`
          xC = xCCorner + ${x*u};
          `,l===1){if(x<d&&(s%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,u===1&&x>0?f+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<d)){const w=s%2===0?_v(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,u>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:f+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):w===1?f+=`
                    xC${x+1} = xTexelC${x};
                    `:f+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<d&&(s%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<d&&(f+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<d&&(f+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<d&&(f+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let g="",y="";r&&(a?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:g=`vec4 activation(vec4 x) {
          ${r}
        }`,y="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${g}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${y}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function iEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),U(Ca(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const d=Gr(a.shape,i.shape,o,c,s,u,!0);let p;me().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new $B(d):p=new RB(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[a,i],"float32",f)}const oEe={kernelName:ix,backendName:"webgl",kernelFunc:iEe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class sEe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class lEe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r,d=Gr(a.shape,c,o,s,l,u,!0),p=new sEe(d);return n.runWebGLProgram(p,[a,i],"float32")}const cEe={kernelName:ox,backendName:"webgl",kernelFunc:uEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r,d=Gr(c,i.shape,o,s,l,u,!0),p=new lEe(d);return n.runWebGLProgram(p,[a,i],"float32")}const pEe={kernelName:sx,backendName:"webgl",kernelFunc:dEe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class hEe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fEe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=[...r.shape,...r.shape],i=be(r.shape),o=Le({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new hEe(i),l=n.runWebGLProgram(s,[o],o.dtype),u=Le({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const mEe={kernelName:lx,backendName:"webgl",kernelFunc:fEe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class gEe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:a,strideHeight:i,strideWidth:o,filterHeight:s,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:d,left:p}=a;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r,u=Bg(a.shape,i.shape,o,s,"NHWC",l);let c;const d=new gEe(u);c=n.runWebGLProgram(d,[a,i],"float32");const p=Le({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),p}const bEe={kernelName:ux,backendName:"webgl",kernelFunc:yEe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vEe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:o,summedDims:s,idDims:l}=fI(a,i.length);gI(o.length,l,i);const{path:u,steps:c}=yI(s,l),d=c.length;let p=null,f=o.length;const g=[];for(let y=0;y<d;++y){for(const v of c[y]){const{permutationIndices:b,expandDims:x}=mI(f,l[v]);let w;bI(b)?w=i[v]:(w=qa({inputs:{x:i[v]},backend:n,attrs:{perm:b}}),g.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);Sn(w.shape,S)||(w=Le({inputs:{x:w},backend:n,attrs:{shape:S}}),g.push(w)),p===null?p=w:(p=l5({inputs:{a:w,b:p},backend:n}),g.push(p))}y<d-1&&(u[y]>=0&&(p=ww({inputs:{x:p},backend:n,attrs:{axis:u[y]-(o.length-f),keepDims:!1}}),g.push(p)),f--)}for(const y of g)y!==p&&n.disposeIntermediateTensorInfo(y);return p}const xEe={kernelName:cx,backendName:"webgl",kernelFunc:vEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wEe="return (x >= 0.0) ? x : (exp(x) - 1.0);",kEe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,SEe=Qt({opSnippet:wEe,packedOpSnippet:kEe}),CEe={kernelName:Dm,backendName:"webgl",kernelFunc:SEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const EEe="return (b >= 1.0) ? a : a * (b + 1.0);",NEe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,TEe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:a}=e,i=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new d0(NEe,r.shape,a.shape):new yh(EEe,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)},IEe={kernelName:dN,backendName:"webgl",kernelFunc:TEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _Ee=`
  return vec4(equal(a, b));
`,REe="return float(a == b);",$Ee=sa({opSnippet:REe,packedOpSnippet:_Ee,dtype:"bool",cpuKernelImpl:yke}),OEe={kernelName:zm,backendName:"webgl",kernelFunc:$Ee};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const MEe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${oI};
  float a1 = ${sI};
  float a2 = ${lI};
  float a3 = ${uI};
  float a4 = ${cI};
  float a5 = ${dI};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,PEe=Qt({opSnippet:MEe}),FEe={kernelName:Lm,backendName:"webgl",kernelFunc:PEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const AEe=bh+`
  return exp(x);
`,DEe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,OB=Qt({opSnippet:AEe,packedOpSnippet:DEe,cpuKernelImpl:bke,dtype:"float32"}),LEe={kernelName:Bm,backendName:"webgl",kernelFunc:OB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function p5(t){const{inputs:e,attrs:n,backend:r}=t,{dim:a}=n,{input:i}=e,o=i.shape.length,s=i.shape.slice();let l=a;return a<0&&(U(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+a+1),s.splice(l,0,1),Le({inputs:{x:i},backend:r,attrs:{shape:s}})}const zEe={kernelName:dx,backendName:"webgl",kernelFunc:p5};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const MB="return exp(x) - 1.0;",BEe=Qt({opSnippet:MB,packedOpSnippet:MB,cpuKernelImpl:vke}),jEe={kernelName:jm,backendName:"webgl",kernelFunc:BEe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class PB{constructor(e,n,r){this.variableNames=["real","imag"];const a=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${a}.0`:"1.0";let s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${s}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${a});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${a}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function FB(t,e,n){const r=n.texData.get(t.dataId),a=be(t.shape),i=t.shape[t.shape.length-1],o=a/i,s=Le({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=s.shape,u=new PB("real",l,e),c=new PB("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),g=ju({inputs:{real:p,imag:f},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f);const y=Le({inputs:{x:g},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(g),y}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function UEe(t){const{inputs:e,backend:n}=t,{input:r}=e;return FB(r,!1,n)}const VEe={kernelName:px,backendName:"webgl",kernelFunc:UEe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class WEe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y0(t){const{backend:e,attrs:n}=t,{shape:r,value:a}=n;let{dtype:i}=n;if(i=i||Ap(a),i==="string"){const o=Or(i,be(r));return o.fill(a),e.makeTensorInfo(r,i,o)}else{const o=new WEe(r,a),s=[[a]];return e.runWebGLProgram(o,[],i,s)}}const GEe={kernelName:hx,backendName:"webgl",kernelFunc:y0};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class HEe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qEe={kernelName:fx,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,a=new HEe(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const AB="return floor(x);",KEe=Qt({opSnippet:AB,packedOpSnippet:AB,cpuKernelImpl:xke}),XEe={kernelName:Um,backendName:"webgl",kernelFunc:KEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const QEe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,YEe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,JEe=sa({opSnippet:QEe,packedOpSnippet:YEe,dtype:"int32"}),ZEe={kernelName:Vm,backendName:"webgl",kernelFunc:JEe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class e4e{constructor(e){this.variableNames=["A"];const n=Wa(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class t4e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Wa(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${a}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const n4e={kernelName:b2,backendName:"webgl",kernelFunc:r4e};let xh,h5=me().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function r4e(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:a}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,[l,u]=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=[u,l],d=[u,l,i];if(s||o){const y=me().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(xh==null||y!==h5)&&(h5=y,xh=document.createElement("canvas").getContext("2d",{willReadFrequently:h5})),xh.canvas.width=l,xh.canvas.height=u,xh.drawImage(a,0,0,l,u),a=xh.canvas}const p=n.makeTensorInfo(c,"int32");n.texData.get(p.dataId).usage=Ui.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);const f=me().getBool("WEBGL_PACK")?new t4e(d):new e4e(d),g=n.runWebGLProgram(f,[p],"int32");return n.disposeData(p.dataId),g}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function a4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:g}=r,y=Cl(c),v=Gr(a.shape,i.shape,l,d,u,p,!1,y);let b;const x=[],w=o!=null,S=s!=null,C=f==="leakyrelu",E=()=>{const T=[a,i],$=(P,D)=>{if(D==="NCHW"&&P.shape.length===1&&P.shape[0]!==1){const B=Le({inputs:{x:P},backend:n,attrs:{shape:[P.shape[0],1,1]}});return x.push(B),B}return P};if(w&&T.push($(o,c)),S&&T.push($(s,c)),C){const P=n.makeTensorInfo([],"float32",yl(g,"float32"));T.push(P),x.push(P)}return T};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))b=CB({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:g});else if(v.strideWidth<=2&&y==="channelsLast"&&me().getBool("WEBGL_EXP_CONV")){const T=f?p0(f,!0):null,$=new SB(v,w,T,S,C),P=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],D=E();b=n.runWebGLProgram($,D,"float32",P)}else if(me().getBool("WEBGL_CONV_IM2COL"))b=EB({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:g});else{const T=f?p0(f,!1):null,$=new kB(v,w,T,S,C),P=E();b=n.runWebGLProgram($,P,"float32")}const R=Le({inputs:{x:b},backend:n,attrs:{shape:v.outShape}});return x.push(b),x.forEach(T=>n.disposeIntermediateTensorInfo(T)),R}const i4e={kernelName:Ig,backendName:"webgl",kernelFunc:a4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function o4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,g=[];let y=c;y==null&&(y=[1,1]),U(Ca(l,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${y}'`);const v=Gr(a.shape,i.shape,l,y,u,d,!0),b=me().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,x=p?p0(p,b):null,w=[a,i],S=o!=null,C=s!=null,E=p==="leakyrelu";if(S&&w.push(o),C&&w.push(s),E){const P=n.makeTensorInfo([],"float32",yl(f,"float32"));w.push(P),g.push(P)}let R;b?R=new $B(v,S,x,C,E):R=new RB(v,S,x,C,E);const T=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],$=n.runWebGLProgram(R,w,"float32",T);return g.forEach(P=>n.disposeIntermediateTensorInfo(P)),$}const s4e={kernelName:_g,backendName:"webgl",kernelFunc:o4e};class l4e{constructor(e,n,r,a){this.sliceDim=e,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;const i=On(r.length);let o=`
    int index;`;for(let s=0;s<this.sliceDim;s++)o+=`
          index = round(getIndices(coords[0], ${s}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};
          flattenIndex += index * ${this.strides[s]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function u4e(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=a.shape,o=i[i.length-1],s=be(r.shape),[l,u,c,d]=R2(r,a),p=Le({inputs:{x:a},backend:n,attrs:{shape:[u,o]}}),f=Le({inputs:{x:r},backend:n,attrs:{shape:[be(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,a])||r.dtype==="string"){const b=n.readSync(a.dataId),x=n.bufferSync(r),w=wke(b,x,r.dtype,u,o,c,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,w.values)}const g=new l4e(o,d,[u,c],r.shape),y=n.runWebGLProgram(g,[f,p],f.dtype),v=Le({inputs:{x:y},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),v}const c4e={kernelName:yx,backendName:"webgl",kernelFunc:u4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class d4e{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=On(this.rank),a=p4e(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${a}));
      }
    `}}function p4e(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<t.length;a++)a===2?r.push("index"):r.push(`${n[a]}`);return r.join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function DB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:o,batchDims:s}=r,l=Jt(o,a.shape)[0];if(me().get("DEBUG")){const x=n.readSync(i.dataId),w=a.shape[l];for(let S=0;S<x.length;++S){const C=x[S];U(C<=w-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${w-1}]`)}}const u=wI(a,i,l,s),c=be(i.shape),d=[],p=Le({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),f=Le({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(p),d.push(f);const g=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,i])||a.dtype==="string"){const x=n.bufferSync(f),w=n.bufferSync(p),S=kke(w,x,g);return d.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(u.outputShape,S.dtype,S.values)}const y=new d4e(p.shape,g),v=n.runWebGLProgram(y,[p,f],p.dtype);d.push(v);const b=Le({inputs:{x:v},backend:n,attrs:{shape:u.outputShape}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const h4e={kernelName:gx,backendName:"webgl",kernelFunc:DB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const f4e="return float(a > b);",m4e=`
  return vec4(greaterThan(a, b));
`,g4e=sa({opSnippet:f4e,packedOpSnippet:m4e,cpuKernelImpl:Ske,dtype:"bool"}),y4e={kernelName:Wm,backendName:"webgl",kernelFunc:g4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const b4e="return float(a >= b);",v4e=`
  return vec4(greaterThanEqual(a, b));
`,x4e=sa({opSnippet:b4e,packedOpSnippet:v4e,dtype:"bool",cpuKernelImpl:Cke}),w4e={kernelName:Gm,backendName:"webgl",kernelFunc:x4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function k4e(t){const{inputs:e,backend:n}=t,{input:r}=e;return FB(r,!0,n)}const S4e={kernelName:bx,backendName:"webgl",kernelFunc:k4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const C4e="return float(!isnan(x) && !isinf(x));",E4e=Qt({opSnippet:C4e,dtype:"bool"}),N4e={kernelName:qm,backendName:"webgl",kernelFunc:E4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const T4e="return float(isinf(x));",I4e=Qt({opSnippet:T4e,dtype:"bool"}),_4e={kernelName:Km,backendName:"webgl",kernelFunc:I4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const R4e="return float(isnan(x));",$4e=Qt({opSnippet:R4e,dtype:"bool"}),O4e={kernelName:Xm,backendName:"webgl",kernelFunc:$4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const M4e="return float(a < b);",P4e=`
  return vec4(lessThan(a, b));
`,F4e=sa({opSnippet:M4e,packedOpSnippet:P4e,cpuKernelImpl:Eke,dtype:"bool"}),A4e={kernelName:Qm,backendName:"webgl",kernelFunc:F4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const D4e="return float(a <= b);",L4e=`
  return vec4(lessThanEqual(a, b));
`,z4e=sa({opSnippet:D4e,packedOpSnippet:L4e,cpuKernelImpl:Nke,dtype:"bool"}),B4e={kernelName:Ym,backendName:"webgl",kernelFunc:z4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function j4e(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,o=Tke(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}const U4e={kernelName:wx,backendName:"webgl",kernelFunc:j4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const V4e=bh+`
  return x < 0.0 ? 0./0. : log(x);
`,W4e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,G4e=Qt({opSnippet:V4e,packedOpSnippet:W4e,cpuKernelImpl:Ike}),H4e={kernelName:Jm,backendName:"webgl",kernelFunc:G4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const q4e=bh+`
  return log(1.0 + x);
`,K4e=Qt({opSnippet:q4e}),X4e={kernelName:Zm,backendName:"webgl",kernelFunc:K4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Q4e="return float(a >= 1.0 && b >= 1.0);",Y4e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,J4e=sa({opSnippet:Q4e,packedOpSnippet:Y4e,dtype:"bool"}),Z4e={kernelName:eg,backendName:"webgl",kernelFunc:J4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const eNe="return float(!(x >= 1.0));",tNe=Qt({opSnippet:eNe}),nNe={kernelName:tg,backendName:"webgl",kernelFunc:tNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rNe="return float(a >= 1.0 || b >= 1.0);",aNe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,iNe=sa({opSnippet:rNe,packedOpSnippet:aNe,dtype:"bool"}),oNe={kernelName:ng,backendName:"webgl",kernelFunc:iNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class sNe{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[];const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${s}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lNe{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const uNe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:o,alpha:s,beta:l}=r,u=me().getBool("WEBGL_PACK_NORMALIZATION")?new lNe(a.shape,i,o,s,l):new sNe(a.shape,i,o,s,l);return n.runWebGLProgram(u,[a],a.dtype)},cNe={kernelName:kx,backendName:"webgl",kernelFunc:uNe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class dNe{constructor(e,n,r,a,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${a}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${a})
                * float(${i})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pNe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r,d=new dNe(a.shape,s,l,u,c);return n.runWebGLProgram(d,[a,i,o],a.dtype)},hNe={kernelName:pN,backendName:"webgl",kernelFunc:pNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fNe(t,e,n,r){const a=be(e),i=be(t.shape)/a,o=Le({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),s=md(o,t.dtype,"max",r),l=Le({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function LB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:o}=r,s=a.shape.length,l=Jt(i,a.shape);let u=l;const c=gr(u,s),d=c!=null,p=n.shouldExecuteOnCPU([a]);let f=a;if(d){if(p){const x=n.texData.get(f.dataId).values,w=new Array(s);for(let E=0;E<w.length;E++)w[E]=a.shape[c[E]];const S=i5(x,a.shape,a.dtype,c,w);f=n.makeTensorInfo(w,a.dtype);const C=n.texData.get(f.dataId);C.values=S}else f=xw(a,c,n);u=yr(u.length,s)}ia("max",u,s);const[g,y]=aa(f.shape,u);let v=g;o&&(v=Pr(g,l));let b;if(p){const x=n.texData.get(f.dataId).values,w=_ke(x,be(y),v,a.dtype);b=n.makeTensorInfo(v,a.dtype);const S=n.texData.get(b.dataId);S.values=w}else b=fNe(f,y,v,n);return d&&n.disposeIntermediateTensorInfo(f),b}const mNe={kernelName:Sx,backendName:"webgl",kernelFunc:LB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gNe=s5+`
  return max(a, b);
`,yNe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+c0+`
  return result;
`,bNe=sa({opSnippet:gNe,packedOpSnippet:yNe,cpuKernelImpl:Rke}),vNe={kernelName:rg,backendName:"webgl",kernelFunc:bNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;l0(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;U(Ca(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=fo(a.shape,i,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&Sn(c.inShape,c.outShape))return Ii({inputs:{x:a},backend:n});const d=new h0(c,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}const wNe={kernelName:Cx,backendName:"webgl",kernelFunc:xNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=Sl(a.shape,i,o,c,s,u,l),p=new u5(d,"max",!1);return n.runWebGLProgram(p,[a],a.dtype)}const SNe={kernelName:Ex,backendName:"webgl",kernelFunc:kNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class CNe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=i-1-e.padInfo.top,l=o-1-e.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class ENe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.front,p=u-1-e.padInfo.top,f=c-1-e.padInfo.left,g=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${g} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function NNe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],p=Sl(o.shape,s,l,d,u,c),f=new u5(p,"max",!0),g=n.runWebGLProgram(f,[o],o.dtype),y=new ENe(p),v=n.runWebGLProgram(y,[a,g],o.dtype);return n.disposeIntermediateTensorInfo(g),v}const TNe={kernelName:fN,backendName:"webgl",kernelFunc:NNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function INe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:o}=e,s=i;l0([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,p=fo(s.shape,l,u,1,c,d),f=!0,g=new h0(p,"max",f),y=n.runWebGLProgram(g,[s],s.dtype),v=new CNe(p),b=n.runWebGLProgram(v,[a,y],s.dtype);return n.disposeIntermediateTensorInfo(y),b}const _Ne={kernelName:hN,backendName:"webgl",kernelFunc:INe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function RNe(t,e,n,r){let a=new h0(n,"max",!1);const i=r.runWebGLProgram(a,[t],"float32");a=new h0(n,"max",!0,!0,e);const o=r.runWebGLProgram(a,[t],"float32");return[i,o]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $Ne={kernelName:Nx,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=e,l=n;U(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];U(Ca(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=fo(r.shape,a,i,u,o),[d,p]=RNe(r,s,c,l);return[d,p]}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ONe(t,e,n,r){const a=be(e),i=be(t.shape)/a,o=Le({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),s=md(o,"float32","mean",r),l=Le({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const MNe={kernelName:Tx,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:a,axis:i}=e,o=n,s=r.shape.length,l=Jt(i,r.shape);let u=l;const c=gr(u,s),d=c!=null,p=o.shouldExecuteOnCPU([r]),f=[];let g=r;if(d){if(p){const w=o.texData.get(g.dataId).values,S=new Array(s);for(let R=0;R<S.length;R++)S[R]=r.shape[c[R]];const C=i5(w,r.shape,r.dtype,c,S);g=o.makeTensorInfo(S,r.dtype);const E=o.texData.get(g.dataId);E.values=C}else g=xw(r,c,o);f.push(g),u=yr(u.length,s)}ia("sum",u,s);const[y,v]=aa(g.shape,u);let b=y;a&&(b=Pr(y,l));const x=ONe(g,v,b,o);for(const w of f)o.disposeIntermediateTensorInfo(w);return x}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function PNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Jt(i,a.shape);let u=l;const c=gr(u,s);let d=a;c!=null&&(d=qa({inputs:{x:a},backend:n,attrs:{perm:c}}),u=yr(u.length,a.shape.length)),ia("min",u,s);const[p,f]=aa(d.shape,u),g=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=md(y,y.dtype,"min",n);let b;if(o){const x=Pr(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const FNe={kernelName:Ix,backendName:"webgl",kernelFunc:PNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ANe=s5+`
  return min(a, b);
`,DNe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+c0+`
  return result;
`,LNe=sa({opSnippet:ANe,packedOpSnippet:DNe,cpuKernelImpl:$ke}),zNe={kernelName:ag,backendName:"webgl",kernelFunc:LNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class BNe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const a=e.length,i=On(a),o=n.map(c=>c[0]).join(","),s=n.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),u=r==="reflect"?0:1;if(a===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${a}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class jNe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((g,y)=>g[0]+e[y]+g[1]);const a=e.length,i=On(a),o=n.map(g=>g[0]).join(","),s=n.map((g,y)=>g[0]+e[y]).join(","),l=Ha("rc",a),u=Ha("source",a),c=`${l[a-1]} < ${this.outputShape[a-1]}`,d=a===1?"source":`vec2(${u.slice(-2).join()})`,p=r==="reflect"?0:1;let f="";if(a===1){const g=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[a-1]} += 1;
        if(${c}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const g=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[a-1]} += 1;
        if(${c}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[a-2]} += 1;
        if(${l[a-2]} < ${this.outputShape[a-2]}) {
          ${g}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[a-1]} += 1;
          if(${c}) {
            ${g}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const UNe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:a,mode:i}=n,o=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jNe(r.shape,a,i):new BNe(r.shape,a,i);return e.runWebGLProgram(o,[r],r.dtype)},VNe={kernelName:_x,backendName:"webgl",kernelFunc:UNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const WNe=`if (b == 0.0) return NAN;
  return mod(a, b);`,GNe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+c0+`
  return result;
`,HNe=sa({opSnippet:WNe,packedOpSnippet:GNe}),qNe={kernelName:ig,backendName:"webgl",kernelFunc:HNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class KNe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const XNe=`
if (a == b) {
  return 1.0;
};
return a / b;`,QNe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,zB=sa({opSnippet:XNe,packedOpSnippet:QNe,checkOutOfBounds:!0}),YNe={kernelName:Am,backendName:"webgl",kernelFunc:zB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const BB="return a - b;",jB=sa({opSnippet:BB,packedOpSnippet:BB,supportsComplex:!0,cpuKernelImpl:Qke}),JNe={kernelName:kg,backendName:"webgl",kernelFunc:jB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function UB(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,o=Jt([i],a.shape),s=LB({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Pr(s.shape,o),u=Le({inputs:{x:s},backend:n,attrs:{shape:l}}),c=jB({inputs:{a,b:u},backend:n}),d=OB({inputs:{x:c},backend:n}),p=ww({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),f=Le({inputs:{x:p},backend:n,attrs:{shape:l}}),g=zB({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}const ZNe={kernelName:n2,backendName:"webgl",kernelFunc:UB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function eTe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:o,normalized:s}=r,l=s?a:UB({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new KNe(u,c,i),p=[[o]],f=n.runWebGLProgram(d,[l],"int32",p);return s||n.disposeIntermediateTensorInfo(l),f}const tTe={kernelName:Rx,backendName:"webgl",kernelFunc:eTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const nTe=ko+`
  return -x;
`,rTe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function aTe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,s]=Mke(i.values,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,o)}let a;return me().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new fd(r.shape,rTe):a=new Rl(r.shape,nTe),n.runWebGLProgram(a,[r],r.dtype)}const iTe={kernelName:$x,backendName:"webgl",kernelFunc:aTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const oTe=K2;function sTe(t){ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),{selectedIndices:d}=oTe(u,c,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const lTe={kernelName:Ox,backendName:"webgl",kernelFunc:sTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const uTe=X2;function cTe(t){ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(a.dataId),d=n.readSync(i.dataId),{selectedIndices:p,validOutputs:f}=uTe(c,d,o,s,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const dTe={kernelName:Mx,backendName:"webgl",kernelFunc:cTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pTe=Q2;function hTe(t){ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(a.dataId),d=n.readSync(i.dataId),p=o,f=s,g=l,y=u,{selectedIndices:v,selectedScores:b}=pTe(c,d,p,f,g,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const fTe={kernelName:Px,backendName:"webgl",kernelFunc:hTe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class mTe{constructor(e,n,r,a){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${a}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gTe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:o,onValue:s,offValue:l}=r,u=be(a.shape),c=new mTe(u,o,s,l),d=Le({inputs:{x:a},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(c,[d],i);n.disposeIntermediateTensorInfo(d);const f=[...a.shape,o],g=Le({inputs:{x:p},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(p),g},yTe={kernelName:Ax,backendName:"webgl",kernelFunc:gTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tw(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const a=f0({inputs:{input:r},backend:n}),i=Tw({inputs:{x:a},backend:n}),o=Ew({inputs:{input:r},backend:n}),s=Tw({inputs:{x:o},backend:n}),l=ju({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return y0({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const bTe={kernelName:y2,backendName:"webgl",kernelFunc:Tw};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function VB(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const a=f0({inputs:{input:r},backend:n}),i=VB({inputs:{x:a},backend:n}),o=Ew({inputs:{input:r},backend:n}),s=Tw({inputs:{x:o},backend:n}),l=ju({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return y0({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const vTe={kernelName:Fx,backendName:"webgl",kernelFunc:VB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xTe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return p5({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{na(i,c.shape,"All tensors passed to stack must have matching shapes"),U(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const d=p5({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(d),d}),u=wB({inputs:l,backend:n,attrs:{axis:a}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const wTe={kernelName:Dx,backendName:"webgl",kernelFunc:xTe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class kTe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const a=e.length,i=On(a),o=n.map(u=>u[0]).join(","),s=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);if(a===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class STe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((y,v)=>y[0]+e[v]+y[1]);const a=e.length,i=On(a),o=n.map(y=>y[0]).join(","),s=n.map((y,v)=>y[0]+e[v]).join(","),l=Ha("rc",a),u=Ha("source",a),c=`${l[a-1]} < ${this.outputShape[a-1]}`,d=a===1?"source":`vec2(${u.slice(-2).join()})`,p=[`${i} rc = outputLoc;`,`${l[a-1]} += 1;
       if(${c}) {
      `,a===1?"":`}
       rc = outputLoc;
       ${l[a-2]} += 1;
       if(${l[a-2]} < ${this.outputShape[a-2]}) {`,a===1?"":`  ${l[a-1]} += 1;
         if(${c}) {`],f=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let y=0,v=a===1?2:4;y<v;y++)g+=`
        ${p[y]}
        if (${f}) {
          result[${y}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${y}] = getChannel(getX(${u.join()}), ${d});
        }
      `;g+=a===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const WB=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:o}=r;if(be(a.shape)===0){const u=i.map((c,d)=>c[0]+a.shape[d]+c[1]);return y0({backend:n,attrs:{shape:u,value:o,dtype:a.dtype}})}const s=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new STe(a.shape,i,o):new kTe(a.shape,i,o),l=[[o]];return n.runWebGLProgram(s,[a],a.dtype,l)},CTe={kernelName:Lx,backendName:"webgl",kernelFunc:WB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ETe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,NTe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+c0+`
  return result;
`,TTe=sa({opSnippet:ETe,packedOpSnippet:NTe}),ITe={kernelName:lg,backendName:"webgl",kernelFunc:TTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _Te(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=[],u=Jt(i,a.shape);let c=u;const d=gr(c,s);let p=a;d!=null&&(p=qa({inputs:{x:a},backend:n,attrs:{perm:d}}),c=yr(c.length,s),l.push(p)),ia("prod",c,s);let f;if(n.shouldExecuteOnCPU([p])){const g=n.texData.get(p.dataId).values,{outVals:y,outShape:v,outDtype:b}=Fke(p.shape,p.dtype,g,c);f=n.makeTensorInfo(v,b,y)}else{const[g,y]=aa(p.shape,c),v=be(y),b=Le({inputs:{x:p},backend:n,attrs:{shape:[-1,v]}}),x=N2(a.dtype),w=md(b,x,"prod",n);f=Le({inputs:{x:w},backend:n,attrs:{shape:g}}),l.push(b),l.push(w)}if(o){l.push(f);const g=Pr(f.shape,u);f=Le({inputs:{x:f},backend:n,attrs:{shape:g}})}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),f}const RTe={kernelName:Bx,backendName:"webgl",kernelFunc:_Te};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $Te(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:s}=r,l=a.map(b=>n.readSync(b.dataId)),u=a.map(b=>b.shape),c=n.readSync(i.dataId),d=n.readSync(o.dataId),[p,f,g]=Ake(l,u,c,i.shape,i.dtype,d,o.shape,s),y=p.map(b=>n.makeTensorInfo([b.length],"int32",b)),v=n.makeTensorInfo(g,i.dtype,f);return y.concat([v])}const OTe={kernelName:jx,backendName:"webgl",kernelFunc:$Te};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function MTe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),d=n.readSync(o.dataId),p=s.map(v=>n.readSync(v.dataId)),f=s.map(v=>v.shape),[g,y]=Dke(u,a.shape,c,i.shape,i.dtype,d,o.shape,p,f,l);return n.makeTensorInfo(g,i.dtype,y)}const PTe={kernelName:Ux,backendName:"webgl",kernelFunc:MTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const GB=t=>{const{backend:e,attrs:n}=t,{start:r,stop:a,step:i,dtype:o}=n,s=Lke(r,a,i,o);return e.makeTensorInfo([s.length],o,s)},FTe={kernelName:Vx,backendName:"webgl",kernelFunc:GB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ATe="return 1.0 / x;",DTe=Qt({opSnippet:ATe}),LTe={kernelName:ug,backendName:"webgl",kernelFunc:DTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zTe=ko+`
  return (x < 0.0) ? 0.0 : x;
`,BTe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,jTe=Qt({opSnippet:zTe,packedOpSnippet:BTe}),UTe={kernelName:cg,backendName:"webgl",kernelFunc:jTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const VTe=ko+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,WTe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,GTe=Qt({opSnippet:VTe,packedOpSnippet:WTe}),HTe={kernelName:dg,backendName:"webgl",kernelFunc:GTe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class qTe{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];let p;i?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class KTe{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];let p;i?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function XTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,u]=s,c=me().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new KTe(a.shape,l,u,i,o):new qTe(a.shape,l,u,i,o);return n.runWebGLProgram(c,[a],"float32")}const QTe={kernelName:qx,backendName:"webgl",kernelFunc:XTe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class YTe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,o,s]=e,l=[r&&o>1?a-1:a,r&&s>1?i-1:i],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],d=l[1]/u[1],p=1/c,f=1/d,g=Math.ceil(p)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${f});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${a-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function JTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r,s=new YTe(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const ZTe={kernelName:gN,backendName:"webgl",kernelFunc:JTe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class eIe{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";let f;i?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class tIe{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";let f;i?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nIe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,u]=s,c=me().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new tIe(a.shape,l,u,i,o):new eIe(a.shape,l,u,i,o);return n.runWebGLProgram(c,[a],a.dtype)}const rIe={kernelName:Hx,backendName:"webgl",kernelFunc:nIe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class aIe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,o,s]=e,l=[r&&o>1?a-1:a,r&&s>1?i-1:i],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],d=l[1]/u[1],p=1/c,f=1/d,g=Math.ceil(p)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${f});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function iIe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r,s=new aIe(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const oIe={kernelName:mN,backendName:"webgl",kernelFunc:iIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class sIe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const a=s=>n.indexOf(s)!==-1&&e[s]!==1?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`,i=e.map((s,l)=>a(l)).join(","),o=On(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lIe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const a=Ha("rc",r),i=`${a[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${a[r-2]} + 1 < ${this.outputShape[r-2]}`,s=On(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(a.slice())};
          if(${i}){
            result.g = ${u(a.slice())};
          }
          if(${o}) {
            result.b = ${c(a.slice())};
            if(${i}) {
              result.a = ${d(a.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(g){return p(g)}function u(g){return g[r-1]="("+g[r-1]+" + 1)",p(g)}function c(g){return g[r-2]="("+g[r-2]+" + 1)",p(g)}function d(g){return g[r-1]="("+g[r-1]+" + 1)",g[r-2]="("+g[r-2]+" + 1)",p(g)}function p(g){const y=e.map((x,w)=>f(w,g)),v=y.join(","),b=y.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${b}))`}function f(g,y){return n.indexOf(g)!==-1&&e[g]!==1?`${e[g]} - ${y[g]} - 1`:`${y[g]}`}}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r,o=a.shape.length,s=Jt(i,a.shape);if(o===0)return Ii({inputs:{x:a},backend:n});const l=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lIe(a.shape,s):new sIe(a.shape,s);return n.runWebGLProgram(l,[a],a.dtype)}const cIe={kernelName:Kx,backendName:"webgl",kernelFunc:uIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class dIe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],a=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pIe={kernelName:v2,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:o}=e,s=n,l=new dIe(r.shape,i),[u,c]=tI(o,r.shape[1],r.shape[2]),d=[[u,c,Math.sin(a),Math.cos(a)]];return s.runWebGLProgram(l,[r],r.dtype,d)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hIe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,fIe=Qt({opSnippet:hIe}),mIe={kernelName:pg,backendName:"webgl",kernelFunc:fIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gIe="return inversesqrt(x);",yIe=Qt({opSnippet:gIe,cpuKernelImpl:zke}),bIe={kernelName:hg,backendName:"webgl",kernelFunc:yIe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class HB{constructor(e,n,r,a,i,o,s=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const l=On(i.length),u=On(o.length);let c="";r===1?c="i":r===2&&(c="i, j");const d=`getIndices(${c})`;let p="";a===1?p="i":a===2&&(p="i, coords[1]");const f=`getUpdates(${p})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${f};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vIe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Hp(i,a,o),p=[d/u,u];if(d===0)return n.makeTensorInfo(o,a.dtype);const f=Le({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),g=Le({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),y=n.makeTensorInfo([],"float32",new Float32Array([0])),v=new HB(l,s,f.shape.length,g.shape.length,c,p),b=n.runWebGLProgram(v,[g,f,y],g.dtype),x=Le({inputs:{x:b},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(y),x}const xIe={kernelName:Xx,backendName:"webgl",kernelFunc:vIe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class wIe{constructor(e,n,r,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,s=me().getNumber("WEBGL_VERSION")===2?i:o,l=a==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${s}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kIe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:o}=r,s=new wIe(a.shape[0],a.shape[1],i.shape[1],o),l=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",l)}const SIe={kernelName:Qx,backendName:"webgl",kernelFunc:kIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class CIe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let a,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",a="resRC";else{const s=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${s[c]}`),c<e&&l.push(`${s[c]}`);a=l.join(),i=u.join()}const o=On(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${a});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function EIe(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e,o=new CIe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],si(a.dtype,i.dtype))}const NIe={kernelName:Yx,backendName:"webgl",kernelFunc:EIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const TIe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${aI};
  float scale = ${iI};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,IIe=Qt({opSnippet:TIe}),_Ie={kernelName:fg,backendName:"webgl",kernelFunc:IIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const RIe=bh+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,$Ie=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,OIe=Qt({opSnippet:RIe,packedOpSnippet:$Ie,cpuKernelImpl:jke}),MIe={kernelName:bg,backendName:"webgl",kernelFunc:OIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const PIe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,FIe=Qt({opSnippet:PIe}),AIe={kernelName:yg,backendName:"webgl",kernelFunc:FIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const DIe=bh+`
  return sin(x);
`,LIe=Qt({opSnippet:DIe}),zIe={kernelName:mg,backendName:"webgl",kernelFunc:LIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const BIe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,jIe=Qt({opSnippet:BIe}),UIe={kernelName:gg,backendName:"webgl",kernelFunc:jIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const VIe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,WIe=Qt({opSnippet:VIe}),GIe={kernelName:vg,backendName:"webgl",kernelFunc:WIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const HIe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:o}=r;U(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((b,x)=>b*x),l=[[0,0]];l.push(...o);for(let b=1+i.length;b<a.shape.length;++b)l.push([0,0]);const u=[],c=WB({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),d=Zg(c.shape,i,s,!1),p=e0(d.length,i.length,!1),f=t0(c.shape,i,s,!1),g=Le({inputs:{x:c},backend:n,attrs:{shape:d}}),y=qa({inputs:{x:g},backend:n,attrs:{perm:p}}),v=Le({inputs:{x:y},backend:n,attrs:{shape:f}});return u.push(c),u.push(g),u.push(y),u.forEach(b=>n.disposeIntermediateTensorInfo(b)),v},qIe={kernelName:e2,backendName:"webgl",kernelFunc:HIe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function KIe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${a.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.readSync(r.dataId),l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],[d,p,f,g,y]=Vke(s,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,f),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const XIe={kernelName:r2,backendName:"webgl",kernelFunc:KIe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function QIe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[u,c,d]=Wke(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const YIe={kernelName:a2,backendName:"webgl",kernelFunc:QIe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function JIe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[u,c]=Qz(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const ZIe={kernelName:i2,backendName:"webgl",kernelFunc:JIe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function e5e(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[u,c]=Qz(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const t5e={kernelName:o2,backendName:"webgl",kernelFunc:e5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function n5e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=Hp(i,a,s),f=!1;if(i.dtype==="string"){const b=n.bufferSync(a),x=n.bufferSync(i),w=bl(n.readSync(o.dataId)[0]),S=Bke(b,x,s,p,c,u,l,d,w,f);return n.makeTensorInfo(s,S.dtype,S.values)}const g=new HB(u,l,a.shape.length,i.shape.length,d,[p,1],f),y=n.runWebGLProgram(g,[i,a,o],i.dtype),v=Le({inputs:{x:y},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(y),v}const r5e={kernelName:s2,backendName:"webgl",kernelFunc:n5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function a5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:o}=r,s=Jt(o,a.shape)[0],l=vI(a,i,s),u=a.shape.length,c=new Array(u).fill(0),d=a.shape.slice();return l.map(p=>{const f=[...d];f[s]=p;const g=vh({inputs:{x:a},backend:n,attrs:{begin:c,size:f}});return c[s]+=p,g})}const i5e={kernelName:t2,backendName:"webgl",kernelFunc:a5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qB="return sqrt(x);",o5e=Qt({opSnippet:qB,packedOpSnippet:qB,cpuKernelImpl:Gke}),s5e={kernelName:xg,backendName:"webgl",kernelFunc:o5e};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const l5e="return x * x;",u5e=Qt({opSnippet:l5e}),c5e={kernelName:yN,backendName:"webgl",kernelFunc:u5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const KB="return (a - b) * (a - b);",d5e=sa({opSnippet:KB,packedOpSnippet:KB}),p5e={kernelName:wg,backendName:"webgl",kernelFunc:d5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h5e({inputs:t,attrs:e,backend:n}){const{x:r}=t,a=ko+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new Rl(r.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}const f5e={kernelName:Ng,backendName:"webgl",kernelFunc:h5e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class m5e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const a=r.length,i=On(r.length),o=On(r.length);let s="";if(a===1)s="coords * strides + begin";else{let l=0;s=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function g5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:f,finalShape:g,isIdentity:y,sliceDim0:v,isSimpleSlice:b,begin:x,end:w,strides:S}=oT(a.shape,i,o,s,l,u,c,d,p);let C;if(y)C=Le({inputs:{x:a},backend:n,attrs:{shape:g}});else if(v||b){U(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const R=nT(x,w,S),T=vh({inputs:{x:a},backend:n,attrs:{begin:x,size:R}});C=Le({inputs:{x:T},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(T)}else if(n.shouldExecuteOnCPU([a])){const R=n.readSync(a.dataId),T=Tt(a.shape,a.dtype,R),$=Hke(f,T,S,x);C=n.makeTensorInfo(g,a.dtype,$.values)}else{const R=new m5e(x,S,f);C=n.runWebGLProgram(R,[a],a.dtype)}const E=Le({inputs:{x:C},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(C),E}const y5e={kernelName:l2,backendName:"webgl",kernelFunc:g5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b5e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,p=n.readSync(c.dataId),f=n.readSync(d.dataId),[g,y]=qke(p,f,a,i,o,s,l,u);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}const v5e={kernelName:u2,backendName:"webgl",kernelFunc:b5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function x5e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[u,c,d]=Kke(s,l,a),p=c.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const w5e={kernelName:c2,backendName:"webgl",kernelFunc:x5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function k5e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),s=Xke(o,a);return n.makeTensorInfo(i.shape,"int32",s)}const S5e={kernelName:d2,backendName:"webgl",kernelFunc:k5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const C5e="return tan(x);",E5e=Qt({opSnippet:C5e}),N5e={kernelName:Sg,backendName:"webgl",kernelFunc:E5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const T5e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,I5e=Qt({opSnippet:T5e}),_5e={kernelName:Cg,backendName:"webgl",kernelFunc:I5e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class R5e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const a=On(this.rank),i=$5e(e);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function $5e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<t.length;a++)r.push(`imod(${n[a]}, ${t[a]})`);return r.join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function XB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;if(a.dtype==="string"||a.shape.length>5){const s=n.readSync(a.dataId),l=a.dtype==="string"?s.map(d=>bl(d)):s,u=Tt(a.shape,a.dtype,l),c=Yke(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}const o=new R5e(a.shape,i);return n.runWebGLProgram(o,[a],a.dtype)}const O5e={kernelName:Eg,backendName:"webgl",kernelFunc:XB};class M5e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class P5e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gd(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function QB(t){let e=1;for(;e<t;)e*=2;return e}function F5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:o}=r,s=me().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=me().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=a.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([a])||c<s||i>l){const $=n.readSync(a.dataId),[P,D]=Jke($,u,a.dtype,i,o);return[n.makeTensorInfo(P.shape,P.dtype,P.values),n.makeTensorInfo(D.shape,D.dtype,D.values)]}if(i===0)return u[u.length-1]=0,[n.makeTensorInfo(u,a.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[a,y0({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(a.dataId),p=d!==null&&d.isPacked,f=p?n.unpackTensor(a):a,g=be(u)/c,y=Le({inputs:{x:f},attrs:{shape:[g,c]},backend:n});p&&gd(n,f);const v=QB(i),b=QB(c);let x=null;const w=()=>x===null?[y,y]:[y,x],S=($,P,D)=>{const B=w(),z=new M5e(D),q=[[c],[x===null?1:0],[Number.NEGATIVE_INFINITY],[$],[P]],Y=x;x=n.runWebGLProgram(z,B,"int32",q),gd(n,Y)};for(let $=1;$<v;$*=2){const P=$*2;for(let D=$;D>=1;D/=2)S(P,D,[g,b])}for(let $=b;$>v;$/=2){const P=w(),D=new P5e([g,$/2]),B=[[c],[x===null?1:0],[v]],z=x;x=n.runWebGLProgram(D,P,"int32",B),gd(n,z);const q=v/2,Y=q*2;for(let J=q;J>=1;J/=2)S(Y,J,x.shape)}let C=x;x=vh({inputs:{x},backend:n,attrs:{begin:0,size:[g,i]}}),gd(n,C);let E=DB({inputs:{x:y,indices:x},backend:n,attrs:{axis:1,batchDims:1}});gd(n,y);const R=u.slice(0,-1);R.push(i),C=x,x=Le({inputs:{x},attrs:{shape:R},backend:n}),gd(n,C);const T=E;return E=Le({inputs:{x:E},attrs:{shape:R},backend:n}),gd(n,T),[E,x]}const A5e={kernelName:p2,backendName:"webgl",kernelFunc:F5e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class D5e{constructor(e,n,r,a,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s=r==="nearest"?1:2;let l;switch(a){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${s} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function L5e(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,transforms:i}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=r,[c,d,p,f]=a.shape,[g,y]=u??[d,p],v=[c,g,y,f],b=new D5e(d,p,o,s,l,v);return n.runWebGLProgram(b,[a,i],"float32")}const z5e={kernelName:h2,backendName:"webgl",kernelFunc:L5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function B5e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;l0(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:s,outputShape:l,indices:u}=Zke(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const j5e={kernelName:f2,backendName:"webgl",kernelFunc:B5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function U5e(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a,s=o.shape.length,l=a.shape[i],u=new Array(s-1);let c=0;for(let y=0;y<s;y++)y!==i&&(u[c++]=o.shape[y]);const d=[],p=new Array(s).fill(0),f=o.shape.slice();f[i]=1;const g=new Array(l);for(let y=0;y<g.length;y++){p[i]=y;const v=vh({inputs:{x:o},backend:n,attrs:{begin:p,size:f}}),b=Le({inputs:{x:v},backend:n,attrs:{shape:u}});g[y]=b,d.push(v)}return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const V5e={kernelName:m2,backendName:"webgl",kernelFunc:U5e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class W5e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,a=e.batchSize,i=e.inSize,o=e.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,d=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let g="";i%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${g}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function G5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:o}=r,s=a.shape.length,l=[];let u=0;const c=gr([u],s);let d=a;c!=null&&(d=qa({inputs:{x:a},backend:n,attrs:{perm:c}}),l.push(d),u=yr(1,s)[0]);const p=s7(d.shape,u,o),f=be([d.shape[u]]),g=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(g);const y=N2(a.dtype),v=(S,C,E,R,T)=>{const $=S.shape[0],P=S.shape[1],D=o7(P,T),B={windowSize:D,inSize:P,batchSize:$,numSegments:T},z=new W5e(B,C),q=n.compileAndRun(z,[S,E],R);if(l.push(q),q.shape[1]===T)return q;const Y=GB({backend:n,attrs:{start:0,stop:T,step:1,dtype:"float32"}}),J=XB({inputs:{x:Y},backend:n,attrs:{reps:[P/D]}});return l.push(Y),l.push(J),v(q,C,J,R,T)},b=v(g,"unsortedSegmentSum",i,y,o),x=Le({inputs:{x:b},backend:n,attrs:{shape:p}});let w=x;if(c!=null){l.push(x);const S=Wg(c);w=qa({inputs:{x:w},backend:n,attrs:{perm:S}})}return l.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const H5e={kernelName:g2,backendName:"webgl",kernelFunc:G5e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const q5e=[WSe,HSe,XSe,JSe,eCe,rCe,iCe,sCe,dCe,hCe,gCe,vCe,kCe,NCe,_Ce,$Ce,MCe,DCe,zCe,jCe,GCe,JCe,e3e,n3e,l3e,c3e,f3e,TSe,y3e,k3e,N3e,O3e,P3e,A3e,L3e,B3e,V3e,H3e,X3e,Y3e,Z3e,tEe,aEe,oEe,cEe,pEe,mEe,bEe,xEe,CEe,IEe,OEe,FEe,LEe,zEe,jEe,VEe,GEe,qEe,XEe,ZEe,n4e,i4e,s4e,c4e,h4e,y4e,w4e,NSe,S4e,x3e,N4e,_4e,O4e,_Se,A4e,B4e,U4e,H4e,X4e,Z4e,nNe,oNe,cNe,hNe,mNe,vNe,wNe,SNe,TNe,_Ne,$Ne,MNe,FNe,zNe,VNe,qNe,tTe,OSe,iTe,lTe,dTe,fTe,a3e,yTe,vTe,wTe,CTe,ITe,$Se,RTe,OTe,PTe,FTe,i3e,YNe,LTe,UTe,HTe,PSe,QTe,ZTe,rIe,oIe,cIe,pIe,mIe,bIe,xIe,SIe,NIe,_Ie,MIe,AIe,zIe,UIe,QCe,ZNe,GIe,qIe,XIe,YIe,ZIe,t5e,r5e,i5e,s5e,c5e,p5e,f5e,y5e,v5e,w5e,S5e,JNe,jSe,N5e,_5e,O5e,A5e,z5e,USe,j5e,V5e,H5e,bTe];for(const t of q5e)k2(t);async function K5e(){return await e0e({base:"pascal",quantizationBytes:2})}async function X5e(t,e){const n=await t.segment(e);return Y5e(e,n)}function Q5e(t,e,n,r,a){const i=document.createElement("canvas"),o=document.createElement("canvas"),s=i.getContext("2d"),l=o.getContext("2d");i.width=r,i.height=a,o.width=r,o.height=a,s.drawImage(e,0,0,r,a),l.putImageData(n,0,0);const u=s.getImageData(0,0,r,a),c=u.data,d=l.getImageData(0,0,r,a).data;for(let p=0,f=d.length;p<f;p+=4)d[p]===t[0]&&d[p+1]===t[1]&&d[p+2]===t[2]&&(c[p+3]=0);return s.putImageData(u,0,0),i.toDataURL()}function Y5e(t,e){const{height:n,width:r,segmentationMap:a}=e,i=new ImageData(a,r,n);return Q5e([0,0,0],t,i,r,n)}const J5e=()=>{const t=_.useRef(null),e=async n=>(t.current||(t.current=await K5e()),await X5e(t.current,n));return _.useEffect(()=>()=>{t.current&&t.current.dispose()},[]),{autoRemoveBackground:e}};async function Z5e(t){try{const e=await fetch(t);if(!e.ok)throw new Error(e.statusText);const n=await e.json();return"@type"in n?n["@type"]!="sc:Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type of sc:Manifest but has a type of: "+n["@type"]),null):t_e(n):"type"in n?n.type!="Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a type of Manifest but has a type of: "+n.type),null):n_e(n):(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type or type value of Manifest"),null)}catch(e){return console.log("I was unable to get the Manifest you supplied due to: "+e),null}}function e_e(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}function t_e(t){var e,n,r;if("sequences"in t){let a=t.sequences;e_e(a)&&(a=[a]);let i=!1;for(const o of a)if("canvases"in o){i=!0;for(const s of o.canvases){const l=(r=(n=(e=s.images[0])==null?void 0:e.resource)==null?void 0:n.service)==null?void 0:r["@id"];if(l)return l}}else i||console.log("The manifest you supplied contains no canvases so there are no images to show.")}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function n_e(t){if("items"in t){const e=t.items;for(const n of e){const r=n.items[0].items[0].body.service[0]["@id"];if(r)return r}}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function YB(t,e){const n=window.getComputedStyle(t);return parseInt(n.getPropertyValue(e),10)}function r_e(t,e){const{width:n,height:r}=e,a=1080,i="0",o="default",s=".jpg",l=document.querySelector(".displayregioncontainer"),u=document.querySelector(".displayregion");if(!l||!u)throw new Error("Canvas or selection element not found");const{clientWidth:c,clientHeight:d}=l,p=n*d/r,f=(c-p)/2,g=n/p,y=9,v=YB(u,"left"),b=YB(u,"top"),x=Math.round(u.clientWidth+y),w=Math.round(u.clientHeight+y),S=Math.max(Math.round((v-f)*g),0),C=Math.max(Math.round(b*g),0),E=Math.min(Math.round(x*g),n),R=Math.min(Math.round(w*g),r),T=`${S},${C},${E},${R}`;return`${t}/${T}/${a},/${i}/${o}${s}`}const JB={fetchIIIFIdentifier:async t=>{try{return await Z5e(t)}catch(e){return console.error(e),null}},getCroppedImagePath:async t=>{try{const e=t+"/info.json",n=await fetch(e);if(!n.ok)throw new Error(n.statusText);const r=await n.json();return r_e(t,r)}catch(e){console.error(e)}}};function a_e({imageList:t,handleImageClick:e}){return K.jsx(ba,{margin:"my-4",className:"flex overflow-x-auto",style:{maxHeight:"200px",scrollSnapType:"x mandatory",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:t.map(n=>K.jsx("img",{src:n.thumbnail,alt:n.name,onClick:()=>e(n),style:{cursor:"pointer",marginRight:"10px",scrollSnapAlign:"start"},role:"presentation"},n.id))})}const i_e=_.lazy(()=>xM(()=>import("./index-bX0ZS97e.js"),$0([]))),o_e={canvasBackgroundColor:"010A01",gestureSettingsTouch:{dragToPan:!1,dblClickToZoom:!1,dblClickDragToZoom:!1,flickEnabled:!1,pinchRotate:!0},informationPanel:{open:!1},openSeadragon:{loadTilesWithAjax:!0,showNavigationControl:!1,showHomeControl:!1,showFullPageControl:!1,showRotationControl:!1,showFlipControl:!1,showZoomControl:!1},showTitle:!1,showIIIFBadge:!1},s_e={colors:{primary:"#b990c1",accent:"#b990c1",secondary:"#EDECEA"}};function l_e(){const{t}=ys(),e=()=>$oe.success(t("collectionToastSuccess")),{addToArtwork:n,imageLikeList:r}=Nc(),[a,i]=_.useState(r[0]||null),[o,s]=_.useState(""),[l,u]=_.useState(""),[c,d]=_.useState([]),[p,f]=_.useState(""),[g,y]=_.useState(!0),{autoRemoveBackground:v}=J5e();_.useEffect(()=>{o&&setTimeout(()=>{document.querySelectorAll("canvas")[0]&&u(document.querySelectorAll("canvas")[0].toDataURL())},1e3)},[o]),_.useEffect(()=>{a&&u(a?.image),f("")},[a]);const b=E=>{i(E)},x=E=>{const R=new Image;R.src=E,v(R).then(T=>{f(T)})},w=async(E,R)=>{try{if(e(),g){const T=await JB.getCroppedImagePath(R);T&&n(E,T)}else n(E,R)}catch(T){console.error("Error:",T)}},S=E=>{E&&s(E)},C=()=>K.jsxs("h2",{className:"mt-4 text-lg md:text-xl",children:["\u{1F300} ",t("collectionLoading")]});return K.jsxs(ba,{margin:"my-4",className:"flex flex-col flex-wrap gap-2 lg:gap-8 justify-center content-center text-center mx-auto",children:[K.jsx("h1",{className:"text-lg leading-6 px-8 md:px-24 md:text-xl lg:px-48",children:t("collectionTitle")}),K.jsx(Roe,{}),K.jsx(a_e,{imageList:r,handleImageClick:b}),a&&K.jsxs(ba,{margin:"my-0",children:[K.jsxs(ba,{margin:"m-0",className:"flex flex-wrap gap-4 justify-center text-center mx-auto no-safe-areas",children:[K.jsx("p",{className:"text-lg self-center md:text-xl",children:t("collectionSwitchLasso")}),K.jsx(g8,{checked:g,onChange:()=>y(!g)}),K.jsx("p",{className:"text-lg self-center md:text-xl",children:t("collectionSwitchViewer")}),K.jsx(hr,{className:"text-xl w-2/3 mx-auto h-12",rounded:!0,inline:!0,onClick:()=>g?w(a?.id,a?.identifier):w(nA(),p),children:t("collectionAddText")})]}),g?K.jsx(_.Suspense,{fallback:C(),children:K.jsx(i_e,{iiifContent:a.url,options:o_e,customTheme:s_e,canvasIdCallback:S})}):K.jsxs("div",{className:"mt-4",children:[K.jsx(qoe,{value:c,src:l,onChange:E=>{d(E)},onComplete:E=>{E.length&&Uoe(l,E,(R,T)=>{R||f(T.toDataURL())})}}),K.jsxs("div",{children:[p&&K.jsx(hr,{className:"mt-4 text-xl w-2/3 mx-auto h-12",rounded:!0,inline:!0,onClick:()=>x(p),children:t("collectionRemoveText")}),K.jsx("img",{className:"my-4 mx-auto",src:p,alt:""})]})]})]})]})}function u_e(){const{t}=ys();return K.jsxs(m8,{labels:!0,icons:!0,className:"left-0 bottom-0 fixed k-color-brand-primary text-center",innerClassName:"tabbar-inner",children:[K.jsx(Jf,{active:du({path:so("/").pathname,end:!0}),to:"/",component:yp,icon:K.jsx(va,{material:K.jsx(YY,{className:"w-10 h-10"}),className:`transition duration-300 ${du({path:so("/").pathname,end:!0})&&"animate-pulse"}`}),label:t("start"),touchRipple:!1}),K.jsx(Jf,{active:du({path:so("/selection").pathname,end:!0}),to:"/selection",component:yp,icon:K.jsx(va,{material:K.jsx(KY,{className:"w-10 h-10"}),className:`transition duration-300 ${du({path:so("/selection").pathname,end:!0})&&"animate-pulse"}`}),label:t("selection"),touchRipple:!1}),K.jsx(Jf,{active:du({path:so("/collection").pathname,end:!0}),to:"/collection",component:yp,icon:K.jsx(va,{material:K.jsx(oJ,{className:"w-10 h-10"}),className:`transition duration-300 ${du({path:so("/collection").pathname,end:!0})&&"animate-pulse"}`}),label:t("collection"),touchRipple:!1}),K.jsx(Jf,{active:du({path:so("/creation").pathname,end:!0}),to:"/creation",component:yp,icon:K.jsx(va,{material:K.jsx(eJ,{className:"w-10 h-10"}),className:`transition duration-300 ${du({path:so("/creation").pathname,end:!0})&&"animate-pulse"}`}),label:t("artwork"),touchRipple:!1})]})}const c_e="/logos/bmbf_logo_de.jpg",d_e="/logos/bmbf_logo_en.jpg",p_e="/logos/digitalwarenkombinat.png",h_e="/logos/prototype_fund_logo.png",f_e=()=>K.jsx(Nt,{href:"https://prototypefund.de/",target:"_blank",children:K.jsx("img",{src:h_e,alt:"Logo Protype Fund",className:"w-48 md:w-64 m-auto"})}),m_e=()=>{const{i18n:t}=ys();return K.jsx(Nt,{href:"https://www.bmbf.de/",target:"_blank",children:K.jsx("img",{src:t.resolvedLanguage==="en"?d_e:c_e,alt:"Logo Bundesministerium f\xFCr Bildung und Forschung",className:"w-48 md:w-64 m-auto"})})},g_e=()=>K.jsx(Nt,{href:"https://digitalwarenkombinat.de/",target:"_blank",children:K.jsx("img",{src:p_e,alt:"Logo Digitalwarenkombinat",className:"w-48 md:w-64 m-auto"})});function y_e(t,e){const{t:n,i18n:r}=ys();return K.jsx(h8,{side:"right",opened:t,onBackdropClick:()=>e(!1),children:K.jsxs(Yy,{children:[K.jsx(Ky,{right:K.jsx(mJ,{onClick:()=>e(!1),className:"mr-4 w-10 h-10"})}),K.jsxs(ba,{margin:"my-2 md:my-8",className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[K.jsx("p",{className:"text-xl",children:n("sidebarChooseLanguage")}),K.jsxs("div",{children:[K.jsx(hr,{onClick:()=>r.changeLanguage("de"),className:"p-4 text-xl text-black w-10 mr-2 h-10",rounded:!0,inline:!0,children:"DE"}),K.jsx(hr,{onClick:()=>r.changeLanguage("en"),className:"p-4 text-xl text-black w-10 h-10",rounded:!0,inline:!0,children:"EN"})]}),K.jsx(Nt,{className:"text-xl",to:"/about",component:yp,onClick:()=>e(!1),children:n("sidebarAbout")}),K.jsx(Nt,{className:"text-xl",to:"/legal",component:yp,onClick:()=>e(!1),children:n("sidebarLegal")}),K.jsx(f_e,{}),K.jsx(m_e,{}),K.jsx(g_e,{})]})]})})}function b_e(){const[t,e]=_.useState(!1),[n,r]=_.useState(null);function a(o){console.log(o.active),r(o.active.data.current)}function i(o){o.over&&r(null)}return K.jsxs(see,{onDragEnd:i,onDragStart:a,children:[K.jsx(i8,{theme:"material",children:K.jsxs(Yy,{children:[K.jsx(Ky,{className:"top-0 sticky",transparent:!0,right:K.jsx(MY,{onClick:()=>e(!0),className:"mr-4 w-10 h-10"})}),K.jsx("main",{className:"h-[calc(100%_-_192px)] overflow-auto",children:K.jsx(sK,{})}),K.jsx(u_e,{}),y_e(t,e)]})}),K.jsx(TK,{}),K.jsx(Tee,{children:n?K.jsx("img",{src:n.image,alt:n.id,style:{cursor:"move",maxHeight:"100px",width:"auto",opacity:.4}}):null})]})}function v_e(){const{t}=ys();return K.jsx(K.Fragment,{children:K.jsxs(ba,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[K.jsx("h1",{className:"text-5xl mb-8",children:t("legal.title")}),K.jsx("h2",{className:"text-3xl",children:t("legal.informationtitle")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.informationtitleparagraph1")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.informationtitleparagraph2")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.informationtitleparagraph3")}),K.jsx("h2",{className:"text-3xl",children:t("legal.representation")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.representationparagraph1")}),K.jsx("h2",{className:"text-3xl",children:t("legal.contact")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:K.jsxs(x3,{i18nKey:"legal.contactparagraph1",children:[K.jsx("p",{children:t("legal.contactparagraph1")}),K.jsx(Nt,{href:"mailto:info@digitalwarenkombinat.de",children:"info@digitalwarenkombinat.de"})]})}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.contactparagraph2")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph1")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph2")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph3")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph4")}),K.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph5")})]})})}var ZB={exports:{}},ej={exports:{}},tj={exports:{}},nj={exports:{}},rj={exports:{}},f5=Object.defineProperty,x_e=Object.getOwnPropertyDescriptor,w_e=Object.getOwnPropertyNames,k_e=Object.prototype.hasOwnProperty,aj=(t,e)=>{for(var n in e)f5(t,n,{get:e[n],enumerable:!0})},S_e=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of w_e(e))!k_e.call(t,a)&&a!==n&&f5(t,a,{get:()=>e[a],enumerable:!(r=x_e(e,a))||r.enumerable});return t},C_e=t=>S_e(f5({},"__esModule",{value:!0}),t),ij={};aj(ij,{FluidValue:()=>V_e,Globals:()=>oj,addFluidObserver:()=>W_e,callFluidObserver:()=>Dj,callFluidObservers:()=>U_e,clamp:()=>wj,colorToRgba:()=>N5,colors:()=>P_e,createInterpolator:()=>T5,createStringInterpolator:()=>Q_e,defineHidden:()=>T_e,deprecateDirectCall:()=>eRe,deprecateInterpolate:()=>J_e,each:()=>hj,eachProp:()=>__e,easings:()=>z_e,flush:()=>fj,flushCalls:()=>$_e,frameLoop:()=>bj,getFluidObservers:()=>j_e,getFluidValue:()=>Aj,hasFluidValue:()=>B_e,hex3:()=>Nj,hex4:()=>Tj,hex6:()=>Ij,hex8:()=>_j,hsl:()=>Cj,hsla:()=>Ej,is:()=>Ms,isAnimatedString:()=>tRe,isEqual:()=>I_e,isSSR:()=>_w,noop:()=>pj,onResize:()=>Uj,onScroll:()=>uRe,once:()=>_5,prefix:()=>zw,raf:()=>tn,removeFluidObserver:()=>G_e,rgb:()=>kj,rgba:()=>Sj,setFluidGetter:()=>Lj,toArray:()=>R_e,useConstant:()=>dRe,useForceUpdate:()=>mRe,useIsomorphicLayoutEffect:()=>$5,useMemoOne:()=>gRe,useOnce:()=>vRe,usePrev:()=>wRe,useReducedMotion:()=>SRe});var E_e=C_e(ij),oj={};aj(oj,{assign:()=>yj,colors:()=>Wu,createStringInterpolator:()=>w5,skipAnimation:()=>gj,to:()=>mj,willAdvance:()=>k5});var m5=v0(),tn=t=>b0(t,m5),g5=v0();tn.write=t=>b0(t,g5);var Iw=v0();tn.onStart=t=>b0(t,Iw);var y5=v0();tn.onFrame=t=>b0(t,y5);var b5=v0();tn.onFinish=t=>b0(t,b5);var wh=[];tn.setTimeout=(t,e)=>{let n=tn.now()+e,r=()=>{let i=wh.findIndex(o=>o.cancel==r);~i&&wh.splice(i,1),Vu-=~i?1:0},a={time:n,handler:t,cancel:r};return wh.splice(sj(n),0,a),Vu+=1,lj(),a};var sj=t=>~(~wh.findIndex(e=>e.time>t)||~wh.length);tn.cancel=t=>{Iw.delete(t),y5.delete(t),b5.delete(t),m5.delete(t),g5.delete(t)},tn.sync=t=>{x5=!0,tn.batchedUpdates(t),x5=!1},tn.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...a){e=a,tn.onStart(n)}return r.handler=t,r.cancel=()=>{Iw.delete(n),e=null},r};var v5=typeof window<"u"?window.requestAnimationFrame:()=>{};tn.use=t=>v5=t,tn.now=typeof performance<"u"?()=>performance.now():Date.now,tn.batchedUpdates=t=>t(),tn.catch=console.error,tn.frameLoop="always",tn.advance=()=>{tn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):cj()};var Uu=-1,Vu=0,x5=!1;function b0(t,e){x5?(e.delete(t),t(0)):(e.add(t),lj())}function lj(){Uu<0&&(Uu=0,tn.frameLoop!=="demand"&&v5(uj))}function N_e(){Uu=-1}function uj(){~Uu&&(v5(uj),tn.batchedUpdates(cj))}function cj(){let t=Uu;Uu=tn.now();let e=sj(Uu);if(e&&(dj(wh.splice(0,e),n=>n.handler()),Vu-=e),!Vu){N_e();return}Iw.flush(),m5.flush(t?Math.min(64,Uu-t):16.667),y5.flush(),g5.flush(),b5.flush()}function v0(){let t=new Set,e=t;return{add(n){Vu+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Vu-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Vu-=e.size,dj(e,r=>r(n)&&t.add(r)),Vu+=t.size,e=t)}}}function dj(t,e){t.forEach(n=>{try{e(n)}catch(r){tn.catch(r)}})}function pj(){}var T_e=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Ms={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function I_e(t,e){if(Ms.arr(t)){if(!Ms.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var hj=(t,e)=>t.forEach(e);function __e(t,e,n){if(Ms.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(let r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var R_e=t=>Ms.und(t)?[]:Ms.arr(t)?t:[t];function fj(t,e){if(t.size){let n=Array.from(t);t.clear(),hj(n,e)}}var $_e=(t,...e)=>fj(t,n=>n(...e)),_w=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),w5,mj,Wu=null,gj=!1,k5=pj,yj=t=>{t.to&&(mj=t.to),t.now&&(tn.now=t.now),t.colors!==void 0&&(Wu=t.colors),t.skipAnimation!=null&&(gj=t.skipAnimation),t.createStringInterpolator&&(w5=t.createStringInterpolator),t.requestAnimationFrame&&tn.use(t.requestAnimationFrame),t.batchedUpdates&&(tn.batchedUpdates=t.batchedUpdates),t.willAdvance&&(k5=t.willAdvance),t.frameLoop&&(tn.frameLoop=t.frameLoop)},x0=new Set,So=[],S5=[],Rw=0,bj={get idle(){return!x0.size&&!So.length},start(t){Rw>t.priority?(x0.add(t),tn.onStart(O_e)):(vj(t),tn(C5))},advance:C5,sort(t){if(Rw)tn.onFrame(()=>bj.sort(t));else{let e=So.indexOf(t);~e&&(So.splice(e,1),xj(t))}},clear(){So=[],x0.clear()}};function O_e(){x0.forEach(vj),x0.clear(),tn(C5)}function vj(t){So.includes(t)||xj(t)}function xj(t){So.splice(M_e(So,e=>e.priority>t.priority),0,t)}function C5(t){let e=S5;for(let n=0;n<So.length;n++){let r=So[n];Rw=r.priority,r.idle||(k5(r),r.advance(t),r.idle||e.push(r))}return Rw=0,S5=So,S5.length=0,So=e,So.length>0}function M_e(t,e){let n=t.findIndex(e);return n<0?t.length:n}var wj=(t,e,n)=>Math.min(Math.max(n,t),e),P_e={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},es="[-+]?\\d*\\.?\\d+",$w=es+"%";function Ow(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var kj=new RegExp("rgb"+Ow(es,es,es)),Sj=new RegExp("rgba"+Ow(es,es,es,es)),Cj=new RegExp("hsl"+Ow(es,$w,$w)),Ej=new RegExp("hsla"+Ow(es,$w,$w,es)),Nj=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Tj=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ij=/^#([0-9a-fA-F]{6})$/,_j=/^#([0-9a-fA-F]{8})$/;function F_e(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Ij.exec(t))?parseInt(e[1]+"ff",16)>>>0:Wu&&Wu[t]!==void 0?Wu[t]:(e=kj.exec(t))?(kh(e[1])<<24|kh(e[2])<<16|kh(e[3])<<8|255)>>>0:(e=Sj.exec(t))?(kh(e[1])<<24|kh(e[2])<<16|kh(e[3])<<8|Oj(e[4]))>>>0:(e=Nj.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=_j.exec(t))?parseInt(e[1],16)>>>0:(e=Tj.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Cj.exec(t))?(Rj($j(e[1]),Mw(e[2]),Mw(e[3]))|255)>>>0:(e=Ej.exec(t))?(Rj($j(e[1]),Mw(e[2]),Mw(e[3]))|Oj(e[4]))>>>0:null}function E5(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Rj(t,e,n){let r=n<.5?n*(1+e):n+e-n*e,a=2*n-r,i=E5(a,r,t+1/3),o=E5(a,r,t),s=E5(a,r,t-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(s*255)<<8}function kh(t){let e=parseInt(t,10);return e<0?0:e>255?255:e}function $j(t){return(parseFloat(t)%360+360)%360/360}function Oj(t){let e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Mw(t){let e=parseFloat(t);return e<0?0:e>100?1:e/100}function N5(t){let e=F_e(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,a=(e&65280)>>>8,i=(e&255)/255;return`rgba(${n}, ${r}, ${a}, ${i})`}var T5=(t,e,n)=>{if(Ms.fun(t))return t;if(Ms.arr(t))return T5({range:t,output:e,extrapolate:n});if(Ms.str(t.output[0]))return w5(t);let r=t,a=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{let c=D_e(u,i);return A_e(u,i[c],i[c+1],a[c],a[c+1],l,o,s,r.map)}};function A_e(t,e,n,r,a,i,o,s,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(s==="identity")return u;s==="clamp"&&(u=n)}return r===a?r:e===n?t<=e?r:a:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=i(u),r===-1/0?u=-u:a===1/0?u=u+r:u=u*(a-r)+r,u)}function D_e(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var L_e=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);let r=n*t,a=e==="end"?Math.floor(r):Math.ceil(r);return wj(0,1,a/t)},Pw=1.70158,Fw=Pw*1.525,Mj=Pw+1,Pj=2*Math.PI/3,Fj=2*Math.PI/4.5,Aw=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,z_e={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>Mj*t*t*t-Pw*t*t,easeOutBack:t=>1+Mj*Math.pow(t-1,3)+Pw*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Fw+1)*2*t-Fw)/2:(Math.pow(2*t-2,2)*((Fw+1)*(t*2-2)+Fw)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*Pj),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*Pj)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Fj))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Fj)/2+1,easeInBounce:t=>1-Aw(1-t),easeOutBounce:Aw,easeInOutBounce:t=>t<.5?(1-Aw(1-2*t))/2:(1+Aw(2*t-1))/2,steps:L_e},w0=Symbol.for("FluidValue.get"),Sh=Symbol.for("FluidValue.observers"),B_e=t=>!!(t&&t[w0]),Aj=t=>t&&t[w0]?t[w0]():t,j_e=t=>t[Sh]||null;function Dj(t,e){t.eventObserved?t.eventObserved(e):t(e)}function U_e(t,e){let n=t[Sh];n&&n.forEach(r=>{Dj(r,e)})}var V_e=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Lj(this,t)}},Lj=(t,e)=>zj(t,w0,e);function W_e(t,e){if(t[w0]){let n=t[Sh];n||zj(t,Sh,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function G_e(t,e){let n=t[Sh];if(n&&n.has(e)){let r=n.size-1;r?n.delete(e):t[Sh]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var zj=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Dw=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,H_e=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Bj=new RegExp(`(${Dw.source})(%|[a-z]+)`,"i"),q_e=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Lw=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,jj=t=>{let[e,n]=K_e(t);if(!e||_w())return t;let r=window.getComputedStyle(document.documentElement).getPropertyValue(e);return r?r.trim():n&&n.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(n)||t:n&&Lw.test(n)?jj(n):n||t},K_e=t=>{let e=Lw.exec(t);if(!e)return[,];let[,n,r]=e;return[n,r]},I5,X_e=(t,e,n,r,a)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${a})`,Q_e=t=>{I5||(I5=Wu?new RegExp(`(${Object.keys(Wu).join("|")})(?!\\w)`,"g"):/^\b$/);let e=t.output.map(a=>Aj(a).replace(Lw,jj).replace(H_e,N5).replace(I5,N5)),n=e.map(a=>a.match(Dw).map(Number)),r=n[0].map((a,i)=>n.map(o=>{if(!(i in o))throw Error('The arity of each "output" value must be equal');return o[i]})).map(a=>T5({...t,output:a}));return a=>{var i;let o=!Bj.test(e[0])&&((i=e.find(l=>Bj.test(l)))==null?void 0:i.replace(Dw,"")),s=0;return e[0].replace(Dw,()=>`${r[s++](a)}${o||""}`).replace(q_e,X_e)}},zw="react-spring: ",_5=t=>{let e=t,n=!1;if(typeof e!="function")throw new TypeError(`${zw}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},Y_e=_5(console.warn);function J_e(){Y_e(`${zw}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Z_e=_5(console.warn);function eRe(){Z_e(`${zw}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function tRe(t){return Ms.str(t)&&(t[0]=="#"||/\d/.test(t)||!_w()&&Lw.test(t)||t in(Wu||{}))}var Ch,Bw=new WeakMap,nRe=t=>t.forEach(({target:e,contentRect:n})=>{var r;return(r=Bw.get(e))==null?void 0:r.forEach(a=>a(n))});function rRe(t,e){Ch||typeof ResizeObserver<"u"&&(Ch=new ResizeObserver(nRe));let n=Bw.get(e);return n||(n=new Set,Bw.set(e,n)),n.add(t),Ch&&Ch.observe(e),()=>{let r=Bw.get(e);r&&(r.delete(t),!r.size&&Ch&&Ch.unobserve(e))}}var jw=new Set,k0,aRe=()=>{let t=()=>{jw.forEach(e=>e({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},iRe=t=>(jw.add(t),k0||(k0=aRe()),()=>{jw.delete(t),!jw.size&&k0&&(k0(),k0=void 0)}),Uj=(t,{container:e=document.documentElement}={})=>e===document.documentElement?iRe(t):rRe(t,e),oRe=(t,e,n)=>e-t===0?1:(n-t)/(e-t),sRe={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},lRe=class{constructor(t,e){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=n=>{let r=this.info[n],{length:a,position:i}=sRe[n];r.current=this.container[`scroll${i}`],r.scrollLength=this.container["scroll"+a]-this.container["client"+a],r.progress=oRe(0,r.scrollLength,r.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=t,this.container=e,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},S0=new WeakMap,Vj=new WeakMap,R5=new WeakMap,Wj=t=>t===document.documentElement?window:t,uRe=(t,{container:e=document.documentElement}={})=>{let n=R5.get(e);n||(n=new Set,R5.set(e,n));let r=new lRe(t,e);if(n.add(r),!S0.has(e)){let i=()=>(n?.forEach(s=>s.advance()),!0);S0.set(e,i);let o=Wj(e);window.addEventListener("resize",i,{passive:!0}),e!==document.documentElement&&Vj.set(e,Uj(i,{container:e})),o.addEventListener("scroll",i,{passive:!0})}let a=S0.get(e);return tn(a),()=>{var i;tn.cancel(a);let o=R5.get(e);if(!o||(o.delete(r),o.size))return;let s=S0.get(e);S0.delete(e),s&&(Wj(e).removeEventListener("scroll",s),window.removeEventListener("resize",s),(i=Vj.get(e))==null||i())}},cRe=_;function dRe(t){let e=(0,cRe.useRef)(null);return e.current===null&&(e.current=t()),e.current}var pRe=_,hRe=_,Gj=_,$5=_w()?Gj.useEffect:Gj.useLayoutEffect,fRe=()=>{let t=(0,hRe.useRef)(!1);return $5(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function mRe(){let t=(0,pRe.useState)()[1],e=fRe();return()=>{e.current&&t(Math.random())}}var O5=_;function gRe(t,e){let[n]=(0,O5.useState)(()=>({inputs:e,result:t()})),r=(0,O5.useRef)(),a=r.current,i=a;return i?e&&i.inputs&&yRe(e,i.inputs)||(i={inputs:e,result:t()}):i=n,(0,O5.useEffect)(()=>{r.current=i,a==n&&(n.inputs=n.result=void 0)},[i]),i.result}function yRe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var bRe=_,vRe=t=>(0,bRe.useEffect)(t,xRe),xRe=[],Hj=_;function wRe(t){let e=(0,Hj.useRef)();return(0,Hj.useEffect)(()=>{e.current=t}),e.current}var kRe=_,SRe=()=>{let[t,e]=(0,kRe.useState)(null);return $5(()=>{let n=window.matchMedia("(prefers-reduced-motion)"),r=a=>{e(a.matches),yj({skipAnimation:a.matches})};return r(n),n.addEventListener("change",r),()=>{n.removeEventListener("change",r)}},[]),t};rj.exports=E_e;var nn=rj.exports,qj={exports:{}},CRe=Object.create,Uw=Object.defineProperty,ERe=Object.getOwnPropertyDescriptor,NRe=Object.getOwnPropertyNames,TRe=Object.getPrototypeOf,IRe=Object.prototype.hasOwnProperty,_Re=(t,e)=>{for(var n in e)Uw(t,n,{get:e[n],enumerable:!0})},Kj=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of NRe(e))!IRe.call(t,a)&&a!==n&&Uw(t,a,{get:()=>e[a],enumerable:!(r=ERe(e,a))||r.enumerable});return t},RRe=(t,e,n)=>(n=t!=null?CRe(TRe(t)):{},Kj(e||!t||!t.__esModule?Uw(n,"default",{value:t,enumerable:!0}):n,t)),$Re=t=>Kj(Uw({},"__esModule",{value:!0}),t),Xj={};_Re(Xj,{Animated:()=>M5,AnimatedArray:()=>A5,AnimatedObject:()=>Gw,AnimatedString:()=>Vw,AnimatedValue:()=>E0,createHost:()=>jRe,getAnimated:()=>Yj,getAnimatedType:()=>ARe,getPayload:()=>Zj,isAnimated:()=>Qj,setAnimated:()=>Jj});var ORe=$Re(Xj),MRe=nn,C0=Symbol.for("Animated:node"),Qj=t=>!!t&&t[C0]===t,Yj=t=>t&&t[C0],Jj=(t,e)=>(0,MRe.defineHidden)(t,C0,e),Zj=t=>t&&t[C0]&&t[C0].getPayload(),M5=class{constructor(){Jj(this,this)}getPayload(){return this.payload||[]}},P5=nn,E0=class extends M5{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,P5.is.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new E0(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return P5.is.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){let{done:t}=this;this.done=!1,P5.is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},F5=nn,Vw=class extends E0{constructor(t){super(0),this._string=null,this._toString=(0,F5.createInterpolator)({output:[t,t]})}static create(t){return new Vw(t)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(t){if(F5.is.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=(0,F5.createInterpolator)({output:[this.getValue(),t]})),this._value=0,super.reset()}},PRe=nn,yd=nn,Ww={dependencies:null},Gw=class extends M5{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){let e={};return(0,yd.eachProp)(this.source,(n,r)=>{Qj(n)?e[r]=n.getValue(t):(0,yd.hasFluidValue)(n)?e[r]=(0,yd.getFluidValue)(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&(0,yd.each)(this.payload,t=>t.reset())}_makePayload(t){if(t){let e=new Set;return(0,yd.eachProp)(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Ww.dependencies&&(0,yd.hasFluidValue)(t)&&Ww.dependencies.add(t);let e=Zj(t);e&&(0,yd.each)(e,n=>this.add(n))}},A5=class extends Gw{constructor(t){super(t)}static create(t){return new A5(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){let e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(FRe)),!0)}};function FRe(t){return((0,PRe.isAnimatedString)(t)?Vw:E0).create(t)}var eU=nn;function ARe(t){let e=Yj(t);return e?e.constructor:eU.is.arr(t)?A5:(0,eU.isAnimatedString)(t)?Vw:E0}var Eh=nn,DRe=RRe(_),N0=_,Vi=nn,tU=(t,e)=>{let n=!Vi.is.fun(t)||t.prototype&&t.prototype.isReactComponent;return(0,N0.forwardRef)((r,a)=>{let i=(0,N0.useRef)(null),o=n&&(0,N0.useCallback)(g=>{i.current=BRe(a,g)},[a]),[s,l]=zRe(r,e),u=(0,Vi.useForceUpdate)(),c=()=>{let g=i.current;n&&!g||(g?e.applyAnimatedValues(g,s.getValue(!0)):!1)===!1&&u()},d=new LRe(c,l),p=(0,N0.useRef)();(0,Vi.useIsomorphicLayoutEffect)(()=>(p.current=d,(0,Vi.each)(l,g=>(0,Vi.addFluidObserver)(g,d)),()=>{p.current&&((0,Vi.each)(p.current.deps,g=>(0,Vi.removeFluidObserver)(g,p.current)),Vi.raf.cancel(p.current.update))})),(0,N0.useEffect)(c,[]),(0,Vi.useOnce)(()=>()=>{let g=p.current;(0,Vi.each)(g.deps,y=>(0,Vi.removeFluidObserver)(y,g))});let f=e.getComponentProps(s.getValue());return DRe.createElement(t,{...f,ref:o})})},LRe=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Vi.raf.write(this.update)}};function zRe(t,e){let n=new Set;return Ww.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Gw(t),Ww.dependencies=null,[t,n]}function BRe(t,e){return t&&(Vi.is.fun(t)?t(e):t.current=e),e}var nU=Symbol.for("AnimatedComponent"),jRe=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=a=>new Gw(a),getComponentProps:r=a=>a}={})=>{let a={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},i=o=>{let s=rU(o)||"Anonymous";return Eh.is.str(o)?o=i[o]||(i[o]=tU(o,a)):o=o[nU]||(o[nU]=tU(o,a)),o.displayName=`Animated(${s})`,o};return(0,Eh.eachProp)(t,(o,s)=>{Eh.is.arr(t)&&(s=rU(o)),i[s]=i(o)}),{animated:i}},rU=t=>Eh.is.str(t)?t:t&&Eh.is.str(t.displayName)?t.displayName:Eh.is.fun(t)&&t.name||null;qj.exports=ORe;var T0=qj.exports,aU={exports:{}},D5,iU;function URe(){if(iU)return D5;iU=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,a=(u,c)=>{for(var d in c)t(u,d,{get:c[d],enumerable:!0})},i=(u,c,d,p)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of n(c))!r.call(u,f)&&f!==d&&t(u,f,{get:()=>c[f],enumerable:!(p=e(c,f))||p.enumerable});return u},o=u=>i(t({},"__esModule",{value:!0}),u),s={};a(s,{Any:()=>l}),D5=o(s);var l=class{};return D5}var oU;function VRe(){return oU||(oU=1,aU.exports=URe()),aU.exports}(function(t){var e=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,s=(A,W)=>{for(var ee in W)n(A,ee,{get:W[ee],enumerable:!0})},l=(A,W,ee,ie)=>{if(W&&typeof W=="object"||typeof W=="function")for(let ve of a(W))!o.call(A,ve)&&ve!==ee&&n(A,ve,{get:()=>W[ve],enumerable:!(ie=r(W,ve))||ie.enumerable});return A},u=(A,W,ee)=>(l(A,W,"default"),ee&&l(ee,W,"default")),c=(A,W,ee)=>(ee=A!=null?e(i(A)):{},l(W||!A||!A.__esModule?n(ee,"default",{value:A,enumerable:!0}):ee,A)),d=A=>l(n({},"__esModule",{value:!0}),A),p={};s(p,{BailSignal:()=>Je,Controller:()=>xe,FrameValue:()=>Gt,Globals:()=>Ds.Globals,Interpolation:()=>Ju,Spring:()=>As,SpringContext:()=>bn,SpringRef:()=>ns,SpringValue:()=>un,Trail:()=>Ra,Transition:()=>kd,config:()=>te,createInterpolator:()=>Ls.createInterpolator,easings:()=>Ls.easings,inferTo:()=>T,interpolate:()=>Sd,to:()=>rk,update:()=>Zu,useChain:()=>q,useInView:()=>_a,useIsomorphicLayoutEffect:()=>Ls.useIsomorphicLayoutEffect,useReducedMotion:()=>Ls.useReducedMotion,useResize:()=>En,useScroll:()=>Ml,useSpring:()=>Ia,useSpringRef:()=>Qu,useSpringValue:()=>rs,useSprings:()=>Gi,useTrail:()=>rn,useTransition:()=>Ol}),t.exports=d(p);var f=nn,g=nn;function y(A,...W){return g.is.fun(A)?A(...W):A}var v=(A,W)=>A===!0||!!(W&&A&&(g.is.fun(A)?A(W):(0,g.toArray)(A).includes(W))),b=(A,W)=>g.is.obj(A)?W&&A[W]:A,x=(A,W)=>A.default===!0?A[W]:A.default?A.default[W]:void 0,w=A=>A,S=(A,W=w)=>{let ee=C;A.default&&A.default!==!0&&(A=A.default,ee=Object.keys(A));let ie={};for(let ve of ee){let Ee=W(A[ve],ve);g.is.und(Ee)||(ie[ve]=Ee)}return ie},C=["config","onProps","onStart","onChange","onPause","onResume","onRest"],E={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function R(A){let W={},ee=0;if((0,g.eachProp)(A,(ie,ve)=>{E[ve]||(W[ve]=ie,ee++)}),ee)return W}function T(A){let W=R(A);if(W){let ee={to:W};return(0,g.eachProp)(A,(ie,ve)=>ve in W||(ee[ve]=ie)),ee}return{...A}}function $(A){return A=(0,g.getFluidValue)(A),g.is.arr(A)?A.map($):(0,g.isAnimatedString)(A)?g.Globals.createStringInterpolator({range:[0,1],output:[A,A]})(1):A}function P(A){for(let W in A)return!0;return!1}function D(A){return g.is.fun(A)||g.is.arr(A)&&g.is.obj(A[0])}function B(A,W){var ee;(ee=A.ref)==null||ee.delete(A),W?.delete(A)}function z(A,W){var ee;W&&A.ref!==W&&((ee=A.ref)==null||ee.delete(A),W.add(A),A.ref=W)}function q(A,W,ee=1e3){(0,f.useIsomorphicLayoutEffect)(()=>{if(W){let ie=0;(0,f.each)(A,(ve,Ee)=>{let Ae=ve.current;if(Ae.length){let Me=ee*W[Ee];isNaN(Me)?Me=ie:ie=Me,(0,f.each)(Ae,Re=>{(0,f.each)(Re.queue,Ue=>{let vt=Ue.delay;Ue.delay=ot=>Me+y(vt||0,ot)})}),ve.start()}})}else{let ie=Promise.resolve();(0,f.each)(A,ve=>{let Ee=ve.current;if(Ee.length){let Ae=Ee.map(Me=>{let Re=Me.queue;return Me.queue=[],Re});ie=ie.then(()=>((0,f.each)(Ee,(Me,Re)=>(0,f.each)(Ae[Re]||[],Ue=>Me.queue.push(Ue))),Promise.all(ve.start())))}})}})}var Y=nn,J=_,H=nn,L=nn,Q=T0,Z=nn,te={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},oe={...te.default,mass:1,damping:1,easing:Z.easings.linear,clamp:!1},he=class{constructor(){this.velocity=0,Object.assign(this,oe)}};function ae(A,W,ee){ee&&(ee={...ee},de(ee,W),W={...ee,...W}),de(A,W),Object.assign(A,W);for(let Ae in oe)A[Ae]==null&&(A[Ae]=oe[Ae]);let{frequency:ie,damping:ve}=A,{mass:Ee}=A;return Z.is.und(ie)||(ie<.01&&(ie=.01),ve<0&&(ve=0),A.tension=Math.pow(2*Math.PI/ie,2)*Ee,A.friction=4*Math.PI*ve*Ee/ie),A}function de(A,W){if(!Z.is.und(W.decay))A.duration=void 0;else{let ee=!Z.is.und(W.tension)||!Z.is.und(W.friction);(ee||!Z.is.und(W.frequency)||!Z.is.und(W.damping)||!Z.is.und(W.mass))&&(A.duration=void 0,A.decay=void 0),ee&&(A.frequency=void 0)}}var ke=[],X=class{constructor(){this.changed=!1,this.values=ke,this.toValues=null,this.fromValues=ke,this.config=new he,this.immediate=!1}},se=nn;function pe(A,{key:W,props:ee,defaultProps:ie,state:ve,actions:Ee}){return new Promise((Ae,Me)=>{let Re,Ue,vt=v(ee.cancel??ie?.cancel,W);if(vt)St();else{se.is.und(ee.pause)||(ve.paused=v(ee.pause,W));let Ye=ie?.pause;Ye!==!0&&(Ye=ve.paused||v(Ye,W)),Re=y(ee.delay||0,W),Ye?(ve.resumeQueue.add(Pt),Ee.pause()):(Ee.resume(),Pt())}function ot(){ve.resumeQueue.add(Pt),ve.timeouts.delete(Ue),Ue.cancel(),Re=Ue.time-se.raf.now()}function Pt(){Re>0&&!se.Globals.skipAnimation?(ve.delayed=!0,Ue=se.raf.setTimeout(St,Re),ve.pauseQueue.add(ot),ve.timeouts.add(Ue)):St()}function St(){ve.delayed&&(ve.delayed=!1),ve.pauseQueue.delete(ot),ve.timeouts.delete(Ue),A<=(ve.cancelId||0)&&(vt=!0);try{Ee.start({...ee,callId:A,cancel:vt},Ae)}catch(Ye){Me(Ye)}}})}var Ne=nn,Se=(A,W)=>W.length==1?W[0]:W.some(ee=>ee.cancelled)?We(A.get()):W.every(ee=>ee.noop)?Te(A.get()):Pe(A.get(),W.every(ee=>ee.finished)),Te=A=>({value:A,noop:!0,finished:!0,cancelled:!1}),Pe=(A,W,ee=!1)=>({value:A,finished:W,cancelled:ee}),We=A=>({value:A,cancelled:!0,finished:!1});function $e(A,W,ee,ie){let{callId:ve,parentId:Ee,onRest:Ae}=W,{asyncTo:Me,promise:Re}=ee;return!Ee&&A===Me&&!W.reset?Re:ee.promise=(async()=>{ee.asyncId=ve,ee.asyncTo=A;let Ue=S(W,(mt,st)=>st==="onRest"?void 0:mt),vt,ot,Pt=new Promise((mt,st)=>(vt=mt,ot=st)),St=mt=>{let st=ve<=(ee.cancelId||0)&&We(ie)||ve!==ee.asyncId&&Pe(ie,!1);if(st)throw mt.result=st,ot(mt),mt},Ye=(mt,st)=>{let Ct=new Je,ct=new Ze;return(async()=>{if(Ne.Globals.skipAnimation)throw lt(ee),ct.result=Pe(ie,!1),ot(ct),ct;St(Ct);let kt=Ne.is.obj(mt)?{...mt}:{...st,to:mt};kt.parentId=ve,(0,Ne.eachProp)(Ue,(ci,Ht)=>{Ne.is.und(kt[Ht])&&(kt[Ht]=ci)});let lr=await ie.start(kt);return St(Ct),ee.paused&&await new Promise(ci=>{ee.resumeQueue.add(ci)}),lr})()},pt;if(Ne.Globals.skipAnimation)return lt(ee),Pe(ie,!1);try{let mt;Ne.is.arr(A)?mt=(async st=>{for(let Ct of st)await Ye(Ct)})(A):mt=Promise.resolve(A(Ye,ie.stop.bind(ie))),await Promise.all([mt.then(vt),Pt]),pt=Pe(ie.get(),!0,!1)}catch(mt){if(mt instanceof Je)pt=mt.result;else if(mt instanceof Ze)pt=mt.result;else throw mt}finally{ve==ee.asyncId&&(ee.asyncId=Ee,ee.asyncTo=Ee?Me:void 0,ee.promise=Ee?Re:void 0)}return Ne.is.fun(Ae)&&Ne.raf.batchedUpdates(()=>{Ae(pt,ie,ie.item)}),pt})()}function lt(A,W){(0,Ne.flush)(A.timeouts,ee=>ee.cancel()),A.pauseQueue.clear(),A.resumeQueue.clear(),A.asyncId=A.asyncTo=A.promise=void 0,W&&(A.cancelId=W)}var Je=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Ze=class extends Error{constructor(){super("SkipAnimationSignal")}},Ve=nn,Vt=T0,$t=A=>A instanceof Gt,Wt=1,Gt=class extends Ve.FluidValue{constructor(){super(...arguments),this.id=Wt++,this._priority=0}get priority(){return this._priority}set priority(A){this._priority!=A&&(this._priority=A,this._onPriorityChange(A))}get(){let A=(0,Vt.getAnimated)(this);return A&&A.getValue()}to(...A){return Ve.Globals.to(this,A)}interpolate(...A){return(0,Ve.deprecateInterpolate)(),Ve.Globals.to(this,A)}toJSON(){return this.get()}observerAdded(A){A==1&&this._attach()}observerRemoved(A){A==0&&this._detach()}_attach(){}_detach(){}_onChange(A,W=!1){(0,Ve.callFluidObservers)(this,{type:"change",parent:this,value:A,idle:W})}_onPriorityChange(A){this.idle||Ve.frameLoop.sort(this),(0,Ve.callFluidObservers)(this,{type:"priority",parent:this,priority:A})}},Ot=Symbol.for("SpringPhase"),wt=1,ln=2,hn=4,br=A=>(A[Ot]&wt)>0,yn=A=>(A[Ot]&ln)>0,Jn=A=>(A[Ot]&hn)>0,ui=(A,W)=>W?A[Ot]|=ln|wt:A[Ot]&=~ln,Qa=(A,W)=>W?A[Ot]|=hn:A[Ot]&=~hn,un=class extends Gt{constructor(A,W){if(super(),this.animation=new X,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!L.is.und(A)||!L.is.und(W)){let ee=L.is.obj(A)?{...A}:{...W,from:A};L.is.und(ee.default)&&(ee.default=!0),this.start(ee)}}get idle(){return!(yn(this)||this._state.asyncTo)||Jn(this)}get goal(){return(0,L.getFluidValue)(this.animation.to)}get velocity(){let A=(0,Q.getAnimated)(this);return A instanceof Q.AnimatedValue?A.lastVelocity||0:A.getPayload().map(W=>W.lastVelocity||0)}get hasAnimated(){return br(this)}get isAnimating(){return yn(this)}get isPaused(){return Jn(this)}get isDelayed(){return this._state.delayed}advance(A){let W=!0,ee=!1,ie=this.animation,{toValues:ve}=ie,{config:Ee}=ie,Ae=(0,Q.getPayload)(ie.to);!Ae&&(0,L.hasFluidValue)(ie.to)&&(ve=(0,L.toArray)((0,L.getFluidValue)(ie.to))),ie.values.forEach((Ue,vt)=>{if(Ue.done)return;let ot=Ue.constructor==Q.AnimatedString?1:Ae?Ae[vt].lastPosition:ve[vt],Pt=ie.immediate,St=ot;if(!Pt){if(St=Ue.lastPosition,Ee.tension<=0){Ue.done=!0;return}let Ye=Ue.elapsedTime+=A,pt=ie.fromValues[vt],mt=Ue.v0!=null?Ue.v0:Ue.v0=L.is.arr(Ee.velocity)?Ee.velocity[vt]:Ee.velocity,st,Ct=Ee.precision||(pt==ot?.005:Math.min(1,Math.abs(ot-pt)*.001));if(L.is.und(Ee.duration))if(Ee.decay){let ct=Ee.decay===!0?.998:Ee.decay,kt=Math.exp(-(1-ct)*Ye);St=pt+mt/(1-ct)*(1-kt),Pt=Math.abs(Ue.lastPosition-St)<=Ct,st=mt*kt}else{st=Ue.lastVelocity==null?mt:Ue.lastVelocity;let ct=Ee.restVelocity||Ct/10,kt=Ee.clamp?0:Ee.bounce,lr=!L.is.und(kt),ci=pt==ot?Ue.v0>0:pt<ot,Ht,Gn=!1,Ln=1,$a=Math.ceil(A/Ln);for(let Ja=0;Ja<$a&&(Ht=Math.abs(st)>ct,!(!Ht&&(Pt=Math.abs(ot-St)<=Ct,Pt)));++Ja){lr&&(Gn=St==ot||St>ot==ci,Gn&&(st=-st*kt,St=ot));let To=-Ee.tension*1e-6*(St-ot),Nr=-Ee.friction*.001*st,gt=(To+Nr)/Ee.mass;st=st+gt*Ln,St=St+st*Ln}}else{let ct=1;Ee.duration>0&&(this._memoizedDuration!==Ee.duration&&(this._memoizedDuration=Ee.duration,Ue.durationProgress>0&&(Ue.elapsedTime=Ee.duration*Ue.durationProgress,Ye=Ue.elapsedTime+=A)),ct=(Ee.progress||0)+Ye/this._memoizedDuration,ct=ct>1?1:ct<0?0:ct,Ue.durationProgress=ct),St=pt+Ee.easing(ct)*(ot-pt),st=(St-Ue.lastPosition)/A,Pt=ct==1}Ue.lastVelocity=st,Number.isNaN(St)&&(console.warn("Got NaN while animating:",this),Pt=!0)}Ae&&!Ae[vt].done&&(Pt=!1),Pt?Ue.done=!0:W=!1,Ue.setValue(St,Ee.round)&&(ee=!0)});let Me=(0,Q.getAnimated)(this),Re=Me.getValue();if(W){let Ue=(0,L.getFluidValue)(ie.to);(Re!==Ue||ee)&&!Ee.decay?(Me.setValue(Ue),this._onChange(Ue)):ee&&Ee.decay&&this._onChange(Re),this._stop()}else ee&&this._onChange(Re)}set(A){return L.raf.batchedUpdates(()=>{this._stop(),this._focus(A),this._set(A)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(yn(this)){let{to:A,config:W}=this.animation;L.raf.batchedUpdates(()=>{this._onStart(),W.decay||this._set(A,!1),this._stop()})}return this}update(A){return(this.queue||(this.queue=[])).push(A),this}start(A,W){let ee;return L.is.und(A)?(ee=this.queue||[],this.queue=[]):ee=[L.is.obj(A)?A:{...W,to:A}],Promise.all(ee.map(ie=>this._update(ie))).then(ie=>Se(this,ie))}stop(A){let{to:W}=this.animation;return this._focus(this.get()),lt(this._state,A&&this._lastCallId),L.raf.batchedUpdates(()=>this._stop(W,A)),this}reset(){this._update({reset:!0})}eventObserved(A){A.type=="change"?this._start():A.type=="priority"&&(this.priority=A.priority+1)}_prepareNode(A){let W=this.key||"",{to:ee,from:ie}=A;ee=L.is.obj(ee)?ee[W]:ee,(ee==null||D(ee))&&(ee=void 0),ie=L.is.obj(ie)?ie[W]:ie,ie==null&&(ie=void 0);let ve={to:ee,from:ie};return br(this)||(A.reverse&&([ee,ie]=[ie,ee]),ie=(0,L.getFluidValue)(ie),L.is.und(ie)?(0,Q.getAnimated)(this)||this._set(ee):this._set(ie)),ve}_update({...A},W){let{key:ee,defaultProps:ie}=this;A.default&&Object.assign(ie,S(A,(Ae,Me)=>/^on/.test(Me)?b(Ae,ee):Ae)),or(this,A,"onProps"),Vn(this,"onProps",A,this);let ve=this._prepareNode(A);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let Ee=this._state;return pe(++this._lastCallId,{key:ee,props:A,defaultProps:ie,state:Ee,actions:{pause:()=>{Jn(this)||(Qa(this,!0),(0,L.flushCalls)(Ee.pauseQueue),Vn(this,"onPause",Pe(this,la(this,this.animation.to)),this))},resume:()=>{Jn(this)&&(Qa(this,!1),yn(this)&&this._resume(),(0,L.flushCalls)(Ee.resumeQueue),Vn(this,"onResume",Pe(this,la(this,this.animation.to)),this))},start:this._merge.bind(this,ve)}}).then(Ae=>{if(A.loop&&Ae.finished&&!(W&&Ae.noop)){let Me=Ya(A);if(Me)return this._update(Me,!0)}return Ae})}_merge(A,W,ee){if(W.cancel)return this.stop(!0),ee(We(this));let ie=!L.is.und(A.to),ve=!L.is.und(A.from);if(ie||ve)if(W.callId>this._lastToId)this._lastToId=W.callId;else return ee(We(this));let{key:Ee,defaultProps:Ae,animation:Me}=this,{to:Re,from:Ue}=Me,{to:vt=Re,from:ot=Ue}=A;ve&&!ie&&(!W.default||L.is.und(vt))&&(vt=ot),W.reverse&&([vt,ot]=[ot,vt]);let Pt=!(0,L.isEqual)(ot,Ue);Pt&&(Me.from=ot),ot=(0,L.getFluidValue)(ot);let St=!(0,L.isEqual)(vt,Re);St&&this._focus(vt);let Ye=D(W.to),{config:pt}=Me,{decay:mt,velocity:st}=pt;(ie||ve)&&(pt.velocity=0),W.config&&!Ye&&ae(pt,y(W.config,Ee),W.config!==Ae.config?y(Ae.config,Ee):void 0);let Ct=(0,Q.getAnimated)(this);if(!Ct||L.is.und(vt))return ee(Pe(this,!0));let ct=L.is.und(W.reset)?ve&&!W.default:!L.is.und(ot)&&v(W.reset,Ee),kt=ct?ot:this.get(),lr=$(vt),ci=L.is.num(lr)||L.is.arr(lr)||(0,L.isAnimatedString)(lr),Ht=!Ye&&(!ci||v(Ae.immediate||W.immediate,Ee));if(St){let Ja=(0,Q.getAnimatedType)(vt);if(Ja!==Ct.constructor)if(Ht)Ct=this._set(lr);else throw Error(`Cannot animate between ${Ct.constructor.name} and ${Ja.name}, as the "to" prop suggests`)}let Gn=Ct.constructor,Ln=(0,L.hasFluidValue)(vt),$a=!1;if(!Ln){let Ja=ct||!br(this)&&Pt;(St||Ja)&&($a=(0,L.isEqual)($(kt),lr),Ln=!$a),(!(0,L.isEqual)(Me.immediate,Ht)&&!Ht||!(0,L.isEqual)(pt.decay,mt)||!(0,L.isEqual)(pt.velocity,st))&&(Ln=!0)}if($a&&yn(this)&&(Me.changed&&!ct?Ln=!0:Ln||this._stop(Re)),!Ye&&((Ln||(0,L.hasFluidValue)(Re))&&(Me.values=Ct.getPayload(),Me.toValues=(0,L.hasFluidValue)(vt)?null:Gn==Q.AnimatedString?[1]:(0,L.toArray)(lr)),Me.immediate!=Ht&&(Me.immediate=Ht,!Ht&&!ct&&this._set(Re)),Ln)){let{onRest:Ja}=Me;(0,L.each)(ts,Nr=>or(this,W,Nr));let To=Pe(this,la(this,Re));(0,L.flushCalls)(this._pendingCalls,To),this._pendingCalls.add(ee),Me.changed&&L.raf.batchedUpdates(()=>{var Nr;Me.changed=!ct,Ja?.(To,this),ct?y(Ae.onRest,To):(Nr=Me.onStart)==null||Nr.call(Me,To,this)})}ct&&this._set(kt),Ye?ee($e(W.to,W,this._state,this)):Ln?this._start():yn(this)&&!St?this._pendingCalls.add(ee):ee(Te(kt))}_focus(A){let W=this.animation;A!==W.to&&((0,L.getFluidObservers)(this)&&this._detach(),W.to=A,(0,L.getFluidObservers)(this)&&this._attach())}_attach(){let A=0,{to:W}=this.animation;(0,L.hasFluidValue)(W)&&((0,L.addFluidObserver)(W,this),$t(W)&&(A=W.priority+1)),this.priority=A}_detach(){let{to:A}=this.animation;(0,L.hasFluidValue)(A)&&(0,L.removeFluidObserver)(A,this)}_set(A,W=!0){let ee=(0,L.getFluidValue)(A);if(!L.is.und(ee)){let ie=(0,Q.getAnimated)(this);if(!ie||!(0,L.isEqual)(ee,ie.getValue())){let ve=(0,Q.getAnimatedType)(ee);!ie||ie.constructor!=ve?(0,Q.setAnimated)(this,ve.create(ee)):ie.setValue(ee),ie&&L.raf.batchedUpdates(()=>{this._onChange(ee,W)})}}return(0,Q.getAnimated)(this)}_onStart(){let A=this.animation;A.changed||(A.changed=!0,Vn(this,"onStart",Pe(this,la(this,A.to)),this))}_onChange(A,W){W||(this._onStart(),y(this.animation.onChange,A,this)),y(this.defaultProps.onChange,A,this),super._onChange(A,W)}_start(){let A=this.animation;(0,Q.getAnimated)(this).reset((0,L.getFluidValue)(A.to)),A.immediate||(A.fromValues=A.values.map(W=>W.lastPosition)),yn(this)||(ui(this,!0),Jn(this)||this._resume())}_resume(){L.Globals.skipAnimation?this.finish():L.frameLoop.start(this)}_stop(A,W){if(yn(this)){ui(this,!1);let ee=this.animation;(0,L.each)(ee.values,ve=>{ve.done=!0}),ee.toValues&&(ee.onChange=ee.onPause=ee.onResume=void 0),(0,L.callFluidObservers)(this,{type:"idle",parent:this});let ie=W?We(this.get()):Pe(this.get(),la(this,A??ee.to));(0,L.flushCalls)(this._pendingCalls,ie),ee.changed&&(ee.changed=!1,Vn(this,"onRest",ie,this))}}};function la(A,W){let ee=$(W),ie=$(A.get());return(0,L.isEqual)(ie,ee)}function Ya(A,W=A.loop,ee=A.to){let ie=y(W);if(ie){let ve=ie!==!0&&T(ie),Ee=(ve||A).reverse,Ae=!ve||ve.reset;return Ta({...A,loop:W,default:!1,pause:void 0,to:!Ee||D(ee)?ee:void 0,from:Ae?A.from:void 0,reset:Ae,...ve})}}function Ta(A){let{to:W,from:ee}=A=T(A),ie=new Set;return L.is.obj(W)&&Kr(W,ie),L.is.obj(ee)&&Kr(ee,ie),A.keys=ie.size?Array.from(ie):null,A}function Co(A){let W=Ta(A);return L.is.und(W.default)&&(W.default=S(W)),W}function Kr(A,W){(0,L.eachProp)(A,(ee,ie)=>ee!=null&&W.add(ie))}var ts=["onStart","onRest","onChange","onPause","onResume"];function or(A,W,ee){A.animation[ee]=W[ee]!==x(W,ee)?b(W[ee],A.key):void 0}function Vn(A,W,...ee){var ie,ve,Ee,Ae;(ve=(ie=A.animation)[W])==null||ve.call(ie,...ee),(Ae=(Ee=A.defaultProps)[W])==null||Ae.call(Ee,...ee)}var dt=nn,le=["onStart","onChange","onRest"],fe=1,xe=class{constructor(A,W){this.id=fe++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),W&&(this._flush=W),A&&this.start({default:!0,...A})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(A=>A.idle&&!A.isDelayed&&!A.isPaused)}get item(){return this._item}set item(A){this._item=A}get(){let A={};return this.each((W,ee)=>A[ee]=W.get()),A}set(A){for(let W in A){let ee=A[W];dt.is.und(ee)||this.springs[W].set(ee)}}update(A){return A&&this.queue.push(Ta(A)),this}start(A){let{queue:W}=this;return A?W=(0,dt.toArray)(A).map(Ta):this.queue=[],this._flush?this._flush(this,W):(bt(this,W),_e(this,W))}stop(A,W){if(A!==!!A&&(W=A),W){let ee=this.springs;(0,dt.each)((0,dt.toArray)(W),ie=>ee[ie].stop(!!A))}else lt(this._state,this._lastAsyncId),this.each(ee=>ee.stop(!!A));return this}pause(A){if(dt.is.und(A))this.start({pause:!0});else{let W=this.springs;(0,dt.each)((0,dt.toArray)(A),ee=>W[ee].pause())}return this}resume(A){if(dt.is.und(A))this.start({pause:!1});else{let W=this.springs;(0,dt.each)((0,dt.toArray)(A),ee=>W[ee].resume())}return this}each(A){(0,dt.eachProp)(this.springs,A)}_onFrame(){let{onStart:A,onChange:W,onRest:ee}=this._events,ie=this._active.size>0,ve=this._changed.size>0;(ie&&!this._started||ve&&!this._started)&&(this._started=!0,(0,dt.flush)(A,([Me,Re])=>{Re.value=this.get(),Me(Re,this,this._item)}));let Ee=!ie&&this._started,Ae=ve||Ee&&ee.size?this.get():null;ve&&W.size&&(0,dt.flush)(W,([Me,Re])=>{Re.value=Ae,Me(Re,this,this._item)}),Ee&&(this._started=!1,(0,dt.flush)(ee,([Me,Re])=>{Re.value=Ae,Me(Re,this,this._item)}))}eventObserved(A){if(A.type=="change")this._changed.add(A.parent),A.idle||this._active.add(A.parent);else if(A.type=="idle")this._active.delete(A.parent);else return;dt.raf.onFrame(this._onFrame)}};function _e(A,W){return Promise.all(W.map(ee=>ze(A,ee))).then(ee=>Se(A,ee))}async function ze(A,W,ee){let{keys:ie,to:ve,from:Ee,loop:Ae,onRest:Me,onResolve:Re}=W,Ue=dt.is.obj(W.default)&&W.default;Ae&&(W.loop=!1),ve===!1&&(W.to=null),Ee===!1&&(W.from=null);let vt=dt.is.arr(ve)||dt.is.fun(ve)?ve:void 0;vt?(W.to=void 0,W.onRest=void 0,Ue&&(Ue.onRest=void 0)):(0,dt.each)(le,pt=>{let mt=W[pt];if(dt.is.fun(mt)){let st=A._events[pt];W[pt]=({finished:Ct,cancelled:ct})=>{let kt=st.get(mt);kt?(Ct||(kt.finished=!1),ct&&(kt.cancelled=!0)):st.set(mt,{value:null,finished:Ct||!1,cancelled:ct||!1})},Ue&&(Ue[pt]=W[pt])}});let ot=A._state;W.pause===!ot.paused?(ot.paused=W.pause,(0,dt.flushCalls)(W.pause?ot.pauseQueue:ot.resumeQueue)):ot.paused&&(W.pause=!0);let Pt=(ie||Object.keys(A.springs)).map(pt=>A.springs[pt].start(W)),St=W.cancel===!0||x(W,"cancel")===!0;(vt||St&&ot.asyncId)&&Pt.push(pe(++A._lastAsyncId,{props:W,state:ot,actions:{pause:dt.noop,resume:dt.noop,start(pt,mt){St?(lt(ot,A._lastAsyncId),mt(We(A))):(pt.onRest=Me,mt($e(vt,pt,ot,A)))}}})),ot.paused&&await new Promise(pt=>{ot.resumeQueue.add(pt)});let Ye=Se(A,await Promise.all(Pt));if(Ae&&Ye.finished&&!(ee&&Ye.noop)){let pt=Ya(W,Ae,ve);if(pt)return bt(A,[pt]),ze(A,pt,!0)}return Re&&dt.raf.batchedUpdates(()=>Re(Ye,A,A.item)),Ye}function it(A,W){let ee={...A.springs};return W&&(0,dt.each)((0,dt.toArray)(W),ie=>{dt.is.und(ie.keys)&&(ie=Ta(ie)),dt.is.obj(ie.to)||(ie={...ie,to:void 0}),Qe(ee,ie,ve=>at(ve))}),nt(A,ee),ee}function nt(A,W){(0,dt.eachProp)(W,(ee,ie)=>{A.springs[ie]||(A.springs[ie]=ee,(0,dt.addFluidObserver)(ee,A))})}function at(A,W){let ee=new un;return ee.key=A,W&&(0,dt.addFluidObserver)(ee,W),ee}function Qe(A,W,ee){W.keys&&(0,dt.each)(W.keys,ie=>{(A[ie]||(A[ie]=ee(ie)))._prepareNode(W)})}function bt(A,W){(0,dt.each)(W,ee=>{Qe(A.springs,ee,ie=>at(ie,A))})}var cn=c(_),ft=_,Zt=nn,bn=({children:A,...W})=>{let ee=(0,ft.useContext)(Fr),ie=W.pause||!!ee.pause,ve=W.immediate||!!ee.immediate;W=(0,Zt.useMemoOne)(()=>({pause:ie,immediate:ve}),[ie,ve]);let{Provider:Ee}=Fr;return cn.createElement(Ee,{value:W},A)},Fr=sr(bn,{});bn.Provider=Fr.Provider,bn.Consumer=Fr.Consumer;function sr(A,W){return Object.assign(A,cn.createContext(W)),A.Provider._context=A,A.Consumer._context=A,A}var vr=nn,ns=()=>{let A=[],W=function(ie){(0,vr.deprecateDirectCall)();let ve=[];return(0,vr.each)(A,(Ee,Ae)=>{if(vr.is.und(ie))ve.push(Ee.start());else{let Me=ee(ie,Ee,Ae);Me&&ve.push(Ee.start(Me))}}),ve};W.current=A,W.add=function(ie){A.includes(ie)||A.push(ie)},W.delete=function(ie){let ve=A.indexOf(ie);~ve&&A.splice(ve,1)},W.pause=function(){return(0,vr.each)(A,ie=>ie.pause(...arguments)),this},W.resume=function(){return(0,vr.each)(A,ie=>ie.resume(...arguments)),this},W.set=function(ie){(0,vr.each)(A,(ve,Ee)=>{let Ae=vr.is.fun(ie)?ie(Ee,ve):ie;Ae&&ve.set(Ae)})},W.start=function(ie){let ve=[];return(0,vr.each)(A,(Ee,Ae)=>{if(vr.is.und(ie))ve.push(Ee.start());else{let Me=this._getProps(ie,Ee,Ae);Me&&ve.push(Ee.start(Me))}}),ve},W.stop=function(){return(0,vr.each)(A,ie=>ie.stop(...arguments)),this},W.update=function(ie){return(0,vr.each)(A,(ve,Ee)=>ve.update(this._getProps(ie,ve,Ee))),this};let ee=function(ie,ve,Ee){return vr.is.fun(ie)?ie(Ee,ve):ie};return W._getProps=ee,W};function Gi(A,W,ee){let ie=H.is.fun(W)&&W;ie&&!ee&&(ee=[]);let ve=(0,J.useMemo)(()=>ie||arguments.length==3?ns():void 0,[]),Ee=(0,J.useRef)(0),Ae=(0,H.useForceUpdate)(),Me=(0,J.useMemo)(()=>({ctrls:[],queue:[],flush(st,Ct){let ct=it(st,Ct);return Ee.current>0&&!Me.queue.length&&!Object.keys(ct).some(kt=>!st.springs[kt])?_e(st,Ct):new Promise(kt=>{nt(st,ct),Me.queue.push(()=>{kt(_e(st,Ct))}),Ae()})}}),[]),Re=(0,J.useRef)([...Me.ctrls]),Ue=[],vt=(0,H.usePrev)(A)||0;(0,J.useMemo)(()=>{(0,H.each)(Re.current.slice(A,vt),st=>{B(st,ve),st.stop(!0)}),Re.current.length=A,ot(vt,A)},[A]),(0,J.useMemo)(()=>{ot(0,Math.min(vt,A))},ee);function ot(st,Ct){for(let ct=st;ct<Ct;ct++){let kt=Re.current[ct]||(Re.current[ct]=new xe(null,Me.flush)),lr=ie?ie(ct,kt):W[ct];lr&&(Ue[ct]=Co(lr))}}let Pt=Re.current.map((st,Ct)=>it(st,Ue[Ct])),St=(0,J.useContext)(bn),Ye=(0,H.usePrev)(St),pt=St!==Ye&&P(St);(0,H.useIsomorphicLayoutEffect)(()=>{Ee.current++,Me.ctrls=Re.current;let{queue:st}=Me;st.length&&(Me.queue=[],(0,H.each)(st,Ct=>Ct())),(0,H.each)(Re.current,(Ct,ct)=>{ve?.add(Ct),pt&&Ct.start({default:St});let kt=Ue[ct];kt&&(z(Ct,kt.ref),Ct.ref?Ct.queue.push(kt):Ct.start(kt))})}),(0,H.useOnce)(()=>()=>{(0,H.each)(Me.ctrls,st=>st.stop(!0))});let mt=Pt.map(st=>({...st}));return ve?[mt,ve]:mt}function Ia(A,W){let ee=Y.is.fun(A),[[ie],ve]=Gi(1,ee?A:[A],ee?W||[]:W);return ee||arguments.length==2?[ie,ve]:ie}var Eo=_,Xu=()=>ns(),Qu=()=>(0,Eo.useState)(Xu)[0],$l=nn,rs=(A,W)=>{let ee=(0,$l.useConstant)(()=>new un(A,W));return(0,$l.useOnce)(()=>()=>{ee.stop()}),ee},No=nn;function rn(A,W,ee){let ie=No.is.fun(W)&&W;ie&&!ee&&(ee=[]);let ve=!0,Ee,Ae=Gi(A,(Me,Re)=>{let Ue=ie?ie(Me,Re):W;return Ee=Ue.ref,ve=ve&&Ue.reverse,Ue},ee||[{}]);if((0,No.useIsomorphicLayoutEffect)(()=>{(0,No.each)(Ae[1].current,(Me,Re)=>{let Ue=Ae[1].current[Re+(ve?1:-1)];if(z(Me,Ee),Me.ref){Ue&&Me.update({to:Ue.springs});return}Ue?Me.start({to:Ue.springs}):Me.start()})},ee),ie||arguments.length==3){let Me=Ee??Ae[1];return Me._getProps=(Re,Ue,vt)=>{let ot=No.is.fun(Re)?Re(vt,Ue):Re;if(ot){let Pt=Me.current[vt+(ot.reverse?1:-1)];return Pt&&(ot.to=Pt.springs),ot}},Ae}return Ae[0]}var fn=c(_),Er=_,Dt=nn;function Ol(A,W,ee){let ie=Dt.is.fun(W)&&W,{reset:ve,sort:Ee,trail:Ae=0,expires:Me=!0,exitBeforeEnter:Re=!1,onDestroyed:Ue,ref:vt,config:ot}=ie?ie():W,Pt=(0,Er.useMemo)(()=>ie||arguments.length==3?ns():void 0,[]),St=(0,Dt.toArray)(A),Ye=[],pt=(0,Er.useRef)(null),mt=ve?null:pt.current;(0,Dt.useIsomorphicLayoutEffect)(()=>{pt.current=Ye}),(0,Dt.useOnce)(()=>((0,Dt.each)(Ye,gt=>{Pt?.add(gt.ctrl),gt.ctrl.ref=Pt}),()=>{(0,Dt.each)(pt.current,gt=>{gt.expired&&clearTimeout(gt.expirationId),B(gt.ctrl,Pt),gt.ctrl.stop(!0)})}));let st=nk(St,ie?ie():W,mt),Ct=ve&&pt.current||[];(0,Dt.useIsomorphicLayoutEffect)(()=>(0,Dt.each)(Ct,({ctrl:gt,item:Mt,key:Tr})=>{B(gt,Pt),y(Ue,Mt,Tr)}));let ct=[];if(mt&&(0,Dt.each)(mt,(gt,Mt)=>{gt.expired?(clearTimeout(gt.expirationId),Ct.push(gt)):(Mt=ct[Mt]=st.indexOf(gt.key),~Mt&&(Ye[Mt]=gt))}),(0,Dt.each)(St,(gt,Mt)=>{Ye[Mt]||(Ye[Mt]={key:st[Mt],item:gt,phase:"mount",ctrl:new xe},Ye[Mt].ctrl.item=gt)}),ct.length){let gt=-1,{leave:Mt}=ie?ie():W;(0,Dt.each)(ct,(Tr,Ir)=>{let mn=mt[Ir];~Tr?(gt=Ye.indexOf(mn),Ye[gt]={...mn,item:St[Tr]}):Mt&&Ye.splice(++gt,0,mn)})}Dt.is.fun(Ee)&&Ye.sort((gt,Mt)=>Ee(gt.item,Mt.item));let kt=-Ae,lr=(0,Dt.useForceUpdate)(),ci=S(W),Ht=new Map,Gn=(0,Er.useRef)(new Map),Ln=(0,Er.useRef)(!1);(0,Dt.each)(Ye,(gt,Mt)=>{let Tr=gt.key,Ir=gt.phase,mn=ie?ie():W,Mn,ua,Io=y(mn.delay||0,Tr);if(Ir=="mount")Mn=mn.enter,ua="enter";else{let Za=st.indexOf(Tr)<0;if(Ir!="leave")if(Za)Mn=mn.leave,ua="leave";else if(Mn=mn.update)ua="update";else return;else if(!Za)Mn=mn.enter,ua="enter";else return}if(Mn=y(Mn,gt.item,Mt),Mn=Dt.is.obj(Mn)?T(Mn):{to:Mn},!Mn.config){let Za=ot||ci.config;Mn.config=y(Za,gt.item,Mt,ua)}kt+=Ae;let ca={...ci,delay:Io+kt,ref:vt,immediate:mn.immediate,reset:!1,...Mn};if(ua=="enter"&&Dt.is.und(ca.from)){let Za=ie?ie():W,Bs=Dt.is.und(Za.initial)||mt?Za.from:Za.initial;ca.from=y(Bs,gt.item,Mt)}let{onResolve:zs}=ca;ca.onResolve=Za=>{y(zs,Za);let Bs=pt.current,ur=Bs.find(da=>da.key===Tr);if(ur&&!(Za.cancelled&&ur.phase!="update")&&ur.ctrl.idle){let da=Bs.every(an=>an.ctrl.idle);if(ur.phase=="leave"){let an=y(Me,ur.item);if(an!==!1){let js=an===!0?0:an;if(ur.expired=!0,!da&&js>0){js<=2147483647&&(ur.expirationId=setTimeout(lr,js));return}}}da&&Bs.some(an=>an.expired)&&(Gn.current.delete(ur),Re&&(Ln.current=!0),lr())}};let Oh=it(gt.ctrl,ca);ua==="leave"&&Re?Gn.current.set(gt,{phase:ua,springs:Oh,payload:ca}):Ht.set(gt,{phase:ua,springs:Oh,payload:ca})});let $a=(0,Er.useContext)(bn),Ja=(0,Dt.usePrev)($a),To=$a!==Ja&&P($a);(0,Dt.useIsomorphicLayoutEffect)(()=>{To&&(0,Dt.each)(Ye,gt=>{gt.ctrl.start({default:$a})})},[$a]),(0,Dt.each)(Ht,(gt,Mt)=>{if(Gn.current.size){let Tr=Ye.findIndex(Ir=>Ir.key===Mt.key);Ye.splice(Tr,1)}}),(0,Dt.useIsomorphicLayoutEffect)(()=>{(0,Dt.each)(Gn.current.size?Gn.current:Ht,({phase:gt,payload:Mt},Tr)=>{let{ctrl:Ir}=Tr;Tr.phase=gt,Pt?.add(Ir),To&&gt=="enter"&&Ir.start({default:$a}),Mt&&(z(Ir,Mt.ref),(Ir.ref||Pt)&&!Ln.current?Ir.update(Mt):(Ir.start(Mt),Ln.current&&(Ln.current=!1)))})},ve?void 0:ee);let Nr=gt=>fn.createElement(fn.Fragment,null,Ye.map((Mt,Tr)=>{let{springs:Ir}=Ht.get(Mt)||Mt.ctrl,mn=gt({...Ir},Mt.item,Mt,Tr);return mn&&mn.type?fn.createElement(mn.type,{...mn.props,key:Dt.is.str(Mt.key)||Dt.is.num(Mt.key)?Mt.key:Mt.ctrl.id,ref:mn.ref}):mn}));return Pt?[Nr,Pt]:Nr}var Rh=1;function nk(A,{key:W,keys:ee=W},ie){if(ee===null){let ve=new Set;return A.map(Ee=>{let Ae=ie&&ie.find(Me=>Me.item===Ee&&Me.phase!=="leave"&&!ve.has(Me));return Ae?(ve.add(Ae),Ae.key):Rh++})}return Dt.is.und(ee)?A:Dt.is.fun(ee)?A.map(ee):(0,Dt.toArray)(ee)}var Yu=nn,Ml=({container:A,...W}={})=>{let[ee,ie]=Ia(()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...W}),[]);return(0,Yu.useIsomorphicLayoutEffect)(()=>{let ve=(0,Yu.onScroll)(({x:Ee,y:Ae})=>{ie.start({scrollX:Ee.current,scrollXProgress:Ee.progress,scrollY:Ae.current,scrollYProgress:Ae.progress})},{container:A?.current||void 0});return()=>{(0,Yu.each)(Object.values(ee),Ee=>Ee.stop()),ve()}},[]),ee},Hi=nn,En=({container:A,...W})=>{let[ee,ie]=Ia(()=>({width:0,height:0,...W}),[]);return(0,Hi.useIsomorphicLayoutEffect)(()=>{let ve=(0,Hi.onResize)(({width:Ee,height:Ae})=>{ie.start({width:Ee,height:Ae,immediate:ee.width.get()===0||ee.height.get()===0})},{container:A?.current||void 0});return()=>{(0,Hi.each)(Object.values(ee),Ee=>Ee.stop()),ve()}},[]),ee},vn=_,qi=nn,Xr={any:0,all:1};function _a(A,W){let[ee,ie]=(0,vn.useState)(!1),ve=(0,vn.useRef)(),Ee=qi.is.fun(A)&&A,Ae=Ee?Ee():{},{to:Me={},from:Re={},...Ue}=Ae,vt=Ee?W:A,[ot,Pt]=Ia(()=>({from:Re,...Ue}),[]);return(0,qi.useIsomorphicLayoutEffect)(()=>{let St=ve.current,{root:Ye,once:pt,amount:mt="any",...st}=vt??{};if(!St||pt&&ee||typeof IntersectionObserver>"u")return;let Ct=new WeakMap,ct=()=>(Me&&Pt.start(Me),ie(!0),pt?void 0:()=>{Re&&Pt.start(Re),ie(!1)}),kt=ci=>{ci.forEach(Ht=>{let Gn=Ct.get(Ht.target);if(Ht.isIntersecting!==!!Gn)if(Ht.isIntersecting){let Ln=ct();qi.is.fun(Ln)?Ct.set(Ht.target,Ln):lr.unobserve(Ht.target)}else Gn&&(Gn(),Ct.delete(Ht.target))})},lr=new IntersectionObserver(kt,{root:Ye&&Ye.current||void 0,threshold:typeof mt=="number"||Array.isArray(mt)?mt:Xr[mt],...st});return lr.observe(St),()=>lr.unobserve(St)},[vt]),Ee?[ve,ot]:[ve,ee]}function As({children:A,...W}){return A(Ia(W))}var Pl=nn;function Ra({items:A,children:W,...ee}){let ie=rn(A.length,ee);return A.map((ve,Ee)=>{let Ae=W(ve,Ee);return Pl.is.fun(Ae)?Ae(ie[Ee]):Ae})}function kd({items:A,children:W,...ee}){return Ol(A,ee)(W)}var M0=nn,Wn=nn,as=T0,Ju=class extends Gt{constructor(A,W){super(),this.source=A,this.idle=!0,this._active=new Set,this.calc=(0,Wn.createInterpolator)(...W);let ee=this._get(),ie=(0,as.getAnimatedType)(ee);(0,as.setAnimated)(this,ie.create(ee))}advance(A){let W=this._get(),ee=this.get();(0,Wn.isEqual)(W,ee)||((0,as.getAnimated)(this).setValue(W),this._onChange(W,this.idle)),!this.idle&&P0(this._active)&&$h(this)}_get(){let A=Wn.is.arr(this.source)?this.source.map(Wn.getFluidValue):(0,Wn.toArray)((0,Wn.getFluidValue)(this.source));return this.calc(...A)}_start(){this.idle&&!P0(this._active)&&(this.idle=!1,(0,Wn.each)((0,as.getPayload)(this),A=>{A.done=!1}),Wn.Globals.skipAnimation?(Wn.raf.batchedUpdates(()=>this.advance()),$h(this)):Wn.frameLoop.start(this))}_attach(){let A=1;(0,Wn.each)((0,Wn.toArray)(this.source),W=>{(0,Wn.hasFluidValue)(W)&&(0,Wn.addFluidObserver)(W,this),$t(W)&&(W.idle||this._active.add(W),A=Math.max(A,W.priority+1))}),this.priority=A,this._start()}_detach(){(0,Wn.each)((0,Wn.toArray)(this.source),A=>{(0,Wn.hasFluidValue)(A)&&(0,Wn.removeFluidObserver)(A,this)}),this._active.clear(),$h(this)}eventObserved(A){A.type=="change"?A.idle?this.advance():(this._active.add(A.parent),this._start()):A.type=="idle"?this._active.delete(A.parent):A.type=="priority"&&(this.priority=(0,Wn.toArray)(this.source).reduce((W,ee)=>Math.max(W,($t(ee)?ee.priority:0)+1),0))}};function _i(A){return A.idle!==!1}function P0(A){return!A.size||Array.from(A).every(_i)}function $h(A){A.idle||(A.idle=!0,(0,Wn.each)((0,as.getPayload)(A),W=>{W.done=!0}),(0,Wn.callFluidObservers)(A,{type:"idle",parent:A}))}var rk=(A,...W)=>new Ju(A,W),Sd=(A,...W)=>((0,M0.deprecateInterpolate)(),new Ju(A,W)),Ds=nn;Ds.Globals.assign({createStringInterpolator:Ds.createStringInterpolator,to:(A,W)=>new Ju(A,W)});var Zu=Ds.frameLoop.advance,Ls=nn;u(p,VRe(),t.exports)})(nj);var WRe=nj.exports;tj.exports=WRe;var sU=tj.exports;(function(t){var e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,i=(H,L)=>{for(var Q in L)e(H,Q,{get:L[Q],enumerable:!0})},o=(H,L,Q,Z)=>{if(L&&typeof L=="object"||typeof L=="function")for(let te of r(L))!a.call(H,te)&&te!==Q&&e(H,te,{get:()=>L[te],enumerable:!(Z=n(L,te))||Z.enumerable});return H},s=(H,L,Q)=>(o(H,L,"default"),Q&&o(Q,L,"default")),l=H=>o(e({},"__esModule",{value:!0}),H),u={};i(u,{a:()=>J,animated:()=>J}),t.exports=l(u);var c=sU,d=Bo,p=nn,f=T0,g=/^--/;function y(H,L){return L==null||typeof L=="boolean"||L===""?"":typeof L=="number"&&L!==0&&!g.test(H)&&!(x.hasOwnProperty(H)&&x[H])?L+"px":(""+L).trim()}var v={};function b(H,L){if(!H.nodeType||!H.setAttribute)return!1;let Q=H.nodeName==="filter"||H.parentNode&&H.parentNode.nodeName==="filter",{style:Z,children:te,scrollTop:oe,scrollLeft:he,viewBox:ae,...de}=L,ke=Object.values(de),X=Object.keys(de).map(se=>Q||H.hasAttribute(se)?se:v[se]||(v[se]=se.replace(/([A-Z])/g,pe=>"-"+pe.toLowerCase())));te!==void 0&&(H.textContent=te);for(let se in Z)if(Z.hasOwnProperty(se)){let pe=y(se,Z[se]);g.test(se)?H.style.setProperty(se,pe):H.style[se]=pe}X.forEach((se,pe)=>{H.setAttribute(se,ke[pe])}),oe!==void 0&&(H.scrollTop=oe),he!==void 0&&(H.scrollLeft=he),ae!==void 0&&H.setAttribute("viewBox",ae)}var x={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w=(H,L)=>H+L.charAt(0).toUpperCase()+L.substring(1),S=["Webkit","Ms","Moz","O"];x=Object.keys(x).reduce((H,L)=>(S.forEach(Q=>H[w(Q,L)]=H[L]),H),x);var C=T0,E=nn,R=/^(matrix|translate|scale|rotate|skew)/,T=/^(translate)/,$=/^(rotate|skew)/,P=(H,L)=>E.is.num(H)&&H!==0?H+L:H,D=(H,L)=>E.is.arr(H)?H.every(Q=>D(Q,L)):E.is.num(H)?H===L:parseFloat(H)===L,B=class extends C.AnimatedObject{constructor({x:H,y:L,z:Q,...Z}){let te=[],oe=[];(H||L||Q)&&(te.push([H||0,L||0,Q||0]),oe.push(he=>[`translate3d(${he.map(ae=>P(ae,"px")).join(",")})`,D(he,0)])),(0,E.eachProp)(Z,(he,ae)=>{if(ae==="transform")te.push([he||""]),oe.push(de=>[de,de===""]);else if(R.test(ae)){if(delete Z[ae],E.is.und(he))return;let de=T.test(ae)?"px":$.test(ae)?"deg":"";te.push((0,E.toArray)(he)),oe.push(ae==="rotate3d"?([ke,X,se,pe])=>[`rotate3d(${ke},${X},${se},${P(pe,de)})`,D(pe,0)]:ke=>[`${ae}(${ke.map(X=>P(X,de)).join(",")})`,D(ke,ae.startsWith("scale")?1:0)])}}),te.length&&(Z.transform=new z(te,oe)),super(Z)}},z=class extends E.FluidValue{constructor(H,L){super(),this.inputs=H,this.transforms=L,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let H="",L=!0;return(0,E.each)(this.inputs,(Q,Z)=>{let te=(0,E.getFluidValue)(Q[0]),[oe,he]=this.transforms[Z](E.is.arr(te)?te:Q.map(E.getFluidValue));H+=" "+oe,L=L&&he}),L?"none":H}observerAdded(H){H==1&&(0,E.each)(this.inputs,L=>(0,E.each)(L,Q=>(0,E.hasFluidValue)(Q)&&(0,E.addFluidObserver)(Q,this)))}observerRemoved(H){H==0&&(0,E.each)(this.inputs,L=>(0,E.each)(L,Q=>(0,E.hasFluidValue)(Q)&&(0,E.removeFluidObserver)(Q,this)))}eventObserved(H){H.type=="change"&&(this._value=null),(0,E.callFluidObservers)(this,H)}},q=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];s(u,sU,t.exports),c.Globals.assign({batchedUpdates:d.unstable_batchedUpdates,createStringInterpolator:p.createStringInterpolator,colors:p.colors});var Y=(0,f.createHost)(q,{applyAnimatedValues:b,createAnimatedStyle:H=>new B(H),getComponentProps:({scrollTop:H,scrollLeft:L,...Q})=>Q}),J=Y.animated})(ej);var GRe=ej.exports;ZB.exports=GRe;var HRe=ZB.exports;const{useState:qRe,useEffect:KRe}=_;function XRe(){const[t,e]=qRe({width:void 0,height:void 0});return KRe(()=>{function n(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),t}var QRe=XRe;const Nh=_,{useSpring:YRe,animated:JRe}=HRe,ZRe=QRe,Gu={maxTilt:25,rotationPower:50,swipeThreshold:.5},L5={touchResponsive:{friction:50,tension:2e3},animateOut:{friction:30,tension:400},animateBack:{friction:10,tension:200}},lU=(t,e)=>Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),e$e=t=>{const e=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:t.x/e,y:t.y/e}},I0=async(t,e,n,r)=>{const a=lU(n,r),i=lU(t.x,t.y),o=a*t.x,s=a*t.y,l=t.x*45,u=a/i;return e.start({xyrot:[o,s,l],config:{duration:u}}),await new Promise(c=>setTimeout(()=>{c()},u))},uU=t=>new Promise(e=>{t.start({xyrot:[0,0,0],config:L5.animateBack,onRest:e})}),cU=t=>{if(Math.abs(t.x)>Math.abs(t.y)){if(t.x>Gu.swipeThreshold)return"right";if(t.x<-Gu.swipeThreshold)return"left"}else{if(t.y>Gu.swipeThreshold)return"down";if(t.y<-Gu.swipeThreshold)return"up"}return"none"},t$e=JRe.div,n$e=Nh.forwardRef(({flickOnSwipe:t=!0,children:e,onSwipe:n,onCardLeftScreen:r,className:a,preventSwipe:i=[],swipeRequirementType:o="velocity",swipeThreshold:s=Gu.swipeThreshold,onSwipeRequirementFulfilled:l,onSwipeRequirementUnfulfilled:u},c)=>{const{width:d,height:p}=ZRe(),[{xyrot:f},g]=YRe(()=>({xyrot:[0,0,0],config:L5.touchResponsive}));Gu.swipeThreshold=s,Nh.useImperativeHandle(c,()=>({async swipe(w="right"){n&&n(w);const S=1.3,C=(Math.random()-.5)/2;w==="right"?await I0({x:S,y:C},g,d,p):w==="left"?await I0({x:-S,y:C},g,d,p):w==="up"?await I0({x:C,y:-S},g,d,p):w==="down"&&await I0({x:C,y:S},g,d,p),r&&r(w)},async restoreCard(){await uU(g)}}));const y=Nh.useCallback(async(w,S)=>{const C=cU({x:o==="velocity"?S.vx:S.dx,y:o==="velocity"?S.vy:S.dy});if(C!=="none"&&t&&!i.includes(C)){n&&n(C),await I0(o==="velocity"?{x:S.vx,y:S.vy}:e$e({x:S.dx,y:S.dy}),w,d,p),r&&r(C);return}uU(w)},[o,t,i,n,r,d,p]);let v="none";const b=(w,S,C,E)=>{let R=E?w.touches[0].clientX-S.x:w.clientX-S.x,T=E?w.touches[0].clientY-S.y:w.clientY-S.y;S.x===0&&S.y===0&&(R=0,T=0);const $=-(R-C.dx)/(C.timeStamp-Date.now()),P=-(T-C.dy)/(C.timeStamp-Date.now());return{dx:R,dy:T,vx:$,vy:P,timeStamp:Date.now()}};Nh.useLayoutEffect(()=>{let w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()},C=!1;const E=z=>{!z.srcElement.className.includes("pressable")&&z.cancelable&&z.preventDefault(),S=b(z,w,S,!0),w={x:z.touches[0].clientX,y:z.touches[0].clientY}};x.current.addEventListener("touchstart",E);const R=z=>{C=!0,S=b(z,w,S,!1),w={x:z.clientX,y:z.clientY}};x.current.addEventListener("mousedown",R);const T=z=>{if(l||u){const Y=cU({x:o==="velocity"?z.vx:z.dx,y:o==="velocity"?z.vy:z.dy});Y!==v&&(v=Y,v==="none"?u&&u():l&&l(Y))}let q=z.vx*15;isNaN(q)&&(q=0),q=Math.max(Math.min(q,Gu.maxTilt),-Gu.maxTilt),g.start({xyrot:[z.dx,z.dy,q],config:L5.touchResponsive})},$=z=>{if(!C)return;const q=b(z,w,S,!1);S=q,T(q)};window.addEventListener("mousemove",$);const P=z=>{C&&(C=!1,y(g,S),w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()})};window.addEventListener("mouseup",P);const D=z=>{const q=b(z,w,S,!0);S=q,T(q)};x.current.addEventListener("touchmove",D);const B=z=>{y(g,S),w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()}};return x.current.addEventListener("touchend",B),()=>{x.current.removeEventListener("touchstart",E),x.current.removeEventListener("touchmove",D),x.current.removeEventListener("touchend",B),window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",P),x.current.removeEventListener("mousedown",R)}},[y,g,l,u]);const x=Nh.useRef();return Nh.createElement(t$e,{ref:x,className:a,style:{transform:f.to((w,S,C)=>`translate3d(${w}px, ${S}px, 0px) rotate(${C}deg)`)},children:e})});var r$e=n$e;const a$e=Zi(r$e);function Wi(t){return e=>typeof e=="string"&&new RegExp(t.source,t.flags).test(e)}const i$e=Wi(/^[1-9][0-9]*$/),z5=Wi(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/),o$e=Wi(/^E[1-9][0-9]*$/),Hw=Wi(/^Q[1-9][0-9]*$/),qw=Wi(/^P[1-9][0-9]*$/),dU=Wi(/^L[1-9][0-9]*$/),pU=Wi(/^L[1-9][0-9]*-F[1-9][0-9]*$/),hU=Wi(/^L[1-9][0-9]*-S[1-9][0-9]*$/),s$e=Wi(/^M[1-9][0-9]*$/),l$e=Wi(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),u$e=Wi(/^[0-9a-f]{40}$/),fU=Wi(/^\d+$/),mU=Wi(/^(Q|P|L|M)[1-9][0-9]*$/);function c$e(t){if(typeof t!="string")return!1;const[e,n]=t.split("#");return z5(e)&&qw(n)}function gU(t){return typeof t!="string"?!1:t.startsWith("Item:")?Hw(t.substring(5)):t.startsWith("Lexeme:")?dU(t.substring(7)):t.startsWith("Property:")?qw(t.substring(9)):Hw(t)}function d$e(t){if(!mU(t))throw new Error(`invalid entity id: ${t}`);return t.replace(/^(Q|P|L|M)/,"")}function p$e(t,e){let n=`https://commons.wikimedia.org/wiki/Special:FilePath/${t}`;return typeof e=="number"&&(n+=`?width=${e}`),n}function h$e(t){const e=t.split(/[$-]/);if(e.length===6)return e[0].toUpperCase();if(e.length===7)return e.slice(0,2).join("-").toUpperCase();throw new Error(`invalid guid: ${t}`)}const f$e=Object.freeze(Object.defineProperty({__proto__:null,getEntityIdFromGuid:h$e,getImageUrl:p$e,getNumericId:d$e,isEntityId:z5,isEntityPageTitle:gU,isEntitySchemaId:o$e,isFormId:pU,isGuid:l$e,isHash:u$e,isItemId:Hw,isLexemeId:dU,isMediaInfoId:s$e,isNonNestedEntityId:mU,isNumericId:i$e,isPropertyClaimsId:c$e,isPropertyId:qw,isRevisionId:fU,isSenseId:hU},Symbol.toStringTag,{value:"Module"}));function Ps(t){return typeof t=="string"?[t]:Array.isArray(t)?[...t]:[]}function yU(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}const bU=t=>encodeURIComponent(t).replace(/[!'()*]/g,y$e),m$e=t=>t.replace(/\s/g,"_");function g$e(t){return Array.from(new Set(t))}const y$e=t=>"%"+t.charCodeAt(0).toString(16);function Hu(t){if(t.length!==1||!yU(t[0]))throw new Error(`Since wikibase-sdk v9.0.0, this function expects arguments to be passed in an object
    See https://github.com/maxlath/wikibase-sdk/blob/main/CHANGELOG.md`)}function _0(t,e){return typeof e=="string"&&t.includes(e)}function B5(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function j5(t){return Object.entries(t)}function U5(t){typeof t=="object"&&(t=t.time);const e=t[0];let[n,r]=t.slice(1).split("T");n=n.replace(/-00/g,"-01");const a=`${n}T${r}`;return b$e(e,a)}const b$e=(t,e)=>{const n=e.split("-")[0];return t==="-"||n.length>4?v$e(t,e,n):new Date(e)},v$e=(t,e,n)=>{let r;return n.length===4?r=`${t}00${e}`:n.length===5?r=`${t}0${e}`:r=t+e,new Date(r)};function V5(t){return e=>{try{return t(e)}catch{e=typeof e=="string"?e:e.time;const n=e[0];let[r,a]=e.slice(1).split("T");if(!n||!r||!a)throw new Error("TimeInput is invalid: "+JSON.stringify(e));return r=r.replace(/-00/g,"-01"),`${n}${r}T${a}`}}}const x$e=t=>U5(t).getTime(),w$e=t=>U5(t).toISOString(),k$e=t=>{if(typeof t=="object"){const{time:e,precision:n}=t;n===9?t=e.replace("-01-01T","-00-00T"):n===10?t=e.replace("-01T","-00T"):t=e}return t.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")},vU=V5(x$e),xU=V5(w$e),wU=V5(k$e),S$e=Object.freeze(Object.defineProperty({__proto__:null,wikibaseTimeToDateObject:U5,wikibaseTimeToEpochTime:vU,wikibaseTimeToISOString:xU,wikibaseTimeToSimpleDay:wU},Symbol.toStringTag,{value:"Module"})),qu=t=>t.value,C$e=(t,e)=>e.keepRichValues?t.value:t.value.text,Th=(t,e)=>N$e(t,e.entityPrefix),E$e={item:"Q",lexeme:"L",property:"P"},N$e=(t,e)=>{const{value:n}=t,r=n.id||E$e[n["entity-type"]]+n["numeric-id"];return typeof e=="string"?`${e}:${r}`:r},T$e=(t,e)=>{const{value:n}=t,r=parseFloat(n.amount);if(e.keepRichValues){const a={amount:parseFloat(n.amount),unit:n.unit.replace(/^https?:\/\/.*\/entity\//,"")};return n.upperBound!=null&&(a.upperBound=parseFloat(n.upperBound)),n.lowerBound!=null&&(a.lowerBound=parseFloat(n.lowerBound)),a}else return r},I$e=(t,e)=>e.keepRichValues?t.value:[t.value.latitude,t.value.longitude],_$e=(t,e)=>{let n;if(typeof e.timeConverter=="function"?n=e.timeConverter(t.value):n=R$e(e.timeConverter)(t.value),e.keepRichValues){const{timezone:r,before:a,after:i,precision:o,calendarmodel:s}=t.value;return{time:n,timezone:r,before:a,after:i,precision:o,calendarmodel:s}}else return n},R$e=(t="iso")=>{const e=$$e[t];if(!e)throw new Error(`invalid converter key: ${JSON.stringify(t).substring(0,100)}`);return e},$$e={iso:xU,epoch:vU,"simple-day":wU,none:t=>typeof t=="string"?t:t.time},O$e={commonsMedia:qu,"external-id":qu,"geo-shape":qu,"globe-coordinate":I$e,math:qu,monolingualtext:C$e,"musical-notation":qu,quantity:T$e,string:qu,"tabular-data":qu,time:_$e,url:qu,"wikibase-entityid":Th,"wikibase-form":Th,"wikibase-item":Th,"wikibase-lexeme":Th,"wikibase-property":Th,"wikibase-sense":Th},kU=t=>t.toLowerCase().replace(/[\s-]/g,""),SU={};for(const[t,e]of Object.entries(O$e))SU[kU(t)]=e;function M$e(t,e,n,r){t=t||e.type;try{const a=SU[kU(t)];return a(e,n)}catch(a){throw a.message==="parsers[datatype] is not a function"&&(a.message=`${t} claim parser isn't implemented
      Claim id: ${r}
      Please report to https://github.com/maxlath/wikibase-sdk/issues`),a}}function W5(t){const e={};for(const n of t){const{rank:r}=n;e[r]=e[r]||[],e[r].push(n)}return e.preferred||e.normal||[]}function CU(t){return t.filter(e=>e.rank!=="deprecated")}function P$e(t){const e={};for(const[n,r]of j5(t))e[n]=W5(r);return e}const F$e=Object.freeze(Object.defineProperty({__proto__:null,nonDeprecatedPropertyClaims:CU,truthyClaims:P$e,truthyPropertyClaims:W5},Symbol.toStringTag,{value:"Module"}));function G5(t,e){const{propertyPrefix:n}=e,r={};for(let a in t){const i=t[a];n&&(a=n+":"+a),r[a]=H5(i,e)}return r}function H5(t,e){if(t==null||t.length===0)return[];const{keepNonTruthy:n,keepNonDeprecated:r,areSubSnaks:a}=_U(e);return r?t=CU(t):n||a||(t=W5(t)),t=t.map(i=>q5(i,e)).filter(i=>i!==void 0),t[0]&&typeof t[0]!="object"?g$e(t):t}function EU(t,e){const{keepQualifiers:n,keepReferences:r,keepIds:a,keepHashes:i,keepTypes:o,keepSnaktypes:s,keepRanks:l}=_U(e),{mainsnak:u,rank:c}=t;let d,p,f,g,y,v;if(u?(p=u.datatype,f=u.datavalue,g=u.snaktype):(f=t.datavalue,p=t.datatype,g=t.snaktype,t.hash?y=!0:v=!0),f)d=M$e(p,f,e,t.id);else if(g==="somevalue")d=e.somevalueValue;else if(g==="novalue")d=e.novalueValue;else throw new Error("no datavalue or special snaktype found");if(y){if(!(i||o||s))return d;const w={value:d};return i&&(w.hash=t.hash),o&&(w.type=p),s&&(w.snaktype=g),w}if(v)return o?{type:p,value:d}:d;if(!(n||r||a||o||s||l))return d;const b={value:d};o&&(b.type=p),s&&(b.snaktype=g),l&&(b.rank=c);const x=Kw(e);return x.keepHashes=i,n&&(b.qualifiers=TU(t.qualifiers,x)),r&&(t.references=t.references||[],b.references=IU(t.references,x)),a&&(b.id=t.id),b}function Ih(t,e={}){return G5(t,e)}function NU(t,e={}){return H5(t,e)}function q5(t,e={}){return EU(t,e)}function TU(t,e={}){return G5(t,Kw(e))}function A$e(t,e={}){return H5(t,Kw(e))}function D$e(t,e={}){return EU(t,e)}function IU(t,e={}){return t.map(n=>L$e(n,e))}function L$e(t,e={}){const n=Kw(e),r=G5(t.snaks,n);return n.keepHashes?{snaks:r,hash:t.hash}:r}const Kw=(t={})=>t.areSubSnaks?t:Object.assign({},t,{areSubSnaks:!0}),z$e=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],_U=(t={})=>(t.keepAll&&z$e.forEach(e=>{t[e]==null&&(t[e]=!0)}),t);function R0(t){const e={};for(const[n,r]of j5(t))e[n]=r!=null?r.value:null;return e}function B$e(t){const e={};for(const[n,r]of j5(t))e[n]=r!=null?r.map(a=>a.value):[];return e}function RU(t){return R0(t)}function $U(t){return R0(t)}function OU(t){return B$e(t)}function MU(t){return R0(t)}function PU(t){return R0(t)}function FU(t){return R0(t)}const AU=(t,e={})=>{const{id:n,representations:r,grammaticalFeatures:a,claims:i}=t;if(!pU(n))throw new Error("invalid form object");return{id:n,representations:PU(r),grammaticalFeatures:a,claims:Ih(i,e)}},DU=(t,e={})=>t.map(n=>AU(n,e)),LU=(t,e={})=>{const{id:n,glosses:r,claims:a}=t;if(!hU(n))throw new Error("invalid sense object");return{id:n,glosses:FU(r),claims:Ih(a,e)}};function zU(t,e={}){return t.map(n=>LU(n,e))}const K5={commonswiki:"commons",foundationwiki:"foundation",mediawikiwiki:"mediawiki",metawiki:"meta",outreachwiki:"outreach",sourceswiki:"sources",specieswiki:"species",wikidatawiki:"wikidata",wikifunctionswiki:"wikifunctions",wikimaniawiki:"wikimania"},X5=["aawiki","aawikibooks","aawiktionary","abwiki","abwiktionary","acewiki","adywiki","afwiki","afwikibooks","afwikiquote","afwiktionary","akwiki","akwikibooks","akwiktionary","alswiki","alswikibooks","alswikiquote","alswiktionary","altwiki","amiwiki","amwiki","amwikiquote","amwiktionary","angwiki","angwikibooks","angwikiquote","angwikisource","angwiktionary","anpwiki","anwiki","anwiktionary","arcwiki","arwiki","arwikibooks","arwikinews","arwikiquote","arwikisource","arwikiversity","arwiktionary","arywiki","arzwiki","astwiki","astwikibooks","astwikiquote","astwiktionary","aswiki","aswikibooks","aswikiquote","aswikisource","aswiktionary","atjwiki","avkwiki","avwiki","avwiktionary","awawiki","aywiki","aywikibooks","aywiktionary","azbwiki","azwiki","azwikibooks","azwikiquote","azwikisource","azwiktionary","banwiki","banwikisource","barwiki","bat_smgwiki","bawiki","bawikibooks","bbcwiki","bclwiki","bclwikiquote","bclwiktionary","be_x_oldwiki","bewiki","bewikibooks","bewikiquote","bewikisource","bewiktionary","bgwiki","bgwikibooks","bgwikinews","bgwikiquote","bgwikisource","bgwiktionary","bhwiki","bhwiktionary","biwiki","biwikibooks","biwiktionary","bjnwiki","bjnwikiquote","bjnwiktionary","blkwiki","blkwiktionary","bmwiki","bmwikibooks","bmwikiquote","bmwiktionary","bnwiki","bnwikibooks","bnwikiquote","bnwikisource","bnwikivoyage","bnwiktionary","bowiki","bowikibooks","bowiktionary","bpywiki","brwiki","brwikiquote","brwikisource","brwiktionary","bswiki","bswikibooks","bswikinews","bswikiquote","bswikisource","bswiktionary","btmwiktionary","bugwiki","bxrwiki","cawiki","cawikibooks","cawikinews","cawikiquote","cawikisource","cawiktionary","cbk_zamwiki","cdowiki","cebwiki","cewiki","chowiki","chrwiki","chrwiktionary","chwiki","chwikibooks","chwiktionary","chywiki","ckbwiki","ckbwiktionary","commonswiki","cowiki","cowikibooks","cowikiquote","cowiktionary","crhwiki","crwiki","crwikiquote","crwiktionary","csbwiki","csbwiktionary","cswiki","cswikibooks","cswikinews","cswikiquote","cswikisource","cswikiversity","cswiktionary","cuwiki","cvwiki","cvwikibooks","cywiki","cywikibooks","cywikiquote","cywikisource","cywiktionary","dagwiki","dawiki","dawikibooks","dawikiquote","dawikisource","dawiktionary","dewiki","dewikibooks","dewikinews","dewikiquote","dewikisource","dewikiversity","dewikivoyage","dewiktionary","dgawiki","dinwiki","diqwiki","diqwiktionary","dsbwiki","dtywiki","dvwiki","dvwiktionary","dzwiki","dzwiktionary","eewiki","elwiki","elwikibooks","elwikinews","elwikiquote","elwikisource","elwikiversity","elwikivoyage","elwiktionary","emlwiki","enwiki","enwikibooks","enwikinews","enwikiquote","enwikisource","enwikiversity","enwikivoyage","enwiktionary","eowiki","eowikibooks","eowikinews","eowikiquote","eowikisource","eowikivoyage","eowiktionary","eswiki","eswikibooks","eswikinews","eswikiquote","eswikisource","eswikiversity","eswikivoyage","eswiktionary","etwiki","etwikibooks","etwikiquote","etwikisource","etwiktionary","euwiki","euwikibooks","euwikiquote","euwikisource","euwiktionary","extwiki","fatwiki","fawiki","fawikibooks","fawikinews","fawikiquote","fawikisource","fawikivoyage","fawiktionary","ffwiki","fiu_vrowiki","fiwiki","fiwikibooks","fiwikinews","fiwikiquote","fiwikisource","fiwikiversity","fiwikivoyage","fiwiktionary","fjwiki","fjwiktionary","fonwiki","foundationwiki","fowiki","fowikisource","fowiktionary","frpwiki","frrwiki","frwiki","frwikibooks","frwikinews","frwikiquote","frwikisource","frwikiversity","frwikivoyage","frwiktionary","furwiki","fywiki","fywikibooks","fywiktionary","gagwiki","ganwiki","gawiki","gawikibooks","gawikiquote","gawiktionary","gcrwiki","gdwiki","gdwiktionary","glkwiki","glwiki","glwikibooks","glwikiquote","glwikisource","glwiktionary","gnwiki","gnwikibooks","gnwiktionary","gomwiki","gomwiktionary","gorwiki","gorwiktionary","gotwiki","gotwikibooks","gpewiki","gucwiki","gurwiki","guwiki","guwikibooks","guwikiquote","guwikisource","guwiktionary","guwwiki","guwwikinews","guwwikiquote","guwwiktionary","gvwiki","gvwiktionary","hakwiki","hawiki","hawiktionary","hawwiki","hewiki","hewikibooks","hewikinews","hewikiquote","hewikisource","hewikivoyage","hewiktionary","hifwiki","hifwiktionary","hiwiki","hiwikibooks","hiwikiquote","hiwikisource","hiwikiversity","hiwikivoyage","hiwiktionary","howiki","hrwiki","hrwikibooks","hrwikiquote","hrwikisource","hrwiktionary","hsbwiki","hsbwiktionary","htwiki","htwikisource","huwiki","huwikibooks","huwikinews","huwikiquote","huwikisource","huwiktionary","hywiki","hywikibooks","hywikiquote","hywikisource","hywiktionary","hywwiki","hzwiki","iawiki","iawikibooks","iawiktionary","idwiki","idwikibooks","idwikiquote","idwikisource","idwiktionary","iewiki","iewikibooks","iewiktionary","igwiki","igwikiquote","igwiktionary","iiwiki","ikwiki","ikwiktionary","ilowiki","inhwiki","iowiki","iowiktionary","iswiki","iswikibooks","iswikiquote","iswikisource","iswiktionary","itwiki","itwikibooks","itwikinews","itwikiquote","itwikisource","itwikiversity","itwikivoyage","itwiktionary","iuwiki","iuwiktionary","jamwiki","jawiki","jawikibooks","jawikinews","jawikiquote","jawikisource","jawikiversity","jawikivoyage","jawiktionary","jbowiki","jbowiktionary","jvwiki","jvwikisource","jvwiktionary","kaawiki","kabwiki","kawiki","kawikibooks","kawikiquote","kawiktionary","kbdwiki","kbdwiktionary","kbpwiki","kcgwiki","kcgwiktionary","kgwiki","kiwiki","kjwiki","kkwiki","kkwikibooks","kkwikiquote","kkwiktionary","klwiki","klwiktionary","kmwiki","kmwikibooks","kmwiktionary","knwiki","knwikibooks","knwikiquote","knwikisource","knwiktionary","koiwiki","kowiki","kowikibooks","kowikinews","kowikiquote","kowikisource","kowikiversity","kowiktionary","krcwiki","krwiki","krwikiquote","kshwiki","kswiki","kswikibooks","kswikiquote","kswiktionary","kuwiki","kuwikibooks","kuwikiquote","kuwiktionary","kvwiki","kwwiki","kwwikiquote","kwwiktionary","kywiki","kywikibooks","kywikiquote","kywiktionary","ladwiki","lawiki","lawikibooks","lawikiquote","lawikisource","lawiktionary","lbewiki","lbwiki","lbwikibooks","lbwikiquote","lbwiktionary","lezwiki","lfnwiki","lgwiki","lijwiki","lijwikisource","liwiki","liwikibooks","liwikinews","liwikiquote","liwikisource","liwiktionary","lldwiki","lmowiki","lmowiktionary","lnwiki","lnwikibooks","lnwiktionary","lowiki","lowiktionary","lrcwiki","ltgwiki","ltwiki","ltwikibooks","ltwikiquote","ltwikisource","ltwiktionary","lvwiki","lvwikibooks","lvwiktionary","madwiki","maiwiki","map_bmswiki","mdfwiki","mediawikiwiki","metawiki","mgwiki","mgwikibooks","mgwiktionary","mhrwiki","mhwiki","mhwiktionary","minwiki","minwiktionary","miwiki","miwikibooks","miwiktionary","mkwiki","mkwikibooks","mkwikisource","mkwiktionary","mlwiki","mlwikibooks","mlwikiquote","mlwikisource","mlwiktionary","mniwiki","mniwiktionary","mnwiki","mnwikibooks","mnwiktionary","mnwwiki","mnwwiktionary","mowiki","mowiktionary","mrjwiki","mrwiki","mrwikibooks","mrwikiquote","mrwikisource","mrwiktionary","mswiki","mswikibooks","mswiktionary","mtwiki","mtwiktionary","muswiki","mwlwiki","myvwiki","mywiki","mywikibooks","mywiktionary","mznwiki","nahwiki","nahwikibooks","nahwiktionary","napwiki","napwikisource","nawiki","nawikibooks","nawikiquote","nawiktionary","nds_nlwiki","ndswiki","ndswikibooks","ndswikiquote","ndswiktionary","newiki","newikibooks","newiktionary","newwiki","ngwiki","niawiki","niawiktionary","nlwiki","nlwikibooks","nlwikinews","nlwikiquote","nlwikisource","nlwikivoyage","nlwiktionary","nnwiki","nnwikiquote","nnwiktionary","novwiki","nowiki","nowikibooks","nowikinews","nowikiquote","nowikisource","nowiktionary","nqowiki","nrmwiki","nsowiki","nvwiki","nywiki","ocwiki","ocwikibooks","ocwiktionary","olowiki","omwiki","omwiktionary","orwiki","orwikisource","orwiktionary","oswiki","outreachwiki","pagwiki","pamwiki","papwiki","pawiki","pawikibooks","pawikisource","pawiktionary","pcdwiki","pcmwiki","pdcwiki","pflwiki","pihwiki","piwiki","piwiktionary","plwiki","plwikibooks","plwikinews","plwikiquote","plwikisource","plwikivoyage","plwiktionary","pmswiki","pmswikisource","pnbwiki","pnbwiktionary","pntwiki","pswiki","pswikibooks","pswikivoyage","pswiktionary","ptwiki","ptwikibooks","ptwikinews","ptwikiquote","ptwikisource","ptwikiversity","ptwikivoyage","ptwiktionary","pwnwiki","quwiki","quwikibooks","quwikiquote","quwiktionary","rmwiki","rmwikibooks","rmwiktionary","rmywiki","rnwiki","rnwiktionary","roa_rupwiki","roa_rupwiktionary","roa_tarawiki","rowiki","rowikibooks","rowikinews","rowikiquote","rowikisource","rowikivoyage","rowiktionary","ruewiki","ruwiki","ruwikibooks","ruwikinews","ruwikiquote","ruwikisource","ruwikiversity","ruwikivoyage","ruwiktionary","rwwiki","rwwiktionary","sahwiki","sahwikiquote","sahwikisource","satwiki","sawiki","sawikibooks","sawikiquote","sawikisource","sawiktionary","scnwiki","scnwiktionary","scowiki","scwiki","scwiktionary","sdwiki","sdwikinews","sdwiktionary","sewiki","sewikibooks","sgwiki","sgwiktionary","shiwiki","shnwiki","shnwikibooks","shnwikivoyage","shnwiktionary","shwiki","shwiktionary","shywiktionary","simplewiki","simplewikibooks","simplewikiquote","simplewiktionary","siwiki","siwikibooks","siwiktionary","skrwiki","skrwiktionary","skwiki","skwikibooks","skwikiquote","skwikisource","skwiktionary","slwiki","slwikibooks","slwikiquote","slwikisource","slwikiversity","slwiktionary","smnwiki","smwiki","smwiktionary","snwiki","snwiktionary","sourceswiki","sowiki","sowiktionary","specieswiki","sqwiki","sqwikibooks","sqwikinews","sqwikiquote","sqwiktionary","srnwiki","srwiki","srwikibooks","srwikinews","srwikiquote","srwikisource","srwiktionary","sswiki","sswiktionary","stqwiki","stwiki","stwiktionary","suwiki","suwikibooks","suwikiquote","suwikisource","suwiktionary","svwiki","svwikibooks","svwikinews","svwikiquote","svwikisource","svwikiversity","svwikivoyage","svwiktionary","swwiki","swwikibooks","swwiktionary","szlwiki","szywiki","tawiki","tawikibooks","tawikinews","tawikiquote","tawikisource","tawiktionary","taywiki","tcywiki","tetwiki","tewiki","tewikibooks","tewikiquote","tewikisource","tewiktionary","tgwiki","tgwikibooks","tgwiktionary","thwiki","thwikibooks","thwikinews","thwikiquote","thwikisource","thwiktionary","tiwiki","tiwiktionary","tkwiki","tkwikibooks","tkwikiquote","tkwiktionary","tlwiki","tlwikibooks","tlwikiquote","tlwiktionary","tlywiki","tnwiki","tnwiktionary","towiki","towiktionary","tpiwiki","tpiwiktionary","trvwiki","trwiki","trwikibooks","trwikinews","trwikiquote","trwikisource","trwikivoyage","trwiktionary","tswiki","tswiktionary","ttwiki","ttwikibooks","ttwikiquote","ttwiktionary","tumwiki","twwiki","twwiktionary","tyvwiki","tywiki","udmwiki","ugwiki","ugwikibooks","ugwikiquote","ugwiktionary","ukwiki","ukwikibooks","ukwikinews","ukwikiquote","ukwikisource","ukwikivoyage","ukwiktionary","urwiki","urwikibooks","urwikiquote","urwiktionary","uzwiki","uzwikibooks","uzwikiquote","uzwiktionary","vecwiki","vecwikisource","vecwiktionary","vepwiki","vewiki","viwiki","viwikibooks","viwikiquote","viwikisource","viwikivoyage","viwiktionary","vlswiki","vowiki","vowikibooks","vowikiquote","vowiktionary","warwiki","wawiki","wawikibooks","wawikisource","wawiktionary","wikidatawiki","wikifunctionswiki","wikimaniawiki","wowiki","wowikiquote","wowiktionary","wuuwiki","xalwiki","xhwiki","xhwikibooks","xhwiktionary","xmfwiki","yiwiki","yiwikisource","yiwiktionary","yowiki","yowikibooks","yowiktionary","yuewiktionary","zawiki","zawikibooks","zawikiquote","zawiktionary","zeawiki","zghwiki","zh_classicalwiki","zh_min_nanwiki","zh_min_nanwikibooks","zh_min_nanwikiquote","zh_min_nanwikisource","zh_min_nanwiktionary","zh_yuewiki","zhwiki","zhwikibooks","zhwikinews","zhwikiquote","zhwikisource","zhwikiversity","zhwikivoyage","zhwiktionary","zuwiki","zuwikibooks","zuwiktionary"],j$e="https://www.wikidata.org/wiki/";function BU({site:t,title:e}){if(Hu(arguments),!t)throw new Error("missing a site");if(!e)throw new Error("missing a title");if(B5(Xw,t))return Xw[t](e);const n=t.replace(/wiki$/,"");if(B5(Xw,n))return Xw[n](e);const{lang:r,project:a}=jU(t);return e=bU(m$e(e)),`https://${r}.${a}.org/wiki/${e}`}const bd=t=>e=>`https://${t}.wikimedia.org/wiki/${e}`,Xw={commons:bd("commons"),foundation:bd("foundation"),mediawiki:t=>`https://www.mediawiki.org/wiki/${t}`,meta:bd("meta"),outreach:bd("outreach"),sources:t=>`https://wikisource.org/wiki/${t}`,species:bd("species"),wikidata:t=>{const e=U$e[t[0]];let n=e?`${e}:${t}`:t;return n=n.replace("-","#"),`${j$e}${n}`},wikifunctions:bd("wikifunctions"),wikimania:bd("wikimania")},U$e={E:"EntitySchema",L:"Lexeme",P:"Property"},V$e=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/;function jU(t){if(t.startsWith("http")){const e=t,n=e.match(V$e);if(!n)throw new Error(`invalid sitelink url: ${e}`);let[r,a,i]=n.slice(1);if(i=decodeURIComponent(i),r==="commons")return{lang:"en",project:"commons",key:"commons",title:i,url:e};if(!_0(G$e,a))throw new Error(`project is unknown: ${a}`);if(r==="www")return{lang:"en",project:a,key:a,title:i,url:e};const o=`${r.replace(/-/g,"_")}${a}`.replace("wikipedia","wiki");return{lang:r,project:a,key:o,title:i,url:e}}else{if(B5(K5,t))return{lang:"en",project:K5[t],key:t};if(!_0(X5,t))throw new Error(`site not found: ${t}. Updating wikibase-sdk to a more recent version might fix the issue.`);let[e,n,r]=t.split("wik");if(r!=null)throw new Error(`invalid sitelink key: ${t}`);e=e.replace(/_/g,"-");const a=VU[n];if(!a)throw new Error(`sitelink project not found: ${a}`);return{lang:e,project:a,key:t}}}const UU=t=>_0(X5,t),W$e=UU,VU={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"},G$e=[...Object.values(VU),...Object.values(K5)],H$e=Object.freeze(Object.defineProperty({__proto__:null,getSitelinkData:jU,getSitelinkUrl:BU,isSite:UU,isSitelinkKey:W$e},Symbol.toStringTag,{value:"Module"}));function WU(t,e={}){let{addUrl:n,keepBadges:r,keepAll:a}=e;return r=r||a,Object.keys(t).reduce(q$e({sitelinks:t,addUrl:n,keepBadges:r}),{})}const q$e=({sitelinks:t,addUrl:e,keepBadges:n})=>(r,a)=>{if(t[a]==null)return r[a]=t[a],r;const{title:i,badges:o}=t[a];return e||n?(r[a]={title:i},e&&(r[a].url=BU({site:a,title:i})),n&&(r[a].badges=o)):r[a]=i,r},K$e={labels:RU,descriptions:$U,aliases:OU,claims:Ih,statements:Ih,sitelinks:WU,lemmas:MU,forms:DU,senses:zU},GU=(t,e={})=>{const{type:n}=t,r={id:t.id,type:n,modified:t.modified};return n==="item"?(Ka(t,r,"labels"),Ka(t,r,"descriptions"),Ka(t,r,"aliases"),Ka(t,r,"claims",e),Ka(t,r,"sitelinks",e)):n==="property"?(r.datatype=t.datatype,Ka(t,r,"labels"),Ka(t,r,"descriptions"),Ka(t,r,"aliases"),Ka(t,r,"claims",e)):n==="lexeme"?(Ka(t,r,"lemmas"),r.lexicalCategory=t.lexicalCategory,r.language=t.language,Ka(t,r,"claims",e),Ka(t,r,"forms",e),Ka(t,r,"senses",e)):n==="mediainfo"&&(Ka(t,r,"labels"),Ka(t,r,"descriptions"),Ka(t,r,"statements",e)),r},Ka=(t,e,n,r)=>{t[n]!=null&&(e[n]=K$e[n](t[n],r))},HU=(t,e={})=>{t.entities&&(t=t.entities);const{entityPrefix:n}=e,r={};for(const[a,i]of Object.entries(t)){const o=n?`${n}:${a}`:a;r[o]=GU(i,e)}return r};function X$e(t){t=t.body||t;const{entities:e}=t;return HU(e)}function Q$e(t){return t=t.body||t,t.query.search.map(e=>e.title)}const Y$e=Object.freeze(Object.defineProperty({__proto__:null,entities:X$e,pagesTitles:Q$e},Symbol.toStringTag,{value:"Module"}));function J$e(t,e={}){typeof t=="string"&&(t=JSON.parse(t));const{vars:n}=t.head,r=t.results.bindings;if(n.length===1&&e.minimize){const s=n[0];return r.map(l=>Q5(l[s])).filter(l=>l!=null)}const{richVars:a,associatedVars:i,standaloneVars:o}=tOe(n);return r.map(s=>nOe(a,i,o,s))}function Q5(t){if(!t||t.type==="bnode")return null;const{value:e}=t;if(t.type==="uri")return Z$e(e);const n=(t.datatype||"").replace("http://www.w3.org/2001/XMLSchema#","");return n==="decimal"||n==="integer"||n==="float"||n==="double"?parseFloat(e):n==="boolean"?e==="true":e}function Z$e(t){return t.match(/http.*\/entity\/statement\//)?eOe(t):t.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,"")}function eOe(t){t=t.replace(/^https?:\/\/.*\/entity\/statement\//,"");const e=t.split("-");return e[0]+"$"+e.slice(1).join("-")}function tOe(t){let e=t.filter(i=>{const o=new RegExp(`^${i}[A-Z]\\w+`);return t.some(s=>o.test(s))});e=e.filter(i=>!e.some(o=>i!==o&&i.startsWith(o)));const n=new RegExp(`^(${e.join("|")})[A-Z]`),r=t.filter(i=>n.test(i)),a=t.filter(i=>!e.includes(i)&&!n.test(i));return{richVars:e,associatedVars:r,standaloneVars:a}}function nOe(t,e,n,r){const a={};for(const i of t){const o={},s=Q5(r[i]);s!=null&&(o.value=s);for(const l of e)l.startsWith(i)&&rOe(r,i,l,o);Object.keys(o).length>0&&(a[i]=o)}for(const i of n){const o=Q5(r[i]);o!=null&&(a[i]=o)}return a}function rOe(t,e,n,r){let a=n.split(e)[1];a=a[0].toLowerCase()+a.slice(1),a=a==="altLabel"?"aliases":a;const i=t[n];i!=null&&(r[a]=i.value)}const aOe=Object.freeze(Object.defineProperty({__proto__:null,aliases:OU,claim:q5,claims:Ih,descriptions:$U,entities:HU,entity:GU,form:AU,forms:DU,glosses:FU,labels:RU,lemmas:MU,propertyClaims:NU,propertyQualifiers:A$e,propertySnaks:NU,qualifier:D$e,qualifiers:TU,references:IU,representations:PU,sense:LU,senses:zU,sitelinks:WU,snak:q5,snaks:Ih,sparqlResults:J$e},Symbol.toStringTag,{value:"Module"})),iOe=/^\d+[|\d]*$/;function oOe(t){return function(e){Hu(arguments);for(const[f,g]of Object.entries(e))if(f.startsWith("sr")){const y=f.replace(/^sr/,"");if(e[y]!=null)throw new Error(`${y} and ${f} are the same`);e[y]=g}const{search:n,haswbstatement:r,format:a="json",limit:i,offset:o,profile:s,sort:l}=e;let{namespace:u,prop:c}=e;if(!(n||r))throw new Error('missing "search" or "haswbstatement" parameter');let d="";if(n&&(d+=n),r){const f=r instanceof Array?r:[r];for(const g of f)g[0]==="-"?d+=` -haswbstatement:${g.slice(1)}`:d+=` haswbstatement:${g}`}if(i!=null&&(typeof i!="number"||i<1))throw new Error(`invalid limit: ${i}`);if(o!=null&&(typeof o!="number"||o<0))throw new Error(`invalid offset: ${o}`);if(u instanceof Array?u=u.join("|"):typeof u=="number"&&(u=u.toString()),u&&!iOe.test(u))throw new Error(`invalid namespace: ${u}`);if(s!=null&&typeof s!="string")throw new Error(`invalid profile: ${s} (${typeof s}, expected string)`);if(l!=null&&typeof l!="string")throw new Error(`invalid sort: ${l} (${typeof l}, expected string)`);let p;if(c!=null){if(c instanceof Array&&(c=c.join("|")),typeof c!="string")throw new Error(`invalid prop: ${c} (${typeof c}, expected string)`);p=c.toString()}return t({action:"query",list:"search",srsearch:d.trim(),format:a,srnamespace:u,srlimit:i,sroffset:o,srqiprofile:s,srsort:l,srprop:p})}}function Qw(t,e){return function(n){if(!e(n))throw new Error(`invalid ${t}: ${n} (type: ${cOe(n)})`)}}const qU=Qw("entity id",z5),sOe=Qw("property id",qw),lOe=Qw("entity page title",gU),uOe=Qw("revision id",fU);function cOe(t){const e=typeof t;if(e==="object"){if(t===null)return"null";if(t instanceof Array)return"array";if(t instanceof Promise)return"promise"}return e==="number"&&Number.isNaN(t)?"NaN":e}function KU(t){return function({ids:e,languages:n,props:r,format:a="json",redirects:i}){if(Hu(arguments),!(e&&e.length>0))throw new Error("no id provided");e=Ps(e),e.forEach(s=>qU(s)),e.length>50&&console.warn(`getEntities accepts 50 ids max to match Wikidata API limitations:
      this request won't get all the desired entities.
      You can use getManyEntities instead to generate several request urls
      to work around this limitation`);const o={action:"wbgetentities",ids:e.join("|"),format:a};return i===!1&&(o.redirects="no"),n&&(n=Ps(n),o.languages=n.join("|")),r&&r.length>0&&(o.props=Ps(r).join("|")),t(o)}}function dOe(t){return function({titles:e,sites:n,languages:r,props:a,format:i="json",redirects:o}){if(Hu(arguments),!(e&&e.length>0))throw new Error("no titles provided");n&&n.length>0||(n=["enwiki"]),e=Ps(e),n=Ps(n).map(pOe),a=Ps(a);const s={action:"wbgetentities",titles:e.join("|"),sites:n.join("|"),format:i};return n.length===1&&e.length===1&&(s.normalize=!0),r&&(r=Ps(r),s.languages=r.join("|")),a.length>0&&(s.props=a.join("|")),o===!1&&(s.redirects="no"),t(s)}}function pOe(t){return _0(X5,t)?t:t.replace(/-/g,"_")+"wiki"}function hOe(t,e){return function({id:n,revision:r}){return Hu(arguments),qU(n),uOe(r),`${t}/${e}/index.php?title=Special:EntityData/${n}.json&revision=${r}`}}function fOe(t){const e=KU(t);return function({ids:n,languages:r,props:a,format:i,redirects:o}){if(Hu(arguments),!(n instanceof Array))throw new Error("getManyEntities expects an array of ids");return mOe(n).map(s=>e({ids:s,languages:r,props:a,format:i,redirects:o}))}}function mOe(t){const e=[];for(;t.length>0;){const n=t.slice(0,50);t=t.slice(50),e.push(n)}return e}function XU(t){return function(e){const n=bU(e);return`${t}?format=json&query=${n}`}}const gOe="FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ",yOe=t=>{const e=XU(t);return function(n){let{properties:r}=n;const{values:a,limit:i,caseInsensitive:o,keepProperties:s}=n,l=o?xOe:vOe,u=s?"":gOe;r=Ps(r),r.forEach(d=>sOe(d));let c=`SELECT DISTINCT ?subject WHERE { ${bOe(a,l,r,u)} }`;return i&&(c+=` LIMIT ${i}`),e(c)}},bOe=(t,e,n,r)=>(n=n.map(wOe).join("|"),t instanceof Array?"{ "+t.map(QU).map(a=>e(n,a,r)).join("} UNION {")+" }":e(n,QU(t),r)),QU=t=>(Hw(t)?t=`wd:${t}`:typeof t=="string"&&(t=`'${t}'`),t),vOe=(t,e,n)=>`?subject ${t} ${e} .
    ${n}`,xOe=(t,e,n)=>`?subject ${t} ?value .
    FILTER (lcase(?value) = ${e.toLowerCase()})
    ${n}`,wOe=t=>"wdt:"+t;function kOe(t){return function({ids:e,format:n,limit:r,start:a,end:i,prop:o,user:s,excludeuser:l,tag:u}){Hu(arguments),e=Ps(e),e.forEach(p=>lOe(p));const c=e.length===1,d={action:"query",prop:"revisions"};return d.titles=e.join("|"),d.format=n||"json",c&&(d.rvlimit=r||"max"),c&&a&&(d.rvstart=YU(a)),c&&i&&(d.rvend=YU(i)),o?d.rvprop=Ps(o).join("|"):d.rvprop="ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",d.rvslots="*",s&&(d.rvuser=s),l&&(d.rvexcludeuser=l),u&&(d.rvtag=u),t(d)}}const YU=t=>typeof t=="number"&&t<SOe?t:Math.trunc(new Date(t).getTime()/1e3),SOe=new Date("2000-01-01").getTime(),COe=["item","property","lexeme","form","sense"],EOe=t=>function({search:e,language:n="en",uselang:r,limit:a="20",continue:i="0",format:o="json",type:s="item"}){if(Hu(arguments),r=r||n,!(e&&e.length>0))throw new Error("search can't be empty");if(!_0(COe,s))throw new Error(`invalid type: ${s}`);return t({action:"wbsearchentities",search:e,language:n,limit:a,continue:i,format:o,uselang:r,type:s})},NOe=typeof location<"u"&&typeof document<"u";function TOe(t){return e=>{NOe&&(e=Object.assign(Object.assign({},e),{origin:"*"}));const n=Object.entries(e).filter(([,a])=>a!=null).map(([a,i])=>[a,String(i)]),r=new URLSearchParams(n).toString();return t+"?"+r}}const IOe=`Tip: if you just want to access functions that don't need an instance or a sparqlEndpoint,
those are also exposed directly on the module object. Exemple:
import { isItemId, simplify } from 'wikibase-sdk'`,_Oe=Object.assign(Object.assign(Object.assign(Object.assign({simplify:aOe,parse:Y$e},f$e),H$e),F$e),S$e);function ROe(t){if(!yU(t))throw new Error("invalid config");const{instance:e,sparqlEndpoint:n}=t;let{wgScriptPath:r="w"}=t;if(r=r.replace(/^\//,""),!(e||n))throw new Error(`one of instance or sparqlEndpoint should be set at initialization.
${IOe}`);let a,i,o;if(e){JU("instance",e),i=e.replace(/\/$/,"").replace(`/${r}/api.php`,""),o=`${i}/${r}/api.php`;const l=TOe(o);a={searchEntities:EOe(l),cirrusSearchPages:oOe(l),getEntities:KU(l),getManyEntities:fOe(l),getRevisions:kOe(l),getEntityRevision:hOe(e,r),getEntitiesFromSitelinks:dOe(l)}}else a={searchEntities:vd("searchEntities"),cirrusSearchPages:vd("cirrusSearchPages"),getEntities:vd("getEntities"),getManyEntities:vd("getManyEntities"),getRevisions:vd("getRevisions"),getEntityRevision:vd("getEntityRevision"),getEntitiesFromSitelinks:vd("getEntitiesFromSitelinks")};let s;return n?(JU("sparqlEndpoint",n),s={sparqlQuery:XU(n),getReverseClaims:yOe(n)}):s={sparqlQuery:eV("sparqlQuery"),getReverseClaims:eV("getReverseClaims")},Object.assign(Object.assign(Object.assign({instance:{root:i,apiEndpoint:o}},_Oe),a),s)}const JU=(t,e)=>{if(!(typeof e=="string"&&e.startsWith("http")))throw new Error(`invalid ${t}: ${e}`)},ZU=t=>e=>()=>{throw new Error(`${e} requires ${t} to be set at initialization`)},eV=ZU("a sparqlEndpoint"),vd=ZU("an instance"),$Oe={sparqlQuery:(t="")=>{const e=ROe({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"}),n=`
      SELECT ?item ?itemLabel ?artworkLabel ?countryLabel ?genreLabel ?year ?locationLabel ?creatorLabel ?materialLabel ?depictsLabel ?collectionLabel ?iiifManifest (MD5(CONCAT(str(?item),str(RAND()))) as ?random)
      WITH {    
        SELECT ?item (SAMPLE(?artwork) as ?artwork) (SAMPLE(?country) as ?country) (SAMPLE(?genre) as ?genre) (SAMPLE(YEAR(?inception)) as ?year) (SAMPLE(?location) as ?location) (SAMPLE(?creator) as ?creator) (SAMPLE(?material) as ?material) (SAMPLE(?depicts) as ?depicts) (SAMPLE(?collection) as ?collection) (SAMPLE(?iiifManifest) as ?iiifManifest)
        WHERE {
          ?item wdt:P6108 ?iiifManifest ;
                wdt:P195 ?collection ;
                wdt:P31 ?artwork .
                FILTER ( ?artwork = wd:Q3305213 || ?artwork = wd:Q93184 || ?artwork = wd:Q11060274 || ?artwork = wd:Q860861 || ?artwork = wd:Q125191 )
                ${t!==""?`FILTER ( ?material = ${t} )`:""}
                OPTIONAL {
                  ?item wdt:P495 ?countryOfOrigin.
                  FILTER(?countryOfOrigin = wd:Q31 || ?countryOfOrigin = wd:Q213 || ?countryOfOrigin = wd:Q35 || ?countryOfOrigin = wd:Q142 || ?countryOfOrigin = wd:Q36 || ?countryOfOrigin = wd:Q39 || ?countryOfOrigin = wd:Q32 || ?countryOfOrigin = wd:Q40 || ?countryOfOrigin = wd:Q55 || ?countryOfOrigin = wd:Q183 )
                }
                OPTIONAL {
                  ?collection wdt:P17 ?country.
                  FILTER(?country = wd:Q31 || ?country = wd:Q213 || ?country = wd:Q35 || ?country = wd:Q142 || ?country = wd:Q36 || ?country = wd:Q39 || ?country = wd:Q32 || ?country = wd:Q40 || ?country = wd:Q55 || ?country = wd:Q183 )
                }
                BIND(COALESCE(?countryOfOrigin, ?country) AS ?country)
                FILTER(BOUND(?country))

                OPTIONAL { ?item wdt:P136 ?genre. }
                OPTIONAL { ?item wdt:P571 ?inception. }
                OPTIONAL { ?item wdt:P276 ?location. }
                OPTIONAL { ?item wdt:P170 ?creator. }
                OPTIONAL { ?item wdt:P186 ?material. }
                OPTIONAL { ?item wdt:P180 ?depicts. }
        }
        GROUP BY ?item
        LIMIT 100
      } AS %result
      WHERE {
        INCLUDE %result.
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
      } ORDER BY ?random
    `;return e.sparqlQuery(n)}},OOe=()=>{const[t,e]=_.useState([]),[n,r]=_.useState(!0),[a,i]=_.useState(null);return _.useEffect(()=>{(async()=>{try{const o=await fetch($Oe.sparqlQuery());if(!o.ok)throw new Error(`Error: ${o.status} - ${o.statusText}`);const s=await o.json();e(s.results.bindings)}catch(o){i(o.message)}finally{r(!1)}})()},[]),{data:t,loading:n,error:a}},tV=({onClick:t,materialIcon:e})=>K.jsx(hr,{className:"p-4 text-xl text-black",onClick:t,rounded:!0,inline:!0,children:K.jsx(va,{material:e})});function MOe(){const{t}=ys(),{addToImageList:e,imageList:n,removeFromImageList:r,likeImage:a}=Nc(),{data:i}=OOe(),[o,s]=_.useState(0),l=_.useRef(o),u=_.useRef(null);_.useEffect(()=>{const y=async v=>{if(!v)return;const b=(await Promise.all(v.map(async x=>{var w,S,C,E,R;try{const T=await JB.fetchIIIFIdentifier(x.iiifManifest.value);return T?{id:x.item.value,name:((w=x.itemLabel)==null?void 0:w.value)||"",year:((S=x.year)==null?void 0:S.value)||"",country:((C=x.countryLabel)==null?void 0:C.value)||"",location:((E=x.locationLabel)==null?void 0:E.value)||"",creator:((R=x.creatorLabel)==null?void 0:R.value)||"",url:x.iiifManifest.value,identifier:T,image:`${T}/full/400,/0/default.jpg`,thumbnail:`${T}/full/100,100/0/default.jpg`}:null}catch(T){return console.error("Error processing image:",T),null}}))).filter(x=>x!==null);e(b)};i.length>0&&y(i)},[i,e]);const c=y=>{y==="right"&&o<n.length&&a(n[o]),r(n[o].id),s(v=>v+1)},d=y=>{var v;l.current>=y&&((v=u.current)==null||v.restoreCard())},p=async y=>{var v;o>=0&&o<n.length&&await((v=u.current)==null?void 0:v.swipe(y))},f=n[o],g=y=>y&&!y.includes("http")?y:t("selectionUnknown");return K.jsxs(ba,{margin:"my-4",className:"flex flex-col flex-wrap gap-2 lg:gap-8 justify-center content-center text-center mx-auto",children:[K.jsx("h1",{className:"text-lg leading-6 px-8 md:px-24 md:text-xl lg:px-48",children:t("selectionTitle")}),K.jsx("div",{className:"mx-auto h-2/3",children:K.jsx(l8,{className:"flex shadow-md shadow-[#BC13FE]/90",children:f&&K.jsxs(K.Fragment,{children:[K.jsx(a$e,{ref:u,className:"mb-4",onSwipe:y=>c(y),onCardLeftScreen:()=>d(o),swipeRequirementType:"position",swipeThreshold:100,preventSwipe:["up","down"],children:K.jsx("img",{alt:f.name,src:f.image})},f.id),K.jsxs("div",{className:"flex justify-between",children:[K.jsx(tV,{onClick:()=>p("left"),materialIcon:K.jsx(UY,{className:"w-6 h-6"})}),K.jsx(tV,{onClick:()=>p("right"),materialIcon:K.jsx(GY,{className:"w-6 h-6"})})]})]})})}),K.jsxs("div",{className:"mb-8 p-4 bg-white rounded h-1/3 opacity-90 max-w-lg w-3/4 text-center mx-auto shadow-md shadow-[#BC13FE]/90",children:[K.jsx("h2",{className:"text-lg font-bold mb-4 text-black md:text-xl",children:f?.name}),K.jsxs("p",{className:"text-gray-600",children:[t("selectionYear")," ",f?.year||t("selectionUnknown")]}),K.jsxs("p",{className:"text-gray-600",children:[t("selectionCreator")," ",g(f?.creator)]}),K.jsxs("p",{className:"text-gray-600",children:[t("selectionLocation")," ",f?.location||t("selectionUnknown")]})]})]})}const POe="/collage.webp",FOe="/logo_animated.svg",AOe=()=>K.jsx("img",{src:FOe,alt:"Logo GLAMorous Europe",className:"w-48 md:w-64 lg:w-96 m-auto"}),DOe=()=>K.jsx("img",{src:POe,alt:"Collage GLAMorous Europe",className:"w-64 md:w-80 lg:w-1/2 xl:w-1/3 m-auto",decoding:"async"});function LOe(){const{t}=ys(),e=KM(),{imageLikeList:n,resetState:r}=Nc(),[a,i]=_.useState(!1),o=()=>{n.length>0?i(!0):e("/selection")},s=()=>{i(!1)},l=()=>{i(!1),r()};return K.jsxs(ba,{margin:"mb-16 lg:mb-4",className:"flex flex-col gap-4 lg:gap-8 text-center mx-auto",children:[K.jsx(AOe,{}),K.jsx("h1",{className:"text-lg px-8 md:text-xl",children:t("startTitle")}),K.jsx(DOe,{}),K.jsx("p",{className:"text-lg px-8 md:px-24 md:text-xl",children:t("startSubtitle")}),K.jsx("p",{className:"text-lg px-8 md:px-24 md:text-xl",children:t("startText")}),K.jsx(hr,{large:!0,className:"text-lg w-1/2 mx-auto h-16 md:text-xl",rounded:!0,inline:!0,onClick:o,children:t("startButtonText")}),a&&K.jsx(f8,{opened:a,onBackdropClick:()=>i(!1),children:K.jsxs(Yy,{children:[K.jsx(Ky,{title:t("discardModalTitle")}),K.jsxs(ba,{className:"space-y-4",children:[K.jsx("p",{children:t("discardModalMessage")}),K.jsx(P3,{className:"p-4",to:"/selection",onClick:l,children:K.jsx(hr,{className:"p-4 rounded-full text-lg",children:t("discardModalConfirm")})}),K.jsx(P3,{className:"p-4",to:"/selection",onClick:s,children:K.jsx(hr,{className:"rounded-full text-lg",children:t("discardModalNotConfirm")})})]})]})})]})}const zOe=mK(M3(K.jsxs(pu,{path:"/",element:K.jsx(b_e,{}),children:[K.jsx(pu,{index:!0,element:K.jsx(LOe,{})}),K.jsx(pu,{path:"selection",element:K.jsx(MOe,{})}),K.jsx(pu,{path:"collection",element:K.jsx(l_e,{})}),K.jsx(pu,{path:"creation",element:K.jsx(Bie,{})}),K.jsx(pu,{path:"about",element:K.jsx(wY,{})}),K.jsx(pu,{path:"legal",element:K.jsx(v_e,{})})]})));function BOe(){return K.jsx(SK,{router:zOe})}const jOe={about:{license:"Lizenzen",licenseparagraph1:"Der Quellcode von GLAMorous Europe l\xE4uft unter einer MIT Lizenz. Die \xFCber Wikidata eingebundenen Digitalisate von Kunstwerken wurden unter einer Creative Commons Public Domain Dedication 1.0 (CC0) ver\xF6ffentlicht und sind damit gemeinfrei. Alle hier verwendeten Digitalisate weisen zudem IIIF-Manifeste auf.",licenseparagraph2:"Alle erstellten Collagen sind damit ebenfalls als CC0 lizenziert und k\xF6nnen frei und vielf\xE4ltig genutzt und ver\xE4ndert werden, z.B. f\xFCr den Unterricht, f\xFCr kunstp\xE4dagogische Angebote oder einfach f\xFCr private Deko.",title:"\xDCber GLAMorous Europe",titleparagraph1:"Die Webapp GLAMorous Europe nutzt Wikidata-APIs, um dir eine breite Palette von Kunst-Sammlungen zug\xE4nglich zu machen. Um deine k\xFCnstlerischen Interessen zu ermitteln, verwenden wir ein Swipe-System, mithilfe dessen du durch verschiedene digitalisierte Objekte wie Gem\xE4lde, Fotografien, Skizzen und Plastiken navigieren kannst.",titleparagraph2:"Basierend auf deinen Pr\xE4ferenzen erh\xE4ltst du Vorschl\xE4ge f\xFCr digitale Sammlungen, die f\xFCr dich von Interesse sein k\xF6nnten [dieses Feature ist im aktuellen Prototypen noch nicht enthalten].",titleparagraph3:"Lieblingsst\xFCcke und Ausschnitte daraus kannst du dann kombinieren, um ein neues Kunstwerk zu schaffen. Das Kunstwerk kann daraufhin analog oder digital geteilt werden. Weitere Informationen zu den Kulturg\xFCtern kannst du zus\xE4tzlich \xFCber die Daten des IIIF-Manifestes direkt abrufen. Sp\xE4ter soll auch noch eine Einbindung von Wikipedia-Informationen zu den entsprechenden K\xFCnstler:innen erfolgen.",titleparagraph4:"GLAMorous Europe konzentriert sich auf offen lizenzierte Sammlungen aus ganz Europa, wobei der Schwerpunkt auf den Nachbarl\xE4ndern Deutschlands liegt.",titleparagraph5:"GLAMorous Europe ist ein Open-Source-Projekt der Digitalwarenkombinat GbR und wurde im Rahmen der 14. F\xF6rderungsrunde des Prototype Fund von September 2023 bis Februar 2024 gef\xF6rdert. Der Prototype Fund ist ein F\xF6rderprogramm des Bundesministeriums f\xFCr Bildung und Forschung (BMBF), das von der Open Knowledge Foundation Deutschland betreut und ausgewertet wird.",usage:"Und von wem stammen die ganzen Sachen?",usagecollage:"Start-Collage",usagecollage1:"Jacques Antoine Bonebakker (1798\u20121868), Louis Moritz, 1810\u20121830 (CC0, Wikidata)",usagecollage10:"Pozdrowienie znad Ba\u0142tyku, G. S. B., 1948 (Public Domain, Polona)",usagecollage11:"Riesengebirge: Schneekoppe 1605 m., G\xF6rlitz: Photowerkst\xE4tte Bruno Scholz, vor 1945 (Public Domain, Polona)",usagecollage12:"Polesie, Sityck, Henryk Podd\u0119bski, ca. 1936  (Public Domain, Polona)",usagecollage2:"Heuvellandschap met jagers, Mattheus Molanus, ca. 1600\u20121649 (Public Domain, Wikidata)",usagecollage3:"Melancholie, Lucas Cranach der \xC4ltere, 1523 (Public Domain, Wikidata)",usagecollage4:"Et sardineri i Concarneau, Peder Severin Kr\xF8yer, 1879 (Public Domain, Wikidata)",usagecollage5:"Plakat: Moekavandid h\xE4rradele, ohne Hrsg./Autor:in, ca. 1943 (CC0, Europeana)",usagecollage6:"Hagenbund XII. Ausstellung, Christoph Reissers S\xF6hne & Alfred Keller, 1904 (CC0, Europeana)",usagecollage7:"Portret van een vrouw met hoed, zittend voor een wandtapijt met landschap, ohne Hrsg./Autor:in, 1910 (Public Domain, Europeana)",usagecollage8:"Fj\xE4ril p\xE5 blad, Alm C G, 1900\u20121925 (Public Domain, Europeana)",usagecollage9:"Katherine Corri Harris podczas gry w golfa, Underwood & Underwood, vor 1927 (Public Domain, Polona)",usagefonts:"Schriftarten",usagefonts1:"Average Sans von Typo auf 1001fonts.com (OFL-Lizenz)",usagefonts2:"Beauty Scool Dropout Regular von Nick Curtis auf 1001fonts.com (FFC-Lizenz)",usagefonts3:"Neucha Font von Jovanny Lemonad auf 1001fonts.com (OFL-Lizenz)",usageframes:"Rahmen",usageframes1:"Jacques Antoine Bonebakker (1798\u20121868), Louis Moritz, 1810\u20121830 (CC0, Wikidata)",usageframes2:"Zimn\xE1 krajina, Viktor Olgyai, 1910 (Public Domain, Wikidata)",usageframes3:"Poh\u013Ead na Spi\u0161sk\xFA Nov\xFA Ves, Lajos Csord\xE1k, 1900 (Public Domain, Wikidata)",usageframes4:"Picture Frame (CC0, kisscc0)",usageframes5:"Picture Frame (CC0, kisscc0)",usageframes6:"Picture Frame (CC0, kisscc0)",usageparagraph1:"F\xFCr die Startcollage haben wir \xFCber den Tellerrand der Wikidata hinausgeblickt, denn nicht alle L\xE4nder Europas und nicht alle Kultureinrichtungen sind bisher gut genug angebunden oder vertreten. Daher haben wir uns explizit auch bei den Best\xE4nden der Europeana sowie der Plattform Polona der Polnischen Nationalbibliothek bedient.",usageparagraph2:"Da wir gern trotzdem sichtbar machen wollen, wessen Bilder und Fonts wir verwendet haben, findet ihr hier noch einmal alle verwendeten Materialien:",usagesticker:"Sticker",usagesticker1:"I haved\xF8ren. Kunstnerens hustru, Laurits Andersen Ring, 1897 (Public Domain, Wikidata)",usagesticker10:"The Hare, after Albert de Balleroy, F\xE9lix Bracquemond, 1865 (Public Domain, Wikidata)",usagesticker2:"Calvary, Antonello da Messina, 1475 (Public Domain, Wikidata)",usagesticker3:"Business-Man, Frans Masereel, 1920 (Public Domain, Wikidata)",usagesticker4:"Udsigt fra kunstnerens vindue, Martinus R\xF8rbye, 1825 (Public Domain, Wikidata)",usagesticker5:"Festino degli dei, Giovanni Bellini & Titian, 1514/1529 (Public Domain, Wikidata)",usagesticker6:"Bloemen in een vaasje met sprinkhaan en kikvors, Clara Peeters, 17. Jhd (Public Domain, Wikidata)",usagesticker7:"Le Stryge (The Vampire), Charles Meryon, 1853 (Public Domain, Wikidata)",usagesticker8:"Udsigt gennem en d\xF8r til l\xF8bende figurer,  Christoffer Wilhelm Eckersberg, 1845 (Public Domain, Wikidata)",usagesticker9:"Zodiac, Alfons Mucha, 1896/1897 (Public Domain, Wikidata)",vision:"GLAMorous Europe weiterdenken",visionparagraph1:"GLAMorous Europe ist als Open-Source-Anwendung konzipiert und kann auf dieser Basis vielf\xE4ltig weiterentwickelt werden. Beispielweise kann es f\xFCr einzelne Kulturinstitutionen angepasst werden und sogar f\xFCr Medienstationen optimiert werden.",visionparagraph2:"GLAMorous Europe wird au\xDFerdem immer besser, umso besser die Daten von Kunstobjekten in wikidata.org gepflegt und benannt werden. Wir wollen also auch dazu ermutigen, sich selbst bei wikidata einzubringen und Daten zu erg\xE4nzen und zu vernetzen.",visionparagraph3:"Wenn du oder deine Institution Interesse hat, gemeinsam mit uns GLAMorous Europe einzusetzen oder weiterzuentwickeln, dann kontaktiere uns gern unter folgender E-Mail-Adresse: <1>info@digitalwarenkombinat.de</1>",visionparagraph4:"Folge uns gern auf <1>Instagram</1>, <2>LinkedIn</2> und <3>X</3> unter @digitalwarenkombinat #glamorouseurope"},artwork:"Leinwand",artworkCanvasBrightness:"Helligkeit",artworkCanvasContrast:"Kontrast",artworkCanvasOpacity:"Deckkraft",artworkEmpty:"F\xFCge deine eigenen Bildausschnitte hinzu",artworkTitle:"Ziehe die Ausschnitte oder Sticker in die Leinwand. Du kannst sie ver\xE4ndern und die Leinwand austauschen. Gestalte dein eigenes Kunstwerk und teile es!",chooseLanguage:"Sprache w\xE4hlen:",collection:"Sammlung",collectionAddText:"Ausschnitt hinzuf\xFCgen",collectionClose:"Schlie\xDFen",collectionLoading:"Lade...",collectionRemoveText:"Hintergrund entfernen",collectionSwitchLasso:"Lassoauswahl",collectionSwitchViewer:"Zoomauswahl",collectionTitle:"W\xE4hle Bildausschnitte aus deinen Lieblingsobjekten aus, um sie deiner Leinwand hinzuzuf\xFCgen.",collectionToastSuccess:"Ausschnitt hinzugef\xFCgt",discardModalCancel:"Abbrechen",discardModalConfirm:"Ja",discardModalMessage:"M\xF6chtest du deine bisherige Auswahl verwerfen?",discardModalNotConfirm:"Nein",discardModalTitle:"Bisherige Auswahl",legal:{contact:"Kontakt:",contactparagraph1:"E-Mail: <1>info@digitalwarenkombinat.de</1>",contactparagraph2:"Umsatzsteuer-ID: DE350177346",informationtitle:"Angaben gem\xE4\xDF \xA7 5 TMG:",informationtitleparagraph1:"Digitalwarenkombinat GbR",informationtitleparagraph2:"Eilenburger Stra\xDFe 27",informationtitleparagraph3:"04317 Leipzig",legalparagraph1:"Haftung f\xFCr Inhalte",legalparagraph2:"Als Diensteanbieter sind wir gem\xE4\xDF \xA7 7 Abs.1 TMG f\xFCr eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach \xA7\xA7 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, \xFCbermittelte oder gespeicherte fremde Informationen zu \xFCberwachen oder nach Umst\xE4nden zu forschen, die auf eine rechtswidrige T\xE4tigkeit hinweisen. Verpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen nach den allgemeinen Gesetzen bleiben hiervon unber\xFChrt. Eine diesbez\xFCgliche Haftung ist jedoch erst ab dem Zeitpunkt der Kenntnis einer konkreten Rechtsverletzung m\xF6glich. Bei Bekanntwerden von entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend entfernen.",legalparagraph3:"Haftung f\xFCr Links",legalparagraph4:"Unser Angebot enth\xE4lt Links zu externen Webseiten Dritter, auf deren Inhalte wir keinen Einfluss haben. Deshalb k\xF6nnen wir f\xFCr diese fremden Inhalte auch keine Gew\xE4hr \xFCbernehmen. F\xFCr die Inhalte der verlinkten Seiten ist stets der jeweilige Anbieter oder Betreiber der Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der Verlinkung auf m\xF6gliche Rechtsverst\xF6\xDFe \xFCberpr\xFCft. Rechtswidrige Inhalte waren zum Zeitpunkt der Verlinkung nicht erkennbar.",legalparagraph5:"Eine permanente inhaltliche Kontrolle der verlinkten Seiten ist jedoch ohne konkrete Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Links umgehend entfernen.",procedure:"Streitbeilegungsverfahren",procedureparagraph1:"Wir sind nicht bereit oder verpflichtet, an Streitbeilegungsverfahren vor einer Verbraucherschlichtungsstelle teilzunehmen.",representation:"Vertreten durch:",representationparagraph1:"Anne M\xFChlich und Gerd M\xFCller",title:"Impressum"},selection:"Auswahl",selectionCreator:"K\xFCnstler:in:",selectionLocation:"Sammlungsort:",selectionTitle:"W\xE4hle deine Lieblingsobjekte per Swipe oder Klick. F\xFCge sie somit zu deiner Sammlung hinzu.",selectionUnknown:"Unbekannt",selectionYear:"Entstehungsjahr:",sidebarAbout:"\xDCber uns",sidebarChooseLanguage:"Sprache",sidebarLegal:"Impressum",start:"Start",startButtonText:"Los geht's!",startSubtitle:"Durchst\xF6bere Kunstwerke aus Museen, Galerien, Bibliotheken und Archiven.",startText:"Sammle deine Lieblingsobjekte, w\xE4hle daraus Motive aus und gestalte dein ganz pers\xF6nliches Kunstwerk.",startTitle:"Entdecke mit GLAMorous Europe europ\xE4isches Kulturerbe!"},UOe={translation:jOe},VOe={about:{license:"Licenses",licenseparagraph1:"The source code of GLAMorous Europe runs under an MIT license. The via Wikidata integrated digital copies of artworks have been published under a Creative Commons Public Domain Dedication 1.0 (CC0). All digital copies used here also own IIIF manifests.",licenseparagraph2:"All collages created are therefore also licensed as CC0 and can be used and modified freely and in a variety of ways, e.g. for teaching, for art education programmes or simply for private decoration.",title:"About GLAMorous Europe",titleparagraph1:"The GLAMorous Europe webapp uses Wikidata APIs to give you access to a wide range of art collections. To identify your artistic interests, we use a swipe system that allows you to navigate through various digitised objects such as paintings, photographs, sketches and sculptures.",titleparagraph2:"Based on your preferences, you will receive suggestions for digital collections that might be of interest to you [this feature is not yet included in the current prototype].",titleparagraph3:"You can then combine your favourite pieces and selected details from them to create a new work of art. The artwork can then be shared in analogue or digital form. You can also access further information on the cultural assets directly via the IIIF manifesto data. Later, Wikipedia information on the artists will also be integrated.",titleparagraph4:"GLAMorous Europe concentrates on openly licensed collections from all over Europe, with a focus on Germany's neighbouring countries.",titleparagraph5:"GLAMorous Europe is an open source project of Digitalwarenkombinat GbR and was financed as part of the 14th funding round of the Prototype Fund from September 2023 to February 2024. The Prototype Fund is a funding programme of the Federal Ministry of Education and Research (BMBF), which is managed and evaluated by the Open Knowledge Foundation Germany.",usage:"And where does all this stuff come from?",usagecollage:"Collage from Mainpage",usagecollage1:"Jacques Antoine Bonebakker (1798\u20121868), Louis Moritz, 1810\u20121830 (CC0, Wikidata)",usagecollage10:"Pozdrowienie znad Ba\u0142tyku, G. S. B., 1948 (Public Domain, Polona)",usagecollage11:"Riesengebirge: Schneekoppe 1605 m., G\xF6rlitz: Photowerkst\xE4tte Bruno Scholz, before 1945 (Public Domain, Polona)",usagecollage12:"Polesie, Sityck, Henryk Podd\u0119bski, ca. 1936  (Public Domain, Polona)",usagecollage2:"Heuvellandschap met jagers, Mattheus Molanus, ca. 1600\u20121649 (Public Domain, Wikidata)",usagecollage3:"Melancholie, Lucas Cranach the Elder, 1523 (Public Domain, Wikidata)",usagecollage4:"Et sardineri i Concarneau, Peder Severin Kr\xF8yer, 1879 (Public Domain, Wikidata)",usagecollage5:"Plakat: Moekavandid h\xE4rradele, without author, ca. 1943 (CC0, Europeana)",usagecollage6:"Hagenbund XII. Ausstellung, Christoph Reissers S\xF6hne & Alfred Keller, 1904 (CC0, Europeana)",usagecollage7:"Portret van een vrouw met hoed, zittend voor een wandtapijt met landschap, without author, 1910 (Public Domain, Europeana)",usagecollage8:"Fj\xE4ril p\xE5 blad, Alm C G, 1900\u20121925 (Public Domain, Europeana)",usagecollage9:"Katherine Corri Harris podczas gry w golfa, Underwood & Underwood, before 1927 (Public Domain, Polona)",usagefonts:"Fonts",usagefonts1:"Average Sans by Typo on 1001fonts.com (OFL license)",usagefonts2:"Beauty Scool Dropout Regular by Nick Curtis on 1001fonts.com (FFC license)",usagefonts3:"Neucha Font by Jovanny Lemonad on 1001fonts.com (OFL license)",usageframes:"Frames",usageframes1:"Jacques Antoine Bonebakker (1798\u20121868), Louis Moritz, 1810\u20121830 (CC0, Wikidata)",usageframes2:"Zimn\xE1 krajina, Viktor Olgyai, 1910 (Public Domain, Wikidata)",usageframes3:"Poh\u013Ead na Spi\u0161sk\xFA Nov\xFA Ves, Lajos Csord\xE1k, 1900 (Public Domain, Wikidata)",usageframes4:"Picture Frame (CC0, kisscc0)",usageframes5:"Picture Frame (CC0, kisscc0)",usageframes6:"Picture Frame (CC0, kisscc0)",usageparagraph1:"For the collage on the mainpage, we looked beyond Wikidata, because not all European countries and not all cultural institutions are sufficiently well connected or represented. That's why we explicitly used the holdings of Europeana and the Polona platform of the National Library of Poland.",usageparagraph2:"As we would still like to make visible whose images and fonts we have used, you will find all the materials used here once again:",usagesticker:"Sticker",usagesticker1:"I haved\xF8ren. Kunstnerens hustru, Laurits Andersen Ring, 1897 (Public Domain, Wikidata)",usagesticker10:"The Hare, after Albert de Balleroy, F\xE9lix Bracquemond, 1865 (Public Domain, Wikidata)",usagesticker2:"Calvary, Antonello da Messina, 1475 (Public Domain, Wikidata)",usagesticker3:"Business-Man, Frans Masereel, 1920 (Public Domain, Wikidata)",usagesticker4:"Udsigt fra kunstnerens vindue, Martinus R\xF8rbye, 1825 (Public Domain, Wikidata)",usagesticker5:"Festino degli dei, Giovanni Bellini & Titian, 1514/1529 (Public Domain, Wikidata)",usagesticker6:"Bloemen in een vaasje met sprinkhaan en kikvors, Clara Peeters, 17th century (Public Domain, Wikidata)",usagesticker7:"Le Stryge (The Vampire), Charles Meryon, 1853 (Public Domain, Wikidata)",usagesticker8:"Udsigt gennem en d\xF8r til l\xF8bende figurer, Christoffer Wilhelm Eckersberg, 1845 (Public Domain, Wikidata)",usagesticker9:"Zodiac, Alfons Mucha, 1896/1897 (Public Domain, Wikidata)",vision:"Thinking GLAMorous Europe further",visionparagraph1:"GLAMorous Europe is designed as an open source application and can be further developed on this basis in a variety of ways. For example, it can be adapted for individual cultural institutions and even optimised for media stations.",visionparagraph2:"GLAMorous Europe will also improve the better the data on art objects is maintained and named in wikidata.org. We also want to encourage people to contribute to wikidata by adding and linking data.",visionparagraph3:"If you or your institution are interested in using or further developing GLAMorous Europe together with us, please contact us at the following e-mail address: <1>info@digitalwarenkombinat.de</1>",visionparagraph4:"Follow us on <1>Instagram</1>, <2>LinkedIn</2> and <3>X</3> with @digitalwarenkombinat #glamorouseurope"},artwork:"Canvas",artworkCanvasBrightness:"Brightness",artworkCanvasContrast:"Contrast",artworkCanvasOpacity:"Opacity",artworkEmpty:"Add your image details.",artworkTitle:"Drag the image details or stickers onto the canvas. You can change them and replace the canvas. Create your own work of art and share it!",chooseLanguage:"Choose Language:",collection:"Collection",collectionAddText:"Add choosen detail",collectionClose:"Close",collectionLoading:"Loading...",collectionRemoveText:"Remove Background",collectionSwitchLasso:"Select Lasso",collectionSwitchViewer:"Select zoom",collectionTitle:"Select image details from your favorites to add them to your canvas.",collectionToastSuccess:"Added choosen detail",discardModalCancel:"Close",discardModalConfirm:"Yes",discardModalMessage:"Would you like to discard your previous selection?",discardModalNotConfirm:"No",discardModalTitle:"Current selection",legal:{contact:"Contact:",contactparagraph1:"E-Mail: <1>info@digitalwarenkombinat.de</1>",contactparagraph2:"VAT ID: DE350177346",informationtitle:"Information in accordance with \xA7 5 TMG:",informationtitleparagraph1:"Digitalwarenkombinat GbR",informationtitleparagraph2:"Eilenburger Stra\xDFe 27",informationtitleparagraph3:"04317 Leipzig/Germany",legalparagraph1:"Liability for content",legalparagraph2:"As a service provider, we are responsible for our own content on these pages in accordance with Section 7 (1) TMG (German Telemedia Act) and general legislation. According to \xA7\xA7 8 to 10 TMG, however, we as a service provider are not obliged to monitor transmitted or stored third-party information or to investigate circumstances that indicate illegal activity. Obligations to remove or block the use of information in accordance with general legislation remain unaffected by this. However, liability in this respect is only possible from the time of knowledge of a specific infringement. As soon as we become aware of such infringements, we will remove this content immediately.",legalparagraph3:"Liability for links",legalparagraph4:"Our website contains links to external third-party websites over whose content we have no influence. Therefore, we cannot accept any liability for this third-party content. The respective provider or operator of the pages is always responsible for the content of the linked pages. The linked pages were checked for possible legal violations at the time of linking. Illegal content was not recognizable at the time of linking.",legalparagraph5:"However, permanent monitoring of the content of the linked pages is not reasonable without concrete evidence of an infringement. If we become aware of any legal infringements, we will remove such links immediately.",procedure:"Dispute resolution procedure",procedureparagraph1:"We are not willing or obliged to participate in dispute resolution proceedings before a consumer arbitration board.",representation:"Represented by:",representationparagraph1:"Anne M\xFChlich und Gerd M\xFCller",title:"Legal notice"},selection:"Selection",selectionCreator:"Artist:",selectionLocation:"Location:",selectionTitle:"Select your favorites by swiping or clicking. This will add them to your collection.",selectionUnknown:"Unknown",selectionYear:"Year of creation:",sidebarAbout:"About",sidebarChooseLanguage:"Language",sidebarLegal:"Legal",start:"Start",startButtonText:"Let's go!",startSubtitle:"Explore works of art from museums, galleries, libraries and archives.",startText:"Collect your favorite objects, select details from them and create your very own work of art.",startTitle:"Dating European cultural heritage with GLAMorous Europe!"},WOe={translation:VOe};fa.init({interpolation:{escapeValue:!1},lng:"auto",fallbackLng:"de",resources:{de:{...UOe},en:{...WOe}}}),lM(document.getElementById("root")).render(K.jsx(V.StrictMode,{children:K.jsx(JH,{i18n:fa,children:K.jsx(BOe,{})})})),tq({immediate:!0});export{zR as $,Bo as a,jD as b,ti as c,sM as d,V as e,Zi as g,_ as r,nA as v};function $0(t){return $0.viteFileDeps||($0.viteFileDeps=[]),t.map(e=>$0.viteFileDeps[e])}
