function eS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();var ei=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function MV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var CR={exports:{}},g1={},ER={exports:{}},qt={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var qh=Symbol.for("react.element"),PV=Symbol.for("react.portal"),FV=Symbol.for("react.fragment"),AV=Symbol.for("react.strict_mode"),DV=Symbol.for("react.profiler"),LV=Symbol.for("react.provider"),zV=Symbol.for("react.context"),BV=Symbol.for("react.forward_ref"),jV=Symbol.for("react.suspense"),UV=Symbol.for("react.memo"),VV=Symbol.for("react.lazy"),NR=Symbol.iterator;function WV(t){return t===null||typeof t!="object"?null:(t=NR&&t[NR]||t["@@iterator"],typeof t=="function"?t:null)}var TR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IR=Object.assign,_R={};function Md(t,e,n){this.props=t,this.context=e,this.refs=_R,this.updater=n||TR}Md.prototype.isReactComponent={},Md.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},Md.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function RR(){}RR.prototype=Md.prototype;function tS(t,e,n){this.props=t,this.context=e,this.refs=_R,this.updater=n||TR}var nS=tS.prototype=new RR;nS.constructor=tS,IR(nS,Md.prototype),nS.isPureReactComponent=!0;var $R=Array.isArray,OR=Object.prototype.hasOwnProperty,rS={current:null},MR={key:!0,ref:!0,__self:!0,__source:!0};function PR(t,e,n){var r,a={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)OR.call(e,r)&&!MR.hasOwnProperty(r)&&(a[r]=e[r]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:qh,type:t,key:i,ref:o,props:a,_owner:rS.current}}function GV(t,e){return{$$typeof:qh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function aS(t){return typeof t=="object"&&t!==null&&t.$$typeof===qh}function HV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var FR=/\/+/g;function iS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HV(""+t.key):e.toString(36)}function y1(t,e,n,r,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qh:case PV:o=!0}}if(o)return o=t,a=a(o),t=r===""?"."+iS(o,0):r,$R(a)?(n="",t!=null&&(n=t.replace(FR,"$&/")+"/"),y1(a,e,n,"",function(u){return u})):a!=null&&(aS(a)&&(a=GV(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(FR,"$&/")+"/")+t)),e.push(a)),1;if(o=0,r=r===""?".":r+":",$R(t))for(var s=0;s<t.length;s++){i=t[s];var l=r+iS(i,s);o+=y1(i,e,n,l,a)}else if(l=WV(t),typeof l=="function")for(t=l.call(t),s=0;!(i=t.next()).done;)i=i.value,l=r+iS(i,s++),o+=y1(i,e,n,l,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function b1(t,e,n){if(t==null)return t;var r=[],a=0;return y1(t,r,"","",function(i){return e.call(n,i,a++)}),r}function qV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ti={current:null},v1={transition:null},KV={ReactCurrentDispatcher:ti,ReactCurrentBatchConfig:v1,ReactCurrentOwner:rS};qt.Children={map:b1,forEach:function(t,e,n){b1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return b1(t,function(){e++}),e},toArray:function(t){return b1(t,function(e){return e})||[]},only:function(t){if(!aS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},qt.Component=Md,qt.Fragment=FV,qt.Profiler=DV,qt.PureComponent=tS,qt.StrictMode=AV,qt.Suspense=jV,qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KV,qt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=IR({},t.props),a=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=rS.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)OR.call(e,l)&&!MR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:qh,type:t.type,key:a,ref:i,props:r,_owner:o}},qt.createContext=function(t){return t={$$typeof:zV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LV,_context:t},t.Consumer=t},qt.createElement=PR,qt.createFactory=function(t){var e=PR.bind(null,t);return e.type=t,e},qt.createRef=function(){return{current:null}},qt.forwardRef=function(t){return{$$typeof:BV,render:t}},qt.isValidElement=aS,qt.lazy=function(t){return{$$typeof:VV,_payload:{_status:-1,_result:t},_init:qV}},qt.memo=function(t,e){return{$$typeof:UV,type:t,compare:e===void 0?null:e}},qt.startTransition=function(t){var e=v1.transition;v1.transition={};try{t()}finally{v1.transition=e}},qt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},qt.useCallback=function(t,e){return ti.current.useCallback(t,e)},qt.useContext=function(t){return ti.current.useContext(t)},qt.useDebugValue=function(){},qt.useDeferredValue=function(t){return ti.current.useDeferredValue(t)},qt.useEffect=function(t,e){return ti.current.useEffect(t,e)},qt.useId=function(){return ti.current.useId()},qt.useImperativeHandle=function(t,e,n){return ti.current.useImperativeHandle(t,e,n)},qt.useInsertionEffect=function(t,e){return ti.current.useInsertionEffect(t,e)},qt.useLayoutEffect=function(t,e){return ti.current.useLayoutEffect(t,e)},qt.useMemo=function(t,e){return ti.current.useMemo(t,e)},qt.useReducer=function(t,e,n){return ti.current.useReducer(t,e,n)},qt.useRef=function(t){return ti.current.useRef(t)},qt.useState=function(t){return ti.current.useState(t)},qt.useSyncExternalStore=function(t,e,n){return ti.current.useSyncExternalStore(t,e,n)},qt.useTransition=function(){return ti.current.useTransition()},qt.version="18.2.0",ER.exports=qt;var _=ER.exports;const V=Zi(_),AR=eS({__proto__:null,default:V},[_]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var XV=_,QV=Symbol.for("react.element"),YV=Symbol.for("react.fragment"),ZV=Object.prototype.hasOwnProperty,JV=XV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eW={key:!0,ref:!0,__self:!0,__source:!0};function DR(t,e,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ZV.call(e,r)&&!eW.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)a[r]===void 0&&(a[r]=e[r]);return{$$typeof:QV,type:t,key:i,ref:o,props:a,_owner:JV.current}}g1.Fragment=YV,g1.jsx=DR,g1.jsxs=DR,CR.exports=g1;var X=CR.exports;const tW={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};let nW=class K_{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||tW,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,a){return a&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new K_(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new K_(this.logger,e)}};var cs=new nW;class x1{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const a=this.observers[r].get(n)||0;this.observers[r].set(n,a+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(i=>{let[o,s]=i;for(let l=0;l<s;l++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(i=>{let[o,s]=i;for(let l=0;l<s;l++)o.apply(o,[e,...r])})}}function Kh(){let t,e;const n=new Promise((r,a)=>{t=r,e=a});return n.resolve=t,n.reject=e,n}function LR(t){return t==null?"":""+t}function rW(t,e,n){t.forEach(r=>{e[r]&&(n[r]=e[r])})}const aW=/###/g;function Xh(t,e,n){function r(s){return s&&s.indexOf("###")>-1?s.replace(aW,"."):s}function a(){return!t||typeof t=="string"}const i=typeof e!="string"?e:e.split(".");let o=0;for(;o<i.length-1;){if(a())return{};const s=r(i[o]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++o}return a()?{}:{obj:t,k:r(i[o])}}function zR(t,e,n){const{obj:r,k:a}=Xh(t,e,Object);if(r!==void 0||e.length===1){r[a]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),s=Xh(t,o,Object);for(;s.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),s=Xh(t,o,Object),s&&s.obj&&typeof s.obj[`${s.k}.${i}`]<"u"&&(s.obj=void 0);s.obj[`${s.k}.${i}`]=n}function iW(t,e,n,r){const{obj:a,k:i}=Xh(t,e,Object);a[i]=a[i]||[],r&&(a[i]=a[i].concat(n)),r||a[i].push(n)}function w1(t,e){const{obj:n,k:r}=Xh(t,e);if(n)return n[r]}function oW(t,e,n){const r=w1(t,n);return r!==void 0?r:w1(e,n)}function BR(t,e,n){for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):BR(t[r],e[r],n):t[r]=e[r]);return t}function Pd(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var sW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function lW(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>sW[e]):t}class uW{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const cW=[" ",",","?","!",";"],dW=new uW(20);function pW(t,e,n){e=e||"",n=n||"";const r=cW.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const a=dW.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!a.test(t);if(!i){const o=t.indexOf(n);o>0&&!a.test(t.substring(0,o))&&(i=!0)}return i}function oS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let a=t;for(let i=0;i<r.length;){if(!a||typeof a!="object")return;let o,s="";for(let l=i;l<r.length;++l)if(l!==i&&(s+=n),s+=r[l],o=a[s],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}a=o}return a}function k1(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class jR extends x1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,o=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,n],r&&(Array.isArray(r)?s.push(...r):typeof r=="string"&&i?s.push(...r.split(i)):s.push(r)));const l=w1(this.data,s);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=s[0],n=s[1],r=s.slice(2).join(".")),l||!o||typeof r!="string"?l:oS(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,a){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let s=[e,n];r&&(s=s.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(s=e.split("."),a=n,n=s[1]),this.addNamespaces(n),zR(this.data,s,a),i.silent||this.emit("added",e,n,r,a)}addResources(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(typeof r[i]=="string"||Object.prototype.toString.apply(r[i])==="[object Array]")&&this.addResource(e,n,i,r[i],{silent:!0});a.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},s=[e,n];e.indexOf(".")>-1&&(s=e.split("."),a=r,r=n,n=s[1]),this.addNamespaces(n);let l=w1(this.data,s)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),a?BR(l,r,i):l={...l,...r},zR(this.data,s,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var UR={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,a){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,a))}),e}};const VR={};class X2 extends x1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),rW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=cs.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,s=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!pW(e,r,a);if(o&&!s){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:i};const u=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(a)}return typeof i=="string"&&(i=[i]),{key:e,namespaces:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:s}=this.extractFromKey(e[e.length-1],n),l=s[s.length-1],u=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const w=n.nsSeparator||this.options.nsSeparator;return a?{res:`${l}${w}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${w}${o}`}return a?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const d=this.resolve(e,n);let p=d&&d.res;const f=d&&d.usedKey||o,g=d&&d.exactUsedKey||o,y=Object.prototype.toString.apply(p),v=["[object Number]","[object Function]","[object RegExp]"],b=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject;if(x&&p&&typeof p!="string"&&typeof p!="boolean"&&typeof p!="number"&&v.indexOf(y)<0&&!(typeof b=="string"&&y==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,p,{...n,ns:s}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(d.res=w,d.usedParams=this.getUsedParamsDetails(n),d):w}if(i){const w=y==="[object Array]",S=w?[]:{},C=w?g:f;for(const E in p)if(Object.prototype.hasOwnProperty.call(p,E)){const R=`${C}${i}${E}`;S[E]=this.translate(R,{...n,joinArrays:!1,ns:s}),S[E]===R&&(S[E]=p[E])}p=S}}else if(x&&typeof b=="string"&&y==="[object Array]")p=p.join(b),p&&(p=this.extendTranslation(p,e,n,r));else{let w=!1,S=!1;const C=n.count!==void 0&&typeof n.count!="string",E=X2.hasDefaultValue(n),R=C?this.pluralResolver.getSuffix(u,n.count,n):"",T=n.ordinal&&C?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",$=C&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),P=$&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${R}`]||n[`defaultValue${T}`]||n.defaultValue;!this.isValidLookup(p)&&E&&(w=!0,p=P),this.isValidLookup(p)||(S=!0,p=o);const D=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:p,B=E&&P!==p&&this.options.updateMissing;if(S||w||B){if(this.logger.log(B?"updateKey":"missingKey",u,l,o,B?P:p),i){const Z=this.resolve(o,{...n,keySeparator:!1});Z&&Z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let z=[];const q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&q&&q[0])for(let Z=0;Z<q.length;Z++)z.push(q[Z]);else this.options.saveMissingTo==="all"?z=this.languageUtils.toResolveHierarchy(n.lng||this.language):z.push(n.lng||this.language);const Y=(Z,H,L)=>{const Q=E&&L!==p?L:D;this.options.missingKeyHandler?this.options.missingKeyHandler(Z,l,H,Q,B,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Z,l,H,Q,B,n),this.emit("missingKey",Z,l,H,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?z.forEach(Z=>{const H=this.pluralResolver.getSuffixes(Z,n);$&&n[`defaultValue${this.options.pluralSeparator}zero`]&&H.indexOf(`${this.options.pluralSeparator}zero`)<0&&H.push(`${this.options.pluralSeparator}zero`),H.forEach(L=>{Y([Z],o+L,n[`defaultValue${L}`]||P)})}):Y(z,o,P))}p=this.extendTranslation(p,e,n,d,r),S&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${o}`),(S||w)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,w?p:void 0):p=this.options.parseMissingKeyHandler(p))}return a?(d.res=p,d.usedParams=this.getUsedParamsDetails(n),d):p}extendTranslation(e,n,r,a,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const p=e.match(this.interpolator.nestingRegexp);c=p&&p.length}let d=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language,r),u){const p=e.match(this.interpolator.nestingRegexp),f=p&&p.length;c<f&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(r.lng=a.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,f=new Array(p),g=0;g<p;g++)f[g]=arguments[g];return i&&i[0]===f[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${n[0]}`),null):o.translate(...f,n)},r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,l=typeof s=="string"?[s]:s;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=UR.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,a,i,o,s;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;a=c;let d=u.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const p=n.count!==void 0&&typeof n.count!="string",f=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),g=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(v=>{this.isValidLookup(r)||(s=v,!VR[`${y[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(VR[`${y[0]}-${v}`]=!0,this.logger.warn(`key "${a}" for languages "${y.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(b=>{if(this.isValidLookup(r))return;o=b;const x=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(x,c,b,v,n);else{let S;p&&(S=this.pluralResolver.getSuffix(b,n.count,n));const C=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(x.push(c+S),n.ordinal&&S.indexOf(E)===0&&x.push(c+S.replace(E,this.options.pluralSeparator)),f&&x.push(c+C)),g){const R=`${c}${this.options.contextSeparator}${n.context}`;x.push(R),p&&(x.push(R+S),n.ordinal&&S.indexOf(E)===0&&x.push(R+S.replace(E,this.options.pluralSeparator)),f&&x.push(R+C))}}let w;for(;w=x.pop();)this.isValidLookup(r)||(i=w,r=this.getResource(b,v,w,n))}))})}),{res:r,usedKey:a,exactUsedKey:i,usedLng:o,usedNS:s}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,a):this.resourceStore.getResource(e,n,r,a)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let a=r?e.replace:e;if(r&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const i of n)delete a[i]}return a}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}function sS(t){return t.charAt(0).toUpperCase()+t.slice(1)}class WR{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=cs.create("languageUtils")}getScriptPartFromCode(e){if(e=k1(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=k1(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(a=>a.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=sS(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=sS(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=sS(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(n=a)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(i=>{if(i===a||!(i.indexOf("-")<0&&a.indexOf("-")<0)&&i.indexOf(a)===0)return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),a=[],i=o=>{o&&(this.isSupportedCode(o)?a.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):typeof e=="string"&&i(this.formatLanguageCode(e)),r.forEach(o=>{a.indexOf(o)<0&&i(this.formatLanguageCode(o))}),a}}let hW=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],fW={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};const mW=["v1","v2","v3"],gW=["v4"],GR={zero:0,one:1,two:2,few:3,many:4,other:5};function yW(){const t={};return hW.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:fW[e.fc]}})}),t}class bW{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=cs.create("pluralResolver"),(!this.options.compatibilityJSON||gW.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=yW()}addRule(e,n){this.rules[e]=n}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(k1(e==="dev"?"en":e),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(a=>`${n}${a}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((a,i)=>GR[a]-GR[i]).map(a=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a}`):r.numbers.map(a=>this.getSuffix(e,a,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,r);return a?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(n)}`:this.getSuffixRetroCompatible(a,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let a=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const i=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!mW.includes(this.options.compatibilityJSON)}}function HR(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=oW(t,e,n);return!i&&a&&typeof n=="string"&&(i=oS(t,n,r),i===void 0&&(i=oS(e,n,r))),i}class vW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=cs.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const n=e.interpolation;this.escape=n.escape!==void 0?n.escape:lW,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?Pd(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?Pd(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?Pd(n.nestingPrefix):n.nestingPrefixEscaped||Pd("$t("),this.nestingSuffix=n.nestingSuffix?Pd(n.nestingSuffix):n.nestingSuffixEscaped||Pd(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,a){let i,o,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(f){return f.replace(/\$/g,"$$$$")}const c=f=>{if(f.indexOf(this.formatSeparator)<0){const b=HR(n,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,r,{...a,...n,interpolationkey:f}):b}const g=f.split(this.formatSeparator),y=g.shift().trim(),v=g.join(this.formatSeparator).trim();return this.format(HR(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...a,...n,interpolationkey:y})};this.resetRegExp();const d=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,p=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>u(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?u(this.escape(f)):u(f)}].forEach(f=>{for(s=0;i=f.regex.exec(e);){const g=i[1].trim();if(o=c(g),o===void 0)if(typeof d=="function"){const v=d(e,i,a);o=typeof v=="string"?v:""}else if(a&&Object.prototype.hasOwnProperty.call(a,g))o="";else if(p){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=LR(o));const y=f.safeValue(o);if(e=e.replace(i[0],y),p?(f.regex.lastIndex+=o.length,f.regex.lastIndex-=i[0].length):f.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,i,o;function s(l,u){const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const d=l.split(new RegExp(`${c}[ ]*{`));let p=`{${d[1]}`;l=d[0],p=this.interpolate(p,o);const f=p.match(/'/g),g=p.match(/"/g);(f&&f.length%2===0&&!g||g.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),u&&(o={...u,...o})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,y),`${l}${c}${p}`}return delete o.defaultValue,l}for(;a=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const c=a[1].split(this.formatSeparator).map(d=>d.trim());a[1]=c.shift(),l=c,u=!0}if(i=n(s.call(this,a[1].trim(),o),o),i&&a[0]===e&&typeof i!="string")return i;typeof i!="string"&&(i=LR(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),u&&(i=l.reduce((c,d)=>this.format(c,d,r.lng,{...r,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}function xW(t){let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);e==="currency"&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(i=>{if(!i)return;const[o,...s]=i.split(":"),l=s.join(":").trim().replace(/^'+|'+$/g,"");n[o.trim()]||(n[o.trim()]=l),l==="false"&&(n[o.trim()]=!1),l==="true"&&(n[o.trim()]=!0),isNaN(l)||(n[o.trim()]=parseInt(l,10))})}return{formatName:e,formatOptions:n}}function Fd(t){const e={};return function(n,r,a){const i=r+JSON.stringify(a);let o=e[i];return o||(o=t(k1(r),a),e[i]=o),o(n)}}class wW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=cs.create("formatter"),this.options=e,this.formats={number:Fd((n,r)=>{const a=new Intl.NumberFormat(n,{...r});return i=>a.format(i)}),currency:Fd((n,r)=>{const a=new Intl.NumberFormat(n,{...r,style:"currency"});return i=>a.format(i)}),datetime:Fd((n,r)=>{const a=new Intl.DateTimeFormat(n,{...r});return i=>a.format(i)}),relativetime:Fd((n,r)=>{const a=new Intl.RelativeTimeFormat(n,{...r});return i=>a.format(i,r.range||"day")}),list:Fd((n,r)=>{const a=new Intl.ListFormat(n,{...r});return i=>a.format(i)})},this.init(e)}init(e){const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Fd(n)}format(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((i,o)=>{const{formatName:s,formatOptions:l}=xW(o);if(this.formats[s]){let u=i;try{const c=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},d=c.locale||c.lng||a.locale||a.lng||r;u=this.formats[s](i,d,{...l,...a,...c})}catch(c){this.logger.warn(c)}return u}else this.logger.warn(`there was no format function for ${s}`);return i},e)}}function kW(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}class SW extends x1{constructor(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=cs.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,a.backend,a)}queueLoad(e,n,r,a){const i={},o={},s={},l={};return e.forEach(u=>{let c=!0;n.forEach(d=>{const p=`${u}|${d}`;!r.reload&&this.store.hasResourceBundle(u,d)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,c=!1,o[p]===void 0&&(o[p]=!0),i[p]===void 0&&(i[p]=!0),l[d]===void 0&&(l[d]=!0)))}),c||(s[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const a=e.split("|"),i=a[0],o=a[1];n&&this.emit("failedLoading",i,o,n),r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2;const s={};this.queue.forEach(l=>{iW(l.loaded,[i],o),kW(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{s[u]||(s[u]={});const c=l.loaded[u];c.length&&c.forEach(d=>{s[u][d]===void 0&&(s[u][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:a,wait:i,callback:o});return}this.readingCalls++;const s=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(u&&c&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,a+1,i*2,o)},i);return}o(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(c=>s(null,c)).catch(s):s(null,u)}catch(u){s(u)}return}return l(e,n,s)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const i=this.queueLoad(e,n,r,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),a=r[0],i=r[1];this.read(a,i,"read",void 0,void 0,(o,s)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${a} failed`,o),!o&&s&&this.logger.log(`${n}loaded namespace ${i} for language ${a}`,s),this.loaded(e,o,s)})}saveMissing(e,n,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(e,n,r,a,l):c=u(e,n,r,a),c&&typeof c.then=="function"?c.then(d=>s(null,d)).catch(s):s(null,c)}catch(c){s(c)}else u(e,n,r,a,s,l)}!e||!e[0]||this.store.addResource(e[0],n,r,a)}}}function qR(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let e={};if(typeof t[1]=="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function KR(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function S1(){}function CW(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(e=>{typeof t[e]=="function"&&(t[e]=t[e].bind(t))})}class $0 extends x1{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=KR(e),this.services={},this.logger=cs,this.modules={external:[]},CW(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const a=qR();this.options={...a,...this.options,...KR(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function i(l){return l?typeof l=="function"?new l:l:null}if(!this.options.isClone){this.modules.logger?cs.init(i(this.modules.logger),this.options):cs.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=wW);const u=new WR(this.options);this.store=new jR(this.options.resources,this.options);const c=this.services;c.logger=cs,c.resourceStore=this.store,c.languageUtils=u,c.pluralResolver=new bW(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(c.formatter=i(l),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new vW(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new SW(i(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(d){for(var p=arguments.length,f=new Array(p>1?p-1:0),g=1;g<p;g++)f[g-1]=arguments[g];e.emit(d,...f)}),this.modules.languageDetector&&(c.languageDetector=i(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=i(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new X2(this.services,this.options),this.translator.on("*",function(d){for(var p=arguments.length,f=new Array(p>1?p-1:0),g=1;g<p;g++)f[g-1]=arguments[g];e.emit(d,...f)}),this.modules.external.forEach(d=>{d.init&&d.init(this)})}if(this.format=this.options.interpolation.format,r||(r=S1),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=function(){return e.store[l](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=function(){return e.store[l](...arguments),e}});const o=Kh(),s=()=>{const l=(u,c)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(c),r(u,c)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),o}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S1;const r=typeof e=="string"?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const a=[],i=o=>{!o||o==="cimode"||this.services.languageUtils.toResolveHierarchy(o).forEach(s=>{s!=="cimode"&&a.indexOf(s)<0&&a.push(s)})};r?i(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(o=>i(o)),this.options.preload&&this.options.preload.forEach(o=>i(o)),this.services.backendConnector.load(a,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(o)})}else n(null)}reloadResources(e,n,r){const a=Kh();return e||(e=this.languages),n||(n=this.options.ns),r||(r=S1),this.services.backendConnector.reload(e,n,i=>{a.resolve(),r(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&UR.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const a=Kh();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,a.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},s=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{o(c,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),a}getFixedT(e,n,r){var a=this;const i=function(o,s){let l;if(typeof s!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),d=2;d<u;d++)c[d-2]=arguments[d];l=a.options.overloadTranslationOptionHandler([o,s].concat(c))}else l={...s};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix=l.keyPrefix||r||i.keyPrefix;const p=a.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(o)?f=o.map(g=>`${l.keyPrefix}${p}${g}`):f=l.keyPrefix?`${l.keyPrefix}${p}${o}`:o,a.t(f,l)};return typeof e=="string"?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=this.services.backendConnector.state[`${s}|${l}`];return u===-1||u===2};if(n.precheck){const s=n.precheck(this,o);if(s!==void 0)return s}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!a||o(i,e)))}loadNamespaces(e,n){const r=Kh();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Kh();typeof e=="string"&&(e=[e]);const a=this.options.preload||[],i=e.filter(o=>a.indexOf(o)<0);return i.length?(this.options.preload=a.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new WR(qR());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new $0(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S1;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new $0(a);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new jR(this.store.data,a),i.services.resourceStore=i.store),i.translator=new X2(i.services,a),i.translator.on("*",function(o){for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];i.emit(o,...l)}),i.init(a,n),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const fa=$0.createInstance();fa.createInstance=$0.createInstance,fa.createInstance,fa.dir,fa.init,fa.loadResources,fa.reloadResources,fa.use,fa.changeLanguage,fa.getFixedT,fa.t,fa.exists,fa.setDefaultNamespace,fa.hasLoadedNamespace,fa.loadNamespaces,fa.loadLanguages;var XR={exports:{}},Ri={},QR={exports:{}},YR={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(t){function e(L,Q){var J=L.length;L.push(Q);e:for(;0<J;){var te=J-1>>>1,oe=L[te];if(0<a(oe,Q))L[te]=Q,L[J]=oe,J=te;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var Q=L[0],J=L.pop();if(J!==Q){L[0]=J;e:for(var te=0,oe=L.length,he=oe>>>1;te<he;){var ae=2*(te+1)-1,de=L[ae],ke=ae+1,K=L[ke];if(0>a(de,J))ke<oe&&0>a(K,de)?(L[te]=K,L[ke]=J,te=ke):(L[te]=de,L[ae]=J,te=ae);else if(ke<oe&&0>a(K,J))L[te]=K,L[ke]=J,te=ke;else break e}}return Q}function a(L,Q){var J=L.sortIndex-Q.sortIndex;return J!==0?J:L.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,d=null,p=3,f=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var Q=n(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=L)r(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(u)}}function S(L){if(y=!1,w(L),!g)if(n(l)!==null)g=!0,Z(C);else{var Q=n(u);Q!==null&&H(S,Q.startTime-L)}}function C(L,Q){g=!1,y&&(y=!1,b(T),T=-1),f=!0;var J=p;try{for(w(Q),d=n(l);d!==null&&(!(d.expirationTime>Q)||L&&!D());){var te=d.callback;if(typeof te=="function"){d.callback=null,p=d.priorityLevel;var oe=te(d.expirationTime<=Q);Q=t.unstable_now(),typeof oe=="function"?d.callback=oe:d===n(l)&&r(l),w(Q)}else r(l);d=n(l)}if(d!==null)var he=!0;else{var ae=n(u);ae!==null&&H(S,ae.startTime-Q),he=!1}return he}finally{d=null,p=J,f=!1}}var E=!1,R=null,T=-1,$=5,P=-1;function D(){return!(t.unstable_now()-P<$)}function B(){if(R!==null){var L=t.unstable_now();P=L;var Q=!0;try{Q=R(!0,L)}finally{Q?z():(E=!1,R=null)}}else E=!1}var z;if(typeof x=="function")z=function(){x(B)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Y=q.port2;q.port1.onmessage=B,z=function(){Y.postMessage(null)}}else z=function(){v(B,0)};function Z(L){R=L,E||(E=!0,z())}function H(L,Q){T=v(function(){L(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,Z(C))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var J=p;p=Q;try{return L()}finally{p=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,Q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var J=p;p=L;try{return Q()}finally{p=J}},t.unstable_scheduleCallback=function(L,Q,J){var te=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?te+J:te):J=te,L){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=J+oe,L={id:c++,callback:Q,priorityLevel:L,startTime:J,expirationTime:oe,sortIndex:-1},J>te?(L.sortIndex=J,e(u,L),n(l)===null&&L===n(u)&&(y?(b(T),T=-1):y=!0,H(S,J-te))):(L.sortIndex=oe,e(l,L),g||f||(g=!0,Z(C))),L},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(L){var Q=p;return function(){var J=p;p=Q;try{return L.apply(this,arguments)}finally{p=J}}}})(YR),QR.exports=YR;var Qh=QR.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var ZR=_,$i=Qh;function Ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JR=new Set,Yh={};function oc(t,e){Ad(t,e),Ad(t+"Capture",e)}function Ad(t,e){for(Yh[t]=e,t=0;t<e.length;t++)JR.add(e[t])}var Gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lS=Object.prototype.hasOwnProperty,EW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,e$={},t$={};function NW(t){return lS.call(t$,t)?!0:lS.call(e$,t)?!1:EW.test(t)?t$[t]=!0:(e$[t]=!0,!1)}function TW(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function IW(t,e,n,r){if(e===null||typeof e>"u"||TW(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ni(t,e,n,r,a,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ma[t]=new ni(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ma[e]=new ni(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){ma[t]=new ni(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ma[t]=new ni(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ma[t]=new ni(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){ma[t]=new ni(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){ma[t]=new ni(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){ma[t]=new ni(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){ma[t]=new ni(t,5,!1,t.toLowerCase(),null,!1,!1)});var uS=/[\-:]([a-z])/g;function cS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uS,cS);ma[e]=new ni(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uS,cS);ma[e]=new ni(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uS,cS);ma[e]=new ni(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){ma[t]=new ni(t,1,!1,t.toLowerCase(),null,!1,!1)}),ma.xlinkHref=new ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){ma[t]=new ni(t,1,!1,t.toLowerCase(),null,!0,!0)});function dS(t,e,n,r){var a=ma.hasOwnProperty(e)?ma[e]:null;(a!==null?a.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IW(e,n,a,r)&&(n=null),r||a===null?NW(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hs=ZR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C1=Symbol.for("react.element"),Dd=Symbol.for("react.portal"),Ld=Symbol.for("react.fragment"),pS=Symbol.for("react.strict_mode"),hS=Symbol.for("react.profiler"),n$=Symbol.for("react.provider"),r$=Symbol.for("react.context"),fS=Symbol.for("react.forward_ref"),mS=Symbol.for("react.suspense"),gS=Symbol.for("react.suspense_list"),yS=Symbol.for("react.memo"),Ul=Symbol.for("react.lazy"),a$=Symbol.for("react.offscreen"),i$=Symbol.iterator;function Zh(t){return t===null||typeof t!="object"?null:(t=i$&&t[i$]||t["@@iterator"],typeof t=="function"?t:null)}var tr=Object.assign,bS;function Jh(t){if(bS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bS=e&&e[1]||""}return`
`+bS+t}var vS=!1;function xS(t,e){if(!t||vS)return"";vS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{vS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jh(t):""}function _W(t){switch(t.tag){case 5:return Jh(t.type);case 16:return Jh("Lazy");case 13:return Jh("Suspense");case 19:return Jh("SuspenseList");case 0:case 2:case 15:return t=xS(t.type,!1),t;case 11:return t=xS(t.type.render,!1),t;case 1:return t=xS(t.type,!0),t;default:return""}}function wS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ld:return"Fragment";case Dd:return"Portal";case hS:return"Profiler";case pS:return"StrictMode";case mS:return"Suspense";case gS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r$:return(t.displayName||"Context")+".Consumer";case n$:return(t._context.displayName||"Context")+".Provider";case fS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yS:return e=t.displayName||null,e!==null?e:wS(t.type)||"Memo";case Ul:e=t._payload,t=t._init;try{return wS(t(e))}catch{}}return null}function RW(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wS(e);case 8:return e===pS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function o$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $W(t){var e=o$(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function E1(t){t._valueTracker||(t._valueTracker=$W(t))}function s$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=o$(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function N1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kS(t,e){var n=e.checked;return tr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function l$(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function u$(t,e){e=e.checked,e!=null&&dS(t,"checked",e,!1)}function SS(t,e){u$(t,e);var n=Vl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?CS(t,e.type,n):e.hasOwnProperty("defaultValue")&&CS(t,e.type,Vl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function c$(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function CS(t,e,n){(e!=="number"||N1(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ef=Array.isArray;function zd(t,e,n,r){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vl(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function ES(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return tr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function d$(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ie(92));if(ef(n)){if(1<n.length)throw Error(Ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vl(n)}}function p$(t,e){var n=Vl(e.value),r=Vl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function h$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function f$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function NS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?f$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var T1,m$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(T1=T1||document.createElement("div"),T1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=T1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OW=["Webkit","ms","Moz","O"];Object.keys(nf).forEach(function(t){OW.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nf[e]=nf[t]})});function g$(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nf.hasOwnProperty(t)&&nf[t]?(""+e).trim():e+"px"}function y$(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=g$(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var MW=tr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function TS(t,e){if(e){if(MW[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ie(62))}}function IS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _S=null;function RS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $S=null,Bd=null,jd=null;function b$(t){if(t=Ef(t)){if(typeof $S!="function")throw Error(Ie(280));var e=t.stateNode;e&&(e=Q1(e),$S(t.stateNode,t.type,e))}}function v$(t){Bd?jd?jd.push(t):jd=[t]:Bd=t}function x$(){if(Bd){var t=Bd,e=jd;if(jd=Bd=null,b$(t),e)for(t=0;t<e.length;t++)b$(e[t])}}function w$(t,e){return t(e)}function k$(){}var OS=!1;function S$(t,e,n){if(OS)return t(e,n);OS=!0;try{return w$(t,e,n)}finally{OS=!1,(Bd!==null||jd!==null)&&(k$(),x$())}}function rf(t,e){var n=t.stateNode;if(n===null)return null;var r=Q1(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ie(231,e,typeof n));return n}var MS=!1;if(Gs)try{var af={};Object.defineProperty(af,"passive",{get:function(){MS=!0}}),window.addEventListener("test",af,af),window.removeEventListener("test",af,af)}catch{MS=!1}function PW(t,e,n,r,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var of=!1,I1=null,_1=!1,PS=null,FW={onError:function(t){of=!0,I1=t}};function AW(t,e,n,r,a,i,o,s,l){of=!1,I1=null,PW.apply(FW,arguments)}function DW(t,e,n,r,a,i,o,s,l){if(AW.apply(this,arguments),of){if(of){var u=I1;of=!1,I1=null}else throw Error(Ie(198));_1||(_1=!0,PS=u)}}function sc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function C$(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function E$(t){if(sc(t)!==t)throw Error(Ie(188))}function LW(t){var e=t.alternate;if(!e){if(e=sc(t),e===null)throw Error(Ie(188));return e!==t?null:t}for(var n=t,r=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return E$(a),t;if(i===r)return E$(a),e;i=i.sibling}throw Error(Ie(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o)throw Error(Ie(189))}}if(n.alternate!==r)throw Error(Ie(190))}if(n.tag!==3)throw Error(Ie(188));return n.stateNode.current===n?t:e}function N$(t){return t=LW(t),t!==null?T$(t):null}function T$(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=T$(t);if(e!==null)return e;t=t.sibling}return null}var I$=$i.unstable_scheduleCallback,_$=$i.unstable_cancelCallback,zW=$i.unstable_shouldYield,BW=$i.unstable_requestPaint,xr=$i.unstable_now,jW=$i.unstable_getCurrentPriorityLevel,FS=$i.unstable_ImmediatePriority,R$=$i.unstable_UserBlockingPriority,R1=$i.unstable_NormalPriority,UW=$i.unstable_LowPriority,$$=$i.unstable_IdlePriority,$1=null,ds=null;function VW(t){if(ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot($1,t,void 0,(t.current.flags&128)===128)}catch{}}var Oo=Math.clz32?Math.clz32:HW,WW=Math.log,GW=Math.LN2;function HW(t){return t>>>=0,t===0?32:31-(WW(t)/GW|0)|0}var O1=64,M1=4194304;function sf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function P1(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~a;s!==0?r=sf(s):(i&=o,i!==0&&(r=sf(i)))}else o=n&~a,o!==0?r=sf(o):i!==0&&(r=sf(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&a)&&(a=r&-r,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Oo(e),a=1<<n,r|=t[n],e&=~a;return r}function qW(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KW(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Oo(i),s=1<<o,l=a[o];l===-1?(!(s&n)||s&r)&&(a[o]=qW(s,e)):l<=e&&(t.expiredLanes|=s),i&=~s}}function AS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function O$(){var t=O1;return O1<<=1,!(O1&4194240)&&(O1=64),t}function DS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Oo(e),t[e]=n}function XW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-Oo(n),i=1<<a;e[a]=0,r[a]=-1,t[a]=-1,n&=~i}}function LS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Oo(n),a=1<<r;a&e|t[r]&e&&(t[r]|=e),n&=~a}}var xn=0;function M$(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var P$,zS,F$,A$,D$,BS=!1,F1=[],Wl=null,Gl=null,Hl=null,uf=new Map,cf=new Map,ql=[],QW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function L$(t,e){switch(t){case"focusin":case"focusout":Wl=null;break;case"dragenter":case"dragleave":Gl=null;break;case"mouseover":case"mouseout":Hl=null;break;case"pointerover":case"pointerout":uf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cf.delete(e.pointerId)}}function df(t,e,n,r,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Ef(e),e!==null&&zS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function YW(t,e,n,r,a){switch(e){case"focusin":return Wl=df(Wl,t,e,n,r,a),!0;case"dragenter":return Gl=df(Gl,t,e,n,r,a),!0;case"mouseover":return Hl=df(Hl,t,e,n,r,a),!0;case"pointerover":var i=a.pointerId;return uf.set(i,df(uf.get(i)||null,t,e,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,cf.set(i,df(cf.get(i)||null,t,e,n,r,a)),!0}return!1}function z$(t){var e=lc(t.target);if(e!==null){var n=sc(e);if(n!==null){if(e=n.tag,e===13){if(e=C$(n),e!==null){t.blockedOn=e,D$(t.priority,function(){F$(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function A1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=US(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_S=r,n.target.dispatchEvent(r),_S=null}else return e=Ef(n),e!==null&&zS(e),t.blockedOn=n,!1;e.shift()}return!0}function B$(t,e,n){A1(t)&&n.delete(e)}function ZW(){BS=!1,Wl!==null&&A1(Wl)&&(Wl=null),Gl!==null&&A1(Gl)&&(Gl=null),Hl!==null&&A1(Hl)&&(Hl=null),uf.forEach(B$),cf.forEach(B$)}function pf(t,e){t.blockedOn===e&&(t.blockedOn=null,BS||(BS=!0,$i.unstable_scheduleCallback($i.unstable_NormalPriority,ZW)))}function hf(t){function e(a){return pf(a,t)}if(0<F1.length){pf(F1[0],t);for(var n=1;n<F1.length;n++){var r=F1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wl!==null&&pf(Wl,t),Gl!==null&&pf(Gl,t),Hl!==null&&pf(Hl,t),uf.forEach(e),cf.forEach(e),n=0;n<ql.length;n++)r=ql[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ql.length&&(n=ql[0],n.blockedOn===null);)z$(n),n.blockedOn===null&&ql.shift()}var Ud=Hs.ReactCurrentBatchConfig,D1=!0;function JW(t,e,n,r){var a=xn,i=Ud.transition;Ud.transition=null;try{xn=1,jS(t,e,n,r)}finally{xn=a,Ud.transition=i}}function eG(t,e,n,r){var a=xn,i=Ud.transition;Ud.transition=null;try{xn=4,jS(t,e,n,r)}finally{xn=a,Ud.transition=i}}function jS(t,e,n,r){if(D1){var a=US(t,e,n,r);if(a===null)iC(t,e,r,L1,n),L$(t,r);else if(YW(a,t,e,n,r))r.stopPropagation();else if(L$(t,r),e&4&&-1<QW.indexOf(t)){for(;a!==null;){var i=Ef(a);if(i!==null&&P$(i),i=US(t,e,n,r),i===null&&iC(t,e,r,L1,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else iC(t,e,r,null,n)}}var L1=null;function US(t,e,n,r){if(L1=null,t=RS(r),t=lc(t),t!==null)if(e=sc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=C$(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return L1=t,null}function j$(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jW()){case FS:return 1;case R$:return 4;case R1:case UW:return 16;case $$:return 536870912;default:return 16}default:return 16}}var Kl=null,VS=null,z1=null;function U$(){if(z1)return z1;var t,e=VS,n=e.length,r,a="value"in Kl?Kl.value:Kl.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===a[i-r];r++);return z1=a.slice(t,1<r?1-r:void 0)}function B1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function j1(){return!0}function V$(){return!1}function Oi(t){function e(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?j1:V$,this.isPropagationStopped=V$,this}return tr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=j1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=j1)},persist:function(){},isPersistent:j1}),e}var Vd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},WS=Oi(Vd),ff=tr({},Vd,{view:0,detail:0}),tG=Oi(ff),GS,HS,mf,U1=tr({},ff,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:KS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mf&&(mf&&t.type==="mousemove"?(GS=t.screenX-mf.screenX,HS=t.screenY-mf.screenY):HS=GS=0,mf=t),GS)},movementY:function(t){return"movementY"in t?t.movementY:HS}}),W$=Oi(U1),nG=tr({},U1,{dataTransfer:0}),rG=Oi(nG),aG=tr({},ff,{relatedTarget:0}),qS=Oi(aG),iG=tr({},Vd,{animationName:0,elapsedTime:0,pseudoElement:0}),oG=Oi(iG),sG=tr({},Vd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lG=Oi(sG),uG=tr({},Vd,{data:0}),G$=Oi(uG),cG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hG(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pG[t])?!!e[t]:!1}function KS(){return hG}var fG=tr({},ff,{key:function(t){if(t.key){var e=cG[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=B1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dG[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:KS,charCode:function(t){return t.type==="keypress"?B1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?B1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mG=Oi(fG),gG=tr({},U1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H$=Oi(gG),yG=tr({},ff,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:KS}),bG=Oi(yG),vG=tr({},Vd,{propertyName:0,elapsedTime:0,pseudoElement:0}),xG=Oi(vG),wG=tr({},U1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kG=Oi(wG),SG=[9,13,27,32],XS=Gs&&"CompositionEvent"in window,gf=null;Gs&&"documentMode"in document&&(gf=document.documentMode);var CG=Gs&&"TextEvent"in window&&!gf,q$=Gs&&(!XS||gf&&8<gf&&11>=gf),K$=" ",X$=!1;function Q$(t,e){switch(t){case"keyup":return SG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y$(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wd=!1;function EG(t,e){switch(t){case"compositionend":return Y$(e);case"keypress":return e.which!==32?null:(X$=!0,K$);case"textInput":return t=e.data,t===K$&&X$?null:t;default:return null}}function NG(t,e){if(Wd)return t==="compositionend"||!XS&&Q$(t,e)?(t=U$(),z1=VS=Kl=null,Wd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return q$&&e.locale!=="ko"?null:e.data;default:return null}}var TG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TG[t.type]:e==="textarea"}function J$(t,e,n,r){v$(r),e=q1(e,"onChange"),0<e.length&&(n=new WS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yf=null,bf=null;function IG(t){yO(t,0)}function V1(t){var e=Xd(t);if(s$(e))return t}function _G(t,e){if(t==="change")return e}var eO=!1;if(Gs){var QS;if(Gs){var YS="oninput"in document;if(!YS){var tO=document.createElement("div");tO.setAttribute("oninput","return;"),YS=typeof tO.oninput=="function"}QS=YS}else QS=!1;eO=QS&&(!document.documentMode||9<document.documentMode)}function nO(){yf&&(yf.detachEvent("onpropertychange",rO),bf=yf=null)}function rO(t){if(t.propertyName==="value"&&V1(bf)){var e=[];J$(e,bf,t,RS(t)),S$(IG,e)}}function RG(t,e,n){t==="focusin"?(nO(),yf=e,bf=n,yf.attachEvent("onpropertychange",rO)):t==="focusout"&&nO()}function $G(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return V1(bf)}function OG(t,e){if(t==="click")return V1(e)}function MG(t,e){if(t==="input"||t==="change")return V1(e)}function PG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mo=typeof Object.is=="function"?Object.is:PG;function vf(t,e){if(Mo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!lS.call(e,a)||!Mo(t[a],e[a]))return!1}return!0}function aO(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iO(t,e){var n=aO(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=aO(n)}}function oO(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oO(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sO(){for(var t=window,e=N1();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=N1(t.document)}return e}function ZS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function FG(t){var e=sO(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oO(n.ownerDocument.documentElement,n)){if(r!==null&&ZS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!t.extend&&i>r&&(a=r,r=i,i=a),a=iO(n,i);var o=iO(n,r);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AG=Gs&&"documentMode"in document&&11>=document.documentMode,Gd=null,JS=null,xf=null,eC=!1;function lO(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;eC||Gd==null||Gd!==N1(r)||(r=Gd,"selectionStart"in r&&ZS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xf&&vf(xf,r)||(xf=r,r=q1(JS,"onSelect"),0<r.length&&(e=new WS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gd)))}function W1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hd={animationend:W1("Animation","AnimationEnd"),animationiteration:W1("Animation","AnimationIteration"),animationstart:W1("Animation","AnimationStart"),transitionend:W1("Transition","TransitionEnd")},tC={},uO={};Gs&&(uO=document.createElement("div").style,"AnimationEvent"in window||(delete Hd.animationend.animation,delete Hd.animationiteration.animation,delete Hd.animationstart.animation),"TransitionEvent"in window||delete Hd.transitionend.transition);function G1(t){if(tC[t])return tC[t];if(!Hd[t])return t;var e=Hd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uO)return tC[t]=e[n];return t}var cO=G1("animationend"),dO=G1("animationiteration"),pO=G1("animationstart"),hO=G1("transitionend"),fO=new Map,mO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xl(t,e){fO.set(t,e),oc(e,[t])}for(var nC=0;nC<mO.length;nC++){var rC=mO[nC],DG=rC.toLowerCase(),LG=rC[0].toUpperCase()+rC.slice(1);Xl(DG,"on"+LG)}Xl(cO,"onAnimationEnd"),Xl(dO,"onAnimationIteration"),Xl(pO,"onAnimationStart"),Xl("dblclick","onDoubleClick"),Xl("focusin","onFocus"),Xl("focusout","onBlur"),Xl(hO,"onTransitionEnd"),Ad("onMouseEnter",["mouseout","mouseover"]),Ad("onMouseLeave",["mouseout","mouseover"]),Ad("onPointerEnter",["pointerout","pointerover"]),Ad("onPointerLeave",["pointerout","pointerover"]),oc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oc("onBeforeInput",["compositionend","keypress","textInput","paste"]),oc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zG=new Set("cancel close invalid load scroll toggle".split(" ").concat(wf));function gO(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,DW(r,e,void 0,t),t.currentTarget=null}function yO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;gO(a,s,u),i=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;gO(a,s,u),i=l}}}if(_1)throw t=PS,_1=!1,PS=null,t}function Bn(t,e){var n=e[dC];n===void 0&&(n=e[dC]=new Set);var r=t+"__bubble";n.has(r)||(bO(e,t,2,!1),n.add(r))}function aC(t,e,n){var r=0;e&&(r|=4),bO(n,t,r,e)}var H1="_reactListening"+Math.random().toString(36).slice(2);function kf(t){if(!t[H1]){t[H1]=!0,JR.forEach(function(n){n!=="selectionchange"&&(zG.has(n)||aC(n,!1,t),aC(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[H1]||(e[H1]=!0,aC("selectionchange",!1,e))}}function bO(t,e,n,r){switch(j$(e)){case 1:var a=JW;break;case 4:a=eG;break;default:a=jS}n=a.bind(null,e,n,t),a=void 0,!MS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function iC(t,e,n,r,a){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=lc(s),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}s=s.parentNode}}r=r.return}S$(function(){var u=i,c=RS(n),d=[];e:{var p=fO.get(t);if(p!==void 0){var f=WS,g=t;switch(t){case"keypress":if(B1(n)===0)break e;case"keydown":case"keyup":f=mG;break;case"focusin":g="focus",f=qS;break;case"focusout":g="blur",f=qS;break;case"beforeblur":case"afterblur":f=qS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=W$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=rG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=bG;break;case cO:case dO:case pO:f=oG;break;case hO:f=xG;break;case"scroll":f=tG;break;case"wheel":f=kG;break;case"copy":case"cut":case"paste":f=lG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=H$}var y=(e&4)!==0,v=!y&&t==="scroll",b=y?p!==null?p+"Capture":null:p;y=[];for(var x=u,w;x!==null;){w=x;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,b!==null&&(S=rf(x,b),S!=null&&y.push(Sf(x,S,w)))),v)break;x=x.return}0<y.length&&(p=new f(p,g,null,n,c),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==_S&&(g=n.relatedTarget||n.fromElement)&&(lc(g)||g[qs]))break e;if((f||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=u,g=g?lc(g):null,g!==null&&(v=sc(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(y=W$,S="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=H$,S="onPointerLeave",b="onPointerEnter",x="pointer"),v=f==null?p:Xd(f),w=g==null?p:Xd(g),p=new y(S,x+"leave",f,n,c),p.target=v,p.relatedTarget=w,S=null,lc(c)===u&&(y=new y(b,x+"enter",g,n,c),y.target=w,y.relatedTarget=v,S=y),v=S,f&&g)t:{for(y=f,b=g,x=0,w=y;w;w=qd(w))x++;for(w=0,S=b;S;S=qd(S))w++;for(;0<x-w;)y=qd(y),x--;for(;0<w-x;)b=qd(b),w--;for(;x--;){if(y===b||b!==null&&y===b.alternate)break t;y=qd(y),b=qd(b)}y=null}else y=null;f!==null&&vO(d,p,f,y,!1),g!==null&&v!==null&&vO(d,v,g,y,!0)}}e:{if(p=u?Xd(u):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var C=_G;else if(Z$(p))if(eO)C=MG;else{C=$G;var E=RG}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=OG);if(C&&(C=C(t,u))){J$(d,C,n,c);break e}E&&E(t,p,u),t==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&CS(p,"number",p.value)}switch(E=u?Xd(u):window,t){case"focusin":(Z$(E)||E.contentEditable==="true")&&(Gd=E,JS=u,xf=null);break;case"focusout":xf=JS=Gd=null;break;case"mousedown":eC=!0;break;case"contextmenu":case"mouseup":case"dragend":eC=!1,lO(d,n,c);break;case"selectionchange":if(AG)break;case"keydown":case"keyup":lO(d,n,c)}var R;if(XS)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Wd?Q$(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(q$&&n.locale!=="ko"&&(Wd||T!=="onCompositionStart"?T==="onCompositionEnd"&&Wd&&(R=U$()):(Kl=c,VS="value"in Kl?Kl.value:Kl.textContent,Wd=!0)),E=q1(u,T),0<E.length&&(T=new G$(T,t,null,n,c),d.push({event:T,listeners:E}),R?T.data=R:(R=Y$(n),R!==null&&(T.data=R)))),(R=CG?EG(t,n):NG(t,n))&&(u=q1(u,"onBeforeInput"),0<u.length&&(c=new G$("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=R))}yO(d,e)})}function Sf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function q1(t,e){for(var n=e+"Capture",r=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=rf(t,n),i!=null&&r.unshift(Sf(t,i,a)),i=rf(t,e),i!=null&&r.push(Sf(t,i,a))),t=t.return}return r}function qd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vO(t,e,n,r,a){for(var i=e._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,a?(l=rf(n,i),l!=null&&o.unshift(Sf(n,l,s))):a||(l=rf(n,i),l!=null&&o.push(Sf(n,l,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var BG=/\r\n?/g,jG=/\u0000|\uFFFD/g;function xO(t){return(typeof t=="string"?t:""+t).replace(BG,`
`).replace(jG,"")}function K1(t,e,n){if(e=xO(e),xO(t)!==e&&n)throw Error(Ie(425))}function X1(){}var oC=null,sC=null;function lC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uC=typeof setTimeout=="function"?setTimeout:void 0,UG=typeof clearTimeout=="function"?clearTimeout:void 0,wO=typeof Promise=="function"?Promise:void 0,VG=typeof queueMicrotask=="function"?queueMicrotask:typeof wO<"u"?function(t){return wO.resolve(null).then(t).catch(WG)}:uC;function WG(t){setTimeout(function(){throw t})}function cC(t,e){var n=e,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),hf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);hf(e)}function Ql(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function kO(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Kd=Math.random().toString(36).slice(2),ps="__reactFiber$"+Kd,Cf="__reactProps$"+Kd,qs="__reactContainer$"+Kd,dC="__reactEvents$"+Kd,GG="__reactListeners$"+Kd,HG="__reactHandles$"+Kd;function lc(t){var e=t[ps];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qs]||n[ps]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=kO(t);t!==null;){if(n=t[ps])return n;t=kO(t)}return e}t=n,n=t.parentNode}return null}function Ef(t){return t=t[ps]||t[qs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ie(33))}function Q1(t){return t[Cf]||null}var pC=[],Qd=-1;function Yl(t){return{current:t}}function jn(t){0>Qd||(t.current=pC[Qd],pC[Qd]=null,Qd--)}function Pn(t,e){Qd++,pC[Qd]=t.current,t.current=e}var Zl={},Pa=Yl(Zl),fi=Yl(!1),uc=Zl;function Yd(t,e){var n=t.type.contextTypes;if(!n)return Zl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function mi(t){return t=t.childContextTypes,t!=null}function Y1(){jn(fi),jn(Pa)}function SO(t,e,n){if(Pa.current!==Zl)throw Error(Ie(168));Pn(Pa,e),Pn(fi,n)}function CO(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in e))throw Error(Ie(108,RW(t)||"Unknown",a));return tr({},n,r)}function Z1(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zl,uc=Pa.current,Pn(Pa,t),Pn(fi,fi.current),!0}function EO(t,e,n){var r=t.stateNode;if(!r)throw Error(Ie(169));n?(t=CO(t,e,uc),r.__reactInternalMemoizedMergedChildContext=t,jn(fi),jn(Pa),Pn(Pa,t)):jn(fi),Pn(fi,n)}var Ks=null,J1=!1,hC=!1;function NO(t){Ks===null?Ks=[t]:Ks.push(t)}function qG(t){J1=!0,NO(t)}function Jl(){if(!hC&&Ks!==null){hC=!0;var t=0,e=xn;try{var n=Ks;for(xn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ks=null,J1=!1}catch(a){throw Ks!==null&&(Ks=Ks.slice(t+1)),I$(FS,Jl),a}finally{xn=e,hC=!1}}return null}var Zd=[],Jd=0,ey=null,ty=0,Ji=[],eo=0,cc=null,Xs=1,Qs="";function dc(t,e){Zd[Jd++]=ty,Zd[Jd++]=ey,ey=t,ty=e}function TO(t,e,n){Ji[eo++]=Xs,Ji[eo++]=Qs,Ji[eo++]=cc,cc=t;var r=Xs;t=Qs;var a=32-Oo(r)-1;r&=~(1<<a),n+=1;var i=32-Oo(e)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Xs=1<<32-Oo(e)+a|n<<a|r,Qs=i+t}else Xs=1<<i|n<<a|r,Qs=t}function fC(t){t.return!==null&&(dc(t,1),TO(t,1,0))}function mC(t){for(;t===ey;)ey=Zd[--Jd],Zd[Jd]=null,ty=Zd[--Jd],Zd[Jd]=null;for(;t===cc;)cc=Ji[--eo],Ji[eo]=null,Qs=Ji[--eo],Ji[eo]=null,Xs=Ji[--eo],Ji[eo]=null}var Mi=null,Pi=null,qn=!1,Po=null;function IO(t,e){var n=ao(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _O(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mi=t,Pi=Ql(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mi=t,Pi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cc!==null?{id:Xs,overflow:Qs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ao(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mi=t,Pi=null,!0):!1;default:return!1}}function gC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yC(t){if(qn){var e=Pi;if(e){var n=e;if(!_O(t,e)){if(gC(t))throw Error(Ie(418));e=Ql(n.nextSibling);var r=Mi;e&&_O(t,e)?IO(r,n):(t.flags=t.flags&-4097|2,qn=!1,Mi=t)}}else{if(gC(t))throw Error(Ie(418));t.flags=t.flags&-4097|2,qn=!1,Mi=t}}}function RO(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mi=t}function ny(t){if(t!==Mi)return!1;if(!qn)return RO(t),qn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lC(t.type,t.memoizedProps)),e&&(e=Pi)){if(gC(t))throw $O(),Error(Ie(418));for(;e;)IO(t,e),e=Ql(e.nextSibling)}if(RO(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pi=Ql(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pi=null}}else Pi=Mi?Ql(t.stateNode.nextSibling):null;return!0}function $O(){for(var t=Pi;t;)t=Ql(t.nextSibling)}function ep(){Pi=Mi=null,qn=!1}function bC(t){Po===null?Po=[t]:Po.push(t)}var KG=Hs.ReactCurrentBatchConfig;function Fo(t,e){if(t&&t.defaultProps){e=tr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ry=Yl(null),ay=null,tp=null,vC=null;function xC(){vC=tp=ay=null}function wC(t){var e=ry.current;jn(ry),t._currentValue=e}function kC(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function np(t,e){ay=t,vC=tp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gi=!0),t.firstContext=null)}function to(t){var e=t._currentValue;if(vC!==t)if(t={context:t,memoizedValue:e,next:null},tp===null){if(ay===null)throw Error(Ie(308));tp=t,ay.dependencies={lanes:0,firstContext:t}}else tp=tp.next=t;return e}var pc=null;function SC(t){pc===null?pc=[t]:pc.push(t)}function OO(t,e,n,r){var a=e.interleaved;return a===null?(n.next=n,SC(e)):(n.next=a.next,a.next=n),e.interleaved=n,Ys(t,r)}function Ys(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var eu=!1;function CC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,en&2){var a=r.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),r.pending=e,Ys(t,n)}return a=r.interleaved,a===null?(e.next=e,SC(r)):(e.next=a.next,a.next=e),r.interleaved=e,Ys(t,n)}function iy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,LS(t,n)}}function PO(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function oy(t,e,n,r){var a=t.updateQueue;eu=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;o=0,c=u=l=null,s=i;do{var p=s.lane,f=s.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=t,y=s;switch(p=e,f=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(f,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,p=typeof g=="function"?g.call(f,d,p):g,p==null)break e;d=tr({},d,p);break e;case 2:eu=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,p=a.effects,p===null?a.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=p;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;p=s,s=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(c===null&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);mc|=o,t.lanes=o,t.memoizedState=d}}function FO(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Ie(191,a));a.call(r)}}}var AO=new ZR.Component().refs;function EC(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sy={isMounted:function(t){return(t=t._reactInternals)?sc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ai(),a=iu(t),i=Zs(r,a);i.payload=e,n!=null&&(i.callback=n),e=tu(t,i,a),e!==null&&(Lo(e,t,a,r),iy(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ai(),a=iu(t),i=Zs(r,a);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=tu(t,i,a),e!==null&&(Lo(e,t,a,r),iy(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ai(),r=iu(t),a=Zs(n,r);a.tag=2,e!=null&&(a.callback=e),e=tu(t,a,r),e!==null&&(Lo(e,t,r,n),iy(e,t,r))}};function DO(t,e,n,r,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!vf(n,r)||!vf(a,i):!0}function LO(t,e,n){var r=!1,a=Zl,i=e.contextType;return typeof i=="object"&&i!==null?i=to(i):(a=mi(e)?uc:Pa.current,r=e.contextTypes,i=(r=r!=null)?Yd(t,a):Zl),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function zO(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sy.enqueueReplaceState(e,e.state,null)}function NC(t,e,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs=AO,CC(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=to(i):(i=mi(e)?uc:Pa.current,a.context=Yd(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(EC(t,e,i,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&sy.enqueueReplaceState(a,a.state,null),oy(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Nf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ie(309));var r=n.stateNode}if(!r)throw Error(Ie(147,t));var a=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var s=a.refs;s===AO&&(s=a.refs={}),o===null?delete s[i]:s[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ie(284));if(!n._owner)throw Error(Ie(290,t))}return t}function ly(t,e){throw t=Object.prototype.toString.call(e),Error(Ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function BO(t){var e=t._init;return e(t._payload)}function jO(t){function e(b,x){if(t){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function a(b,x){return b=su(b,x),b.index=0,b.sibling=null,b}function i(b,x,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function s(b,x,w,S){return x===null||x.tag!==6?(x=l3(w,b.mode,S),x.return=b,x):(x=a(x,w),x.return=b,x)}function l(b,x,w,S){var C=w.type;return C===Ld?c(b,x,w.props.children,S,w.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ul&&BO(C)===x.type)?(S=a(x,w.props),S.ref=Nf(b,x,w),S.return=b,S):(S=Ty(w.type,w.key,w.props,null,b.mode,S),S.ref=Nf(b,x,w),S.return=b,S)}function u(b,x,w,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=u3(w,b.mode,S),x.return=b,x):(x=a(x,w.children||[]),x.return=b,x)}function c(b,x,w,S,C){return x===null||x.tag!==7?(x=vc(w,b.mode,S,C),x.return=b,x):(x=a(x,w),x.return=b,x)}function d(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=l3(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case C1:return w=Ty(x.type,x.key,x.props,null,b.mode,w),w.ref=Nf(b,null,x),w.return=b,w;case Dd:return x=u3(x,b.mode,w),x.return=b,x;case Ul:var S=x._init;return d(b,S(x._payload),w)}if(ef(x)||Zh(x))return x=vc(x,b.mode,w,null),x.return=b,x;ly(b,x)}return null}function p(b,x,w,S){var C=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:s(b,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case C1:return w.key===C?l(b,x,w,S):null;case Dd:return w.key===C?u(b,x,w,S):null;case Ul:return C=w._init,p(b,x,C(w._payload),S)}if(ef(w)||Zh(w))return C!==null?null:c(b,x,w,S,null);ly(b,w)}return null}function f(b,x,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(w)||null,s(x,b,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case C1:return b=b.get(S.key===null?w:S.key)||null,l(x,b,S,C);case Dd:return b=b.get(S.key===null?w:S.key)||null,u(x,b,S,C);case Ul:var E=S._init;return f(b,x,w,E(S._payload),C)}if(ef(S)||Zh(S))return b=b.get(w)||null,c(x,b,S,C,null);ly(x,S)}return null}function g(b,x,w,S){for(var C=null,E=null,R=x,T=x=0,$=null;R!==null&&T<w.length;T++){R.index>T?($=R,R=null):$=R.sibling;var P=p(b,R,w[T],S);if(P===null){R===null&&(R=$);break}t&&R&&P.alternate===null&&e(b,R),x=i(P,x,T),E===null?C=P:E.sibling=P,E=P,R=$}if(T===w.length)return n(b,R),qn&&dc(b,T),C;if(R===null){for(;T<w.length;T++)R=d(b,w[T],S),R!==null&&(x=i(R,x,T),E===null?C=R:E.sibling=R,E=R);return qn&&dc(b,T),C}for(R=r(b,R);T<w.length;T++)$=f(R,b,T,w[T],S),$!==null&&(t&&$.alternate!==null&&R.delete($.key===null?T:$.key),x=i($,x,T),E===null?C=$:E.sibling=$,E=$);return t&&R.forEach(function(D){return e(b,D)}),qn&&dc(b,T),C}function y(b,x,w,S){var C=Zh(w);if(typeof C!="function")throw Error(Ie(150));if(w=C.call(w),w==null)throw Error(Ie(151));for(var E=C=null,R=x,T=x=0,$=null,P=w.next();R!==null&&!P.done;T++,P=w.next()){R.index>T?($=R,R=null):$=R.sibling;var D=p(b,R,P.value,S);if(D===null){R===null&&(R=$);break}t&&R&&D.alternate===null&&e(b,R),x=i(D,x,T),E===null?C=D:E.sibling=D,E=D,R=$}if(P.done)return n(b,R),qn&&dc(b,T),C;if(R===null){for(;!P.done;T++,P=w.next())P=d(b,P.value,S),P!==null&&(x=i(P,x,T),E===null?C=P:E.sibling=P,E=P);return qn&&dc(b,T),C}for(R=r(b,R);!P.done;T++,P=w.next())P=f(R,b,T,P.value,S),P!==null&&(t&&P.alternate!==null&&R.delete(P.key===null?T:P.key),x=i(P,x,T),E===null?C=P:E.sibling=P,E=P);return t&&R.forEach(function(B){return e(b,B)}),qn&&dc(b,T),C}function v(b,x,w,S){if(typeof w=="object"&&w!==null&&w.type===Ld&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case C1:e:{for(var C=w.key,E=x;E!==null;){if(E.key===C){if(C=w.type,C===Ld){if(E.tag===7){n(b,E.sibling),x=a(E,w.props.children),x.return=b,b=x;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ul&&BO(C)===E.type){n(b,E.sibling),x=a(E,w.props),x.ref=Nf(b,E,w),x.return=b,b=x;break e}n(b,E);break}else e(b,E);E=E.sibling}w.type===Ld?(x=vc(w.props.children,b.mode,S,w.key),x.return=b,b=x):(S=Ty(w.type,w.key,w.props,null,b.mode,S),S.ref=Nf(b,x,w),S.return=b,b=S)}return o(b);case Dd:e:{for(E=w.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(b,x.sibling),x=a(x,w.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=u3(w,b.mode,S),x.return=b,b=x}return o(b);case Ul:return E=w._init,v(b,x,E(w._payload),S)}if(ef(w))return g(b,x,w,S);if(Zh(w))return y(b,x,w,S);ly(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(b,x.sibling),x=a(x,w),x.return=b,b=x):(n(b,x),x=l3(w,b.mode,S),x.return=b,b=x),o(b)):n(b,x)}return v}var rp=jO(!0),UO=jO(!1),Tf={},hs=Yl(Tf),If=Yl(Tf),_f=Yl(Tf);function hc(t){if(t===Tf)throw Error(Ie(174));return t}function TC(t,e){switch(Pn(_f,e),Pn(If,t),Pn(hs,Tf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:NS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=NS(e,t)}jn(hs),Pn(hs,e)}function ap(){jn(hs),jn(If),jn(_f)}function VO(t){hc(_f.current);var e=hc(hs.current),n=NS(e,t.type);e!==n&&(Pn(If,t),Pn(hs,n))}function IC(t){If.current===t&&(jn(hs),jn(If))}var nr=Yl(0);function uy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _C=[];function RC(){for(var t=0;t<_C.length;t++)_C[t]._workInProgressVersionPrimary=null;_C.length=0}var cy=Hs.ReactCurrentDispatcher,$C=Hs.ReactCurrentBatchConfig,fc=0,rr=null,Lr=null,Jr=null,dy=!1,Rf=!1,$f=0,XG=0;function Fa(){throw Error(Ie(321))}function OC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mo(t[n],e[n]))return!1;return!0}function MC(t,e,n,r,a,i){if(fc=i,rr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cy.current=t===null||t.memoizedState===null?JG:eH,t=n(r,a),Rf){i=0;do{if(Rf=!1,$f=0,25<=i)throw Error(Ie(301));i+=1,Jr=Lr=null,e.updateQueue=null,cy.current=tH,t=n(r,a)}while(Rf)}if(cy.current=fy,e=Lr!==null&&Lr.next!==null,fc=0,Jr=Lr=rr=null,dy=!1,e)throw Error(Ie(300));return t}function PC(){var t=$f!==0;return $f=0,t}function fs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jr===null?rr.memoizedState=Jr=t:Jr=Jr.next=t,Jr}function no(){if(Lr===null){var t=rr.alternate;t=t!==null?t.memoizedState:null}else t=Lr.next;var e=Jr===null?rr.memoizedState:Jr.next;if(e!==null)Jr=e,Lr=t;else{if(t===null)throw Error(Ie(310));Lr=t,t={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},Jr===null?rr.memoizedState=Jr=t:Jr=Jr.next=t}return Jr}function Of(t,e){return typeof e=="function"?e(t):e}function FC(t){var e=no(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=Lr,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var s=o=null,l=null,u=i;do{var c=u.lane;if((fc&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=r):l=l.next=d,rr.lanes|=c,mc|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=s,Mo(r,e.memoizedState)||(gi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do i=a.lane,rr.lanes|=i,mc|=i,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function AC(t){var e=no(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);Mo(i,e.memoizedState)||(gi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function WO(){}function GO(t,e){var n=rr,r=no(),a=e(),i=!Mo(r.memoizedState,a);if(i&&(r.memoizedState=a,gi=!0),r=r.queue,DC(KO.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Jr!==null&&Jr.memoizedState.tag&1){if(n.flags|=2048,Mf(9,qO.bind(null,n,r,a,e),void 0,null),ea===null)throw Error(Ie(349));fc&30||HO(n,e,a)}return a}function HO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rr.updateQueue,e===null?(e={lastEffect:null,stores:null},rr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function qO(t,e,n,r){e.value=n,e.getSnapshot=r,XO(e)&&QO(t)}function KO(t,e,n){return n(function(){XO(e)&&QO(t)})}function XO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mo(t,n)}catch{return!0}}function QO(t){var e=Ys(t,1);e!==null&&Lo(e,t,1,-1)}function YO(t){var e=fs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Of,lastRenderedState:t},e.queue=t,t=t.dispatch=ZG.bind(null,rr,t),[e.memoizedState,t]}function Mf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rr.updateQueue,e===null?(e={lastEffect:null,stores:null},rr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ZO(){return no().memoizedState}function py(t,e,n,r){var a=fs();rr.flags|=t,a.memoizedState=Mf(1|e,n,void 0,r===void 0?null:r)}function hy(t,e,n,r){var a=no();r=r===void 0?null:r;var i=void 0;if(Lr!==null){var o=Lr.memoizedState;if(i=o.destroy,r!==null&&OC(r,o.deps)){a.memoizedState=Mf(e,n,i,r);return}}rr.flags|=t,a.memoizedState=Mf(1|e,n,i,r)}function JO(t,e){return py(8390656,8,t,e)}function DC(t,e){return hy(2048,8,t,e)}function e6(t,e){return hy(4,2,t,e)}function t6(t,e){return hy(4,4,t,e)}function n6(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function r6(t,e,n){return n=n!=null?n.concat([t]):null,hy(4,4,n6.bind(null,e,t),n)}function LC(){}function a6(t,e){var n=no();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&OC(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function i6(t,e){var n=no();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&OC(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function o6(t,e,n){return fc&21?(Mo(n,e)||(n=O$(),rr.lanes|=n,mc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gi=!0),t.memoizedState=n)}function QG(t,e){var n=xn;xn=n!==0&&4>n?n:4,t(!0);var r=$C.transition;$C.transition={};try{t(!1),e()}finally{xn=n,$C.transition=r}}function s6(){return no().memoizedState}function YG(t,e,n){var r=iu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},l6(t))u6(e,n);else if(n=OO(t,e,n,r),n!==null){var a=ai();Lo(n,t,r,a),c6(n,e,r)}}function ZG(t,e,n){var r=iu(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(l6(t))u6(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,Mo(s,o)){var l=e.interleaved;l===null?(a.next=a,SC(e)):(a.next=l.next,l.next=a),e.interleaved=a;return}}catch{}finally{}n=OO(t,e,a,r),n!==null&&(a=ai(),Lo(n,t,r,a),c6(n,e,r))}}function l6(t){var e=t.alternate;return t===rr||e!==null&&e===rr}function u6(t,e){Rf=dy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function c6(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,LS(t,n)}}var fy={readContext:to,useCallback:Fa,useContext:Fa,useEffect:Fa,useImperativeHandle:Fa,useInsertionEffect:Fa,useLayoutEffect:Fa,useMemo:Fa,useReducer:Fa,useRef:Fa,useState:Fa,useDebugValue:Fa,useDeferredValue:Fa,useTransition:Fa,useMutableSource:Fa,useSyncExternalStore:Fa,useId:Fa,unstable_isNewReconciler:!1},JG={readContext:to,useCallback:function(t,e){return fs().memoizedState=[t,e===void 0?null:e],t},useContext:to,useEffect:JO,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,py(4194308,4,n6.bind(null,e,t),n)},useLayoutEffect:function(t,e){return py(4194308,4,t,e)},useInsertionEffect:function(t,e){return py(4,2,t,e)},useMemo:function(t,e){var n=fs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YG.bind(null,rr,t),[r.memoizedState,t]},useRef:function(t){var e=fs();return t={current:t},e.memoizedState=t},useState:YO,useDebugValue:LC,useDeferredValue:function(t){return fs().memoizedState=t},useTransition:function(){var t=YO(!1),e=t[0];return t=QG.bind(null,t[1]),fs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rr,a=fs();if(qn){if(n===void 0)throw Error(Ie(407));n=n()}else{if(n=e(),ea===null)throw Error(Ie(349));fc&30||HO(r,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,JO(KO.bind(null,r,i,t),[t]),r.flags|=2048,Mf(9,qO.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=fs(),e=ea.identifierPrefix;if(qn){var n=Qs,r=Xs;n=(r&~(1<<32-Oo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$f++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=XG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eH={readContext:to,useCallback:a6,useContext:to,useEffect:DC,useImperativeHandle:r6,useInsertionEffect:e6,useLayoutEffect:t6,useMemo:i6,useReducer:FC,useRef:ZO,useState:function(){return FC(Of)},useDebugValue:LC,useDeferredValue:function(t){var e=no();return o6(e,Lr.memoizedState,t)},useTransition:function(){var t=FC(Of)[0],e=no().memoizedState;return[t,e]},useMutableSource:WO,useSyncExternalStore:GO,useId:s6,unstable_isNewReconciler:!1},tH={readContext:to,useCallback:a6,useContext:to,useEffect:DC,useImperativeHandle:r6,useInsertionEffect:e6,useLayoutEffect:t6,useMemo:i6,useReducer:AC,useRef:ZO,useState:function(){return AC(Of)},useDebugValue:LC,useDeferredValue:function(t){var e=no();return Lr===null?e.memoizedState=t:o6(e,Lr.memoizedState,t)},useTransition:function(){var t=AC(Of)[0],e=no().memoizedState;return[t,e]},useMutableSource:WO,useSyncExternalStore:GO,useId:s6,unstable_isNewReconciler:!1};function ip(t,e){try{var n="",r=e;do n+=_W(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function zC(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function BC(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nH=typeof WeakMap=="function"?WeakMap:Map;function d6(t,e,n){n=Zs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wy||(wy=!0,e3=r),BC(t,e)},n}function p6(t,e,n){n=Zs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=e.value;n.payload=function(){return r(a)},n.callback=function(){BC(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){BC(t,e),typeof r!="function"&&(ru===null?ru=new Set([this]):ru.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function h6(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nH;var a=new Set;r.set(e,a)}else a=r.get(e),a===void 0&&(a=new Set,r.set(e,a));a.has(n)||(a.add(n),t=gH.bind(null,t,e,n),e.then(t,t))}function f6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function m6(t,e,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zs(-1,1),e.tag=2,tu(n,e,1))),n.lanes|=1),t)}var rH=Hs.ReactCurrentOwner,gi=!1;function ri(t,e,n,r){e.child=t===null?UO(e,null,n,r):rp(e,t.child,n,r)}function g6(t,e,n,r,a){n=n.render;var i=e.ref;return np(e,a),r=MC(t,e,n,r,i,a),n=PC(),t!==null&&!gi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Js(t,e,a)):(qn&&n&&fC(e),e.flags|=1,ri(t,e,r,a),e.child)}function y6(t,e,n,r,a){if(t===null){var i=n.type;return typeof i=="function"&&!s3(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,b6(t,e,i,r,a)):(t=Ty(n.type,null,r,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:vf,n(o,r)&&t.ref===e.ref)return Js(t,e,a)}return e.flags|=1,t=su(i,r),t.ref=e.ref,t.return=e,e.child=t}function b6(t,e,n,r,a){if(t!==null){var i=t.memoizedProps;if(vf(i,r)&&t.ref===e.ref)if(gi=!1,e.pendingProps=r=i,(t.lanes&a)!==0)t.flags&131072&&(gi=!0);else return e.lanes=t.lanes,Js(t,e,a)}return jC(t,e,n,r,a)}function v6(t,e,n){var r=e.pendingProps,a=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pn(sp,Fi),Fi|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pn(sp,Fi),Fi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Pn(sp,Fi),Fi|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Pn(sp,Fi),Fi|=r;return ri(t,e,a,n),e.child}function x6(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jC(t,e,n,r,a){var i=mi(n)?uc:Pa.current;return i=Yd(e,i),np(e,a),n=MC(t,e,n,r,i,a),r=PC(),t!==null&&!gi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Js(t,e,a)):(qn&&r&&fC(e),e.flags|=1,ri(t,e,n,a),e.child)}function w6(t,e,n,r,a){if(mi(n)){var i=!0;Z1(e)}else i=!1;if(np(e,a),e.stateNode===null)gy(t,e),LO(e,n,r),NC(e,n,r,a),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=to(u):(u=mi(n)?uc:Pa.current,u=Yd(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&zO(e,o,r,u),eu=!1;var p=e.memoizedState;o.state=p,oy(e,r,o,a),l=e.memoizedState,s!==r||p!==l||fi.current||eu?(typeof c=="function"&&(EC(e,n,c,r),l=e.memoizedState),(s=eu||DO(e,n,s,r,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,MO(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:Fo(e.type,s),o.props=u,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=to(l):(l=mi(n)?uc:Pa.current,l=Yd(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||p!==l)&&zO(e,o,r,l),eu=!1,p=e.memoizedState,o.state=p,oy(e,r,o,a);var g=e.memoizedState;s!==d||p!==g||fi.current||eu?(typeof f=="function"&&(EC(e,n,f,r),g=e.memoizedState),(u=eu||DO(e,n,u,r,p,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return UC(t,e,n,r,i,a)}function UC(t,e,n,r,a,i){x6(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return a&&EO(e,n,!1),Js(t,e,i);r=e.stateNode,rH.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=rp(e,t.child,null,i),e.child=rp(e,null,s,i)):ri(t,e,s,i),e.memoizedState=r.state,a&&EO(e,n,!0),e.child}function k6(t){var e=t.stateNode;e.pendingContext?SO(t,e.pendingContext,e.pendingContext!==e.context):e.context&&SO(t,e.context,!1),TC(t,e.containerInfo)}function S6(t,e,n,r,a){return ep(),bC(a),e.flags|=256,ri(t,e,n,r),e.child}var VC={dehydrated:null,treeContext:null,retryLane:0};function WC(t){return{baseLanes:t,cachePool:null,transitions:null}}function C6(t,e,n){var r=e.pendingProps,a=nr.current,i=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(a&2)!==0),s?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Pn(nr,a&1),t===null)return yC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Iy(o,r,0,null),t=vc(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=WC(n),e.memoizedState=VC,t):GC(e,o));if(a=t.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return aH(t,e,o,r,s,a,n);if(i){i=r.fallback,o=e.mode,a=t.child,s=a.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==a?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=su(a,l),r.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=su(s,i):(i=vc(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?WC(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=VC,r}return i=t.child,t=i.sibling,r=su(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function GC(t,e){return e=Iy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function my(t,e,n,r){return r!==null&&bC(r),rp(e,t.child,null,n),t=GC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function aH(t,e,n,r,a,i,o){if(n)return e.flags&256?(e.flags&=-257,r=zC(Error(Ie(422))),my(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,a=e.mode,r=Iy({mode:"visible",children:r.children},a,0,null),i=vc(i,a,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&rp(e,t.child,null,o),e.child.memoizedState=WC(o),e.memoizedState=VC,i);if(!(e.mode&1))return my(t,e,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(Ie(419)),r=zC(i,r,void 0),my(t,e,o,r)}if(s=(o&t.childLanes)!==0,gi||s){if(r=ea,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ys(t,a),Lo(r,t,a,-1))}return o3(),r=zC(Error(Ie(421))),my(t,e,o,r)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=yH.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Pi=Ql(a.nextSibling),Mi=e,qn=!0,Po=null,t!==null&&(Ji[eo++]=Xs,Ji[eo++]=Qs,Ji[eo++]=cc,Xs=t.id,Qs=t.overflow,cc=e),e=GC(e,r.children),e.flags|=4096,e)}function E6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),kC(t.return,e,n)}function HC(t,e,n,r,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function N6(t,e,n){var r=e.pendingProps,a=r.revealOrder,i=r.tail;if(ri(t,e,r.children,n),r=nr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&E6(t,n,e);else if(t.tag===19)E6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pn(nr,r),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&uy(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),HC(e,!1,a,n,i);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&uy(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}HC(e,!0,n,null,i);break;case"together":HC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Js(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),mc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ie(153));if(e.child!==null){for(t=e.child,n=su(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=su(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iH(t,e,n){switch(e.tag){case 3:k6(e),ep();break;case 5:VO(e);break;case 1:mi(e.type)&&Z1(e);break;case 4:TC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,a=e.memoizedProps.value;Pn(ry,r._currentValue),r._currentValue=a;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pn(nr,nr.current&1),e.flags|=128,null):n&e.child.childLanes?C6(t,e,n):(Pn(nr,nr.current&1),t=Js(t,e,n),t!==null?t.sibling:null);Pn(nr,nr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return N6(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Pn(nr,nr.current),r)break;return null;case 22:case 23:return e.lanes=0,v6(t,e,n)}return Js(t,e,n)}var T6,qC,I6,_6;T6=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qC=function(){},I6=function(t,e,n,r){var a=t.memoizedProps;if(a!==r){t=e.stateNode,hc(hs.current);var i=null;switch(n){case"input":a=kS(t,a),r=kS(t,r),i=[];break;case"select":a=tr({},a,{value:void 0}),r=tr({},r,{value:void 0}),i=[];break;case"textarea":a=ES(t,a),r=ES(t,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=X1)}TS(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(s=a?.[u],r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Bn("scroll",t),i||s===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}},_6=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pf(t,e){if(!qn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Aa(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function oH(t,e,n){var r=e.pendingProps;switch(mC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Aa(e),null;case 1:return mi(e.type)&&Y1(),Aa(e),null;case 3:return r=e.stateNode,ap(),jn(fi),jn(Pa),RC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ny(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Po!==null&&(r3(Po),Po=null))),qC(t,e),Aa(e),null;case 5:IC(e);var a=hc(_f.current);if(n=e.type,t!==null&&e.stateNode!=null)I6(t,e,n,r,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ie(166));return Aa(e),null}if(t=hc(hs.current),ny(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ps]=e,r[Cf]=i,t=(e.mode&1)!==0,n){case"dialog":Bn("cancel",r),Bn("close",r);break;case"iframe":case"object":case"embed":Bn("load",r);break;case"video":case"audio":for(a=0;a<wf.length;a++)Bn(wf[a],r);break;case"source":Bn("error",r);break;case"img":case"image":case"link":Bn("error",r),Bn("load",r);break;case"details":Bn("toggle",r);break;case"input":l$(r,i),Bn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Bn("invalid",r);break;case"textarea":d$(r,i),Bn("invalid",r)}TS(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&K1(r.textContent,s,t),a=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&K1(r.textContent,s,t),a=["children",""+s]):Yh.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Bn("scroll",r)}switch(n){case"input":E1(r),c$(r,i,!0);break;case"textarea":E1(r),h$(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=X1)}r=a,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=f$(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ps]=e,t[Cf]=r,T6(t,e,!1,!1),e.stateNode=t;e:{switch(o=IS(n,r),n){case"dialog":Bn("cancel",t),Bn("close",t),a=r;break;case"iframe":case"object":case"embed":Bn("load",t),a=r;break;case"video":case"audio":for(a=0;a<wf.length;a++)Bn(wf[a],t);a=r;break;case"source":Bn("error",t),a=r;break;case"img":case"image":case"link":Bn("error",t),Bn("load",t),a=r;break;case"details":Bn("toggle",t),a=r;break;case"input":l$(t,r),a=kS(t,r),Bn("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=tr({},r,{value:void 0}),Bn("invalid",t);break;case"textarea":d$(t,r),a=ES(t,r),Bn("invalid",t);break;default:a=r}TS(n,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?y$(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&m$(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&tf(t,l):typeof l=="number"&&tf(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yh.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Bn("scroll",t):l!=null&&dS(t,i,l,o))}switch(n){case"input":E1(t),c$(t,r,!1);break;case"textarea":E1(t),h$(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vl(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?zd(t,!!r.multiple,i,!1):r.defaultValue!=null&&zd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=X1)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Aa(e),null;case 6:if(t&&e.stateNode!=null)_6(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ie(166));if(n=hc(_f.current),hc(hs.current),ny(e)){if(r=e.stateNode,n=e.memoizedProps,r[ps]=e,(i=r.nodeValue!==n)&&(t=Mi,t!==null))switch(t.tag){case 3:K1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&K1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ps]=e,e.stateNode=r}return Aa(e),null;case 13:if(jn(nr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qn&&Pi!==null&&e.mode&1&&!(e.flags&128))$O(),ep(),e.flags|=98560,i=!1;else if(i=ny(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ie(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ie(317));i[ps]=e}else ep(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Aa(e),i=!1}else Po!==null&&(r3(Po),Po=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nr.current&1?zr===0&&(zr=3):o3())),e.updateQueue!==null&&(e.flags|=4),Aa(e),null);case 4:return ap(),qC(t,e),t===null&&kf(e.stateNode.containerInfo),Aa(e),null;case 10:return wC(e.type._context),Aa(e),null;case 17:return mi(e.type)&&Y1(),Aa(e),null;case 19:if(jn(nr),i=e.memoizedState,i===null)return Aa(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Pf(i,!1);else{if(zr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=uy(t),o!==null){for(e.flags|=128,Pf(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pn(nr,nr.current&1|2),e.child}t=t.sibling}i.tail!==null&&xr()>lp&&(e.flags|=128,r=!0,Pf(i,!1),e.lanes=4194304)}else{if(!r)if(t=uy(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qn)return Aa(e),null}else 2*xr()-i.renderingStartTime>lp&&n!==1073741824&&(e.flags|=128,r=!0,Pf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=xr(),e.sibling=null,n=nr.current,Pn(nr,r?n&1|2:n&1),e):(Aa(e),null);case 22:case 23:return i3(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Fi&1073741824&&(Aa(e),e.subtreeFlags&6&&(e.flags|=8192)):Aa(e),null;case 24:return null;case 25:return null}throw Error(Ie(156,e.tag))}function sH(t,e){switch(mC(e),e.tag){case 1:return mi(e.type)&&Y1(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ap(),jn(fi),jn(Pa),RC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return IC(e),null;case 13:if(jn(nr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ie(340));ep()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return jn(nr),null;case 4:return ap(),null;case 10:return wC(e.type._context),null;case 22:case 23:return i3(),null;case 24:return null;default:return null}}var yy=!1,Da=!1,lH=typeof WeakSet=="function"?WeakSet:Set,He=null;function op(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){cr(t,e,r)}else n.current=null}function R6(t,e,n){try{n()}catch(r){cr(t,e,r)}}var $6=!1;function uH(t,e){if(oC=D1,t=sO(),ZS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,c=0,d=t,p=null;t:for(;;){for(var f;d!==n||a!==0&&d.nodeType!==3||(s=o+a),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)p=d,d=f;for(;;){if(d===t)break t;if(p===n&&++u===a&&(s=o),p===i&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=f}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sC={focusedElem:t,selectionRange:n},D1=!1,He=e;He!==null;)if(e=He,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,He=t;else for(;He!==null;){e=He;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:Fo(e.type,y),v);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(S){cr(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,He=t;break}He=e.return}return g=$6,$6=!1,g}function Ff(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&R6(e,n,i)}a=a.next}while(a!==r)}}function by(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function KC(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function O6(t){var e=t.alternate;e!==null&&(t.alternate=null,O6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ps],delete e[Cf],delete e[dC],delete e[GG],delete e[HG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function M6(t){return t.tag===5||t.tag===3||t.tag===4}function P6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||M6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function XC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=X1));else if(r!==4&&(t=t.child,t!==null))for(XC(t,e,n),t=t.sibling;t!==null;)XC(t,e,n),t=t.sibling}function QC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(QC(t,e,n),t=t.sibling;t!==null;)QC(t,e,n),t=t.sibling}var ga=null,Ao=!1;function nu(t,e,n){for(n=n.child;n!==null;)F6(t,e,n),n=n.sibling}function F6(t,e,n){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount($1,n)}catch{}switch(n.tag){case 5:Da||op(n,e);case 6:var r=ga,a=Ao;ga=null,nu(t,e,n),ga=r,Ao=a,ga!==null&&(Ao?(t=ga,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ga.removeChild(n.stateNode));break;case 18:ga!==null&&(Ao?(t=ga,n=n.stateNode,t.nodeType===8?cC(t.parentNode,n):t.nodeType===1&&cC(t,n),hf(t)):cC(ga,n.stateNode));break;case 4:r=ga,a=Ao,ga=n.stateNode.containerInfo,Ao=!0,nu(t,e,n),ga=r,Ao=a;break;case 0:case 11:case 14:case 15:if(!Da&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&R6(n,e,o),a=a.next}while(a!==r)}nu(t,e,n);break;case 1:if(!Da&&(op(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){cr(n,e,s)}nu(t,e,n);break;case 21:nu(t,e,n);break;case 22:n.mode&1?(Da=(r=Da)||n.memoizedState!==null,nu(t,e,n),Da=r):nu(t,e,n);break;default:nu(t,e,n)}}function A6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lH),e.forEach(function(r){var a=bH.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Do(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:ga=s.stateNode,Ao=!1;break e;case 3:ga=s.stateNode.containerInfo,Ao=!0;break e;case 4:ga=s.stateNode.containerInfo,Ao=!0;break e}s=s.return}if(ga===null)throw Error(Ie(160));F6(i,o,a),ga=null,Ao=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){cr(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)D6(e,t),e=e.sibling}function D6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Do(e,t),ms(t),r&4){try{Ff(3,t,t.return),by(3,t)}catch(y){cr(t,t.return,y)}try{Ff(5,t,t.return)}catch(y){cr(t,t.return,y)}}break;case 1:Do(e,t),ms(t),r&512&&n!==null&&op(n,n.return);break;case 5:if(Do(e,t),ms(t),r&512&&n!==null&&op(n,n.return),t.flags&32){var a=t.stateNode;try{tf(a,"")}catch(y){cr(t,t.return,y)}}if(r&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&u$(a,i),IS(s,o);var u=IS(s,i);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?y$(a,d):c==="dangerouslySetInnerHTML"?m$(a,d):c==="children"?tf(a,d):dS(a,c,d,u)}switch(s){case"input":SS(a,i);break;case"textarea":p$(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?zd(a,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?zd(a,!!i.multiple,i.defaultValue,!0):zd(a,!!i.multiple,i.multiple?[]:"",!1))}a[Cf]=i}catch(y){cr(t,t.return,y)}}break;case 6:if(Do(e,t),ms(t),r&4){if(t.stateNode===null)throw Error(Ie(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(y){cr(t,t.return,y)}}break;case 3:if(Do(e,t),ms(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hf(e.containerInfo)}catch(y){cr(t,t.return,y)}break;case 4:Do(e,t),ms(t);break;case 13:Do(e,t),ms(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(JC=xr())),r&4&&A6(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Da=(u=Da)||c,Do(e,t),Da=u):Do(e,t),ms(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(He=t,c=t.child;c!==null;){for(d=He=c;He!==null;){switch(p=He,f=p.child,p.tag){case 0:case 11:case 14:case 15:Ff(4,p,p.return);break;case 1:op(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){cr(r,n,y)}}break;case 5:op(p,p.return);break;case 22:if(p.memoizedState!==null){B6(d);continue}}f!==null?(f.return=p,He=f):B6(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=g$("display",o))}catch(y){cr(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){cr(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Do(e,t),ms(t),r&4&&A6(t);break;case 21:break;default:Do(e,t),ms(t)}}function ms(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(M6(n)){var r=n;break e}n=n.return}throw Error(Ie(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(tf(a,""),r.flags&=-33);var i=P6(t);QC(t,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,s=P6(t);XC(t,s,o);break;default:throw Error(Ie(161))}}catch(l){cr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cH(t,e,n){He=t,L6(t)}function L6(t,e,n){for(var r=(t.mode&1)!==0;He!==null;){var a=He,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||yy;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||Da;s=yy;var u=Da;if(yy=o,(Da=l)&&!u)for(He=a;He!==null;)o=He,l=o.child,o.tag===22&&o.memoizedState!==null?j6(a):l!==null?(l.return=o,He=l):j6(a);for(;i!==null;)He=i,L6(i),i=i.sibling;He=a,yy=s,Da=u}z6(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,He=i):z6(t)}}function z6(t){for(;He!==null;){var e=He;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Da||by(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Da)if(n===null)r.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:Fo(e.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&FO(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}FO(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&hf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}Da||e.flags&512&&KC(e)}catch(p){cr(e,e.return,p)}}if(e===t){He=null;break}if(n=e.sibling,n!==null){n.return=e.return,He=n;break}He=e.return}}function B6(t){for(;He!==null;){var e=He;if(e===t){He=null;break}var n=e.sibling;if(n!==null){n.return=e.return,He=n;break}He=e.return}}function j6(t){for(;He!==null;){var e=He;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{by(4,e)}catch(l){cr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var a=e.return;try{r.componentDidMount()}catch(l){cr(e,a,l)}}var i=e.return;try{KC(e)}catch(l){cr(e,i,l)}break;case 5:var o=e.return;try{KC(e)}catch(l){cr(e,o,l)}}}catch(l){cr(e,e.return,l)}if(e===t){He=null;break}var s=e.sibling;if(s!==null){s.return=e.return,He=s;break}He=e.return}}var dH=Math.ceil,vy=Hs.ReactCurrentDispatcher,YC=Hs.ReactCurrentOwner,ro=Hs.ReactCurrentBatchConfig,en=0,ea=null,Rr=null,ya=0,Fi=0,sp=Yl(0),zr=0,Af=null,mc=0,xy=0,ZC=0,Df=null,yi=null,JC=0,lp=1/0,el=null,wy=!1,e3=null,ru=null,ky=!1,au=null,Sy=0,Lf=0,t3=null,Cy=-1,Ey=0;function ai(){return en&6?xr():Cy!==-1?Cy:Cy=xr()}function iu(t){return t.mode&1?en&2&&ya!==0?ya&-ya:KG.transition!==null?(Ey===0&&(Ey=O$()),Ey):(t=xn,t!==0||(t=window.event,t=t===void 0?16:j$(t.type)),t):1}function Lo(t,e,n,r){if(50<Lf)throw Lf=0,t3=null,Error(Ie(185));lf(t,n,r),(!(en&2)||t!==ea)&&(t===ea&&(!(en&2)&&(xy|=n),zr===4&&ou(t,ya)),bi(t,r),n===1&&en===0&&!(e.mode&1)&&(lp=xr()+500,J1&&Jl()))}function bi(t,e){var n=t.callbackNode;KW(t,e);var r=P1(t,t===ea?ya:0);if(r===0)n!==null&&_$(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_$(n),e===1)t.tag===0?qG(V6.bind(null,t)):NO(V6.bind(null,t)),VG(function(){!(en&6)&&Jl()}),n=null;else{switch(M$(r)){case 1:n=FS;break;case 4:n=R$;break;case 16:n=R1;break;case 536870912:n=$$;break;default:n=R1}n=Y6(n,U6.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function U6(t,e){if(Cy=-1,Ey=0,en&6)throw Error(Ie(327));var n=t.callbackNode;if(up()&&t.callbackNode!==n)return null;var r=P1(t,t===ea?ya:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ny(t,r);else{e=r;var a=en;en|=2;var i=G6();(ea!==t||ya!==e)&&(el=null,lp=xr()+500,yc(t,e));do try{fH();break}catch(s){W6(t,s)}while(!0);xC(),vy.current=i,en=a,Rr!==null?e=0:(ea=null,ya=0,e=zr)}if(e!==0){if(e===2&&(a=AS(t),a!==0&&(r=a,e=n3(t,a))),e===1)throw n=Af,yc(t,0),ou(t,r),bi(t,xr()),n;if(e===6)ou(t,r);else{if(a=t.current.alternate,!(r&30)&&!pH(a)&&(e=Ny(t,r),e===2&&(i=AS(t),i!==0&&(r=i,e=n3(t,i))),e===1))throw n=Af,yc(t,0),ou(t,r),bi(t,xr()),n;switch(t.finishedWork=a,t.finishedLanes=r,e){case 0:case 1:throw Error(Ie(345));case 2:bc(t,yi,el);break;case 3:if(ou(t,r),(r&130023424)===r&&(e=JC+500-xr(),10<e)){if(P1(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){ai(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=uC(bc.bind(null,t,yi,el),e);break}bc(t,yi,el);break;case 4:if(ou(t,r),(r&4194240)===r)break;for(e=t.eventTimes,a=-1;0<r;){var o=31-Oo(r);i=1<<o,o=e[o],o>a&&(a=o),r&=~i}if(r=a,r=xr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dH(r/1960))-r,10<r){t.timeoutHandle=uC(bc.bind(null,t,yi,el),r);break}bc(t,yi,el);break;case 5:bc(t,yi,el);break;default:throw Error(Ie(329))}}}return bi(t,xr()),t.callbackNode===n?U6.bind(null,t):null}function n3(t,e){var n=Df;return t.current.memoizedState.isDehydrated&&(yc(t,e).flags|=256),t=Ny(t,e),t!==2&&(e=yi,yi=n,e!==null&&r3(e)),t}function r3(t){yi===null?yi=t:yi.push.apply(yi,t)}function pH(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Mo(i(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ou(t,e){for(e&=~ZC,e&=~xy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Oo(e),r=1<<n;t[n]=-1,e&=~r}}function V6(t){if(en&6)throw Error(Ie(327));up();var e=P1(t,0);if(!(e&1))return bi(t,xr()),null;var n=Ny(t,e);if(t.tag!==0&&n===2){var r=AS(t);r!==0&&(e=r,n=n3(t,r))}if(n===1)throw n=Af,yc(t,0),ou(t,e),bi(t,xr()),n;if(n===6)throw Error(Ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bc(t,yi,el),bi(t,xr()),null}function a3(t,e){var n=en;en|=1;try{return t(e)}finally{en=n,en===0&&(lp=xr()+500,J1&&Jl())}}function gc(t){au!==null&&au.tag===0&&!(en&6)&&up();var e=en;en|=1;var n=ro.transition,r=xn;try{if(ro.transition=null,xn=1,t)return t()}finally{xn=r,ro.transition=n,en=e,!(en&6)&&Jl()}}function i3(){Fi=sp.current,jn(sp)}function yc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,UG(n)),Rr!==null)for(n=Rr.return;n!==null;){var r=n;switch(mC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Y1();break;case 3:ap(),jn(fi),jn(Pa),RC();break;case 5:IC(r);break;case 4:ap();break;case 13:jn(nr);break;case 19:jn(nr);break;case 10:wC(r.type._context);break;case 22:case 23:i3()}n=n.return}if(ea=t,Rr=t=su(t.current,null),ya=Fi=e,zr=0,Af=null,ZC=xy=mc=0,yi=Df=null,pc!==null){for(e=0;e<pc.length;e++)if(n=pc[e],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}pc=null}return t}function W6(t,e){do{var n=Rr;try{if(xC(),cy.current=fy,dy){for(var r=rr.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}dy=!1}if(fc=0,Jr=Lr=rr=null,Rf=!1,$f=0,YC.current=null,n===null||n.return===null){zr=1,Af=e,Rr=null;break}e:{var i=t,o=n.return,s=n,l=e;if(e=ya,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=f6(o);if(f!==null){f.flags&=-257,m6(f,o,s,i,e),f.mode&1&&h6(i,u,e),e=f,l=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){h6(i,u,e),o3();break e}l=Error(Ie(426))}}else if(qn&&s.mode&1){var v=f6(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),m6(v,o,s,i,e),bC(ip(l,s));break e}}i=l=ip(l,s),zr!==4&&(zr=2),Df===null?Df=[i]:Df.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=d6(i,l,e);PO(i,b);break e;case 1:s=l;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ru===null||!ru.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=p6(i,s,e);PO(i,S);break e}}i=i.return}while(i!==null)}q6(n)}catch(C){e=C,Rr===n&&n!==null&&(Rr=n=n.return);continue}break}while(!0)}function G6(){var t=vy.current;return vy.current=fy,t===null?fy:t}function o3(){(zr===0||zr===3||zr===2)&&(zr=4),ea===null||!(mc&268435455)&&!(xy&268435455)||ou(ea,ya)}function Ny(t,e){var n=en;en|=2;var r=G6();(ea!==t||ya!==e)&&(el=null,yc(t,e));do try{hH();break}catch(a){W6(t,a)}while(!0);if(xC(),en=n,vy.current=r,Rr!==null)throw Error(Ie(261));return ea=null,ya=0,zr}function hH(){for(;Rr!==null;)H6(Rr)}function fH(){for(;Rr!==null&&!zW();)H6(Rr)}function H6(t){var e=Q6(t.alternate,t,Fi);t.memoizedProps=t.pendingProps,e===null?q6(t):Rr=e,YC.current=null}function q6(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sH(n,e),n!==null){n.flags&=32767,Rr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zr=6,Rr=null;return}}else if(n=oH(n,e,Fi),n!==null){Rr=n;return}if(e=e.sibling,e!==null){Rr=e;return}Rr=e=t}while(e!==null);zr===0&&(zr=5)}function bc(t,e,n){var r=xn,a=ro.transition;try{ro.transition=null,xn=1,mH(t,e,n,r)}finally{ro.transition=a,xn=r}return null}function mH(t,e,n,r){do up();while(au!==null);if(en&6)throw Error(Ie(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ie(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(XW(t,i),t===ea&&(Rr=ea=null,ya=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ky||(ky=!0,Y6(R1,function(){return up(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ro.transition,ro.transition=null;var o=xn;xn=1;var s=en;en|=4,YC.current=null,uH(t,n),D6(n,t),FG(sC),D1=!!oC,sC=oC=null,t.current=n,cH(n),BW(),en=s,xn=o,ro.transition=i}else t.current=n;if(ky&&(ky=!1,au=t,Sy=a),i=t.pendingLanes,i===0&&(ru=null),VW(n.stateNode),bi(t,xr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(wy)throw wy=!1,t=e3,e3=null,t;return Sy&1&&t.tag!==0&&up(),i=t.pendingLanes,i&1?t===t3?Lf++:(Lf=0,t3=t):Lf=0,Jl(),null}function up(){if(au!==null){var t=M$(Sy),e=ro.transition,n=xn;try{if(ro.transition=null,xn=16>t?16:t,au===null)var r=!1;else{if(t=au,au=null,Sy=0,en&6)throw Error(Ie(331));var a=en;for(en|=4,He=t.current;He!==null;){var i=He,o=i.child;if(He.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(He=u;He!==null;){var c=He;switch(c.tag){case 0:case 11:case 15:Ff(8,c,i)}var d=c.child;if(d!==null)d.return=c,He=d;else for(;He!==null;){c=He;var p=c.sibling,f=c.return;if(O6(c),c===u){He=null;break}if(p!==null){p.return=f,He=p;break}He=f}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}He=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,He=o;else e:for(;He!==null;){if(i=He,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ff(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,He=b;break e}He=i.return}}var x=t.current;for(He=x;He!==null;){o=He;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,He=w;else e:for(o=x;He!==null;){if(s=He,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:by(9,s)}}catch(C){cr(s,s.return,C)}if(s===o){He=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,He=S;break e}He=s.return}}if(en=a,Jl(),ds&&typeof ds.onPostCommitFiberRoot=="function")try{ds.onPostCommitFiberRoot($1,t)}catch{}r=!0}return r}finally{xn=n,ro.transition=e}}return!1}function K6(t,e,n){e=ip(n,e),e=d6(t,e,1),t=tu(t,e,1),e=ai(),t!==null&&(lf(t,1,e),bi(t,e))}function cr(t,e,n){if(t.tag===3)K6(t,t,n);else for(;e!==null;){if(e.tag===3){K6(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ru===null||!ru.has(r))){t=ip(n,t),t=p6(e,t,1),e=tu(e,t,1),t=ai(),e!==null&&(lf(e,1,t),bi(e,t));break}}e=e.return}}function gH(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ai(),t.pingedLanes|=t.suspendedLanes&n,ea===t&&(ya&n)===n&&(zr===4||zr===3&&(ya&130023424)===ya&&500>xr()-JC?yc(t,0):ZC|=n),bi(t,e)}function X6(t,e){e===0&&(t.mode&1?(e=M1,M1<<=1,!(M1&130023424)&&(M1=4194304)):e=1);var n=ai();t=Ys(t,e),t!==null&&(lf(t,e,n),bi(t,n))}function yH(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),X6(t,n)}function bH(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ie(314))}r!==null&&r.delete(e),X6(t,n)}var Q6;Q6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fi.current)gi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gi=!1,iH(t,e,n);gi=!!(t.flags&131072)}else gi=!1,qn&&e.flags&1048576&&TO(e,ty,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;gy(t,e),t=e.pendingProps;var a=Yd(e,Pa.current);np(e,n),a=MC(null,e,r,t,a,n);var i=PC();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mi(r)?(i=!0,Z1(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,CC(e),a.updater=sy,e.stateNode=a,a._reactInternals=e,NC(e,r,t,n),e=UC(null,e,r,!0,i,n)):(e.tag=0,qn&&i&&fC(e),ri(null,e,a,n),e=e.child),e;case 16:r=e.elementType;e:{switch(gy(t,e),t=e.pendingProps,a=r._init,r=a(r._payload),e.type=r,a=e.tag=xH(r),t=Fo(r,t),a){case 0:e=jC(null,e,r,t,n);break e;case 1:e=w6(null,e,r,t,n);break e;case 11:e=g6(null,e,r,t,n);break e;case 14:e=y6(null,e,r,Fo(r.type,t),n);break e}throw Error(Ie(306,r,""))}return e;case 0:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Fo(r,a),jC(t,e,r,a,n);case 1:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Fo(r,a),w6(t,e,r,a,n);case 3:e:{if(k6(e),t===null)throw Error(Ie(387));r=e.pendingProps,i=e.memoizedState,a=i.element,MO(t,e),oy(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=ip(Error(Ie(423)),e),e=S6(t,e,r,n,a);break e}else if(r!==a){a=ip(Error(Ie(424)),e),e=S6(t,e,r,n,a);break e}else for(Pi=Ql(e.stateNode.containerInfo.firstChild),Mi=e,qn=!0,Po=null,n=UO(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ep(),r===a){e=Js(t,e,n);break e}ri(t,e,r,n)}e=e.child}return e;case 5:return VO(e),t===null&&yC(e),r=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,lC(r,a)?o=null:i!==null&&lC(r,i)&&(e.flags|=32),x6(t,e),ri(t,e,o,n),e.child;case 6:return t===null&&yC(e),null;case 13:return C6(t,e,n);case 4:return TC(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=rp(e,null,r,n):ri(t,e,r,n),e.child;case 11:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Fo(r,a),g6(t,e,r,a,n);case 7:return ri(t,e,e.pendingProps,n),e.child;case 8:return ri(t,e,e.pendingProps.children,n),e.child;case 12:return ri(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,a=e.pendingProps,i=e.memoizedProps,o=a.value,Pn(ry,r._currentValue),r._currentValue=o,i!==null)if(Mo(i.value,o)){if(i.children===a.children&&!fi.current){e=Js(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Zs(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),kC(i.return,n,e),s.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ie(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),kC(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ri(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,r=e.pendingProps.children,np(e,n),a=to(a),r=r(a),e.flags|=1,ri(t,e,r,n),e.child;case 14:return r=e.type,a=Fo(r,e.pendingProps),a=Fo(r.type,a),y6(t,e,r,a,n);case 15:return b6(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Fo(r,a),gy(t,e),e.tag=1,mi(r)?(t=!0,Z1(e)):t=!1,np(e,n),LO(e,r,a),NC(e,r,a,n),UC(null,e,r,!0,t,n);case 19:return N6(t,e,n);case 22:return v6(t,e,n)}throw Error(Ie(156,e.tag))};function Y6(t,e){return I$(t,e)}function vH(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ao(t,e,n,r){return new vH(t,e,n,r)}function s3(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xH(t){if(typeof t=="function")return s3(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fS)return 11;if(t===yS)return 14}return 2}function su(t,e){var n=t.alternate;return n===null?(n=ao(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ty(t,e,n,r,a,i){var o=2;if(r=t,typeof t=="function")s3(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ld:return vc(n.children,a,i,e);case pS:o=8,a|=8;break;case hS:return t=ao(12,n,e,a|2),t.elementType=hS,t.lanes=i,t;case mS:return t=ao(13,n,e,a),t.elementType=mS,t.lanes=i,t;case gS:return t=ao(19,n,e,a),t.elementType=gS,t.lanes=i,t;case a$:return Iy(n,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case n$:o=10;break e;case r$:o=9;break e;case fS:o=11;break e;case yS:o=14;break e;case Ul:o=16,r=null;break e}throw Error(Ie(130,t==null?t:typeof t,""))}return e=ao(o,n,e,a),e.elementType=t,e.type=r,e.lanes=i,e}function vc(t,e,n,r){return t=ao(7,t,r,e),t.lanes=n,t}function Iy(t,e,n,r){return t=ao(22,t,r,e),t.elementType=a$,t.lanes=n,t.stateNode={isHidden:!1},t}function l3(t,e,n){return t=ao(6,t,null,e),t.lanes=n,t}function u3(t,e,n){return e=ao(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wH(t,e,n,r,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=DS(0),this.expirationTimes=DS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=DS(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function c3(t,e,n,r,a,i,o,s,l){return t=new wH(t,e,n,s,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ao(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},CC(i),t}function kH(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Z6(t){if(!t)return Zl;t=t._reactInternals;e:{if(sc(t)!==t||t.tag!==1)throw Error(Ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ie(171))}if(t.tag===1){var n=t.type;if(mi(n))return CO(t,n,e)}return e}function J6(t,e,n,r,a,i,o,s,l){return t=c3(n,r,!0,t,a,i,o,s,l),t.context=Z6(null),n=t.current,r=ai(),a=iu(n),i=Zs(r,a),i.callback=e??null,tu(n,i,a),t.current.lanes=a,lf(t,a,r),bi(t,r),t}function _y(t,e,n,r){var a=e.current,i=ai(),o=iu(a);return n=Z6(n),e.context===null?e.context=n:e.pendingContext=n,e=Zs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=tu(a,e,o),t!==null&&(Lo(t,a,o,i),iy(t,a,o)),o}function Ry(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function eM(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function d3(t,e){eM(t,e),(t=t.alternate)&&eM(t,e)}function SH(){return null}var tM=typeof reportError=="function"?reportError:function(t){console.error(t)};function p3(t){this._internalRoot=t}$y.prototype.render=p3.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ie(409));_y(t,e,null,null)},$y.prototype.unmount=p3.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gc(function(){_y(null,t,null,null)}),e[qs]=null}};function $y(t){this._internalRoot=t}$y.prototype.unstable_scheduleHydration=function(t){if(t){var e=A$();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ql.length&&e!==0&&e<ql[n].priority;n++);ql.splice(n,0,t),n===0&&z$(t)}};function h3(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nM(){}function CH(t,e,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=Ry(o);i.call(u)}}var o=J6(e,r,t,0,null,!1,!1,"",nM);return t._reactRootContainer=o,t[qs]=o.current,kf(t.nodeType===8?t.parentNode:t),gc(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var s=r;r=function(){var u=Ry(l);s.call(u)}}var l=c3(t,0,!1,null,null,!1,!1,"",nM);return t._reactRootContainer=l,t[qs]=l.current,kf(t.nodeType===8?t.parentNode:t),gc(function(){_y(e,l,n,r)}),l}function My(t,e,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=Ry(o);s.call(l)}}_y(e,o,t,a)}else o=CH(n,e,t,a,r);return Ry(o)}P$=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=sf(e.pendingLanes);n!==0&&(LS(e,n|1),bi(e,xr()),!(en&6)&&(lp=xr()+500,Jl()))}break;case 13:gc(function(){var r=Ys(t,1);if(r!==null){var a=ai();Lo(r,t,1,a)}}),d3(t,1)}},zS=function(t){if(t.tag===13){var e=Ys(t,134217728);if(e!==null){var n=ai();Lo(e,t,134217728,n)}d3(t,134217728)}},F$=function(t){if(t.tag===13){var e=iu(t),n=Ys(t,e);if(n!==null){var r=ai();Lo(n,t,e,r)}d3(t,e)}},A$=function(){return xn},D$=function(t,e){var n=xn;try{return xn=t,e()}finally{xn=n}},$S=function(t,e,n){switch(e){case"input":if(SS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var a=Q1(r);if(!a)throw Error(Ie(90));s$(r),SS(r,a)}}}break;case"textarea":p$(t,n);break;case"select":e=n.value,e!=null&&zd(t,!!n.multiple,e,!1)}},w$=a3,k$=gc;var EH={usingClientEntryPoint:!1,Events:[Ef,Xd,Q1,v$,x$,a3]},zf={findFiberByHostInstance:lc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},NH={bundleType:zf.bundleType,version:zf.version,rendererPackageName:zf.rendererPackageName,rendererConfig:zf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=N$(t),t===null?null:t.stateNode},findFiberByHostInstance:zf.findFiberByHostInstance||SH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Py=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Py.isDisabled&&Py.supportsFiber)try{$1=Py.inject(NH),ds=Py}catch{}}Ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EH,Ri.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h3(e))throw Error(Ie(200));return kH(t,e,null,n)},Ri.createRoot=function(t,e){if(!h3(t))throw Error(Ie(299));var n=!1,r="",a=tM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=c3(t,1,!1,null,null,n,!1,r,a),t[qs]=e.current,kf(t.nodeType===8?t.parentNode:t),new p3(e)},Ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ie(188)):(t=Object.keys(t).join(","),Error(Ie(268,t)));return t=N$(e),t=t===null?null:t.stateNode,t},Ri.flushSync=function(t){return gc(t)},Ri.hydrate=function(t,e,n){if(!Oy(e))throw Error(Ie(200));return My(null,t,e,!0,n)},Ri.hydrateRoot=function(t,e,n){if(!h3(t))throw Error(Ie(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=tM;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=J6(e,null,t,1,n??null,a,!1,i,o),t[qs]=e.current,kf(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new $y(e)},Ri.render=function(t,e,n){if(!Oy(e))throw Error(Ie(200));return My(null,t,e,!1,n)},Ri.unmountComponentAtNode=function(t){if(!Oy(t))throw Error(Ie(40));return t._reactRootContainer?(gc(function(){My(null,null,t,!1,function(){t._reactRootContainer=null,t[qs]=null})}),!0):!1},Ri.unstable_batchedUpdates=a3,Ri.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Oy(n))throw Error(Ie(200));if(t==null||t._reactInternals===void 0)throw Error(Ie(38));return My(t,e,n,!1,r)},Ri.version="18.2.0-next-9e3b772b8-20220608";function rM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rM)}catch(t){console.error(t)}}rM(),XR.exports=Ri;var zo=XR.exports;const aM=Zi(zo),TH=eS({__proto__:null,default:aM},[zo]);var iM,oM=zo;iM=oM.createRoot,oM.hydrateRoot;var IH={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const _H=Zi(IH);var RH=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function sM(t){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=t.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(e.name=n[1],(_H[n[1]]||t.charAt(t.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=t.indexOf("-->");return{type:"comment",comment:r!==-1?t.slice(4,r):""}}for(var a=new RegExp(RH),i=null;(i=a.exec(t))!==null;)if(i[0].trim())if(i[1]){var o=i[1].trim(),s=[o,""];o.indexOf("=")>-1&&(s=o.split("=")),e.attrs[s[0]]=s[1],a.lastIndex--}else i[2]&&(e.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return e}var $H=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,OH=/^\s*$/,MH=Object.create(null);function lM(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(n){var r=[];for(var a in n)r.push(a+'="'+n[a]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(lM,"")+"</"+e.name+">";case"comment":return t+"<!--"+e.comment+"-->"}}var PH={parse:function(t,e){e||(e={}),e.components||(e.components=MH);var n,r=[],a=[],i=-1,o=!1;if(t.indexOf("<")!==0){var s=t.indexOf("<");r.push({type:"text",content:s===-1?t:t.substring(0,s)})}return t.replace($H,function(l,u){if(o){if(l!=="</"+n.name+">")return;o=!1}var c,d=l.charAt(1)!=="/",p=l.startsWith("<!--"),f=u+l.length,g=t.charAt(f);if(p){var y=sM(l);return i<0?(r.push(y),r):((c=a[i]).children.push(y),r)}if(d&&(i++,(n=sM(l)).type==="tag"&&e.components[n.name]&&(n.type="component",o=!0),n.voidElement||o||!g||g==="<"||n.children.push({type:"text",content:t.slice(f,t.indexOf("<",f))}),i===0&&r.push(n),(c=a[i-1])&&c.children.push(n),a[i]=n),(!d||n.voidElement)&&(i>-1&&(n.voidElement||n.name===l.slice(2,-1))&&(i--,n=i===-1?r:a[i]),!o&&g!=="<"&&g)){c=i===-1?r:a[i].children;var v=t.indexOf("<",f),b=t.slice(f,v===-1?void 0:v);OH.test(b)&&(b=" "),(v>-1&&i+c.length>=0||b!==" ")&&c.push({type:"text",content:b})}}),r},stringify:function(t){return t.reduce(function(e,n){return e+lM("",n)},"")}};function Fy(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const uM={};function Ay(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&uM[e[0]]||(typeof e[0]=="string"&&(uM[e[0]]=new Date),Fy(...e))}const cM=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function dM(t,e,n){t.loadNamespaces(e,cM(t,n))}function pM(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(a=>{t.options.ns.indexOf(a)<0&&t.options.ns.push(a)}),t.loadLanguages(e,cM(t,r))}function FH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],a=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=e.services.backendConnector.state[`${s}|${l}`];return u===-1||u===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!a||o(i,t)))}function AH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Ay("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!a(r.isLanguageChangingTo,t))return!1}}):FH(t,e,n)}const DH=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,LH={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xA9","&#169;":"\xA9","&reg;":"\xAE","&#174;":"\xAE","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},zH=t=>LH[t],BH=t=>t.replace(DH,zH);let jH={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:BH};function hM(){return jH}let UH;function f3(){return UH}function m3(t,e){if(!t)return!1;const n=t.props?t.props.children:t.children;return e?n.length>0:!!n}function g3(t){if(!t)return[];const e=t.props?t.props.children:t.children;return t.props&&t.props.i18nIsDynamicList?cp(e):e}function VH(t){return Object.prototype.toString.call(t)!=="[object Array]"?!1:t.every(e=>_.isValidElement(e))}function cp(t){return Array.isArray(t)?t:[t]}function WH(t,e){const n={...e};return n.props=Object.assign(t.props,e.props),n}function fM(t,e){if(!t)return"";let n="";const r=cp(t),a=e.transSupportBasicHtmlNodes&&e.transKeepBasicHtmlNodesFor?e.transKeepBasicHtmlNodesFor:[];return r.forEach((i,o)=>{if(typeof i=="string")n+=`${i}`;else if(_.isValidElement(i)){const s=Object.keys(i.props).length,l=a.indexOf(i.type)>-1,u=i.props.children;if(!u&&l&&s===0)n+=`<${i.type}/>`;else if(!u&&(!l||s!==0))n+=`<${o}></${o}>`;else if(i.props.i18nIsDynamicList)n+=`<${o}></${o}>`;else if(l&&s===1&&typeof u=="string")n+=`<${i.type}>${u}</${i.type}>`;else{const c=fM(u,e);n+=`<${o}>${c}</${o}>`}}else if(i===null)Fy("Trans: the passed in value is invalid - seems you passed in a null child.");else if(typeof i=="object"){const{format:s,...l}=i,u=Object.keys(l);if(u.length===1){const c=s?`${u[0]}, ${s}`:u[0];n+=`{{${c}}}`}else Fy("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",i)}else Fy("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",i)}),n}function GH(t,e,n,r,a,i){if(e==="")return[];const o=r.transKeepBasicHtmlNodesFor||[],s=e&&new RegExp(o.map(v=>`<${v}`).join("|")).test(e);if(!t&&!s&&!i)return[e];const l={};function u(v){cp(v).forEach(b=>{typeof b!="string"&&(m3(b)?u(g3(b)):typeof b=="object"&&!_.isValidElement(b)&&Object.assign(l,b))})}u(t);const c=PH.parse(`<0>${e}</0>`),d={...l,...a};function p(v,b,x){const w=g3(v),S=g(w,b.children,x);return VH(w)&&S.length===0||v.props&&v.props.i18nIsDynamicList?w:S}function f(v,b,x,w,S){v.dummy?(v.children=b,x.push(_.cloneElement(v,{key:w},S?void 0:b))):x.push(..._.Children.map([v],C=>{const E={...C.props};return delete E.i18nIsDynamicList,_.createElement(C.type,{...E,key:w,ref:C.ref},S?null:b)}))}function g(v,b,x){const w=cp(v);return cp(b).reduce((S,C,E)=>{const R=C.children&&C.children[0]&&C.children[0].content&&n.services.interpolator.interpolate(C.children[0].content,d,n.language);if(C.type==="tag"){let T=w[parseInt(C.name,10)];x.length===1&&!T&&(T=x[0][C.name]),T||(T={});const $=Object.keys(C.attrs).length!==0?WH({props:C.attrs},T):T,P=_.isValidElement($),D=P&&m3(C,!0)&&!C.voidElement,B=s&&typeof $=="object"&&$.dummy&&!P,z=typeof t=="object"&&t!==null&&Object.hasOwnProperty.call(t,C.name);if(typeof $=="string"){const q=n.services.interpolator.interpolate($,d,n.language);S.push(q)}else if(m3($)||D){const q=p($,C,x);f($,q,S,E)}else if(B){const q=g(w,C.children,x);f($,q,S,E)}else if(Number.isNaN(parseFloat(C.name)))if(z){const q=p($,C,x);f($,q,S,E,C.voidElement)}else if(r.transSupportBasicHtmlNodes&&o.indexOf(C.name)>-1)if(C.voidElement)S.push(_.createElement(C.name,{key:`${C.name}-${E}`}));else{const q=g(w,C.children,x);S.push(_.createElement(C.name,{key:`${C.name}-${E}`},q))}else if(C.voidElement)S.push(`<${C.name} />`);else{const q=g(w,C.children,x);S.push(`<${C.name}>${q}</${C.name}>`)}else if(typeof $=="object"&&!P){const q=C.children[0]?R:null;q&&S.push(q)}else f($,R,S,E,C.children.length!==1||!R)}else if(C.type==="text"){const T=r.transWrapTextNodes,$=i?r.unescape(n.services.interpolator.interpolate(C.content,d,n.language)):n.services.interpolator.interpolate(C.content,d,n.language);T?S.push(_.createElement(T,{key:`${C.name}-${E}`},$)):S.push($)}return S},[])}const y=g([{dummy:!0,children:t||[]}],c,cp(t||[]));return g3(y[0])}function HH(t){let{children:e,count:n,parent:r,i18nKey:a,context:i,tOptions:o={},values:s,defaults:l,components:u,ns:c,i18n:d,t:p,shouldUnescape:f,...g}=t;const y=d||f3();if(!y)return Ay("You will need to pass in an i18next instance by using i18nextReactModule"),e;const v=p||y.t.bind(y)||(B=>B);i&&(o.context=i);const b={...hM(),...y.options&&y.options.react};let x=c||v.ns||y.options&&y.options.defaultNS;x=typeof x=="string"?[x]:x||["translation"];const w=fM(e,b),S=l||w||b.transEmptyNodeValue||a,{hashTransKey:C}=b,E=a||(C?C(w||S):w||S);y.options&&y.options.interpolation&&y.options.interpolation.defaultVariables&&(s=s&&Object.keys(s).length>0?{...s,...y.options.interpolation.defaultVariables}:{...y.options.interpolation.defaultVariables});const R=s||n!==void 0?o.interpolation:{interpolation:{...o.interpolation,prefix:"#$?",suffix:"?$#"}},T={...o,count:n,...s,...R,defaultValue:S,ns:x},$=E?v(E,T):S;u&&Object.keys(u).forEach(B=>{const z=u[B];if(typeof z.type=="function"||!z.props||!z.props.children||$.indexOf(`${B}/>`)<0&&$.indexOf(`${B} />`)<0)return;function q(){return _.createElement(_.Fragment,null,z)}u[B]=_.createElement(q)});const P=GH(u||e,$,y,b,T,f),D=r!==void 0?r:b.defaultTransParent;return D?_.createElement(D,g,P):P}const y3=_.createContext();class qH{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function b3(t){let{children:e,count:n,parent:r,i18nKey:a,context:i,tOptions:o={},values:s,defaults:l,components:u,ns:c,i18n:d,t:p,shouldUnescape:f,...g}=t;const{i18n:y,defaultNS:v}=_.useContext(y3)||{},b=d||y||f3(),x=p||b&&b.t.bind(b);return HH({children:e,count:n,parent:r,i18nKey:a,context:i,tOptions:o,values:s,defaults:l,components:u,ns:c||x&&x.ns||v||b&&b.options&&b.options.defaultNS,i18n:b,t:p,shouldUnescape:f,...g})}const KH=(t,e)=>{const n=_.useRef();return _.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current};function mM(t,e,n,r){return t.getFixedT(e,n,r)}function XH(t,e,n,r){return _.useCallback(mM(t,e,n,r),[t,e,n,r])}function gs(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:a}=_.useContext(y3)||{},i=n||r||f3();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new qH),!i){Ay("You will need to pass in an i18next instance by using initReactI18next");const C=(R,T)=>typeof T=="string"?T:T&&typeof T=="object"&&typeof T.defaultValue=="string"?T.defaultValue:Array.isArray(R)?R[R.length-1]:R,E=[C,{},!1];return E.t=C,E.i18n={},E.ready=!1,E}i.options.react&&i.options.react.wait!==void 0&&Ay("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...hM(),...i.options.react,...e},{useSuspense:s,keyPrefix:l}=o;let u=t||a||i.options&&i.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const c=(i.isInitialized||i.initializedStoreOnce)&&u.every(C=>AH(C,i,o)),d=XH(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),p=()=>d,f=()=>mM(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),[g,y]=_.useState(p);let v=u.join();e.lng&&(v=`${e.lng}${v}`);const b=KH(v),x=_.useRef(!0);_.useEffect(()=>{const{bindI18n:C,bindI18nStore:E}=o;x.current=!0,!c&&!s&&(e.lng?pM(i,e.lng,u,()=>{x.current&&y(f)}):dM(i,u,()=>{x.current&&y(f)})),c&&b&&b!==v&&x.current&&y(f);function R(){x.current&&y(f)}return C&&i&&i.on(C,R),E&&i&&i.store.on(E,R),()=>{x.current=!1,C&&i&&C.split(" ").forEach(T=>i.off(T,R)),E&&i&&E.split(" ").forEach(T=>i.store.off(T,R))}},[i,v]);const w=_.useRef(!0);_.useEffect(()=>{x.current&&!w.current&&y(p),w.current=!1},[i,l]);const S=[g,i,c];if(S.t=g,S.i18n=i,S.ready=c,c||!c&&!s)return S;throw new Promise(C=>{e.lng?pM(i,e.lng,u,()=>C()):dM(i,u,()=>C())})}function QH(t){let{i18n:e,defaultNS:n,children:r}=t;const a=_.useMemo(()=>({i18n:e,defaultNS:n}),[e,n]);return _.createElement(y3.Provider,{value:a},r)}/**
* @remix-run/router v1.15.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function dr(){return dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dr.apply(this,arguments)}var wr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wr||(wr={}));const gM="popstate";function YH(t){t===void 0&&(t={});function e(r,a){let{pathname:i,search:o,hash:s}=r.location;return Bf("",{pathname:i,search:o,hash:s},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:xc(a)}return JH(e,n,null,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZH(){return Math.random().toString(36).substr(2,8)}function yM(t,e){return{usr:t.state,key:t.key,idx:e}}function Bf(t,e,n,r){return n===void 0&&(n=null),dr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?tl(e):e,{state:n,key:e&&e.key||r||ZH()})}function xc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function tl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function JH(t,e,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,s=wr.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(dr({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){s=wr.Pop;let v=c(),b=v==null?null:v-u;u=v,l&&l({action:s,location:y.location,delta:b})}function p(v,b){s=wr.Push;let x=Bf(y.location,v,b);n&&n(x,v),u=c()+1;let w=yM(x,u),S=y.createHref(x);try{o.pushState(w,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(S)}i&&l&&l({action:s,location:y.location,delta:1})}function f(v,b){s=wr.Replace;let x=Bf(y.location,v,b);n&&n(x,v),u=c();let w=yM(x,u),S=y.createHref(x);o.replaceState(w,"",S),i&&l&&l({action:s,location:y.location,delta:0})}function g(v){let b=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof v=="string"?v:xc(v);return x=x.replace(/ $/,"%20"),Et(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let y={get action(){return s},get location(){return t(a,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(gM,d),l=v,()=>{a.removeEventListener(gM,d),l=null}},createHref(v){return e(a,v)},createURL:g,encodeLocation(v){let b=g(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:f,go(v){return o.go(v)}};return y}var pr;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(pr||(pr={}));const eq=new Set(["lazy","caseSensitive","path","id","index","children"]);function tq(t){return t.index===!0}function v3(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((a,i)=>{let o=[...n,i],s=typeof a.id=="string"?a.id:o.join("-");if(Et(a.index!==!0||!a.children,"Cannot specify children on an index route"),Et(!r[s],'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),tq(a)){let l=dr({},a,e(a),{id:s});return r[s]=l,l}else{let l=dr({},a,e(a),{id:s,children:void 0});return r[s]=l,a.children&&(l.children=v3(a.children,e,o,r)),l}})}function pp(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?tl(e):e,a=ys(r.pathname||"/",n);if(a==null)return null;let i=vM(t);nq(i);let o=null;for(let s=0;o==null&&s<i.length;++s){let l=hq(a);o=dq(i[s],l)}return o}function bM(t,e){let{route:n,pathname:r,params:a}=t;return{id:n.id,pathname:r,params:a,data:e[n.id],handle:n.handle}}function vM(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,s)=>{let l={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Et(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=nl([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(Et(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),vM(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:uq(u,i.index),routesMeta:c})};return t.forEach((i,o)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))a(i,o);else for(let l of xM(i.path))a(i,o,l)}),e}function xM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=xM(r.join("/")),s=[];return s.push(...o.map(l=>l===""?i:[i,l].join("/"))),a&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function nq(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:cq(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const rq=/^:[\w-]+$/,aq=3,iq=2,oq=1,sq=10,lq=-2,wM=t=>t==="*";function uq(t,e){let n=t.split("/"),r=n.length;return n.some(wM)&&(r+=lq),e&&(r+=iq),n.filter(a=>!wM(a)).reduce((a,i)=>a+(rq.test(i)?aq:i===""?oq:sq),r)}function cq(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function dq(t,e){let{routesMeta:n}=t,r={},a="/",i=[];for(let o=0;o<n.length;++o){let s=n[o],l=o===n.length-1,u=a==="/"?e:e.slice(a.length)||"/",c=Dy({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let d=s.route;i.push({params:r,pathname:nl([a,c.pathname]),pathnameBase:gq(nl([a,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(a=nl([a,c.pathnameBase]))}return i}function Dy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pq(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((l,u,c)=>{let{paramName:d,isOptional:p}=u;if(d==="*"){let g=s[c]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const f=s[c];return p&&!f?l[d]=void 0:l[d]=(f||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function pq(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),dp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,s)=>(r.push({paramName:o,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function hq(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ys(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function fq(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?tl(t):t;return{pathname:n?n.startsWith("/")?n:mq(n,e):e,search:yq(r),hash:bq(a)}}function mq(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function x3(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kM(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function w3(t,e){let n=kM(t);return e?n.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function k3(t,e,n,r){r===void 0&&(r=!1);let a;typeof t=="string"?a=tl(t):(a=dr({},t),Et(!a.pathname||!a.pathname.includes("?"),x3("?","pathname","search",a)),Et(!a.pathname||!a.pathname.includes("#"),x3("#","pathname","hash",a)),Et(!a.search||!a.search.includes("#"),x3("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,s;if(o==null)s=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;a.pathname=p.join("/")}s=d>=0?e[d]:"/"}let l=fq(a,s),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const nl=t=>t.join("/").replace(/\/\/+/g,"/"),gq=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yq=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bq=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class S3{constructor(e,n,r,a){a===void 0&&(a=!1),this.status=e,this.statusText=n||"",this.internal=a,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function SM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CM=["post","put","patch","delete"],vq=new Set(CM),xq=["get",...CM],wq=new Set(xq),kq=new Set([301,302,303,307,308]),Sq=new Set([307,308]),C3={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Cq={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},jf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},EM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Eq=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),NM="remix-router-transitions";function Nq(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Et(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let a;if(t.mapRouteProperties)a=t.mapRouteProperties;else if(t.detectErrorBoundary){let le=t.detectErrorBoundary;a=fe=>({hasErrorBoundary:le(fe)})}else a=Eq;let i={},o=v3(t.routes,a,void 0,i),s,l=t.basename||"/",u=dr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),c=null,d=new Set,p=null,f=null,g=null,y=t.hydrationData!=null,v=pp(o,t.history.location,l),b=null;if(v==null){let le=io(404,{pathname:t.history.location.pathname}),{matches:fe,route:xe}=FM(o);v=fe,b={[xe.id]:le}}let x,w=v.some(le=>le.route.lazy),S=v.some(le=>le.route.loader);if(w)x=!1;else if(!S)x=!0;else if(u.v7_partialHydration){let le=t.hydrationData?t.hydrationData.loaderData:null,fe=t.hydrationData?t.hydrationData.errors:null;x=v.every(xe=>xe.route.loader&&xe.route.loader.hydrate!==!0&&(le&&le[xe.route.id]!==void 0||fe&&fe[xe.route.id]!==void 0))}else x=t.hydrationData!=null;let C,E={historyAction:t.history.action,location:t.history.location,matches:v,initialized:x,navigation:C3,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},R=wr.Pop,T=!1,$,P=!1,D=new Map,B=null,z=!1,q=!1,Y=[],Z=[],H=new Map,L=0,Q=-1,J=new Map,te=new Set,oe=new Map,he=new Map,ae=new Set,de=new Map,ke=new Map,K=!1;function se(){if(c=t.history.listen(le=>{let{action:fe,location:xe,delta:_e}=le;if(K){K=!1;return}dp(ke.size===0||_e!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ze=Ea({currentLocation:E.location,nextLocation:xe,historyAction:fe});if(ze&&_e!=null){K=!0,t.history.go(_e*-1),Qa(ze,{state:"blocked",location:xe,proceed(){Qa(ze,{state:"proceeding",proceed:void 0,reset:void 0,location:xe}),t.history.go(_e)},reset(){let it=new Map(E.blockers);it.set(ze,jf),Se({blockers:it})}});return}return $e(fe,xe)}),n){Dq(e,D);let le=()=>Lq(e,D);e.addEventListener("pagehide",le),B=()=>e.removeEventListener("pagehide",le)}return E.initialized||$e(wr.Pop,E.location,{initialHydration:!0}),C}function pe(){c&&c(),B&&B(),d.clear(),$&&$.abort(),E.fetchers.forEach((le,fe)=>hn(fe)),E.blockers.forEach((le,fe)=>la(fe))}function Ne(le){return d.add(le),()=>d.delete(le)}function Se(le,fe){fe===void 0&&(fe={}),E=dr({},E,le);let xe=[],_e=[];u.v7_fetcherPersist&&E.fetchers.forEach((ze,it)=>{ze.state==="idle"&&(ae.has(it)?_e.push(it):xe.push(it))}),[...d].forEach(ze=>ze(E,{deletedFetchers:_e,unstable_viewTransitionOpts:fe.viewTransitionOpts,unstable_flushSync:fe.flushSync===!0})),u.v7_fetcherPersist&&(xe.forEach(ze=>E.fetchers.delete(ze)),_e.forEach(ze=>hn(ze)))}function Te(le,fe,xe){var _e,ze;let{flushSync:it}=xe===void 0?{}:xe,nt=E.actionData!=null&&E.navigation.formMethod!=null&&Bo(E.navigation.formMethod)&&E.navigation.state==="loading"&&((_e=le.state)==null?void 0:_e._isRedirect)!==!0,at;fe.actionData?Object.keys(fe.actionData).length>0?at=fe.actionData:at=null:nt?at=E.actionData:at=null;let Qe=fe.loaderData?PM(E.loaderData,fe.loaderData,fe.matches||[],fe.errors):E.loaderData,bt=E.blockers;bt.size>0&&(bt=new Map(bt),bt.forEach((Jt,bn)=>bt.set(bn,jf)));let cn=T===!0||E.navigation.formMethod!=null&&Bo(E.navigation.formMethod)&&((ze=le.state)==null?void 0:ze._isRedirect)!==!0;s&&(o=s,s=void 0),z||R===wr.Pop||(R===wr.Push?t.history.push(le,le.state):R===wr.Replace&&t.history.replace(le,le.state));let ft;if(R===wr.Pop){let Jt=D.get(E.location.pathname);Jt&&Jt.has(le.pathname)?ft={currentLocation:E.location,nextLocation:le}:D.has(le.pathname)&&(ft={currentLocation:le,nextLocation:E.location})}else if(P){let Jt=D.get(E.location.pathname);Jt?Jt.add(le.pathname):(Jt=new Set([le.pathname]),D.set(E.location.pathname,Jt)),ft={currentLocation:E.location,nextLocation:le}}Se(dr({},fe,{actionData:at,loaderData:Qe,historyAction:R,location:le,initialized:!0,navigation:C3,revalidation:"idle",restoreScrollPosition:Vn(le,fe.matches||E.matches),preventScrollReset:cn,blockers:bt}),{viewTransitionOpts:ft,flushSync:it===!0}),R=wr.Pop,T=!1,P=!1,z=!1,q=!1,Y=[],Z=[]}async function Pe(le,fe){if(typeof le=="number"){t.history.go(le);return}let xe=E3(E.location,E.matches,l,u.v7_prependBasename,le,u.v7_relativeSplatPath,fe?.fromRouteId,fe?.relative),{path:_e,submission:ze,error:it}=TM(u.v7_normalizeFormMethod,!1,xe,fe),nt=E.location,at=Bf(E.location,_e,fe&&fe.state);at=dr({},at,t.history.encodeLocation(at));let Qe=fe&&fe.replace!=null?fe.replace:void 0,bt=wr.Push;Qe===!0?bt=wr.Replace:Qe===!1||ze!=null&&Bo(ze.formMethod)&&ze.formAction===E.location.pathname+E.location.search&&(bt=wr.Replace);let cn=fe&&"preventScrollReset"in fe?fe.preventScrollReset===!0:void 0,ft=(fe&&fe.unstable_flushSync)===!0,Jt=Ea({currentLocation:nt,nextLocation:at,historyAction:bt});if(Jt){Qa(Jt,{state:"blocked",location:at,proceed(){Qa(Jt,{state:"proceeding",proceed:void 0,reset:void 0,location:at}),Pe(le,fe)},reset(){let bn=new Map(E.blockers);bn.set(Jt,jf),Se({blockers:bn})}});return}return await $e(bt,at,{submission:ze,pendingError:it,preventScrollReset:cn,replace:fe&&fe.replace,enableViewTransition:fe&&fe.unstable_viewTransition,flushSync:ft})}function We(){if(Gt(),Se({revalidation:"loading"}),E.navigation.state!=="submitting"){if(E.navigation.state==="idle"){$e(E.historyAction,E.location,{startUninterruptedRevalidation:!0});return}$e(R||E.historyAction,E.navigation.location,{overrideNavigation:E.navigation})}}async function $e(le,fe,xe){$&&$.abort(),$=null,R=le,z=(xe&&xe.startUninterruptedRevalidation)===!0,or(E.location,E.matches),T=(xe&&xe.preventScrollReset)===!0,P=(xe&&xe.enableViewTransition)===!0;let _e=s||o,ze=xe&&xe.overrideNavigation,it=pp(_e,fe,l),nt=(xe&&xe.flushSync)===!0;if(!it){let bn=io(404,{pathname:fe.pathname}),{matches:Fr,route:sr}=FM(_e);So(),Te(fe,{matches:Fr,loaderData:{},errors:{[sr.id]:bn}},{flushSync:nt});return}if(E.initialized&&!q&&$q(E.location,fe)&&!(xe&&xe.submission&&Bo(xe.submission.formMethod))){Te(fe,{matches:it},{flushSync:nt});return}$=new AbortController;let at=Vf(t.history,fe,$.signal,xe&&xe.submission),Qe,bt;if(xe&&xe.pendingError)bt={[Wf(it).route.id]:xe.pendingError};else if(xe&&xe.submission&&Bo(xe.submission.formMethod)){let bn=await lt(at,fe,xe.submission,it,{replace:xe.replace,flushSync:nt});if(bn.shortCircuited)return;Qe=bn.pendingActionData,bt=bn.pendingActionError,ze=_3(fe,xe.submission),nt=!1,at=new Request(at.url,{signal:at.signal})}let{shortCircuited:cn,loaderData:ft,errors:Jt}=await Ze(at,fe,it,ze,xe&&xe.submission,xe&&xe.fetcherSubmission,xe&&xe.replace,xe&&xe.initialHydration===!0,nt,Qe,bt);cn||($=null,Te(fe,dr({matches:it},Qe?{actionData:Qe}:{},{loaderData:ft,errors:Jt})))}async function lt(le,fe,xe,_e,ze){ze===void 0&&(ze={}),Gt();let it=Fq(fe,xe);Se({navigation:it},{flushSync:ze.flushSync===!0});let nt,at=I3(_e,fe);if(!at.route.action&&!at.route.lazy)nt={type:pr.error,error:io(405,{method:le.method,pathname:fe.pathname,routeId:at.route.id})};else if(nt=await Uf("action",le,at,_e,i,a,l,u.v7_relativeSplatPath),le.signal.aborted)return{shortCircuited:!0};if(kc(nt)){let Qe;return ze&&ze.replace!=null?Qe=ze.replace:Qe=nt.location===E.location.pathname+E.location.search,await $t(E,nt,{submission:xe,replace:Qe}),{shortCircuited:!0}}if(hp(nt)){let Qe=Wf(_e,at.route.id);return(ze&&ze.replace)!==!0&&(R=wr.Push),{pendingActionData:{},pendingActionError:{[Qe.route.id]:nt.error}}}if(wc(nt))throw io(400,{type:"defer-action"});return{pendingActionData:{[at.route.id]:nt.data}}}async function Ze(le,fe,xe,_e,ze,it,nt,at,Qe,bt,cn){let ft=_e||_3(fe,ze),Jt=ze||it||BM(ft),bn=s||o,[Fr,sr]=IM(t.history,E,xe,Jt,fe,u.v7_partialHydration&&at===!0,q,Y,Z,ae,oe,te,bn,l,bt,cn);if(So(rn=>!(xe&&xe.some(fn=>fn.route.id===rn))||Fr&&Fr.some(fn=>fn.route.id===rn)),Q=++L,Fr.length===0&&sr.length===0){let rn=li();return Te(fe,dr({matches:xe,loaderData:{},errors:cn||null},bt?{actionData:bt}:{},rn?{fetchers:new Map(E.fetchers)}:{}),{flushSync:Qe}),{shortCircuited:!0}}if(!z&&(!u.v7_partialHydration||!at)){sr.forEach(fn=>{let Er=E.fetchers.get(fn.key),Dt=Gf(void 0,Er?Er.data:void 0);E.fetchers.set(fn.key,Dt)});let rn=bt||E.actionData;Se(dr({navigation:ft},rn?Object.keys(rn).length===0?{actionData:null}:{actionData:rn}:{},sr.length>0?{fetchers:new Map(E.fetchers)}:{}),{flushSync:Qe})}sr.forEach(rn=>{H.has(rn.key)&&yn(rn.key),rn.controller&&H.set(rn.key,rn.controller)});let br=()=>sr.forEach(rn=>yn(rn.key));$&&$.signal.addEventListener("abort",br);let{results:ts,loaderResults:Wi,fetcherResults:Na}=await Wt(E.matches,xe,Fr,sr,le);if(le.signal.aborted)return{shortCircuited:!0};$&&$.signal.removeEventListener("abort",br),sr.forEach(rn=>H.delete(rn.key));let Co=AM(ts);if(Co){if(Co.idx>=Fr.length){let rn=sr[Co.idx-Fr.length].key;te.add(rn)}return await $t(E,Co.result,{replace:nt}),{shortCircuited:!0}}let{loaderData:Ku,errors:Xu}=MM(E,xe,Fr,Wi,cn,sr,Na,de);de.forEach((rn,fn)=>{rn.subscribe(Er=>{(Er||rn.done)&&de.delete(fn)})});let Rl=li(),ns=Xa(Q),Eo=Rl||ns||sr.length>0;return dr({loaderData:Ku,errors:Xu},Eo?{fetchers:new Map(E.fetchers)}:{})}function Je(le,fe,xe,_e){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(le)&&yn(le);let ze=(_e&&_e.unstable_flushSync)===!0,it=s||o,nt=E3(E.location,E.matches,l,u.v7_prependBasename,xe,u.v7_relativeSplatPath,fe,_e?.relative),at=pp(it,nt,l);if(!at){wt(le,fe,io(404,{pathname:nt}),{flushSync:ze});return}let{path:Qe,submission:bt,error:cn}=TM(u.v7_normalizeFormMethod,!0,nt,_e);if(cn){wt(le,fe,cn,{flushSync:ze});return}let ft=I3(at,Qe);if(T=(_e&&_e.preventScrollReset)===!0,bt&&Bo(bt.formMethod)){Ve(le,fe,Qe,ft,at,ze,bt);return}oe.set(le,{routeId:fe,path:Qe}),Vt(le,fe,Qe,ft,at,ze,bt)}async function Ve(le,fe,xe,_e,ze,it,nt){if(Gt(),oe.delete(le),!_e.route.action&&!_e.route.lazy){let fn=io(405,{method:nt.formMethod,pathname:xe,routeId:fe});wt(le,fe,fn,{flushSync:it});return}let at=E.fetchers.get(le);Ot(le,Aq(nt,at),{flushSync:it});let Qe=new AbortController,bt=Vf(t.history,xe,Qe.signal,nt);H.set(le,Qe);let cn=L,ft=await Uf("action",bt,_e,ze,i,a,l,u.v7_relativeSplatPath);if(bt.signal.aborted){H.get(le)===Qe&&H.delete(le);return}if(u.v7_fetcherPersist&&ae.has(le)){if(kc(ft)||hp(ft)){Ot(le,lu(void 0));return}}else{if(kc(ft))if(H.delete(le),Q>cn){Ot(le,lu(void 0));return}else return te.add(le),Ot(le,Gf(nt)),$t(E,ft,{fetcherSubmission:nt});if(hp(ft)){wt(le,fe,ft.error);return}}if(wc(ft))throw io(400,{type:"defer-action"});let Jt=E.navigation.location||E.location,bn=Vf(t.history,Jt,Qe.signal),Fr=s||o,sr=E.navigation.state!=="idle"?pp(Fr,E.navigation.location,l):E.matches;Et(sr,"Didn't find any matches after fetcher action");let br=++L;J.set(le,br);let ts=Gf(nt,ft.data);E.fetchers.set(le,ts);let[Wi,Na]=IM(t.history,E,sr,nt,Jt,!1,q,Y,Z,ae,oe,te,Fr,l,{[_e.route.id]:ft.data},void 0);Na.filter(fn=>fn.key!==le).forEach(fn=>{let Er=fn.key,Dt=E.fetchers.get(Er),$l=Gf(void 0,Dt?Dt.data:void 0);E.fetchers.set(Er,$l),H.has(Er)&&yn(Er),fn.controller&&H.set(Er,fn.controller)}),Se({fetchers:new Map(E.fetchers)});let Co=()=>Na.forEach(fn=>yn(fn.key));Qe.signal.addEventListener("abort",Co);let{results:Ku,loaderResults:Xu,fetcherResults:Rl}=await Wt(E.matches,sr,Wi,Na,bn);if(Qe.signal.aborted)return;Qe.signal.removeEventListener("abort",Co),J.delete(le),H.delete(le),Na.forEach(fn=>H.delete(fn.key));let ns=AM(Ku);if(ns){if(ns.idx>=Wi.length){let fn=Na[ns.idx-Wi.length].key;te.add(fn)}return $t(E,ns.result)}let{loaderData:Eo,errors:rn}=MM(E,E.matches,Wi,Xu,void 0,Na,Rl,de);if(E.fetchers.has(le)){let fn=lu(ft.data);E.fetchers.set(le,fn)}Xa(br),E.navigation.state==="loading"&&br>Q?(Et(R,"Expected pending action"),$&&$.abort(),Te(E.navigation.location,{matches:sr,loaderData:Eo,errors:rn,fetchers:new Map(E.fetchers)})):(Se({errors:rn,loaderData:PM(E.loaderData,Eo,sr,rn),fetchers:new Map(E.fetchers)}),q=!1)}async function Vt(le,fe,xe,_e,ze,it,nt){let at=E.fetchers.get(le);Ot(le,Gf(nt,at?at.data:void 0),{flushSync:it});let Qe=new AbortController,bt=Vf(t.history,xe,Qe.signal);H.set(le,Qe);let cn=L,ft=await Uf("loader",bt,_e,ze,i,a,l,u.v7_relativeSplatPath);if(wc(ft)&&(ft=await zM(ft,bt.signal,!0)||ft),H.get(le)===Qe&&H.delete(le),!bt.signal.aborted){if(ae.has(le)){Ot(le,lu(void 0));return}if(kc(ft))if(Q>cn){Ot(le,lu(void 0));return}else{te.add(le),await $t(E,ft);return}if(hp(ft)){wt(le,fe,ft.error);return}Et(!wc(ft),"Unhandled fetcher deferred data"),Ot(le,lu(ft.data))}}async function $t(le,fe,xe){let{submission:_e,fetcherSubmission:ze,replace:it}=xe===void 0?{}:xe;fe.revalidate&&(q=!0);let nt=Bf(le.location,fe.location,{_isRedirect:!0});if(Et(nt,"Expected a location on the redirect navigation"),n){let Jt=!1;if(fe.reloadDocument)Jt=!0;else if(EM.test(fe.location)){const bn=t.history.createURL(fe.location);Jt=bn.origin!==e.location.origin||ys(bn.pathname,l)==null}if(Jt){it?e.location.replace(fe.location):e.location.assign(fe.location);return}}$=null;let at=it===!0?wr.Replace:wr.Push,{formMethod:Qe,formAction:bt,formEncType:cn}=le.navigation;!_e&&!ze&&Qe&&bt&&cn&&(_e=BM(le.navigation));let ft=_e||ze;if(Sq.has(fe.status)&&ft&&Bo(ft.formMethod))await $e(at,nt,{submission:dr({},ft,{formAction:fe.location}),preventScrollReset:T});else{let Jt=_3(nt,_e);await $e(at,nt,{overrideNavigation:Jt,fetcherSubmission:ze,preventScrollReset:T})}}async function Wt(le,fe,xe,_e,ze){let it=await Promise.all([...xe.map(Qe=>Uf("loader",ze,Qe,fe,i,a,l,u.v7_relativeSplatPath)),..._e.map(Qe=>Qe.matches&&Qe.match&&Qe.controller?Uf("loader",Vf(t.history,Qe.path,Qe.controller.signal),Qe.match,Qe.matches,i,a,l,u.v7_relativeSplatPath):{type:pr.error,error:io(404,{pathname:Qe.path})})]),nt=it.slice(0,xe.length),at=it.slice(xe.length);return await Promise.all([LM(le,xe,nt,nt.map(()=>ze.signal),!1,E.loaderData),LM(le,_e.map(Qe=>Qe.match),at,_e.map(Qe=>Qe.controller?Qe.controller.signal:null),!0)]),{results:it,loaderResults:nt,fetcherResults:at}}function Gt(){q=!0,Y.push(...So()),oe.forEach((le,fe)=>{H.has(fe)&&(Z.push(fe),yn(fe))})}function Ot(le,fe,xe){xe===void 0&&(xe={}),E.fetchers.set(le,fe),Se({fetchers:new Map(E.fetchers)},{flushSync:(xe&&xe.flushSync)===!0})}function wt(le,fe,xe,_e){_e===void 0&&(_e={});let ze=Wf(E.matches,fe);hn(le),Se({errors:{[ze.route.id]:xe},fetchers:new Map(E.fetchers)},{flushSync:(_e&&_e.flushSync)===!0})}function ln(le){return u.v7_fetcherPersist&&(he.set(le,(he.get(le)||0)+1),ae.has(le)&&ae.delete(le)),E.fetchers.get(le)||Cq}function hn(le){let fe=E.fetchers.get(le);H.has(le)&&!(fe&&fe.state==="loading"&&J.has(le))&&yn(le),oe.delete(le),J.delete(le),te.delete(le),ae.delete(le),E.fetchers.delete(le)}function yr(le){if(u.v7_fetcherPersist){let fe=(he.get(le)||0)-1;fe<=0?(he.delete(le),ae.add(le)):he.set(le,fe)}else hn(le);Se({fetchers:new Map(E.fetchers)})}function yn(le){let fe=H.get(le);Et(fe,"Expected fetch controller: "+le),fe.abort(),H.delete(le)}function Zn(le){for(let fe of le){let xe=ln(fe),_e=lu(xe.data);E.fetchers.set(fe,_e)}}function li(){let le=[],fe=!1;for(let xe of te){let _e=E.fetchers.get(xe);Et(_e,"Expected fetcher: "+xe),_e.state==="loading"&&(te.delete(xe),le.push(xe),fe=!0)}return Zn(le),fe}function Xa(le){let fe=[];for(let[xe,_e]of J)if(_e<le){let ze=E.fetchers.get(xe);Et(ze,"Expected fetcher: "+xe),ze.state==="loading"&&(yn(xe),J.delete(xe),fe.push(xe))}return Zn(fe),fe.length>0}function un(le,fe){let xe=E.blockers.get(le)||jf;return ke.get(le)!==fe&&ke.set(le,fe),xe}function la(le){E.blockers.delete(le),ke.delete(le)}function Qa(le,fe){let xe=E.blockers.get(le)||jf;Et(xe.state==="unblocked"&&fe.state==="blocked"||xe.state==="blocked"&&fe.state==="blocked"||xe.state==="blocked"&&fe.state==="proceeding"||xe.state==="blocked"&&fe.state==="unblocked"||xe.state==="proceeding"&&fe.state==="unblocked","Invalid blocker state transition: "+xe.state+" -> "+fe.state);let _e=new Map(E.blockers);_e.set(le,fe),Se({blockers:_e})}function Ea(le){let{currentLocation:fe,nextLocation:xe,historyAction:_e}=le;if(ke.size===0)return;ke.size>1&&dp(!1,"A router only supports one blocker at a time");let ze=Array.from(ke.entries()),[it,nt]=ze[ze.length-1],at=E.blockers.get(it);if(!(at&&at.state==="proceeding")&&nt({currentLocation:fe,nextLocation:xe,historyAction:_e}))return it}function So(le){let fe=[];return de.forEach((xe,_e)=>{(!le||le(_e))&&(xe.cancel(),fe.push(_e),de.delete(_e))}),fe}function Kr(le,fe,xe){if(p=le,g=fe,f=xe||null,!y&&E.navigation===C3){y=!0;let _e=Vn(E.location,E.matches);_e!=null&&Se({restoreScrollPosition:_e})}return()=>{p=null,g=null,f=null}}function es(le,fe){return f&&f(le,fe.map(xe=>bM(xe,E.loaderData)))||le.key}function or(le,fe){if(p&&g){let xe=es(le,fe);p[xe]=g()}}function Vn(le,fe){if(p){let xe=es(le,fe),_e=p[xe];if(typeof _e=="number")return _e}return null}function dt(le){i={},s=v3(le,a,void 0,i)}return C={get basename(){return l},get future(){return u},get state(){return E},get routes(){return o},get window(){return e},initialize:se,subscribe:Ne,enableScrollRestoration:Kr,navigate:Pe,fetch:Je,revalidate:We,createHref:le=>t.history.createHref(le),encodeLocation:le=>t.history.encodeLocation(le),getFetcher:ln,deleteFetcher:yr,dispose:pe,getBlocker:un,deleteBlocker:la,_internalFetchControllers:H,_internalActiveDeferreds:de,_internalSetRoutes:dt},C}function Tq(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function E3(t,e,n,r,a,i,o,s){let l,u;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){u=d;break}}else l=e,u=e[e.length-1];let c=k3(a||".",w3(l,i),ys(t.pathname,n)||t.pathname,s==="path");return a==null&&(c.search=t.search,c.hash=t.hash),(a==null||a===""||a===".")&&u&&u.route.index&&!T3(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:nl([n,c.pathname])),xc(c)}function TM(t,e,n,r){if(!r||!Tq(r))return{path:n};if(r.formMethod&&!Pq(r.formMethod))return{path:n,error:io(405,{method:r.formMethod})};let a=()=>({path:n,error:io(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),s=DM(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Bo(o))return a();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,g)=>{let[y,v]=g;return""+f+y+"="+v+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:s,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!Bo(o))return a();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:s,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return a()}}}Et(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=N3(r.formData),u=r.formData;else if(r.body instanceof FormData)l=N3(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=OM(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=OM(l)}catch{return a()}let c={formMethod:o,formAction:s,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Bo(c.formMethod))return{path:n,submission:c};let d=tl(n);return e&&d.search&&T3(d.search)&&l.append("index",""),d.search="?"+l,{path:xc(d),submission:c}}function Iq(t,e){let n=t;if(e){let r=t.findIndex(a=>a.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function IM(t,e,n,r,a,i,o,s,l,u,c,d,p,f,g,y){let v=y?Object.values(y)[0]:g?Object.values(g)[0]:void 0,b=t.createURL(e.location),x=t.createURL(a),w=y?Object.keys(y)[0]:void 0,S=Iq(n,w).filter((E,R)=>{let{route:T}=E;if(T.lazy)return!0;if(T.loader==null)return!1;if(i)return T.loader.hydrate?!0:e.loaderData[T.id]===void 0&&(!e.errors||e.errors[T.id]===void 0);if(_q(e.loaderData,e.matches[R],E)||s.some(D=>D===E.route.id))return!0;let $=e.matches[R],P=E;return RM(E,dr({currentUrl:b,currentParams:$.params,nextUrl:x,nextParams:P.params},r,{actionResult:v,defaultShouldRevalidate:o||b.pathname+b.search===x.pathname+x.search||b.search!==x.search||_M($,P)}))}),C=[];return c.forEach((E,R)=>{if(i||!n.some(B=>B.route.id===E.routeId)||u.has(R))return;let T=pp(p,E.path,f);if(!T){C.push({key:R,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let $=e.fetchers.get(R),P=I3(T,E.path),D=!1;d.has(R)?D=!1:l.includes(R)?D=!0:$&&$.state!=="idle"&&$.data===void 0?D=o:D=RM(P,dr({currentUrl:b,currentParams:e.matches[e.matches.length-1].params,nextUrl:x,nextParams:n[n.length-1].params},r,{actionResult:v,defaultShouldRevalidate:o})),D&&C.push({key:R,routeId:E.routeId,path:E.path,matches:T,match:P,controller:new AbortController})}),[S,C]}function _q(t,e,n){let r=!e||n.route.id!==e.route.id,a=t[n.route.id]===void 0;return r||a}function _M(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function RM(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function $M(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let a=n[t.id];Et(a,"No route found in manifest");let i={};for(let o in r){let s=a[o]!==void 0&&o!=="hasErrorBoundary";dp(!s,'Route "'+a.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!s&&!eq.has(o)&&(i[o]=r[o])}Object.assign(a,i),Object.assign(a,dr({},e(a),{lazy:void 0}))}async function Uf(t,e,n,r,a,i,o,s,l){l===void 0&&(l={});let u,c,d,p=y=>{let v,b=new Promise((x,w)=>v=w);return d=()=>v(),e.signal.addEventListener("abort",d),Promise.race([y({request:e,params:n.params,context:l.requestContext}),b])};try{let y=n.route[t];if(n.route.lazy)if(y){let v,b=await Promise.all([p(y).catch(x=>{v=x}),$M(n.route,i,a)]);if(v)throw v;c=b[0]}else if(await $M(n.route,i,a),y=n.route[t],y)c=await p(y);else if(t==="action"){let v=new URL(e.url),b=v.pathname+v.search;throw io(405,{method:e.method,pathname:b,routeId:n.route.id})}else return{type:pr.data,data:void 0};else if(y)c=await p(y);else{let v=new URL(e.url),b=v.pathname+v.search;throw io(404,{pathname:b})}Et(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(y){u=pr.error,c=y}finally{d&&e.signal.removeEventListener("abort",d)}if(Mq(c)){let y=c.status;if(kq.has(y)){let b=c.headers.get("Location");if(Et(b,"Redirects returned/thrown from loaders/actions must have a Location header"),!EM.test(b))b=E3(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,b,s);else if(!l.isStaticRequest){let x=new URL(e.url),w=b.startsWith("//")?new URL(x.protocol+b):new URL(b),S=ys(w.pathname,o)!=null;w.origin===x.origin&&S&&(b=w.pathname+w.search+w.hash)}if(l.isStaticRequest)throw c.headers.set("Location",b),c;return{type:pr.redirect,status:y,location:b,revalidate:c.headers.get("X-Remix-Revalidate")!==null,reloadDocument:c.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:u===pr.error?pr.error:pr.data,response:c};let v;try{let b=c.headers.get("Content-Type");b&&/\bapplication\/json\b/.test(b)?c.body==null?v=null:v=await c.json():v=await c.text()}catch(b){return{type:pr.error,error:b}}return u===pr.error?{type:u,error:new S3(y,c.statusText,v),headers:c.headers}:{type:pr.data,data:v,statusCode:c.status,headers:c.headers}}if(u===pr.error)return{type:u,error:c};if(Oq(c)){var f,g;return{type:pr.deferred,deferredData:c,statusCode:(f=c.init)==null?void 0:f.status,headers:((g=c.init)==null?void 0:g.headers)&&new Headers(c.init.headers)}}return{type:pr.data,data:c}}function Vf(t,e,n,r){let a=t.createURL(DM(e)).toString(),i={signal:n};if(r&&Bo(r.formMethod)){let{formMethod:o,formEncType:s}=r;i.method=o.toUpperCase(),s==="application/json"?(i.headers=new Headers({"Content-Type":s}),i.body=JSON.stringify(r.json)):s==="text/plain"?i.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?i.body=N3(r.formData):i.body=r.formData}return new Request(a,i)}function N3(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function OM(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function Rq(t,e,n,r,a){let i={},o=null,s,l=!1,u={};return n.forEach((c,d)=>{let p=e[d].route.id;if(Et(!kc(c),"Cannot handle redirect results in processLoaderData"),hp(c)){let f=Wf(t,p),g=c.error;r&&(g=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=g),i[p]=void 0,l||(l=!0,s=SM(c.error)?c.error.status:500),c.headers&&(u[p]=c.headers)}else wc(c)?(a.set(p,c.deferredData),i[p]=c.deferredData.data):i[p]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(s=c.statusCode),c.headers&&(u[p]=c.headers)}),r&&(o=r,i[Object.keys(r)[0]]=void 0),{loaderData:i,errors:o,statusCode:s||200,loaderHeaders:u}}function MM(t,e,n,r,a,i,o,s){let{loaderData:l,errors:u}=Rq(e,n,r,a,s);for(let c=0;c<i.length;c++){let{key:d,match:p,controller:f}=i[c];Et(o!==void 0&&o[c]!==void 0,"Did not find corresponding fetcher result");let g=o[c];if(!(f&&f.signal.aborted))if(hp(g)){let y=Wf(t.matches,p?.route.id);u&&u[y.route.id]||(u=dr({},u,{[y.route.id]:g.error})),t.fetchers.delete(d)}else if(kc(g))Et(!1,"Unhandled fetcher revalidation redirect");else if(wc(g))Et(!1,"Unhandled fetcher deferred data");else{let y=lu(g.data);t.fetchers.set(d,y)}}return{loaderData:l,errors:u}}function PM(t,e,n,r){let a=dr({},e);for(let i of n){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(a[o]=e[o]):t[o]!==void 0&&i.route.loader&&(a[o]=t[o]),r&&r.hasOwnProperty(o))break}return a}function Wf(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function FM(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function io(t,e){let{pathname:n,routeId:r,method:a,type:i}=e===void 0?{}:e,o="Unknown Server Error",s="Unknown @remix-run/router error";return t===400?(o="Bad Request",a&&n&&r?s="You made a "+a+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?s="defer() is not supported in actions":i==="invalid-body"&&(s="Unable to encode submission body")):t===403?(o="Forbidden",s='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",s='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",a&&n&&r?s="You made a "+a.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":a&&(s='Invalid request method "'+a.toUpperCase()+'"')),new S3(t||500,o,new Error(s),!0)}function AM(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(kc(n))return{result:n,idx:e}}}function DM(t){let e=typeof t=="string"?tl(t):t;return xc(dr({},e,{hash:""}))}function $q(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function wc(t){return t.type===pr.deferred}function hp(t){return t.type===pr.error}function kc(t){return(t&&t.type)===pr.redirect}function Oq(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Mq(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Pq(t){return wq.has(t.toLowerCase())}function Bo(t){return vq.has(t.toLowerCase())}async function LM(t,e,n,r,a,i){for(let o=0;o<n.length;o++){let s=n[o],l=e[o];if(!l)continue;let u=t.find(d=>d.route.id===l.route.id),c=u!=null&&!_M(u,l)&&(i&&i[l.route.id])!==void 0;if(wc(s)&&(a||c)){let d=r[o];Et(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await zM(s,d,a).then(p=>{p&&(n[o]=p||n[o])})}}}async function zM(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:pr.data,data:t.deferredData.unwrappedData}}catch(r){return{type:pr.error,error:r}}return{type:pr.data,data:t.deferredData.data}}}function T3(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function I3(t,e){let n=typeof e=="string"?tl(e).search:e.search;if(t[t.length-1].route.index&&T3(n||""))return t[t.length-1];let r=kM(t);return r[r.length-1]}function BM(t){let{formMethod:e,formAction:n,formEncType:r,text:a,formData:i,json:o}=t;if(!(!e||!n||!r)){if(a!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:a};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function _3(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Fq(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Gf(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Aq(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function lu(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Dq(t,e){try{let n=t.sessionStorage.getItem(NM);if(n){let r=JSON.parse(n);for(let[a,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(a,new Set(i||[]))}}catch{}}function Lq(t,e){if(e.size>0){let n={};for(let[r,a]of e)n[r]=[...a];try{t.sessionStorage.setItem(NM,JSON.stringify(n))}catch(r){dp(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
* React Router v6.22.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Hf(){return Hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hf.apply(this,arguments)}const qf=_.createContext(null),Ly=_.createContext(null),rl=_.createContext(null),zy=_.createContext(null),uu=_.createContext({outlet:null,matches:[],isDataRoute:!1}),jM=_.createContext(null);function zq(t,e){let{relative:n}=e===void 0?{}:e;fp()||Et(!1);let{basename:r,navigator:a}=_.useContext(rl),{hash:i,pathname:o,search:s}=oo(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:nl([r,o])),a.createHref({pathname:l,search:s,hash:i})}function fp(){return _.useContext(zy)!=null}function Sc(){return fp()||Et(!1),_.useContext(zy).location}function cu(t){fp()||Et(!1);let{pathname:e}=Sc();return _.useMemo(()=>Dy(t,e),[e,t])}function UM(t){_.useContext(rl).static||_.useLayoutEffect(t)}function Bq(){let{isDataRoute:t}=_.useContext(uu);return t?tK():jq()}function jq(){fp()||Et(!1);let t=_.useContext(qf),{basename:e,future:n,navigator:r}=_.useContext(rl),{matches:a}=_.useContext(uu),{pathname:i}=Sc(),o=JSON.stringify(w3(a,n.v7_relativeSplatPath)),s=_.useRef(!1);return UM(()=>{s.current=!0}),_.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let c=k3(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:nl([e,c.pathname])),(u.replace?r.replace:r.push)(c,u.state,u)},[e,r,o,i,t])}const Uq=_.createContext(null);function Vq(t){let e=_.useContext(uu).outlet;return e&&_.createElement(Uq.Provider,{value:t},e)}function oo(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(rl),{matches:a}=_.useContext(uu),{pathname:i}=Sc(),o=JSON.stringify(w3(a,r.v7_relativeSplatPath));return _.useMemo(()=>k3(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Wq(t,e,n,r){fp()||Et(!1);let{navigator:a}=_.useContext(rl),{matches:i}=_.useContext(uu),o=i[i.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Sc(),c;if(e){var d;let v=typeof e=="string"?tl(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||Et(!1),c=v}else c=u;let p=c.pathname||"/",f=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=pp(t,{pathname:f}),y=Xq(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:nl([l,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:nl([l,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&y?_.createElement(zy.Provider,{value:{location:Hf({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:wr.Pop}},y):y}function Gq(){let t=eK(),e=SM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:r},n):null,null)}const Hq=_.createElement(Gq,null);class qq extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(uu.Provider,{value:this.props.routeContext},_.createElement(jM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kq(t){let{routeContext:e,match:n,children:r}=t,a=_.useContext(qf);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(uu.Provider,{value:e},r)}function Xq(t,e,n,r){var a;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,s=(a=n)==null?void 0:a.errors;if(s!=null){let c=o.findIndex(d=>d.route.id&&s?.[d.route.id]);c>=0||Et(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:p,errors:f}=n,g=d.route.loader&&p[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,p)=>{let f,g=!1,y=null,v=null;n&&(f=s&&d.route.id?s[d.route.id]:void 0,y=d.route.errorElement||Hq,l&&(u<0&&p===0?(nK("route-fallback",!1),g=!0,v=null):u===p&&(g=!0,v=d.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),x=()=>{let w;return f?w=y:g?w=v:d.route.Component?w=_.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,_.createElement(Kq,{match:d,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?_.createElement(qq,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var VM=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(VM||{}),mp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(mp||{});function Qq(t){let e=_.useContext(qf);return e||Et(!1),e}function R3(t){let e=_.useContext(Ly);return e||Et(!1),e}function Yq(t){let e=_.useContext(uu);return e||Et(!1),e}function WM(t){let e=Yq(),n=e.matches[e.matches.length-1];return n.route.id||Et(!1),n.route.id}function Zq(){return R3(mp.UseNavigation).navigation}function Jq(){let{matches:t,loaderData:e}=R3(mp.UseMatches);return _.useMemo(()=>t.map(n=>bM(n,e)),[t,e])}function eK(){var t;let e=_.useContext(jM),n=R3(mp.UseRouteError),r=WM(mp.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function tK(){let{router:t}=Qq(VM.UseNavigateStable),e=WM(mp.UseNavigateStable),n=_.useRef(!1);return UM(()=>{n.current=!0}),_.useCallback(function(r,a){a===void 0&&(a={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Hf({fromRouteId:e},a)))},[t,e])}const GM={};function nK(t,e,n){!e&&!GM[t]&&(GM[t]=!0)}function rK(t){return Vq(t.context)}function du(t){Et(!1)}function aK(t){let{basename:e="/",children:n=null,location:r,navigationType:a=wr.Pop,navigator:i,static:o=!1,future:s}=t;fp()&&Et(!1);let l=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:l,navigator:i,static:o,future:Hf({v7_relativeSplatPath:!1},s)}),[l,s,i,o]);typeof r=="string"&&(r=tl(r));let{pathname:c="/",search:d="",hash:p="",state:f=null,key:g="default"}=r,y=_.useMemo(()=>{let v=ys(c,l);return v==null?null:{location:{pathname:v,search:d,hash:p,state:f,key:g},navigationType:a}},[l,c,d,p,f,g,a]);return y==null?null:_.createElement(rl.Provider,{value:u},_.createElement(zy.Provider,{children:n,value:y}))}new Promise(()=>{});function $3(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,a)=>{if(!_.isValidElement(r))return;let i=[...e,a];if(r.type===_.Fragment){n.push.apply(n,$3(r.props.children,i));return}r.type!==du&&Et(!1),!r.props.index||!r.props.children||Et(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=$3(r.props.children,i)),n.push(o)}),n}function iK(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:_.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:_.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:_.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
* React Router DOM v6.22.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Cc(){return Cc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cc.apply(this,arguments)}function HM(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function oK(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sK(t,e){return t.button===0&&(!e||e==="_self")&&!oK(t)}const lK=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],uK=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],cK="6";try{window.__reactRouterVersion=cK}catch{}function dK(t,e){return Nq({basename:e?.basename,future:Cc({},e?.future,{v7_prependBasename:!0}),history:YH({window:e?.window}),hydrationData:e?.hydrationData||pK(),routes:t,mapRouteProperties:iK,window:e?.window}).initialize()}function pK(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Cc({},e,{errors:hK(e.errors)})),e}function hK(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,a]of e)if(a&&a.__type==="RouteErrorResponse")n[r]=new S3(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let i=window[a.__subType];if(typeof i=="function")try{let o=new i(a.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let i=new Error(a.message);i.stack="",n[r]=i}}else n[r]=a;return n}const qM=_.createContext({isTransitioning:!1}),fK=_.createContext(new Map),mK="startTransition",KM=AR[mK],gK="flushSync",XM=TH[gK];function yK(t){KM?KM(t):t()}function Kf(t){XM?XM(t):t()}class bK{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function vK(t){let{fallbackElement:e,router:n,future:r}=t,[a,i]=_.useState(n.state),[o,s]=_.useState(),[l,u]=_.useState({isTransitioning:!1}),[c,d]=_.useState(),[p,f]=_.useState(),[g,y]=_.useState(),v=_.useRef(new Map),{v7_startTransition:b}=r||{},x=_.useCallback(R=>{b?yK(R):R()},[b]),w=_.useCallback((R,T)=>{let{deletedFetchers:$,unstable_flushSync:P,unstable_viewTransitionOpts:D}=T;$.forEach(z=>v.current.delete(z)),R.fetchers.forEach((z,q)=>{z.data!==void 0&&v.current.set(q,z.data)});let B=n.window==null||typeof n.window.document.startViewTransition!="function";if(!D||B){P?Kf(()=>i(R)):x(()=>i(R));return}if(P){Kf(()=>{p&&(c&&c.resolve(),p.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let z=n.window.document.startViewTransition(()=>{Kf(()=>i(R))});z.finished.finally(()=>{Kf(()=>{d(void 0),f(void 0),s(void 0),u({isTransitioning:!1})})}),Kf(()=>f(z));return}p?(c&&c.resolve(),p.skipTransition(),y({state:R,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(s(R),u({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[n.window,p,c,v,x]);_.useLayoutEffect(()=>n.subscribe(w),[n,w]),_.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new bK)},[l]),_.useEffect(()=>{if(c&&o&&n.window){let R=o,T=c.promise,$=n.window.document.startViewTransition(async()=>{x(()=>i(R)),await T});$.finished.finally(()=>{d(void 0),f(void 0),s(void 0),u({isTransitioning:!1})}),f($)}},[x,o,c,n.window]),_.useEffect(()=>{c&&o&&a.location.key===o.location.key&&c.resolve()},[c,p,a.location,o]),_.useEffect(()=>{!l.isTransitioning&&g&&(s(g.state),u({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),y(void 0))},[l.isTransitioning,g]),_.useEffect(()=>{},[]);let S=_.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:R=>n.navigate(R),push:(R,T,$)=>n.navigate(R,{state:T,preventScrollReset:$?.preventScrollReset}),replace:(R,T,$)=>n.navigate(R,{replace:!0,state:T,preventScrollReset:$?.preventScrollReset})}),[n]),C=n.basename||"/",E=_.useMemo(()=>({router:n,navigator:S,static:!1,basename:C}),[n,S,C]);return _.createElement(_.Fragment,null,_.createElement(qf.Provider,{value:E},_.createElement(Ly.Provider,{value:a},_.createElement(fK.Provider,{value:v.current},_.createElement(qM.Provider,{value:l},_.createElement(aK,{basename:C,location:a.location,navigationType:a.historyAction,navigator:S,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},a.initialized||n.future.v7_partialHydration?_.createElement(xK,{routes:n.routes,future:n.future,state:a}):e))))),null)}function xK(t){let{routes:e,future:n,state:r}=t;return Wq(e,void 0,r,n)}const wK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,O3=_.forwardRef(function(t,e){let{onClick:n,relative:r,reloadDocument:a,replace:i,state:o,target:s,to:l,preventScrollReset:u,unstable_viewTransition:c}=t,d=HM(t,lK),{basename:p}=_.useContext(rl),f,g=!1;if(typeof l=="string"&&kK.test(l)&&(f=l,wK))try{let x=new URL(window.location.href),w=l.startsWith("//")?new URL(x.protocol+l):new URL(l),S=ys(w.pathname,p);w.origin===x.origin&&S!=null?l=S+w.search+w.hash:g=!0}catch{}let y=zq(l,{relative:r}),v=EK(l,{replace:i,state:o,target:s,preventScrollReset:u,relative:r,unstable_viewTransition:c});function b(x){n&&n(x),x.defaultPrevented||v(x)}return _.createElement("a",Cc({},d,{href:f||y,onClick:g||a?n:b,ref:e,target:s}))}),gp=_.forwardRef(function(t,e){let{"aria-current":n="page",caseSensitive:r=!1,className:a="",end:i=!1,style:o,to:s,unstable_viewTransition:l,children:u}=t,c=HM(t,uK),d=oo(s,{relative:c.relative}),p=Sc(),f=_.useContext(Ly),{navigator:g,basename:y}=_.useContext(rl),v=f!=null&&IK(d)&&l===!0,b=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,x=p.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(x=x.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&y&&(w=ys(w,y)||w);const S=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let C=x===b||!i&&x.startsWith(b)&&x.charAt(S)==="/",E=w!=null&&(w===b||!i&&w.startsWith(b)&&w.charAt(b.length)==="/"),R={isActive:C,isPending:E,isTransitioning:v},T=C?n:void 0,$;typeof a=="function"?$=a(R):$=[a,C?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(R):o;return _.createElement(O3,Cc({},c,{"aria-current":T,className:$,ref:e,style:P,to:s,unstable_viewTransition:l}),typeof u=="function"?u(R):u)});function SK(t){let{getKey:e,storageKey:n}=t;return NK({getKey:e,storageKey:n}),null}var By;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(By||(By={}));var M3;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(M3||(M3={}));function QM(t){let e=_.useContext(qf);return e||Et(!1),e}function CK(t){let e=_.useContext(Ly);return e||Et(!1),e}function EK(t,e){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:s}=e===void 0?{}:e,l=Bq(),u=Sc(),c=oo(t,{relative:o});return _.useCallback(d=>{if(sK(d,n)){d.preventDefault();let p=r!==void 0?r:xc(u)===xc(c);l(t,{replace:p,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:s})}},[u,l,c,r,a,n,t,i,o,s])}const YM="react-router-scroll-positions";let jy={};function NK(t){let{getKey:e,storageKey:n}=t===void 0?{}:t,{router:r}=QM(By.UseScrollRestoration),{restoreScrollPosition:a,preventScrollReset:i}=CK(M3.UseScrollRestoration),{basename:o}=_.useContext(rl),s=Sc(),l=Jq(),u=Zq();_.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),TK(_.useCallback(()=>{if(u.state==="idle"){let c=(e?e(s,l):null)||s.key;jy[c]=window.scrollY}try{sessionStorage.setItem(n||YM,JSON.stringify(jy))}catch{}window.history.scrollRestoration="auto"},[n,e,u.state,s,l])),typeof document<"u"&&(_.useLayoutEffect(()=>{try{let c=sessionStorage.getItem(n||YM);c&&(jy=JSON.parse(c))}catch{}},[n]),_.useLayoutEffect(()=>{let c=e&&o!=="/"?(p,f)=>e(Cc({},p,{pathname:ys(p.pathname,o)||p.pathname}),f):e,d=r?.enableScrollRestoration(jy,()=>window.scrollY,c);return()=>d&&d()},[r,o,e]),_.useLayoutEffect(()=>{if(a!==!1){if(typeof a=="number"){window.scrollTo(0,a);return}if(s.hash){let c=document.getElementById(decodeURIComponent(s.hash.slice(1)));if(c){c.scrollIntoView();return}}i!==!0&&window.scrollTo(0,0)}},[s,a,i]))}function TK(t,e){let{capture:n}=e||{};_.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("pagehide",t,r),()=>{window.removeEventListener("pagehide",t,r)}},[t,n])}function IK(t,e){e===void 0&&(e={});let n=_.useContext(qM);n==null&&Et(!1);let{basename:r}=QM(By.useViewTransitionState),a=oo(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=ys(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ys(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Dy(a.pathname,o)!=null||Dy(a.pathname,i)!=null}const _K="modulepreload",RK=function(t){return"/"+t},ZM={},JM=function(t,e,n){let r=Promise.resolve();if(e&&e.length>0){const a=document.getElementsByTagName("link");r=Promise.all(e.map(i=>{if(i=RK(i),i in ZM)return;ZM[i]=!0;const o=i.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(n)for(let u=a.length-1;u>=0;u--){const c=a[u];if(c.href===i&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${s}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":_K,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((u,c)=>{l.addEventListener("load",u),l.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})}))}return r.then(()=>t()).catch(a=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a})};function $K(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:a,onRegisteredSW:i,onRegisterError:o}=t;let s,l;const u=async(d=!0)=>{await l};async function c(){if("serviceWorker"in navigator){if(s=await JM(()=>import("./workbox-window.prod.es5-prqDwDSL.js"),R0([])).then(({Workbox:d})=>new d("/sw.js",{scope:"/",type:"classic"})).catch(d=>{o?.(d)}),!s)return;s.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),s.addEventListener("installed",d=>{d.isUpdate===!1&&r?.()}),s.register({immediate:e}).then(d=>{i?i("/sw.js",d):a?.(d)}).catch(d=>{o?.(d)})}}return l=c(),u}const Xf=V.createContext({theme:"material",dark:!0,touchRipple:!0});function OK(t,e){return typeof window>"u"?_.useEffect(t,e):_.useLayoutEffect(t,e)}const eP=function(t,e){e===void 0&&(e=!0);const[n,r]=_.useState(t);return OK(()=>{if(e){if(t==="ios"||t==="material")n!==t&&r(t);else if(n==="parent"&&typeof window<"u"&&typeof document<"u"){const a=document.documentElement;a&&(a.classList.contains("ios")?r("ios"):(a.classList.contains("md")||a.classList.contains("material"))&&r("material"))}}},[t]),e?n:t},MK=t=>{const{theme:e,dark:n,touchRipple:r=!0,autoThemeDetection:a=!0,children:i}=t,o=eP(e,a);return V.createElement(Xf.Provider,{value:{theme:o,dark:n,touchRipple:r}},i)};function F(){const t=[];for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>{typeof i=="object"&&i.constructor===Object?Object.keys(i).forEach(o=>{i[o]&&t.push(o)}):Array.isArray(i)?t.push(...i):typeof i=="function"?t.push(i()):i&&i.value?t.push(i.value):i&&t.push(i)});const a=[];return t.forEach(i=>{a.indexOf(i)<0&&a.push(i)}),a.filter(i=>!!i).join(" ")}const ar=function(t,e){return e===void 0&&(e=""),!e||typeof e!="string"?t:["static","relative","absolute","fixed","sticky"].filter(n=>e.indexOf(n)>=0).length>0?"":t},PK=(t,e,n)=>{const{safeAreas:r}=t;return F(e==="ios"&&"k-ios",e==="material"&&"k-material","k-app w-full h-full min-h-screen",r&&"safe-areas",ar("relative",n),n)};function P3(){return P3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P3.apply(this,arguments)}const tP=_.forwardRef((t,e)=>{const{component:n="div",className:r,theme:a="material",dark:i=!0,touchRipple:o=!0,safeAreas:s=!0,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=eP(a),g=PK({...t,safeAreas:s},f,r);return V.createElement(MK,{theme:f,dark:i,touchRipple:o,autoThemeDetection:!1},V.createElement(d,P3({ref:c,className:g},p),l))});tP.displayName="App";const F3=(t,e,n)=>{if(typeof t=="string")return t;const r=[t.common,t[e]];return n&&t[n]&&(typeof t[n]=="string"?r.push(t[n]):r.push(t[n].common,t[n][e])),r},FK=(t,e,n)=>{const r={},a=["common","ios","material"];return Object.keys(t).forEach(i=>{const o=i==="base"?n:"";if(!(typeof t[i]!="string"&&Object.keys(t[i]).filter(l=>!a.includes(l)).length>0)){r[i]=F(F3(t[i],e),o);return}r[i]={};const s=F3(t[i],e);r[i].default=F(s,o),Object.keys(t[i]).filter(l=>!a.includes(l)).forEach(l=>{r[i][l]=F(s,F3(t[i],e,l),o)})}),r},ut=function(t){let{ios:e,material:n}=t===void 0?{}:t,r=_.useContext(Xf).theme||"ios";return e&&(r="ios"),n&&(r="material"),(a,i)=>FK(a,r,i)},AK=(t,e)=>({base:{common:F("transition-transform z-40 left-1/2 bottom-0 transform -translate-x-1/2 max-w-md w-full overflow-hidden",ar("fixed",e)),ios:"pt-2 px-2 pb-2-safe duration-300",material:"pb-safe last-child-hairline-b-none rounded-t-2xl duration-400 ease-material-in",opened:"",closed:"translate-y-full"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}});function A3(){return A3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A3.apply(this,arguments)}const DK=_.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,opened:o,backdrop:s=!0,onBackdropClick:l,children:u,...c}=t,d=_.useRef(null);_.useImperativeHandle(e,()=>({el:d.current}));const p=o?"opened":"closed",f=n,g={...c},y=ut({ios:a,material:i})(AK(t,r),r);return V.createElement(V.Fragment,null,s&&V.createElement("div",{className:y.backdrop[p],onClick:l}),V.createElement(f,A3({ref:d,className:y.base[p]},g),u))});DK.displayName="Actions";const LK=t=>{const{dividers:e}=t;return{base:{common:"relative",ios:"mt-2 first:mt-0 last-child-hairline-b-none",material:F(e&&"hairline-b")}}};function D3(){return D3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D3.apply(this,arguments)}const zK=_.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,dividers:o=!0,children:s,...l}=t,u=_.useRef(null);_.useImperativeHandle(e,()=>({el:u.current}));const c=n,d={...l},p=ut({ios:a,material:i})(LK({dividers:o,...t}),r);return V.createElement(c,D3({ref:u,className:p.base},d),s)});zK.displayName="ActionsGroup";const wn=function(t){let{ios:e,material:n}=t===void 0?{}:t,r=_.useContext(Xf).theme||"ios";return e&&(r="ios"),n&&(r="material"),r};class BK{constructor(e,n,r){const a=this;if(!e)return;a.el=e;const{left:i,top:o,width:s,height:l}=e.getBoundingClientRect(),u={x:n-i,y:r-o};let c=Math.max((l**2+s**2)**.5,48);const d=e.classList.contains("k-touch-ripple-inset");d&&(c=Math.max(Math.min(s,l),48));const p=typeof window<"u"&&window.getComputedStyle(e,null).getPropertyValue("overflow")==="hidden";if(!d&&p){const g=((u.x-s/2)**2+(u.y-l/2)**2)**.5,y=(c/2+g)/(c/2);a.rippleTransform=`translate3d(0px, 0px, 0) scale(${y})`}else a.rippleTransform=`translate3d(${-u.x+s/2}px, ${-u.y+l/2}px, 0) scale(1)`;a.rippleWaveEl=document.createElement("span"),a.rippleWaveEl.classList.add("k-touch-ripple-wave"),a.rippleWaveEl.setAttribute("hidden",""),a.rippleWaveEl.style=`
      width: ${c}px;
      height: ${c}px;
      margin-top:-${c/2}px;
      margin-left:-${c/2}px;
      left:${u.x}px;
      top:${u.y}px; --k-ripple-transform: ${a.rippleTransform}`,e.insertAdjacentElement("afterbegin",a.rippleWaveEl);const f=()=>{a.rippleWaveEl.removeEventListener("animationend",f),a.rippleWaveEl&&(a.rippleWaveEl.classList.contains("k-touch-ripple-wave-out")||(a.rippleWaveEl.classList.add("k-touch-ripple-wave-in"),a.shouldBeRemoved&&a.out()))};return a.rippleWaveEl.addEventListener("animationend",f),a}destroy(){let e=this;e.rippleWaveEl&&e.el.removeChild(e.rippleWaveEl),Object.keys(e).forEach(n=>{e[n]=null,delete e[n]}),e=null}out(){const e=this,{rippleWaveEl:n}=this;clearTimeout(e.removeTimeout),n.classList.add("k-touch-ripple-wave-out"),e.removeTimeout=setTimeout(()=>{e.destroy()},300);const r=()=>{e.rippleWaveEl.removeEventListener("animationend",r),clearTimeout(e.removeTimeout),e.destroy()};e.rippleWaveEl.addEventListener("animationend",r)}remove(){const e=this;e.shouldBeRemoved||(e.removeTimeout=setTimeout(()=>{e.destroy()},400),e.shouldBeRemoved=!0,e.rippleWaveEl.classList.contains("k-touch-ripple-wave-in")&&e.out())}}const jo=(t,e,n)=>{const r=_.useContext(Xf);n||(n=t);const a=_.useRef(null),i=()=>{a.current&&a.current.remove(),a.current=null},o=f=>{a.current=new BK(t.current,f.pageX,f.pageY)},s=()=>{i()},l=()=>{i()},u=()=>{if(!r.touchRipple)return;const f=n.current;f.addEventListener("pointerdown",o),f.addEventListener("pointermove",s),f.addEventListener("pointerup",l),f.addEventListener("pointercancel",l),f.addEventListener("contextmenu",l)},c=()=>{const f=n.current;f.removeEventListener("pointerdown",o),f.removeEventListener("pointermove",s),f.removeEventListener("pointerup",l),f.removeEventListener("pointercancel",l),f.removeEventListener("contextmenu",l)},d=()=>{!n||!n.current||!e||u()},p=()=>{!n||!n.current||!e||c()};_.useEffect(()=>(d(),()=>p()))},Rt=()=>{const t=_.useContext(Xf);return e=>t.dark?e:""},jK=(t,e,n)=>{const{fontSizeIos:r,fontSizeMaterial:a,bold:i,dividers:o}=t;return{base:{common:F("flex items-center w-full px-4 relative z-10 overflow-hidden",o&&"hairline-b"),ios:F("h-14",e.textIos,e.bgIos,e.activeBgIos,r,"first:rounded-t-xl last:rounded-b-xl justify-center",i&&"font-semibold"),material:F("h-12",e.textMaterial,e.bgMaterial,e.activeBgMaterial,a,"justify-start",n("dark:touch-ripple-white"),i&&"font-medium")}}},UK=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-white",e("dark:bg-neutral-800")),bgMaterial:F("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),activeBgIos:F("active:bg-neutral-200",e("dark:active:bg-neutral-700")),activeBgMaterial:"",textIos:"text-primary",textMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t}};function L3(){return L3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L3.apply(this,arguments)}const VK=_.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,bold:s,boldIos:l=!1,boldMaterial:u=!1,fontSizeIos:c="text-xl",fontSizeMaterial:d="text-base",href:p,touchRipple:f=!0,dividers:g=void 0,children:y,...v}=t,b=_.useRef(null);_.useImperativeHandle(e,()=>({el:b.current}));let x=n;typeof t.component>"u"&&(p||p==="")&&(x="a");const w={href:p,...v},S=wn({ios:i,material:o}),C=ut({ios:i,material:o}),E=Rt();jo(b,S==="material"&&f);const R=UK(a,E),T=C(jK({fontSizeIos:c,fontSizeMaterial:d,bold:typeof s>"u"?S==="ios"?l:u:s,dividers:typeof g>"u"?S==="ios":g,...t},R,E),r);return V.createElement(x,L3({ref:b,role:"button",tabIndex:"0",className:T.base},w),y)});VK.displayName="ActionsButton";const WK=(t,e)=>{const{fontSizeIos:n,fontSizeMaterial:r,dividers:a}=t;return{base:{common:F(`flex items-center w-full px-4 relative z-10 overflow-hidden ${e.activeBg}`,a&&"hairline-b"),ios:F("h-14",e.bgIos,e.textIos,n,"first:rounded-t-xl last:rounded-b-xl justify-center"),material:F("h-12",e.bgMaterial,e.textMaterial,r,"font-medium","justify-start")}}},GK=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-white",e("dark:bg-neutral-800")),bgMaterial:F("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),textIos:F("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),textMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function z3(){return z3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z3.apply(this,arguments)}const HK=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,fontSizeIos:s="text-sm",fontSizeMaterial:l="text-sm",dividers:u=void 0,children:c,...d}=t,p=_.useRef(null);_.useImperativeHandle(e,()=>({el:p.current}));const f=n,g={...d},y=wn({ios:i,material:o}),v=ut({ios:i,material:o}),b=Rt(),x=GK(a,b),w=v(WK({fontSizeIos:s,fontSizeMaterial:l,dividers:typeof u>"u"?y==="ios":u,...t},x),r);return V.createElement(f,z3({ref:p,className:w.base},g),c)});HK.displayName="ActionsLabel";const qK=(t,e)=>({base:{common:`${e.text} ${e.bg} inline-flex items-center justify-center rounded-full leading-none`,ios:"font-semibold",material:"font-medium",sm:"text-2xs min-w-4 min-h-4 px-0.5",md:"text-xs min-w-5 min-h-5 px-1.5 py-0.5"}}),KK=function(t){return t===void 0&&(t={}),{bg:"bg-primary",text:"text-white",...t}};function B3(){return B3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B3.apply(this,arguments)}const nP=_.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,small:i,ios:o,material:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=ut({ios:o,material:s}),g=KK(a),y=i?"sm":"md",v=f(qK(t,g),r);return V.createElement(d,B3({ref:c,className:v.base[y]},p),l)});nP.displayName="Badge";const XK=(t,e,n)=>{const{inset:r,nested:a,margin:i,padding:o,strong:s,outline:l}=t;return{base:{common:F("text-sm z-10",ar("relative",n),!r&&!a&&l&&"hairline-t hairline-b",r&&l&&"border",r&&"px-4",!r&&"pl-4-safe pr-4-safe",!a&&i,(s||l)&&o),ios:F(e.textIos,s&&e.strongBgIos,r&&l&&e.outlineIos),material:F(e.textMaterial,s&&e.strongBgMaterial,r&&l&&e.outlineMaterial)},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"}}},QK=function(t,e){return t===void 0&&(t={}),{outlineIos:F("border-black border-opacity-20",e("dark:border-white dark:border-opacity-15")),outlineMaterial:F("border-md-light-outline",e("border-md-dark-outline")),strongBgIos:F("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),strongBgMaterial:F("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),textIos:"",textMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t}};function j3(){return j3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j3.apply(this,arguments)}const ba=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,margin:i="my-8",padding:o="py-4",inset:s,insetIos:l,insetMaterial:u,strong:c,strongIos:d,strongMaterial:p,outline:f,outlineIos:g,outlineMaterial:y,nested:v,ios:b,material:x,children:w,...S}=t,C=_.useRef(null);_.useImperativeHandle(e,()=>({el:C.current}));const E=n,R={...S},T=wn({ios:b,material:x}),$=ut({ios:b,material:x}),P=Rt(),D=QK(a,P),B=typeof c>"u"?T==="ios"?d:p:c,z=typeof f>"u"?T==="ios"?g:y:f,q=typeof s>"u"?T==="ios"?l:u:s,Y=$(XK({...t,margin:i,padding:o,inset:q,strong:B,outline:z},D,r)),Z=F(Y.base,q&&Y.inset,r);return V.createElement(E,j3({ref:C,className:Z},R),w)});ba.displayName="Block";const YK=(t,e)=>{const{inset:n}=t;return{base:{common:F("mb-8 flex items-center -mt-6 text-sm",n?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:e.textIos,material:e.textMaterial}}},ZK=function(t,e){return t===void 0&&(t={}),{textIos:F("text-black text-opacity-75",e("dark:text-white dark:text-opacity-75")),textMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function U3(){return U3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U3.apply(this,arguments)}const JK=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,inset:s,insetIos:l,insetMaterial:u,children:c,...d}=t,p=_.useRef(null);_.useImperativeHandle(e,()=>({el:p.current}));const f=wn(),g=typeof s>"u"?f==="ios"?l:u:s,y=n,v={...d},b=ut({ios:i,material:o}),x=Rt(),w=ZK(a,x),S=b(YK({...t,inset:g},w),r);return V.createElement(y,U3({ref:p,className:S.base},v),c)});JK.displayName="BlockFooter";const eX=(t,e)=>{const{inset:n}=t;return{base:{common:F("mt-8 flex items-center -mb-6 text-sm",n?"pl-8-safe pr-8-safe":"pl-4-safe pr-4-safe"),ios:e.textIos,material:e.textMaterial}}},tX=function(t,e){return t===void 0&&(t={}),{textIos:F("text-black",e("dark:text-white")),textMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function V3(){return V3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V3.apply(this,arguments)}const nX=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,inset:s,insetIos:l,insetMaterial:u,children:c,...d}=t,p=_.useRef(null);_.useImperativeHandle(e,()=>({el:p.current}));const f=n,g={...d},y=wn(),v=typeof s>"u"?y==="ios"?l:u:s,b=ut({ios:i,material:o}),x=Rt(),w=tX(a,x),S=b(eX({...t,inset:v},w),r);return V.createElement(f,V3({ref:p,className:S.base},g),c)});nX.displayName="BlockHeader";const rX=(t,e)=>{const{withBlock:n,medium:r,large:a}=t;return{base:{common:`pl-4-safe pr-4-safe mt-8 flex justify-between items-center ${n?"-mb-6":"mb-2"}`,ios:F(`font-semibold ${e.textIos}`,a&&"text-[1.5rem]",r&&"text-[1.125rem]",!r&&!a&&"text-[1rem]"),material:F(`font-medium ${e.textMaterial}`,a&&"text-[1.375rem]",r&&"text-[1rem]",!r&&!a&&"text-[0.875rem]")}}},aX=function(t,e){return t===void 0&&(t={}),{textIos:"",textMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function W3(){return W3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W3.apply(this,arguments)}const iX=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,withBlock:i=!0,medium:o,large:s,ios:l,material:u,children:c,...d}=t,p=_.useRef(null);_.useImperativeHandle(e,()=>({el:p.current}));const f=n,g={...d},y=ut({ios:l,material:u}),v=Rt(),b=aX(a,v),x=y(rX({...t,withBlock:i},b),r);return V.createElement(f,W3({ref:p,className:x.base},g),c)});iX.displayName="BlockTitle";const oX=t=>{const{fontSizeIos:e,fontSizeMaterial:n}=t;return{base:{common:"flex items-center justify-start overflow-auto whitespace-nowrap py-1 px-0 space-x-3 no-scrollbar rtl:space-x-reverse",ios:e,material:n}}};function G3(){return G3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G3.apply(this,arguments)}const sX=_.forwardRef((t,e)=>{const{component:n="div",className:r,fontSizeIos:a="text-[17px]",fontSizeMaterial:i="text-[14px]",ios:o,material:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=ut({ios:o,material:s})(oX({...t,fontSizeIos:a,fontSizeMaterial:i}),r);return V.createElement(d,G3({ref:c,className:f.base},p),l)});sX.displayName="Breadcrumbs";const lX=(t,e)=>{const{active:n}=t;return{base:{common:F("flex items-center overflow-hidden"),ios:F(e.textIos,e.bgIos,n?e.textActiveIos:e.textIos,n&&"font-semibold"),material:F("font-medium px-2 py-1 rounded-lg",e.bgMaterial,n?e.textActiveMaterial:e.textMaterial)}}},uX=function(t,e){return t===void 0&&(t={}),{textIos:F("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),textMaterial:F("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),bgIos:"",bgMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),textActiveIos:F("text-black",e("dark:text-white")),textActiveMaterial:F("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),...t}};function H3(){return H3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H3.apply(this,arguments)}const cX=_.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,colors:o,active:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=ut({ios:a,material:i}),g=Rt(),y=uX(o,g),v=f(lX({...t},y),r);return V.createElement(d,H3({ref:c,className:v.base,role:"menuitem",tabIndex:"0"},p),l)});cX.displayName="BreadcrumbsItem";const dX=()=>({base:{common:"w-3 opacity-35 flex justify-center",ios:"",material:""},icon:{common:"rtl:rotate-180",ios:"h-3",material:"h-2.5"}});function q3(){return q3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q3.apply(this,arguments)}const rP=t=>V.createElement("svg",q3({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"14",viewBox:"0 0 12 20",fill:"currentcolor"},t),V.createElement("path",{d:"M11.518406,10.5648622 C11.4831857,10.6163453 11.4426714,10.6653692 11.3968592,10.7111814 L2.5584348,19.5496058 C1.9753444,20.1326962 1.03186648,20.1345946 0.44199608,19.5447242 C-0.14379032,18.9589377 -0.14922592,18.0146258 0.43711448,17.4282854 L7.87507783,9.9903221 L0.4431923,2.5584366 C-0.1398981,1.9753462 -0.1417965,1.0318683 0.448074,0.4419979 C1.0338604,-0.1437886 1.9781723,-0.1492241 2.56451268,0.4371163 L11.4029371,9.2755407 C11.7556117,9.6282153 11.7969345,10.1725307 11.518406,10.5648622 Z"}));function K3(){return K3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K3.apply(this,arguments)}const pX=_.forwardRef((t,e)=>{const{component:n="div",className:r,ios:a,material:i,children:o,...s}=t,l=_.useRef(null);_.useImperativeHandle(e,()=>({el:l.current}));const u=n,c={...s},d=ut({ios:a,material:i})(dX({...t}),r);return V.createElement(u,K3({ref:l,className:d.base},c),V.createElement(rP,{className:d.icon}),o)});pX.displayName="BreadcrumbsSeparator";const hX=(t,e)=>({base:{common:`flex items-center cursor-pointer space-x-0.75 rtl:space-x-reverse ${e.bg}`,ios:F("rounded active:opacity-30 px-1.5 h-[1em] duration-300 active:duration-0",e.bgIos),material:F("py-3 px-2 rounded-lg",e.bgMaterial)},dot:{common:`w-1 h-1 rounded-full ${e.dotBg}`,ios:e.dotBgIos,material:e.dotBgMaterial}}),fX=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-black bg-opacity-15",e("dark:bg-white dark:bg-opacity-15")),bgMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),dotBgIos:F("bg-black",e("dark:bg-white")),dotBgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function X3(){return X3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X3.apply(this,arguments)}const mX=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,...l}=t,u=_.useRef(null);_.useImperativeHandle(e,()=>({el:u.current}));const c=Rt(),d=fX(a,c),p=n,f={...l},g=ut({ios:i,material:o})(hX({...t},d),r);return V.createElement(p,X3({ref:u,role:"button",tabIndex:"0",className:g.base},f),V.createElement("span",{className:g.dot}),V.createElement("span",{className:g.dot}),V.createElement("span",{className:g.dot}),s)});mX.displayName="BreadcrumbsCollapsed";const gX=(t,e,n,r)=>{const{inline:a,segmented:i,segmentedStrong:o,segmentedActive:s,disabled:l}=t;return{base:{common:F("flex text-center justify-center items-center appearance-none py-1 transition-colors focus:outline-none cursor-pointer select-none overflow-hidden z-10",a?"inline-flex":"w-full flex",ar("relative",n),l&&"pointer-events-none",o&&s&&"k-segmented-strong-button-active"),ios:"uppercase duration-100 font-semibold px-2",material:"duration-300 font-medium px-4",square:{ios:i&&!o?"first:rounded-s last:rounded-e":"rounded",material:i&&!o?"first:rounded-lg-s last:rounded-lg-e":"rounded-lg"},rounded:i&&!o?"":"rounded-full"},style:{fill:{common:F(l&&F(e.disabledBg,e.disabledText)),ios:F(l?F(e.disabledBg,e.disabledText):`${e.fillTextIos} ${e.fillBgIos} ${e.fillActiveBgIos}`),material:F(l?F(e.disabledBg,e.disabledText):F(e.fillTextMaterial,e.fillBgMaterial,e.fillActiveBgMaterial,e.fillTouchRipple))},outline:{common:F(l?F(e.disabledText,e.disabledBorder):F("active:bg-opacity-15",e.touchRipple)),ios:F(!i&&"border-2",!l&&!i&&e.outlineBorderIos,!l&&F(e.textIos,e.activeBgIos)),material:F(!i&&"border",!l&&!i&&e.outlineBorderMaterial,!l&&F(e.textMaterial,e.activeBgMaterial))},clear:{common:F(l?e.disabledText:`active:bg-opacity-15 ${e.touchRipple}`),ios:!l&&F(e.textIos,e.activeBgIos),material:!l&&F(e.textMaterial,e.activeBgMaterial)},tonal:{common:l?F(e.disabledBg,e.disabledText):F(e.touchRipple),ios:!l&&F(e.tonalTextIos,e.tonalBgIos,e.activeBgIos,"bg-opacity-15 active:bg-opacity-25"),material:!l&&F(e.tonalTextMaterial,e.tonalBgMaterial,e.activeBgMaterial)},segmentedStrong:F("active:bg-black active:bg-opacity-10",r("dark:active:bg-white dark:active:bg-opacity-5 dark:touch-ripple-white")),segmentedStrongActive:"duration-0"},size:{small:{ios:"text-xs h-7",material:"text-sm h-8"},medium:{common:"text-sm",ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},raised:"shadow active:shadow-lg"}},yX=function(t,e){return t===void 0&&(t={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:F("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:F("text-white"),fillTextMaterial:F("text-md-light-on-primary",e("dark:text-md-dark-on-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillBgIos:"bg-primary",fillBgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),fillTouchRipple:F("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),tonalBgIos:"bg-primary",tonalBgMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),tonalTextIos:"text-primary",tonalTextMaterial:F("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),touchRipple:"touch-ripple-primary",disabledText:F("text-black text-opacity-30",e("dark:text-white dark:text-opacity-30")),disabledBg:F("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-10")),disabledBorder:F("border-black border-opacity-10",e("dark:border-white dark:border-opacity-10")),...t}};function Q3(){return Q3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Q3.apply(this,arguments)}const kr=_.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,disabled:s,href:l,outline:u,outlineIos:c,outlineMaterial:d,clear:p,clearIos:f,clearMaterial:g,tonal:y,tonalIos:v,tonalMaterial:b,rounded:x,roundedIos:w,roundedMaterial:S,small:C,smallIos:E,smallMaterial:R,large:T,largeIos:$,largeMaterial:P,raised:D,raisedIos:B,raisedMaterial:z,inline:q,segmented:Y,segmentedStrong:Z,segmentedActive:H,touchRipple:L=!0,children:Q,...J}=t,te=_.useRef(null);_.useImperativeHandle(e,()=>({el:te.current}));let oe=n;typeof t.component>"u"&&(l||l==="")&&(oe="a");const he={href:l,...J},ae=wn({ios:i,material:o}),de=ut({ios:i,material:o}),ke=Rt();jo(te,ae==="material"&&L);const K=(Pe=>{const We={};return Object.keys(Pe).forEach($e=>{We[$e]=typeof Pe[$e]>"u"?ae==="ios"?t[`${$e}Ios`]:t[`${$e}Material`]:Pe[$e]}),We})({outline:u,clear:p,tonal:y,rounded:x,small:C,large:T,raised:D}),se=K.large?"large":K.small?"small":"medium";let pe=K.outline?"outline":K.clear||Y&&!H?"clear":K.tonal?"tonal":"fill";Z&&(pe="segmentedStrong"),Z&&H&&(pe="segmentedStrongActive");const Ne=yX(a,ke),Se=de(gX({...t,...K},Ne,r,ke)),Te=F(Se.base[K.rounded?"rounded":"square"],Se.style[pe],Se.size[se],K.raised&&Se.raised,r);return V.createElement(oe,Q3({ref:te,className:Te,disabled:s,role:"button",tabIndex:"0"},he),Q)});kr.displayName="Button";const bX=(t,e)=>{const{margin:n,headerDivider:r,footerDivider:a,contentWrapPadding:i}=t;return{base:{common:F(n,"overflow-hidden"),ios:F("rounded-lg",e.bgIos,e.textIos),material:F("rounded-2xl",e.bgMaterial,e.textMaterial),plain:"",raised:"shadow",outline:{common:F("border"),ios:e.outlineIos,material:e.outlineMaterial}},header:{common:F(r&&"border-b","p-4"),ios:F(r&&e.outlineIos,t.headerFontSizeIos),material:F(r&&e.outlineMaterial,t.headerFontSizeMaterial)},content:F(i,"text-sm"),footer:{common:F(r&&"border-t","text-sm p-4"),ios:F(e.footerTextIos,a&&e.outlineIos),material:F(e.footerTextMaterial,a&&e.outlineMaterial)}}},vX=function(t,e){return t===void 0&&(t={}),{textIos:F(""),textMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),bgIos:F("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),bgMaterial:F("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),footerTextIos:F("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),footerTextMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),outlineIos:F("border-black border-opacity-20",e("dark:border-white dark:border-opacity-20")),outlineMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function Y3(){return Y3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y3.apply(this,arguments)}const aP=_.forwardRef((t,e)=>{const{component:n="div",className:r,margin:a="m-4",colors:i,header:o,footer:s,ios:l,material:u,headerFontSizeIos:c="text-[17px]",headerFontSizeMaterial:d="text-[22px]",contentWrap:p=!0,contentWrapPadding:f="p-4",raised:g,raisedIos:y,raisedMaterial:v,outline:b,outlineIos:x,outlineMaterial:w,headerDivider:S=!1,footerDivider:C=!1,children:E,...R}=t,T=_.useRef(null);_.useImperativeHandle(e,()=>({el:T.current}));const $=n,P={...R},D=wn(),B=ut({ios:l,material:u}),z=Rt(),q=vX(i,z),Y=typeof b>"u"?D==="ios"?x:w:b,Z=typeof g>"u"?D==="ios"?y:v:g,H=Y?"outline":Z?"raised":"plain",L=B(bX({...t,margin:a,contentWrapPadding:f,headerDivider:S,footerDivider:C,headerFontSizeIos:c,headerFontSizeMaterial:d,outline:Y,raised:Z},q),r);return V.createElement($,Y3({ref:T,className:L.base[H]},P),o&&V.createElement("div",{className:L.header},o),p?V.createElement("div",{className:L.content},E):E,s&&V.createElement("div",{className:L.footer},s))});aP.displayName="Card";const xX=(t,e,n,r)=>({base:F("cursor-pointer inline-flex align-middle",ar("relative",n),r("dark:touch-ripple-white")),iconWrap:{common:F("flex items-center justify-center text-white",r("dark:text-black")),ios:"w-5.5 h-5.5 rounded-full border",material:"w-4.5 h-4.5 rounded-sm border-2",notChecked:{ios:e.borderIos,material:e.borderMaterial},checked:{ios:`${e.bgCheckedIos} ${e.borderCheckedIos}`,material:`${e.bgCheckedMaterial} ${e.borderCheckedMaterial}`}},icon:{notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:F("bg-white w-3/4",r("dark:bg-black")),ios:"h-0.5 rounded-full",material:"h-0.5"},input:"hidden"}),wX=function(t,e){return t===void 0&&(t={}),{borderIos:F("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),borderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:F("border-md-light-primary",e("dark:border-md-dark-primary")),...t}};function Uy(){return Uy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uy.apply(this,arguments)}const iP=t=>{const{ios:e,material:n,fill:r,...a}=t;return wn({ios:e,material:n})==="ios"?V.createElement("svg",Uy({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},a),V.createElement("path",{fill:r||"currentColor",fillRule:"evenodd",d:"M10.6461792,0.119820016 C11.0022676,0.346673312 11.1070333,0.819240884 10.88018,1.17532923 L5.59004012,9.47918548 C5.44456028,9.70754308 5.19802823,9.83254199 4.94596825,9.83309245 C4.59813173,9.83364386 4.39457446,9.67360825 4.28105047,9.53831563 L1.17887189,5.84128316 C0.907480501,5.5178515 0.949667479,5.03565214 1.27309914,4.76426075 C1.59653081,4.49286936 2.07873017,4.53505633 2.35012156,4.858488 L4.8346263,7.81909046 L9.59067001,0.353820775 C9.81752331,-0.00226757161 10.2900909,-0.10703328 10.6461792,0.119820016 Z",transform:"translate(4 5.483)"})):V.createElement("svg",Uy({xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 18 14",fill:"currentcolor"},a),V.createElement("polygon",{fill:r,points:"6 11.17 1.83 7 .41 8.41 6 14 18 2 16.59 .59"}))};function Z3(){return Z3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z3.apply(this,arguments)}const kX=_.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,indeterminate:s,name:l,value:u,disabled:c,readOnly:d,onChange:p,ios:f,material:g,touchRipple:y=!0,children:v,...b}=t,x=_.useRef(null),w=_.useRef(null);_.useImperativeHandle(e,()=>({el:w.current,inputEl:x.current}));const S=n,C={...b},E=wn({ios:f,material:g}),R=ut({ios:f,material:g}),T=Rt();jo(w,E==="material"&&y);const $=wX(a,T),P=o||i&&!p||s?"checked":"notChecked",D=R(xX(t,$,r,T),r);return _.useEffect(()=>{x.current&&(x.current.indeterminate=!!s)},[s]),V.createElement(S,Z3({ref:w,className:D.base},C),V.createElement("input",{ref:x,type:"checkbox",name:l,value:u,disabled:c,readOnly:d,checked:o,defaultChecked:i,onChange:p,className:D.input}),V.createElement("i",{className:D.iconWrap[P]},s?V.createElement("span",{className:D.indeterminateIcon}):V.createElement(iP,{ios:f,material:g,className:D.icon[P]})),v)});kX.displayName="Checkbox";const SX=(t,e)=>({base:{common:"text-sm inline-flex items-center justify-center align-middle rounded-full px-3",ios:"rounded-full h-7",material:"rounded-lg h-8 font-medium",fill:{ios:F(e.fillBg||e.fillBgIos,e.fillText||e.fillTextIos),material:F(e.fillBg||e.fillBgMaterial,e.fillText||e.fillTextMaterial)},outline:{common:"border",ios:F(e.outlineText||e.outlineTextIos,e.outlineBorder||e.outlineBorderIos),material:F(e.outlineText||e.outlineTextMaterial,e.outlineBorder||e.outlineBorderMaterial)}},media:{common:"-my-1 me-1 select-none",ios:"-ms-3",material:"-ms-2"},deleteButton:"-me-2 -my-1 ms-1 h-full flex items-center justify-center w-6 cursor-pointer opacity-50 active:opacity-100 select-none"}),CX=function(t,e){return t===void 0&&(t={}),{fillTextIos:"text-current",fillTextMaterial:F("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),fillBgIos:F("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-10")),fillBgMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),outlineTextIos:F("text-current"),outlineTextMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),outlineBorderIos:F("border-black border-opacity-20",e("dark:border-white dark:border-opacity-20")),outlineBorderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function Vy(){return Vy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vy.apply(this,arguments)}const Qf=t=>{let{theme:e,...n}=t;return e==="ios"?V.createElement("svg",Vy({xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 28 28",fill:"currentcolor"},n),V.createElement("path",{d:"M14,0 C21.7319865,0 28,6.2680135 28,14 C28,21.7319865 21.7319865,28 14,28 C6.2680135,28 0,21.7319865 0,14 C0,6.2680135 6.2680135,0 14,0 Z M18.9393398,6.93933983 L14,11.8786797 L9.06066017,6.93933983 L6.93933983,9.06066017 L11.8786797,14 L6.93933983,18.9393398 L9.06066017,21.0606602 L14,16.1213203 L18.9393398,21.0606602 L21.0606602,18.9393398 L16.1213203,14 L21.0606602,9.06066017 L18.9393398,6.93933983 Z"})):V.createElement("svg",Vy({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),V.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.47 2 2 6.47 2 12C2 17.53 6.47 22 12 22C17.53 22 22 17.53 22 12C22 6.47 17.53 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM12 10.59L15.59 7L17 8.41L13.41 12L17 15.59L15.59 17L12 13.41L8.41 17L7 15.59L10.59 12L7 8.41L8.41 7L12 10.59Z",fill:"currentcolor"}))};function J3(){return J3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J3.apply(this,arguments)}const EX=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,media:i,deleteButton:o,onDelete:s,ios:l,material:u,outline:c,children:d,...p}=t,f=_.useRef(null);_.useImperativeHandle(e,()=>({el:f.current}));const g=n,y={...p},v=ut({ios:l,material:u}),b=wn({ios:l,material:u}),x=Rt(),w=c?"outline":"fill",S=CX(a,x),C=v(SX(t,S),r);return V.createElement(g,J3({ref:f,className:C.base[w]},y),i&&V.createElement("div",{className:C.media},i),d,o&&V.createElement("div",{className:C.deleteButton,role:"button",tabIndex:"0",onClick:s},V.createElement(Qf,{theme:b,className:"h-4 w-4"})))});EX.displayName="Chip";const NX=(t,e,n,r)=>{let{hasButtons:a}=r;const{titleFontSizeMaterial:i,titleFontSizeIos:o,translucent:s,sizeIos:l,sizeMaterial:u}=t;return{base:{common:F("left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40 max-h-full overflow-hidden duration-400",ar("fixed",n)),ios:F("rounded-xl max-w-full",l,e.bgIos,s&&"translucent"),material:F("rounded-[1.75rem] p-6 max-w-[90%]",u,e.bgMaterial),opened:"",closed:"scale-[0.85] opacity-0 pointer-events-none"},contentWrap:{common:"flex flex-col items-center justify-center",material:"space-y-3",ios:F("p-4 space-y-1 relative",a&&"hairline-b")},title:{common:F("w-full"),ios:F(e.titleIos,o,"font-semibold text-center"),material:F(e.titleMaterial,i)},content:{common:F("text-sm w-full"),ios:F(e.contentTextIos,"text-center"),material:F(e.contentTextMaterial)},buttons:{common:"flex items-center",ios:F("justify-center last-child-hairline-r-none"),material:F("justify-end pt-6 space-x-2 rtl:space-x-reverse")},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},TX=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-white",e("dark:bg-neutral-800")),bgMaterial:F("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),titleIos:"",titleMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),contentTextIos:"",contentTextMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function eE(){return eE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eE.apply(this,arguments)}const IX=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,opened:i,backdrop:o=!0,onBackdropClick:s,translucent:l=!0,sizeIos:u="w-[16.875rem]",sizeMaterial:c="w-[19.5rem]",titleFontSizeIos:d="text-[18px]",titleFontSizeMaterial:p="text-[24px]",title:f,content:g,buttons:y,ios:v,material:b,children:x,...w}=t,S=_.useRef(null);_.useImperativeHandle(e,()=>({el:S.current}));const C=i?"opened":"closed",E=n,R={...w},T=ut({ios:v,material:b}),$=Rt(),P=TX(a,$),D=T(NX({...t,titleFontSizeIos:d,titleFontSizeMaterial:p,translucent:l,sizeIos:u,sizeMaterial:c},P,r,{hasButtons:!!y}),r);return V.createElement(V.Fragment,null,o&&V.createElement("div",{className:D.backdrop[C],onClick:s}),V.createElement(E,eE({ref:S,className:D.base[C]},R),V.createElement("div",{className:D.contentWrap},f&&V.createElement("div",{className:D.title},f),(g||x)&&V.createElement("div",{className:D.content},g,x)),y&&V.createElement("div",{className:D.buttons},y)))});IX.displayName="Dialog";const _X=(t,e)=>{const{strong:n,disabled:r}=t;return{base:{ios:F("text-center text-[17px] flex items-center justify-center h-11 w-full hairline-r rtl:hairline-l relative first:rounded-bl-xl last:rounded-br-xl rtl:first:rounded-br-xl rtl:first:rounded-bl-none rtl:last:rounded-bl-xl rtl:last:rounded-br-none",r?e.disabledTextIos:e.textIos,n&&"font-semibold",!r&&e.activeBgIos)}}},RX=function(t,e){return t===void 0&&(t={}),{activeBgIos:F("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),textIos:"text-primary",disabledTextIos:F("text-black text-opacity-30",e("dark:text-white dark:text-opacity-30")),...t}};function Wy(){return Wy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wy.apply(this,arguments)}const $X=_.forwardRef((t,e)=>{const{component:n="button",className:r,colors:a,ios:i,material:o,disabled:s,strong:l,strongIos:u,strongMaterial:c,children:d,...p}=t,f=_.useRef(null);_.useImperativeHandle(e,()=>({el:f.current}));const g={...p},y=wn({ios:i,material:o}),v=ut({ios:i,material:o}),b=Rt(),x=RX(a,b),w=typeof l>"u"?y==="ios"?u:c:l,S=v(_X({...t,strong:w},x),r),C=n;return y==="ios"?V.createElement(C,Wy({className:S.base,disabled:s,role:"button",tabIndex:"0"},g),d):V.createElement(kr,Wy({component:n,inline:!0,rounded:!0,disabled:s,clear:!w,className:r},g),d)});$X.displayName="DialogButton";const OX=(t,e)=>({base:{common:"flex items-center justify-center space-x-2 rtl:!space-x-reverse cursor-pointer overflow-hidden select-none",ios:`h-12 duration-100 rounded-full shadow-lg ${e.bgIos} ${e.activeBgIos} ${e.textIos}`,material:`duration-300 rounded-2xl shadow ${e.bgMaterial} ${e.activeBgMaterial} ${e.textMaterial} ${e.touchRipple}`,iconOnly:{ios:"w-12",material:"w-14 h-14"},withText:{common:"px-4",material:"h-14"}},text:{common:"text-sm",ios:"font-semibold uppercase",material:"font-medium"},icon:{common:"h-1em w-1em",ios:"text-icon-ios",material:"text-icon-material"}}),MX=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-primary",bgMaterial:F("bg-md-light-primary-container",e("dark:bg-md-dark-primary-container")),activeBgIos:"active:bg-ios-primary-shade",activeBgMaterial:"",textIos:"text-white",textMaterial:F("text-md-light-on-primary-container",e("dark:text-md-dark-on-primary-container")),touchRipple:F("touch-ripple-primary",e("dark:touch-ripple-white")),...t}};function tE(){return tE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tE.apply(this,arguments)}const PX=_.forwardRef((t,e)=>{const{component:n="a",className:r,colors:a,href:i,text:o,textPosition:s="after",icon:l,ios:u,material:c,touchRipple:d=!0,children:p,...f}=t,g=_.useRef(null);_.useImperativeHandle(e,()=>({el:g.current}));const y=n,v={...f},b=wn({ios:u,material:c}),x=ut({ios:u,material:c}),w=Rt();jo(g,b==="material"&&d);const S=MX(a,w),C=x(OX(t,S),r);return V.createElement(y,tE({className:o?C.base.withText:C.base.iconOnly,href:i,ref:g,role:"button",tabIndex:"0"},v),o&&s==="before"&&V.createElement("span",{className:C.text},o),l&&V.createElement("span",{className:C.icon},l),o&&s==="after"&&V.createElement("span",{className:C.text},o),p)});PX.displayName="Fab";const FX=(t,e)=>({base:`${ar("relative",e)} inline-block not-italic`,badge:"absolute -end-1.5 -top-0.5"});function nE(){return nE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nE.apply(this,arguments)}const La=_.forwardRef((t,e)=>{const{component:n="i",className:r,ios:a,material:i,badge:o,badgeColors:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=ut(),g=wn(),y=f(FX(t,r),r);return V.createElement(d,nE({ref:c,className:y.base},p),g==="ios"?a:i,typeof o<"u"&&o!==null&&V.createElement(nP,{small:!0,className:y.badge,colors:s},o),l)});La.displayName="Icon";const AX=(t,e,n)=>{let{textColor:r,needsTouchRipple:a}=e;const{iconOnly:i,tabbar:o}=t;return{base:{common:F(!o&&r,"inline-flex space-x-1 rtl:!space-x-reverse justify-center items-center cursor-pointer select-none",a&&`touch-ripple-primary ${ar("relative",n)} z-10`),notTabbar:{ios:"active:opacity-30 duration-300 active:duration-0",material:a?"":"active:opacity-55"}},tabbar:{common:F(ar("relative",n),"w-full h-full duration-300"),material:"font-medium text-sm z-10",active:"k-tabbar-link-active",inactive:""},toolbar:{common:F("h-full max-h-12",i&&"k-touch-ripple-inset"),material:"px-3 text-sm font-medium"},navbar:{common:F("h-full max-h-12",i&&"k-touch-ripple-inset"),material:"px-3"}}},DX=function(t,e){return t===void 0&&(t={}),{textIos:"text-primary",textMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),navbarTextIos:"text-primary",navbarTextMaterial:"",...t}};function rE(){return rE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rE.apply(this,arguments)}const Nt=_.forwardRef((t,e)=>{const{component:n="a",className:r,colors:a,navbar:i,toolbar:o,iconOnly:s,linkProps:l={},tabbar:u,tabbarActive:c,touchRipple:d=void 0,ios:p,material:f,onClick:g,children:y,...v}=t,b=_.useRef(null);_.useImperativeHandle(e,()=>({el:b.current}));const x=n,w={...l,...v},S=wn({ios:p,material:f}),C=ut({ios:p,material:f}),E=Rt(),R=S==="material"&&(d||(o||u||i)&&typeof d>"u");jo(b,R);const T=DX(a,E),$=t.navbar?S==="material"?T.navbarTextMaterial:T.navbarTextIos:S==="material"?T.textMaterial:T.textIos,P=u&&!c?T.tabbarInactive:$,D=c?"active":"inactive",B=C(AX(t,{textColor:P,needsTouchRipple:R},r)),z=F(B.base[u?"default":"notTabbar"],o&&B.toolbar,i&&B.navbar,u&&B.tabbar[D],r);return V.createElement(x,rE({ref:b,className:z},w,{role:"link",tabIndex:"0",onClick:g}),y)});Nt.displayName="Link";const LX=(t,e,n)=>{const{nested:r,margin:a,inset:i,strong:o,outline:s}=t;return{base:{common:F(!r&&a,!i&&!r&&s&&"hairline-t hairline-b",i&&s&&"border",ar("relative",n),"z-10"),ios:F(o&&e.strongBgIos,i&&s&&e.outlineIos),material:F(o&&e.strongBgMaterial,i&&s&&e.outlineMaterial)},ul:{common:F(i&&"no-safe-areas","last-child-hairline-b-none")},inset:{common:"ml-4-safe mr-4-safe overflow-hidden",ios:"rounded-lg",material:"rounded-2xl"},menuList:{common:"py-1"}}},zX=function(t,e){return t===void 0&&(t={}),{outlineIos:F("border-black border-opacity-20",e("dark:border-white dark:border-opacity-15")),outlineMaterial:F("border-md-light-outline",e("border-md-dark-outline")),strongBgIos:F("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),strongBgMaterial:F("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),...t}},oP=V.createContext(!1);function aE(){return aE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aE.apply(this,arguments)}const yp=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,margin:i="my-8",nested:o,menuList:s,dividers:l,dividersIos:u=!0,dividersMaterial:c=!1,inset:d,insetIos:p,insetMaterial:f,strong:g,strongIos:y,strongMaterial:v,outline:b,outlineIos:x,outlineMaterial:w,ios:S,material:C,children:E,...R}=t,T=_.useRef(null);_.useImperativeHandle(e,()=>({el:T.current}));const $=n,P={...R},D=wn(),B=ut({ios:S,material:C}),z=Rt(),q=typeof l>"u"?D==="ios"?u:c:l,Y=typeof g>"u"?D==="ios"?y:v:g,Z=typeof b>"u"?D==="ios"?x:w:b,H=typeof d>"u"?D==="ios"?p:f:d,L=zX(a,z),Q=B(LX({...t,margin:i,inset:H,strong:Y,outline:Z},L,r)),J=F(Q.base,H&&Q.inset,s&&Q.menuList,r);return V.createElement(oP.Provider,{value:q},V.createElement($,aE({ref:T,className:J},P),V.createElement("ul",{className:Q.ul},E)))});yp.displayName="List";function iE(){return iE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iE.apply(this,arguments)}const BX=_.forwardRef((t,e)=>{const{children:n,...r}=t,a=_.useRef(null);_.useImperativeHandle(e,()=>({el:a.current}));const i={...r};return V.createElement("li",{ref:a},V.createElement(yp,iE({nested:!0},i),n))});BX.displayName="ListGroup";const jX=(t,e,n)=>{const{dividers:r}=t;return{base:"",button:{common:F(ar("relative",n),r&&"hairline-b active:hairline-transparent",`flex items-center justify-center px-4 space-x-1 w-full duration-300 active:duration-0 focus:outline-none ${e.touchRipple} overflow-hidden select-none`),ios:F("h-11",e.textIos,e.activeBgIos,e.activeBgIos),material:F("h-12",e.textMaterial,e.activeBgMaterial)}}},UX=function(t,e){return t===void 0&&(t={}),{textIos:"text-primary",textMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),activeBgIos:"active:bg-primary active:bg-opacity-15",activeBgMaterial:"",touchRipple:"touch-ripple-primary",...t}},sP=()=>_.useContext(oP);function Gy(){return Gy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gy.apply(this,arguments)}const VX=_.forwardRef((t,e)=>{const{component:n="li",className:r,colors:a,href:i,target:o,type:s,value:l,linkComponent:u="a",linkProps:c={},ios:d,material:p,touchRipple:f=!0,children:g,...y}=t,v=_.useRef(null),b=_.useRef(null),x=sP();_.useImperativeHandle(e,()=>({el:v.current}));const w=n,S={...y},C=wn({ios:d,material:p}),E=ut({ios:d,material:p});jo(b,C==="material"&&f);const R=Rt(),T=UX(a,R),$=E(jX({...t,dividers:x},T,r),r),P=!!i||i==="",D={href:!P||i===!0||i===!1?void 0:i||"",target:o,type:s,value:l,...c},B=P?u:"button";return V.createElement(w,Gy({ref:v,className:$.base},S),V.createElement(B,Gy({ref:b,className:$.button},D),g))});VX.displayName="ListButton";const WX=(t,e,n)=>{let{className:r,isMediaItem:a,theme:i,textColor:o,needsTouchRipple:s,isMenuListItemActive:l,autoStrongTitle:u}=n;const{menuListItem:c,dividers:d,mediaClassName:p="",mediaClass:f="",innerClassName:g="",innerClass:y="",contentClassName:v="",contentClass:b="",titleWrapClassName:x="",titleWrapClass:w="",titleFontSizeIos:S,titleFontSizeMaterial:C,strongTitle:E,contacts:R}=t;return{base:{common:c?`${o} py-1`:"",material:R&&"[&:nth-child(2)]:-mt-12"},itemContent:{common:F(`flex items-center ${v||b}`),ios:F(!c&&F(e.primaryTextIos,"ps-4-safe"),c&&"rounded-lg ml-2-safe mr-2-safe ps-2"),material:F(!c&&F(e.primaryTextMaterial,a?"ml-2-safe mr-2-safe rounded-2xl ps-2":"ps-4-safe",R&&"ml-10"),c&&"rounded-full min-h-[3.5rem] ml-4-safe mr-4-safe ps-4"),link:F("duration-300 active:duration-0 cursor-pointer select-none",d&&i==="ios"&&"active:hairline-transparent",s&&F("relative overflow-hidden z-10",e.touchRipple),F(l?i==="ios"?e.menuListItemActiveBgIos:e.menuListItemActiveBgMaterial:c?i==="ios"?e.menuListItemBgIos:e.menuListItemBgMaterial:i==="ios"?e.activeBgIos:e.activeBgMaterial))},media:{common:`shrink-0 flex ${p||f}`,ios:"py-2 me-4",material:F("py-3",c?"me-3":"me-4")},inner:{common:F("w-full relative",!c&&d&&"hairline-b",g||y),ios:"py-2.5 pe-4-safe",material:F("py-3",a&&!c?"pe-2":"pe-4-safe")},titleWrap:{common:F(`flex justify-between items-center ${x||w}`),ios:F(!c&&S),material:F(!c&&C)},title:{common:"shrink",menuListItem:F("text-sm",E===!0||u?"font-semibold":"font-medium"),strong:{common:"",ios:"font-semibold",material:"font-medium"}},after:{common:F("shrink-0 ms-auto ps-1 flex items-center space-x-1"),ios:e.secondaryTextIos,material:F(e.secondaryTextMaterial,"text-sm")},chevron:"opacity-20 shrink-0 ms-3 rtl:rotate-180",subtitle:"text-sm",text:{common:F("text-sm line-clamp-2"),ios:e.secondaryTextIos,material:e.secondaryTextMaterial},header:{common:"text-xs mb-0.5",ios:e.secondaryTextIos,material:e.secondaryTextMaterial},footer:{common:F("text-xs mt-0.5"),ios:e.secondaryTextIos,material:e.secondaryTextMaterial},groupTitle:{common:F("pl-4-safe pr-4-safe py-1 flex items-center z-20",ar("relative",r)),ios:`h-8${d?" hairline-t":""} -mt-px ${S} ${e.secondaryTextIos} ${e.groupTitleBgIos} ${R&&F("font-semibold top-11-safe sticky",e.groupTitleContactsTextIos,e.groupTitleContactsBgIos)}`,material:`h-12 ${C} ${e.secondaryTextMaterial} ${e.groupTitleBgMaterial} ${R&&F("pointer-events-none overflow-visible h-12 box-border text-xl font-medium flex max-w-full items-center px-4 top-16-safe sticky",e.groupTitleContactsTextMaterial,e.groupTitleContactsBgMaterial)}`}}},GX=function(t,e){return t===void 0&&(t={}),{primaryTextIos:F("text-black",e("dark:text-white")),primaryTextMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),secondaryTextIos:F("text-black text-opacity-55",e("dark:text-white dark:text-opacity-55")),secondaryTextMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),activeBgIos:F("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),activeBgMaterial:"",groupTitleBgIos:F("bg-ios-light-surface-variant",e("dark:bg-ios-dark-surface-variant")),groupTitleBgMaterial:F("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),menuListItemTextIos:F("text-black",e("dark:text-white")),menuListItemTextMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),menuListItemBgIos:F("active:bg-black active:bg-opacity-10",e("dark:active:bg-white dark:active:bg-opacity-10")),menuListItemBgMaterial:F("bg-md-light-surface-1",e("dark:bg-md-dark-surface-1")),menuListItemActiveTextIos:F("text-primary",e("dark:text-white")),menuListItemActiveTextMaterial:F("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),menuListItemActiveBgIos:F("bg-primary bg-opacity-15",e("dark:bg-primary")),menuListItemActiveBgMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),touchRipple:F("touch-ripple-black",e("dark:touch-ripple-white")),groupTitleContactsTextIos:F("text-opacity-90",e("dark:text-opacity-90")),groupTitleContactsTextMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),groupTitleContactsBgIos:F(e("dark:bg-[#323234]")),groupTitleContactsBgMaterial:F("bg-transparent",e("dark:bg-transparent")),...t}};function Hy(){return Hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hy.apply(this,arguments)}const bp=_.forwardRef((t,e)=>{const{component:n="li",colors:r,className:a,mediaClassName:i="",innerClassName:o="",innerChildren:s,contentClassName:l="",contentChildren:u,titleWrapClassName:c="",titleFontSizeIos:d="text-[17px]",titleFontSizeMaterial:p="text-[16px]",title:f,subtitle:g,text:y,after:v,media:b,header:x,footer:w,menuListItem:S,menuListItemActive:C,groupTitle:E,strongTitle:R="auto",label:T,chevron:$=void 0,chevronIos:P=!0,chevronMaterial:D=!0,chevronIcon:B,href:z,target:q,link:Y,linkComponent:Z="a",linkProps:H={},dividers:L,contacts:Q,ios:J,material:te,touchRipple:oe=!0,children:he,...ae}=t,de=_.useRef(null),ke=_.useRef(null);_.useImperativeHandle(e,()=>({el:ke.current}));const K=n,se={...ae},pe=typeof L>"u"?sP():L,Ne=wn({ios:J,material:te}),Se=ut({ios:J,material:te}),Te=Rt(),Pe=typeof $>"u"?Ne==="ios"?P:D:$,We=GX(r,Te),$e=S&&C,lt=We[`${$e?"menuListItemActiveText":S?"menuListItemText":"text"}${Ne==="ios"?"Ios":"Material"}`],Ze=!!z||z===""||S||Y,Je=!!T,Ve=Ne==="material"&&(Je||Ze)&&oe;jo(de,Ve);const Vt=z===!0||z===!1||typeof z>"u"?void 0:z||"",$t=Ze?Z:Je?"label":"div",Wt=Ze?{href:Vt,target:q,...H}:{},Gt=f&&(g||y),Ot=R==="auto"&&Gt,wt=Se(WX({...t,titleFontSizeIos:d,titleFontSizeMaterial:p,dividers:pe,strongTitle:R,mediaClassName:i,innerClassName:o,contentClassName:l,titleWrapClassName:c},We,{isMediaItem:Gt,theme:Ne,textColor:lt,needsTouchRipple:Ve,isMenuListItemActive:$e,darkClasses:Te,autoStrongTitle:Ot,className:a}),a),ln=Ze||Je?wt.itemContent.link:wt.itemContent.default,hn=S?wt.title.menuListItem:R===!0||Ot?wt.title.strong:wt.title.default;return E?V.createElement(K,{className:F(wt.groupTitle,a)},f,he):V.createElement(K,Hy({ref:ke,className:wt.base},se),V.createElement($t,Hy({ref:de,className:ln},Wt),b&&V.createElement("div",{className:wt.media},b),V.createElement("div",{className:wt.inner},x&&V.createElement("div",{className:wt.header},x),(f||v)&&V.createElement("div",{className:wt.titleWrap},f&&V.createElement("div",{className:hn},f),v&&V.createElement("div",{className:wt.after},v),Ze&&Pe&&!S&&(B||V.createElement(rP,{className:wt.chevron}))),g&&V.createElement("div",{className:wt.subtitle},g),y&&V.createElement("div",{className:wt.text},y),w&&V.createElement("div",{className:wt.footer},w),s),u),he)});bp.displayName="ListItem";function oE(){return oE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oE.apply(this,arguments)}const HX=t=>V.createElement("svg",oE({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"5",viewBox:"0 0 8 5",fill:"currentcolor"},t),V.createElement("polygon",{fillRule:"evenodd",points:"0 0 8 0 4 5"})),qX=(t,e,n)=>{let{isFloatingTransformed:r,isFocused:a,darkClasses:i,getLabelColor:o,hasLabel:s}=n;const{error:l,type:u,outline:c,inputClassName:d="",inputClass:p=""}=t;return{base:{common:"",ios:F(c&&"my-4"),material:F("py-2")},itemContent:{common:"relative",ios:F(c&&"ml-4 mr-4 rounded-lg",!c&&e.bgIos),material:F("min-h-[56px] ml-4 mr-4",c?F("rounded"):F(e.bgMaterial,"rounded-t relative "))},inner:{common:"",material:F(c?"pt-4 pb-4":"pt-2 pb-2"),stacked:"",floating:""},label:{common:F("duration-200 text-xs",o(),c&&"flex"),ios:F(c&&"-mt-4"),material:F(c&&"-mt-4"),stacked:"",floating:{common:F("pointer-events-none duration-200 transform origin-left rtl:origin-right max-w-[66%]",r&&"scale-133"),ios:r?c?"translate-y-6":"translate-y-4":"",material:r?c?"translate-y-8":"translate-y-3":""}},labelText:{common:F(c&&"relative p-1 block -m-1"),ios:F(c&&F("-top-1",e.outlineLabelBgIos)),material:F(c&&F("-top-2",e.outlineLabelBgMaterial))},inputWrap:{common:"relative",ios:F((!s||c)&&"-mt-2.5","-mb-2.5"),stacked:"",floating:""},media:{material:""},titleWrap:{material:`duration-200 ${o()}`},input:{common:`block text-base appearance-none w-full focus:outline-none bg-transparent ${d||p}`,ios:"h-10",material:"h-6",notFloating:{common:F("placeholder-black placeholder-opacity-30",i("dark:placeholder-white dark:placeholder-opacity-30")),material:F(u==="textarea"&&"py-1"),ios:F(u==="textarea"&&"py-2")},floating:r?"placeholder-transparent":F("placeholder-black placeholder-opacity-30",i("dark:placeholder-white dark:placeholder-opacity-30"))},errorInfo:{common:"text-xs relative z-10",ios:"mt-1",material:""},error:e.errorText,info:"opacity-50",clearButton:{common:"absolute end-0 top-1/2 transform -translate-y-1/2 cursor-pointer",ios:F("w-3.5 h-3.5 opacity-45 active:opacity-30",e.labelTextIos),material:F("w-6 h-6 active:opacity-55",e.labelTextMaterial)},dropdown:"absolute end-0 top-1/2 transform -translate-y-1/2 pointer-events-none opacity-50",border:{common:"pointer-events-none absolute start-0 bottom-0 duration-200 w-full",ios:c&&F(l?e.errorBorder:a?e.outlineBorderFocusIos:e.outlineBorderIos,"h-full border rounded-lg -z-10"),material:F(l?e.errorBorder:a?e.outlineBorderFocusMaterial:e.outlineBorderMaterial,c&&F("h-full border rounded -z-10",a&&"border-2"),!c&&F("border-b h-px origin-bottom",a&&"scale-y-[2]"))}}},KX=function(t,e){return t===void 0&&(t={}),{bgIos:"",bgMaterial:F("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),outlineBorderIos:F("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),outlineBorderFocusIos:"border-primary",outlineBorderMaterial:F("border-md-light-on-surface",e("dark:border-md-dark-on-surface")),outlineBorderFocusMaterial:F("border-md-light-primary",e("dark:border-md-dark-primary")),outlineLabelBgIos:F("bg-ios-light-surface-1",e("dark:bg-ios-dark-surface-1")),outlineLabelBgMaterial:F("bg-md-light-surface",e("dark:bg-md-dark-surface")),labelTextIos:"",labelTextFocusIos:"",labelTextMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),labelTextFocusMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),errorText:"text-red-500",errorBorder:"border-red-500",...t}};function sE(){return sE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sE.apply(this,arguments)}const XX=_.forwardRef((t,e)=>{const{component:n="li",className:r,colors:a,label:i,floatingLabel:o,outline:s,outlineIos:l,outlineMaterial:u,media:c,input:d,info:p,error:f,clearButton:g,dropdown:y,inputId:v,inputStyle:b,inputClassName:x="",name:w,value:S,defaultValue:C,type:E="text",inputMode:R,readOnly:T,required:$,disabled:P,placeholder:D,size:B,accept:z,autoComplete:q,autoCorrect:Y,autoCapitalize:Z,spellCheck:H,autoFocus:L,autoSave:Q,max:J,min:te,step:oe,maxLength:he,minLength:ae,multiple:de,pattern:ke,tabIndex:K,onInput:se,onChange:pe,onFocus:Ne,onBlur:Se,onClear:Te,ios:Pe,material:We,children:$e,...lt}=t,Ze=_.useRef(null),Je=_.useRef(null);_.useImperativeHandle(e,()=>({el:Je.current,inputEl:Ze.current}));const[Ve,Vt]=_.useState(!1),$t=wn({ios:Pe,material:We}),Wt=ut({ios:Pe,material:We}),Gt=Rt(),Ot=KX(a,Gt),wt=i&&o?"floating":"stacked",ln=wt==="floating"?"floating":"notFloating",hn=()=>{if(Ze.current)return Ze.current.value},yr=i&&o&&!(()=>{const Kr=hn();return typeof S>"u"?Kr||Kr===0:S||S===0})()&&!Ve,yn=()=>f?Ot.errorText:$t==="material"?Ve?Ot.labelTextFocusMaterial:Ot.labelTextMaterial:$t==="ios"?Ve?Ot.labelTextFocusIos:Ot.labelTextIos:"",Zn=Kr=>{Vt(!0),Ne&&Ne(Kr)},li=Kr=>{Vt(!1),Se&&Se(Kr)},Xa=typeof s>"u"?$t==="ios"?l:u:s,un=Wt(qX({...t,outline:Xa},Ot,{isFloatingTransformed:yr,isFocused:Ve,darkClasses:Gt,getLabelColor:yn,inputClassName:x,hasLabel:!!i})),la={...lt},Qa=()=>{if(d)return d;const Kr=E==="select"||E==="textarea"?E:"input",es=Kr==="input";return V.createElement(Kr,{id:v,ref:Ze,className:un.input[ln],style:b,name:w,type:es?E:void 0,placeholder:D,inputMode:R,size:B,accept:z,autoComplete:q,autoCorrect:Y,autoCapitalize:Z,spellCheck:H,autoFocus:L,autoSave:Q,disabled:P,max:J,maxLength:he,min:te,minLength:ae,step:oe,multiple:de,readOnly:T,required:$,pattern:ke,tabIndex:K,value:S,defaultValue:C,onInput:se,onChange:pe,onFocus:Zn,onBlur:li},E==="select"?$e:null)},Ea=V.createElement(V.Fragment,null,f&&f!==!0&&V.createElement("div",{className:F(un.errorInfo,un.error)},f),p&&!f&&V.createElement("div",{className:F(un.errorInfo,un.info)},p)),So=V.createElement(V.Fragment,null,i&&V.createElement("div",{className:un.label[wt]},V.createElement("div",{className:un.labelText},i)),V.createElement("div",{className:un.inputWrap[wt]},Qa(),g&&V.createElement(Qf,{theme:$t,onClick:Te,className:un.clearButton}),y&&V.createElement(HX,{className:un.dropdown})),Ea);return V.createElement(bp,sE({ref:Je,component:n,media:c,className:un.base,title:null,mediaClassName:un.media,innerClassName:un.inner[wt],contentClassName:un.itemContent,titleWrapClassName:un.titleWrap,innerChildren:So,contentChildren:(Xa||$t==="material")&&V.createElement("span",{className:un.border}),dividers:$t==="material"||Xa?!1:void 0},la),E!=="select"?$e:null)});XX.displayName="ListInput";function lE(){return lE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lE.apply(this,arguments)}const QX=_.forwardRef((t,e)=>{const{children:n,...r}=t,a=_.useRef(null);_.useImperativeHandle(e,()=>({el:a.current}));const i={...r};return V.createElement(yp,lE({ref:a,menuList:!0},i),n)});QX.displayName="MenuList";function uE(){return uE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uE.apply(this,arguments)}const YX=_.forwardRef((t,e)=>{const{active:n,href:r,children:a,...i}=t,o=_.useRef(null);_.useImperativeHandle(e,()=>({el:o.current}));const s={...i};return V.createElement(bp,uE({ref:o,menuListItem:!0,menuListItemActive:n,href:r||!1},s),a)});YX.displayName="MenuListItem";const ZX=(t,e)=>{const{type:n}=t;return{message:{common:"max-w-[70%] box-border flex relative z-1 transform translate-z-0 mb-2 first:mt-2"},messageSent:{common:F("self-end",e.messageSent)},messageReceived:{common:e.messageReceived},messageName:{common:"text-xs",ios:F("mb-0.5 ms-4",e.messageNameIos),material:F("ms-4 mb-0.5",e.messageNameMd)},messageHeader:{common:"text-xs",ios:F("mb-0.5 ms-4",e.messageNameIos),material:F("ms-4 mb-0.5",e.messageNameMd)},messageFooter:{common:"text-xs",ios:F("mb-0.5 ms-4",e.messageNameIos),material:F("ms-4 mb-0.5",e.messageNameMd)},messageAvatar:{common:F("rounded-full relative bg-cover self-end shrink-0 me-1.5 w-8 h-8")},messageContent:{common:"flex flex-col"},messageBubble:{...n==="sent"&&{ios:F("rounded-3xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",e.bubbleSentIos),material:F("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4",e.bubbleSentMd)},...n==="received"&&{ios:F("rounded-2xl box-border break-words flex flex-col relative rounded-2xl py-1.5 px-4",e.bubbleReceivedIos),material:F("box-border break-words flex flex-col relative rounded-3xl py-2.5 px-4 ",e.bubbleReceivedMd)}},messageTextHeader:{common:"w-full text-left leading-tight text-sm opacity-80"},messageTextFooter:{common:"w-full text-left leading-tight text-sm opacity-80"},messageText:{common:"w-full text-left leading-tight"}}},JX=function(t,e){return t===void 0&&(t={}),{messageSent:"text-white",messageReceived:"text-inherit",messageNameIos:F("text-black text-opacity-45",e("dark:text-white dark:text-opacity-45")),messageNameMd:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),bubbleSentIos:F("bg-primary"),bubbleSentMd:F("bg-md-light-primary",e("dark:bg-md-dark-primary dark:text-md-dark-on-primary")),bubbleReceivedIos:F("bg-[#e5e5ea]",e("dark:bg-[#252525]")),bubbleReceivedMd:F(e("dark:bg-md-dark-surface-variant"),"bg-[#e5e5ea]"),...t}};function cE(){return cE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cE.apply(this,arguments)}const eQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,text:o,name:s,type:l="sent",header:u,footer:c,textHeader:d,textFooter:p,avatar:f,ios:g,material:y,children:v,...b}=t,x=_.useRef(null);_.useImperativeHandle(e,()=>({el:x.current}));const w=ut({ios:g,material:y}),S=Rt(),C=JX(a,S),E=w(ZX({...t},C)),R=n,T={...b},$=F(r,E.message,{[E.messageSent]:l==="sent",[E.messageReceived]:l==="received"});return V.createElement(R,cE({id:i,ref:x,className:$},T),f&&V.createElement("div",{className:E.messageAvatar},f),V.createElement("div",{className:E.messageContent},s&&V.createElement("div",{className:E.messageName},s),u&&V.createElement("div",{className:E.messageHeader},u),V.createElement("div",{className:E.messageBubble},d&&V.createElement("div",{className:E.messageTextHeader},d),o&&V.createElement("div",{className:E.messageText},o),p&&V.createElement("div",{className:E.messageTextFooter},p)),c&&V.createElement("div",{className:E.messageFooter},c)))});eQ.displayName="Message";const tQ=(t,e,n)=>{let{isFocused:r}=n;const{rightClassName:a="",rightClass:i="",leftClassName:o="",leftClass:s=""}=t;return{base:{common:"fixed bottom-0 start-0 w-full"},toolbar:{material:e.bgMessage},left:{common:F("mt-1 -ms-2",o||s),ios:F("px-2",e.toolbarIconIos),material:F("",e.toolbarIconMd)},right:{common:F("mt-1 -me-2",a||i),ios:F("px-2",e.toolbarIconIos)},messagebarArea:{common:"w-full"},messagebarInput:{common:F("block w-full focus:outline-none resize-none",r&&"outline-offset-0"),ios:F("border h-8 rounded-3xl px-4 leading-4 py-1.5",e.inputBgIos,e.borderIos,e.placeholderIos),material:F("rounded-3xl h-12 px-4 py-4 leading-4 ",e.inputBgMd,e.placeholderMd)}}},nQ=function(t,e){return t===void 0&&(t={}),{toolbarIconIos:F("fill-primary",e("dark:fill-md-dark-primary")),toolbarIconMd:F("fill-black"),inputBgIos:F("bg-transparent"),borderIos:F("border-[#c8c8cd]",e("dark:border-white dark:border-opacity-30")),inputBgMd:F("bg-md-light-surface-2",e("dark:bg-md-dark-surface-variant")),placeholderIos:F(e("dark:placeholder-white dark:placeholder-opacity-40")),placeholderMd:F("placeholder-md-light-on-surface-variant",e("dark:placeholder-md-dark-on-surface-variant")),bgIos:F("bg-white",e("dark:bg-black")),bgMaterial:F("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}},rQ=(t,e,n)=>{const{bgClassName:r="",bgClass:a="",outline:i,translucent:o,innerClassName:s="",innerClass:l="",tabbar:u,tabbarIcons:c,top:d}=t;return{base:{common:F("w-full z-20",ar("relative",n),!d&&"pb-safe")},bg:{common:F("absolute w-full h-full left-0 top-0",i&&(d?"hairline-b":"hairline-t"),r||a),ios:F(e.bgIos,o&&"translucent"),material:F(`${e.bgMaterial}`)},inner:{common:F("flex relative justify-between items-center w-full overflow-hidden",s||l),ios:F("pl-2-safe pr-2-safe",c?"h-12.5":"h-11"),material:F(u?"":"pl-2-safe pr-2-safe",c?"h-20":"h-14")},highlight:{common:F(d?"bottom-0":"top-0","absolute left-0 w-full h-0.5 duration-200 pointer-events-none transition-transform"),ios:e.tabbarHighlightBgIos,material:e.tabbarHighlightBgMaterial}}},aQ=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-ios-light-surface-2",e("dark:bg-ios-dark-surface-2")),bgMaterial:F("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),tabbarHighlightBgIos:"bg-primary",tabbarHighlightBgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function dE(){return dE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dE.apply(this,arguments)}const pE=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,translucent:i=!0,bgClassName:o="",innerClassName:s="",outline:l,tabbar:u,tabbarIcons:c,tabbarLabels:d,top:p,ios:f,material:g,children:y,...v}=t,b=_.useRef(null),x=_.useRef(null);_.useImperativeHandle(e,()=>({el:x.current}));const w=n,[S,C]=_.useState({transform:"",width:""}),E=wn({ios:f,material:g}),R=ut({ios:f,material:g}),T=Rt(),$={...v},P=aQ(a,T),D=R(rQ({...t,outline:typeof l>"u"?E==="ios":l,translucent:i,bgClassName:o,innerClassName:s},P,r),r),B=E==="material"&&u&&!c;return _.useEffect(()=>{if(B&&b.current){const z=b.current.previousElementSibling,q=1/z.children.length*100,Y=[...z.children].indexOf(z.querySelector(".k-tabbar-link-active"));C({...S,width:`${q}%`,transform:`translateX(${Y*100}%)`})}},[y]),V.createElement(w,dE({ref:x,className:D.base},$),V.createElement("div",{className:D.bg}),V.createElement("div",{className:D.inner},y),B&&V.createElement("span",{className:D.highlight,style:S,ref:b}))});pE.displayName="Toolbar";function hE(){return hE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hE.apply(this,arguments)}const iQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,style:o,name:s,placeholder:l="Message",value:u,outline:c=!1,leftClassName:d="",rightClassName:p="",textareaId:f,disabled:g,size:y,left:v,right:b,ios:x,material:w,onInput:S,onChange:C,onFocus:E,children:R,...T}=t,$=_.useRef(null),P=_.useRef(null);_.useImperativeHandle(e,()=>({el:$.current,areaElRef:P.current}));const[D,B]=_.useState(!1),z=ut({ios:x,material:w}),q=Rt(),Y=nQ(a,q),Z=J=>{B(!0),E&&E(J)},H=z(tQ({...t},Y,{isFocused:D})),L=n,Q={...T};return V.createElement(L,hE({ref:$,id:i,style:o,className:H.base},Q),V.createElement(pE,{colors:Y,outline:c},v&&V.createElement("div",{className:H.left},v),V.createElement("div",{className:H.messagebarArea},V.createElement("textarea",{id:f,ref:P,type:"textarea",className:H.messagebarInput,placeholder:l,name:s,size:y,disabled:g,onInput:S,onChange:C,onFocus:Z,value:u})),b&&V.createElement("div",{className:H.right},b)))});iQ.displayName="Messagebar";const oQ=()=>({base:{common:F("flex flex-col relative z-1 px-2"),ios:"mb-12",material:"mb-16"}});function fE(){return fE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fE.apply(this,arguments)}const sQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,id:i,ios:o,material:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=ut({ios:o,material:s})(oQ({...t})),p=n,f={...u};return V.createElement(p,fE({id:i,className:d.base,ref:c},f),l)});sQ.displayName="Messages";const lQ=(t,e)=>({base:{common:F("text-center text-xs leading-none"),ios:F("w-full mt-2.5",e.titleIos),material:F("mt-4",e.titleMd)}}),uQ=function(t,e){return t===void 0&&(t={}),{titleIos:F("text-black text-opacity-45",e("dark:text-white dark:text-opacity-45")),titleMd:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function mE(){return mE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mE.apply(this,arguments)}const cQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,id:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=ut({ios:i,material:o}),p=Rt(),f=uQ(a,p),g=d(lQ({...t},f)),y=n,v={...u};return V.createElement(y,mE({id:s,className:g.base,ref:c},v),l)});cQ.displayName="MessagesTitle";const dQ=(t,e,n)=>{const{outline:r,translucent:a,large:i,medium:o,transparent:s,left:l,right:u,fontSizeIos:c,fontSizeMaterial:d,titleFontSizeIos:p,titleFontSizeMaterial:f,titleLargeFontSizeIos:g,titleLargeFontSizeMaterial:y,titleMediumFontSizeIos:v,titleMediumFontSizeMaterial:b,bgClassName:x="",bgClass:w="",subnavbarClassName:S="",subnavbarClass:C="",innerClassName:E="",innerClass:R="",leftClassName:T="",leftClass:$="",titleClassName:P="",titleClass:D="",subtitleClassName:B="",subtitleClass:z="",rightClassName:q="",rightClass:Y="",centerTitle:Z}=t;return{base:{common:F("w-full z-20 top-0 pt-safe",(i||o)&&"pointer-events-none",ar("sticky",n)),ios:F(c,e.textIos),material:F(d,e.textMaterial)},bg:{common:F("absolute w-full h-full left-0 top-0",r&&"hairline-b",x||w),ios:F(e.bgIos,a&&"translucent"),material:`${e.bgMaterial}`},subnavbar:{common:F("relative flex items-center",S||C,(i||o)&&"pointer-events-auto"),ios:"h-11 pl-2-safe pr-2-safe",material:"h-14 pl-4-safe pr-4-safe"},inner:{common:F("flex relative items-center w-full overflow-hidden",E||R,(i||o)&&"pointer-events-auto z-10"),ios:F("pl-2-safe pr-2-safe h-11",!l&&u?"justify-end":"justify-between"),material:"justify-start h-16 pl-safe pr-safe"},titleContainer:{common:F("flex items-center px-4 relative",(i||o)&&"pointer-events-auto"),ios:F(o&&F(v,"h-11 font-semibold"),i&&F(g,"h-13 font-bold")),material:F(o&&F(b,"h-12 pb-4"),i&&F(y,"h-[5.5rem]"))},left:{common:F("flex justify-center items-center h-full",T||$),ios:"me-2 transform transform-gpu",material:"mx-1"},title:{common:F("whitespace-nowrap leading-tight",P||D,(i||o||s)&&"opacity-0",Z?"absolute top-1/2 left-1/2 transform-gpu -translate-x-1/2 -translate-y-1/2 text-center":"text-start"),ios:F(`${p} font-semibold`,!Z&&"first:mx-2"),material:F(`${f} font-normal`,!Z&&"first:mx-4")},subtitle:{common:F("font-normal leading-none",B||z),ios:"text-2xs opacity-55",material:"text-sm opacity-85"},right:{common:F("flex justify-center items-center h-full",q||Y),ios:F("transform transform-gpu",Z?"ms-2":"ms-auto"),material:"ms-auto me-1"}}},pQ=(t,e)=>({bgIos:F("bg-ios-light-surface-2",e("dark:bg-ios-dark-surface-2")),bgMaterial:F("bg-md-light-surface-2",e("dark:bg-md-dark-surface-2")),textIos:F("text-black",e("dark:text-white")),textMaterial:F("text-md-light-on-surface",e("dark:text-md-dark-on-surface")),...t});function gE(){return gE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gE.apply(this,arguments)}const qy=_.forwardRef((t,e)=>{const{component:n="div",className:r,bgClassName:a="",innerClassName:i="",leftClassName:o="",titleClassName:s="",subtitleClassName:l="",rightClassName:u="",subnavbarClassName:c="",centerTitle:d,colors:p,translucent:f=!0,outline:g,medium:y,large:v,transparent:b,fontSizeIos:x="text-[17px]",fontSizeMaterial:w="text-[16px]",titleFontSizeIos:S="text-[17px]",titleFontSizeMaterial:C="text-[22px]",titleMediumFontSizeIos:E="text-[24px]",titleMediumFontSizeMaterial:R="text-[24px]",titleLargeFontSizeIos:T="text-[34px]",titleLargeFontSizeMaterial:$="text-[28px]",scrollEl:P,left:D,title:B,subtitle:z,right:q,subnavbar:Y,ios:Z,material:H,children:L,...Q}=t,J=_.useRef(null),te=_.useRef(0),oe=_.useRef(null),he=_.useRef(null),ae=_.useRef(null),de=_.useRef(null),ke=_.useRef(null),K=_.useRef(null);_.useImperativeHandle(e,()=>({el:J.current}));const se=n,pe=wn({ios:Z,material:H}),Ne=ut({ios:Z,material:H}),Se=Rt(),Te={...Q},Pe=pQ(p,Se),We=Ve=>{const{scrollTop:Vt}=Ve.target;if(!b&&!v&&!y){K.current&&(de.current&&(de.current.style.opacity=""),oe.current&&(oe.current.style.opacity=""));return}const $t=te.current,Wt=Math.max(Math.min(Vt/$t,1),0);oe.current.style.opacity=b?-.5+Wt*1.5:"",(y||v)&&(oe.current.style.transform=`translateY(-${Wt*$t}px)`),ae.current&&(ae.current.style.transform=`translateY(-${Wt*$t}px)`,ae.current.style.opacity=1-Wt*2),de.current&&(de.current.style.opacity=-.5+Wt*1.5),(y||v)&&ke.current&&(ke.current.style.transform=`translateY(-${Wt*$t}px)`)},$e=()=>typeof P>"u"?J.current&&J.current.parentNode:P.current||P,lt=()=>{if(!v&&!y&&!b){K.current&&(We({target:{scrollTop:0}}),K.current=!1);return}K.current=!0,ae.current?te.current=ae.current.offsetHeight:te.current=he.current.offsetHeight;const Ve=$e();Ve?(Ve.addEventListener("scroll",We),We({target:Ve})):We({target:{scrollTop:0}})},Ze=()=>{const Ve=$e();Ve&&Ve.removeEventListener("scroll",We)};_.useEffect(()=>(lt(),Ze));const Je=Ne(dQ({...t,centerTitle:typeof d>"u"?pe==="ios":d,translucent:f,outline:typeof g>"u"?pe==="ios":g,fontSizeIos:x,fontSizeMaterial:w,titleFontSizeIos:S,titleFontSizeMaterial:C,titleMediumFontSizeIos:E,titleMediumFontSizeMaterial:R,titleLargeFontSizeIos:T,titleLargeFontSizeMaterial:$,bgClassName:a,innerClassName:i,leftClassName:o,titleClassName:s,subtitleClassName:l,rightClassName:u,subnavbarClassName:c},Pe,r),r);return V.createElement(se,gE({ref:J,className:Je.base},Te),V.createElement("div",{className:Je.bg,ref:oe}),V.createElement("div",{className:Je.inner,ref:he},D&&V.createElement("div",{className:Je.left},D),(B||z)&&V.createElement("div",{className:Je.title,ref:de},B,z&&V.createElement("div",{className:Je.subtitle},z)),q&&V.createElement("div",{className:Je.right},q),L),(v||y)&&V.createElement("div",{className:Je.titleContainer,ref:ae},B),Y&&V.createElement("div",{className:Je.subnavbar,ref:ke},Y))});qy.displayName="Navbar";function Ky(){return Ky=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ky.apply(this,arguments)}const lP=t=>{let{theme:e,...n}=t;return e==="ios"?V.createElement("svg",Ky({xmlns:"http://www.w3.org/2000/svg",width:"12",height:"20",viewBox:"0 0 12 20",fill:"currentcolor"},n),V.createElement("path",{d:"M0.18261596,9.4221638 C0.21783626,9.37068075 0.25835058,9.32165682 0.30416276,9.27584463 L9.1425872,0.4374202 C9.7256776,-0.14567018 10.6691555,-0.1475686 11.2590259,0.44230183 C11.8448123,1.02808827 11.8502479,1.97240019 11.2639075,2.55874056 L3.82594417,9.9967039 L11.2578297,17.4285894 C11.8409201,18.0116798 11.8428185,18.9551577 11.252948,19.5450281 C10.6671616,20.1308146 9.7228497,20.1362501 9.13650932,19.5499097 L0.2980849,10.7114853 C-0.0545897,10.3588107 -0.0959125,9.8144953 0.18261596,9.4221638 Z"})):V.createElement("svg",Ky({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentcolor"},n),V.createElement("polygon",{points:"16 7 3.83 7 9.42 1.41 8 0 0 8 8 16 9.41 14.59 3.83 9 16 9"}))},hQ=()=>({base:{common:"cursor-pointer",material:"min-w-12 k-touch-ripple-inset"},icon:"rtl:rotate-180"});function yE(){return yE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yE.apply(this,arguments)}const fQ=_.forwardRef((t,e)=>{const{component:n="a",className:r,text:a="Back",showText:i="auto",ios:o,material:s,onClick:l,children:u,...c}=t,d=_.useRef(null);_.useImperativeHandle(e,()=>({el:d.current}));const p={...c},f=wn({ios:o,material:s}),g=ut({ios:o,material:s}),y=i==="auto"&&f==="ios"||i===!0,v=g(hQ(),r);return V.createElement(Nt,yE({ref:d,component:n,className:v.base,navbar:!0},p,{onClick:l}),V.createElement("span",{className:v.icon},V.createElement(lP,{theme:f})),y&&V.createElement("span",null,a),u)});fQ.displayName="NavbarBackLink";const mQ=(t,e,n)=>{const{opened:r,translucent:a}=t;return{base:{common:F(ar("absolute",n),"z-50 transform transition-transform-opacity box-border duration-500",!r&&"-translate-y-full opacity-0 pointer-events-none transition duration-500","md:w-[568px] md:end-auto md:start-1/2 md:-ms-[256px]"),ios:F("rounded-xl px-2.5 py-2.5 start-2 end-2 top-2 shadow-lg",e.bgIos,a&&"translucent"),material:F("rounded-2xl py-5 px-4 start-4 end-4 top-4",e.bgMaterial)},content:{common:"",ios:"mt-2.5 ",material:F("mt-2")},header:{common:F("flex justify-start"),ios:"items-center",material:"items-start"},icon:{ios:F("me-2"),material:"me-4"},contentTitle:{material:F("flex flex-row items-center")},title:{ios:F("tracking-wide text-[13px] uppercase",e.titleIos),material:F("font-medium")},titleRightText:{ios:F("me-1 ms-auto text-[13px]",e.titleRightIos),material:F("ms-1 text-xs before:w-0.75 before:h-0.75 before:rounded-full before:inline-block before:align-middle before:me-1",e.titleRightMd)},button:{ios:F("me-1 ms-auto cursor-pointer"),material:F("ms-auto cursor-pointer")},deleteIcon:{ios:F("w-5 h-5",e.deleteIconIos),material:F("w-6 h-6",e.deleteIconMd)},subtitle:{ios:F("text-[15px] font-semibold",e.subtitleIos),material:F("text-sm")},text:{ios:F("text-[15px]"),material:F("text-sm",e.textMaterial)}}},gQ=(t,e)=>({bgIos:F("bg-white",e("dark:bg-[#1e1e1e]")),bgMaterial:F("bg-md-light-surface-5",e("dark:bg-md-dark-surface-5")),titleIos:F("text-black",e("dark:text-white")),titleRightIos:F("text-opacity-45 text-black",e("dark:text-white dark:text-opacity-45")),titleRightMd:F("text-md-light-on-surface-variant before:bg-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant before:dark:bg-md-dark-on-surface-variant")),subtitleIos:F("text-black ",e("dark:text-white")),textMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant ")),deleteIconIos:F("fill-stone-400 active:fill-stone-200",e("dark:fill-stone-500 dark:active:fill-stone-700")),deleteIconMd:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t});function Xy(){return Xy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xy.apply(this,arguments)}const yQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,button:i,icon:o,title:s,titleRightText:l,subtitle:u,text:c,translucent:d=!0,opened:p,onClose:f,ios:g,material:y,children:v,...b}=t,x=_.useRef(null);_.useImperativeHandle(e,()=>({el:x.current}));const w=n,S={...b},C=wn({ios:g,material:y}),E=ut({ios:g,material:y}),R=Rt(),T=gQ(a,R),$=E(mQ({...t,translucent:d},T,r),r);return C==="ios"?V.createElement(w,Xy({ref:x,className:$.base},S),V.createElement("div",{className:$.header},o&&V.createElement("div",{className:$.icon},o),s&&V.createElement("div",{className:$.title},s),l&&V.createElement("div",{className:$.titleRightText},l),i&&V.createElement("div",{className:$.button,role:"button",tabIndex:"0",onClick:f},V.createElement(Qf,{theme:C,className:$.deleteIcon}))),V.createElement("div",{className:$.content},u&&V.createElement("div",{className:$.subtitle},u),c&&V.createElement("div",{className:$.text},c),v)):V.createElement(w,Xy({ref:x,className:$.base},S),V.createElement("div",{className:$.header},o&&V.createElement("div",{className:$.icon},o),V.createElement("div",{className:$.contentWrapper},V.createElement("div",{className:$.contentTitle},s&&V.createElement("div",{className:$.title},s),l&&V.createElement("div",{className:$.titleRightText},l)),V.createElement("div",{className:$.content},u&&V.createElement("div",{className:$.subtitle},u),c&&V.createElement("div",{className:$.text},c),v)),i&&V.createElement("div",{className:$.button,role:"button",tabIndex:"0",onClick:f},V.createElement(Qf,{theme:C,className:$.deleteIcon}))))});yQ.displayName="Notification";const bQ=(t,e,n)=>({base:{common:F("h-full w-full left-0 top-0 overflow-auto",ar("absolute",n)),ios:e.bgIos,material:e.bgMaterial}}),vQ=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-ios-light-surface",e("dark:bg-ios-dark-surface")),bgMaterial:F("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}};function bE(){return bE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bE.apply(this,arguments)}const Qy=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,...l}=t,u=_.useRef(null);_.useImperativeHandle(e,()=>({el:u.current}));const c=n,d={...l},p=ut({ios:i,material:o}),f=Rt(),g=vQ(a,f),y=p(bQ(t,g,r),r);return V.createElement(c,bE({ref:u,className:y.base},d),s)});Qy.displayName="Page";const xQ=(t,e,n)=>{const{size:r,floating:a}=t;return{base:{common:F("transition-transform transform duration-400 z-40 max-w-full overflow-hidden",a?"top-2-safe bottom-2-safe !h-auto":"top-0 max-h-full",e.bg,ar("fixed",n),r),ios:"",material:"ease-material-in"},left:{common:F("no-safe-areas-right",a?"right-full -mr-2 rounded-2xl":"right-full"),material:F(!a&&"rounded-r-2xl"),opened:"translate-x-full",closed:"-translate-x-2"},right:{common:F("no-safe-areas-left",a?"left-full -ml-2 rounded-2xl":"left-full"),material:F(!a&&"rounded-l-2xl"),opened:"-translate-x-full",closed:"translate-x-2"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},wQ=function(t,e){return t===void 0&&(t={}),{bg:F("bg-white",e("dark:bg-black")),...t}};function vE(){return vE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vE.apply(this,arguments)}const uP=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,size:i="w-72 h-screen",side:o="left",opened:s,backdrop:l=!0,floating:u=!1,onBackdropClick:c,ios:d,material:p,children:f,...g}=t,y=_.useRef(null);_.useImperativeHandle(e,()=>({el:y.current}));const v=s?"opened":"closed",b=n,x={...g},w=ut({ios:d,material:p}),S=Rt(),C=wQ(a,S),E=w(xQ({...t,size:i,floating:u},C,r),r),R=F(E.base,E[o][v]);return V.createElement(V.Fragment,null,l&&V.createElement("div",{className:E.backdrop[v],onClick:c}),V.createElement(b,vE({ref:y,className:R},x),f))});uP.displayName="Panel";const kQ=t=>{let{popoverEl:e,targetEl:n,angleEl:r,needsAngle:a,targetX:i,targetY:o,targetWidth:s=0,targetHeight:l=0,theme:u}=t;n.current?n=n.current:n.value?n=n.value:n.el?n=n.el:n.$el&&(n=n.$el),typeof n=="string"&&(n=document.querySelector(n));let c=document.body.offsetWidth,d=document.body.offsetHeight;c===0&&(c=window.innerWidth),d===0&&(d=window.innerHeight);const[p,f]=[e.offsetWidth,e.offsetHeight];let g=0,y,v,b="";a&&(g=r.offsetWidth/2);let x,w;const S=window.getComputedStyle(n);let C=parseInt(S.getPropertyValue("--k-safe-area-top"),10)||0,E=parseInt(S.getPropertyValue("--k-safe-area-left"),10)||0,R=parseInt(S.getPropertyValue("--k-safe-area-right"),10)||0;if(Number.isNaN(C)&&(C=0),Number.isNaN(E)&&(E=0),Number.isNaN(R)&&(R=0),n){s=n.offsetWidth,l=n.offsetHeight;const Y=n.getBoundingClientRect();x=Y.left,w=Y.top}else typeof i<"u"&&o!=="undefined"&&(x=i,w=o);let[T,$,P]=[0,0,0];const D=u==="ios"?13:23;let B="top";f+g<w-C?$=w-f-g:f+g<d-w-l?(B="bottom",$=w+l+g):(B="middle",$=l/2+w-f/2,P=$,$=Math.max(5,Math.min($,d-f-5)),P-=$),B==="top"||B==="bottom"?(T=s/2+x-p/2,P=T,T=Math.max(5,Math.min(T,c-p-5)),E&&(T=Math.max(T,E)),R&&T+p>c-5-R&&(T=c-5-R-p),B==="top"&&(b="bottom"),B==="bottom"&&(b="top"),P-=T,y=p/2-g+P,y=Math.max(Math.min(y,p-g*2-D),D)):B==="middle"&&(T=x-p-g,b="right",(T<5||T+p+R>c||T<E)&&(T<5&&(T=x+s+g),T+p+R>c&&(T=c-p-5-R),T<E&&(T=E),b="left"),v=f/2-g+P,v=Math.max(Math.min(v,f-g*2-D),D));const z=B,q=T<x?"left":"right";return{set:!0,angleTop:typeof v>"u"?void 0:`${v}px`,angleLeft:typeof y>"u"?void 0:`${y}px`,anglePosition:b,popoverTop:`${$}px`,popoverLeft:`${T}px`,popoverPosition:`${z}-${q}`}},SQ=(t,e,n)=>{const{size:r,translucent:a,angleClassName:i,angleClass:o}=t;return{base:{common:F("transition-transform-opacity z-40 no-safe-areas",ar("fixed",n),r),ios:"duration-300",material:"duration-400 ease-material-in",opened:"",closed:{common:"opacity-0 pointer-events-none",ios:"",material:"scale-x-90 scale-y-75"}},inner:{common:F("overflow-hidden relative"),ios:F("rounded-xl",a&&"translucent",e.bgIos),material:F("rounded-[1.75rem]",e.bgMaterial)},angleWrap:{common:F(i||o||"","pointer-events-none"),ios:F("absolute w-6.5 h-6.5 z-50 overflow-hidden",a&&"opacity-80"),material:F("absolute w-6.5 h-6.5 z-50 overflow-hidden"),bottom:"top-full",top:"bottom-full",left:"right-full",right:"left-full"},angleArrow:{common:F("absolute rounded w-full h-full transform rotate-45"),ios:e.bgIos,material:e.bgMaterial,bottom:"-top-4.75",top:"top-4.75",left:"left-4.75",right:"-left-4.75"},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-300",opened:"",closed:"opacity-0 pointer-events-none"}}},CQ=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-ios-light-surface-3",e("dark:bg-ios-dark-surface-3")),bgMaterial:F("bg-md-light-surface-3",e("dark:bg-md-dark-surface-3")),...t}};function xE(){return xE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xE.apply(this,arguments)}const EQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,angle:a=!0,angleClassName:i="",colors:o,size:s="w-64",opened:l,backdrop:u=!0,onBackdropClick:c,target:d,targetX:p,targetY:f,targetWidth:g,targetHeight:y,translucent:v=!0,ios:b,material:x,children:w,style:S={},...C}=t,E=_.useRef(null),R=_.useRef(null),[T,$]=_.useState({set:!1,angleTop:0,angleLeft:0,anglePosition:"bottom",popoverTop:0,popoverLeft:0,popoverPosition:"top-left"});_.useImperativeHandle(e,()=>({el:E.current}));const P=l?"opened":"closed",D=n,B={...C},z=wn({ios:b,material:x}),q=ut({ios:b,material:x}),Y=Rt(),Z=CQ(o,Y),H=q(SQ({...t,size:s,angleClassName:i,translucent:v},Z,r),r),L=()=>{!d||!E.current||!l||$(kQ({popoverEl:E.current,targetEl:d,angleEl:R.current,needsAngle:a,targetX:p,targetY:f,targetHeight:y,targetWidth:g,theme:z}))},Q=()=>{typeof window>"u"||window.addEventListener("resize",L)},J=()=>{typeof window>"u"||window.removeEventListener("resize",L)};_.useEffect(()=>(Q(),()=>J())),_.useEffect(()=>{L()},[l]);const te=T.set?{...S||{},left:T.popoverLeft,top:T.popoverTop}:S,oe=T.set?{left:T.angleLeft,top:T.angleTop}:void 0,he={"top-right":"origin-bottom-left","top-left":"origin-bottom-right","middle-left":"origin-right","middle-right":"origin-left","bottom-right":"origin-top-left","bottom-left":"origin-top-right"},ae=F(H.base[P],z==="material"&&he[T.popoverPosition]);return V.createElement(V.Fragment,null,u&&V.createElement("div",{className:H.backdrop[P],onClick:c}),V.createElement(D,xE({ref:E,className:ae,style:te},B),a&&V.createElement("div",{ref:R,style:oe,className:H.angleWrap[T.anglePosition]},V.createElement("div",{className:H.angleArrow[T.anglePosition]})),V.createElement("div",{className:H.inner},w)))});EQ.displayName="Popover";const NQ=(t,e,n)=>{const{size:r}=t;return{base:{common:F("left-1/2 top-1/2 transition-transform transform -translate-x-1/2 z-40 max-w-full max-h-full overflow-hidden md:no-safe-areas",e.bg,ar("fixed",n),r),ios:"duration-400 md:rounded-lg",material:" md:rounded-[1.75rem]",opened:{common:"-translate-y-1/2",material:F("ease-material-in-popup duration-[600ms]")},closed:{common:"translate-y-full",material:"duration-400"}},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}},TQ=function(t,e){return t===void 0&&(t={}),{bg:F("bg-white",e("dark:bg-black")),...t}};function wE(){return wE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wE.apply(this,arguments)}const cP=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,size:i="w-screen h-screen md:w-160 md:h-160",opened:o,backdrop:s=!0,onBackdropClick:l,ios:u,material:c,children:d,...p}=t,f=_.useRef(null);_.useImperativeHandle(e,()=>({el:f.current}));const g=o?"opened":"closed",y=n,v={...p},b=ut({ios:u,material:c}),x=Rt(),w=TQ(a,x),S=b(NQ({...t,size:i},w,r),r);return V.createElement(V.Fragment,null,s&&V.createElement("div",{className:S.backdrop[g],onClick:l}),V.createElement(y,wE({ref:f,className:S.base[g]},v),d))});cP.displayName="Popup";function kE(){return kE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kE.apply(this,arguments)}const IQ=t=>V.createElement("svg",kE({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentcolor"},t),V.createElement("path",{d:"M10,0 C10.5522847,0 11,0.44771525 11,1 L11,6 C11,6.55228475 10.5522847,7 10,7 C9.44771525,7 9,6.55228475 9,6 L9,1 C9,0.44771525 9.44771525,0 10,0 Z"}),V.createElement("path",{d:"M10,13 C10.5522847,13 11,13.4477153 11,14 L11,19 C11,19.5522847 10.5522847,20 10,20 C9.44771525,20 9,19.5522847 9,19 L9,14 C9,13.4477153 9.44771525,13 10,13 Z",opacity:".64"}),V.createElement("path",{d:"M13,10 C13,9.44771525 13.4477153,9 14,9 L19,9 C19.5522847,9 20,9.44771525 20,10 C20,10.5522847 19.5522847,11 19,11 L14,11 C13.4477153,11 13,10.5522847 13,10 Z",opacity:".82"}),V.createElement("path",{d:"M-3.8285687e-16,10 C-3.8285687e-16,9.44771525 0.44771525,9 1,9 L6,9 C6.55228475,9 7,9.44771525 7,10 C7,10.5522847 6.55228475,11 6,11 L1,11 C0.44771525,11 -3.8285687e-16,10.5522847 -3.8285687e-16,10 Z",opacity:".46"}),V.createElement("path",{d:"M2.92912627,2.92912627 C3.31965056,2.53860197 3.95281554,2.53860197 4.34333983,2.92912627 L7.87887373,6.46466017 C8.26939803,6.85518446 8.26939803,7.48834944 7.87887373,7.87887373 C7.48834944,8.26939803 6.85518446,8.26939803 6.46466017,7.87887373 L2.92912627,4.34333983 C2.53860197,3.95281554 2.53860197,3.31965056 2.92912627,2.92912627 Z",opacity:".37"}),V.createElement("path",{d:"M12.1211263,12.1211263 C12.5116506,11.730602 13.1448155,11.730602 13.5353398,12.1211263 L17.0708737,15.6566602 C17.461398,16.0471845 17.461398,16.6803494 17.0708737,17.0708737 C16.6803494,17.461398 16.0471845,17.461398 15.6566602,17.0708737 L12.1211263,13.5353398 C11.730602,13.1448155 11.730602,12.5116506 12.1211263,12.1211263 Z",opacity:".73"}),V.createElement("path",{d:"M12.1211263,7.87887373 C11.730602,7.48834944 11.730602,6.85518446 12.1211263,6.46466017 L15.6566602,2.92912627 C16.0471845,2.53860197 16.6803494,2.53860197 17.0708737,2.92912627 C17.461398,3.31965056 17.461398,3.95281554 17.0708737,4.34333983 L13.5353398,7.87887373 C13.1448155,8.26939803 12.5116506,8.26939803 12.1211263,7.87887373 Z",opacity:".91"}),V.createElement("path",{d:"M2.92912627,17.0708737 C2.53860197,16.6803494 2.53860197,16.0471845 2.92912627,15.6566602 L6.46466017,12.1211263 C6.85518446,11.730602 7.48834944,11.730602 7.87887373,12.1211263 C8.26939803,12.5116506 8.26939803,13.1448155 7.87887373,13.5353398 L4.34333983,17.0708737 C3.95281554,17.461398 3.31965056,17.461398 2.92912627,17.0708737 Z",opacity:".55"}));function SE(){return SE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SE.apply(this,arguments)}const _Q=t=>V.createElement("svg",SE({viewBox:"0 0 36 36"},t,{fill:"none",stroke:"currentcolor"}),V.createElement("circle",{cx:"18",cy:"18",r:"16"})),RQ=(t,e,n)=>{const{size:r}=t;return{base:{common:F(n==="ios"?"k-ios-preloader":"k-material-preloader",`inline-block ${r}`),ios:e.iconIos,material:`stroke-4 ${e.iconMaterial}`},inner:{common:"block w-full h-full"}}},$Q=function(t,e){return t===void 0&&(t={}),{iconIos:"text-primary",iconMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function CE(){return CE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CE.apply(this,arguments)}const OQ=_.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,size:i="w-8 h-8",ios:o,material:s,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=wn({ios:o,material:s}),g=ut({ios:o,material:s}),y=Rt(),v=$Q(a,y),b=f==="ios"?IQ:_Q,x=g(RQ({...t,size:i},v,f),r);return V.createElement(d,CE({ref:c,className:x.base},p),V.createElement("span",{className:x.inner},V.createElement(b,{className:"w-full h-full"})),l)});OQ.displayName="Preloader";const MQ=t=>({base:{common:"block h-1 bg-opacity-30 dark:bg-opacity-30 overflow-hidden rtl:rotate-180",ios:"bg-black rounded-full",material:t.bgMaterial},inner:{common:"block duration-200 w-full h-full",ios:t.bgIos,material:t.bgMaterial}}),PQ=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-primary",bgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),...t}};function EE(){return EE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EE.apply(this,arguments)}const FQ=_.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,ios:i,material:o,progress:s=0,children:l,...u}=t,c=_.useRef(null);_.useImperativeHandle(e,()=>({el:c.current}));const d=n,p={...u},f=ut({ios:i,material:o}),g=Rt(),y=PQ(a,g),v=f(MQ(y),r);return V.createElement(d,EE({ref:c,className:v.base},p),V.createElement("span",{className:v.inner,style:{transform:`translateX(-${100-s/1*100}%)`}}),l)});FQ.displayName="Progressbar";const AQ=(t,e,n,r)=>({base:F("cursor-pointer inline-flex align-middle",ar("relative",n),r("dark:touch-ripple-white")),iconWrap:{common:"flex items-center justify-center rounded-full",ios:"w-5.5 h-5.5 border",material:"w-5 h-5 border-2",notChecked:{ios:e.borderIos,material:e.borderMaterial},checked:{ios:e.borderCheckedIos,material:e.borderCheckedMaterial}},icon:{ios:"text-primary",material:`w-3 h-3 rounded-full ${e.bgCheckedMaterial}`,notChecked:"opacity-0",checked:"opacity-100"},indeterminateIcon:{common:"bg-white w-3/4",ios:"h-0.25",material:"h-0.5"},input:{common:"hidden"}}),DQ=function(t,e){return t===void 0&&(t={}),{borderIos:F("border-black border-opacity-30",e("dark:border-white dark:border-opacity-30")),borderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),bgCheckedIos:"bg-primary",bgCheckedMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderCheckedIos:"border-primary",borderCheckedMaterial:F("border-md-light-primary",e("dark:border-md-dark-primary")),...t}};function NE(){return NE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NE.apply(this,arguments)}const LQ=_.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,name:s,value:l,disabled:u,readOnly:c,onChange:d,ios:p,material:f,touchRipple:g=!0,children:y,...v}=t,b=_.useRef(null);_.useImperativeHandle(e,()=>({el:b.current}));const x=n,w={...v},S=wn({ios:p,material:f}),C=ut({ios:p,material:f}),E=Rt();jo(b,S==="material"&&g);const R=DQ(a,E),T=o||i&&!d?"checked":"notChecked",$=C(AQ(t,R,r,E),r);return V.createElement(x,NE({ref:b,className:$.base},w),V.createElement("input",{type:"radio",name:s,value:l,disabled:u,readOnly:c,checked:o,defaultChecked:i,onChange:d,className:$.input}),V.createElement("i",{className:$.iconWrap[T]},S==="ios"?V.createElement(iP,{className:$.icon[T]}):V.createElement("span",{className:$.icon[T]})),y)});LQ.displayName="Radio";const zQ=(t,e,n)=>({base:{common:"block relative select-none w-full self-center touch-pan-y",ios:"h-7",material:"h-5"},trackBg:{common:F("absolute top-1/2 left-0 w-full transform -translate-y-1/2 bg-black bg-opacity-20",n("dark:bg-white dark:bg-opacity-20")),ios:"h-1 rounded-full",material:"h-0.5"},trackValue:{common:"absolute top-1/2 start-0 w-full transform -translate-y-1/2",ios:`h-1 rounded-full ${e.valueBgIos}`,material:`h-0.5 ${e.valueBgMaterial}`},input:{common:"appearance-none w-full bg-transparent cursor-pointer block focus:outline-none relative",ios:"h-7",material:"h-5"},inputThumb:{common:"range-thumb:relative range-thumb:appearance-none range-thumb:rounded-full range-thumb:border-none",ios:`range-thumb:w-7 range-thumb:h-7 range-thumb:-mt-3.5 ${e.thumbBgIos} range-thumb:shadow-ios-toggle`,material:`range-thumb:w-3 range-thumb:h-3 ${e.thumbBgMaterial} range-thumb:-mt-1.5 range-thumb:transform range-thumb:duration-200 active:range-thumb:scale-150`},inputTrack:{common:"range-track:appearance-none range-track:h-px"}}),BQ=function(t,e){return t===void 0&&(t={}),{valueBgIos:"bg-primary",valueBgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),thumbBgIos:"range-thumb:bg-white",thumbBgMaterial:F("range-thumb:bg-md-light-primary",e("dark:range-thumb:bg-md-dark-primary")),...t}};function TE(){return TE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TE.apply(this,arguments)}const Yy=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,children:s,inputId:l,name:u,value:c=void 0,defaultValue:d,readOnly:p,disabled:f,step:g=1,min:y=0,max:v=100,onInput:b,onChange:x,onFocus:w,onBlur:S,...C}=t,E=_.useRef(null);_.useImperativeHandle(e,()=>({el:E.current}));const R=n,T={...C},$=ut({ios:i,material:o}),P=Rt(),D=BQ(a,P),B=$(zQ(t,D,P),r),z=((c||0)-y)/(v-y)*100;return V.createElement(R,TE({ref:E,className:B.base},T),V.createElement("span",{className:B.trackBg}),V.createElement("span",{className:B.trackValue,style:{width:`${z}%`}}),V.createElement("input",{className:F(B.input,B.inputThumb,B.inputTrack),type:"range",id:l,name:u,min:y,max:v,step:g,value:c,defaultValue:d,readOnly:p,disabled:f,onInput:b,onChange:x,onFocus:w,onBlur:S}))});Yy.displayName="Range";const jQ=(t,e,n)=>{let{isEnabled:r,darkClasses:a}=n;return{base:{common:"relative flex overflow-hidden items-center",ios:"px-2 w-full",material:"px-0 py-2 -mx-2 w-[calc(100%+32px)]"},inner:{common:"w-full shrink-1 relative",ios:"transition-all duration-300"},searchIconWrap:{common:"absolute inset-y-0 flex items-center z-40",ios:"start-2",material:"start-4"},clearButton:{common:"absolute justify-center inset-y-0 flex items-center z-40 cursor-pointer end-0",ios:"w-8 h-8",material:"w-12 h-12"},input:{common:"block appearance-none  w-full py-2  focus:outline-none z-30",ios:F("h-8 bg-black/10 pl-7 pr-7 rounded-lg text-base",a("dark:placeholder-white dark:placeholder-opacity-30 dark:bg-white/10"),e.placeholderIos,e.inputBgIos),material:F("h-12 ps-12 pe-4 rounded-full",e.placeholderMaterial,e.inputBgMaterial)},deleteIcon:{common:"",ios:"w-3.5 h-3.5 opacity-45",material:"w-6 h-6 active:opacity-20"},searchIcon:{common:"",ios:F("w-4 h-4 opacity-45"),material:F("w-5 h-5 z-30",r?"opacity-0 transform rotate-90 scale-50 transition-transform-opacity  duration-400 ":"block transform transition-transform-opacity scale-100 rotate-0 duration-400")},cancelButton:{ios:F("ps-2 flex items-center h-8 cursor-pointer bg-transparent text-primary shrink-0 z-40 transition-all duration-300 active:opacity-30",r?"":"opacity-0"),material:F("absolute left-4 cursor-pointer",r?"z-40 transform scale-100 rotate-0 transition-transform-opacity  duration-400":"opacity-0 transform -rotate-90 scale-50 transition-transform-opacity duration-400")}}},UQ=function(t,e){return t===void 0&&(t={}),{inputBgIos:"",inputBgMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),placeholderIos:"",placeholderMaterial:F("placeholder-md-light-on-surface-variant",e("dark:placeholder-md-dark-on-surface-variant")),...t}};function Zy(){return Zy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zy.apply(this,arguments)}const VQ=t=>{let{theme:e,...n}=t;return e==="ios"?V.createElement("svg",Zy({xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 56 56",fill:"currentcolor"},n),V.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"})):V.createElement("svg",Zy({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 56 56",fill:"currentcolor"},n),V.createElement("path",{d:"M 23.9570 41.7695 C 27.8476 41.7695 31.4804 40.5039 34.4336 38.3945 L 45.5429 49.5039 C 46.0585 50.0195 46.7382 50.2774 47.4414 50.2774 C 48.9648 50.2774 50.0664 49.1055 50.0664 47.6055 C 50.0664 46.9023 49.8322 46.2461 49.3162 45.7305 L 38.2773 34.6679 C 40.5976 31.6211 41.9804 27.8476 41.9804 23.7461 C 41.9804 13.8320 33.8710 5.7226 23.9570 5.7226 C 14.0195 5.7226 5.9336 13.8320 5.9336 23.7461 C 5.9336 33.6601 14.0195 41.7695 23.9570 41.7695 Z M 23.9570 37.8789 C 16.1992 37.8789 9.8242 31.4805 9.8242 23.7461 C 9.8242 16.0117 16.1992 9.6133 23.9570 9.6133 C 31.6914 9.6133 38.0898 16.0117 38.0898 23.7461 C 38.0898 31.4805 31.6914 37.8789 23.9570 37.8789 Z"}))};function IE(){return IE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IE.apply(this,arguments)}const WQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,placeholder:i="Search",value:o,inputId:s,inputStyle:l,disableButton:u=!1,disableButtonText:c="Cancel",clearButton:d=!0,onInput:p,onChange:f,onFocus:g,onBlur:y,onClear:v,onDisable:b,ios:x,material:w,...S}=t,C=_.useRef(null),E=_.useRef(null),R=_.useRef(null),[T,$]=_.useState(0),P=_.useRef(null),D=_.useRef(!1);_.useImperativeHandle(e,()=>({el:E.current,searchEl:C.current}));const[B,z]=_.useState(!1),q=wn({ios:x,material:w}),Y=ut({ios:x,material:w}),Z=Rt(),H=UQ(a,Z),L=pe=>{p&&p(pe)},Q=pe=>{f&&f(pe)},J=pe=>{z(!0),g&&g(pe)},te=pe=>{y&&y(pe)},oe=()=>{o||(P.current=setTimeout(()=>{z(!1)}))},he=()=>{clearTimeout(P.current)},ae=pe=>{pe.preventDefault(),z(!1),C.current&&C.current.blur(),b&&b(),v&&v()};_.useEffect(()=>{R.current&&$(R.current.offsetWidth),requestAnimationFrame(()=>{requestAnimationFrame(()=>{D.current=!0})})},[]);const de=Y(jQ({...t},H,{isEnabled:B,darkClasses:Z})),ke=q==="ios"?V.createElement("button",{type:"button",ref:R,style:{marginRight:B?0:`-${T}px`,transitionDuration:D.current?"":"0ms"},className:de.cancelButton,onClick:ae,onPointerDown:pe=>pe.preventDefault()},c):V.createElement(lP,{theme:q,onClick:ae,className:F(de.cancelButton),onPointerDown:pe=>pe.preventDefault()}),K=n,se={...S};return V.createElement(K,IE({ref:E,className:de.base},se,{onBlurCapture:oe,onFocusCapture:he}),V.createElement("div",{className:de.inner},V.createElement("span",{className:de.searchIconWrap},V.createElement(VQ,{ios:x,material:w,className:de.searchIcon})),V.createElement("input",{id:s,ref:C,className:F(de.input),style:l,type:"text",name:"search",placeholder:i,value:o,onInput:L,onChange:Q,onFocus:J,onBlur:te}),o&&d&&V.createElement("button",{className:de.clearButton,onClick:v,type:"button"},V.createElement(Qf,{theme:q,className:de.deleteIcon}))),u&&ke)});WQ.displayName="Searchbar";const GQ=(t,e,n)=>{const{outline:r,rounded:a}=t;return{base:{common:"flex justify-center items-center overflow-hidden w-full",square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},raised:r?"shadow":"shadow divide-x divide-black divide-opacity-10 rtl:divide-x-reverse",outline:{common:"",ios:`${e.borderIos} border-2`,material:`${e.borderMaterial} border`},outlineInner:{common:"-m-0.5 flex w-full justify-center items-center rtl:divide-x-reverse",ios:`divide-x-2 ${e.divideIos}`,material:`divide-x ${e.divideMaterial}`},strong:{common:F("p-0.5 space-x-1 relative"),ios:e.strongBgIos,material:e.strongBgMaterial},strongHighlight:{common:F("absolute start-0.5 top-0.5 bottom-0.5 !ms-0 pointer-events-none duration-200",a&&"rounded-full","bg-white shadow",n("dark:bg-opacity-15 dark:touch-ripple-white")),ios:F(!a&&"rounded"),material:F(!a&&"rounded-md")}}},HQ=function(t,e){return t===void 0&&(t={}),{strongBgIos:F("bg-black bg-opacity-5",e("dark:bg-white dark:bg-opacity-10")),strongBgMaterial:F("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),borderIos:"border-primary",borderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),divideIos:"divide-primary",divideMaterial:F("divide-md-light-outline",e("dark:divide-md-dark-outline")),...t}};function _E(){return _E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_E.apply(this,arguments)}const qQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,ios:i,material:o,raised:s,outline:l,strong:u,rounded:c,children:d,...p}=t,f=_.useRef(null),g=_.useRef(null);_.useImperativeHandle(e,()=>({el:f.current}));const[y,v]=_.useState({transform:"",width:""}),b=n,x={...p},w=ut({ios:i,material:o}),S=Rt(),C=HQ(a,S),E=w(GQ(t,C,S)),R=F(c?E.base.rounded:E.base.square,s&&E.raised,l&&E.outline,u&&E.strong,r);return _.useEffect(()=>{if(u&&g.current){const T=g.current.parentElement,$=T.children.length-1,P=[...T.children].indexOf(T.querySelector(".k-segmented-strong-button-active")),D="4px";v({...y,width:`calc((100% - 2px * 2 - ${D} * (${$} - 1)) / ${$})`,transform:`translateX(calc((${P} * 100% + ${P} * ${D}) * var(--k-rtl-reverse)))`})}},[d]),V.createElement(b,_E({ref:f,className:R},x),l?V.createElement("span",{className:E.outlineInner},d):d,u&&V.createElement("span",{ref:g,className:E.strongHighlight,style:y}))});qQ.displayName="Segmented";function RE(){return RE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RE.apply(this,arguments)}const KQ=_.forwardRef((t,e)=>{const{active:n,children:r,outline:a,strong:i,clear:o,rounded:s,...l}=t,u=_.useRef(null);return _.useImperativeHandle(e,()=>({el:u.current})),V.createElement(kr,RE({ref:u,segmented:!0,segmentedActive:n,segmentedStrong:i,rounded:s&&i},l),r)});KQ.displayName="SegmentedButton";const XQ=(t,e,n)=>({base:{common:F("left-0 top-full transition-transform duration-400 z-40 overflow-hidden",ar("fixed",n)),ios:"",material:`rounded-t-2xl ease-material-in ${e.bgIos}`,opened:`-translate-y-full ${e.bgMaterial}`,closed:""},backdrop:{common:"fixed z-40 w-full h-full left-0 top-0 bg-black bg-opacity-50 duration-400",opened:"",closed:"opacity-0 pointer-events-none"}}),QQ=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-white",e("dark:bg-black")),bgMaterial:F("bg-md-light-surface",e("dark:bg-md-dark-surface")),...t}};function $E(){return $E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$E.apply(this,arguments)}const YQ=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,opened:i,backdrop:o=!0,onBackdropClick:s,ios:l,material:u,children:c,...d}=t,p=_.useRef(null);_.useImperativeHandle(e,()=>({el:p.current}));const f=i?"opened":"closed",g=n,y={...d},v=ut({ios:l,material:u}),b=Rt(),x=QQ(a,b),w=v(XQ(t,x,r),r);return V.createElement(V.Fragment,null,o&&V.createElement("div",{className:w.backdrop[f],onClick:s}),V.createElement(g,$E({ref:p,className:w.base[f]},y),c))});YQ.displayName="Sheet";const ZQ=(t,e)=>{const{buttonsOnly:n}=t;return{base:`${e.text} inline-flex items-stretch`,raised:"shadow",size:{small:{ios:"h-6",material:"h-8"},medium:{ios:"h-7",material:"h-10"},large:{ios:"h-11",material:"h-12"}},shape:{square:{ios:"rounded",material:"rounded-lg"},rounded:"rounded-full"},button:{common:"relative flex items-center justify-center w-10 cursor-pointer overflow-hidden z-10 select-none"},buttonLeftShape:{square:{ios:"rounded-s",material:"rounded-s-lg"},rounded:"rounded-s-full"},buttonRightShape:{square:{ios:"rounded-e",material:"rounded-e-lg"},rounded:"rounded-e-full"},buttonStyle:{fill:{common:F(e.fillTouchRipple,n&&"first:border-r border-black border-opacity-10 rtl:first:border-l rtl:first:border-r-0"),ios:F(e.fillBgIos,e.fillTextIos,e.fillActiveBgIos),material:F(e.fillBgMaterial,e.fillTextMaterial,e.fillActiveBgMaterial)},outline:{common:F(e.touchRipple,"active:bg-opacity-15",n&&"first:border-r-0 rtl:last:border-r-0"),ios:F("border-2",e.textIos,e.activeBgIos,e.outlineBorderIos,n&&"rtl:first:border-r-2"),material:F("border",e.textMaterial,e.activeBgMaterial,e.outlineBorderMaterial,n&&"rtl:first:border-r")},clear:{common:`${e.touchRipple} active:bg-opacity-15 last:border-l rtl:last:border-l-0 rtl:first:border-l border-black border-opacity-10`,ios:F(e.textIos,e.activeBgIos),material:F(e.textMaterial,e.activeBgMaterial)}},input:{common:"focus:outline-none text-center appearance-none bg-transparent"},value:{common:"w-11 flex items-center justify-center font-medium",ios:`text-base ${e.textIos}`,material:`text-sm ${e.textMaterial}`,fill:{common:"",ios:`border-t-2 border-b-2 ${e.outlineBorderIos}`,material:`border-t border-b ${e.outlineBorderMaterial}`},outline:{common:"",ios:`border-t-2 border-b-2 ${e.outlineBorderIos}`,material:`border-t border-b ${e.outlineBorderMaterial}`},clear:"border-l border-black border-opacity-10"},hBar:"w-4 h-0.5 bg-current block",vBar:"w-0.5 h-4 bg-current block absolute inset-1/2 transform -translate-x-1/2 rtl:translate-x-1/2 -translate-y-1/2"}},JQ=function(t,e){return t===void 0&&(t={}),{activeBgIos:"active:bg-primary",activeBgMaterial:"",textIos:"text-primary",textMaterial:F("text-md-light-primary","dark:text-md-dark-primary"),fillTextIos:F("text-white"),fillTextMaterial:F("text-md-light-on-primary",e("dark:text-md-dark-on-primary")),fillBgIos:"bg-primary",fillBgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),fillActiveBgIos:"active:bg-ios-primary-shade",fillActiveBgMaterial:"",fillTouchRipple:F("touch-ripple-white","dark:touch-ripple-primary"),outlineBorderIos:"border-primary",outlineBorderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),touchRipple:"touch-ripple-primary",...t}};function OE(){return OE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OE.apply(this,arguments)}const eY=_.forwardRef((t,e)=>{const{component:n="span",className:r,colors:a,value:i=0,defaultValue:o,input:s=!1,inputType:l="text",inputPlaceholder:u,inputDisabled:c,inputReadOnly:d,buttonsOnly:p,rounded:f,roundedIos:g,roundedMaterial:y,small:v,smallIos:b,smallMaterial:x,large:w,largeIos:S,largeMaterial:C,raised:E,raisedIos:R,raisedMaterial:T,outline:$,outlineIos:P,outlineMaterial:D,onInput:B,onChange:z,onFocus:q,onBlur:Y,onMinus:Z,onPlus:H,ios:L,material:Q,touchRipple:J=!0,children:te,...oe}=t,he=_.useRef(null),ae=_.useRef(null),de=_.useRef(null);_.useImperativeHandle(e,()=>({el:he.current}));const ke=n,K=wn({ios:L,material:Q}),se=ut({ios:L,material:Q});jo(ae,K==="material"&&J),jo(de,K==="material"&&J);const pe=typeof f>"u"?K==="ios"?g:y:f,Ne=typeof v>"u"?K==="ios"?b:x:v,Se=typeof w>"u"?K==="ios"?S:C:w,Te=typeof E>"u"?K==="ios"?R:T:E,Pe=typeof $>"u"?K==="ios"?P:D:$,We=Rt(),$e=JQ(a,We),lt=Se?"large":Ne?"small":"medium",Ze=Pe&&Te?"clear":Pe?"outline":"fill",Je=pe?"rounded":"square",Ve=se(ZQ({...t,rounded:pe,small:Ne,large:Se,raised:Te,outline:Pe},$e)),Vt={...oe},$t=F(Ve.base,Te&&Ve.raised,Ve.size[lt],Ve.shape[Je],r),Wt=F(Ve.button,Ve.buttonStyle[Ze],Ve.buttonLeftShape[Je]),Gt=F(Ve.button,Ve.buttonStyle[Ze],Ve.buttonRightShape[Je]),Ot=F(s&&Ve.input,Ve.value[Ze]);return V.createElement(ke,OE({ref:he,className:$t},Vt),V.createElement("span",{ref:ae,className:Wt,role:"button",tabIndex:"0",onClick:Z},V.createElement("span",{className:Ve.hBar})),s&&!p&&V.createElement("input",{className:Ot,placeholder:u,type:l,value:i,defaultValue:o,disabled:c,readOnly:d,onInput:B,onChange:z,onFocus:q,onBlur:Y}),!s&&!p&&V.createElement("span",{className:Ot},i),V.createElement("span",{ref:de,className:Gt,role:"button",tabIndex:"0",onClick:H},V.createElement("span",{className:Ve.hBar}),V.createElement("span",{className:Ve.vBar})))});eY.displayName="Stepper";function ME(){return ME=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ME.apply(this,arguments)}const dP=_.forwardRef((t,e)=>{const{labels:n,icons:r,children:a,...i}=t,o=_.useRef(null);_.useImperativeHandle(e,()=>({el:o.current}));const s={...i};return V.createElement(pE,ME({ref:o,tabbar:!0,tabbarIcons:r,tabbarLabels:n},s),a)});dP.displayName="Tabbar";const tY=function(t,e){let{hasIcon:n,hasLabel:r,active:a}=t===void 0?{}:t;return e===void 0&&(e={}),{content:{common:"flex flex-col items-center justify-center h-full",ios:F("py-1",a?e.textActiveIos:e.textIos),material:F("py-2",n&&r&&"space-y-1",a?e.textActiveMaterial:e.textMaterial)},iconContainer:{common:"flex items-center justify-center k-tabbar-link-icon relative",ios:F("w-7 h-7"),material:F("w-16 h-8 rounded-full")},iconBg:{common:"absolute left-0 top-0 w-full h-full rounded-full duration-200 -z-10 pointer-events-none",ios:F(a?e.iconBgActiveIos:e.iconBgIos),material:F(a?e.iconBgActiveMaterial:e.iconBgMaterial,!a&&"scale-x-[0.5] opacity-0")},label:{ios:F(n?"text-xs font-medium":"",""),material:F(n?"text-xs":"text-sm","font-medium")}}},nY=function(t,e){return t===void 0&&(t={}),{textIos:F("text-black text-opacity-40",e("dark:text-white dark:text-opacity-55")),textActiveIos:"text-primary",textMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),textActiveMaterial:F("text-md-light-on-secondary-container",e("dark:text-md-dark-on-secondary-container")),iconBgIos:"",iconBgActiveIos:"",iconBgMaterial:"",iconBgActiveMaterial:F("bg-md-light-secondary-container",e("dark:bg-md-dark-secondary-container")),...t}};function PE(){return PE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PE.apply(this,arguments)}const Yf=_.forwardRef((t,e)=>{const{className:n,active:r,ios:a,material:i,colors:o,linkProps:s={},icon:l,label:u,children:c,...d}=t,p=_.useRef(null);_.useImperativeHandle(e,()=>({el:p.current}));const f={...s,...d},g=Rt(),y=nY(o,g),v=ut({ios:a,material:i}),b=!!l,x=u||c&&c.length,w=v(tY({hasLabel:x,hasIcon:b,active:r},y));return V.createElement(Nt,PE({ref:p,tabbar:!0,tabbarActive:r,className:n},f),V.createElement("span",{className:w.content},l&&V.createElement("span",{className:w.iconContainer},V.createElement("span",{className:w.iconBg}),l),(u||c&&c.length)&&V.createElement("span",{className:w.label},u,c)))});Yf.displayName="TabbarLink";const rY=()=>({base:{common:"w-full border-none p-0 m-0 border-collapse text-left table",ios:"",material:""}});function FE(){return FE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FE.apply(this,arguments)}const aY=_.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=_.useRef(null);_.useImperativeHandle(e,()=>({el:s.current}));const l=ut({ios:r,material:a})(rY({...t})),u={...o};return V.createElement("table",FE({className:l.base,ref:s},u),i)});aY.displayName="Table";const iY=()=>({base:{common:"text-sm",ios:"",material:""}});function AE(){return AE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AE.apply(this,arguments)}const oY=_.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=_.useRef(null);_.useImperativeHandle(e,()=>({el:s.current}));const l=ut({ios:r,material:a})(iY({...t})),u={...o};return V.createElement("tbody",AE({className:l.base,ref:s},u),i)});oY.displayName="TableBody";const sY=(t,e,n)=>{const{header:r}=t;return{base:{common:F("align-middle",n),ios:F(r?`text-xs font-semibold overflow-hidden whitespace-nowrap leading-4 h-11 bg-transparent ${e.textHeaderIos} py-0 px-4`:"h-11 relative py-0 px-4"),material:F(r?`${e.textHeaderMaterial} px-6 py-0  text-xs font-medium overflow-hidden text-ellipsis whitespace-nowrap leading-4 h-14 bg-transparent`:"py-0 first:px-6 px-7 h-12")}}},lY=function(t,e){return t===void 0&&(t={}),{textHeaderIos:F("text-black/45",e("dark:text-white/55")),textHeaderMaterial:F("text-md-light-on-surface-variant",e("dark:text-md-dark-on-surface-variant")),...t}};function DE(){return DE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DE.apply(this,arguments)}const uY=_.forwardRef((t,e)=>{const{className:n,colors:r,header:a,ios:i,material:o,children:s,...l}=t,u=_.useRef(null);_.useImperativeHandle(e,()=>({el:u.current}));const c=a?"th":"td",d=ut({ios:i,material:o}),p=Rt(),f=lY(r,p),g=d(sY({...t},f,n)),y={...l};return V.createElement(c,DE({className:g.base,ref:u},y),s)});uY.displayName="TableCell";const cY=()=>({base:{common:"align-middle relative",ios:"hairline-b",material:""}});function LE(){return LE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LE.apply(this,arguments)}const dY=_.forwardRef((t,e)=>{const{className:n,ios:r,material:a,children:i,...o}=t,s=_.useRef(null);_.useImperativeHandle(e,()=>({el:s.current}));const l=ut({ios:r,material:a})(cY({...t})),u={...o};return V.createElement("thead",LE({className:l.base,ref:s},u),i)});dY.displayName="TableHead";const pY=(t,e)=>{const{header:n}=t;return{base:{common:"align-middle relative",ios:n?"":F(e.bgIos,"hairline-b last:hairline-transparent"),material:n?"":F(e.bgMaterial,`border-t ${e.dividerMaterial}`)}}},hY=function(t,e){return t===void 0&&(t={}),{bgIos:F("hover:bg-black/5",e("dark:hover:bg-white/10")),bgMaterial:F("hover:bg-md-light-secondary-container",e("dark:hover:bg-md-dark-secondary-container")),dividerMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),...t}};function zE(){return zE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zE.apply(this,arguments)}const fY=_.forwardRef((t,e)=>{const{className:n,colors:r,header:a,ios:i,material:o,children:s,...l}=t,u=_.useRef(null);_.useImperativeHandle(e,()=>({el:u.current}));const c=ut({ios:i,material:o}),d=Rt(),p=hY(r,d),f=c(pY({...t},p)),g={...l};return V.createElement("tr",zE({className:f.base,ref:u},g),s)});fY.displayName="TableRow";const mY=(t,e,n)=>{const{translucent:r,opened:a}=t;return{base:{common:F(ar("fixed",n),"z-50 transform transition-transform-opacity w-full sm:w-auto start-0 bottom-0 sm:max-w-lg",!a&&"translate-y-full opacity-0 pointer-events-none"),ios:F("sm:rounded-lg duration-300",e.textIos,e.bgIos,r&&"translucent"),material:F("sm:rounded-2xl duration-200",e.textMaterial,e.bgMaterial),left:"sm:start-4-safe sm:bottom-4-safe",right:"sm:end-4-safe sm:bottom-4-safe sm:start-auto",center:"sm:left-1/2 sm:bottom-4-safe sm:-translate-x-1/2"},content:{common:"flex items-center justify-between",ios:"pl-4-safe pr-4-safe pt-3 pb-3-safe sm:px-4 sm:py-3",material:"pl-6-safe pr-6-safe py-3.5 pb-3.5-safe sm:px-6 sm:py-3.5"},button:{common:"-my-2 shrink-0 ms-4",ios:"",material:"-me-2"}}},gY=function(t,e){return t===void 0&&(t={}),{bgIos:"bg-black",bgMaterial:F("bg-md-light-surface-5",e("dark:bg-md-dark-surface-5")),textIos:"text-white",textMaterial:F("text-md-light-primary",e("dark:text-md-dark-primary")),...t}};function BE(){return BE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BE.apply(this,arguments)}const yY=_.forwardRef((t,e)=>{const{component:n="div",className:r,colors:a,translucent:i=!0,button:o,position:s="left",opened:l,ios:u,material:c,children:d,...p}=t,f=_.useRef(null);_.useImperativeHandle(e,()=>({el:f.current}));const g=n,y={...p},v=ut({ios:u,material:c}),b=Rt(),x=gY(a,b),w=v(mY({...t,translucent:i},x,r),r);return V.createElement(g,BE({ref:f,className:w.base[s]},y),V.createElement("div",{className:w.content},d,o&&V.createElement("div",{className:w.button},o)))});yY.displayName="Toast";const bY=(t,e,n,r)=>({base:{common:F(ar("relative",n),"cursor-pointer select-none inline-block align-middle relative duration-300 rounded-full group",r("dark:touch-ripple-white")),ios:"h-8 w-13 p-0.5",material:"w-13 h-8 border-2",notChecked:{ios:e.bgIos,material:F(e.bgMaterial,e.borderMaterial)},checked:{ios:`${e.checkedBgIos}`,material:F(e.checkedBgMaterial,e.checkedBorderMaterial)}},inner:{ios:F("w-full h-full bg-white rounded-full block duration-300 transform",r("dark:bg-opacity-0")),notChecked:{},checked:{ios:"scale-0"}},thumbWrap:{common:"rounded-full absolute duration-300 transform",ios:"w-7 h-7 start-0.5 top-0.5",material:"w-6 h-6 start-0.5 top-0.5",checked:{ios:F("translate-x-5 rtl:!-translate-x-5"),material:F("translate-x-5 rtl:!-translate-x-5")},notChecked:""},thumb:{common:"w-full h-full rounded-full absolute duration-300 transform start-0 top-0",ios:"shadow-ios-toggle",material:"group-active:scale-[1.1]",checked:{ios:F(e.checkedThumbBgIos),material:F(e.checkedThumbBgMaterial)},notChecked:{ios:e.thumbBgIos,material:F("scale-[0.666]",e.thumbBgMaterial)}},input:{common:"hidden"}}),vY=function(t,e){return t===void 0&&(t={}),{bgIos:F("bg-black bg-opacity-10",e("dark:bg-white dark:bg-opacity-20")),checkedBgIos:"bg-primary",thumbBgIos:"bg-white",checkedThumbBgIos:"bg-white",bgMaterial:F("bg-md-light-surface-variant",e("dark:bg-md-dark-surface-variant")),checkedBgMaterial:F("bg-md-light-primary",e("dark:bg-md-dark-primary")),borderMaterial:F("border-md-light-outline",e("dark:border-md-dark-outline")),checkedBorderMaterial:F("border-md-light-primary",e("dark:border-md-dark-primary")),thumbBgMaterial:F("bg-md-light-outline",e("dark:bg-md-dark-outline")),checkedThumbBgMaterial:F("bg-md-light-on-primary",e("dark:bg-md-dark-on-primary")),...t}};function jE(){return jE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jE.apply(this,arguments)}const pP=_.forwardRef((t,e)=>{const{component:n="label",className:r,colors:a,defaultChecked:i,checked:o,name:s,value:l,disabled:u,readOnly:c,onChange:d,touchRipple:p=!0,ios:f,material:g,children:y,...v}=t,b=_.useRef(null),x=_.useRef(null);_.useImperativeHandle(e,()=>({el:b.current}));const w=n,S={...v},C=wn({ios:f,material:g}),E=ut({ios:f,material:g}),R=Rt();jo(x,C==="material"&&p,b);const T=vY(a,R),$=o||i&&!d?"checked":"notChecked",P=E(bY(t,T,r,R),r);return V.createElement(w,jE({ref:b,className:P.base[$]},S),V.createElement("input",{type:"checkbox",name:s,value:l,disabled:u,readOnly:c,checked:o,defaultChecked:i,onChange:d,className:P.input}),V.createElement("span",{className:P.inner[$]}),V.createElement("span",{ref:x,className:P.thumbWrap[$]},V.createElement("span",{className:P.thumb[$]})),y)});pP.displayName="Toggle";function xY(){const{t}=gs();return X.jsxs(X.Fragment,{children:[X.jsxs(ba,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 md:gap-8 justify-center content-center text-center mx-auto",children:[X.jsx("h1",{className:"text-5xl mb-8",children:t("about.title")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph1")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph2")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph3")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph4")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.titleparagraph5")})]}),X.jsxs(ba,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[X.jsx("h2",{className:"text-3xl",children:t("about.license")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.licenseparagraph1")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.licenseparagraph2")})]}),X.jsxs(ba,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[X.jsx("h2",{className:"text-3xl",children:t("about.vision")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.visionparagraph1")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.visionparagraph2")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:X.jsxs(b3,{i18nKey:"about.visionparagraph3",children:[X.jsx("p",{children:t("about.visionparagraph3")}),X.jsx(Nt,{href:"mailto:info@digitalwarenkombinat.de",children:"info@digitalwarenkombinat.de"})]})}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:X.jsxs(b3,{i18nKey:"about.visionparagraph4",children:[X.jsx("p",{children:t("about.visionparagraph4")}),X.jsx(Nt,{href:"https://www.instagram.com/digitalwarenkombinat/",target:"_blank",children:"Instagram"}),X.jsx(Nt,{href:"https://www.instagram.com/digitalwarenkombinat/",target:"_blank",children:"LinkedIn"}),X.jsx(Nt,{href:"https://twitter.com/digiwako",target:"_blank",children:"X"})]})})]}),X.jsxs(ba,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[X.jsx("h2",{className:"text-3xl",children:t("about.usage")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.usageparagraph1")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("about.usageparagraph2")}),X.jsx("h2",{className:"text-2xl",children:t("about.usagecollage")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q79712290",target:"_blank",children:t("about.usagecollage1")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q56763836",target:"_blank",children:t("about.usagecollage2")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q4289290",target:"_blank",children:t("about.usagecollage3")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q20496956",target:"_blank",children:t("about.usagecollage4")}),X.jsx(Nt,{href:"https://www.europeana.eu/item/401/item_4FRF3Y3P73JWEB3C3EQ3MVSGQNJEABL4",target:"_blank",children:t("about.usagecollage5")}),X.jsx(Nt,{href:"https://www.europeana.eu/item/2048429/item_QUMU4MBTZZCJBHK6YXBACA3PKV43JFX5",target:"_blank",children:t("about.usagecollage6")}),X.jsx(Nt,{href:"https://www.europeana.eu/item/90402/RP_F_F15156",target:"_blank",children:t("about.usagecollage7")}),X.jsx(Nt,{href:"https://www.europeana.eu/item/91625/nomu_photo_NMA0031751",target:"_blank",children:t("about.usagecollage8")}),X.jsx(Nt,{href:"https://polona.pl/item-view/5c91b4ce-75e9-41f1-a8cd-5eb409abd482?page=0",target:"_blank",children:t("about.usagecollage9")}),X.jsx(Nt,{href:"https://polona.pl/item-view/1ae2a6d2-946a-444b-a01b-cb579f2847c6?page=0",target:"_blank",children:t("about.usagecollage10")}),X.jsx(Nt,{href:"https://polona.pl/item-view/d26338c2-3997-49ab-988d-e5b754925a50?page=0",target:"_blank",children:t("about.usagecollage11")}),X.jsx(Nt,{href:"https://polona.pl/item-view/3b8154bd-ff84-4b2a-8752-8ca14a8e50a2?page=0",target:"_blank",children:t("about.usagecollage12")}),X.jsx("h2",{className:"text-2xl",children:t("about.usagesticker")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q20537703",target:"_blank",children:t("about.usagesticker1")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q3698180",target:"_blank",children:t("about.usagesticker2")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q103297971",target:"_blank",children:t("about.usagesticker3")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q18359104",target:"_blank",children:t("about.usagesticker4")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q15008032",target:"_blank",children:t("about.usagesticker5")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q56763848",target:"_blank",children:t("about.usagesticker6")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q103304534",target:"_blank",children:t("about.usagesticker7")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q21781576",target:"_blank",children:t("about.usagesticker8")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q4193020",target:"_blank",children:t("about.usagesticker9")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q102974237",target:"_blank",children:t("about.usagesticker10")}),X.jsx("h2",{className:"text-2xl",children:t("about.usageframes")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q79712290",target:"_blank",children:t("about.usageframes1")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q51185223",target:"_blank",children:t("about.usageframes2")}),X.jsx(Nt,{href:"https://www.wikidata.org/wiki/Q51184973",target:"_blank",children:t("about.usageframes3")}),X.jsx(Nt,{href:"https://www.kisscc0.com/clipart/picture-frames-line-angle-arvindeco-frame-2-sbi2yk/",target:"_blank",children:t("about.usageframes4")}),X.jsx(Nt,{href:"https://www.kisscc0.com/clipart/computer-icons-picture-frames-line-art-calligraphy-dml9j1/",target:"_blank",children:t("about.usageframes5")}),X.jsx(Nt,{href:"https://www.kisscc0.com/clipart/picture-frames-computer-icons-square-drawing-docum-em07vq/",target:"_blank",children:t("about.usageframes6")}),X.jsx("h2",{className:"text-2xl",children:t("about.usagefonts")}),X.jsx(Nt,{href:"https://www.1001fonts.com/average-sans-font.html",target:"_blank",children:t("about.usagefonts1")}),X.jsx(Nt,{href:"https://www.1001fonts.com/beautyschooldropout-font.html",target:"_blank",children:t("about.usagefonts2")}),X.jsx(Nt,{href:"https://www.1001fonts.com/neucha-font.html",target:"_blank",children:t("about.usagefonts3")})]})]})}var wY={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const hP=t=>{let e;const n=new Set,r=(s,l)=>{const u=typeof s=="function"?s(e):s;if(!Object.is(u,e)){const c=e;e=l??(typeof u!="object"||u===null)?u:Object.assign({},e,u),n.forEach(d=>d(e,c))}},a=()=>e,i={setState:r,getState:a,getInitialState:()=>o,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(wY?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},o=e=t(r,a,i);return i},kY=t=>t?hP(t):hP;var fP={exports:{}},mP={},gP={exports:{}},yP={};/**
* @license React
* use-sync-external-store-shim.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var vp=_;function SY(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var CY=typeof Object.is=="function"?Object.is:SY,EY=vp.useState,NY=vp.useEffect,TY=vp.useLayoutEffect,IY=vp.useDebugValue;function _Y(t,e){var n=e(),r=EY({inst:{value:n,getSnapshot:e}}),a=r[0].inst,i=r[1];return TY(function(){a.value=n,a.getSnapshot=e,UE(a)&&i({inst:a})},[t,n,e]),NY(function(){return UE(a)&&i({inst:a}),t(function(){UE(a)&&i({inst:a})})},[t]),IY(n),n}function UE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!CY(t,n)}catch{return!0}}function RY(t,e){return e()}var $Y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?RY:_Y;yP.useSyncExternalStore=vp.useSyncExternalStore!==void 0?vp.useSyncExternalStore:$Y,gP.exports=yP;var OY=gP.exports;/**
* @license React
* use-sync-external-store-shim/with-selector.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Jy=_,MY=OY;function PY(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var FY=typeof Object.is=="function"?Object.is:PY,AY=MY.useSyncExternalStore,DY=Jy.useRef,LY=Jy.useEffect,zY=Jy.useMemo,BY=Jy.useDebugValue;mP.useSyncExternalStoreWithSelector=function(t,e,n,r,a){var i=DY(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=zY(function(){function l(f){if(!u){if(u=!0,c=f,f=r(f),a!==void 0&&o.hasValue){var g=o.value;if(a(g,f))return d=g}return d=f}if(g=d,FY(c,f))return g;var y=r(f);return a!==void 0&&a(g,y)?g:(c=f,d=y)}var u=!1,c,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,a]);var s=AY(t,i[0],i[1]);return LY(function(){o.hasValue=!0,o.value=s},[s]),BY(s),s},fP.exports=mP;var jY=fP.exports;const UY=Zi(jY);var bP={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:VY}=V,{useSyncExternalStoreWithSelector:WY}=UY;let vP=!1;const GY=t=>t;function HY(t,e=GY,n){(bP?"production":void 0)!=="production"&&n&&!vP&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),vP=!0);const r=WY(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return VY(r),r}const xP=t=>{(bP?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?kY(t):t,n=(r,a)=>HY(e,r,a);return Object.assign(n,e),n},qY=t=>t?xP(t):xP;var eb={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const VE=new Map,tb=t=>{const e=VE.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},KY=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=VE.get(n.name);if(r)return{type:"tracked",store:t,...r};const a={connection:e.connect(n),stores:{}};return VE.set(n.name,a),{type:"tracked",store:t,...a}},XY=(t,e={})=>(n,r,a)=>{const{enabled:i,anonymousActionType:o,store:s,...l}=e;let u;try{u=(i??(eb?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(eb?"production":void 0)!=="production"&&i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(n,r,a);const{connection:c,...d}=KY(s,u,l);let p=!0;a.setState=(y,v,b)=>{const x=n(y,v);if(!p)return x;const w=b===void 0?{type:o||"anonymous"}:typeof b=="string"?{type:b}:b;return s===void 0?(c?.send(w,r()),x):(c?.send({...w,type:`${s}/${w.type}`},{...tb(l.name),[s]:a.getState()}),x)};const f=(...y)=>{const v=p;p=!1,n(...y),p=v},g=t(a.setState,r,a);if(d.type==="untracked"?c?.init(g):(d.stores[d.store]=a,c?.init(Object.fromEntries(Object.entries(d.stores).map(([y,v])=>[y,y===d.store?g:v.getState()])))),a.dispatchFromDevtools&&typeof a.dispatch=="function"){let y=!1;const v=a.dispatch;a.dispatch=(...b)=>{(eb?"production":void 0)!=="production"&&b[0].type==="__setState"&&!y&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),y=!0),v(...b)}}return c.subscribe(y=>{var v;switch(y.type){case"ACTION":if(typeof y.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return WE(y.payload,b=>{if(b.type==="__setState"){if(s===void 0){f(b.state);return}Object.keys(b.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const x=b.state[s];if(x==null)return;JSON.stringify(a.getState())!==JSON.stringify(x)&&f(x);return}a.dispatchFromDevtools&&typeof a.dispatch=="function"&&a.dispatch(b)});case"DISPATCH":switch(y.payload.type){case"RESET":return f(g),s===void 0?c?.init(a.getState()):c?.init(tb(l.name));case"COMMIT":if(s===void 0){c?.init(a.getState());return}return c?.init(tb(l.name));case"ROLLBACK":return WE(y.state,b=>{if(s===void 0){f(b),c?.init(a.getState());return}f(b[s]),c?.init(tb(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return WE(y.state,b=>{if(s===void 0){f(b);return}JSON.stringify(a.getState())!==JSON.stringify(b[s])&&f(b[s])});case"IMPORT_STATE":{const{nextLiftedState:b}=y.payload,x=(v=b.computedStates.slice(-1)[0])==null?void 0:v.state;if(!x)return;f(s===void 0?x:x[s]),c?.send(null,b);return}case"PAUSE_RECORDING":return p=!p}return}}),g},QY=XY,WE=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function YY(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var a;const i=s=>s===null?null:JSON.parse(s,e?.reviver),o=(a=n.getItem(r))!=null?a:null;return o instanceof Promise?o.then(i):i(o)},setItem:(r,a)=>n.setItem(r,JSON.stringify(a,e?.replacer)),removeItem:r=>n.removeItem(r)}}const Zf=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Zf(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Zf(r)(n)}}}},ZY=(t,e)=>(n,r,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,b)=>({...b,...v}),...e},o=!1;const s=new Set,l=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,a);const c=Zf(i.serialize),d=()=>{const v=i.partialize({...r()});let b;const x=c({state:v,version:i.version}).then(w=>u.setItem(i.name,w)).catch(w=>{b=w});if(b)throw b;return x},p=a.setState;a.setState=(v,b)=>{p(v,b),d()};const f=t((...v)=>{n(...v),d()},r,a);let g;const y=()=>{var v;if(!u)return;o=!1,s.forEach(x=>x(r()));const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,r()))||void 0;return Zf(u.getItem.bind(u))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var w;return g=i.merge(x,(w=r())!=null?w:f),n(g,!0),d()}).then(()=>{b?.(g,void 0),o=!0,l.forEach(x=>x(g))}).catch(x=>{b?.(void 0,x)})};return a.persist={setOptions:v=>{i={...i,...v},v.getStorage&&(u=v.getStorage())},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:v=>(s.add(v),()=>{s.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},y(),g||f},JY=(t,e)=>(n,r,a)=>{let i={storage:YY(()=>localStorage),partialize:y=>y,version:0,merge:(y,v)=>({...v,...y}),...e},o=!1;const s=new Set,l=new Set;let u=i.storage;if(!u)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...y)},r,a);const c=()=>{const y=i.partialize({...r()});return u.setItem(i.name,{state:y,version:i.version})},d=a.setState;a.setState=(y,v)=>{d(y,v),c()};const p=t((...y)=>{n(...y),c()},r,a);a.getInitialState=()=>p;let f;const g=()=>{var y,v;if(!u)return;o=!1,s.forEach(x=>{var w;return x((w=r())!=null?w:p)});const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(y=r())!=null?y:p))||void 0;return Zf(u.getItem.bind(u))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var w;return f=i.merge(x,(w=r())!=null?w:p),n(f,!0),c()}).then(()=>{b?.(f,void 0),f=r(),o=!0,l.forEach(x=>x(f))}).catch(x=>{b?.(void 0,x)})};return a.persist={setOptions:y=>{i={...i,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:y=>(s.add(y),()=>{s.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},i.skipHydration||g(),f||p},eZ=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((eb?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),ZY(t,e)):JY(t,e),tZ=eZ,wP=[{id:1,image:"./frame/frame_1.png",front:"./frame/frame_1_front.png"},{id:2,image:"./frame/frame_2.png",front:"./frame/frame_2_front.png"},{id:3,image:"./frame/frame_3.png",front:"./frame/frame_3_front.png"},{id:4,image:"./frame/frame_4.png",front:"./frame/frame_4_front.png"},{id:5,image:"./frame/frame_5.png",front:"./frame/frame_5_front.png"}],nZ=[{id:"Betende_Frau_Maria",image:"./sticker/Betende_Frau_Maria.png"},{id:"Blumentopf",image:"./sticker/Blumentopf.png"},{id:"Blume",image:"./sticker/Blume.png"},{id:"Frau_in_gelbem_Kleid",image:"./sticker/Frau_in_gelbem_Kleid.png"},{id:"Magd",image:"./sticker/Magd.png"},{id:"Mann_liegend",image:"./sticker/Mann_liegend.png"},{id:"Mann",image:"./sticker/Mann.png"},{id:"Mucha_Dekor",image:"./sticker/Mucha_Dekor.png"},{id:"The_Hare",image:"./sticker/The_Hare.png"},{id:"Wasserspeier",image:"./sticker/Wasserspeier.png"}],rZ=[{id:"http://www.wikidata.org/entity/Q20355536",name:"A Street in Torello, Italy",year:"1890",country:"Denmark",location:"Statens Museum for Kunst",creator:"Peder Severin Kr\xF8yer",url:"https://api.smk.dk/api/v1/iiif/manifest/?id=KMS1435",identifier:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2",image:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2/full/400,/0/default.jpg",thumbnail:"https://iip.smk.dk/iiif/jp2/z603r155c_KMS1435.tif.reconstructed.tif.jp2/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q20537703",name:"At the French Windows. The Artist's Wife",year:"1897",country:"Denmark",location:"Statens Museum for Kunst",creator:"Laurits Andersen Ring",url:"https://api.smk.dk/api/v1/iiif/manifest/?id=KMS3716",identifier:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2",image:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2/full/400,/0/default.jpg",thumbnail:"https://iip.smk.dk/iiif/jp2/1544bs13w_kms3716.tif.reconstructed.tif.jp2/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103297795",name:"Brot! (Bread!)",year:"1924",country:"Germany",location:"Vanderbilt University Fine Arts Gallery",creator:"K\xE4the Kollwitz",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1977/1977.011.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1977%2F1977.011.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103297971",name:"Business-Man, ffrom Genius, Zeitschrift f\xFCr werdende und alte Kunst (Magazine for Emerging and Ancient Art), Year 2, no. 1",year:"1920",country:"Belgium",location:"Vanderbilt University Fine Arts Gallery",creator:"Frans Masereel",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.032.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.032.med.jpg/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q103300860",name:"Half-Figure Prophet",year:"1450",country:"France",location:"Vanderbilt University Fine Arts Gallery",creator:"http://www.wikidata.org/.well-known/genid/d7c4865c9fae865605be887d7277ab75",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1975/1975.005.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1975%2F1975.005.jpg/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q102967848",name:"Landscape with Shepherds",year:"",country:"Netherlands",location:"Vanderbilt University Fine Arts Gallery",creator:"Jan Both",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1979/1979.0195P.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0195P.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q106582838",name:"The Blacksmith Worker",year:"",country:"Switzerland",location:"Vanderbilt University Fine Arts Gallery",creator:"Antonello da Messina",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.036.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.036.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q104032628",name:"The Empty Jug",year:"1653",country:"Netherlands",location:"Vanderbilt University Fine Arts Gallery",creator:"Adriaen van Ostade",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1979/1979.0845P.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1979%2F1979.0845P.tif/full/100,100/0/default.jpg"},{id:"http://www.wikidata.org/entity/Q102975484",name:"Trostung (Consolation), from Genius, Zeitschrift f\xFCr werdende und alte Kunst (Magazine for Emerging and Ancient Art), Year 2, no. 1",year:"1920",country:"Austria",location:"Vanderbilt University Fine Arts Gallery",creator:"Georg Ehrlich",url:"https://iiif-manifest.library.vanderbilt.edu/gallery/1976/1976.031.json",identifier:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg",image:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg/full/400,/0/default.jpg",thumbnail:"https://iiif.library.vanderbilt.edu/iiif/2/gallery%2F1976%2F1976.031.med.jpg/full/100,100/0/default.jpg"}],kP={artworkList:nZ,frame:wP[1],imageList:rZ.sort(()=>Math.random()-.5),canvasList:[],imageLikeList:[]},Ec=qY()(QY(tZ(t=>({...kP,addToArtwork:(e,n)=>t(r=>({artworkList:[{id:e,image:n},...r.artworkList]})),addToCanvas:(e,n,r)=>t(a=>({canvasList:[...a.canvasList,{brightness:0,contrast:0,height:400,id:`${a.canvasList.length+1}`,image:e,isDragging:!1,opacity:1,width:400,x:n,y:r}]})),addToImageList:e=>t(n=>({imageList:[...n.imageList,...e]})),removeFromImageList:e=>t(n=>({imageList:n.imageList.filter(r=>r.id!==e)})),likeImage:e=>t(n=>({imageLikeList:[...n.imageLikeList,e]})),resetState:()=>t(kP),removeFromCanvas:e=>t(n=>({canvasList:n.canvasList.filter(r=>r.id!==e)})),setFrame:e=>t(()=>({frame:wP.find(n=>n.id===e)})),transformCanvasImage:e=>t(n=>({canvasList:n.canvasList.map(r=>r.id!==e.id?r:{...r,height:e.height,width:e.width,x:e.x,y:e.y,brightness:e.brightness,contrast:e.contrast,opacity:e.opacity})})),moveCanvasImage:(e,n)=>t(r=>{const a=r.canvasList.findIndex(i=>i.id===e);if(a!==-1){const i=n?a+1:a-1;if(i>=0&&i<r.canvasList.length){const o=[...r.canvasList],[s]=o.splice(a,1);return o.splice(i,0,s),{canvasList:o}}}return{}})}),{name:"glamStore",version:1}))),nb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xp(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function GE(t){return"nodeType"in t}function ii(t){var e,n;return t?xp(t)?t:GE(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function HE(t){const{Document:e}=ii(t);return t instanceof e}function Jf(t){return xp(t)?!1:t instanceof ii(t).HTMLElement}function SP(t){return t instanceof ii(t).SVGElement}function wp(t){return t?xp(t)?t.document:GE(t)?HE(t)?t:Jf(t)||SP(t)?t.ownerDocument:document:document:document}const bs=nb?_.useLayoutEffect:_.useEffect;function rb(t){const e=_.useRef(t);return bs(()=>{e.current=t}),_.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.current==null?void 0:e.current(...r)},[])}function aZ(){const t=_.useRef(null),e=_.useCallback((r,a)=>{t.current=setInterval(r,a)},[]),n=_.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function em(t,e){e===void 0&&(e=[t]);const n=_.useRef(t);return bs(()=>{n.current!==t&&(n.current=t)},e),n}function tm(t,e){const n=_.useRef();return _.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function ab(t){const e=rb(t),n=_.useRef(null),r=_.useCallback(a=>{a!==n.current&&e?.(a,n.current),n.current=a},[]);return[n,r]}function ib(t){const e=_.useRef();return _.useEffect(()=>{e.current=t},[t]),e.current}let qE={};function ob(t,e){return _.useMemo(()=>{if(e)return e;const n=qE[t]==null?0:qE[t]+1;return qE[t]=n,t+"-"+n},[t,e])}function CP(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,o)=>{const s=Object.entries(o);for(const[l,u]of s){const c=i[l];c!=null&&(i[l]=c+t*u)}return i},{...e})}}const kp=CP(1),sb=CP(-1);function iZ(t){return"clientX"in t&&"clientY"in t}function KE(t){if(!t)return!1;const{KeyboardEvent:e}=ii(t.target);return e&&t instanceof e}function oZ(t){if(!t)return!1;const{TouchEvent:e}=ii(t.target);return e&&t instanceof e}function lb(t){if(oZ(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return iZ(t)?{x:t.clientX,y:t.clientY}:null}const nm=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[nm.Translate.toString(t),nm.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),EP="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function sZ(t){return t.matches(EP)?t:t.querySelector(EP)}const lZ={display:"none"};function uZ(t){let{id:e,value:n}=t;return V.createElement("div",{id:e,style:lZ},n)}function cZ(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const a={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return V.createElement("div",{id:e,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function dZ(){const[t,e]=_.useState("");return{announce:_.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const NP=_.createContext(null);function TP(t){const e=_.useContext(NP);_.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function pZ(){const[t]=_.useState(()=>new Set),e=_.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[_.useCallback(n=>{let{type:r,event:a}=n;t.forEach(i=>{var o;return(o=i[r])==null?void 0:o.call(i,a)})},[t]),e]}const hZ={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},fZ={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function mZ(t){let{announcements:e=fZ,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=hZ}=t;const{announce:i,announcement:o}=dZ(),s=ob("DndLiveRegion"),[l,u]=_.useState(!1);if(_.useEffect(()=>{u(!0)},[]),TP(_.useMemo(()=>({onDragStart(d){let{active:p}=d;i(e.onDragStart({active:p}))},onDragMove(d){let{active:p,over:f}=d;e.onDragMove&&i(e.onDragMove({active:p,over:f}))},onDragOver(d){let{active:p,over:f}=d;i(e.onDragOver({active:p,over:f}))},onDragEnd(d){let{active:p,over:f}=d;i(e.onDragEnd({active:p,over:f}))},onDragCancel(d){let{active:p,over:f}=d;i(e.onDragCancel({active:p,over:f}))}}),[i,e])),!l)return null;const c=V.createElement(V.Fragment,null,V.createElement(uZ,{id:r,value:a.draggable}),V.createElement(cZ,{id:s,announcement:o}));return n?zo.createPortal(c,n):c}var Br;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Br||(Br={}));function ub(){}function IP(t,e){return _.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function gZ(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return _.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Uo=Object.freeze({x:0,y:0});function yZ(t,e){const n=lb(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function bZ(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function vZ(t,e){if(!t||t.length===0)return null;const[n]=t;return e?n[e]:n}function xZ(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=a-r,s=i-n;if(r<a&&n<i){const l=e.width*e.height,u=t.width*t.height,c=o*s,d=c/(l+u-c);return Number(d.toFixed(4))}return 0}const wZ=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const a=[];for(const i of r){const{id:o}=i,s=n.get(o);if(s){const l=xZ(s,e);l>0&&a.push({id:o,data:{droppableContainer:i,value:l}})}}return a.sort(bZ)};function kZ(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function _P(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Uo}function SZ(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,o)=>({...i,top:i.top+t*o.y,bottom:i.bottom+t*o.y,left:i.left+t*o.x,right:i.right+t*o.x}),{...e})}}const CZ=SZ(1);function RP(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function EZ(t,e,n){const r=RP(e);if(!r)return t;const{scaleX:a,scaleY:i,x:o,y:s}=r,l=t.left-o-(1-a)*parseFloat(n),u=t.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),c=a?t.width/a:t.width,d=i?t.height/i:t.height;return{width:c,height:d,top:u,right:l+c,bottom:u+d,left:l}}const NZ={ignoreTransform:!1};function rm(t,e){e===void 0&&(e=NZ);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:c}=ii(t).getComputedStyle(t);u&&(n=EZ(n,u,c))}const{top:r,left:a,width:i,height:o,bottom:s,right:l}=n;return{top:r,left:a,width:i,height:o,bottom:s,right:l}}function $P(t){return rm(t,{ignoreTransform:!0})}function TZ(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function IZ(t,e){return e===void 0&&(e=ii(t).getComputedStyle(t)),e.position==="fixed"}function _Z(t,e){e===void 0&&(e=ii(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const a=e[r];return typeof a=="string"?n.test(a):!1})}function XE(t,e){const n=[];function r(a){if(e!=null&&n.length>=e||!a)return n;if(HE(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Jf(a)||SP(a)||n.includes(a))return n;const i=ii(t).getComputedStyle(a);return a!==t&&_Z(a,i)&&n.push(a),IZ(a,i)?n:r(a.parentNode)}return t?r(t):n}function OP(t){const[e]=XE(t,1);return e??null}function QE(t){return!nb||!t?null:xp(t)?t:GE(t)?HE(t)||t===wp(t).scrollingElement?window:Jf(t)?t:null:null}function MP(t){return xp(t)?t.scrollX:t.scrollLeft}function PP(t){return xp(t)?t.scrollY:t.scrollTop}function YE(t){return{x:MP(t),y:PP(t)}}var ta;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ta||(ta={}));function FP(t){return!nb||!t?!1:t===document.scrollingElement}function AP(t){const e={x:0,y:0},n=FP(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,s=t.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:o,isRight:s,maxScroll:r,minScroll:e}}const RZ={x:.2,y:.2};function $Z(t,e,n,r,a){let{top:i,left:o,right:s,bottom:l}=n;r===void 0&&(r=10),a===void 0&&(a=RZ);const{isTop:u,isBottom:c,isLeft:d,isRight:p}=AP(t),f={x:0,y:0},g={x:0,y:0},y={height:e.height*a.y,width:e.width*a.x};return!u&&i<=e.top+y.height?(f.y=ta.Backward,g.y=r*Math.abs((e.top+y.height-i)/y.height)):!c&&l>=e.bottom-y.height&&(f.y=ta.Forward,g.y=r*Math.abs((e.bottom-y.height-l)/y.height)),!p&&s>=e.right-y.width?(f.x=ta.Forward,g.x=r*Math.abs((e.right-y.width-s)/y.width)):!d&&o<=e.left+y.width&&(f.x=ta.Backward,g.x=r*Math.abs((e.left+y.width-o)/y.width)),{direction:f,speed:g}}function OZ(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:a}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:a,width:t.clientWidth,height:t.clientHeight}}function DP(t){return t.reduce((e,n)=>kp(e,YE(n)),Uo)}function MZ(t){return t.reduce((e,n)=>e+MP(n),0)}function PZ(t){return t.reduce((e,n)=>e+PP(n),0)}function LP(t,e){if(e===void 0&&(e=rm),!t)return;const{top:n,left:r,bottom:a,right:i}=e(t);OP(t)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const FZ=[["x",["left","right"],MZ],["y",["top","bottom"],PZ]];let ZE=class{constructor(t,e){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=XE(e),r=DP(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,i,o]of FZ)for(const s of i)Object.defineProperty(this,s,{get:()=>{const l=o(n),u=r[a]-l;return this.rect[s]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}};class am{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var a;(a=this.target)==null||a.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function AZ(t){const{EventTarget:e}=ii(t);return t instanceof e?t:wp(t)}function JE(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var so;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(so||(so={}));function zP(t){t.preventDefault()}function DZ(t){t.stopPropagation()}var Fn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(Fn||(Fn={}));const BP={start:[Fn.Space,Fn.Enter],cancel:[Fn.Esc],end:[Fn.Space,Fn.Enter]},LZ=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Fn.Right:return{...n,x:n.x+25};case Fn.Left:return{...n,x:n.x-25};case Fn.Down:return{...n,y:n.y+25};case Fn.Up:return{...n,y:n.y-25}}};class jP{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new am(wp(n)),this.windowListeners=new am(ii(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(so.Resize,this.handleCancel),this.windowListeners.add(so.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(so.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&LP(r),n(Uo)}handleKeyDown(e){if(KE(e)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=BP,coordinateGetter:o=LZ,scrollBehavior:s="smooth"}=a,{code:l}=e;if(i.end.includes(l)){this.handleEnd(e);return}if(i.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=r.current,c=u?{x:u.left,y:u.top}:Uo;this.referenceCoordinates||(this.referenceCoordinates=c);const d=o(e,{active:n,context:r.current,currentCoordinates:c});if(d){const p=sb(d,c),f={x:0,y:0},{scrollableAncestors:g}=r.current;for(const y of g){const v=e.code,{isTop:b,isRight:x,isLeft:w,isBottom:S,maxScroll:C,minScroll:E}=AP(y),R=OZ(y),T={x:Math.min(v===Fn.Right?R.right-R.width/2:R.right,Math.max(v===Fn.Right?R.left:R.left+R.width/2,d.x)),y:Math.min(v===Fn.Down?R.bottom-R.height/2:R.bottom,Math.max(v===Fn.Down?R.top:R.top+R.height/2,d.y))},$=v===Fn.Right&&!x||v===Fn.Left&&!w,P=v===Fn.Down&&!S||v===Fn.Up&&!b;if($&&T.x!==d.x){const D=y.scrollLeft+p.x,B=v===Fn.Right&&D<=C.x||v===Fn.Left&&D>=E.x;if(B&&!p.y){y.scrollTo({left:D,behavior:s});return}B?f.x=y.scrollLeft-D:f.x=v===Fn.Right?y.scrollLeft-C.x:y.scrollLeft-E.x,f.x&&y.scrollBy({left:-f.x,behavior:s});break}else if(P&&T.y!==d.y){const D=y.scrollTop+p.y,B=v===Fn.Down&&D<=C.y||v===Fn.Up&&D>=E.y;if(B&&!p.x){y.scrollTo({top:D,behavior:s});return}B?f.y=y.scrollTop-D:f.y=v===Fn.Down?y.scrollTop-C.y:y.scrollTop-E.y,f.y&&y.scrollBy({top:-f.y,behavior:s});break}}this.handleMove(e,kp(sb(d,this.referenceCoordinates),f))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}jP.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=BP,onActivation:a}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const s=i.activatorNode.current;return s&&t.target!==s?!1:(t.preventDefault(),a?.({event:t.nativeEvent}),!0)}return!1}}];function UP(t){return!!(t&&"distance"in t)}function VP(t){return!!(t&&"delay"in t)}class eN{constructor(e,n,r){var a;r===void 0&&(r=AZ(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=wp(o),this.documentListeners=new am(this.document),this.listeners=new am(r),this.windowListeners=new am(ii(o)),this.initialCoordinates=(a=lb(i))!=null?a:Uo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(so.Resize,this.handleCancel),this.windowListeners.add(so.DragStart,zP),this.windowListeners.add(so.VisibilityChange,this.handleCancel),this.windowListeners.add(so.ContextMenu,zP),this.documentListeners.add(so.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(VP(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(UP(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(so.Click,DZ,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(so.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:s}}=i;if(!a)return;const l=(n=lb(e))!=null?n:Uo,u=sb(a,l);if(!r&&s){if(UP(s)){if(s.tolerance!=null&&JE(u,s.tolerance))return this.handleCancel();if(JE(u,s.distance))return this.handleStart()}return VP(s)&&JE(u,s.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===Fn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const zZ={move:{name:"pointermove"},end:{name:"pointerup"}};class WP extends eN{constructor(e){const{event:n}=e,r=wp(n.target);super(e,zZ,r)}}WP.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const BZ={move:{name:"mousemove"},end:{name:"mouseup"}};var tN;(function(t){t[t.RightClick=2]="RightClick"})(tN||(tN={}));class GP extends eN{constructor(e){super(e,BZ,wp(e.event.target))}}GP.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===tN.RightClick?!1:(r?.({event:n}),!0)}}];const nN={move:{name:"touchmove"},end:{name:"touchend"}};class HP extends eN{constructor(e){super(e,nN)}static setup(){return window.addEventListener(nN.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(nN.move.name,e)};function e(){}}}HP.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:a}=n;return a.length>1?!1:(r?.({event:n}),!0)}}];var im;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(im||(im={}));var cb;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(cb||(cb={}));function jZ(t){let{acceleration:e,activator:n=im.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:o=5,order:s=cb.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:c,delta:d,threshold:p}=t;const f=VZ({delta:d,disabled:!i}),[g,y]=aZ(),v=_.useRef({x:0,y:0}),b=_.useRef({x:0,y:0}),x=_.useMemo(()=>{switch(n){case im.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case im.DraggableRect:return a}},[n,a,l]),w=_.useRef(null),S=_.useCallback(()=>{const E=w.current;if(!E)return;const R=v.current.x*b.current.x,T=v.current.y*b.current.y;E.scrollBy(R,T)},[]),C=_.useMemo(()=>s===cb.TreeOrder?[...u].reverse():u,[s,u]);_.useEffect(()=>{if(!i||!u.length||!x){y();return}for(const E of C){if(r?.(E)===!1)continue;const R=u.indexOf(E),T=c[R];if(!T)continue;const{direction:$,speed:P}=$Z(E,T,x,e,p);for(const D of["x","y"])f[D][$[D]]||(P[D]=0,$[D]=0);if(P.x>0||P.y>0){y(),w.current=E,g(S,o),v.current=P,b.current=$;return}}v.current={x:0,y:0},b.current={x:0,y:0},y()},[e,S,r,y,i,o,JSON.stringify(x),JSON.stringify(f),g,u,C,c,JSON.stringify(p)])}const UZ={x:{[ta.Backward]:!1,[ta.Forward]:!1},y:{[ta.Backward]:!1,[ta.Forward]:!1}};function VZ(t){let{delta:e,disabled:n}=t;const r=ib(e);return tm(a=>{if(n||!r||!a)return UZ;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[ta.Backward]:a.x[ta.Backward]||i.x===-1,[ta.Forward]:a.x[ta.Forward]||i.x===1},y:{[ta.Backward]:a.y[ta.Backward]||i.y===-1,[ta.Forward]:a.y[ta.Forward]||i.y===1}}},[n,e,r])}function WZ(t,e){const n=e!==null?t.get(e):void 0,r=n?n.node.current:null;return tm(a=>{var i;return e===null?null:(i=r??a)!=null?i:null},[r,e])}function GZ(t,e){return _.useMemo(()=>t.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var om;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(om||(om={}));var rN;(function(t){t.Optimized="optimized"})(rN||(rN={}));const qP=new Map;function HZ(t,e){let{dragging:n,dependencies:r,config:a}=e;const[i,o]=_.useState(null),{frequency:s,measure:l,strategy:u}=a,c=_.useRef(t),d=v(),p=em(d),f=_.useCallback(function(b){b===void 0&&(b=[]),!p.current&&o(x=>x===null?b:x.concat(b.filter(w=>!x.includes(w))))},[p]),g=_.useRef(null),y=tm(b=>{if(d&&!n)return qP;if(!b||b===qP||c.current!==t||i!=null){const x=new Map;for(let w of t){if(!w)continue;if(i&&i.length>0&&!i.includes(w.id)&&w.rect.current){x.set(w.id,w.rect.current);continue}const S=w.node.current,C=S?new ZE(l(S),S):null;w.rect.current=C,C&&x.set(w.id,C)}return x}return b},[t,i,n,d,l]);return _.useEffect(()=>{c.current=t},[t]),_.useEffect(()=>{d||f()},[n,d]),_.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),_.useEffect(()=>{d||typeof s!="number"||g.current!==null||(g.current=setTimeout(()=>{f(),g.current=null},s))},[s,d,f,...r]),{droppableRects:y,measureDroppableContainers:f,measuringScheduled:i!=null};function v(){switch(u){case om.Always:return!1;case om.BeforeDragging:return n;default:return!n}}}function aN(t,e){return tm(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function qZ(t,e){return aN(t,e)}function KZ(t){let{callback:e,disabled:n}=t;const r=rb(e),a=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return _.useEffect(()=>()=>a?.disconnect(),[a]),a}function db(t){let{callback:e,disabled:n}=t;const r=rb(e),a=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return _.useEffect(()=>()=>a?.disconnect(),[a]),a}function XZ(t){return new ZE(rm(t),t)}function KP(t,e,n){e===void 0&&(e=XZ);const[r,a]=_.useReducer(s,null),i=KZ({callback(l){if(t)for(const u of l){const{type:c,target:d}=u;if(c==="childList"&&d instanceof HTMLElement&&d.contains(t)){a();break}}}}),o=db({callback:a});return bs(()=>{a(),t?(o?.observe(t),i?.observe(document.body,{childList:!0,subtree:!0})):(o?.disconnect(),i?.disconnect())},[t]),r;function s(l){if(!t)return null;if(t.isConnected===!1){var u;return(u=l??n)!=null?u:null}const c=e(t);return JSON.stringify(l)===JSON.stringify(c)?l:c}}function QZ(t){const e=aN(t);return _P(t,e)}const XP=[];function YZ(t){const e=_.useRef(t),n=tm(r=>t?r&&r!==XP&&t&&e.current&&t.parentNode===e.current.parentNode?r:XE(t):XP,[t]);return _.useEffect(()=>{e.current=t},[t]),n}function ZZ(t){const[e,n]=_.useState(null),r=_.useRef(t),a=_.useCallback(i=>{const o=QE(i.target);o&&n(s=>s?(s.set(o,YE(o)),new Map(s)):null)},[]);return _.useEffect(()=>{const i=r.current;if(t!==i){o(i);const s=t.map(l=>{const u=QE(l);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,YE(u)]):null}).filter(l=>l!=null);n(s.length?new Map(s):null),r.current=t}return()=>{o(t),o(i)};function o(s){s.forEach(l=>{const u=QE(l);u?.removeEventListener("scroll",a)})}},[a,t]),_.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>kp(i,o),Uo):DP(t):Uo,[t,e])}function QP(t,e){e===void 0&&(e=[]);const n=_.useRef(null);return _.useEffect(()=>{n.current=null},e),_.useEffect(()=>{const r=t!==Uo;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?sb(t,n.current):Uo}function JZ(t){_.useEffect(()=>{if(!nb)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function eJ(t,e){return _.useMemo(()=>t.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=o=>{i(o,e)},n},{}),[t,e])}function YP(t){return _.useMemo(()=>t?TZ(t):null,[t])}const iN=[];function tJ(t,e){e===void 0&&(e=rm);const[n]=t,r=YP(n?ii(n):null),[a,i]=_.useReducer(s,iN),o=db({callback:i});return t.length>0&&a===iN&&i(),bs(()=>{t.length?t.forEach(l=>o?.observe(l)):(o?.disconnect(),i())},[t]),a;function s(){return t.length?t.map(l=>FP(l)?r:new ZE(e(l),l)):iN}}function ZP(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Jf(e)?e:t}function nJ(t){let{measure:e}=t;const[n,r]=_.useState(null),a=_.useCallback(u=>{for(const{target:c}of u)if(Jf(c)){r(d=>{const p=e(c);return d?{...d,width:p.width,height:p.height}:p});break}},[e]),i=db({callback:a}),o=_.useCallback(u=>{const c=ZP(u);i?.disconnect(),c&&i?.observe(c),r(c?e(c):null)},[e,i]),[s,l]=ab(o);return _.useMemo(()=>({nodeRef:s,rect:n,setRef:l}),[n,s,l])}const rJ=[{sensor:WP,options:{}},{sensor:jP,options:{}}],aJ={current:{}},pb={draggable:{measure:$P},droppable:{measure:$P,strategy:om.WhileDragging,frequency:rN.Optimized},dragOverlay:{measure:rm}};class sm extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const iJ={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new sm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ub},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:pb,measureDroppableContainers:ub,windowRect:null,measuringScheduled:!1},JP={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ub,draggableNodes:new Map,over:null,measureDroppableContainers:ub},lm=_.createContext(JP),eF=_.createContext(iJ);function oJ(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new sm}}}function sJ(t,e){switch(e.type){case Br.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Br.DragMove:return t.draggable.active?{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}}:t;case Br.DragEnd:case Br.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Br.RegisterDroppable:{const{element:n}=e,{id:r}=n,a=new sm(t.droppable.containers);return a.set(r,n),{...t,droppable:{...t.droppable,containers:a}}}case Br.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new sm(t.droppable.containers);return o.set(n,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case Br.UnregisterDroppable:{const{id:n,key:r}=e,a=t.droppable.containers.get(n);if(!a||r!==a.key)return t;const i=new sm(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function lJ(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:a}=_.useContext(lm),i=ib(r),o=ib(n?.id);return _.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!KE(i)||document.activeElement===i.target)return;const s=a.get(o);if(!s)return;const{activatorNode:l,node:u}=s;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const c of[l.current,u.current]){if(!c)continue;const d=sZ(c);if(d){d.focus();break}}})}},[r,e,a,o,i]),null}function tF(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...r}),n):n}function uJ(t){return _.useMemo(()=>({draggable:{...pb.draggable,...t?.draggable},droppable:{...pb.droppable,...t?.droppable},dragOverlay:{...pb.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function cJ(t){let{activeNode:e,measure:n,initialRect:r,config:a=!0}=t;const i=_.useRef(!1),{x:o,y:s}=typeof a=="boolean"?{x:a,y:a}:a;bs(()=>{if(!o&&!s||!e){i.current=!1;return}if(i.current||!r)return;const l=e?.node.current;if(!l||l.isConnected===!1)return;const u=n(l),c=_P(u,r);if(o||(c.x=0),s||(c.y=0),i.current=!0,Math.abs(c.x)>0||Math.abs(c.y)>0){const d=OP(l);d&&d.scrollBy({top:c.y,left:c.x})}},[e,o,s,r,n])}const hb=_.createContext({...Uo,scaleX:1,scaleY:1});var pu;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(pu||(pu={}));const dJ=_.memo(function(t){var e,n,r,a;let{id:i,accessibility:o,autoScroll:s=!0,children:l,sensors:u=rJ,collisionDetection:c=wZ,measuring:d,modifiers:p,...f}=t;const g=_.useReducer(sJ,void 0,oJ),[y,v]=g,[b,x]=pZ(),[w,S]=_.useState(pu.Uninitialized),C=w===pu.Initialized,{draggable:{active:E,nodes:R,translate:T},droppable:{containers:$}}=y,P=E?R.get(E):null,D=_.useRef({initial:null,translated:null}),B=_.useMemo(()=>{var or;return E!=null?{id:E,data:(or=P?.data)!=null?or:aJ,rect:D}:null},[E,P]),z=_.useRef(null),[q,Y]=_.useState(null),[Z,H]=_.useState(null),L=em(f,Object.values(f)),Q=ob("DndDescribedBy",i),J=_.useMemo(()=>$.getEnabled(),[$]),te=uJ(d),{droppableRects:oe,measureDroppableContainers:he,measuringScheduled:ae}=HZ(J,{dragging:C,dependencies:[T.x,T.y],config:te.droppable}),de=WZ(R,E),ke=_.useMemo(()=>Z?lb(Z):null,[Z]),K=es(),se=qZ(de,te.draggable.measure);cJ({activeNode:E?R.get(E):null,config:K.layoutShiftCompensation,initialRect:se,measure:te.draggable.measure});const pe=KP(de,te.draggable.measure,se),Ne=KP(de?de.parentElement:null),Se=_.useRef({activatorEvent:null,active:null,activeNode:de,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=$.getNodeFor((e=Se.current.over)==null?void 0:e.id),Pe=nJ({measure:te.dragOverlay.measure}),We=(n=Pe.nodeRef.current)!=null?n:de,$e=C?(r=Pe.rect)!=null?r:pe:null,lt=!!(Pe.nodeRef.current&&Pe.rect),Ze=QZ(lt?null:pe),Je=YP(We?ii(We):null),Ve=YZ(C?Te??de:null),Vt=tJ(Ve),$t=tF(p,{transform:{x:T.x-Ze.x,y:T.y-Ze.y,scaleX:1,scaleY:1},activatorEvent:Z,active:B,activeNodeRect:pe,containerNodeRect:Ne,draggingNodeRect:$e,over:Se.current.over,overlayNodeRect:Pe.rect,scrollableAncestors:Ve,scrollableAncestorRects:Vt,windowRect:Je}),Wt=ke?kp(ke,T):null,Gt=ZZ(Ve),Ot=QP(Gt),wt=QP(Gt,[pe]),ln=kp($t,Ot),hn=$e?CZ($e,$t):null,yr=B&&hn?c({active:B,collisionRect:hn,droppableRects:oe,droppableContainers:J,pointerCoordinates:Wt}):null,yn=vZ(yr,"id"),[Zn,li]=_.useState(null),Xa=lt?$t:kp($t,wt),un=kZ(Xa,(a=Zn?.rect)!=null?a:null,pe),la=_.useCallback((or,Vn)=>{let{sensor:dt,options:le}=Vn;if(z.current==null)return;const fe=R.get(z.current);if(!fe)return;const xe=or.nativeEvent,_e=new dt({active:z.current,activeNode:fe,event:xe,options:le,context:Se,onStart(it){const nt=z.current;if(nt==null)return;const at=R.get(nt);if(!at)return;const{onDragStart:Qe}=L.current,bt={active:{id:nt,data:at.data,rect:D}};zo.unstable_batchedUpdates(()=>{Qe?.(bt),S(pu.Initializing),v({type:Br.DragStart,initialCoordinates:it,active:nt}),b({type:"onDragStart",event:bt})})},onMove(it){v({type:Br.DragMove,coordinates:it})},onEnd:ze(Br.DragEnd),onCancel:ze(Br.DragCancel)});zo.unstable_batchedUpdates(()=>{Y(_e),H(or.nativeEvent)});function ze(it){return async function(){const{active:nt,collisions:at,over:Qe,scrollAdjustedTranslate:bt}=Se.current;let cn=null;if(nt&&bt){const{cancelDrop:ft}=L.current;cn={activatorEvent:xe,active:nt,collisions:at,delta:bt,over:Qe},it===Br.DragEnd&&typeof ft=="function"&&await Promise.resolve(ft(cn))&&(it=Br.DragCancel)}z.current=null,zo.unstable_batchedUpdates(()=>{v({type:it}),S(pu.Uninitialized),li(null),Y(null),H(null);const ft=it===Br.DragEnd?"onDragEnd":"onDragCancel";if(cn){const Jt=L.current[ft];Jt?.(cn),b({type:ft,event:cn})}})}}},[R]),Qa=_.useCallback((or,Vn)=>(dt,le)=>{const fe=dt.nativeEvent,xe=R.get(le);if(z.current!==null||!xe||fe.dndKit||fe.defaultPrevented)return;const _e={active:xe};or(dt,Vn.options,_e)===!0&&(fe.dndKit={capturedBy:Vn.sensor},z.current=le,la(dt,Vn))},[R,la]),Ea=GZ(u,Qa);JZ(u),bs(()=>{pe&&w===pu.Initializing&&S(pu.Initialized)},[pe,w]),_.useEffect(()=>{const{onDragMove:or}=L.current,{active:Vn,activatorEvent:dt,collisions:le,over:fe}=Se.current;if(!Vn||!dt)return;const xe={active:Vn,activatorEvent:dt,collisions:le,delta:{x:ln.x,y:ln.y},over:fe};zo.unstable_batchedUpdates(()=>{or?.(xe),b({type:"onDragMove",event:xe})})},[ln.x,ln.y]),_.useEffect(()=>{const{active:or,activatorEvent:Vn,collisions:dt,droppableContainers:le,scrollAdjustedTranslate:fe}=Se.current;if(!or||z.current==null||!Vn||!fe)return;const{onDragOver:xe}=L.current,_e=le.get(yn),ze=_e&&_e.rect.current?{id:_e.id,rect:_e.rect.current,data:_e.data,disabled:_e.disabled}:null,it={active:or,activatorEvent:Vn,collisions:dt,delta:{x:fe.x,y:fe.y},over:ze};zo.unstable_batchedUpdates(()=>{li(ze),xe?.(it),b({type:"onDragOver",event:it})})},[yn]),bs(()=>{Se.current={activatorEvent:Z,active:B,activeNode:de,collisionRect:hn,collisions:yr,droppableRects:oe,draggableNodes:R,draggingNode:We,draggingNodeRect:$e,droppableContainers:$,over:Zn,scrollableAncestors:Ve,scrollAdjustedTranslate:ln},D.current={initial:$e,translated:hn}},[B,de,yr,hn,R,We,$e,oe,$,Zn,Ve,ln]),jZ({...K,delta:T,draggingRect:hn,pointerCoordinates:Wt,scrollableAncestors:Ve,scrollableAncestorRects:Vt});const So=_.useMemo(()=>({active:B,activeNode:de,activeNodeRect:pe,activatorEvent:Z,collisions:yr,containerNodeRect:Ne,dragOverlay:Pe,draggableNodes:R,droppableContainers:$,droppableRects:oe,over:Zn,measureDroppableContainers:he,scrollableAncestors:Ve,scrollableAncestorRects:Vt,measuringConfiguration:te,measuringScheduled:ae,windowRect:Je}),[B,de,pe,Z,yr,Ne,Pe,R,$,oe,Zn,he,Ve,Vt,te,ae,Je]),Kr=_.useMemo(()=>({activatorEvent:Z,activators:Ea,active:B,activeNodeRect:pe,ariaDescribedById:{draggable:Q},dispatch:v,draggableNodes:R,over:Zn,measureDroppableContainers:he}),[Z,Ea,B,pe,v,Q,R,Zn,he]);return V.createElement(NP.Provider,{value:x},V.createElement(lm.Provider,{value:Kr},V.createElement(eF.Provider,{value:So},V.createElement(hb.Provider,{value:un},l)),V.createElement(lJ,{disabled:o?.restoreFocus===!1})),V.createElement(mZ,{...o,hiddenTextDescribedById:Q}));function es(){const or=q?.autoScrollEnabled===!1,Vn=typeof s=="object"?s.enabled===!1:s===!1,dt=C&&!or&&!Vn;return typeof s=="object"?{...s,enabled:dt}:{enabled:dt}}}),pJ=_.createContext(null),nF="button",hJ="Droppable";function fJ(t){let{id:e,data:n,disabled:r=!1,attributes:a}=t;const i=ob(hJ),{activators:o,activatorEvent:s,active:l,activeNodeRect:u,ariaDescribedById:c,draggableNodes:d,over:p}=_.useContext(lm),{role:f=nF,roleDescription:g="draggable",tabIndex:y=0}=a??{},v=l?.id===e,b=_.useContext(v?hb:pJ),[x,w]=ab(),[S,C]=ab(),E=eJ(o,e),R=em(n);bs(()=>(d.set(e,{id:e,key:i,node:x,activatorNode:S,data:R}),()=>{const $=d.get(e);$&&$.key===i&&d.delete(e)}),[d,e]);const T=_.useMemo(()=>({role:f,tabIndex:y,"aria-disabled":r,"aria-pressed":v&&f===nF?!0:void 0,"aria-roledescription":g,"aria-describedby":c.draggable}),[r,f,y,v,g,c.draggable]);return{active:l,activatorEvent:s,activeNodeRect:u,attributes:T,isDragging:v,listeners:r?void 0:E,node:x,over:p,setNodeRef:w,setActivatorNodeRef:C,transform:b}}function mJ(){return _.useContext(eF)}const gJ="Droppable",yJ={timeout:25};function bJ(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:a}=t;const i=ob(gJ),{active:o,dispatch:s,over:l,measureDroppableContainers:u}=_.useContext(lm),c=_.useRef({disabled:n}),d=_.useRef(!1),p=_.useRef(null),f=_.useRef(null),{disabled:g,updateMeasurementsFor:y,timeout:v}={...yJ,...a},b=em(y??r),x=_.useCallback(()=>{if(!d.current){d.current=!0;return}f.current!=null&&clearTimeout(f.current),f.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),f.current=null},v)},[v]),w=db({callback:x,disabled:g||!o}),S=_.useCallback((T,$)=>{w&&($&&(w.unobserve($),d.current=!1),T&&w.observe(T))},[w]),[C,E]=ab(S),R=em(e);return _.useEffect(()=>{!w||!C.current||(w.disconnect(),d.current=!1,w.observe(C.current))},[C,w]),bs(()=>(s({type:Br.RegisterDroppable,element:{id:r,key:i,disabled:n,node:C,rect:p,data:R}}),()=>s({type:Br.UnregisterDroppable,key:i,id:r})),[r]),_.useEffect(()=>{n!==c.current.disabled&&(s({type:Br.SetDroppableDisabled,id:r,key:i,disabled:n}),c.current.disabled=n)},[r,i,n,s]),{active:o,rect:p,isOver:l?.id===r,node:C,over:l,setNodeRef:E}}function vJ(t){let{animation:e,children:n}=t;const[r,a]=_.useState(null),[i,o]=_.useState(null),s=ib(n);return!n&&!r&&s&&a(s),bs(()=>{if(!i)return;const l=r?.key,u=r?.props.id;if(l==null||u==null){a(null);return}Promise.resolve(e(u,i)).then(()=>{a(null)})},[e,r,i]),V.createElement(V.Fragment,null,n,r?_.cloneElement(r,{ref:o}):null)}const xJ={x:0,y:0,scaleX:1,scaleY:1};function wJ(t){let{children:e}=t;return V.createElement(lm.Provider,{value:JP},V.createElement(hb.Provider,{value:xJ},e))}const kJ={position:"fixed",touchAction:"none"},SJ=t=>KE(t)?"transform 250ms ease":void 0,CJ=_.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:a,children:i,className:o,rect:s,style:l,transform:u,transition:c=SJ}=t;if(!s)return null;const d=a?u:{...u,scaleX:1,scaleY:1},p={...kJ,width:s.width,height:s.height,top:s.top,left:s.left,transform:nm.Transform.toString(d),transformOrigin:a&&r?yZ(r,s):void 0,transition:typeof c=="function"?c(r):c,...l};return V.createElement(n,{className:o,style:p,ref:e},i)}),EJ=t=>e=>{let{active:n,dragOverlay:r}=e;const a={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[s,l]of Object.entries(i.active))l!==void 0&&(a[s]=n.node.style.getPropertyValue(s),n.node.style.setProperty(s,l));if(i!=null&&i.dragOverlay)for(const[s,l]of Object.entries(i.dragOverlay))l!==void 0&&r.node.style.setProperty(s,l);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[s,l]of Object.entries(a))n.node.style.setProperty(s,l);o!=null&&o.active&&n.node.classList.remove(o.active)}},NJ=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:nm.Transform.toString(e)},{transform:nm.Transform.toString(n)}]},TJ={duration:250,easing:"ease",keyframes:NJ,sideEffects:EJ({styles:{active:{opacity:"0"}}})};function IJ(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:a}=t;return rb((i,o)=>{if(e===null)return;const s=n.get(i);if(!s)return;const l=s.node.current;if(!l)return;const u=ZP(o);if(!u)return;const{transform:c}=ii(o).getComputedStyle(o),d=RP(c);if(!d)return;const p=typeof e=="function"?e:_J(e);return LP(l,a.draggable.measure),p({active:{id:i,data:s.data,node:l,rect:a.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:o,rect:a.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:a,transform:d})})}function _J(t){const{duration:e,easing:n,sideEffects:r,keyframes:a}={...TJ,...t};return i=>{let{active:o,dragOverlay:s,transform:l,...u}=i;if(!e)return;const c={x:s.rect.left-o.rect.left,y:s.rect.top-o.rect.top},d={scaleX:l.scaleX!==1?o.rect.width*l.scaleX/s.rect.width:1,scaleY:l.scaleY!==1?o.rect.height*l.scaleY/s.rect.height:1},p={x:l.x-c.x,y:l.y-c.y,...d},f=a({...u,active:o,dragOverlay:s,transform:{initial:l,final:p}}),[g]=f,y=f[f.length-1];if(JSON.stringify(g)===JSON.stringify(y))return;const v=r?.({active:o,dragOverlay:s,...u}),b=s.node.animate(f,{duration:e,easing:n,fill:"forwards"});return new Promise(x=>{b.onfinish=()=>{v?.(),x()}})}}let rF=0;function RJ(t){return _.useMemo(()=>{if(t!=null)return rF++,rF},[t])}const $J=V.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:a,transition:i,modifiers:o,wrapperElement:s="div",className:l,zIndex:u=999}=t;const{activatorEvent:c,active:d,activeNodeRect:p,containerNodeRect:f,draggableNodes:g,droppableContainers:y,dragOverlay:v,over:b,measuringConfiguration:x,scrollableAncestors:w,scrollableAncestorRects:S,windowRect:C}=mJ(),E=_.useContext(hb),R=RJ(d?.id),T=tF(o,{activatorEvent:c,active:d,activeNodeRect:p,containerNodeRect:f,draggingNodeRect:v.rect,over:b,overlayNodeRect:v.rect,scrollableAncestors:w,scrollableAncestorRects:S,transform:E,windowRect:C}),$=aN(p),P=IJ({config:r,draggableNodes:g,droppableContainers:y,measuringConfiguration:x}),D=$?v.setRef:void 0;return V.createElement(wJ,null,V.createElement(vJ,{animation:P},d&&R?V.createElement(CJ,{key:R,id:d.id,ref:D,as:s,activatorEvent:c,adjustScale:e,className:l,transition:i,rect:$,style:{zIndex:u,...a},transform:T},n):null))});function OJ({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const MJ=_.forwardRef(OJ),PJ=MJ;function FJ({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 15-6 6m0 0-6-6m6 6V9a6 6 0 0 1 12 0v3"}))}const AJ=_.forwardRef(FJ),DJ=AJ;function LJ({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 9 6-6m0 0 6 6m-6-6v12a6 6 0 0 1-12 0v-3"}))}const zJ=_.forwardRef(LJ),BJ=zJ;function jJ({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const UJ=_.forwardRef(jJ),VJ=UJ;function WJ({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const GJ=_.forwardRef(WJ),HJ=GJ;function qJ({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const KJ=_.forwardRef(qJ),XJ=KJ;function QJ({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 0 0 .303-.54"}))}const YJ=_.forwardRef(QJ),ZJ=YJ;function JJ({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"}))}const eee=_.forwardRef(JJ),tee=eee;function nee({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const ree=_.forwardRef(nee),aee=ree;function iee({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const oee=_.forwardRef(iee),see=oee;function lee({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const uee=_.forwardRef(lee),cee=uee;function dee({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const pee=_.forwardRef(dee),hee=pee;function fee({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 8.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v8.25A2.25 2.25 0 0 0 6 16.5h2.25m8.25-8.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-7.5A2.25 2.25 0 0 1 8.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 0 0-2.25 2.25v6"}))}const mee=_.forwardRef(fee),gee=mee;function yee({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const bee=_.forwardRef(yee),vee=bee;function xee({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const wee=_.forwardRef(xee),kee=wee;function See({title:t,titleId:e,...n},r){return _.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?_.createElement("title",{id:e},t):null,_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Cee=_.forwardRef(See),Eee=Cee;function aF(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var Nee=["color"],Tee=_.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,a=aF(t,Nee);return _.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:e}),_.createElement("path",{d:"M3 9C3 6.5 4.5 4.25 7.5 1.5C10.5 4.25 12 6.5 12 9C12 11.4853 9.98528 13.5 7.5 13.5C5.01472 13.5 3 11.4853 3 9ZM10.9524 8.30307C9.67347 7.82121 8.2879 8.46208 6.98956 9.06259C5.9327 9.55142 4.93365 10.0135 4.09695 9.82153C4.03357 9.55804 4 9.28294 4 9C4 7.11203 5.02686 5.27195 7.5 2.87357C9.66837 4.97639 10.725 6.65004 10.9524 8.30307Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Iee=["color"],_ee=_.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,a=aF(t,Iee);return _.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:e}),_.createElement("path",{d:"M7.85367 1.48956C7.65841 1.29429 7.34182 1.29429 7.14656 1.48956L1.48971 7.14641C1.29445 7.34167 1.29445 7.65825 1.48971 7.85352L7.14656 13.5104C7.34182 13.7056 7.65841 13.7056 7.85367 13.5104L13.5105 7.85352C13.7058 7.65825 13.7058 7.34167 13.5105 7.14641L7.85367 1.48956ZM7.5 2.55033L2.55037 7.49996L7.5 12.4496V2.55033Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),iF={exports:{}};(function(t,e){(function(n,r){r()})(ei,function(){function n(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,c,d){var p=new XMLHttpRequest;p.open("GET",u),p.responseType="blob",p.onload=function(){l(p.response,c,d)},p.onerror=function(){console.error("could not download file")},p.send()}function a(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function i(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ei=="object"&&ei.global===ei?ei:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(u,c,d){var p=o.URL||o.webkitURL,f=document.createElement("a");c=c||u.name||"download",f.download=c,f.rel="noopener",typeof u=="string"?(f.href=u,f.origin===location.origin?i(f):a(f.href)?r(u,c,d):i(f,f.target="_blank")):(f.href=p.createObjectURL(u),setTimeout(function(){p.revokeObjectURL(f.href)},4e4),setTimeout(function(){i(f)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,d){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,d),c);else if(a(u))r(u,c,d);else{var p=document.createElement("a");p.href=u,p.target="_blank",setTimeout(function(){i(p)})}}:function(u,c,d,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof u=="string")return r(u,c,d);var f=u.type==="application/octet-stream",g=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||f&&g||s)&&typeof FileReader<"u"){var v=new FileReader;v.onloadend=function(){var w=v.result;w=y?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=w:location=w,p=null},v.readAsDataURL(u)}else{var b=o.URL||o.webkitURL,x=b.createObjectURL(u);p?p.location=x:location.href=x,p=null,setTimeout(function(){b.revokeObjectURL(x)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(iF);var Ree=iF.exports,oN={exports:{}},fb={},mb={},Lt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof ei<"u"?ei:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.3",isBrowser:n(),isUnminified:/param/.test(function(a){}.toString()),dblClickWindow:400,getAngle(a){return t.Konva.angleDeg?a*e:a},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(a){t.glob.Konva=a}};const r=a=>{t.Konva[a.prototype.getClassName()]=a};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(Lt);var ir={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=Lt;class n{constructor(S=[1,0,0,1,0,0]){this.dirty=!1,this.m=S&&S.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(S){S.m[0]=this.m[0],S.m[1]=this.m[1],S.m[2]=this.m[2],S.m[3]=this.m[3],S.m[4]=this.m[4],S.m[5]=this.m[5]}point(S){var C=this.m;return{x:C[0]*S.x+C[2]*S.y+C[4],y:C[1]*S.x+C[3]*S.y+C[5]}}translate(S,C){return this.m[4]+=this.m[0]*S+this.m[2]*C,this.m[5]+=this.m[1]*S+this.m[3]*C,this}scale(S,C){return this.m[0]*=S,this.m[1]*=S,this.m[2]*=C,this.m[3]*=C,this}rotate(S){var C=Math.cos(S),E=Math.sin(S),R=this.m[0]*C+this.m[2]*E,T=this.m[1]*C+this.m[3]*E,$=this.m[0]*-E+this.m[2]*C,P=this.m[1]*-E+this.m[3]*C;return this.m[0]=R,this.m[1]=T,this.m[2]=$,this.m[3]=P,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(S,C){var E=this.m[0]+this.m[2]*C,R=this.m[1]+this.m[3]*C,T=this.m[2]+this.m[0]*S,$=this.m[3]+this.m[1]*S;return this.m[0]=E,this.m[1]=R,this.m[2]=T,this.m[3]=$,this}multiply(S){var C=this.m[0]*S.m[0]+this.m[2]*S.m[1],E=this.m[1]*S.m[0]+this.m[3]*S.m[1],R=this.m[0]*S.m[2]+this.m[2]*S.m[3],T=this.m[1]*S.m[2]+this.m[3]*S.m[3],$=this.m[0]*S.m[4]+this.m[2]*S.m[5]+this.m[4],P=this.m[1]*S.m[4]+this.m[3]*S.m[5]+this.m[5];return this.m[0]=C,this.m[1]=E,this.m[2]=R,this.m[3]=T,this.m[4]=$,this.m[5]=P,this}invert(){var S=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*S,E=-this.m[1]*S,R=-this.m[2]*S,T=this.m[0]*S,$=S*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),P=S*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=E,this.m[2]=R,this.m[3]=T,this.m[4]=$,this.m[5]=P,this}getMatrix(){return this.m}decompose(){var S=this.m[0],C=this.m[1],E=this.m[2],R=this.m[3],T=this.m[4],$=this.m[5],P=S*R-C*E;let D={x:T,y:$,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(S!=0||C!=0){var B=Math.sqrt(S*S+C*C);D.rotation=C>0?Math.acos(S/B):-Math.acos(S/B),D.scaleX=B,D.scaleY=P/B,D.skewX=(S*E+C*R)/P,D.skewY=0}else if(E!=0||R!=0){var z=Math.sqrt(E*E+R*R);D.rotation=Math.PI/2-(R>0?Math.acos(-E/z):-Math.acos(E/z)),D.scaleX=P/z,D.scaleY=z,D.skewX=0,D.skewY=(S*E+C*R)/P}return D.rotation=t.Util._getRotation(D.rotation),D}}t.Transform=n;var r="[object Array]",a="[object Number]",i="[object String]",o="[object Boolean]",s=Math.PI/180,l=180/Math.PI,u="#",c="",d="0",p="Konva warning: ",f="Konva error: ",g="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,b=[];const x=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(w){setTimeout(w,60)};t.Util={_isElement(w){return!!(w&&w.nodeType==1)},_isFunction(w){return!!(w&&w.constructor&&w.call&&w.apply)},_isPlainObject(w){return!!w&&w.constructor===Object},_isArray(w){return Object.prototype.toString.call(w)===r},_isNumber(w){return Object.prototype.toString.call(w)===a&&!isNaN(w)&&isFinite(w)},_isString(w){return Object.prototype.toString.call(w)===i},_isBoolean(w){return Object.prototype.toString.call(w)===o},isObject(w){return w instanceof Object},isValidSelector(w){if(typeof w!="string")return!1;var S=w[0];return S==="#"||S==="."||S===S.toUpperCase()},_sign(w){return w===0||w>0?1:-1},requestAnimFrame(w){b.push(w),b.length===1&&x(function(){const S=b;b=[],S.forEach(function(C){C()})})},createCanvasElement(){var w=document.createElement("canvas");try{w.style=w.style||{}}catch{}return w},createImageElement(){return document.createElement("img")},_isInDocument(w){for(;w=w.parentNode;)if(w==document)return!0;return!1},_urlToImage(w,S){var C=t.Util.createImageElement();C.onload=function(){S(C)},C.src=w},_rgbToHex(w,S,C){return((1<<24)+(w<<16)+(S<<8)+C).toString(16).slice(1)},_hexToRgb(w){w=w.replace(u,c);var S=parseInt(w,16);return{r:S>>16&255,g:S>>8&255,b:S&255}},getRandomColor(){for(var w=(Math.random()*16777215<<0).toString(16);w.length<6;)w=d+w;return u+w},getRGB(w){var S;return w in y?(S=y[w],{r:S[0],g:S[1],b:S[2]}):w[0]===u?this._hexToRgb(w.substring(1)):w.substr(0,4)===g?(S=v.exec(w.replace(/ /g,"")),{r:parseInt(S[1],10),g:parseInt(S[2],10),b:parseInt(S[3],10)}):{r:0,g:0,b:0}},colorToRGBA(w){return w=w||"black",t.Util._namedColorToRBA(w)||t.Util._hex3ColorToRGBA(w)||t.Util._hex4ColorToRGBA(w)||t.Util._hex6ColorToRGBA(w)||t.Util._hex8ColorToRGBA(w)||t.Util._rgbColorToRGBA(w)||t.Util._rgbaColorToRGBA(w)||t.Util._hslColorToRGBA(w)},_namedColorToRBA(w){var S=y[w.toLowerCase()];return S?{r:S[0],g:S[1],b:S[2],a:1}:null},_rgbColorToRGBA(w){if(w.indexOf("rgb(")===0){w=w.match(/rgb\(([^)]+)\)/)[1];var S=w.split(/ *, */).map(Number);return{r:S[0],g:S[1],b:S[2],a:1}}},_rgbaColorToRGBA(w){if(w.indexOf("rgba(")===0){w=w.match(/rgba\(([^)]+)\)/)[1];var S=w.split(/ *, */).map((C,E)=>C.slice(-1)==="%"?E===3?parseInt(C)/100:parseInt(C)/100*255:Number(C));return{r:S[0],g:S[1],b:S[2],a:S[3]}}},_hex8ColorToRGBA(w){if(w[0]==="#"&&w.length===9)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:parseInt(w.slice(7,9),16)/255}},_hex6ColorToRGBA(w){if(w[0]==="#"&&w.length===7)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:1}},_hex4ColorToRGBA(w){if(w[0]==="#"&&w.length===5)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:parseInt(w[4]+w[4],16)/255}},_hex3ColorToRGBA(w){if(w[0]==="#"&&w.length===4)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:1}},_hslColorToRGBA(w){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(w)){const[S,...C]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(w),E=Number(C[0])/360,R=Number(C[1])/100,T=Number(C[2])/100;let $,P,D;if(R===0)return D=T*255,{r:Math.round(D),g:Math.round(D),b:Math.round(D),a:1};T<.5?$=T*(1+R):$=T+R-T*R;const B=2*T-$,z=[0,0,0];for(let q=0;q<3;q++)P=E+1/3*-(q-1),P<0&&P++,P>1&&P--,6*P<1?D=B+($-B)*6*P:2*P<1?D=$:3*P<2?D=B+($-B)*(2/3-P)*6:D=B,z[q]=D*255;return{r:Math.round(z[0]),g:Math.round(z[1]),b:Math.round(z[2]),a:1}}},haveIntersection(w,S){return!(S.x>w.x+w.width||S.x+S.width<w.x||S.y>w.y+w.height||S.y+S.height<w.y)},cloneObject(w){var S={};for(var C in w)this._isPlainObject(w[C])?S[C]=this.cloneObject(w[C]):this._isArray(w[C])?S[C]=this.cloneArray(w[C]):S[C]=w[C];return S},cloneArray(w){return w.slice(0)},degToRad(w){return w*s},radToDeg(w){return w*l},_degToRad(w){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(w)},_radToDeg(w){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(w)},_getRotation(w){return e.Konva.angleDeg?t.Util.radToDeg(w):w},_capitalize(w){return w.charAt(0).toUpperCase()+w.slice(1)},throw(w){throw new Error(f+w)},error(w){console.error(f+w)},warn(w){e.Konva.showWarnings&&console.warn(p+w)},each(w,S){for(var C in w)S(C,w[C])},_inRange(w,S,C){return S<=w&&w<C},_getProjectionToSegment(w,S,C,E,R,T){var $,P,D,B=(w-C)*(w-C)+(S-E)*(S-E);if(B==0)$=w,P=S,D=(R-C)*(R-C)+(T-E)*(T-E);else{var z=((R-w)*(C-w)+(T-S)*(E-S))/B;z<0?($=w,P=S,D=(w-R)*(w-R)+(S-T)*(S-T)):z>1?($=C,P=E,D=(C-R)*(C-R)+(E-T)*(E-T)):($=w+z*(C-w),P=S+z*(E-S),D=($-R)*($-R)+(P-T)*(P-T))}return[$,P,D]},_getProjectionToLine(w,S,C){var E=t.Util.cloneObject(w),R=Number.MAX_VALUE;return S.forEach(function(T,$){if(!(!C&&$===S.length-1)){var P=S[($+1)%S.length],D=t.Util._getProjectionToSegment(T.x,T.y,P.x,P.y,w.x,w.y),B=D[0],z=D[1],q=D[2];q<R&&(E.x=B,E.y=z,R=q)}}),E},_prepareArrayForTween(w,S,C){var E,R=[],T=[];if(w.length>S.length){var $=S;S=w,w=$}for(E=0;E<w.length;E+=2)R.push({x:w[E],y:w[E+1]});for(E=0;E<S.length;E+=2)T.push({x:S[E],y:S[E+1]});var P=[];return T.forEach(function(D){var B=t.Util._getProjectionToLine(D,R,C);P.push(B.x),P.push(B.y)}),P},_prepareToStringify(w){var S;w.visitedByCircularReferenceRemoval=!0;for(var C in w)if(w.hasOwnProperty(C)&&w[C]&&typeof w[C]=="object"){if(S=Object.getOwnPropertyDescriptor(w,C),w[C].visitedByCircularReferenceRemoval||t.Util._isElement(w[C]))if(S.configurable)delete w[C];else return null;else if(t.Util._prepareToStringify(w[C])===null)if(S.configurable)delete w[C];else return null}return delete w.visitedByCircularReferenceRemoval,w},_assign(w,S){for(var C in S)w[C]=S[C];return w},_getFirstPointerId(w){return w.touches?w.changedTouches[0].identifier:w.pointerId||999},releaseCanvas(...w){e.Konva.releaseCanvasOnDestroy&&w.forEach(S=>{S.width=0,S.height=0})},drawRoundedRectPath(w,S,C,E){let R=0,T=0,$=0,P=0;typeof E=="number"?R=T=$=P=Math.min(E,S/2,C/2):(R=Math.min(E[0]||0,S/2,C/2),T=Math.min(E[1]||0,S/2,C/2),P=Math.min(E[2]||0,S/2,C/2),$=Math.min(E[3]||0,S/2,C/2)),w.moveTo(R,0),w.lineTo(S-T,0),w.arc(S-T,T,T,Math.PI*3/2,0,!1),w.lineTo(S,C-P),w.arc(S-P,C-P,P,0,Math.PI/2,!1),w.lineTo($,C),w.arc($,C-$,$,Math.PI/2,Math.PI,!1),w.lineTo(0,R),w.arc(R,R,R,Math.PI,Math.PI*3/2,!1)}}})(ir);var Kn={},zt={},tt={};Object.defineProperty(tt,"__esModule",{value:!0}),tt.getComponentValidator=tt.getBooleanValidator=tt.getNumberArrayValidator=tt.getFunctionValidator=tt.getStringOrGradientValidator=tt.getStringValidator=tt.getNumberOrAutoValidator=tt.getNumberOrArrayOfNumbersValidator=tt.getNumberValidator=tt.alphaComponent=tt.RGBComponent=void 0;const al=Lt,hr=ir;function il(t){return hr.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||hr.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function $ee(t){return t>255?255:t<0?0:Math.round(t)}tt.RGBComponent=$ee;function Oee(t){return t>1?1:t<1e-4?1e-4:t}tt.alphaComponent=Oee;function Mee(){if(al.Konva.isUnminified)return function(t,e){return hr.Util._isNumber(t)||hr.Util.warn(il(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}tt.getNumberValidator=Mee;function Pee(t){if(al.Konva.isUnminified)return function(e,n){let r=hr.Util._isNumber(e),a=hr.Util._isArray(e)&&e.length==t;return!r&&!a&&hr.Util.warn(il(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}tt.getNumberOrArrayOfNumbersValidator=Pee;function Fee(){if(al.Konva.isUnminified)return function(t,e){var n=hr.Util._isNumber(t),r=t==="auto";return n||r||hr.Util.warn(il(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}tt.getNumberOrAutoValidator=Fee;function Aee(){if(al.Konva.isUnminified)return function(t,e){return hr.Util._isString(t)||hr.Util.warn(il(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}tt.getStringValidator=Aee;function Dee(){if(al.Konva.isUnminified)return function(t,e){const n=hr.Util._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||hr.Util.warn(il(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}tt.getStringOrGradientValidator=Dee;function Lee(){if(al.Konva.isUnminified)return function(t,e){return hr.Util._isFunction(t)||hr.Util.warn(il(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}tt.getFunctionValidator=Lee;function zee(){if(al.Konva.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(hr.Util._isArray(t)?t.forEach(function(r){hr.Util._isNumber(r)||hr.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):hr.Util.warn(il(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}tt.getNumberArrayValidator=zee;function Bee(){if(al.Konva.isUnminified)return function(t,e){var n=t===!0||t===!1;return n||hr.Util.warn(il(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}tt.getBooleanValidator=Bee;function jee(t){if(al.Konva.isUnminified)return function(e,n){return e==null||hr.Util.isObject(e)||hr.Util.warn(il(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}tt.getComponentValidator=jee,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=ir,n=tt;var r="get",a="set";t.Factory={addGetterSetter(i,o,s,l,u){t.Factory.addGetter(i,o,s),t.Factory.addSetter(i,o,l,u),t.Factory.addOverloadedGetterSetter(i,o)},addGetter(i,o,s){var l=r+e.Util._capitalize(o);i.prototype[l]=i.prototype[l]||function(){var u=this.attrs[o];return u===void 0?s:u}},addSetter(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]||t.Factory.overWriteSetter(i,o,s,l)},overWriteSetter(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]=function(c){return s&&c!==void 0&&c!==null&&(c=s.call(this,c,o)),this._setAttr(o,c),l&&l.call(this),this}},addComponentsGetterSetter(i,o,s,l,u){var c=s.length,d=e.Util._capitalize,p=r+d(o),f=a+d(o),g,y;i.prototype[p]=function(){var b={};for(g=0;g<c;g++)y=s[g],b[y]=this.getAttr(o+d(y));return b};var v=(0,n.getComponentValidator)(s);i.prototype[f]=function(b){var x=this.attrs[o],w;l&&(b=l.call(this,b)),v&&v.call(this,b,o);for(w in b)b.hasOwnProperty(w)&&this._setAttr(o+d(w),b[w]);return b||s.forEach(S=>{this._setAttr(o+d(S),void 0)}),this._fireChangeEvent(o,x,b),u&&u.call(this),this},t.Factory.addOverloadedGetterSetter(i,o)},addOverloadedGetterSetter(i,o){var s=e.Util._capitalize(o),l=a+s,u=r+s;i.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(i,o,s,l){e.Util.error("Adding deprecated "+o);var u=r+e.Util._capitalize(o),c=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";i.prototype[u]=function(){e.Util.error(c);var d=this.attrs[o];return d===void 0?s:d},t.Factory.addSetter(i,o,l,function(){e.Util.error(c)}),t.Factory.addOverloadedGetterSetter(i,o)},backCompat(i,o){e.Util.each(o,function(s,l){var u=i.prototype[l],c=r+e.Util._capitalize(s),d=a+e.Util._capitalize(s);function p(){u.apply(this,arguments),e.Util.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}i.prototype[s]=p,i.prototype[c]=p,i.prototype[d]=p})},afterSetFilter(){this._filterUpToDate=!1}}}(zt);var Vo={},ol={};Object.defineProperty(ol,"__esModule",{value:!0}),ol.HitContext=ol.SceneContext=ol.Context=void 0;const oF=ir,Uee=Lt;function Vee(t){var e=[],n=t.length,r=oF.Util,a,i;for(a=0;a<n;a++)i=t[a],r._isNumber(i)?i=Math.round(i*1e3)/1e3:r._isString(i)||(i=i+""),e.push(i);return e}var sF=",",Wee="(",Gee=")",Hee="([",qee="])",Kee=";",Xee="()",Qee="=",lF=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Yee=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Zee=100;class gb{constructor(e){this.canvas=e,Uee.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var r=this.traceArr,a=r.length,i="",o,s,l,u;for(o=0;o<a;o++)s=r[o],l=s.method,l?(u=s.args,i+=l,e?i+=Xee:oF.Util._isArray(u[0])?i+=Hee+u.join(sF)+qee:(n&&(u=u.map(c=>typeof c=="number"?Math.floor(c):c)),i+=Wee+u.join(sF)+Gee)):(i+=s.property,e||(i+=Qee+s.val)),i+=Kee;return i}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,r;n.push(e),r=n.length,r>=Zee&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,a,i,o){this._context.arc(e,n,r,a,i,o)}arcTo(e,n,r,a,i){this._context.arcTo(e,n,r,a,i)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,a,i,o){this._context.bezierCurveTo(e,n,r,a,i,o)}clearRect(e,n,r,a){this._context.clearRect(e,n,r,a)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){var r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,a){return this._context.createLinearGradient(e,n,r,a)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,a,i,o){return this._context.createRadialGradient(e,n,r,a,i,o)}drawImage(e,n,r,a,i,o,s,l,u){var c=arguments,d=this._context;c.length===3?d.drawImage(e,n,r):c.length===5?d.drawImage(e,n,r,a,i):c.length===9&&d.drawImage(e,n,r,a,i,o,s,l,u)}ellipse(e,n,r,a,i,o,s,l){this._context.ellipse(e,n,r,a,i,o,s,l)}isPointInPath(e,n,r,a){return r?this._context.isPointInPath(r,e,n,a):this._context.isPointInPath(e,n,a)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,r,a){this._context.fillRect(e,n,r,a)}strokeRect(e,n,r,a){this._context.strokeRect(e,n,r,a)}fillText(e,n,r,a){a?this._context.fillText(e,n,r,a):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,a){return this._context.getImageData(e,n,r,a)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,a){this._context.rect(e,n,r,a)}roundRect(e,n,r,a,i){this._context.roundRect(e,n,r,a,i)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,a){this._context.quadraticCurveTo(e,n,r,a)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,a,i,o){this._context.setTransform(e,n,r,a,i,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,a){this._context.strokeText(e,n,r,a)}transform(e,n,r,a,i,o){this._context.transform(e,n,r,a,i,o)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=lF.length,r=this.setAttr,a,i,o=function(s){var l=e[s],u;e[s]=function(){return i=Vee(Array.prototype.slice.call(arguments,0)),u=l.apply(e,arguments),e._trace({method:s,args:i}),u}};for(a=0;a<n;a++)o(lF[a]);e.setAttr=function(){r.apply(e,arguments);var s=arguments[0],l=arguments[1];(s==="shadowOffsetX"||s==="shadowOffsetY"||s==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:s,val:l})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var r=!n||n==="source-over";r||this.setAttr("globalCompositeOperation",n)}}ol.Context=gb,Yee.forEach(function(t){Object.defineProperty(gb.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class Jee extends gb{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}const a=e.getFillPatternImage();if(a&&r==="pattern"){this._fillPattern(e);return}const i=e.getFillLinearGradientColorStops();if(i&&r==="linear-gradient"){this._fillLinearGradient(e);return}const o=e.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):a?this._fillPattern(e):i?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),a=e.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(n.x,n.y,r.x,r.y);if(a){for(var o=0;o<a.length;o+=2)i.addColorStop(a[o],a[o+1]);this.setAttr("strokeStyle",i)}}_stroke(e){var n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var i=e.getStrokeLinearGradientColorStops();i?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,a,i=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",o=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,s=(a=e.getShadowOffset())!==null&&a!==void 0?a:{x:0,y:0},l=e.getAbsoluteScale(),u=this.canvas.getPixelRatio(),c=l.x*u,d=l.y*u;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",o*Math.min(Math.abs(c),Math.abs(d))),this.setAttr("shadowOffsetX",s.x*c),this.setAttr("shadowOffsetY",s.y*d)}}ol.SceneContext=Jee;class ete extends gb{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const i=e.getStrokeScaleEnabled();if(!i){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var r=e.hitStrokeWidth(),a=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",a),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),i||this.restore()}}}ol.HitContext=ete,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.HitCanvas=Vo.SceneCanvas=Vo.Canvas=void 0;const yb=ir,uF=ol,cF=Lt,tte=zt,nte=tt;var bb;function rte(){if(bb)return bb;var t=yb.Util.createCanvasElement(),e=t.getContext("2d");return bb=function(){var n=cF.Konva._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),yb.Util.releaseCanvas(t),bb}class vb{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},r=n.pixelRatio||cF.Konva.pixelRatio||rte();this.pixelRatio=r,this._canvas=yb.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(r){return yb.Util.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Vo.Canvas=vb,tte.Factory.addGetterSetter(vb,"pixelRatio",void 0,(0,nte.getNumberValidator)());class ate extends vb{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new uF.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Vo.SceneCanvas=ate;class ite extends vb{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new uF.HitContext(this),this.setSize(e.width,e.height)}}Vo.HitCanvas=ite;var xb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=Lt,n=ir;t.DD={get isDragging(){var r=!1;return t.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){var r;return t.DD._dragElements.forEach(a=>{r=a.node}),r},_dragElements:new Map,_drag(r){const a=[];t.DD._dragElements.forEach((i,o)=>{const{node:s}=i,l=s.getStage();l.setPointersPositions(r),i.pointerId===void 0&&(i.pointerId=n.Util._getFirstPointerId(r));const u=l._changedPointerPositions.find(p=>p.id===i.pointerId);if(u){if(i.dragStatus!=="dragging"){var c=s.dragDistance(),d=Math.max(Math.abs(u.x-i.startPointerPos.x),Math.abs(u.y-i.startPointerPos.y));if(d<c||(s.startDrag({evt:r}),!s.isDragging()))return}s._setDragPosition(r,i),a.push(s)}}),a.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:r},!0)})},_endDragBefore(r){const a=[];t.DD._dragElements.forEach(i=>{const{node:o}=i,s=o.getStage();if(r&&s.setPointersPositions(r),!s._changedPointerPositions.find(u=>u.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,i.dragStatus="stopped");const l=i.node.getLayer()||i.node instanceof e.Konva.Stage&&i.node;l&&a.indexOf(l)===-1&&a.push(l)}),a.forEach(i=>{i.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((a,i)=>{a.dragStatus==="stopped"&&a.node.fire("dragend",{type:"dragend",target:a.node,evt:r},!0),a.dragStatus!=="dragging"&&t.DD._dragElements.delete(i)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1))})(xb),Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.Node=void 0;const Kt=ir,um=zt,cm=Vo,Nc=Lt,lo=xb,Sr=tt;var wb="absoluteOpacity",kb="allEventListeners",sl="absoluteTransform",dF="absoluteScale",Tc="canvas",ote="Change",ste="children",lte="konva",sN="listening",pF="mouseenter",hF="mouseleave",fF="set",mF="Shape",Sb=" ",gF="stage",hu="transform",ute="Stage",lN="visible",cte=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Sb);let dte=1;class xt{constructor(e){this._id=dte++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===hu||e===sl)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var r=this._cache.get(e),a=e===hu||e===sl,i=r===void 0||a&&r.dirty===!0;return i&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const a=n.map(i=>i+"Change.konva").join(Sb);this.on(a,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(Tc)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===sl&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Tc)){const{scene:e,filter:n,hit:r}=this._cache.get(Tc);Kt.Util.releaseCanvas(e,n,r),this._cache.delete(Tc)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var a=Math.ceil(n.width||r.width),i=Math.ceil(n.height||r.height),o=n.pixelRatio,s=n.x===void 0?Math.floor(r.x):n.x,l=n.y===void 0?Math.floor(r.y):n.y,u=n.offset||0,c=n.drawBorder||!1,d=n.hitCanvasPixelRatio||1;if(!a||!i){Kt.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const p=Math.abs(Math.round(r.x)-s)>.5?1:0,f=Math.abs(Math.round(r.y)-l)>.5?1:0;a+=u*2+p,i+=u*2+f,s-=u,l-=u;var g=new cm.SceneCanvas({pixelRatio:o,width:a,height:i}),y=new cm.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),v=new cm.HitCanvas({pixelRatio:d,width:a,height:i}),b=g.getContext(),x=v.getContext();return v.isCache=!0,g.isCache=!0,this._cache.delete(Tc),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(g.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1),b.save(),x.save(),b.translate(-s,-l),x.translate(-s,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(wb),this._clearSelfAndDescendantCache(dF),this.drawScene(g,this),this.drawHit(v,this),this._isUnderCache=!1,b.restore(),x.restore(),c&&(b.save(),b.beginPath(),b.rect(0,0,a,i),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(Tc,{scene:g,filter:y,hit:v,x:s,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Tc)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],a=1/0,i=1/0,o=-1/0,s=-1/0,l=this.getAbsoluteTransform(n);return r.forEach(function(u){var c=l.point(u);a===void 0&&(a=o=c.x,i=s=c.y),a=Math.min(a,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y)}),{x:a,y:i,width:o-a,height:s-i}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var r=this._getCachedSceneCanvas(),a=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/a,r.height/a),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),r=n.scene,a=n.filter,i=a.getContext(),o,s,l,u;if(e){if(!this._filterUpToDate){var c=r.pixelRatio;a.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=e.length,i.clear(),i.drawImage(r._canvas,0,0,r.getWidth()/c,r.getHeight()/c),s=i.getImageData(0,0,a.getWidth(),a.getHeight()),l=0;l<o;l++){if(u=e[l],typeof u!="function"){Kt.Util.error("Filter should be type of function, but got "+typeof u+" instead. Please check correct filters");continue}u.call(this,s),i.putImageData(s,0,0)}}catch(d){Kt.Util.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return a}return r}on(e,n){if(this._cache&&this._cache.delete(kb),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split(Sb),a=r.length,i,o,s,l,u;for(i=0;i<a;i++)o=r[i],s=o.split("."),l=s[0],u=s[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:u,handler:n});return this}off(e,n){var r=(e||"").split(Sb),a=r.length,i,o,s,l,u,c;if(this._cache&&this._cache.delete(kb),!e)for(o in this.eventListeners)this._off(o);for(i=0;i<a;i++)if(s=r[i],l=s.split("."),u=l[0],c=l[1],u)this.eventListeners[u]&&this._off(u,c,n);else for(o in this.eventListeners)this._off(o,c,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){var a=this;this.on(e,function(i){for(var o=i.target.findAncestors(n,!0,a),s=0;s<o.length;s++)i=Kt.Util.cloneObject(i),i.currentTarget=o[s],r.call(o[s],i)})}remove(){return this.isDragging()&&this.stopDrag(),lo.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(sl),this._clearSelfAndDescendantCache(wb),this._clearSelfAndDescendantCache(dF),this._clearSelfAndDescendantCache(gF),this._clearSelfAndDescendantCache(lN),this._clearSelfAndDescendantCache(sN)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+Kt.Util._capitalize(e);return Kt.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,r;if(!e)return this;for(n in e)n!==ste&&(r=fF+Kt.Util._capitalize(n),Kt.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(sN,this._isListening)}_isListening(e){if(!this.listening())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(lN,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),a=!1;lo.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(a=!0)});var i=!n&&!Nc.Konva.hitOnDragEnabled&&a;return this.isListening()&&this.isVisible()&&!i}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,r=0,a,i,o,s;function l(c){for(a=[],i=c.length,o=0;o<i;o++)s=c[o],r++,s.nodeType!==mF&&(a=a.concat(s.getChildren().slice())),s._id===n._id&&(o=i);a.length>0&&a[0].getDepth()<=e&&l(a)}const u=this.getStage();return n.nodeType!==ute&&u&&l(u.getChildren()),r}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(hu),this._clearSelfAndDescendantCache(sl)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var n=e.getPointerPosition();if(!n)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);var a=this.getAbsoluteTransform(e).getMatrix(),i=new Kt.Transform,o=this.offset();return i.m=a.slice(),i.translate(o.x,o.y),i.getTranslation()}setAbsolutePosition(e){const{x:n,y:r,...a}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(hu);var i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(e.x,e.y),e={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(a),this.setPosition({x:e.x,y:e.y}),this._clearCache(hu),this._clearSelfAndDescendantCache(sl),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,r=e.y,a=this.x(),i=this.y();return n!==void 0&&(a+=n),r!==void 0&&(i+=r),this.setPosition({x:a,y:i}),this}_eachAncestorReverse(e,n){var r=[],a=this.getParent(),i,o;if(!(n&&n._id===this._id)){for(r.unshift(this);a&&(!n||a._id!==n._id);)r.unshift(a),a=a.parent;for(i=r.length,o=0;o<i;o++)e(r[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Kt.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Kt.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Kt.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Kt.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Kt.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Kt.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(wb,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e=this.getAttrs(),n,r,a,i,o;const s={attrs:{},className:this.getClassName()};for(n in e)r=e[n],o=Kt.Util.isObject(r)&&!Kt.Util._isPlainObject(r)&&!Kt.Util._isArray(r),!o&&(a=typeof this[n]=="function"&&this[n],delete e[n],i=a?a.call(this):null,e[n]=r,i!==r&&(s.attrs[n]=r));return Kt.Util._prepareToStringify(s)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){var a=[];n&&this._isMatch(e)&&a.push(this);for(var i=this.parent;i;){if(i===r)return a;i._isMatch(e)&&a.push(i),i=i.parent}return a}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),r=n.length,a,i;for(a=0;a<r;a++)if(i=n[a],Kt.Util.isValidSelector(i)||(Kt.Util.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Kt.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Kt.Util.warn("Konva is awesome, right?")),i.charAt(0)==="#"){if(this.id()===i.slice(1))return!0}else if(i.charAt(0)==="."){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(gF,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(sl,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new Kt.Transform,this._eachAncestorReverse(function(a){var i=a.transformsEnabled();i==="all"?n.multiply(a.getTransform()):i==="position"&&n.translate(a.x()-a.offsetX(),a.y()-a.offsetY())},e),n;n=this._cache.get(sl)||new Kt.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const a=this.attrs.x||0,i=this.attrs.y||0,o=this.attrs.offsetX||0,s=this.attrs.offsetY||0;n.translate(a-o,i-s)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(hu,this._getTransform)}_getTransform(){var e,n,r=this._cache.get(hu)||new Kt.Transform;r.reset();var a=this.x(),i=this.y(),o=Nc.Konva.getAngle(this.rotation()),s=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,u=this.attrs.skewX||0,c=this.attrs.skewY||0,d=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return(a!==0||i!==0)&&r.translate(a,i),o!==0&&r.rotate(o),(u!==0||c!==0)&&r.skew(u,c),(s!==1||l!==1)&&r.scale(s,l),(d!==0||p!==0)&&r.translate(-1*d,-1*p),r.dirty=!1,r}clone(e){var n=Kt.Util.cloneObject(this.attrs),r,a,i,o,s;for(r in e)n[r]=e[r];var l=new this.constructor(n);for(r in this.eventListeners)for(a=this.eventListeners[r],i=a.length,o=0;o<i;o++)s=a[o],s.name.indexOf(lte)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(s));return l}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),r=this.getStage(),a=e.x!==void 0?e.x:Math.floor(n.x),i=e.y!==void 0?e.y:Math.floor(n.y),o=e.pixelRatio||1,s=new cm.SceneCanvas({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:o}),l=s.getContext();const u=new cm.SceneCanvas({width:s.width/s.pixelRatio+Math.abs(a),height:s.height/s.pixelRatio+Math.abs(i),pixelRatio:s.pixelRatio});return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(a||i)&&l.translate(-1*a,-1*i),this.drawScene(s,void 0,u),l.restore(),s}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,r=e.quality||null,a=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(a),a}toImage(e){return new Promise((n,r)=>{try{const a=e?.callback;a&&delete e.callback,Kt.Util._urlToImage(this.toDataURL(e),function(i){n(i),a?.(i)})}catch(a){r(a)}})}toBlob(e){return new Promise((n,r)=>{try{const a=e?.callback;a&&delete e.callback,this.toCanvas(e).toBlob(i=>{n(i),a?.(i)},e?.mimeType,e?.quality)}catch(a){r(a)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Nc.Konva.dragDistance}_off(e,n,r){var a=this.eventListeners[e],i,o,s;for(i=0;i<a.length;i++)if(o=a[i].name,s=a[i].handler,(o!=="konva"||n==="konva")&&(!n||o===n)&&(!r||r===s)){if(a.splice(i,1),a.length===0){delete this.eventListeners[e];break}i--}}_fireChangeEvent(e,n,r){this._fire(e+ote,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){var n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var r=(n||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){var r=this[fF+Kt.Util._capitalize(e)];return Kt.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(Nc.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){var r=this.attrs[e];r===n&&!Kt.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){var a;r!==void 0&&(a=this.attrs[e],a||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,a,r))}_fireAndBubble(e,n,r){n&&this.nodeType===mF&&(n.target=this);var a=(e===pF||e===hF)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!a){this._fire(e,n);var i=(e===pF||e===hF)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!i&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,r,a;const i=(n=this._cache.get(kb))!==null&&n!==void 0?n:{};let o=i?.[e];if(o===void 0){o=[];let s=Object.getPrototypeOf(this);for(;s;){const l=(a=(r=s.eventListeners)===null||r===void 0?void 0:r[e])!==null&&a!==void 0?a:[];o.push(...l),s=Object.getPrototypeOf(s)}i[e]=o,this._cache.set(kb,i)}return o}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(var a=0;a<r.length;a++)r[a].handler.call(this,n);const i=this.eventListeners[e];if(i)for(var a=0;a<i.length;a++)i[a].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,r=this.getStage(),a=this.getAbsolutePosition();if(r){var i=r._getPointerById(n)||r._changedPointerPositions[0]||a;lo.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-a.x,y:i.y-a.y},dragStatus:"ready",pointerId:n})}}startDrag(e,n=!0){lo.DD._dragElements.has(this._id)||this._createDragElement(e);const r=lo.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(r){var a={x:r.x-n.offset.x,y:r.y-n.offset.y},i=this.dragBoundFunc();if(i!==void 0){const o=i.call(this,a,e);o?a=o:Kt.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==a.x||this._lastPos.y!==a.y)&&(this.setAbsolutePosition(a),this._requestDraw()),this._lastPos=a}}stopDrag(e){const n=lo.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),lo.DD._endDragBefore(e),lo.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=lo.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,r=!n||Nc.Konva.dragButtons.indexOf(e.evt.button)>=0;if(r&&!this.isDragging()){var a=!1;lo.DD._dragElements.forEach(i=>{this.isAncestorOf(i.node)&&(a=!0)}),a||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=lo.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",a=n&&n.dragStatus==="ready";r?this.stopDrag():a&&lo.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return Kt.Util.haveIntersection(r,this.getClientRect())}static create(e,n){return Kt.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var r=xt.prototype.getClassName.call(e),a=e.children,i,o,s;n&&(e.attrs.container=n),Nc.Konva[r]||(Kt.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=Nc.Konva[r];if(i=new l(e.attrs),a)for(o=a.length,s=0;s<o;s++)i.add(xt._createNode(a[s]));return i}}Kn.Node=xt,xt.prototype.nodeType="Node",xt.prototype._attrsAffectingSize=[],xt.prototype.eventListeners={},xt.prototype.on.call(xt.prototype,cte,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(hu),this._clearSelfAndDescendantCache(sl)}),xt.prototype.on.call(xt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(lN)}),xt.prototype.on.call(xt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(sN)}),xt.prototype.on.call(xt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(wb)});const Tn=um.Factory.addGetterSetter;Tn(xt,"zIndex"),Tn(xt,"absolutePosition"),Tn(xt,"position"),Tn(xt,"x",0,(0,Sr.getNumberValidator)()),Tn(xt,"y",0,(0,Sr.getNumberValidator)()),Tn(xt,"globalCompositeOperation","source-over",(0,Sr.getStringValidator)()),Tn(xt,"opacity",1,(0,Sr.getNumberValidator)()),Tn(xt,"name","",(0,Sr.getStringValidator)()),Tn(xt,"id","",(0,Sr.getStringValidator)()),Tn(xt,"rotation",0,(0,Sr.getNumberValidator)()),um.Factory.addComponentsGetterSetter(xt,"scale",["x","y"]),Tn(xt,"scaleX",1,(0,Sr.getNumberValidator)()),Tn(xt,"scaleY",1,(0,Sr.getNumberValidator)()),um.Factory.addComponentsGetterSetter(xt,"skew",["x","y"]),Tn(xt,"skewX",0,(0,Sr.getNumberValidator)()),Tn(xt,"skewY",0,(0,Sr.getNumberValidator)()),um.Factory.addComponentsGetterSetter(xt,"offset",["x","y"]),Tn(xt,"offsetX",0,(0,Sr.getNumberValidator)()),Tn(xt,"offsetY",0,(0,Sr.getNumberValidator)()),Tn(xt,"dragDistance",null,(0,Sr.getNumberValidator)()),Tn(xt,"width",0,(0,Sr.getNumberValidator)()),Tn(xt,"height",0,(0,Sr.getNumberValidator)()),Tn(xt,"listening",!0,(0,Sr.getBooleanValidator)()),Tn(xt,"preventDefault",!0,(0,Sr.getBooleanValidator)()),Tn(xt,"filters",null,function(t){return this._filterUpToDate=!1,t}),Tn(xt,"visible",!0,(0,Sr.getBooleanValidator)()),Tn(xt,"transformsEnabled","all",(0,Sr.getStringValidator)()),Tn(xt,"size"),Tn(xt,"dragBoundFunc"),Tn(xt,"draggable",!1,(0,Sr.getBooleanValidator)()),um.Factory.backCompat(xt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Ic={};Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.Container=void 0;const Sp=zt,uN=Kn,Cb=tt;class _c extends uN.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var r=[];return n.forEach(function(a){e(a)&&r.push(a)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}const r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var r=[];return this._descendants(a=>{const i=a._isMatch(e);return i&&r.push(a),!!(i&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const a of r)if(n=e(a),n||a.hasChildren()&&(n=a._descendants(e),n))return!0;return!1}toObject(){var e=uN.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=uN.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n,r){var a=this.getLayer(),i=e||a&&a.getCanvas(),o=i&&i.getContext(),s=this._getCanvasCache(),l=s&&s.scene,u=i&&i.isCache;if(!this.isVisible()&&!u)return this;if(l){o.save();var c=this.getAbsoluteTransform(n).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,n,r);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var r=this.getLayer(),a=e||r&&r.hitCanvas,i=a&&a.getContext(),o=this._getCanvasCache(),s=o&&o.hit;if(s){i.save();var l=this.getAbsoluteTransform(n).getMatrix();i.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",a,n);return this}_drawChildren(e,n,r,a){var i,o=n&&n.getContext(),s=this.clipWidth(),l=this.clipHeight(),u=this.clipFunc(),c=s&&l||u;const d=r===this;if(c){o.save();var p=this.getAbsoluteTransform(r),f=p.getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o.beginPath();let b;if(u)b=u.call(this,o,this);else{var g=this.clipX(),y=this.clipY();o.rect(g,y,s,l)}o.clip.apply(o,b),f=p.copy().invert().getMatrix(),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var v=!d&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";v&&(o.save(),o._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(b){b[e](n,r,a)}),v&&o.restore(),c&&o.restore()}getClientRect(e={}){var n,r=e.skipTransform,a=e.relativeTo,i,o,s,l,u={x:1/0,y:1/0,width:0,height:0},c=this;(n=this.children)===null||n===void 0||n.forEach(function(y){if(y.visible()){var v=y.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});v.width===0&&v.height===0||(i===void 0?(i=v.x,o=v.y,s=v.x+v.width,l=v.y+v.height):(i=Math.min(i,v.x),o=Math.min(o,v.y),s=Math.max(s,v.x+v.width),l=Math.max(l,v.y+v.height)))}});for(var d=this.find("Shape"),p=!1,f=0;f<d.length;f++){var g=d[f];if(g._isVisible(this)){p=!0;break}}return p&&i!==void 0?u={x:i,y:o,width:s-i,height:l-o}:u={x:0,y:0,width:0,height:0},r?u:this._transformedRect(u,a)}}Ic.Container=_c,Sp.Factory.addComponentsGetterSetter(_c,"clip",["x","y","width","height"]),Sp.Factory.addGetterSetter(_c,"clipX",void 0,(0,Cb.getNumberValidator)()),Sp.Factory.addGetterSetter(_c,"clipY",void 0,(0,Cb.getNumberValidator)()),Sp.Factory.addGetterSetter(_c,"clipWidth",void 0,(0,Cb.getNumberValidator)()),Sp.Factory.addGetterSetter(_c,"clipHeight",void 0,(0,Cb.getNumberValidator)()),Sp.Factory.addGetterSetter(_c,"clipFunc");var yF={},Ai={};Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.releaseCapture=Ai.setPointerCapture=Ai.hasPointerCapture=Ai.createEvent=Ai.getCapturedShape=void 0;const pte=Lt,dm=new Map,bF=pte.Konva._global.PointerEvent!==void 0;function hte(t){return dm.get(t)}Ai.getCapturedShape=hte;function cN(t){return{evt:t,pointerId:t.pointerId}}Ai.createEvent=cN;function fte(t,e){return dm.get(t)===e}Ai.hasPointerCapture=fte;function mte(t,e){vF(t),e.getStage()&&(dm.set(t,e),bF&&e._fire("gotpointercapture",cN(new PointerEvent("gotpointercapture"))))}Ai.setPointerCapture=mte;function vF(t,e){const n=dm.get(t);if(!n)return;const r=n.getStage();r&&r.content,dm.delete(t),bF&&n._fire("lostpointercapture",cN(new PointerEvent("lostpointercapture")))}Ai.releaseCapture=vF,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=ir,n=zt,r=Ic,a=Lt,i=Vo,o=xb,s=Lt,l=Ai;var u="Stage",c="string",d="px",p="mouseout",f="mouseleave",g="mouseover",y="mouseenter",v="mousemove",b="mousedown",x="mouseup",w="pointermove",S="pointerdown",C="pointerup",E="pointercancel",R="lostpointercapture",T="pointerout",$="pointerleave",P="pointerover",D="pointerenter",B="contextmenu",z="touchstart",q="touchend",Y="touchmove",Z="touchcancel",H="wheel",L=5,Q=[[y,"_pointerenter"],[b,"_pointerdown"],[v,"_pointermove"],[x,"_pointerup"],[f,"_pointerleave"],[z,"_pointerdown"],[Y,"_pointermove"],[q,"_pointerup"],[Z,"_pointercancel"],[g,"_pointerover"],[H,"_wheel"],[B,"_contextmenu"],[S,"_pointerdown"],[w,"_pointermove"],[C,"_pointerup"],[E,"_pointercancel"],[R,"_lostpointercapture"]];const J={mouse:{[T]:p,[$]:f,[P]:g,[D]:y,[w]:v,[S]:b,[C]:x,[E]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[T]:"touchout",[$]:"touchleave",[P]:"touchover",[D]:"touchenter",[w]:Y,[S]:z,[C]:q,[E]:Z,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[T]:T,[$]:$,[P]:P,[D]:D,[w]:w,[S]:S,[C]:C,[E]:E,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},te=ke=>ke.indexOf("pointer")>=0?"pointer":ke.indexOf("touch")>=0?"touch":"mouse",oe=ke=>{const K=te(ke);if(K==="pointer")return a.Konva.pointerEventsEnabled&&J.pointer;if(K==="touch")return J.touch;if(K==="mouse")return J.mouse};function he(ke={}){return(ke.clipFunc||ke.clipWidth||ke.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ke}const ae="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class de extends r.Container{constructor(K){super(he(K)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{he(this.attrs)}),this._checkVisibility()}_validateAdd(K){const se=K.getType()==="Layer",pe=K.getType()==="FastLayer";se||pe||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const K=this.visible()?"":"none";this.content.style.display=K}setContainer(K){if(typeof K===c){if(K.charAt(0)==="."){var se=K.slice(1);K=document.getElementsByClassName(se)[0]}else{var pe;K.charAt(0)!=="#"?pe=K:pe=K.slice(1),K=document.getElementById(pe)}if(!K)throw"Can not find container in document with id "+pe}return this._setAttr("container",K),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),K.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var K=this.children,se=K.length,pe;for(pe=0;pe<se;pe++)K[pe].clear();return this}clone(K){return K||(K={}),K.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,K)}destroy(){super.destroy();var K=this.content;K&&e.Util._isInDocument(K)&&this.container().removeChild(K);var se=t.stages.indexOf(this);return se>-1&&t.stages.splice(se,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const K=this._pointerPositions[0]||this._changedPointerPositions[0];return K?{x:K.x,y:K.y}:(e.Util.warn(ae),null)}_getPointerById(K){return this._pointerPositions.find(se=>se.id===K)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(K){K=K||{},K.x=K.x||0,K.y=K.y||0,K.width=K.width||this.width(),K.height=K.height||this.height();var se=new i.SceneCanvas({width:K.width,height:K.height,pixelRatio:K.pixelRatio||1}),pe=se.getContext()._context,Ne=this.children;return(K.x||K.y)&&pe.translate(-1*K.x,-1*K.y),Ne.forEach(function(Se){if(Se.isVisible()){var Te=Se._toKonvaCanvas(K);pe.drawImage(Te._canvas,K.x,K.y,Te.getWidth()/Te.getPixelRatio(),Te.getHeight()/Te.getPixelRatio())}}),se}getIntersection(K){if(!K)return null;var se=this.children,pe=se.length,Ne=pe-1,Se;for(Se=Ne;Se>=0;Se--){const Te=se[Se].getIntersection(K);if(Te)return Te}return null}_resizeDOM(){var K=this.width(),se=this.height();this.content&&(this.content.style.width=K+d,this.content.style.height=se+d),this.bufferCanvas.setSize(K,se),this.bufferHitCanvas.setSize(K,se),this.children.forEach(pe=>{pe.setSize({width:K,height:se}),pe.draw()})}add(K,...se){if(arguments.length>1){for(var pe=0;pe<arguments.length;pe++)this.add(arguments[pe]);return this}super.add(K);var Ne=this.children.length;return Ne>L&&e.Util.warn("The stage has "+Ne+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),K.setSize({width:this.width(),height:this.height()}),K.draw(),a.Konva.isBrowser&&this.content.appendChild(K.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(K){return l.hasPointerCapture(K,this)}setPointerCapture(K){l.setPointerCapture(K,this)}releaseCapture(K){l.releaseCapture(K,this)}getLayers(){return this.children}_bindContentEvents(){a.Konva.isBrowser&&Q.forEach(([K,se])=>{this.content.addEventListener(K,pe=>{this[se](pe)},{passive:!1})})}_pointerenter(K){this.setPointersPositions(K);const se=oe(K.type);se&&this._fire(se.pointerenter,{evt:K,target:this,currentTarget:this})}_pointerover(K){this.setPointersPositions(K);const se=oe(K.type);se&&this._fire(se.pointerover,{evt:K,target:this,currentTarget:this})}_getTargetShape(K){let se=this[K+"targetShape"];return se&&!se.getStage()&&(se=null),se}_pointerleave(K){const se=oe(K.type),pe=te(K.type);if(se){this.setPointersPositions(K);var Ne=this._getTargetShape(pe),Se=!o.DD.isDragging||a.Konva.hitOnDragEnabled;Ne&&Se?(Ne._fireAndBubble(se.pointerout,{evt:K}),Ne._fireAndBubble(se.pointerleave,{evt:K}),this._fire(se.pointerleave,{evt:K,target:this,currentTarget:this}),this[pe+"targetShape"]=null):Se&&(this._fire(se.pointerleave,{evt:K,target:this,currentTarget:this}),this._fire(se.pointerout,{evt:K,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(K){const se=oe(K.type),pe=te(K.type);if(se){this.setPointersPositions(K);var Ne=!1;this._changedPointerPositions.forEach(Se=>{var Te=this.getIntersection(Se);if(o.DD.justDragged=!1,a.Konva["_"+pe+"ListenClick"]=!0,!Te||!Te.isListening())return;a.Konva.capturePointerEventsEnabled&&Te.setPointerCapture(Se.id),this[pe+"ClickStartShape"]=Te,Te._fireAndBubble(se.pointerdown,{evt:K,pointerId:Se.id}),Ne=!0;const Pe=K.type.indexOf("touch")>=0;Te.preventDefault()&&K.cancelable&&Pe&&K.preventDefault()}),Ne||this._fire(se.pointerdown,{evt:K,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(K){const se=oe(K.type),pe=te(K.type);if(!se)return;o.DD.isDragging&&o.DD.node.preventDefault()&&K.cancelable&&K.preventDefault(),this.setPointersPositions(K);var Ne=!o.DD.isDragging||a.Konva.hitOnDragEnabled;if(!Ne)return;var Se={};let Te=!1;var Pe=this._getTargetShape(pe);this._changedPointerPositions.forEach(We=>{const $e=l.getCapturedShape(We.id)||this.getIntersection(We),lt=We.id,Ze={evt:K,pointerId:lt};var Je=Pe!==$e;if(Je&&Pe&&(Pe._fireAndBubble(se.pointerout,{...Ze},$e),Pe._fireAndBubble(se.pointerleave,{...Ze},$e)),$e){if(Se[$e._id])return;Se[$e._id]=!0}$e&&$e.isListening()?(Te=!0,Je&&($e._fireAndBubble(se.pointerover,{...Ze},Pe),$e._fireAndBubble(se.pointerenter,{...Ze},Pe),this[pe+"targetShape"]=$e),$e._fireAndBubble(se.pointermove,{...Ze})):Pe&&(this._fire(se.pointerover,{evt:K,target:this,currentTarget:this,pointerId:lt}),this[pe+"targetShape"]=null)}),Te||this._fire(se.pointermove,{evt:K,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(K){const se=oe(K.type),pe=te(K.type);if(!se)return;this.setPointersPositions(K);const Ne=this[pe+"ClickStartShape"],Se=this[pe+"ClickEndShape"];var Te={};let Pe=!1;this._changedPointerPositions.forEach(We=>{const $e=l.getCapturedShape(We.id)||this.getIntersection(We);if($e){if($e.releaseCapture(We.id),Te[$e._id])return;Te[$e._id]=!0}const lt=We.id,Ze={evt:K,pointerId:lt};let Je=!1;a.Konva["_"+pe+"InDblClickWindow"]?(Je=!0,clearTimeout(this[pe+"DblTimeout"])):o.DD.justDragged||(a.Konva["_"+pe+"InDblClickWindow"]=!0,clearTimeout(this[pe+"DblTimeout"])),this[pe+"DblTimeout"]=setTimeout(function(){a.Konva["_"+pe+"InDblClickWindow"]=!1},a.Konva.dblClickWindow),$e&&$e.isListening()?(Pe=!0,this[pe+"ClickEndShape"]=$e,$e._fireAndBubble(se.pointerup,{...Ze}),a.Konva["_"+pe+"ListenClick"]&&Ne&&Ne===$e&&($e._fireAndBubble(se.pointerclick,{...Ze}),Je&&Se&&Se===$e&&$e._fireAndBubble(se.pointerdblclick,{...Ze}))):(this[pe+"ClickEndShape"]=null,a.Konva["_"+pe+"ListenClick"]&&this._fire(se.pointerclick,{evt:K,target:this,currentTarget:this,pointerId:lt}),Je&&this._fire(se.pointerdblclick,{evt:K,target:this,currentTarget:this,pointerId:lt}))}),Pe||this._fire(se.pointerup,{evt:K,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a.Konva["_"+pe+"ListenClick"]=!1,K.cancelable&&pe!=="touch"&&K.preventDefault()}_contextmenu(K){this.setPointersPositions(K);var se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(B,{evt:K}):this._fire(B,{evt:K,target:this,currentTarget:this})}_wheel(K){this.setPointersPositions(K);var se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(H,{evt:K}):this._fire(H,{evt:K,target:this,currentTarget:this})}_pointercancel(K){this.setPointersPositions(K);const se=l.getCapturedShape(K.pointerId)||this.getIntersection(this.getPointerPosition());se&&se._fireAndBubble(C,l.createEvent(K)),l.releaseCapture(K.pointerId)}_lostpointercapture(K){l.releaseCapture(K.pointerId)}setPointersPositions(K){var se=this._getContentPosition(),pe=null,Ne=null;K=K||window.event,K.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(K.touches,Se=>{this._pointerPositions.push({id:Se.identifier,x:(Se.clientX-se.left)/se.scaleX,y:(Se.clientY-se.top)/se.scaleY})}),Array.prototype.forEach.call(K.changedTouches||K.touches,Se=>{this._changedPointerPositions.push({id:Se.identifier,x:(Se.clientX-se.left)/se.scaleX,y:(Se.clientY-se.top)/se.scaleY})})):(pe=(K.clientX-se.left)/se.scaleX,Ne=(K.clientY-se.top)/se.scaleY,this.pointerPos={x:pe,y:Ne},this._pointerPositions=[{x:pe,y:Ne,id:e.Util._getFirstPointerId(K)}],this._changedPointerPositions=[{x:pe,y:Ne,id:e.Util._getFirstPointerId(K)}])}_setPointerPosition(K){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(K)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var K=this.content.getBoundingClientRect();return{top:K.top,left:K.left,scaleX:K.width/this.content.clientWidth||1,scaleY:K.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new i.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new i.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!a.Konva.isBrowser){var K=this.container();if(!K)throw"Stage has no container. A container is required.";K.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),K.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(K){K.batchDraw()}),this}}t.Stage=de,de.prototype.nodeType=u,(0,s._registerNode)(de),n.Factory.addGetterSetter(de,"container")}(yF);var pm={},jr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=Lt,n=ir,r=zt,a=Kn,i=tt,o=Lt,s=Ai;var l="hasShadow",u="shadowRGBA",c="patternImage",d="linearGradient",p="radialGradient";let f;function g(){return f||(f=n.Util.createCanvasElement().getContext("2d"),f)}t.shapes={};function y($){const P=this.attrs.fillRule;P?$.fill(P):$.fill()}function v($){$.stroke()}function b($){$.fill()}function x($){$.stroke()}function w(){this._clearCache(l)}function S(){this._clearCache(u)}function C(){this._clearCache(c)}function E(){this._clearCache(d)}function R(){this._clearCache(p)}class T extends a.Node{constructor(P){super(P);let D;for(;D=n.Util.getRandomColor(),!(D&&!(D in t.shapes)););this.colorKey=D,t.shapes[D]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var P=g();const D=P.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(D&&D.setTransform){const B=new n.Transform;B.translate(this.fillPatternX(),this.fillPatternY()),B.rotate(e.Konva.getAngle(this.fillPatternRotation())),B.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),B.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const z=B.getMatrix(),q=typeof DOMMatrix>"u"?{a:z[0],b:z[1],c:z[2],d:z[3],e:z[4],f:z[5]}:new DOMMatrix(z);D.setTransform(q)}return D}}_getLinearGradient(){return this._getCache(d,this.__getLinearGradient)}__getLinearGradient(){var P=this.fillLinearGradientColorStops();if(P){for(var D=g(),B=this.fillLinearGradientStartPoint(),z=this.fillLinearGradientEndPoint(),q=D.createLinearGradient(B.x,B.y,z.x,z.y),Y=0;Y<P.length;Y+=2)q.addColorStop(P[Y],P[Y+1]);return q}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){var P=this.fillRadialGradientColorStops();if(P){for(var D=g(),B=this.fillRadialGradientStartPoint(),z=this.fillRadialGradientEndPoint(),q=D.createRadialGradient(B.x,B.y,this.fillRadialGradientStartRadius(),z.x,z.y,this.fillRadialGradientEndRadius()),Y=0;Y<P.length;Y+=2)q.addColorStop(P[Y],P[Y+1]);return q}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var P=n.Util.colorToRGBA(this.shadowColor());if(P)return"rgba("+P.r+","+P.g+","+P.b+","+P.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const P=this.hitStrokeWidth();return P==="auto"?this.hasStroke():this.strokeEnabled()&&!!P}intersects(P){var D=this.getStage();if(!D)return!1;const B=D.bufferHitCanvas;return B.getContext().clear(),this.drawHit(B,void 0,!0),B.context.getImageData(Math.round(P.x),Math.round(P.y),1,1).data[3]>0}destroy(){return a.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(P){var D;if(!(!((D=this.attrs.perfectDrawEnabled)!==null&&D!==void 0)||D))return!1;const B=P||this.hasFill(),z=this.hasStroke(),q=this.getAbsoluteOpacity()!==1;if(B&&z&&q)return!0;const Y=this.hasShadow(),Z=this.shadowForStrokeEnabled();return!!(B&&z&&Y&&Z)}setStrokeHitEnabled(P){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),P?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var P=this.size();return{x:this._centroid?-P.width/2:0,y:this._centroid?-P.height/2:0,width:P.width,height:P.height}}getClientRect(P={}){const D=P.skipTransform,B=P.relativeTo,z=this.getSelfRect(),q=!P.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,Y=z.width+q,Z=z.height+q,H=!P.skipShadow&&this.hasShadow(),L=H?this.shadowOffsetX():0,Q=H?this.shadowOffsetY():0,J=Y+Math.abs(L),te=Z+Math.abs(Q),oe=H&&this.shadowBlur()||0,he=J+oe*2,ae=te+oe*2,de={width:he,height:ae,x:-(q/2+oe)+Math.min(L,0)+z.x,y:-(q/2+oe)+Math.min(Q,0)+z.y};return D?de:this._transformedRect(de,B)}drawScene(P,D,B){var z=this.getLayer(),q=P||z.getCanvas(),Y=q.getContext(),Z=this._getCanvasCache(),H=this.getSceneFunc(),L=this.hasShadow(),Q,J,te=q.isCache,oe=D===this;if(!this.isVisible()&&!oe)return this;if(Z){Y.save();var he=this.getAbsoluteTransform(D).getMatrix();return Y.transform(he[0],he[1],he[2],he[3],he[4],he[5]),this._drawCachedSceneCanvas(Y),Y.restore(),this}if(!H)return this;if(Y.save(),this._useBufferCanvas()&&!te){Q=this.getStage();const ke=B||Q.bufferCanvas;J=ke.getContext(),J.clear(),J.save(),J._applyLineJoin(this);var ae=this.getAbsoluteTransform(D).getMatrix();J.transform(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]),H.call(this,J,this),J.restore();var de=ke.pixelRatio;L&&Y._applyShadow(this),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this),Y.drawImage(ke._canvas,0,0,ke.width/de,ke.height/de)}else{if(Y._applyLineJoin(this),!oe){var ae=this.getAbsoluteTransform(D).getMatrix();Y.transform(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this)}L&&Y._applyShadow(this),H.call(this,Y,this)}return Y.restore(),this}drawHit(P,D,B=!1){if(!this.shouldDrawHit(D,B))return this;var z=this.getLayer(),q=P||z.hitCanvas,Y=q&&q.getContext(),Z=this.hitFunc()||this.sceneFunc(),H=this._getCanvasCache(),L=H&&H.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),L){Y.save();var Q=this.getAbsoluteTransform(D).getMatrix();return Y.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),this._drawCachedHitCanvas(Y),Y.restore(),this}if(!Z)return this;if(Y.save(),Y._applyLineJoin(this),this!==D){var J=this.getAbsoluteTransform(D).getMatrix();Y.transform(J[0],J[1],J[2],J[3],J[4],J[5])}return Z.call(this,Y,this),Y.restore(),this}drawHitFromCache(P=0){var D=this._getCanvasCache(),B=this._getCachedSceneCanvas(),z=D.hit,q=z.getContext(),Y=z.getWidth(),Z=z.getHeight(),H,L,Q,J,te,oe;q.clear(),q.drawImage(B._canvas,0,0,Y,Z);try{for(H=q.getImageData(0,0,Y,Z),L=H.data,Q=L.length,J=n.Util._hexToRgb(this.colorKey),te=0;te<Q;te+=4)oe=L[te+3],oe>P?(L[te]=J.r,L[te+1]=J.g,L[te+2]=J.b,L[te+3]=255):L[te+3]=0;q.putImageData(H,0,0)}catch(he){n.Util.error("Unable to draw hit graph from cached scene canvas. "+he.message)}return this}hasPointerCapture(P){return s.hasPointerCapture(P,this)}setPointerCapture(P){s.setPointerCapture(P,this)}releaseCapture(P){s.releaseCapture(P,this)}}t.Shape=T,T.prototype._fillFunc=y,T.prototype._strokeFunc=v,T.prototype._fillFuncHit=b,T.prototype._strokeFuncHit=x,T.prototype._centroid=!1,T.prototype.nodeType="Shape",(0,o._registerNode)(T),T.prototype.eventListeners={},T.prototype.on.call(T.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),T.prototype.on.call(T.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",S),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",E),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",R),r.Factory.addGetterSetter(T,"stroke",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(T,"strokeWidth",2,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(T,"hitStrokeWidth","auto",(0,i.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(T,"strokeHitEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(T,"perfectDrawEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(T,"shadowForStrokeEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(T,"lineJoin"),r.Factory.addGetterSetter(T,"lineCap"),r.Factory.addGetterSetter(T,"sceneFunc"),r.Factory.addGetterSetter(T,"hitFunc"),r.Factory.addGetterSetter(T,"dash"),r.Factory.addGetterSetter(T,"dashOffset",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowColor",void 0,(0,i.getStringValidator)()),r.Factory.addGetterSetter(T,"shadowBlur",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowOpacity",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(T,"shadowOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"shadowOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternImage"),r.Factory.addGetterSetter(T,"fill",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(T,"fillPatternX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(T,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(T,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(T,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(T,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(T,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(T,"fillEnabled",!0),r.Factory.addGetterSetter(T,"strokeEnabled",!0),r.Factory.addGetterSetter(T,"shadowEnabled",!0),r.Factory.addGetterSetter(T,"dashEnabled",!0),r.Factory.addGetterSetter(T,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(T,"fillPriority","color"),r.Factory.addComponentsGetterSetter(T,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(T,"fillPatternOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(T,"fillPatternScaleX",1,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(T,"fillPatternScaleY",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(T,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(T,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(T,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(T,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(T,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(T,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(T,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(T,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(T,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(T,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(T,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(T,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(T,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(T,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(T,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(T,"fillPatternRotation",0),r.Factory.addGetterSetter(T,"fillRule",void 0,(0,i.getStringValidator)()),r.Factory.backCompat(T,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(jr),Object.defineProperty(pm,"__esModule",{value:!0}),pm.Layer=void 0;const ll=ir,dN=Ic,Cp=Kn,pN=zt,xF=Vo,gte=tt,yte=jr,bte=Lt;var vte="#",xte="beforeDraw",wte="draw",wF=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],kte=wF.length;let Ep=class extends dN.Container{constructor(t){super(t),this.canvas=new xF.SceneCanvas,this.hitCanvas=new xF.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Cp.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=Cp.Node.prototype.moveUp.call(this);if(!t)return!1;var e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Cp.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Cp.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return Cp.Node.prototype.remove.call(this),t&&t.parentNode&&ll.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){var e=t.getType();e!=="Group"&&e!=="Shape"&&ll.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Cp.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){ll.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){ll.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,ll.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,n=!1;;){for(let r=0;r<kte;r++){const a=wF[r],i=this._getIntersection({x:t.x+a.x*e,y:t.y+a.y*e}),o=i.shape;if(o)return o;if(n=!!i.antialiased,!i.antialiased)break}if(n)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=n[3];if(r===255){const a=ll.Util._rgbToHex(n[0],n[1],n[2]),i=yte.shapes[vte+a];return i?{shape:i}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas();return this._fire(xte,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),dN.Container.prototype.drawScene.call(this,r,e),this._fire(wte,{node:this}),this}drawHit(t,e){var n=this.getLayer(),r=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),dN.Container.prototype.drawHit.call(this,r,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){ll.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return ll.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,e=!!this.hitCanvas._canvas.parentNode;e?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return ll.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};pm.Layer=Ep,Ep.prototype.nodeType="Layer",(0,bte._registerNode)(Ep),pN.Factory.addGetterSetter(Ep,"imageSmoothingEnabled",!0),pN.Factory.addGetterSetter(Ep,"clearBeforeDraw",!0),pN.Factory.addGetterSetter(Ep,"hitGraphEnabled",!0,(0,gte.getBooleanValidator)());var Eb={};Object.defineProperty(Eb,"__esModule",{value:!0}),Eb.FastLayer=void 0;const Ste=ir,Cte=pm,Ete=Lt;class hN extends Cte.Layer{constructor(e){super(e),this.listening(!1),Ste.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Eb.FastLayer=hN,hN.prototype.nodeType="FastLayer",(0,Ete._registerNode)(hN);var Np={};Object.defineProperty(Np,"__esModule",{value:!0}),Np.Group=void 0;const Nte=ir,Tte=Ic,Ite=Lt;class fN extends Tte.Container{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&Nte.Util.throw("You may only add groups and shapes to groups.")}}Np.Group=fN,fN.prototype.nodeType="Group",(0,Ite._registerNode)(fN);var Tp={};Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.Animation=void 0;const mN=Lt,kF=ir,gN=function(){return mN.glob.performance&&mN.glob.performance.now?function(){return mN.glob.performance.now()}:function(){return new Date().getTime()}}();class Ps{constructor(e,n){this.id=Ps.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:gN(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,r=n.length;for(let a=0;a<r;a++)if(n[a]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const e=Ps.animations,n=e.length;for(let r=0;r<n;r++)if(e[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=gN(),Ps._addAnimation(this),this}stop(){return Ps._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,r=this.animations,a=r.length;for(let i=0;i<a;i++)if(r[i].id===n){this.animations.splice(i,1);break}}static _runFrames(){const e={},n=this.animations;for(let r=0;r<n.length;r++){const a=n[r],i=a.layers,o=a.func;a._updateFrameObject(gN());const s=i.length;let l;if(o?l=o.call(a,a.frame)!==!1:l=!0,!!l)for(let u=0;u<s;u++){const c=i[u];c._id!==void 0&&(e[c._id]=c)}}for(let r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){const e=Ps;e.animations.length?(e._runFrames(),kF.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,kF.Util.requestAnimFrame(this._animationLoop))}}Tp.Animation=Ps,Ps.animations=[],Ps.animIdCounter=0,Ps.animRunning=!1;var SF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=ir,n=Tp,r=Kn,a=Lt;var i={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,s=2,l=3,u=0,c=["fill","stroke","shadowColor"];class d{constructor(g,y,v,b,x,w,S){this.prop=g,this.propFunc=y,this.begin=b,this._pos=b,this.duration=w,this._change=0,this.prevPos=0,this.yoyo=S,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=x-this.begin,this.pause()}fire(g){var y=this[g];y&&y()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=s,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var g=this.getTimer()-this._startTime;this.state===s?this.setTime(g):this.state===l&&this.setTime(this.duration-g)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class p{constructor(g){var y=this,v=g.node,b=v._id,x,w=g.easing||t.Easings.Linear,S=!!g.yoyo,C;typeof g.duration>"u"?x=.3:g.duration===0?x=.001:x=g.duration,this.node=v,this._id=u++;var E=v.getLayer()||(v instanceof a.Konva.Stage?v.getLayers():null);E||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){y.tween.onEnterFrame()},E),this.tween=new d(C,function(R){y._tweenFunc(R)},w,0,1,x*1e3,S),this._addListeners(),p.attrs[b]||(p.attrs[b]={}),p.attrs[b][this._id]||(p.attrs[b][this._id]={}),p.tweens[b]||(p.tweens[b]={});for(C in g)i[C]===void 0&&this._addAttr(C,g[C]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,y){var v=this.node,b=v._id,x,w,S,C,E,R,T,$;if(S=p.tweens[b][g],S&&delete p.attrs[b][S][g],x=v.getAttr(g),e.Util._isArray(y))if(w=[],E=Math.max(y.length,x.length),g==="points"&&y.length!==x.length&&(y.length>x.length?(T=x,x=e.Util._prepareArrayForTween(x,y,v.closed())):(R=y,y=e.Util._prepareArrayForTween(y,x,v.closed()))),g.indexOf("fill")===0)for(C=0;C<E;C++)if(C%2===0)w.push(y[C]-x[C]);else{var P=e.Util.colorToRGBA(x[C]);$=e.Util.colorToRGBA(y[C]),x[C]=P,w.push({r:$.r-P.r,g:$.g-P.g,b:$.b-P.b,a:$.a-P.a})}else for(C=0;C<E;C++)w.push(y[C]-x[C]);else c.indexOf(g)!==-1?(x=e.Util.colorToRGBA(x),$=e.Util.colorToRGBA(y),w={r:$.r-x.r,g:$.g-x.g,b:$.b-x.b,a:$.a-x.a}):w=y-x;p.attrs[b][this._id][g]={start:x,diff:w,end:y,trueEnd:R,trueStart:T},p.tweens[b][g]=this._id}_tweenFunc(g){var y=this.node,v=p.attrs[y._id][this._id],b,x,w,S,C,E,R,T;for(b in v){if(x=v[b],w=x.start,S=x.diff,T=x.end,e.Util._isArray(w))if(C=[],R=Math.max(w.length,T.length),b.indexOf("fill")===0)for(E=0;E<R;E++)E%2===0?C.push((w[E]||0)+S[E]*g):C.push("rgba("+Math.round(w[E].r+S[E].r*g)+","+Math.round(w[E].g+S[E].g*g)+","+Math.round(w[E].b+S[E].b*g)+","+(w[E].a+S[E].a*g)+")");else for(E=0;E<R;E++)C.push((w[E]||0)+S[E]*g);else c.indexOf(b)!==-1?C="rgba("+Math.round(w.r+S.r*g)+","+Math.round(w.g+S.g*g)+","+Math.round(w.b+S.b*g)+","+(w.a+S.a*g)+")":C=w+S*g;y.setAttr(b,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueEnd&&g.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueStart&&g.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var g=this.node._id,y=this._id,v=p.tweens[g],b;this.pause();for(b in v)delete p.tweens[g][b];delete p.attrs[g][y]}}t.Tween=p,p.attrs={},p.tweens={},r.Node.prototype.to=function(f){var g=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),g&&g()};var y=new p(f);y.play()},t.Easings={BackEaseIn(f,g,y,v){var b=1.70158;return y*(f/=v)*f*((b+1)*f-b)+g},BackEaseOut(f,g,y,v){var b=1.70158;return y*((f=f/v-1)*f*((b+1)*f+b)+1)+g},BackEaseInOut(f,g,y,v){var b=1.70158;return(f/=v/2)<1?y/2*(f*f*(((b*=1.525)+1)*f-b))+g:y/2*((f-=2)*f*(((b*=1.525)+1)*f+b)+2)+g},ElasticEaseIn(f,g,y,v,b,x){var w=0;return f===0?g:(f/=v)===1?g+y:(x||(x=v*.3),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),-(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x))+g)},ElasticEaseOut(f,g,y,v,b,x){var w=0;return f===0?g:(f/=v)===1?g+y:(x||(x=v*.3),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),b*Math.pow(2,-10*f)*Math.sin((f*v-w)*(2*Math.PI)/x)+y+g)},ElasticEaseInOut(f,g,y,v,b,x){var w=0;return f===0?g:(f/=v/2)===2?g+y:(x||(x=v*(.3*1.5)),!b||b<Math.abs(y)?(b=y,w=x/4):w=x/(2*Math.PI)*Math.asin(y/b),f<1?-.5*(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x))+g:b*Math.pow(2,-10*(f-=1))*Math.sin((f*v-w)*(2*Math.PI)/x)*.5+y+g)},BounceEaseOut(f,g,y,v){return(f/=v)<1/2.75?y*(7.5625*f*f)+g:f<2/2.75?y*(7.5625*(f-=1.5/2.75)*f+.75)+g:f<2.5/2.75?y*(7.5625*(f-=2.25/2.75)*f+.9375)+g:y*(7.5625*(f-=2.625/2.75)*f+.984375)+g},BounceEaseIn(f,g,y,v){return y-t.Easings.BounceEaseOut(v-f,0,y,v)+g},BounceEaseInOut(f,g,y,v){return f<v/2?t.Easings.BounceEaseIn(f*2,0,y,v)*.5+g:t.Easings.BounceEaseOut(f*2-v,0,y,v)*.5+y*.5+g},EaseIn(f,g,y,v){return y*(f/=v)*f+g},EaseOut(f,g,y,v){return-y*(f/=v)*(f-2)+g},EaseInOut(f,g,y,v){return(f/=v/2)<1?y/2*f*f+g:-y/2*(--f*(f-2)-1)+g},StrongEaseIn(f,g,y,v){return y*(f/=v)*f*f*f*f+g},StrongEaseOut(f,g,y,v){return y*((f=f/v-1)*f*f*f*f+1)+g},StrongEaseInOut(f,g,y,v){return(f/=v/2)<1?y/2*f*f*f*f*f+g:y/2*((f-=2)*f*f*f*f+2)+g},Linear(f,g,y,v){return y*f/v+g}}})(SF),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=Lt,n=ir,r=Kn,a=Ic,i=yF,o=pm,s=Eb,l=Np,u=xb,c=jr,d=Tp,p=SF,f=ol,g=Vo;t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:a.Container,Stage:i.Stage,stages:i.stages,Layer:o.Layer,FastLayer:s.FastLayer,Group:l.Group,DD:u.DD,Shape:c.Shape,shapes:c.shapes,Animation:d.Animation,Tween:p.Tween,Easings:p.Easings,Context:f.Context,Canvas:g.Canvas}),t.default=t.Konva}(mb);var Nb={};Object.defineProperty(Nb,"__esModule",{value:!0}),Nb.Arc=void 0;const Tb=zt,_te=jr,CF=Lt,Ib=tt,Rte=Lt;class ul extends _te.Shape{_sceneFunc(e){var n=CF.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),a=CF.Konva.getAngle(r?360-this.angle():this.angle()),i=Math.cos(Math.min(a,Math.PI)),o=1,s=Math.sin(Math.min(Math.max(Math.PI,a),3*Math.PI/2)),l=Math.sin(Math.min(a,Math.PI/2)),u=i*(i>0?e:n),c=o*n,d=s*(s>0?e:n),p=l*(l>0?n:e);return{x:u,y:r?-1*p:d,width:c-u,height:p-d}}}Nb.Arc=ul,ul.prototype._centroid=!0,ul.prototype.className="Arc",ul.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Rte._registerNode)(ul),Tb.Factory.addGetterSetter(ul,"innerRadius",0,(0,Ib.getNumberValidator)()),Tb.Factory.addGetterSetter(ul,"outerRadius",0,(0,Ib.getNumberValidator)()),Tb.Factory.addGetterSetter(ul,"angle",0,(0,Ib.getNumberValidator)()),Tb.Factory.addGetterSetter(ul,"clockwise",!1,(0,Ib.getBooleanValidator)());var _b={},hm={};Object.defineProperty(hm,"__esModule",{value:!0}),hm.Line=void 0;const Rb=zt,$te=jr,EF=tt,Ote=Lt;function yN(t,e,n,r,a,i,o){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(a-n,2)+Math.pow(i-r,2)),u=o*s/(s+l),c=o*l/(s+l),d=n-u*(a-t),p=r-u*(i-e),f=n+c*(a-t),g=r+c*(i-e);return[d,p,f,g]}function NF(t,e){var n=t.length,r=[],a,i;for(a=2;a<n-2;a+=2)i=yN(t[a-2],t[a-1],t[a],t[a+1],t[a+2],t[a+3],e),!isNaN(i[0])&&(r.push(i[0]),r.push(i[1]),r.push(t[a]),r.push(t[a+1]),r.push(i[2]),r.push(i[3]));return r}class fu extends $te.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),r=n.length,a=this.tension(),i=this.closed(),o=this.bezier(),s,l,u;if(r){if(e.beginPath(),e.moveTo(n[0],n[1]),a!==0&&r>4){for(s=this.getTensionPoints(),l=s.length,u=i?0:4,i||e.quadraticCurveTo(s[0],s[1],s[2],s[3]);u<l-2;)e.bezierCurveTo(s[u++],s[u++],s[u++],s[u++],s[u++],s[u++]);i||e.quadraticCurveTo(s[l-2],s[l-1],n[r-2],n[r-1])}else if(o)for(u=2;u<r;)e.bezierCurveTo(n[u++],n[u++],n[u++],n[u++],n[u++],n[u++]);else for(u=2;u<r;u+=2)e.lineTo(n[u],n[u+1]);i?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():NF(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,r=this.tension(),a=yN(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),i=yN(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),o=NF(e,r),s=[a[2],a[3]].concat(o).concat([i[0],i[1],e[n-2],e[n-1],i[2],i[3],a[0],a[1],e[0],e[1]]);return s}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],r=e[0],a=e[1],i=e[1],o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),a=Math.min(a,s),i=Math.max(i,s);return{x:n,y:a,width:r-n,height:i-a}}}hm.Line=fu,fu.prototype.className="Line",fu.prototype._attrsAffectingSize=["points","bezier","tension"],(0,Ote._registerNode)(fu),Rb.Factory.addGetterSetter(fu,"closed",!1),Rb.Factory.addGetterSetter(fu,"bezier",!1),Rb.Factory.addGetterSetter(fu,"tension",0,(0,EF.getNumberValidator)()),Rb.Factory.addGetterSetter(fu,"points",[],(0,EF.getNumberArrayValidator)());var Ip={},TF={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,s,l)=>{let u,c,d;u=l/2,c=0;for(let p=0;p<20;p++)d=u*t.tValues[20][p]+u,c+=t.cValues[20][p]*r(o,s,d);return u*c};t.getCubicArcLength=e;const n=(o,s,l)=>{l===void 0&&(l=1);const u=o[0]-2*o[1]+o[2],c=s[0]-2*s[1]+s[2],d=2*o[1]-2*o[0],p=2*s[1]-2*s[0],f=4*(u*u+c*c),g=4*(u*d+c*p),y=d*d+p*p;if(f===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(s[2]-s[0],2));const v=g/(2*f),b=y/f,x=l+v,w=b-v*v,S=x*x+w>0?Math.sqrt(x*x+w):0,C=v*v+w>0?Math.sqrt(v*v+w):0,E=v+Math.sqrt(v*v+w)!==0?w*Math.log(Math.abs((x+S)/(v+C))):0;return Math.sqrt(f)/2*(x*S-v*C+E)};t.getQuadraticArcLength=n;function r(o,s,l){const u=a(1,l,o),c=a(1,l,s),d=u*u+c*c;return Math.sqrt(d)}const a=(o,s,l)=>{const u=l.length-1;let c,d;if(u===0)return 0;if(o===0){d=0;for(let p=0;p<=u;p++)d+=t.binomialCoefficients[u][p]*Math.pow(1-s,u-p)*Math.pow(s,p)*l[p];return d}else{c=new Array(u);for(let p=0;p<u;p++)c[p]=u*(l[p+1]-l[p]);return a(o-1,s,c)}},i=(o,s,l)=>{let u=1,c=o/s,d=(o-l(c))/s,p=0;for(;u>.001;){const f=l(c+d),g=Math.abs(o-f)/s;if(g<u)u=g,c+=d;else{const y=l(c-d),v=Math.abs(o-y)/s;v<u?(u=v,c-=d):d/=2}if(p++,p>500)break}return c};t.t2length=i})(TF),Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.Path=void 0;const Mte=zt,Pte=jr,Fte=Lt,_p=TF;class qr extends Pte.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=qr.parsePathData(this.data()),this.pathLength=qr.getPathLength(this.dataArray)}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var r=!1,a=0;a<n.length;a++){var i=n[a].command,o=n[a].points;switch(i){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var s=o[0],l=o[1],u=o[2],c=o[3],d=o[4],p=o[5],f=o[6],g=o[7],y=u>c?u:c,v=u>c?1:u/c,b=u>c?c/u:1;e.translate(s,l),e.rotate(f),e.scale(v,b),e.arc(0,0,y,d,d+p,1-g),e.scale(1/v,1/b),e.rotate(-f),e.translate(-s,-l);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(u){if(u.command==="A"){var c=u.points[4],d=u.points[5],p=u.points[4]+d,f=Math.PI/180;if(Math.abs(c-p)<f&&(f=Math.abs(c-p)),d<0)for(let g=c-f;g>p;g-=f){const y=qr.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],g,0);e.push(y.x,y.y)}else for(let g=c+f;g<p;g+=f){const y=qr.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],g,0);e.push(y.x,y.y)}}else if(u.command==="C")for(let g=0;g<=1;g+=.01){const y=qr.getPointOnCubicBezier(g,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);e.push(y.x,y.y)}else e=e.concat(u.points)});for(var n=e[0],r=e[0],a=e[1],i=e[1],o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],isNaN(o)||(n=Math.min(n,o),r=Math.max(r,o)),isNaN(s)||(a=Math.min(a,s),i=Math.max(i,s));return{x:n,y:a,width:r-n,height:i-a}}getLength(){return this.pathLength}getPointAtLength(e){return qr.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,r,a){return Math.sqrt((r-e)*(r-e)+(a-n)*(a-n))}static getPathLength(e){let n=0;for(var r=0;r<e.length;++r)n+=e[r].pathLength;return n}static getPointAtLengthOfDataArray(e,n){var r,a=0,i=n.length;if(!i)return null;for(;a<i&&e>n[a].pathLength;)e-=n[a].pathLength,++a;if(a===i)return r=n[a-1].points.slice(-2),{x:r[0],y:r[1]};if(e<.01)return r=n[a].points.slice(0,2),{x:r[0],y:r[1]};var o=n[a],s=o.points;switch(o.command){case"L":return qr.getPointOnLine(e,o.start.x,o.start.y,s[0],s[1]);case"C":return qr.getPointOnCubicBezier((0,_p.t2length)(e,qr.getPathLength(n),y=>(0,_p.getCubicArcLength)([o.start.x,s[0],s[2],s[4]],[o.start.y,s[1],s[3],s[5]],y)),o.start.x,o.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return qr.getPointOnQuadraticBezier((0,_p.t2length)(e,qr.getPathLength(n),y=>(0,_p.getQuadraticArcLength)([o.start.x,s[0],s[2]],[o.start.y,s[1],s[3]],y)),o.start.x,o.start.y,s[0],s[1],s[2],s[3]);case"A":var l=s[0],u=s[1],c=s[2],d=s[3],p=s[4],f=s[5],g=s[6];return p+=f*e/o.pathLength,qr.getPointOnEllipticalArc(l,u,c,d,p,g)}return null}static getPointOnLine(e,n,r,a,i,o,s){o===void 0&&(o=n),s===void 0&&(s=r);var l=(i-r)/(a-n+1e-8),u=Math.sqrt(e*e/(1+l*l));a<n&&(u*=-1);var c=l*u,d;if(a===n)d={x:o,y:s+c};else if((s-r)/(o-n+1e-8)===l)d={x:o+u,y:s+c};else{var p,f,g=this.getLineLength(n,r,a,i),y=(o-n)*(a-n)+(s-r)*(i-r);y=y/(g*g),p=n+y*(a-n),f=r+y*(i-r);var v=this.getLineLength(o,s,p,f),b=Math.sqrt(e*e-v*v);u=Math.sqrt(b*b/(1+l*l)),a<n&&(u*=-1),c=l*u,d={x:p+u,y:f+c}}return d}static getPointOnCubicBezier(e,n,r,a,i,o,s,l,u){function c(v){return v*v*v}function d(v){return 3*v*v*(1-v)}function p(v){return 3*v*(1-v)*(1-v)}function f(v){return(1-v)*(1-v)*(1-v)}var g=l*c(e)+o*d(e)+a*p(e)+n*f(e),y=u*c(e)+s*d(e)+i*p(e)+r*f(e);return{x:g,y}}static getPointOnQuadraticBezier(e,n,r,a,i,o,s){function l(f){return f*f}function u(f){return 2*f*(1-f)}function c(f){return(1-f)*(1-f)}var d=o*l(e)+a*u(e)+n*c(e),p=s*l(e)+i*u(e)+r*c(e);return{x:d,y:p}}static getPointOnEllipticalArc(e,n,r,a,i,o){var s=Math.cos(o),l=Math.sin(o),u={x:r*Math.cos(i),y:a*Math.sin(i)};return{x:e+(u.x*s-u.y*l),y:n+(u.x*l+u.y*s)}}static parsePathData(e){if(!e)return[];var n=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var a=0;a<r.length;a++)n=n.replace(new RegExp(r[a],"g"),"|"+r[a]);var i=n.split("|"),o=[],s=[],l=0,u=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,d;for(a=1;a<i.length;a++){var p=i[a],f=p.charAt(0);for(p=p.slice(1),s.length=0;d=c.exec(p);)s.push(d[0]);for(var g=[],y=0,v=s.length;y<v;y++){if(s[y]==="00"){g.push(0,0);continue}var b=parseFloat(s[y]);isNaN(b)?g.push(0):g.push(b)}for(;g.length>0&&!isNaN(g[0]);){var x="",w=[],S=l,C=u,E,R,T,$,P,D,B,z,q,Y;switch(f){case"l":l+=g.shift(),u+=g.shift(),x="L",w.push(l,u);break;case"L":l=g.shift(),u=g.shift(),w.push(l,u);break;case"m":var Z=g.shift(),H=g.shift();if(l+=Z,u+=H,x="M",o.length>2&&o[o.length-1].command==="z"){for(var L=o.length-2;L>=0;L--)if(o[L].command==="M"){l=o[L].points[0]+Z,u=o[L].points[1]+H;break}}w.push(l,u),f="l";break;case"M":l=g.shift(),u=g.shift(),x="M",w.push(l,u),f="L";break;case"h":l+=g.shift(),x="L",w.push(l,u);break;case"H":l=g.shift(),x="L",w.push(l,u);break;case"v":u+=g.shift(),x="L",w.push(l,u);break;case"V":u=g.shift(),x="L",w.push(l,u);break;case"C":w.push(g.shift(),g.shift(),g.shift(),g.shift()),l=g.shift(),u=g.shift(),w.push(l,u);break;case"c":w.push(l+g.shift(),u+g.shift(),l+g.shift(),u+g.shift()),l+=g.shift(),u+=g.shift(),x="C",w.push(l,u);break;case"S":R=l,T=u,E=o[o.length-1],E.command==="C"&&(R=l+(l-E.points[2]),T=u+(u-E.points[3])),w.push(R,T,g.shift(),g.shift()),l=g.shift(),u=g.shift(),x="C",w.push(l,u);break;case"s":R=l,T=u,E=o[o.length-1],E.command==="C"&&(R=l+(l-E.points[2]),T=u+(u-E.points[3])),w.push(R,T,l+g.shift(),u+g.shift()),l+=g.shift(),u+=g.shift(),x="C",w.push(l,u);break;case"Q":w.push(g.shift(),g.shift()),l=g.shift(),u=g.shift(),w.push(l,u);break;case"q":w.push(l+g.shift(),u+g.shift()),l+=g.shift(),u+=g.shift(),x="Q",w.push(l,u);break;case"T":R=l,T=u,E=o[o.length-1],E.command==="Q"&&(R=l+(l-E.points[0]),T=u+(u-E.points[1])),l=g.shift(),u=g.shift(),x="Q",w.push(R,T,l,u);break;case"t":R=l,T=u,E=o[o.length-1],E.command==="Q"&&(R=l+(l-E.points[0]),T=u+(u-E.points[1])),l+=g.shift(),u+=g.shift(),x="Q",w.push(R,T,l,u);break;case"A":$=g.shift(),P=g.shift(),D=g.shift(),B=g.shift(),z=g.shift(),q=l,Y=u,l=g.shift(),u=g.shift(),x="A",w=this.convertEndpointToCenterParameterization(q,Y,l,u,B,z,$,P,D);break;case"a":$=g.shift(),P=g.shift(),D=g.shift(),B=g.shift(),z=g.shift(),q=l,Y=u,l+=g.shift(),u+=g.shift(),x="A",w=this.convertEndpointToCenterParameterization(q,Y,l,u,B,z,$,P,D);break}o.push({command:x||f,points:w,start:{x:S,y:C},pathLength:this.calcLength(S,C,x||f,w)})}(f==="z"||f==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,n,r,a){var i,o,s,l,u=qr;switch(r){case"L":return u.getLineLength(e,n,a[0],a[1]);case"C":return(0,_p.getCubicArcLength)([e,a[0],a[2],a[4]],[n,a[1],a[3],a[5]],1);case"Q":return(0,_p.getQuadraticArcLength)([e,a[0],a[2]],[n,a[1],a[3]],1);case"A":i=0;var c=a[4],d=a[5],p=a[4]+d,f=Math.PI/180;if(Math.abs(c-p)<f&&(f=Math.abs(c-p)),o=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],c,0),d<0)for(l=c-f;l>p;l-=f)s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(l=c+f;l<p;l+=f)s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=u.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],p,0),i+=u.getLineLength(o.x,o.y,s.x,s.y),i}return 0}static convertEndpointToCenterParameterization(e,n,r,a,i,o,s,l,u){var c=u*(Math.PI/180),d=Math.cos(c)*(e-r)/2+Math.sin(c)*(n-a)/2,p=-1*Math.sin(c)*(e-r)/2+Math.cos(c)*(n-a)/2,f=d*d/(s*s)+p*p/(l*l);f>1&&(s*=Math.sqrt(f),l*=Math.sqrt(f));var g=Math.sqrt((s*s*(l*l)-s*s*(p*p)-l*l*(d*d))/(s*s*(p*p)+l*l*(d*d)));i===o&&(g*=-1),isNaN(g)&&(g=0);var y=g*s*p/l,v=g*-l*d/s,b=(e+r)/2+Math.cos(c)*y-Math.sin(c)*v,x=(n+a)/2+Math.sin(c)*y+Math.cos(c)*v,w=function(P){return Math.sqrt(P[0]*P[0]+P[1]*P[1])},S=function(P,D){return(P[0]*D[0]+P[1]*D[1])/(w(P)*w(D))},C=function(P,D){return(P[0]*D[1]<P[1]*D[0]?-1:1)*Math.acos(S(P,D))},E=C([1,0],[(d-y)/s,(p-v)/l]),R=[(d-y)/s,(p-v)/l],T=[(-1*d-y)/s,(-1*p-v)/l],$=C(R,T);return S(R,T)<=-1&&($=Math.PI),S(R,T)>=1&&($=0),o===0&&$>0&&($=$-2*Math.PI),o===1&&$<0&&($=$+2*Math.PI),[b,x,s,l,E,$,c,o]}}Ip.Path=qr,qr.prototype.className="Path",qr.prototype._attrsAffectingSize=["data"],(0,Fte._registerNode)(qr),Mte.Factory.addGetterSetter(qr,"data"),Object.defineProperty(_b,"__esModule",{value:!0}),_b.Arrow=void 0;const $b=zt,Ate=hm,IF=tt,Dte=Lt,_F=Ip;class Rc extends Ate.Line{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,r=this.points(),a=r,i=this.tension()!==0&&r.length>4;i&&(a=this.getTensionPoints());var o=this.pointerLength(),s=r.length,l,u;if(i){const p=[a[a.length-4],a[a.length-3],a[a.length-2],a[a.length-1],r[s-2],r[s-1]],f=_F.Path.calcLength(a[a.length-4],a[a.length-3],"C",p),g=_F.Path.getPointOnQuadraticBezier(Math.min(1,1-o/f),p[0],p[1],p[2],p[3],p[4],p[5]);l=r[s-2]-g.x,u=r[s-1]-g.y}else l=r[s-2]-r[s-4],u=r[s-1]-r[s-3];var c=(Math.atan2(u,l)+n)%n,d=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[s-2],r[s-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-o,d/2),e.lineTo(-o,-d/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),i?(l=(a[0]+a[2])/2-r[0],u=(a[1]+a[3])/2-r[1]):(l=r[2]-r[0],u=r[3]-r[1]),e.rotate((Math.atan2(-u,-l)+n)%n),e.moveTo(0,0),e.lineTo(-o,d/2),e.lineTo(-o,-d/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}_b.Arrow=Rc,Rc.prototype.className="Arrow",(0,Dte._registerNode)(Rc),$b.Factory.addGetterSetter(Rc,"pointerLength",10,(0,IF.getNumberValidator)()),$b.Factory.addGetterSetter(Rc,"pointerWidth",10,(0,IF.getNumberValidator)()),$b.Factory.addGetterSetter(Rc,"pointerAtBeginning",!1),$b.Factory.addGetterSetter(Rc,"pointerAtEnding",!0);var Ob={};Object.defineProperty(Ob,"__esModule",{value:!0}),Ob.Circle=void 0;const Lte=zt,zte=jr,Bte=tt,jte=Lt;class Rp extends zte.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Ob.Circle=Rp,Rp.prototype._centroid=!0,Rp.prototype.className="Circle",Rp.prototype._attrsAffectingSize=["radius"],(0,jte._registerNode)(Rp),Lte.Factory.addGetterSetter(Rp,"radius",0,(0,Bte.getNumberValidator)());var Mb={};Object.defineProperty(Mb,"__esModule",{value:!0}),Mb.Ellipse=void 0;const bN=zt,Ute=jr,RF=tt,Vte=Lt;class mu extends Ute.Shape{_sceneFunc(e){var n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Mb.Ellipse=mu,mu.prototype.className="Ellipse",mu.prototype._centroid=!0,mu.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,Vte._registerNode)(mu),bN.Factory.addComponentsGetterSetter(mu,"radius",["x","y"]),bN.Factory.addGetterSetter(mu,"radiusX",0,(0,RF.getNumberValidator)()),bN.Factory.addGetterSetter(mu,"radiusY",0,(0,RF.getNumberValidator)());var Pb={};Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.Image=void 0;const vN=ir,$c=zt,Wte=jr,Gte=Lt,fm=tt;let vs=class eV extends Wte.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),a=this.cornerRadius(),i=this.attrs.image;let o;if(i){const s=this.attrs.cropWidth,l=this.attrs.cropHeight;s&&l?o=[i,this.cropX(),this.cropY(),s,l,0,0,n,r]:o=[i,0,0,n,r]}(this.hasFill()||this.hasStroke()||a)&&(e.beginPath(),a?vN.Util.drawRoundedRectPath(e,n,r,a):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),i&&(a&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){var n=this.width(),r=this.height(),a=this.cornerRadius();e.beginPath(),a?vN.Util.drawRoundedRectPath(e,n,r,a):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){var a=vN.Util.createImageElement();a.onload=function(){var i=new eV({image:a});n(i)},a.onerror=r,a.crossOrigin="Anonymous",a.src=e}};Pb.Image=vs,vs.prototype.className="Image",(0,Gte._registerNode)(vs),$c.Factory.addGetterSetter(vs,"cornerRadius",0,(0,fm.getNumberOrArrayOfNumbersValidator)(4)),$c.Factory.addGetterSetter(vs,"image"),$c.Factory.addComponentsGetterSetter(vs,"crop",["x","y","width","height"]),$c.Factory.addGetterSetter(vs,"cropX",0,(0,fm.getNumberValidator)()),$c.Factory.addGetterSetter(vs,"cropY",0,(0,fm.getNumberValidator)()),$c.Factory.addGetterSetter(vs,"cropWidth",0,(0,fm.getNumberValidator)()),$c.Factory.addGetterSetter(vs,"cropHeight",0,(0,fm.getNumberValidator)());var $p={};Object.defineProperty($p,"__esModule",{value:!0}),$p.Tag=$p.Label=void 0;const Fb=zt,Hte=jr,qte=Np,xN=tt,$F=Lt;var OF=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Kte="Change.konva",Xte="none",wN="up",kN="right",SN="down",CN="left",Qte=OF.length;class EN extends qte.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,r,a=function(){n._sync()};for(r=0;r<Qte;r++)e.on(OF[r]+Kte,a)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),r,a,i,o,s,l,u;if(e&&n){switch(r=e.width(),a=e.height(),i=n.pointerDirection(),o=n.pointerWidth(),u=n.pointerHeight(),s=0,l=0,i){case wN:s=r/2,l=-1*u;break;case kN:s=r+o,l=a/2;break;case SN:s=r/2,l=a+u;break;case CN:s=-1*o,l=a/2;break}n.setAttrs({x:-1*s,y:-1*l,width:r,height:a}),e.setAttrs({x:-1*s,y:-1*l})}}}$p.Label=EN,EN.prototype.className="Label",(0,$F._registerNode)(EN);class Oc extends Hte.Shape{_sceneFunc(e){var n=this.width(),r=this.height(),a=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),s=this.cornerRadius();let l=0,u=0,c=0,d=0;typeof s=="number"?l=u=c=d=Math.min(s,n/2,r/2):(l=Math.min(s[0]||0,n/2,r/2),u=Math.min(s[1]||0,n/2,r/2),d=Math.min(s[2]||0,n/2,r/2),c=Math.min(s[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(l,0),a===wN&&(e.lineTo((n-i)/2,0),e.lineTo(n/2,-1*o),e.lineTo((n+i)/2,0)),e.lineTo(n-u,0),e.arc(n-u,u,u,Math.PI*3/2,0,!1),a===kN&&(e.lineTo(n,(r-o)/2),e.lineTo(n+i,r/2),e.lineTo(n,(r+o)/2)),e.lineTo(n,r-d),e.arc(n-d,r-d,d,0,Math.PI/2,!1),a===SN&&(e.lineTo((n+i)/2,r),e.lineTo(n/2,r+o),e.lineTo((n-i)/2,r)),e.lineTo(c,r),e.arc(c,r-c,c,Math.PI/2,Math.PI,!1),a===CN&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*i,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,r=this.pointerWidth(),a=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),s=this.height();return i===wN?(n-=a,s+=a):i===SN?s+=a:i===CN?(e-=r*1.5,o+=r):i===kN&&(o+=r*1.5),{x:e,y:n,width:o,height:s}}}$p.Tag=Oc,Oc.prototype.className="Tag",(0,$F._registerNode)(Oc),Fb.Factory.addGetterSetter(Oc,"pointerDirection",Xte),Fb.Factory.addGetterSetter(Oc,"pointerWidth",0,(0,xN.getNumberValidator)()),Fb.Factory.addGetterSetter(Oc,"pointerHeight",0,(0,xN.getNumberValidator)()),Fb.Factory.addGetterSetter(Oc,"cornerRadius",0,(0,xN.getNumberOrArrayOfNumbersValidator)(4));var mm={};Object.defineProperty(mm,"__esModule",{value:!0}),mm.Rect=void 0;const Yte=zt,Zte=jr,Jte=Lt,ene=ir,tne=tt;class Ab extends Zte.Shape{_sceneFunc(e){var n=this.cornerRadius(),r=this.width(),a=this.height();e.beginPath(),n?ene.Util.drawRoundedRectPath(e,r,a,n):e.rect(0,0,r,a),e.closePath(),e.fillStrokeShape(this)}}mm.Rect=Ab,Ab.prototype.className="Rect",(0,Jte._registerNode)(Ab),Yte.Factory.addGetterSetter(Ab,"cornerRadius",0,(0,tne.getNumberOrArrayOfNumbersValidator)(4));var Db={};Object.defineProperty(Db,"__esModule",{value:!0}),Db.RegularPolygon=void 0;const MF=zt,nne=jr,PF=tt,rne=Lt;class Mc extends nne.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(var a=0;a<e;a++)r.push({x:n*Math.sin(a*2*Math.PI/e),y:-1*n*Math.cos(a*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();var n=e[0].x,r=e[0].y,a=e[0].x,i=e[0].y;return e.forEach(o=>{n=Math.min(n,o.x),r=Math.max(r,o.x),a=Math.min(a,o.y),i=Math.max(i,o.y)}),{x:n,y:a,width:r-n,height:i-a}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Db.RegularPolygon=Mc,Mc.prototype.className="RegularPolygon",Mc.prototype._centroid=!0,Mc.prototype._attrsAffectingSize=["radius"],(0,rne._registerNode)(Mc),MF.Factory.addGetterSetter(Mc,"radius",0,(0,PF.getNumberValidator)()),MF.Factory.addGetterSetter(Mc,"sides",0,(0,PF.getNumberValidator)());var Lb={};Object.defineProperty(Lb,"__esModule",{value:!0}),Lb.Ring=void 0;const FF=zt,ane=jr,AF=tt,ine=Lt;var DF=Math.PI*2;class Pc extends ane.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,DF,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),DF,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Lb.Ring=Pc,Pc.prototype.className="Ring",Pc.prototype._centroid=!0,Pc.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,ine._registerNode)(Pc),FF.Factory.addGetterSetter(Pc,"innerRadius",0,(0,AF.getNumberValidator)()),FF.Factory.addGetterSetter(Pc,"outerRadius",0,(0,AF.getNumberValidator)());var zb={};Object.defineProperty(zb,"__esModule",{value:!0}),zb.Sprite=void 0;const Fc=zt,one=jr,sne=Tp,LF=tt,lne=Lt;class xs extends one.Shape{constructor(e){super(e),this._updated=!0,this.anim=new sne.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),r=this.frameIndex(),a=r*4,i=this.animations()[n],o=this.frameOffsets(),s=i[a+0],l=i[a+1],u=i[a+2],c=i[a+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,u,c),e.closePath(),e.fillStrokeShape(this)),d)if(o){var p=o[n],f=r*2;e.drawImage(d,s,l,u,c,p[f+0],p[f+1],u,c)}else e.drawImage(d,s,l,u,c,0,0,u,c)}_hitFunc(e){var n=this.animation(),r=this.frameIndex(),a=r*4,i=this.animations()[n],o=this.frameOffsets(),s=i[a+2],l=i[a+3];if(e.beginPath(),o){var u=o[n],c=r*2;e.rect(u[c+0],u[c+1],s,l)}else e.rect(0,0,s,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),r=this.animations(),a=r[n],i=a.length/4;e<i-1?this.frameIndex(e+1):this.frameIndex(0)}}zb.Sprite=xs,xs.prototype.className="Sprite",(0,lne._registerNode)(xs),Fc.Factory.addGetterSetter(xs,"animation"),Fc.Factory.addGetterSetter(xs,"animations"),Fc.Factory.addGetterSetter(xs,"frameOffsets"),Fc.Factory.addGetterSetter(xs,"image"),Fc.Factory.addGetterSetter(xs,"frameIndex",0,(0,LF.getNumberValidator)()),Fc.Factory.addGetterSetter(xs,"frameRate",17,(0,LF.getNumberValidator)()),Fc.Factory.backCompat(xs,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Bb={};Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.Star=void 0;const NN=zt,une=jr,TN=tt,cne=Lt;class gu extends une.Shape{_sceneFunc(e){var n=this.innerRadius(),r=this.outerRadius(),a=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var i=1;i<a*2;i++){var o=i%2===0?r:n,s=o*Math.sin(i*Math.PI/a),l=-1*o*Math.cos(i*Math.PI/a);e.lineTo(s,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Bb.Star=gu,gu.prototype.className="Star",gu.prototype._centroid=!0,gu.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,cne._registerNode)(gu),NN.Factory.addGetterSetter(gu,"numPoints",5,(0,TN.getNumberValidator)()),NN.Factory.addGetterSetter(gu,"innerRadius",0,(0,TN.getNumberValidator)()),NN.Factory.addGetterSetter(gu,"outerRadius",0,(0,TN.getNumberValidator)());var Ac={};Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.Text=Ac.stringToArray=void 0;const IN=ir,za=zt,dne=jr,yu=tt,pne=Lt;function zF(t){return Array.from(t)}Ac.stringToArray=zF;var Op="auto",hne="center",BF="inherit",gm="justify",fne="Change.konva",mne="2d",jF="-",UF="left",gne="text",yne="Text",bne="top",vne="bottom",VF="middle",WF="normal",xne="px ",jb=" ",wne="right",GF="rtl",kne="word",Sne="char",HF="none",_N="\u2026",qF=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Cne=qF.length;function Ene(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}var RN;function $N(){return RN||(RN=IN.Util.createCanvasElement().getContext(mne),RN)}function Nne(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Tne(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Ine(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class fr extends dne.Shape{constructor(e){super(Ine(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<Cne;n++)this.on(qF[n]+fne,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,r=n.length;if(this.text()){var a=this.padding(),i=this.fontSize(),o=this.lineHeight()*i,s=this.verticalAlign(),l=this.direction(),u=0,c=this.align(),d=this.getWidth(),p=this.letterSpacing(),f=this.fill(),g=this.textDecoration(),y=g.indexOf("underline")!==-1,v=g.indexOf("line-through")!==-1,b;l=l===BF?e.direction:l;var x=0,x=o/2,w=0,S=0;for(l===GF&&e.setAttr("direction",l),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",VF),e.setAttr("textAlign",UF),s===VF?u=(this.getHeight()-r*o-a*2)/2:s===vne&&(u=this.getHeight()-r*o-a*2),e.translate(a,u+a),b=0;b<r;b++){var w=0,S=0,C=n[b],E=C.text,R=C.width,T=C.lastInParagraph,$,P,D;if(e.save(),c===wne?w+=d-R-a*2:c===hne&&(w+=(d-R-a*2)/2),y){e.save(),e.beginPath(),e.moveTo(w,x+S+Math.round(i/2)),$=E.split(" ").length-1,P=$===0,D=c===gm&&!T?d-a*2:R,e.lineTo(w+Math.round(D),x+S+Math.round(i/2)),e.lineWidth=i/15;const H=this._getLinearGradient();e.strokeStyle=H||f,e.stroke(),e.restore()}if(v){e.save(),e.beginPath(),e.moveTo(w,x+S),$=E.split(" ").length-1,P=$===0,D=c===gm&&T&&!P?d-a*2:R,e.lineTo(w+Math.round(D),x+S),e.lineWidth=i/15;const H=this._getLinearGradient();e.strokeStyle=H||f,e.stroke(),e.restore()}if(l!==GF&&(p!==0||c===gm)){$=E.split(" ").length-1;for(var B=zF(E),z=0;z<B.length;z++){var q=B[z];q===" "&&!T&&c===gm&&(w+=(d-a*2-R)/$),this._partialTextX=w,this._partialTextY=x+S,this._partialText=q,e.fillStrokeShape(this),w+=this.measureSize(q).width+p}}else p!==0&&e.setAttr("letterSpacing",`${p}px`),this._partialTextX=w,this._partialTextY=x+S,this._partialText=E,e.fillStrokeShape(this);e.restore(),r>1&&(x+=o)}}}_hitFunc(e){var n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=IN.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(gne,n),this}getWidth(){var e=this.attrs.width===Op||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Op||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return IN.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=$N(),r=this.fontSize(),a;return n.save(),n.font=this._getContextFont(),a=n.measureText(e),n.restore(),{width:a.width,height:r}}_getContextFont(){return this.fontStyle()+jb+this.fontVariant()+jb+(this.fontSize()+xne)+Ene(this.fontFamily())}_addTextLine(e){this.align()===gm&&(e=e.trim());var n=this._getTextWidth(e);return this.textArr.push({text:e,width:n,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),r=e.length;return $N().measureText(e).width+(r?n*(r-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),r=0,a=this.lineHeight()*n,i=this.attrs.width,o=this.attrs.height,s=i!==Op&&i!==void 0,l=o!==Op&&o!==void 0,u=this.padding(),c=i-u*2,d=o-u*2,p=0,f=this.wrap(),g=f!==HF,y=f!==Sne&&g,v=this.ellipsis();this.textArr=[],$N().font=this._getContextFont();for(var b=v?this._getTextWidth(_N):0,x=0,w=e.length;x<w;++x){var S=e[x],C=this._getTextWidth(S);if(s&&C>c)for(;S.length>0;){for(var E=0,R=S.length,T="",$=0;E<R;){var P=E+R>>>1,D=S.slice(0,P+1),B=this._getTextWidth(D)+b;B<=c?(E=P+1,T=D,$=B):R=P}if(T){if(y){var z,q=S[T.length],Y=q===jb||q===jF;Y&&$<=c?z=T.length:z=Math.max(T.lastIndexOf(jb),T.lastIndexOf(jF))+1,z>0&&(E=z,T=T.slice(0,E),$=this._getTextWidth(T))}T=T.trimRight(),this._addTextLine(T),r=Math.max(r,$),p+=a;var Z=this._shouldHandleEllipsis(p);if(Z){this._tryToAddEllipsisToLastLine();break}if(S=S.slice(E),S=S.trimLeft(),S.length>0&&(C=this._getTextWidth(S),C<=c)){this._addTextLine(S),p+=a,r=Math.max(r,C);break}}else break}else this._addTextLine(S),p+=a,r=Math.max(r,C),this._shouldHandleEllipsis(p)&&x<w-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&p+a>d)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){var n=+this.fontSize(),r=this.lineHeight()*n,a=this.attrs.height,i=a!==Op&&a!==void 0,o=this.padding(),s=a-o*2,l=this.wrap(),u=l!==HF;return!u||i&&e+r>s}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==Op&&e!==void 0,r=this.padding(),a=e-r*2,i=this.ellipsis(),o=this.textArr[this.textArr.length-1];if(!(!o||!i)){if(n){var s=this._getTextWidth(o.text+_N)<a;s||(o.text=o.text.slice(0,o.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+_N)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}}Ac.Text=fr,fr.prototype._fillFunc=Nne,fr.prototype._strokeFunc=Tne,fr.prototype.className=yne,fr.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,pne._registerNode)(fr),za.Factory.overWriteSetter(fr,"width",(0,yu.getNumberOrAutoValidator)()),za.Factory.overWriteSetter(fr,"height",(0,yu.getNumberOrAutoValidator)()),za.Factory.addGetterSetter(fr,"direction",BF),za.Factory.addGetterSetter(fr,"fontFamily","Arial"),za.Factory.addGetterSetter(fr,"fontSize",12,(0,yu.getNumberValidator)()),za.Factory.addGetterSetter(fr,"fontStyle",WF),za.Factory.addGetterSetter(fr,"fontVariant",WF),za.Factory.addGetterSetter(fr,"padding",0,(0,yu.getNumberValidator)()),za.Factory.addGetterSetter(fr,"align",UF),za.Factory.addGetterSetter(fr,"verticalAlign",bne),za.Factory.addGetterSetter(fr,"lineHeight",1,(0,yu.getNumberValidator)()),za.Factory.addGetterSetter(fr,"wrap",kne),za.Factory.addGetterSetter(fr,"ellipsis",!1,(0,yu.getBooleanValidator)()),za.Factory.addGetterSetter(fr,"letterSpacing",0,(0,yu.getNumberValidator)()),za.Factory.addGetterSetter(fr,"text","",(0,yu.getStringValidator)()),za.Factory.addGetterSetter(fr,"textDecoration","");var Ub={};Object.defineProperty(Ub,"__esModule",{value:!0}),Ub.TextPath=void 0;const ON=ir,Wo=zt,_ne=jr,ym=Ip,MN=Ac,KF=tt,Rne=Lt;var $ne="",XF="normal";function QF(t){t.fillText(this.partialText,0,0)}function YF(t){t.strokeText(this.partialText,0,0)}class Ur extends _ne.Shape{constructor(e){super(e),this.dummyCanvas=ON.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return ym.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:ym.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=ym.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),r=this.fill(),a=this.fontSize(),i=this.glyphInfo;n==="underline"&&e.beginPath();for(var o=0;o<i.length;o++){e.save();var s=i[o].p0;e.translate(s.x,s.y),e.rotate(i[o].rotation),this.partialText=i[o].text,e.fillStrokeShape(this),n==="underline"&&(o===0&&e.moveTo(0,a/2+1),e.lineTo(a,a/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=a/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var r=n[0].p0;e.moveTo(r.x,r.y)}for(var a=0;a<n.length;a++){var i=n[a].p1;e.lineTo(i.x,i.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return ON.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return MN.Text.prototype.setText.call(this,e)}_getContextFont(){return MN.Text.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,r=n.getContext("2d");r.save(),r.font=this._getContextFont();var a=r.measureText(e);return r.restore(),{width:a.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),a=this.align(),i=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let s=0;a==="center"&&(s=Math.max(0,this.pathLength/2-o/2)),a==="right"&&(s=Math.max(0,this.pathLength-o));const l=(0,MN.stringToArray)(this.text());let u=s;for(var c=0;c<l.length;c++){const d=this._getPointAtLength(u);if(!d)return;let p=this._getTextSize(l[c]).width+r;if(l[c]===" "&&a==="justify"){const x=this.text().split(" ").length-1;p+=(this.pathLength-o)/x}const f=this._getPointAtLength(u+p);if(!f)return;const g=ym.Path.getLineLength(d.x,d.y,f.x,f.y);let y=0;if(i)try{y=i(l[c-1],l[c])*this.fontSize()}catch{y=0}d.x+=y,f.x+=y,this.textWidth+=y;const v=ym.Path.getPointOnLine(y+g/2,d.x,d.y,f.x,f.y),b=Math.atan2(f.y-d.y,f.x-d.x);this.glyphInfo.push({transposeX:v.x,transposeY:v.y,text:l[c],rotation:b,p0:d,p1:f}),u+=p}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(c){e.push(c.p0.x),e.push(c.p0.y),e.push(c.p1.x),e.push(c.p1.y)});for(var n=e[0]||0,r=e[0]||0,a=e[1]||0,i=e[1]||0,o,s,l=0;l<e.length/2;l++)o=e[l*2],s=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),a=Math.min(a,s),i=Math.max(i,s);var u=this.fontSize();return{x:n-u/2,y:a-u/2,width:r-n+u,height:i-a+u}}destroy(){return ON.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Ub.TextPath=Ur,Ur.prototype._fillFunc=QF,Ur.prototype._strokeFunc=YF,Ur.prototype._fillFuncHit=QF,Ur.prototype._strokeFuncHit=YF,Ur.prototype.className="TextPath",Ur.prototype._attrsAffectingSize=["text","fontSize","data"],(0,Rne._registerNode)(Ur),Wo.Factory.addGetterSetter(Ur,"data"),Wo.Factory.addGetterSetter(Ur,"fontFamily","Arial"),Wo.Factory.addGetterSetter(Ur,"fontSize",12,(0,KF.getNumberValidator)()),Wo.Factory.addGetterSetter(Ur,"fontStyle",XF),Wo.Factory.addGetterSetter(Ur,"align","left"),Wo.Factory.addGetterSetter(Ur,"letterSpacing",0,(0,KF.getNumberValidator)()),Wo.Factory.addGetterSetter(Ur,"textBaseline","middle"),Wo.Factory.addGetterSetter(Ur,"fontVariant",XF),Wo.Factory.addGetterSetter(Ur,"text",$ne),Wo.Factory.addGetterSetter(Ur,"textDecoration",null),Wo.Factory.addGetterSetter(Ur,"kerningFunc",null);var Vb={};Object.defineProperty(Vb,"__esModule",{value:!0}),Vb.Transformer=void 0;const kn=ir,dn=zt,ZF=Kn,One=jr,Mne=mm,JF=Np,Go=Lt,bu=tt,Pne=Lt;var e8="tr-konva",Fne=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${e8}`).join(" "),t8="nodesRect",Ane=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Dne={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Lne="ontouchstart"in Go.Konva._global;function zne(t,e,n){if(t==="rotater")return n;e+=kn.Util.degToRad(Dne[t]||0);var r=(kn.Util.radToDeg(e)%360+360)%360;return kn.Util._inRange(r,315+22.5,360)||kn.Util._inRange(r,0,22.5)?"ns-resize":kn.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":kn.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":kn.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":kn.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":kn.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":kn.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":kn.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(kn.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}var Wb=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],n8=1e8;function Bne(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function r8(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),a=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:r,y:a}}function jne(t,e){const n=Bne(t);return r8(t,e,n)}function Une(t,e,n){let r=e;for(let a=0;a<t.length;a++){const i=Go.Konva.getAngle(t[a]),o=Math.abs(i-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<n&&(r=i)}return r}let Yt=class extends JF.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Fne,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return kn.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return e8+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(r=>r.isAncestorOf(this)?(kn.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const a=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},i=r._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");r.on(i,a),r.on(Ane.map(o=>o+`.${this._getEventNamespace()}`).join(" "),a),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,a),this._proxyDrag(r)}),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,n=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(n,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!e)return;const r=t.getAbsolutePosition(),a=r.x-e.x,i=r.y-e.y;this.nodes().forEach(o=>{if(o===t||o.isDragging())return;const s=o.getAbsolutePosition();o.setAbsolutePosition({x:s.x+a,y:s.y+i}),o.startDrag(n)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(t8),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(t8,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),n){var r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=t.getAbsoluteScale(n),i=t.getAbsolutePosition(n),o=r.x*a.x-t.offsetX()*a.x,s=r.y*a.y-t.offsetY()*a.y;const l=(Go.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),u={x:i.x+o*Math.cos(l)+s*Math.sin(-l),y:i.y+s*Math.cos(l)+o*Math.sin(l),width:r.width*a.x,height:r.height*a.y,rotation:l};return r8(u,-Go.Konva.getAngle(e),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-n8,y:-n8,width:0,height:0,rotation:0};const e=[];this.nodes().map(l=>{const u=l.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var c=[{x:u.x,y:u.y},{x:u.x+u.width,y:u.y},{x:u.x+u.width,y:u.y+u.height},{x:u.x,y:u.y+u.height}],d=l.getAbsoluteTransform();c.forEach(function(p){var f=d.point(p);e.push(f)})});const n=new kn.Transform;n.rotate(-Go.Konva.getAngle(this.rotation()));var r=1/0,a=1/0,i=-1/0,o=-1/0;e.forEach(function(l){var u=n.point(l);r===void 0&&(r=i=u.x,a=o=u.y),r=Math.min(r,u.x),a=Math.min(a,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}),n.invert();const s=n.point({x:r,y:a});return{x:s.x,y:s.y,width:i-r,height:o-a,rotation:Go.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Wb.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){var e=new Mne.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Lne?10:"auto"}),n=this;e.on("mousedown touchstart",function(r){n._handleMouseDown(r)}),e.on("dragstart",r=>{e.stopDrag(),r.cancelBubble=!0}),e.on("dragend",r=>{r.cancelBubble=!0}),e.on("mouseenter",()=>{var r=Go.Konva.getAngle(this.rotation()),a=this.rotateAnchorCursor(),i=zne(t,r,a);e.getStage().content&&(e.getStage().content.style.cursor=i),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){var t=new One.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(e,n){var r=n.getParent(),a=r.padding();e.beginPath(),e.rect(-a,-a,n.width()+a*2,n.height()+a*2),e.moveTo(n.width()/2,-a),r.rotateEnabled()&&r.rotateLineVisible()&&e.lineTo(n.width()/2,-r.rotateAnchorOffset()*kn.Util._sign(n.height())-a),e.fillStrokeShape(n)},hitFunc:(e,n)=>{if(this.shouldOverdrawWholeArea()){var r=this.padding();e.beginPath(),e.rect(-r,-r,n.width()+r*2,n.height()+r*2),e.fillStrokeShape(n)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,r=e.height,a=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/a),this.cos=Math.abs(n/a),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var i=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-i.x,y:o.y-i.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(s=>{s._fire("transformstart",{evt:t.evt,target:s})})}_handleMouseMove(t){var e,n,r,a=this.findOne("."+this._movingAnchorName),i=a.getStage();i.setPointersPositions(t);const o=i.getPointerPosition();let s={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const l=a.getAbsolutePosition();this.anchorDragBoundFunc()&&(s=this.anchorDragBoundFunc()(l,s,t)),a.setAbsolutePosition(s);const u=a.getAbsolutePosition();if(!(l.x===u.x&&l.y===u.y)){if(this._movingAnchorName==="rotater"){var c=this._getNodeRect();e=a.x()-c.width/2,n=-a.y()+c.height/2;let B=Math.atan2(-n,e)+Math.PI/2;c.height<0&&(B-=Math.PI);var d=Go.Konva.getAngle(this.rotation());const z=d+B,q=Go.Konva.getAngle(this.rotationSnapTolerance()),Y=Une(this.rotationSnaps(),z,q)-c.rotation,Z=jne(c,Y);this._fitNodesInto(Z,t);return}var p=this.shiftBehavior(),f;p==="inverted"?f=this.keepRatio()&&!t.shiftKey:p==="none"?f=this.keepRatio():f=this.keepRatio()||t.shiftKey;var x=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(g.x-a.x(),2)+Math.pow(g.y-a.y(),2));var y=this.findOne(".top-left").x()>g.x?-1:1,v=this.findOne(".top-left").y()>g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".top-left").x(g.x-e),this.findOne(".top-left").y(g.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(a.y());else if(this._movingAnchorName==="top-right"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(a.x()-g.x,2)+Math.pow(g.y-a.y(),2));var y=this.findOne(".top-right").x()<g.x?-1:1,v=this.findOne(".top-right").y()>g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".top-right").x(g.x+e),this.findOne(".top-right").y(g.y-n)}var b=a.position();this.findOne(".top-left").y(b.y),this.findOne(".bottom-right").x(b.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(a.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(a.x());else if(this._movingAnchorName==="bottom-left"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(g.x-a.x(),2)+Math.pow(a.y()-g.y,2));var y=g.x<a.x()?-1:1,v=a.y()<g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,a.x(g.x-e),a.y(g.y+n)}b=a.position(),this.findOne(".top-left").x(b.x),this.findOne(".bottom-right").y(b.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(a.y());else if(this._movingAnchorName==="bottom-right"){if(f){var g=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(a.x()-g.x,2)+Math.pow(a.y()-g.y,2));var y=this.findOne(".bottom-right").x()<g.x?-1:1,v=this.findOne(".bottom-right").y()<g.y?-1:1;e=r*this.cos*y,n=r*this.sin*v,this.findOne(".bottom-right").x(g.x+e),this.findOne(".bottom-right").y(g.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var x=this.centeredScaling()||t.altKey;if(x){var w=this.findOne(".top-left"),S=this.findOne(".bottom-right"),C=w.x(),E=w.y(),R=this.getWidth()-S.x(),T=this.getHeight()-S.y();S.move({x:-C,y:-E}),w.move({x:R,y:T})}var $=this.findOne(".top-left").getAbsolutePosition();e=$.x,n=$.y;var P=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),D=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:P,height:D,rotation:Go.Konva.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach(n=>{n._fire("transformend",{evt:t,target:n})}),this._movingAnchorName=null}}_fitNodesInto(t,e){var n=this._getNodeRect();const r=1;if(kn.Util._inRange(t.width,-this.padding()*2-r,r)){this.update();return}if(kn.Util._inRange(t.height,-this.padding()*2-r,r)){this.update();return}var a=new kn.Transform;if(a.rotate(Go.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const d=a.point({x:-this.padding()*2,y:0});t.x+=d.x,t.y+=d.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const d=a.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const d=a.point({x:0,y:-this.padding()*2});t.x+=d.x,t.y+=d.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const d=a.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const d=this.boundBoxFunc()(n,t);d?t=d:kn.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const i=1e7,o=new kn.Transform;o.translate(n.x,n.y),o.rotate(n.rotation),o.scale(n.width/i,n.height/i);const s=new kn.Transform,l=t.width/i,u=t.height/i;this.flipEnabled()===!1?(s.translate(t.x,t.y),s.rotate(t.rotation),s.translate(t.width<0?t.width:0,t.height<0?t.height:0),s.scale(Math.abs(l),Math.abs(u))):(s.translate(t.x,t.y),s.rotate(t.rotation),s.scale(l,u));const c=s.multiply(o.invert());this._nodes.forEach(d=>{var p;const f=d.getParent().getAbsoluteTransform(),g=d.getTransform().copy();g.translate(d.offsetX(),d.offsetY());const y=new kn.Transform;y.multiply(f.copy().invert()).multiply(c).multiply(f).multiply(g);const v=y.decompose();d.setAttrs(v),this._fire("transform",{evt:e,target:d}),d._fire("transform",{evt:e,target:d}),(p=d.getLayer())===null||p===void 0||p.batchDraw()}),this.rotation(kn.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t,e=this._getNodeRect();this.rotation(kn.Util._getRotation(e.rotation));var n=e.width,r=e.height,a=this.enabledAnchors(),i=this.resizeEnabled(),o=this.padding(),s=this.anchorSize();const l=this.find("._anchor");l.forEach(c=>{c.setAttrs({width:s,height:s,offsetX:s/2,offsetY:s/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:s/2+o,offsetY:s/2+o,visible:i&&a.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:s/2+o,visible:i&&a.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:s/2-o,offsetY:s/2+o,visible:i&&a.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:s/2+o,visible:i&&a.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:r/2,offsetX:s/2-o,visible:i&&a.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:s/2+o,offsetY:s/2-o,visible:i&&a.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:r,offsetY:s/2-o,visible:i&&a.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:r,offsetX:s/2-o,offsetY:s/2-o,visible:i&&a.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*kn.Util._sign(r)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const u=this.anchorStyleFunc();u&&l.forEach(c=>{u(c)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),JF.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return ZF.Node.prototype.toObject.call(this)}clone(t){var e=ZF.Node.prototype.clone.call(this,t);return e}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Vb.Transformer=Yt;function Vne(t){return t instanceof Array||kn.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){Wb.indexOf(e)===-1&&kn.Util.warn("Unknown anchor name: "+e+". Available names are: "+Wb.join(", "))}),t||[]}Yt.prototype.className="Transformer",(0,Pne._registerNode)(Yt),dn.Factory.addGetterSetter(Yt,"enabledAnchors",Wb,Vne),dn.Factory.addGetterSetter(Yt,"flipEnabled",!0,(0,bu.getBooleanValidator)()),dn.Factory.addGetterSetter(Yt,"resizeEnabled",!0),dn.Factory.addGetterSetter(Yt,"anchorSize",10,(0,bu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"rotateEnabled",!0),dn.Factory.addGetterSetter(Yt,"rotateLineVisible",!0),dn.Factory.addGetterSetter(Yt,"rotationSnaps",[]),dn.Factory.addGetterSetter(Yt,"rotateAnchorOffset",50,(0,bu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"rotateAnchorCursor","crosshair"),dn.Factory.addGetterSetter(Yt,"rotationSnapTolerance",5,(0,bu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"borderEnabled",!0),dn.Factory.addGetterSetter(Yt,"anchorStroke","rgb(0, 161, 255)"),dn.Factory.addGetterSetter(Yt,"anchorStrokeWidth",1,(0,bu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"anchorFill","white"),dn.Factory.addGetterSetter(Yt,"anchorCornerRadius",0,(0,bu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"borderStroke","rgb(0, 161, 255)"),dn.Factory.addGetterSetter(Yt,"borderStrokeWidth",1,(0,bu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"borderDash"),dn.Factory.addGetterSetter(Yt,"keepRatio",!0),dn.Factory.addGetterSetter(Yt,"shiftBehavior","default"),dn.Factory.addGetterSetter(Yt,"centeredScaling",!1),dn.Factory.addGetterSetter(Yt,"ignoreStroke",!1),dn.Factory.addGetterSetter(Yt,"padding",0,(0,bu.getNumberValidator)()),dn.Factory.addGetterSetter(Yt,"node"),dn.Factory.addGetterSetter(Yt,"nodes"),dn.Factory.addGetterSetter(Yt,"boundBoxFunc"),dn.Factory.addGetterSetter(Yt,"anchorDragBoundFunc"),dn.Factory.addGetterSetter(Yt,"anchorStyleFunc"),dn.Factory.addGetterSetter(Yt,"shouldOverdrawWholeArea",!1),dn.Factory.addGetterSetter(Yt,"useSingleNodeRotation",!0),dn.Factory.backCompat(Yt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Gb={};Object.defineProperty(Gb,"__esModule",{value:!0}),Gb.Wedge=void 0;const Hb=zt,Wne=jr,Gne=Lt,a8=tt,Hne=Lt;class cl extends Wne.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Gne.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Gb.Wedge=cl,cl.prototype.className="Wedge",cl.prototype._centroid=!0,cl.prototype._attrsAffectingSize=["radius"],(0,Hne._registerNode)(cl),Hb.Factory.addGetterSetter(cl,"radius",0,(0,a8.getNumberValidator)()),Hb.Factory.addGetterSetter(cl,"angle",0,(0,a8.getNumberValidator)()),Hb.Factory.addGetterSetter(cl,"clockwise",!1),Hb.Factory.backCompat(cl,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var qb={};Object.defineProperty(qb,"__esModule",{value:!0}),qb.Blur=void 0;const i8=zt,qne=Kn,Kne=tt;function o8(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var Xne=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Qne=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Yne(t,e){var n=t.data,r=t.width,a=t.height,i,o,s,l,u,c,d,p,f,g,y,v,b,x,w,S,C,E,R,T,$,P,D,B,z=e+e+1,q=r-1,Y=a-1,Z=e+1,H=Z*(Z+1)/2,L=new o8,Q=null,J=L,te=null,oe=null,he=Xne[e],ae=Qne[e];for(s=1;s<z;s++)J=J.next=new o8,s===Z&&(Q=J);for(J.next=L,d=c=0,o=0;o<a;o++){for(S=C=E=R=p=f=g=y=0,v=Z*(T=n[c]),b=Z*($=n[c+1]),x=Z*(P=n[c+2]),w=Z*(D=n[c+3]),p+=H*T,f+=H*$,g+=H*P,y+=H*D,J=L,s=0;s<Z;s++)J.r=T,J.g=$,J.b=P,J.a=D,J=J.next;for(s=1;s<Z;s++)l=c+((q<s?q:s)<<2),p+=(J.r=T=n[l])*(B=Z-s),f+=(J.g=$=n[l+1])*B,g+=(J.b=P=n[l+2])*B,y+=(J.a=D=n[l+3])*B,S+=T,C+=$,E+=P,R+=D,J=J.next;for(te=L,oe=Q,i=0;i<r;i++)n[c+3]=D=y*he>>ae,D!==0?(D=255/D,n[c]=(p*he>>ae)*D,n[c+1]=(f*he>>ae)*D,n[c+2]=(g*he>>ae)*D):n[c]=n[c+1]=n[c+2]=0,p-=v,f-=b,g-=x,y-=w,v-=te.r,b-=te.g,x-=te.b,w-=te.a,l=d+((l=i+e+1)<q?l:q)<<2,S+=te.r=n[l],C+=te.g=n[l+1],E+=te.b=n[l+2],R+=te.a=n[l+3],p+=S,f+=C,g+=E,y+=R,te=te.next,v+=T=oe.r,b+=$=oe.g,x+=P=oe.b,w+=D=oe.a,S-=T,C-=$,E-=P,R-=D,oe=oe.next,c+=4;d+=r}for(i=0;i<r;i++){for(C=E=R=S=f=g=y=p=0,c=i<<2,v=Z*(T=n[c]),b=Z*($=n[c+1]),x=Z*(P=n[c+2]),w=Z*(D=n[c+3]),p+=H*T,f+=H*$,g+=H*P,y+=H*D,J=L,s=0;s<Z;s++)J.r=T,J.g=$,J.b=P,J.a=D,J=J.next;for(u=r,s=1;s<=e;s++)c=u+i<<2,p+=(J.r=T=n[c])*(B=Z-s),f+=(J.g=$=n[c+1])*B,g+=(J.b=P=n[c+2])*B,y+=(J.a=D=n[c+3])*B,S+=T,C+=$,E+=P,R+=D,J=J.next,s<Y&&(u+=r);for(c=i,te=L,oe=Q,o=0;o<a;o++)l=c<<2,n[l+3]=D=y*he>>ae,D>0?(D=255/D,n[l]=(p*he>>ae)*D,n[l+1]=(f*he>>ae)*D,n[l+2]=(g*he>>ae)*D):n[l]=n[l+1]=n[l+2]=0,p-=v,f-=b,g-=x,y-=w,v-=te.r,b-=te.g,x-=te.b,w-=te.a,l=i+((l=o+Z)<Y?l:Y)*r<<2,p+=S+=te.r=n[l],f+=C+=te.g=n[l+1],g+=E+=te.b=n[l+2],y+=R+=te.a=n[l+3],te=te.next,v+=T=oe.r,b+=$=oe.g,x+=P=oe.b,w+=D=oe.a,S-=T,C-=$,E-=P,R-=D,oe=oe.next,c+=r}}const Zne=function(t){var e=Math.round(this.blurRadius());e>0&&Yne(t,e)};qb.Blur=Zne,i8.Factory.addGetterSetter(qne.Node,"blurRadius",0,(0,Kne.getNumberValidator)(),i8.Factory.afterSetFilter);var Kb={};Object.defineProperty(Kb,"__esModule",{value:!0}),Kb.Brighten=void 0;const s8=zt,Jne=Kn,ere=tt,tre=function(t){var e=this.brightness()*255,n=t.data,r=n.length,a;for(a=0;a<r;a+=4)n[a]+=e,n[a+1]+=e,n[a+2]+=e};Kb.Brighten=tre,s8.Factory.addGetterSetter(Jne.Node,"brightness",0,(0,ere.getNumberValidator)(),s8.Factory.afterSetFilter);var Xb={};Object.defineProperty(Xb,"__esModule",{value:!0}),Xb.Contrast=void 0;const l8=zt,nre=Kn,rre=tt,are=function(t){var e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length,a=150,i=150,o=150,s;for(s=0;s<r;s+=4)a=n[s],i=n[s+1],o=n[s+2],a/=255,a-=.5,a*=e,a+=.5,a*=255,i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,a=a<0?0:a>255?255:a,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,n[s]=a,n[s+1]=i,n[s+2]=o};Xb.Contrast=are,l8.Factory.addGetterSetter(nre.Node,"contrast",0,(0,rre.getNumberValidator)(),l8.Factory.afterSetFilter);var Qb={};Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.Emboss=void 0;const vu=zt,Yb=Kn,ire=ir,u8=tt,ore=function(t){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),a=this.embossBlend(),i=0,o=0,s=t.data,l=t.width,u=t.height,c=l*4,d=u;switch(r){case"top-left":i=-1,o=-1;break;case"top":i=-1,o=0;break;case"top-right":i=-1,o=1;break;case"right":i=0,o=1;break;case"bottom-right":i=1,o=1;break;case"bottom":i=1,o=0;break;case"bottom-left":i=1,o=-1;break;case"left":i=0,o=-1;break;default:ire.Util.error("Unknown emboss direction: "+r)}do{var p=(d-1)*c,f=i;d+f<1&&(f=0),d+f>u&&(f=0);var g=(d-1+f)*l*4,y=l;do{var v=p+(y-1)*4,b=o;y+b<1&&(b=0),y+b>l&&(b=0);var x=g+(y-1+b)*4,w=s[v]-s[x],S=s[v+1]-s[x+1],C=s[v+2]-s[x+2],E=w,R=E>0?E:-E,T=S>0?S:-S,$=C>0?C:-C;if(T>R&&(E=S),$>R&&(E=C),E*=e,a){var P=s[v]+E,D=s[v+1]+E,B=s[v+2]+E;s[v]=P>255?255:P<0?0:P,s[v+1]=D>255?255:D<0?0:D,s[v+2]=B>255?255:B<0?0:B}else{var z=n-E;z<0?z=0:z>255&&(z=255),s[v]=s[v+1]=s[v+2]=z}}while(--y)}while(--d)};Qb.Emboss=ore,vu.Factory.addGetterSetter(Yb.Node,"embossStrength",.5,(0,u8.getNumberValidator)(),vu.Factory.afterSetFilter),vu.Factory.addGetterSetter(Yb.Node,"embossWhiteLevel",.5,(0,u8.getNumberValidator)(),vu.Factory.afterSetFilter),vu.Factory.addGetterSetter(Yb.Node,"embossDirection","top-left",null,vu.Factory.afterSetFilter),vu.Factory.addGetterSetter(Yb.Node,"embossBlend",!1,null,vu.Factory.afterSetFilter);var Zb={};Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.Enhance=void 0;const c8=zt,sre=Kn,lre=tt;function PN(t,e,n,r,a){var i=n-e,o=a-r,s;return i===0?r+o/2:o===0?r:(s=(t-e)/i,s=o*s+r,s)}const ure=function(t){var e=t.data,n=e.length,r=e[0],a=r,i,o=e[1],s=o,l,u=e[2],c=u,d,p,f=this.enhance();if(f!==0){for(p=0;p<n;p+=4)i=e[p+0],i<r?r=i:i>a&&(a=i),l=e[p+1],l<o?o=l:l>s&&(s=l),d=e[p+2],d<u?u=d:d>c&&(c=d);a===r&&(a=255,r=0),s===o&&(s=255,o=0),c===u&&(c=255,u=0);var g,y,v,b,x,w,S,C,E;for(f>0?(y=a+f*(255-a),v=r-f*(r-0),x=s+f*(255-s),w=o-f*(o-0),C=c+f*(255-c),E=u-f*(u-0)):(g=(a+r)*.5,y=a+f*(a-g),v=r+f*(r-g),b=(s+o)*.5,x=s+f*(s-b),w=o+f*(o-b),S=(c+u)*.5,C=c+f*(c-S),E=u+f*(u-S)),p=0;p<n;p+=4)e[p+0]=PN(e[p+0],r,a,v,y),e[p+1]=PN(e[p+1],o,s,w,x),e[p+2]=PN(e[p+2],u,c,E,C)}};Zb.Enhance=ure,c8.Factory.addGetterSetter(sre.Node,"enhance",0,(0,lre.getNumberValidator)(),c8.Factory.afterSetFilter);var Jb={};Object.defineProperty(Jb,"__esModule",{value:!0}),Jb.Grayscale=void 0;const cre=function(t){var e=t.data,n=e.length,r,a;for(r=0;r<n;r+=4)a=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=a,e[r+1]=a,e[r+2]=a};Jb.Grayscale=cre;var ev={};Object.defineProperty(ev,"__esModule",{value:!0}),ev.HSL=void 0;const Mp=zt,FN=Kn,AN=tt;Mp.Factory.addGetterSetter(FN.Node,"hue",0,(0,AN.getNumberValidator)(),Mp.Factory.afterSetFilter),Mp.Factory.addGetterSetter(FN.Node,"saturation",0,(0,AN.getNumberValidator)(),Mp.Factory.afterSetFilter),Mp.Factory.addGetterSetter(FN.Node,"luminance",0,(0,AN.getNumberValidator)(),Mp.Factory.afterSetFilter);const dre=function(t){var e=t.data,n=e.length,r=1,a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=this.luminance()*127,s,l=r*a*Math.cos(i*Math.PI/180),u=r*a*Math.sin(i*Math.PI/180),c=.299*r+.701*l+.167*u,d=.587*r-.587*l+.33*u,p=.114*r-.114*l-.497*u,f=.299*r-.299*l-.328*u,g=.587*r+.413*l+.035*u,y=.114*r-.114*l+.293*u,v=.299*r-.3*l+1.25*u,b=.587*r-.586*l-1.05*u,x=.114*r+.886*l-.2*u,w,S,C,E;for(s=0;s<n;s+=4)w=e[s+0],S=e[s+1],C=e[s+2],E=e[s+3],e[s+0]=c*w+d*S+p*C+o,e[s+1]=f*w+g*S+y*C+o,e[s+2]=v*w+b*S+x*C+o,e[s+3]=E};ev.HSL=dre;var tv={};Object.defineProperty(tv,"__esModule",{value:!0}),tv.HSV=void 0;const Pp=zt,DN=Kn,LN=tt,pre=function(t){var e=t.data,n=e.length,r=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o,s=r*a*Math.cos(i*Math.PI/180),l=r*a*Math.sin(i*Math.PI/180),u=.299*r+.701*s+.167*l,c=.587*r-.587*s+.33*l,d=.114*r-.114*s-.497*l,p=.299*r-.299*s-.328*l,f=.587*r+.413*s+.035*l,g=.114*r-.114*s+.293*l,y=.299*r-.3*s+1.25*l,v=.587*r-.586*s-1.05*l,b=.114*r+.886*s-.2*l,x,w,S,C;for(o=0;o<n;o+=4)x=e[o+0],w=e[o+1],S=e[o+2],C=e[o+3],e[o+0]=u*x+c*w+d*S,e[o+1]=p*x+f*w+g*S,e[o+2]=y*x+v*w+b*S,e[o+3]=C};tv.HSV=pre,Pp.Factory.addGetterSetter(DN.Node,"hue",0,(0,LN.getNumberValidator)(),Pp.Factory.afterSetFilter),Pp.Factory.addGetterSetter(DN.Node,"saturation",0,(0,LN.getNumberValidator)(),Pp.Factory.afterSetFilter),Pp.Factory.addGetterSetter(DN.Node,"value",0,(0,LN.getNumberValidator)(),Pp.Factory.afterSetFilter);var nv={};Object.defineProperty(nv,"__esModule",{value:!0}),nv.Invert=void 0;const hre=function(t){var e=t.data,n=e.length,r;for(r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};nv.Invert=hre;var rv={};Object.defineProperty(rv,"__esModule",{value:!0}),rv.Kaleidoscope=void 0;const av=zt,d8=Kn,p8=ir,h8=tt;var fre=function(t,e,n){var r=t.data,a=e.data,i=t.width,o=t.height,s=n.polarCenterX||i/2,l=n.polarCenterY||o/2,u,c,d,p=0,f=0,g=0,y=0,v,b=Math.sqrt(s*s+l*l);c=i-s,d=o-l,v=Math.sqrt(c*c+d*d),b=v>b?v:b;var x=o,w=i,S,C,E=360/w*Math.PI/180,R,T;for(C=0;C<w;C+=1)for(R=Math.sin(C*E),T=Math.cos(C*E),S=0;S<x;S+=1)c=Math.floor(s+b*S/x*T),d=Math.floor(l+b*S/x*R),u=(d*i+c)*4,p=r[u+0],f=r[u+1],g=r[u+2],y=r[u+3],u=(C+S*i)*4,a[u+0]=p,a[u+1]=f,a[u+2]=g,a[u+3]=y},mre=function(t,e,n){var r=t.data,a=e.data,i=t.width,o=t.height,s=n.polarCenterX||i/2,l=n.polarCenterY||o/2,u,c,d,p,f,g=0,y=0,v=0,b=0,x,w=Math.sqrt(s*s+l*l);c=i-s,d=o-l,x=Math.sqrt(c*c+d*d),w=x>w?x:w;var S=o,C=i,E,R,T=n.polarRotation||0,$,P;for(c=0;c<i;c+=1)for(d=0;d<o;d+=1)p=c-s,f=d-l,E=Math.sqrt(p*p+f*f)*S/w,R=(Math.atan2(f,p)*180/Math.PI+360+T)%360,R=R*C/360,$=Math.floor(R),P=Math.floor(E),u=(P*i+$)*4,g=r[u+0],y=r[u+1],v=r[u+2],b=r[u+3],u=(d*i+c)*4,a[u+0]=g,a[u+1]=y,a[u+2]=v,a[u+3]=b};const gre=function(t){var e=t.width,n=t.height,r,a,i,o,s,l,u,c,d,p,f=Math.round(this.kaleidoscopePower()),g=Math.round(this.kaleidoscopeAngle()),y=Math.floor(e*(g%360)/360);if(!(f<1)){var v=p8.Util.createCanvasElement();v.width=e,v.height=n;var b=v.getContext("2d").getImageData(0,0,e,n);p8.Util.releaseCanvas(v),fre(t,b,{polarCenterX:e/2,polarCenterY:n/2});for(var x=e/Math.pow(2,f);x<=8;)x=x*2,f-=1;x=Math.ceil(x);var w=x,S=0,C=w,E=1;for(y+x>e&&(S=w,C=0,E=-1),a=0;a<n;a+=1)for(r=S;r!==C;r+=E)i=Math.round(r+y)%e,d=(e*a+i)*4,s=b.data[d+0],l=b.data[d+1],u=b.data[d+2],c=b.data[d+3],p=(e*a+r)*4,b.data[p+0]=s,b.data[p+1]=l,b.data[p+2]=u,b.data[p+3]=c;for(a=0;a<n;a+=1)for(w=Math.floor(x),o=0;o<f;o+=1){for(r=0;r<w+1;r+=1)d=(e*a+r)*4,s=b.data[d+0],l=b.data[d+1],u=b.data[d+2],c=b.data[d+3],p=(e*a+w*2-r-1)*4,b.data[p+0]=s,b.data[p+1]=l,b.data[p+2]=u,b.data[p+3]=c;w*=2}mre(b,t,{polarRotation:0})}};rv.Kaleidoscope=gre,av.Factory.addGetterSetter(d8.Node,"kaleidoscopePower",2,(0,h8.getNumberValidator)(),av.Factory.afterSetFilter),av.Factory.addGetterSetter(d8.Node,"kaleidoscopeAngle",0,(0,h8.getNumberValidator)(),av.Factory.afterSetFilter);var iv={};Object.defineProperty(iv,"__esModule",{value:!0}),iv.Mask=void 0;const f8=zt,yre=Kn,bre=tt;function ov(t,e,n){var r=(n*t.width+e)*4,a=[];return a.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),a}function bm(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function vre(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function xre(t,e){var n=ov(t,0,0),r=ov(t,t.width-1,0),a=ov(t,0,t.height-1),i=ov(t,t.width-1,t.height-1),o=e||10;if(bm(n,r)<o&&bm(r,i)<o&&bm(i,a)<o&&bm(a,n)<o){for(var s=vre([r,n,i,a]),l=[],u=0;u<t.width*t.height;u++){var c=bm(s,[t.data[u*4],t.data[u*4+1],t.data[u*4+2]]);l[u]=c<o?0:255}return l}}function wre(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function kre(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,g=l+p-i;if(f>=0&&f<n&&g>=0&&g<e){var y=f*e+g,v=r[d*a+p];c+=t[y]*v}}o[u]=c===255*8?255:0}return o}function Sre(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,g=l+p-i;if(f>=0&&f<n&&g>=0&&g<e){var y=f*e+g,v=r[d*a+p];c+=t[y]*v}}o[u]=c>=255*4?255:0}return o}function Cre(t,e,n){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],a=Math.round(Math.sqrt(r.length)),i=Math.floor(a/2),o=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,d=0;d<a;d++)for(var p=0;p<a;p++){var f=s+d-i,g=l+p-i;if(f>=0&&f<n&&g>=0&&g<e){var y=f*e+g,v=r[d*a+p];c+=t[y]*v}}o[u]=c}return o}const Ere=function(t){var e=this.threshold(),n=xre(t,e);return n&&(n=kre(n,t.width,t.height),n=Sre(n,t.width,t.height),n=Cre(n,t.width,t.height),wre(t,n)),t};iv.Mask=Ere,f8.Factory.addGetterSetter(yre.Node,"threshold",0,(0,bre.getNumberValidator)(),f8.Factory.afterSetFilter);var sv={};Object.defineProperty(sv,"__esModule",{value:!0}),sv.Noise=void 0;const m8=zt,Nre=Kn,Tre=tt,Ire=function(t){var e=this.noise()*255,n=t.data,r=n.length,a=e/2,i;for(i=0;i<r;i+=4)n[i+0]+=a-2*a*Math.random(),n[i+1]+=a-2*a*Math.random(),n[i+2]+=a-2*a*Math.random()};sv.Noise=Ire,m8.Factory.addGetterSetter(Nre.Node,"noise",.2,(0,Tre.getNumberValidator)(),m8.Factory.afterSetFilter);var lv={};Object.defineProperty(lv,"__esModule",{value:!0}),lv.Pixelate=void 0;const g8=zt,_re=ir,Rre=Kn,$re=tt,Ore=function(t){var e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,a,i,o,s,l,u,c,d=Math.ceil(n/e),p=Math.ceil(r/e),f,g,y,v,b,x,w,S=t.data;if(e<=0){_re.Util.error("pixelSize value can not be <= 0");return}for(b=0;b<d;b+=1)for(x=0;x<p;x+=1){for(s=0,l=0,u=0,c=0,f=b*e,g=f+e,y=x*e,v=y+e,w=0,a=f;a<g;a+=1)if(!(a>=n))for(i=y;i<v;i+=1)i>=r||(o=(n*i+a)*4,s+=S[o+0],l+=S[o+1],u+=S[o+2],c+=S[o+3],w+=1);for(s=s/w,l=l/w,u=u/w,c=c/w,a=f;a<g;a+=1)if(!(a>=n))for(i=y;i<v;i+=1)i>=r||(o=(n*i+a)*4,S[o+0]=s,S[o+1]=l,S[o+2]=u,S[o+3]=c)}};lv.Pixelate=Ore,g8.Factory.addGetterSetter(Rre.Node,"pixelSize",8,(0,$re.getNumberValidator)(),g8.Factory.afterSetFilter);var uv={};Object.defineProperty(uv,"__esModule",{value:!0}),uv.Posterize=void 0;const y8=zt,Mre=Kn,Pre=tt,Fre=function(t){var e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,a=255/e,i;for(i=0;i<r;i+=1)n[i]=Math.floor(n[i]/a)*a};uv.Posterize=Fre,y8.Factory.addGetterSetter(Mre.Node,"levels",.5,(0,Pre.getNumberValidator)(),y8.Factory.afterSetFilter);var cv={};Object.defineProperty(cv,"__esModule",{value:!0}),cv.RGB=void 0;const dv=zt,zN=Kn,Are=tt,Dre=function(t){var e=t.data,n=e.length,r=this.red(),a=this.green(),i=this.blue(),o,s;for(o=0;o<n;o+=4)s=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=s*r,e[o+1]=s*a,e[o+2]=s*i,e[o+3]=e[o+3]};cv.RGB=Dre,dv.Factory.addGetterSetter(zN.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),dv.Factory.addGetterSetter(zN.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),dv.Factory.addGetterSetter(zN.Node,"blue",0,Are.RGBComponent,dv.Factory.afterSetFilter);var pv={};Object.defineProperty(pv,"__esModule",{value:!0}),pv.RGBA=void 0;const vm=zt,hv=Kn,Lre=tt,zre=function(t){var e=t.data,n=e.length,r=this.red(),a=this.green(),i=this.blue(),o=this.alpha(),s,l;for(s=0;s<n;s+=4)l=1-o,e[s]=r*o+e[s]*l,e[s+1]=a*o+e[s+1]*l,e[s+2]=i*o+e[s+2]*l};pv.RGBA=zre,vm.Factory.addGetterSetter(hv.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),vm.Factory.addGetterSetter(hv.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),vm.Factory.addGetterSetter(hv.Node,"blue",0,Lre.RGBComponent,vm.Factory.afterSetFilter),vm.Factory.addGetterSetter(hv.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});var fv={};Object.defineProperty(fv,"__esModule",{value:!0}),fv.Sepia=void 0;const Bre=function(t){var e=t.data,n=e.length,r,a,i,o;for(r=0;r<n;r+=4)a=e[r+0],i=e[r+1],o=e[r+2],e[r+0]=Math.min(255,a*.393+i*.769+o*.189),e[r+1]=Math.min(255,a*.349+i*.686+o*.168),e[r+2]=Math.min(255,a*.272+i*.534+o*.131)};fv.Sepia=Bre;var mv={};Object.defineProperty(mv,"__esModule",{value:!0}),mv.Solarize=void 0;const jre=function(t){var e=t.data,n=t.width,r=t.height,a=n*4,i=r;do{var o=(i-1)*a,s=n;do{var l=o+(s-1)*4,u=e[l],c=e[l+1],d=e[l+2];u>127&&(u=255-u),c>127&&(c=255-c),d>127&&(d=255-d),e[l]=u,e[l+1]=c,e[l+2]=d}while(--s)}while(--i)};mv.Solarize=jre;var gv={};Object.defineProperty(gv,"__esModule",{value:!0}),gv.Threshold=void 0;const b8=zt,Ure=Kn,Vre=tt,Wre=function(t){var e=this.threshold()*255,n=t.data,r=n.length,a;for(a=0;a<r;a+=1)n[a]=n[a]<e?0:255};gv.Threshold=Wre,b8.Factory.addGetterSetter(Ure.Node,"threshold",.5,(0,Vre.getNumberValidator)(),b8.Factory.afterSetFilter),Object.defineProperty(fb,"__esModule",{value:!0}),fb.Konva=void 0;const v8=mb,Gre=Nb,Hre=_b,qre=Ob,Kre=Mb,Xre=Pb,x8=$p,Qre=hm,Yre=Ip,Zre=mm,Jre=Db,eae=Lb,tae=zb,nae=Bb,rae=Ac,aae=Ub,iae=Vb,oae=Gb,sae=qb,lae=Kb,uae=Xb,cae=Qb,dae=Zb,pae=Jb,hae=ev,fae=tv,mae=nv,gae=rv,yae=iv,bae=sv,vae=lv,xae=uv,wae=cv,kae=pv,Sae=fv,Cae=mv,Eae=gv;fb.Konva=v8.Konva.Util._assign(v8.Konva,{Arc:Gre.Arc,Arrow:Hre.Arrow,Circle:qre.Circle,Ellipse:Kre.Ellipse,Image:Xre.Image,Label:x8.Label,Tag:x8.Tag,Line:Qre.Line,Path:Yre.Path,Rect:Zre.Rect,RegularPolygon:Jre.RegularPolygon,Ring:eae.Ring,Sprite:tae.Sprite,Star:nae.Star,Text:rae.Text,TextPath:aae.TextPath,Transformer:iae.Transformer,Wedge:oae.Wedge,Filters:{Blur:sae.Blur,Brighten:lae.Brighten,Contrast:uae.Contrast,Emboss:cae.Emboss,Enhance:dae.Enhance,Grayscale:pae.Grayscale,HSL:hae.HSL,HSV:fae.HSV,Invert:mae.Invert,Kaleidoscope:gae.Kaleidoscope,Mask:yae.Mask,Noise:bae.Noise,Pixelate:vae.Pixelate,Posterize:xae.Posterize,RGB:wae.RGB,RGBA:kae.RGBA,Sepia:Sae.Sepia,Solarize:Cae.Solarize,Threshold:Eae.Threshold}});var Nae=oN.exports;Object.defineProperty(Nae,"__esModule",{value:!0});const Tae=fb;oN.exports=Tae.Konva;var Iae=oN.exports;const w8=Zi(Iae);var BN={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=mb;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=mb;t.exports=r.Konva})(BN,BN.exports);var _ae=BN.exports;const xm=Zi(_ae);var k8={exports:{}};/**
* @license React
* react-reconciler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Rae=function(t){var e={},n=_,r=Qh,a=Object.assign;function i(h){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+h,k=1;k<arguments.length;k++)m+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,s=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),S=Symbol.iterator;function C(h){return h===null||typeof h!="object"?null:(h=S&&h[S]||h["@@iterator"],typeof h=="function"?h:null)}function E(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case l:return"Portal";case d:return"Profiler";case c:return"StrictMode";case y:return"Suspense";case v:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case f:return(h.displayName||"Context")+".Consumer";case p:return(h._context.displayName||"Context")+".Provider";case g:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case b:return m=h.displayName||null,m!==null?m:E(h.type)||"Memo";case x:m=h._payload,h=h._init;try{return E(h(m))}catch{}}return null}function R(h){var m=h.type;switch(h.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=m.render,h=h.displayName||h.name||"",m.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(m);case 8:return m===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function T(h){var m=h,k=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,m.flags&4098&&(k=m.return),h=m.return;while(h)}return m.tag===3?k:null}function $(h){if(T(h)!==h)throw Error(i(188))}function P(h){var m=h.alternate;if(!m){if(m=T(h),m===null)throw Error(i(188));return m!==h?null:h}for(var k=h,N=m;;){var I=k.return;if(I===null)break;var M=I.alternate;if(M===null){if(N=I.return,N!==null){k=N;continue}break}if(I.child===M.child){for(M=I.child;M;){if(M===k)return $(I),h;if(M===N)return $(I),m;M=M.sibling}throw Error(i(188))}if(k.return!==N.return)k=I,N=M;else{for(var G=!1,ue=I.child;ue;){if(ue===k){G=!0,k=I,N=M;break}if(ue===N){G=!0,N=I,k=M;break}ue=ue.sibling}if(!G){for(ue=M.child;ue;){if(ue===k){G=!0,k=M,N=I;break}if(ue===N){G=!0,N=M,k=I;break}ue=ue.sibling}if(!G)throw Error(i(189))}}if(k.alternate!==N)throw Error(i(190))}if(k.tag!==3)throw Error(i(188));return k.stateNode.current===k?h:m}function D(h){return h=P(h),h!==null?B(h):null}function B(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var m=B(h);if(m!==null)return m;h=h.sibling}return null}function z(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var m=z(h);if(m!==null)return m}h=h.sibling}return null}var q=Array.isArray,Y=t.getPublicInstance,Z=t.getRootHostContext,H=t.getChildHostContext,L=t.prepareForCommit,Q=t.resetAfterCommit,J=t.createInstance,te=t.appendInitialChild,oe=t.finalizeInitialChildren,he=t.prepareUpdate,ae=t.shouldSetTextContent,de=t.createTextInstance,ke=t.scheduleTimeout,K=t.cancelTimeout,se=t.noTimeout,pe=t.isPrimaryRenderer,Ne=t.supportsMutation,Se=t.supportsPersistence,Te=t.supportsHydration,Pe=t.getInstanceFromNode,We=t.preparePortalMount,$e=t.getCurrentEventPriority,lt=t.detachDeletedInstance,Ze=t.supportsMicrotasks,Je=t.scheduleMicrotask,Ve=t.supportsTestSelectors,Vt=t.findFiberRoot,$t=t.getBoundingRect,Wt=t.getTextContent,Gt=t.isHiddenSubtree,Ot=t.matchAccessibilityRole,wt=t.setFocusIfFocusable,ln=t.setupIntersectionObserver,hn=t.appendChild,yr=t.appendChildToContainer,yn=t.commitTextUpdate,Zn=t.commitMount,li=t.commitUpdate,Xa=t.insertBefore,un=t.insertInContainerBefore,la=t.removeChild,Qa=t.removeChildFromContainer,Ea=t.resetTextContent,So=t.hideInstance,Kr=t.hideTextInstance,es=t.unhideInstance,or=t.unhideTextInstance,Vn=t.clearContainer,dt=t.cloneInstance,le=t.createContainerChildSet,fe=t.appendChildToContainerChildSet,xe=t.finalizeContainerChildren,_e=t.replaceContainerChildren,ze=t.cloneHiddenInstance,it=t.cloneHiddenTextInstance,nt=t.canHydrateInstance,at=t.canHydrateTextInstance,Qe=t.canHydrateSuspenseInstance,bt=t.isSuspenseInstancePending,cn=t.isSuspenseInstanceFallback,ft=t.getSuspenseInstanceFallbackErrorDetails,Jt=t.registerSuspenseInstanceRetry,bn=t.getNextHydratableSibling,Fr=t.getFirstHydratableChild,sr=t.getFirstHydratableChildWithinContainer,br=t.getFirstHydratableChildWithinSuspenseInstance,ts=t.hydrateInstance,Wi=t.hydrateTextInstance,Na=t.hydrateSuspenseInstance,Co=t.getNextHydratableInstanceAfterSuspenseInstance,Ku=t.commitHydratedContainer,Xu=t.commitHydratedSuspenseInstance,Rl=t.clearSuspenseBoundary,ns=t.clearSuspenseBoundaryFromContainer,Eo=t.shouldDeleteUnhydratedTailInstances,rn=t.didNotMatchHydratedContainerTextInstance,fn=t.didNotMatchHydratedTextInstance,Er;function Dt(h){if(Er===void 0)try{throw Error()}catch(k){var m=k.stack.trim().match(/\n( *(at )?)/);Er=m&&m[1]||""}return`
`+Er+h}var $l=!1;function _h(h,m){if(!h||$l)return"";$l=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Oe){var N=Oe}Reflect.construct(h,[],m)}else{try{m.call()}catch(Oe){N=Oe}h.call(m.prototype)}else{try{throw Error()}catch(Oe){N=Oe}h()}}catch(Oe){if(Oe&&N&&typeof Oe.stack=="string"){for(var I=Oe.stack.split(`
`),M=N.stack.split(`
`),G=I.length-1,ue=M.length-1;1<=G&&0<=ue&&I[G]!==M[ue];)ue--;for(;1<=G&&0<=ue;G--,ue--)if(I[G]!==M[ue]){if(G!==1||ue!==1)do if(G--,ue--,0>ue||I[G]!==M[ue]){var ye=`
`+I[G].replace(" at new "," at ");return h.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",h.displayName)),ye}while(1<=G&&0<=ue);break}}}finally{$l=!1,Error.prepareStackTrace=k}return(h=h?h.displayName||h.name:"")?Dt(h):""}var ek=Object.prototype.hasOwnProperty,Qu=[],Ol=-1;function Gi(h){return{current:h}}function En(h){0>Ol||(h.current=Qu[Ol],Qu[Ol]=null,Ol--)}function vn(h,m){Ol++,Qu[Ol]=h.current,h.current=m}var Hi={},Xr=Gi(Hi),Ta=Gi(!1),Fs=Hi;function Ml(h,m){var k=h.type.contextTypes;if(!k)return Hi;var N=h.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===m)return N.__reactInternalMemoizedMaskedChildContext;var I={},M;for(M in k)I[M]=m[M];return N&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=m,h.__reactInternalMemoizedMaskedChildContext=I),I}function Ia(h){return h=h.childContextTypes,h!=null}function wd(){En(Ta),En(Xr)}function O0(h,m,k){if(Xr.current!==Hi)throw Error(i(168));vn(Xr,m),vn(Ta,k)}function Wn(h,m,k){var N=h.stateNode;if(m=m.childContextTypes,typeof N.getChildContext!="function")return k;N=N.getChildContext();for(var I in N)if(!(I in m))throw Error(i(108,R(h)||"Unknown",I));return a({},k,N)}function rs(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Hi,Fs=Xr.current,vn(Xr,h),vn(Ta,Ta.current),!0}function Yu(h,m,k){var N=h.stateNode;if(!N)throw Error(i(169));k?(h=Wn(h,m,Fs),N.__reactInternalMemoizedMergedChildContext=h,En(Ta),En(Xr),vn(Xr,h)):En(Ta),vn(Ta,k)}var Ii=Math.clz32?Math.clz32:tk,M0=Math.log,Rh=Math.LN2;function tk(h){return h>>>=0,h===0?32:31-(M0(h)/Rh|0)|0}var kd=64,As=4194304;function Zu(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Ds(h,m){var k=h.pendingLanes;if(k===0)return 0;var N=0,I=h.suspendedLanes,M=h.pingedLanes,G=k&268435455;if(G!==0){var ue=G&~I;ue!==0?N=Zu(ue):(M&=G,M!==0&&(N=Zu(M)))}else G=k&~I,G!==0?N=Zu(G):M!==0&&(N=Zu(M));if(N===0)return 0;if(m!==0&&m!==N&&!(m&I)&&(I=N&-N,M=m&-m,I>=M||I===16&&(M&4194240)!==0))return m;if(N&4&&(N|=k&16),m=h.entangledLanes,m!==0)for(h=h.entanglements,m&=N;0<m;)k=31-Ii(m),I=1<<k,N|=h[k],m&=~I;return N}function A(h,m){switch(h){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W(h,m){for(var k=h.suspendedLanes,N=h.pingedLanes,I=h.expirationTimes,M=h.pendingLanes;0<M;){var G=31-Ii(M),ue=1<<G,ye=I[G];ye===-1?(!(ue&k)||ue&N)&&(I[G]=A(ue,m)):ye<=m&&(h.expiredLanes|=ue),M&=~ue}}function ee(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function ie(){var h=kd;return kd<<=1,!(kd&4194240)&&(kd=64),h}function ve(h){for(var m=[],k=0;31>k;k++)m.push(h);return m}function Ee(h,m,k){h.pendingLanes|=m,m!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,m=31-Ii(m),h[m]=k}function Ae(h,m){var k=h.pendingLanes&~m;h.pendingLanes=m,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=m,h.mutableReadLanes&=m,h.entangledLanes&=m,m=h.entanglements;var N=h.eventTimes;for(h=h.expirationTimes;0<k;){var I=31-Ii(k),M=1<<I;m[I]=0,N[I]=-1,h[I]=-1,k&=~M}}function Me(h,m){var k=h.entangledLanes|=m;for(h=h.entanglements;k;){var N=31-Ii(k),I=1<<N;I&m|h[N]&m&&(h[N]|=m),k&=~I}}var Re=0;function Ue(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var vt=r.unstable_scheduleCallback,ot=r.unstable_cancelCallback,Pt=r.unstable_shouldYield,St=r.unstable_requestPaint,Ye=r.unstable_now,pt=r.unstable_ImmediatePriority,mt=r.unstable_UserBlockingPriority,st=r.unstable_NormalPriority,Ct=r.unstable_IdlePriority,ct=null,kt=null;function lr(h){if(kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(ct,h,void 0,(h.current.flags&128)===128)}catch{}}function ui(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var Ht=typeof Object.is=="function"?Object.is:ui,Gn=null,Ln=!1,_a=!1;function Ya(h){Gn===null?Gn=[h]:Gn.push(h)}function No(h){Ln=!0,Ya(h)}function Nr(){if(!_a&&Gn!==null){_a=!0;var h=0,m=Re;try{var k=Gn;for(Re=1;h<k.length;h++){var N=k[h];do N=N(!0);while(N!==null)}Gn=null,Ln=!1}catch(I){throw Gn!==null&&(Gn=Gn.slice(h+1)),vt(pt,Nr),I}finally{Re=m,_a=!1}}return null}var gt=[],Mt=0,Tr=null,Ir=0,mn=[],Mn=0,ua=null,To=1,ca="";function Ls(h,m){gt[Mt++]=Ir,gt[Mt++]=Tr,Tr=h,Ir=m}function $h(h,m,k){mn[Mn++]=To,mn[Mn++]=ca,mn[Mn++]=ua,ua=h;var N=To;h=ca;var I=32-Ii(N)-1;N&=~(1<<I),k+=1;var M=32-Ii(m)+I;if(30<M){var G=I-I%5;M=(N&(1<<G)-1).toString(32),N>>=G,I-=G,To=1<<32-Ii(m)+I|k<<I|N,ca=M+h}else To=1<<M|k<<I|N,ca=h}function Za(h){h.return!==null&&(Ls(h,1),$h(h,1,0))}function zs(h){for(;h===Tr;)Tr=gt[--Mt],gt[Mt]=null,Ir=gt[--Mt],gt[Mt]=null;for(;h===ua;)ua=mn[--Mn],mn[Mn]=null,ca=mn[--Mn],mn[Mn]=null,To=mn[--Mn],mn[Mn]=null}var ur=null,da=null,an=!1,Bs=!1,Io=null;function X_(h,m){var k=Yi(5,null,null,0);k.elementType="DELETED",k.stateNode=m,k.return=h,m=h.deletions,m===null?(h.deletions=[k],h.flags|=16):m.push(k)}function Q_(h,m){switch(h.tag){case 5:return m=nt(m,h.type,h.pendingProps),m!==null?(h.stateNode=m,ur=h,da=Fr(m),!0):!1;case 6:return m=at(m,h.pendingProps),m!==null?(h.stateNode=m,ur=h,da=null,!0):!1;case 13:if(m=Qe(m),m!==null){var k=ua!==null?{id:To,overflow:ca}:null;return h.memoizedState={dehydrated:m,treeContext:k,retryLane:1073741824},k=Yi(18,null,null,0),k.stateNode=m,k.return=h,h.child=k,ur=h,da=null,!0}return!1;default:return!1}}function nk(h){return(h.mode&1)!==0&&(h.flags&128)===0}function rk(h){if(an){var m=da;if(m){var k=m;if(!Q_(h,m)){if(nk(h))throw Error(i(418));m=bn(k);var N=ur;m&&Q_(h,m)?X_(N,k):(h.flags=h.flags&-4097|2,an=!1,ur=h)}}else{if(nk(h))throw Error(i(418));h.flags=h.flags&-4097|2,an=!1,ur=h}}}function Y_(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;ur=h}function P0(h){if(!Te||h!==ur)return!1;if(!an)return Y_(h),an=!0,!1;if(h.tag!==3&&(h.tag!==5||Eo(h.type)&&!ae(h.type,h.memoizedProps))){var m=da;if(m){if(nk(h))throw Z_(),Error(i(418));for(;m;)X_(h,m),m=bn(m)}}if(Y_(h),h.tag===13){if(!Te)throw Error(i(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));da=Co(h)}else da=ur?bn(h.stateNode):null;return!0}function Z_(){for(var h=da;h;)h=bn(h)}function Sd(){Te&&(da=ur=null,Bs=an=!1)}function ak(h){Io===null?Io=[h]:Io.push(h)}var tV=o.ReactCurrentBatchConfig;function F0(h,m){if(Ht(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var k=Object.keys(h),N=Object.keys(m);if(k.length!==N.length)return!1;for(N=0;N<k.length;N++){var I=k[N];if(!ek.call(m,I)||!Ht(h[I],m[I]))return!1}return!0}function nV(h){switch(h.tag){case 5:return Dt(h.type);case 16:return Dt("Lazy");case 13:return Dt("Suspense");case 19:return Dt("SuspenseList");case 0:case 2:case 15:return h=_h(h.type,!1),h;case 11:return h=_h(h.type.render,!1),h;case 1:return h=_h(h.type,!0),h;default:return""}}function _o(h,m){if(h&&h.defaultProps){m=a({},m),h=h.defaultProps;for(var k in h)m[k]===void 0&&(m[k]=h[k]);return m}return m}var A0=Gi(null),D0=null,Cd=null,ik=null;function ok(){ik=Cd=D0=null}function J_(h,m,k){pe?(vn(A0,m._currentValue),m._currentValue=k):(vn(A0,m._currentValue2),m._currentValue2=k)}function sk(h){var m=A0.current;En(A0),pe?h._currentValue=m:h._currentValue2=m}function lk(h,m,k){for(;h!==null;){var N=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,N!==null&&(N.childLanes|=m)):N!==null&&(N.childLanes&m)!==m&&(N.childLanes|=m),h===k)break;h=h.return}}function Ed(h,m){D0=h,ik=Cd=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&m&&(ci=!0),h.firstContext=null)}function qi(h){var m=pe?h._currentValue:h._currentValue2;if(ik!==h)if(h={context:h,memoizedValue:m,next:null},Cd===null){if(D0===null)throw Error(i(308));Cd=h,D0.dependencies={lanes:0,firstContext:h}}else Cd=Cd.next=h;return m}var Ju=null;function uk(h){Ju===null?Ju=[h]:Ju.push(h)}function e5(h,m,k,N){var I=m.interleaved;return I===null?(k.next=k,uk(m)):(k.next=I.next,I.next=k),m.interleaved=k,as(h,N)}function as(h,m){h.lanes|=m;var k=h.alternate;for(k!==null&&(k.lanes|=m),k=h,h=h.return;h!==null;)h.childLanes|=m,k=h.alternate,k!==null&&(k.childLanes|=m),k=h,h=h.return;return k.tag===3?k.stateNode:null}var Pl=!1;function ck(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t5(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function js(h,m){return{eventTime:h,lane:m,tag:0,payload:null,callback:null,next:null}}function Fl(h,m,k){var N=h.updateQueue;if(N===null)return null;if(N=N.shared,jt&2){var I=N.pending;return I===null?m.next=m:(m.next=I.next,I.next=m),N.pending=m,as(h,k)}return I=N.interleaved,I===null?(m.next=m,uk(N)):(m.next=I.next,I.next=m),N.interleaved=m,as(h,k)}function L0(h,m,k){if(m=m.updateQueue,m!==null&&(m=m.shared,(k&4194240)!==0)){var N=m.lanes;N&=h.pendingLanes,k|=N,m.lanes=k,Me(h,k)}}function n5(h,m){var k=h.updateQueue,N=h.alternate;if(N!==null&&(N=N.updateQueue,k===N)){var I=null,M=null;if(k=k.firstBaseUpdate,k!==null){do{var G={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};M===null?I=M=G:M=M.next=G,k=k.next}while(k!==null);M===null?I=M=m:M=M.next=m}else I=M=m;k={baseState:N.baseState,firstBaseUpdate:I,lastBaseUpdate:M,shared:N.shared,effects:N.effects},h.updateQueue=k;return}h=k.lastBaseUpdate,h===null?k.firstBaseUpdate=m:h.next=m,k.lastBaseUpdate=m}function z0(h,m,k,N){var I=h.updateQueue;Pl=!1;var M=I.firstBaseUpdate,G=I.lastBaseUpdate,ue=I.shared.pending;if(ue!==null){I.shared.pending=null;var ye=ue,Oe=ye.next;ye.next=null,G===null?M=Oe:G.next=Oe,G=ye;var Xe=h.alternate;Xe!==null&&(Xe=Xe.updateQueue,ue=Xe.lastBaseUpdate,ue!==G&&(ue===null?Xe.firstBaseUpdate=Oe:ue.next=Oe,Xe.lastBaseUpdate=ye))}if(M!==null){var It=I.baseState;G=0,Xe=Oe=ye=null,ue=M;do{var Be=ue.lane,zn=ue.eventTime;if((N&Be)===Be){Xe!==null&&(Xe=Xe.next={eventTime:zn,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var Nn=h,hi=ue;switch(Be=m,zn=k,hi.tag){case 1:if(Nn=hi.payload,typeof Nn=="function"){It=Nn.call(zn,It,Be);break e}It=Nn;break e;case 3:Nn.flags=Nn.flags&-65537|128;case 0:if(Nn=hi.payload,Be=typeof Nn=="function"?Nn.call(zn,It,Be):Nn,Be==null)break e;It=a({},It,Be);break e;case 2:Pl=!0}}ue.callback!==null&&ue.lane!==0&&(h.flags|=64,Be=I.effects,Be===null?I.effects=[ue]:Be.push(ue))}else zn={eventTime:zn,lane:Be,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},Xe===null?(Oe=Xe=zn,ye=It):Xe=Xe.next=zn,G|=Be;if(ue=ue.next,ue===null){if(ue=I.shared.pending,ue===null)break;Be=ue,ue=Be.next,Be.next=null,I.lastBaseUpdate=Be,I.shared.pending=null}}while(!0);if(Xe===null&&(ye=It),I.baseState=ye,I.firstBaseUpdate=Oe,I.lastBaseUpdate=Xe,m=I.shared.interleaved,m!==null){I=m;do G|=I.lane,I=I.next;while(I!==m)}else M===null&&(I.shared.lanes=0);tc|=G,h.lanes=G,h.memoizedState=It}}function r5(h,m,k){if(h=m.effects,m.effects=null,h!==null)for(m=0;m<h.length;m++){var N=h[m],I=N.callback;if(I!==null){if(N.callback=null,N=k,typeof I!="function")throw Error(i(191,I));I.call(N)}}}var a5=new n.Component().refs;function dk(h,m,k,N){m=h.memoizedState,k=k(N,m),k=k==null?m:a({},m,k),h.memoizedState=k,h.lanes===0&&(h.updateQueue.baseState=k)}var B0={isMounted:function(h){return(h=h._reactInternals)?T(h)===h:!1},enqueueSetState:function(h,m,k){h=h._reactInternals;var N=Ma(),I=Ll(h),M=js(N,I);M.payload=m,k!=null&&(M.callback=k),m=Fl(h,M,I),m!==null&&(Qi(m,h,I,N),L0(m,h,I))},enqueueReplaceState:function(h,m,k){h=h._reactInternals;var N=Ma(),I=Ll(h),M=js(N,I);M.tag=1,M.payload=m,k!=null&&(M.callback=k),m=Fl(h,M,I),m!==null&&(Qi(m,h,I,N),L0(m,h,I))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var k=Ma(),N=Ll(h),I=js(k,N);I.tag=2,m!=null&&(I.callback=m),m=Fl(h,I,N),m!==null&&(Qi(m,h,N,k),L0(m,h,N))}};function i5(h,m,k,N,I,M,G){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(N,M,G):m.prototype&&m.prototype.isPureReactComponent?!F0(k,N)||!F0(I,M):!0}function o5(h,m,k){var N=!1,I=Hi,M=m.contextType;return typeof M=="object"&&M!==null?M=qi(M):(I=Ia(m)?Fs:Xr.current,N=m.contextTypes,M=(N=N!=null)?Ml(h,I):Hi),m=new m(k,M),h.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=B0,h.stateNode=m,m._reactInternals=h,N&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=I,h.__reactInternalMemoizedMaskedChildContext=M),m}function s5(h,m,k,N){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(k,N),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(k,N),m.state!==h&&B0.enqueueReplaceState(m,m.state,null)}function pk(h,m,k,N){var I=h.stateNode;I.props=k,I.state=h.memoizedState,I.refs=a5,ck(h);var M=m.contextType;typeof M=="object"&&M!==null?I.context=qi(M):(M=Ia(m)?Fs:Xr.current,I.context=Ml(h,M)),I.state=h.memoizedState,M=m.getDerivedStateFromProps,typeof M=="function"&&(dk(h,m,M,k),I.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(m=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),m!==I.state&&B0.enqueueReplaceState(I,I.state,null),z0(h,k,I,N),I.state=h.memoizedState),typeof I.componentDidMount=="function"&&(h.flags|=4194308)}function Oh(h,m,k){if(h=k.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(i(309));var N=k.stateNode}if(!N)throw Error(i(147,h));var I=N,M=""+h;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===M?m.ref:(m=function(G){var ue=I.refs;ue===a5&&(ue=I.refs={}),G===null?delete ue[M]:ue[M]=G},m._stringRef=M,m)}if(typeof h!="string")throw Error(i(284));if(!k._owner)throw Error(i(290,h))}return h}function j0(h,m){throw h=Object.prototype.toString.call(m),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h))}function l5(h){var m=h._init;return m(h._payload)}function u5(h){function m(ge,ce){if(h){var we=ge.deletions;we===null?(ge.deletions=[ce],ge.flags|=16):we.push(ce)}}function k(ge,ce){if(!h)return null;for(;ce!==null;)m(ge,ce),ce=ce.sibling;return null}function N(ge,ce){for(ge=new Map;ce!==null;)ce.key!==null?ge.set(ce.key,ce):ge.set(ce.index,ce),ce=ce.sibling;return ge}function I(ge,ce){return ge=Bl(ge,ce),ge.index=0,ge.sibling=null,ge}function M(ge,ce,we){return ge.index=we,h?(we=ge.alternate,we!==null?(we=we.index,we<ce?(ge.flags|=2,ce):we):(ge.flags|=2,ce)):(ge.flags|=1048576,ce)}function G(ge){return h&&ge.alternate===null&&(ge.flags|=2),ge}function ue(ge,ce,we,je){return ce===null||ce.tag!==6?(ce=Zk(we,ge.mode,je),ce.return=ge,ce):(ce=I(ce,we),ce.return=ge,ce)}function ye(ge,ce,we,je){var ht=we.type;return ht===u?Xe(ge,ce,we.props.children,je,we.key):ce!==null&&(ce.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===x&&l5(ht)===ce.type)?(je=I(ce,we.props),je.ref=Oh(ge,ce,we),je.return=ge,je):(je=h1(we.type,we.key,we.props,null,ge.mode,je),je.ref=Oh(ge,ce,we),je.return=ge,je)}function Oe(ge,ce,we,je){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==we.containerInfo||ce.stateNode.implementation!==we.implementation?(ce=Jk(we,ge.mode,je),ce.return=ge,ce):(ce=I(ce,we.children||[]),ce.return=ge,ce)}function Xe(ge,ce,we,je,ht){return ce===null||ce.tag!==7?(ce=ic(we,ge.mode,je,ht),ce.return=ge,ce):(ce=I(ce,we),ce.return=ge,ce)}function It(ge,ce,we){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=Zk(""+ce,ge.mode,we),ce.return=ge,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case s:return we=h1(ce.type,ce.key,ce.props,null,ge.mode,we),we.ref=Oh(ge,null,ce),we.return=ge,we;case l:return ce=Jk(ce,ge.mode,we),ce.return=ge,ce;case x:var je=ce._init;return It(ge,je(ce._payload),we)}if(q(ce)||C(ce))return ce=ic(ce,ge.mode,we,null),ce.return=ge,ce;j0(ge,ce)}return null}function Be(ge,ce,we,je){var ht=ce!==null?ce.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return ht!==null?null:ue(ge,ce,""+we,je);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case s:return we.key===ht?ye(ge,ce,we,je):null;case l:return we.key===ht?Oe(ge,ce,we,je):null;case x:return ht=we._init,Be(ge,ce,ht(we._payload),je)}if(q(we)||C(we))return ht!==null?null:Xe(ge,ce,we,je,null);j0(ge,we)}return null}function zn(ge,ce,we,je,ht){if(typeof je=="string"&&je!==""||typeof je=="number")return ge=ge.get(we)||null,ue(ce,ge,""+je,ht);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case s:return ge=ge.get(je.key===null?we:je.key)||null,ye(ce,ge,je,ht);case l:return ge=ge.get(je.key===null?we:je.key)||null,Oe(ce,ge,je,ht);case x:var Ft=je._init;return zn(ge,ce,we,Ft(je._payload),ht)}if(q(je)||C(je))return ge=ge.get(we)||null,Xe(ce,ge,je,ht,null);j0(ce,je)}return null}function Nn(ge,ce,we,je){for(var ht=null,Ft=null,_t=ce,on=ce=0,Zr=null;_t!==null&&on<we.length;on++){_t.index>on?(Zr=_t,_t=null):Zr=_t.sibling;var sn=Be(ge,_t,we[on],je);if(sn===null){_t===null&&(_t=Zr);break}h&&_t&&sn.alternate===null&&m(ge,_t),ce=M(sn,ce,on),Ft===null?ht=sn:Ft.sibling=sn,Ft=sn,_t=Zr}if(on===we.length)return k(ge,_t),an&&Ls(ge,on),ht;if(_t===null){for(;on<we.length;on++)_t=It(ge,we[on],je),_t!==null&&(ce=M(_t,ce,on),Ft===null?ht=_t:Ft.sibling=_t,Ft=_t);return an&&Ls(ge,on),ht}for(_t=N(ge,_t);on<we.length;on++)Zr=zn(_t,ge,on,we[on],je),Zr!==null&&(h&&Zr.alternate!==null&&_t.delete(Zr.key===null?on:Zr.key),ce=M(Zr,ce,on),Ft===null?ht=Zr:Ft.sibling=Zr,Ft=Zr);return h&&_t.forEach(function(jl){return m(ge,jl)}),an&&Ls(ge,on),ht}function hi(ge,ce,we,je){var ht=C(we);if(typeof ht!="function")throw Error(i(150));if(we=ht.call(we),we==null)throw Error(i(151));for(var Ft=ht=null,_t=ce,on=ce=0,Zr=null,sn=we.next();_t!==null&&!sn.done;on++,sn=we.next()){_t.index>on?(Zr=_t,_t=null):Zr=_t.sibling;var jl=Be(ge,_t,sn.value,je);if(jl===null){_t===null&&(_t=Zr);break}h&&_t&&jl.alternate===null&&m(ge,_t),ce=M(jl,ce,on),Ft===null?ht=jl:Ft.sibling=jl,Ft=jl,_t=Zr}if(sn.done)return k(ge,_t),an&&Ls(ge,on),ht;if(_t===null){for(;!sn.done;on++,sn=we.next())sn=It(ge,sn.value,je),sn!==null&&(ce=M(sn,ce,on),Ft===null?ht=sn:Ft.sibling=sn,Ft=sn);return an&&Ls(ge,on),ht}for(_t=N(ge,_t);!sn.done;on++,sn=we.next())sn=zn(_t,ge,on,sn.value,je),sn!==null&&(h&&sn.alternate!==null&&_t.delete(sn.key===null?on:sn.key),ce=M(sn,ce,on),Ft===null?ht=sn:Ft.sibling=sn,Ft=sn);return h&&_t.forEach(function(OV){return m(ge,OV)}),an&&Ls(ge,on),ht}function Ws(ge,ce,we,je){if(typeof we=="object"&&we!==null&&we.type===u&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case s:e:{for(var ht=we.key,Ft=ce;Ft!==null;){if(Ft.key===ht){if(ht=we.type,ht===u){if(Ft.tag===7){k(ge,Ft.sibling),ce=I(Ft,we.props.children),ce.return=ge,ge=ce;break e}}else if(Ft.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===x&&l5(ht)===Ft.type){k(ge,Ft.sibling),ce=I(Ft,we.props),ce.ref=Oh(ge,Ft,we),ce.return=ge,ge=ce;break e}k(ge,Ft);break}else m(ge,Ft);Ft=Ft.sibling}we.type===u?(ce=ic(we.props.children,ge.mode,je,we.key),ce.return=ge,ge=ce):(je=h1(we.type,we.key,we.props,null,ge.mode,je),je.ref=Oh(ge,ce,we),je.return=ge,ge=je)}return G(ge);case l:e:{for(Ft=we.key;ce!==null;){if(ce.key===Ft)if(ce.tag===4&&ce.stateNode.containerInfo===we.containerInfo&&ce.stateNode.implementation===we.implementation){k(ge,ce.sibling),ce=I(ce,we.children||[]),ce.return=ge,ge=ce;break e}else{k(ge,ce);break}else m(ge,ce);ce=ce.sibling}ce=Jk(we,ge.mode,je),ce.return=ge,ge=ce}return G(ge);case x:return Ft=we._init,Ws(ge,ce,Ft(we._payload),je)}if(q(we))return Nn(ge,ce,we,je);if(C(we))return hi(ge,ce,we,je);j0(ge,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,ce!==null&&ce.tag===6?(k(ge,ce.sibling),ce=I(ce,we),ce.return=ge,ge=ce):(k(ge,ce),ce=Zk(we,ge.mode,je),ce.return=ge,ge=ce),G(ge)):k(ge,ce)}return Ws}var Nd=u5(!0),c5=u5(!1),Mh={},Ki=Gi(Mh),Ph=Gi(Mh),Td=Gi(Mh);function is(h){if(h===Mh)throw Error(i(174));return h}function hk(h,m){vn(Td,m),vn(Ph,h),vn(Ki,Mh),h=Z(m),En(Ki),vn(Ki,h)}function Id(){En(Ki),En(Ph),En(Td)}function d5(h){var m=is(Td.current),k=is(Ki.current);m=H(k,h.type,m),k!==m&&(vn(Ph,h),vn(Ki,m))}function fk(h){Ph.current===h&&(En(Ki),En(Ph))}var Jn=Gi(0);function U0(h){for(var m=h;m!==null;){if(m.tag===13){var k=m.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||bt(k)||cn(k)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var mk=[];function gk(){for(var h=0;h<mk.length;h++){var m=mk[h];pe?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}mk.length=0}var V0=o.ReactCurrentDispatcher,yk=o.ReactCurrentBatchConfig,ec=0,er=null,Ar=null,Qr=null,W0=!1,Fh=!1,Ah=0,rV=0;function Ra(){throw Error(i(321))}function bk(h,m){if(m===null)return!1;for(var k=0;k<m.length&&k<h.length;k++)if(!Ht(h[k],m[k]))return!1;return!0}function vk(h,m,k,N,I,M){if(ec=M,er=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,V0.current=h===null||h.memoizedState===null?sV:lV,h=k(N,I),Fh){M=0;do{if(Fh=!1,Ah=0,25<=M)throw Error(i(301));M+=1,Qr=Ar=null,m.updateQueue=null,V0.current=uV,h=k(N,I)}while(Fh)}if(V0.current=q0,m=Ar!==null&&Ar.next!==null,ec=0,Qr=Ar=er=null,W0=!1,m)throw Error(i(300));return h}function xk(){var h=Ah!==0;return Ah=0,h}function os(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qr===null?er.memoizedState=Qr=h:Qr=Qr.next=h,Qr}function Xi(){if(Ar===null){var h=er.alternate;h=h!==null?h.memoizedState:null}else h=Ar.next;var m=Qr===null?er.memoizedState:Qr.next;if(m!==null)Qr=m,Ar=h;else{if(h===null)throw Error(i(310));Ar=h,h={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},Qr===null?er.memoizedState=Qr=h:Qr=Qr.next=h}return Qr}function Dh(h,m){return typeof m=="function"?m(h):m}function wk(h){var m=Xi(),k=m.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=h;var N=Ar,I=N.baseQueue,M=k.pending;if(M!==null){if(I!==null){var G=I.next;I.next=M.next,M.next=G}N.baseQueue=I=M,k.pending=null}if(I!==null){M=I.next,N=N.baseState;var ue=G=null,ye=null,Oe=M;do{var Xe=Oe.lane;if((ec&Xe)===Xe)ye!==null&&(ye=ye.next={lane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),N=Oe.hasEagerState?Oe.eagerState:h(N,Oe.action);else{var It={lane:Xe,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null};ye===null?(ue=ye=It,G=N):ye=ye.next=It,er.lanes|=Xe,tc|=Xe}Oe=Oe.next}while(Oe!==null&&Oe!==M);ye===null?G=N:ye.next=ue,Ht(N,m.memoizedState)||(ci=!0),m.memoizedState=N,m.baseState=G,m.baseQueue=ye,k.lastRenderedState=N}if(h=k.interleaved,h!==null){I=h;do M=I.lane,er.lanes|=M,tc|=M,I=I.next;while(I!==h)}else I===null&&(k.lanes=0);return[m.memoizedState,k.dispatch]}function kk(h){var m=Xi(),k=m.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=h;var N=k.dispatch,I=k.pending,M=m.memoizedState;if(I!==null){k.pending=null;var G=I=I.next;do M=h(M,G.action),G=G.next;while(G!==I);Ht(M,m.memoizedState)||(ci=!0),m.memoizedState=M,m.baseQueue===null&&(m.baseState=M),k.lastRenderedState=M}return[M,N]}function p5(){}function h5(h,m){var k=er,N=Xi(),I=m(),M=!Ht(N.memoizedState,I);if(M&&(N.memoizedState=I,ci=!0),N=N.queue,Sk(g5.bind(null,k,N,h),[h]),N.getSnapshot!==m||M||Qr!==null&&Qr.memoizedState.tag&1){if(k.flags|=2048,Lh(9,m5.bind(null,k,N,I,m),void 0,null),Yr===null)throw Error(i(349));ec&30||f5(k,m,I)}return I}function f5(h,m,k){h.flags|=16384,h={getSnapshot:m,value:k},m=er.updateQueue,m===null?(m={lastEffect:null,stores:null},er.updateQueue=m,m.stores=[h]):(k=m.stores,k===null?m.stores=[h]:k.push(h))}function m5(h,m,k,N){m.value=k,m.getSnapshot=N,y5(m)&&b5(h)}function g5(h,m,k){return k(function(){y5(m)&&b5(h)})}function y5(h){var m=h.getSnapshot;h=h.value;try{var k=m();return!Ht(h,k)}catch{return!0}}function b5(h){var m=as(h,1);m!==null&&Qi(m,h,1,-1)}function v5(h){var m=os();return typeof h=="function"&&(h=h()),m.memoizedState=m.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dh,lastRenderedState:h},m.queue=h,h=h.dispatch=oV.bind(null,er,h),[m.memoizedState,h]}function Lh(h,m,k,N){return h={tag:h,create:m,destroy:k,deps:N,next:null},m=er.updateQueue,m===null?(m={lastEffect:null,stores:null},er.updateQueue=m,m.lastEffect=h.next=h):(k=m.lastEffect,k===null?m.lastEffect=h.next=h:(N=k.next,k.next=h,h.next=N,m.lastEffect=h)),h}function x5(){return Xi().memoizedState}function G0(h,m,k,N){var I=os();er.flags|=h,I.memoizedState=Lh(1|m,k,void 0,N===void 0?null:N)}function H0(h,m,k,N){var I=Xi();N=N===void 0?null:N;var M=void 0;if(Ar!==null){var G=Ar.memoizedState;if(M=G.destroy,N!==null&&bk(N,G.deps)){I.memoizedState=Lh(m,k,M,N);return}}er.flags|=h,I.memoizedState=Lh(1|m,k,M,N)}function w5(h,m){return G0(8390656,8,h,m)}function Sk(h,m){return H0(2048,8,h,m)}function k5(h,m){return H0(4,2,h,m)}function S5(h,m){return H0(4,4,h,m)}function C5(h,m){if(typeof m=="function")return h=h(),m(h),function(){m(null)};if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function E5(h,m,k){return k=k!=null?k.concat([h]):null,H0(4,4,C5.bind(null,m,h),k)}function Ck(){}function N5(h,m){var k=Xi();m=m===void 0?null:m;var N=k.memoizedState;return N!==null&&m!==null&&bk(m,N[1])?N[0]:(k.memoizedState=[h,m],h)}function T5(h,m){var k=Xi();m=m===void 0?null:m;var N=k.memoizedState;return N!==null&&m!==null&&bk(m,N[1])?N[0]:(h=h(),k.memoizedState=[h,m],h)}function I5(h,m,k){return ec&21?(Ht(k,m)||(k=ie(),er.lanes|=k,tc|=k,h.baseState=!0),m):(h.baseState&&(h.baseState=!1,ci=!0),h.memoizedState=k)}function aV(h,m){var k=Re;Re=k!==0&&4>k?k:4,h(!0);var N=yk.transition;yk.transition={};try{h(!1),m()}finally{Re=k,yk.transition=N}}function _5(){return Xi().memoizedState}function iV(h,m,k){var N=Ll(h);if(k={lane:N,action:k,hasEagerState:!1,eagerState:null,next:null},R5(h))$5(m,k);else if(k=e5(h,m,k,N),k!==null){var I=Ma();Qi(k,h,N,I),O5(k,m,N)}}function oV(h,m,k){var N=Ll(h),I={lane:N,action:k,hasEagerState:!1,eagerState:null,next:null};if(R5(h))$5(m,I);else{var M=h.alternate;if(h.lanes===0&&(M===null||M.lanes===0)&&(M=m.lastRenderedReducer,M!==null))try{var G=m.lastRenderedState,ue=M(G,k);if(I.hasEagerState=!0,I.eagerState=ue,Ht(ue,G)){var ye=m.interleaved;ye===null?(I.next=I,uk(m)):(I.next=ye.next,ye.next=I),m.interleaved=I;return}}catch{}finally{}k=e5(h,m,I,N),k!==null&&(I=Ma(),Qi(k,h,N,I),O5(k,m,N))}}function R5(h){var m=h.alternate;return h===er||m!==null&&m===er}function $5(h,m){Fh=W0=!0;var k=h.pending;k===null?m.next=m:(m.next=k.next,k.next=m),h.pending=m}function O5(h,m,k){if(k&4194240){var N=m.lanes;N&=h.pendingLanes,k|=N,m.lanes=k,Me(h,k)}}var q0={readContext:qi,useCallback:Ra,useContext:Ra,useEffect:Ra,useImperativeHandle:Ra,useInsertionEffect:Ra,useLayoutEffect:Ra,useMemo:Ra,useReducer:Ra,useRef:Ra,useState:Ra,useDebugValue:Ra,useDeferredValue:Ra,useTransition:Ra,useMutableSource:Ra,useSyncExternalStore:Ra,useId:Ra,unstable_isNewReconciler:!1},sV={readContext:qi,useCallback:function(h,m){return os().memoizedState=[h,m===void 0?null:m],h},useContext:qi,useEffect:w5,useImperativeHandle:function(h,m,k){return k=k!=null?k.concat([h]):null,G0(4194308,4,C5.bind(null,m,h),k)},useLayoutEffect:function(h,m){return G0(4194308,4,h,m)},useInsertionEffect:function(h,m){return G0(4,2,h,m)},useMemo:function(h,m){var k=os();return m=m===void 0?null:m,h=h(),k.memoizedState=[h,m],h},useReducer:function(h,m,k){var N=os();return m=k!==void 0?k(m):m,N.memoizedState=N.baseState=m,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:m},N.queue=h,h=h.dispatch=iV.bind(null,er,h),[N.memoizedState,h]},useRef:function(h){var m=os();return h={current:h},m.memoizedState=h},useState:v5,useDebugValue:Ck,useDeferredValue:function(h){return os().memoizedState=h},useTransition:function(){var h=v5(!1),m=h[0];return h=aV.bind(null,h[1]),os().memoizedState=h,[m,h]},useMutableSource:function(){},useSyncExternalStore:function(h,m,k){var N=er,I=os();if(an){if(k===void 0)throw Error(i(407));k=k()}else{if(k=m(),Yr===null)throw Error(i(349));ec&30||f5(N,m,k)}I.memoizedState=k;var M={value:k,getSnapshot:m};return I.queue=M,w5(g5.bind(null,N,M,h),[h]),N.flags|=2048,Lh(9,m5.bind(null,N,M,k,m),void 0,null),k},useId:function(){var h=os(),m=Yr.identifierPrefix;if(an){var k=ca,N=To;k=(N&~(1<<32-Ii(N)-1)).toString(32)+k,m=":"+m+"R"+k,k=Ah++,0<k&&(m+="H"+k.toString(32)),m+=":"}else k=rV++,m=":"+m+"r"+k.toString(32)+":";return h.memoizedState=m},unstable_isNewReconciler:!1},lV={readContext:qi,useCallback:N5,useContext:qi,useEffect:Sk,useImperativeHandle:E5,useInsertionEffect:k5,useLayoutEffect:S5,useMemo:T5,useReducer:wk,useRef:x5,useState:function(){return wk(Dh)},useDebugValue:Ck,useDeferredValue:function(h){var m=Xi();return I5(m,Ar.memoizedState,h)},useTransition:function(){var h=wk(Dh)[0],m=Xi().memoizedState;return[h,m]},useMutableSource:p5,useSyncExternalStore:h5,useId:_5,unstable_isNewReconciler:!1},uV={readContext:qi,useCallback:N5,useContext:qi,useEffect:Sk,useImperativeHandle:E5,useInsertionEffect:k5,useLayoutEffect:S5,useMemo:T5,useReducer:kk,useRef:x5,useState:function(){return kk(Dh)},useDebugValue:Ck,useDeferredValue:function(h){var m=Xi();return Ar===null?m.memoizedState=h:I5(m,Ar.memoizedState,h)},useTransition:function(){var h=kk(Dh)[0],m=Xi().memoizedState;return[h,m]},useMutableSource:p5,useSyncExternalStore:h5,useId:_5,unstable_isNewReconciler:!1};function _d(h,m){try{var k="",N=m;do k+=nV(N),N=N.return;while(N);var I=k}catch(M){I=`
Error generating stack: `+M.message+`
`+M.stack}return{value:h,source:m,stack:I,digest:null}}function Ek(h,m,k){return{value:h,source:null,stack:k??null,digest:m??null}}function Nk(h,m){try{console.error(m.value)}catch(k){setTimeout(function(){throw k})}}var cV=typeof WeakMap=="function"?WeakMap:Map;function M5(h,m,k){k=js(-1,k),k.tag=3,k.payload={element:null};var N=m.value;return k.callback=function(){s1||(s1=!0,Gk=N),Nk(h,m)},k}function P5(h,m,k){k=js(-1,k),k.tag=3;var N=h.type.getDerivedStateFromError;if(typeof N=="function"){var I=m.value;k.payload=function(){return N(I)},k.callback=function(){Nk(h,m)}}var M=h.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(k.callback=function(){Nk(h,m),typeof N!="function"&&(Al===null?Al=new Set([this]):Al.add(this));var G=m.stack;this.componentDidCatch(m.value,{componentStack:G!==null?G:""})}),k}function F5(h,m,k){var N=h.pingCache;if(N===null){N=h.pingCache=new cV;var I=new Set;N.set(m,I)}else I=N.get(m),I===void 0&&(I=new Set,N.set(m,I));I.has(k)||(I.add(k),h=CV.bind(null,h,m,k),m.then(h,h))}function A5(h){do{var m;if((m=h.tag===13)&&(m=h.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return h;h=h.return}while(h!==null);return null}function D5(h,m,k,N,I){return h.mode&1?(h.flags|=65536,h.lanes=I,h):(h===m?h.flags|=65536:(h.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(m=js(-1,1),m.tag=2,Fl(k,m,1))),k.lanes|=1),h)}var dV=o.ReactCurrentOwner,ci=!1;function Ja(h,m,k,N){m.child=h===null?c5(m,null,k,N):Nd(m,h.child,k,N)}function L5(h,m,k,N,I){k=k.render;var M=m.ref;return Ed(m,I),N=vk(h,m,k,N,M,I),k=xk(),h!==null&&!ci?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~I,Us(h,m,I)):(an&&k&&Za(m),m.flags|=1,Ja(h,m,N,I),m.child)}function z5(h,m,k,N,I){if(h===null){var M=k.type;return typeof M=="function"&&!Yk(M)&&M.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(m.tag=15,m.type=M,B5(h,m,M,N,I)):(h=h1(k.type,null,N,m,m.mode,I),h.ref=m.ref,h.return=m,m.child=h)}if(M=h.child,!(h.lanes&I)){var G=M.memoizedProps;if(k=k.compare,k=k!==null?k:F0,k(G,N)&&h.ref===m.ref)return Us(h,m,I)}return m.flags|=1,h=Bl(M,N),h.ref=m.ref,h.return=m,m.child=h}function B5(h,m,k,N,I){if(h!==null){var M=h.memoizedProps;if(F0(M,N)&&h.ref===m.ref)if(ci=!1,m.pendingProps=N=M,(h.lanes&I)!==0)h.flags&131072&&(ci=!0);else return m.lanes=h.lanes,Us(h,m,I)}return Tk(h,m,k,N,I)}function j5(h,m,k){var N=m.pendingProps,I=N.children,M=h!==null?h.memoizedState:null;if(N.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},vn($d,_i),_i|=k;else{if(!(k&1073741824))return h=M!==null?M.baseLanes|k:k,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:h,cachePool:null,transitions:null},m.updateQueue=null,vn($d,_i),_i|=h,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=M!==null?M.baseLanes:k,vn($d,_i),_i|=N}else M!==null?(N=M.baseLanes|k,m.memoizedState=null):N=k,vn($d,_i),_i|=N;return Ja(h,m,I,k),m.child}function U5(h,m){var k=m.ref;(h===null&&k!==null||h!==null&&h.ref!==k)&&(m.flags|=512,m.flags|=2097152)}function Tk(h,m,k,N,I){var M=Ia(k)?Fs:Xr.current;return M=Ml(m,M),Ed(m,I),k=vk(h,m,k,N,M,I),N=xk(),h!==null&&!ci?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~I,Us(h,m,I)):(an&&N&&Za(m),m.flags|=1,Ja(h,m,k,I),m.child)}function V5(h,m,k,N,I){if(Ia(k)){var M=!0;rs(m)}else M=!1;if(Ed(m,I),m.stateNode===null)X0(h,m),o5(m,k,N),pk(m,k,N,I),N=!0;else if(h===null){var G=m.stateNode,ue=m.memoizedProps;G.props=ue;var ye=G.context,Oe=k.contextType;typeof Oe=="object"&&Oe!==null?Oe=qi(Oe):(Oe=Ia(k)?Fs:Xr.current,Oe=Ml(m,Oe));var Xe=k.getDerivedStateFromProps,It=typeof Xe=="function"||typeof G.getSnapshotBeforeUpdate=="function";It||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ue!==N||ye!==Oe)&&s5(m,G,N,Oe),Pl=!1;var Be=m.memoizedState;G.state=Be,z0(m,N,G,I),ye=m.memoizedState,ue!==N||Be!==ye||Ta.current||Pl?(typeof Xe=="function"&&(dk(m,k,Xe,N),ye=m.memoizedState),(ue=Pl||i5(m,k,ue,N,Be,ye,Oe))?(It||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(m.flags|=4194308)):(typeof G.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=N,m.memoizedState=ye),G.props=N,G.state=ye,G.context=Oe,N=ue):(typeof G.componentDidMount=="function"&&(m.flags|=4194308),N=!1)}else{G=m.stateNode,t5(h,m),ue=m.memoizedProps,Oe=m.type===m.elementType?ue:_o(m.type,ue),G.props=Oe,It=m.pendingProps,Be=G.context,ye=k.contextType,typeof ye=="object"&&ye!==null?ye=qi(ye):(ye=Ia(k)?Fs:Xr.current,ye=Ml(m,ye));var zn=k.getDerivedStateFromProps;(Xe=typeof zn=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ue!==It||Be!==ye)&&s5(m,G,N,ye),Pl=!1,Be=m.memoizedState,G.state=Be,z0(m,N,G,I);var Nn=m.memoizedState;ue!==It||Be!==Nn||Ta.current||Pl?(typeof zn=="function"&&(dk(m,k,zn,N),Nn=m.memoizedState),(Oe=Pl||i5(m,k,Oe,N,Be,Nn,ye)||!1)?(Xe||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(N,Nn,ye),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(N,Nn,ye)),typeof G.componentDidUpdate=="function"&&(m.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof G.componentDidUpdate!="function"||ue===h.memoizedProps&&Be===h.memoizedState||(m.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ue===h.memoizedProps&&Be===h.memoizedState||(m.flags|=1024),m.memoizedProps=N,m.memoizedState=Nn),G.props=N,G.state=Nn,G.context=ye,N=Oe):(typeof G.componentDidUpdate!="function"||ue===h.memoizedProps&&Be===h.memoizedState||(m.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ue===h.memoizedProps&&Be===h.memoizedState||(m.flags|=1024),N=!1)}return Ik(h,m,k,N,M,I)}function Ik(h,m,k,N,I,M){U5(h,m);var G=(m.flags&128)!==0;if(!N&&!G)return I&&Yu(m,k,!1),Us(h,m,M);N=m.stateNode,dV.current=m;var ue=G&&typeof k.getDerivedStateFromError!="function"?null:N.render();return m.flags|=1,h!==null&&G?(m.child=Nd(m,h.child,null,M),m.child=Nd(m,null,ue,M)):Ja(h,m,ue,M),m.memoizedState=N.state,I&&Yu(m,k,!0),m.child}function W5(h){var m=h.stateNode;m.pendingContext?O0(h,m.pendingContext,m.pendingContext!==m.context):m.context&&O0(h,m.context,!1),hk(h,m.containerInfo)}function G5(h,m,k,N,I){return Sd(),ak(I),m.flags|=256,Ja(h,m,k,N),m.child}var _k={dehydrated:null,treeContext:null,retryLane:0};function Rk(h){return{baseLanes:h,cachePool:null,transitions:null}}function H5(h,m,k){var N=m.pendingProps,I=Jn.current,M=!1,G=(m.flags&128)!==0,ue;if((ue=G)||(ue=h!==null&&h.memoizedState===null?!1:(I&2)!==0),ue?(M=!0,m.flags&=-129):(h===null||h.memoizedState!==null)&&(I|=1),vn(Jn,I&1),h===null)return rk(m),h=m.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(m.mode&1?cn(h)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(G=N.children,h=N.fallback,M?(N=m.mode,M=m.child,G={mode:"hidden",children:G},!(N&1)&&M!==null?(M.childLanes=0,M.pendingProps=G):M=f1(G,N,0,null),h=ic(h,N,k,null),M.return=m,h.return=m,M.sibling=h,m.child=M,m.child.memoizedState=Rk(k),m.memoizedState=_k,h):$k(m,G));if(I=h.memoizedState,I!==null&&(ue=I.dehydrated,ue!==null))return pV(h,m,G,N,ue,I,k);if(M){M=N.fallback,G=m.mode,I=h.child,ue=I.sibling;var ye={mode:"hidden",children:N.children};return!(G&1)&&m.child!==I?(N=m.child,N.childLanes=0,N.pendingProps=ye,m.deletions=null):(N=Bl(I,ye),N.subtreeFlags=I.subtreeFlags&14680064),ue!==null?M=Bl(ue,M):(M=ic(M,G,k,null),M.flags|=2),M.return=m,N.return=m,N.sibling=M,m.child=N,N=M,M=m.child,G=h.child.memoizedState,G=G===null?Rk(k):{baseLanes:G.baseLanes|k,cachePool:null,transitions:G.transitions},M.memoizedState=G,M.childLanes=h.childLanes&~k,m.memoizedState=_k,N}return M=h.child,h=M.sibling,N=Bl(M,{mode:"visible",children:N.children}),!(m.mode&1)&&(N.lanes=k),N.return=m,N.sibling=null,h!==null&&(k=m.deletions,k===null?(m.deletions=[h],m.flags|=16):k.push(h)),m.child=N,m.memoizedState=null,N}function $k(h,m){return m=f1({mode:"visible",children:m},h.mode,0,null),m.return=h,h.child=m}function K0(h,m,k,N){return N!==null&&ak(N),Nd(m,h.child,null,k),h=$k(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function pV(h,m,k,N,I,M,G){if(k)return m.flags&256?(m.flags&=-257,N=Ek(Error(i(422))),K0(h,m,G,N)):m.memoizedState!==null?(m.child=h.child,m.flags|=128,null):(M=N.fallback,I=m.mode,N=f1({mode:"visible",children:N.children},I,0,null),M=ic(M,I,G,null),M.flags|=2,N.return=m,M.return=m,N.sibling=M,m.child=N,m.mode&1&&Nd(m,h.child,null,G),m.child.memoizedState=Rk(G),m.memoizedState=_k,M);if(!(m.mode&1))return K0(h,m,G,null);if(cn(I))return N=ft(I).digest,M=Error(i(419)),N=Ek(M,N,void 0),K0(h,m,G,N);if(k=(G&h.childLanes)!==0,ci||k){if(N=Yr,N!==null){switch(G&-G){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}I=I&(N.suspendedLanes|G)?0:I,I!==0&&I!==M.retryLane&&(M.retryLane=I,as(h,I),Qi(N,h,I,-1))}return Qk(),N=Ek(Error(i(421))),K0(h,m,G,N)}return bt(I)?(m.flags|=128,m.child=h.child,m=EV.bind(null,h),Jt(I,m),null):(h=M.treeContext,Te&&(da=br(I),ur=m,an=!0,Io=null,Bs=!1,h!==null&&(mn[Mn++]=To,mn[Mn++]=ca,mn[Mn++]=ua,To=h.id,ca=h.overflow,ua=m)),m=$k(m,N.children),m.flags|=4096,m)}function q5(h,m,k){h.lanes|=m;var N=h.alternate;N!==null&&(N.lanes|=m),lk(h.return,m,k)}function Ok(h,m,k,N,I){var M=h.memoizedState;M===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:N,tail:k,tailMode:I}:(M.isBackwards=m,M.rendering=null,M.renderingStartTime=0,M.last=N,M.tail=k,M.tailMode=I)}function K5(h,m,k){var N=m.pendingProps,I=N.revealOrder,M=N.tail;if(Ja(h,m,N.children,k),N=Jn.current,N&2)N=N&1|2,m.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&q5(h,k,m);else if(h.tag===19)q5(h,k,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}N&=1}if(vn(Jn,N),!(m.mode&1))m.memoizedState=null;else switch(I){case"forwards":for(k=m.child,I=null;k!==null;)h=k.alternate,h!==null&&U0(h)===null&&(I=k),k=k.sibling;k=I,k===null?(I=m.child,m.child=null):(I=k.sibling,k.sibling=null),Ok(m,!1,I,k,M);break;case"backwards":for(k=null,I=m.child,m.child=null;I!==null;){if(h=I.alternate,h!==null&&U0(h)===null){m.child=I;break}h=I.sibling,I.sibling=k,k=I,I=h}Ok(m,!0,k,null,M);break;case"together":Ok(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function X0(h,m){!(m.mode&1)&&h!==null&&(h.alternate=null,m.alternate=null,m.flags|=2)}function Us(h,m,k){if(h!==null&&(m.dependencies=h.dependencies),tc|=m.lanes,!(k&m.childLanes))return null;if(h!==null&&m.child!==h.child)throw Error(i(153));if(m.child!==null){for(h=m.child,k=Bl(h,h.pendingProps),m.child=k,k.return=m;h.sibling!==null;)h=h.sibling,k=k.sibling=Bl(h,h.pendingProps),k.return=m;k.sibling=null}return m.child}function hV(h,m,k){switch(m.tag){case 3:W5(m),Sd();break;case 5:d5(m);break;case 1:Ia(m.type)&&rs(m);break;case 4:hk(m,m.stateNode.containerInfo);break;case 10:J_(m,m.type._context,m.memoizedProps.value);break;case 13:var N=m.memoizedState;if(N!==null)return N.dehydrated!==null?(vn(Jn,Jn.current&1),m.flags|=128,null):k&m.child.childLanes?H5(h,m,k):(vn(Jn,Jn.current&1),h=Us(h,m,k),h!==null?h.sibling:null);vn(Jn,Jn.current&1);break;case 19:if(N=(k&m.childLanes)!==0,h.flags&128){if(N)return K5(h,m,k);m.flags|=128}var I=m.memoizedState;if(I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),vn(Jn,Jn.current),N)break;return null;case 22:case 23:return m.lanes=0,j5(h,m,k)}return Us(h,m,k)}function ss(h){h.flags|=4}function X5(h,m){if(h!==null&&h.child===m.child)return!0;if(m.flags&16)return!1;for(h=m.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var zh,Bh,Q0,Y0;if(Ne)zh=function(h,m){for(var k=m.child;k!==null;){if(k.tag===5||k.tag===6)te(h,k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===m)break;for(;k.sibling===null;){if(k.return===null||k.return===m)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},Bh=function(){},Q0=function(h,m,k,N,I){if(h=h.memoizedProps,h!==N){var M=m.stateNode,G=is(Ki.current);k=he(M,k,h,N,I,G),(m.updateQueue=k)&&ss(m)}},Y0=function(h,m,k,N){k!==N&&ss(m)};else if(Se){zh=function(h,m,k,N){for(var I=m.child;I!==null;){if(I.tag===5){var M=I.stateNode;k&&N&&(M=ze(M,I.type,I.memoizedProps,I)),te(h,M)}else if(I.tag===6)M=I.stateNode,k&&N&&(M=it(M,I.memoizedProps,I)),te(h,M);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)M=I.child,M!==null&&(M.return=I),zh(h,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===m)break;for(;I.sibling===null;){if(I.return===null||I.return===m)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};var Q5=function(h,m,k,N){for(var I=m.child;I!==null;){if(I.tag===5){var M=I.stateNode;k&&N&&(M=ze(M,I.type,I.memoizedProps,I)),fe(h,M)}else if(I.tag===6)M=I.stateNode,k&&N&&(M=it(M,I.memoizedProps,I)),fe(h,M);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)M=I.child,M!==null&&(M.return=I),Q5(h,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===m)break;for(;I.sibling===null;){if(I.return===null||I.return===m)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};Bh=function(h,m){var k=m.stateNode;if(!X5(h,m)){h=k.containerInfo;var N=le(h);Q5(N,m,!1,!1),k.pendingChildren=N,ss(m),xe(h,N)}},Q0=function(h,m,k,N,I){var M=h.stateNode,G=h.memoizedProps;if((h=X5(h,m))&&G===N)m.stateNode=M;else{var ue=m.stateNode,ye=is(Ki.current),Oe=null;G!==N&&(Oe=he(ue,k,G,N,I,ye)),h&&Oe===null?m.stateNode=M:(M=dt(M,Oe,k,G,N,m,h,ue),oe(M,k,N,I,ye)&&ss(m),m.stateNode=M,h?ss(m):zh(M,m,!1,!1))}},Y0=function(h,m,k,N){k!==N?(h=is(Td.current),k=is(Ki.current),m.stateNode=de(N,h,k,m),ss(m)):m.stateNode=h.stateNode}}else Bh=function(){},Q0=function(){},Y0=function(){};function jh(h,m){if(!an)switch(h.tailMode){case"hidden":m=h.tail;for(var k=null;m!==null;)m.alternate!==null&&(k=m),m=m.sibling;k===null?h.tail=null:k.sibling=null;break;case"collapsed":k=h.tail;for(var N=null;k!==null;)k.alternate!==null&&(N=k),k=k.sibling;N===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:N.sibling=null}}function $a(h){var m=h.alternate!==null&&h.alternate.child===h.child,k=0,N=0;if(m)for(var I=h.child;I!==null;)k|=I.lanes|I.childLanes,N|=I.subtreeFlags&14680064,N|=I.flags&14680064,I.return=h,I=I.sibling;else for(I=h.child;I!==null;)k|=I.lanes|I.childLanes,N|=I.subtreeFlags,N|=I.flags,I.return=h,I=I.sibling;return h.subtreeFlags|=N,h.childLanes=k,m}function fV(h,m,k){var N=m.pendingProps;switch(zs(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $a(m),null;case 1:return Ia(m.type)&&wd(),$a(m),null;case 3:return k=m.stateNode,Id(),En(Ta),En(Xr),gk(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(h===null||h.child===null)&&(P0(m)?ss(m):h===null||h.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,Io!==null&&(Kk(Io),Io=null))),Bh(h,m),$a(m),null;case 5:fk(m),k=is(Td.current);var I=m.type;if(h!==null&&m.stateNode!=null)Q0(h,m,I,N,k),h.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!N){if(m.stateNode===null)throw Error(i(166));return $a(m),null}if(h=is(Ki.current),P0(m)){if(!Te)throw Error(i(175));h=ts(m.stateNode,m.type,m.memoizedProps,k,h,m,!Bs),m.updateQueue=h,h!==null&&ss(m)}else{var M=J(I,N,k,h,m);zh(M,m,!1,!1),m.stateNode=M,oe(M,I,N,k,h)&&ss(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return $a(m),null;case 6:if(h&&m.stateNode!=null)Y0(h,m,h.memoizedProps,N);else{if(typeof N!="string"&&m.stateNode===null)throw Error(i(166));if(h=is(Td.current),k=is(Ki.current),P0(m)){if(!Te)throw Error(i(176));if(h=m.stateNode,k=m.memoizedProps,(N=Wi(h,k,m,!Bs))&&(I=ur,I!==null))switch(I.tag){case 3:rn(I.stateNode.containerInfo,h,k,(I.mode&1)!==0);break;case 5:fn(I.type,I.memoizedProps,I.stateNode,h,k,(I.mode&1)!==0)}N&&ss(m)}else m.stateNode=de(N,h,k,m)}return $a(m),null;case 13:if(En(Jn),N=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(an&&da!==null&&m.mode&1&&!(m.flags&128))Z_(),Sd(),m.flags|=98560,I=!1;else if(I=P0(m),N!==null&&N.dehydrated!==null){if(h===null){if(!I)throw Error(i(318));if(!Te)throw Error(i(344));if(I=m.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(i(317));Na(I,m)}else Sd(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;$a(m),I=!1}else Io!==null&&(Kk(Io),Io=null),I=!0;if(!I)return m.flags&65536?m:null}return m.flags&128?(m.lanes=k,m):(k=N!==null,k!==(h!==null&&h.memoizedState!==null)&&k&&(m.child.flags|=8192,m.mode&1&&(h===null||Jn.current&1?Dr===0&&(Dr=3):Qk())),m.updateQueue!==null&&(m.flags|=4),$a(m),null);case 4:return Id(),Bh(h,m),h===null&&We(m.stateNode.containerInfo),$a(m),null;case 10:return sk(m.type._context),$a(m),null;case 17:return Ia(m.type)&&wd(),$a(m),null;case 19:if(En(Jn),I=m.memoizedState,I===null)return $a(m),null;if(N=(m.flags&128)!==0,M=I.rendering,M===null)if(N)jh(I,!1);else{if(Dr!==0||h!==null&&h.flags&128)for(h=m.child;h!==null;){if(M=U0(h),M!==null){for(m.flags|=128,jh(I,!1),h=M.updateQueue,h!==null&&(m.updateQueue=h,m.flags|=4),m.subtreeFlags=0,h=k,k=m.child;k!==null;)N=k,I=h,N.flags&=14680066,M=N.alternate,M===null?(N.childLanes=0,N.lanes=I,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=M.childLanes,N.lanes=M.lanes,N.child=M.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=M.memoizedProps,N.memoizedState=M.memoizedState,N.updateQueue=M.updateQueue,N.type=M.type,I=M.dependencies,N.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext}),k=k.sibling;return vn(Jn,Jn.current&1|2),m.child}h=h.sibling}I.tail!==null&&Ye()>Wk&&(m.flags|=128,N=!0,jh(I,!1),m.lanes=4194304)}else{if(!N)if(h=U0(M),h!==null){if(m.flags|=128,N=!0,h=h.updateQueue,h!==null&&(m.updateQueue=h,m.flags|=4),jh(I,!0),I.tail===null&&I.tailMode==="hidden"&&!M.alternate&&!an)return $a(m),null}else 2*Ye()-I.renderingStartTime>Wk&&k!==1073741824&&(m.flags|=128,N=!0,jh(I,!1),m.lanes=4194304);I.isBackwards?(M.sibling=m.child,m.child=M):(h=I.last,h!==null?h.sibling=M:m.child=M,I.last=M)}return I.tail!==null?(m=I.tail,I.rendering=m,I.tail=m.sibling,I.renderingStartTime=Ye(),m.sibling=null,h=Jn.current,vn(Jn,N?h&1|2:h&1),m):($a(m),null);case 22:case 23:return Xk(),k=m.memoizedState!==null,h!==null&&h.memoizedState!==null!==k&&(m.flags|=8192),k&&m.mode&1?_i&1073741824&&($a(m),Ne&&m.subtreeFlags&6&&(m.flags|=8192)):$a(m),null;case 24:return null;case 25:return null}throw Error(i(156,m.tag))}function mV(h,m){switch(zs(m),m.tag){case 1:return Ia(m.type)&&wd(),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return Id(),En(Ta),En(Xr),gk(),h=m.flags,h&65536&&!(h&128)?(m.flags=h&-65537|128,m):null;case 5:return fk(m),null;case 13:if(En(Jn),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(i(340));Sd()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return En(Jn),null;case 4:return Id(),null;case 10:return sk(m.type._context),null;case 22:case 23:return Xk(),null;case 24:return null;default:return null}}var Z0=!1,Oa=!1,gV=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Rd(h,m){var k=h.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(N){Hn(h,m,N)}else k.current=null}function Y5(h,m,k){try{k()}catch(N){Hn(h,m,N)}}var Z5=!1;function yV(h,m){for(L(h.containerInfo),Ge=m;Ge!==null;)if(h=Ge,m=h.child,(h.subtreeFlags&1028)!==0&&m!==null)m.return=h,Ge=m;else for(;Ge!==null;){h=Ge;try{var k=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var N=k.memoizedProps,I=k.memoizedState,M=h.stateNode,G=M.getSnapshotBeforeUpdate(h.elementType===h.type?N:_o(h.type,N),I);M.__reactInternalSnapshotBeforeUpdate=G}break;case 3:Ne&&Vn(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(ue){Hn(h,h.return,ue)}if(m=h.sibling,m!==null){m.return=h.return,Ge=m;break}Ge=h.return}return k=Z5,Z5=!1,k}function Uh(h,m,k){var N=m.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var I=N=N.next;do{if((I.tag&h)===h){var M=I.destroy;I.destroy=void 0,M!==void 0&&Y5(m,k,M)}I=I.next}while(I!==N)}}function J0(h,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var k=m=m.next;do{if((k.tag&h)===h){var N=k.create;k.destroy=N()}k=k.next}while(k!==m)}}function Mk(h){var m=h.ref;if(m!==null){var k=h.stateNode;switch(h.tag){case 5:h=Y(k);break;default:h=k}typeof m=="function"?m(h):m.current=h}}function J5(h){var m=h.alternate;m!==null&&(h.alternate=null,J5(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&lt(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function eR(h){return h.tag===5||h.tag===3||h.tag===4}function tR(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||eR(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Pk(h,m,k){var N=h.tag;if(N===5||N===6)h=h.stateNode,m?un(k,h,m):yr(k,h);else if(N!==4&&(h=h.child,h!==null))for(Pk(h,m,k),h=h.sibling;h!==null;)Pk(h,m,k),h=h.sibling}function Fk(h,m,k){var N=h.tag;if(N===5||N===6)h=h.stateNode,m?Xa(k,h,m):hn(k,h);else if(N!==4&&(h=h.child,h!==null))for(Fk(h,m,k),h=h.sibling;h!==null;)Fk(h,m,k),h=h.sibling}var pa=null,Ro=!1;function ls(h,m,k){for(k=k.child;k!==null;)Ak(h,m,k),k=k.sibling}function Ak(h,m,k){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(ct,k)}catch{}switch(k.tag){case 5:Oa||Rd(k,m);case 6:if(Ne){var N=pa,I=Ro;pa=null,ls(h,m,k),pa=N,Ro=I,pa!==null&&(Ro?Qa(pa,k.stateNode):la(pa,k.stateNode))}else ls(h,m,k);break;case 18:Ne&&pa!==null&&(Ro?ns(pa,k.stateNode):Rl(pa,k.stateNode));break;case 4:Ne?(N=pa,I=Ro,pa=k.stateNode.containerInfo,Ro=!0,ls(h,m,k),pa=N,Ro=I):(Se&&(N=k.stateNode.containerInfo,I=le(N),_e(N,I)),ls(h,m,k));break;case 0:case 11:case 14:case 15:if(!Oa&&(N=k.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){I=N=N.next;do{var M=I,G=M.destroy;M=M.tag,G!==void 0&&(M&2||M&4)&&Y5(k,m,G),I=I.next}while(I!==N)}ls(h,m,k);break;case 1:if(!Oa&&(Rd(k,m),N=k.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=k.memoizedProps,N.state=k.memoizedState,N.componentWillUnmount()}catch(ue){Hn(k,m,ue)}ls(h,m,k);break;case 21:ls(h,m,k);break;case 22:k.mode&1?(Oa=(N=Oa)||k.memoizedState!==null,ls(h,m,k),Oa=N):ls(h,m,k);break;default:ls(h,m,k)}}function nR(h){var m=h.updateQueue;if(m!==null){h.updateQueue=null;var k=h.stateNode;k===null&&(k=h.stateNode=new gV),m.forEach(function(N){var I=NV.bind(null,h,N);k.has(N)||(k.add(N),N.then(I,I))})}}function $o(h,m){var k=m.deletions;if(k!==null)for(var N=0;N<k.length;N++){var I=k[N];try{var M=h,G=m;if(Ne){var ue=G;e:for(;ue!==null;){switch(ue.tag){case 5:pa=ue.stateNode,Ro=!1;break e;case 3:pa=ue.stateNode.containerInfo,Ro=!0;break e;case 4:pa=ue.stateNode.containerInfo,Ro=!0;break e}ue=ue.return}if(pa===null)throw Error(i(160));Ak(M,G,I),pa=null,Ro=!1}else Ak(M,G,I);var ye=I.alternate;ye!==null&&(ye.return=null),I.return=null}catch(Oe){Hn(I,m,Oe)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)rR(m,h),m=m.sibling}function rR(h,m){var k=h.alternate,N=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if($o(m,h),us(h),N&4){try{Uh(3,h,h.return),J0(3,h)}catch(Be){Hn(h,h.return,Be)}try{Uh(5,h,h.return)}catch(Be){Hn(h,h.return,Be)}}break;case 1:$o(m,h),us(h),N&512&&k!==null&&Rd(k,k.return);break;case 5:if($o(m,h),us(h),N&512&&k!==null&&Rd(k,k.return),Ne){if(h.flags&32){var I=h.stateNode;try{Ea(I)}catch(Be){Hn(h,h.return,Be)}}if(N&4&&(I=h.stateNode,I!=null)){var M=h.memoizedProps;if(k=k!==null?k.memoizedProps:M,N=h.type,m=h.updateQueue,h.updateQueue=null,m!==null)try{li(I,m,N,k,M,h)}catch(Be){Hn(h,h.return,Be)}}}break;case 6:if($o(m,h),us(h),N&4&&Ne){if(h.stateNode===null)throw Error(i(162));I=h.stateNode,M=h.memoizedProps,k=k!==null?k.memoizedProps:M;try{yn(I,k,M)}catch(Be){Hn(h,h.return,Be)}}break;case 3:if($o(m,h),us(h),N&4){if(Ne&&Te&&k!==null&&k.memoizedState.isDehydrated)try{Ku(m.containerInfo)}catch(Be){Hn(h,h.return,Be)}if(Se){I=m.containerInfo,M=m.pendingChildren;try{_e(I,M)}catch(Be){Hn(h,h.return,Be)}}}break;case 4:if($o(m,h),us(h),N&4&&Se){M=h.stateNode,I=M.containerInfo,M=M.pendingChildren;try{_e(I,M)}catch(Be){Hn(h,h.return,Be)}}break;case 13:$o(m,h),us(h),I=h.child,I.flags&8192&&(M=I.memoizedState!==null,I.stateNode.isHidden=M,!M||I.alternate!==null&&I.alternate.memoizedState!==null||(Vk=Ye())),N&4&&nR(h);break;case 22:var G=k!==null&&k.memoizedState!==null;if(h.mode&1?(Oa=(k=Oa)||G,$o(m,h),Oa=k):$o(m,h),us(h),N&8192){if(k=h.memoizedState!==null,(h.stateNode.isHidden=k)&&!G&&h.mode&1)for(Ge=h,N=h.child;N!==null;){for(m=Ge=N;Ge!==null;){G=Ge;var ue=G.child;switch(G.tag){case 0:case 11:case 14:case 15:Uh(4,G,G.return);break;case 1:Rd(G,G.return);var ye=G.stateNode;if(typeof ye.componentWillUnmount=="function"){var Oe=G,Xe=G.return;try{var It=Oe;ye.props=It.memoizedProps,ye.state=It.memoizedState,ye.componentWillUnmount()}catch(Be){Hn(Oe,Xe,Be)}}break;case 5:Rd(G,G.return);break;case 22:if(G.memoizedState!==null){oR(m);continue}}ue!==null?(ue.return=G,Ge=ue):oR(m)}N=N.sibling}if(Ne){e:if(N=null,Ne)for(m=h;;){if(m.tag===5){if(N===null){N=m;try{I=m.stateNode,k?So(I):es(m.stateNode,m.memoizedProps)}catch(Be){Hn(h,h.return,Be)}}}else if(m.tag===6){if(N===null)try{M=m.stateNode,k?Kr(M):or(M,m.memoizedProps)}catch(Be){Hn(h,h.return,Be)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;N===m&&(N=null),m=m.return}N===m&&(N=null),m.sibling.return=m.return,m=m.sibling}}}break;case 19:$o(m,h),us(h),N&4&&nR(h);break;case 21:break;default:$o(m,h),us(h)}}function us(h){var m=h.flags;if(m&2){try{if(Ne){e:{for(var k=h.return;k!==null;){if(eR(k)){var N=k;break e}k=k.return}throw Error(i(160))}switch(N.tag){case 5:var I=N.stateNode;N.flags&32&&(Ea(I),N.flags&=-33);var M=tR(h);Fk(h,M,I);break;case 3:case 4:var G=N.stateNode.containerInfo,ue=tR(h);Pk(h,ue,G);break;default:throw Error(i(161))}}}catch(ye){Hn(h,h.return,ye)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function bV(h,m,k){Ge=h,aR(h)}function aR(h,m,k){for(var N=(h.mode&1)!==0;Ge!==null;){var I=Ge,M=I.child;if(I.tag===22&&N){var G=I.memoizedState!==null||Z0;if(!G){var ue=I.alternate,ye=ue!==null&&ue.memoizedState!==null||Oa;ue=Z0;var Oe=Oa;if(Z0=G,(Oa=ye)&&!Oe)for(Ge=I;Ge!==null;)G=Ge,ye=G.child,G.tag===22&&G.memoizedState!==null?sR(I):ye!==null?(ye.return=G,Ge=ye):sR(I);for(;M!==null;)Ge=M,aR(M),M=M.sibling;Ge=I,Z0=ue,Oa=Oe}iR(h)}else I.subtreeFlags&8772&&M!==null?(M.return=I,Ge=M):iR(h)}}function iR(h){for(;Ge!==null;){var m=Ge;if(m.flags&8772){var k=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:Oa||J0(5,m);break;case 1:var N=m.stateNode;if(m.flags&4&&!Oa)if(k===null)N.componentDidMount();else{var I=m.elementType===m.type?k.memoizedProps:_o(m.type,k.memoizedProps);N.componentDidUpdate(I,k.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var M=m.updateQueue;M!==null&&r5(m,M,N);break;case 3:var G=m.updateQueue;if(G!==null){if(k=null,m.child!==null)switch(m.child.tag){case 5:k=Y(m.child.stateNode);break;case 1:k=m.child.stateNode}r5(m,G,k)}break;case 5:var ue=m.stateNode;k===null&&m.flags&4&&Zn(ue,m.type,m.memoizedProps,m);break;case 6:break;case 4:break;case 12:break;case 13:if(Te&&m.memoizedState===null){var ye=m.alternate;if(ye!==null){var Oe=ye.memoizedState;if(Oe!==null){var Xe=Oe.dehydrated;Xe!==null&&Xu(Xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Oa||m.flags&512&&Mk(m)}catch(It){Hn(m,m.return,It)}}if(m===h){Ge=null;break}if(k=m.sibling,k!==null){k.return=m.return,Ge=k;break}Ge=m.return}}function oR(h){for(;Ge!==null;){var m=Ge;if(m===h){Ge=null;break}var k=m.sibling;if(k!==null){k.return=m.return,Ge=k;break}Ge=m.return}}function sR(h){for(;Ge!==null;){var m=Ge;try{switch(m.tag){case 0:case 11:case 15:var k=m.return;try{J0(4,m)}catch(ye){Hn(m,k,ye)}break;case 1:var N=m.stateNode;if(typeof N.componentDidMount=="function"){var I=m.return;try{N.componentDidMount()}catch(ye){Hn(m,I,ye)}}var M=m.return;try{Mk(m)}catch(ye){Hn(m,M,ye)}break;case 5:var G=m.return;try{Mk(m)}catch(ye){Hn(m,G,ye)}}}catch(ye){Hn(m,m.return,ye)}if(m===h){Ge=null;break}var ue=m.sibling;if(ue!==null){ue.return=m.return,Ge=ue;break}Ge=m.return}}var e1=0,t1=1,n1=2,r1=3,a1=4;if(typeof Symbol=="function"&&Symbol.for){var Vh=Symbol.for;e1=Vh("selector.component"),t1=Vh("selector.has_pseudo_class"),n1=Vh("selector.role"),r1=Vh("selector.test_id"),a1=Vh("selector.text")}function Dk(h){var m=Pe(h);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(i(364));return m}if(h=Vt(h),h===null)throw Error(i(362));return h.stateNode.current}function Lk(h,m){switch(m.$$typeof){case e1:if(h.type===m.value)return!0;break;case t1:e:{m=m.value,h=[h,0];for(var k=0;k<h.length;){var N=h[k++],I=h[k++],M=m[I];if(N.tag!==5||!Gt(N)){for(;M!=null&&Lk(N,M);)I++,M=m[I];if(I===m.length){m=!0;break e}else for(N=N.child;N!==null;)h.push(N,I),N=N.sibling}}m=!1}return m;case n1:if(h.tag===5&&Ot(h.stateNode,m.value))return!0;break;case a1:if((h.tag===5||h.tag===6)&&(h=Wt(h),h!==null&&0<=h.indexOf(m.value)))return!0;break;case r1:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function zk(h){switch(h.$$typeof){case e1:return"<"+(E(h.value)||"Unknown")+">";case t1:return":has("+(zk(h)||"")+")";case n1:return'[role="'+h.value+'"]';case a1:return'"'+h.value+'"';case r1:return'[data-testname="'+h.value+'"]';default:throw Error(i(365))}}function lR(h,m){var k=[];h=[h,0];for(var N=0;N<h.length;){var I=h[N++],M=h[N++],G=m[M];if(I.tag!==5||!Gt(I)){for(;G!=null&&Lk(I,G);)M++,G=m[M];if(M===m.length)k.push(I);else for(I=I.child;I!==null;)h.push(I,M),I=I.sibling}}return k}function Bk(h,m){if(!Ve)throw Error(i(363));h=Dk(h),h=lR(h,m),m=[],h=Array.from(h);for(var k=0;k<h.length;){var N=h[k++];if(N.tag===5)Gt(N)||m.push(N.stateNode);else for(N=N.child;N!==null;)h.push(N),N=N.sibling}return m}var vV=Math.ceil,i1=o.ReactCurrentDispatcher,jk=o.ReactCurrentOwner,vr=o.ReactCurrentBatchConfig,jt=0,Yr=null,_r=null,ha=0,_i=0,$d=Gi(0),Dr=0,Wh=null,tc=0,o1=0,Uk=0,Gh=null,di=null,Vk=0,Wk=1/0,Vs=null;function Od(){Wk=Ye()+500}var s1=!1,Gk=null,Al=null,l1=!1,Dl=null,u1=0,Hh=0,Hk=null,c1=-1,d1=0;function Ma(){return jt&6?Ye():c1!==-1?c1:c1=Ye()}function Ll(h){return h.mode&1?jt&2&&ha!==0?ha&-ha:tV.transition!==null?(d1===0&&(d1=ie()),d1):(h=Re,h!==0?h:$e()):1}function Qi(h,m,k,N){if(50<Hh)throw Hh=0,Hk=null,Error(i(185));Ee(h,k,N),(!(jt&2)||h!==Yr)&&(h===Yr&&(!(jt&2)&&(o1|=k),Dr===4&&zl(h,ha)),pi(h,N),k===1&&jt===0&&!(m.mode&1)&&(Od(),Ln&&Nr()))}function pi(h,m){var k=h.callbackNode;W(h,m);var N=Ds(h,h===Yr?ha:0);if(N===0)k!==null&&ot(k),h.callbackNode=null,h.callbackPriority=0;else if(m=N&-N,h.callbackPriority!==m){if(k!=null&&ot(k),m===1)h.tag===0?No(cR.bind(null,h)):Ya(cR.bind(null,h)),Ze?Je(function(){!(jt&6)&&Nr()}):vt(pt,Nr),k=null;else{switch(Ue(N)){case 1:k=pt;break;case 4:k=mt;break;case 16:k=st;break;case 536870912:k=Ct;break;default:k=st}k=vR(k,uR.bind(null,h))}h.callbackPriority=m,h.callbackNode=k}}function uR(h,m){if(c1=-1,d1=0,jt&6)throw Error(i(327));var k=h.callbackNode;if(ac()&&h.callbackNode!==k)return null;var N=Ds(h,h===Yr?ha:0);if(N===0)return null;if(N&30||N&h.expiredLanes||m)m=p1(h,N);else{m=N;var I=jt;jt|=2;var M=hR();(Yr!==h||ha!==m)&&(Vs=null,Od(),nc(h,m));do try{kV();break}catch(ue){pR(h,ue)}while(!0);ok(),i1.current=M,jt=I,_r!==null?m=0:(Yr=null,ha=0,m=Dr)}if(m!==0){if(m===2&&(I=ee(h),I!==0&&(N=I,m=qk(h,I))),m===1)throw k=Wh,nc(h,0),zl(h,N),pi(h,Ye()),k;if(m===6)zl(h,N);else{if(I=h.current.alternate,!(N&30)&&!xV(I)&&(m=p1(h,N),m===2&&(M=ee(h),M!==0&&(N=M,m=qk(h,M))),m===1))throw k=Wh,nc(h,0),zl(h,N),pi(h,Ye()),k;switch(h.finishedWork=I,h.finishedLanes=N,m){case 0:case 1:throw Error(i(345));case 2:rc(h,di,Vs);break;case 3:if(zl(h,N),(N&130023424)===N&&(m=Vk+500-Ye(),10<m)){if(Ds(h,0)!==0)break;if(I=h.suspendedLanes,(I&N)!==N){Ma(),h.pingedLanes|=h.suspendedLanes&I;break}h.timeoutHandle=ke(rc.bind(null,h,di,Vs),m);break}rc(h,di,Vs);break;case 4:if(zl(h,N),(N&4194240)===N)break;for(m=h.eventTimes,I=-1;0<N;){var G=31-Ii(N);M=1<<G,G=m[G],G>I&&(I=G),N&=~M}if(N=I,N=Ye()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*vV(N/1960))-N,10<N){h.timeoutHandle=ke(rc.bind(null,h,di,Vs),N);break}rc(h,di,Vs);break;case 5:rc(h,di,Vs);break;default:throw Error(i(329))}}}return pi(h,Ye()),h.callbackNode===k?uR.bind(null,h):null}function qk(h,m){var k=Gh;return h.current.memoizedState.isDehydrated&&(nc(h,m).flags|=256),h=p1(h,m),h!==2&&(m=di,di=k,m!==null&&Kk(m)),h}function Kk(h){di===null?di=h:di.push.apply(di,h)}function xV(h){for(var m=h;;){if(m.flags&16384){var k=m.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var N=0;N<k.length;N++){var I=k[N],M=I.getSnapshot;I=I.value;try{if(!Ht(M(),I))return!1}catch{return!1}}}if(k=m.child,m.subtreeFlags&16384&&k!==null)k.return=m,m=k;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function zl(h,m){for(m&=~Uk,m&=~o1,h.suspendedLanes|=m,h.pingedLanes&=~m,h=h.expirationTimes;0<m;){var k=31-Ii(m),N=1<<k;h[k]=-1,m&=~N}}function cR(h){if(jt&6)throw Error(i(327));ac();var m=Ds(h,0);if(!(m&1))return pi(h,Ye()),null;var k=p1(h,m);if(h.tag!==0&&k===2){var N=ee(h);N!==0&&(m=N,k=qk(h,N))}if(k===1)throw k=Wh,nc(h,0),zl(h,m),pi(h,Ye()),k;if(k===6)throw Error(i(345));return h.finishedWork=h.current.alternate,h.finishedLanes=m,rc(h,di,Vs),pi(h,Ye()),null}function dR(h){Dl!==null&&Dl.tag===0&&!(jt&6)&&ac();var m=jt;jt|=1;var k=vr.transition,N=Re;try{if(vr.transition=null,Re=1,h)return h()}finally{Re=N,vr.transition=k,jt=m,!(jt&6)&&Nr()}}function Xk(){_i=$d.current,En($d)}function nc(h,m){h.finishedWork=null,h.finishedLanes=0;var k=h.timeoutHandle;if(k!==se&&(h.timeoutHandle=se,K(k)),_r!==null)for(k=_r.return;k!==null;){var N=k;switch(zs(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&wd();break;case 3:Id(),En(Ta),En(Xr),gk();break;case 5:fk(N);break;case 4:Id();break;case 13:En(Jn);break;case 19:En(Jn);break;case 10:sk(N.type._context);break;case 22:case 23:Xk()}k=k.return}if(Yr=h,_r=h=Bl(h.current,null),ha=_i=m,Dr=0,Wh=null,Uk=o1=tc=0,di=Gh=null,Ju!==null){for(m=0;m<Ju.length;m++)if(k=Ju[m],N=k.interleaved,N!==null){k.interleaved=null;var I=N.next,M=k.pending;if(M!==null){var G=M.next;M.next=I,N.next=G}k.pending=N}Ju=null}return h}function pR(h,m){do{var k=_r;try{if(ok(),V0.current=q0,W0){for(var N=er.memoizedState;N!==null;){var I=N.queue;I!==null&&(I.pending=null),N=N.next}W0=!1}if(ec=0,Qr=Ar=er=null,Fh=!1,Ah=0,jk.current=null,k===null||k.return===null){Dr=1,Wh=m,_r=null;break}e:{var M=h,G=k.return,ue=k,ye=m;if(m=ha,ue.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Oe=ye,Xe=ue,It=Xe.tag;if(!(Xe.mode&1)&&(It===0||It===11||It===15)){var Be=Xe.alternate;Be?(Xe.updateQueue=Be.updateQueue,Xe.memoizedState=Be.memoizedState,Xe.lanes=Be.lanes):(Xe.updateQueue=null,Xe.memoizedState=null)}var zn=A5(G);if(zn!==null){zn.flags&=-257,D5(zn,G,ue,M,m),zn.mode&1&&F5(M,Oe,m),m=zn,ye=Oe;var Nn=m.updateQueue;if(Nn===null){var hi=new Set;hi.add(ye),m.updateQueue=hi}else Nn.add(ye);break e}else{if(!(m&1)){F5(M,Oe,m),Qk();break e}ye=Error(i(426))}}else if(an&&ue.mode&1){var Ws=A5(G);if(Ws!==null){!(Ws.flags&65536)&&(Ws.flags|=256),D5(Ws,G,ue,M,m),ak(_d(ye,ue));break e}}M=ye=_d(ye,ue),Dr!==4&&(Dr=2),Gh===null?Gh=[M]:Gh.push(M),M=G;do{switch(M.tag){case 3:M.flags|=65536,m&=-m,M.lanes|=m;var ge=M5(M,ye,m);n5(M,ge);break e;case 1:ue=ye;var ce=M.type,we=M.stateNode;if(!(M.flags&128)&&(typeof ce.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(Al===null||!Al.has(we)))){M.flags|=65536,m&=-m,M.lanes|=m;var je=P5(M,ue,m);n5(M,je);break e}}M=M.return}while(M!==null)}mR(k)}catch(ht){m=ht,_r===k&&k!==null&&(_r=k=k.return);continue}break}while(!0)}function hR(){var h=i1.current;return i1.current=q0,h===null?q0:h}function Qk(){(Dr===0||Dr===3||Dr===2)&&(Dr=4),Yr===null||!(tc&268435455)&&!(o1&268435455)||zl(Yr,ha)}function p1(h,m){var k=jt;jt|=2;var N=hR();(Yr!==h||ha!==m)&&(Vs=null,nc(h,m));do try{wV();break}catch(I){pR(h,I)}while(!0);if(ok(),jt=k,i1.current=N,_r!==null)throw Error(i(261));return Yr=null,ha=0,Dr}function wV(){for(;_r!==null;)fR(_r)}function kV(){for(;_r!==null&&!Pt();)fR(_r)}function fR(h){var m=bR(h.alternate,h,_i);h.memoizedProps=h.pendingProps,m===null?mR(h):_r=m,jk.current=null}function mR(h){var m=h;do{var k=m.alternate;if(h=m.return,m.flags&32768){if(k=mV(k,m),k!==null){k.flags&=32767,_r=k;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Dr=6,_r=null;return}}else if(k=fV(k,m,_i),k!==null){_r=k;return}if(m=m.sibling,m!==null){_r=m;return}_r=m=h}while(m!==null);Dr===0&&(Dr=5)}function rc(h,m,k){var N=Re,I=vr.transition;try{vr.transition=null,Re=1,SV(h,m,k,N)}finally{vr.transition=I,Re=N}return null}function SV(h,m,k,N){do ac();while(Dl!==null);if(jt&6)throw Error(i(327));k=h.finishedWork;var I=h.finishedLanes;if(k===null)return null;if(h.finishedWork=null,h.finishedLanes=0,k===h.current)throw Error(i(177));h.callbackNode=null,h.callbackPriority=0;var M=k.lanes|k.childLanes;if(Ae(h,M),h===Yr&&(_r=Yr=null,ha=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||l1||(l1=!0,vR(st,function(){return ac(),null})),M=(k.flags&15990)!==0,k.subtreeFlags&15990||M){M=vr.transition,vr.transition=null;var G=Re;Re=1;var ue=jt;jt|=4,jk.current=null,yV(h,k),rR(k,h),Q(h.containerInfo),h.current=k,bV(k),St(),jt=ue,Re=G,vr.transition=M}else h.current=k;if(l1&&(l1=!1,Dl=h,u1=I),M=h.pendingLanes,M===0&&(Al=null),lr(k.stateNode),pi(h,Ye()),m!==null)for(N=h.onRecoverableError,k=0;k<m.length;k++)I=m[k],N(I.value,{componentStack:I.stack,digest:I.digest});if(s1)throw s1=!1,h=Gk,Gk=null,h;return u1&1&&h.tag!==0&&ac(),M=h.pendingLanes,M&1?h===Hk?Hh++:(Hh=0,Hk=h):Hh=0,Nr(),null}function ac(){if(Dl!==null){var h=Ue(u1),m=vr.transition,k=Re;try{if(vr.transition=null,Re=16>h?16:h,Dl===null)var N=!1;else{if(h=Dl,Dl=null,u1=0,jt&6)throw Error(i(331));var I=jt;for(jt|=4,Ge=h.current;Ge!==null;){var M=Ge,G=M.child;if(Ge.flags&16){var ue=M.deletions;if(ue!==null){for(var ye=0;ye<ue.length;ye++){var Oe=ue[ye];for(Ge=Oe;Ge!==null;){var Xe=Ge;switch(Xe.tag){case 0:case 11:case 15:Uh(8,Xe,M)}var It=Xe.child;if(It!==null)It.return=Xe,Ge=It;else for(;Ge!==null;){Xe=Ge;var Be=Xe.sibling,zn=Xe.return;if(J5(Xe),Xe===Oe){Ge=null;break}if(Be!==null){Be.return=zn,Ge=Be;break}Ge=zn}}}var Nn=M.alternate;if(Nn!==null){var hi=Nn.child;if(hi!==null){Nn.child=null;do{var Ws=hi.sibling;hi.sibling=null,hi=Ws}while(hi!==null)}}Ge=M}}if(M.subtreeFlags&2064&&G!==null)G.return=M,Ge=G;else e:for(;Ge!==null;){if(M=Ge,M.flags&2048)switch(M.tag){case 0:case 11:case 15:Uh(9,M,M.return)}var ge=M.sibling;if(ge!==null){ge.return=M.return,Ge=ge;break e}Ge=M.return}}var ce=h.current;for(Ge=ce;Ge!==null;){G=Ge;var we=G.child;if(G.subtreeFlags&2064&&we!==null)we.return=G,Ge=we;else e:for(G=ce;Ge!==null;){if(ue=Ge,ue.flags&2048)try{switch(ue.tag){case 0:case 11:case 15:J0(9,ue)}}catch(ht){Hn(ue,ue.return,ht)}if(ue===G){Ge=null;break e}var je=ue.sibling;if(je!==null){je.return=ue.return,Ge=je;break e}Ge=ue.return}}if(jt=I,Nr(),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(ct,h)}catch{}N=!0}return N}finally{Re=k,vr.transition=m}}return!1}function gR(h,m,k){m=_d(k,m),m=M5(h,m,1),h=Fl(h,m,1),m=Ma(),h!==null&&(Ee(h,1,m),pi(h,m))}function Hn(h,m,k){if(h.tag===3)gR(h,h,k);else for(;m!==null;){if(m.tag===3){gR(m,h,k);break}else if(m.tag===1){var N=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(Al===null||!Al.has(N))){h=_d(k,h),h=P5(m,h,1),m=Fl(m,h,1),h=Ma(),m!==null&&(Ee(m,1,h),pi(m,h));break}}m=m.return}}function CV(h,m,k){var N=h.pingCache;N!==null&&N.delete(m),m=Ma(),h.pingedLanes|=h.suspendedLanes&k,Yr===h&&(ha&k)===k&&(Dr===4||Dr===3&&(ha&130023424)===ha&&500>Ye()-Vk?nc(h,0):Uk|=k),pi(h,m)}function yR(h,m){m===0&&(h.mode&1?(m=As,As<<=1,!(As&130023424)&&(As=4194304)):m=1);var k=Ma();h=as(h,m),h!==null&&(Ee(h,m,k),pi(h,k))}function EV(h){var m=h.memoizedState,k=0;m!==null&&(k=m.retryLane),yR(h,k)}function NV(h,m){var k=0;switch(h.tag){case 13:var N=h.stateNode,I=h.memoizedState;I!==null&&(k=I.retryLane);break;case 19:N=h.stateNode;break;default:throw Error(i(314))}N!==null&&N.delete(m),yR(h,k)}var bR;bR=function(h,m,k){if(h!==null)if(h.memoizedProps!==m.pendingProps||Ta.current)ci=!0;else{if(!(h.lanes&k)&&!(m.flags&128))return ci=!1,hV(h,m,k);ci=!!(h.flags&131072)}else ci=!1,an&&m.flags&1048576&&$h(m,Ir,m.index);switch(m.lanes=0,m.tag){case 2:var N=m.type;X0(h,m),h=m.pendingProps;var I=Ml(m,Xr.current);Ed(m,k),I=vk(null,m,N,h,I,k);var M=xk();return m.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Ia(N)?(M=!0,rs(m)):M=!1,m.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,ck(m),I.updater=B0,m.stateNode=I,I._reactInternals=m,pk(m,N,h,k),m=Ik(null,m,N,!0,M,k)):(m.tag=0,an&&M&&Za(m),Ja(null,m,I,k),m=m.child),m;case 16:N=m.elementType;e:{switch(X0(h,m),h=m.pendingProps,I=N._init,N=I(N._payload),m.type=N,I=m.tag=IV(N),h=_o(N,h),I){case 0:m=Tk(null,m,N,h,k);break e;case 1:m=V5(null,m,N,h,k);break e;case 11:m=L5(null,m,N,h,k);break e;case 14:m=z5(null,m,N,_o(N.type,h),k);break e}throw Error(i(306,N,""))}return m;case 0:return N=m.type,I=m.pendingProps,I=m.elementType===N?I:_o(N,I),Tk(h,m,N,I,k);case 1:return N=m.type,I=m.pendingProps,I=m.elementType===N?I:_o(N,I),V5(h,m,N,I,k);case 3:e:{if(W5(m),h===null)throw Error(i(387));N=m.pendingProps,M=m.memoizedState,I=M.element,t5(h,m),z0(m,N,null,k);var G=m.memoizedState;if(N=G.element,Te&&M.isDehydrated)if(M={element:N,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},m.updateQueue.baseState=M,m.memoizedState=M,m.flags&256){I=_d(Error(i(423)),m),m=G5(h,m,N,k,I);break e}else if(N!==I){I=_d(Error(i(424)),m),m=G5(h,m,N,k,I);break e}else for(Te&&(da=sr(m.stateNode.containerInfo),ur=m,an=!0,Io=null,Bs=!1),k=c5(m,null,N,k),m.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(Sd(),N===I){m=Us(h,m,k);break e}Ja(h,m,N,k)}m=m.child}return m;case 5:return d5(m),h===null&&rk(m),N=m.type,I=m.pendingProps,M=h!==null?h.memoizedProps:null,G=I.children,ae(N,I)?G=null:M!==null&&ae(N,M)&&(m.flags|=32),U5(h,m),Ja(h,m,G,k),m.child;case 6:return h===null&&rk(m),null;case 13:return H5(h,m,k);case 4:return hk(m,m.stateNode.containerInfo),N=m.pendingProps,h===null?m.child=Nd(m,null,N,k):Ja(h,m,N,k),m.child;case 11:return N=m.type,I=m.pendingProps,I=m.elementType===N?I:_o(N,I),L5(h,m,N,I,k);case 7:return Ja(h,m,m.pendingProps,k),m.child;case 8:return Ja(h,m,m.pendingProps.children,k),m.child;case 12:return Ja(h,m,m.pendingProps.children,k),m.child;case 10:e:{if(N=m.type._context,I=m.pendingProps,M=m.memoizedProps,G=I.value,J_(m,N,G),M!==null)if(Ht(M.value,G)){if(M.children===I.children&&!Ta.current){m=Us(h,m,k);break e}}else for(M=m.child,M!==null&&(M.return=m);M!==null;){var ue=M.dependencies;if(ue!==null){G=M.child;for(var ye=ue.firstContext;ye!==null;){if(ye.context===N){if(M.tag===1){ye=js(-1,k&-k),ye.tag=2;var Oe=M.updateQueue;if(Oe!==null){Oe=Oe.shared;var Xe=Oe.pending;Xe===null?ye.next=ye:(ye.next=Xe.next,Xe.next=ye),Oe.pending=ye}}M.lanes|=k,ye=M.alternate,ye!==null&&(ye.lanes|=k),lk(M.return,k,m),ue.lanes|=k;break}ye=ye.next}}else if(M.tag===10)G=M.type===m.type?null:M.child;else if(M.tag===18){if(G=M.return,G===null)throw Error(i(341));G.lanes|=k,ue=G.alternate,ue!==null&&(ue.lanes|=k),lk(G,k,m),G=M.sibling}else G=M.child;if(G!==null)G.return=M;else for(G=M;G!==null;){if(G===m){G=null;break}if(M=G.sibling,M!==null){M.return=G.return,G=M;break}G=G.return}M=G}Ja(h,m,I.children,k),m=m.child}return m;case 9:return I=m.type,N=m.pendingProps.children,Ed(m,k),I=qi(I),N=N(I),m.flags|=1,Ja(h,m,N,k),m.child;case 14:return N=m.type,I=_o(N,m.pendingProps),I=_o(N.type,I),z5(h,m,N,I,k);case 15:return B5(h,m,m.type,m.pendingProps,k);case 17:return N=m.type,I=m.pendingProps,I=m.elementType===N?I:_o(N,I),X0(h,m),m.tag=1,Ia(N)?(h=!0,rs(m)):h=!1,Ed(m,k),o5(m,N,I),pk(m,N,I,k),Ik(null,m,N,!0,h,k);case 19:return K5(h,m,k);case 22:return j5(h,m,k)}throw Error(i(156,m.tag))};function vR(h,m){return vt(h,m)}function TV(h,m,k,N){this.tag=h,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(h,m,k,N){return new TV(h,m,k,N)}function Yk(h){return h=h.prototype,!(!h||!h.isReactComponent)}function IV(h){if(typeof h=="function")return Yk(h)?1:0;if(h!=null){if(h=h.$$typeof,h===g)return 11;if(h===b)return 14}return 2}function Bl(h,m){var k=h.alternate;return k===null?(k=Yi(h.tag,m,h.key,h.mode),k.elementType=h.elementType,k.type=h.type,k.stateNode=h.stateNode,k.alternate=h,h.alternate=k):(k.pendingProps=m,k.type=h.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=h.flags&14680064,k.childLanes=h.childLanes,k.lanes=h.lanes,k.child=h.child,k.memoizedProps=h.memoizedProps,k.memoizedState=h.memoizedState,k.updateQueue=h.updateQueue,m=h.dependencies,k.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},k.sibling=h.sibling,k.index=h.index,k.ref=h.ref,k}function h1(h,m,k,N,I,M){var G=2;if(N=h,typeof h=="function")Yk(h)&&(G=1);else if(typeof h=="string")G=5;else e:switch(h){case u:return ic(k.children,I,M,m);case c:G=8,I|=8;break;case d:return h=Yi(12,k,m,I|2),h.elementType=d,h.lanes=M,h;case y:return h=Yi(13,k,m,I),h.elementType=y,h.lanes=M,h;case v:return h=Yi(19,k,m,I),h.elementType=v,h.lanes=M,h;case w:return f1(k,I,M,m);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case p:G=10;break e;case f:G=9;break e;case g:G=11;break e;case b:G=14;break e;case x:G=16,N=null;break e}throw Error(i(130,h==null?h:typeof h,""))}return m=Yi(G,k,m,I),m.elementType=h,m.type=N,m.lanes=M,m}function ic(h,m,k,N){return h=Yi(7,h,N,m),h.lanes=k,h}function f1(h,m,k,N){return h=Yi(22,h,N,m),h.elementType=w,h.lanes=k,h.stateNode={isHidden:!1},h}function Zk(h,m,k){return h=Yi(6,h,null,m),h.lanes=k,h}function Jk(h,m,k){return m=Yi(4,h.children!==null?h.children:[],h.key,m),m.lanes=k,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}function _V(h,m,k,N,I){this.tag=m,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=se,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ve(0),this.expirationTimes=ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ve(0),this.identifierPrefix=N,this.onRecoverableError=I,Te&&(this.mutableSourceEagerHydrationData=null)}function xR(h,m,k,N,I,M,G,ue,ye){return h=new _V(h,m,k,ue,ye),m===1?(m=1,M===!0&&(m|=8)):m=0,M=Yi(3,null,null,m),h.current=M,M.stateNode=h,M.memoizedState={element:N,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},ck(M),h}function wR(h){if(!h)return Hi;h=h._reactInternals;e:{if(T(h)!==h||h.tag!==1)throw Error(i(170));var m=h;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Ia(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(i(171))}if(h.tag===1){var k=h.type;if(Ia(k))return Wn(h,k,m)}return m}function kR(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=D(m),h===null?null:h.stateNode}function SR(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var k=h.retryLane;h.retryLane=k!==0&&k<m?k:m}}function m1(h,m){SR(h,m),(h=h.alternate)&&SR(h,m)}function RV(h){return h=D(h),h===null?null:h.stateNode}function $V(){return null}return e.attemptContinuousHydration=function(h){if(h.tag===13){var m=as(h,134217728);if(m!==null){var k=Ma();Qi(m,h,134217728,k)}m1(h,134217728)}},e.attemptDiscreteHydration=function(h){if(h.tag===13){var m=as(h,1);if(m!==null){var k=Ma();Qi(m,h,1,k)}m1(h,1)}},e.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var m=Ll(h),k=as(h,m);if(k!==null){var N=Ma();Qi(k,h,m,N)}m1(h,m)}},e.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var m=h.stateNode;if(m.current.memoizedState.isDehydrated){var k=Zu(m.pendingLanes);k!==0&&(Me(m,k|1),pi(m,Ye()),!(jt&6)&&(Od(),Nr()))}break;case 13:dR(function(){var N=as(h,1);if(N!==null){var I=Ma();Qi(N,h,1,I)}}),m1(h,1)}},e.batchedUpdates=function(h,m){var k=jt;jt|=1;try{return h(m)}finally{jt=k,jt===0&&(Od(),Ln&&Nr())}},e.createComponentSelector=function(h){return{$$typeof:e1,value:h}},e.createContainer=function(h,m,k,N,I,M,G){return xR(h,m,!1,null,k,N,I,M,G)},e.createHasPseudoClassSelector=function(h){return{$$typeof:t1,value:h}},e.createHydrationContainer=function(h,m,k,N,I,M,G,ue,ye){return h=xR(k,N,!0,h,I,M,G,ue,ye),h.context=wR(null),k=h.current,N=Ma(),I=Ll(k),M=js(N,I),M.callback=m??null,Fl(k,M,I),h.current.lanes=I,Ee(h,I,N),pi(h,N),h},e.createPortal=function(h,m,k){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:N==null?null:""+N,children:h,containerInfo:m,implementation:k}},e.createRoleSelector=function(h){return{$$typeof:n1,value:h}},e.createTestNameSelector=function(h){return{$$typeof:r1,value:h}},e.createTextSelector=function(h){return{$$typeof:a1,value:h}},e.deferredUpdates=function(h){var m=Re,k=vr.transition;try{return vr.transition=null,Re=16,h()}finally{Re=m,vr.transition=k}},e.discreteUpdates=function(h,m,k,N,I){var M=Re,G=vr.transition;try{return vr.transition=null,Re=1,h(m,k,N,I)}finally{Re=M,vr.transition=G,jt===0&&Od()}},e.findAllNodes=Bk,e.findBoundingRects=function(h,m){if(!Ve)throw Error(i(363));m=Bk(h,m),h=[];for(var k=0;k<m.length;k++)h.push($t(m[k]));for(m=h.length-1;0<m;m--){k=h[m];for(var N=k.x,I=N+k.width,M=k.y,G=M+k.height,ue=m-1;0<=ue;ue--)if(m!==ue){var ye=h[ue],Oe=ye.x,Xe=Oe+ye.width,It=ye.y,Be=It+ye.height;if(N>=Oe&&M>=It&&I<=Xe&&G<=Be){h.splice(m,1);break}else if(N!==Oe||k.width!==ye.width||Be<M||It>G){if(!(M!==It||k.height!==ye.height||Xe<N||Oe>I)){Oe>N&&(ye.width+=Oe-N,ye.x=N),Xe<I&&(ye.width=I-Oe),h.splice(m,1);break}}else{It>M&&(ye.height+=It-M,ye.y=M),Be<G&&(ye.height=G-It),h.splice(m,1);break}}}return h},e.findHostInstance=kR,e.findHostInstanceWithNoPortals=function(h){return h=P(h),h=h!==null?z(h):null,h===null?null:h.stateNode},e.findHostInstanceWithWarning=function(h){return kR(h)},e.flushControlled=function(h){var m=jt;jt|=1;var k=vr.transition,N=Re;try{vr.transition=null,Re=1,h()}finally{Re=N,vr.transition=k,jt=m,jt===0&&(Od(),Nr())}},e.flushPassiveEffects=ac,e.flushSync=dR,e.focusWithin=function(h,m){if(!Ve)throw Error(i(363));for(h=Dk(h),m=lR(h,m),m=Array.from(m),h=0;h<m.length;){var k=m[h++];if(!Gt(k)){if(k.tag===5&&wt(k.stateNode))return!0;for(k=k.child;k!==null;)m.push(k),k=k.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Re},e.getFindAllNodesFailureDescription=function(h,m){if(!Ve)throw Error(i(363));var k=0,N=[];h=[Dk(h),0];for(var I=0;I<h.length;){var M=h[I++],G=h[I++],ue=m[G];if((M.tag!==5||!Gt(M))&&(Lk(M,ue)&&(N.push(zk(ue)),G++,G>k&&(k=G)),G<m.length))for(M=M.child;M!==null;)h.push(M,G),M=M.sibling}if(k<m.length){for(h=[];k<m.length;k++)h.push(zk(m[k]));return`findAllNodes was able to match part of the selector:
  `+(N.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},e.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return Y(h.child.stateNode);default:return h.child.stateNode}},e.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:RV,findFiberByHostInstance:h.findFiberByHostInstance||$V,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)h=!0;else{try{ct=m.inject(h),kt=m}catch{}h=!!m.checkDCE}}return h},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(h,m,k,N){if(!Ve)throw Error(i(363));h=Bk(h,m);var I=ln(h,k,N).disconnect;return{disconnect:function(){I()}}},e.registerMutableSourceForHydration=function(h,m){var k=m._getVersion;k=k(m._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[m,k]:h.mutableSourceEagerHydrationData.push(m,k)},e.runWithPriority=function(h,m){var k=Re;try{return Re=h,m()}finally{Re=k}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(h,m,k,N){var I=m.current,M=Ma(),G=Ll(I);return k=wR(k),m.context===null?m.context=k:m.pendingContext=k,m=js(M,G),m.payload={element:h},N=N===void 0?null:N,N!==null&&(m.callback=N),h=Fl(I,m,G),h!==null&&(Qi(h,I,G,M),L0(h,I,G)),G},e};k8.exports=Rae;var $ae=k8.exports;const Oae=Zi($ae);var S8={exports:{}},Dc={};/**
* @license React
* react-reconciler-constants.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/Dc.ConcurrentRoot=1,Dc.ContinuousEventPriority=4,Dc.DefaultEventPriority=16,Dc.DiscreteEventPriority=1,Dc.IdleEventPriority=536870912,Dc.LegacyRoot=0,S8.exports=Dc;var C8=S8.exports;const E8={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let N8=!1,T8=!1;const jN=".react-konva-event",Mae=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Pae=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Fae={};function yv(t,e,n=Fae){if(!N8&&"zIndex"in e&&(console.warn(Pae),N8=!0),!T8&&e.draggable){var r=e.x!==void 0||e.y!==void 0,a=e.onDragEnd||e.onDragMove;r&&!a&&(console.warn(Mae),T8=!0)}for(var i in n)if(!E8[i]){var o=i.slice(0,2)==="on",s=n[i]!==e[i];if(o&&s){var l=i.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t.off(l,n[i])}var u=!e.hasOwnProperty(i);u&&t.setAttr(i,void 0)}var c=e._useStrictMode,d={},p=!1;const f={};for(var i in e)if(!E8[i]){var o=i.slice(0,2)==="on",g=n[i]!==e[i];if(o&&g){var l=i.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e[i]&&(f[l]=e[i])}!o&&(e[i]!==n[i]||c&&e[i]!==t.getAttr(i))&&(p=!0,d[i]=e[i])}p&&(t.setAttrs(d),xu(t));for(var l in f)t.on(l+jN,f[l])}function xu(t){if(!Lt.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const I8={},Aae={};xm.Node.prototype._applyProps=yv;function Dae(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),xu(t)}function Lae(t,e,n){let r=xm[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=xm.Group);const a={},i={};for(var o in e){var s=o.slice(0,2)==="on";s?i[o]=e[o]:a[o]=e[o]}const l=new r(a);return yv(l,i),l}function zae(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function Bae(t,e,n){return!1}function jae(t){return t}function Uae(){return null}function Vae(){return null}function Wae(t,e,n,r){return Aae}function Gae(){}function Hae(t){}function qae(t,e){return!1}function Kae(){return I8}function Xae(){return I8}const Qae=setTimeout,Yae=clearTimeout,Zae=-1;function Jae(t,e){return!1}const eie=!1,tie=!0,nie=!0;function rie(t,e){e.parent===t?e.moveToTop():t.add(e),xu(t)}function aie(t,e){e.parent===t?e.moveToTop():t.add(e),xu(t)}function _8(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),xu(t)}function iie(t,e,n){_8(t,e,n)}function oie(t,e){e.destroy(),e.off(jN),xu(t)}function sie(t,e){e.destroy(),e.off(jN),xu(t)}function lie(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function uie(t,e,n){}function cie(t,e,n,r,a){yv(t,a,r)}function die(t){t.hide(),xu(t)}function pie(t){}function hie(t,e){(e.visible==null||e.visible)&&t.show()}function fie(t,e){}function mie(t){}function gie(){}const yie=()=>C8.DefaultEventPriority,bie=Object.freeze(Object.defineProperty({__proto__:null,appendChild:rie,appendChildToContainer:aie,appendInitialChild:Dae,cancelTimeout:Yae,clearContainer:mie,commitMount:uie,commitTextUpdate:lie,commitUpdate:cie,createInstance:Lae,createTextInstance:zae,detachDeletedInstance:gie,finalizeInitialChildren:Bae,getChildHostContext:Xae,getCurrentEventPriority:yie,getPublicInstance:jae,getRootHostContext:Kae,hideInstance:die,hideTextInstance:pie,idlePriority:Qh.unstable_IdlePriority,insertBefore:_8,insertInContainerBefore:iie,isPrimaryRenderer:eie,noTimeout:Zae,now:Qh.unstable_now,prepareForCommit:Uae,preparePortalMount:Vae,prepareUpdate:Wae,removeChild:oie,removeChildFromContainer:sie,resetAfterCommit:Gae,resetTextContent:Hae,run:Qh.unstable_runWithPriority,scheduleTimeout:Qae,shouldDeprioritizeSubtree:qae,shouldSetTextContent:Jae,supportsMutation:nie,unhideInstance:hie,unhideTextInstance:fie,warnsIfNotActing:tie},Symbol.toStringTag,{value:"Module"}));var vie=Object.defineProperty,xie=Object.defineProperties,wie=Object.getOwnPropertyDescriptors,R8=Object.getOwnPropertySymbols,kie=Object.prototype.hasOwnProperty,Sie=Object.prototype.propertyIsEnumerable,$8=(t,e,n)=>e in t?vie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O8=(t,e)=>{for(var n in e||(e={}))kie.call(e,n)&&$8(t,n,e[n]);if(R8)for(var n of R8(e))Sie.call(e,n)&&$8(t,n,e[n]);return t},Cie=(t,e)=>xie(t,wie(e));function M8(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const a=M8(r,e,n);if(a)return a;r=e?null:r.sibling}}function P8(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const UN=P8(_.createContext(null));class F8 extends _.Component{render(){return _.createElement(UN.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:A8,ReactCurrentDispatcher:D8}=_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Eie(){const t=_.useContext(UN);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=_.useId();return _.useMemo(()=>{for(const n of[A8?.current,t,t?.alternate]){if(!n)continue;const r=M8(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===e)return!0;i=i.next}});if(r)return r}},[t,e])}function Nie(){var t,e;const n=Eie(),[r]=_.useState(()=>new Map);r.clear();let a=n;for(;a;){const i=(t=a.type)==null?void 0:t._context;i&&i!==UN&&!r.has(i)&&r.set(i,(e=D8?.current)==null?void 0:e.readContext(P8(i))),a=a.return}return r}function Tie(){const t=Nie();return _.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>_.createElement(e,null,_.createElement(n.Provider,Cie(O8({},r),{value:t.get(n)}))),e=>_.createElement(F8,O8({},e))),[t])}function Iie(t){const e=V.useRef({});return V.useLayoutEffect(()=>{e.current=t}),V.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const _ie=t=>{const e=V.useRef(),n=V.useRef(),r=V.useRef(),a=Iie(t),i=Tie(),o=s=>{const{forwardedRef:l}=t;l&&(typeof l=="function"?l(s):l.current=s)};return V.useLayoutEffect(()=>(n.current=new xm.Stage({width:t.width,height:t.height,container:e.current}),o(n.current),r.current=wm.createContainer(n.current,C8.LegacyRoot,!1,null),wm.updateContainer(V.createElement(i,{},t.children),r.current),()=>{xm.isBrowser&&(o(null),wm.updateContainer(null,r.current,null),n.current.destroy())}),[]),V.useLayoutEffect(()=>{o(n.current),yv(n.current,t,a),wm.updateContainer(V.createElement(i,{},t.children),r.current,null)}),V.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},VN="Layer",L8="Image",Rie="Transformer",wm=Oae(bie);wm.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:V.version,rendererPackageName:"react-konva"});const $ie=V.forwardRef((t,e)=>V.createElement(F8,{},V.createElement(_ie,{...t,forwardedRef:e})));var Lc=_,Oie=function(t,e,n){const r=Lc.useRef("loading"),a=Lc.useRef(),[i,o]=Lc.useState(0),s=Lc.useRef(),l=Lc.useRef(),u=Lc.useRef();return(s.current!==t||l.current!==e||u.current!==n)&&(r.current="loading",a.current=void 0,s.current=t,l.current=e,u.current=n),Lc.useLayoutEffect(function(){if(!t)return;var c=document.createElement("img");function d(){r.current="loaded",a.current=c,o(Math.random())}function p(){r.current="failed",a.current=void 0,o(Math.random())}return c.addEventListener("load",d),c.addEventListener("error",p),e&&(c.crossOrigin=e),n&&(c.referrerPolicy=n),c.src=t,function(){c.removeEventListener("load",d),c.removeEventListener("error",p)}},[t,e,n]),[a.current,r.current]};const z8=Zi(Oie),B8=({front:t})=>{const{frame:e}=Ec(),[n]=z8(t?e.front:e.image,"anonymous");return X.jsx(L8,{image:n,draggable:!1})},Mie=({canvasImage:t,isSelected:e,onSelect:n})=>{const r=_.useRef(),a=_.useRef(),[i]=z8(t.image,"anonymous"),o=Ec(c=>c.transformCanvasImage);_.useEffect(()=>{var c;e&&(a.current.nodes([r.current]),(c=a.current.getLayer())==null||c.batchDraw())},[e]),_.useEffect(()=>{i&&r.current.cache()},[i]);const s=()=>{o({...t,isDragging:!0})},l=c=>{o({...t,isDragging:!1,x:c.target.x(),y:c.target.y()})},u=()=>{var c;const d=r.current,p=d.scaleX(),f=d.scaleY(),g=Math.max(5,d.width()*p),y=Math.max(d.height()*f);o({...t,x:d.x(),y:d.y(),width:g,height:y}),a.current.nodes([r.current]),(c=a.current.getLayer())==null||c.batchDraw()};return X.jsxs(X.Fragment,{children:[X.jsx(L8,{brightness:t.brightness,contrast:t.contrast,draggable:!0,filters:[w8.Filters.Brighten,w8.Filters.Contrast],id:t.id,image:i,onClick:n,onDragEnd:l,onDragStart:s,onTap:n,onTransformEnd:u,opacity:t.opacity||1,perfectDrawEnabled:!1,ref:r,scaleX:.5,scaleY:.5,x:t.x,y:t.y},t.id),e&&X.jsx(Rie,{ref:a,flipEnabled:!1,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],borderStroke:"#BC13FE"})]})},Pie=()=>{const{addToCanvas:t,artworkList:e,canvasList:n,frame:r,moveCanvasImage:a,removeFromCanvas:i,setFrame:o,transformCanvasImage:s}=Ec(),{t:l}=gs(),u=_.useRef(null),[c,d]=_.useState(null),[p,f]=_.useState(0),[g,y]=_.useState(0),[v,b]=_.useState(1),[x,w]=_.useState(!1),[S,C]=_.useState(!1),[E,R]=_.useState(!1),T=1080,$=1080;_.useEffect(()=>{const ae=()=>{const de=(window.innerWidth*.95||0)/T;u.current&&(u.current.width(T*de),u.current.height($*de),u.current.scale({x:de,y:de}))};return ae(),window.addEventListener("resize",ae),()=>{window.removeEventListener("resize",ae)}},[]);const P=ae=>{ae.target===ae.target.getStage()&&d(null)},D=ae=>{d(ae),f(ae.brightness),y(ae.contrast),b(ae.opacity)},B=ae=>{c&&a(c.id,ae)},z=(ae,de)=>{if(!c)return;const ke={...c,[de]:ae};switch(s(ke),de){case"brightness":f(ae);break;case"contrast":y(ae);break;case"opacity":b(ae);break}},q=()=>{c&&(i(c.id),d(null))},Y=async()=>{if(navigator.share)try{const ae=u.current;if(!ae){console.error("Canvas element not found");return}const de=await fetch(ae.toDataURL()).then(ke=>ke.blob());if(!de){console.error("Failed to create blob from canvas");return}await navigator.share({files:[new File([de],"canvas.png",{type:"image/png"})],title:"GLAMorous Europe",text:"Check out my GLAMorous Europe artwork!"}),console.log("Share successful")}catch(ae){console.error("Error sharing:",ae)}else console.log("Web Share API not supported")},Z=()=>{var ae;const de=(ae=u.current)==null?void 0:ae.toDataURL();de&&Ree.saveAs(de,"GLAMorousEurope.png")},H=()=>{w(!x),R(!1),C(!1)},L=()=>{C(!S),R(!1),w(!1)},Q=()=>{R(!E),C(!1),w(!1)};TP({onDragEnd(ae){var de,ke;const{active:K,over:se}=ae;if(se&&(ke=se.data.current)!=null&&ke.accepts.includes((de=K.data.current)==null?void 0:de.type)){const pe=ae.active.id;if(pe){const Ne=e.find(Se=>Se.id===pe);if(Ne){const Se=u.current;if(Se){Se.setPointersPositions(ae.activatorEvent);const Te=Se.getPointerPosition();Te&&t(Ne.image,Te.x,Te.y)}}}}}});const{isOver:J,setNodeRef:te}=bJ({id:"droppable",data:{accepts:["artwork"]}}),oe=J;let he="transparent";return oe&&(he="#ebb2ff"),X.jsxs(X.Fragment,{children:[X.jsxs(ba,{margin:"my-0",className:"flex flex-wrap gap-1 container justify-center content-center text-center mx-auto",children:[X.jsx(kr,{rounded:!0,inline:!0,onClick:Y,children:X.jsx(La,{material:X.jsx(hee,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(kr,{rounded:!0,inline:!0,onClick:Z,children:X.jsx(La,{material:X.jsx(PJ,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(kr,{rounded:!0,inline:!0,onClick:()=>o(Math.max(1,r.id-1)),children:X.jsx(La,{material:X.jsx(HJ,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(kr,{rounded:!0,inline:!0,onClick:()=>o(Math.min(5,r.id+1)),children:X.jsx(La,{material:X.jsx(XJ,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),c&&X.jsxs(X.Fragment,{children:[X.jsx(kr,{rounded:!0,inline:!0,onClick:()=>B(!0),children:X.jsx(La,{material:X.jsx(BJ,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(kr,{rounded:!0,inline:!0,onClick:()=>B(!1),children:X.jsx(La,{material:X.jsx(DJ,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(kr,{rounded:!0,inline:!0,onClick:q,children:X.jsx(La,{material:X.jsx(kee,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(kr,{style:{backgroundColor:E&&"#BC13FE"},rounded:!0,inline:!0,onClick:Q,children:X.jsx(La,{material:X.jsx(Tee,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(kr,{style:{backgroundColor:x&&"#BC13FE"},rounded:!0,inline:!0,onClick:H,children:X.jsx(La,{material:X.jsx(vee,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),X.jsx(kr,{style:{backgroundColor:S&&"#BC13FE"},rounded:!0,inline:!0,onClick:L,children:X.jsx(La,{material:X.jsx(_ee,{className:"w-6 h-6 lg:w-8 lg:h-8"})})}),E&&X.jsx(yp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:X.jsx(bp,{innerClassName:"flex space-x-4 w-6",innerChildren:X.jsxs(X.Fragment,{children:[X.jsx("p",{children:l("artworkCanvasOpacity")}),X.jsx(Yy,{value:v,min:0,max:1,step:.01,onChange:ae=>z(parseFloat(ae.target.value),"opacity")})]})})}),x&&X.jsx(yp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:X.jsx(bp,{innerClassName:"flex space-x-4 w-6",innerChildren:X.jsxs(X.Fragment,{children:[X.jsx("p",{children:l("artworkCanvasBrightness")}),X.jsx(Yy,{value:p,min:-1,max:1,step:.01,onChange:ae=>z(parseFloat(ae.target.value),"brightness")})]})})}),S&&X.jsx(yp,{strong:!0,insetMaterial:!0,outlineIos:!0,margin:"my-4",className:"w-2/3",children:X.jsx(bp,{innerClassName:"flex space-x-4 w-6",innerChildren:X.jsxs(X.Fragment,{children:[X.jsx("p",{children:l("artworkCanvasContrast")}),X.jsx(Yy,{value:g,min:-100,max:100,step:1,onChange:ae=>z(parseFloat(ae.target.value),"contrast")})]})})})]})]}),X.jsx("div",{className:"mx-auto flex items-center",ref:te,children:X.jsxs($ie,{style:{border:"4px solid",borderColor:he},pixelRatio:1,width:T,height:$,ref:u,onMouseDown:P,onTouchStart:P,children:[X.jsx(VN,{listening:!1,children:X.jsx(B8,{front:!1})}),X.jsx(VN,{children:n.map(ae=>X.jsx(Mie,{canvasImage:ae,isSelected:c?.id===ae.id,onSelect:()=>D(ae)},ae.id))}),X.jsx(VN,{listening:!1,children:X.jsx(B8,{front:!0})})]})})]})};function Fie({id:t,image:e}){const{attributes:n,listeners:r,setNodeRef:a}=fJ({id:t,data:{id:t,image:e,type:"artwork"}});return X.jsx("img",{src:e,alt:t,style:{cursor:"move",paddingRight:"10px",maxHeight:"100px",scrollSnapAlign:"start",width:"auto"},...r,...n,ref:a})}function Aie(){const{t}=gs(),{artworkList:e}=Ec();return X.jsxs(ba,{margin:"my-4",className:"flex flex-col flex-wrap gap-2 lg:gap-8 justify-center content-center text-center mx-auto",children:[X.jsx("h1",{className:"text-lg leading-6 px-8 md:px-24 md:text-xl lg:px-48",children:t("artworkTitle")}),X.jsx(ba,{margin:"my-4",className:"flex mx-auto overflow-x-auto",style:{maxHeight:"100px",scrollSnapType:"x mandatory",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:e.map((n,r)=>X.jsx(Fie,{...n},n.id+r))}),X.jsx(Pie,{})]})}let Die={data:""},Lie=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Die,zie=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Bie=/\/\*[^]*?\*\/|  +/g,j8=/\n+/g,wu=(t,e)=>{let n="",r="",a="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?wu(o,i):i+"{"+wu(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=wu(o,e?e.replace(/([^,])+/g,s=>i.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,s):s?s+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=wu.p?wu.p(i,o):i+":"+o+";")}return n+(e&&a?e+"{"+a+"}":a)+r},dl={},U8=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+U8(t[n]);return e}return t},jie=(t,e,n,r,a)=>{let i=U8(t),o=dl[i]||(dl[i]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(i));if(!dl[o]){let l=i!==t?t:(u=>{let c,d,p=[{}];for(;c=zie.exec(u.replace(Bie,""));)c[4]?p.shift():c[3]?(d=c[3].replace(j8," ").trim(),p.unshift(p[0][d]=p[0][d]||{})):p[0][c[1]]=c[2].replace(j8," ").trim();return p[0]})(t);dl[o]=wu(a?{["@keyframes "+o]:l}:l,n?"":"."+o)}let s=n&&dl.g?dl.g:null;return n&&(dl.g=dl[o]),((l,u,c,d)=>{d?u.data=u.data.replace(d,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(dl[o],e,r,s),o},Uie=(t,e,n)=>t.reduce((r,a,i)=>{let o=e[i];if(o&&o.call){let s=o(n),l=s&&s.props&&s.props.className||/^go/.test(s)&&s;o=l?"."+l:s&&typeof s=="object"?s.props?"":wu(s,""):s===!1?"":s}return r+a+(o??"")},"");function bv(t){let e=this||{},n=t.call?t(e.p):t;return jie(n.unshift?n.raw?Uie(n,[].slice.call(arguments,1),e.p):n.reduce((r,a)=>Object.assign(r,a&&a.call?a(e.p):a),{}):n,Lie(e.target),e.g,e.o,e.k)}let V8,WN,GN;bv.bind({g:1});let pl=bv.bind({k:1});function Vie(t,e,n,r){wu.p=e,V8=t,WN=n,GN=r}function ku(t,e){let n=this||{};return function(){let r=arguments;function a(i,o){let s=Object.assign({},i),l=s.className||a.className;n.p=Object.assign({theme:WN&&WN()},s),n.o=/ *go\d+/.test(l),s.className=bv.apply(n,r)+(l?" "+l:""),e&&(s.ref=o);let u=t;return t[0]&&(u=s.as||t,delete s.as),GN&&u[0]&&GN(s),V8(u,s)}return e?e(a):a}}var Wie=t=>typeof t=="function",vv=(t,e)=>Wie(t)?t(e):t,Gie=(()=>{let t=0;return()=>(++t).toString()})(),W8=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Hie=20,xv=new Map,qie=1e3,G8=t=>{if(xv.has(t))return;let e=setTimeout(()=>{xv.delete(t),zc({type:4,toastId:t})},qie);xv.set(t,e)},Kie=t=>{let e=xv.get(t);e&&clearTimeout(e)},HN=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Hie)};case 1:return e.toast.id&&Kie(e.toast.id),{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return t.toasts.find(i=>i.id===n.id)?HN(t,{type:1,toast:n}):HN(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?G8(r):t.toasts.forEach(i=>{G8(i.id)}),{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let a=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+a}))}}},wv=[],kv={toasts:[],pausedAt:void 0},zc=t=>{kv=HN(kv,t),wv.forEach(e=>{e(kv)})},Xie={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Qie=(t={})=>{let[e,n]=_.useState(kv);_.useEffect(()=>(wv.push(n),()=>{let a=wv.indexOf(n);a>-1&&wv.splice(a,1)}),[e]);let r=e.toasts.map(a=>{var i,o;return{...t,...t[a.type],...a,duration:a.duration||((i=t[a.type])==null?void 0:i.duration)||t?.duration||Xie[a.type],style:{...t.style,...(o=t[a.type])==null?void 0:o.style,...a.style}}});return{...e,toasts:r}},Yie=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||Gie()}),km=t=>(e,n)=>{let r=Yie(e,t,n);return zc({type:2,toast:r}),r.id},Di=(t,e)=>km("blank")(t,e);Di.error=km("error"),Di.success=km("success"),Di.loading=km("loading"),Di.custom=km("custom"),Di.dismiss=t=>{zc({type:3,toastId:t})},Di.remove=t=>zc({type:4,toastId:t}),Di.promise=(t,e,n)=>{let r=Di.loading(e.loading,{...n,...n?.loading});return t.then(a=>(Di.success(vv(e.success,a),{id:r,...n,...n?.success}),a)).catch(a=>{Di.error(vv(e.error,a),{id:r,...n,...n?.error})}),t};var Zie=(t,e)=>{zc({type:1,toast:{id:t,height:e}})},Jie=()=>{zc({type:5,time:Date.now()})},eoe=t=>{let{toasts:e,pausedAt:n}=Qie(t);_.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(s=>{if(s.duration===1/0)return;let l=(s.duration||0)+s.pauseDuration-(i-s.createdAt);if(l<0){s.visible&&Di.dismiss(s.id);return}return setTimeout(()=>Di.dismiss(s.id),l)});return()=>{o.forEach(s=>s&&clearTimeout(s))}},[e,n]);let r=_.useCallback(()=>{n&&zc({type:6,time:Date.now()})},[n]),a=_.useCallback((i,o)=>{let{reverseOrder:s=!1,gutter:l=8,defaultPosition:u}=o||{},c=e.filter(f=>(f.position||u)===(i.position||u)&&f.height),d=c.findIndex(f=>f.id===i.id),p=c.filter((f,g)=>g<d&&f.visible).length;return c.filter(f=>f.visible).slice(...s?[p+1]:[0,p]).reduce((f,g)=>f+(g.height||0)+l,0)},[e]);return{toasts:e,handlers:{updateHeight:Zie,startPause:Jie,endPause:r,calculateOffset:a}}},toe=pl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,noe=pl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,roe=pl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,aoe=ku("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${toe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${noe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${roe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ioe=pl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ooe=ku("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${ioe} 1s linear infinite;
`,soe=pl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,loe=pl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,uoe=ku("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${soe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${loe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,coe=ku("div")`
  position: absolute;
`,doe=ku("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,poe=pl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hoe=ku("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${poe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,foe=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?_.createElement(hoe,null,e):e:n==="blank"?null:_.createElement(doe,null,_.createElement(ooe,{...r}),n!=="loading"&&_.createElement(coe,null,n==="error"?_.createElement(aoe,{...r}):_.createElement(uoe,{...r})))},moe=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,goe=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,yoe="0%{opacity:0;} 100%{opacity:1;}",boe="0%{opacity:1;} 100%{opacity:0;}",voe=ku("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,xoe=ku("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,woe=(t,e)=>{let n=t.includes("top")?1:-1,[r,a]=W8()?[yoe,boe]:[moe(n),goe(n)];return{animation:e?`${pl(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${pl(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},koe=_.memo(({toast:t,position:e,style:n,children:r})=>{let a=t.height?woe(t.position||e||"top-center",t.visible):{opacity:0},i=_.createElement(foe,{toast:t}),o=_.createElement(xoe,{...t.ariaProps},vv(t.message,t));return _.createElement(voe,{className:t.className,style:{...a,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):_.createElement(_.Fragment,null,i,o))});Vie(_.createElement);var Soe=({id:t,className:e,style:n,onHeightUpdate:r,children:a})=>{let i=_.useCallback(o=>{if(o){let s=()=>{let l=o.getBoundingClientRect().height;r(t,l)};s(),new MutationObserver(s).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return _.createElement("div",{ref:i,className:e,style:n},a)},Coe=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:W8()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...a}},Eoe=bv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Sv=16,Noe=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:a,containerStyle:i,containerClassName:o})=>{let{toasts:s,handlers:l}=eoe(n);return _.createElement("div",{style:{position:"fixed",zIndex:9999,top:Sv,left:Sv,right:Sv,bottom:Sv,pointerEvents:"none",...i},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},s.map(u=>{let c=u.position||e,d=l.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),p=Coe(c,d);return _.createElement(Soe,{id:u.id,key:u.id,onHeightUpdate:l.updateHeight,className:u.visible?Eoe:"",style:p},u.type==="custom"?vv(u.message,u):a?a(u):_.createElement(koe,{toast:u,position:c}))}))},Toe=Di,H8={exports:{}},Ioe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_oe=Ioe,Roe=_oe;function q8(){}function K8(){}K8.resetWarningCache=q8;var $oe=function(){function t(r,a,i,o,s,l){if(l!==Roe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:K8,resetWarningCache:q8};return n.PropTypes=n,n};H8.exports=$oe();var Ooe=H8.exports;const va=Zi(Ooe);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qN=function(t,e){return qN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},qN(t,e)};function X8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ho=function(){return Ho=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ho.apply(this,arguments)};function Q8(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function Bc(t,e){for(var n=0,r=e.length,a=t.length;n<r;n++,a++)t[a]=e[n];return t}var Moe=function(t){return Object.keys(t).filter(function(e){return t[e]}).join(" ")},Cv=function(t,e){return t.x===e.x&&t.y===e.y},Ev=function(t,e){return!t&&e||t&&!e||t.length!==e.length?!1:t.every(function(n,r){return Cv(n,e[r])})},jc=function(t,e){var n=t.x,r=t.y;return e===void 0&&(e=1),{x:Math.round((n+Number.EPSILON)*e)/e,y:Math.round((r+Number.EPSILON)*e)/e}},Poe=function(t,e,n){n===void 0&&(n=0);var r=t.findIndex(function(a){return Math.max(Math.abs(a.x-e.x),Math.abs(a.y-e.y))<=n});return{point:Ho({},t[r]||{x:NaN,y:NaN}),index:r}},Y8=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)},Z8=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},Foe=function(t,e,n){var r=Y8(t,e),a=Z8(t,e),i=Math.round(a/n)*n;return{x:t.x+r*Math.cos(i),y:t.y+r*Math.sin(i)}},Aoe=function(t,e,n){var r=Y8(t,e),a=Z8(t,e),i=n.reduce(function(o,s){return Math.abs(s-a)<Math.abs(o-a)?s:o},1/0);return i!==1/0&&(e.x=t.x+r*Math.cos(i),e.y=t.y+r*Math.sin(i)),e},Doe=function(t){for(var e=[],n=1;n<t.length;n++){var r=Math.atan2(t[n].y-t[n-1].y,t[n].x-t[n-1].x),a=r+Math.PI;e.push(r,a>Math.PI?a-2*Math.PI:a)}return e.filter(function(i,o,s){return s.indexOf(i)===o})};function Loe(t,e,n,r){r===void 0&&(r=!0);var a=new Image;a.crossOrigin="Anonymous";var i=document.createElement("canvas"),o=i.getContext("2d");if(!o)return n(new Error("CTX is null"),i);a.onerror=function(){n(new Error("Failed to load image"),i)},a.onload=function(){try{if(i.width=a.naturalWidth+2,i.height=a.naturalHeight+2,o.drawImage(a,0,0),e.length<3){n(null,i);return}if(o.beginPath(),o.moveTo(0,0),o.lineTo(i.width,0),o.lineTo(i.width,i.height),o.lineTo(0,i.height),o.lineTo(0,0),o.lineTo(e[0].x+1,e[0].y+1),e.slice(1).forEach(function(w){var S=w.x,C=w.y;return o.lineTo(S+1,C+1)}),o.lineTo(e[0].x+1,e[0].y+1),o.lineTo(0,0),o.closePath(),o.clip("evenodd"),o.globalCompositeOperation="destination-out",o.fill(),r){var s=e.map(function(w){var S=w.x;return S+1}),l=e.map(function(w){var S=w.y;return S+1}),u=[Math.min.apply(null,s),Math.min.apply(null,l)],c=u[0],d=u[1],p=[Math.max.apply(null,s),Math.max.apply(null,l)],f=p[0],g=p[1],y=[f-c,g-d],v=y[0],b=y[1],x=o.getImageData(c,d,v,b);i.width=v,i.height=b,o.putImageData(x,0,0)}n(null,i)}catch(w){n(w instanceof Error?w:new Error(String(w)),i)}},a.src=t}var J8=function(){function t(e){this.getSvgElement=e}return t.prototype.getSvg=function(){var e=this.getSvgElement();if(!e)throw new Error("SVG is null");return e},t.prototype.getCTM=function(){var e=this.getSvg(),n=e.getCTM();if(n===null){var r=e.querySelector('rect[visibility="hidden"]');n=r.getCTM()}if(!n)throw new Error("CTM is null");return n},t.prototype.getViewboxSize=function(){return this.getSvg().viewBox.baseVal},t.prototype.getRealSize=function(){var e=this.getSvg();return{width:e.clientWidth,height:e.clientHeight}},t.prototype.getViewboxOffset=function(){var e=this.getSvg(),n=this.getRealSize(),r=n.width,a=n.height,i=this.getViewboxSize(),o=i.width,s=i.height,l=Object.assign(e.createSVGPoint(),{x:r,y:a}),u=this.getCTM(),c=l.matrixTransform(u.inverse()),d=c.x,p=c.y;return{x:d-o,y:p-s}},t.prototype.convertViewboxPointsToReal=function(e){var n=this.getSvg(),r=this.getCTM();return e.map(function(a){var i=a.x,o=a.y,s=Object.assign(n.createSVGPoint(),{x:i,y:o}).matrixTransform(r);return jc(s)})},t.prototype.convertRealPointsToViewbox=function(e){var n=this.getSvg(),r=this.getCTM().inverse();return e.map(function(a){var i=a.x,o=a.y,s=Object.assign(n.createSVGPoint(),{x:i,y:o}).matrixTransform(r);return jc(s,1e3)})},t.prototype.getBorderPoints=function(e){e===void 0&&(e=!0);var n=this.getViewboxSize(),r=n.width,a=n.height,i=this.getViewboxOffset(),o=i.x,s=i.y,l=[{x:-o,y:-s},{x:r+o,y:-s},{x:r+o,y:a+s},{x:-o,y:a+s}];return e&&l.push({x:-o,y:-s}),l},t.prototype.isAboveTheBorder=function(e){var n=e.x,r=e.y,a=this.getViewboxSize(),i=a.width,o=a.height,s=this.getViewboxOffset(),l=s.x,u=s.y;return n<-l||n>i+l||r<-u||r>o+u},t.prototype.getMouseCoordinates=function(e){var n=e,r=n.changedTouches&&n.touches?n.changedTouches[0]||n.touches[0]:n,a=r.clientX,i=r.clientY,o=this.getSvg(),s=o.getScreenCTM();if(!s)throw new Error("ScreenCTM is null");var l=o.createSVGPoint();l.x=a,l.y=i;var u=l.matrixTransform(s.inverse()),c=u.x,d=u.y;return{x:c,y:d}},t}(),eA=function(t){return function(e){X8(n,e);function n(){var r=e!==null&&e.apply(this,arguments)||this;return r.ref=V.createRef(),r.svg=new J8(function(){var a,i;return(i=(a=r.ref)===null||a===void 0?void 0:a.current)===null||i===void 0?void 0:i.ownerSVGElement}),r.dragLastPosition=null,r.wasMoved=!1,r.onMouseTouchDown=function(a){if(a.target===r.ref.current&&r.props.draggable){a.stopImmediatePropagation(),a.preventDefault();var i=a.target;r.dragLastPosition=r.getMousePosition(a),i.ownerSVGElement&&i.ownerSVGElement.focus({preventScroll:!0})}},r.onMouseTouchMove=function(a){if(r.dragLastPosition){a.stopImmediatePropagation(),a.preventDefault();var i=r.getMousePosition(a),o=i.x,s=i.y,l=o-r.dragLastPosition.x,u=s-r.dragLastPosition.y;!r.wasMoved&&r.props.onDragStart&&r.props.onDragStart({x:r.dragLastPosition.x,y:r.dragLastPosition.y,dx:l,dy:u}),r.props.onDrag&&r.props.onDrag({dx:l,dy:u}),r.dragLastPosition={x:o,y:s},r.wasMoved=!0}},r.onMouseTouchUp=function(a){r.dragLastPosition&&r.wasMoved&&(a.stopImmediatePropagation(),a.preventDefault(),(a instanceof MouseEvent||!a.touches)&&window.addEventListener("click",function(i){return i.stopPropagation()},{capture:!0,once:!0}),r.props.onDragEnd&&r.props.onDragEnd({x:r.dragLastPosition.x,y:r.dragLastPosition.y})),r.dragLastPosition=null,r.wasMoved=!1},r}return n.prototype.render=function(){var r=this.props,a=r.draggable;r.onDrag,r.onDragStart,r.onDragEnd;var i=Q8(r,["draggable","onDrag","onDragStart","onDragEnd"]);return V.createElement(t,Ho({ref:this.ref},i,{draggable:a}))},n.prototype.componentDidUpdate=function(r){r.draggable&&!this.props.draggable&&this.dragLastPosition&&this.wasMoved&&(this.props.onDragEnd&&this.props.onDragEnd({x:this.dragLastPosition.x,y:this.dragLastPosition.y}),this.dragLastPosition=null,this.wasMoved=!1)},n.prototype.componentDidMount=function(){window.addEventListener("mousedown",this.onMouseTouchDown,!0),window.addEventListener("mousemove",this.onMouseTouchMove,!0),window.addEventListener("mouseup",this.onMouseTouchUp,!0),window.addEventListener("touchstart",this.onMouseTouchDown,!0),window.addEventListener("touchmove",this.onMouseTouchMove,!0),window.addEventListener("touchend",this.onMouseTouchUp,!0)},n.prototype.componentWillUnmount=function(){window.removeEventListener("mousedown",this.onMouseTouchDown),window.removeEventListener("mousemove",this.onMouseTouchMove),window.removeEventListener("mouseup",this.onMouseTouchUp),window.removeEventListener("touchstart",this.onMouseTouchDown),window.removeEventListener("touchmove",this.onMouseTouchMove),window.removeEventListener("touchend",this.onMouseTouchUp)},n.prototype.getMousePosition=function(r){var a=r;return this.svg.getMouseCoordinates(a)},n}(V.Component)},zoe=eA(V.forwardRef(function(t,e){var n=t.path,r=t.animate,a=t.draggable;return V.createElement("polyline",{ref:e,style:{cursor:a?"move":""},points:n.map(function(i){var o=i.x,s=i.y;return o+","+s}).join(" "),fill:"rgba(0,0,0,0)",stroke:"white",strokeWidth:"1.5",shapeRendering:"geometricPrecision",strokeDasharray:"3",strokeDashoffset:"0",vectorEffect:"non-scaling-stroke"},r&&V.createElement("animate",{attributeName:"stroke-dashoffset",values:"0;1000;0",dur:"100s",repeatCount:"indefinite"}))}));function Boe(t){var e=t.path;return V.createElement("polygon",{style:{pointerEvents:"none",transform:"translate(-1px, -1px)"},points:e.map(function(n){var r=n.x,a=n.y;return r+","+a}).join(" "),fill:"rgba(0, 0, 0, 0.5)",fillRule:"evenodd",stroke:"null",shapeRendering:"geometricPrecision"})}var joe=eA(V.forwardRef(function(t,e){var n=t.x,r=t.y,a=t.onClickTouchEvent,i=t.draggable,o=t.style,s=o.cursor,l=s===void 0?i?"move":"default":s,u=Q8(o,["cursor"]);return V.createElement("rect",{style:Ho({cursor:l},u),ref:e,x:n-10,y:r-10,onClick:function(c){c.stopPropagation(),c.preventDefault(),a(c)},onTouchEnd:function(c){c.stopPropagation(),c.preventDefault(),a(c)},width:"20px",height:"20",fill:"rgba(0, 0, 0, 0)",stroke:"white",strokeWidth:"1.25",vectorEffect:"non-scaling-stroke"})})),Vr;(function(t){t.ADD="ADD",t.DELETE="DELETE",t.MODIFY="MODIFY",t.MOVE="MOVE",t.RESET="RESET",t.CHANGE="CHANGE"})(Vr||(Vr={}));function Uoe(t,e){var n=t.points.length;switch(e.type){case Vr.ADD:{if(t.closed)return[t,!1];if(n>0&&Cv(t.points[n-1],e.payload)||n>1&&Cv(t.points[n-2],e.payload))return[t,!1];var r=n>2&&Cv(t.points[0],e.payload);return r?[{points:Bc([],t.points),closed:!0},!0]:[{points:Bc(Bc([],t.points,!0),[e.payload]),closed:!1},!0]}case Vr.DELETE:return[{points:Bc([],t.points.filter(function(u,c){return e.payload!==c})),closed:n>4&&t.closed},!0];case Vr.MODIFY:{var a=t.points[e.payload.index],i=a.x,o=a.y,s=t.points.map(function(u){var c=u.x,d=u.y;return c===i&&d===o?{x:e.payload.x,y:e.payload.y}:{x:c,y:d}});return[{points:s,closed:t.closed},!!(e.payload.x||e.payload.y)]}case Vr.MOVE:return[{points:t.points.map(function(u){var c=u.x,d=u.y;return{x:c+e.payload.x,y:d+e.payload.y}}),closed:t.closed},!!(e.payload.x||e.payload.y)];case Vr.CHANGE:{var l=!Ev(e.payload,t.points);return[{points:e.payload,closed:l?e.payload.length>2:t.closed},l]}case Vr.RESET:return[{points:[],closed:!1},!!t.points.length];default:return[t,!1]}}var Voe=function(t){X8(e,t);function e(n){var r=t.call(this,n)||this;return r.imageRef=V.createRef(),r.svgRef=V.createRef(),r.svg=new J8(function(){var a;return(a=r.svgRef)===null||a===void 0?void 0:a.current}),r.angles=[],r.path={points:[],closed:!1},r.lastEmittedPoints=[],r.lastUpdatedPoints=[],r.imgError=!1,r.setPathFromPropsOnMediaLoad=!0,r.hidePointer=function(){var a=r.path.points[r.path.points.length-1]||{x:0,y:0};r.setPointer(Ho({},a),!0)},r.onShapeDrag=function(a){var i=a.dx,o=a.dy,s=r.path.points.map(function(l){var u=l.x,c=l.y;return{x:u+i,y:c+o}});s.some(function(l){return r.svg.isAboveTheBorder(l)})||r.dispatchPathAction({type:Vr.MOVE,payload:{x:i,y:o}})},r.onPointDrag=function(a,i){var o=i.dx,s=i.dy,l=Ho({},r.path.points[a]);l.x+=o,l.y+=s,r.svg.isAboveTheBorder(l)||r.dispatchPathAction({type:Vr.MODIFY,payload:Ho(Ho({},l),{index:a})})},r.onPointClick=function(a){r.isLoaded()&&!r.props.disabled&&!r.path.closed&&r.dispatchPathAction({type:Vr.ADD,payload:r.path.points[a]})},r.onDragEnd=function(){r.checkIfPathUpdated(!1)},r.onMediaLoaded=function(a){r.setPathFromPropsOnMediaLoad&&(r.setPathStateFromProps(),r.setPathFromPropsOnMediaLoad=!1),r.imgError=!1,r.props.onImageLoad(a)},r.onMediaError=function(a){r.dispatchPathAction({type:Vr.RESET}),r.imgError=!0,r.props.onImageError(a)},r.onClickTouchEvent=function(a){if(r.isLoaded()&&!r.props.disabled){if(r.path.closed){a.target===r.svgRef.current&&r.dispatchPathAction({type:Vr.RESET});return}var i=r.getMousePosition(a)[0];r.svg.isAboveTheBorder(i)?r.hidePointer():r.dispatchPathAction({type:Vr.ADD,payload:jc(i,1e3),pointer:i})}},r.onClick=function(a){r.onClickTouchEvent(a)},r.onTouchEnd=function(a){a.cancelable&&(a.preventDefault(),r.onClickTouchEvent(a)),r.hidePointer()},r.onMouseTouchMove=function(a){if(r.isLoaded()){var i=r.getMousePosition(a)[0];r.setPointer(i)}},r.onContextMenu=function(a){if(r.isLoaded()&&(a.preventDefault(),!r.props.disabled&&!r.path.closed)){var i=r.getMousePosition(a),o=i[0],s=i[1].index;s>-1?r.dispatchPathAction({type:Vr.DELETE,payload:s,pointer:o}):r.setPointer(o)}},r.state={path:{points:[],closed:!1},pointer:{x:n.viewBox.width/2,y:n.viewBox.width/2}},r}return e.prototype.render=function(){var n=this;return V.createElement("div",{className:Moe({ReactFreeSelect__Component:!0,ReactFreeSelect__Closed:this.state.path.closed,ReactFreeSelect__Disabled:this.props.disabled}),style:Ho({display:"inline-block",position:"relative",margin:"0",padding:"0",fontSize:"0",cursor:this.props.disabled?"not-allowed":"default"},this.props.style)},V.createElement("img",{ref:this.imageRef,src:this.props.src,alt:this.props.imageAlt,crossOrigin:this.props.crossOrigin,style:this.props.imageStyle,onLoad:this.onMediaLoaded,onError:this.onMediaError}),V.createElement("svg",{ref:this.svgRef,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden",userSelect:"none",touchAction:"none"},viewBox:"0 0 "+this.props.viewBox.width+" "+this.props.viewBox.height,onMouseMove:this.onMouseTouchMove,onTouchMove:this.onMouseTouchMove,onClick:this.onClick,onTouchEnd:this.onTouchEnd,onContextMenu:this.onContextMenu,onMouseLeave:this.hidePointer},V.createElement("rect",{visibility:"hidden"}),!!this.state.path.points.length&&V.createElement(Boe,{path:this.getPolygonPoints()}),V.createElement(zoe,{draggable:this.state.path.closed&&!this.props.disabled,onDrag:this.onShapeDrag,onDragEnd:this.onDragEnd,animate:!this.props.disabled,path:this.getPolylinePoints()}),this.getRoundedPoints().map(function(r,a){var i=r.x,o=r.y;return V.createElement(joe,{key:a,x:i,y:o,draggable:!n.props.disabled,style:{cursor:!a&&n.state.path.points.length>2&&!n.state.path.closed?"pointer":void 0},onDrag:function(s){var l=s.dx,u=s.dy;return n.onPointDrag(a,{dx:l,dy:u})},onDragEnd:n.onDragEnd,onClickTouchEvent:function(){return n.onPointClick(a)}})})))},e.prototype.componentDidUpdate=function(n){!n.disabled&&this.props.disabled&&!this.path.closed&&this.hidePointer(),n.src&&n.src!==this.props.src?this.dispatchPathAction({type:Vr.RESET}):Ev(n.value,this.props.value)||(this.isLoaded()?this.setPathStateFromProps():this.setPathFromPropsOnMediaLoad=!0)},e.prototype.convertPoints=function(n){var r=this.getAspectRatio();return this.svg.convertViewboxPointsToReal(n).map(function(a){var i=a.x,o=a.y;return{x:Math.round(i/r.x),y:Math.round(o/r.y)}})},e.prototype.checkIfPathUpdated=function(n){if(this.path.closed||n){var r=this.convertPoints(this.path.points);Ev(r,this.lastUpdatedPoints)||(this.emitOnComplete(r),this.lastUpdatedPoints=r.map(function(a){var i=a.x,o=a.y;return{x:i,y:o}}))}},e.prototype.emitOnChange=function(n){var r=n.points;if(this.props.onChange){var a=this.convertPoints(r);this.lastEmittedPoints=a,this.props.onChange(a)}},e.prototype.emitOnComplete=function(n){this.props.onComplete&&this.props.onComplete(n)},e.prototype.setPointer=function(n,r){var a=n.x,i=n.y;r===void 0&&(r=!1),(r||!this.props.disabled)&&this.setState({path:this.path,pointer:{x:a,y:i}})},e.prototype.dispatchPathAction=function(n){var r=this.path.closed,a=Uoe(this.path,n),i=a[0],o=a[1];i.points=i.points.map(function(s){return jc(s,1e3)}),o&&(this.path=i,this.setState({pointer:n.pointer||this.path.points[this.path.points.length-1]||{x:0,y:0},path:i}),this.angles=Doe(i.points),this.emitOnChange(i),[Vr.MODIFY,Vr.MOVE].includes(n.type)||this.checkIfPathUpdated(r))},e.prototype.isLoaded=function(){if(this.imgError||!this.svgRef.current)return!1;var n=this.svgRef.current;return!!(n.width.baseVal.value&&n.height.baseVal.value)},e.prototype.getAspectRatio=function(){return this.imageRef.current?{x:this.imageRef.current.clientWidth/this.imageRef.current.naturalWidth,y:this.imageRef.current.clientHeight/this.imageRef.current.naturalHeight}:{x:NaN,y:NaN}},e.prototype.setPathStateFromProps=function(){if(!Ev(this.lastEmittedPoints,this.props.value)){var n=this.getAspectRatio(),r=this.svg.convertRealPointsToViewbox(this.props.value.map(function(a){var i=a.x,o=a.y;return{x:i*n.x,y:o*n.y}}));this.dispatchPathAction({type:Vr.CHANGE,payload:r})}},e.prototype.getRoundedPoints=function(){return this.state.path.points.map(function(n){return jc(n)})},e.prototype.getBorder=function(){return this.svg.getBorderPoints().map(function(n){return jc(n)}).map(function(n){var r=n.x,a=n.y;return{x:r-1,y:a+1}})},e.prototype.getPolygonPoints=function(){var n=this.getRoundedPoints(),r=this.getBorder();return this.state.path.closed?Bc(Bc(Bc([],r,!0),n,!0),[n[0],r[0]]):r},e.prototype.getPolylinePoints=function(){var n=this.getRoundedPoints();return n.concat(this.state.path.closed?n[0]:jc(this.state.pointer))},e.prototype.getMousePosition=function(n,r,a){r===void 0&&(r=!0),a===void 0&&(a=!0);var i=this.svg.getMouseCoordinates(n);if(a){var o=navigator.platform.includes("Mac")?n.metaKey:n.ctrlKey,s=this.path.points[this.path.points.length-1];o&&s&&(n.shiftKey?i=Aoe(s,i,this.angles):i=Foe(s,i,Math.PI/12))}var l=Poe(this.path.points,i,10),u=l.point,c=l.index;return r&&c>-1&&(i=Ho({},u)),[i,{point:u,index:c}]},e.propTypes={value:va.arrayOf(va.exact({x:va.number.isRequired,y:va.number.isRequired})),style:va.shape({}),viewBox:va.exact({width:va.number.isRequired,height:va.number.isRequired}),disabled:va.bool,onChange:va.func,onComplete:va.func,src:va.string.isRequired,imageAlt:va.string,crossOrigin:va.string,imageStyle:va.shape({}),onImageLoad:va.func,onImageError:va.func},e.defaultProps={value:[],style:{},imageStyle:{},viewBox:{width:1e3,height:1e3},disabled:!1,onImageError:Function.prototype,onImageLoad:Function.prototype},e}(V.Component);/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Woe=1e-7,Goe=1e-4;class KN{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Nv{refCount(e){return Li("refCount")}incRef(e){return Li("incRef")}timerAvailable(){return!0}time(e){return Li("time")}read(e){return Li("read")}readSync(e){return Li("readSync")}readToGPU(e,n){return Li("readToGPU")}numDataIds(){return Li("numDataIds")}disposeData(e,n){return Li("disposeData")}write(e,n,r){return Li("write")}move(e,n,r,a,i){return Li("move")}memory(){return Li("memory")}floatPrecision(){return Li("floatPrecision")}epsilon(){return this.floatPrecision()===32?Woe:Goe}dispose(){return Li("dispose")}}function Li(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tA(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,hl(t,e,n)}function Hoe(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,hl(t,n,r),hl(e,n,r)}function Su(t,e,n){return Math.max(t,Math.min(e,n))}function Tv(t){return t%2===0?t:t+1}function hl(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function nA(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function qoe(t,e){const n=Math.random();return e*n+(1-n)*t}function Koe(t,e){let n=0;for(let r=0;r<t.length;r++){const a=Number(t[r])-Number(e[r]);n+=a*a}return n}function U(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function na(t,e,n=""){U(Sn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Uc(t){U(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function fl(t,e=[],n=!1){if(e==null&&(e=[]),Array.isArray(t)||xa(t)&&!n)for(let r=0;r<t.length;++r)fl(t[r],e,n);else e.push(t);return e}function be(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Xoe(t){return t.length===0}function Sn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Vc(t){return t%1===0}function Qoe(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function Iv(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Yoe(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return tA(e),e}function Wc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function XN(t,e=a=>0,n,r=setTimeout){return new Promise((a,i)=>{let o=0;const s=()=>{if(t()){a();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r(s,l)};s()})}function QN(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const a=t.slice();return a[r]=e/n,a}function Zt(t,e){const n=e.length;return t=t==null?e.map((r,a)=>a):[].concat(t),U(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),U(t.every(r=>Vc(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function ml(t,e){const n=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||a?null:Zt(e,t).sort();let o=0;for(let s=0;s<t.length;++s){if(i!=null){if(i[o]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(i[o]==null||i[o]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),i[o]<=s&&o++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function $r(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Or(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function rA(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function aA(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function YN(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function xa(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function _v(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function iA(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function ws(t){return typeof t=="string"||t instanceof String}function oA(t){return typeof t=="boolean"}function sA(t){return typeof t=="number"}function Fp(t){return Array.isArray(t)?Fp(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":sA(t)?"float32":ws(t)?"string":oA(t)?"bool":"float32"}function Cu(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Rv(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function rt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function lA(t,e,n,r=!1){const a=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)a[o]=n[t+o]}else{const i=e[0],o=e.slice(1),s=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<i;l++)a[l]=lA(t+l*s,o,n,r)}return a}function zi(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((a,i)=>a*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return lA(0,t,e,n)}function $v(t,e){const n=ra(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function ra(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function ZN(t,e){const n=t.reduce((r,a)=>r*a,1);if(e==null||e==="float32")return zi(t,new Float32Array(n));if(e==="int32")return zi(t,new Int32Array(n));if(e==="bool")return zi(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function JN(t){t.forEach(e=>{U(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function qo(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let a=0;a<t.length-1;++a)r+=n[a]*t[a];return r}function Gc(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(t/n[a]),t-=r[a]*n[a];return r[r.length-1]=t,r}function Hc(t){return t&&t.then&&typeof t.then=="function"}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const uA="tfjsflags";class cA{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Zoe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(me().getBool("IS_TEST")||me().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const a=this.urlFlags[e];me().getBool("IS_TEST")||me().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${a}.`),this.set(e,a)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Hc(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);uA in e&&e[uA].split(",").forEach(n=>{const[r,a]=n.split(":");this.urlFlags[r]=ese(r,a)})}}function Zoe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(Joe(e,r[0],r[1]),r.join("="))),e}function Joe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function ese(t,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function me(){return e4}let e4=null;function tse(t){e4=t}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/let t4;function dA(){if(t4==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");t4=t}return t4}function nse(){const t=dA();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function n4(t,e){const n=nse();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Ov="Abs",Sm="Acos",Cm="Acosh",Ap="Add",Mv="AddN",Pv="All",Fv="Any",Av="ArgMax",Dv="ArgMin",Em="Asin",Nm="Asinh",Tm="Atan",Im="Atanh",_m="Atan2",Lv="AvgPool",r4="AvgPoolGrad",zv="AvgPool3D",a4="AvgPool3DGrad",Bv="BatchMatMul",jv="BatchToSpaceND",Uv="Bincount",rse="BroadcastTo",Vv="BroadcastArgs",Rm="Cast",$m="Ceil",Om="ClipByValue",Wv="Complex",Gv="ComplexAbs",Hv="Concat",qv="Conv2D",Kv="Conv2DBackpropFilter",Xv="Conv2DBackpropInput",Qv="Conv3D",i4="Conv3DBackpropFilterV2",Yv="Conv3DBackpropInputV2",Mm="Cos",Pm="Cosh",Zv="Cumprod",Jv="Cumsum",ex="CropAndResize",tx="DenseBincount",nx="DepthToSpace",rx="DepthwiseConv2dNative",ax="DepthwiseConv2dNativeBackpropFilter",ix="DepthwiseConv2dNativeBackpropInput",ox="Diag",sx="Dilation2D",o4="Dilation2DBackpropInput",s4="Dilation2DBackpropFilter",Fm="RealDiv",lx="Einsum",Am="Elu",l4="EluGrad",Dm="Erf",Lm="Equal",zm="Exp",ux="ExpandDims",Bm="Expm1",cx="FFT",dx="Fill",px="FlipLeftRight",jm="Floor",Um="FloorDiv",hx="FusedBatchNorm",fx="GatherV2",mx="GatherNd",Vm="Greater",Wm="GreaterEqual",Gm="Identity",gx="IFFT",yx="Imag",Hm="IsFinite",qm="IsInf",Km="IsNan",bx="LeakyRelu",Xm="Less",Qm="LessEqual",vx="LinSpace",Ym="Log",Zm="Log1p",Jm="LogicalAnd",eg="LogicalNot",tg="LogicalOr",ase="LogicalXor",ise="LogSoftmax",ose="LowerBound",xx="LRN",u4="LRNGrad",wx="Max",ng="Maximum",kx="MaxPool",c4="MaxPoolGrad",Sx="MaxPool3D",d4="MaxPool3DGrad",Cx="MaxPoolWithArgmax",Ex="Mean",Nx="Min",rg="Minimum",Tx="MirrorPad",ag="Mod",Ix="Multinomial",ig="Multiply",_x="Neg",og="NotEqual",Rx="NonMaxSuppressionV3",$x="NonMaxSuppressionV4",Ox="NonMaxSuppressionV5",Mx="OnesLike",Px="OneHot",Fx="Pack",Ax="PadV2",sse="Pool",sg="Pow",Dx="Prelu",Lx="Prod",zx="RaggedGather",Bx="RaggedTensorToTensor",jx="Range",Ux="Real",lg="Reciprocal",ug="Relu",Vx="Reshape",Wx="ResizeNearestNeighbor",p4="ResizeNearestNeighborGrad",Gx="ResizeBilinear",h4="ResizeBilinearGrad",cg="Relu6",Hx="Reverse",dg="Round",pg="Rsqrt",qx="ScatterNd",Kx="SearchSorted",Xx="Select",hg="Selu",Qx="Slice",fg="Sin",mg="Sinh",gg="Sign",yg="Sigmoid",bg="Softplus",vg="Sqrt",Yx="Sum",Zx="SpaceToBatchND",Jx="SplitV",ew="Softmax",tw="SparseFillEmptyRows",nw="SparseReshape",rw="SparseSegmentMean",aw="SparseSegmentSum",iw="SparseToDense",xg="SquaredDifference",f4="Square",ow="StridedSlice",sw="StringNGrams",lw="StringSplit",uw="StringToHashBucketFast",wg="Sub",kg="Tan",Sg="Tanh",Cg="Tile",cw="TopK",dw="Transform",Dp="Transpose",pw="Unique",hw="Unpack",fw="UnsortedSegmentSum",lse="UpperBound",mw="ZerosLike",Eg="Step",gw="FromPixels",yw="RotateWithOffset",Ng="_FusedMatMul",Tg="FusedConv2D",Ig="FusedDepthwiseConv2D";/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bi(...t){me().getBool("IS_TEST")||me().getBool("PROD")||console.warn(...t)}function use(...t){me().getBool("IS_TEST")||me().getBool("PROD")||console.log(...t)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Lp=n4("kernelRegistry",()=>new Map),_g=n4("gradRegistry",()=>new Map);function bw(t,e){const n=g4(t,e);return Lp.get(n)}function m4(t){return _g.get(t)}function vw(t){const e=Lp.entries(),n=[];for(;;){const{done:r,value:a}=e.next();if(r)break;const[i,o]=a,[s]=i.split("_");s===t&&n.push(o)}return n}function xw(t){const{kernelName:e,backendName:n}=t,r=g4(e,n);Lp.has(r)&&Bi(`The kernel '${e}' for backend '${n}' is already registered`),Lp.set(r,t)}function cse(t){const{kernelName:e}=t;_g.has(e)&&me().getBool("DEBUG")&&Bi(`Overriding the gradient for '${e}'`),_g.set(e,t)}function dse(t,e){const n=g4(t,e);if(!Lp.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);Lp.delete(n)}function pse(t){if(!_g.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);_g.delete(t)}function hse(t,e){vw(t).forEach(n=>{const r=Object.assign({},n,{backendName:e});xw(r)})}function g4(t,e){return`${e}_${t}`}var pA=An,uo=null;try{uo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function An(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}An.prototype.__isLong__,Object.defineProperty(An.prototype,"__isLong__",{value:!0});function vi(t){return(t&&t.__isLong__)===!0}An.isLong=vi;var hA={},fA={};function qc(t,e){var n,r,a;return e?(t>>>=0,(a=0<=t&&t<256)&&(r=fA[t],r)?r:(n=Dn(t,(t|0)<0?-1:0,!0),a&&(fA[t]=n),n)):(t|=0,(a=-128<=t&&t<128)&&(r=hA[t],r)?r:(n=Dn(t,t<0?-1:0,!1),a&&(hA[t]=n),n))}An.fromInt=qc;function co(t,e){if(isNaN(t))return e?Kc:po;if(e){if(t<0)return Kc;if(t>=gA)return wA}else{if(t<=-yA)return xi;if(t+1>=yA)return xA}return t<0?co(-t,e).neg():Dn(t%zp|0,t/zp|0,e)}An.fromNumber=co;function Dn(t,e,n){return new An(t,e,n)}An.fromBits=Dn;var ww=Math.pow;function y4(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return po;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return y4(t.substring(1),e,n).neg();for(var a=co(ww(n,8)),i=po,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+s),n);if(s<8){var u=co(ww(n,s));i=i.mul(u).add(co(l))}else i=i.mul(a),i=i.add(co(l))}return i.unsigned=e,i}An.fromString=y4;function Ko(t,e){return typeof t=="number"?co(t,e):typeof t=="string"?y4(t,e):Dn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}An.fromValue=Ko;var mA=65536,fse=1<<24,zp=mA*mA,gA=zp*zp,yA=gA/2,bA=qc(fse),po=qc(0);An.ZERO=po;var Kc=qc(0,!0);An.UZERO=Kc;var Bp=qc(1);An.ONE=Bp;var vA=qc(1,!0);An.UONE=vA;var b4=qc(-1);An.NEG_ONE=b4;var xA=Dn(-1,2147483647,!1);An.MAX_VALUE=xA;var wA=Dn(-1,-1,!0);An.MAX_UNSIGNED_VALUE=wA;var xi=Dn(0,-2147483648,!1);An.MIN_VALUE=xi;var Fe=An.prototype;Fe.toInt=function(){return this.unsigned?this.low>>>0:this.low},Fe.toNumber=function(){return this.unsigned?(this.high>>>0)*zp+(this.low>>>0):this.high*zp+(this.low>>>0)},Fe.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(xi)){var e=co(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var a=co(ww(t,6),this.unsigned),i=this,o="";;){var s=i.div(a),l=i.sub(s.mul(a)).toInt()>>>0,u=l.toString(t);if(i=s,i.isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},Fe.getHighBits=function(){return this.high},Fe.getHighBitsUnsigned=function(){return this.high>>>0},Fe.getLowBits=function(){return this.low},Fe.getLowBitsUnsigned=function(){return this.low>>>0},Fe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(xi)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1},Fe.isZero=function(){return this.high===0&&this.low===0},Fe.eqz=Fe.isZero,Fe.isNegative=function(){return!this.unsigned&&this.high<0},Fe.isPositive=function(){return this.unsigned||this.high>=0},Fe.isOdd=function(){return(this.low&1)===1},Fe.isEven=function(){return(this.low&1)===0},Fe.equals=function(t){return vi(t)||(t=Ko(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},Fe.eq=Fe.equals,Fe.notEquals=function(t){return!this.eq(t)},Fe.neq=Fe.notEquals,Fe.ne=Fe.notEquals,Fe.lessThan=function(t){return this.comp(t)<0},Fe.lt=Fe.lessThan,Fe.lessThanOrEqual=function(t){return this.comp(t)<=0},Fe.lte=Fe.lessThanOrEqual,Fe.le=Fe.lessThanOrEqual,Fe.greaterThan=function(t){return this.comp(t)>0},Fe.gt=Fe.greaterThan,Fe.greaterThanOrEqual=function(t){return this.comp(t)>=0},Fe.gte=Fe.greaterThanOrEqual,Fe.ge=Fe.greaterThanOrEqual,Fe.compare=function(t){if(vi(t)||(t=Ko(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Fe.comp=Fe.compare,Fe.negate=function(){return!this.unsigned&&this.eq(xi)?xi:this.not().add(Bp)},Fe.neg=Fe.negate,Fe.add=function(t){vi(t)||(t=Ko(t));var e=this.high>>>16,n=this.high&65535,r=this.low>>>16,a=this.low&65535,i=t.high>>>16,o=t.high&65535,s=t.low>>>16,l=t.low&65535,u=0,c=0,d=0,p=0;return p+=a+l,d+=p>>>16,p&=65535,d+=r+s,c+=d>>>16,d&=65535,c+=n+o,u+=c>>>16,c&=65535,u+=e+i,u&=65535,Dn(d<<16|p,u<<16|c,this.unsigned)},Fe.subtract=function(t){return vi(t)||(t=Ko(t)),this.add(t.neg())},Fe.sub=Fe.subtract,Fe.multiply=function(t){if(this.isZero())return po;if(vi(t)||(t=Ko(t)),uo){var e=uo.mul(this.low,this.high,t.low,t.high);return Dn(e,uo.get_high(),this.unsigned)}if(t.isZero())return po;if(this.eq(xi))return t.isOdd()?xi:po;if(t.eq(xi))return this.isOdd()?xi:po;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(bA)&&t.lt(bA))return co(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,r=this.high&65535,a=this.low>>>16,i=this.low&65535,o=t.high>>>16,s=t.high&65535,l=t.low>>>16,u=t.low&65535,c=0,d=0,p=0,f=0;return f+=i*u,p+=f>>>16,f&=65535,p+=a*u,d+=p>>>16,p&=65535,p+=i*l,d+=p>>>16,p&=65535,d+=r*u,c+=d>>>16,d&=65535,d+=a*l,c+=d>>>16,d&=65535,d+=i*s,c+=d>>>16,d&=65535,c+=n*u+r*l+a*s+i*o,c&=65535,Dn(p<<16|f,c<<16|d,this.unsigned)},Fe.mul=Fe.multiply,Fe.divide=function(t){if(vi(t)||(t=Ko(t)),t.isZero())throw Error("division by zero");if(uo){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?uo.div_u:uo.div_s)(this.low,this.high,t.low,t.high);return Dn(e,uo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Kc:po;var n,r,a;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Kc;if(t.gt(this.shru(1)))return vA;a=Kc}else{if(this.eq(xi)){if(t.eq(Bp)||t.eq(b4))return xi;if(t.eq(xi))return Bp;var i=this.shr(1);return n=i.div(t).shl(1),n.eq(po)?t.isNegative()?Bp:b4:(r=this.sub(t.mul(n)),a=n.add(r.div(t)),a)}else if(t.eq(xi))return this.unsigned?Kc:po;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=po}for(r=this;r.gte(t);){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),s=o<=48?1:ww(2,o-48),l=co(n),u=l.mul(t);u.isNegative()||u.gt(r);)n-=s,l=co(n,this.unsigned),u=l.mul(t);l.isZero()&&(l=Bp),a=a.add(l),r=r.sub(u)}return a},Fe.div=Fe.divide,Fe.modulo=function(t){if(vi(t)||(t=Ko(t)),uo){var e=(this.unsigned?uo.rem_u:uo.rem_s)(this.low,this.high,t.low,t.high);return Dn(e,uo.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},Fe.mod=Fe.modulo,Fe.rem=Fe.modulo,Fe.not=function(){return Dn(~this.low,~this.high,this.unsigned)},Fe.and=function(t){return vi(t)||(t=Ko(t)),Dn(this.low&t.low,this.high&t.high,this.unsigned)},Fe.or=function(t){return vi(t)||(t=Ko(t)),Dn(this.low|t.low,this.high|t.high,this.unsigned)},Fe.xor=function(t){return vi(t)||(t=Ko(t)),Dn(this.low^t.low,this.high^t.high,this.unsigned)},Fe.shiftLeft=function(t){return vi(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Dn(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Dn(0,this.low<<t-32,this.unsigned)},Fe.shl=Fe.shiftLeft,Fe.shiftRight=function(t){return vi(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Dn(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Dn(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Fe.shr=Fe.shiftRight,Fe.shiftRightUnsigned=function(t){if(vi(t)&&(t=t.toInt()),t&=63,t===0)return this;var e=this.high;if(t<32){var n=this.low;return Dn(n>>>t|e<<32-t,e>>>t,this.unsigned)}else return t===32?Dn(e,0,this.unsigned):Dn(e>>>t-32,0,this.unsigned)},Fe.shru=Fe.shiftRightUnsigned,Fe.shr_u=Fe.shiftRightUnsigned,Fe.toSigned=function(){return this.unsigned?Dn(this.low,this.high,!1):this},Fe.toUnsigned=function(){return this.unsigned?this:Dn(this.low,this.high,!0)},Fe.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Fe.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},Fe.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]},An.fromBytes=function(t,e,n){return n?An.fromBytesLE(t,e):An.fromBytesBE(t,e)},An.fromBytesLE=function(t,e){return new An(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},An.fromBytesBE=function(t,e){return new An(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};const kA=Zi(pA),mse=eS({__proto__:null,default:kA},[pA]);/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xc=kA||mse;function Rg(t){return Xc.fromString(t,!0,16)}const SA=Rg("c3a5c85c97cb3127"),Qc=Rg("b492b66fbe98f273"),Ba=Rg("9ae16a3b2f90404f");function v4(t){return t.xor(t.shru(47))}function CA(t,e,n){const r=t.slice(e,e+n);return Xc.fromBytes(Array.from(r),!0,!0)}function In(t,e){return CA(t,e,8)}function EA(t,e){return CA(t,e,4)}function Wr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Eu(t,e,n=Rg("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let a=e.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function gse(t,e,n,r,a,i){a=a.add(t),i=Wr(i.add(a).add(r),21);const o=a;return a=a.add(e),a=a.add(n),i=i.add(Wr(a,44)),[a.add(r),i.add(o)]}function kw(t,e,n,r){return gse(In(t,e),In(t,e+8),In(t,e+16),In(t,e+24),n,r)}function yse(t,e=t.length){if(e>=8){const n=Ba.add(e*2),r=In(t,0).add(Ba),a=In(t,e-8),i=Wr(a,37).mul(n).add(r),o=Wr(r,25).add(a).mul(n);return Eu(i,o,n)}if(e>=4){const n=Ba.add(e*2),r=EA(t,0);return Eu(r.shl(3).add(e),EA(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],a=t[e-1],i=n+(r<<8),o=e+(a<<2);return v4(Ba.mul(i).xor(SA.mul(o))).mul(Ba)}return Ba}function bse(t,e=t.length){const n=Ba.add(e*2),r=In(t,0).mul(Qc),a=In(t,8),i=In(t,e-8).mul(n),o=In(t,e-16).mul(Ba);return Eu(Wr(r.add(a),43).add(Wr(i,30)).add(o),r.add(Wr(a.add(Ba),18)).add(i),n)}function vse(t,e=t.length){const n=Ba.add(e*2),r=In(t,0).mul(Ba),a=In(t,8),i=In(t,e-8).mul(n),o=In(t,e-16).mul(Ba),s=Wr(r.add(a),43).add(Wr(i,30)).add(o),l=Eu(s,r.add(Wr(a.add(Ba),18)).add(i),n),u=In(t,16).mul(n),c=In(t,24),d=s.add(In(t,e-32)).mul(n),p=l.add(In(t,e-24)).mul(n);return Eu(Wr(u.add(c),43).add(Wr(d,30)).add(p),u.add(Wr(c.add(r),18)).add(d),n)}function NA(t,e=t.length){const n=Xc.fromNumber(81,!0);if(e<=32)return e<=16?yse(t,e):bse(t,e);if(e<=64)return vse(t,e);let r=n,a=n.mul(Qc).add(113),i=v4(a.mul(Ba).add(113)).mul(Ba),o=[Xc.UZERO,Xc.UZERO],s=[Xc.UZERO,Xc.UZERO];r=r.mul(Ba).add(In(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=Wr(r.add(a).add(o[0]).add(In(t,l+8)),37).mul(Qc),a=Wr(a.add(o[1]).add(In(t,l+48)),42).mul(Qc),r=r.xor(s[1]),a=a.add(o[0]).add(In(t,l+40)),i=Wr(i.add(s[0]),33).mul(Qc),o=kw(t,l,o[1].mul(Qc),r.add(s[0])),s=kw(t,l+32,i.add(s[1]),a.add(In(t,l+16))),[i,r]=[r,i],l+=64;while(l!==u);const d=Qc.add(i.and(255).shl(1));return l=c,s[0]=s[0].add(e-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=Wr(r.add(a).add(o[0]).add(In(t,l+8)),37).mul(d),a=Wr(a.add(o[1]).add(In(t,l+48)),42).mul(d),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(In(t,l+40))),i=Wr(i.add(s[0]),33).mul(d),o=kw(t,l,o[1].mul(d),r.add(s[0])),s=kw(t,l+32,i.add(s[1]),a.add(In(t,l+16))),[i,r]=[r,i],Eu(Eu(o[0],s[0],d).add(v4(a).mul(SA)).add(i),Eu(o[1],s[1],d).add(r),d)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gl(t,e){return e==="string"?ks(t):Nu([t],e)}function xse(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Nu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=fl(t)),me().getBool("DEBUG")&&rA(t,e),xse(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function wi(){return me().platform.now()}function wse(t,e){return me().platform.fetch(t,e)}function ks(t,e="utf-8"){return e=e||"utf-8",me().platform.encode(t,e)}function yl(t,e="utf-8"){return e=e||"utf-8",me().platform.decode(t,e)}const kse=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:Sn,assert:U,assertNonNegativeIntegerDimensions:JN,assertNonNull:Uc,assertShapesMatch:na,bytesFromStringArray:iA,bytesPerElement:_v,checkConversionForErrors:rA,clamp:Su,computeStrides:rt,createScalarValue:gl,createShuffledIndices:Yoe,decodeString:yl,distSquared:Koe,encodeString:ks,fetch:wse,fingerPrint64:NA,flatten:fl,getArrayFromDType:Or,getTypedArrayFromDType:$r,hasEncodingLoss:YN,hexToLong:Rg,indexToLoc:Gc,inferDtype:Fp,inferFromImplicitShape:QN,isBoolean:oA,isFunction:Cu,isInt:Vc,isNumber:sA,isPromise:Hc,isScalarShape:Xoe,isString:ws,isTypedArray:xa,isValidDtype:aA,locToIndex:qo,makeOnesTypedArray:$v,makeZerosNestedTypedArray:ZN,makeZerosTypedArray:ra,nearestDivisor:Rv,nearestLargerEven:Tv,now:wi,parseAxisParam:Zt,randUniform:qoe,repeatedTry:XN,rightPad:Wc,shuffle:tA,shuffleCombo:Hoe,sizeFromShape:be,sizeToSquarishShape:Iv,squeezeShape:ml,sum:nA,swap:hl,tanh:Qoe,toNestedArray:zi,toTypedArray:Nu},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Sse{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Ese)}profileKernel(e,n,r){let a;const i=()=>{a=r()};let o;const s=wi();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const l of a)l.dataSync();o=Promise.resolve({kernelMs:wi()-s})}if(me().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<a.length;l++){const u=a[l];u.data().then(c=>{Cse(c,u.dtype,e)})}return{kernelName:e,outputs:a,inputs:n,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:a,inputs:i,extraInfo:o}=e;r.forEach(s=>{Promise.all([s.data(),a,o]).then(l=>{this.logger.logKernelProfile(n,s,l[0],l[1],i,l[2])})})}}function Cse(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const a=t[r];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}class Ese{logKernelProfile(e,n,r,a,i,o){const s=typeof a=="number"?Wc(`${a}ms`,9):a.error,l=Wc(e,25),u=n.rank,c=n.size,d=Wc(n.shape.toString(),14);let p="";for(const f in i){const g=i[f];if(g!=null){const y=g.shape||n.shape,v=y.length;p+=`${f}: ${v}D ${v>0?y:""} `}}console.log(`%c${l}	%c${s}	%c${u}D ${d}	%c${c}	%c${p}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nse(t,e,n){const r={},a={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const d in c){const p=c[d];let f=!1;for(let g=0;g<e.length;g++)if(r[p.id]){u.outputs.forEach(y=>r[y.id]=!0),f=!0,a[u.id]=!0;break}if(f)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(i[u.outputs[d].id]){for(const p in c)i[c[p].id]=!0,o[u.id]=!0;break}}const s=[];for(let l=0;l<t.length;l++){const u=t[l];if(a[u.id]&&o[u.id]){const c={};for(const p in u.inputs){const f=u.inputs[p];r[f.id]&&(c[p]=f)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,s.push(d)}}return s}function Tse(t,e,n,r){for(let a=e.length-1;a>=0;a--){const i=e[a],o=[];if(i.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const s=i.gradient(o);for(const l in i.inputs){if(!(l in s))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(s)}.`);const u=n(()=>s[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=i.inputs[l];if(!Sn(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const d=t[c.id];t[c.id]=r(d,u),d.dispose()}}}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const TA=20,$g=3,x4=7;function Ise(t,e,n,r){const a=rt(e),i=_se(t,e,n,a),o=e.length,s=Sw(t,e,n,a,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(s.map(u=>"    "+u).join(`
`)),l.join(`
`)}function _se(t,e,n,r){const a=be(e),i=r[r.length-1],o=new Array(i).fill(0),s=e.length,l=n==="complex64"?Mg(t):t;if(s>1)for(let u=0;u<a/i;u++){const c=u*i;for(let d=0;d<i;d++)o[d]=Math.max(o[d],Og(l[c+d],0,n).length)}return o}function Og(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(x4))} + ${parseFloat(t[1].toFixed(x4))}j`:ws(t)?r=`'${t}'`:n==="bool"?r=IA(t):r=parseFloat(t.toFixed(x4)).toString(),Wc(r,e)}function IA(t){return t===0?"false":"true"}function Sw(t,e,n,r,a,i=!0){const o=n==="complex64"?2:1,s=e[0],l=e.length;if(l===0){if(n==="complex64"){const y=Mg(t);return[Og(y[0],0,n)]}return n==="bool"?[IA(t[0])]:[t[0].toString()]}if(l===1){if(s>TA){const y=$g*o;let v=Array.from(t.slice(0,y)),b=Array.from(t.slice((s-$g)*o,s*o));return n==="complex64"&&(v=Mg(v),b=Mg(b)),["["+v.map((x,w)=>Og(x,a[w],n)).join(", ")+", ..., "+b.map((x,w)=>Og(x,a[s-$g+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?Mg(t):Array.from(t)).map((y,v)=>Og(y,a[v],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),d=r[0]*o,p=[];if(s>TA){for(let y=0;y<$g;y++){const v=y*d,b=v+d;p.push(...Sw(t.slice(v,b),u,n,c,a,!1))}p.push("...");for(let y=s-$g;y<s;y++){const v=y*d,b=v+d;p.push(...Sw(t.slice(v,b),u,n,c,a,y===s-1))}}else for(let y=0;y<s;y++){const v=y*d,b=v+d;p.push(...Sw(t.slice(v,b),u,n,c,a,y===s-1))}const f=l===2?",":"";p[0]="["+p[0]+f;for(let y=1;y<p.length-1;y++)p[y]=" "+p[y]+f;let g=`,
`;for(let y=2;y<l;y++)g+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":g),p}function Mg(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Mr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=be(e),r!=null){const a=r.length;U(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Or(n,this.size),this.strides=rt(e)}set(e,...n){n.length===0&&(n=[0]),U(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const a of e){if(a<0||a>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=this.strides[a]*e[a];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Xo().makeTensor(this.values,this.shape,this.dtype)}}let Xo=null,jp=null;function Rse(t){Xo=t}function $se(t){jp=t}class Xn{constructor(e,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=be(e),this.strides=rt(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return jp.buffer(this.shape,this.dtype,e)}bufferSync(){return jp.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return zi(this.shape,e,this.dtype==="complex64")}arraySync(){return zi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Xo().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>yl(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Xo().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Xo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>yl(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Xo().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(Xo().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return jp.print(this,e)}clone(){return this.throwIfDisposed(),jp.clone(this)}toString(e=!1){const n=this.dataSync();return Ise(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),jp.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Xo().makeVariable(this,e,n,r)}}Object.defineProperty(Xn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Ose(){return n4("Tensor",()=>Xn)}Ose();class Pg extends Xn{constructor(e,n,r,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Sn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Xo().disposeTensor(this),this.dataId=e.dataId,Xo().incRef(this,null)}dispose(){Xo().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Pg,Symbol.hasInstance,{value:t=>t instanceof Xn&&t.assign!=null&&t.assign instanceof Function});/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var w4;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(w4||(w4={}));var k4;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(k4||(k4={}));var S4;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(S4||(S4={}));var C4;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(C4||(C4={}));var E4;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(E4||(E4={}));const Mse={float32:C4,int32:k4,bool:S4,complex64:E4};function oi(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Mse[t][e]}function Cw(t){return oi(t,"int32")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qn(t,e){if(t.dtype===e.dtype)return[t,e];const n=oi(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function _A(t,e){U(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function Pse(t,e){return e.some(n=>n.id===t.id)}function N4(t){const e=[];return RA(t,e,new Set),e}function RA(t,e,n){if(t==null)return;if(t instanceof Xn){e.push(t);return}if(!Fse(t))return;const r=t;for(const a in r){const i=r[a];n.has(i)||(n.add(i),RA(i,e,n))}}function Fse(t){return Array.isArray(t)||typeof t=="object"}const Ase=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:_A,getTensorsInContainer:N4,isTensorInList:Pse,makeTypesMatch:Qn},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function T4(t){return t.kernelName!=null}class $A{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Ih{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new $A}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Bi(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Sse(this.backendInstance),!0}setupRegisteredKernels(){vw(this.backendName).forEach(e=>{e.setupFunc!=null&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){vw(e).forEach(n=>{n.disposeFunc!=null&&n.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof Nv)&&typeof r.then=="function"){const a=++this.pendingBackendInitId,i=r.then(o=>a<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,Bi(`Initialization of backend ${e} failed`),Bi(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Bi(`Initialization of backend ${e} failed`),Bi(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:a,asyncInit:i}=this.initializeBackend(r);if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n),o=a.refCount(n);a.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let a;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(a),()=>(a=n(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(e,n,r){e();try{const a=r();return n(),a}catch(a){throw n(),a}}nextTensorId(){return Ih.nextTensorId++}nextVariableId(){return Ih.nextVariableId++}clone(e){const n=re.runKernel(Gm,{x:e}),r={x:e},a=o=>({x:()=>{const s="float32",l={x:o},u={dtype:s};return re.runKernel(Rm,l,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,bw(e,this.backendName)==null)throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const a=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-i-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const a=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let l;const u=T4(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(T4(e)){const{kernelName:g,inputs:y,attrs:v}=e;this.backendName==null&&this.backend;const b=bw(g,this.backendName);U(b!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),s=()=>{const x=this.backend.numDataIds();l=b.kernelFunc({inputs:y,attrs:v,backend:this.backend});const w=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,x,w);const S=w.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(a){const C=this.getTensorsForGradient(g,y,S);r=this.saveTensorsForBackwardMode(C)}return S}}else{const{forwardFunc:g}=e,y=v=>{a&&(r=v.map(b=>this.keep(this.clone(b))))};s=()=>{const v=this.backend.numDataIds();l=this.tidy(()=>g(this.backend,y));const b=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,v,b),b}}const{inputs:c,attrs:d}=e,p=T4(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=s():(f=this.profiler.profileKernel(u,c,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),a&&this.addTapeNode(u,c,n,p,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(g=>c[g]!=null?c[g].shape:null),outputShapes:n.map(g=>g.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(n=>this.keep(this.clone(n)))}getTensorsForGradient(e,n,r){const a=m4(e);if(a!=null){const i=a.inputsToSave||[],o=a.outputsToSave||[];let s;a.saveAllInputs?(U(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(n).map(u=>n[u])):s=i.map(u=>n[u]);const l=r.filter((u,c)=>o[c]);return s.concat(l)}return[]}makeTensor(e,n,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;let i=e;r==="string"&&ws(e[0])&&(i=e.map(l=>ks(l)));const o=a.write(i,n,r),s=new Xn(n,r,o,this.nextTensorId());if(this.trackTensor(s,a),r==="string"){const l=this.state.tensorInfo.get(o),u=iA(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return s}makeTensorFromDataId(e,n,r,a){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,a)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:a,dtype:i}=e,o=new Xn(a,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,a){r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));const i=new Pg(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*_v(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Pg||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*_v(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,a,i,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=m4(e);l!=null&&(a=l.gradFunc),a!=null&&(s.gradient=u=>(u=u.map((c,d)=>{if(c==null){const p=r[d],f=ra(p.size,p.dtype);return this.makeTensor(f,p.shape,p.dtype)}return c}),a(u.length>1?u:u[0],i,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=N4(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===a.id&&this.track(i)})}gradients(e,n,r,a=!1){if(U(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));U(i instanceof Xn,()=>"The result y returned by f() must be a tensor.");const o=Nse(this.state.activeTape,n,i);if(!a&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const s={};s[i.id]=r??Dse(i.shape),Tse(s,o,u=>this.tidy(u),Lse);const l=n.map(u=>s[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return U(Cu(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{U(n.every(s=>s instanceof Xn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const a={};n.forEach((s,l)=>{a[l]=s});const i=(s,l)=>(r=e(...n,l),U(r.value instanceof Xn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),U(Cu(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(s,l)=>{const u=r.gradFunc(s,l),c=Array.isArray(u)?u:[u];U(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),U(c.every(p=>p instanceof Xn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((p,f)=>{d[f]=()=>p}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=wi(),r=await this.backend.time(e);return r.wallMs=wi()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new $A;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Ih.nextTensorId=0,Ih.nextVariableId=0;function Dse(t){const e=$v(be(t),"float32");return re.makeTensor(e,t,"float32")}function OA(){const t=dA();if(t._tfengine==null){const e=new cA(t);t._tfengine=new Ih(e)}return tse(t._tfengine.ENV),Rse(()=>t._tfengine),t._tfengine}const re=OA();function Lse(t,e){const n={a:t,b:e};return re.runKernel(Ap,n)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zse(){return typeof navigator<"u"&&navigator!=null}let I4;function Bse(t){I4=t}function _4(t){if(I4!==void 0)return I4;if(t||zse()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function R4(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const jse=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:R4,isMobile:_4,mockIsMobile:Bse},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ki=me();ki.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),ki.registerFlag("IS_BROWSER",()=>R4()),ki.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"),ki.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),ki.registerFlag("PROD",()=>!1),ki.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ki.getBool("DEBUG")),ki.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),ki.registerFlag("IS_TEST",()=>!1),ki.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),ki.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),ki.registerFlag("ENGINE_COMPILE_ONLY",()=>!1),ki.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),ki.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ss(t,e){let n=t;if(xa(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||xa(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&me().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&MA(t,r,[]),r}function MA(t,e,n){if(n=n||[],!Array.isArray(t)&&!xa(t)){U(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}U(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),U(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let a=0;a<t.length;++a)MA(t[a],r,n.concat(a))}function PA(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function j(t,e,n,r="numeric"){if(t instanceof Xn)return PA(r,t.dtype,e,n),t;let a=Fp(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),PA(r,a,e,n),t==null||!xa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const s=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${s}'`)}const i=Ss(t,a);!xa(t)&&!Array.isArray(t)&&(t=[t]);const o=a!=="string"?Nu(t,a):fl(t,[],!0);return re.makeTensor(o,i,a)}function Fg(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((a,i)=>j(a,`${e}[${i}]`,n,r))}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $4="__op";function ne(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+$4;const a=(...i)=>{re.startScope(n);try{const o=r(...i);return Hc(o)&&console.error("Cannot return a Promise inside of tidy."),re.endScope(o),o}catch(o){throw re.endScope(null),o}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Use(t,e){const n=j(t,"real","complex"),r=j(e,"imag","complex");na(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const a={real:n,imag:r};return re.runKernel(Wv,a)}const bl=ne({complex_:Use});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tu(t,e,n,r){if(r==null&&(r=Fp(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!xa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){JN(e);const a=be(e),i=be(n);U(a===i,()=>`Based on the provided shape, [${e}], the tensor should have ${a} values but has ${i}`);for(let o=0;o<n.length;++o){const s=n[o],l=o===n.length-1?s!==be(e.slice(o)):!0;U(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!xa(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Nu(t,r):fl(t,[],!0),re.makeTensor(t,e,r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qo(t,e,n){const r=Ss(t,n);return Tu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const O4={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ew=4;async function Vse(t,e){const n=[],r=[],a=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<a.length;++o){const s=a[o],l=Array.isArray(t)?t[o].tensor:t[s];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${s}': ${l.dtype}`);const u={name:s,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const p=await l.bytes(),f=p.reduce((v,b)=>v+b.length,0)+Ew*p.length,g=new Uint8Array(f);let y=0;for(let v=0;v<p.length;v++){const b=p[v],x=new Uint8Array(new Uint32Array([b.length]).buffer);g.set(x,y),y+=Ew,g.set(b,y),y+=b.length}d(g)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const i=await Promise.all(r);return{data:Wse(i),specs:n}}function FA(t,e){const n={};let r,a=0;for(const i of e){const o=i.name,s=i.dtype,l=i.shape,u=be(l);let c;if("quantization"in i){const d=i.quantization;if(d.dtype==="uint8"||d.dtype==="uint16"){if(!("min"in d&&"scale"in d))throw new Error(`Weight ${i.name} with quantization ${d.dtype} doesn't have corresponding metadata min and scale.`)}else if(d.dtype==="float16"){if(s!=="float32")throw new Error(`Weight ${i.name} is quantized with ${d.dtype} which only supports weights of type float32 not ${s}.`)}else throw new Error(`Weight ${i.name} has unknown quantization dtype ${d.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const p=O4[d.dtype],f=t.slice(a,a+u*p),g=d.dtype==="uint8"?new Uint8Array(f):new Uint16Array(f);if(s==="float32")if(d.dtype==="uint8"||d.dtype==="uint16"){c=new Float32Array(g.length);for(let y=0;y<g.length;y++){const v=g[y];c[y]=v*d.scale+d.min}}else if(d.dtype==="float16")r===void 0&&(r=Qse()),c=r(g);else throw new Error(`Unsupported quantization type ${d.dtype} for weight type float32.`);else if(s==="int32"){if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error(`Unsupported quantization type ${d.dtype} for weight type int32.`);c=new Int32Array(g.length);for(let y=0;y<g.length;y++){const v=g[y];c[y]=Math.round(v*d.scale+d.min)}}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);a+=u*p}else if(s==="string"){const d=be(i.shape);c=[];for(let p=0;p<d;p++){const f=new Uint32Array(t.slice(a,a+Ew))[0];a+=Ew;const g=new Uint8Array(t.slice(a,a+f));c.push(g),a+=f}}else{const d=O4[s],p=t.slice(a,a+u*d);if(s==="float32")c=new Float32Array(p);else if(s==="int32")c=new Int32Array(p);else if(s==="bool")c=new Uint8Array(p);else if(s==="complex64"){c=new Float32Array(p);const f=new Float32Array(c.length/2),g=new Float32Array(c.length/2);for(let b=0;b<f.length;b++)f[b]=c[b*2],g[b]=c[b*2+1];const y=Qo(f,l,"float32"),v=Qo(g,l,"float32");n[o]=bl(y,v),y.dispose(),v.dispose()}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);a+=u*d}s!=="complex64"&&(n[o]=Qo(c,l,s))}return n}function Wse(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let a=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}const M4=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function AA(t){return M4?Buffer.byteLength(t):new Blob([t]).size}function Gse(t){if(M4)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function Hse(t){if(M4){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function P4(t){if(t.length===1)return t[0];let e=0;t.forEach(a=>{e+=a.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(a=>{n.set(new Uint8Array(a),r),r+=a.byteLength}),n.buffer}function DA(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function LA(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function zA(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),r}async function F4(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),zA(t,n,r)}function Ag(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:AA(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:AA(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}function BA(t){const e=[];for(const n of t)e.push(...n.weights);return e}function qse(){const t=n=>{let r=n<<13,a=0;for(;!(r&8388608);)a-=8388608,r<<=1;return r&=-8388609,a+=947912704,r|a},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function Kse(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function Xse(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function Qse(){const t=qse(),e=Kse(),n=Xse();return r=>{const a=new ArrayBuffer(4*r.length),i=new Uint32Array(a);for(let o=0;o<r.length;o++){const s=r[o],l=t[n[s>>10]+(s&1023)]+e[s>>10];i[o]=l}return new Float32Array(a)}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Yn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Yn.instance==null&&(Yn.instance=new Yn),Yn.instance}static registerSaveRouter(e){Yn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Yn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Yn.getHandlers(e,"save")}static getLoadHandlers(e,n){return Yn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const a=[];return(n==="load"?Yn.getInstance().loadRouters:Yn.getInstance().saveRouters).forEach(i=>{const o=i(e,r);o!==null&&a.push(o)}),a}}const Yse=t=>Yn.registerSaveRouter(t),Zse=t=>Yn.registerLoadRouter(t),Jse=t=>Yn.getSaveHandlers(t),ele=(t,e)=>Yn.getLoadHandlers(t,e);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A4="tensorflowjs",D4=1,Yc="models_store",Iu="model_info_store";function jA(){if(!me().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function L4(t){const e=t.result;e.createObjectStore(Yc,{keyPath:"modelPath"}),e.createObjectStore(Iu,{keyPath:"modelPath"})}class Zc{constructor(e){if(this.indexedDB=jA(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,a)=>{const i=this.indexedDB.open(A4,D4);i.onupgradeneeded=()=>L4(i),i.onsuccess=()=>{const o=i.result;if(n==null){const s=o.transaction(Yc,"readonly"),l=s.objectStore(Yc).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return o.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=u=>(o.close(),a(l.error)),s.oncomplete=()=>o.close()}else{const s=Ag(n),l=o.transaction(Iu,"readwrite");let u=l.objectStore(Iu);const c=u.put({modelPath:this.modelPath,modelArtifactsInfo:s});let d;c.onsuccess=()=>{d=o.transaction(Yc,"readwrite");const p=d.objectStore(Yc).put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:s});p.onsuccess=()=>r({modelArtifactsInfo:s}),p.onerror=f=>{u=l.objectStore(Iu);const g=u.delete(this.modelPath);g.onsuccess=()=>(o.close(),a(p.error)),g.onerror=y=>(o.close(),a(p.error))}},c.onerror=p=>(o.close(),a(c.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},i.onerror=o=>a(i.error)})}}Zc.URL_SCHEME="indexeddb://";const UA=t=>me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Zc.URL_SCHEME)?tle(t.slice(Zc.URL_SCHEME.length)):null;Yn.registerSaveRouter(UA),Yn.registerLoadRouter(UA);function tle(t){return new Zc(t)}function nle(t){return t.startsWith(Zc.URL_SCHEME)?t.slice(Zc.URL_SCHEME.length):t}class rle{constructor(){this.indexedDB=jA()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(A4,D4);r.onupgradeneeded=()=>L4(r),r.onsuccess=()=>{const a=r.result,i=a.transaction(Iu,"readonly"),o=i.objectStore(Iu).getAll();o.onsuccess=()=>{const s={};for(const l of o.result)s[l.modelPath]=l.modelArtifactsInfo;e(s)},o.onerror=s=>(a.close(),n(o.error)),i.oncomplete=()=>a.close()},r.onerror=a=>n(r.error)})}async removeModel(e){return e=nle(e),new Promise((n,r)=>{const a=this.indexedDB.open(A4,D4);a.onupgradeneeded=()=>L4(a),a.onsuccess=()=>{const i=a.result,o=i.transaction(Iu,"readwrite"),s=o.objectStore(Iu),l=s.get(e);let u;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=s.delete(e),d=()=>{u=i.transaction(Yc,"readwrite");const p=u.objectStore(Yc).delete(e);p.onsuccess=()=>n(l.result.modelArtifactsInfo),p.onerror=f=>r(l.error)};c.onsuccess=d,c.onerror=p=>(d(),i.close(),r(l.error))}},l.onerror=c=>(i.close(),r(l.error)),o.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},a.onerror=i=>r(a.error)})}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vl="/",Up="tensorflowjs_models",VA="info",ale="model_topology",ile="weight_specs",ole="weight_data",sle="model_metadata";function WA(t){return{info:[Up,t,VA].join(vl),topology:[Up,t,ale].join(vl),weightSpecs:[Up,t,ile].join(vl),weightData:[Up,t,ole].join(vl),modelMetadata:[Up,t,sle].join(vl)}}function GA(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function lle(t){const e=t.split(vl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(vl)}function ule(t){return t.startsWith(Jc.URL_SCHEME)?t.slice(Jc.URL_SCHEME.length):t}class Jc{constructor(e){if(!me().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=WA(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Ag(e);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Gse(e.weightData));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:a}}catch{throw GA(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=a;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const s=JSON.parse(i);n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy,s.signature!=null&&(n.signature=s.signature),s.userDefinedMetadata!=null&&(n.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(n.modelInitializer=s.modelInitializer),s.trainingConfig!=null&&(n.trainingConfig=s.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Hse(o),n}}Jc.URL_SCHEME="localstorage://";const HA=t=>me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Jc.URL_SCHEME)?cle(t.slice(Jc.URL_SCHEME.length)):null;Yn.registerSaveRouter(HA),Yn.registerLoadRouter(HA);function cle(t){return new Jc(t)}class dle{constructor(){U(me().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),U(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Up+vl,r=vl+VA;for(let a=0;a<this.LS.length;++a){const i=this.LS.key(a);if(i.startsWith(n)&&i.endsWith(r)){const o=lle(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=ule(e);const n=WA(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return GA(n),r}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Vp="://";class Ka{constructor(){this.managers={}}static getInstance(){return Ka.instance==null&&(Ka.instance=new Ka),Ka.instance}static registerManager(e,n){U(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Vp)&&(e=e.slice(0,e.indexOf(Vp))),U(e.length>0,()=>"scheme must not be an empty string.");const r=Ka.getInstance();U(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ka.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ka.getInstance().managers)}}function Nw(t){if(t.indexOf(Vp)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ka.getSchemes().join(",")}`);return{scheme:t.split(Vp)[0],path:t.split(Vp)[1]}}async function qA(t,e,n=!1){U(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Yn.getLoadHandlers(t);U(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),U(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const a=r[0],i=Yn.getSaveHandlers(e);U(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),U(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],s=Nw(t).scheme,l=Nw(t).path,u=s===Nw(t).scheme,c=await a.load();n&&u&&await Ka.getManager(s).removeModel(l);const d=await o.save(c);return n&&!u&&await Ka.getManager(s).removeModel(l),d.modelArtifactsInfo}async function ple(){const t=Ka.getSchemes(),e={};for(const n of t){const r=await Ka.getManager(n).listModels();for(const a in r){const i=n+Vp+a;e[i]=r[a]}}return e}async function hle(t){const e=Nw(t);return Ka.getManager(e.scheme).removeModel(e.path)}async function fle(t,e){return qA(t,e,!1)}async function mle(t,e){return qA(t,e,!0)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class gle{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(!window||!me().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const a=this.functionRefs[r.data.index];a(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}}if(me().get("IS_BROWSER")){me().setPlatform("browser",new gle);try{Ka.registerManager(Jc.URL_SCHEME,new dle)}catch{}try{Ka.registerManager(Zc.URL_SCHEME,new rle)}catch{}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yle={importFetch:()=>require("node-fetch")};let z4;class ble{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return me().global.fetch!=null?me().global.fetch(e,n):(z4==null&&(z4=yle.importFetch()),z4(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}}me().get("IS_NODE")&&!me().get("IS_BROWSER")&&me().setPlatform("node",new ble);/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tt(t,e="float32",n){return e=e||"float32",JN(t),new Mr(t,e,n)}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vle(t,e){const n=j(t,"x","cast");if(!aA(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:e};return re.runKernel(Rm,r,a)}const Un=ne({cast_:vle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xle(t){const e={x:j(t,"x","clone","string_or_numeric")};return re.runKernel(Gm,e)}const xl=ne({clone_:xle});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function B4(t,e=!1){console.log(t.toString(e))}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/OA();const wle={buffer:Tt,cast:Un,clone:xl,print:B4};$se(wle);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kle="model",Sle=".json",Cle=".weights.bin";function KA(t){return new Promise(e=>setTimeout(e)).then(t)}class vd{constructor(e){if(!me().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(vd.URL_SCHEME)&&(e=e.slice(vd.URL_SCHEME.length)),(e==null||e.length===0)&&(e=kle),this.modelJsonFileName=e+Sle,this.weightDataFileName=e+Cle}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=LA(e,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await KA(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;s.download=this.weightDataFileName,s.href=n,await KA(()=>s.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Ag(e)}}}}vd.URL_SCHEME="downloads://";class Ele{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=a=>{const i=JSON.parse(a.target.result),o=i.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const s=F4(i,l=>this.loadWeights(l));e(s)},r.onerror=a=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const a=this.checkManifestAndWeightFiles(e),i=r.map(o=>this.loadWeightsFile(o,a[o]));return Promise.all(i).then(o=>[n,P4(o)])}loadWeightsFile(e,n){return new Promise((r,a)=>{const i=new FileReader;i.onload=o=>{const s=o.target.result;r(s)},i.onerror=o=>a(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>DA(i.name)),a={};for(const i of e)i.paths.forEach(o=>{const s=DA(o);if(n.indexOf(s)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(n.push(s),r.indexOf(s)===-1)throw new Error(`Weight file with basename '${s}' is not provided.`);a[o]=this.weightsFiles[r.indexOf(s)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return a}}const Nle=t=>me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(vd.URL_SCHEME)?Tle(t.slice(vd.URL_SCHEME.length)):null;Yn.registerSaveRouter(Nle);function Tle(t="model"){return new vd(t)}function Ile(t){return new Ele(t)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function XA(t,e,n,r){o(t),n=n??0,r=r??1,s(n,r);let a=0;const i=l=>(l.then(u=>{const c=n+ ++a/t.length*(r-n);return e(c),u}),l);function o(l){U(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function s(l,u){U(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),U(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),U(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(i))}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function QA(t,e){e==null&&(e={});const n=e.fetchFunc==null?me().platform.fetch:e.fetchFunc,r=t.map(u=>n(u,e.requestInit,{isBinary:!0})),a=0,i=.5,o=(e.onProgress==null?await Promise.all(r):await XA(r,e.onProgress,a,i)).map(u=>u.arrayBuffer());return e.onProgress==null?await Promise.all(o):await XA(o,e.onProgress,.5,1)}async function _le(t,e="",n,r){return YA(a=>QA(a,{requestInit:r}))(t,e,n)}function YA(t){return async(e,n="",r)=>{const a=e.map(()=>!1),i={},o=r!=null?r.map(()=>!1):[],s=[];if(e.forEach((f,g)=>{let y=0;f.weights.forEach(v=>{const b="quantization"in v?v.quantization.dtype:v.dtype,x=O4[b]*be(v.shape),w=()=>{a[g]=!0,i[g]==null&&(i[g]=[]),i[g].push({manifestEntry:v,groupOffset:y,sizeBytes:x})};r!=null?r.forEach((S,C)=>{S===v.name&&(w(),o[C]=!0)}):w(),s.push(v.name),y+=x})}),!o.every(f=>f)){const f=r.filter((g,y)=>!o[y]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${s.join(", ")}.`)}const l=a.reduce((f,g,y)=>(g&&f.push(y),f),[]),u=[];l.forEach(f=>{e[f].paths.forEach(g=>{const y=n+(n.endsWith("/")?"":"/")+g;u.push(y)})});const c=await t(u),d={};let p=0;return l.forEach(f=>{const g=e[f].paths.length;let y=0;for(let w=0;w<g;w++)y+=c[p+w].byteLength;const v=new ArrayBuffer(y),b=new Uint8Array(v);let x=0;for(let w=0;w<g;w++){const S=new Uint8Array(c[p+w]);b.set(S,x),x+=S.byteLength}i[f].forEach(w=>{const S=v.slice(w.groupOffset,w.groupOffset+w.sizeBytes),C=FA(S,[w.manifestEntry]);for(const E in C)d[E]=C[E]}),p+=g}),d}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Rle="application/octet-stream",$le="application/json";class j4{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(U(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=me().platform.fetch,U(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&U(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=LA(e,r);n.body.append("model.json",new Blob([JSON.stringify(a)],{type:$le}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:Rle}),"model.weights.bin");const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:Ag(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=n.modelTopology,a=n.weightsManifest;if(r==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return F4(n,i=>this.loadWeights(i))}async loadWeights(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,a]=Ole(n),i=this.weightPathPrefix||r,o=BA(e),s=[],l=[];for(const c of e)for(const d of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(d)):s.push(i+d+a);this.weightUrlConverter&&s.push(...await Promise.all(l));const u=await QA(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,P4(u)]}}j4.URL_SCHEME_REGEX=/^https?:\/\//;function Ole(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),a=n>e?t.substring(n):"";return[r+"/",a]}function U4(t){return t.match(j4.URL_SCHEME_REGEX)!=null}const ZA=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>U4(r)):n=U4(t),n)return V4(t,e)}return null};Yn.registerSaveRouter(ZA),Yn.registerLoadRouter(ZA);function V4(t,e){return new j4(t,e)}function Mle(t,e){return V4(t,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class W4{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class JA{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class Ple{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function Fle(t,e,n,r){const a=arguments;return new Ple(eD(...a))}function eD(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new W4(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new W4({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new W4({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function Ale(t){return new JA(t)}function Dle(t){return new JA(t)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const G4=Object.freeze(Object.defineProperty({__proto__:null,browserFiles:Ile,browserHTTPRequest:Mle,concatenateArrayBuffers:P4,copyModel:fle,decodeWeights:FA,encodeWeights:Vse,fromMemory:Fle,fromMemorySync:eD,getLoadHandlers:ele,getModelArtifactsForJSON:F4,getModelArtifactsForJSONSync:zA,getModelArtifactsInfoForJSON:Ag,getSaveHandlers:Jse,getWeightSpecs:BA,http:V4,isHTTPScheme:U4,listModels:ple,loadWeights:_le,moveModel:mle,registerLoadRouter:Zse,registerSaveRouter:Yse,removeModel:hle,weightsLoaderFactory:YA,withSaveHandler:Ale,withSaveHandlerSync:Dle},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lle(t,e,n=!1,r=!1){let a=j(t,"a","matMul"),i=j(e,"b","matMul");[a,i]=Qn(a,i);const o={a,b:i},s={transposeA:n,transposeB:r};return re.runKernel(Bv,o,s)}const pn=ne({matMul_:Lle});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zle(t,e,n=1,r=0,a="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:j(t,"indices","oneHot","int32")},o={dtype:a,depth:e,onValue:n,offValue:r};return re.runKernel(Px,i,o)}const Tw=ne({oneHot_:zle});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ble(){me().set("PROD",!0)}function jle(){me().set("DEBUG",!0)}function Ule(){me().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Vle(t){me().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Wle(){re.disposeVariables()}function wl(){return re}function Gle(){return re.memory()}function Hle(t){return re.profile(t)}function Xt(t,e){return re.tidy(t,e)}function wa(t){N4(t).forEach(e=>e.dispose())}function Cs(t){return re.keep(t)}function qle(t){return re.time(t)}function Kle(t){return re.setBackend(t)}function Xle(){return re.ready()}function Qle(){return re.backendName}function Yle(t){re.removeBackend(t)}function Zle(t){return re.findBackend(t)}function Jle(t){return re.findBackendFactory(t)}function H4(t,e,n=1){return re.registerBackend(t,e,n)}function eue(){return re.backend}function tue(t,e){me().setPlatform(t,e)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nue(t){const e={input:j(t,"input","imag")};return re.runKernel(yx,e)}const Dg=ne({imag_:nue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rue(t){const e={x:j(t,"x","neg")};return re.runKernel(_x,e)}const Es=ne({neg_:rue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function aue(t){const e={input:j(t,"input","real")};return re.runKernel(Ux,e)}const Wp=ne({real_:aue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function iue(t,e,n){const r=j(t,"x","transpose");if(e==null&&(e=r.shape.map((o,s)=>s).reverse()),U(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{U(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const a={x:r},i={perm:e};return r.dtype==="complex64"?Xt(()=>{let o=Wp(r),s=Dg(r);return o=re.runKernel(Dp,{x:o},i),s=re.runKernel(Dp,{x:s},i),n&&(s=Es(s)),bl(o,s)}):re.runKernel(Dp,a,i)}const Lg=ne({transpose_:iue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oue(t,e,n){const r=j(t,"labels","confusionMatrix"),a=j(e,"predictions","confusionMatrix");U(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),U(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),U(a.rank===1,()=>`Expected the rank of predictions to be 1, but got ${a.rank}`),U(r.shape[0]===a.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${a.shape[0]}. Labels and predictions should have the same number of elements.`),U(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const i=Tw(Un(r,"int32"),n),o=Tw(Un(a,"int32"),n),s=Lg(i),l=pn(s,o);return Un(l,"int32")}const sue=ne({confusionMatrix_:oue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lue=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:sue},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ed(t,e){const n=t.length,r=[];for(let a=0;a<n;a++){const i=n-1-a,o=t[i]||1;(e[e.length-1-a]||1)>1&&o===1&&r.unshift(i)}return r}function q4(t,e){const n=[];for(let r=0;r<e.length;r++){const a=t[t.length-r-1],i=e.length-r-1,o=e[i];(a==null||a===1&&o>1)&&n.unshift(i)}return n}function Ut(t,e){const n=[],r=Math.max(t.length,e.length);for(let a=0;a<r;a++){let i=t[t.length-a-1];i==null&&(i=1);let o=e[e.length-a-1];if(o==null&&(o=1),i===1)n.unshift(o);else if(o===1)n.unshift(i);else if(i!==o){const s=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(s)}else n.unshift(i)}return n}const uue=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:Ut,getBroadcastDims:ed,getReductionAxes:q4},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function K4(t,e,n){if(Uc(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Ss(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Tu(t,e,r,n)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/let td;function tD(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)s=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(bw(gw,re.backendName)!=null){const p={pixels:t},f={numChannels:e};return re.runKernel(gw,p,f)}const[l,u]=a?[t.videoWidth,t.videoHeight]:[t.width,t.height];let c;if(o)c=t.getContext("2d").getImageData(0,0,l,u).data;else if(r||n)c=t.data;else if(i||a||s){if(td==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")td=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else td=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});td.canvas.width=l,td.canvas.height=u,td.drawImage(t,0,0,l,u),c=td.getImageData(0,0,l,u).data}let d;if(e===4)d=new Int32Array(c);else{const p=l*u;d=new Int32Array(p*e);for(let f=0;f<p;f++)for(let g=0;g<e;++g)d[f*e+g]=c[f*4+g]}return K4(d,[u,l,e],"int32")}function cue(t){return t!=null&&t.data instanceof Uint8Array}function due(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function pue(t){return t!=null&&t.width!==0&&t.height!==0}function hue(t){return due()&&!(t instanceof ImageBitmap)&&pue(t)&&!cue(t)}async function fue(t,e=3){let n=null;if(me().getBool("WRAP_TO_IMAGEBITMAP")&&hue(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return tD(n,e)}async function nD(t,e){let n=j(t,"img","toPixels");if(!(t instanceof Xn)){const u=n;n=Un(u,"int32"),u.dispose()}if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,a]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2];if(i>4||i===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${i}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const o=await n.data(),s=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(a*r*4);for(let u=0;u<r*a;++u){const c=[0,0,0,255];for(let p=0;p<i;p++){const f=o[u*i+p];if(n.dtype==="float32"){if(f<0||f>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${f}.`)}else if(n.dtype==="int32"&&(f<0||f>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${f}.`);i===1?(c[0]=f*s,c[1]=f*s,c[2]=f*s):c[p]=f*s}const d=u*4;l[d+0]=Math.round(c[0]),l[d+1]=Math.round(c[1]),l[d+2]=Math.round(c[2]),l[d+3]=Math.round(c[3])}if(e!=null){e.width=a,e.height=r;const u=e.getContext("2d"),c=new ImageData(l,a,r);u.putImageData(c,0,0)}return n!==t&&n.dispose(),l}const rD=ne({fromPixels_:tD}),mue=Object.freeze(Object.defineProperty({__proto__:null,fromPixels:rD,fromPixelsAsync:fue,toPixels:nD},Symbol.toStringTag,{value:"Module"}));function Iw(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(be(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const a=e.shape,i=a[a.length-1];let o=1;for(let d=0;d<a.length-1;++d)o*=a[d];const s=t.shape,l=a.slice();l.pop();let u=1;for(let d=i;d<n;++d)u*=s[d],l.push(s[d]);const c=[...rt(t.shape).map(d=>d/u),1].slice(0,i);return[l,o,u,c]}const gue=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:Iw},Symbol.toStringTag,{value:"Module"}));function X4(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(i+` update.rank < ${a}. `);if(t.length<r+(n.rank-a))throw new Error(i+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+t.length-r)throw new Error(i+` update.rank != ${a+t.length-r}`);for(let o=0;o<a;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-a;++o)if(n.shape[o+a]!==t[o+r])throw new Error(i+` updates.shape[${o+a}] (${n.shape[o+a]}) != shape[${o+a}] (${t[o+a]})`)}function Q4(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}X4(n,e,t)}function Gp(t,e,n){const r=e.shape.length,a=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let d=a;d<i;++d)o*=n[d];const s=a<1?1:a,l=be(e.shape)/s,u=[...rt(n.slice(0,a)),1],c=be(n);return{sliceRank:a,numUpdates:l,sliceSize:o,strides:u,outputSize:c}}const yue=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Gp,validateInput:Q4,validateUpdateShape:X4},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Y4=-2,bue=-1;function Z4(t,e,n){const r=t.shape.length;U(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),U(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)U(e[a]+n[a]<=t.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${e[a]+n[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function vue(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function J4(t,e,n){const r=[];for(let a=0;a<t.length;a++)r[a]=Math.ceil((e[a]-t[a])/n[a]);return r}function aD(t,e,n,r){const a=[...t];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)i===0?a[e]=1:(a.splice(e,0,1),a.pop());return a}function iD(t,e,n){return n<=t?n:n-(e-1)}function oD(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function xue(t,e,n,r,a,i,o,s,l){const u=t.length;let c=new Array(u),d=new Array(u),p=new Array(u);if(e.length&&n>0){const f=e[0],g=n+1;c=sD(o,f,g,r,t),d=lD(s,f,g,a,t),p=aD(i,f,g,t)}else for(let f=0;f<u;f++)c[f]=cD(o,r,i,t,f,l),d[f]=dD(s,a,i,t,f,l),p[f]=uD(i,f,l);return{begin:c,end:d,strides:p}}function sD(t,e,n,r,a){const i=[...a],o=oD(n,e);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{const l=iD(e,n,s);let u=r[l];t&1<<l&&(u=0),i[s]=u}return i}function lD(t,e,n,r,a){const i=[...a],o=oD(n,e);for(let s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{const l=iD(e,n,s);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[s]=u}for(let s=0;s<i.length;s++){const l=a[s];i[s]<0&&(i[s]+=l),i[s]=Su(0,i[s],a[s])}return i}function uD(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function cD(t,e,n,r,a,i){let o=e[a];const s=n[a]||1;(t&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),o=Su(0,o,l-1),o}function dD(t,e,n,r,a,i){let o=e[a];const s=n[a]||1;(t&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),s>0?o=Su(0,o,l):o=Su(-1,o,l-1),o}function eT(t,e,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(e[a]>0||n[a]!==t[a])return!1;return!0}function tT(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function nT(t,e,n){let r;const a=t.shape.length;typeof e=="number"?r=[e,...new Array(a-1).fill(0)]:e.length<a?r=e.concat(new Array(a-e.length).fill(0)):r=e.slice(),r.forEach(o=>{U(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=[n,...new Array(a-1).fill(-1)]:n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map((o,s)=>o>=0?o:(U(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${s}.`),t.shape[s]-r[s])),[r,i]}function rT(t,e,n,r,a,i,o,s,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)c&&1<<x&s&&d.numAddAxisAfterEllipsis++,1<<x&o&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};wue(d,p);let f=!0,g=!0,y=!0;const v=[],b=[];for(let x=0;x<t.length;++x){if(p.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const w=!!(p.shrinkAxisMask&1<<x),S=t[x];if(S===-1){v.push(w?1:-1);continue}const C=[p.beginMask&1<<x,p.endMask&1<<x],E=[p.strides[x]>0?0:-1,p.strides[x]>0?S:S-1];if(w&&p.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&p.strides[x]===1;const R=!!(p.beginMask&1<<x&&p.endMask&1<<x);if(p.beginValid&&p.endValid){if(w){const D=p.begin[x]<0?S+p.begin[x]:p.begin[x];if(p.begin[x]=D,p.end[x]=p.begin[x]+1,D<0||D>=S)throw Error(`slice index ${p.begin[x]} of dimension ${x} out of bounds.`)}else p.begin[x]=pD(p.begin[x],0,p.strides[x],S,C,E),p.end[x]=pD(p.end[x],1,p.strides[x],S,C,E);const P=p.strides[x]===1&&p.begin[x]===0&&p.end[x]===S;f=f&&P,g=g&&(x===0&&p.strides[x]===1||P)}else f=f&&p.strides[x]===1&&R,g=g&&(x===0&&p.strides[x]===1||R);let T,$=!1;if(p.beginValid&&p.endValid?(T=p.end[x]-p.begin[x],$=!0):w?(T=1,$=!0):R&&S>=0&&(p.strides[x]<0?T=-S:T=S,$=!0),$){let P;T===0||T<0!=p.strides[x]<0?P=0:P=Math.trunc(T/p.strides[x])+(T%p.strides[x]!==0?1:0),v.push(P)}else v.push(-1)}for(let x=0;x<p.finalShapeGatherIndices.length;++x){const w=p.finalShapeGatherIndices[x];w>=0?b.push(v[w]):w===Y4&&b.push(1)}return{finalShapeSparse:b.filter((x,w)=>p.finalShapeGatherIndices[w]!==Y4),finalShape:b,isIdentity:f,sliceDim0:g,isSimpleSlice:y,begin:p.begin,end:p.end,strides:p.strides}}function wue(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const a=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<a;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(Y4),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(bue),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function pD(t,e,n,r,a,i){if(a[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const hD=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:Z4,computeFlatOffset:tT,computeOutShape:J4,getNormalizedAxes:xue,isSliceContinous:eT,maskToAxes:vue,parseSliceParams:nT,sliceInfo:rT,startForAxis:cD,startIndicesWithElidedDims:sD,stopForAxis:dD,stopIndicesWithElidedDims:lD,stridesForAxis:uD,stridesWithElidedDims:aD},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class fD{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class qu{constructor(){this.classNameMap={}}static getMap(){return qu.instance==null&&(qu.instance=new qu),qu.instance}static register(e){qu.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function _u(t){U(t.className!=null,()=>"Class being registered does not have the static className property defined."),U(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),U(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),qu.register(t)}const kue=Object.freeze(Object.defineProperty({__proto__:null,Serializable:fD,SerializationMap:qu,registerClass:_u},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Sue=.001,mD=.1;function Cue(t,e,n){return n==null&&(n=aT()),iT(t,e,(r,a)=>oT(r,a,n))}function aT(){return re.backend.floatPrecision()===32?Sue:mD}function iT(t,e,n){let r=!0;if((xa(t)||xa(e))&&(r=!1),xa(t)&&xa(e)&&(r=!0),r){const o=t.constructor.name,s=e.constructor.name;if(o!==s)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${s}`)}if(Array.isArray(t)&&Array.isArray(e)){const o=Ss(t),s=Ss(e);if(!Sn(o,s))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${s}]`)}const a=xa(t)?t:fl(t),i=xa(e)?e:fl(e);if(a.length!==i.length)throw new Error(`Arrays have different lengths actual: ${a.length} vs expected: ${i.length}.
Actual:   ${a}.
Expected: ${i}.`);for(let o=0;o<i.length;++o){const s=a[o],l=i[o];if(!n(s,l))throw new Error(`Arrays differ: actual[${o}] = ${s}, expected[${o}] = ${l}.
Actual:   ${a}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function Eue(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function Nue(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return ws(t)||ws(t[0])||ws(e)||ws(e[0])?iT(t,n,(r,a)=>r==a):iT(t,e,(r,a)=>oT(r,a,0))}function Tue(t,e,n){if(n==null&&(n=aT()),!oT(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function oT(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function Iue(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function _ue(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error(`Expected ArrayBuffer value at ${a} to be ${r[a]} but got ${n[a]} instead`)}function gD(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?gD(n):t[e]=ks(n)}return t}function Rue(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function $ue(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const Oue=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:mD,createVideoElement:Rue,encodeStrings:gD,expectArrayBuffersEqual:_ue,expectArraysClose:Cue,expectArraysEqual:Nue,expectNumbersClose:Tue,expectPromiseToFail:Eue,expectValuesInRange:Iue,play:$ue,testEpsilon:aT},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const Mue="3.21.0";/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pue(t,e){let n=j(t,"a","add"),r=j(e,"b","add");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(Ap,a)}const yt=ne({add_:Pue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fue(t,e){let n=j(t,"a","floorDiv"),r=j(e,"b","floorDiv");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(Um,a)}const sT=ne({floorDiv_:Fue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Aue(t,e){let n=j(t,"a","div"),r=j(e,"b","div");if([n,r]=Qn(n,r),n.dtype==="int32"&&r.dtype==="int32")return sT(n,r);const a={a:n,b:r},i={};return re.runKernel(Fm,a,i)}const _n=ne({div_:Aue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Due(t,e){let n=j(t,"a","mul"),r=j(e,"b","mul");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(ig,a)}const De=ne({mul_:Due});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lue(t){const e=j(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return re.runKernel(Gv,n)}else{const n={x:e};return re.runKernel(Ov,n)}}const Si=ne({abs_:Lue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zue(t){const e={x:j(t,"x","acos")};return re.runKernel(Sm,e)}const yD=ne({acos_:zue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bue(t){const e={x:j(t,"x","acosh")};return re.runKernel(Cm,e)}const bD=ne({acosh_:Bue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jue(t){U(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),U(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((a,i)=>j(a,`tensors${i}`,"addN")),n=e[0];e.forEach(a=>{if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(a=>{if(!Sn(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return re.runKernel(Mv,r)}const vD=ne({addN_:jue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uue(t,e=null,n=!1){const r={x:j(t,"x","all","bool")},a={axis:e,keepDims:n};return re.runKernel(Pv,r,a)}const xD=ne({all_:Uue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vue(t,e=null,n=!1){const r={x:j(t,"x","any","bool")},a={axis:e,keepDims:n};return re.runKernel(Fv,r,a)}const wD=ne({any_:Vue});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wue(t,e=0){const n={x:j(t,"x","argMax")},r={axis:e};return re.runKernel(Av,n,r)}const kD=ne({argMax_:Wue});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gue(t,e=0){const n={x:j(t,"x","argMin")},r={axis:e};return re.runKernel(Dv,n,r)}const SD=ne({argMin_:Gue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hue(t){const e={x:j(t,"x","asin")};return re.runKernel(Em,e)}const CD=ne({asin_:Hue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function que(t){const e={x:j(t,"x","asinh")};return re.runKernel(Nm,e)}const ED=ne({asinh_:que});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kue(t){const e={x:j(t,"x","atan")};return re.runKernel(Tm,e)}const ND=ne({atan_:Kue});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xue(t,e){let n=j(t,"a","atan2"),r=j(e,"b","atan2");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(_m,a)}const TD=ne({atan2_:Xue});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Que(t){const e={x:j(t,"x","atanh")};return re.runKernel(Im,e)}const ID=ne({atanh_:Que});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zg(t,e,n,r,a="NHWC",i){const o=t[3],s=[...e,o],l=Sl(a);return Gr(t,s,n,i,r,null,null,l)}function ho(t,e,n,r,a,i,o="channelsLast"){const[s,l]=_w(e);let u;if(o==="channelsLast")u=[s,l,t[3],t[3]];else if(o==="channelsFirst")u=[s,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Gr(t,u,n,r,a,i,!1,o)}function kl(t,e,n,r,a,i,o="NDHWC"){const[s,l,u]=uT(e);let c,d;if(o==="NDHWC")d="channelsLast",c=[s,l,u,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",c=[s,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Ru(t,c,n,r,a,!1,d,i)}function Gr(t,e,n,r,a,i,o=!1,s="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(s==="channelsLast")[l,u,c,d]=t;else if(s==="channelsFirst")[l,d,u,c]=t;else throw new Error(`Unknown dataFormat ${s}`);const[p,f,,g]=e,[y,v]=_w(n),[b,x]=_w(r),w=Hp(p,b),S=Hp(f,x),{padInfo:C,outHeight:E,outWidth:R}=Jue(a,u,c,y,v,w,S,i,s),T=o?g*d:g;let $;return s==="channelsFirst"?$=[l,T,E,R]:s==="channelsLast"&&($=[l,E,R,T]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:d,outHeight:E,outWidth:R,outChannels:T,padInfo:C,strideHeight:y,strideWidth:v,filterHeight:p,filterWidth:f,effectiveFilterHeight:w,effectiveFilterWidth:S,dilationHeight:b,dilationWidth:x,inShape:t,outShape:$,filterShape:e}}function Ru(t,e,n,r,a,i=!1,o="channelsLast",s){let[l,u,c,d,p]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,d,p]=t;else if(o==="channelsFirst")[l,p,u,c,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[f,g,y,,v]=e,[b,x,w]=uT(n),[S,C,E]=uT(r),R=Hp(f,S),T=Hp(g,C),$=Hp(y,E),{padInfo:P,outDepth:D,outHeight:B,outWidth:z}=ece(a,u,c,d,b,x,w,R,T,$,s),q=i?v*p:v;let Y;return o==="channelsFirst"?Y=[l,q,D,B,z]:o==="channelsLast"&&(Y=[l,D,B,z,q]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:d,inChannels:p,outDepth:D,outHeight:B,outWidth:z,outChannels:q,padInfo:P,strideDepth:b,strideHeight:x,strideWidth:w,filterDepth:f,filterHeight:g,filterWidth:y,effectiveFilterDepth:R,effectiveFilterHeight:T,effectiveFilterWidth:$,dilationDepth:S,dilationHeight:C,dilationWidth:E,inShape:t,outShape:Y,filterShape:e}}function Yue(t,e,n,r,a){r==null&&(r=lT(t,e,n));const i=t[0],o=t[1],s=nd((i-e+2*r)/n+1,a),l=nd((o-e+2*r)/n+1,a);return[s,l]}function Zue(t,e,n,r,a,i){a==null&&(a=lT(t,e,r));const o=t[0],s=t[1],l=t[2],u=nd((o-e+2*a)/r+1,i),c=nd((s-e+2*a)/r+1,i),d=nd((l-e+2*a)/r+1,i);return[u,c,d,n]}function lT(t,e,n,r=1){const a=Hp(e,r);return Math.floor((t[0]*(n-1)-n+a)/2)}function _w(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function uT(t){return typeof t=="number"?[t,t,t]:t}function Hp(t,e){return e<=1?t:t+(t-1)*(e-1)}function Jue(t,e,n,r,a,i,o,s,l){let u,c,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const p=Yue([e,n],i,r,t,s);c=p[0],d=p[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/a);const p=Math.max(0,(c-1)*r+i-e),f=Math.max(0,(d-1)*a+o-n),g=Math.floor(p/2),y=p-g,v=Math.floor(f/2),b=f-v;u={top:g,bottom:y,left:v,right:b,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),d=Math.ceil((n-o+1)/a);else if(typeof t=="object"){const p=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],g=l==="channelsLast"?t[2][0]:t[3][0],y=l==="channelsLast"?t[2][1]:t[3][1];u={top:p,bottom:f,left:g,right:y,type:p===0&&f===0&&g===0&&y===0?"VALID":"EXPLICIT"},c=nd((e-i+p+f)/r+1,s),d=nd((n-o+g+y)/a+1,s)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:d}}function ece(t,e,n,r,a,i,o,s,l,u,c){let d,p,f,g;if(typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=Zue([e,n,r,1],s,1,a,t,c);p=y[0],f=y[1],g=y[2]}else if(t==="same"){p=Math.ceil(e/a),f=Math.ceil(n/i),g=Math.ceil(r/o);const y=(p-1)*a+s-e,v=(f-1)*i+l-n,b=(g-1)*o+u-r,x=Math.floor(y/2),w=y-x,S=Math.floor(v/2),C=v-S,E=Math.floor(b/2),R=b-E;d={top:S,bottom:C,left:E,right:R,front:x,back:w,type:"SAME"}}else if(t==="valid")d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((e-s+1)/a),f=Math.ceil((n-l+1)/i),g=Math.ceil((r-u+1)/o);else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:f,outWidth:g}}function nd(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Bg(t){const[e,n,r]=_w(t);return e===1&&n===1&&r===1}function ka(t,e){return Bg(t)||Bg(e)}function Sl(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function fo(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")U(Vc(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(a=>{U(Vc(a),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${a}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tce(t,e){const n={x:j(t,"x","reshape","string_or_numeric")},r={shape:e};return re.runKernel(Vx,n,r)}const Ce=ne({reshape_:tce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nce(t,e,n,r,a){const i=j(t,"x","avgPool","float32"),o=1;U(ka(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let s=i,l=!1;i.rank===3&&(l=!0,s=Ce(i,[1,i.shape[0],i.shape[1],i.shape[2]])),U(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),fo("avgPool",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a};let d=re.runKernel(Lv,u,c);return d=Un(d,i.dtype),l?Ce(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const cT=ne({avgPool_:nce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rce(t,e,n,r,a,i="NDHWC"){const o=j(t,"x","avgPool3d","float32");let s=o,l=!1;o.rank===4&&(l=!0,s=Ce(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(s.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),U(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),fo("avgPool3d",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i};let d=re.runKernel(zv,u,c);return d=Un(d,s.dtype),l?Ce(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const _D=ne({avgPool3d_:rce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ace(t,e=0){U(t.length>=1,()=>"Pass at least one tensor to concat");const n=Fg(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return xl(n[0]);const r=n,a={axis:e};return re.runKernel(Hv,r,a)}const Sa=ne({concat_:ace});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ice(t){const e={x:j(t,"x","sigmoid","float32")};return re.runKernel(yg,e)}const rd=ne({sigmoid_:ice});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oce(t,e,n){const r=j(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const a={x:r},i={begin:e,size:n};return re.runKernel(Qx,a,i)}const Cn=ne({slice_:oce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sce(t){const e={x:j(t,"x","tanh","float32")};return re.runKernel(Sg,e)}const Rw=ne({tanh_:sce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lce(t,e,n,r,a,i){const o=j(t,"forgetBias","basicLSTMCell"),s=j(e,"lstmKernel","basicLSTMCell"),l=j(n,"lstmBias","basicLSTMCell"),u=j(r,"data","basicLSTMCell"),c=j(a,"c","basicLSTMCell"),d=j(i,"h","basicLSTMCell"),p=Sa([u,d],1),f=pn(p,s),g=yt(f,l),y=g.shape[0],v=g.shape[1]/4,b=[y,v],x=Cn(g,[0,0],b),w=Cn(g,[0,v],b),S=Cn(g,[0,v*2],b),C=Cn(g,[0,v*3],b),E=yt(De(rd(x),Rw(w)),De(c,rd(yt(o,S)))),R=De(Rw(E),rd(C));return[E,R]}const RD=ne({basicLSTMCell_:lce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uce(t,e,n){const r=j(t,"x","batchToSpaceND"),a=e.reduce((s,l)=>s*l);U(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),U(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),U(r.shape[0]%a===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${a}`);const i={x:r},o={blockShape:e,crops:n};return re.runKernel(jv,i,o)}const dT=ne({batchToSpaceND_:uce});function cce(t){let e;return t.rank===0||t.rank===1?e=Ce(t,[1,1,1,t.size]):t.rank===2?e=Ce(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=Ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dce(t,e,n,r,a,i){i==null&&(i=.001);const o=j(t,"x","batchNorm"),s=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let u;a!=null&&(u=j(a,"scale","batchNorm"));let c;r!=null&&(c=j(r,"offset","batchNorm")),U(s.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(c==null||s.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(u==null||s.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:cce(o),scale:u,offset:c,mean:s,variance:l},p={varianceEpsilon:i},f=re.runKernel(hx,d,p);return Ce(f,o.shape)}const jg=ne({batchNorm_:dce});function pce(t,e,n,r,a,i){const o=j(t,"x","batchNorm"),s=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let u;a!=null&&(u=j(a,"scale","batchNorm"));let c;return r!=null&&(c=j(r,"offset","batchNorm")),U(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),U(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),U(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&U(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&U(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),jg(o,s,l,c,u,i)}const $D=ne({batchNorm2d_:pce});function hce(t,e,n,r,a,i){const o=j(t,"x","batchNorm"),s=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let u;a!=null&&(u=j(a,"scale","batchNorm"));let c;return r!=null&&(c=j(r,"offset","batchNorm")),U(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),U(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),U(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&U(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&U(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),jg(o,s,l,c,u,i)}const OD=ne({batchNorm3d_:hce});function fce(t,e,n,r,a,i){const o=j(t,"x","batchNorm"),s=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let u;a!=null&&(u=j(a,"scale","batchNorm"));let c;return r!=null&&(c=j(r,"offset","batchNorm")),U(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),U(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),U(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&U(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&U(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),jg(o,s,l,c,u,i)}const MD=ne({batchNorm4d_:fce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mce(t,e,n){const r=j(t,"x","bincount"),a=j(e,"weights","bincount");U(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),U(n>=0,()=>`size must be non-negative, but got ${n}.`),U(a.size===r.size||a.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`);const i={x:r,weights:a},o={size:n};return re.runKernel(Uv,i,o)}const pT=ne({bincount_:mce});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gce(t,e){const n=j(t,"s0","broadcastArgs","int32"),r=j(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const a={s0:n,s1:r};return re.runKernel(Vv,a)}const PD=ne({broadcastArgs_:gce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yce(t,e){let n=j(t,"broadcastTo","x");const r=n.shape;if(e.some(l=>!(l>0)||l%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=Ce(n,l)}const a=n.shape,i=Array.from(e);for(let l=e.length-1;l>=0;l--)if(a[l]===e[l])i[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((l,u)=>l>1?u:-1).filter(l=>l>=0).length===0)return xl(n);const o={x:n},s={reps:i};return re.runKernel(Cg,o,s)}const qp=ne({broadcastTo_:yce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bce(t){const e={x:j(t,"x","ceil","float32")};return re.runKernel($m,e)}const FD=ne({ceil_:bce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kp(t,e,n){const r={shape:t,value:e,dtype:n};return re.runKernel(dx,{},r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vce(t,e,n){const r=j(t,"x","clipByValue");if(U(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Kp(r.shape,e,r.dtype);const a={x:r},i={clipValueMin:e,clipValueMax:n};return re.runKernel(Om,a,i)}const AD=ne({clipByValue_:vce});function xce(t){return Sa(t,0)}const DD=ne({concat1d_:xce});function wce(t,e){return Sa(t,e)}const LD=ne({concat2d_:wce});function kce(t,e){return Sa(t,e)}const zD=ne({concat3d_:kce});function Sce(t,e){return Sa(t,e)}const BD=ne({concat4d_:Sce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cce(t,e,n,r,a="NHWC",i=[1,1],o){const s=j(t,"x","conv2d","float32"),l=j(e,"filter","conv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=Ce(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),U(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),fo("conv2d",r,o);const d=a==="NHWC"?u.shape[3]:u.shape[1];U(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),U(ka(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const p={x:u,filter:l},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},g=re.runKernel(qv,p,f);return c?Ce(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Ug=ne({conv2d_:Cce});function Ece(t,e,n,r,a="NWC",i=1,o){const s=j(t,"x","conv1d"),l=j(e,"filter","conv1d");let u=s,c=!1;s.rank===2&&(c=!0,u=Ce(s,[1,s.shape[0],s.shape[1]])),U(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),U(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),fo("conv1d",r,o),U(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),U(ka(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),U(a==="NWC",()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);const d=Ce(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=Ce(u,[u.shape[0],1,u.shape[1],u.shape[2]]),f=Ug(p,d,[1,n],r,"NHWC",[1,i],o);return c?Ce(f,[f.shape[2],f.shape[3]]):Ce(f,[f.shape[0],f.shape[2],f.shape[3]])}const jD=ne({conv1d_:Ece});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nce(t,e,n,r,a,i="NHWC",o){U(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,l=e,u=!1;e.rank===3&&(u=!0,l=Ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,t[0],t[1],t[2]]),U(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),U(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),U(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?s[3]:s[1],d=i==="NHWC"?l.shape[3]:l.shape[1];U(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),U(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),fo("conv2dDerInput",a,o);const p={dy:l,filter:n},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},g=re.runKernel(Xv,p,f);return u?Ce(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const UD=ne({conv2DBackpropInput_:Nce});function Tce(t,e,n,r,a,i){const o=j(t,"x","conv2dTranspose"),s=j(e,"filter","conv2dTranspose");return UD(n,o,s,r,a,"NHWC",i)}const VD=ne({conv2dTranspose_:Tce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ice(t,e,n,r,a="NDHWC",i=[1,1,1]){const o=j(t,"x","conv3d"),s=j(e,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=Ce(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),U(s.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),U(l.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`),U(ka(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),U(a==="NDHWC",()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`);const c={x:l,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:i},p=re.runKernel(Qv,c,d);return u?Ce(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const WD=ne({conv3d_:Ice});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _ce(t,e,n,r,a){U(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,s=!1;e.rank===4&&(s=!0,o=Ce(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],u=o.shape[4];U(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),U(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),U(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),U(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),U(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},d={pad:a,strides:r,inputShape:i},p=re.runKernel(Yv,c,d);return s?Ce(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const Rce=ne({conv3DBackpropInput_:_ce});function $ce(t,e,n,r,a){const i=j(t,"x","conv3dTranspose"),o=j(e,"filter","conv3dTranspose");return Rce(n,i,o,r,a)}const GD=ne({conv3dTranspose_:$ce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Oce(t){const e={x:j(t,"x","cos","float32")};return re.runKernel(Mm,e)}const HD=ne({cos_:Oce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mce(t){const e={x:j(t,"x","cosh","float32")};return re.runKernel(Pm,e)}const qD=ne({cosh_:Mce});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the 'License');
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an 'AS IS' BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Pce(t,e=0,n=!1,r=!1){const a={x:j(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return re.runKernel(Zv,a,i)}const KD=ne({cumprod_:Pce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fce(t,e=0,n=!1,r=!1){const a={x:j(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return re.runKernel(Jv,a,i)}const XD=ne({cumsum_:Fce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ace(t,e,n,r=!1){const a=j(t,"x","denseBincount"),i=j(e,"weights","denseBincount");U(a.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),U(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),U(n>=0,()=>`size must be non-negative, but got ${n}.`),U(i.size===a.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${i.shape}.`);const o={x:a,weights:i},s={size:n,binaryOutput:r};return re.runKernel(tx,o,s)}const QD=ne({denseBincount_:Ace});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dce(t,e,n="NHWC"){const r=j(t,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];U(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),U(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e}  for depthToSpace with input shape
    ${r.shape}`),U(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),U(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const s={x:r},l={blockSize:e,dataFormat:n};return re.runKernel(nx,s,l)}const YD=ne({depthToSpace_:Dce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lce(t,e,n,r,a="NHWC",i=[1,1],o){const s=j(t,"x","depthwiseConv2d","float32"),l=j(e,"filter","depthwiseConv2d","float32");let u=s,c=!1;s.rank===3&&(c=!0,u=Ce(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),U(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=a==="NHWC"?u.shape[3]:u.shape[1];U(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),fo("depthwiseConv2d",r,o);const p={x:u,filter:l},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},g=re.runKernel(rx,p,f);return c?Ce(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const $w=ne({depthwiseConv2d_:Lce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zce(t){const e={x:j(t,"x","diag")};return re.runKernel(ox,e)}const ZD=ne({diag_:zce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bce(t,e,n,r,a=[1,1],i="NHWC"){const o=j(t,"x","dilation2d"),s=j(e,"filter","dilation2d");U(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),U(s.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),U(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,u=!1;o.rank===3&&(l=Ce(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0);const c={x:l,filter:s},d={strides:n,pad:r,dilations:a},p=re.runKernel(sx,c,d);return u?Ce(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const JD=ne({dilation2d_:Bce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jce(t,e){let n=j(t,"a","equal","string_or_numeric"),r=j(e,"b","equal","string_or_numeric");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(Lm,a)}const hT=ne({equal_:jce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uce(t,e,n){const r=j(e,"a","where"),a=j(n,"b","where"),i=j(t,"condition","where","bool"),o=Ut(Ut(i.shape,r.shape),a.shape),s=qp(i,o),l=qp(r,o),u=qp(a,o),c={condition:s,t:l,e:u};return re.runKernel(Xx,c)}const ad=ne({where_:Uce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vce(t){const e={x:j(t,"x","zerosLike")};return re.runKernel(mw,e)}const Ci=ne({zerosLike_:Vce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wce(t,e){let n=j(t,"a","div"),r=j(e,"b","div");[n,r]=Qn(n,r);const a=_n(n,r),i=Ci(a),o=hT(r,i);return ad(o,i,a)}const eL=ne({divNoNan_:Wce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gce(t,e){const n=j(t,"t1","dot"),r=j(e,"t2","dot");U((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(U(a===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${i}.`),n.rank===1&&r.rank===1){const o=Ce(n,[1,-1]),s=Ce(r,[-1,1]),l=pn(o,s);return Ce(l,[])}else if(n.rank===1&&r.rank===2){const o=Ce(n,[1,-1]),s=Ce(r,[r.shape[0],r.shape[1]]),l=pn(o,s);return Ce(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=Ce(r,[-1,1]),s=pn(n,o);return Ce(s,[s.size])}else{const o=Ce(r,[r.shape[0],r.shape[1]]);return pn(n,o)}}const tL=ne({dot_:Gce});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hce(t,...e){const n=e.map((a,i)=>j(a,`tensors${i}`,"einsum")),r={equation:t};return re.runKernel(lx,n,r)}const nL=ne({einsum_:Hce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qce(t){const e={x:j(t,"x","elu","float32")};return re.runKernel(Am,e)}const fT=ne({elu_:qce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kce(t){let e=j(t,"x","erf");U(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Un(e,"float32"));const n={x:e};return re.runKernel(Dm,n)}const rL=ne({erf_:Kce});/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mT(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function aL(t,e,n){const r=t.length+e.length,a=[];let i=0,o=0;for(let s=0;s<r;s++)n.indexOf(s)===-1?a.push(t[i++]):a.push(e[o++]);return a}function aa(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const a=e.map(i=>t[i]);return[n,a]}function Pr(t,e){const n=e.map(r=>1);return aL(t,n,e)}function ia(t,e,n){U(mT(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function mr(t,e){if(mT(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Vg(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function gr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xce(t,e=null,n=!1){const r={x:j(t,"x","max")},a={reductionIndices:e,keepDims:n};return re.runKernel(wx,r,a)}const id=ne({max_:Xce});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qce(t,e=null,n=!1){const r={x:j(t,"x","min")},a={axis:e,keepDims:n};return re.runKernel(Nx,r,a)}const Ow=ne({min_:Qce});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yce(t,e){let n=j(t,"base","pow"),r=j(e,"exp","pow");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(sg,a)}const Xp=ne({pow_:Yce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bt(t,e){if((xa(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&xa(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Tu(t,[],[],e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zce(t){const e={x:j(t,"x","sqrt","float32")};return re.runKernel(vg,e)}const Ns=ne({sqrt_:Zce});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jce(t){const e=j(t,"x","square"),n={};return re.runKernel("Square",{x:e},n)}const mo=ne({square_:Jce});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ede(t,e=null,n=!1){let r=j(t,"x","sum");r.dtype==="bool"&&(r=Un(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return re.runKernel(Yx,a,i)}const Rn=ne({sum_:ede});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tde(t,e="euclidean",n=null,r=!1){t=j(t,"x","norm");const a=iL(t,e,n);let i=a.shape;if(r){const o=Zt(n,t.shape);i=Pr(a.shape,o)}return Ce(a,i)}function iL(t,e,n=null){if(t.rank===0)return Si(t);if(t.rank!==1&&n===null)return iL(Ce(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Rn(Si(t),n);if(e===1/0)return id(Si(t),n);if(e===-1/0)return Ow(Si(t),n);if(e==="euclidean"||e===2)return Ns(Rn(Xp(Si(t),Bt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return id(Rn(Si(t),n[0]),n[1]-1);if(e===1/0)return id(Rn(Si(t),n[1]),n[0]);if(e===-1/0)return Ow(Rn(Si(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Ns(Rn(mo(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Wg=ne({norm_:tde});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nde(t,e=null,n=!1){return Wg(t,"euclidean",e,n)}const oL=ne({euclideanNorm_:nde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rde(t){const e={x:j(t,"x","exp")};return re.runKernel(zm,e)}const $u=ne({exp_:rde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ade(t,e=0){const n=j(t,"x","expandDims","string_or_numeric");U(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:e};return re.runKernel(ux,r,a)}const Cl=ne({expandDims_:ade});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ide(t){const e={x:j(t,"x","expm1")};return re.runKernel(Bm,e)}const sL=ne({expm1_:ide});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ode(t,e){const n=j(t,"x","tile","string_or_numeric");U(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},a={reps:e};return re.runKernel(Cg,r,a)}const Qp=ne({tile_:ode});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sde(t,e,n,r="float32"){e==null&&(e=t);const a=Tt([t,e],r),i=t<=e?t:e;for(let s=0;s<i;++s)a.set(1,s,s);const o=Ce(a.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Qp(Cl(o,0),[n[0],1,1]);if(n.length===2)return Qp(Cl(Cl(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Qp(Cl(Cl(Cl(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const gT=ne({eye_:sde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lde(t){const e={x:j(t,"x","floor","float32")};return re.runKernel(jm,e)}const yT=ne({floor_:lde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ude(t,e,n=0,r=0){const a=j(t,"x","gather"),i=j(e,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return re.runKernel(fx,o,s)}const bT=ne({gather_:ude});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cde(t,e){let n=j(t,"a","greater","string_or_numeric"),r=j(e,"b","greater","string_or_numeric");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(Vm,a)}const Gg=ne({greater_:cde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dde(t,e){let n=j(t,"a","greaterEqual","string_or_numeric"),r=j(e,"b","greaterEqual","string_or_numeric");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(Wm,a)}const vT=ne({greaterEqual_:dde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pde(t){const e={x:j(t,"x","isFinite")};return re.runKernel(Hm,e)}const lL=ne({isFinite_:pde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hde(t){const e={x:j(t,"x","isInf")};return re.runKernel(qm,e)}const uL=ne({isInf_:hde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fde(t){const e={x:j(t,"x","isNaN")};return re.runKernel(Km,e)}const cL=ne({isNaN_:fde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mde(t,e=.2){const n={x:j(t,"x","leakyRelu")},r={alpha:e};return re.runKernel(bx,n,r)}const xT=ne({leakyRelu_:mde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gde(t,e){let n=j(t,"a","less","string_or_numeric"),r=j(e,"b","less","string_or_numeric");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(Xm,a)}const dL=ne({less_:gde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yde(t,e){let n=j(t,"a","lessEqual","string_or_numeric"),r=j(e,"b","lessEqual","string_or_numeric");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(Qm,a)}const Mw=ne({lessEqual_:yde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pL(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return re.runKernel(vx,{},r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bde(t,e=5,n=1,r=1,a=.5){const i=j(t,"x","localResponseNormalization");U(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),U(Vc(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,s=!1;i.rank===3&&(s=!0,o=Ce(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},u={depthRadius:e,bias:n,alpha:r,beta:a},c=re.runKernel(xx,l,u);return s?Ce(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const hL=ne({localResponseNormalization_:bde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vde(t){const e={x:j(t,"x","log","float32")};return re.runKernel(Ym,e)}const Yp=ne({log_:vde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xde(t){const e={x:j(t,"x","log1p")};return re.runKernel(Zm,e)}const wT=ne({log1p_:xde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wde(t){return U(Cu(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=j(e,"x","tf.grad","string_or_numeric"),a=n!=null?j(n,"dy","tf.grad"):null;return re.tidy(()=>{const{value:i,grads:o}=re.gradients(()=>t(r),[r],a);return a!=null&&na(i.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Pw(o),o[0]})}}function kde(t){return U(Cu(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{U(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=Fg(e,"args","tf.grads","string_or_numeric"),a=n!=null?j(n,"dy","tf.grads"):null;return re.tidy(()=>{const{value:i,grads:o}=re.gradients(()=>t(...r),r,a);return a!=null&&na(i.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Pw(o),o})}}function Sde(t){return U(Cu(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{U(e instanceof Xn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),U(n==null||n instanceof Xn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:a}=re.gradients(()=>t(e),[e],n);return Pw(r),{grad:r[0],value:a}}}function Cde(t){return U(Cu(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{U(Array.isArray(e)&&e.every(a=>a instanceof Xn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),U(n==null||n instanceof Xn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=re.gradients(()=>t(...e),e,n);return n!=null&&na(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Pw(r.grads),r}}function fL(t,e){U(Cu(t),()=>"The f passed in variableGrads(f) must be a function"),U(e==null||Array.isArray(e)&&e.every(u=>u instanceof Pg),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in re.registeredVariables)e.push(re.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,a=e.length;e=e.filter(u=>u.trainable),U(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const i=!0,{value:o,grads:s}=re.gradients(t,e,null,i);U(s.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),U(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,c)=>{s[c]!=null&&(l[u.name]=s[c])}),r?.forEach(u=>l[u.name]=null),{value:o,grads:l}}function Ts(t){return re.customGrad(t)}function Pw(t){if(t.filter(e=>e==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ede(t){const e={x:j(t,"x","softplus")};return re.runKernel(bg,e)}const kT=ne({softplus_:Ede});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nde(t){const e=j(t,"x","logSigmoid");return Ts(n=>({value:Es(kT(Es(n))),gradFunc:r=>De(r,rd(Es(n)))}))(e)}const mL=ne({logSigmoid_:Nde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tde(t,e){let n=j(t,"a","sub"),r=j(e,"b","sub");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(wg,a)}const At=ne({sub_:Tde});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ide(t,e=-1){const n=j(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Ts((r,a)=>{const i=id(r,e,!0),o=At(r,i),s=At(Un(o,"float32"),Yp(Rn($u(o),e,!0)));return a([s]),{value:s,gradFunc:(l,u)=>{const[c]=u,d=!0,p=$u(c);return At(l,De(Rn(l,e,d),p))}}})(n)}const gL=ne({logSoftmax_:Ide});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _de(t,e=null,n=!1){const r=j(t,"x","logSumExp"),a=Zt(e,r.shape),i=id(r,a,!0),o=At(r,i),s=$u(o),l=Rn(s,a),u=Yp(l),c=yt(Ce(i,u.shape),u);if(n){const d=Pr(c.shape,a);return Ce(c,d)}return c}const ST=ne({logSumExp_:_de});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rde(t,e){const n=j(t,"a","logicalAnd","bool"),r=j(e,"b","logicalAnd","bool");Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(Jm,a)}const Hg=ne({logicalAnd_:Rde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $de(t){const e={x:j(t,"x","logicalNot","bool")};return re.runKernel(eg,e)}const CT=ne({logicalNot_:$de});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ode(t,e){const n=j(t,"a","logicalOr","bool"),r=j(e,"b","logicalOr","bool");Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(tg,a)}const ET=ne({logicalOr_:Ode});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mde(t,e){const n=j(t,"a","logicalXor","bool"),r=j(e,"b","logicalXor","bool");return Ut(n.shape,r.shape),Hg(ET(t,e),CT(Hg(t,e)))}const yL=ne({logicalXor_:Mde});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Fw=2147483648;function Pde(t,e,n="left"){const r=j(t,"sortedSequence","searchSorted"),a=j(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=Ce(r,[-1,i]),l=Ce(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(be(l.shape)>=Fw)throw new Error(`values tensor size must less than ${Fw}`);if(s.shape[1]>=Fw)throw new Error(`trailing dim_size must less than ${Fw} for int32 output type, was ${s.shape[1]}`);const u={sortedSequence:s,values:l},c={side:n};return re.runKernel(Kx,u,c)}const Aw=ne({searchSorted_:Pde});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bL(t,e){return Aw(t,e,"left")}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fde(t,e,n,r,a){const i=j(t,"x","maxPool"),o=1;let s=i,l=!1;i.rank===3&&(l=!0,s=Ce(i,[1,i.shape[0],i.shape[1],i.shape[2]])),U(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),U(ka(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),fo("maxPool",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a},d=re.runKernel(kx,u,c);return l?Ce(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const NT=ne({maxPool_:Fde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ade(t,e=[1,1,1],n,r,a,i="NDHWC"){const o=j(t,"x","maxPool3d");let s=o,l=!1;o.rank===4&&(l=!0,s=Ce(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(s.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),U(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),fo("maxPool3d",r,a);const u={x:s},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=re.runKernel(Sx,u,c);return l?Ce(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const vL=ne({maxPool3d_:Ade});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dde(t,e,n,r,a=!1){const i={x:j(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:a},s=re.runKernel(Cx,i,o);return{result:s[0],indexes:s[1]}}const xL=ne({maxPoolWithArgmax_:Dde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lde(t,e){let n=j(t,"a","maximum"),r=j(e,"b","maximum");[n,r]=Qn(n,r),n.dtype==="bool"&&(n=Un(n,"int32"),r=Un(r,"int32")),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(ng,a)}const TT=ne({maximum_:Lde});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zde(t,e=null,n=!1){const r={x:j(t,"x","mean")},a={axis:e,keepDims:n};return re.runKernel(Ex,r,a)}const qg=ne({mean_:zde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ou(t,e="float32"){if(e==="complex64"){const r=Ou(t,"float32"),a=Ou(t,"float32");return bl(r,a)}const n=ra(be(t),e);return re.makeTensor(n,t,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mu(t,e="float32"){if(e==="complex64"){const r=Mu(t,"float32"),a=Ou(t,"float32");return bl(r,a)}const n=$v(be(t),e);return re.makeTensor(n,t,e)}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wL(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=j(t,"x","meshgrid",t instanceof Xn?t.dtype:"float32");if(e===void 0)return[r];let a=j(e,"y","meshgrid",e instanceof Xn?e.dtype:"float32");const i=be(r.shape),o=be(a.shape);return n==="xy"?(r=Ce(r,[1,-1]),a=Ce(a,[-1,1]),[pn(Mu([o,1],r.dtype),r),pn(a,Mu([1,i],a.dtype))]):(r=Ce(r,[-1,1]),a=Ce(a,[1,-1]),[pn(r,Mu([1,o],r.dtype)),pn(Mu([i,1],a.dtype),a)])}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bde(t,e){let n=j(t,"a","minimum"),r=j(e,"b","minimum");[n,r]=Qn(n,r),n.dtype==="bool"&&(n=Un(n,"int32"),r=Un(r,"int32")),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(rg,a)}const IT=ne({minimum_:Bde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jde(t,e,n){U(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=j(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");U(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const a=n==="reflect"?1:0;for(let s=0;s<r.rank;s++)U(e[s].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),U(e[s][0]>=0&&e[s][0]<=r.shape[s]-a&&e[s][1]>=0&&e[s][1]<=r.shape[s]-a,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-a} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return re.runKernel(Tx,o,i)}const kL=ne({mirrorPad_:jde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ude(t,e){let n=j(t,"a","mod"),r=j(e,"b","mod");[n,r]=Qn(n,r);const a={a:n,b:r};return re.runKernel(ag,a)}const SL=ne({mod_:Ude});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vde(t,e=null,n=!1){t=j(t,"x","moments");const r=Zt(e,t.shape),a=qg(t,r,n);let i=a.shape;n||(i=Pr(a.shape,r));const o=mo(At(Un(t,"float32"),Ce(a,i))),s=qg(o,r,n);return{mean:a,variance:s}}const CL=ne({moments_:Vde});function Wde(t,e,n,r){const a=j(e,"data","multiRNNCell"),i=Fg(n,"c","multiRNNCell"),o=Fg(r,"h","multiRNNCell");let s=a;const l=[];for(let d=0;d<t.length;d++){const p=t[d](s,i[d],o[d]);l.push(p[0]),l.push(p[1]),s=p[1]}const u=[],c=[];for(let d=0;d<l.length;d+=2)u.push(l[d]),c.push(l[d+1]);return[u,c]}const EL=ne({multiRNNCell_:Wde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gde(t,e,n,r=!1){const a=j(t,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const s={logits:o===1?Ce(a,[1,-1]):a},l={numSamples:e,seed:n,normalized:r},u=re.runKernel(Ix,s,l);return o===1?Ce(u,[u.size]):u}const NL=ne({multinomial_:Gde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hde(t,e){let n=j(t,"a","notEqual","string_or_numeric"),r=j(e,"b","notEqual","string_or_numeric");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r};return re.runKernel(og,a)}const _T=ne({notEqual_:Hde});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qde(t){const e={x:j(t,"x","onesLike")};return re.runKernel(Mx,e)}const TL=ne({onesLike_:qde});function Kde(t,e){const n=j(t,"v1","outerProduct"),r=j(e,"v2","outerProduct");U(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const a=Ce(n,[-1,1]),i=Ce(r,[1,-1]);return pn(a,i)}const IL=ne({outerProduct_:Kde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xde(t,e,n=0){const r=j(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:e,constantValue:n},i={x:r};return re.runKernel(Ax,i,a)}const Zp=ne({pad_:Xde});function Qde(t,e,n=0){return U(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Zp(t,[e],n)}const _L=ne({pad1d_:Qde});function Yde(t,e,n=0){return U(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Zp(t,e,n)}const RL=ne({pad2d_:Yde});function Zde(t,e,n=0){return U(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Zp(t,e,n)}const $L=ne({pad3d_:Zde});function Jde(t,e,n=0){return U(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Zp(t,e,n)}const OL=ne({pad4d_:Jde});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function epe(t,e,n){const r=j(t,"x","spaceToBatchND");U(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),U(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),U(r.shape.reduce((o,s,l)=>l>0&&l<=e.length?o&&(s+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const a={x:r},i={blockShape:e,paddings:n};return re.runKernel(Zx,a,i)}const RT=ne({spaceToBatchND_:epe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tpe(t,e,n,r,a,i,o){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");const s=j(t,"x","maxPool");let l=s,u=!1;s.rank===3&&(u=!0,l=Ce(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(ka(i,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const c=ho(l.shape,e,i,a,r),d=[c.dilationHeight,c.dilationWidth];let p;r==="same"?p=rpe([c.filterHeight,c.filterWidth],d):p=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[g,y]=npe([c.inHeight,c.inWidth],d,p),v=f?r:"valid",b=f?l:RT(l,d,g),x=(n==="avg"?()=>cT(b,e,i,v,o):()=>NT(b,e,i,v,o))(),w=f?x:dT(x,d,y);return u?Ce(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function npe(t,e,n){const r=n.map(c=>c[0]),a=n.map(c=>c[1]),i=t.concat(r,a),o=e.map((c,d)=>(c-i[d]%c)%c),s=a.map((c,d)=>c+o[d]),l=e.map((c,d)=>[r[d],s[d]]),u=e.map((c,d)=>[0,o[d]]);return[l,u]}function rpe(t,e){const n=t.map((i,o)=>i+(i-1)*(e[o]-1)).map(i=>i-1),r=n.map(i=>Math.floor(i/2)),a=n.map((i,o)=>i-r[o]);return n.map((i,o)=>[r[o],a[o]])}const ML=ne({pool_:tpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ape(t,e){const n=j(t,"x","prelu"),r=j(e,"alpha","prelu"),a={x:n,alpha:r};return re.runKernel(Dx,a)}const $T=ne({prelu_:ape});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ipe(t,e=null,n=!1){let r=j(t,"x","prod");r.dtype==="bool"&&(r=Un(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return re.runKernel(Lx,a,i)}const PL=ne({prod_:ipe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ope(t,e,n,r){const a=t.map((c,d)=>j(c,`tensors${d}`,"raggedGather","int32")),i=j(e,"paramsDenseValues","raggedGather"),o=j(n,"indices","raggedGather","int32"),s={paramsNestedSplits:a,paramsDenseValues:i,indices:o},l={outputRaggedRank:r},u=re.runKernel(zx,s,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const FL=ne({raggedGather_:ope});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function spe(t,e,n,r,a){const i=j(t,"shape","raggedTensorToTensor","int32"),o=j(e,"values","raggedTensorToTensor"),s=j(n,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((d,p)=>j(d,`tensors${p}`,"raggedTensorToTensor","int32")),u={shape:i,values:o,defaultValue:s,rowPartitionTensors:l},c={rowPartitionTypes:a};return re.runKernel(Bx,u,c)}const AL=ne({raggedTensorToTensor_:spe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lpe(t,e,n){const r=be(t);let a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)a[i]=e();return re.makeTensor(a,t,n)}const DL=ne({rand_:lpe});var OT={exports:{}};OT.exports,function(t){(function(e,n,r){function a(l){var u=this,c=s();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new a(l),d=u&&u.state,p=c.next;return p.int32=function(){return c.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,d&&(typeof d=="object"&&i(d,c),p.state=function(){return i(c,{})}),p}function s(){var l=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(ei,t,!1)}(OT);var upe=OT.exports,MT={exports:{}};MT.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(ei,t,!1)}(MT);var cpe=MT.exports,PT={exports:{}};PT.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(s|0)?l.x=s:u+=s;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(ei,t,!1)}(PT);var dpe=PT.exports,FT={exports:{}};FT.exports,function(t){(function(e,n,r){function a(s){var l=this;l.next=function(){var c=l.x,d=l.i,p,f;return p=c[d],p^=p>>>7,f=p^p<<24,p=c[d+1&7],f^=p^p>>>10,p=c[d+3&7],f^=p^p>>>3,p=c[d+4&7],f^=p^p<<7,p=c[d+7&7],p=p^p<<13,f^=p^p<<9,c[d]=f,l.i=d+1&7,f};function u(c,d){var p,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,p=0;p<d.length;++p)f[p&7]=f[p&7]<<15^d.charCodeAt(p)+f[p+1&7]<<13;for(;f.length<8;)f.push(0);for(p=0;p<8&&f[p]===0;++p);for(p==8?f[7]=-1:f[p],c.x=f,c.i=0,p=256;p>0;--p)c.next()}u(l,s)}function i(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(c.x&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(ei,t,!1)}(FT);var ppe=FT.exports,AT={exports:{}};AT.exports,function(t){(function(e,n,r){function a(s){var l=this;l.next=function(){var c=l.w,d=l.X,p=l.i,f,g;return l.w=c=c+1640531527|0,g=d[p+34&127],f=d[p=p+1&127],g^=g<<13,f^=f<<17,g^=g>>>15,f^=f>>>12,g=d[p]=g^f,l.i=p,g+(c^c>>>16)|0};function u(c,d){var p,f,g,y,v,b=[],x=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,x=Math.max(x,d.length)),g=0,y=-32;y<x;++y)d&&(f^=d.charCodeAt((y+32)%d.length)),y===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,y>=0&&(v=v+1640531527|0,p=b[y&127]^=f+v,g=p==0?g+1:0);for(g>=128&&(b[(d&&d.length||0)&127]=-1),g=127,y=4*128;y>0;--y)f=b[g+34&127],p=b[g=g+1&127],f^=f<<13,p^=p<<17,f^=f>>>15,p^=p>>>12,b[g]=f^p;c.w=v,c.X=b,c.i=g}u(l,s)}function i(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(c.X&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(ei,t,!1)}(AT);var hpe=AT.exports,DT={exports:{}};DT.exports,function(t){(function(e,n,r){function a(s){var l=this,u="";l.next=function(){var d=l.b,p=l.c,f=l.d,g=l.a;return d=d<<25^d>>>7^p,p=p-f|0,f=f<<24^f>>>8^g,g=g-d|0,l.b=d=d<<20^d>>>12^p,l.c=p=p-f|0,l.d=f<<16^p>>>16^g,l.a=g-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var u=new a(s),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,g=(p+f)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(ei,t,!1)}(DT);var fpe=DT.exports,LL={exports:{}};const mpe={},gpe=Object.freeze(Object.defineProperty({__proto__:null,default:mpe},Symbol.toStringTag,{value:"Module"})),zL=MV(gpe);(function(t){(function(e,n,r){var a=256,i=6,o=52,s="random",l=r.pow(a,i),u=r.pow(2,o),c=u*2,d=a-1,p;function f(S,C,E){var R=[];C=C==!0?{entropy:!0}:C||{};var T=b(v(C.entropy?[S,w(n)]:S??x(),3),R),$=new g(R),P=function(){for(var D=$.g(i),B=l,z=0;D<u;)D=(D+z)*a,B*=a,z=$.g(1);for(;D>=c;)D/=2,B/=2,z>>>=1;return(D+z)/B};return P.int32=function(){return $.g(4)|0},P.quick=function(){return $.g(4)/4294967296},P.double=P,b(w($.S),n),(C.pass||E||function(D,B,z,q){return q&&(q.S&&y(q,$),D.state=function(){return y($,{})}),z?(r[s]=D,B):D})(P,T,"global"in C?C.global:this==r,C.state)}function g(S){var C,E=S.length,R=this,T=0,$=R.i=R.j=0,P=R.S=[];for(E||(S=[E++]);T<a;)P[T]=T++;for(T=0;T<a;T++)P[T]=P[$=d&$+S[T%E]+(C=P[T])],P[$]=C;(R.g=function(D){for(var B,z=0,q=R.i,Y=R.j,Z=R.S;D--;)B=Z[q=d&q+1],z=z*a+Z[d&(Z[q]=Z[Y=d&Y+B])+(Z[Y]=B)];return R.i=q,R.j=Y,z})(a)}function y(S,C){return C.i=S.i,C.j=S.j,C.S=S.S.slice(),C}function v(S,C){var E=[],R=typeof S,T;if(C&&R=="object")for(T in S)try{E.push(v(S[T],C-1))}catch{}return E.length?E:R=="string"?S:S+"\0"}function b(S,C){for(var E=S+"",R,T=0;T<E.length;)C[d&T]=d&(R^=C[d&T]*19)+E.charCodeAt(T++);return w(C)}function x(){try{var S;return p&&(S=p.randomBytes)?S=S(a):(S=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(S)),w(S)}catch{var C=e.navigator,E=C&&C.plugins;return[+new Date,e,E,e.screen,w(n)]}}function w(S){return String.fromCharCode.apply(0,S)}if(b(r.random(),n),t.exports){t.exports=f;try{p=zL}catch{}}else r["seed"+s]=f})(typeof self<"u"?self:ei,[],Math)})(LL);var ype=LL.exports,bpe=upe,vpe=cpe,xpe=dpe,wpe=ppe,kpe=hpe,Spe=fpe,od=ype;od.alea=bpe,od.xor128=vpe,od.xorwow=xpe,od.xorshift7=wpe,od.xor4096=kpe,od.tychei=Spe;var Dw=od;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class LT{constructor(e,n,r,a,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=Dw.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const a=this.nextVal;return this.nextVal=NaN,a}let e,n,r=!1;for(;!r;){let a,i,o;do a=2*this.random()-1,i=2*this.random()-1,o=a*a+i*i;while(o>=1||o===0);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Cpe{constructor(e,n,r,a){this.alpha=e,this.beta=1/n,this.dtype=r;const i=a||Math.random();this.randu=Dw.alea(i.toString()),this.randn=new LT(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,a,i,o;for(;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,e=a*a,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class Epe{constructor(e=0,n=1,r,a){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=Dw.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Npe(t,e,n=1,r="float32",a){if(n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new Cpe(e,n,r,a),o=Tt(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const BL=ne({randomGamma_:Npe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tpe(t,e=0,n=1,r,a){if(r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new LT(e,n,r,!1,a),o=Tt(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const zT=ne({randomNormal_:Tpe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ipe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return zT(t,0,1,e,n)}const jL=ne({randomStandardNormal_:Ipe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _pe(t,e=0,n=1,r="float32",a){const i=Tt(t,r),o=new Epe(e,n,null,a);for(let s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}const BT=ne({randomUniform_:_pe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jp(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const a={start:t,stop:e,step:n,dtype:r};return re.runKernel(jx,{},a)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rpe(t){const e={x:j(t,"x","reciprocal")};return re.runKernel(lg,e)}const UL=ne({reciprocal_:Rpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $pe(t){const e={x:j(t,"x","relu")};return re.runKernel(ug,e)}const Kg=ne({relu_:$pe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ope(t){const e={x:j(t,"x","relu6")};return re.runKernel(cg,e)}const jT=ne({relu6_:Ope});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mpe(t,e){const n={x:j(t,"x","reverse")},r={dims:e};return re.runKernel(Hx,n,r)}const Pu=ne({reverse_:Mpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ppe(t){const e=j(t,"x","reverse");return U(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Pu(e,0)}const VL=ne({reverse1d_:Ppe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fpe(t,e){const n=j(t,"x","reverse");return U(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Pu(n,e)}const WL=ne({reverse2d_:Fpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ape(t,e){const n=j(t,"x","reverse");return U(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Pu(n,e)}const GL=ne({reverse3d_:Ape});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dpe(t,e){const n=j(t,"x","reverse");return U(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Pu(n,e)}const HL=ne({reverse4d_:Dpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lpe(t){const e={x:j(t,"x","round")};return re.runKernel(dg,e)}const UT=ne({round_:Lpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zpe(t){const e={x:j(t,"x","rsqrt","float32")};return re.runKernel(pg,e)}const qL=ne({rsqrt_:zpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bpe(t){const e={x:j(t,"x","selu")};return re.runKernel(hg,e)}const KL=ne({selu_:Bpe});function jpe(t,e,n,r,a,i=[1,1],o="NHWC"){const s=j(t,"x","separableConv2d"),l=j(e,"depthwiseFilter","separableConv2d"),u=j(n,"pointwiseFilter","separableConv2d");let c=s,d=!1;if(s.rank===3&&(d=!0,c=Ce(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");U(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),U(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),U(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),U(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),U(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const p=l.shape[2],f=l.shape[3];U(u.shape[2]===p*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*f}, but got ${u.shape[2]}.`);const g=$w(c,l,r,a,o,i),y=Ug(g,u,1,"valid",o);return d?Ce(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const XL=ne({separableConv2d_:jpe});/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function Upe(t,e){const n=j(t,"x","setdiff1d"),r=j(e,"y","setdiff1d");U(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),U(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),U(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const a=await n.data(),i=await r.data(),o=new Set(i);let s=0;for(let c=0;c<a.length;c++)o.has(a[c])||s++;const l=new Mr([s],n.dtype),u=new Mr([s],"int32");for(let c=0,d=0;c<a.length;c++)o.has(a[c])||(l.values[d]=a[c],u.values[d]=c,d++);return[l.toTensor(),u.toTensor()]}const QL=Upe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vpe(t){const e={x:j(t,"x","sign")};return re.runKernel(gg,e)}const YL=ne({sign_:Vpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wpe(t){const e={x:j(t,"x","sin","float32")};return re.runKernel(fg,e)}const ZL=ne({sin_:Wpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gpe(t){const e={x:j(t,"x","sinh")};return re.runKernel(mg,e)}const JL=ne({sinh_:Gpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hpe(t,e,n){const r=j(t,"x","slice1d");return U(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Cn(r,[e],[n])}const e9=ne({slice1d_:Hpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qpe(t,e,n){const r=j(t,"x","slice2d");return U(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Cn(r,e,n)}const t9=ne({slice2d_:qpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Kpe(t,e,n){const r=j(t,"x","slice3d");return U(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Cn(r,e,n)}const n9=ne({slice3d_:Kpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xpe(t,e,n){const r=j(t,"x","slice4d");return U(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Cn(r,e,n)}const r9=ne({slice4d_:Xpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Qpe(t,e=-1){const n=j(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},a={dim:e};return re.runKernel(ew,r,a)}const a9=ne({softmax_:Qpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ype(t){U(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(cx,e)}const Lw=ne({fft_:Ype});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zpe(t){U(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return re.runKernel(gx,e)}const Xg=ne({ifft_:Zpe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jpe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const a=Ce(t,[n,e]);r=Xg(a)}else{const a=[n,2*(e-1)],i=Ce(Wp(t),[n,e]),o=Ce(Dg(t),[n,e]),s=Pu(Cn(i,[0,1],[n,e-2]),1),l=De(Pu(Cn(o,[0,1],[n,e-2]),1),Bt(-1)),u=Sa([i,s],1),c=Sa([o,l],1),d=Ce(bl(u,c),[a[0],a[1]]);r=Xg(d)}if(r=Wp(r),t.rank===3&&t.shape[0]!==0){const a=r,i=t.shape[0];r=Ce(r,[i,r.shape[0]/i,r.shape[1]]),a.dispose()}return r}const VT=ne({irfft_:Jpe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ehe(t,e,n=0){const r={x:j(t,"x","split")},a={numOrSizeSplits:e,axis:n};return re.runKernel(Jx,r,a)}const eh=ne({split_:ehe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function the(t,e){U(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let a;if(e!=null&&e<n){const g=t.shape.map(v=>0),y=t.shape.map(v=>v);y[t.shape.length-1]=e,a=Cn(t,g,y),n=e}else if(e!=null&&e>n){const g=t.shape.map(y=>y);g[t.shape.length-1]=e-n,a=Sa([t,Ou(g)],t.shape.length-1),n=e}else a=t;const i=Ci(a),o=Ce(bl(a,i),[r,n]),s=Lw(o),l=Math.floor(n/2)+1,u=Wp(s),c=Dg(s),d=eh(u,[l,n-l],u.shape.length-1),p=eh(c,[l,n-l],c.shape.length-1),f=a.shape.slice();return f[a.shape.length-1]=l,Ce(bl(d[0],p[0]),f)}const zw=ne({rfft_:the});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nhe(t,e){let n=j(t,"a","squaredDifference"),r=j(e,"b","squaredDifference");[n,r]=Qn(n,r),Ut(n.shape,r.shape);const a={a:n,b:r},i={};return re.runKernel(xg,a,i)}const WT=ne({squaredDifference_:nhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rhe(t,e){const n=j(t,"x","squeeze","string_or_numeric");return Ce(n,ml(n.shape,e).newShape)}const Qg=ne({squeeze_:rhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ahe(t,e=0){const n=Fg(t,"tensors","stack","string_or_numeric");U(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&U(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:e};return re.runKernel(Fx,r,a)}const Is=ne({stack_:ahe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ihe(t,e=0){const n={x:j(t,"x","step")},r={alpha:e};return re.runKernel(Eg,n,r)}const GT=ne({step_:ihe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ohe(t,e,n,r,a=0,i=0,o=0,s=0,l=0){const u={x:j(t,"x","stridedSlice","string_or_numeric")},c={begin:e,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};return re.runKernel(ow,u,c)}const i9=ne({stridedSlice_:ohe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function she(t){const e={x:j(t,"x","tan","float32")};return re.runKernel(kg,e)}const o9=ne({tan_:she});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function go(t,e){Uc(t);const n=Ss(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Tu(t,null,n,e)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function th(t,e,n){if(Uc(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Ss(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Tu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function s9(t,e,n){if(Uc(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Ss(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Tu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function l9(t,e,n){if(Uc(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Ss(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Tu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function u9(t,e,n){if(Uc(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Ss(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Tu(t,e,r,n)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lhe(t,e=1,n=!0){const r=j(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[s,l]=re.runKernel(cw,i,o);return{values:s,indices:l}}const c9=ne({topk_:lhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uhe(t,e=0,n=1,r,a){if(r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new LT(e,n,r,!0,a),o=Tt(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}const d9=ne({truncatedNormal_:uhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function che(t,e=0){const n=j(t,"x","unique","string_or_numeric");U(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:e},[i,o]=re.runKernel(pw,r,a);return{values:i,indices:o}}const p9=ne({unique_:che});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dhe(t,e,n){const r=j(t,"x","unsortedSegmentSum"),a=j(e,"segmentIds","unsortedSegmentSum","int32");U(Vc(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:a},o={numSegments:n};return re.runKernel(fw,i,o)}const h9=ne({unsortedSegmentSum_:dhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function phe(t,e=0){const n=j(t,"x","unstack","string_or_numeric");U(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},a={axis:e};return re.runKernel(hw,r,a)}const Fu=ne({unstack_:phe});/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function f9(t,e){return Aw(t,e,"right")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m9(t,e=!0,n,r){return re.makeVariable(t,e,n,r)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bw(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=Tt(t,"int32"),a=Tt([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),s=i*t.length;a.values.set(o,s)}return a.toTensor()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function hhe(t){const e=j(t,"condition","whereAsync","bool"),n=await e.data(),r=Bw(e.shape,n);return t!==e&&e.dispose(),r}const HT=hhe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function fhe(t,e,n){const r=j(t,"tensor","boolMask"),a=j(e,"mask","boolMask","bool"),i=n??0,o=a.rank,s=r.shape;U(o>0,()=>"mask cannot be scalar"),na(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let y=i;y<i+o;y++)l*=s[y];const u=s.slice(0,i).concat([l],s.slice(i+o)),c=Ce(r,u),d=Ce(a,[-1]),p=await HT(d),f=Qg(p,[1]),g=bT(c,f,i);return t!==r&&r.dispose(),e!==a&&a.dispose(),f.dispose(),c.dispose(),d.dispose(),p.dispose(),g}const g9=fhe;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mhe(t,e,n,r,a=!0){const i=j(t,"v","movingAverage"),o=j(e,"x","movingAverage"),s=j(n,"decay","movingAverage");_A(i,o),U(Sn(i.shape,o.shape),()=>"Shape mismatch in v and x");const l=Bt(1),u=At(l,s);let c=De(At(o,i),u);if(a){U(r!=null,()=>"When using zeroDebias: true, step is required.");const d=j(r,"step","movingAverage");c=_n(c,At(l,Xp(s,d)))}return yt(i,c)}const y9=ne({movingAverage_:mhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ghe(t,e,n){const r=j(t,"indices","scatterND","int32"),a=j(e,"updates","scatterND");Q4(a,r,n);const i={indices:r,updates:a},o={shape:n};return re.runKernel(qx,i,o)}const b9=ne({scatterND_:ghe});function yhe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const a=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===a))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${a}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bhe(t,e,n,r=0){const a=j(t,"sparseIndices","sparseToDense","int32"),i=j(e,"sparseValues","sparseToDense","string_or_numeric"),o=j(r,"defaultValue","sparseToDense",i.dtype);yhe(a,i,n,o);const s={sparseIndices:a,sparseValues:i,defaultValue:o},l={outputShape:n};return re.runKernel(iw,s,l)}const v9=ne({sparseToDense_:bhe});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vhe(t,e){const n=j(e,"indices","gatherND","int32"),r={params:j(t,"x","gatherND","string_or_numeric"),indices:n};return re.runKernel(mx,r)}const x9=ne({gatherND_:vhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xhe(t,e){if(e==null)return t.shape.slice();if(Sn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function whe(t,e,n,r){const a=j(t,"x","dropout");if(U(a.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),U(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Xn?a.clone():a;const i=xhe(a,n),o=1-e,s=_n(yT(yt(BT(i,0,1,"float32",r),o)),o);return De(a,s)}const w9=ne({dropout_:whe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qT(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function jw(t,e,n){const r=1-t%2,a=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);a[i]=e-n*Math.cos(o)}return go(a,"float32")}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function khe(t,e,n=1){const r=j(t,"predictions","inTopK"),a=j(e,"targets","inTopK");U(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),U(r.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`),na(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];U(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const o=await r.data(),s=await a.data(),[l,u]=[o.length/i,i],c=$r("bool",l);for(let d=0;d<l;d++){const p=d*u,f=o.subarray(p,p+u),g=[];for(let y=0;y<f.length;y++)g.push({value:f[y],index:y});g.sort((y,v)=>v.value-y.value),c[d]=0;for(let y=0;y<n;y++)if(g[y].index===s[d]){c[d]=1;break}}return t!==r&&r.dispose(),e!==a&&a.dispose(),Qo(c,a.shape,"bool")}const k9=khe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function She(t,e,n,r,a,i="NHWC",o){let s=t;t.rank===3&&(s=Ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Ce(e,[1,e.shape[0],e.shape[1],e.shape[2]])),U(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),U(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),U(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];U(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),U(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),fo("conv2dDerFilter",a,o);const d={x:s,dy:l},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return re.runKernel(Kv,d,p)}const Che=ne({conv2DBackpropFilter_:She});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uw(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return De(t,GT(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function Vw(t,e){let n=e;const r=q4(t.shape,e.shape);return r.length>0&&(n=Rn(n,r)),Ce(n,t.shape)}function Ww(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Kg(t);if(e==="elu")return fT(t);if(e==="relu6")return jT(t);if(e==="prelu")return $T(t,n);if(e==="leakyrelu")return xT(t,r);if(e==="sigmoid")return rd(t);throw new Error(`Unknown fused activation ${e}.`)}const Gw=(t,e)=>!(t>0)||e==="linear";/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ehe({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",Gw(re.state.gradientDepth,l)===!1){U(a==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=Ug(t,e,n,r,a,i,o);return s!=null&&(E=yt(E,s)),Ww(E,l,u,c)}const d=j(t,"x","conv2d","float32"),p=j(e,"filter","conv2d","float32");let f=d,g=!1;d.rank===3&&(g=!0,f=Ce(d,[1,d.shape[0],d.shape[1],d.shape[2]])),U(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),U(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),fo("fused conv2d",r,o);const y=a==="NHWC"?f.shape[3]:f.shape[1];U(p.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${p.shape[2]}.`),U(ka(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const v=Gr(f.shape,p.shape,n,i,r,o);let b;s!=null&&(b=j(s,"bias","fused conv2d"),[b]=Qn(b,d),a==="NHWC"?Ut(v.outShape,b.shape):(U(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),U(b.shape.length===0||b.shape[0]===v.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let x;if(u!=null){const E=u.shape;if(U(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)U(E[0]===1||E[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${v.outChannels}).`);else if(E.length===3)try{Ut(E,v.outShape)}catch{const R=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(R)}x=j(u,"prelu weights","fused conv2d")}const w=(E,R)=>{U(a==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);const[T,$,P,D]=R,B=Uw(E,P,l);U(Bg(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const z=UD($.shape,B,T,n,r),q=Che($,B,T.shape,n,r),Y=[z,q];if(D!=null){const Z=Vw(D,B);Y.push(Z)}return Y},S={x:f,filter:p,bias:b,preluActivationWeights:x},C={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return s==null?Ts((E,R,T)=>{let $=re.runKernel(Tg,S,C);return T([R,E,$]),g&&($=Ce($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:w}})(f,p):Ts((E,R,T,$)=>{let P=re.runKernel(Tg,S,C);return $([R,E,P,T]),g&&(P=Ce(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:w}})(f,p,b)}const Nhe=ne({fusedConv2d_:Ehe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function The(t,e,n,r,a,i=[1,1],o){let s=t;t.rank===3&&(s=Ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:s,dy:l},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return re.runKernel(ax,u,c)}const Ihe=ne({depthwiseConv2dNativeBackpropFilter_:The});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _he(t,e,n,r,a,i=[1,1],o){let s=e,l=!1;e.rank===3&&(l=!0,s=Ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:t},d=re.runKernel(ix,u,c);return l?Ce(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Rhe=ne({depthwiseConv2dNativeBackpropInput_:_he});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $he({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(Gw(re.state.gradientDepth,l)===!1){let C=$w(t,e,n,r,a,i,o);return s!=null&&(C=yt(C,s)),Ww(C,l,u,c)}const d=j(t,"x","depthwiseConv2d","float32"),p=j(e,"filter","depthwiseConv2d","float32");let f=d,g=!1;d.rank===3&&(g=!0,f=Ce(d,[1,d.shape[0],d.shape[1],d.shape[2]])),U(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),U(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),U(f.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),U(ka(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),fo("fused depthwiseConv2d",r,o);const y=Gr(f.shape,p.shape,n,i,r,o,!0);let v;s!=null&&(v=j(s,"bias","fused conv2d"),[v]=Qn(v,d),Ut(y.outShape,v.shape));let b;u!=null&&(b=j(u,"prelu weights","fused depthwiseConv2d"));const x=(C,E)=>{U(Bg(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[R,T,$,P]=E,D=Uw(C,$,l),B=Rhe(T.shape,D,R,n,r,i,o),z=Ihe(T,D,R.shape,n,r,i,o);if(P!=null){const q=Vw(v,D);return[B,z,q]}return[B,z]},w={x:f,filter:p,bias:v,preluActivationWeights:b},S={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return s==null?Ts((C,E,R)=>{let T=re.runKernel(Ig,w,S);return R([E,C,T]),g&&(T=Ce(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:x}})(f,p):Ts((C,E,R,T)=>{let $=re.runKernel(Ig,w,S);return T([E,C,$,R]),g&&($=Ce($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:x}})(f,p,v)}const Ohe=ne({fusedDepthwiseConv2d_:$he});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mhe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:a,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:s=.2}){if(Gw(re.state.gradientDepth,i)===!1){let P=pn(t,e,n,r);return a!=null&&(P=yt(P,a)),Ww(P,i,o,s)}let l=j(t,"a","fused matMul"),u=j(e,"b","fused matMul");[l,u]=Qn(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=r?u.shape[u.rank-2]:u.shape[u.rank-1],g=l.shape.slice(0,-2),y=u.shape.slice(0,-2),v=be(g),b=be(y);U(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=Ut(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,f]),w=n?Ce(l,[v,c,p]):Ce(l,[v,p,c]),S=r?Ce(u,[b,f,d]):Ce(u,[b,d,f]);let C;a!=null&&(C=j(a,"bias","fused matMul"),[C]=Qn(C,l),Ut(x,C.shape));let E;o!=null&&(E=j(o,"prelu weights","fused matMul"));const R=(P,D)=>{const[B,z,q,Y]=D,Z=Uw(Ce(P,q.shape),q,i);let H,L;if(!n&&!r?(H=pn(Z,z,!1,!0),L=pn(B,Z,!0,!1)):!n&&r?(H=pn(Z,z,!1,!1),L=pn(Z,B,!0,!1)):n&&!r?(H=pn(z,Z,!1,!0),L=pn(B,Z,!1,!1)):(H=pn(z,Z,!0,!0),L=pn(Z,B,!0,!0)),a!=null){const Q=Vw(Y,Z);return[H,L,Q]}else return[H,L]},T={a:w,b:S,bias:C,preluActivationWeights:E},$={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:s};return a==null?Ts((P,D,B)=>{const z=re.runKernel(Ng,T,$);return B([P,D,z]),{value:Ce(z,x),gradFunc:R}})(w,S):Ts((P,D,B,z)=>{const q=re.runKernel(Ng,T,$);return z([P,D,q,B]),{value:Ce(q,x),gradFunc:R}})(w,S,C)}const Phe=ne({fusedMatMul_:Mhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const S9=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Nhe,depthwiseConv2d:Ohe,matMul:Phe},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fhe(t){return jw(t,.54,.46)}const Ahe=ne({hammingWindow_:Fhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dhe(t){return jw(t,.5,.5)}const C9=ne({hannWindow_:Dhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Lhe(t,e,n,r=!1,a=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(Cn(t,i,e)),i+=n;if(r)for(;i<t.size;){const s=i+e-t.size,l=Sa([Cn(t,i,e-s),Kp([s],a)]);o.push(l),i+=n}return o.length===0?th([],[0,e]):Ce(Sa(o),[o.length,e])}const E9=ne({frame_:Lhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zhe(t,e,n,r,a=C9){r==null&&(r=qT(e));const i=E9(t,e,n),o=De(i,a(e));return zw(o,r)}const Bhe=ne({stft_:zhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jhe(t,e,n,r,a="bilinear",i=0){const o=j(t,"image","cropAndResize"),s=j(e,"boxes","cropAndResize","float32"),l=j(n,"boxInd","cropAndResize","int32"),u=s.shape[0];U(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),U(s.rank===2&&s.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`),U(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`),U(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),U(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),U(a==="bilinear"||a==="nearest",()=>`method must be bilinear or nearest, but was ${a}`);const c={image:o,boxes:s,boxInd:l},d={method:a,extrapolationValue:i,cropSize:r};return re.runKernel(ex,c,d)}const Uhe=ne({cropAndResize_:jhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vhe(t){const e=j(t,"image","flipLeftRight","float32");U(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return re.runKernel(px,n,{})}const Whe=ne({flipLeftRight_:Vhe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ghe(t){const e=j(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];U(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),U(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const a=new Array(e.rank);return a.fill(1,0,n),a[n]=3,Qp(e,a)}const Hhe=ne({grayscaleToRGB_:Ghe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qhe(t,e,n=0,r=.5){const a=j(t,"image","rotateWithOffset","float32");U(a.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);const i={image:a},o={radians:e,fillValue:n,center:r};return re.runKernel(yw,i,o)}const Khe=ne({rotateWithOffset_:qhe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nh(t,e,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),U(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),U(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),U(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),U(e.rank===1,()=>"scores must be a 1D tensor"),U(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),U(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xhe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=j(t,"boxes","nonMaxSuppression","float32"),o=j(e,"scores","nonMaxSuppression","float32"),s=nh(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return re.runKernel(Rx,{boxes:i,scores:o},l)}const Qhe=ne({nonMaxSuppression_:Xhe});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yhe(t,e,n){const r=Zhe(t,e,n),a=r<0?-(r+1):r;t.splice(a,0,e)}function Zhe(t,e,n){return efe(t,e,n||Jhe)}function Jhe(t,e){return t>e?1:t<e?-1:0}function efe(t,e,n){let r=0,a=t.length,i=0,o=!1;for(;r<a;){i=r+(a-r>>>1);const s=n(e,t[i]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hw(t,e,n,r,a){return KT(t,e,n,r,a,0)}function qw(t,e,n,r,a,i){return KT(t,e,n,r,a,0,!1,i,!0)}function Kw(t,e,n,r,a,i){return KT(t,e,n,r,a,i,!0)}function KT(t,e,n,r,a,i,o=!1,s=!1,l=!1){const u=[];for(let v=0;v<e.length;v++)e[v]>a&&u.push({score:e[v],boxIndex:v,suppressBeginIndex:0});u.sort(N9);const c=i>0?-.5/i:0,d=[],p=[];for(;d.length<n&&u.length>0;){const v=u.pop(),{score:b,boxIndex:x,suppressBeginIndex:w}=v;if(b<a)break;let S=!1;for(let C=d.length-1;C>=w;--C){const E=tfe(t,x,d[C]);if(E>=r){S=!0;break}if(v.score=v.score*nfe(r,c,E),v.score<=a)break}v.suppressBeginIndex=d.length,S||(v.score===b?(d.push(x),p.push(v.score)):v.score>a&&Yhe(u,v,N9))}const f=d.length,g=n-f;s&&g>0&&(d.push(...new Array(g).fill(0)),p.push(...new Array(g).fill(0)));const y={selectedIndices:d};return o&&(y.selectedScores=p),l&&(y.validOutputs=f),y}function tfe(t,e,n){const r=t.subarray(e*4,e*4+4),a=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),f=(s-i)*(l-o),g=(d-u)*(p-c);if(f<=0||g<=0)return 0;const y=Math.max(i,u),v=Math.max(o,c),b=Math.min(s,d),x=Math.min(l,p),w=Math.max(b-y,0)*Math.max(x-v,0);return w/(f+g-w)}function nfe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function N9(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function rfe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=j(t,"boxes","nonMaxSuppressionAsync"),o=j(e,"scores","nonMaxSuppressionAsync"),s=nh(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),u=l[0],c=l[1],{selectedIndices:d}=Hw(u,c,n,r,a);return i!==t&&i.dispose(),o!==e&&o.dispose(),go(d,"int32")}const afe=rfe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ife(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const o=j(t,"boxes","nonMaxSuppression"),s=j(e,"scores","nonMaxSuppression"),l=nh(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const u={boxes:o,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},d=re.runKernel(Ox,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const ofe=ne({nonMaxSuppressionWithScore_:ife});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function sfe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const o=j(t,"boxes","nonMaxSuppressionAsync"),s=j(e,"scores","nonMaxSuppressionAsync"),l=nh(o,s,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;const u=await Promise.all([o.data(),s.data()]),c=u[0],d=u[1],{selectedIndices:p,selectedScores:f}=Kw(c,d,n,r,a,i);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:go(p,"int32"),selectedScores:go(f)}}const lfe=sfe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ufe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const o=j(t,"boxes","nonMaxSuppression"),s=j(e,"scores","nonMaxSuppression"),l=nh(o,s,n,r,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,p={boxes:o,scores:s},f={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:i},g=re.runKernel($x,p,f);return{selectedIndices:g[0],validOutputs:g[1]}}const cfe=ne({nonMaxSuppressionPadded_:ufe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/async function dfe(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const o=j(t,"boxes","nonMaxSuppressionAsync"),s=j(e,"scores","nonMaxSuppressionAsync"),l=nh(o,s,n,r,a,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[p,f]=await Promise.all([o.data(),s.data()]),{selectedIndices:g,validOutputs:y}=qw(p,f,u,c,d,i);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:go(g,"int32"),validOutputs:Bt(y,"int32")}}const pfe=dfe;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hfe(t,e,n=!1,r=!1){const a=j(t,"images","resizeBilinear");U(a.rank===3||a.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),U(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),U(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=Ce(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const s={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=re.runKernel(Gx,s,l);return o?Ce(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const ffe=ne({resizeBilinear_:hfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function mfe(t,e,n=!1,r=!1){const a=j(t,"images","resizeNearestNeighbor");U(a.rank===3||a.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),U(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),U(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),U(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=Ce(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const s={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=re.runKernel(Wx,s,l);return o?Ce(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const gfe=ne({resizeNearestNeighbor_:mfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* https://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yfe(t,e="binary",n=!1,r=.5){const a=j(t,"image","threshold"),i=.2989,o=.587,s=.114,l=a.shape[0]*a.shape[1];let u=De(go([r]),255),c,d,p,f;if(U(a.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`),U(a.shape[2]===3||a.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`),U(a.dtype==="int32"||a.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`),U(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),a.shape[2]===3){[c,d,p]=eh(a,[1,1,1],-1);const y=De(c,i),v=De(d,o),b=De(p,s);f=yt(yt(y,v),b)}else f=t;if(e==="otsu"){const y=pT(Un(UT(f),"int32"),Qo([]),256);u=bfe(y,l)}const g=n?Mw(f,u):Gg(f,u);return Un(De(g,255),"int32")}function bfe(t,e){let n=go([-1]),r=go([0]),a=go([0]),i,o,s,l,u,c;for(let d=0;d<t.size-1;d++){i=Cn(t,0,d+1),o=Cn(t,d+1),u=_n(Rn(i),e),c=_n(Rn(o),e);const p=Rn(De(i,Jp(0,i.size)));s=_n(p,Rn(i));const f=Kp(o.shape,i.size),g=yt(Jp(0,o.size),f),y=De(o,g);l=_n(Rn(y),Rn(o));const v=At(s,l),b=At(s,l),x=De(u,c);a=De(De(x,v),b);const w=Gg(a,r);r=ad(w,a,r),n=ad(w,go([d]),n)}return n}const vfe=ne({threshold_:yfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xfe(t,e,n="nearest",r="constant",a=0,i){const o=j(t,"image","transform","float32"),s=j(e,"transforms","transform","float32");U(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),U(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),U(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:s},u={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return re.runKernel(dw,l,u)}const wfe=ne({transform_:xfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kfe(t,e,n){U(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),U(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=j(t,"a","bandPart");U(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const a=r.shape,[i,o]=r.shape.slice(-2);if(!(e<=i))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);e<0&&(e=i),n<0&&(n=o);const s=Ce(Jp(0,i,1,"int32"),[-1,1]),l=Jp(0,o,1,"int32"),u=At(s,l),c=Hg(Mw(u,Bt(+e,"int32")),vT(u,Bt(-n,"int32"))),d=Ou([i,o],r.dtype);return Ce(Is(Fu(Ce(r,[-1,i,o])).map(p=>ad(c,p,d))),a)}const Sfe=ne({bandPart_:kfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cfe(t){let e;if(Array.isArray(t)){e=!1,U(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const a=t[0].shape[0];for(let i=1;i<t.length;++i)U(t[i].shape[0]===a,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${a})`)}else e=!0,t=eh(t,t.shape[0],0).map(a=>Qg(a,[0]));U(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let a=0;a<t.length;++a)n.push(re.tidy(()=>{let i=r[a];if(a>0)for(let o=0;o<a;++o){const s=De(Rn(De(n[o],i)),n[o]);i=At(i,s)}return _n(i,Wg(i,"euclidean"))}));return e?Is(n,0):n}const Efe=ne({gramSchmidt_:Cfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nfe(t,e=!1){if(U(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return T9(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Fu(Ce(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],i=[];r.forEach(l=>{const[u,c]=T9(l,e);a.push(u),i.push(c)});const o=Ce(Is(a,0),t.shape),s=Ce(Is(i,0),t.shape);return[o,s]}}function T9(t,e=!1){return re.tidy(()=>{U(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let a=gT(n),i=xl(t);const o=th([[1]],[1,1]);let s=xl(o);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=i,d=s,p=a;[s,i,a]=re.tidy(()=>{const f=Cn(i,[u,u],[n-u,1]),g=Wg(f),y=Cn(i,[u,u],[1,1]),v=ad(Gg(y,0),th([[-1]]),th([[1]])),b=At(y,De(v,g)),x=_n(f,b);x.shape[0]===1?s=xl(o):s=Sa([o,Cn(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const w=Es(_n(pn(v,b),g)),S=Cn(i,[u,0],[n-u,r]),C=De(w,s),E=Lg(s);if(u===0)i=At(S,pn(C,pn(E,S)));else{const $=At(S,pn(C,pn(E,S)));i=Sa([Cn(i,[0,0],[u,r]),$],0)}const R=Lg(C),T=Cn(a,[0,u],[n,a.shape[1]-u]);if(u===0)a=At(T,pn(pn(T,s),R));else{const $=At(T,pn(pn(T,s),R));a=Sa([Cn(a,[0,0],[n,u]),$],1)}return[s,i,a]}),wa([c,d,p])}return!e&&n>r&&(a=Cn(a,[0,0],[n,r]),i=Cn(i,[0,0],[r,r])),[a,i]})}const Tfe=ne({qr_:Nfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var ja;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ja||(ja={}));function Ife(t,e,n=ja.SUM_BY_NONZERO_WEIGHTS){const r=j(t,"losses","computeWeightedLoss");let a=null;e!=null&&(a=j(e,"weights","computeWeightedLoss"));const i=a==null?r:De(r,a);if(n===ja.NONE)return i;if(n===ja.SUM)return Rn(i);if(n===ja.MEAN){if(a==null)return qg(i);{const o=r.size/a.size,s=_n(Rn(i),Rn(a));return o>1?_n(s,Bt(o)):s}}if(n===ja.SUM_BY_NONZERO_WEIGHTS){if(a==null)return _n(Rn(i),Bt(r.size));{const o=De(a,Mu(r.shape)),s=Un(Rn(_T(o,Bt(0))),"float32");return _n(Rn(i),s)}}throw Error(`Unknown reduction: ${n}`)}const El=ne({computeWeightedLoss_:Ife});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _fe(t,e,n,r=ja.SUM_BY_NONZERO_WEIGHTS){const a=j(t,"labels","absoluteDifference"),i=j(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=j(n,"weights","absoluteDifference")),na(a.shape,i.shape,"Error in absoluteDifference: ");const s=Si(At(a,i));return El(s,o,r)}const Rfe=ne({absoluteDifference_:_fe});function $fe(t,e,n,r,a=ja.SUM_BY_NONZERO_WEIGHTS){const i=j(t,"labels","cosineDistance"),o=j(e,"predictions","cosineDistance");let s=null;r!=null&&(s=j(r,"weights","cosineDistance")),na(i.shape,o.shape,"Error in cosineDistance: ");const l=Bt(1),u=At(l,Rn(De(i,o),n,!0));return El(u,s,a)}const Ofe=ne({cosineDistance_:$fe});function Mfe(t,e,n,r=ja.SUM_BY_NONZERO_WEIGHTS){let a=j(t,"labels","hingeLoss");const i=j(e,"predictions","hingeLoss");let o=null;n!=null&&(o=j(n,"weights","hingeLoss")),na(a.shape,i.shape,"Error in hingeLoss: ");const s=Bt(1);a=At(De(Bt(2),a),s);const l=Kg(At(s,De(a,i)));return El(l,o,r)}const Pfe=ne({hingeLoss_:Mfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ffe(t,e,n,r=1,a=ja.SUM_BY_NONZERO_WEIGHTS){const i=j(t,"labels","huberLoss"),o=j(e,"predictions","huberLoss");let s=null;n!=null&&(s=j(n,"weights","huberLoss")),na(i.shape,o.shape,"Error in huberLoss: ");const l=Bt(r),u=Si(At(o,i)),c=IT(u,l),d=At(u,c),p=yt(De(Bt(.5),mo(c)),De(l,d));return El(p,s,a)}const Afe=ne({huberLoss_:Ffe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dfe(t,e,n,r=1e-7,a=ja.SUM_BY_NONZERO_WEIGHTS){const i=j(t,"labels","logLoss"),o=j(e,"predictions","logLoss");let s=null;n!=null&&(s=j(n,"weights","logLoss")),na(i.shape,o.shape,"Error in logLoss: ");const l=Bt(1),u=Bt(r),c=Es(De(i,Yp(yt(o,u)))),d=De(At(l,i),Yp(yt(At(l,o),u))),p=At(c,d);return El(p,s,a)}const Lfe=ne({logLoss_:Dfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zfe(t,e,n,r=ja.SUM_BY_NONZERO_WEIGHTS){const a=j(t,"labels","meanSquaredError"),i=j(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=j(n,"weights","meanSquaredError")),na(a.shape,i.shape,"Error in meanSquaredError: ");const s=WT(a,i);return El(s,o,r)}const Bfe=ne({meanSquaredError_:zfe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jfe(t,e){const n=j(t,"labels","sigmoidCrossEntropyWithLogits"),r=j(e,"logits","sigmoidCrossEntropyWithLogits");na(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=Kg(r),i=De(r,n),o=wT($u(Es(Si(r))));return yt(At(a,i),o)}function Ufe(t,e,n,r=0,a=ja.SUM_BY_NONZERO_WEIGHTS){let i=j(t,"multiClassLabels","sigmoidCrossEntropy");const o=j(e,"logits","sigmoidCrossEntropy");let s=null;if(n!=null&&(s=j(n,"weights","sigmoidCrossEntropy")),na(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=Bt(r),c=Bt(1),d=Bt(.5);i=yt(De(i,At(c,u)),De(d,u))}const l=jfe(i,o);return El(l,s,a)}const Vfe=ne({sigmoidCrossEntropy_:Ufe});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Wfe(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Ts((r,a,i)=>{const o=ST(a,[n],!0),s=At(Un(a,"float32"),o);i([r,s]);const l=Es(De(s,r));return{value:Rn(l,[n]),gradFunc:(u,c)=>{const[d,p]=c,f=Pr(u.shape,[n]);return[De(Ce(u,f),At(Un(d,"float32"),$u(p))),De(Ce(u,f),At($u(p),Un(d,"float32")))]}}})(t,e)}function Gfe(t,e,n,r=0,a=ja.SUM_BY_NONZERO_WEIGHTS){let i=j(t,"onehotLabels","softmaxCrossEntropy");const o=j(e,"logits","softmaxCrossEntropy");let s=null;if(n!=null&&(s=j(n,"weights","softmaxCrossEntropy")),na(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const u=Bt(r),c=Bt(1),d=Bt(i.shape[1]);i=yt(De(i,At(c,u)),_n(u,d))}const l=Wfe(i,o);return El(l,s,a)}const Hfe=ne({softmaxCrossEntropy_:Gfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qfe(t,e,n,r){const a=j(t,"indices","sparseFillEmptyRows","int32"),i=j(e,"values","sparseFillEmptyRows"),o=j(n,"denseShape","sparseFillEmptyRows","int32"),s=j(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${a.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(s.rank!==0)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const l={indices:a,values:i,denseShape:o,defaultValue:s},u=re.runKernel(tw,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const Kfe=ne({sparseFillEmptyRows_:qfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xfe(t,e,n){const r=j(t,"inputIndices","sparseReshape","int32"),a=j(e,"inputShape","sparseReshape","int32"),i=j(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(a.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:a,newShape:i},s=re.runKernel(nw,o);return{outputIndices:s[0],outputShape:s[1]}}const Qfe=ne({sparseReshape_:Xfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yfe(t,e,n){const r=j(t,"data","sparseSegmentMean"),a=j(e,"indices","sparseSegmentMean","int32"),i=j(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:a,segmentIds:i};return re.runKernel(rw,o)}const Zfe=ne({sparseSegmentMean_:Yfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jfe(t,e,n){const r=j(t,"data","sparseSegmentSum"),a=j(e,"indices","sparseSegmentSum","int32"),i=j(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:a,segmentIds:i};return re.runKernel(aw,o)}const eme=ne({sparseSegmentSum_:Jfe});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tme(t,e,n,r,a,i,o,s){const l=j(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=j(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:l,dataSplits:u},p=re.runKernel(sw,d,c);return{nGrams:p[0],nGramsSplits:p[1]}}const nme=ne({stringNGrams_:tme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rme(t,e,n=!0){const r=j(t,"input","stringSplit","string"),a=j(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(a.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${a.shape}`);const i={skipEmpty:n},o={input:r,delimiter:a},s=re.runKernel(lw,o,i);return{indices:s[0],values:s[1],shape:s[2]}}const ame=ne({stringSplit_:rme});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ime(t,e){const n=j(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return re.runKernel(uw,a,r)}const ome=ne({stringToHashBucketFast_:ime});/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const I9={fft:Lw,ifft:Xg,rfft:zw,irfft:VT},_9={hammingWindow:Ahe,hannWindow:C9,frame:E9,stft:Bhe},XT={flipLeftRight:Whe,grayscaleToRGB:Hhe,resizeNearestNeighbor:gfe,resizeBilinear:ffe,rotateWithOffset:Khe,cropAndResize:Uhe,nonMaxSuppression:Qhe,nonMaxSuppressionAsync:afe,nonMaxSuppressionWithScore:ofe,nonMaxSuppressionWithScoreAsync:lfe,nonMaxSuppressionPadded:cfe,nonMaxSuppressionPaddedAsync:pfe,threshold:vfe,transform:wfe},R9={bandPart:Sfe,gramSchmidt:Efe,qr:Tfe},$9={absoluteDifference:Rfe,computeWeightedLoss:El,cosineDistance:Ofe,hingeLoss:Pfe,huberLoss:Afe,logLoss:Lfe,meanSquaredError:Bfe,sigmoidCrossEntropy:Vfe,softmaxCrossEntropy:Hfe},O9={sparseFillEmptyRows:Kfe,sparseReshape:Qfe,sparseSegmentMean:Zfe,sparseSegmentSum:eme},M9={stringNGrams:nme,stringSplit:ame,stringToHashBucketFast:ome};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Au extends fD{minimize(e,n=!1,r){const{value:a,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(s=>({name:s.name,tensor:i[s.name]}));this.applyGradients(o)}else this.applyGradients(i);return wa(i),n?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return fL(e,n)}dispose(){this.iterations_!=null&&wa(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Bt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Au,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Xw extends Au{constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=re.registeredVariables[n],i=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accum_grad`,variable:Xt(()=>Ci(a).variable(i))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${n}/accum_var`,variable:Xt(()=>Ci(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[n];if(o==null)return;const s=this.accumulatedGrads[r].variable,l=this.accumulatedUpdates[r].variable;Xt(()=>{const u=yt(De(s,this.rho),De(mo(o),1-this.rho)),c=De(_n(Ns(yt(l,this.epsilon)),Ns(yt(s,this.epsilon))),o),d=yt(De(l,this.rho),De(mo(c),1-this.rho));s.assign(u),l.assign(d);const p=yt(De(c,-this.learningRate),a);a.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(wa(this.accumulatedGrads.map(e=>e.variable)),wa(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}Xw.className="Adadelta",_u(Xw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Qw extends Au{constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=re.registeredVariables[n];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accumulator`,variable:Xt(()=>Kp(a.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[r].tensor:e[n];if(i==null)return;const o=this.accumulatedGrads[r].variable;Xt(()=>{const s=yt(o,mo(i));o.assign(s);const l=yt(De(_n(i,Ns(yt(s,re.backend.epsilon()))),-this.learningRate),a);a.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&wa(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}Qw.className="Adagrad",_u(Qw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Yw extends Au{constructor(e,n,r,a=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Xt(()=>{this.accBeta1=Bt(n).variable(),this.accBeta2=Bt(r).variable()}),a==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Xt(()=>{const r=At(1,this.accBeta1),a=At(1,this.accBeta2);n.forEach((i,o)=>{const s=re.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Xt(()=>Ci(s).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:Xt(()=>Ci(s).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,p=yt(De(c,this.beta1),De(u,1-this.beta1)),f=yt(De(d,this.beta2),De(mo(u),1-this.beta2)),g=_n(p,r),y=_n(f,a);c.assign(p),d.assign(f);const v=yt(De(_n(g,yt(Ns(y),this.epsilon)),-this.learningRate),s);s.assign(v)}),this.accBeta1.assign(De(this.accBeta1,this.beta1)),this.accBeta2.assign(De(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&wa(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&wa(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Xt(()=>{this.accBeta1.assign(Xp(this.beta1,this.iterations_+1)),this.accBeta2.assign(Xp(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}Yw.className="Adam",_u(Yw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Zw extends Au{constructor(e,n,r,a=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Xt(()=>{this.iteration=Bt(0).variable(),this.accBeta1=Bt(n).variable()}),a==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Xt(()=>{const r=At(1,this.accBeta1),a=_n(-this.learningRate,yt(De(this.iteration,this.decay),1));n.forEach((i,o)=>{const s=re.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Ci(s).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:Ci(s).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,p=yt(De(c,this.beta1),De(u,1-this.beta1)),f=De(d,this.beta2),g=Si(u),y=TT(f,g);c.assign(p),d.assign(y);const v=yt(De(_n(a,r),_n(p,yt(y,this.epsilon))),s);s.assign(v)}),this.iteration.assign(yt(this.iteration,1)),this.accBeta1.assign(De(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&wa(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&wa(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}Zw.className="Adamax",_u(Zw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Yg extends Au{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=Array.isArray(e)?e[r].tensor:e[n];if(a==null)return;const i=re.registeredVariables[n];Xt(()=>{const o=yt(De(this.c,a),i);i.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Cs(Bt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}Yg.className="SGD",_u(Yg);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Jw extends Yg{constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Bt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=re.registeredVariables[n];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${n}/momentum`,variable:Xt(()=>Ci(a).variable(!1))});const i=this.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];o!=null&&Xt(()=>{let s;const l=yt(De(this.m,i),o);this.useNesterov?s=yt(De(this.c,yt(o,De(l,this.m))),a):s=yt(De(this.c,l),a),i.assign(l),a.assign(s)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&wa(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}Jw.className="Momentum",_u(Jw);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class e2 extends Au{constructor(e,n=.9,r=0,a=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,a==null&&(this.epsilon=re.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,r)=>{const a=re.registeredVariables[n],i=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${n}/rms`,variable:Xt(()=>Ci(a).variable(i))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${n}/momentum`,variable:Xt(()=>Ci(a).variable(i))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${n}/mg`,variable:Xt(()=>Ci(a).variable(i))});const o=Array.isArray(e)?e[r].tensor:e[n];if(o==null)return;const s=this.accumulatedMeanSquares[r].variable,l=this.accumulatedMoments[r].variable;Xt(()=>{const u=yt(De(s,this.decay),De(mo(o),1-this.decay));if(this.centered){const c=this.accumulatedMeanGrads[r].variable,d=yt(De(c,this.decay),De(o,1-this.decay)),p=_n(De(o,this.learningRate),Ns(At(u,yt(mo(d),this.epsilon)))),f=yt(De(l,this.momentum),p);s.assign(u),c.assign(d),l.assign(f);const g=At(a,f);a.assign(g)}else{const c=yt(De(s,this.decay),De(mo(o),1-this.decay)),d=yt(De(l,this.momentum),_n(De(o,this.learningRate),Ns(yt(c,this.epsilon))));s.assign(c),l.assign(d);const p=At(a,d);a.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&wa(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&wa(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&wa(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}e2.className="RMSProp",_u(e2);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Du{static sgd(e){return new Yg(e)}static momentum(e,n,r=!1){return new Jw(e,n,r)}static rmsprop(e,n=.9,r=0,a=null,i=!1){return new e2(e,n,r,a,i)}static adam(e=.001,n=.9,r=.999,a=null){return new Yw(e,n,r,a)}static adadelta(e=.001,n=.95,r=null){return new Xw(e,n,r)}static adamax(e=.002,n=.9,r=.999,a=null,i=0){return new Zw(e,n,r,a,i)}static adagrad(e,n=.1){return new Qw(e,n)}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sme={sgd:Du.sgd,momentum:Du.momentum,adadelta:Du.adadelta,adagrad:Du.adagrad,rmsprop:Du.rmsprop,adamax:Du.adamax,adam:Du.adam};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lme=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function P9(){return new Promise(t=>lme(()=>t()))}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function QT(t,e){const n=t[0].length;t.forEach((a,i)=>{U(a.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),U(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((a,i)=>{for(let o=0;o<n;o++)U(o===e||a[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${a}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function _s(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Yo;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Yo||(Yo={}));function F9(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let a=1;a<n.length;++a){const i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${a+t}] = ${i} but shape[${a+t}] = ${s}`)}else r[o]=i}return r}function A9(t){const e={FIRST_DIM_SIZE:Yo.FIRST_DIM_SIZE,VALUE_ROWIDS:Yo.VALUE_ROWIDS,ROW_LENGTHS:Yo.ROW_LENGTHS,ROW_SPLITS:Yo.ROW_SPLITS,ROW_LIMITS:Yo.ROW_LIMITS,ROW_STARTS:Yo.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function D9(t){return t.length===0?0:t[0]===Yo.FIRST_DIM_SIZE?t.length-1:t.length}function L9(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let a=0;a<Math.min(n,r-1);++a){const i=t[a],o=e[a+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${a-t.length}] = ${i} but ragged tensor input.flatValues.shape[${a-t.length}] = ${o}`)}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const YT=30;function t2(t){return t<=YT?t:Rv(t,Math.floor(Math.sqrt(t)))}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ZT(t,e,n){const r=n*(typeof t=="number"?t:t[0]),a=e*(typeof t=="number"?t:t[1]);return[r,a]}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zg(t,e,n,r=!0){let a=[];if(r)a=a.concat(e.slice(0)),a.push(t[0]/n),a=a.concat(t.slice(1));else{a=a.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)a=a.concat([t[o+1]/e[o],e[o]]);a=a.concat(t.slice(i+1))}return a}function Jg(t,e,n=!0){const r=[];if(n){r.push(e);for(let a=e+1;a<t;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{const a=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):a.push(o);r.push(...a),r.push(0),r.push(...i)}return r}function e0(t,e,n,r=!0){const a=[];r?a.push(t[0]/n):a.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?a.push(e[i-1]*t[i]):a.push(t[i]/e[i-1]):a.push(t[i]);return a}function JT(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function eI(t,e,n){const r=t.slice(0,1);for(let a=0;a<n;++a)r.push(t[a+1]-e[a][0]-e[a][1]);return r}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const tI=1.7580993408473768,nI=1.0507009873554805;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rI=.3275911,aI=.254829592,iI=-.284496736,oI=1.421413741,sI=-1.453152027,lI=1.061405429;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nl(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function z9(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function B9(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=0;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function j9(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=2;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function uI(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function U9(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function V9(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let a=0;a<Math.ceil(t/2);a++){const i=(e?2:-2)*Math.PI*(a/t);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function W9(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),a=Math.cos(r),i=Math.sin(r);return{real:a,imag:i}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cI="->",ume=/->/g,G9=",",H9="...";function dI(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(ume,"").length)/cI.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${cI}").`);const[r,a]=t.split(cI);U(r.indexOf(H9)===-1,()=>`The ellipsis notation ("${H9}") is not supported yet.`);const i=r.split(G9),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let p=0;p<a.length;++p){const f=a[p];if(!i.some(g=>g.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);s.indexOf(f)===-1&&s.push(f)}for(let p=0;p<r.length;++p){const f=r[p];s.indexOf(f)===-1&&f!==G9&&s.push(f)}const l=new Array(i.length);for(let p=0;p<o;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let f=0;f<i[p].length;++f)l[p].push(s.indexOf(i[p][f]))}const u=s.length,c=a.length,d=[];for(let p=c;p<u;++p)d.push(p);return{allDims:s,summedDims:d,idDims:l}}function pI(t,e){let n=new Array(t);n.fill(-1);for(let a=0;a<e.length;++a)n[e[a]]=a;const r=[];for(let a=0;a<t;++a)n[a]===-1&&r.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:r}}function hI(t,e,n){const r=new Array(t);for(let a=0;a<n.length;++a){const i=n[a].shape;for(let o=0;o<e[a].length;++o)r[e[a][o]]===void 0?r[e[a][o]]=i[o]:U(r[e[a][o]]===i[o],()=>`Expected dimension ${r[e[a][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function fI(t,e){const n=t,r=[];let a=0;t.length===0&&n.push(-1),a=t.length+1;for(let o=0;o<a;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const s=n[o],l=cme(e,s);for(const u of l)i.indexOf(u)===-1&&(r[o].push(u),i.push(u))}return{path:n,steps:r}}function mI(t){return t.every((e,n)=>e===n)}function cme(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function gI(t,e,n=0){let r=[];if(typeof e=="number")U(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const a=e.reduce((o,s)=>(s===-1&&(o+=1),o),0);U(a<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((s,l)=>l>0?s+l:s);e[i]=t.shape[n]-o}U(t.shape[n]===e.reduce((o,s)=>o+s),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function q9(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function K9(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function X9(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Q9(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function Y9(t,e){return`size ${t} must be non-negative, not ${e}`}function Z9(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function J9(t,e){const n=be(t),r=be(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function e7(t,e){const n=be(t),r=be(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yI(){return"segment ids must be >= 0"}function t7(){return"segment ids are not increasing"}function n7(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function r7(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function a7(t,e){let n=!1,r;for(t<=YT?(r=t,n=!0):r=Rv(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=Rv(t,r+1);return r}function i7(t,e,n){const r=[],a=t.length;for(let i=0;i<a;i++)i!==e?r.push(t[i]):r.push(n);return r}function bI(t,e,n,r){const a=e.shape.length,i=t.shape.length;if(r!==0&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],s=[];let l=1,u=1,c=1;for(let d=0;d<r;++d)s.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)s.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<a;d++)s.push(e.shape[d]);for(let d=n+1;d<i;d++)s.push(t.shape[d]),c*=t.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:s}}const dme=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:bI,computeOutShape:i7,segOpComputeOptimalWindowSize:a7},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sd(t){try{return t.map(e=>yl(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function o7(t){return t.map(e=>ks(e))}const s7=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:aI,ERF_A2:iI,ERF_A3:oI,ERF_A4:sI,ERF_A5:lI,ERF_P:rI,PARALLELIZE_THRESHOLD:YT,get RowPartitionType(){return Yo},SELU_SCALE:nI,SELU_SCALEALPHA:tI,applyActivation:Ww,assertAndGetBroadcastShape:Ut,assertAxesAreInnerMostDims:ia,assertParamsConsistent:QT,assignToTypedArray:U9,axesAreInnerMostDims:mT,calculateShapes:Gp,checkEinsumDimSizes:hI,checkPadOnDimRoundingMode:fo,combineLocations:aL,combineRaggedTensorToTensorShapes:F9,complexWithEvenIndex:B9,complexWithOddIndex:j9,computeConv2DInfo:Gr,computeConv3DInfo:Ru,computeDefaultPad:lT,computeDilation2DInfo:zg,computeOptimalWindowSize:t2,computeOutAndReduceShapes:aa,computeOutShape:_s,computePool2DInfo:ho,computePool3DInfo:kl,convertConv2DDataFormat:Sl,decodeEinsumEquation:dI,eitherStridesOrDilationsAreOne:ka,expandShapeToKeepDim:Pr,exponent:W9,exponents:V9,fromStringArrayToUint8:o7,fromUint8ToStringArray:sd,getAxesPermutation:mr,getBroadcastDims:ed,getComplexWithIndex:uI,getEinsumComputePath:fI,getEinsumPermutation:pI,getFusedBiasGradient:Vw,getFusedDyActivation:Uw,getImageCenter:ZT,getInnerMostAxes:gr,getPermuted:Jg,getRaggedRank:D9,getReductionAxes:q4,getReshaped:Zg,getReshapedPermuted:e0,getRowPartitionTypesHelper:A9,getSliceBeginCoords:JT,getSliceSize:eI,getSparseFillEmptyRowsIndicesDenseShapeMismatch:q9,getSparseFillEmptyRowsNegativeIndexErrorMessage:K9,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:X9,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:Z9,getSparseReshapeInputOutputMismatchErrorMessage:e7,getSparseReshapeInputOutputMultipleErrorMessage:J9,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:Q9,getSparseReshapeNegativeOutputDimErrorMessage:Y9,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:r7,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:yI,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:t7,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:n7,getUndoAxesPermutation:Vg,isIdentityPermutation:mI,log:use,mergeRealAndImagArrays:Nl,prepareAndValidate:Iw,prepareSplitSize:gI,segment_util:dme,shouldFuse:Gw,slice_util:hD,splitRealAndImagArrays:z9,tupleValuesAreOne:Bg,upcastType:oi,validateDefaultValueShape:L9,validateInput:Q4,validateUpdateShape:X4,warn:Bi},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pme=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:Hw,nonMaxSuppressionV4Impl:qw,nonMaxSuppressionV5Impl:Kw,whereImpl:Bw},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hme=Object.freeze(Object.defineProperty({__proto__:null,Abs:Ov,Acos:Sm,Acosh:Cm,AdadeltaOptimizer:Xw,AdagradOptimizer:Qw,AdamOptimizer:Yw,AdamaxOptimizer:Zw,Add:Ap,AddN:Mv,All:Pv,Any:Fv,ArgMax:Av,ArgMin:Dv,Asin:Em,Asinh:Nm,Atan:Tm,Atan2:_m,Atanh:Im,AvgPool:Lv,AvgPool3D:zv,AvgPool3DGrad:a4,AvgPoolGrad:r4,BatchMatMul:Bv,BatchToSpaceND:jv,Bincount:Uv,BroadcastArgs:Vv,BroadcastTo:rse,Cast:Rm,Ceil:$m,ClipByValue:Om,Complex:Wv,ComplexAbs:Gv,Concat:Hv,Conv2D:qv,Conv2DBackpropFilter:Kv,Conv2DBackpropInput:Xv,Conv3D:Qv,Conv3DBackpropFilterV2:i4,Conv3DBackpropInputV2:Yv,Cos:Mm,Cosh:Pm,CropAndResize:ex,Cumprod:Zv,Cumsum:Jv,DataStorage:KN,DenseBincount:tx,DepthToSpace:nx,DepthwiseConv2dNative:rx,DepthwiseConv2dNativeBackpropFilter:ax,DepthwiseConv2dNativeBackpropInput:ix,Diag:ox,Dilation2D:sx,Dilation2DBackpropFilter:s4,Dilation2DBackpropInput:o4,get ENV(){return e4},Einsum:lx,Elu:Am,EluGrad:l4,Environment:cA,Equal:Lm,Erf:Dm,Exp:zm,ExpandDims:ux,Expm1:Bm,FFT:cx,Fill:dx,FlipLeftRight:px,Floor:jm,FloorDiv:Um,FromPixels:gw,FusedBatchNorm:hx,FusedConv2D:Tg,FusedDepthwiseConv2D:Ig,GatherNd:mx,GatherV2:fx,Greater:Vm,GreaterEqual:Wm,IFFT:gx,Identity:Gm,Imag:yx,IsFinite:Hm,IsInf:qm,IsNan:Km,KernelBackend:Nv,LRN:xx,LRNGrad:u4,LeakyRelu:bx,Less:Xm,LessEqual:Qm,LinSpace:vx,Log:Ym,Log1p:Zm,LogSoftmax:ise,LogicalAnd:Jm,LogicalNot:eg,LogicalOr:tg,LogicalXor:ase,LowerBound:ose,Max:wx,MaxPool:kx,MaxPool3D:Sx,MaxPool3DGrad:d4,MaxPoolGrad:c4,MaxPoolWithArgmax:Cx,Maximum:ng,Mean:Ex,Min:Nx,Minimum:rg,MirrorPad:Tx,Mod:ag,MomentumOptimizer:Jw,Multinomial:Ix,Multiply:ig,Neg:_x,NonMaxSuppressionV3:Rx,NonMaxSuppressionV4:$x,NonMaxSuppressionV5:Ox,NotEqual:og,OP_SCOPE_SUFFIX:$4,OneHot:Px,OnesLike:Mx,Optimizer:Au,OptimizerConstructors:Du,Pack:Fx,PadV2:Ax,Pool:sse,Pow:sg,Prelu:Dx,Prod:Lx,RMSPropOptimizer:e2,RaggedGather:zx,RaggedTensorToTensor:Bx,Range:jx,get Rank(){return w4},Real:Ux,RealDiv:Fm,Reciprocal:lg,get Reduction(){return ja},Relu:ug,Relu6:cg,Reshape:Vx,ResizeBilinear:Gx,ResizeBilinearGrad:h4,ResizeNearestNeighbor:Wx,ResizeNearestNeighborGrad:p4,Reverse:Hx,RotateWithOffset:yw,Round:dg,Rsqrt:pg,SGDOptimizer:Yg,ScatterNd:qx,SearchSorted:Kx,Select:Xx,Selu:hg,Sigmoid:yg,Sign:gg,Sin:fg,Sinh:mg,Slice:Qx,Softmax:ew,Softplus:bg,SpaceToBatchND:Zx,SparseFillEmptyRows:tw,SparseReshape:nw,SparseSegmentMean:rw,SparseSegmentSum:aw,SparseToDense:iw,SplitV:Jx,Sqrt:vg,Square:f4,SquaredDifference:xg,Step:Eg,StridedSlice:ow,StringNGrams:sw,StringSplit:lw,StringToHashBucketFast:uw,Sub:wg,Sum:Yx,Tan:kg,Tanh:Sg,Tensor:Xn,TensorBuffer:Mr,Tile:Cg,TopK:cw,Transform:dw,Transpose:Dp,Unique:pw,Unpack:hw,UnsortedSegmentSum:fw,UpperBound:lse,Variable:Pg,ZerosLike:mw,_FusedMatMul:Ng,abs:Si,acos:yD,acosh:bD,add:yt,addN:vD,all:xD,any:wD,argMax:kD,argMin:SD,asin:CD,asinh:ED,atan:ND,atan2:TD,atanh:ID,avgPool:cT,avgPool3d:_D,backend:eue,backend_util:s7,basicLSTMCell:RD,batchNorm:jg,batchNorm2d:$D,batchNorm3d:OD,batchNorm4d:MD,batchToSpaceND:dT,bincount:pT,booleanMaskAsync:g9,broadcastArgs:PD,broadcastTo:qp,broadcast_util:uue,browser:mue,buffer:Tt,cast:Un,ceil:FD,clipByValue:AD,clone:xl,complex:bl,concat:Sa,concat1d:DD,concat2d:LD,concat3d:zD,concat4d:BD,conv1d:jD,conv2d:Ug,conv2dTranspose:VD,conv3d:WD,conv3dTranspose:GD,copyRegisteredKernels:hse,cos:HD,cosh:qD,cosineWindow:jw,cumprod:KD,cumsum:XD,customGrad:Ts,denseBincount:QD,deprecationWarn:Vle,depthToSpace:YD,depthwiseConv2d:$w,device_util:jse,diag:ZD,dilation2d:JD,disableDeprecationWarnings:Ule,dispose:wa,disposeVariables:Wle,div:_n,divNoNan:eL,dot:tL,dropout:w9,einsum:nL,elu:fT,enableDebugMode:jle,enableProdMode:Ble,enclosingPowerOfTwo:qT,engine:wl,env:me,equal:hT,erf:rL,euclideanNorm:oL,exp:$u,expandDims:Cl,expm1:sL,eye:gT,fft:Lw,fill:Kp,findBackend:Zle,findBackendFactory:Jle,floor:yT,floorDiv:sT,fused:S9,gather:bT,gatherND:x9,gather_util:gue,getBackend:Qle,getGradient:m4,getKernel:bw,getKernelsForBackend:vw,grad:wde,grads:kde,greater:Gg,greaterEqual:vT,ifft:Xg,imag:Dg,image:XT,inTopKAsync:k9,io:G4,irfft:VT,isFinite:lL,isInf:uL,isNaN:cL,keep:Cs,kernel_impls:pme,leakyRelu:xT,less:dL,lessEqual:Mw,linalg:R9,linspace:pL,localResponseNormalization:hL,log:Yp,log1p:wT,logSigmoid:mL,logSoftmax:gL,logSumExp:ST,logicalAnd:Hg,logicalNot:CT,logicalOr:ET,logicalXor:yL,losses:$9,lowerBound:bL,matMul:pn,math:lue,max:id,maxPool:NT,maxPool3d:vL,maxPoolWithArgmax:xL,maximum:TT,mean:qg,memory:Gle,meshgrid:wL,min:Ow,minimum:IT,mirrorPad:kL,mod:SL,moments:CL,movingAverage:y9,mul:De,multiRNNCell:EL,multinomial:NL,neg:Es,nextFrame:P9,norm:Wg,notEqual:_T,oneHot:Tw,ones:Mu,onesLike:TL,op:ne,outerProduct:IL,pad:Zp,pad1d:_L,pad2d:RL,pad3d:$L,pad4d:OL,pool:ML,pow:Xp,prelu:$T,print:B4,prod:PL,profile:Hle,raggedGather:FL,raggedTensorToTensor:AL,rand:DL,randomGamma:BL,randomNormal:zT,randomStandardNormal:jL,randomUniform:BT,range:Jp,ready:Xle,real:Wp,reciprocal:UL,registerBackend:H4,registerGradient:cse,registerKernel:xw,relu:Kg,relu6:jT,removeBackend:Yle,reshape:Ce,reverse:Pu,reverse1d:VL,reverse2d:WL,reverse3d:GL,reverse4d:HL,rfft:zw,round:UT,rsqrt:qL,scalar:Bt,scatterND:b9,scatter_util:yue,searchSorted:Aw,selu:KL,separableConv2d:XL,serialization:kue,setBackend:Kle,setPlatform:tue,setdiff1dAsync:QL,sigmoid:rd,sign:YL,signal:_9,sin:ZL,sinh:JL,slice:Cn,slice1d:e9,slice2d:t9,slice3d:n9,slice4d:r9,slice_util:hD,softmax:a9,softplus:kT,spaceToBatchND:RT,sparse:O9,sparseToDense:v9,spectral:I9,split:eh,sqrt:Ns,square:mo,squaredDifference:WT,squeeze:Qg,stack:Is,step:GT,stridedSlice:i9,string:M9,sub:At,sum:Rn,sumOutType:Cw,tan:o9,tanh:Rw,tensor:Qo,tensor1d:go,tensor2d:th,tensor3d:K4,tensor4d:s9,tensor5d:l9,tensor6d:u9,tensor_util:Ase,test_util:Oue,tidy:Xt,tile:Qp,time:qle,topk:c9,train:sme,transpose:Lg,truncatedNormal:d9,unique:p9,unregisterGradient:pse,unregisterKernel:dse,unsortedSegmentSum:h9,unstack:Fu,upcastType:oi,upperBound:f9,util:kse,valueAndGrad:Sde,valueAndGrads:Cde,variable:m9,variableGrads:fL,version_core:Mue,where:ad,whereAsync:HT,zeros:Ou,zerosLike:Ci},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fme=me();fme.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
* =============================================================================
*/var yo;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(yo||(yo={}));var l7;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(l7||(l7={}));/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mme={};function u7(t){return mme[t]}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function O(t,e,n,r,a){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const s=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?s+1:i.inputIndexEnd;if(i.type==="tensor")return Ua(e.inputNames[i.inputIndexStart],n,r,a);if(i.type==="tensors")return e.inputNames.slice(s,l).map(d=>Ua(d,n,r,a));const u=Ua(e.inputNames.slice(s)[0],n,r,a),c=u.dataSync();return i.type==="number"?c[0]:zi(u.shape,c)}const o=e.attrParams[t];return o&&o.value}function Ua(t,e,n,r){const[a,i]=Ei(t);if(r!=null){const s=r.getHashTableHandleByName(a);if(s!=null)return s}const o=n.currentContextIds.find(s=>!!e[n2(a,s)]);return o!==void 0?e[n2(a,o)][i]:void 0}function gme(t,e,n){return e[n2(t,n.currentContextId)]}function Rs(t,e){const[n,r,a]=Ei(t);return[n2(n,e&&e.currentContextId),r,a]}function n2(t,e){return e?`${t}-${e}`:t}function Ei(t){const e=t.split(":");if(e.length===1)return[t,0,void 0];const n=e[0],r=e.length===3?e[1]:void 0,a=Number(e[e.length-1]);return[n,a,r]}function r2(t,e,n){let r=O("pad",t,e,n);if(r==="explicit"){r=O("explicitPaddings",t,e,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)a[i][0]=r[i*2],a[i][1]=r[i*2+1];return a}return r}function Tl(t){return t.kept?t:xl(t)}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yme=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],bme=Object.freeze(Object.defineProperty({__proto__:null,json:yme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vme=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],xme=Object.freeze(Object.defineProperty({__proto__:null,json:vme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wme=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],kme=Object.freeze(Object.defineProperty({__proto__:null,json:wme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Sme=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],Cme=Object.freeze(Object.defineProperty({__proto__:null,json:Sme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Eme=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Nme=Object.freeze(Object.defineProperty({__proto__:null,json:Eme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Tme=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Ime=Object.freeze(Object.defineProperty({__proto__:null,json:Tme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _me=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Rme=Object.freeze(Object.defineProperty({__proto__:null,json:_me},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $me=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Ome=Object.freeze(Object.defineProperty({__proto__:null,json:$me},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Mme=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],Pme=Object.freeze(Object.defineProperty({__proto__:null,json:Mme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Fme=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Ame=Object.freeze(Object.defineProperty({__proto__:null,json:Fme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Dme=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Lme=Object.freeze(Object.defineProperty({__proto__:null,json:Dme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zme=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],Bme=Object.freeze(Object.defineProperty({__proto__:null,json:zme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const jme=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],Ume=Object.freeze(Object.defineProperty({__proto__:null,json:jme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Vme=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Wme=Object.freeze(Object.defineProperty({__proto__:null,json:Vme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gme=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],Hme=Object.freeze(Object.defineProperty({__proto__:null,json:Gme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qme=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Kme=Object.freeze(Object.defineProperty({__proto__:null,json:qme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xme=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Qme=Object.freeze(Object.defineProperty({__proto__:null,json:Xme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Yme=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Zme=Object.freeze(Object.defineProperty({__proto__:null,json:Yme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Jme=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],ege=Object.freeze(Object.defineProperty({__proto__:null,json:Jme},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class c7{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[bme,xme,kme,Cme,Nme,Ime,Rme,Ome,Pme,Ame,Lme,Bme,Ume,Wme,Hme,Kme,Qme,Zme,ege],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,a)=>(r[a.tfOpName]=a,r),{})}transformGraph(e,n={}){const r=e.node,a=[],i=[],o=[],s=r.reduce((y,v)=>(y[v.name]=this.mapNode(v),v.op.startsWith("Placeholder")?a.push(y[v.name]):v.op==="Const"?i.push(y[v.name]):(v.input==null||v.input.length===0)&&o.push(y[v.name]),y),{});let l=[];const u=[];let c={},d={};n!=null&&(c=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const p=Object.keys(s);p.forEach(y=>{const v=s[y];v.inputNames.forEach((b,x)=>{const[w,,S]=Rs(b),C=s[w];if(C.outputs!=null){const E=C.outputs.indexOf(S);if(E!==-1){const R=`${w}:${E}`;v.inputNames[x]=R}}v.inputs.push(C),C.children.push(v)})}),Object.keys(d).length===0?p.forEach(y=>{const v=s[y];v.children.length===0&&u.push(v)}):Object.keys(d).forEach(y=>{const[v]=Rs(y),b=s[v];b!=null&&(b.signatureKey=d[y],u.push(b))}),Object.keys(c).length>0?Object.keys(c).forEach(y=>{const[v]=Rs(y),b=s[v];b&&(b.signatureKey=c[y],l.push(b))}):l=a;let f={};e.library!=null&&e.library.function!=null&&(f=e.library.function.reduce((y,v)=>(y[v.signature.name]=this.mapFunction(v),y),{}));const g={nodes:s,inputs:l,outputs:u,weights:i,placeholders:a,signature:n,functions:f};return o.length>0&&(g.initNodes=o),g}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=u7(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(a=>a.startsWith("^")?a.slice(1):a),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((a,i)=>(a[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},a),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((a,i)=>{const o=i.type;let s;switch(i.type){case"string":s=vI(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=vI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":s=TI(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=TI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":s=wI(e.attr,i.tfName,i.defaultValue||0),s===void 0&&i.tfDeprecatedName&&(s=wI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":s=NI(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=NI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":s=xI(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=xI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":s=_I(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=_I(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":s=EI(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=EI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":s=II(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=II(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":s=SI(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=SI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":s=CI(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=CI(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":s=p7(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=p7(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return a[i.name]={value:s,type:o},a},{})),r}mapFunction(e){const n=e.nodeDef,r=[],a=[];let i={};n!=null&&(i=n.reduce((c,d)=>(c[d.name]=this.mapNode(d),d.op==="Const"&&a.push(c[d.name]),c),{}));const o=[],s=[];e.signature.inputArg.forEach(c=>{const[d]=Rs(c.name),p={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:kI(c.type),type:"dtype"}},children:[]};p.signatureKey=c.name,o.push(p),i[d]=p}),Object.keys(i).forEach(c=>{const d=i[c];d.inputNames.forEach((p,f)=>{const[g,,y]=Rs(p),v=i[g];if(v.outputs!=null){const b=v.outputs.indexOf(y);if(b!==-1){const x=`${g}:${b}`;d.inputNames[f]=x}}d.inputs.push(v),v.children.push(d)})});const l=e.ret;e.signature.outputArg.forEach(c=>{const[d,p]=Rs(l[c.name]),f=i[d];f!=null&&(f.defaultOutput=p,s.push(f))});const u=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:s,weights:a,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function tge(t){const e=me().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function d7(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):tge(t);return e?n:n.toLowerCase()}function vI(t,e,n,r=!1){const a=t[e];return a!=null?d7(a.s,r):n}function xI(t,e,n){const r=t[e];return r?r.b:n}function wI(t,e,n){const r=t[e]||{},a=r.i!=null?r.i:r.f!=null?r.f:n;return typeof a=="number"?a:parseInt(a,10)}function kI(t){switch(typeof t=="string"&&(t=yo[t]),t){case yo.DT_FLOAT:case yo.DT_HALF:return"float32";case yo.DT_INT32:case yo.DT_INT64:case yo.DT_INT8:case yo.DT_UINT8:return"int32";case yo.DT_BOOL:return"bool";case yo.DT_DOUBLE:return"float32";case yo.DT_STRING:return"string";default:return null}}function p7(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function SI(t,e,n){const r=t[e];return r&&r.type?kI(r.type):n}function CI(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(a=>kI(a)):n}function h7(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function EI(t,e,n){const r=t[e];return r&&r.shape?h7(r.shape):n}function NI(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(a=>typeof a=="number"?a:parseInt(a,10)):n}function TI(t,e,n,r=!1){const a=t[e];return a&&a.list&&a.list.s?a.list.s.map(i=>d7(i,r)):n}function II(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(a=>h7(a)):n}function _I(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class nge{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(a=>this.getInput(a)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((a,i)=>(a[i]=this.getAttr(i),a),{}))}getInput(e){return Ua(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Ua(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return wI(this.node.rawAttrs,e,n);if(r.s!=null)return vI(this.node.rawAttrs,e,n);if(r.b!=null)return xI(this.node.rawAttrs,e,n);if(r.shape!=null)return EI(this.node.rawAttrs,e,n);if(r.type!=null)return SI(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return NI(this.node.rawAttrs,e,n);if(r.list.s!=null)return TI(this.node.rawAttrs,e,n);if(r.list.shape!=null)return II(this.node.rawAttrs,e,n);if(r.list.b!=null)return _I(this.node.rawAttrs,e,n);if(r.list.type!=null)return CI(this.node.rawAttrs,e,n)}return n}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ca=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:$4,abs:Si,acos:yD,acosh:bD,add:yt,addN:vD,all:xD,any:wD,argMax:kD,argMin:SD,asin:CD,asinh:ED,atan:ND,atan2:TD,atanh:ID,avgPool:cT,avgPool3d:_D,basicLSTMCell:RD,batchNorm:jg,batchNorm2d:$D,batchNorm3d:OD,batchNorm4d:MD,batchToSpaceND:dT,bincount:pT,booleanMaskAsync:g9,broadcastArgs:PD,broadcastTo:qp,buffer:Tt,cast:Un,ceil:FD,clipByValue:AD,clone:xl,complex:bl,concat:Sa,concat1d:DD,concat2d:LD,concat3d:zD,concat4d:BD,conv1d:jD,conv2d:Ug,conv2dTranspose:VD,conv3d:WD,conv3dTranspose:GD,cos:HD,cosh:qD,cosineWindow:jw,cumprod:KD,cumsum:XD,denseBincount:QD,depthToSpace:YD,depthwiseConv2d:$w,diag:ZD,dilation2d:JD,div:_n,divNoNan:eL,dot:tL,dropout:w9,einsum:nL,elu:fT,enclosingPowerOfTwo:qT,equal:hT,erf:rL,euclideanNorm:oL,exp:$u,expandDims:Cl,expm1:sL,eye:gT,fft:Lw,fill:Kp,floor:yT,floorDiv:sT,fused:S9,gather:bT,gatherND:x9,greater:Gg,greaterEqual:vT,ifft:Xg,imag:Dg,image:XT,inTopKAsync:k9,irfft:VT,isFinite:lL,isInf:uL,isNaN:cL,leakyRelu:xT,less:dL,lessEqual:Mw,linalg:R9,linspace:pL,localResponseNormalization:hL,log:Yp,log1p:wT,logSigmoid:mL,logSoftmax:gL,logSumExp:ST,logicalAnd:Hg,logicalNot:CT,logicalOr:ET,logicalXor:yL,losses:$9,lowerBound:bL,matMul:pn,max:id,maxPool:NT,maxPool3d:vL,maxPoolWithArgmax:xL,maximum:TT,mean:qg,meshgrid:wL,min:Ow,minimum:IT,mirrorPad:kL,mod:SL,moments:CL,movingAverage:y9,mul:De,multiRNNCell:EL,multinomial:NL,neg:Es,norm:Wg,notEqual:_T,oneHot:Tw,ones:Mu,onesLike:TL,op:ne,outerProduct:IL,pad:Zp,pad1d:_L,pad2d:RL,pad3d:$L,pad4d:OL,pool:ML,pow:Xp,prelu:$T,print:B4,prod:PL,raggedGather:FL,raggedTensorToTensor:AL,rand:DL,randomGamma:BL,randomNormal:zT,randomStandardNormal:jL,randomUniform:BT,range:Jp,real:Wp,reciprocal:UL,relu:Kg,relu6:jT,reshape:Ce,reverse:Pu,reverse1d:VL,reverse2d:WL,reverse3d:GL,reverse4d:HL,rfft:zw,round:UT,rsqrt:qL,scalar:Bt,scatterND:b9,searchSorted:Aw,selu:KL,separableConv2d:XL,setdiff1dAsync:QL,sigmoid:rd,sign:YL,signal:_9,sin:ZL,sinh:JL,slice:Cn,slice1d:e9,slice2d:t9,slice3d:n9,slice4d:r9,softmax:a9,softplus:kT,spaceToBatchND:RT,sparse:O9,sparseToDense:v9,spectral:I9,split:eh,sqrt:Ns,square:mo,squaredDifference:WT,squeeze:Qg,stack:Is,step:GT,stridedSlice:i9,string:M9,sub:At,sum:Rn,tan:o9,tanh:Rw,tensor:Qo,tensor1d:go,tensor2d:th,tensor3d:K4,tensor4d:s9,tensor5d:l9,tensor6d:u9,tile:Qp,topk:c9,transpose:Lg,truncatedNormal:d9,unique:p9,unsortedSegmentSum:h9,unstack:Fu,upperBound:f9,variable:m9,where:ad,whereAsync:HT,zeros:Ou,zerosLike:Ci},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rge=(t,e,n,r=Ca)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(O("a",t,e,n),O("b",t,e,n))];case"AddN":return[r.addN(O("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(O("a",t,e,n),O("b",t,e,n))];case"Mul":return[r.mul(O("a",t,e,n),O("b",t,e,n))];case"RealDiv":case"Div":return[r.div(O("a",t,e,n),O("b",t,e,n))];case"DivNoNan":return[r.divNoNan(O("a",t,e,n),O("b",t,e,n))];case"FloorDiv":return[r.floorDiv(O("a",t,e,n),O("b",t,e,n))];case"Sub":return[r.sub(O("a",t,e,n),O("b",t,e,n))];case"Minimum":return[r.minimum(O("a",t,e,n),O("b",t,e,n))];case"Maximum":return[r.maximum(O("a",t,e,n),O("b",t,e,n))];case"Pow":return[r.pow(O("a",t,e,n),O("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(O("a",t,e,n),O("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const age=(t,e,n,r=Ca)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(O("x",t,e,n))];case"Acos":return[r.acos(O("x",t,e,n))];case"Acosh":return[r.acosh(O("x",t,e,n))];case"Asin":return[r.asin(O("x",t,e,n))];case"Asinh":return[r.asinh(O("x",t,e,n))];case"Atan":return[r.atan(O("x",t,e,n))];case"Atan2":return[r.atan2(O("x",t,e,n),O("y",t,e,n))];case"Atanh":return[r.atanh(O("x",t,e,n))];case"Ceil":return[r.ceil(O("x",t,e,n))];case"Complex":return[r.complex(O("real",t,e,n),O("imag",t,e,n))];case"Cos":return[r.cos(O("x",t,e,n))];case"Cosh":return[r.cosh(O("x",t,e,n))];case"Elu":return[r.elu(O("x",t,e,n))];case"Erf":return[r.erf(O("x",t,e,n))];case"Exp":return[r.exp(O("x",t,e,n))];case"Expm1":return[r.expm1(O("x",t,e,n))];case"Floor":return[r.floor(O("x",t,e,n))];case"Log":return[r.log(O("x",t,e,n))];case"Log1p":return[r.log1p(O("x",t,e,n))];case"Imag":return[r.imag(O("x",t,e,n))];case"Neg":return[r.neg(O("x",t,e,n))];case"Reciprocal":return[r.reciprocal(O("x",t,e,n))];case"Real":return[r.real(O("x",t,e,n))];case"Relu":return[r.relu(O("x",t,e,n))];case"Round":return[r.round(O("x",t,e,n))];case"Selu":return[r.selu(O("x",t,e,n))];case"Sigmoid":return[r.sigmoid(O("x",t,e,n))];case"Sin":return[r.sin(O("x",t,e,n))];case"Sign":return[r.sign(O("x",t,e,n))];case"Sinh":return[r.sinh(O("x",t,e,n))];case"Softplus":return[r.softplus(O("x",t,e,n))];case"Sqrt":return[r.sqrt(O("x",t,e,n))];case"Square":return[r.square(O("x",t,e,n))];case"Tanh":return[r.tanh(O("x",t,e,n))];case"Tan":return[r.tan(O("x",t,e,n))];case"ClipByValue":return[r.clipByValue(O("x",t,e,n),O("clipValueMin",t,e,n),O("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(O("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Ua(t.inputNames[0],e,n))];case"Prod":return[r.prod(O("x",t,e,n),O("axes",t,e,n))];case"LeakyRelu":return[r.leakyRelu(O("x",t,e,n),O("alpha",t,e,n))];case"Prelu":return[r.prelu(O("x",t,e,n),O("alpha",t,e,n))];case"IsNan":return[r.isNaN(Ua(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bo(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){U(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const a=t[r],i=e[r];U(a<0||i<0||a===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function f7(t){return!(typeof t=="number"||t.some(e=>e<0))}function t0(t,e,n){let r=RI(t,n);const a=!f7(r);if(a&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&e.forEach(i=>{r=RI(i.shape,r)}),!f7(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function RI(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const a=t[r],i=e[r];if(a>=0&&i>=0&&a!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=a>=0?a:i}return n}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class ige{constructor(e,n,r,a,i,o,s){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Bt(0),Cs(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),bo(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,Cs(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,a)=>this.write(r,n[a]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let a=0;a<this.size();a++)e.push(a)}if(e.length===0)return Qo([],[0].concat(this.elementShape));const r=this.readMany(e);return bo(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Is(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Qo([],[0].concat(this.elementShape));const n=[];for(let a=0;a<this.size();a++)n.push(a);const r=this.readMany(n);return bo(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Sa(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Fu(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const a=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];Xt(()=>{n=Ce(n,[1,r,i]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:a[l-1],0],c=[1,e[l],i];o[l]=Ce(Cn(n,u,c),this.elementShape)}return o});const s=[];for(let l=0;l<e.length;l++)s[l]=l;this.writeMany(s,o)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class xd{constructor(e,n,r,a=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);bo(n,i.shape,"TensorList shape mismatch: "),Cs(i)}),this.idTensor=Bt(0),this.maxNumElements=a,Cs(this.idTensor)}get id(){return this.idTensor.id}copy(){return new xd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);bo(e,this.elementShape,"TensorList shape mismatch: ");const a=t0(this.elementShape,this.tensors,e);return Xt(()=>{const i=this.tensors.map(o=>Ce(o,a));return Is(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=t0(this.elementShape,this.tensors,e),a=this.tensors.pop();return a.kept=!1,bo(a.shape,e,"TensorList shape mismatch: "),Ce(a,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(bo(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Cs(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new xd([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);bo(this.tensors[e].shape,n,"TensorList shape mismatch: ");const a=t0(this.elementShape,this.tensors,n);return Ce(this.tensors[e],a)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);bo(this.elementShape,n.shape,"TensorList shape mismatch: "),Cs(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);bo(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const a=t0(this.elementShape,this.tensors,r);return e.length===0?Qo([],[0].concat(a)):Xt(()=>{const i=e.map(o=>Ce(this.tensors[o],a));return Is(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);bo(this.elementShape,n,"TensorList shape mismatch: ");const r=t0(this.elementShape,this.tensors,n);return this.size()===0?Qo([],[0].concat(r)):Xt(()=>{const a=this.tensors.map(i=>Ce(i,r));return Sa(a,0)})}}function oge(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const a=t.shape.slice(1);bo(a,e,"TensorList shape mismatch: ");const i=Fu(t);return new xd(i,e,r)}function sge(t,e,n,r){return new xd([],t,e,r)}function lge(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const a=Math.max(...e);if(r!=null&&r!==-1&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const i=new xd([],n,t.dtype,r),o=Fu(t,0);return e.forEach((s,l)=>{i.setItem(s,o[l])}),i}function uge(t,e,n){let r=0;const a=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=RI(i,n),s=r===0?0:t.size/r,l=Xt(()=>{const c=[];t=Ce(t,[1,r,s]);for(let d=0;d<e.length;++d){const p=[0,d===0?0:a[d-1],0],f=[1,e[d],s];c[d]=Ce(Cn(t,p,f),o)}return t.dispose(),c}),u=new xd([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cge=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=O("thenBranch",t,e,n),a=O("elseBranch",t,e,n),i=O("cond",t,e,n),o=O("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=O("body",t,e,n),a=O("cond",t,e,n),i=O("args",t,e,n),o=await n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),s=i.map(c=>c.id);let l=await o[0].data();o.forEach(c=>{!c.kept&&s.indexOf(c.id)===-1&&c.dispose()});let u=i;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const d=u.map(f=>f.id);c.forEach(f=>{!f.kept&&s.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()});const p=await n.functionMap[a].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await p[0].data(),p.forEach(f=>{!f.kept&&s.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()})}return u}case"LoopCond":{const r=O("pred",t,e,n);return[Tl(r)]}case"Switch":{const r=O("pred",t,e,n);let a=O("data",t,e,n);return a.kept||(a=Tl(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=t.inputNames.find(a=>Ua(a,e,n)!==void 0);if(r){const a=Ua(r,e,n);return[Tl(a)]}return}case"Enter":{const r=O("frameName",t,e,n),a=O("tensor",t,e,n);return n.enterFrame(r),[Tl(a)]}case"Exit":{const r=O("tensor",t,e,n);return n.exitFrame(),[Tl(r)]}case"NextIteration":{const r=O("tensor",t,e,n);return n.nextIteration(),[Tl(r)]}case"TensorArrayV3":{const r=O("size",t,e,n),a=O("dtype",t,e,n),i=O("elementShape",t,e,n),o=O("dynamicSize",t,e,n),s=O("clearAfterRead",t,e,n),l=O("identicalElementShapes",t,e,n),u=O("name",t,e,n),c=new ige(u,a,r,i,l,o,s);return n.addTensorArray(c),[c.idTensor,Bt(1)]}case"TensorArrayWriteV3":{const r=O("tensorArrayId",t,e,n),a=O("index",t,e,n),i=O("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(a,i),[o.idTensor]}case"TensorArrayReadV3":{const r=O("tensorArrayId",t,e,n),a=O("index",t,e,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=O("tensorArrayId",t,e,n),a=O("indices",t,e,n),i=O("dtype",t,e,n);return[n.getTensorArray(r.id).gather(a,i)]}case"TensorArrayScatterV3":{const r=O("tensorArrayId",t,e,n),a=O("indices",t,e,n),i=O("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(a,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=O("tensorArrayId",t,e,n),a=n.getTensorArray(r.id),i=O("dtype",t,e,n);return[a.concat(i)]}case"TensorArraySplitV3":{const r=O("tensorArrayId",t,e,n),a=O("tensor",t,e,n),i=O("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,a),[o.idTensor]}case"TensorArraySizeV3":{const r=O("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return[Bt(a.size(),"int32")]}case"TensorArrayCloseV3":{const r=O("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=O("tensorListId",t,e,n),a=O("index",t,e,n),i=O("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(a,i),[o.idTensor]}case"TensorListGetItem":{const r=O("tensorListId",t,e,n),a=O("index",t,e,n),i=O("elementShape",t,e,n),o=O("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(a,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=O("indices",t,e,n),a=O("tensor",t,e,n),i=O("elementShape",t,e,n),o=O("numElements",t,e,n),s=lge(a,r,i,o);return n.addTensorList(s),[s.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=O("elementShape",t,e,n),a=O("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=O(i,t,e,n),s=t.op==="TensorListReserve"?-1:o,l=sge(r,a,o,s);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=O("tensorListId",t,e,n),a=O("indices",t,e,n),i=O("elementShape",t,e,n),o=O("elementDType",t,e,n);return[n.getTensorList(r.id).gather(a,o,i)]}case"TensorListStack":{const r=O("tensorListId",t,e,n),a=O("elementShape",t,e,n),i=O("elementDType",t,e,n),o=O("numElements",t,e,n);return[n.getTensorList(r.id).stack(a,i,o)]}case"TensorListFromTensor":{const r=O("tensor",t,e,n),a=O("elementShape",t,e,n),i=O("elementDType",t,e,n),o=oge(r,a,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=O("tensorListId",t,e,n),a=n.getTensorList(r.id),i=O("dtype",t,e,n),o=O("elementShape",t,e,n);return[a.concat(i,o)]}case"TensorListPushBack":{const r=O("tensorListId",t,e,n),a=O("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(a),[i.idTensor]}case"TensorListPopBack":{const r=O("tensorListId",t,e,n),a=O("elementShape",t,e,n),i=O("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(a,i)]}case"TensorListSplit":{const r=O("tensor",t,e,n),a=O("elementShape",t,e,n),i=O("lengths",t,e,n),o=uge(r,i,a);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=O("tensorListId",t,e,n),a=n.getTensorList(r.id);return[Bt(a.size(),"int32")]}case"TensorListResize":{const r=O("tensorListId",t,e,n),a=O("size",t,e,n),i=n.getTensorList(r.id).resize(a);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m7(t,e,n){const[r,a]=O("fusedOps",t,e,n),i=r==="biasadd",o=!i,s=a==="prelu",l=r==="fusedbatchnorm",u=O("numArgs",t,e,n);if(i){if(s&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&i&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=O("strides",t,e,n),d=r2(t,e,n),p=O("dataFormat",t,e,n).toUpperCase(),f=O("dilations",t,e,n);let[g,y]=O("args",t,e,n);o&&(y=g,g=void 0);const v=O("leakyreluAlpha",t,e,n);return{stride:c,pad:d,dataFormat:p,dilations:f,biasArg:g,preluArg:y,activationFunc:a,leakyreluAlpha:v}}const dge=(t,e,n,r=Ca)=>{switch(t.op){case"Conv1D":{const a=O("stride",t,e,n),i=O("pad",t,e,n),o=O("dataFormat",t,e,n).toUpperCase(),s=O("dilation",t,e,n);return[r.conv1d(O("x",t,e,n),O("filter",t,e,n),a,i,o,s)]}case"Conv2D":{const a=O("strides",t,e,n),i=r2(t,e,n),o=O("dataFormat",t,e,n).toUpperCase(),s=O("dilations",t,e,n);return[r.conv2d(O("x",t,e,n),O("filter",t,e,n),[a[1],a[2]],i,o,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=m7(t,e,n);return[r.fused.conv2d({x:O("x",t,e,n),filter:O("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=m7(t,e,n);return[r.fused.depthwiseConv2d({x:O("x",t,e,n),filter:O("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const a=O("outputShape",t,e,n),i=O("strides",t,e,n),o=r2(t,e,n);return[r.conv2dTranspose(O("x",t,e,n),O("filter",t,e,n),a,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const a=O("strides",t,e,n),i=r2(t,e,n),o=O("dilations",t,e,n),s=O("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(O("input",t,e,n),O("filter",t,e,n),[a[1],a[2]],i,s,[o[1],o[2]])]}case"Conv3D":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("dataFormat",t,e,n).toUpperCase(),s=O("dilations",t,e,n);return[r.conv3d(O("x",t,e,n),O("filter",t,e,n),[a[1],a[2],a[3]],i,o,[s[1],s[2],s[3]])]}case"AvgPool":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("kernelSize",t,e,n);return[r.avgPool(O("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPool":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("kernelSize",t,e,n);return[r.maxPool(O("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("kernelSize",t,e,n),s=O("includeBatchInIndex",t,e,n),{result:l,indexes:u}=r.maxPoolWithArgmax(O("x",t,e,n),[o[1],o[2]],[a[1],a[2]],i,s);return[l,u]}case"AvgPool3D":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("kernelSize",t,e,n);return[r.avgPool3d(O("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("kernelSize",t,e,n);return[r.maxPool3d(O("x",t,e,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{const a=O("strides",t,e,n),i=O("pad",t,e,n),o=O("dilations",t,e,n),s=a[1],l=a[2],u=o[1],c=o[2];return[r.dilation2d(O("x",t,e,n),O("filter",t,e,n),[s,l],i,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pge=(t,e,n,r=Ca)=>{switch(t.op){case"Fill":{const a=O("shape",t,e,n),i=O("dtype",t,e,n),o=O("value",t,e,n);return[r.fill(a,o,i)]}case"LinSpace":{const a=O("start",t,e,n),i=O("stop",t,e,n),o=O("num",t,e,n);return[r.linspace(a,i,o)]}case"Multinomial":{const a=O("logits",t,e,n),i=O("numSamples",t,e,n),o=O("seed",t,e,n);return[r.multinomial(a,i,o)]}case"OneHot":{const a=O("indices",t,e,n),i=O("depth",t,e,n),o=O("onValue",t,e,n),s=O("offValue",t,e,n),l=O("dtype",t,e,n);return[r.oneHot(a,i,o,s,l)]}case"Ones":return[r.ones(O("shape",t,e,n),O("dtype",t,e,n))];case"OnesLike":return[r.onesLike(O("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(O("shape",t,e,n),O("dtype",t,e,n),O("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(O("shape",t,e,n),O("minval",t,e,n),O("maxval",t,e,n),O("dtype",t,e,n))];case"Range":{const a=O("start",t,e,n),i=O("stop",t,e,n),o=O("step",t,e,n);return[r.range(a,i,o,O("dtype",t,e,n))]}case"TruncatedNormal":{const a=O("shape",t,e,n),i=O("mean",t,e,n),o=O("stdDev",t,e,n),s=O("seed",t,e,n);return[r.truncatedNormal(a,i,o,O("dtype",t,e,n),s)]}case"Zeros":return[r.zeros(O("shape",t,e,n),O("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(O("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $I(t,e,n){const r=O("boxes",t,e,n),a=O("scores",t,e,n),i=O("maxOutputSize",t,e,n),o=O("iouThreshold",t,e,n),s=O("scoreThreshold",t,e,n),l=O("softNmsSigma",t,e,n);return{boxes:r,scores:a,maxOutputSize:i,iouThreshold:o,scoreThreshold:s,softNmsSigma:l}}const hge=async(t,e,n,r,a=Ca)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=$I(t,e,n),d=await a.image.nonMaxSuppressionWithScoreAsync(i,o,s,l,u,c);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u}=$I(t,e,n),c=O("padToMaxOutputSize",t,e,n),d=await a.image.nonMaxSuppressionPaddedAsync(i,o,s,l,u,c);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:u}=$I(t,e,n);return[await a.image.nonMaxSuppressionAsync(i,o,s,l,u)]}case"Where":{const i=a.cast(O("condition",t,e,n),"bool"),o=[await a.whereAsync(i)];return i.dispose(),o}case"ListDiff":return a.setdiff1dAsync(O("x",t,e,n),O("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const fge=(t,e,n,r=Ca)=>{switch(t.op){case"LowerBound":{const a=O("sortedSequence",t,e,n),i=O("values",t,e,n);return[r.lowerBound(a,i)]}case"TopKV2":{const a=O("x",t,e,n),i=O("k",t,e,n),o=O("sorted",t,e,n),s=r.topk(a,i,o);return[s.values,s.indices]}case"UpperBound":{const a=O("sortedSequence",t,e,n),i=O("values",t,e,n);return[r.upperBound(a,i)]}case"Unique":{const a=O("x",t,e,n),i=r.unique(a);return[i.values,i.indices]}case"UniqueV2":{const a=O("x",t,e,n),i=O("axis",t,e,n),o=r.unique(a,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mge=(t,e,n,r=Ca)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const a=O("default",t,e,n);return[Ua(t.name,e,n)||a];case"Placeholder":return[Ua(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=O("x",t,e,n);return[Tl(c)]}case"IdentityN":return O("x",t,e,n).map(c=>Tl(c));case"Snapshot":const i=O("x",t,e,n);return[Tl(i)];case"Shape":return[r.tensor1d(O("x",t,e,n).shape,"int32")];case"ShapeN":return O("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(O("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(O("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=O("x",t,e,n),s=O("data",t,e,n),l=O("message",t,e,n),u=O("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<s.length;c++)console.log(Array.prototype.slice.call(s[c].dataSync()).slice(0,u));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class gge{constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=Bt(0),this.tensorMap=new Map,Cs(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Bt(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(a=>a.dispose()),this.tensorMap.clear(),Xt(()=>{const a=Fu(n),i=r.length,o=a.length;U(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let s=0;s<i;s++){const l=r[s],u=a[s];Cs(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return Xt(()=>{const a=[];for(let i=0;i<r.length;i++){const o=r[i],s=this.findWithDefault(o,n);a.push(s)}return Is(a)})}findWithDefault(e,n){return this.tensorMap.get(e)??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yge=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const a=O("keyDType",t,e,n),i=O("valueDType",t,e,n),o=new gge(a,i);return r.addHashTable(t.name,o),[o.handle]}case"LookupTableImport":case"LookupTableImportV2":{const a=O("tableHandle",t,e,n,r),i=O("keys",t,e,n),o=O("values",t,e,n);return[await r.getHashTableById(a.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const a=O("tableHandle",t,e,n,r),i=O("keys",t,e,n),o=O("defaultValue",t,e,n);return[await r.getHashTableById(a.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=O("tableHandle",t,e,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const bge=(t,e,n,r=Ca)=>{switch(t.op){case"ResizeBilinear":{const a=O("images",t,e,n),i=O("size",t,e,n),o=O("alignCorners",t,e,n),s=O("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)]}case"ResizeNearestNeighbor":{const a=O("images",t,e,n),i=O("size",t,e,n),o=O("alignCorners",t,e,n),s=O("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],o,s)]}case"CropAndResize":{const a=O("image",t,e,n),i=O("boxes",t,e,n),o=O("boxInd",t,e,n),s=O("cropSize",t,e,n),l=O("method",t,e,n),u=O("extrapolationValue",t,e,n);return[r.image.cropAndResize(a,i,o,s,l,u)]}case"ImageProjectiveTransformV3":{const a=O("images",t,e,n),i=O("transforms",t,e,n),o=O("outputShape",t,e,n),s=O("fillValue",t,e,n),l=O("interpolation",t,e,n),u=O("fillMode",t,e,n);return[r.image.transform(a,i,l.toLowerCase(),u.toLowerCase(),s,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vge=(t,e,n,r=Ca)=>{switch(t.op){case"Equal":return[r.equal(O("a",t,e,n),O("b",t,e,n))];case"NotEqual":return[r.notEqual(O("a",t,e,n),O("b",t,e,n))];case"Greater":return[r.greater(O("a",t,e,n),O("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(O("a",t,e,n),O("b",t,e,n))];case"Less":return[r.less(O("a",t,e,n),O("b",t,e,n))];case"LessEqual":return[r.lessEqual(O("a",t,e,n),O("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(O("a",t,e,n),O("b",t,e,n))];case"LogicalNot":return[r.logicalNot(O("a",t,e,n))];case"LogicalOr":return[r.logicalOr(O("a",t,e,n),O("b",t,e,n))];case"Select":case"SelectV2":return[r.where(O("condition",t,e,n),O("a",t,e,n),O("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const xge=(t,e,n,r=Ca)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(O("a",t,e,n),O("b",t,e,n),O("transposeA",t,e,n),O("transposeB",t,e,n))];case"Einsum":return[r.einsum(O("equation",t,e,n),...O("tensors",t,e,n))];case"Transpose":return[r.transpose(O("x",t,e,n),O("perm",t,e,n))];case"_FusedMatMul":const[a,i]=O("fusedOps",t,e,n),o=a==="biasadd",s=i==="prelu",l=O("numArgs",t,e,n),u=O("leakyreluAlpha",t,e,n);if(o){if(s&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,d]=O("args",t,e,n);return[r.fused.matMul({a:O("a",t,e,n),b:O("b",t,e,n),transposeA:O("transposeA",t,e,n),transposeB:O("transposeB",t,e,n),bias:c,activation:i,preluActivationWeights:d,leakyreluAlpha:u})];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wge=(t,e,n,r=Ca)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(O("x",t,e,n),O("axis",t,e,n),O("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(O("x",t,e,n),O("mean",t,e,n),O("variance",t,e,n),O("offset",t,e,n),O("scale",t,e,n),O("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(O("x",t,e,n),O("mean",t,e,n),O("variance",t,e,n),O("offset",t,e,n),O("scale",t,e,n),O("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(O("x",t,e,n),O("radius",t,e,n),O("bias",t,e,n),O("alpha",t,e,n),O("beta",t,e,n))];case"Softmax":return[r.softmax(O("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(O("x",t,e,n))];case"SparseToDense":return[r.sparseToDense(O("sparseIndices",t,e,n),O("outputShape",t,e,n),O("sparseValues",t,e,n),O("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kge=(t,e,n,r=Ca)=>{switch(t.op){case"Max":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.max(O("x",t,e,n),s,l)]}case"Mean":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.mean(O("x",t,e,n),s,l)]}case"Min":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.min(O("x",t,e,n),s,l)]}case"Sum":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.sum(O("x",t,e,n),s,l)]}case"All":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.all(O("x",t,e,n),s,l)]}case"Any":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.any(O("x",t,e,n),s,l)]}case"ArgMax":{const s=O("axis",t,e,n);return[r.argMax(O("x",t,e,n),s)]}case"ArgMin":{const s=O("axis",t,e,n);return[r.argMin(O("x",t,e,n),s)]}case"Prod":{const s=O("axis",t,e,n),l=O("keepDims",t,e,n);return[r.prod(O("x",t,e,n),s,l)]}case"Cumprod":{const s=O("axis",t,e,n),l=O("exclusive",t,e,n),u=O("reverse",t,e,n);return[r.cumprod(O("x",t,e,n),s,l,u)]}case"Cumsum":{const s=O("axis",t,e,n),l=O("exclusive",t,e,n),u=O("reverse",t,e,n);return[r.cumsum(O("x",t,e,n),s,l,u)]}case"Bincount":const a=O("x",t,e,n),i=O("weights",t,e,n),o=O("size",t,e,n);return[r.bincount(a,i,o)];case"DenseBincount":{const s=O("x",t,e,n),l=O("weights",t,e,n),u=O("size",t,e,n),c=O("binaryOutput",t,e,n);return[r.denseBincount(s,l,u,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Sge=(t,e,n,r=Ca)=>{switch(t.op){case"ConcatV2":case"Concat":{const a=O("n",t,e,n),i=O("axis",t,e,n);let o=O("tensors",t,e,n);return o=o.slice(0,a),[r.concat(o,i)]}case"Gather":{const a=O("x",t,e,n),i=O("indices",t,e,n);return[r.gather(a,r.cast(i,"int32"),0)]}case"GatherV2":{const a=O("axis",t,e,n),i=O("batchDims",t,e,n),o=O("x",t,e,n),s=O("indices",t,e,n);return[r.gather(o,r.cast(s,"int32"),a,i)]}case"Reverse":{const a=O("dims",t,e,n),i=[];for(let s=0;s<a.length;s++)a[s]&&i.push(s);const o=O("x",t,e,n);return[r.reverse(o,i)]}case"ReverseV2":{const a=O("axis",t,e,n),i=O("x",t,e,n);return[r.reverse(i,a)]}case"Slice":{const a=O("begin",t,e,n),i=O("size",t,e,n);return[r.slice(O("x",t,e,n),a,i)]}case"StridedSlice":{const a=O("begin",t,e,n),i=O("end",t,e,n),o=O("strides",t,e,n),s=O("beginMask",t,e,n),l=O("endMask",t,e,n),u=O("ellipsisMask",t,e,n),c=O("newAxisMask",t,e,n),d=O("shrinkAxisMask",t,e,n),p=O("x",t,e,n);return[r.stridedSlice(p,a,i,o,s,l,u,c,d)]}case"Pack":return Xt(()=>{const a=O("axis",t,e,n),i=O("tensors",t,e,n),o=i[0].shape,s=r.squeeze(i[0]).shape,l=i.map(u=>{const c=Sn(u.shape,o);if(!c&&!Sn(r.squeeze(u).shape,s))throw new Error("the input tensors shape does not match");return c?u:r.reshape(u,o)});return[r.stack(l,a)]});case"Unpack":{const a=O("axis",t,e,n),i=O("tensor",t,e,n);return r.unstack(i,a)}case"Tile":{const a=O("reps",t,e,n);return[r.tile(O("x",t,e,n),a)]}case"Split":case"SplitV":{const a=O("axis",t,e,n),i=O("numOrSizeSplits",t,e,n),o=O("x",t,e,n);return r.split(o,i,a)}case"ScatterNd":{const a=O("indices",t,e,n),i=O("values",t,e,n),o=O("shape",t,e,n);return[r.scatterND(a,i,o)]}case"GatherNd":{const a=O("x",t,e,n),i=O("indices",t,e,n);return[r.gatherND(a,i)]}case"SparseToDense":{const a=O("sparseIndices",t,e,n),i=O("outputShape",t,e,n),o=O("sparseValues",t,e,n),s=O("defaultValue",t,e,n);return[r.sparseToDense(a,o,i,o.dtype===s.dtype?s:r.cast(s,o.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Cge=(t,e,n,r=Ca)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:a,outputValues:i,emptyRowIndicator:o,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(O("indices",t,e,n),O("values",t,e,n),O("denseShape",t,e,n),O("defaultValue",t,e,n));return[a,i,o,s]}case"SparseReshape":{const{outputIndices:a,outputShape:i}=r.sparse.sparseReshape(O("inputIndices",t,e,n),O("inputShape",t,e,n),O("newShape",t,e,n));return[a,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(O("data",t,e,n),O("indices",t,e,n),O("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(O("data",t,e,n),O("indices",t,e,n),O("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ege=(t,e,n,r=Ca)=>{switch(t.op){case"FFT":return[r.fft(O("x",t,e,n))];case"IFFT":return[r.ifft(O("x",t,e,n))];case"RFFT":return[r.rfft(O("x",t,e,n))];case"IRFFT":return[r.irfft(O("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Nge=(t,e,n,r=Ca)=>{switch(t.op){case"StringNGrams":{const{nGrams:a,nGramsSplits:i}=r.string.stringNGrams(O("data",t,e,n),O("dataSplits",t,e,n),O("separator",t,e,n),O("nGramWidths",t,e,n),O("leftPad",t,e,n),O("rightPad",t,e,n),O("padWidth",t,e,n),O("preserveShortSequences",t,e,n));return[a,i]}case"StringSplit":{const{indices:a,values:i,shape:o}=r.string.stringSplit(O("input",t,e,n),O("delimiter",t,e,n),O("skipEmpty",t,e,n));return[a,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(O("input",t,e,n),O("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Tge=(t,e,n,r=Ca)=>{switch(t.op){case"Cast":return[r.cast(O("x",t,e,n),O("dtype",t,e,n))];case"ExpandDims":{const a=O("axis",t,e,n);return[r.expandDims(O("x",t,e,n),a)]}case"Squeeze":{const a=O("axis",t,e,n);return[r.squeeze(O("x",t,e,n),a)]}case"Reshape":return[r.reshape(O("x",t,e,n),O("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(O("x",t,e,n),O("padding",t,e,n),O("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(O("x",t,e,n),O("padding",t,e,n),O("constantValue",t,e,n))];case"SpaceToBatchND":{const a=O("blockShape",t,e,n),i=O("paddings",t,e,n);return[r.spaceToBatchND(O("x",t,e,n),a,i)]}case"BatchToSpaceND":{const a=O("blockShape",t,e,n),i=O("crops",t,e,n);return[r.batchToSpaceND(O("x",t,e,n),a,i)]}case"DepthToSpace":{const a=O("blockSize",t,e,n),i=O("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(O("x",t,e,n),a,i)]}case"BroadcastTo":return[r.broadcastTo(O("x",t,e,n),O("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(O("s0",t,e,n),O("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function g7(t,e,n,r,a=Xt){const i=((o,s,l)=>{switch(o.category){case"arithmetic":return a(()=>rge(o,s,l));case"basic_math":return a(()=>age(o,s,l));case"control":return cge(o,s,l);case"convolution":return a(()=>dge(o,s,l));case"creation":return a(()=>pge(o,s,l));case"dynamic":return hge(o,s,l);case"evaluation":return a(()=>fge(o,s,l));case"image":return a(()=>bge(o,s,l));case"graph":return a(()=>mge(o,s,l));case"logical":return a(()=>vge(o,s,l));case"matrices":return a(()=>xge(o,s,l));case"normalization":return a(()=>wge(o,s,l));case"reduction":return a(()=>kge(o,s,l));case"slice_join":return a(()=>Sge(o,s,l));case"sparse":return a(()=>Cge(o,s,l));case"spectral":return a(()=>Ege(o,s,l));case"string":return a(()=>Nge(o,s,l));case"transformation":return a(()=>Tge(o,s,l));case"hash_table":return yge(o,s,l,r);case"custom":const u=u7(o.op);if(u&&u.customExecutor)return u.customExecutor(new nge(o,s,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Hc(i)?i.then(o=>[].concat(o)):[].concat(i)}class y7{constructor(e={},n={},r={},a={}){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b7(t,e,n,r){const a=new Set,i=[];let o=null,s=null;const l=new Set,u=Object.keys(t).map(p=>Ei(p)[0]);let c=[];r!=null&&(c=r.map(p=>Ei(p.name)[0]));const d=[...e];for(;d.length>0;){const p=d.pop();if((v7(p)||Oge(p)||Mge(p))&&o==null&&(o=p,s=o.children.map(f=>f.name).filter(f=>a.has(f))),a.add(p.name),n[p.name]==null&&u.indexOf(p.name)===-1&&c.indexOf(p.name)===-1){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),d.push(f))})}}return{inputs:t,outputs:e,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}function Ige(t,e,n){const{usedNodes:r,inputs:a}=n,i=[],o=Object.keys(a).map(c=>Ei(c)[0]).map(c=>t.nodes[c]),s=t.initNodes;o.forEach(c=>{r.has(c.name)&&i.push(c)}),t.weights.forEach(c=>{r.has(c.name)&&i.push(c)}),s?.forEach(c=>{r.has(c.name)&&i.push(c)});const l=new Set,u=[];for(;i.length>0;){const c=i.pop();l.add(c.name),e[c.name]||u.push(c),c.children.forEach(d=>{!l.has(d.name)&&r.has(d.name)&&d.inputs.every(p=>l.has(p.name))&&i.push(d)})}return u}const _ge=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],Rge=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],$ge=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function v7(t){return _ge.indexOf(t.op)>=0}function Oge(t){return Rge.indexOf(t.op)>=0}function Mge(t){return $ge.indexOf(t.op)>=0}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Q2{constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new Q2(e.functions[r],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(a=>a.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),a=n.map(i=>i.name).sort();return r.join(this.SEPERATOR)+"--"+a.join(this.SEPERATOR)}compile(e,n){const r=b7(e,n,this.weightMap,this._initNodes),{missingInputs:a,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(a.length>0){const s=n.map(u=>u.name),l=Object.keys(e);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs [${l}]. Missing the following inputs: [${a}]`)}return Ige(this.graph,this.weightMap,r)}execute(e,n){e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const a=r.map(d=>this.graph.nodes[Ei(d)[0]]),i=n.map(d=>Ei(d)[0]);let o=i.map(d=>this.graph.nodes[d]);this.resetIntermediateTensors(),o.length===0&&(o=this._outputs);const s=this.getCompilationKey(a,o);let l=this.compiledMap.get(s);l==null&&(l=this.compile(e,o),this.compiledMap.set(s,l));const u={},c={};return Xt(()=>{const d=new y7(this.weightMap,u,c,this.functionExecutorMap),p=Object.assign({},this.weightMap);Object.keys(e).forEach(y=>{const[v,b]=Ei(y),x=[];x[b]=e[y],p[v]=x});const f=this.getFrozenTensorIds(p),g={};for(let y=0;y<l.length;y++){const v=l[y];if(!p[v.name]){const b=g7(v,p,d,this._resourceManager);if(Hc(b))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);p[v.name]=b,this.checkTensorForDisposal(v.name,v,p,d,f,i,g)}}return this.parent==null&&d.dispose(f),n.map(y=>Ua(y,p,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(a=>a.id)));return new Set(n)}checkTensorForDisposal(e,n,r,a,i,o,s){n.category==="control"||o.indexOf(e)!==-1||(r[e].forEach(l=>{l!=null&&(s[l.id]=(s[l.id]||0)+n.children.length)}),n.inputs.forEach(l=>{if(l.category!=="control"){const u=gme(l.name,r,a);u?.forEach(c=>{if(c&&!c.kept&&!i.has(c.id)){const d=s[c.id];if(d===1){if(!this.keepTensorForDebug)c.dispose();else{const[p,f]=Rs(n.name,a);this.intermediateTensors[p]?this.intermediateTensors[p][f]=c:(this.intermediateTensors[p]=[],this.intermediateTensors[p][f]=c)}delete s[c.id]}else d!=null&&s[c.id]--}})}}))}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach(e=>this.intermediateTensors[e].forEach(n=>n.dispose())),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach(e=>{this.tensorsMap[e].forEach(n=>{n&&!n.kept&&!n.isDisposed&&!this.keepIds.has(n.id)&&n.dispose()})})}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach(n=>n.dispose()),delete this.intermediateTensors[e]}async _executeAsync(e,n,r=!1,a={},i={}){r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=me().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(c){console.warn(c.message)}this.resetIntermediateTensors();const o=new y7(this.weightMap,a,i,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,o,n,r);const s=n.map(c=>Ua(c,this.tensorsMap,o)),l=s.map(c=>c.id),u=Object.keys(e).map(c=>e[c].id);return this.keepIds=new Set([...l,...u,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),this.parent==null&&o.dispose(this.keepIds),s}async executeFunctionAsync(e,n,r){const a=e.reduce((i,o,s)=>(i[this.inputs[s].name]=o,i),{});return this._executeAsync(a,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,a){const i=Object.keys(e),o=i.map(w=>this.graph.nodes[Ei(w)[0]]),s=r.map(w=>Ei(w)[0]);let l=s.map(w=>this.graph.nodes[w]);l.length===0&&(l=this._outputs);const{usedNodes:u,missingInputs:c,dynamicNode:d,syncInputs:p}=b7(e,l,this.weightMap,this._initNodes),f=[...o,...this.graph.weights,...this._initNodes||[]].map(w=>({node:w,contexts:n.currentContext})),g=Object.assign({},this.weightMap);Object.keys(e).forEach(w=>{const[S,C]=Ei(w),E=[];E[C]=e[w],g[S]=E});const y={},v=this.getFrozenTensorIds(g),b={};for(;f.length>0;){const w=this.processStack(o,f,n,g,b,v,s,y,u);await Promise.all(w)}d==null&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const x=l.filter(w=>!v7(w)&&!Ua(w.name,g,n)).map(w=>w.name);if(x.length>0){let w="";throw d!=null&&(w=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${x}] from the provided inputs [${i}]. Consider providing the following inputs: [${c}]. ${w}`)}return g}processStack(e,n,r,a,i,o,s,l,u){const c=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let p="";if(d.node.op==="Enter"&&O("isConstant",d.node,a,r)&&([p]=Rs(d.node.name,r)),a[d.node.name]==null){const f=g7(d.node,a,r,this._resourceManager);p||([p]=Rs(d.node.name,r));const g=r.currentContext;Hc(f)?c.push(f.then(y=>(a[p]=y,r.currentContext=g,this.checkTensorForDisposal(p,d.node,a,r,o,s,l),this.processChildNodes(d.node,n,r,a,i,u),y))):(a[p]=f,this.checkTensorForDisposal(p,d.node,a,r,o,s,l),this.processChildNodes(d.node,n,r,a,i,u))}else this.processChildNodes(d.node,n,r,a,i,u)}return c}processChildNodes(e,n,r,a,i,o){e.children.forEach(s=>{const[l]=Rs(s.name,r);i[l]||!o.has(s.name)||(s.op==="Merge"?s.inputNames.some(u=>!!Ua(u,a,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})):s.inputNames.every(u=>!!Ua(u,a,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[a]=Ei(n),i=this.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((l,u)=>o[u]===-1||o[u]===l);U(s,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&U(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){const n={};for(const r in e)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[r]!=null){const a=this._signature.inputs[r];n[a.name]=e[r]}else n[r]=e[r];return n}checkInputs(e){const n=Object.keys(e).filter(r=>{const[a]=Ei(r);return this.graph.nodes[a]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>this._signature!=null&&this._signature.outputs!=null&&this._signature.outputs[n]!=null?this._signature.outputs[n].name:n,{})}checkOutputs(e){e.forEach(n=>{const[r]=Ei(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class Pge{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Fge="?tfjs-format=file",Age="model.json";class Dge{constructor(e,n={},r=G4){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Pge}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Hc(e)?e.then(n=>this.loadSync(n)):this.loadSync(e)}loadSync(e){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(r=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;const a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Q2(c7.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=c7.Instance.transformGraph(e.modelInitializer);this.initializer=new Q2(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,n){const r=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){const a=r instanceof Xn?[r]:r,i={};return a.forEach((o,s)=>i[this.structuredOutputKeys[s]]=o),i}return r}normalizeInputs(e){if(!(e instanceof Xn)&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((n,r,a)=>(n[r]=e[a],n),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function Lge(t,e={},n=G4){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=zge(t));const r=new Dge(t,e,n);return await r.load(),r}function zge(t){return t.endsWith("/")||(t=t+"/"),`${t}${Age}${Fge}`}/**
* @license
* Copyright 2023 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
* @license
* Copyright 2023 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function a2(t,e,n,r){return new(n||(n=Promise))(function(a,i){function o(u){try{l(r.next(u))}catch(c){i(c)}}function s(u){try{l(r.throw(u))}catch(c){i(c)}}function l(u){u.done?a(u.value):new n(function(c){c(u.value)}).then(o,s)}l((r=r.apply(t,e||[])).next())})}function i2(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!((a=a.length>0&&a[a.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(c[0]===6&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(d){c=[6,d],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var Bge="https://tfhub.dev/tensorflow/tfjs-model/deeplab",jge=513,OI={ADE20K:[[0,0,0],[120,120,120],[180,120,120],[6,230,230],[80,50,50],[4,200,3],[120,120,80],[140,140,140],[204,5,255],[230,230,230],[4,250,7],[224,5,255],[235,255,7],[150,5,61],[120,120,70],[8,255,51],[255,6,82],[143,255,140],[204,255,4],[255,51,7],[204,70,3],[0,102,200],[61,230,250],[255,6,51],[11,102,255],[255,7,71],[255,9,224],[9,7,230],[220,220,220],[255,9,92],[112,9,255],[8,255,214],[7,255,224],[255,184,6],[10,255,71],[255,41,10],[7,255,255],[224,255,8],[102,8,255],[255,61,6],[255,194,7],[255,122,8],[0,255,20],[255,8,41],[255,5,153],[6,51,255],[235,12,255],[160,150,20],[0,163,255],[140,140,140],[250,10,15],[20,255,0],[31,255,0],[255,31,0],[255,224,0],[153,255,0],[0,0,255],[255,71,0],[0,235,255],[0,173,255],[31,0,255],[11,200,200],[255,82,0],[0,255,245],[0,61,255],[0,255,112],[0,255,133],[255,0,0],[255,163,0],[255,102,0],[194,255,0],[0,143,255],[51,255,0],[0,82,255],[0,255,41],[0,255,173],[10,0,255],[173,255,0],[0,255,153],[255,92,0],[255,0,255],[255,0,245],[255,0,102],[255,173,0],[255,0,20],[255,184,184],[0,31,255],[0,255,61],[0,71,255],[255,0,204],[0,255,194],[0,255,82],[0,10,255],[0,112,255],[51,0,255],[0,194,255],[0,122,255],[0,255,163],[255,153,0],[0,255,10],[255,112,0],[143,255,0],[82,0,255],[163,255,0],[255,235,0],[8,184,170],[133,0,255],[0,255,92],[184,0,255],[255,0,31],[0,184,255],[0,214,255],[255,0,112],[92,255,0],[0,224,255],[112,224,255],[70,184,160],[163,0,255],[153,0,255],[71,255,0],[255,0,163],[255,204,0],[255,0,143],[0,255,235],[133,255,0],[255,0,235],[245,0,255],[255,0,122],[255,245,0],[10,190,212],[214,255,0],[0,204,255],[20,0,255],[255,255,0],[0,153,255],[0,41,255],[0,255,204],[41,0,255],[41,255,0],[173,0,255],[0,245,255],[71,0,255],[122,0,255],[0,255,184],[0,92,255],[184,255,0],[0,133,255],[255,214,0],[25,194,194],[102,255,0],[92,0,255]],CITYSCAPES:[[128,64,128],[244,35,232],[70,70,70],[102,102,156],[190,153,153],[153,153,153],[250,170,30],[220,220,0],[107,142,35],[152,251,152],[70,130,180],[220,20,60],[255,0,0],[0,0,142],[0,0,70],[0,60,100],[0,80,100],[0,0,230],[119,11,32]],PASCAL:[[0,0,0],[128,0,0],[0,128,0],[128,128,0],[0,0,128],[128,0,128],[0,128,128],[128,128,128],[64,0,0],[192,0,0],[64,128,0],[192,128,0],[64,0,128],[192,0,128],[64,128,128],[192,128,128],[0,64,0],[128,64,0],[0,192,0],[128,192,0],[0,64,128],[128,64,128],[0,192,128],[128,192,128],[64,64,0],[192,64,0],[64,192,0],[192,192,0],[64,64,128],[192,64,128],[64,192,128],[192,192,128],[0,0,64],[128,0,64],[0,128,64],[128,128,64],[0,0,192],[128,0,192],[0,128,192],[128,128,192],[64,0,64],[192,0,64],[64,128,64],[192,128,64],[64,0,192],[192,0,192],[64,128,192],[192,128,192],[0,64,64],[128,64,64],[0,192,64],[128,192,64],[0,64,192],[128,64,192],[0,192,192],[128,192,192],[64,64,64],[192,64,64],[64,192,64],[192,192,64],[64,64,192],[192,64,192],[64,192,192],[192,192,192],[32,0,0],[160,0,0],[32,128,0],[160,128,0],[32,0,128],[160,0,128],[32,128,128],[160,128,128],[96,0,0],[224,0,0],[96,128,0],[224,128,0],[96,0,128],[224,0,128],[96,128,128],[224,128,128],[32,64,0],[160,64,0],[32,192,0],[160,192,0],[32,64,128],[160,64,128],[32,192,128],[160,192,128],[96,64,0],[224,64,0],[96,192,0],[224,192,0],[96,64,128],[224,64,128],[96,192,128],[224,192,128],[32,0,64],[160,0,64],[32,128,64],[160,128,64],[32,0,192],[160,0,192],[32,128,192],[160,128,192],[96,0,64],[224,0,64],[96,128,64],[224,128,64],[96,0,192],[224,0,192],[96,128,192],[224,128,192],[32,64,64],[160,64,64],[32,192,64],[160,192,64],[32,64,192],[160,64,192],[32,192,192],[160,192,192],[96,64,64],[224,64,64],[96,192,64],[224,192,64],[96,64,192],[224,64,192],[96,192,192],[224,192,192],[0,32,0],[128,32,0],[0,160,0],[128,160,0],[0,32,128],[128,32,128],[0,160,128],[128,160,128],[64,32,0],[192,32,0],[64,160,0],[192,160,0],[64,32,128],[192,32,128],[64,160,128],[192,160,128],[0,96,0],[128,96,0],[0,224,0],[128,224,0],[0,96,128],[128,96,128],[0,224,128],[128,224,128],[64,96,0],[192,96,0],[64,224,0],[192,224,0],[64,96,128],[192,96,128],[64,224,128],[192,224,128],[0,32,64],[128,32,64],[0,160,64],[128,160,64],[0,32,192],[128,32,192],[0,160,192],[128,160,192],[64,32,64],[192,32,64],[64,160,64],[192,160,64],[64,32,192],[192,32,192],[64,160,192],[192,160,192],[0,96,64],[128,96,64],[0,224,64],[128,224,64],[0,96,192],[128,96,192],[0,224,192],[128,224,192],[64,96,64],[192,96,64],[64,224,64],[192,224,64],[64,96,192],[192,96,192],[64,224,192],[192,224,192],[32,32,0],[160,32,0],[32,160,0],[160,160,0],[32,32,128],[160,32,128],[32,160,128],[160,160,128],[96,32,0],[224,32,0],[96,160,0],[224,160,0],[96,32,128],[224,32,128],[96,160,128],[224,160,128],[32,96,0],[160,96,0],[32,224,0],[160,224,0],[32,96,128],[160,96,128],[32,224,128],[160,224,128],[96,96,0],[224,96,0],[96,224,0],[224,224,0],[96,96,128],[224,96,128],[96,224,128],[224,224,128],[32,32,64],[160,32,64],[32,160,64],[160,160,64],[32,32,192],[160,32,192],[32,160,192],[160,160,192],[96,32,64],[224,32,64],[96,160,64],[224,160,64],[96,32,192],[224,32,192],[96,160,192],[224,160,192],[32,96,64],[160,96,64],[32,224,64],[160,224,64],[32,96,192],[160,96,192],[32,224,192],[160,224,192],[96,96,64],[224,96,64],[96,224,64],[224,224,64],[96,96,192],[224,96,192],[96,224,192],[224,224,192]]},MI={PASCAL:["background","aeroplane","bicycle","bird","boat","bottle","bus","car","cat","chair","cow","dining table","dog","horse","motorbike","person","potted plant","sheep","sofa","train","TV"],CITYSCAPES:["road","sidewalk","building","wall","fence","pole","traffic light","traffic sign","vegetation","terrain","sky","person","rider","car","truck","bus","train","motorcycle","bicycle"],ADE20K:["background","wall","building","sky","floor","tree","ceiling","road","bed","windowpane","grass","cabinet","sidewalk","person","earth","door","table","mountain","plant","curtain","chair","car","water","painting","sofa","shelf","house","sea","mirror","rug","field","armchair","seat","fence","desk","rock","wardrobe","lamp","bathtub","railing","cushion","base","box","column","signboard","chest","counter","sand","sink","skyscraper","fireplace","refrigerator","grandstand","path","stairs","runway","case","pool","pillow","screen","stairway","river","bridge","bookcase","blind","coffee","toilet","flower","book","hill","bench","countertop","stove","palm","kitchen","computer","swivel","boat","bar","arcade","hovel","bus","towel","light","truck","tower","chandelier","awning","streetlight","booth","television","airplane","dirt","apparel","pole","land","bannister","escalator","ottoman","bottle","buffet","poster","stage","van","ship","fountain","conveyer","canopy","washer","plaything","swimming","stool","barrel","basket","waterfall","tent","bag","minibike","cradle","oven","ball","food","step","tank","trade","microwave","pot","animal","bicycle","lake","dishwasher","screen","blanket","sculpture","hood","sconce","vase","traffic","tray","ashcan","fan","pier","screen","plate","monitor","bulletin","shower","radiator","glass","clock","flag"]};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Uge(t,e){return""+Bge+"/"+(e===4?t+"/1/default/1/model.json":t+"/1/quantized/"+e+"/1/model.json")+"?tfjs-format=file"}function Vge(t){if(t==="pascal")return OI.PASCAL;if(t==="ade20k")return OI.ADE20K;if(t==="cityscapes")return OI.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function Wge(t){if(t==="pascal")return MI.PASCAL;if(t==="ade20k")return MI.ADE20K;if(t==="cityscapes")return MI.CITYSCAPES;throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}function Gge(t,e,n,r){return a2(this,void 0,void 0,function(){var a,i,o,s,l,u,c,d,p,f,g,y,v,b;return i2(this,function(x){switch(x.label){case 0:if(t.length<e.length)throw new Error("The colormap must be expansive enough to encode each label. Aborting, since the given colormap has length "+t.length+", but there are "+e.length+" labels.");return a=n.shape,i=a[0],o=a[1],s=Tt([i,o,3],"int32"),[4,n.array()];case 1:for(l=x.sent(),u=new Set,c=0;c<i;++c)for(d=0;d<o;++d)b=l[c][d],u.add(b),s.set(t[b][0],c,d,0),s.set(t[b][1],c,d,1),s.set(t[b][2],c,d,2);return p=s.toTensor(),[4,nD(p,r)];case 2:for(f=x.sent(),wa(p),g={},y=0,v=Array.from(u);y<v.length;y++)b=v[y],g[e[b]]=t[b];return[2,{legend:g,segmentationMap:f}]}})})}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hge(t){return t===void 0&&(t={base:"pascal",quantizationBytes:2}),a2(this,void 0,void 0,function(){var e;return i2(this,function(n){switch(n.label){case 0:if(hme==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(t.base){if(["pascal","cityscapes","ade20k"].indexOf(t.base)===-1)throw new Error("SemanticSegmentation cannot be constructed with an invalid base model "+t.base+". Try one of 'pascal', 'cityscapes' and 'ade20k'.");if([1,2,4].indexOf(t.quantizationBytes)===-1)throw new Error("Only quantization to 1, 2 or 4 bytes is supported.")}else if(!t.modelUrl)throw new Error("SemanticSegmentation can be constructed either by passing the weights URL or one of the supported base model names from 'pascal', 'cityscapes' and 'ade20k',together with the degree of quantization (either 1, 2 or 4).Aborting, since neither has been provided.");return[4,Lge(t.modelUrl||Uge(t.base,t.quantizationBytes))];case 1:return e=n.sent(),[2,new qge(e,t.base)]}})})}var qge=function(){function t(e,n){this.model=e,this.base=n}return t.prototype.predict=function(e){var n=this;return Xt(function(){var r=Un(function(a){return Xt(function(){var i=a instanceof Xn?a:rD(a),o=i.shape,s=o[0],l=o[1],u=jge/Math.max(l,s),c=Math.round(s*u),d=Math.round(l*u);return Cl(XT.resizeBilinear(i,[c,d]))})}(e),"int32");return Qg(n.model.execute(r))})},t.prototype.segment=function(e,n){return n===void 0&&(n={}),a2(this,void 0,void 0,function(){var r,a,i,o,s,l,u,c,d,p,f=this;return i2(this,function(g){switch(g.label){case 0:if(!(n.colormap&&n.labels||this.base))throw new Error("Calling the 'segment' method requires either the 'base' attribute to be defined (e.g. 'pascal', 'cityscapes' or'ade20k'), or 'colormap' and 'labels' options to be set. Aborting, since neither has been provided.");return n.colormap&&n.labels||(n.colormap=Vge(this.base),n.labels=Wge(this.base)),r=n.colormap,a=n.labels,i=n.canvas,o=Xt(function(){return f.predict(e)}),s=o.shape,l=s[0],u=s[1],[4,Gge(r,a,o,i)];case 1:return c=g.sent(),d=c.legend,p=c.segmentationMap,wa(o),[2,{legend:d,height:l,width:u,segmentationMap:p}]}})})},t.prototype.dispose=function(){return a2(this,void 0,void 0,function(){return i2(this,function(e){return this.model&&this.model.dispose(),[2]})})},t}();/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qe(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&U(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Kge=Bw;class Y2 extends Nv{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new KN(this,wl())}nextDataId(){return Y2.nextDataId++}write(e,n,r){this.firstUse&&(this.firstUse=!1,me().get("IS_NODE")&&Bi(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:r,refCount:1}),a}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&ws(r[0])){const i=r.map(o=>ks(o));a=this.write(i,e,n)}else a=this.write(r,e,n);return{dataId:a,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,a,i){this.data.set(e,{values:n,dtype:a,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return Nl(a,i)}return this.data.get(e).values}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>yl(a));return Tt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Tt(e.shape,e.dtype,n)}makeOutput(e,n,r){return wl().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=wi();return e(),{kernelMs:wi()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){qe([e],"where");const n=this.readSync(e.dataId);return Kge(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Y2.nextDataId=0;/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function x7(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const Xge=t=>{const{x:e}=t.inputs,n=t.backend;qe(e,"abs");let r=new Float32Array(be(e.shape));const a=n.data.get(e.dataId).values;return r=x7(a),n.makeOutput(r,e.shape,e.dtype)},Qge={kernelName:Ov,backendName:"cpu",kernelFunc:Xge};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cr(t){return(e,n,r,a,i)=>{const o=Ut(e,n),s=o.length,l=rt(o),u=be(o),c=$r(i,u),d=e.length,p=n.length,f=rt(e),g=rt(n),y=ed(e,o),v=ed(n,o);if(y.length+v.length===0)for(let b=0;b<c.length;++b)c[b]=t(r[b%r.length],a[b%a.length]);else for(let b=0;b<c.length;++b){const x=Gc(b,s,l),w=x.slice(-d);y.forEach(R=>w[R]=0);const S=qo(w,d,f),C=x.slice(-p);v.forEach(R=>C[R]=0);const E=qo(C,p,g);c[b]=t(r[S],a[E])}return[c,o]}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ni(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(s.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}const Yge={kernelName:Wv,backendName:"cpu",kernelFunc:Ni};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function o2(t,e,n="float32"){if(n==="complex64"){const a=o2(t,e,"float32"),i=o2(t,e,"float32");return Ni({inputs:{real:a,imag:i},backend:t})}const r=ra(be(e),n);return t.makeTensorInfo(e,n,r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $s(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Zge={kernelName:Gm,backendName:"cpu",kernelFunc:$s};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ld(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const Jge={kernelName:Ux,backendName:"cpu",kernelFunc:ld};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w7(t,e,n,r){if(r==="int32"){const a=Int32Array.from(t);return[e,"int32",a]}if(r==="bool"){const a=Nu([0],n),[i,o]=Cr((s,l)=>s!==l?1:0)(e,[],t,a,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Lu(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return $s({inputs:{x:a},backend:n});const c=o2(n,a.shape,a.dtype),d=Lu({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),p=Ni({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),p}if(a.dtype==="complex64"){const c=ld({inputs:{input:a},backend:n}),d=Lu({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),d}if(!YN(a.dtype,i)){const c=$s({inputs:{x:a},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:i}}const o=n.data.get(a.dataId).values,[s,l,u]=w7(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,l,u)}const e0e={kernelName:Rm,backendName:"cpu",kernelFunc:Lu};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Hr(t,e,n,r){return n==null?({inputs:a,backend:i})=>{const{a:o,b:s}=a,l=i;qe([o,s],t);const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,d=o.dtype==="string"?sd(u):u,p=o.dtype==="string"?sd(c):c,f=r||o.dtype,[g,y]=e(o.shape,s.shape,d,p,f);return l.makeTensorInfo(y,f,g)}:({inputs:a,backend:i})=>{const{a:o,b:s}=a,l=i;if(o.dtype==="complex64"||s.dtype==="complex64"){const u=Lu({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,p=c.complexTensorInfos.imag,f=l.data.get(d.dataId).values,g=l.data.get(p.dataId).values,y=Lu({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(y.dataId),b=v.complexTensorInfos.real,x=v.complexTensorInfos.imag,w=l.data.get(b.dataId).values,S=l.data.get(x.dataId).values,[C,E,R]=n(o.shape,s.shape,f,g,w,S),T=l.makeTensorInfo(R,"float32",C),$=l.makeTensorInfo(R,"float32",E),P=Ni({inputs:{real:T,imag:$},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(y),l.disposeIntermediateTensorInfo(T),l.disposeIntermediateTensorInfo($),P}else{const u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,d=r||o.dtype,[p,f]=e(o.shape,s.shape,u,c,d);return l.makeTensorInfo(f,d,p)}}}function PI(t){return(e,n,r,a,i,o)=>{const s=Ut(e,n),l=be(s),u=s.length,c=rt(s),d=$r("float32",l),p=$r("float32",l),f=ed(e,s),g=ed(n,s),y=Nl(r,a),v=Nl(i,o),b=e.length,x=rt(e),w=n.length,S=rt(n);if(f.length+g.length===0)for(let C=0;C<d.length;C++){const E=C%y.length,R=C%v.length,T=t(y[E*2],y[E*2+1],v[R*2],v[R*2+1]);d[C]=T.real,p[C]=T.imag}else for(let C=0;C<d.length;C++){const E=Gc(C,u,c),R=E.slice(-b);f.forEach(B=>R[B]=0);const T=qo(R,b,x),$=E.slice(-w);g.forEach(B=>$[B]=0);const P=qo($,w,S),D=t(y[T*2],y[T*2+1],v[P*2],v[P*2+1]);d[C]=D.real,p[C]=D.imag}return[d,p,s]}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const k7=Cr((t,e)=>t+e),t0e=PI((t,e,n,r)=>({real:t+n,imag:e+r})),rh=Hr(Ap,k7,t0e),n0e={kernelName:Ap,backendName:"cpu",kernelFunc:rh};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function FI(t,e,n,r,a){const i=be(r),o=ra(a,n);for(let s=0;s<t.length;s++){const l=t[s];if(l<0)throw new Error("Input x must be non-negative!");l>=a||(i>0?o[l]+=e[s]:o[l]+=1)}return o}function S7(t,e,n,r=!1){const a=t.shape[0],i=t.shape[1],o=Tt([a,n],e.dtype);for(let s=0;s<a;s++)for(let l=0;l<i;l++){const u=t.get(s,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,s,u):e.size>0?o.set(o.get(s,u)+e.get(s,l),s,u):o.set(o.get(s,u)+1,s,u))}return o}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zu(t){return(e,n,r)=>{const a=$r(n,e.length);for(let i=0;i<e.length;++i)a[i]=t(e[i],r);return a}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gn(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:o}=r;if(qe(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const s=i,l=s.data.get(o.dataId).values,u=be(o.shape),c=n||o.dtype,d=Or(c,u);for(let p=0;p<u;++p)d[p]=e(l[p],a);return s.makeTensorInfo(o.shape,c,d)}}function ah(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:o}=r;if(qe(o,t),o.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const s=i,l=s.data.get(o.dataId).values,u=n||o.dtype,c=e(l,u,a);return s.makeTensorInfo(o.shape,u,c)}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const C7=zu(t=>Math.ceil(t)),r0e=ah($m,C7),a0e={kernelName:$m,backendName:"cpu",kernelFunc:r0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function E7(t,e,n,r){const a=Or(n,be(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const s=be(o.shape);a.set(o.vals,i),i+=s})}else{let i=0;t.forEach(o=>{const s=n==="string"?sd(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const c=u*e[1]+i;for(let d=0;d<o.shape[1];++d)a[c+d]=s[l++]}i+=o.shape[1]})}return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const N7=Cr((t,e)=>t===e?1:0),T7=Hr(Lm,N7,null,"bool"),i0e={kernelName:Lm,backendName:"cpu",kernelFunc:T7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const I7=zu(t=>Math.exp(t)),_7=ah(zm,I7,"float32"),o0e={kernelName:zm,backendName:"cpu",kernelFunc:_7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const R7=zu(t=>Math.expm1(t)),s0e=ah(Bm,R7),l0e={kernelName:Bm,backendName:"cpu",kernelFunc:s0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $7=zu(t=>Math.floor(t)),u0e=ah(jm,$7),c0e={kernelName:jm,backendName:"cpu",kernelFunc:u0e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function O7(t,e,n,r,a,i,o,s,l){const u=Tt([r,i],n);for(let c=0;c<r;c++){const d=[];let p=0;for(let f=0;f<a;f++){const g=t[c*a+f];p+=g*o[f],d.push(g)}if(p<0||p>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${s}`);for(let f=0;f<i;f++)u.values[c*i+f]=e.get(...e.indexToLoc(p*i+f))}return u}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function M7(t,e,n){const r=Tt(n,t.dtype);for(let a=0;a<r.size;++a){const i=r.indexToLoc(a).slice(),o=i[0],s=i[2],l=e.locToIndex([o,s]);i[2]=e.values[l];const u=t.locToIndex(i);0<=u&&u<t.values.length&&(r.values[a]=t.values[u])}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const P7=Cr((t,e)=>t>e?1:0),d0e=Hr(Vm,P7,null,"bool"),p0e={kernelName:Vm,backendName:"cpu",kernelFunc:d0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const F7=Cr((t,e)=>t>=e?1:0),h0e=Hr(Wm,F7,null,"bool"),f0e={kernelName:Wm,backendName:"cpu",kernelFunc:h0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A7=Cr((t,e)=>t<e?1:0),m0e=Hr(Xm,A7,null,"bool"),g0e={kernelName:Xm,backendName:"cpu",kernelFunc:m0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const D7=Cr((t,e)=>t<=e?1:0),y0e=Hr(Qm,D7,null,"bool"),b0e={kernelName:Qm,backendName:"cpu",kernelFunc:y0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function L7(t,e,n){const r=(e-t)/(n-1),a=ra(n,"float32");a[0]=t;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const z7=zu(t=>Math.log(t)),v0e=ah(Ym,z7),x0e={kernelName:Ym,backendName:"cpu",kernelFunc:v0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function B7(t,e,n,r){const a=$r(r,be(n));for(let i=0;i<a.length;++i){const o=i*e;let s=t[o];for(let l=0;l<e;++l){const u=t[o+l];(Number.isNaN(u)||u>s)&&(s=u)}a[i]=s}return a}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const j7=Cr((t,e)=>Math.max(t,e)),w0e=Hr(ng,j7),k0e={kernelName:ng,backendName:"cpu",kernelFunc:w0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const U7=Cr((t,e)=>Math.min(t,e)),S0e=Hr(rg,U7),C0e={kernelName:rg,backendName:"cpu",kernelFunc:S0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const AI=Cr((t,e)=>t*e),E0e=PI((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),s2=Hr(ig,AI,E0e),N0e={kernelName:ig,backendName:"cpu",kernelFunc:s2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function V7(t,e,n){const r=gl(-1,n);return AI([],e,r,t,n)}function T0e(t){const{inputs:e,backend:n}=t,{x:r}=e;qe(r,"neg");const a=n.data.get(r.dataId).values,[i,o]=V7(a,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const I0e={kernelName:_x,backendName:"cpu",kernelFunc:T0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const W7=Cr((t,e)=>t!==e?1:0),_0e=Hr(og,W7,null,"bool"),R0e={kernelName:og,backendName:"cpu",kernelFunc:_0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function DI(t,e,n,r,a){const i=e.length,o=be(e),s=rt(e),l=rt(a),u=$r(n,be(a));for(let c=0;c<o;++c){const d=Gc(c,i,s),p=new Array(d.length);for(let g=0;g<p.length;g++)p[g]=d[r[g]];const f=qo(p,i,l);u[f]=t[c]}return u}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function si(t){const{inputs:e,attrs:n,backend:r}=t,{x:a}=e,{perm:i}=n;qe(a,"transpose");const o=a.shape.length,s=new Array(o);for(let c=0;c<s.length;c++)s[c]=a.shape[i[c]];const l=r.data.get(a.dataId).values,u=DI(l,a.shape,a.dtype,i,s);return{dataId:r.write(u,s,a.dtype),shape:s,dtype:a.dtype}}const $0e={kernelName:Dp,backendName:"cpu",kernelFunc:si};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function G7(t,e,n,r){const[a,i]=aa(t,r),o=oi(e,"int32"),s=ra(be(a),o),l=be(i);for(let u=0;u<s.length;++u){const c=u*l;let d=1;for(let p=0;p<l;++p)d*=n[c+p];s[u]=d}return{outVals:s,outShape:a,outDtype:o}}function O0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;qe(a,"prod");const s=a.shape.length,l=Zt(i,a.shape),u=mr(l,s);let c=l,d=a;const p=[];u!=null&&(d=si({inputs:{x:a},backend:n,attrs:{perm:u}}),p.push(d),c=gr(c.length,s));const f=n.data.get(d.dataId).values,{outVals:g,outShape:y,outDtype:v}=G7(d.shape,d.dtype,f,c);let b=y;return o&&(b=Pr(y,l)),p.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(b,v,g)}const M0e={kernelName:Lx,backendName:"cpu",kernelFunc:O0e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function P0e(t,e,n){t.forEach((r,a)=>{if(r<0||r>=n){const i=Gc(a,e.length,rt(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function F0e(t,e){for(let n=0;n<t.length;++n){const r=t[n],a=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function A0e(t,e,n,r){const a=[];let i=0;const o=e.length-1+n.length,s=new Array(o).fill(null).map(()=>[0]);F0e(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let d=1;d<l+1;++d)s[u].push(d*c)}for(let u=0;u<t.length;++u){let c=t[u],d=t[u]+1;for(let p=0;p<n.length;++p){const f=n[p],g=p+e.length-1;if(g>=0){const y=s[g],v=y[y.length-1]-f[c];for(let b=c;b<d;++b)s[g].push(f[b+1]+v)}c=f[c],d=f[d]}d!==c&&(a.push([c,d]),i+=d-c)}return{outSplits:s,valueSlices:a,numValues:i}}function D0e(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,a=Or("int32",r);e.push(a),t[n].forEach((i,o)=>a[o]=i)}return e}function H7(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function L0e(t,e,n,r,a,i){const o=H7(e,2)[1],s=H7(i,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let d=0;d<r;++d)a[l*s+d]=t[c*o+d];++l}}function z0e(t,e,n,r,a){const i=e.slice();i[0]=a;const o=Or(n,be(i)),s=t.length,l=s===0?0:s/e[0];return L0e(t,e,r,l,o,i),[o,i]}function q7(t,e,n,r,a,i,o,s){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(P0e(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:d,numValues:p}=A0e(i,o,t,u),f=D0e(c),g=z0e(n,r,a,d,p);return[f,g[0],g[1]]}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var vo=Yo;class Z2{constructor(e,n,r,a,i,o,s,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=A9(c),this.raggedRank=D9(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===vo.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===vo.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case vo.VALUE_ROWIDS:return Z2.getMaxWidthValueRowID(n);case vo.ROW_SPLITS:return Z2.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${vo[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let a=0;a<n-1;++a){const i=e[a+1]-e[a];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,a=e[0],i=0;for(let o=1;o<n;++o){const s=e[o];s!==a&&(a=s,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return X7(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;L9(r,n);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=F9(this.raggedRank,a,n);i[0]<0&&(i[0]=e);for(let o=1;o<=this.raggedRank;++o)i[o]<0&&(i[o]=this.getMaxWidth(o));return i}calculateFirstParentOutputIndex(e,n,r){const a=Math.min(e,r),i=[];let o=0;for(let s=0;s<a;++s,o+=n)i.push(o);for(let s=a;s<e;++s)i.push(-1);return U(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,a){const i=e.length,o=[];for(let s=0;s<i-1;++s){const l=e[s+1]-e[s];let u=Math.min(a,l),c=n[s];c===-1&&(u=0);for(let d=0;d<u;++d)o.push(c),c+=r;for(let d=0;d<l-u;++d)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,a){const i=e.length,o=[];if(i===0)return[];let s=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];o.push(u);for(let c=1;c<i;++c){const d=e[c];if(d===l)u>=0&&(++s,s<a?u+=r:u=-1);else{if(s=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,a){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case vo.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,a);case vo.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,a);default:throw new Error(`Unsupported partition type: ${vo[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case vo.FIRST_DIM_SIZE:return e[0];case vo.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case vo.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${vo[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),n=this.calculateOutputSize(e),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let o=r.length-2;o>=0;--o)r[o]=r[o+1]*n[o+1];const a=X7(n,!1),i=Or(this.valuesDType,be(a));if(r[0]*n[0]>0){let o=this.calculateFirstParentOutputIndex(e,r[0],n[0]);for(let s=1;s<=this.raggedRank;++s)o=this.calculateOutputIndex(s-1,o,r[s],n[s]);this.setOutput(this.raggedRank,o,i,a)}return[a,i]}setOutput(e,n,r,a){if(r.length===0)return;const i=this.values,o=r;let s=a.slice();s=s.slice(e+1);const l=be(s),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const g=this.defaultValueShape;Xt(()=>{const y=Ce(c,g);c=qp(y,s).dataSync()})}let d=0,p=0,f=0;for(let g=0;g<=u;++g){let y=g<u?n[g]:-1;if(y===f){++f;continue}if(p<f){const v=i.subarray(d*l),b=o.subarray(p*l),x=(f-p)*l;K7(b,v,x)}if(g>=u){const v=r.length;y=Math.floor(v/l)}if(y>f)if(this.defaultValue.length===1)o.subarray(f*l,y*l).fill(this.defaultValue[0]),f=y;else for(;y>f;){const v=o.slice(f*l);K7(v,c,l),++f}y<0?(d=g+1,p=f):(d=g,p=f,f=p+1)}}}function K7(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function X7(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function Q7(t,e,n,r,a,i,o,s,l,u){return new Z2(t,e,n,r,a,i,o,s,l,u).compute()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Y7(t,e,n,r){const a=t===e,i=t<e&&n<0,o=e<t&&n>1;if(a||i||o)return ra(0,r);const s=Math.abs(Math.ceil((e-t)/n)),l=ra(s,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Z7=zu(t=>1/Math.sqrt(t)),B0e=ah(pg,Z7),j0e={kernelName:pg,backendName:"cpu",kernelFunc:B0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ih(t,e,n,r,a,i,o,s,l,u){const c=[r/a,a],d=t.values,p=e.values;if(r===0)return Tt(n,e.dtype);const f=Tt(c,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let g=0;g<i;g++){const y=[];let v=0;for(let b=0;b<o;b++){const x=d[g*o+b];y.push(x),v+=x*s[b]}if(v<0||v>=r/a)throw new Error(`Invalid indices: ${y} does not index into ${n}`);for(let b=0;b<a;b++)u?f.values[v*a+b]+=p[g*a+b]:f.values[v*a+b]=e.rank===0?p[0]:p[g*a+b]}return f}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const U0e=zu(t=>1/(1+Math.exp(-t))),J7=gn(yg,t=>1/(1+Math.exp(-t))),V0e={kernelName:yg,backendName:"cpu",kernelFunc:J7};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ez(t,e,n,r,a){const i=eT(r,e,n),o=be(n),s=rt(r);if(i){const d=tT(e,s);return a==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=a==="string"?sd(t):t,u=Tt(r,a,l),c=Tt(n,a);for(let d=0;d<c.size;++d){const p=c.indexToLoc(d),f=p.map((g,y)=>g+e[y]);c.set(u.get(...f),...p)}return a==="string"?o7(c.values):c.values}function ud(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:o}=r;qe(a,"slice");const[s,l]=nT(a,i,o);Z4(a,s,l);const u=n.data.get(a.dataId).values,c=ez(u,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,c)}const W0e={kernelName:Qx,backendName:"cpu",kernelFunc:ud};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tz(t,e,n,r,a,i,o){const s=e[0],l=i[0],u=new Array(l),c=new Array(s),d=e[1];if(l===0){if(s!==0)throw new Error(q9(s));const v=Or(n,0),b=Or(a,0);return[v,[0,d],b,u,c]}let p=!0,f=0;const g=new Array(l).fill(0);for(let v=0;v<s;++v){const b=t[v*d];if(b<0)throw new Error(K9(v,b));if(b>=l)throw new Error(X9(v,b,l));++g[b],p=p&&b>=f,f=b}let y=!0;for(let v=0;v<l;++v){const b=g[v]===0;u[v]=b,y=y&&!b,g[v]=Math.max(g[v],1),v>0&&(g[v]+=g[v-1])}if(y&&p){const v=t,b=r;for(let x=0;x<s;++x)c[x]=x;return[v,[s,d],b,u,c]}else{const v=g[l-1],b=Or(n,v*d),x=Or(a,v),w=new Array(l).fill(0);for(let S=0;S<s;++S){const C=t[S*d],E=w[C],R=(C===0?0:g[C-1])+E;w[C]++;for(let T=0;T<d;++T)b[R*d+T]=t[S*d+T];x[R]=r[S],c[S]=R}for(let S=0;S<l;++S)if(w[S]===0){const C=S===0?0:g[S-1];b[C*d+0]=S;for(let E=1;E<d;++E)b[C*d+E]=0;x[C]=o}return[b,[v,d],x,u,c]}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nz(t,e,n,r,a){const i=be(r),o=e[0],s=a.length,l=[];let u=1,c=-1;for(let y=0;y<s;++y){const v=a[y];if(v===-1){if(c!==-1)throw new Error(Q9(c,y));c=y,l.push(1)}else{if(v<0)throw new Error(Y9(y,v));u*=v,l.push(v)}}if(c!==-1){if(u<=0)throw new Error(Z9());const y=Math.trunc(i/u);if(u*y!==i)throw new Error(J9(r,l));l[c]=y}if(be(l)!==i)throw new Error(e7(r,l));const d=r.length,p=[];if(d>0){p[d-1]=1;for(let y=d-2;y>=0;--y)p[y]=p[y+1]*r[y+1]}const f=[];if(s>0){f[s-1]=1;for(let y=s-2;y>=0;--y)f[y]=f[y+1]*l[y+1]}const g=Or(n,o*s);for(let y=0;y<o;++y){let v=0;for(let b=0;b<d;++b)v+=t[y*d+b]*p[b];for(let b=0;b<s;++b)g[y*s+b]=Math.trunc(v/f[b]),v%=f[b]}return[g,[o,s],l]}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function LI(t,e,n,r,a,i=!1,o=0){const s=r.length,l=[e[0],t.length/e[0]],u=l[1],c=s>0?a[s-1]+1:0;if(c<0)throw new Error(yI());const d=e.slice();d[0]=c;const p=d.reduce((x,w)=>x*w,1),f=Or(n,p);if(s===0)return c>0&&f.fill(o),[f,d];if(c<=0)throw new Error(yI());let g=0,y=1,v=0,b=a[g];for(;;){let x=0;if(y<s){if(x=a[y],b===x){++y;continue}if(b>=x)throw new Error(t7())}if(b<0||b>=c)throw new Error(n7(b,c));b>v&&f.fill(o,v*u,b*u);for(let w=g;w<y;++w){const S=r[w];if(S<0||S>=l[0])throw new Error(r7(w,r[w],l[0]));for(let C=0;C<u;C++)f[b*u+C]+=t[S*u+C]}if(i)for(let w=0;w<u;w++)f[b*u+w]/=y-g;if(g=y,++y,v=b+1,b=x,y>s)break}return v<c&&f.fill(o,v*u,c*u),[f,d]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const G0e=zu(t=>Math.sqrt(t)),H0e=gn(vg,t=>Math.sqrt(t)),q0e={kernelName:vg,backendName:"cpu",kernelFunc:H0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rz=Cr((t,e)=>{const n=t-e;return n*n}),K0e=Hr(xg,rz),X0e={kernelName:xg,backendName:"cpu",kernelFunc:K0e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function az(t,e,n,r){const a=Tt(t,e.dtype);for(let i=0;i<a.size;i++){const o=a.indexToLoc(i),s=new Array(o.length);for(let l=0;l<s.length;l++)s[l]=o[l]*n[l]+r[l];a.set(e.get(...s),...o)}return a}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Q0e{constructor(e,n,r,a,i,o){this.separator=ks(e),this.nGramWidths=n,this.leftPad=ks(r),this.rightPad=ks(a),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,a,i,o){for(let s=0;s<i;++s){const l=this.getPadWidth(o),u=Math.max(0,l-s),c=Math.max(0,l-(i-(s+1))),d=o-(u+c),p=n+(u>0?0:s-l);let f=0;f+=u*this.leftPad.length;for(let x=0;x<d;++x)f+=e[p+x].length;f+=c*this.rightPad.length;const g=u+c+d-1;f+=g*this.separator.length,r[a+s]=new Uint8Array(f);const y=r[a+s];let v=0;const b=x=>x.forEach(w=>y[v++]=w);for(let x=0;x<u;++x)b(this.leftPad),b(this.separator);for(let x=0;x<d-1;++x)b(e[p+x]),b(this.separator);if(d>0){b(e[p+d-1]);for(let x=0;x<c;++x)b(this.separator),b(this.rightPad)}else{for(let x=0;x<c-1;++x)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(e,n){const r=e.length,a=n.length;if(a>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<a;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=a-1,o=Or("int32",a);if(r===0||a===0){const l=new Array(r);for(let u=0;u<=i;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),o[l]=o[l-1]+c}const s=new Array(o[i]);for(let l=0;l<i;++l){const u=n[l];let c=o[l];if(this.nGramWidths.forEach(d=>{const p=n[l+1]-n[l],f=this.getNumNGrams(p,d);this.createNGrams(e,u,s,c,f,d),c+=f}),this.preserveShort&&c===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const p=d+2*this.padWidth;this.createNGrams(e,u,s,c,1,p)}}return[s,o]}}function iz(t,e,n,r,a,i,o,s){return new Q0e(n,r,a,i,o,s).compute(t,e)}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Y0e(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const s=t.subarray(0,o);(!n||s.length!==0)&&r.push(s),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let a=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(a,i);(!n||o.length!==0)&&r.push(o),a=i+1}}function oz(t,e,n){const r=t.length,a=[];let i=0,o=0;const s=new Array(r);for(let p=0;p<r;++p){const f=a.length;Y0e(t[p],e,n,a);const g=a.length-f;s[p]=g,i+=g,o=Math.max(o,g)}const l=Or("int32",i*2),u=new Array(i),c=[r,o];let d=0;for(let p=0;p<r;++p)for(let f=0;f<s[p];++f)l[d*2]=p,l[d*2+1]=f,u[d]=a[d],++d;return[l,u,c]}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sz(t,e){const n=Or("int32",t.length);for(let r=0;r<t.length;++r)n[r]=NA(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lz=Cr((t,e)=>t-e),Z0e=PI((t,e,n,r)=>({real:t-n,imag:e-r})),zI=Hr(wg,lz,Z0e),J0e={kernelName:wg,backendName:"cpu",kernelFunc:zI};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uz(t,e){const n=new Array(t.rank);for(let a=0;a<n.length;a++)n[a]=t.shape[a]*e[a];const r=Tt(n,t.dtype);for(let a=0;a<r.values.length;++a){const i=r.indexToLoc(a),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const s=t.locToIndex(o);r.values[a]=t.values[s]}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const n0=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function cz(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const s=r-n+1,l=e-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(s-c)/s)*Math.sign(l-s/2),p=Math.max(n,Math.floor(e-l*c/s+d)),f=Math.min(r,Math.floor(e+(s-l)*c/s+d));cz(t,e,p,f)}const a=t[e];let i=n,o=r;for(hl(t,n,e),n0(t[r],a)>0&&hl(t,n,r);i<o;){for(hl(t,i,o),i++,o--;n0(t[i],a)<0;)i=i+1;for(;n0(t[o],a)>0;)o=o-1}n0(t[n],a)===0?hl(t,n,o):(o=o+1,hl(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function dz(t,e,n,r,a){const i=e[e.length-1],[o,s]=[t.length/i,i],l=$r(n,o*r),u=$r("int32",o*r);for(let d=0;d<o;d++){const p=d*s,f=t.subarray(p,p+s);let g=new Array(f.length);f.forEach((x,w)=>g[w]={value:x,index:w}),r<g.length&&(cz(g,r),g=g.slice(0,r)),a&&g.sort(n0);const y=d*r,v=l.subarray(y,y+r),b=u.subarray(y,y+r);for(let x=0;x<r;x++)v[x]=g[x].value,b[x]=g[x].index}const c=e.slice();return c[c.length-1]=r,[Tt(c,n,l),Tt(c,"int32",u)]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pz(t,e,n,r){const a=Zt(e,n)[0],i=[1,n[0],1];for(let g=0;g<a;g++)i[0]*=n[g];i[1]=n[a];for(let g=a+1;g<n.length;g++)i[2]*=n[g];const o={},s=new Int32Array(n[a]),l=new Mr(i,r,t),u=[],c=i[0]===1&&i[2]===1;for(let g=0;g<n[a];g++){let y;if(c)y=t[g].toString();else{const v=[];for(let b=0;b<i[0];b++)for(let x=0;x<i[2];x++)v.push(l.get(b,g,x));y=v.join(",")}if(o[y]!==void 0)s[g]=o[y];else{const v=Object.keys(o).length;o[y]=v,s[g]=v,u.push(g)}}const d=i.slice();d[1]=Object.keys(o).length;const p=new Mr(d,r);u.forEach((g,y)=>{for(let v=0;v<i[0];v++)for(let b=0;b<i[2];b++)p.set(l.get(v,g,b),v,y,b)});const f=n.slice();return f[a]=d[1],{outputValues:p.values,outputShape:f,indices:s}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const e1e=Object.freeze(Object.defineProperty({__proto__:null,addImpl:k7,bincountImpl:FI,bincountReduceImpl:S7,castImpl:w7,ceilImpl:C7,concatImpl:E7,equalImpl:N7,expImpl:I7,expm1Impl:R7,floorImpl:$7,gatherNdImpl:O7,gatherV2Impl:M7,greaterEqualImpl:F7,greaterImpl:P7,lessEqualImpl:D7,lessImpl:A7,linSpaceImpl:L7,logImpl:z7,maxImpl:B7,maximumImpl:j7,minimumImpl:U7,multiplyImpl:AI,negImpl:V7,notEqualImpl:W7,prodImpl:G7,raggedGatherImpl:q7,raggedTensorToTensorImpl:Q7,rangeImpl:Y7,rsqrtImpl:Z7,scatterImpl:ih,sigmoidImpl:U0e,simpleAbsImpl:x7,sliceImpl:ez,sparseFillEmptyRowsImpl:tz,sparseReshapeImpl:nz,sparseSegmentReductionImpl:LI,sqrtImpl:G0e,squaredDifferenceImpl:rz,stridedSliceImpl:az,stringNGramsImpl:iz,stringSplitImpl:oz,stringToHashBucketFastImpl:sz,subImpl:lz,tileImpl:uz,topKImpl:dz,transposeImpl:DI,uniqueImpl:pz},Symbol.toStringTag,{value:"Module"}));/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/H4("cpu",()=>new Y2,1);/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hz=gn(Am,t=>t>=0?t:Math.exp(t)-1),t1e={kernelName:Am,backendName:"cpu",kernelFunc:hz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r;qe([a],"leakyRelu");const o=be(a.shape),s=n.data.get(a.dataId).values,l=$r("float32",o);for(let u=0;u<s.length;u++)l[u]=s[u]<0?i*s[u]:s[u];return n.makeTensorInfo(a.shape,"float32",l)}const n1e={kernelName:bx,backendName:"cpu",kernelFunc:fz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const r1e=Cr((t,e)=>t<0?e*t:t);function mz(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e;qe([r,a],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,[s,l]=r1e(r.shape,a.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",s)}const a1e={kernelName:Dx,backendName:"cpu",kernelFunc:mz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gz=gn(ug,t=>Math.max(0,t)),i1e={kernelName:ug,backendName:"cpu",kernelFunc:gz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yz=gn(cg,t=>Math.min(Math.max(0,t),6)),o1e={kernelName:cg,backendName:"cpu",kernelFunc:yz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function l2(t,e,n,r,a){if(n==="linear")return $s({inputs:{x:e},backend:t});if(n==="relu")return gz({inputs:{x:e},backend:t});if(n==="elu")return hz({inputs:{x:e},backend:t});if(n==="relu6")return yz({inputs:{x:e},backend:t});if(n==="prelu")return mz({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return fz({inputs:{x:e},backend:t,attrs:{alpha:a}});if(n==="sigmoid")return J7({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $n(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,o=be(a.shape),s=QN(i,o),l=be(s);U(o===l,()=>`The new shape (${s}) has ${l} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);const u=n.data.get(a.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}const s1e={kernelName:Vx,backendName:"cpu",kernelFunc:$n};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bz(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:o,transposeB:s}=r;qe([a,i],"matMul");const l=a.shape.length,u=i.shape.length,c=o?a.shape[l-2]:a.shape[l-1],d=s?i.shape[u-1]:i.shape[u-2],p=o?a.shape[l-1]:a.shape[l-2],f=s?i.shape[u-2]:i.shape[u-1],g=a.shape.slice(0,-2),y=i.shape.slice(0,-2),v=be(g),b=be(y),x=Ut(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,f]);U(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${a.shape} and ${i.shape} and transposeA=${o} and transposeB=${s} must match.`);const w=o?[v,c,p]:[v,p,c],S=s?[b,f,d]:[b,d,f],C=$n({inputs:{x:a},backend:n,attrs:{shape:w}}),E=$n({inputs:{x:i},backend:n,attrs:{shape:S}}),R=o?C.shape[1]:C.shape[2],T=o?C.shape[2]:C.shape[1],$=s?E.shape[1]:E.shape[2],P=Math.max(v,b),D=n.data.get(C.dataId).values,B=n.data.get(E.dataId).values,z=rt(C.shape),q=rt(E.shape),[Y,Z,H]=o?[z[0],1,z[1]]:[z[0],z[1],1],[L,Q,J]=s?[1,q[1],q[0]]:[q[1],1,q[0]],te=T*$,oe=Tt([P,T,$],C.dtype),he=oe.values,ae=n.blockSize;for(let de=0;de<P;de++)for(let ke=0;ke<T;ke+=ae)for(let K=0;K<$;K+=ae)for(let se=0;se<R;se+=ae){const pe=Math.min(ke+ae,T),Ne=Math.min(K+ae,$),Se=Math.min(se+ae,R);for(let Te=ke;Te<pe;Te++)for(let Pe=K;Pe<Ne;Pe++){let We=0;for(let $e=se;$e<Se;$e++){const lt=Math.min(de,v-1)*Y,Ze=Math.min(de,b-1)*J,Je=D[lt+Te*Z+$e*H],Ve=B[$e*L+Pe*Q+Ze];We+=Je*Ve}he[de*te+(Te*$+Pe)]+=We}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(E),n.makeTensorInfo(x,oe.dtype,oe.values)}const l1e={kernelName:Bv,backendName:"cpu",kernelFunc:bz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function u1e(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;let p,f,g;const y=[];p=bz({inputs:{a,b:i},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(f=rh({inputs:{a:p,b:o},backend:n}),y.push(p),p=f),c&&(g=l2(n,p,c,s,d),y.push(p),p=g);for(const v of y)n.disposeIntermediateTensorInfo(v);return p}const c1e={kernelName:Ng,backendName:"cpu",kernelFunc:u1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const d1e=gn(Sm,t=>Math.acos(t)),p1e={kernelName:Sm,backendName:"cpu",kernelFunc:d1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const h1e=gn(Cm,t=>Math.acosh(t)),f1e={kernelName:Cm,backendName:"cpu",kernelFunc:h1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function m1e(t){const{inputs:e,backend:n}=t,r=e;qe(e,"addN");const a=r.map(s=>n.data.get(s.dataId).values),i=Tt(r[0].shape,r[0].dtype),o=i.values;for(let s=0;s<r.length;s++){const l=a[s];for(let u=0;u<o.length;u++)o[u]+=l[u]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const g1e={kernelName:Mv,backendName:"cpu",kernelFunc:m1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;qe(a,"all");const s=Zt(i,a.shape);let l=s;const u=mr(l,a.shape.length);let c=a;u!=null&&(c=si({inputs:{x:a},backend:n,attrs:{perm:u}}),l=gr(l.length,a.shape.length)),ia("all",l,c.shape.length);const[d,p]=aa(c.shape,l),f=be(p),g=ra(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<g.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];w=w&&C}g[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,g);if(o){const b=Pr(d,s),x=$n({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const b1e={kernelName:Pv,backendName:"cpu",kernelFunc:y1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function v1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;qe(a,"any");const s=Zt(i,a.shape);let l=s;const u=mr(l,a.shape.length);let c=a;u!=null&&(c=si({inputs:{x:a},backend:n,attrs:{perm:u}}),l=gr(l.length,a.shape.length)),ia("any",l,c.shape.length);const[d,p]=aa(c.shape,l),f=be(p),g=ra(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<g.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];w=w||C}g[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,g);if(o){const b=Pr(d,s),x=$n({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const x1e={kernelName:Fv,backendName:"cpu",kernelFunc:v1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;qe(a,"argMax");let o=Zt(i,a.shape);const s=mr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=si({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=gr(o.length,l.shape.length)),o=[o[0]],ia("argMax",o,l.shape.length);const[c,d]=aa(l.shape,o),p=be(c),f=ra(p,"int32"),g=be(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const b=v*g;let x=y[b],w=0;for(let S=0;S<g;++S){const C=y[b+S];C>x&&(x=C,w=S)}f[v]=w}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",f)}const k1e={kernelName:Av,backendName:"cpu",kernelFunc:w1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function S1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;qe(a,"argMin");let o=Zt(i,a.shape);const s=mr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=si({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=gr(o.length,l.shape.length)),o=[o[0]],ia("argMin",o,l.shape.length);const[c,d]=aa(l.shape,o),p=be(c),f=ra(p,"int32"),g=be(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const b=v*g;let x=y[b],w=0;for(let S=0;S<g;++S){const C=y[b+S];C<x&&(x=C,w=S)}f[v]=w}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(c,"int32",f)}const C1e={kernelName:Dv,backendName:"cpu",kernelFunc:S1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const E1e=gn(Em,t=>Math.asin(t)),N1e={kernelName:Em,backendName:"cpu",kernelFunc:E1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const T1e=gn(Nm,t=>Math.asinh(t)),I1e={kernelName:Nm,backendName:"cpu",kernelFunc:T1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _1e=gn(Tm,t=>Math.atan(t)),R1e={kernelName:Tm,backendName:"cpu",kernelFunc:_1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $1e=Cr((t,e)=>Math.atan2(t,e)),O1e=Hr(_m,$1e),M1e={kernelName:_m,backendName:"cpu",kernelFunc:O1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const P1e=gn(Im,t=>Math.atanh(t)),F1e={kernelName:Im,backendName:"cpu",kernelFunc:P1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function BI(t,e,n,r,a,i){const o=a.strideHeight,s=a.strideWidth,l=a.dilationHeight,u=a.dilationWidth,c=a.effectiveFilterHeight,d=a.effectiveFilterWidth,p=a.padInfo.top,f=a.padInfo.left,g=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=Tt(a.outShape,n),v=y.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],x=a.outShape[2]*a.outShape[3],w=a.outShape[3];for(let S=0;S<a.batchSize;++S){const C=S*b,E=S*r[0];for(let R=0;R<a.inChannels;++R)for(let T=0;T<a.outHeight;++T){const $=T*o-p,P=Math.max(0,$),D=Math.min(a.inHeight,c+$),B=C+T*x;for(let z=0;z<a.outWidth;++z){const q=z*s-f,Y=Math.max(0,q),Z=Math.min(a.inWidth,d+q);let H=g,L=0,Q=0;for(let te=P;te<D;te+=l){const oe=E+te*r[1];for(let he=Y;he<Z;he+=u){const ae=oe+he*r[2],de=t[ae+R];i==="max"&&de>H?H=de:i==="avg"&&(L+=de,Q++)}if(isNaN(H))break}const J=B+z*w+R;v[J]=i==="avg"?L/Q:H}}}return y}function vz(t,e,n,r,a=!1,i=!1){const o=Tt(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=r.padInfo.top,g=r.padInfo.left,y=Tt(e,n,t);for(let v=0;v<r.batchSize;++v)for(let b=0;b<r.inChannels;++b)for(let x=0;x<r.outHeight;++x){const w=x*s-f;let S=w;for(;S<0;)S+=u;const C=Math.min(r.inHeight,d+w);for(let E=0;E<r.outWidth;++E){const R=E*l-g;let T=R;for(;T<0;)T+=c;const $=Math.min(r.inWidth,p+R);let P=Number.NEGATIVE_INFINITY,D=-1;for(let B=S;B<C;B+=u){const z=B-w;for(let q=T;q<$;q+=c){const Y=q-R,Z=y.get(v,B,q,b);Z>P&&(P=Z,a?D=i?((v*r.inHeight+B)*r.inWidth+q)*r.inChannels+b:(B*r.inWidth+q)*r.inChannels+b:D=z*p+Y)}}o.set(D,v,x,E,b)}}return o}function xz(t,e,n,r,a,i){const o=a.strideDepth,s=a.strideHeight,l=a.strideWidth,u=a.dilationDepth,c=a.dilationHeight,d=a.dilationWidth,p=a.effectiveFilterDepth,f=a.effectiveFilterHeight,g=a.effectiveFilterWidth,y=a.padInfo.front,v=a.padInfo.top,b=a.padInfo.left,x=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=Tt(a.outShape,n),S=w.values,C=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],E=a.outShape[2]*a.outShape[3]*a.outShape[4],R=a.outShape[3]*a.outShape[4],T=a.outShape[4];for(let $=0;$<a.batchSize;++$){const P=$*C,D=$*r[0];for(let B=0;B<a.inChannels;++B)for(let z=0;z<a.outDepth;++z){const q=z*o-y;let Y=q;for(;Y<0;)Y+=u;const Z=Math.min(a.inDepth,p+q),H=P+z*E;for(let L=0;L<a.outHeight;++L){const Q=L*s-v;let J=Q;for(;J<0;)J+=c;const te=Math.min(a.inHeight,f+Q),oe=H+L*R;for(let he=0;he<a.outWidth;++he){const ae=he*l-b;let de=ae;for(;de<0;)de+=d;const ke=Math.min(a.inWidth,g+ae),K=oe+he*T;let se=x,pe=0,Ne=0;for(let Te=Y;Te<Z;Te+=u){const Pe=D+Te*r[1];for(let We=J;We<te;We+=c){const $e=Pe+We*r[2];for(let lt=de;lt<ke;lt+=d){const Ze=$e+lt*r[3],Je=t[Ze+B];if(i==="max"&&Je>se?se=Je:i==="avg"&&(pe+=Je,Ne++),isNaN(se))break}if(isNaN(se))break}if(isNaN(se))break}const Se=K+B;S[Se]=i==="avg"?pe/Ne:se}}}}return w}function A1e(t,e){const n=Tt(e.outShape,"int32"),r=e.strideDepth,a=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.front,f=e.padInfo.top,g=e.padInfo.left;for(let y=0;y<e.batchSize;++y)for(let v=0;v<e.inChannels;++v)for(let b=0;b<e.outDepth;++b){const x=b*r-p;let w=x;for(;w<0;)w+=o;const S=Math.min(e.inDepth,u+x);for(let C=0;C<e.outHeight;++C){const E=C*a-f;let R=E;for(;R<0;)R+=s;const T=Math.min(e.inHeight,c+E);for(let $=0;$<e.outWidth;++$){const P=$*i-g;let D=P;for(;D<0;)D+=l;const B=Math.min(e.inWidth,d+P);let z=Number.NEGATIVE_INFINITY,q=-1;for(let Y=w;Y<S;Y+=o){const Z=Y-x;for(let H=R;H<T;H+=s){const L=H-E;for(let Q=D;Q<B;Q+=l){const J=Q-P,te=t.get(y,Y,H,Q,v);te>=z&&(z=te,q=Z*c*d+L*c+J)}}}n.set(q,y,b,C,$,v)}}}return n}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function D1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;qe(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;U(ka(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ho(a.shape,i,o,u,s,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Sn(c.inShape,c.outShape))d=$s({inputs:{x:a},backend:n});else{const p=n.data.get(a.dataId).values,f=rt(a.shape),g=BI(p,a.shape,a.dtype,f,c,"avg");d=n.makeTensorInfo(c.outShape,a.dtype,g.values)}return d}const L1e={kernelName:Lv,backendName:"cpu",kernelFunc:D1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function z1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;qe(a,"avgPool3d");const c=kl(a.shape,i,o,1,s,l,u),d=n.data.get(a.dataId).values,p=xz(d,a.shape,a.dtype,rt(a.shape),c,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const B1e={kernelName:zv,backendName:"cpu",kernelFunc:z1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function j1e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;qe([a,i],"avgPool3DGrad");const c=kl(i.shape,o,s,1,l,u),d=c.strideDepth,p=c.strideHeight,f=c.strideWidth,g=c.filterDepth,y=c.filterHeight,v=c.filterWidth,b=c.dilationDepth,x=c.dilationHeight,w=c.dilationWidth,S=c.effectiveFilterDepth,C=c.effectiveFilterHeight,E=c.effectiveFilterWidth,R=S-1-c.padInfo.front,T=E-1-c.padInfo.left,$=C-1-c.padInfo.top,P=Tt(i.shape,"float32"),D=1/(g*y*v),B=n.bufferSync(a);for(let z=0;z<c.batchSize;++z)for(let q=0;q<c.inChannels;++q)for(let Y=0;Y<c.inDepth;++Y)for(let Z=0;Z<c.inHeight;++Z)for(let H=0;H<c.inWidth;++H){const L=Y-R,Q=Z-$,J=H-T;let te=0;for(let oe=0;oe<S;oe+=b){const he=(L+oe)/d;if(!(he<0||he>=c.outDepth||Math.floor(he)!==he))for(let ae=0;ae<C;ae+=x){const de=(Q+ae)/p;if(!(de<0||de>=c.outHeight||Math.floor(de)!==de))for(let ke=0;ke<E;ke+=w){const K=(J+ke)/f;if(K<0||K>=c.outWidth||Math.floor(K)!==K)continue;const se=B.get(z,he,de,K,q);te+=se}}}P.set(te*D,z,Y,Z,H,q)}return n.makeTensorInfo(P.shape,P.dtype,P.values)}const U1e={kernelName:a4,backendName:"cpu",kernelFunc:j1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function V1e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i;qe([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=ho(o.shape,s,l,1,u),d=c.strideHeight,p=c.strideWidth,f=c.filterHeight,g=c.filterWidth,y=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=x-1-c.padInfo.left,S=b-1-c.padInfo.top,C=Tt(o.shape,"float32"),E=1/(f*g),R=n.data.get(a.dataId).values,T=Tt(a.shape,"float32",R);for(let $=0;$<c.batchSize;++$)for(let P=0;P<c.inChannels;++P)for(let D=0;D<c.inHeight;++D)for(let B=0;B<c.inWidth;++B){const z=D-S,q=B-w;let Y=0;for(let Z=0;Z<b;Z+=y){const H=(z+Z)/d;if(!(H<0||H>=c.outHeight||Math.floor(H)!==H))for(let L=0;L<x;L+=v){const Q=(q+L)/p;if(Q<0||Q>=c.outWidth||Math.floor(Q)!==Q)continue;const J=T.get($,H,Q,P);Y+=J}}C.set(Y*E,$,D,B,P)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const W1e={kernelName:r4,backendName:"cpu",kernelFunc:V1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function G1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,scale:i,offset:o,mean:s,variance:l}=e;U(s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),qe([a,s,l,i,o],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,p=n.data.get(l.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),g=o?n.data.get(o.dataId).values:new Float32Array([0]),y=new Float32Array(c.length),v=g.length,b=f.length,x=p.length,w=d.length;let S=0,C=0,E=0,R=0;for(let T=0;T<c.length;++T)y[T]=g[S++]+(c[T]-d[C++])*f[E++]/Math.sqrt(p[R++]+u),S>=v&&(S=0),C>=w&&(C=0),E>=b&&(E=0),R>=x&&(R=0);return n.makeTensorInfo(a.shape,a.dtype,y)}const H1e={kernelName:hx,backendName:"cpu",kernelFunc:G1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function q1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:o}=r;qe([a],"batchToSpaceND");const s=i.reduce((b,x)=>b*x),l=Zg(a.shape,i,s),u=Jg(l.length,i.length),c=e0(a.shape,i,s),d=JT(o,i.length),p=eI(c,o,i.length),f=$n({inputs:{x:a},backend:n,attrs:{shape:l}}),g=si({inputs:{x:f},backend:n,attrs:{perm:u}}),y=$n({inputs:{x:g},backend:n,attrs:{shape:c}}),v=ud({inputs:{x:y},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}const K1e={kernelName:jv,backendName:"cpu",kernelFunc:q1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function X1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o}=r,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=FI(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const Q1e={kernelName:Uv,backendName:"cpu",kernelFunc:X1e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Y1e(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=Ut(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const Z1e={kernelName:Vv,backendName:"cpu",kernelFunc:Y1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const J1e=gn(Om,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),eye={kernelName:Om,backendName:"cpu",kernelFunc:J1e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const tye=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(be(e.shape)),a=n.data.get(e.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<s.length;u++){const c=s[u],d=l[u];r[u]=Math.hypot(c,d)}return n.makeOutput(r,e.shape,"float32")},nye={kernelName:Gv,backendName:"cpu",kernelFunc:tye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oh(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const rye={kernelName:yx,backendName:"cpu",kernelFunc:oh};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function sh(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=Zt(a,e[0].shape)[0],o=e.map(y=>y.shape);QT(o,i);let s=_s(e.map(y=>y.shape),i);if(be(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(y=>be(y.shape)>0);if(l.length===1)return $s({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const y=l.map(S=>ld({inputs:{input:S},backend:n})),v=l.map(S=>oh({inputs:{input:S},backend:n})),b=sh({inputs:y,backend:n,attrs:{axis:i}}),x=sh({inputs:v,backend:n,attrs:{axis:i}}),w=Ni({inputs:{real:b,imag:x},backend:n});return y.forEach(S=>n.disposeIntermediateTensorInfo(S)),v.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),w}const u=l.map(y=>{const v=[-1,be(y.shape.slice(i))];return $n({inputs:{x:y},backend:n,attrs:{shape:v}})}),c=u.map(y=>({vals:n.data.get(y.dataId).values,shape:y.shape}));s=_s(u.map(y=>y.shape),1);const d=u[0].shape[0]===1,p=E7(c,s,e[0].dtype,d),f=_s(l.map(y=>y.shape),i),g=n.makeTensorInfo(f,e[0].dtype,p);return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const aye={kernelName:Hv,backendName:"cpu",kernelFunc:sh};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r;qe([a,i],"conv2d");const d=Sl(l),p=Gr(a.shape,i.shape,o,u,s,c,!1,d),f=p.filterHeight,g=p.filterWidth,y=p.dilationHeight,v=p.dilationWidth,b=p.padInfo.left,x=p.padInfo.top,w=p.dataFormat==="channelsLast",S=new Mr(p.outShape,a.dtype),C=rt(a.shape),E=rt(i.shape),R=C[0],T=w?C[1]:C[2],$=w?C[2]:1,P=w?1:C[1],D=S.strides[0],B=w?S.strides[1]:S.strides[2],z=w?S.strides[2]:1,q=w?1:S.strides[1],Y=n.data.get(a.dataId).values,Z=n.data.get(i.dataId).values,H=S.values;for(let L=0;L<p.batchSize;++L){const Q=L*R,J=L*D;for(let te=0;te<p.outHeight;++te){const oe=J+te*B,he=te*p.strideHeight-x;for(let ae=0;ae<f;++ae){const de=he+ae*y;if(de<0||de>=p.inHeight)continue;const ke=ae*E[0],K=Q+de*T;for(let se=0;se<p.outWidth;++se){const pe=oe+se*z,Ne=se*p.strideWidth-b;for(let Se=0;Se<g;++Se){const Te=Ne+Se*v;if(Te<0||Te>=p.inWidth)continue;const Pe=ke+Se*E[1],We=K+Te*$;let $e=Pe;for(let lt=0;lt<p.inChannels;++lt){const Ze=Y[We+lt*P];for(let Je=0;Je<p.outChannels;++Je)H[pe+Je*q]+=Ze*Z[$e+Je];$e+=p.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,H)}const iye={kernelName:qv,backendName:"cpu",kernelFunc:wz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;qe([a,i],"conv2dBackpropFilter");const d=Sl(l),p=Gr(a.shape,c,o,1,s,u,!1,d),{strideHeight:f,strideWidth:g,filterHeight:y,filterWidth:v}=p,b=p.dataFormat==="channelsLast",x=new Mr(p.filterShape,"float32"),w=p.padInfo.left,S=p.padInfo.top,C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,R=new Mr(a.shape,a.dtype,C),T=new Mr(i.shape,i.dtype,E);for(let $=0;$<y;++$){const P=Math.max(0,Math.ceil((S-$)/f)),D=Math.min(p.outHeight,(p.inHeight+S-$)/f);for(let B=0;B<v;++B){const z=Math.max(0,Math.ceil((w-B)/g)),q=Math.min(p.outWidth,(p.inWidth+w-B)/g);for(let Y=0;Y<p.inChannels;++Y)for(let Z=0;Z<p.outChannels;++Z){let H=0;for(let L=0;L<p.batchSize;++L)for(let Q=P;Q<D;++Q){const J=$+Q*f-S;for(let te=z;te<q;++te){const oe=B+te*g-w;b?H+=R.get(L,J,oe,Y)*T.get(L,Q,te,Z):H+=R.get(L,Y,J,oe)*T.get(L,Z,Q,te)}}x.set(H,$,B,Y,Z)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const sye={kernelName:Kv,backendName:"cpu",kernelFunc:oye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function lye(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r;qe([a,i],"conv2dBackpropInput");const d=rt(i.shape),p=rt(a.shape);let f=Sl(u);const g=Gr(o,i.shape,s,1,l,c,!1,f),y=new Mr(g.inShape,"float32"),v=y.values,b=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,[w,S,C]=d,{batchSize:E,filterHeight:R,filterWidth:T,inChannels:$,inHeight:P,inWidth:D,outChannels:B,outHeight:z,outWidth:q,strideHeight:Y,strideWidth:Z}=g;f=g.dataFormat;const H=R-1-g.padInfo.top,L=T-1-g.padInfo.left,Q=f==="channelsLast",J=y.strides[0],te=Q?y.strides[1]:y.strides[2],oe=Q?y.strides[2]:1,he=Q?1:y.strides[1],ae=p[0],de=Q?p[1]:p[2],ke=Q?p[2]:1,K=Q?1:p[1];for(let se=0;se<E;++se)for(let pe=0;pe<$;++pe)for(let Ne=0;Ne<P;++Ne){const Se=Ne-H,Te=Math.max(0,Math.ceil(Se/Y)),Pe=Math.min(z,(R+Se)/Y);for(let We=0;We<D;++We){const $e=We-L,lt=Math.max(0,Math.ceil($e/Z)),Ze=Math.min(q,(T+$e)/Z);let Je=0;for(let Vt=Te;Vt<Pe;++Vt){const $t=Vt*Y-Se;for(let Wt=lt;Wt<Ze;++Wt){const Gt=Wt*Z-$e,Ot=ae*se+de*Vt+ke*Wt,wt=w*(R-1-$t)+S*(T-1-Gt)+C*pe;for(let ln=0;ln<B;++ln){const hn=b[Ot+K*ln],yr=x[wt+ln];Je+=hn*yr}}}const Ve=J*se+te*Ne+oe*We+he*pe;v[Ve]=Je}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const uye={kernelName:Xv,backendName:"cpu",kernelFunc:lye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function cye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r;qe([a,i],"conv3d");const u=Ru(a.shape,i.shape,o,l,s),{filterDepth:c,filterHeight:d,filterWidth:p,dilationDepth:f,dilationHeight:g,dilationWidth:y,padInfo:v}=u,b=v.front,x=v.left,w=v.top,S=new Mr(u.outShape,a.dtype),C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,R=S.values,T=rt(a.shape),$=rt(i.shape);for(let P=0;P<u.batchSize;++P){const D=P*T[0],B=P*S.strides[0];for(let z=0;z<u.outDepth;++z){const q=B+z*S.strides[1],Y=z*u.strideDepth-b;for(let Z=0;Z<c;++Z){const H=Y+Z*f;if(H<0||H>=u.inDepth)continue;const L=Z*$[0],Q=D+H*T[1];for(let J=0;J<u.outHeight;++J){const te=q+J*S.strides[2],oe=J*u.strideHeight-w;for(let he=0;he<d;++he){const ae=oe+he*g;if(ae<0||ae>=u.inHeight)continue;const de=L+he*$[1],ke=Q+ae*T[2];for(let K=0;K<u.outWidth;++K){const se=te+K*u.outChannels,pe=K*u.strideWidth-x;for(let Ne=0;Ne<p;++Ne){const Se=pe+Ne*y;if(Se<0||Se>=u.inWidth)continue;const Te=de+Ne*$[2],Pe=ke+Se*u.inChannels;let We=Te;for(let $e=0;$e<u.inChannels;++$e){const lt=C[Pe+$e];for(let Ze=0;Ze<u.outChannels;++Ze)R[se+Ze]+=lt*E[We+Ze];We+=u.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const dye={kernelName:Qv,backendName:"cpu",kernelFunc:cye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,filterShape:l}=r;qe([a,i],"conv3dBackpropFilterV2");const u=rt(a.shape),c=rt(i.shape),d=Ru(a.shape,l,o,1,s),p=d.strideDepth,f=d.strideHeight,g=d.strideWidth,y=d.filterDepth,v=d.filterHeight,b=d.filterWidth,x=new Mr(d.filterShape,"float32"),w=x.values,[S,C,E,R]=x.strides,T=n.data.get(i.dataId).values,[$,P,D,B]=c,z=n.data.get(a.dataId).values,[q,Y,Z,H]=u,L=d.padInfo.front,Q=d.padInfo.left,J=d.padInfo.top;for(let te=0;te<y;++te){const oe=Math.max(0,Math.ceil((L-te)/p)),he=Math.min(d.outDepth,(d.inDepth+L-te)/p),ae=te*S;for(let de=0;de<v;++de){const ke=Math.max(0,Math.ceil((J-de)/f)),K=Math.min(d.outHeight,(d.inHeight+J-de)/f),se=de*C+ae;for(let pe=0;pe<b;++pe){const Ne=Math.max(0,Math.ceil((Q-pe)/g)),Se=Math.min(d.outWidth,(d.inWidth+Q-pe)/g),Te=pe*E+se;for(let Pe=0;Pe<d.inChannels;++Pe){const We=Pe*R+Te;for(let $e=0;$e<d.outChannels;++$e){let lt=0;for(let Ze=0;Ze<d.batchSize;++Ze){const Je=Ze*q,Ve=Ze*$;for(let Vt=oe;Vt<he;++Vt){const $t=(te+Vt*p-L)*Y+Je,Wt=Vt*P+Ve;for(let Gt=ke;Gt<K;++Gt){const Ot=(de+Gt*f-J)*Z+$t,wt=Gt*D+Wt;for(let ln=Ne;ln<Se;++ln){const hn=(pe+ln*g-Q)*H+Ot,yr=ln*B+wt;lt+=z[hn+Pe]*T[yr+$e]}}}}w[We+$e]=lt}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const hye={kernelName:i4,backendName:"cpu",kernelFunc:pye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fye(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:o,strides:s,inputShape:l}=r;qe([a],"conv3dBackpropInputV2");const u=rt(a.shape),c=rt(i.shape),d=Ru(l,i.shape,s,1,o),p=new Mr(d.inShape,"float32"),f=p.values,[g,y,v,b]=p.strides,x=n.data.get(a.dataId).values,[w,S,C,E]=u,R=n.data.get(i.dataId).values,[T,$,P,D]=c,{batchSize:B,filterDepth:z,filterHeight:q,filterWidth:Y,inChannels:Z,inDepth:H,inHeight:L,inWidth:Q,outChannels:J,outDepth:te,outHeight:oe,outWidth:he,strideDepth:ae,strideHeight:de,strideWidth:ke}=d,K=z-1-d.padInfo.front,se=q-1-d.padInfo.top,pe=Y-1-d.padInfo.left;for(let Ne=0;Ne<B;++Ne)for(let Se=0;Se<Z;++Se)for(let Te=0;Te<H;++Te){const Pe=Te-K,We=Math.max(0,Math.ceil(Pe/ae)),$e=Math.min(te,(z+Pe)/ae);for(let lt=0;lt<L;++lt){const Ze=lt-se,Je=Math.max(0,Math.ceil(Ze/de)),Ve=Math.min(oe,(q+Ze)/de);for(let Vt=0;Vt<Q;++Vt){const $t=Vt-pe,Wt=Math.max(0,Math.ceil($t/ke)),Gt=Math.min(he,(Y+$t)/ke);let Ot=0;for(let wt=We;wt<$e;++wt){const ln=wt*ae-Pe;for(let hn=Je;hn<Ve;++hn){const yr=hn*de-Ze;for(let yn=Wt;yn<Gt;++yn){const Zn=yn*ke-$t,li=w*Ne+S*wt+C*hn+E*yn,Xa=T*(z-1-ln)+$*(q-1-yr)+P*(Y-1-Zn)+D*Se;for(let un=0;un<J;++un){const la=x[li+un],Qa=R[Xa+un];Ot+=la*Qa}}}}f[g*Ne+y*Te+v*lt+b*Vt+Se]=Ot}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const mye={kernelName:Yv,backendName:"cpu",kernelFunc:fye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gye=gn(Mm,t=>Math.cos(t)),yye={kernelName:Mm,backendName:"cpu",kernelFunc:gye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const bye=gn(Pm,t=>Math.cosh(t)),vye={kernelName:Pm,backendName:"cpu",kernelFunc:bye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xye(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,[c,d,p,f]=a.shape,g=i.shape[0],[y,v]=s,b=Tt([g,y,v,f],"float32"),x=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,S=n.data.get(a.dataId).values,C=rt(a.shape),E=rt(b.shape);for(let R=0;R<g;R++){const T=R*4,$=x[T],P=x[T+1],D=x[T+2],B=x[T+3],z=w[R];if(z>=c)continue;const q=y>1?(D-$)*(d-1)/(y-1):0,Y=v>1?(B-P)*(p-1)/(v-1):0;for(let Z=0;Z<y;Z++){const H=y>1?$*(d-1)+Z*q:.5*($+D)*(d-1);if(H<0||H>d-1){for(let L=0;L<v;L++)for(let Q=0;Q<f;Q++){const J=Q+L*E[2]+Z*E[1]+R*E[0];b.values[J]=u}continue}if(l==="bilinear"){const L=Math.floor(H),Q=Math.ceil(H),J=H-L;for(let te=0;te<v;te++){const oe=v>1?P*(p-1)+te*Y:.5*(P+B)*(p-1);if(oe<0||oe>p-1){for(let ke=0;ke<f;ke++){const K=ke+te*E[2]+Z*E[1]+R*E[0];b.values[K]=u}continue}const he=Math.floor(oe),ae=Math.ceil(oe),de=oe-he;for(let ke=0;ke<f;ke++){let K=ke+he*C[2]+L*C[1]+z*C[0];const se=S[K];K=ke+ae*C[2]+L*C[1]+z*C[0];const pe=S[K];K=ke+he*C[2]+Q*C[1]+z*C[0];const Ne=S[K];K=ke+ae*C[2]+Q*C[1]+z*C[0];const Se=S[K],Te=se+(pe-se)*de,Pe=Ne+(Se-Ne)*de;K=ke+te*E[2]+Z*E[1]+R*E[0],b.values[K]=Te+(Pe-Te)*J}}}else for(let L=0;L<v;++L){const Q=v>1?P*(p-1)+L*Y:.5*(P+B)*(p-1);if(Q<0||Q>p-1){for(let oe=0;oe<f;oe++){const he=oe+L*E[2]+Z*E[1]+R*E[0];b.values[he]=u}continue}const J=Math.round(Q),te=Math.round(H);for(let oe=0;oe<f;oe++){const he=oe+J*C[2]+te*C[1]+z*C[0],ae=oe+L*E[2]+Z*E[1]+R*E[0];b.values[ae]=S[he]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const wye={kernelName:ex,backendName:"cpu",kernelFunc:xye};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;qe(a,"cumprod");const l=mr([i],a.shape.length);let u=a;l!=null&&(u=si({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=gr(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=oi(u.dtype,"int32"),p=$v(be(u.shape),d),f=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],y=s?(b,x)=>b+g-x-1:(b,x)=>b+x;for(let b=0;b<f.length;b+=g)for(let x=0;x<g;x++){const w=y(b,x);if(x===0)p[w]=o?1:f[w];else{const S=y(b,x-1);p[w]=o?f[S]*p[S]:f[w]*p[S]}}const v=n.makeTensorInfo(u.shape,d,p);if(l!=null){const b=Vg(l),x=si({inputs:{x:v},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const Sye={kernelName:Zv,backendName:"cpu",kernelFunc:kye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;qe(a,"cumsum");const l=mr([i],a.shape.length);let u=a;l!=null&&(u=si({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=gr(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=oi(u.dtype,"int32"),p=ra(be(u.shape),d),f=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],y=s?(b,x)=>b+g-x-1:(b,x)=>b+x;for(let b=0;b<f.length;b+=g)for(let x=0;x<g;x++){const w=y(b,x);if(x===0)p[w]=o?0:f[w];else{const S=y(b,x-1);p[w]=o?f[S]+p[S]:f[w]+p[S]}}const v=n.makeTensorInfo(u.shape,d,p);if(l!=null){const b=Vg(l),x=si({inputs:{x:v},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(u),x}return v}const Eye={kernelName:Jv,backendName:"cpu",kernelFunc:Cye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o,binaryOutput:s}=r;if(a.shape.length===1){const l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=FI(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){const l=n.bufferSync(a),u=n.bufferSync(i),c=S7(l,u,o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const Tye={kernelName:tx,backendName:"cpu",kernelFunc:Nye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Iye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:o}=r;U(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const s=a.shape[0],l=a.shape[1],u=a.shape[2],c=a.shape[3],d=l*i,p=u*i,f=c/(i*i),g=n.data.get(a.dataId).values,y=new Float32Array(s*d*p*f);let v=0;for(let b=0;b<s;++b)for(let x=0;x<d;++x){const w=Math.floor(x/i),S=x%i;for(let C=0;C<p;++C){const E=Math.floor(C/i),R=C%i,T=(S*i+R)*f;for(let $=0;$<f;++$){const P=$+T+c*(E+u*(w+l*b));y[v++]=g[P]}}}return n.makeTensorInfo([s,d,p,f],a.dtype,y)}const _ye={kernelName:nx,backendName:"cpu",kernelFunc:Iye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;qe([a,i],"depthwiseConv2DNative");const c=rt(a.shape),d=rt(i.shape);let p=l;p==null&&(p=[1,1]),U(ka(o,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${p}'`);const f=Gr(a.shape,i.shape,o,p,s,u,!0),{filterHeight:g,filterWidth:y,dilationHeight:v,dilationWidth:b,padInfo:x}=f,w=x.left,S=x.top,C=f.outChannels/f.inChannels,E=new Mr(f.outShape,a.dtype),R=n.data.get(a.dataId).values,T=n.data.get(i.dataId).values,$=E.values;for(let P=0;P<f.batchSize;++P){const D=P*c[0],B=P*E.strides[0];for(let z=0;z<f.outHeight;++z){const q=B+z*E.strides[1],Y=z*f.strideHeight-S;for(let Z=0;Z<g;++Z){const H=Y+Z*v;if(H<0||H>=f.inHeight)continue;const L=Z*d[0],Q=D+H*c[1];for(let J=0;J<f.outWidth;++J){const te=q+J*E.strides[2],oe=J*f.strideWidth-w;for(let he=0;he<y;++he){const ae=oe+he*b;if(ae<0||ae>=f.inWidth)continue;const de=L+he*d[1],ke=Q+ae*f.inChannels;let K=te,se=de;for(let pe=0;pe<f.inChannels;++pe){const Ne=R[ke+pe];for(let Se=0;Se<C;++Se)$[K+Se]+=Ne*T[se+Se];K+=C,se+=C}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const Rye={kernelName:rx,backendName:"cpu",kernelFunc:kz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $ye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r;qe([a,i],"depthwiseConv2dNativeBackpropFilter");const d=Gr(a.shape,c,o,s,l,u,!0),{strideHeight:p,strideWidth:f,filterHeight:g,filterWidth:y}=d,v=new Mr(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=d.outChannels/d.inChannels,S=n.data.get(a.dataId).values,C=new Mr(a.shape,a.dtype,S),E=n.data.get(i.dataId).values,R=new Mr(i.shape,i.dtype,E);for(let T=0;T<g;++T){const $=Math.max(0,Math.ceil((x-T)/p)),P=Math.min(d.outHeight,(d.inHeight+x-T)/p);for(let D=0;D<y;++D){const B=Math.max(0,Math.ceil((b-D)/f)),z=Math.min(d.outWidth,(d.inWidth+b-D)/f);for(let q=0;q<d.outChannels;++q){const Y=Math.trunc(q/w),Z=q%w;let H=0;for(let L=0;L<d.batchSize;++L)for(let Q=$;Q<P;++Q){const J=T+Q*p-x;for(let te=B;te<z;++te){const oe=D+te*f-b;H+=C.get(L,J,oe,Y)*R.get(L,Q,te,q)}}v.set(H,T,D,Y,Z)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const Oye={kernelName:ax,backendName:"cpu",kernelFunc:$ye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mye(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r;qe([a,i],"depthwiseConv2DNativeBackpropInput");const d=rt(a.shape),p=rt(i.shape),f=Gr(c,i.shape,o,s,l,u,!0),g=new Mr(f.inShape,"float32"),y=g.values,[v,b,x]=g.strides,w=n.data.get(a.dataId).values,[S,C,E]=d,R=n.data.get(i.dataId).values,[T,$,P]=p,{batchSize:D,filterHeight:B,filterWidth:z,inChannels:q,inHeight:Y,inWidth:Z,outChannels:H,outHeight:L,outWidth:Q,strideHeight:J,strideWidth:te}=f,oe=B-1-f.padInfo.top,he=z-1-f.padInfo.left,ae=H/q;for(let de=0;de<D;++de)for(let ke=0;ke<q;++ke)for(let K=0;K<Y;++K){const se=K-oe,pe=Math.max(0,Math.ceil(se/J)),Ne=Math.min(L,(B+se)/J);for(let Se=0;Se<Z;++Se){const Te=Se-he,Pe=Math.max(0,Math.ceil(Te/te)),We=Math.min(Q,(z+Te)/te);let $e=0;for(let lt=pe;lt<Ne;++lt){const Ze=lt*J-se;for(let Je=Pe;Je<We;++Je){const Ve=Je*te-Te,Vt=S*de+C*lt+E*Je,$t=T*(B-1-Ze)+$*(z-1-Ve)+P*ke;for(let Wt=0;Wt<ae;++Wt){const Gt=ke*ae+Wt,Ot=w[Vt+Gt],wt=R[$t+Wt];$e+=Ot*wt}}}y[v*de+b*K+x*Se+ke]=$e}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const Pye={kernelName:ix,backendName:"cpu",kernelFunc:Mye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fye(t){const{inputs:e,backend:n}=t,{x:r}=e,a=be(r.shape),i=n.data.get(r.dataId).values,o=Tt([a,a],r.dtype),s=o.values;for(let u=0;u<i.length;u++)s[u*a+u]=i[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const Aye={kernelName:ox,backendName:"cpu",kernelFunc:Fye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Dye={kernelName:sx,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a}=t,{strides:i,pad:o,dilations:s}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,d=l.data.get(a.dataId).values,p=a.shape.length,{batchSize:f,inHeight:g,inWidth:y,inChannels:v,outHeight:b,outWidth:x,padInfo:w,strideHeight:S,strideWidth:C,filterHeight:E,filterWidth:R,dilationHeight:T,dilationWidth:$,outShape:P}=zg(r.shape,a.shape,i,o,"NHWC",s),D=be(P),B=P.length,z=Or(r.dtype,D);for(let q=0;q<f;++q)for(let Y=0;Y<b;++Y){const Z=Y*S-w.top;for(let H=0;H<x;++H){const L=H*C-w.left;for(let Q=0;Q<v;++Q){let J=Number.MIN_SAFE_INTEGER;for(let oe=0;oe<E;++oe){const he=Z+oe*T;if(he>=0&&he<g)for(let ae=0;ae<R;++ae){const de=L+ae*$;if(de>=0&&de<y){const ke=qo([q,he,de,Q],c,rt(r.shape)),K=qo([oe,ae,Q],p,rt(a.shape)),se=u[ke]+d[K];se>J&&(J=se)}}}const te=qo([q,Y,H,Q],B,rt(P));z[te]=J}}}return{dataId:l.write(Nu(z,r.dtype),P,r.dtype),shape:P,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Lye={kernelName:s4,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=zi(r.shape,u.data.get(r.dataId).values),d=zi(a.shape,u.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:R,dilationWidth:T,outShape:$}=zg(r.shape,a.shape,o,s,"NHWC",l);U(i.rank===$.length,()=>`Error in ${s4}, dy must have the same rank as output ${$.length}, but got ${i.rank}`);const P=zi($,u.data.get(i.dataId).values),D=ZN(a.shape,a.dtype);for(let B=0;B<p;++B)for(let z=0;z<v;++z){const q=z*w-x.top;for(let Y=0;Y<b;++Y){const Z=Y*S-x.left;for(let H=0;H<y;++H){let L=Number.MIN_SAFE_INTEGER,Q=0,J=0;for(let te=0;te<C;++te){const oe=q+te*R;if(oe>=0&&oe<f)for(let he=0;he<E;++he){const ae=Z+he*T;if(ae>=0&&ae<g){const de=c[B][oe][ae][H]+d[te][he][H];de>L&&(L=de,Q=te,J=he)}}}D[Q][J][H]+=P[B][z][Y][H]}}}return{dataId:u.write(Nu(D,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zye={kernelName:o4,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:o,pad:s,dilations:l}=n,u=e,c=zi(r.shape,u.data.get(r.dataId).values),d=zi(a.shape,u.data.get(a.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:R,dilationWidth:T,outShape:$}=zg(r.shape,a.shape,o,s,"NHWC",l);U(i.rank===$.length,()=>`Error in ${o4}, dy must have the same rank as output ${$.length}, but got ${i.rank}`);const P=zi($,u.data.get(i.dataId).values),D=ZN(r.shape,r.dtype);for(let B=0;B<p;++B)for(let z=0;z<v;++z){const q=z*w-x.top;for(let Y=0;Y<b;++Y){const Z=Y*S-x.left;for(let H=0;H<y;++H){let L=Number.MIN_SAFE_INTEGER,Q=q<0?0:q,J=Z<0?0:Z;for(let te=0;te<C;++te){const oe=q+te*R;if(oe>=0&&oe<f)for(let he=0;he<E;++he){const ae=Z+he*T;if(ae>=0&&ae<g){const de=c[B][oe][ae][H]+d[te][he][H];de>L&&(L=de,Q=oe,J=ae)}}}D[B][Q][J][H]+=P[B][z][Y][H]}}}return{dataId:u.write(Nu(D,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function r0(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;qe(a,"sum");let s;a.dtype==="bool"?s=Lu({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):s=$s({inputs:{x:a},backend:n});const l=s.shape.length,u=Zt(i,s.shape),c=mr(u,l);let d=u,p=s;c!=null&&(p=si({inputs:{x:s},backend:n,attrs:{perm:c}}),d=gr(d.length,l)),ia("sum",d,p.shape.length);const[f,g]=aa(p.shape,d),y=oi(p.dtype,"int32");let v=o2(n,f,y);const b=be(g),x=n.data.get(v.dataId).values,w=n.data.get(p.dataId).values;for(let S=0;S<x.length;++S){const C=S*b;let E=0;for(let R=0;R<b;++R)E+=w[C+R];x[S]=E}if(o){const S=Pr(v.shape,u),C=v;v=$n({inputs:{x:v},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(C)}return n.disposeIntermediateTensorInfo(s),c!=null&&n.disposeIntermediateTensorInfo(p),v}const Bye={kernelName:Yx,backendName:"cpu",kernelFunc:r0};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jye(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:o,summedDims:s,idDims:l}=dI(a,i.length);hI(o.length,l,i);const{path:u,steps:c}=fI(s,l),d=c.length;let p=null,f=o.length;const g=[];for(let y=0;y<d;++y){for(const v of c[y]){const{permutationIndices:b,expandDims:x}=pI(f,l[v]);let w;mI(b)?w=i[v]:(w=si({inputs:{x:i[v]},backend:n,attrs:{perm:b}}),g.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);Sn(w.shape,S)||(w=$n({inputs:{x:w},backend:n,attrs:{shape:S}}),g.push(w)),p===null?p=w:(p=s2({inputs:{a:w,b:p},backend:n}),g.push(p))}y<d-1&&(u[y]>=0&&(p=r0({inputs:{x:p},backend:n,attrs:{axis:u[y]-(o.length-f),keepDims:!1}}),g.push(p)),f--)}for(const y of g)y!==p&&n.disposeIntermediateTensorInfo(y);return p}const Uye={kernelName:lx,backendName:"cpu",kernelFunc:jye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vye(t){const{inputs:e,backend:n}=t,{dy:r,y:a}=e;qe([r,a],"eluGrad");const i=new Float32Array(be(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const u=o[l];u>=1?i[l]=s[l]:i[l]=s[l]*(u+1)}return n.makeTensorInfo(a.shape,"float32",i)}const Wye={kernelName:l4,backendName:"cpu",kernelFunc:Vye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gye=rI,Hye=aI,qye=iI,Kye=oI,Xye=sI,Qye=lI,Yye=gn(Dm,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+Gye*n);return e*(1-((((Qye*r+Xye)*r+Kye)*r+qye)*r+Hye)*r*Math.exp(-n*n))}),Zye={kernelName:Dm,backendName:"cpu",kernelFunc:Yye};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function u2(t){const{inputs:e,backend:n,attrs:r}=t,{input:a}=e,{dim:i}=r,o=a.shape.length,s=a.shape.slice();let l=i;return i<0&&(U(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),s.splice(l,0,1),$n({inputs:{x:a},backend:n,attrs:{shape:s}})}const Jye={kernelName:ux,backendName:"cpu",kernelFunc:u2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ebe=Cr((t,e)=>t/e),jI=Hr(Fm,ebe),UI={kernelName:Fm,backendName:"cpu",kernelFunc:jI};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Sz(t,e,n){const r=t.shape,a=r[0],i=r[1],o=n.data.get(t.dataId),s=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[a,i],c=be(u),d=$r("float32",c),p=$r("float32",c);for(let v=0;v<a;v++){const b=ud({inputs:{x:s},backend:n,attrs:{begin:[v,0],size:[1,i]}}),x=ud({inputs:{x:l},backend:n,attrs:{begin:[v,0],size:[1,i]}}),w=Ni({inputs:{real:b,imag:x},backend:n}),{real:S,imag:C}=tbe(w,e,n),E=Nl(S,C);for(let R=0;R<i;R++){const T=uI(E,R);d[v*i+R]=T.real,p[v*i+R]=T.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w)}const f=n.makeTensorInfo(u,"float32",d),g=n.makeTensorInfo(u,"float32",p),y=Ni({inputs:{real:f,imag:g},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}function tbe(t,e,n){const r=be(t.shape),a=n.data.get(t.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(nbe(r)){const s=VI(i,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",s.real),c=n.makeTensorInfo(l,"float32",s.imag),d=n.makeTensorInfo([],"float32",gl(r,"float32")),p=$s({inputs:{x:d},backend:n}),f=UI.kernelFunc({inputs:{a:u,b:d},backend:n}),g=UI.kernelFunc({inputs:{a:c,b:p},backend:n}),y=n.data.get(f.dataId).values,v=n.data.get(g.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),{real:y,imag:v}}return s}else{const s=Nl(i,o),l=rbe(s,r,e);return z9(l)}}function nbe(t){return(t&t-1)===0}function VI(t,e,n,r,a){if(n===1)return{real:t,imag:e};const i=Nl(t,e),o=n/2,s=B9(i),l=s.real,u=s.imag,c=[l.length],d=a.makeTensorInfo(c,"float32",l),p=a.makeTensorInfo(c,"float32",u),f=Ni({inputs:{real:d,imag:p},backend:a}),g=j9(i),y=g.real,v=g.imag,b=[y.length],x=a.makeTensorInfo(b,"float32",y),w=a.makeTensorInfo(b,"float32",v),S=Ni({inputs:{real:x,imag:w},backend:a}),C=VI(l,u,o,r,a),E=C.real,R=C.imag,T=[E.length],$=a.makeTensorInfo(T,"float32",E),P=a.makeTensorInfo(T,"float32",R),D=Ni({inputs:{real:$,imag:P},backend:a}),B=VI(y,v,o,r,a),z=B.real,q=B.imag,Y=[z.length],Z=a.makeTensorInfo(Y,"float32",z),H=a.makeTensorInfo(Y,"float32",q),L=Ni({inputs:{real:Z,imag:H},backend:a}),Q=V9(n,r),J=[Q.real.length],te=a.makeTensorInfo(J,"float32",Q.real),oe=a.makeTensorInfo(J,"float32",Q.imag),he=Ni({inputs:{real:te,imag:oe},backend:a}),ae=s2({inputs:{a:he,b:L},backend:a}),de=rh({inputs:{a:D,b:ae},backend:a}),ke=zI({inputs:{a:D,b:ae},backend:a}),K=ld({inputs:{input:de},backend:a}),se=ld({inputs:{input:ke},backend:a}),pe=oh({inputs:{input:de},backend:a}),Ne=oh({inputs:{input:ke},backend:a}),Se=sh({inputs:[K,se],backend:a,attrs:{axis:0}}),Te=sh({inputs:[pe,Ne],backend:a,attrs:{axis:0}}),Pe=a.data.get(Se.dataId).values,We=a.data.get(Te.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo($),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(te),a.disposeIntermediateTensorInfo(oe),a.disposeIntermediateTensorInfo(he),a.disposeIntermediateTensorInfo(ae),a.disposeIntermediateTensorInfo(de),a.disposeIntermediateTensorInfo(ke),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(pe),a.disposeIntermediateTensorInfo(se),a.disposeIntermediateTensorInfo(Ne),a.disposeIntermediateTensorInfo(Se),a.disposeIntermediateTensorInfo(Te),{real:Pe,imag:We}}function rbe(t,e,n){const r=new Float32Array(e*2);for(let a=0;a<e;a++){let i=0,o=0;for(let s=0;s<e;s++){const l=W9(a*s,e,n),u=uI(t,s);i+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(i/=e,o/=e),U9(r,i,o,a)}return r}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function abe(t){const{inputs:e,backend:n}=t,{input:r}=e,a=be(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=$n({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=Sz(s,!1,n),u=$n({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const ibe={kernelName:cx,backendName:"cpu",kernelFunc:abe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function WI(t){const{backend:e,attrs:n}=t,{shape:r,value:a,dtype:i}=n,o=i||Fp(a),s=Or(o,be(r));return sbe(s,a,o),e.makeTensorInfo(r,o,s)}const obe={kernelName:dx,backendName:"cpu",kernelFunc:WI};function sbe(t,e,n){t.fill(e)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lbe={kernelName:px,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,a=n,i=$r(r.dtype,be(r.shape)),[o,s,l,u]=r.shape,c=a.data.get(r.dataId).values;for(let d=0;d<o;d++){const p=d*l*s*u;for(let f=0;f<s;f++){const g=f*(l*u);for(let y=0;y<l;y++){const v=y*u;for(let b=0;b<u;b++){const x=Math.round(l-y-1),w=p+g+v+b;let S=c[w];if(x>=0&&x<l){const C=x*u,E=p+g+C+b;S=c[E]}i[w]=S}}}}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ube=Cr((t,e)=>Math.floor(t/e)),cbe=Hr(Um,ube,null,"int32"),dbe={kernelName:Um,backendName:"cpu",kernelFunc:cbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:g}=r;let y=wz({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(o){const v=y;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const b=$n({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});y=rh({inputs:{a:y,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else y=rh({inputs:{a:y,b:o},backend:n});n.disposeIntermediateTensorInfo(v)}if(f){const v=y;if(c==="NCHW"&&f==="prelu"&&s.shape.length===1&&s.shape[0]!==1){const b=$n({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});y=l2(n,y,f,b,g),n.disposeIntermediateTensorInfo(b)}else y=l2(n,y,f,s,g);n.disposeIntermediateTensorInfo(v)}return y}const hbe={kernelName:Tg,backendName:"cpu",kernelFunc:pbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:g}=r;let y=kz({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(o){const v=y;y=rh({inputs:{a:y,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(f){const v=y;y=l2(n,y,f,s,g),n.disposeIntermediateTensorInfo(v)}return y}const mbe={kernelName:Ig,backendName:"cpu",kernelFunc:fbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function gbe(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=be(r.shape),o=a.shape,s=o[o.length-1],[l,u,c,d]=Iw(r,a);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(a.dataId).values,f=n.bufferSync(r),g=O7(p,f,r.dtype,u,s,c,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,g.values)}const ybe={kernelName:mx,backendName:"cpu",kernelFunc:gbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:o,batchDims:s}=r;qe([a,i],"gatherV2");const l=Zt(o,a.shape)[0],u=n.data.get(i.dataId).values,c=a.shape[l];for(let S=0;S<u.length;++S){const C=u[S];U(C<=c-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${c-1}]`)}let d=s;s==null&&(d=0);const p=be(i.shape),f=bI(a,i,l,d),g=$n({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),y=$n({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,p/f.batchSize]}}),v=[f.batchSize,f.outerSize,p/f.batchSize,f.sliceSize],b=n.bufferSync(y),x=n.bufferSync(g),w=M7(x,b,v);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(f.outputShape,w.dtype,w.values)}const vbe={kernelName:fx,backendName:"cpu",kernelFunc:bbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xbe(t){const{inputs:e,backend:n}=t,{input:r}=e,a=be(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=$n({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=Sz(s,!0,n),u=$n({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const wbe={kernelName:gx,backendName:"cpu",kernelFunc:xbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kbe=gn(Hm,t=>Number.isFinite(t)?1:0,"bool"),Sbe={kernelName:Hm,backendName:"cpu",kernelFunc:kbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Cbe=gn(qm,t=>Math.abs(t)===1/0?1:0,"bool"),Ebe={kernelName:qm,backendName:"cpu",kernelFunc:Cbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Nbe=gn(Km,t=>Number.isNaN(t)?1:0,"bool"),Tbe={kernelName:Km,backendName:"cpu",kernelFunc:Nbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ibe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,o=L7(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}const _be={kernelName:vx,backendName:"cpu",kernelFunc:Ibe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Rbe=gn(Zm,t=>Math.log1p(t)),$be={kernelName:Zm,backendName:"cpu",kernelFunc:Rbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Obe=Cr((t,e)=>t&&e),Mbe=Hr(Jm,Obe,null,"bool"),Pbe={kernelName:Jm,backendName:"cpu",kernelFunc:Mbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Fbe=gn(eg,t=>t?0:1,"bool"),Abe={kernelName:eg,backendName:"cpu",kernelFunc:Fbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Dbe=Cr((t,e)=>t||e),Lbe=Hr(tg,Dbe,null,"bool"),zbe={kernelName:tg,backendName:"cpu",kernelFunc:Lbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:o,alpha:s,beta:l}=r;qe(a,"LRN");const u=a.shape[3],c=u-1,d=n.data.get(a.dataId).values,p=be(a.shape),f=new Float32Array(p);function g(y){const v=y%u;let b=y-v+Math.max(0,v-i);const x=y-v+Math.min(v+i,c);let w=0;for(;b<=x;b++){const S=d[b];w+=S*S}return w}for(let y=0;y<p;y++){const v=g(y),b=d[y]*Math.pow(o+s*v,-l);f[y]=b}return n.makeTensorInfo(a.shape,a.dtype,f)}const jbe={kernelName:xx,backendName:"cpu",kernelFunc:Bbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ube(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r;qe(o,"LRNGrad");const d=be(o.shape),p=o.shape[3],f=n.data.get(o.dataId).values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,v=new Float32Array(d),b=d;for(let x=0;x<b;x++){const w=x%p,S=x-w+Math.max(0,w-s),C=x-w+Math.min(p,w+s+1);let E=0;for(let R=S;R<C;R++)E+=Math.pow(g[R],2);E=u*E+l;for(let R=S;R<C;R++){let T=-2*u*c*g[R]*y[x]/E;x===R&&(T+=Math.pow(E,-c)),T*=f[x],v[R]+=T}}return n.makeTensorInfo(o.shape,a.dtype,v)}const Vbe={kernelName:u4,backendName:"cpu",kernelFunc:Ube};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cz(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:o}=r,s=n;let l=a.shape;const u=l.length,c=Zt(i,l);let d=c;const p=mr(d,u);let f=s.data.get(a.dataId).values;if(p!=null){const S=new Array(u);for(let C=0;C<S.length;C++)S[C]=l[p[C]];f=DI(f,l,a.dtype,p,S),d=gr(d.length,u),l=S}qe(a,"max"),ia("max",d,u);const[g,y]=aa(l,d),v=be(y),b=B7(f,v,g,a.dtype),x=s.write(b,g,a.dtype);let w=g;return o&&(w=Pr(g,c)),{dataId:x,shape:w,dtype:a.dtype}}const Wbe={kernelName:wx,backendName:"cpu",kernelFunc:Cz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;qe(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;U(ka(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ho(a.shape,i,o,u,s,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Sn(c.inShape,c.outShape))d=$s({inputs:{x:a},backend:n});else{const p=n.data.get(a.dataId).values,f=rt(a.shape),g=BI(p,a.shape,a.dtype,f,c,"max");d=n.makeTensorInfo(c.outShape,a.dtype,g.values)}return d}const Hbe={kernelName:kx,backendName:"cpu",kernelFunc:Gbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r;qe(a,"maxPool3d");const c=kl(a.shape,i,o,1,s,l,u),d=n.data.get(a.dataId).values,p=xz(d,a.shape,a.dtype,rt(a.shape),c,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const Kbe={kernelName:Sx,backendName:"cpu",kernelFunc:qbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:u}=r;qe([a,i],"maxPool3DGrad");const c=kl(i.shape,o,s,1,l,u),d=n.bufferSync(i),p=A1e(d,c),f=c.strideDepth,g=c.strideHeight,y=c.strideWidth,v=c.dilationDepth,b=c.dilationHeight,x=c.dilationWidth,w=c.effectiveFilterDepth,S=c.effectiveFilterHeight,C=c.effectiveFilterWidth,E=w-1-c.padInfo.front,R=C-1-c.padInfo.left,T=S-1-c.padInfo.top,$=Tt(i.shape,"float32"),P=n.bufferSync(a);for(let D=0;D<c.batchSize;++D)for(let B=0;B<c.inChannels;++B)for(let z=0;z<c.inDepth;++z)for(let q=0;q<c.inHeight;++q)for(let Y=0;Y<c.inWidth;++Y){const Z=z-E,H=q-T,L=Y-R;let Q=0;for(let J=0;J<w;J+=v){const te=(Z+J)/f;if(!(te<0||te>=c.outDepth||Math.floor(te)!==te))for(let oe=0;oe<S;oe+=b){const he=(H+oe)/g;if(!(he<0||he>=c.outHeight||Math.floor(he)!==he))for(let ae=0;ae<C;ae+=x){const de=(L+ae)/y;if(de<0||de>=c.outWidth||Math.floor(de)!==de)continue;const ke=w*S*C-1-p.get(D,te,he,de,B),K=J*S*C+oe*C+ae,se=ke===K?1:0;if(se===0)continue;const pe=P.get(D,te,he,de,B);Q+=pe*se}}}$.set(Q,D,z,q,Y,B)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const Qbe={kernelName:d4,backendName:"cpu",kernelFunc:Xbe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ybe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:o}=e,s=i;qe([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,p=ho(s.shape,l,u,1,c,d),f=n.data.get(s.dataId).values,g=Tt(p.outShape,s.dtype,vz(f,s.shape,s.dtype,p).values),y=p.strideHeight,v=p.strideWidth,b=p.dilationHeight,x=p.dilationWidth,w=p.effectiveFilterHeight,S=p.effectiveFilterWidth,C=S-1-p.padInfo.left,E=w-1-p.padInfo.top,R=Tt(s.shape,"float32"),T=n.data.get(a.dataId).values,$=Tt(a.shape,"float32",T);for(let P=0;P<p.batchSize;++P)for(let D=0;D<p.inChannels;++D)for(let B=0;B<p.inHeight;++B)for(let z=0;z<p.inWidth;++z){const q=B-E,Y=z-C;let Z=0;for(let H=0;H<w;H+=b){const L=(q+H)/y;if(!(L<0||L>=p.outHeight||Math.floor(L)!==L))for(let Q=0;Q<S;Q+=x){const J=(Y+Q)/v;if(J<0||J>=p.outWidth||Math.floor(J)!==J)continue;const te=w*S-1-g.get(P,L,J,D),oe=H*S+Q,he=te===oe?1:0;if(he===0)continue;const ae=$.get(P,L,J,D);Z+=ae*he}}R.set(Z,P,B,z,D)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const Zbe={kernelName:c4,backendName:"cpu",kernelFunc:Ybe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jbe(t,e,n,r,a){const i=rt(e),o=BI(t,e,n,i,a,"max"),s=vz(t,e,n,a,!0,r);return[o.values,s.values]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const eve={kernelName:Cx,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=e,l=n;qe(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=ho(r.shape,a,i,[1,1],o),[d,p]=Jbe(u,r.shape,r.dtype,s,c),f=l.write(d,c.outShape,r.dtype),g=l.write(p,c.outShape,r.dtype);return[{dataId:f,shape:c.outShape,dtype:r.dtype},{dataId:g,shape:c.outShape,dtype:"int32"}]}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=Zt(i,a.shape),l=aa(a.shape,s)[1],u=be(l),c=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(d);const p=Lu({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(p);const f=jI({inputs:{a:p,b:d},backend:n});c.push(f);const g=r0({inputs:{x:f},backend:n,attrs:{axis:i,keepDims:o}});return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const nve={kernelName:Ex,backendName:"cpu",kernelFunc:tve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;qe(a,"min");const s=Zt(i,a.shape);let l=s;const u=mr(l,a.shape.length);let c=a;u!=null&&(c=si({inputs:{x:a},backend:n,attrs:{perm:u}}),l=gr(l.length,a.shape.length)),ia("min",l,c.shape.length);const[d,p]=aa(c.shape,l),f=be(p),g=ra(be(d),c.dtype),y=n.data.get(c.dataId).values;for(let b=0;b<g.length;++b){const x=b*f;let w=y[x];for(let S=0;S<f;++S){const C=y[x+S];(Number.isNaN(C)||C<w)&&(w=C)}g[b]=w}u!=null&&n.disposeIntermediateTensorInfo(c);const v=n.makeTensorInfo(d,c.dtype,g);if(o){const b=Pr(d,s),x=$n({inputs:{x:v},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(v),x}return v}const ave={kernelName:Nx,backendName:"cpu",kernelFunc:rve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ive(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,mode:o}=r;qe(a,"mirrorPad");const s=i.map((x,w)=>x[0]+a.shape[w]+x[1]),l=i.map(x=>x[0]),u=i.map((x,w)=>x[0]+a.shape[w]),c=o==="reflect"?0:1,d=n.data.get(a.dataId).values,p=a.shape.length,f=rt(a.shape),g=be(s),y=s.length,v=rt(s),b=$r(a.dtype,g);for(let x=0;x<g;x++){let w=Gc(x,y,v);for(let C=0;C<y;C++)w[C]<l[C]?w[C]=l[C]*2-w[C]-c:w[C]>=u[C]&&(w[C]=(u[C]-1)*2-w[C]+c);w=w.map((C,E)=>C-l[E]);const S=qo(w,p,f);b[x]=d[S]}return{dataId:n.write(b,s,a.dtype),shape:s,dtype:a.dtype}}const ove={kernelName:Tx,backendName:"cpu",kernelFunc:ive};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sve=Cr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),lve=Hr(ag,sve),uve={kernelName:ag,backendName:"cpu",kernelFunc:lve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ez(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,o=a.shape.length;let s=i;if(s===-1&&(s=o-1),s!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${s}`);const l=Zt([s],a.shape),u=Cz({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Pr(u.shape,l),d=$n({inputs:{x:u},backend:n,attrs:{shape:c}}),p=zI({inputs:{a,b:d},backend:n}),f=_7({inputs:{x:p},backend:n}),g=r0({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),y=$n({inputs:{x:g},backend:n,attrs:{shape:c}}),v=jI({inputs:{a:f,b:y},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}const cve={kernelName:ew,backendName:"cpu",kernelFunc:Ez};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dve(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:o,normalized:s}=r;qe(a,"multinomial");const l=s?a:Ez({inputs:{logits:a},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,p=[u,i],f=ra(be(p),"int32");for(let g=0;g<u;++g){const y=g*c,v=new Float32Array(c-1);v[0]=d[y];for(let w=1;w<v.length;++w)v[w]=v[w-1]+d[y+w];const b=Dw.alea(o.toString()),x=g*i;for(let w=0;w<i;++w){const S=b();f[x+w]=v.length;for(let C=0;C<v.length;C++)if(S<v[C]){f[x+w]=C;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",f)}const pve={kernelName:Ix,backendName:"cpu",kernelFunc:dve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hve=Hw;function fve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r;qe(a,"NonMaxSuppression");const u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:d}=hve(u,c,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const mve={kernelName:Rx,backendName:"cpu",kernelFunc:fve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gve=qw;function yve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r;qe(a,"NonMaxSuppressionPadded");const c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:p,validOutputs:f}=gve(c,d,o,s,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const bve={kernelName:$x,backendName:"cpu",kernelFunc:yve};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vve=Kw;function xve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r;qe(a,"NonMaxSuppressionWithScore");const c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,p=o,f=s,g=l,y=u,{selectedIndices:v,selectedScores:b}=vve(c,d,p,f,g,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const wve={kernelName:Ox,backendName:"cpu",kernelFunc:xve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kve(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:o,onValue:s,offValue:l}=r;qe(a,"oneHot");const u=be(a.shape),c=new Float32Array(u*o);c.fill(l);const d=n.data.get(a.dataId).values;for(let p=0;p<u;++p)d[p]>=0&&d[p]<o&&(c[p*o+d[p]]=s);return n.makeTensorInfo([...a.shape,o],i,c)}const Sve={kernelName:Px,backendName:"cpu",kernelFunc:kve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function c2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const a=ld({inputs:{input:r},backend:n}),i=c2({inputs:{x:a},backend:n}),o=oh({inputs:{input:r},backend:n}),s=c2({inputs:{x:o},backend:n}),l=Ni({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return WI({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Cve={kernelName:mw,backendName:"cpu",kernelFunc:c2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nz(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const a=ld({inputs:{input:r},backend:n}),i=Nz({inputs:{x:a},backend:n}),o=oh({inputs:{input:r},backend:n}),s=c2({inputs:{x:o},backend:n}),l=Ni({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return WI({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const Eve={kernelName:Mx,backendName:"cpu",kernelFunc:Nz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tz(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return u2({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{na(i,c.shape,"All tensors passed to stack must have matching shapes"),U(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const d=u2({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(d),d}),u=sh({inputs:l,backend:n,attrs:{axis:a}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const Nve={kernelName:Fx,backendName:"cpu",kernelFunc:Tz};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Tve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:o}=r;qe(a,"pad");const s=i.map((b,x)=>b[0]+a.shape[x]+b[1]),l=i.map(b=>b[0]),u=n.data.get(a.dataId).values,c=be(a.shape),d=a.shape.length,p=rt(a.shape),f=be(s),g=s.length,y=rt(s),v=$r(a.dtype,f);o!==0&&v.fill(o);for(let b=0;b<c;b++){const x=Gc(b,d,p).map((S,C)=>S+l[C]),w=qo(x,g,y);v[w]=u[b]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}const Iz={kernelName:Ax,backendName:"cpu",kernelFunc:Tve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Ive=Cr((t,e)=>Math.pow(t,e)),_ve=Hr(sg,Ive),Rve={kernelName:sg,backendName:"cpu",kernelFunc:_ve};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $ve(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=e,s=a.map(v=>n.data.get(v.dataId).values),l=a.map(v=>v.shape),u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,[d,p,f]=q7(s,l,u,i.shape,i.dtype,c,o.shape),g=d.map(v=>n.makeTensorInfo([v.length],"int32",v)),y=n.makeTensorInfo(f,i.dtype,p);return g.concat([y])}const Ove={kernelName:zx,backendName:"cpu",kernelFunc:$ve};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Mve(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,p=s.map(v=>n.data.get(v.dataId).values),f=s.map(v=>v.shape),[g,y]=Q7(u,a.shape,c,i.shape,i.dtype,d,o.shape,p,f,l);return n.makeTensorInfo(g,i.dtype,y)}const Pve={kernelName:Bx,backendName:"cpu",kernelFunc:Mve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Fve(t){const{backend:e,attrs:n}=t,{start:r,stop:a,dtype:i,step:o}=n,s=Y7(r,a,o,i);return e.makeTensorInfo([s.length],i,s)}const Ave={kernelName:jx,backendName:"cpu",kernelFunc:Fve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Dve=gn(lg,t=>1/t),Lve={kernelName:lg,backendName:"cpu",kernelFunc:Dve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r;qe(a,"resizeBilinear");const l=rt(a.shape),[u,c]=s,[d,p,f,g]=a.shape,y=n.data.get(a.dataId).values,v=new Float32Array(be([d,u,c,g])),b=[i&&u>1?p-1:p,i&&c>1?f-1:f],x=[i&&u>1?u-1:u,i&&c>1?c-1:c];let w=0;const S=b[0]/x[0],C=b[1]/x[1];for(let E=0;E<d;E++)for(let R=0;R<u;R++){let T;o?T=S*(R+.5)-.5:T=S*R;const $=Math.max(0,Math.floor(T)),P=T-$,D=Math.min(p-1,Math.ceil(T)),B=E*l[0]+$*l[1],z=E*l[0]+D*l[1];for(let q=0;q<c;q++){let Y;o?Y=C*(q+.5)-.5:Y=C*q;const Z=Math.max(0,Math.floor(Y)),H=Y-Z,L=Math.min(f-1,Math.ceil(Y)),Q=B+Z*l[2],J=z+Z*l[2],te=B+L*l[2],oe=z+L*l[2];for(let he=0;he<g;he++){const ae=y[Q+he],de=y[J+he],ke=y[te+he],K=y[oe+he],se=ae+(ke-ae)*H,pe=de+(K-de)*H,Ne=se+(pe-se)*P;v[w++]=Ne}}}return n.makeTensorInfo([d,u,c,g],"float32",v)}const Bve={kernelName:Gx,backendName:"cpu",kernelFunc:zve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r;qe([i,a],"resizeBilinearGrad");const s=rt(a.shape),[l,u,c,d]=a.shape,[,p,f]=i.shape,g=new Float32Array(l*u*c*d),y=[o&&p>1?u-1:u,o&&f>1?c-1:c],v=[o&&p>1?p-1:p,o&&f>1?f-1:f],b=y[0]/v[0],x=y[1]/v[1],w=n.data.get(i.dataId).values;let S=0;for(let C=0;C<l;C++){const E=C*s[0];for(let R=0;R<p;R++){const T=R*b,$=Math.floor(T),P=Math.min(Math.ceil(T),u-1),D=E+$*s[1],B=E+P*s[1],z=T-$,q=1-z;for(let Y=0;Y<f;Y++){const Z=Y*x,H=Math.floor(Z),L=Math.min(Math.ceil(Z),c-1),Q=Z-H,J=1-Q,te=D+H*s[2],oe=D+L*s[2],he=B+H*s[2],ae=B+L*s[2],de=q*J,ke=q*Q,K=z*J,se=z*Q;for(let pe=0;pe<d;pe++){const Ne=w[S++];g[te+pe]+=Ne*de,g[oe+pe]+=Ne*ke,g[he+pe]+=Ne*K,g[ae+pe]+=Ne*se}}}}return n.makeTensorInfo([l,c,u,d],"float32",g)}const Uve={kernelName:h4,backendName:"cpu",kernelFunc:jve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r;qe(a,"resizeNearestNeighbor");const l=rt(a.shape),[u,c]=s,[d,p,f,g]=a.shape,y=n.data.get(a.dataId).values,v=new Float32Array(d*u*c*g),b=[i&&u>1?p-1:p,i&&c>1?f-1:f],x=[i&&u>1?u-1:u,i&&c>1?c-1:c],w=b[0]/x[0],S=b[1]/x[1];let C=0;for(let E=0;E<d;E++){const R=E*l[0];for(let T=0;T<u;T++){const $=o?w*(T+.5):w*T;let P=Math.min(p-1,i?Math.round($):Math.floor($));o&&(P=Math.max(0,P));const D=R+P*l[1];for(let B=0;B<c;B++){const z=o?S*(B+.5):S*B;let q=Math.min(f-1,i?Math.round(z):Math.floor(z));o&&(q=Math.max(0,q));const Y=D+q*l[2];for(let Z=0;Z<g;Z++){const H=y[Y+Z];v[C++]=H}}}}return n.makeTensorInfo([d,u,c,g],a.dtype,v)}const Wve={kernelName:Wx,backendName:"cpu",kernelFunc:Vve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Gve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r;qe([i,a],"resizeNearestNeighborGrad");const s=rt(a.shape),l=rt(i.shape),[u,c,d,p]=a.shape,[,f,g]=i.shape,y=new Float32Array(u*c*d*p),v=n.data.get(i.dataId).values,b=[o&&f>1?c-1:c,o&&g>1?d-1:d],x=[o&&f>1?f-1:f,o&&g>1?g-1:g],w=b[0]/x[0],S=b[1]/x[1],C=1/w,E=1/S,R=Math.ceil(C)*2+2,T=Math.ceil(E)*2+2;for(let $=0;$<u;$++){const P=$*s[0];for(let D=0;D<c;D++){const B=P+D*s[1],z=Math.floor(D*C),q=Math.floor(z-R/2);for(let Y=0;Y<d;Y++){const Z=B+Y*s[2],H=Math.floor(Y*E),L=Math.floor(H-T/2);for(let Q=0;Q<p;Q++){let J=0;for(let te=0;te<R;te++){const oe=te+q;if(oe<0||oe>=f)continue;const he=P+oe*l[1],ae=oe*w,de=Math.min(c-1,o?Math.round(ae):Math.floor(ae));if(D===de)for(let ke=0;ke<T;ke++){const K=ke+L;if(K<0||K>=g)continue;const se=he+K*l[2],pe=K*S,Ne=Math.min(d-1,o?Math.round(pe):Math.floor(pe));Y===Ne&&(J+=v[se+Q])}}y[Z+Q]=J}}}}return n.makeTensorInfo(a.shape,a.dtype,y)}const Hve={kernelName:p4,backendName:"cpu",kernelFunc:Gve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r;qe(a,"reverse");const o=a.shape.length,s=Zt(i,a.shape);if(o===0)return $s({inputs:{x:a},backend:n});const l=new Mr(a.shape,a.dtype),u=n.bufferSync(a);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),p=d.slice();s.forEach(f=>p[f]=a.shape[f]-1-p[f]),l.set(u.get(...p),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const Kve={kernelName:Hx,backendName:"cpu",kernelFunc:qve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Xve={kernelName:yw,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:o}=e,s=n,l=$r(r.dtype,be(r.shape)),[u,c,d,p]=r.shape,[f,g]=ZT(o,c,d),y=255,v=Math.sin(a),b=Math.cos(a),x=s.data.get(r.dataId).values;for(let w=0;w<u;w++){const S=w*d*c*p;for(let C=0;C<c;C++){const E=C*(d*p);for(let R=0;R<d;R++){const T=R*p;for(let $=0;$<p;$++){const P=[u,C,R,$],D=P[2],B=P[1];let z=(D-f)*b-(B-g)*v,q=(D-f)*v+(B-g)*b;z=Math.round(z+f),q=Math.round(q+g);let Y=i;if(typeof i!="number"&&($===3?Y=y:Y=i[$]),z>=0&&z<d&&q>=0&&q<c){const H=q*(d*p),L=z*p,Q=S+H+L+$;Y=x[Q]}const Z=S+E+T+$;l[Z]=Y}}}}return{dataId:s.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Qve=gn(dg,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),Yve={kernelName:dg,backendName:"cpu",kernelFunc:Qve};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Zve(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Gp(i,a,o),p=!0,f=n.bufferSync(a),g=n.bufferSync(i),y=ih(f,g,o,d,u,l,s,c,0,p);return n.makeTensorInfo(o,y.dtype,y.values)}const Jve={kernelName:qx,backendName:"cpu",kernelFunc:Zve};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function exe(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<e?n=a+1:r=a;return r}function txe(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<=e?n=a+1:r=a;return r}function nxe(t,e,n,r,a,i){const o=Or("int32",n*a);for(let s=0;s<n;++s){const l=t.slice(s*r,(s+1)*r),u=s*a;for(let c=0;c<a;++c)o[u+c]=i==="left"?exe(l,e[c+u]):txe(l,e[c+u])}return o}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rxe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:o}=r,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=nxe(s,l,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",u)}const axe={kernelName:Kx,backendName:"cpu",kernelFunc:rxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ixe(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e;qe([r,a,i],"select");const o=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=oi(a.dtype,i.dtype),d=ra(be(a.shape),c);let p=0;const f=o===0||o>1||a.shape.length===1?1:be(a.shape.slice(1));for(let g=0;g<s.length;g++)for(let y=0;y<f;y++)s[g]===1?d[p++]=l[g]:d[p++]=u[g];return n.makeTensorInfo(a.shape,c,d)}const oxe={kernelName:Xx,backendName:"cpu",kernelFunc:ixe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const sxe=tI,lxe=nI,uxe=gn(hg,t=>t>=0?lxe*t:sxe*(Math.exp(t)-1)),cxe={kernelName:hg,backendName:"cpu",kernelFunc:uxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dxe=gn(gg,t=>t<0?-1:t>0?1:0),pxe={kernelName:gg,backendName:"cpu",kernelFunc:dxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hxe=gn(fg,t=>Math.sin(t)),fxe={kernelName:fg,backendName:"cpu",kernelFunc:hxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mxe=gn(mg,t=>Math.sinh(t)),gxe={kernelName:mg,backendName:"cpu",kernelFunc:mxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yxe=11920928955078125e-23,_z=Math.log(yxe)+2,bxe=gn(bg,t=>{const e=t>-_z,n=t<_z,r=Math.exp(t);let a;return n?a=r:e?a=t:a=Math.log(1+r),a}),vxe={kernelName:bg,backendName:"cpu",kernelFunc:bxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function xxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:o}=r;qe([a],"spaceToBatchND");const s=be(i),l=[[0,0]];l.push(...o);for(let v=1+i.length;v<a.shape.length;++v)l.push([0,0]);const u=Iz.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),c=Zg(u.shape,i,s,!1),d=Jg(c.length,i.length,!1),p=e0(u.shape,i,s,!1),f=$n({inputs:{x:u},backend:n,attrs:{shape:c}}),g=si({inputs:{x:f},backend:n,attrs:{perm:d}}),y=$n({inputs:{x:g},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}const wxe={kernelName:Zx,backendName:"cpu",kernelFunc:xxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kxe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${a.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],[d,p,f,g,y]=tz(s,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,f),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const Sxe={kernelName:tw,backendName:"cpu",kernelFunc:kxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Cxe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[u,c,d]=nz(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const Exe={kernelName:nw,backendName:"cpu",kernelFunc:Cxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Nxe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[u,c]=LI(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const Txe={kernelName:rw,backendName:"cpu",kernelFunc:Nxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ixe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[u,c]=LI(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const _xe={kernelName:aw,backendName:"cpu",kernelFunc:Ixe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Rxe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=Gp(i,a,s),f=!1,g=n.bufferSync(a);let y;switch(i.dtype){case"bool":{const v=n.bufferSync(i),b=!!n.data.get(o.dataId).values[0];y=ih(g,v,s,p,c,u,l,d,b,f);break}case"float32":{const v=n.bufferSync(i),b=n.data.get(o.dataId).values[0];y=ih(g,v,s,p,c,u,l,d,b,f);break}case"int32":{const v=n.bufferSync(i),b=n.data.get(o.dataId).values[0];y=ih(g,v,s,p,c,u,l,d,b,f);break}case"string":{const v=n.bufferSync(i),b=yl(n.data.get(o.dataId).values[0]);y=ih(g,v,s,p,c,u,l,d,b,f);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(s,y.dtype,y.values)}const $xe={kernelName:iw,backendName:"cpu",kernelFunc:Rxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Oxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:o}=r,s=Zt(o,a.shape)[0],l=gI(a,i,s),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return l.map(d=>{const p=[...c];p[s]=d;const f=ud({inputs:{x:a},backend:n,attrs:{begin:u,size:p}});return u[s]+=d,f})}const Mxe={kernelName:Jx,backendName:"cpu",kernelFunc:Oxe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Pxe={kernelName:f4,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;qe(n,"square");const a=r.data.get(n.dataId).values,i=new Float32Array(a.length);for(let o=0;o<a.length;++o){const s=a[o];i[o]=s*s}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Fxe=gn(Eg,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),Axe={kernelName:Eg,backendName:"cpu",kernelFunc:Fxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Dxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r;qe(a,"stridedSlice");const{finalShapeSparse:f,finalShape:g,isIdentity:y,sliceDim0:v,isSimpleSlice:b,begin:x,end:w,strides:S}=rT(a.shape,i,o,s,l,u,c,d,p);let C;if(y)C=$n({inputs:{x:a},backend:n,attrs:{shape:g}});else if(v||b){U(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const E=J4(x,w,S),R=ud({inputs:{x:a},backend:n,attrs:{begin:x,size:E}});C=$n({inputs:{x:R},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(R)}else{const E=n.bufferSync(a),R=az(f,E,S,x);C=n.makeTensorInfo(g,R.dtype,R.values)}return C}const Lxe={kernelName:ow,backendName:"cpu",kernelFunc:Dxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function zxe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,p=n.data.get(c.dataId).values,f=n.data.get(d.dataId).values,[g,y]=iz(p,f,a,i,o,s,l,u);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}const Bxe={kernelName:sw,backendName:"cpu",kernelFunc:zxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jxe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,d]=oz(s,l,a),p=c.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const Uxe={kernelName:lw,backendName:"cpu",kernelFunc:jxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Vxe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(i.dataId).values,s=sz(o,a);return n.makeTensorInfo(i.shape,"int32",s)}const Wxe={kernelName:uw,backendName:"cpu",kernelFunc:Vxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Gxe=gn(kg,t=>Math.tan(t)),Hxe={kernelName:kg,backendName:"cpu",kernelFunc:Gxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const qxe=gn(Sg,t=>Math.tanh(t)),Kxe={kernelName:Sg,backendName:"cpu",kernelFunc:qxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;qe(a,"tile");const o=uz(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const Qxe={kernelName:Cg,backendName:"cpu",kernelFunc:Xxe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Yxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:o}=r;qe(a,"topk");const s=n.data.get(a.dataId).values,[l,u]=dz(s,a.shape,a.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const Zxe={kernelName:cw,backendName:"cpu",kernelFunc:Yxe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Jxe(t){const{inputs:e,attrs:n,backend:r}=t,{image:a,transforms:i}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=n,[c,d,p,f]=a.shape,[g,y]=u??[d,p],v=[c,g,y,f],b=rt(a.shape),x=b[0],w=b[1],S=b[2],C=rt(v),E=C[0],R=C[1],T=C[2],$=$r(a.dtype,be(v));$.fill(l);const P=r.data.get(a.dataId).values,D=r.data.get(i.dataId).values;for(let B=0;B<c;++B){const z=i.shape[0]===1?D:D.subarray(B*8,B*8+8);for(let q=0;q<g;++q)for(let Y=0;Y<y;++Y)for(let Z=0;Z<f;++Z){let H;const L=z[6]*Y+z[7]*q+1;if(L===0)continue;const Q=(z[0]*Y+z[1]*q+z[2])/L,J=(z[3]*Y+z[4]*q+z[5])/L,te=Rz(Q,p,s),oe=Rz(J,d,s);switch(o){case"nearest":H=iwe(P,d,p,x,w,S,B,oe,te,Z,l);break;case"bilinear":H=owe(P,d,p,x,w,S,B,oe,te,Z,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const he=B*E+q*R+Y*T+Z;$[he]=H}return r.makeTensorInfo(v,a.dtype,$)}return{dataId:r.write($,v,a.dtype),shape:a.shape,dtype:a.dtype}}const ewe={kernelName:dw,backendName:"cpu",kernelFunc:Jxe};function Rz(t,e,n){switch(n){case"reflect":return twe(t,e);case"wrap":return nwe(t,e);case"nearest":return awe(t,e);case"constant":default:return rwe(t)}}function twe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Su(0,n,e-1)}function nwe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Su(0,n,e-1)}function rwe(t,e){return t}function awe(t,e){return Su(0,t,e-1)}function a0(t,e,n,r,a,i,o,s,l,u,c){const d=o*r+s*a+l*i+u;return 0<=s&&s<e&&0<=l&&l<n?t[d]:c}function iwe(t,e,n,r,a,i,o,s,l,u,c){const d=Math.round(s),p=Math.round(l);return a0(t,e,n,r,a,i,o,d,p,u,c)}function owe(t,e,n,r,a,i,o,s,l,u,c){const d=Math.floor(s),p=Math.floor(l),f=d+1,g=p+1,y=(g-l)*a0(t,e,n,r,a,i,o,d,p,u,c)+(l-p)*a0(t,e,n,r,a,i,o,d,g,u,c),v=(g-l)*a0(t,e,n,r,a,i,o,f,p,u,c)+(l-p)*a0(t,e,n,r,a,i,o,f,g,u,c);return(f-s)*y+(s-d)*v}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function swe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;qe(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:s,outputShape:l,indices:u}=pz(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const lwe={kernelName:pw,backendName:"cpu",kernelFunc:swe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uwe(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a.shape.length,s=a.shape[i],l=new Array(o-1);let u=0;for(let f=0;f<o;f++)f!==i&&(l[u++]=a.shape[f]);const c=new Array(o).fill(0),d=a.shape.slice();d[i]=1;const p=new Array(s);for(let f=0;f<p.length;f++){c[i]=f;const g=ud({inputs:{x:a},backend:n,attrs:{begin:c,size:d}});p[f]=$n({inputs:{x:g},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(g)}return p}const cwe={kernelName:hw,backendName:"cpu",kernelFunc:uwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:o}=r;qe(a,"unsortedSegmentSum");const s=a.shape.length,l=i.shape.length,u=[],c=[],d=s-l;let p=i;for(let g=0;g<d;++g){const y=u2({inputs:{input:p},backend:n,attrs:{dim:g+1}});p=y,c.push(y)}for(let g=0;g<o;++g){const y=gl(g,"int32"),v=n.makeTensorInfo([],"int32",y),b=T7({inputs:{a:v,b:p},backend:n}),x=Lu({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),w=s2({inputs:{a:x,b:a},backend:n}),S=r0({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});u.push(S),c.push(v),c.push(b),c.push(x),c.push(w),c.push(S)}const f=Tz({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),f}const pwe={kernelName:fw,backendName:"cpu",kernelFunc:dwe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hwe=[c1e,Qge,p1e,f1e,n0e,g1e,b1e,x1e,k1e,C1e,N1e,I1e,R1e,M1e,F1e,L1e,B1e,U1e,W1e,l1e,H1e,K1e,Q1e,Z1e,e0e,a0e,eye,Yge,nye,aye,iye,sye,uye,dye,hye,mye,yye,vye,wye,Sye,Eye,Tye,_ye,Rye,Oye,Pye,Aye,Dye,Lye,zye,Uye,t1e,Wye,i0e,Zye,o0e,Jye,l0e,ibe,obe,lbe,c0e,dbe,hbe,mbe,ybe,vbe,p0e,f0e,Zge,wbe,rye,Sbe,Ebe,Tbe,n1e,g0e,b0e,_be,x0e,$be,Pbe,Abe,zbe,jbe,Vbe,Wbe,k0e,Hbe,Kbe,Qbe,Zbe,eve,nve,ave,C0e,ove,uve,pve,N0e,I0e,mve,bve,wve,R0e,Sve,Eve,Nve,Iz,Rve,a1e,M0e,Ove,Pve,Ave,Jge,UI,Lve,i1e,o1e,s1e,Bve,Uve,Wve,Hve,Kve,Xve,Yve,j0e,Jve,axe,oxe,cxe,V0e,pxe,fxe,gxe,W0e,cve,vxe,wxe,Sxe,Exe,Txe,_xe,$xe,Mxe,q0e,Pxe,X0e,Axe,Lxe,Bxe,Uxe,Wxe,J0e,Bye,Hxe,Kxe,Qxe,Zxe,ewe,$0e,lwe,cwe,pwe,Cve];for(const t of hwe)xw(t);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cd={},d2={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function fwe(t,e){cd[t]=e}function Zo(t,e){if(!(t in cd)||e!=null){const r=gwe(t,e);if(r!==null)cd[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=cd[t];return n==null||n.isContextLost()?(delete cd[t],Zo(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),cd[t])}function mwe(t){if(typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function gwe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??mwe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete cd[t]},!1),me().getBool("SOFTWARE_WEBGL_ENABLED")&&(d2.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",d2)||n.getContext("experimental-webgl",d2):n.getContext("webgl2",d2)}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/var i0;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(i0||(i0={}));var ji;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(ji||(ji={}));var oa;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(oa||(oa={}));function o0(t,e){return[e,t]}function ywe(t,e){return t*e}function p2(t){const e=be(t),n=Math.ceil(e/4);return Iv(n)}function lh(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function bwe(t,e){const[n,r]=lh(t,e);return n*r*4}function GI(t,e){const n=t;let r,a,i,o,s,l,u,c,d,p;return me().getNumber("WEBGL_VERSION")===2?(r=n.R32F,a=n.R16F,i=n.RGBA16F,o=n.RGBA32F,s=n.RED,u=4,c=1,d=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=t.RGBA,a=t.RGBA,i=t.RGBA,o=n.RGBA,s=t.RGBA,u=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:p}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ke(t,e){const n=e();return me().getBool("DEBUG")&&vwe(t),n}function vwe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Swe(t,e))}const xwe=596e-10,wwe=65504;function kwe(t){return!!(me().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||xwe<Math.abs(t)&&Math.abs(t)<wwe)}function Swe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function h2(t,e){return Il(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function Cwe(t,e){const n=Il(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Ke(t,()=>t.shaderSource(n,e)),Ke(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Ewe(t,e){const n=Il(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Ke(t,()=>t.shaderSource(n,e)),Ke(t,()=>t.compileShader(n)),me().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw $z(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const Nwe=/ERROR: [0-9]+:([0-9]+):/g;function $z(t,e){const n=Nwe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],a=t.split(`
`),i=a.length.toString().length+2,o=a.map((d,p)=>Wc((p+1).toString(),i)+d);let s=0;for(let d=0;d<o.length;d++)s=Math.max(o[d].length,s);const l=o.slice(0,r-1),u=o.slice(r-1,r),c=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Wc(u[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function Twe(t){return Il(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Iwe(t,e){if(Ke(t,()=>t.linkProgram(e)),!me().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function HI(t,e){if(Ke(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function _we(t,e){const n=Il(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ke(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Ke(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function Rwe(t,e){const n=Il(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ke(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Ke(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function $we(t){return Il(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function Owe(t,e){const n=me().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,a=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function Mwe(t){return Il(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function Oz(t,e,n,r,a,i,o){const s=t.getAttribLocation(e,n);return s===-1?!1:(Ke(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Ke(t,()=>t.vertexAttribPointer(s,a,t.FLOAT,!1,i,o)),Ke(t,()=>t.enableVertexAttribArray(s)),!0)}function Pwe(t,e,n){zwe(t,n),Ke(t,()=>t.activeTexture(t.TEXTURE0+n)),Ke(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function Fwe(t,e,n){return Il(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function Awe(t,e,n){return t.getUniformLocation(e,n)}function Dwe(t,e,n,r){Ke(t,()=>Pwe(t,e,r)),Ke(t,()=>t.uniform1i(n,r))}function qI(t,e,n){Ke(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Ke(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function Mz(t,e){Ke(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Ke(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function f2(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Lwe(t,e))}function Lwe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Il(t,e,n){const r=Ke(t,()=>e());if(r==null)throw new Error(n);return r}function zwe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const a=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${a}.`)}}function uh(t,e=2){return be(t.slice(0,t.length-e))}function ch(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function KI(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[uh(t),...ch(t)]),e}function Bwe(t,e=!1){let n=me().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=me().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&me().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((s,l)=>l>=t.length-2?Tv(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=ml(t).newShape);let a=be(t),i=null;t.length<=1&&a<=n?i=[1,a]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const s=uh(t);let l=2,u=2;t.length&&([l,u]=ch(t)),a=s*(l/2)*(u/2),i=Iv(a).map(c=>c*2)}else i=Iv(a);return i}function m2(t){return t%2===0}function g2(t,e){if(t=t.slice(-2),e=e.slice(-2),Sn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||m2(n)&&m2(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&m2(t[0])&&m2(e[0])}let XI,QI;function jwe(t){if(XI==null){const e=Zo(t);XI=e.getParameter(e.MAX_TEXTURE_SIZE)}return XI}function Uwe(t){if(QI==null){const e=Zo(t);QI=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,QI)}function Vwe(t){if(t===0)return 0;let e;const n=Zo(t);return xo(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:xo(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function xo(t,e){return t.getExtension(e)!=null}function Pz(t){try{if(Zo(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function Wwe(t){if(t===0)return!1;const e=Zo(t);if(t===1){if(!xo(e,"OES_texture_float"))return!1}else if(!xo(e,"EXT_color_buffer_float"))return!1;return YI(e)}function Gwe(t){if(t===0)return!1;const e=Zo(t);if(t===1){if(!xo(e,"OES_texture_float")||!xo(e,"WEBGL_color_buffer_float"))return!1}else{if(xo(e,"EXT_color_buffer_float"))return YI(e);const n="EXT_color_buffer_half_float";if(xo(e,n)){const r=e.getExtension(n);return Hwe(e,r)}return!1}return YI(e)}function YI(t){const e=GI(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function Hwe(t,e){const n=GI(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),s}function qwe(t){return t!==2?!1:Zo(t).fenceSync!=null}function s0(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&U(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const et=me();et.registerFlag("HAS_WEBGL",()=>et.getNumber("WEBGL_VERSION")>0),et.registerFlag("WEBGL_VERSION",()=>Pz(2)?2:Pz(1)?1:0),et.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),et.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>et.get("WEBGL_VERSION")===2),et.registerFlag("WEBGL_CPU_FORWARD",()=>!0),et.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),et.registerFlag("WEBGL_PACK",()=>et.getBool("HAS_WEBGL")),et.registerFlag("WEBGL_PACK_NORMALIZATION",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_CLIP",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_PACK_REDUCE",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_LAZILY_UNPACK",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_CONV_IM2COL",()=>et.getBool("WEBGL_PACK")),et.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>jwe(et.getNumber("WEBGL_VERSION"))),et.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>Uwe(et.getNumber("WEBGL_VERSION"))),et.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=et.getNumber("WEBGL_VERSION");return t===0?0:Vwe(t)}),et.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>et.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!_4()),et.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Wwe(et.getNumber("WEBGL_VERSION"))),et.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>et.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:et.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),et.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Gwe(et.getNumber("WEBGL_VERSION"))),et.registerFlag("WEBGL_FENCE_API_ENABLED",()=>qwe(et.getNumber("WEBGL_VERSION"))),et.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>et.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),et.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)}),et.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>_4()?1:-1,t=>{if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)}),et.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),et.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),et.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),et.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),et.registerFlag("WEBGL_EXP_CONV",()=>!1),et.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>et.getBool("IS_TEST")),et.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),et.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),et.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Va(){let t,e,n,r,a,i,o,s,l,u;return me().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=me().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dd(t,e,n="index"){const r=rt(e);return r.map((a,i)=>{const o=`int ${t[i]} = ${n} / ${a}`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${a}`:`index -= ${t[i]} * ${a}`;return`${o}; ${s};`}).join("")}function y2(t,e,n="index"){const r=rt(e);return r.map((a,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,s=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${s};`}).join("")}function Kwe(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]=`(${a[i+1]} * ${r[i+1]})`;return a}function Xwe(t,e,n="index"){const r=t.map((i,o)=>o),a=Kwe(r,e);return a.map((i,o)=>{const s=`int ${t[o]} = ${n} / ${a[o]}`,l=o===a.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${a[o]}`:`index -= ${t[o]} * ${a[o]}`;return`${s}; ${l};`}).join("")}function ZI(t){const e=rt(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function JI(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const Fz=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const{getBroadcastDims:Az}=s7;function Qwe(t,e,n){const r=[];if(t.forEach(p=>{const f=be(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?r.push(`uniform float ${p.name}${f>1?`[${f}]`:""};`):(r.push(`uniform sampler2D ${p.name};`),r.push(`uniform int offset${p.name};`)),n.enableShapeUniforms){const{uniformShape:g}=e_(n.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(g.length){case 1:r.push(`uniform int ${p.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${p.name}Shape;`);break}r.push(`uniform ivec2 ${p.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(p=>{r.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const a=r.join(`
`),i=t.map(p=>Ywe(p,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,s=Va(),l=e2e(s);let u,c,d=r2e(s);return e.isPacked?(u=Zwe(e.logicalShape,o,n.enableShapeUniforms),c=n2e(s)):(u=Jwe(e.logicalShape,o,n.enableShapeUniforms),c=t2e(s)),n.packedInputs&&(d+=s2e),[d,l,c,a,u,i,n.userCode].join(`
`)}function dh(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return v2e(t,e);case 1:return w2e(t,e);case 2:return S2e(t,e);case 3:return E2e(t,e);case 4:return T2e(t,e);case 5:return I2e(t);case 6:return _2e(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function Dz(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return b2e(t);case 1:return x2e(t,e);case 2:return k2e(t,e);case 3:return C2e(t,e);default:return N2e(t,e)}}function Ywe(t,e,n=!1,r){let a="";n?a+=Dz(t,r):a+=dh(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?a+=R2e(t,e):a+=$2e(t,e)),a}function Zwe(t,e,n){switch(t.length){case 0:return Lz();case 1:return l2e(t,e,n);case 2:return g2e(t,e,n);case 3:return c2e(t,e,n);default:return p2e(t,e,n)}}function Jwe(t,e,n){switch(t.length){case 0:return Lz();case 1:return u2e(t,e,n);case 2:return y2e(t,e,n);case 3:return d2e(t,e,n);case 4:return h2e(t,e,n);case 5:return f2e(t,e);case 6:return m2e(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function e2e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function t2e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function n2e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function r2e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${a2e}
    ${i2e}
    ${o2e}
  `}const a2e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,i2e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,o2e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,s2e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Lz(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function l2e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function u2e(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function c2e(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[2]/2),i=a*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec3(b, r, c);
    }
  `}function d2e(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${y2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=dd(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function p2e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[t.length-1]/2),i=a*Math.ceil(t[t.length-2]/2);let o=i,s="",l="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],s=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+s,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${s}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec${t.length}(${l});
    }
  `}function h2e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${y2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=dd(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function f2e(t,e){const n=dd(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function m2e(t,e){const n=dd(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function g2e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Sn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const a=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec2(r, c);
    }
  `}function y2e(t,e,n){return Sn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function pd(t){return`offset${t}`}function b2e(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Va();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function v2e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[a,i]=t.shapeInfo.texShape;if(a===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=pd(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[s,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${s}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function x2e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape,i=Va();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function w2e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${ph(t)}
      }
    `;const a=t.shapeInfo.texShape,i=a[0],o=a[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=pd(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${s});
      return sampleTexture(${n}, uv);
    }
  `}function k2e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],s=i[1],l=Va();if(i!=null&&Sn(n,i))return e?`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${a}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${a}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function S2e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&Sn(n,i)){if(e)return`
      float ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=i[0],f=i[1];return`
    float ${a}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:s}=ml(n),l=o;if(l.length<n.length){const p=hh(t,l),f=["row","col"];return`
      ${dh(p,e)}
      float ${a}(int row, int col) {
        return ${a}(${fh(f,s)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${ph(t)}
      }
    `;const u=i[0],c=i[1],d=pd(r);return c===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${a}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${a}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function C2e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const p=n.slice(1),f=[1,2],g=hh(t,p),y=["b","row","col"];return`
        ${Dz(g,e)}
        vec4 ${a}(int b, int row, int col) {
          return ${a}(${fh(y,f)});
        }
      `}const s=Va();if(e)return`
    vec4 ${a}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `;const l=o[0],u=o[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${a}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `}function E2e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:s,keptDims:l}=ml(n),u=s;if(u.length<n.length){const y=hh(t,u),v=["row","col","depth"];return`
        ${dh(y,e)}
        float ${a}(int row, int col, int depth) {
          return ${a}(${fh(v,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${ph(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],p=c[1],f=t.shapeInfo.flatOffset;if(p===i&&f==null)return e?`
      float ${a}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${a}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===o&&f==null)return e?`
      float ${a}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const g=pd(r);return e?`
    float ${a}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${g};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${a}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${g};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function N2e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Va();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,s=t.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=l[0],c=l[1],d=Math.ceil(i[o-1]/2);let p=d*Math.ceil(i[o-2]/2),f="int b, int row, int col",g=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let y=2;y<o-1;y++)f=`int b${y}, `+f,p*=i[o-y-1],g=`b${y} * ${p} + `+g;return`
    vec4 ${r}(${f}) {
      int index = ${g};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${a.texture2D}(${n}, uv);
    }
  `}function T2e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,{newShape:l,keptDims:u}=ml(n);if(l.length<n.length){const x=hh(t,l),w=["row","col","depth","depth2"];return`
      ${dh(x,e)}
      float ${a}(int row, int col, int depth, int depth2) {
        return ${a}(${fh(w,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${s}, ${o}, ${i}, 1)));
        ${ph(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1],g=`int stride2 = ${r}Shape[3];`,y=`int stride1 = ${r}Shape[2] * stride2;`,v=`int stride0 = ${r}Shape[1] * stride1;`;if(f===s&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        ${g}
        ${y}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===i&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const b=pd(r);return e?`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${g}
      ${y}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${b});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${p}, ${f}, index + ${b});
      return sampleTexture(${r}, uv);
    }
  `}function I2e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e[4],i=e[3]*a,o=e[2]*i,s=e[1]*o,{newShape:l,keptDims:u}=ml(e);if(l.length<e.length){const y=hh(t,l),v=["row","col","depth","depth2","depth3"];return`
      ${dh(y)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${fh(v,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${s}, ${o}, ${i}, ${a})) +
          depth3;
        ${ph(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],f=d[1];if(f===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=pd(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} + depth * ${i} +
          depth2 * ${a} + depth3 + ${g};
      vec2 uv = uvFromFlat(${p}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function _2e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=ml(e);if(a.length<e.length){const v=hh(t,a),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${dh(v)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${fh(b,i)});
      }
    `}const o=e[5],s=e[4]*o,l=e[3]*s,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${s})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${ph(t)}
      }
    `;const d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,f=p[0],g=p[1];if(g===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${s}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=pd(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${s} + depth3 * ${o} + depth4 + ${y};
      vec2 uv = uvFromFlat(${f}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function ph(t){const e=t.name,n=be(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function R2e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,s=Az(t.shapeInfo.logicalShape,e.logicalShape),l=On(o),u=o-i;let c;const d=["x","y","z","w","u","v"];i===0?c="":o<2&&s.length>=1?c="coords = 0;":c=s.map(v=>`coords.${d[v+u]} = 0;`).join(`
`);let p="";o<2&&i>0?p="coords":p=t.shapeInfo.logicalShape.map((v,b)=>`coords.${d[b+u]}`).join(", ");let f="return outputValue;";const g=be(t.shapeInfo.logicalShape)===1,y=be(e.logicalShape)===1;if(i===1&&!g&&!y)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!y)o===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(s.length){const v=i-2,b=i-1;s.indexOf(v)>-1&&s.indexOf(b)>-1?f="return vec4(outputValue.x);":s.indexOf(v)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(b)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${a}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${p});
      ${f}
    }
  `}function $2e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===l&&t.shapeInfo.flatOffset==null&&Sn(o,i))return`
      float ${a}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=On(l),c=Az(t.shapeInfo.logicalShape,e.logicalShape),d=l-s;let p;const f=["x","y","z","w","u","v"];s===0?p="":l<2&&c.length>=1?p="coords = 0;":p=c.map(y=>`coords.${f[y+d]} = 0;`).join(`
`);let g="";return l<2&&s>0?g="coords":g=t.shapeInfo.logicalShape.map((y,v)=>`coords.${f[v+d]}`).join(", "),`
    float ${a}() {
      ${u} coords = getOutputCoords();
      ${p}
      return get${r}(${g});
    }
  `}function On(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function e_(t,e,n){const{newShape:r,keptDims:a}=ml(e),i=e.length,o=t&&i===3&&e[0]===1,s=o?e.slice(1):r,l=!t&&i>1&&!Sn(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?s:e,keptDims:a}}function hh(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function fh(t,e){return e.map(n=>t[n]).join(", ")}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function O2e(t,e,n,r){const a=n.map((c,d)=>{const p={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(p.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:p}}),i=a.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=Qwe(a,o,e),l=Ewe(t.gl,s),u=t.createProgram(l);return me().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:e,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:i,outShapeInfo:o},zz(t,e,u))}function zz(t,e,n){const r={},a={},i={},o=[];let s,l,u,c=null,d=null;d=t.getUniformLocation(n,"NAN",!1),me().getNumber("WEBGL_VERSION")===1&&(c=t.getUniformLocation(n,"INFINITY",!1));const p=!1;for(let f=0;f<e.variableNames.length;f++){const g=e.variableNames[f];r[g]=t.getUniformLocation(n,g,p),r[`offset${g}`]=t.getUniformLocation(n,`offset${g}`,p),e.enableShapeUniforms&&(a[`${g}Shape`]=t.getUniformLocation(n,`${g}Shape`,p),i[`${g}TexShape`]=t.getUniformLocation(n,`${g}TexShape`,p))}return e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",p),u=t.getUniformLocation(n,"outShapeStrides",p),l=t.getUniformLocation(n,"outTexShape",p)),e.customUniforms&&e.customUniforms.forEach((f,g)=>{o[g]=t.getUniformLocation(n,f.name,p)}),{uniformLocations:r,customUniformLocations:o,infLoc:c,nanLoc:d,inShapesLocations:a,inTexShapesLocations:i,outShapeLocation:s,outShapeStridesLocation:u,outTexShapeLocation:l}}function Bz(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const a=n.logicalShape,i=e[r],o=i.shape;if(!Sn(a,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${a} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const s=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!Sn(s,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${l} must match`)})}function M2e(t,e,n,r,a){e.program.enableShapeUniforms||(Bz(e.inShapeInfos,n),Bz([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),me().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((l,u)=>{const c=e.program.variableNames[u],d=e.uniformLocations[c],p=e.uniformLocations[`offset${c}`],f=e.inShapesLocations[`${c}Shape`],g=e.inTexShapesLocations[`${c}TexShape`];if(f){const{uniformShape:y}=e_(e.program.packedInputs,l.shape,l.texData.texShape);switch(y.length){case 1:t.gl.uniform1iv(f,new Int32Array(y));break;case 2:t.gl.uniform2iv(f,new Int32Array(y));break;case 3:t.gl.uniform3iv(f,new Int32Array(y));break;case 4:t.gl.uniform4iv(f,new Int32Array(y));break}}if(g&&t.gl.uniform2i(g,l.texData.texShape[0],l.texData.texShape[1]),d!=null){if(l.isUniform){if(be(l.shape)<2)t.gl.uniform1f(d,l.uniformValues[0]);else{let y=l.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),t.gl.uniform1fv(d,y)}return}l.texData.slice!=null&&p!=null&&t.gl.uniform1i(p,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,d,u)}});const s=e.outShapeLocation;if(s)switch(r.shape.length){case 1:t.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(s,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=rt(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&a&&e.program.customUniforms.forEach((l,u)=>{const c=e.customUniformLocations[u],d=a[u];if(l.type==="float")t.gl.uniform1fv(c,d);else if(l.type==="vec2")t.gl.uniform2fv(c,d);else if(l.type==="vec3")t.gl.uniform3fv(c,d);else if(l.type==="vec4")t.gl.uniform4fv(c,d);else if(l.type==="int")t.gl.uniform1iv(c,d);else if(l.type==="ivec2")t.gl.uniform2iv(c,d);else if(l.type==="ivec3")t.gl.uniform3iv(c,d);else if(l.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}),t.executeProgram()}function P2e(t,e,n){let r="";e.concat(n).forEach(o=>{const s=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=e_(t.packedInputs,o.shape,l);let p="",f="",g="";if(c.length===1&&t.packedInputs){const C=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${C[0]>1}_${C[1]>1}`}else if(c.length===2&&!t.packedInputs)f=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const C=rt(c);g=`${C[0]===l[1]}_${C[C.length-1]===l[1]}`}const y=o.shape.length,v=c.length===2&&Sn(o.shape,l),b=be(o.shape)===1,x=ed(o.shape,n.shape),w=!t.packedInputs&&y===n.shape.length&&Sn(l,n.texData.texShape),S=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${y}_${w}_${u?d:""}_${c.length}_${b}_${x}_${v}_${p}_${f}_${g}_${S}_${s}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${s}`}});const a=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+a+`${me().getNumber("WEBGL_VERSION")}`,i}function Wa(t){return me().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class F2e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=i0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Va();this.outputShape=e,this.enableShapeUniforms=Wa(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?y2(["r","c","d"],e):dd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class A2e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=i0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Va();this.outputShape=e,this.enableShapeUniforms=Wa(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?y2(["r","c","d"],e):dd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class D2e{constructor(e){this.variableNames=["A"],this.outTexUsage=ji.DOWNLOAD;const n=Va();this.outputShape=e,this.userCode=`
      ${Fz}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class L2e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ji.DOWNLOAD;const n=Va();this.outputShape=e,this.userCode=`
      ${Fz}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class z2e{constructor(e,n=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Va();this.outputShape=e,this.enableShapeUniforms=Wa(this.outputShape.length);let a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?JI():ZI(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${r.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${r.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class B2e{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Va();this.outputShape=e,this.enableShapeUniforms=Wa(this.outputShape.length);let a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){const l=o*2+s;a+=`
          localCoords = coords;
          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${s};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?JI():ZI(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${a}

          ${r.output} = ${i};
        }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function j2e(t){const e=Va(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Cwe(t,n)}function U2e(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return _we(t,e)}function V2e(t){const e=new Uint16Array([0,1,2,2,1,3]);return Rwe(t,e)}function l0(t,e,n,r,a,i){Owe(e,n);const o=$we(t),s=t.TEXTURE_2D;return Ke(t,()=>t.bindTexture(s,o)),Ke(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Ke(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Ke(t,()=>t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)),Ke(t,()=>t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)),me().getNumber("WEBGL_VERSION")===1?Ke(t,()=>t.texImage2D(s,0,r,e,n,0,a,i,null)):Ke(t,()=>t.texStorage2D(s,1,r,e,n)),Ke(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function jz(t){return t.internalFormatFloat}function W2e(t,e,n,r){const[a,i]=o0(e,n);return l0(t,a,i,jz(r),r.textureFormatFloat,t.FLOAT)}function Uz(t){return t.internalFormatHalfFloat}function G2e(t,e,n,r){const[a,i]=o0(e,n);return l0(t,a,i,Uz(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function Vz(t){return t.downloadTextureFormat}function H2e(t,e,n,r){const[a,i]=o0(e,n);return l0(t,a,i,Vz(r),t.RGBA,t.UNSIGNED_BYTE)}function Wz(t){return t.internalFormatPackedFloat}function q2e(t,e,n,r){const[a,i]=lh(e,n);return l0(t,a,i,Wz(r),t.RGBA,t.FLOAT)}function Gz(t){return t.internalFormatPackedHalfFloat}function K2e(t,e,n,r){const[a,i]=lh(e,n);return l0(t,a,i,Gz(r),t.RGBA,r.textureTypeHalfFloat)}function X2e(t,e,n){return Ke(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Oz(t,e,"clipSpacePos",n,3,20,0)&&Oz(t,e,"uv",n,2,20,12)}function Q2e(t,e,n,r,a,i){Ke(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,s,l;a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),s=t.FLOAT,l=i.internalFormatPackedFloat),o.set(a),me().getNumber("WEBGL_VERSION")===2?Ke(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,s,o)):Ke(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,s,o)),Ke(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Y2e(t,e,n){Ke(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?me().getNumber("WEBGL_VERSION")===2?Ke(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ke(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):me().getNumber("WEBGL_VERSION")===2?Ke(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Ke(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Ke(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Z2e(t,e,n,r){const a=t.createBuffer();Ke(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,a));const i=4*4*e*n;return Ke(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)),Ke(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Ke(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),a}function J2e(t,e,n){const r=t,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function eke(t,e,n,r){const[a,i]=o0(e,n),o=4,s=new Uint8Array(ywe(e*n,o));return Ke(t,()=>t.readPixels(0,0,a,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function tke(t,e,n,r,a,i,o,s){const l=t,u=new Float32Array(bwe(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function nke(t,e,n){const r=new Float32Array(e*n*4);return Ke(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class t_{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=me().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,fwe(n,e)):this.gl=Zo(n);let r="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),me().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=h2(this.gl,i),xo(this.gl,o))this.textureHalfFloatExtension=h2(this.gl,o);else if(me().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),xo(this.gl,a))this.colorBufferHalfFloatExtension=h2(this.gl,a);else if(me().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",xo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(xo(this.gl,a))this.colorBufferHalfFloatExtension=this.gl.getExtension(a);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=U2e(this.gl),this.indexBuffer=V2e(this.gl),this.framebuffer=Mwe(this.gl),this.textureConfig=GI(this.gl,this.textureHalfFloatExtension)}get debug(){return me().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Ke(e,()=>e.finish()),Ke(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Ke(e,()=>e.deleteFramebuffer(this.framebuffer)),Ke(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Ke(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Ke(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),W2e(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),G2e(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),H2e(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),Y2e(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,a){this.throwIfDisposed(),Q2e(this.gl,e,n,r,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),K2e(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),q2e(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(Mz(this.gl,this.framebuffer),this.outputTexture=null),Ke(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>eke(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,a,i,o){return tke(this.gl,e,n,r,a,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return J2e(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const a=Z2e(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(me().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=a.clientWaitSync(i,0,0);return o===a.ALREADY_SIGNALED||o===a.CONDITION_SATISFIED},n=i}else me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>nke(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=j2e(n));const r=Twe(n);return Ke(n,()=>n.attachShader(r,this.vertexShader)),Ke(n,()=>n.attachShader(r,e)),Iwe(n,r),this.debug&&HI(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=X2e(n,this.program,this.vertexBuffer)),r}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Ke(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&HI(this.gl,this.program),Ke(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?Fwe(this.gl,e,n):Awe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Ke(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),Dwe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[a,i]=lh(n,r);this.setOutputMatrixTextureDriver(e,a,i)}setOutputMatrixWriteRegion(e,n,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,n)}setOutputPackedMatrixWriteRegion(e,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&HI(this.gl,this.program),f2(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),Ke(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Ke(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=h2(this.gl,me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(a.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await XN(()=>this.disposed||this.isQueryAvailable(e,me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),a=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=rke(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in me().platform&&(r=me().platform.setTimeoutCustom.bind(me().platform)),XN(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),qI(this.gl,e,this.framebuffer),this.debug&&f2(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(qI(this.gl,this.outputTexture,this.framebuffer),this.debug&&f2(this.gl)):Mz(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const a=this.gl;qI(a,e,this.framebuffer),this.debug&&f2(a),this.outputTexture=e,Ke(a,()=>a.viewport(0,0,n,r)),Ke(a,()=>a.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,a){this.throwIfDisposed(),Ke(this.gl,()=>this.gl.scissor(e,n,r,a))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function rke(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const{addImpl:ake,bincountImpl:Hz,bincountReduceImpl:ike,castImpl:oke,ceilImpl:ske,concatImpl:lke,equalImpl:uke,expImpl:cke,expm1Impl:dke,floorImpl:pke,gatherNdImpl:hke,gatherV2Impl:fke,greaterImpl:mke,greaterEqualImpl:gke,lessImpl:yke,lessEqualImpl:bke,linSpaceImpl:vke,logImpl:xke,maxImpl:wke,maximumImpl:kke,minimumImpl:Ske,multiplyImpl:Cke,negImpl:Eke,notEqualImpl:Nke,prodImpl:Tke,raggedGatherImpl:Ike,raggedTensorToTensorImpl:_ke,rangeImpl:Rke,rsqrtImpl:$ke,scatterImpl:Oke,sigmoidImpl:Mke,simpleAbsImpl:qz,sliceImpl:Pke,sparseFillEmptyRowsImpl:Fke,sparseReshapeImpl:Ake,sparseSegmentReductionImpl:Kz,sqrtImpl:Dke,stridedSliceImpl:Lke,stringNGramsImpl:zke,stringSplitImpl:Bke,stringToHashBucketFastImpl:jke,subImpl:Uke,tileImpl:Vke,topKImpl:Wke,transposeImpl:n_,uniqueImpl:Gke}=e1e;/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Xz(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Ga(t,e){return e===1?[t]:Xz(t,e)}function Hke(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class qke{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Wa(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Ga("rc",this.rank),r=On(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${a}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let i=`${r===0?"r":"rp1"}, ${a===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],a=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${a};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Qz{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Wa(this.outputShape.length);let r="";for(let a=0;a<4;a++){let i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${a}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${a>0?"}":""}
      `}this.userCode=`
      ${Kke(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?JI():ZI(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function Kke(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?Xwe(["r","c","d"],"inputShape"):dd(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class Xke{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,n,r){const a=Zz(n,r),i=Jz(e,a,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=Yz(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].shift();return this.usedTextures[i].push(l),l}let s;return a===oa.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===oa.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===oa.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===oa.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===oa.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,n,r,a){if(this.freeTextures==null)return;const i=Zz(r,a),o=Jz(n,i,a);o in this.freeTextures||(this.freeTextures[o]=[]);const s=Yz(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,a),l=me().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Qke(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F||e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function Yz(t,e,n,r,a){const i=Yke(e,r);let o;if(a){const[l,u]=lh(t[0],t[1]);o=l*u}else{const[l,u]=o0(t[0],t[1]);o=l*u}const s=Qke(n,i);return o*s}function Yke(t,e){switch(t){case oa.PACKED_2X2_FLOAT32:return Wz(e);case oa.PACKED_2X2_FLOAT16:return Gz(e);case oa.UNPACKED_FLOAT32:return jz(e);case oa.UNPACKED_FLOAT16:return Uz(e);case oa.PACKED_4X1_UNSIGNED_BYTE:return Vz(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function Zke(t){return me().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?oa.PACKED_2X2_FLOAT32:oa.UNPACKED_FLOAT32:t?oa.PACKED_2X2_FLOAT16:oa.UNPACKED_FLOAT16}function Zz(t,e){if(t===ji.UPLOAD)return oa.PACKED_2X2_FLOAT32;if(t===ji.RENDER||t==null)return Zke(e);if(t===ji.DOWNLOAD||t===ji.PIXELS)return oa.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function Jz(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class _l{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Wa(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const wo="if (isnan(x)) return x;",Jke="return x;",eB="return abs(x);",eSe="return (x >= 0.0) ? x : (exp(x) - 1.0);",tSe=wo+`
  return (x < 0.0) ? 0.0 : x;
`,nSe=wo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,mh="return x;",rSe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const aSe="return x;",iSe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,oSe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sSe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,lSe="return 1.0 / (1.0 + exp(-1.0 * x));";class hd{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Wa(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class uSe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Wa(this.outputShape.length);const n=e.length,r=Ga("rc",n),a=On(n),i=Hke(n,r),o=r.slice(-2),s=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${a} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${s}));
      }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cSe=Bw,dSe=1e-7,pSe=1e-4,r_={};function hSe(t){return t in r_||(r_[t]={}),r_[t]}const fSe=me().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),mSe=600;function gSe(){return me().global.screen==null?1024:me().global.screen.height*me().global.screen.width*window.devicePixelRatio*mSe/1024/1024}class J2 extends Nv{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!me().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof t_)n=e;else{const r=Zo(me().getNumber("WEBGL_VERSION"),e);n=new t_(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Zo(me().getNumber("WEBGL_VERSION"));n=new t_(r),this.binaryCache=hSe(me().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Xke(this.gpgpu),this.numMBBeforeWarning=gSe(),this.texData=new KN(this,wl())}nextDataId(){return J2.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,n,r){if((me().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||me().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:n,dtype:r,values:e,usage:ji.UPLOAD,refCount:1}),a}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,a,i){if(me().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:a,values:n,usage:ji.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:a,complexTensorInfos:i,slice:o,shape:s,isPacked:l}=n;if(o!=null){let p;l?p=new hd(s,mh):p=new _l(s,mh);const f=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:a}],a),g=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(a==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=wi());let d;if(a==="complex64"){const p=this.readSync(i.real.dataId),f=this.readSync(i.imag.dataId);d=Nl(p,f)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=wi()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const g=this.pendingRead.get(e);return new Promise(y=>g.push(y))}const n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:o,complexTensorInfos:s,isPacked:l}=n;if(i!=null){let g;l?g=new hd(a,mh):g=new _l(a,mh);const y=this.runWebGLProgram(g,[{dataId:e,shape:a,dtype:o}],o),v=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),v}if(r!=null)return this.convertAndCacheOnCPU(e);if(me().getBool("DEBUG")&&!me().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&me().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(o!=="complex64"&&me().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const g=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(g.texture.texture,...p2(a))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const g=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),y=g[0],v=g[1];d=Nl(y,v)}else if(u==null)d=this.getValuesFromTexture(e);else{const g=be(a);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,g)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const g=this.gpgpu.gl;Ke(g,()=>g.deleteBuffer(u))}const p=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(g=>g(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&wl().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const r=this.texData.get(e),{values:a,shape:i,slice:o,dtype:s,isPacked:l,texture:u}=r;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let f;l?f=new hd(i,mh):f=new _l(i,mh);const g=this.runWebGLProgram(f,[{dataId:e,shape:i,dtype:s}],s),y=this.readToGPU(g,n);return this.disposeIntermediateTensorInfo(g),y}if(u==null)throw a!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=wl().makeTensorFromTensorInfo(c),p=this.texData.get(c.dataId);return Object.assign({tensorRef:d},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>yl(a));return Tt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Tt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!kwe(r))throw me().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:a}=this.texData.get(e),i=be(n);if(me().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),f=this.texData.get(p.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...p2(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(p),g}const o=me().getBool("WEBGL_PACK")&&a===!0,s=o?KI(n):n,l=o?new L2e(s):new D2e(s),u=this.runWebGLProgram(l,[{shape:s,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let a=!1;this.programTimersStack==null?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=fl(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=fl(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,a&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);s.kernelMs=nA(l),s.getExtraProfileInfo=()=>l.map((u,c)=>({name:o[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:wi(),endMs:null}}endTimer(e){return me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=wi(),e)}async getQueryTime(e){if(me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:a,usage:i,isPacked:o,slice:s}=this.texData.get(e),l=s&&s.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=fSe){return me().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&be(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Bi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return cSe(e.shape,n)}packedUnaryOp(e,n,r){const a=new hd(e.shape,n),i=this.compileAndRun(a,[e],r);return wl().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const a=qz(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,a)}if(me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,eB,e.dtype);const n=new _l(e.shape,eB),r=this.compileAndRun(n,[e]);return wl().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&ws(r[0])){const i=r.map(o=>ks(o));a=this.write(i,e,n)}else a=this.write(r,e,n);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:n}}makeOutput(e,n,r){return wl().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new uSe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new qke(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[uh(e.shape),...ch(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[uh(n),...ch(n)],o=new Qz(i,r),s=!0,l=[r],u=this.runWebGLProgram(o,[a],e.dtype,l,s);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:a,shape:i,dtype:o}=r;if(n!=null){const p=be(i),f=n[0]*n[1]*4;U(p<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=KI(i);let l;a?l=new A2e(s):l=new F2e(s);const u=!0,c=[n??p2(s)],d=this.runWebGLProgram(l,[{shape:s,dtype:o,dataId:e}],o,c,u,n);return{dtype:o,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,a,i=!1,o){const s=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(s.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===i0.DENSE){const b=o??p2(e.outputShape);l.texShape=b.map(x=>x*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),be(s.shape)===0)return l.values=$r(s.dtype,0),s;const u=[],c=n.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(b.dataId);if(x.texture==null){if(!e.packedInputs&&be(b.shape)<=me().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!x.isPacked!=!!e.packedInputs)b=x.isPacked?this.unpackTensor(b):this.packTensor(b),u.push(b),x=this.texData.get(b.dataId);else if(x.isPacked&&!g2(x.shape,b.shape)){const w=b,S=b.shape;b.shape=x.shape,b=this.packedReshape(b,S),u.push(b),x=this.texData.get(b.dataId),w.shape=S}return{shape:b.shape,texData:x,isUniform:!1}});this.uploadToGPU(s.dataId);const d={shape:s.shape,texData:l,isUniform:!1},p=P2e(e,c,d),f=this.getAndSaveBinary(p,()=>O2e(this.gpgpu,e,c,d)),g=this.activeTimers!=null;let y;g&&(y=this.startTimer()),me().get("ENGINE_COMPILE_ONLY")||M2e(this.gpgpu,f,c,d,a),u.forEach(b=>this.disposeIntermediateTensorInfo(b)),g&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const v=me().get("WEBGL_FLUSH_THRESHOLD");if(v>0){const b=wi();b-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!me().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}compileAndRun(e,n,r,a,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,a,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(me().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Xt(()=>{if(!me().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=me().getBool("DEBUG");me().set("DEBUG",!1);const n=this.abs(Bt(1e-8)).dataSync()[0];if(me().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?dSe:pSe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:a,values:i,texture:o,usage:s,isPacked:l}=n;if(o!=null)return;const u=this.activeTimers!=null;let c;u&&(c=wi());let d=n.texShape;if(d==null&&(d=Bwe(r,l),n.texShape=d),i!=null){const p=KI(r);let f,g=d[1],y=d[0];const v=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!v)&&([g,y]=lh(d[0],d[1])),l?f=new B2e(p,v):f=new z2e(p,v);const b=v?[y,g]:d,x=this.makeTensorInfo(b,a),w=this.texData.get(x.dataId);v?w.usage=ji.PIXELS:w.usage=ji.UPLOAD,w.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),g,y,i);const S=[[y,g]],C=!0,E=this.runWebGLProgram(f,[x],a,S,C),R=this.texData.get(E.dataId);n.texShape=R.texShape,n.isPacked=R.isPacked,n.usage=R.usage,me().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(n.texture=R.texture,n.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(x),u&&(this.uploadWaitMs+=wi()-c)}else{const p=this.acquireTexture(d,s,a,l);n.texture=p}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:a}=r;return this.releaseGPUData(e),n!=null&&(r.values=ySe(n,a)),r.values}acquireTexture(e,n,r,a){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,a)}computeBytes(e,n){return e[0]*e[1]*_v(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(a=>{try{this.checkCompletion_(n),a(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await P9(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?($z(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:n,customUniformLocations:r,infLoc:a,nanLoc:i,inShapesLocations:o,inTexShapesLocations:s,outShapeLocation:l,outShapeStridesLocation:u,outTexShapeLocation:c}=zz(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=n,e.customUniformLocations=r,e.infLoc=a,e.nanLoc=i,e.inShapesLocations=o,e.inTexShapesLocations=s,e.outShapeLocation=l,e.outShapeStridesLocation=u,e.outTexShapeLocation=c}}}J2.nextDataId=0;function ySe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
* @license
* Copyright 2020 Google Inc. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/R4()&&H4("webgl",()=>new J2,2);/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const a_=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class gh{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Ut(n,r),this.enableShapeUniforms=Wa(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const u0=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class c0{constructor(e,n,r,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ut(n,r);const i=this.outputShape.length;this.enableShapeUniforms=Wa(i);let o="";if(a)if(i===0||be(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${On(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const s=Ga("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ti(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const bSe={kernelName:Gm,backendName:"webgl",kernelFunc:Ti};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Bu(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=Ti({inputs:{x:r},backend:n}),l=Ti({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:l},i}const vSe={kernelName:Wv,backendName:"webgl",kernelFunc:Bu};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const tB="return (a < 0.) ? b * a : a;",nB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function xSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",gl(i,"float32")),s=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new c0(nB,a.shape,o.shape):new gh(tB,a.shape,o.shape),l=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const wSe={kernelName:bx,backendName:"webgl",kernelFunc:xSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const rB="return (a < 0.) ? b * a : a;",aB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function kSe(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e,i=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new c0(aB,r.shape,a.shape):new gh(rB,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}const SSe={kernelName:Dx,backendName:"webgl",kernelFunc:kSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yh="if (isnan(x)) return x;";function Qt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:i})=>{const{x:o}=a,s=i,l=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&n!=null){const d=s.texData.get(o.dataId),p=n(d.values,l);return s.makeTensorInfo(o.shape,l,p)}const u=me().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new hd(o.shape,e):c=new _l(o.shape,t),s.runWebGLProgram(c,[o],l)}}function sa({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:i}){return({inputs:o,backend:s})=>{const{a:l,b:u}=o,c=s;if(r&&l.dtype==="complex64"){const g=c.texData.get(l.dataId),y=c.texData.get(u.dataId),[v,b]=[[g.complexTensorInfos.real,y.complexTensorInfos.real],[g.complexTensorInfos.imag,y.complexTensorInfos.imag]].map(w=>{const[S,C]=w,E={dataId:S.dataId,dtype:S.dtype,shape:l.shape},R={dataId:C.dataId,dtype:C.dtype,shape:u.shape},T=new gh(t,l.shape,u.shape);return c.runWebGLProgram(T,[E,R],oi(S.dtype,C.dtype))}),x=Bu({inputs:{real:v,imag:b},backend:c});return c.disposeIntermediateTensorInfo(v),c.disposeIntermediateTensorInfo(b),x}const d=i||oi(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&a!=null){const g=c.texData.get(l.dataId).values,y=c.texData.get(u.dataId).values,v=l.dtype==="string"?sd(g):g,b=l.dtype==="string"?sd(y):y,[x,w]=a(l.shape,u.shape,v,b,d),S=c.makeTensorInfo(w,d),C=c.texData.get(S.dataId);return C.values=x,S}const p=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return p?f=new c0(e,l.shape,u.shape,n):f=new gh(t,l.shape,u.shape),c.runWebGLProgram(f,[l,u],d)}}function d0(t,e=!1){if(t==="linear")return e?aSe:Jke;if(t==="relu")return e?oSe:tSe;if(t==="elu")return e?iSe:eSe;if(t==="relu6")return e?sSe:nSe;if(t==="prelu")return e?aB:rB;if(t==="leakyrelu")return e?nB:tB;if(t==="sigmoid")return e?lSe:rSe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class iB{constructor(e,n,r,a=!1,i=!1,o=!1,s=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Wa(this.outputShape.length);const c=a?e[1]:e[2],d=Math.ceil(c/2),p=a?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",g=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],y=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",b="";s&&(l?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:u?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:v=`vec4 activation(vec4 x) {
          ${s}
        }`,b="result = activation(result);");const x=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let w="rc.x",S="rc.x";e[0]<n[0]?w=`int(min(float(rc.x), ${e[0]-1}.))`:n[0]<e[0]&&(S=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${d}; i++) {
          int batchA = ${w};
          int batchB = ${S};
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${g[0]} * ${y[0]});
          result += (${g[1]} * ${y[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${b}

        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const oB={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class sB{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ut(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lB="return a * b;";function i_(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,i=oi(r.dtype,a.dtype);if(r.dtype==="complex64"){const s=n.texData.get(r.dataId),l=n.texData.get(a.dataId),u=new sB(oB.REAL,r.shape,a.shape),c=new sB(oB.IMAG,r.shape,a.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:r.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:a.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:a.shape}],p=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),g=Bu({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}if(n.shouldExecuteOnCPU([r,a])){const s=n.texData.get(r.dataId),l=n.texData.get(a.dataId),[u,c]=Cke(r.shape,a.shape,s.values,l.values,i),d=n.makeTensorInfo(c,i),p=n.texData.get(d.dataId);return p.values=u,d}let o;return me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new c0(lB,r.shape,a.shape):o=new gh(lB,r.shape,a.shape),n.runWebGLProgram(o,[r,a],i)}const CSe={kernelName:ig,backendName:"webgl",kernelFunc:i_};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ESe(t,e,n){const r=[uh(t.shape),...ch(t.shape)],a={dtype:t.dtype,shape:r,dataId:t.dataId},i=[uh(e),...ch(e)],o=new Qz(i,r),s=!0,l=[r],u=n.runWebGLProgram(o,[a],t.dtype,l,s);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Le(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,o=n,s=be(a.shape),l=QN(i,s),u=be(l);U(s===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${a.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(a.dataId);return c.isPacked&&!g2(a.shape,l)&&!(c.texture!==null&&g2(c.shape,l))?ESe(a,l,o):(o.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype})}const NSe={kernelName:Vx,backendName:"webgl",kernelFunc:Le};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class uB{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:o}=e;this.outputShape=[a,o];const s=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${Vc(d)?d.toPrecision(2):d}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${s};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class TSe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:o}=e;this.outputShape=[a,o];let s="0.0",l="";n==="prod"?s="1.0":n==="min"?(s="1.0 / 1e-20",l="min"):n==="max"&&(s="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,d=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(s="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(s="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let g="";i%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${s};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${s});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ISe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=t2(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function fd(t,e,n,r){const a=ISe(t.shape);let i=t;for(let o=0;o<a.length;o++){const{inSize:s,windowSize:l,outSize:u}=a[o];let c,d;n==="mean"?c=o===0?new uB({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},s):new uB({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u}):c=new TSe({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:u},n),d=i,i=r.runWebGLProgram(c,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class _Se{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const a=On(this.rank),i=RSe(n);this.userCode=`
    void main() {
      ${a} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function RSe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let a=0;a<t.length;a++)r[t[a]]=n[a];return r.join()}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class $Se{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=On(this.rank),i=Xz("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=i[c];const s=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`
    void main() {
      ${a} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b2(t,e,n){const r=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $Se(t.shape,e):new _Se(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function OSe(t,e,n,r){const a=e,i=t.shape.length,o=Zt(a,t.shape);let s=o;const l=mr(s,i),u=l!=null;let c=t;u&&(c=b2(t,l,r),s=gr(s.length,i)),ia("sum",s,i);const[d,p]=aa(c.shape,s);let f=d;n&&(f=Pr(d,o));const g=be(p),y=be(t.shape)/g,v=Le({inputs:{x:c},attrs:{shape:[y,g]},backend:r}),b=Cw(t.dtype),x=fd(v,b,"sum",r),w=Le({inputs:{x},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(x),u&&r.disposeIntermediateTensorInfo(c),w}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function v2(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r;return OSe(a,i,o,n)}const MSe={kernelName:Yx,backendName:"webgl",kernelFunc:v2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Ha(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{perm:i}=r,o=n,s=a.shape.length,l=new Array(s);for(let c=0;c<l.length;c++)l[c]=a.shape[i[c]];let u;if(o.shouldExecuteOnCPU([a])){const c=o.texData.get(a.dataId).values,d=n_(c,a.shape,a.dtype,i,l);u=o.makeTensorInfo(l,a.dtype);const p=o.texData.get(u.dataId);p.values=d}else u=b2(a,i,o);return u}const PSe={kernelName:Dp,backendName:"webgl",kernelFunc:Ha};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cB=1e3;function x2({a:t,b:e,transposeA:n,transposeB:r,backend:a,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],p=r?e.shape[c-1]:e.shape[c-2],f=n?t.shape[u-1]:t.shape[u-2],g=r?e.shape[c-2]:e.shape[c-1],y=t.shape.slice(0,-2),v=e.shape.slice(0,-2),b=be(y),x=be(v),w=Ut(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,g]);U(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const S=n?[b,d,f]:[b,f,d],C=r?[x,g,p]:[x,p,g],E=Le({inputs:{x:t},backend:a,attrs:{shape:S}}),R=Le({inputs:{x:e},backend:a,attrs:{shape:C}}),T=[E,R],$=Math.max(b,x),P=n?E.shape[1]:E.shape[2],D=i!=null,B=o!=null,z=l==="leakyrelu",q=l!=null?d0(l,!0):null,Y=D||B||z||q!=null;let Z;if((f===1||g===1)&&P>cB&&Y===!1){let L=E,Q=R;n&&(L=Ha({inputs:{x:E},backend:a,attrs:{perm:[0,2,1]}}),T.push(L)),r&&(Q=Ha({inputs:{x:R},backend:a,attrs:{perm:[0,2,1]}}),T.push(Q));const J=g!==1,te=g===1;let oe=L;J&&(oe=Le({inputs:{x:L},backend:a,attrs:{shape:[$,P,1]}}),T.push(oe));const he=g===1?2:1;let ae=Q;te&&(ae=Le({inputs:{x:Q},backend:a,attrs:{shape:[$,1,P]}}),T.push(ae));const de=i_({inputs:{a:oe,b:ae},backend:a});Z=v2({inputs:{x:de},backend:a,attrs:{axis:he,keepDims:!0}}),T.push(de)}else{const L=oi(t.dtype,e.dtype),Q=new iB(S,C,[$,f,g],n,r,D,q,B,z),J=[E,R];if(i!=null&&J.push(i),B&&J.push(o),z){const te=a.makeTensorInfo([],"float32",gl(s,"float32"));J.push(te),T.push(te)}Z=a.runWebGLProgram(Q,J,L)}const H=Le({inputs:{x:Z},backend:a,attrs:{shape:w}});T.push(Z);for(const L of T)a.disposeIntermediateTensorInfo(L);return H}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function FSe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return x2({a,b:i,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:d,activation:c})}const ASe={kernelName:Ng,backendName:"webgl",kernelFunc:FSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const dB="return abs(x);";function DSe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=qz(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let a;return me().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new hd(r.shape,dB):a=new _l(r.shape,dB),n.runWebGLProgram(a,[r],r.dtype)}const LSe={kernelName:Ov,backendName:"webgl",kernelFunc:DSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zSe=wo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,BSe=Qt({opSnippet:zSe}),jSe={kernelName:Sm,backendName:"webgl",kernelFunc:BSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const USe=wo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,VSe=Qt({opSnippet:USe}),WSe={kernelName:Cm,backendName:"webgl",kernelFunc:VSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pB="return a + b;",GSe=sa({opSnippet:pB,packedOpSnippet:pB,supportsComplex:!0,cpuKernelImpl:ake}),HSe={kernelName:Ap,backendName:"webgl",kernelFunc:GSe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class qSe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${a};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class KSe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${a};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function w2(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Ti({inputs:{x:r[0]},backend:n});if(r.length>me().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const s=Math.floor(r.length/2),l=w2({inputs:r.slice(0,s),backend:n}),u=w2({inputs:r.slice(s),backend:n});return w2({inputs:[l,u],backend:n})}const a=r.map(s=>s.dtype).reduce((s,l)=>oi(s,l)),i=r.map(s=>s.shape),o=me().getBool("WEBGL_PACK")?new KSe(r[0].shape,i):new qSe(r[0].shape,i);return n.runWebGLProgram(o,r,a)}const XSe={kernelName:Mv,backendName:"webgl",kernelFunc:w2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function QSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Zt(i,a.shape);let u=l;const c=mr(u,s);let d=a;c!=null&&(d=Ha({inputs:{x:a},backend:n,attrs:{perm:c}}),u=gr(u.length,s)),ia("all",u,s);const[p,f]=aa(d.shape,u),g=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=fd(y,y.dtype,"all",n);let b;if(o){const x=Pr(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const YSe={kernelName:Pv,backendName:"webgl",kernelFunc:QSe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ZSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Zt(i,a.shape);let u=l;const c=mr(u,s);let d=a;c!=null&&(d=Ha({inputs:{x:a},backend:n,attrs:{perm:c}}),u=gr(u.length,s)),ia("any",u,s);const[p,f]=aa(d.shape,u),g=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=fd(y,y.dtype,"any",n);let b;if(o){const x=Pr(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const JSe={kernelName:Fv,backendName:"webgl",kernelFunc:ZSe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class eCe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:a,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const s=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${a};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${a}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${s} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class tCe{constructor(e,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,U(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");const s=this.outputShape,l=s.length,u=On(l),c=Ga("coords",l);let d,p;if(o===1){p=l+1;const T=On(p);d=`
        ${T} sourceLocR = ${T}(${c.join()}, 0);
        ++${c[l-1]};
        ${T} sourceLocG = ${T}(${c.join()}, 0);
        ++${c[l-2]};
        ${T} sourceLocA = ${T}(${c.join()}, 0);
        --${c[l-1]};
        ${T} sourceLocB = ${T}(${c.join()}, 0);
        --${c[l-2]};`}else p=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,p),g="."+f[p-1],y=f.map(T=>"int "+T),v=Ga("sourceLocR",p-1).concat("inIdx.r"),b=Ga("sourceLocG",p-1).concat("inIdx.g"),x=Ga("sourceLocB",p-1).concat("inIdx.b"),w=Ga("sourceLocA",p-1).concat("inIdx.a"),S=r==="max"?"greaterThan":"lessThan",C=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${w.join()})));`,E=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,R=a?"":`
      float getBestIndicesAChannel(${y.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${y.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${R}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${s[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${s[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},
          sourceLocB${g}, sourceLocA${g}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${S}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function hB(t,e,n,r=null){let a=e.shape[0],i=e.shape[1];r!=null&&(a=r.shape[0],i=r.shape[1]);const o=t2(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},l=new eCe(s,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=hB(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function fB(t,e,n,r=null){const a=r!=null?r.shape:e.shape,i=a[a.length-1],o=t2(i),s=new tCe(a,o,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(s,l,"int32");if(u.shape.length===e.shape.length){const c=fB(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function mB(t,e,n,r){const a=[n];if(ia("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,e.shape.length),!me().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),s=o!==null&&o.isPacked;let l=e;s&&(l=t.unpackTensor(e),i.push(l));const[u,c]=aa(l.shape,a),d=be(c),p=Le({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(p);const f=hB(t,p,r);i.push(f);const g=Le({inputs:{x:f},backend:t,attrs:{shape:u}});return i.forEach(y=>t.disposeIntermediateTensorInfo(y)),g}return fB(t,e,r)}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function nCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let o=Zt(i,a.shape);const s=mr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=Ha({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=gr(o.length,l.shape.length)),ia("argMax",[o[0]],l.shape.length);const c=mB(n,l,o[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const rCe={kernelName:Av,backendName:"webgl",kernelFunc:nCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function aCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let o=Zt(i,a.shape);const s=mr(o,a.shape.length);let l=a;const u=[];s!=null&&(l=Ha({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=gr(o.length,l.shape.length)),ia("argMin",[o[0]],l.shape.length);const c=mB(n,l,o[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const iCe={kernelName:Dv,backendName:"webgl",kernelFunc:aCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const oCe=wo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,sCe=Qt({opSnippet:oCe}),lCe={kernelName:Em,backendName:"webgl",kernelFunc:sCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const uCe=wo+"return log(x + sqrt(x * x + 1.0));",cCe=Qt({opSnippet:uCe}),dCe={kernelName:Nm,backendName:"webgl",kernelFunc:cCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const pCe=wo+`
  return atan(x);
`,hCe=Qt({opSnippet:pCe}),fCe={kernelName:Tm,backendName:"webgl",kernelFunc:hCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const mCe=a_+`
  return atan(a, b);
`,gCe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+u0+`
  return result;
`,yCe=sa({opSnippet:mCe,packedOpSnippet:gCe}),bCe={kernelName:_m,backendName:"webgl",kernelFunc:yCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vCe=wo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,xCe=Qt({opSnippet:vCe}),wCe={kernelName:Im,backendName:"webgl",kernelFunc:xCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class p0{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const y=n==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,b=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let x="0.0";if(y||(x="-1.0 / 1e-20"),r){const T=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${l});
        const ivec2 pads = ivec2(${f}, ${g});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${T} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${a?i?v:b:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / count");const C=Math.floor(o/4)*4,E=o%4,R=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${l});
      const ivec2 pads = ivec2(${f}, ${g});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${R}
          }

          int xC = xCCorner + ${C};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${R}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${R}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${R}
          }
        }
        setOutput(${S});
      }
    `}}class o_{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,p=e.dilationWidth,f=e.effectiveFilterDepth,g=e.effectiveFilterHeight,y=e.effectiveFilterWidth,v=e.padInfo.front,b=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const w=n==="avg";let S="0.0";if(w||(S="-1.0 / 1e-20"),r){const P=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${l}, ${u});
        const ivec3 pads = ivec3(${v}, ${b}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${g};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${y};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${P} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${a?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${g} * ${y} +
                      wR * ${y} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let E=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(E="avgValue / count");const R=Math.floor(o/4)*4,T=o%4,$=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${l}, ${u});
      const ivec3 pads = ivec3(${v}, ${b}, ${x});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${R}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${$}
            }

            int xC = xCCorner + ${R};
            if (${T===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${T===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${T===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${$}
            }
          }
          setOutput(${E});
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function kCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;s0(a,"avgPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;U(ka(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ho(a.shape,i,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&Sn(c.inShape,c.outShape))return Ti({inputs:{x:a},backend:n});const d=new p0(c,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}const SCe={kernelName:Lv,backendName:"webgl",kernelFunc:kCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function CCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],d=kl(a.shape,i,o,c,s,l,u),p=new o_(d,"avg",!1);return n.runWebGLProgram(p,[a],"float32")}const ECe={kernelName:zv,backendName:"webgl",kernelFunc:CCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class NCe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,d=u-1-e.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class TCe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,g=d-1-e.padInfo.front,y=p-1-e.padInfo.top,v=f-1-e.padInfo.left,b=1/(n*r*a);this.userCode=`
      const ivec3 pads = ivec3(${g}, ${y}, ${v});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ICe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],p=kl(o.shape,s,l,d,u,c),f=new TCe(p);return n.runWebGLProgram(f,[a],o.dtype)}const _Ce={kernelName:a4,backendName:"webgl",kernelFunc:ICe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function RCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i;s0([a,i],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=ho(o.shape,s,l,1,u),d=new NCe(c);return n.runWebGLProgram(d,[a],o.dtype)}const $Ce={kernelName:r4,backendName:"webgl",kernelFunc:RCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function OCe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:o,transposeB:s}=r;return x2({a,b:i,transposeA:o,transposeB:s,backend:n})}const MCe={kernelName:Bv,backendName:"webgl",kernelFunc:OCe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class PCe{constructor(e,n,r,a,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Ut(e,n),Ut(e,r);let s="0.0";a!=null&&(Ut(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="1.0";i!=null&&(Ut(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class FCe{constructor(e,n,r,a,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ut(e,n),Ut(e,r);let s="vec4(0.0)";a!=null&&(Ut(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(Ut(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ACe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:a,variance:i,offset:o,scale:s}=t;U(a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,a,i];let c=null;o!=null&&(c=o.shape,u.push(o));let d=null;s!=null&&(d=s.shape,u.push(s));const p=me().getBool("WEBGL_PACK_NORMALIZATION")?new FCe(r.shape,a.shape,i.shape,c,d,l):new PCe(r.shape,a.shape,i.shape,c,d,l);return e.runWebGLProgram(p,u,u[0].dtype)},DCe={kernelName:hx,backendName:"webgl",kernelFunc:ACe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class LCe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=On(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=zCe(this.rank);let a;const i=e.map((o,s)=>`sourceLoc.${s_[s]} = start[${s}] + coords.${s_[s]};`);a=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${a}
        setOutput(getSource(${r}));
      }
    `}}const s_=["x","y","z","w","u","v"];function zCe(t){if(t===1)return"sourceLoc";if(t<=6)return s_.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class BCe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=On(this.rank),r=Ga("coords",this.rank),a=Ga("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${a.slice(-2).join()})`,o=`getChannel(getSource(${a.join()}), ${i})`,s=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${a[this.rank-1]};
        result.y = ${o};
        --${a[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${a[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${a[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${a[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${s}
        ${l}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jCe(t,e,n,r){const a=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=t.dtype;let s=tT(e,rt(t.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function bh(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:o}=r,[s,l]=nT(a,i,o);if(Z4(a,s,l),be(l)===0)return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){const d=n.texData.get(a.dataId),p=Pke(d.values,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,p)}const{isPacked:u}=n.texData.get(a.dataId),c=eT(a.shape,s,l);if(u||!c){const d=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new BCe(l):new LCe(l),p=[s];return n.runWebGLProgram(d,[a],a.dtype,p)}return n.uploadToGPU(a.dataId),jCe(a,s,l,n)}const UCe={kernelName:Qx,backendName:"webgl",kernelFunc:bh};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const VCe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:o}=r;U(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((x,w)=>x*w),l=Zg(a.shape,i,s),u=Jg(l.length,i.length),c=e0(a.shape,i,s),d=JT(o,i.length),p=eI(c,o,i.length),f=[],g=Le({inputs:{x:a},backend:n,attrs:{shape:l}}),y=Ha({inputs:{x:g},backend:n,attrs:{perm:u}}),v=Le({inputs:{x:y},backend:n,attrs:{shape:c}}),b=bh({inputs:{x:v},backend:n,attrs:{begin:d,size:p}});return f.push(g),f.push(y),f.push(v),f.forEach(x=>n.disposeIntermediateTensorInfo(x)),b},WCe={kernelName:jv,backendName:"webgl",kernelFunc:VCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function GCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o}=r,s=n.readSync(a.dataId),l=n.readSync(i.dataId),u=Hz(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const HCe={kernelName:Uv,backendName:"webgl",kernelFunc:GCe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qCe(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=Ut(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const KCe={kernelName:Vv,backendName:"webgl",kernelFunc:qCe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const XCe="return float(a != b);",gB=sa({opSnippet:XCe,cpuKernelImpl:Nke,dtype:"bool"}),QCe={kernelName:og,backendName:"webgl",kernelFunc:gB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function h0(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return Ti({inputs:{x:a.complexTensorInfos.real},backend:n})}const YCe={kernelName:Ux,backendName:"webgl",kernelFunc:h0};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ZCe="return float(int(x));";function JCe(t,e){const n=new _l(t.shape,ZCe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function l_(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return Ti({inputs:{x:a},backend:n});const o=Ou(a.shape),s=l_({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),l=Bu({inputs:{real:s,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(s),l}if(a.dtype==="complex64"){const o=h0({inputs:{input:a},backend:n}),s=l_({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),s}if(!YN(a.dtype,i)){const o=Ti({inputs:{x:a},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){const o=n.texData.get(a.dataId).values,[s,l,u]=oke(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,l,u)}if(i==="int32")return JCe(a,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",$r("bool",1)),s=gB({inputs:{a,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),s}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}const e3e={kernelName:Rm,backendName:"webgl",kernelFunc:l_};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yB="return ceil(x);",t3e=Qt({opSnippet:yB,packedOpSnippet:yB,cpuKernelImpl:ske}),n3e={kernelName:$m,backendName:"webgl",kernelFunc:t3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class r3e{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class a3e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function i3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{clipValueMin:i,clipValueMax:o}=r;let s;me().getBool("WEBGL_PACK_CLIP")?s=new a3e(a.shape):s=new r3e(a.shape);const l=[[i],[o]];return n.runWebGLProgram(s,[a],a.dtype,l)}const o3e={kernelName:Om,backendName:"webgl",kernelFunc:i3e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class s3e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function bB(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function l3e(t){const{inputs:e,backend:n}=t,{x:r}=e,a=n.texData.get(r.dataId),i=new s3e(r.shape),o=[bB(r,a.complexTensorInfos.real),bB(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const u3e={kernelName:Gv,backendName:"webgl",kernelFunc:l3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class c3e{constructor(e){this.outputShape=[],this.outputShape=_s(e,1),this.variableNames=e.map((o,s)=>`T${s}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const s=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${s}));`)}const a=n.length,i=n[n.length-1];r.push(`else setOutput(getT${a}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class d3e{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=_s(e,n);const r=this.outputShape,a=r.length,i=On(a),o=Ga("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map((y,v)=>`T${v}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let y=1;y<l.length;y++)l[y]=l[y-1]+e[y][n];const u=s[n],c=s.slice(-2),d=s.join();let p=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let y=1;y<l.length;y++){const v=l[y-1];p+=`
        if (${u} < ${l[y]}  && ${u} >= ${l[y-1]}) {
          return getChannel(
            getT${y}(${k2(s,u,v)}),
            vec2(${k2(c,u,v)}));
        }`}const f=l.length,g=l[l.length-1];p+=`
        return getChannel(
          getT${f}(${k2(s,u,g)}),
          vec2(${k2(c,u,g)}));`,this.userCode=`
      float getValue(${s.map(y=>"int "+y)}) {
        ${p}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[a-1]} = ${o[a-1]} + 1;
        if (${o[a-1]} < ${r[a-1]}) {
          result.g = getValue(${o});
        }

        ${o[a-2]} = ${o[a-2]} + 1;
        if (${o[a-2]} < ${r[a-2]}) {
          result.a = getValue(${o});
        }

        ${o[a-1]} = ${o[a-1]} - 1;
        if (${o[a-2]} < ${r[a-2]} &&
            ${o[a-1]} < ${r[a-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function k2(t,e,n){const r=t.indexOf(e);return t.map((a,i)=>i===r?`${a} - ${n}`:a).join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function S2(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return Ti({inputs:{x:a.complexTensorInfos.imag},backend:n})}const p3e={kernelName:yx,backendName:"webgl",kernelFunc:S2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function f0(t,e,n){const r=t[0].dtype;if(r==="complex64"){const d=t.map(v=>h0({inputs:{input:v},backend:n})),p=t.map(v=>S2({inputs:{input:v},backend:n})),f=f0(d,e,n),g=f0(p,e,n),y=Bu({inputs:{real:f,imag:g},backend:n});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}let a=n.shouldExecuteOnCPU(t);if(r==="string"&&(a=!0),a){const d=t.map(x=>{const w=[-1,be(x.shape.slice(e))];return Le({inputs:{x},backend:n,attrs:{shape:w}})}),p=d.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),f=_s(d.map(x=>x.shape),1),g=d[0].shape[0]===1,y=lke(p,f,r,g),v=_s(t.map(x=>x.shape),e),b=n.makeTensorInfo(v,r,y);return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const i=me().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(t.length>i){const d=[];for(let f=0;f<t.length;f+=i){const g=t.slice(f,f+i);d.push(f0(g,e,n))}const p=f0(d,e,n);for(const f of d)n.disposeIntermediateTensorInfo(f);return p}if(me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].shape.length>1){const d=new d3e(t.map(p=>p.shape),e);return n.runWebGLProgram(d,t,r)}const{tensors2D:o,outShape:s}=h3e(t,e,n),l=new c3e(o.map(d=>d.shape)),u=n.runWebGLProgram(l,o,r);o.forEach(d=>n.disposeIntermediateTensorInfo(d));const c=Le({inputs:{x:u},attrs:{shape:s},backend:n});return n.disposeIntermediateTensorInfo(u),c}function h3e(t,e,n){const r=_s(t.map(a=>a.shape),e);return{tensors2D:t.map(a=>Le({inputs:{x:a},attrs:{shape:[-1,be(a.shape.slice(e))]},backend:n})),outShape:r}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function vB(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=Zt(a,e[0].shape)[0],o=e.map(u=>u.shape);QT(o,i);const s=_s(e.map(u=>u.shape),i);if(be(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(u=>be(u.shape)>0);return l.length===1?Ti({inputs:{x:l[0]},backend:n}):f0(l,i,n)}const f3e={kernelName:Hv,backendName:"webgl",kernelFunc:vB};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class xB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,f=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4,v=e.dataFormat==="channelsLast",b=v?1:2,x=v?2:3,w=v?3:1;let S="",C="";r&&(a?S=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?S=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:S=`
          float activation(float x) {
            ${r}
          }
        `,C="result = activation(result);");const E=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${g}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${y===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${g}) *
                    getW(wR, wC, ${g}, d2);
              } else {
                dotProd +=
                    getX(batch, ${g}, xR, xC) *
                    getW(wR, wC, ${g}, d2);
              }

            } else if (${y===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${y===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2),
                getW(wR, wC, ${g} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1),
                  getX(batch, xR, xC, ${g} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC),
                  getX(batch, ${g} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${C}
        setOutput(result);
      }
    `}}class m3e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,p=e.filterHeight,f=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${s});
      const ivec3 pads = ivec3(${n}, ${r}, ${a});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${g}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${y===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${g}) *
                  getW(wF, wR, wC, ${g}, d2);
              } else if (${y===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${y===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1),
                  getX(batch, xF, xR, xC, ${g} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2),
                  getW(wF, wR, wC, ${g} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class wB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Wa(this.outputShape.length);const o=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<c;v++)p+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;p+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<c;v++)p+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(d+1)/2;v++){const b=v*2;if(p+=`
           xC = xCCorner + ${b*l};
           `,s===1){if(b<c&&(o%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,l===1&&b>0?p+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<c)){const x=o%2===0?Tv(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:p+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):x===1?p+=`
                     xC${b+1} = xTexelC${b};
                     `:p+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<c&&(o%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<c&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<c&&(p+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<c&&(p+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<c&&(p+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let f="",g="";r&&(a?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,g="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${y}
         ${g}
         setOutput(result);
       }
     `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class g3e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Wa(this.outputShape.length);const{dataFormat:r}=n,a=Va(),i=r==="channelsLast",o=i?1:2,s=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${s}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${a.output} = result;
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function C2(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function kB({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],p=n.outChannels,f=n.dataFormat==="channelsLast",g=!1,y=!1;let v;const b=[];if(i!=null){const x=C2(i.shape,f);x!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:x}}),b.push(i))}if(a!=null){const x=C2(a.shape,f);x!=null&&(a=Le({inputs:{x:a},backend:r,attrs:{shape:x}}),b.push(a))}if(!((d===1||p===1)&&c>cB)&&u.isPacked&&f&&u.texture!=null&&l[2]%2!==0&&Sn(u.shape.slice(-3),l.slice(-3))){const x=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},S=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,U(g2(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const C=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(C);const E=x2({a:w,b:C,backend:r,transposeA:g,transposeB:y,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o}),R=r.texData.get(E.dataId);U(R.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=S,R.shape=n.outShape,v=Ti({inputs:{x:E},backend:r}),v.shape=n.outShape,b.push(E)}else{const x=n.outHeight*n.outWidth,w=Le({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,x,n.inChannels]:[n.batchSize,n.inChannels,x]}}),S=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=x2({a:f?w:S,b:f?S:w,transposeA:!f,transposeB:y,backend:r,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o});v=Le({inputs:{x:C},backend:r,attrs:{shape:n.outShape}}),b.push(w),b.push(S),b.push(C)}for(const x of b)r.disposeIntermediateTensorInfo(x);return v}function SB({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:p,dataFormat:f}=n,g=f==="channelsLast",y=l*u*c,v=p*d,b=[n.batchSize,y,v],x=!0,w=!1,S=[];if(i!=null){const L=C2(i.shape,g);L!=null&&(i=Le({inputs:{x:i},backend:r,attrs:{shape:L}}),S.push(i))}if(a!=null){const L=C2(a.shape,g);L!=null&&(a=Le({inputs:{x:a},backend:r,attrs:{shape:L}}),S.push(a))}const C=Le({inputs:{x:e},backend:r,attrs:{shape:[1,y,be(e.shape)/y]}});S.push(C);const E=new g3e(b,n),R=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],T=r.runWebGLProgram(E,[t],"float32",R),$=Le({inputs:{x:T},backend:r,attrs:{shape:b}});S.push(T),S.push($);const P=a!=null,D=i!=null,B=s==="leakyrelu",z=s?d0(s,!0):null,q=new iB(g?$.shape:C.shape,g?C.shape:$.shape,g?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],x,w,P,z,D,B),Y=g?[$,C]:[C,$];if(a&&Y.push(a),D&&Y.push(i),B){const L=r.makeTensorInfo([],"float32",gl(o,"float32"));Y.push(L),S.push(L)}const Z=r.runWebGLProgram(q,Y,"float32"),H=Le({inputs:{x:Z},backend:r,attrs:{shape:n.outShape}});S.push(Z);for(const L of S)r.disposeIntermediateTensorInfo(L);return H}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function y3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=Sl(l),p=Gr(a.shape,i.shape,o,u,s,c,!1,d);let f;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))f=kB({x:a,filter:i,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&me().getBool("WEBGL_EXP_CONV")){const y=new wB(p),v=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];f=n.runWebGLProgram(y,[a,i],"float32",v)}else if(me().getBool("WEBGL_CONV_IM2COL"))f=SB({x:a,filter:i,convInfo:p,backend:n});else{const y=new xB(p);f=n.runWebGLProgram(y,[a,i],"float32")}const g=Le({inputs:{x:f},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(f),g}const b3e={kernelName:qv,backendName:"webgl",kernelFunc:y3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class v3e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${o}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class x3e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",s=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=o?1:2,c=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class w3e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${a} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class k3e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=a-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${a}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${a} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function S3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=Sl(l),p=Gr(a.shape,c,o,1,s,u,!1,d),f=new v3e(p);return n.runWebGLProgram(f,[a,i],"float32")}const C3e={kernelName:Kv,backendName:"webgl",kernelFunc:S3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function E3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:o,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=Sl(u),p=Gr(o,i.shape,s,1,l,c,!1,d),f=new x3e(p);return n.runWebGLProgram(f,[a,i],"float32")}const N3e={kernelName:Xv,backendName:"webgl",kernelFunc:E3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function T3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r,u=Ru(a.shape,i.shape,o,l,s),c=new m3e(u);return n.runWebGLProgram(c,[a,i],"float32")}const I3e={kernelName:Qv,backendName:"webgl",kernelFunc:T3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function _3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,pad:s,filterShape:l}=r,u=Ru(a.shape,l,o,1,s),c=new w3e(u);return n.runWebGLProgram(c,[a,i],"float32")}const R3e={kernelName:i4,backendName:"webgl",kernelFunc:_3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function $3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:o,strides:s,inputShape:l}=r,u=Ru(l,i.shape,s,1,o),c=new k3e(u);return n.runWebGLProgram(c,[a,i],"float32")}const O3e={kernelName:Yv,backendName:"webgl",kernelFunc:$3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const M3e=yh+`
  return cos(x);
`,P3e=Qt({opSnippet:M3e}),F3e={kernelName:Mm,backendName:"webgl",kernelFunc:P3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A3e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,D3e=Qt({opSnippet:A3e}),L3e={kernelName:Pm,backendName:"webgl",kernelFunc:D3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class z3e{constructor(e,n,r,a,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,l,u]=e,[c]=n,[d,p]=r;this.outputShape=[c,d,p,u];const f=a==="bilinear"?1:0,[g,y]=[`${s-1}.0`,`${l-1}.0`],[v,b,x]=d>1?[`${(s-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[w,S,C]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${y} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${y}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${S};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${g} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${y} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const B3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:u}=r,c=new z3e(a.shape,i.shape,s,l,u);return n.runWebGLProgram(c,[a,i,o],"float32")},j3e={kernelName:ex,backendName:"webgl",kernelFunc:B3e};var m0;(function(t){t.Prod="*",t.Sum="+"})(m0||(m0={}));class CB{constructor(e,n,r,a){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===m0.Prod?"1.0":"0.0",s=r?o:`getX(${EB(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=a?`end != ${l-1}`:"end != 0",c=a?"end + 1":"end - 1"):(u=a?`end + pow2 < ${l}`:"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${On(i)} coords = getOutputCoords();
        int end = ${NB(i,"coords",this.op)};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${NB(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${EB(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function EB(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function NB(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function TB(t,e,n,r,a,i){const o=e.shape.length,s=mr([r],o);let l=e;s!=null&&(l=Ha({inputs:{x:e},backend:n,attrs:{perm:s}}));const u=gr(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let d=Ti({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(c))-1;p++){const f=new CB(t,l.shape,!1,i),g=[[p]],y=d;d=n.runWebGLProgram(f,[d],d.dtype,g),n.disposeIntermediateTensorInfo(y)}if(a){const p=new CB(t,l.shape,a,i),f=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(s!=null){const p=Vg(s),f=Ha({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),f}return d}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function U3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;return TB(m0.Prod,a,n,i,o,s)}const V3e={kernelName:Zv,backendName:"webgl",kernelFunc:U3e};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function W3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:o,reverse:s}=r;return TB(m0.Sum,a,n,i,o,s)}const G3e={kernelName:Jv,backendName:"webgl",kernelFunc:W3e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function H3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:o,binaryOutput:s}=r;if(a.shape.length===1){const l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=Hz(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){const l=n.bufferSync(a),u=n.bufferSync(i),c=ike(l,u,o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const q3e={kernelName:tx,backendName:"webgl",kernelFunc:H3e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class K3e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function X3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:o}=r,s=a.shape[0],l=o==="NHWC"?a.shape[1]:a.shape[2],u=o==="NHWC"?a.shape[2]:a.shape[3],c=o==="NHWC"?a.shape[3]:a.shape[1],d=l*i,p=u*i,f=c/(i*i),g=o==="NHWC"?[s,d,p,f]:[s,f,d,p],y=new K3e(g,i,o);return n.runWebGLProgram(y,[a],a.dtype)}const Q3e={kernelName:nx,backendName:"webgl",kernelFunc:X3e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class IB{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Wa(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(a?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${s}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class _B{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Wa(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,p=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<d;b++)f+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;f+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let b=0;b<d;b++)f+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(p+1)/2;b++){const x=b*2;if(f+=`
          xC = xCCorner + ${x*u};
          `,l===1){if(x<d&&(s%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,u===1&&x>0?f+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<d)){const w=s%2===0?Tv(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,u>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:f+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):w===1?f+=`
                    xC${x+1} = xTexelC${x};
                    `:f+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<d&&(s%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<d&&(f+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<d&&(f+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<d&&(f+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let g="",y="";r&&(a?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:g=`vec4 activation(vec4 x) {
          ${r}
        }`,y="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${g}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${y}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function Y3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),U(ka(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const d=Gr(a.shape,i.shape,o,c,s,u,!0);let p;me().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new _B(d):p=new IB(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[a,i],"float32",f)}const Z3e={kernelName:rx,backendName:"webgl",kernelFunc:Y3e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class J3e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class eEe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r,d=Gr(a.shape,c,o,s,l,u,!0),p=new J3e(d);return n.runWebGLProgram(p,[a,i],"float32")}const nEe={kernelName:ax,backendName:"webgl",kernelFunc:tEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function rEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r,d=Gr(c,i.shape,o,s,l,u,!0),p=new eEe(d);return n.runWebGLProgram(p,[a,i],"float32")}const aEe={kernelName:ix,backendName:"webgl",kernelFunc:rEe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class iEe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function oEe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=[...r.shape,...r.shape],i=be(r.shape),o=Le({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new iEe(i),l=n.runWebGLProgram(s,[o],o.dtype),u=Le({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const sEe={kernelName:ox,backendName:"webgl",kernelFunc:oEe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lEe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:a,strideHeight:i,strideWidth:o,filterHeight:s,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:d,left:p}=a;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function uEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:o,pad:s,dilations:l}=r,u=zg(a.shape,i.shape,o,s,"NHWC",l);let c;const d=new lEe(u);c=n.runWebGLProgram(d,[a,i],"float32");const p=Le({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),p}const cEe={kernelName:sx,backendName:"webgl",kernelFunc:uEe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dEe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:o,summedDims:s,idDims:l}=dI(a,i.length);hI(o.length,l,i);const{path:u,steps:c}=fI(s,l),d=c.length;let p=null,f=o.length;const g=[];for(let y=0;y<d;++y){for(const v of c[y]){const{permutationIndices:b,expandDims:x}=pI(f,l[v]);let w;mI(b)?w=i[v]:(w=Ha({inputs:{x:i[v]},backend:n,attrs:{perm:b}}),g.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);Sn(w.shape,S)||(w=Le({inputs:{x:w},backend:n,attrs:{shape:S}}),g.push(w)),p===null?p=w:(p=i_({inputs:{a:w,b:p},backend:n}),g.push(p))}y<d-1&&(u[y]>=0&&(p=v2({inputs:{x:p},backend:n,attrs:{axis:u[y]-(o.length-f),keepDims:!1}}),g.push(p)),f--)}for(const y of g)y!==p&&n.disposeIntermediateTensorInfo(y);return p}const pEe={kernelName:lx,backendName:"webgl",kernelFunc:dEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const hEe="return (x >= 0.0) ? x : (exp(x) - 1.0);",fEe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,mEe=Qt({opSnippet:hEe,packedOpSnippet:fEe}),gEe={kernelName:Am,backendName:"webgl",kernelFunc:mEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yEe="return (b >= 1.0) ? a : a * (b + 1.0);",bEe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,vEe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:a}=e,i=me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new c0(bEe,r.shape,a.shape):new gh(yEe,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)},xEe={kernelName:l4,backendName:"webgl",kernelFunc:vEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const wEe=`
  return vec4(equal(a, b));
`,kEe="return float(a == b);",SEe=sa({opSnippet:kEe,packedOpSnippet:wEe,dtype:"bool",cpuKernelImpl:uke}),CEe={kernelName:Lm,backendName:"webgl",kernelFunc:SEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const EEe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${rI};
  float a1 = ${aI};
  float a2 = ${iI};
  float a3 = ${oI};
  float a4 = ${sI};
  float a5 = ${lI};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,NEe=Qt({opSnippet:EEe}),TEe={kernelName:Dm,backendName:"webgl",kernelFunc:NEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const IEe=yh+`
  return exp(x);
`,_Ee=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RB=Qt({opSnippet:IEe,packedOpSnippet:_Ee,cpuKernelImpl:cke,dtype:"float32"}),REe={kernelName:zm,backendName:"webgl",kernelFunc:RB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function u_(t){const{inputs:e,attrs:n,backend:r}=t,{dim:a}=n,{input:i}=e,o=i.shape.length,s=i.shape.slice();let l=a;return a<0&&(U(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+a+1),s.splice(l,0,1),Le({inputs:{x:i},backend:r,attrs:{shape:s}})}const $Ee={kernelName:ux,backendName:"webgl",kernelFunc:u_};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $B="return exp(x) - 1.0;",OEe=Qt({opSnippet:$B,packedOpSnippet:$B,cpuKernelImpl:dke}),MEe={kernelName:Bm,backendName:"webgl",kernelFunc:OEe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class OB{constructor(e,n,r){this.variableNames=["real","imag"];const a=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${a}.0`:"1.0";let s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${s}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${a});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${a}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function MB(t,e,n){const r=n.texData.get(t.dataId),a=be(t.shape),i=t.shape[t.shape.length-1],o=a/i,s=Le({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=s.shape,u=new OB("real",l,e),c=new OB("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),g=Bu({inputs:{real:p,imag:f},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f);const y=Le({inputs:{x:g},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(g),y}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function PEe(t){const{inputs:e,backend:n}=t,{input:r}=e;return MB(r,!1,n)}const FEe={kernelName:cx,backendName:"webgl",kernelFunc:PEe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class AEe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function g0(t){const{backend:e,attrs:n}=t,{shape:r,value:a}=n;let{dtype:i}=n;if(i=i||Fp(a),i==="string"){const o=Or(i,be(r));return o.fill(a),e.makeTensorInfo(r,i,o)}else{const o=new AEe(r,a),s=[[a]];return e.runWebGLProgram(o,[],i,s)}}const DEe={kernelName:dx,backendName:"webgl",kernelFunc:g0};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class LEe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zEe={kernelName:px,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,a=new LEe(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const PB="return floor(x);",BEe=Qt({opSnippet:PB,packedOpSnippet:PB,cpuKernelImpl:pke}),jEe={kernelName:jm,backendName:"webgl",kernelFunc:BEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const UEe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,VEe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,WEe=sa({opSnippet:UEe,packedOpSnippet:VEe,dtype:"int32"}),GEe={kernelName:Um,backendName:"webgl",kernelFunc:WEe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class HEe{constructor(e){this.variableNames=["A"];const n=Va(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class qEe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Va(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${a}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const KEe={kernelName:gw,backendName:"webgl",kernelFunc:XEe};let vh,c_=me().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function XEe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:a}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,[l,u]=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=[u,l],d=[u,l,i];if(s||o){const y=me().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(vh==null||y!==c_)&&(c_=y,vh=document.createElement("canvas").getContext("2d",{willReadFrequently:c_})),vh.canvas.width=l,vh.canvas.height=u,vh.drawImage(a,0,0,l,u),a=vh.canvas}const p=n.makeTensorInfo(c,"int32");n.texData.get(p.dataId).usage=ji.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);const f=me().getBool("WEBGL_PACK")?new qEe(d):new HEe(d),g=n.runWebGLProgram(f,[p],"int32");return n.disposeData(p.dataId),g}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function QEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:f,leakyreluAlpha:g}=r,y=Sl(c),v=Gr(a.shape,i.shape,l,d,u,p,!1,y);let b;const x=[],w=o!=null,S=s!=null,C=f==="leakyrelu",E=()=>{const T=[a,i],$=(P,D)=>{if(D==="NCHW"&&P.shape.length===1&&P.shape[0]!==1){const B=Le({inputs:{x:P},backend:n,attrs:{shape:[P.shape[0],1,1]}});return x.push(B),B}return P};if(w&&T.push($(o,c)),S&&T.push($(s,c)),C){const P=n.makeTensorInfo([],"float32",gl(g,"float32"));T.push(P),x.push(P)}return T};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))b=kB({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:g});else if(v.strideWidth<=2&&y==="channelsLast"&&me().getBool("WEBGL_EXP_CONV")){const T=f?d0(f,!0):null,$=new wB(v,w,T,S,C),P=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],D=E();b=n.runWebGLProgram($,D,"float32",P)}else if(me().getBool("WEBGL_CONV_IM2COL"))b=SB({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:g});else{const T=f?d0(f,!1):null,$=new xB(v,w,T,S,C),P=E();b=n.runWebGLProgram($,P,"float32")}const R=Le({inputs:{x:b},backend:n,attrs:{shape:v.outShape}});return x.push(b),x.forEach(T=>n.disposeIntermediateTensorInfo(T)),R}const YEe={kernelName:Tg,backendName:"webgl",kernelFunc:QEe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ZEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:o,preluActivationWeights:s}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,g=[];let y=c;y==null&&(y=[1,1]),U(ka(l,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${y}'`);const v=Gr(a.shape,i.shape,l,y,u,d,!0),b=me().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,x=p?d0(p,b):null,w=[a,i],S=o!=null,C=s!=null,E=p==="leakyrelu";if(S&&w.push(o),C&&w.push(s),E){const P=n.makeTensorInfo([],"float32",gl(f,"float32"));w.push(P),g.push(P)}let R;b?R=new _B(v,S,x,C,E):R=new IB(v,S,x,C,E);const T=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],$=n.runWebGLProgram(R,w,"float32",T);return g.forEach(P=>n.disposeIntermediateTensorInfo(P)),$}const JEe={kernelName:Ig,backendName:"webgl",kernelFunc:ZEe};class eNe{constructor(e,n,r,a){this.sliceDim=e,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;const i=On(r.length);let o=`
    int index;`;for(let s=0;s<this.sliceDim;s++)o+=`
          index = round(getIndices(coords[0], ${s}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};
          flattenIndex += index * ${this.strides[s]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tNe(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=a.shape,o=i[i.length-1],s=be(r.shape),[l,u,c,d]=Iw(r,a),p=Le({inputs:{x:a},backend:n,attrs:{shape:[u,o]}}),f=Le({inputs:{x:r},backend:n,attrs:{shape:[be(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,a])||r.dtype==="string"){const b=n.readSync(a.dataId),x=n.bufferSync(r),w=hke(b,x,r.dtype,u,o,c,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,w.values)}const g=new eNe(o,d,[u,c],r.shape),y=n.runWebGLProgram(g,[f,p],f.dtype),v=Le({inputs:{x:y},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),v}const nNe={kernelName:mx,backendName:"webgl",kernelFunc:tNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class rNe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=On(this.rank),a=aNe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${a}));
      }
    `}}function aNe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<t.length;a++)a===2?r.push("index"):r.push(`${n[a]}`);return r.join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function FB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:o,batchDims:s}=r,l=Zt(o,a.shape)[0];if(me().get("DEBUG")){const x=n.readSync(i.dataId),w=a.shape[l];for(let S=0;S<x.length;++S){const C=x[S];U(C<=w-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${w-1}]`)}}const u=bI(a,i,l,s),c=be(i.shape),d=[],p=Le({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),f=Le({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(p),d.push(f);const g=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,i])||a.dtype==="string"){const x=n.bufferSync(f),w=n.bufferSync(p),S=fke(w,x,g);return d.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(u.outputShape,S.dtype,S.values)}const y=new rNe(p.shape,g),v=n.runWebGLProgram(y,[p,f],p.dtype);d.push(v);const b=Le({inputs:{x:v},backend:n,attrs:{shape:u.outputShape}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const iNe={kernelName:fx,backendName:"webgl",kernelFunc:FB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const oNe="return float(a > b);",sNe=`
  return vec4(greaterThan(a, b));
`,lNe=sa({opSnippet:oNe,packedOpSnippet:sNe,cpuKernelImpl:mke,dtype:"bool"}),uNe={kernelName:Vm,backendName:"webgl",kernelFunc:lNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const cNe="return float(a >= b);",dNe=`
  return vec4(greaterThanEqual(a, b));
`,pNe=sa({opSnippet:cNe,packedOpSnippet:dNe,dtype:"bool",cpuKernelImpl:gke}),hNe={kernelName:Wm,backendName:"webgl",kernelFunc:pNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fNe(t){const{inputs:e,backend:n}=t,{input:r}=e;return MB(r,!0,n)}const mNe={kernelName:gx,backendName:"webgl",kernelFunc:fNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const gNe="return float(!isnan(x) && !isinf(x));",yNe=Qt({opSnippet:gNe,dtype:"bool"}),bNe={kernelName:Hm,backendName:"webgl",kernelFunc:yNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vNe="return float(isinf(x));",xNe=Qt({opSnippet:vNe,dtype:"bool"}),wNe={kernelName:qm,backendName:"webgl",kernelFunc:xNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kNe="return float(isnan(x));",SNe=Qt({opSnippet:kNe,dtype:"bool"}),CNe={kernelName:Km,backendName:"webgl",kernelFunc:SNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ENe="return float(a < b);",NNe=`
  return vec4(lessThan(a, b));
`,TNe=sa({opSnippet:ENe,packedOpSnippet:NNe,cpuKernelImpl:yke,dtype:"bool"}),INe={kernelName:Xm,backendName:"webgl",kernelFunc:TNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _Ne="return float(a <= b);",RNe=`
  return vec4(lessThanEqual(a, b));
`,$Ne=sa({opSnippet:_Ne,packedOpSnippet:RNe,cpuKernelImpl:bke,dtype:"bool"}),ONe={kernelName:Qm,backendName:"webgl",kernelFunc:$Ne};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function MNe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,o=vke(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}const PNe={kernelName:vx,backendName:"webgl",kernelFunc:MNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const FNe=yh+`
  return x < 0.0 ? 0./0. : log(x);
`,ANe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,DNe=Qt({opSnippet:FNe,packedOpSnippet:ANe,cpuKernelImpl:xke}),LNe={kernelName:Ym,backendName:"webgl",kernelFunc:DNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const zNe=yh+`
  return log(1.0 + x);
`,BNe=Qt({opSnippet:zNe}),jNe={kernelName:Zm,backendName:"webgl",kernelFunc:BNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const UNe="return float(a >= 1.0 && b >= 1.0);",VNe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,WNe=sa({opSnippet:UNe,packedOpSnippet:VNe,dtype:"bool"}),GNe={kernelName:Jm,backendName:"webgl",kernelFunc:WNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const HNe="return float(!(x >= 1.0));",qNe=Qt({opSnippet:HNe}),KNe={kernelName:eg,backendName:"webgl",kernelFunc:qNe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const XNe="return float(a >= 1.0 || b >= 1.0);",QNe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,YNe=sa({opSnippet:XNe,packedOpSnippet:QNe,dtype:"bool"}),ZNe={kernelName:tg,backendName:"webgl",kernelFunc:YNe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class JNe{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[];const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${s}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class e4e{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,s=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${a}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const t4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:o,alpha:s,beta:l}=r,u=me().getBool("WEBGL_PACK_NORMALIZATION")?new e4e(a.shape,i,o,s,l):new JNe(a.shape,i,o,s,l);return n.runWebGLProgram(u,[a],a.dtype)},n4e={kernelName:xx,backendName:"webgl",kernelFunc:t4e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class r4e{constructor(e,n,r,a,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${a}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${a})
                * float(${i})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const a4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:o}=e,{depthRadius:s,bias:l,alpha:u,beta:c}=r,d=new r4e(a.shape,s,l,u,c);return n.runWebGLProgram(d,[a,i,o],a.dtype)},i4e={kernelName:u4,backendName:"webgl",kernelFunc:a4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function o4e(t,e,n,r){const a=be(e),i=be(t.shape)/a,o=Le({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),s=fd(o,t.dtype,"max",r),l=Le({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function AB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:o}=r,s=a.shape.length,l=Zt(i,a.shape);let u=l;const c=mr(u,s),d=c!=null,p=n.shouldExecuteOnCPU([a]);let f=a;if(d){if(p){const x=n.texData.get(f.dataId).values,w=new Array(s);for(let E=0;E<w.length;E++)w[E]=a.shape[c[E]];const S=n_(x,a.shape,a.dtype,c,w);f=n.makeTensorInfo(w,a.dtype);const C=n.texData.get(f.dataId);C.values=S}else f=b2(a,c,n);u=gr(u.length,s)}ia("max",u,s);const[g,y]=aa(f.shape,u);let v=g;o&&(v=Pr(g,l));let b;if(p){const x=n.texData.get(f.dataId).values,w=wke(x,be(y),v,a.dtype);b=n.makeTensorInfo(v,a.dtype);const S=n.texData.get(b.dataId);S.values=w}else b=o4e(f,y,v,n);return d&&n.disposeIntermediateTensorInfo(f),b}const s4e={kernelName:wx,backendName:"webgl",kernelFunc:AB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const l4e=a_+`
  return max(a, b);
`,u4e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+u0+`
  return result;
`,c4e=sa({opSnippet:l4e,packedOpSnippet:u4e,cpuKernelImpl:kke}),d4e={kernelName:ng,backendName:"webgl",kernelFunc:c4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function p4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;s0(a,"maxPool");const{filterSize:i,strides:o,pad:s,dimRoundingMode:l}=r,u=1;U(ka(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=ho(a.shape,i,o,u,s,l);if(c.filterWidth===1&&c.filterHeight===1&&Sn(c.inShape,c.outShape))return Ti({inputs:{x:a},backend:n});const d=new p0(c,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}const h4e={kernelName:kx,backendName:"webgl",kernelFunc:p4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function f4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:o,pad:s,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=kl(a.shape,i,o,c,s,u,l),p=new o_(d,"max",!1);return n.runWebGLProgram(p,[a],a.dtype)}const m4e={kernelName:Sx,backendName:"webgl",kernelFunc:f4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class g4e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=i-1-e.padInfo.top,l=o-1-e.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class y4e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.front,p=u-1-e.padInfo.top,f=c-1-e.padInfo.left,g=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${g} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function b4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,o=i,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],p=kl(o.shape,s,l,d,u,c),f=new o_(p,"max",!0),g=n.runWebGLProgram(f,[o],o.dtype),y=new y4e(p),v=n.runWebGLProgram(y,[a,g],o.dtype);return n.disposeIntermediateTensorInfo(g),v}const v4e={kernelName:d4,backendName:"webgl",kernelFunc:b4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function x4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:o}=e,s=i;s0([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,p=ho(s.shape,l,u,1,c,d),f=!0,g=new p0(p,"max",f),y=n.runWebGLProgram(g,[s],s.dtype),v=new g4e(p),b=n.runWebGLProgram(v,[a,y],s.dtype);return n.disposeIntermediateTensorInfo(y),b}const w4e={kernelName:c4,backendName:"webgl",kernelFunc:x4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function k4e(t,e,n,r){let a=new p0(n,"max",!1);const i=r.runWebGLProgram(a,[t],"float32");a=new p0(n,"max",!0,!0,e);const o=r.runWebGLProgram(a,[t],"float32");return[i,o]}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const S4e={kernelName:Cx,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=e,l=n;U(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];U(ka(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ho(r.shape,a,i,u,o),[d,p]=k4e(r,s,c,l);return[d,p]}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function C4e(t,e,n,r){const a=be(e),i=be(t.shape)/a,o=Le({inputs:{x:t},attrs:{shape:[i,a]},backend:r}),s=fd(o,"float32","mean",r),l=Le({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),l}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const E4e={kernelName:Ex,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:a,axis:i}=e,o=n,s=r.shape.length,l=Zt(i,r.shape);let u=l;const c=mr(u,s),d=c!=null,p=o.shouldExecuteOnCPU([r]),f=[];let g=r;if(d){if(p){const w=o.texData.get(g.dataId).values,S=new Array(s);for(let R=0;R<S.length;R++)S[R]=r.shape[c[R]];const C=n_(w,r.shape,r.dtype,c,S);g=o.makeTensorInfo(S,r.dtype);const E=o.texData.get(g.dataId);E.values=C}else g=b2(r,c,o);f.push(g),u=gr(u.length,s)}ia("sum",u,s);const[y,v]=aa(g.shape,u);let b=y;a&&(b=Pr(y,l));const x=C4e(g,v,b,o);for(const w of f)o.disposeIntermediateTensorInfo(w);return x}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function N4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=Zt(i,a.shape);let u=l;const c=mr(u,s);let d=a;c!=null&&(d=Ha({inputs:{x:a},backend:n,attrs:{perm:c}}),u=gr(u.length,a.shape.length)),ia("min",u,s);const[p,f]=aa(d.shape,u),g=be(f),y=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),v=fd(y,y.dtype,"min",n);let b;if(o){const x=Pr(p,l);b=Le({inputs:{x:v},backend:n,attrs:{shape:x}})}else b=Le({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),c!=null&&n.disposeIntermediateTensorInfo(d),b}const T4e={kernelName:Nx,backendName:"webgl",kernelFunc:N4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const I4e=a_+`
  return min(a, b);
`,_4e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+u0+`
  return result;
`,R4e=sa({opSnippet:I4e,packedOpSnippet:_4e,cpuKernelImpl:Ske}),$4e={kernelName:rg,backendName:"webgl",kernelFunc:R4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class O4e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const a=e.length,i=On(a),o=n.map(c=>c[0]).join(","),s=n.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),u=r==="reflect"?0:1;if(a===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${a}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class M4e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((g,y)=>g[0]+e[y]+g[1]);const a=e.length,i=On(a),o=n.map(g=>g[0]).join(","),s=n.map((g,y)=>g[0]+e[y]).join(","),l=Ga("rc",a),u=Ga("source",a),c=`${l[a-1]} < ${this.outputShape[a-1]}`,d=a===1?"source":`vec2(${u.slice(-2).join()})`,p=r==="reflect"?0:1;let f="";if(a===1){const g=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[a-1]} += 1;
        if(${c}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const g=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[a-1]} += 1;
        if(${c}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[a-2]} += 1;
        if(${l[a-2]} < ${this.outputShape[a-2]}) {
          ${g}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[a-1]} += 1;
          if(${c}) {
            ${g}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const P4e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:a,mode:i}=n,o=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new M4e(r.shape,a,i):new O4e(r.shape,a,i);return e.runWebGLProgram(o,[r],r.dtype)},F4e={kernelName:Tx,backendName:"webgl",kernelFunc:P4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const A4e=`if (b == 0.0) return NAN;
  return mod(a, b);`,D4e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+u0+`
  return result;
`,L4e=sa({opSnippet:A4e,packedOpSnippet:D4e}),z4e={kernelName:ag,backendName:"webgl",kernelFunc:L4e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class B4e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const j4e=`
if (a == b) {
  return 1.0;
};
return a / b;`,U4e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,DB=sa({opSnippet:j4e,packedOpSnippet:U4e,checkOutOfBounds:!0}),V4e={kernelName:Fm,backendName:"webgl",kernelFunc:DB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const LB="return a - b;",zB=sa({opSnippet:LB,packedOpSnippet:LB,supportsComplex:!0,cpuKernelImpl:Uke}),W4e={kernelName:wg,backendName:"webgl",kernelFunc:zB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function BB(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,o=Zt([i],a.shape),s=AB({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Pr(s.shape,o),u=Le({inputs:{x:s},backend:n,attrs:{shape:l}}),c=zB({inputs:{a,b:u},backend:n}),d=RB({inputs:{x:c},backend:n}),p=v2({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),f=Le({inputs:{x:p},backend:n,attrs:{shape:l}}),g=DB({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}const G4e={kernelName:ew,backendName:"webgl",kernelFunc:BB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function H4e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:o,normalized:s}=r,l=s?a:BB({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new B4e(u,c,i),p=[[o]],f=n.runWebGLProgram(d,[l],"int32",p);return s||n.disposeIntermediateTensorInfo(l),f}const q4e={kernelName:Ix,backendName:"webgl",kernelFunc:H4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const K4e=wo+`
  return -x;
`,X4e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function Q4e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,s]=Eke(i.values,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,o)}let a;return me().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new hd(r.shape,X4e):a=new _l(r.shape,K4e),n.runWebGLProgram(a,[r],r.dtype)}const Y4e={kernelName:_x,backendName:"webgl",kernelFunc:Q4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const Z4e=Hw;function J4e(t){Bi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),{selectedIndices:d}=Z4e(u,c,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const eTe={kernelName:Rx,backendName:"webgl",kernelFunc:J4e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const tTe=qw;function nTe(t){Bi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(a.dataId),d=n.readSync(i.dataId),{selectedIndices:p,validOutputs:f}=tTe(c,d,o,s,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const rTe={kernelName:$x,backendName:"webgl",kernelFunc:nTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const aTe=Kw;function iTe(t){Bi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(a.dataId),d=n.readSync(i.dataId),p=o,f=s,g=l,y=u,{selectedIndices:v,selectedScores:b}=aTe(c,d,p,f,g,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const oTe={kernelName:Ox,backendName:"webgl",kernelFunc:iTe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class sTe{constructor(e,n,r,a){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${a}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lTe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:o,onValue:s,offValue:l}=r,u=be(a.shape),c=new sTe(u,o,s,l),d=Le({inputs:{x:a},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(c,[d],i);n.disposeIntermediateTensorInfo(d);const f=[...a.shape,o],g=Le({inputs:{x:p},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(p),g},uTe={kernelName:Px,backendName:"webgl",kernelFunc:lTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function E2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const a=h0({inputs:{input:r},backend:n}),i=E2({inputs:{x:a},backend:n}),o=S2({inputs:{input:r},backend:n}),s=E2({inputs:{x:o},backend:n}),l=Bu({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return g0({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const cTe={kernelName:mw,backendName:"webgl",kernelFunc:E2};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jB(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const a=h0({inputs:{input:r},backend:n}),i=jB({inputs:{x:a},backend:n}),o=S2({inputs:{input:r},backend:n}),s=E2({inputs:{x:o},backend:n}),l=Bu({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return g0({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const dTe={kernelName:Mx,backendName:"webgl",kernelFunc:jB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function pTe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return u_({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{na(i,c.shape,"All tensors passed to stack must have matching shapes"),U(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(c=>{const d=u_({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(d),d}),u=vB({inputs:l,backend:n,attrs:{axis:a}});return s.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const hTe={kernelName:Fx,backendName:"webgl",kernelFunc:pTe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class fTe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const a=e.length,i=On(a),o=n.map(u=>u[0]).join(","),s=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);if(a===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class mTe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((y,v)=>y[0]+e[v]+y[1]);const a=e.length,i=On(a),o=n.map(y=>y[0]).join(","),s=n.map((y,v)=>y[0]+e[v]).join(","),l=Ga("rc",a),u=Ga("source",a),c=`${l[a-1]} < ${this.outputShape[a-1]}`,d=a===1?"source":`vec2(${u.slice(-2).join()})`,p=[`${i} rc = outputLoc;`,`${l[a-1]} += 1;
       if(${c}) {
      `,a===1?"":`}
       rc = outputLoc;
       ${l[a-2]} += 1;
       if(${l[a-2]} < ${this.outputShape[a-2]}) {`,a===1?"":`  ${l[a-1]} += 1;
         if(${c}) {`],f=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let y=0,v=a===1?2:4;y<v;y++)g+=`
        ${p[y]}
        if (${f}) {
          result[${y}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${y}] = getChannel(getX(${u.join()}), ${d});
        }
      `;g+=a===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const UB=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:o}=r;if(be(a.shape)===0){const u=i.map((c,d)=>c[0]+a.shape[d]+c[1]);return g0({backend:n,attrs:{shape:u,value:o,dtype:a.dtype}})}const s=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mTe(a.shape,i,o):new fTe(a.shape,i,o),l=[[o]];return n.runWebGLProgram(s,[a],a.dtype,l)},gTe={kernelName:Ax,backendName:"webgl",kernelFunc:UB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const yTe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,bTe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+u0+`
  return result;
`,vTe=sa({opSnippet:yTe,packedOpSnippet:bTe}),xTe={kernelName:sg,backendName:"webgl",kernelFunc:vTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function wTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:o}=r,s=a.shape.length,l=[],u=Zt(i,a.shape);let c=u;const d=mr(c,s);let p=a;d!=null&&(p=Ha({inputs:{x:a},backend:n,attrs:{perm:d}}),c=gr(c.length,s),l.push(p)),ia("prod",c,s);let f;if(n.shouldExecuteOnCPU([p])){const g=n.texData.get(p.dataId).values,{outVals:y,outShape:v,outDtype:b}=Tke(p.shape,p.dtype,g,c);f=n.makeTensorInfo(v,b,y)}else{const[g,y]=aa(p.shape,c),v=be(y),b=Le({inputs:{x:p},backend:n,attrs:{shape:[-1,v]}}),x=Cw(a.dtype),w=fd(b,x,"prod",n);f=Le({inputs:{x:w},backend:n,attrs:{shape:g}}),l.push(b),l.push(w)}if(o){l.push(f);const g=Pr(f.shape,u);f=Le({inputs:{x:f},backend:n,attrs:{shape:g}})}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),f}const kTe={kernelName:Lx,backendName:"webgl",kernelFunc:wTe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function STe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:s}=r,l=a.map(b=>n.readSync(b.dataId)),u=a.map(b=>b.shape),c=n.readSync(i.dataId),d=n.readSync(o.dataId),[p,f,g]=Ike(l,u,c,i.shape,i.dtype,d,o.shape,s),y=p.map(b=>n.makeTensorInfo([b.length],"int32",b)),v=n.makeTensorInfo(g,i.dtype,f);return y.concat([v])}const CTe={kernelName:zx,backendName:"webgl",kernelFunc:STe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function ETe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),d=n.readSync(o.dataId),p=s.map(v=>n.readSync(v.dataId)),f=s.map(v=>v.shape),[g,y]=_ke(u,a.shape,c,i.shape,i.dtype,d,o.shape,p,f,l);return n.makeTensorInfo(g,i.dtype,y)}const NTe={kernelName:Bx,backendName:"webgl",kernelFunc:ETe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const VB=t=>{const{backend:e,attrs:n}=t,{start:r,stop:a,step:i,dtype:o}=n,s=Rke(r,a,i,o);return e.makeTensorInfo([s.length],o,s)},TTe={kernelName:jx,backendName:"webgl",kernelFunc:VB};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const ITe="return 1.0 / x;",_Te=Qt({opSnippet:ITe}),RTe={kernelName:lg,backendName:"webgl",kernelFunc:_Te};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const $Te=wo+`
  return (x < 0.0) ? 0.0 : x;
`,OTe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,MTe=Qt({opSnippet:$Te,packedOpSnippet:OTe}),PTe={kernelName:ug,backendName:"webgl",kernelFunc:MTe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const FTe=wo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,ATe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,DTe=Qt({opSnippet:FTe,packedOpSnippet:ATe}),LTe={kernelName:cg,backendName:"webgl",kernelFunc:DTe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class zTe{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];let p;i?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class BTe{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];let p;i?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function jTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,u]=s,c=me().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new BTe(a.shape,l,u,i,o):new zTe(a.shape,l,u,i,o);return n.runWebGLProgram(c,[a],"float32")}const UTe={kernelName:Gx,backendName:"webgl",kernelFunc:jTe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class VTe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,o,s]=e,l=[r&&o>1?a-1:a,r&&s>1?i-1:i],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],d=l[1]/u[1],p=1/c,f=1/d,g=Math.ceil(p)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${f});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${a-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function WTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r,s=new VTe(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const GTe={kernelName:h4,backendName:"webgl",kernelFunc:WTe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class HTe{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";let f;i?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class qTe{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,u]=e;this.outputShape=[o,n,r,u];const c=[a&&n>1?s-1:s,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";let f;i?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function KTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:o,size:s}=r,[l,u]=s,c=me().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new qTe(a.shape,l,u,i,o):new HTe(a.shape,l,u,i,o);return n.runWebGLProgram(c,[a],a.dtype)}const XTe={kernelName:Wx,backendName:"webgl",kernelFunc:KTe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class QTe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,o,s]=e,l=[r&&o>1?a-1:a,r&&s>1?i-1:i],u=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=l[0]/u[0],d=l[1]/u[1],p=1/c,f=1/d,g=Math.ceil(p)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${f});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function YTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:o}=r,s=new QTe(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const ZTe={kernelName:p4,backendName:"webgl",kernelFunc:YTe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class JTe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const a=s=>n.indexOf(s)!==-1&&e[s]!==1?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`,i=e.map((s,l)=>a(l)).join(","),o=On(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class eIe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const a=Ga("rc",r),i=`${a[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${a[r-2]} + 1 < ${this.outputShape[r-2]}`,s=On(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(a.slice())};
          if(${i}){
            result.g = ${u(a.slice())};
          }
          if(${o}) {
            result.b = ${c(a.slice())};
            if(${i}) {
              result.a = ${d(a.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(g){return p(g)}function u(g){return g[r-1]="("+g[r-1]+" + 1)",p(g)}function c(g){return g[r-2]="("+g[r-2]+" + 1)",p(g)}function d(g){return g[r-1]="("+g[r-1]+" + 1)",g[r-2]="("+g[r-2]+" + 1)",p(g)}function p(g){const y=e.map((x,w)=>f(w,g)),v=y.join(","),b=y.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${b}))`}function f(g,y){return n.indexOf(g)!==-1&&e[g]!==1?`${e[g]} - ${y[g]} - 1`:`${y[g]}`}}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function tIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r,o=a.shape.length,s=Zt(i,a.shape);if(o===0)return Ti({inputs:{x:a},backend:n});const l=me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new eIe(a.shape,s):new JTe(a.shape,s);return n.runWebGLProgram(l,[a],a.dtype)}const nIe={kernelName:Hx,backendName:"webgl",kernelFunc:tIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class rIe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],a=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const aIe={kernelName:yw,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:o}=e,s=n,l=new rIe(r.shape,i),[u,c]=ZT(o,r.shape[1],r.shape[2]),d=[[u,c,Math.sin(a),Math.cos(a)]];return s.runWebGLProgram(l,[r],r.dtype,d)}};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const iIe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,oIe=Qt({opSnippet:iIe}),sIe={kernelName:dg,backendName:"webgl",kernelFunc:oIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const lIe="return inversesqrt(x);",uIe=Qt({opSnippet:lIe,cpuKernelImpl:$ke}),cIe={kernelName:pg,backendName:"webgl",kernelFunc:uIe};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class WB{constructor(e,n,r,a,i,o,s=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const l=On(i.length),u=On(o.length);let c="";r===1?c="i":r===2&&(c="i, j");const d=`getIndices(${c})`;let p="";a===1?p="i":a===2&&(p="i, coords[1]");const f=`getUpdates(${p})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${f};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function dIe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Gp(i,a,o),p=[d/u,u];if(d===0)return n.makeTensorInfo(o,a.dtype);const f=Le({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),g=Le({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),y=n.makeTensorInfo([],"float32",new Float32Array([0])),v=new WB(l,s,f.shape.length,g.shape.length,c,p),b=n.runWebGLProgram(v,[g,f,y],g.dtype),x=Le({inputs:{x:b},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(y),x}const pIe={kernelName:qx,backendName:"webgl",kernelFunc:dIe};/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class hIe{constructor(e,n,r,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,s=me().getNumber("WEBGL_VERSION")===2?i:o,l=a==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${s}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
* @license
* Copyright 2022 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function fIe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:o}=r,s=new hIe(a.shape[0],a.shape[1],i.shape[1],o),l=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",l)}const mIe={kernelName:Kx,backendName:"webgl",kernelFunc:fIe};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class gIe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let a,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",a="resRC";else{const s=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${s[c]}`),c<e&&l.push(`${s[c]}`);a=l.join(),i=u.join()}const o=On(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${a});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function yIe(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e,o=new gIe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],oi(a.dtype,i.dtype))}const bIe={kernelName:Xx,backendName:"webgl",kernelFunc:yIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const vIe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${tI};
  float scale = ${nI};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,xIe=Qt({opSnippet:vIe}),wIe={kernelName:hg,backendName:"webgl",kernelFunc:xIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const kIe=yh+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,SIe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,CIe=Qt({opSnippet:kIe,packedOpSnippet:SIe,cpuKernelImpl:Mke}),EIe={kernelName:yg,backendName:"webgl",kernelFunc:CIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const NIe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,TIe=Qt({opSnippet:NIe}),IIe={kernelName:gg,backendName:"webgl",kernelFunc:TIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const _Ie=yh+`
  return sin(x);
`,RIe=Qt({opSnippet:_Ie}),$Ie={kernelName:fg,backendName:"webgl",kernelFunc:RIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const OIe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,MIe=Qt({opSnippet:OIe}),PIe={kernelName:mg,backendName:"webgl",kernelFunc:MIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const FIe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,AIe=Qt({opSnippet:FIe}),DIe={kernelName:bg,backendName:"webgl",kernelFunc:AIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const LIe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:o}=r;U(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const s=i.reduce((b,x)=>b*x),l=[[0,0]];l.push(...o);for(let b=1+i.length;b<a.shape.length;++b)l.push([0,0]);const u=[],c=UB({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),d=Zg(c.shape,i,s,!1),p=Jg(d.length,i.length,!1),f=e0(c.shape,i,s,!1),g=Le({inputs:{x:c},backend:n,attrs:{shape:d}}),y=Ha({inputs:{x:g},backend:n,attrs:{perm:p}}),v=Le({inputs:{x:y},backend:n,attrs:{shape:f}});return u.push(c),u.push(g),u.push(y),u.forEach(b=>n.disposeIntermediateTensorInfo(b)),v},zIe={kernelName:Zx,backendName:"webgl",kernelFunc:LIe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function BIe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${a.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.readSync(r.dataId),l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],[d,p,f,g,y]=Fke(s,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],a.dtype,f),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const jIe={kernelName:tw,backendName:"webgl",kernelFunc:BIe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function UIe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[u,c,d]=Ake(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const VIe={kernelName:nw,backendName:"webgl",kernelFunc:UIe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function WIe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[u,c]=Kz(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const GIe={kernelName:rw,backendName:"webgl",kernelFunc:WIe};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function HIe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),[u,c]=Kz(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const qIe={kernelName:aw,backendName:"webgl",kernelFunc:HIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function KIe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=Gp(i,a,s),f=!1;if(i.dtype==="string"){const b=n.bufferSync(a),x=n.bufferSync(i),w=yl(n.readSync(o.dataId)[0]),S=Oke(b,x,s,p,c,u,l,d,w,f);return n.makeTensorInfo(s,S.dtype,S.values)}const g=new WB(u,l,a.shape.length,i.shape.length,d,[p,1],f),y=n.runWebGLProgram(g,[i,a,o],i.dtype),v=Le({inputs:{x:y},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(y),v}const XIe={kernelName:iw,backendName:"webgl",kernelFunc:KIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function QIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:o}=r,s=Zt(o,a.shape)[0],l=gI(a,i,s),u=a.shape.length,c=new Array(u).fill(0),d=a.shape.slice();return l.map(p=>{const f=[...d];f[s]=p;const g=bh({inputs:{x:a},backend:n,attrs:{begin:c,size:f}});return c[s]+=p,g})}const YIe={kernelName:Jx,backendName:"webgl",kernelFunc:QIe};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const GB="return sqrt(x);",ZIe=Qt({opSnippet:GB,packedOpSnippet:GB,cpuKernelImpl:Dke}),JIe={kernelName:vg,backendName:"webgl",kernelFunc:ZIe};/**
* @license
* Copyright 2019 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const e_e="return x * x;",t_e=Qt({opSnippet:e_e}),n_e={kernelName:f4,backendName:"webgl",kernelFunc:t_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const HB="return (a - b) * (a - b);",r_e=sa({opSnippet:HB,packedOpSnippet:HB}),a_e={kernelName:xg,backendName:"webgl",kernelFunc:r_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function i_e({inputs:t,attrs:e,backend:n}){const{x:r}=t,a=wo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new _l(r.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}const o_e={kernelName:Eg,backendName:"webgl",kernelFunc:i_e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class s_e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const a=r.length,i=On(r.length),o=On(r.length);let s="";if(a===1)s="coords * strides + begin";else{let l=0;s=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function l_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:o,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:f,finalShape:g,isIdentity:y,sliceDim0:v,isSimpleSlice:b,begin:x,end:w,strides:S}=rT(a.shape,i,o,s,l,u,c,d,p);let C;if(y)C=Le({inputs:{x:a},backend:n,attrs:{shape:g}});else if(v||b){U(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const R=J4(x,w,S),T=bh({inputs:{x:a},backend:n,attrs:{begin:x,size:R}});C=Le({inputs:{x:T},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(T)}else if(n.shouldExecuteOnCPU([a])){const R=n.readSync(a.dataId),T=Tt(a.shape,a.dtype,R),$=Lke(f,T,S,x);C=n.makeTensorInfo(g,a.dtype,$.values)}else{const R=new s_e(x,S,f);C=n.runWebGLProgram(R,[a],a.dtype)}const E=Le({inputs:{x:C},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(C),E}const u_e={kernelName:ow,backendName:"webgl",kernelFunc:l_e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function c_e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,p=n.readSync(c.dataId),f=n.readSync(d.dataId),[g,y]=zke(p,f,a,i,o,s,l,u);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}const d_e={kernelName:sw,backendName:"webgl",kernelFunc:c_e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function p_e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[u,c,d]=Bke(s,l,a),p=c.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const h_e={kernelName:lw,backendName:"webgl",kernelFunc:p_e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function f_e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),s=jke(o,a);return n.makeTensorInfo(i.shape,"int32",s)}const m_e={kernelName:uw,backendName:"webgl",kernelFunc:f_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const g_e="return tan(x);",y_e=Qt({opSnippet:g_e}),b_e={kernelName:kg,backendName:"webgl",kernelFunc:y_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const v_e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,x_e=Qt({opSnippet:v_e}),w_e={kernelName:Sg,backendName:"webgl",kernelFunc:x_e};/**
* @license
* Copyright 2017 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class k_e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const a=On(this.rank),i=S_e(e);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function S_e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<t.length;a++)r.push(`imod(${n[a]}, ${t[a]})`);return r.join()}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function qB(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;if(a.dtype==="string"||a.shape.length>5){const s=n.readSync(a.dataId),l=a.dtype==="string"?s.map(d=>yl(d)):s,u=Tt(a.shape,a.dtype,l),c=Vke(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}const o=new k_e(a.shape,i);return n.runWebGLProgram(o,[a],a.dtype)}const C_e={kernelName:Cg,backendName:"webgl",kernelFunc:qB};class E_e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class N_e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function md(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function KB(t){let e=1;for(;e<t;)e*=2;return e}function T_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:o}=r,s=me().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=me().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=a.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([a])||c<s||i>l){const $=n.readSync(a.dataId),[P,D]=Wke($,u,a.dtype,i,o);return[n.makeTensorInfo(P.shape,P.dtype,P.values),n.makeTensorInfo(D.shape,D.dtype,D.values)]}if(i===0)return u[u.length-1]=0,[n.makeTensorInfo(u,a.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[a,g0({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(a.dataId),p=d!==null&&d.isPacked,f=p?n.unpackTensor(a):a,g=be(u)/c,y=Le({inputs:{x:f},attrs:{shape:[g,c]},backend:n});p&&md(n,f);const v=KB(i),b=KB(c);let x=null;const w=()=>x===null?[y,y]:[y,x],S=($,P,D)=>{const B=w(),z=new E_e(D),q=[[c],[x===null?1:0],[Number.NEGATIVE_INFINITY],[$],[P]],Y=x;x=n.runWebGLProgram(z,B,"int32",q),md(n,Y)};for(let $=1;$<v;$*=2){const P=$*2;for(let D=$;D>=1;D/=2)S(P,D,[g,b])}for(let $=b;$>v;$/=2){const P=w(),D=new N_e([g,$/2]),B=[[c],[x===null?1:0],[v]],z=x;x=n.runWebGLProgram(D,P,"int32",B),md(n,z);const q=v/2,Y=q*2;for(let Z=q;Z>=1;Z/=2)S(Y,Z,x.shape)}let C=x;x=bh({inputs:{x},backend:n,attrs:{begin:0,size:[g,i]}}),md(n,C);let E=FB({inputs:{x:y,indices:x},backend:n,attrs:{axis:1,batchDims:1}});md(n,y);const R=u.slice(0,-1);R.push(i),C=x,x=Le({inputs:{x},attrs:{shape:R},backend:n}),md(n,C);const T=E;return E=Le({inputs:{x:E},attrs:{shape:R},backend:n}),md(n,T),[E,x]}const I_e={kernelName:cw,backendName:"webgl",kernelFunc:T_e};/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class __e{constructor(e,n,r,a,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s=r==="nearest"?1:2;let l;switch(a){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${s} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function R_e(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,transforms:i}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:u}=r,[c,d,p,f]=a.shape,[g,y]=u??[d,p],v=[c,g,y,f],b=new __e(d,p,o,s,l,v);return n.runWebGLProgram(b,[a,i],"float32")}const $_e={kernelName:dw,backendName:"webgl",kernelFunc:R_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the License);
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an AS IS BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function O_e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;s0(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:s,outputShape:l,indices:u}=Gke(o,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const M_e={kernelName:pw,backendName:"webgl",kernelFunc:O_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function P_e(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const o=a,s=o.shape.length,l=a.shape[i],u=new Array(s-1);let c=0;for(let y=0;y<s;y++)y!==i&&(u[c++]=o.shape[y]);const d=[],p=new Array(s).fill(0),f=o.shape.slice();f[i]=1;const g=new Array(l);for(let y=0;y<g.length;y++){p[i]=y;const v=bh({inputs:{x:o},backend:n,attrs:{begin:p,size:f}}),b=Le({inputs:{x:v},backend:n,attrs:{shape:u}});g[y]=b,d.push(v)}return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const F_e={kernelName:hw,backendName:"webgl",kernelFunc:P_e};/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class A_e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,a=e.batchSize,i=e.inSize,o=e.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,d=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let g="";i%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${g}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${u});
      }
    `}}/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/function D_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:o}=r,s=a.shape.length,l=[];let u=0;const c=mr([u],s);let d=a;c!=null&&(d=Ha({inputs:{x:a},backend:n,attrs:{perm:c}}),l.push(d),u=gr(1,s)[0]);const p=i7(d.shape,u,o),f=be([d.shape[u]]),g=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(g);const y=Cw(a.dtype),v=(S,C,E,R,T)=>{const $=S.shape[0],P=S.shape[1],D=a7(P,T),B={windowSize:D,inSize:P,batchSize:$,numSegments:T},z=new A_e(B,C),q=n.compileAndRun(z,[S,E],R);if(l.push(q),q.shape[1]===T)return q;const Y=VB({backend:n,attrs:{start:0,stop:T,step:1,dtype:"float32"}}),Z=qB({inputs:{x:Y},backend:n,attrs:{reps:[P/D]}});return l.push(Y),l.push(Z),v(q,C,Z,R,T)},b=v(g,"unsortedSegmentSum",i,y,o),x=Le({inputs:{x:b},backend:n,attrs:{shape:p}});let w=x;if(c!=null){l.push(x);const S=Vg(c);w=Ha({inputs:{x:w},backend:n,attrs:{perm:S}})}return l.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const L_e={kernelName:fw,backendName:"webgl",kernelFunc:D_e};/**
* @license
* Copyright 2020 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/const z_e=[ASe,LSe,jSe,WSe,HSe,XSe,YSe,JSe,rCe,iCe,lCe,dCe,fCe,bCe,wCe,SCe,ECe,_Ce,$Ce,MCe,DCe,WCe,HCe,KCe,e3e,n3e,o3e,vSe,u3e,f3e,b3e,C3e,N3e,I3e,R3e,O3e,F3e,L3e,j3e,V3e,G3e,q3e,Q3e,Z3e,nEe,aEe,sEe,cEe,pEe,gEe,xEe,CEe,TEe,REe,$Ee,MEe,FEe,DEe,zEe,jEe,GEe,KEe,YEe,JEe,nNe,iNe,uNe,hNe,bSe,mNe,p3e,bNe,wNe,CNe,wSe,INe,ONe,PNe,LNe,jNe,GNe,KNe,ZNe,n4e,i4e,s4e,d4e,h4e,m4e,v4e,w4e,S4e,E4e,T4e,$4e,F4e,z4e,q4e,CSe,Y4e,eTe,rTe,oTe,QCe,uTe,dTe,hTe,gTe,xTe,SSe,kTe,CTe,NTe,TTe,YCe,V4e,RTe,PTe,LTe,NSe,UTe,GTe,XTe,ZTe,nIe,aIe,sIe,cIe,pIe,mIe,bIe,wIe,EIe,IIe,$Ie,PIe,UCe,G4e,DIe,zIe,jIe,VIe,GIe,qIe,XIe,YIe,JIe,n_e,a_e,o_e,u_e,d_e,h_e,m_e,W4e,MSe,b_e,w_e,C_e,I_e,$_e,PSe,M_e,F_e,L_e,cTe];for(const t of z_e)xw(t);async function B_e(){return await Hge({base:"pascal",quantizationBytes:2})}async function j_e(t,e){const n=await t.segment(e);return V_e(e,n)}function U_e(t,e,n,r,a){const i=document.createElement("canvas"),o=document.createElement("canvas"),s=i.getContext("2d"),l=o.getContext("2d");i.width=r,i.height=a,o.width=r,o.height=a,s.drawImage(e,0,0,r,a),l.putImageData(n,0,0);const u=s.getImageData(0,0,r,a),c=u.data,d=l.getImageData(0,0,r,a).data;for(let p=0,f=d.length;p<f;p+=4)d[p]===t[0]&&d[p+1]===t[1]&&d[p+2]===t[2]&&(c[p+3]=0);return s.putImageData(u,0,0),i.toDataURL()}function V_e(t,e){const{height:n,width:r,segmentationMap:a}=e,i=new ImageData(a,r,n);return U_e([0,0,0],t,i,r,n)}const W_e=()=>{const t=_.useRef(null),e=async n=>(t.current||(t.current=await B_e()),await j_e(t.current,n));return _.useEffect(()=>()=>{t.current&&t.current.dispose()},[]),{autoRemoveBackground:e}};async function G_e(t){try{const e=await fetch(t);if(!e.ok)throw new Error(e.statusText);const n=await e.json();return"@type"in n?n["@type"]!="sc:Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type of sc:Manifest but has a type of: "+n["@type"]),null):q_e(n):"type"in n?n.type!="Manifest"?(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a type of Manifest but has a type of: "+n.type),null):K_e(n):(console.log("The JSON for this Manifest doesn't look like a Manifest. It should have either a @type or type value of Manifest"),null)}catch(e){return console.log("I was unable to get the Manifest you supplied due to: "+e),null}}function H_e(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}function q_e(t){var e,n,r;if("sequences"in t){let a=t.sequences;H_e(a)&&(a=[a]);let i=!1;for(const o of a)if("canvases"in o){i=!0;for(const s of o.canvases){const l=(r=(n=(e=s.images[0])==null?void 0:e.resource)==null?void 0:n.service)==null?void 0:r["@id"];if(l)return l}}else i||console.log("The manifest you supplied contains no canvases so there are no images to show.")}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function K_e(t){if("items"in t){const e=t.items;for(const n of e){const r=n.items[0].items[0].body.service[0]["@id"];if(r)return r}}else console.log("The manifest you supplied contains no sequence so there are no images to show.");return null}function XB(t,e){const n=window.getComputedStyle(t);return parseInt(n.getPropertyValue(e),10)}function X_e(t,e){const{width:n,height:r}=e,a=1080,i="0",o="default",s=".jpg",l=document.querySelector(".displayregioncontainer"),u=document.querySelector(".displayregion");if(!l||!u)throw new Error("Canvas or selection element not found");const{clientWidth:c,clientHeight:d}=l,p=n*d/r,f=(c-p)/2,g=n/p,y=9,v=XB(u,"left"),b=XB(u,"top"),x=Math.round(u.clientWidth+y),w=Math.round(u.clientHeight+y),S=Math.max(Math.round((v-f)*g),0),C=Math.max(Math.round(b*g),0),E=Math.min(Math.round(x*g),n),R=Math.min(Math.round(w*g),r),T=`${S},${C},${E},${R}`;return`${t}/${T}/${a},/${i}/${o}${s}`}const QB={fetchIIIFIdentifier:async t=>{try{return await G_e(t)}catch(e){return console.error(e),null}},getCroppedImagePath:async t=>{try{const e=t+"/info.json",n=await fetch(e);if(!n.ok)throw new Error(n.statusText);const r=await n.json();return X_e(t,r)}catch(e){console.error(e)}}};function Q_e({imageList:t,handleImageClick:e}){return X.jsx(ba,{margin:"my-4",className:"flex overflow-x-auto",style:{maxHeight:"200px",scrollSnapType:"x mandatory",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:t.map(n=>X.jsx("img",{src:n.thumbnail,alt:n.name,onClick:()=>e(n),style:{cursor:"pointer",marginRight:"10px",scrollSnapAlign:"start"},role:"presentation"},n.id))})}const Y_e=_.lazy(()=>JM(()=>import("./index-4V9NI2Am.js"),R0([]))),Z_e={canvasBackgroundColor:"010A01",gestureSettingsTouch:{dragToPan:!1,dblClickToZoom:!1,dblClickDragToZoom:!1,flickEnabled:!1,pinchRotate:!0},informationPanel:{open:!1},openSeadragon:{loadTilesWithAjax:!0,showNavigationControl:!1,showHomeControl:!1,showFullPageControl:!1,showRotationControl:!1,showFlipControl:!1,showZoomControl:!1},showTitle:!1,showIIIFBadge:!1},J_e={colors:{primary:"#b990c1",accent:"#b990c1",secondary:"#EDECEA"}};function e5e(){const{t}=gs(),e=()=>Toe.success(t("collectionToastSuccess")),{addToArtwork:n,imageLikeList:r}=Ec(),[a,i]=_.useState(r[0]||null),[o,s]=_.useState(""),[l,u]=_.useState(""),[c,d]=_.useState([]),[p,f]=_.useState(""),[g,y]=_.useState(!0),{autoRemoveBackground:v}=W_e();_.useEffect(()=>{o&&setTimeout(()=>{u(document.querySelectorAll("canvas")[0].toDataURL())},1e3)},[o]),_.useEffect(()=>{a&&u(a?.image)},[a]);const b=E=>{i(E)},x=E=>{const R=new Image;R.src=E,v(R).then(T=>{f(T)})},w=async(E,R)=>{try{if(e(),g){const T=await QB.getCroppedImagePath(R);T&&n(E,T)}else n(E,R)}catch(T){console.error("Error:",T)}},S=E=>{E&&s(E)},C=()=>X.jsxs("h2",{className:"mt-4 text-lg md:text-xl",children:["\u{1F300} ",t("collectionLoading")]});return X.jsxs(ba,{margin:"my-4",className:"flex flex-col flex-wrap gap-2 lg:gap-8 justify-center content-center text-center mx-auto",children:[X.jsx("h1",{className:"text-lg leading-6 px-8 md:px-24 md:text-xl lg:px-48",children:t("collectionTitle")}),X.jsx(Noe,{}),X.jsx(Q_e,{imageList:r,handleImageClick:b}),a&&X.jsxs(ba,{margin:"my-0",children:[X.jsxs(ba,{margin:"m-0",className:"flex flex-wrap gap-4 justify-center text-center mx-auto no-safe-areas",children:[X.jsx("p",{className:"text-lg self-center md:text-xl",children:t("collectionSwitchLasso")}),X.jsx(pP,{checked:g,onChange:()=>y(!g)}),X.jsx("p",{className:"text-lg self-center md:text-xl",children:t("collectionSwitchViewer")}),X.jsx(kr,{className:"text-xl w-2/3 mx-auto h-12",rounded:!0,inline:!0,onClick:()=>g?w(a?.id,a?.identifier):w("1",p),children:t("collectionAddText")})]}),g?X.jsx(_.Suspense,{fallback:C(),children:X.jsx(Y_e,{iiifContent:a.url,options:Z_e,customTheme:J_e,canvasIdCallback:S})}):X.jsxs("div",{className:"mt-4",children:[X.jsx(Voe,{value:c,src:l,onChange:E=>{d(E)},onComplete:E=>{E.length&&Loe(l,E,(R,T)=>{R||f(T.toDataURL())})}}),X.jsxs("div",{children:[p&&X.jsx(kr,{className:"mt-4 text-xl w-2/3 mx-auto h-12",rounded:!0,inline:!0,onClick:()=>x(p),children:t("collectionRemoveText")}),X.jsx("img",{className:"my-4 mx-auto",src:p,alt:""})]})]})]})]})}function t5e(){const{t}=gs();return X.jsxs(dP,{labels:!0,icons:!0,className:"left-0 bottom-0 fixed k-color-brand-primary text-center",innerClassName:"tabbar-inner",children:[X.jsx(Yf,{active:cu({path:oo("/").pathname,end:!0}),to:"/",component:gp,icon:X.jsx(La,{material:X.jsx(see,{className:"w-10 h-10"}),className:`transition duration-300 ${cu({path:oo("/").pathname,end:!0})&&"animate-pulse"}`}),label:t("start"),touchRipple:!1}),X.jsx(Yf,{active:cu({path:oo("/selection").pathname,end:!0}),to:"/selection",component:gp,icon:X.jsx(La,{material:X.jsx(aee,{className:"w-10 h-10"}),className:`transition duration-300 ${cu({path:oo("/selection").pathname,end:!0})&&"animate-pulse"}`}),label:t("selection"),touchRipple:!1}),X.jsx(Yf,{active:cu({path:oo("/collection").pathname,end:!0}),to:"/collection",component:gp,icon:X.jsx(La,{material:X.jsx(gee,{className:"w-10 h-10"}),className:`transition duration-300 ${cu({path:oo("/collection").pathname,end:!0})&&"animate-pulse"}`}),label:t("collection"),touchRipple:!1}),X.jsx(Yf,{active:cu({path:oo("/creation").pathname,end:!0}),to:"/creation",component:gp,icon:X.jsx(La,{material:X.jsx(cee,{className:"w-10 h-10"}),className:`transition duration-300 ${cu({path:oo("/creation").pathname,end:!0})&&"animate-pulse"}`}),label:t("artwork"),touchRipple:!1})]})}const n5e="/logos/bmbf_logo_de.jpg",r5e="/logos/bmbf_logo_en.jpg",a5e="/logos/digitalwarenkombinat.png",i5e="/logos/prototype_fund_logo.png",o5e=()=>X.jsx(Nt,{href:"https://prototypefund.de/",target:"_blank",children:X.jsx("img",{src:i5e,alt:"Logo Protype Fund",className:"w-48 md:w-64 m-auto"})}),s5e=()=>{const{i18n:t}=gs();return X.jsx(Nt,{href:"https://www.bmbf.de/",target:"_blank",children:X.jsx("img",{src:t.resolvedLanguage==="en"?r5e:n5e,alt:"Logo Bundesministerium f\xFCr Bildung und Forschung",className:"w-48 md:w-64 m-auto"})})},l5e=()=>X.jsx(Nt,{href:"https://digitalwarenkombinat.de/",target:"_blank",children:X.jsx("img",{src:a5e,alt:"Logo Digitalwarenkombinat",className:"w-48 md:w-64 m-auto"})});function u5e(t,e){const{t:n,i18n:r}=gs();return X.jsx(uP,{side:"right",opened:t,onBackdropClick:()=>e(!1),children:X.jsxs(Qy,{children:[X.jsx(qy,{right:X.jsx(Eee,{onClick:()=>e(!1),className:"mr-4 w-10 h-10"})}),X.jsxs(ba,{margin:"my-2 md:my-8",className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[X.jsx("p",{className:"text-xl",children:n("sidebarChooseLanguage")}),X.jsxs("div",{children:[X.jsx(kr,{onClick:()=>r.changeLanguage("de"),className:"p-4 text-xl text-black w-10 mr-2 h-10",rounded:!0,inline:!0,children:"DE"}),X.jsx(kr,{onClick:()=>r.changeLanguage("en"),className:"p-4 text-xl text-black w-10 h-10",rounded:!0,inline:!0,children:"EN"})]}),X.jsx(Nt,{className:"text-xl",to:"/about",component:gp,onClick:()=>e(!1),children:n("sidebarAbout")}),X.jsx(Nt,{className:"text-xl",to:"/legal",component:gp,onClick:()=>e(!1),children:n("sidebarLegal")}),X.jsx(o5e,{}),X.jsx(s5e,{}),X.jsx(l5e,{})]})]})})}function c5e(){const[t,e]=_.useState(!1),[n,r]=_.useState(null);function a(u){console.log(u.active),r(u.active.data.current)}function i(u){u.over&&r(null)}const o=IP(GP,{activationConstraint:{distance:8}}),s=IP(HP,{activationConstraint:{delay:100,tolerance:5}}),l=gZ(o,s);return X.jsxs(dJ,{onDragEnd:i,onDragStart:a,sensors:l,children:[X.jsx(tP,{theme:"material",children:X.jsxs(Qy,{children:[X.jsx(qy,{className:"top-0 sticky",transparent:!0,right:X.jsx(VJ,{onClick:()=>e(!0),className:"mr-4 w-10 h-10"})}),X.jsx("main",{className:"h-[calc(100%_-_192px)] overflow-auto",children:X.jsx(rK,{})}),X.jsx(t5e,{}),u5e(t,e)]})}),X.jsx(SK,{}),X.jsx($J,{children:n?X.jsx("img",{src:n.image,alt:n.id,style:{cursor:"move",maxHeight:"100px",width:"auto"}}):null})]})}function d5e(){const{t}=gs();return X.jsx(X.Fragment,{children:X.jsxs(ba,{strong:!0,inset:!0,className:"flex flex-col flex-wrap gap-4 justify-center content-center text-center mx-auto",children:[X.jsx("h1",{className:"text-5xl mb-8",children:t("legal.title")}),X.jsx("h2",{className:"text-3xl",children:t("legal.informationtitle")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.informationtitleparagraph1")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.informationtitleparagraph2")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.informationtitleparagraph3")}),X.jsx("h2",{className:"text-3xl",children:t("legal.representation")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.representationparagraph1")}),X.jsx("h2",{className:"text-3xl",children:t("legal.contact")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:X.jsxs(b3,{i18nKey:"legal.contactparagraph1",children:[X.jsx("p",{children:t("legal.contactparagraph1")}),X.jsx(Nt,{href:"mailto:info@digitalwarenkombinat.de",children:"info@digitalwarenkombinat.de"})]})}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.contactparagraph2")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph1")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph2")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph3")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph4")}),X.jsx("p",{className:"text-lg md:px-16 md:text-xl",children:t("legal.legalparagraph5")})]})})}var YB={exports:{}},ZB={exports:{}},JB={exports:{}},ej={exports:{}},tj={exports:{}},d_=Object.defineProperty,p5e=Object.getOwnPropertyDescriptor,h5e=Object.getOwnPropertyNames,f5e=Object.prototype.hasOwnProperty,nj=(t,e)=>{for(var n in e)d_(t,n,{get:e[n],enumerable:!0})},m5e=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of h5e(e))!f5e.call(t,a)&&a!==n&&d_(t,a,{get:()=>e[a],enumerable:!(r=p5e(e,a))||r.enumerable});return t},g5e=t=>m5e(d_({},"__esModule",{value:!0}),t),rj={};nj(rj,{FluidValue:()=>F5e,Globals:()=>aj,addFluidObserver:()=>A5e,callFluidObserver:()=>Fj,callFluidObservers:()=>P5e,clamp:()=>vj,colorToRgba:()=>S_,colors:()=>N5e,createInterpolator:()=>C_,createStringInterpolator:()=>U5e,defineHidden:()=>v5e,deprecateDirectCall:()=>H5e,deprecateInterpolate:()=>W5e,each:()=>dj,eachProp:()=>w5e,easings:()=>$5e,flush:()=>pj,flushCalls:()=>S5e,frameLoop:()=>gj,getFluidObservers:()=>M5e,getFluidValue:()=>Pj,hasFluidValue:()=>O5e,hex3:()=>Cj,hex4:()=>Ej,hex6:()=>Nj,hex8:()=>Tj,hsl:()=>kj,hsla:()=>Sj,is:()=>Os,isAnimatedString:()=>q5e,isEqual:()=>x5e,isSSR:()=>T2,noop:()=>cj,onResize:()=>Bj,onScroll:()=>tRe,once:()=>N_,prefix:()=>D2,raf:()=>tn,removeFluidObserver:()=>D5e,rgb:()=>xj,rgba:()=>wj,setFluidGetter:()=>Aj,toArray:()=>k5e,useConstant:()=>rRe,useForceUpdate:()=>sRe,useIsomorphicLayoutEffect:()=>I_,useMemoOne:()=>lRe,useOnce:()=>dRe,usePrev:()=>hRe,useReducedMotion:()=>mRe});var y5e=g5e(rj),aj={};nj(aj,{assign:()=>mj,colors:()=>Vu,createStringInterpolator:()=>b_,skipAnimation:()=>fj,to:()=>hj,willAdvance:()=>v_});var p_=b0(),tn=t=>y0(t,p_),h_=b0();tn.write=t=>y0(t,h_);var N2=b0();tn.onStart=t=>y0(t,N2);var f_=b0();tn.onFrame=t=>y0(t,f_);var m_=b0();tn.onFinish=t=>y0(t,m_);var xh=[];tn.setTimeout=(t,e)=>{let n=tn.now()+e,r=()=>{let i=xh.findIndex(o=>o.cancel==r);~i&&xh.splice(i,1),Uu-=~i?1:0},a={time:n,handler:t,cancel:r};return xh.splice(ij(n),0,a),Uu+=1,oj(),a};var ij=t=>~(~xh.findIndex(e=>e.time>t)||~xh.length);tn.cancel=t=>{N2.delete(t),f_.delete(t),m_.delete(t),p_.delete(t),h_.delete(t)},tn.sync=t=>{y_=!0,tn.batchedUpdates(t),y_=!1},tn.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...a){e=a,tn.onStart(n)}return r.handler=t,r.cancel=()=>{N2.delete(n),e=null},r};var g_=typeof window<"u"?window.requestAnimationFrame:()=>{};tn.use=t=>g_=t,tn.now=typeof performance<"u"?()=>performance.now():Date.now,tn.batchedUpdates=t=>t(),tn.catch=console.error,tn.frameLoop="always",tn.advance=()=>{tn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):lj()};var ju=-1,Uu=0,y_=!1;function y0(t,e){y_?(e.delete(t),t(0)):(e.add(t),oj())}function oj(){ju<0&&(ju=0,tn.frameLoop!=="demand"&&g_(sj))}function b5e(){ju=-1}function sj(){~ju&&(g_(sj),tn.batchedUpdates(lj))}function lj(){let t=ju;ju=tn.now();let e=ij(ju);if(e&&(uj(xh.splice(0,e),n=>n.handler()),Uu-=e),!Uu){b5e();return}N2.flush(),p_.flush(t?Math.min(64,ju-t):16.667),f_.flush(),h_.flush(),m_.flush()}function b0(){let t=new Set,e=t;return{add(n){Uu+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Uu-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Uu-=e.size,uj(e,r=>r(n)&&t.add(r)),Uu+=t.size,e=t)}}}function uj(t,e){t.forEach(n=>{try{e(n)}catch(r){tn.catch(r)}})}function cj(){}var v5e=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Os={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function x5e(t,e){if(Os.arr(t)){if(!Os.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var dj=(t,e)=>t.forEach(e);function w5e(t,e,n){if(Os.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(let r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var k5e=t=>Os.und(t)?[]:Os.arr(t)?t:[t];function pj(t,e){if(t.size){let n=Array.from(t);t.clear(),dj(n,e)}}var S5e=(t,...e)=>pj(t,n=>n(...e)),T2=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),b_,hj,Vu=null,fj=!1,v_=cj,mj=t=>{t.to&&(hj=t.to),t.now&&(tn.now=t.now),t.colors!==void 0&&(Vu=t.colors),t.skipAnimation!=null&&(fj=t.skipAnimation),t.createStringInterpolator&&(b_=t.createStringInterpolator),t.requestAnimationFrame&&tn.use(t.requestAnimationFrame),t.batchedUpdates&&(tn.batchedUpdates=t.batchedUpdates),t.willAdvance&&(v_=t.willAdvance),t.frameLoop&&(tn.frameLoop=t.frameLoop)},v0=new Set,ko=[],x_=[],I2=0,gj={get idle(){return!v0.size&&!ko.length},start(t){I2>t.priority?(v0.add(t),tn.onStart(C5e)):(yj(t),tn(w_))},advance:w_,sort(t){if(I2)tn.onFrame(()=>gj.sort(t));else{let e=ko.indexOf(t);~e&&(ko.splice(e,1),bj(t))}},clear(){ko=[],v0.clear()}};function C5e(){v0.forEach(yj),v0.clear(),tn(w_)}function yj(t){ko.includes(t)||bj(t)}function bj(t){ko.splice(E5e(ko,e=>e.priority>t.priority),0,t)}function w_(t){let e=x_;for(let n=0;n<ko.length;n++){let r=ko[n];I2=r.priority,r.idle||(v_(r),r.advance(t),r.idle||e.push(r))}return I2=0,x_=ko,x_.length=0,ko=e,ko.length>0}function E5e(t,e){let n=t.findIndex(e);return n<0?t.length:n}var vj=(t,e,n)=>Math.min(Math.max(n,t),e),N5e={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Jo="[-+]?\\d*\\.?\\d+",_2=Jo+"%";function R2(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var xj=new RegExp("rgb"+R2(Jo,Jo,Jo)),wj=new RegExp("rgba"+R2(Jo,Jo,Jo,Jo)),kj=new RegExp("hsl"+R2(Jo,_2,_2)),Sj=new RegExp("hsla"+R2(Jo,_2,_2,Jo)),Cj=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ej=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Nj=/^#([0-9a-fA-F]{6})$/,Tj=/^#([0-9a-fA-F]{8})$/;function T5e(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Nj.exec(t))?parseInt(e[1]+"ff",16)>>>0:Vu&&Vu[t]!==void 0?Vu[t]:(e=xj.exec(t))?(wh(e[1])<<24|wh(e[2])<<16|wh(e[3])<<8|255)>>>0:(e=wj.exec(t))?(wh(e[1])<<24|wh(e[2])<<16|wh(e[3])<<8|Rj(e[4]))>>>0:(e=Cj.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Tj.exec(t))?parseInt(e[1],16)>>>0:(e=Ej.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=kj.exec(t))?(Ij(_j(e[1]),$2(e[2]),$2(e[3]))|255)>>>0:(e=Sj.exec(t))?(Ij(_j(e[1]),$2(e[2]),$2(e[3]))|Rj(e[4]))>>>0:null}function k_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Ij(t,e,n){let r=n<.5?n*(1+e):n+e-n*e,a=2*n-r,i=k_(a,r,t+1/3),o=k_(a,r,t),s=k_(a,r,t-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(s*255)<<8}function wh(t){let e=parseInt(t,10);return e<0?0:e>255?255:e}function _j(t){return(parseFloat(t)%360+360)%360/360}function Rj(t){let e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function $2(t){let e=parseFloat(t);return e<0?0:e>100?1:e/100}function S_(t){let e=T5e(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,a=(e&65280)>>>8,i=(e&255)/255;return`rgba(${n}, ${r}, ${a}, ${i})`}var C_=(t,e,n)=>{if(Os.fun(t))return t;if(Os.arr(t))return C_({range:t,output:e,extrapolate:n});if(Os.str(t.output[0]))return b_(t);let r=t,a=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{let c=_5e(u,i);return I5e(u,i[c],i[c+1],a[c],a[c+1],l,o,s,r.map)}};function I5e(t,e,n,r,a,i,o,s,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(s==="identity")return u;s==="clamp"&&(u=n)}return r===a?r:e===n?t<=e?r:a:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=i(u),r===-1/0?u=-u:a===1/0?u=u+r:u=u*(a-r)+r,u)}function _5e(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var R5e=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);let r=n*t,a=e==="end"?Math.floor(r):Math.ceil(r);return vj(0,1,a/t)},O2=1.70158,M2=O2*1.525,$j=O2+1,Oj=2*Math.PI/3,Mj=2*Math.PI/4.5,P2=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,$5e={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>$j*t*t*t-O2*t*t,easeOutBack:t=>1+$j*Math.pow(t-1,3)+O2*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((M2+1)*2*t-M2)/2:(Math.pow(2*t-2,2)*((M2+1)*(t*2-2)+M2)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*Oj),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*Oj)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Mj))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Mj)/2+1,easeInBounce:t=>1-P2(1-t),easeOutBounce:P2,easeInOutBounce:t=>t<.5?(1-P2(1-2*t))/2:(1+P2(2*t-1))/2,steps:R5e},x0=Symbol.for("FluidValue.get"),kh=Symbol.for("FluidValue.observers"),O5e=t=>!!(t&&t[x0]),Pj=t=>t&&t[x0]?t[x0]():t,M5e=t=>t[kh]||null;function Fj(t,e){t.eventObserved?t.eventObserved(e):t(e)}function P5e(t,e){let n=t[kh];n&&n.forEach(r=>{Fj(r,e)})}var F5e=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Aj(this,t)}},Aj=(t,e)=>Dj(t,x0,e);function A5e(t,e){if(t[x0]){let n=t[kh];n||Dj(t,kh,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function D5e(t,e){let n=t[kh];if(n&&n.has(e)){let r=n.size-1;r?n.delete(e):t[kh]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var Dj=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),F2=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,L5e=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Lj=new RegExp(`(${F2.source})(%|[a-z]+)`,"i"),z5e=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,A2=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,zj=t=>{let[e,n]=B5e(t);if(!e||T2())return t;let r=window.getComputedStyle(document.documentElement).getPropertyValue(e);return r?r.trim():n&&n.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(n)||t:n&&A2.test(n)?zj(n):n||t},B5e=t=>{let e=A2.exec(t);if(!e)return[,];let[,n,r]=e;return[n,r]},E_,j5e=(t,e,n,r,a)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${a})`,U5e=t=>{E_||(E_=Vu?new RegExp(`(${Object.keys(Vu).join("|")})(?!\\w)`,"g"):/^\b$/);let e=t.output.map(a=>Pj(a).replace(A2,zj).replace(L5e,S_).replace(E_,S_)),n=e.map(a=>a.match(F2).map(Number)),r=n[0].map((a,i)=>n.map(o=>{if(!(i in o))throw Error('The arity of each "output" value must be equal');return o[i]})).map(a=>C_({...t,output:a}));return a=>{var i;let o=!Lj.test(e[0])&&((i=e.find(l=>Lj.test(l)))==null?void 0:i.replace(F2,"")),s=0;return e[0].replace(F2,()=>`${r[s++](a)}${o||""}`).replace(z5e,j5e)}},D2="react-spring: ",N_=t=>{let e=t,n=!1;if(typeof e!="function")throw new TypeError(`${D2}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},V5e=N_(console.warn);function W5e(){V5e(`${D2}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var G5e=N_(console.warn);function H5e(){G5e(`${D2}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function q5e(t){return Os.str(t)&&(t[0]=="#"||/\d/.test(t)||!T2()&&A2.test(t)||t in(Vu||{}))}var Sh,L2=new WeakMap,K5e=t=>t.forEach(({target:e,contentRect:n})=>{var r;return(r=L2.get(e))==null?void 0:r.forEach(a=>a(n))});function X5e(t,e){Sh||typeof ResizeObserver<"u"&&(Sh=new ResizeObserver(K5e));let n=L2.get(e);return n||(n=new Set,L2.set(e,n)),n.add(t),Sh&&Sh.observe(e),()=>{let r=L2.get(e);r&&(r.delete(t),!r.size&&Sh&&Sh.unobserve(e))}}var z2=new Set,w0,Q5e=()=>{let t=()=>{z2.forEach(e=>e({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},Y5e=t=>(z2.add(t),w0||(w0=Q5e()),()=>{z2.delete(t),!z2.size&&w0&&(w0(),w0=void 0)}),Bj=(t,{container:e=document.documentElement}={})=>e===document.documentElement?Y5e(t):X5e(t,e),Z5e=(t,e,n)=>e-t===0?1:(n-t)/(e-t),J5e={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},eRe=class{constructor(t,e){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=n=>{let r=this.info[n],{length:a,position:i}=J5e[n];r.current=this.container[`scroll${i}`],r.scrollLength=this.container["scroll"+a]-this.container["client"+a],r.progress=Z5e(0,r.scrollLength,r.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=t,this.container=e,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},k0=new WeakMap,jj=new WeakMap,T_=new WeakMap,Uj=t=>t===document.documentElement?window:t,tRe=(t,{container:e=document.documentElement}={})=>{let n=T_.get(e);n||(n=new Set,T_.set(e,n));let r=new eRe(t,e);if(n.add(r),!k0.has(e)){let i=()=>(n?.forEach(s=>s.advance()),!0);k0.set(e,i);let o=Uj(e);window.addEventListener("resize",i,{passive:!0}),e!==document.documentElement&&jj.set(e,Bj(i,{container:e})),o.addEventListener("scroll",i,{passive:!0})}let a=k0.get(e);return tn(a),()=>{var i;tn.cancel(a);let o=T_.get(e);if(!o||(o.delete(r),o.size))return;let s=k0.get(e);k0.delete(e),s&&(Uj(e).removeEventListener("scroll",s),window.removeEventListener("resize",s),(i=jj.get(e))==null||i())}},nRe=_;function rRe(t){let e=(0,nRe.useRef)(null);return e.current===null&&(e.current=t()),e.current}var aRe=_,iRe=_,Vj=_,I_=T2()?Vj.useEffect:Vj.useLayoutEffect,oRe=()=>{let t=(0,iRe.useRef)(!1);return I_(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function sRe(){let t=(0,aRe.useState)()[1],e=oRe();return()=>{e.current&&t(Math.random())}}var __=_;function lRe(t,e){let[n]=(0,__.useState)(()=>({inputs:e,result:t()})),r=(0,__.useRef)(),a=r.current,i=a;return i?e&&i.inputs&&uRe(e,i.inputs)||(i={inputs:e,result:t()}):i=n,(0,__.useEffect)(()=>{r.current=i,a==n&&(n.inputs=n.result=void 0)},[i]),i.result}function uRe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var cRe=_,dRe=t=>(0,cRe.useEffect)(t,pRe),pRe=[],Wj=_;function hRe(t){let e=(0,Wj.useRef)();return(0,Wj.useEffect)(()=>{e.current=t}),e.current}var fRe=_,mRe=()=>{let[t,e]=(0,fRe.useState)(null);return I_(()=>{let n=window.matchMedia("(prefers-reduced-motion)"),r=a=>{e(a.matches),mj({skipAnimation:a.matches})};return r(n),n.addEventListener("change",r),()=>{n.removeEventListener("change",r)}},[]),t};tj.exports=y5e;var nn=tj.exports,Gj={exports:{}},gRe=Object.create,B2=Object.defineProperty,yRe=Object.getOwnPropertyDescriptor,bRe=Object.getOwnPropertyNames,vRe=Object.getPrototypeOf,xRe=Object.prototype.hasOwnProperty,wRe=(t,e)=>{for(var n in e)B2(t,n,{get:e[n],enumerable:!0})},Hj=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of bRe(e))!xRe.call(t,a)&&a!==n&&B2(t,a,{get:()=>e[a],enumerable:!(r=yRe(e,a))||r.enumerable});return t},kRe=(t,e,n)=>(n=t!=null?gRe(vRe(t)):{},Hj(e||!t||!t.__esModule?B2(n,"default",{value:t,enumerable:!0}):n,t)),SRe=t=>Hj(B2({},"__esModule",{value:!0}),t),qj={};wRe(qj,{Animated:()=>R_,AnimatedArray:()=>M_,AnimatedObject:()=>V2,AnimatedString:()=>j2,AnimatedValue:()=>C0,createHost:()=>MRe,getAnimated:()=>Xj,getAnimatedType:()=>IRe,getPayload:()=>Yj,isAnimated:()=>Kj,setAnimated:()=>Qj});var CRe=SRe(qj),ERe=nn,S0=Symbol.for("Animated:node"),Kj=t=>!!t&&t[S0]===t,Xj=t=>t&&t[S0],Qj=(t,e)=>(0,ERe.defineHidden)(t,S0,e),Yj=t=>t&&t[S0]&&t[S0].getPayload(),R_=class{constructor(){Qj(this,this)}getPayload(){return this.payload||[]}},$_=nn,C0=class extends R_{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,$_.is.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new C0(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return $_.is.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){let{done:t}=this;this.done=!1,$_.is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},O_=nn,j2=class extends C0{constructor(t){super(0),this._string=null,this._toString=(0,O_.createInterpolator)({output:[t,t]})}static create(t){return new j2(t)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(t){if(O_.is.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=(0,O_.createInterpolator)({output:[this.getValue(),t]})),this._value=0,super.reset()}},NRe=nn,gd=nn,U2={dependencies:null},V2=class extends R_{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){let e={};return(0,gd.eachProp)(this.source,(n,r)=>{Kj(n)?e[r]=n.getValue(t):(0,gd.hasFluidValue)(n)?e[r]=(0,gd.getFluidValue)(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&(0,gd.each)(this.payload,t=>t.reset())}_makePayload(t){if(t){let e=new Set;return(0,gd.eachProp)(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){U2.dependencies&&(0,gd.hasFluidValue)(t)&&U2.dependencies.add(t);let e=Yj(t);e&&(0,gd.each)(e,n=>this.add(n))}},M_=class extends V2{constructor(t){super(t)}static create(t){return new M_(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){let e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(TRe)),!0)}};function TRe(t){return((0,NRe.isAnimatedString)(t)?j2:C0).create(t)}var Zj=nn;function IRe(t){let e=Xj(t);return e?e.constructor:Zj.is.arr(t)?M_:(0,Zj.isAnimatedString)(t)?j2:C0}var Ch=nn,_Re=kRe(_),E0=_,Ui=nn,Jj=(t,e)=>{let n=!Ui.is.fun(t)||t.prototype&&t.prototype.isReactComponent;return(0,E0.forwardRef)((r,a)=>{let i=(0,E0.useRef)(null),o=n&&(0,E0.useCallback)(g=>{i.current=ORe(a,g)},[a]),[s,l]=$Re(r,e),u=(0,Ui.useForceUpdate)(),c=()=>{let g=i.current;n&&!g||(g?e.applyAnimatedValues(g,s.getValue(!0)):!1)===!1&&u()},d=new RRe(c,l),p=(0,E0.useRef)();(0,Ui.useIsomorphicLayoutEffect)(()=>(p.current=d,(0,Ui.each)(l,g=>(0,Ui.addFluidObserver)(g,d)),()=>{p.current&&((0,Ui.each)(p.current.deps,g=>(0,Ui.removeFluidObserver)(g,p.current)),Ui.raf.cancel(p.current.update))})),(0,E0.useEffect)(c,[]),(0,Ui.useOnce)(()=>()=>{let g=p.current;(0,Ui.each)(g.deps,y=>(0,Ui.removeFluidObserver)(y,g))});let f=e.getComponentProps(s.getValue());return _Re.createElement(t,{...f,ref:o})})},RRe=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ui.raf.write(this.update)}};function $Re(t,e){let n=new Set;return U2.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new V2(t),U2.dependencies=null,[t,n]}function ORe(t,e){return t&&(Ui.is.fun(t)?t(e):t.current=e),e}var eU=Symbol.for("AnimatedComponent"),MRe=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=a=>new V2(a),getComponentProps:r=a=>a}={})=>{let a={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},i=o=>{let s=tU(o)||"Anonymous";return Ch.is.str(o)?o=i[o]||(i[o]=Jj(o,a)):o=o[eU]||(o[eU]=Jj(o,a)),o.displayName=`Animated(${s})`,o};return(0,Ch.eachProp)(t,(o,s)=>{Ch.is.arr(t)&&(s=tU(o)),i[s]=i(o)}),{animated:i}},tU=t=>Ch.is.str(t)?t:t&&Ch.is.str(t.displayName)?t.displayName:Ch.is.fun(t)&&t.name||null;Gj.exports=CRe;var N0=Gj.exports,nU={exports:{}},P_,rU;function PRe(){if(rU)return P_;rU=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,a=(u,c)=>{for(var d in c)t(u,d,{get:c[d],enumerable:!0})},i=(u,c,d,p)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of n(c))!r.call(u,f)&&f!==d&&t(u,f,{get:()=>c[f],enumerable:!(p=e(c,f))||p.enumerable});return u},o=u=>i(t({},"__esModule",{value:!0}),u),s={};a(s,{Any:()=>l}),P_=o(s);var l=class{};return P_}var aU;function FRe(){return aU||(aU=1,nU.exports=PRe()),nU.exports}(function(t){var e=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,s=(A,W)=>{for(var ee in W)n(A,ee,{get:W[ee],enumerable:!0})},l=(A,W,ee,ie)=>{if(W&&typeof W=="object"||typeof W=="function")for(let ve of a(W))!o.call(A,ve)&&ve!==ee&&n(A,ve,{get:()=>W[ve],enumerable:!(ie=r(W,ve))||ie.enumerable});return A},u=(A,W,ee)=>(l(A,W,"default"),ee&&l(ee,W,"default")),c=(A,W,ee)=>(ee=A!=null?e(i(A)):{},l(W||!A||!A.__esModule?n(ee,"default",{value:A,enumerable:!0}):ee,A)),d=A=>l(n({},"__esModule",{value:!0}),A),p={};s(p,{BailSignal:()=>Ze,Controller:()=>xe,FrameValue:()=>Gt,Globals:()=>As.Globals,Interpolation:()=>Yu,Spring:()=>Fs,SpringContext:()=>bn,SpringRef:()=>ts,SpringValue:()=>un,Trail:()=>Ia,Transition:()=>wd,config:()=>te,createInterpolator:()=>Ds.createInterpolator,easings:()=>Ds.easings,inferTo:()=>T,interpolate:()=>kd,to:()=>tk,update:()=>Zu,useChain:()=>q,useInView:()=>Ta,useIsomorphicLayoutEffect:()=>Ds.useIsomorphicLayoutEffect,useReducedMotion:()=>Ds.useReducedMotion,useResize:()=>En,useScroll:()=>Ol,useSpring:()=>Na,useSpringRef:()=>Xu,useSpringValue:()=>ns,useSprings:()=>Wi,useTrail:()=>rn,useTransition:()=>$l}),t.exports=d(p);var f=nn,g=nn;function y(A,...W){return g.is.fun(A)?A(...W):A}var v=(A,W)=>A===!0||!!(W&&A&&(g.is.fun(A)?A(W):(0,g.toArray)(A).includes(W))),b=(A,W)=>g.is.obj(A)?W&&A[W]:A,x=(A,W)=>A.default===!0?A[W]:A.default?A.default[W]:void 0,w=A=>A,S=(A,W=w)=>{let ee=C;A.default&&A.default!==!0&&(A=A.default,ee=Object.keys(A));let ie={};for(let ve of ee){let Ee=W(A[ve],ve);g.is.und(Ee)||(ie[ve]=Ee)}return ie},C=["config","onProps","onStart","onChange","onPause","onResume","onRest"],E={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function R(A){let W={},ee=0;if((0,g.eachProp)(A,(ie,ve)=>{E[ve]||(W[ve]=ie,ee++)}),ee)return W}function T(A){let W=R(A);if(W){let ee={to:W};return(0,g.eachProp)(A,(ie,ve)=>ve in W||(ee[ve]=ie)),ee}return{...A}}function $(A){return A=(0,g.getFluidValue)(A),g.is.arr(A)?A.map($):(0,g.isAnimatedString)(A)?g.Globals.createStringInterpolator({range:[0,1],output:[A,A]})(1):A}function P(A){for(let W in A)return!0;return!1}function D(A){return g.is.fun(A)||g.is.arr(A)&&g.is.obj(A[0])}function B(A,W){var ee;(ee=A.ref)==null||ee.delete(A),W?.delete(A)}function z(A,W){var ee;W&&A.ref!==W&&((ee=A.ref)==null||ee.delete(A),W.add(A),A.ref=W)}function q(A,W,ee=1e3){(0,f.useIsomorphicLayoutEffect)(()=>{if(W){let ie=0;(0,f.each)(A,(ve,Ee)=>{let Ae=ve.current;if(Ae.length){let Me=ee*W[Ee];isNaN(Me)?Me=ie:ie=Me,(0,f.each)(Ae,Re=>{(0,f.each)(Re.queue,Ue=>{let vt=Ue.delay;Ue.delay=ot=>Me+y(vt||0,ot)})}),ve.start()}})}else{let ie=Promise.resolve();(0,f.each)(A,ve=>{let Ee=ve.current;if(Ee.length){let Ae=Ee.map(Me=>{let Re=Me.queue;return Me.queue=[],Re});ie=ie.then(()=>((0,f.each)(Ee,(Me,Re)=>(0,f.each)(Ae[Re]||[],Ue=>Me.queue.push(Ue))),Promise.all(ve.start())))}})}})}var Y=nn,Z=_,H=nn,L=nn,Q=N0,J=nn,te={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},oe={...te.default,mass:1,damping:1,easing:J.easings.linear,clamp:!1},he=class{constructor(){this.velocity=0,Object.assign(this,oe)}};function ae(A,W,ee){ee&&(ee={...ee},de(ee,W),W={...ee,...W}),de(A,W),Object.assign(A,W);for(let Ae in oe)A[Ae]==null&&(A[Ae]=oe[Ae]);let{frequency:ie,damping:ve}=A,{mass:Ee}=A;return J.is.und(ie)||(ie<.01&&(ie=.01),ve<0&&(ve=0),A.tension=Math.pow(2*Math.PI/ie,2)*Ee,A.friction=4*Math.PI*ve*Ee/ie),A}function de(A,W){if(!J.is.und(W.decay))A.duration=void 0;else{let ee=!J.is.und(W.tension)||!J.is.und(W.friction);(ee||!J.is.und(W.frequency)||!J.is.und(W.damping)||!J.is.und(W.mass))&&(A.duration=void 0,A.decay=void 0),ee&&(A.frequency=void 0)}}var ke=[],K=class{constructor(){this.changed=!1,this.values=ke,this.toValues=null,this.fromValues=ke,this.config=new he,this.immediate=!1}},se=nn;function pe(A,{key:W,props:ee,defaultProps:ie,state:ve,actions:Ee}){return new Promise((Ae,Me)=>{let Re,Ue,vt=v(ee.cancel??ie?.cancel,W);if(vt)St();else{se.is.und(ee.pause)||(ve.paused=v(ee.pause,W));let Ye=ie?.pause;Ye!==!0&&(Ye=ve.paused||v(Ye,W)),Re=y(ee.delay||0,W),Ye?(ve.resumeQueue.add(Pt),Ee.pause()):(Ee.resume(),Pt())}function ot(){ve.resumeQueue.add(Pt),ve.timeouts.delete(Ue),Ue.cancel(),Re=Ue.time-se.raf.now()}function Pt(){Re>0&&!se.Globals.skipAnimation?(ve.delayed=!0,Ue=se.raf.setTimeout(St,Re),ve.pauseQueue.add(ot),ve.timeouts.add(Ue)):St()}function St(){ve.delayed&&(ve.delayed=!1),ve.pauseQueue.delete(ot),ve.timeouts.delete(Ue),A<=(ve.cancelId||0)&&(vt=!0);try{Ee.start({...ee,callId:A,cancel:vt},Ae)}catch(Ye){Me(Ye)}}})}var Ne=nn,Se=(A,W)=>W.length==1?W[0]:W.some(ee=>ee.cancelled)?We(A.get()):W.every(ee=>ee.noop)?Te(A.get()):Pe(A.get(),W.every(ee=>ee.finished)),Te=A=>({value:A,noop:!0,finished:!0,cancelled:!1}),Pe=(A,W,ee=!1)=>({value:A,finished:W,cancelled:ee}),We=A=>({value:A,cancelled:!0,finished:!1});function $e(A,W,ee,ie){let{callId:ve,parentId:Ee,onRest:Ae}=W,{asyncTo:Me,promise:Re}=ee;return!Ee&&A===Me&&!W.reset?Re:ee.promise=(async()=>{ee.asyncId=ve,ee.asyncTo=A;let Ue=S(W,(mt,st)=>st==="onRest"?void 0:mt),vt,ot,Pt=new Promise((mt,st)=>(vt=mt,ot=st)),St=mt=>{let st=ve<=(ee.cancelId||0)&&We(ie)||ve!==ee.asyncId&&Pe(ie,!1);if(st)throw mt.result=st,ot(mt),mt},Ye=(mt,st)=>{let Ct=new Ze,ct=new Je;return(async()=>{if(Ne.Globals.skipAnimation)throw lt(ee),ct.result=Pe(ie,!1),ot(ct),ct;St(Ct);let kt=Ne.is.obj(mt)?{...mt}:{...st,to:mt};kt.parentId=ve,(0,Ne.eachProp)(Ue,(ui,Ht)=>{Ne.is.und(kt[Ht])&&(kt[Ht]=ui)});let lr=await ie.start(kt);return St(Ct),ee.paused&&await new Promise(ui=>{ee.resumeQueue.add(ui)}),lr})()},pt;if(Ne.Globals.skipAnimation)return lt(ee),Pe(ie,!1);try{let mt;Ne.is.arr(A)?mt=(async st=>{for(let Ct of st)await Ye(Ct)})(A):mt=Promise.resolve(A(Ye,ie.stop.bind(ie))),await Promise.all([mt.then(vt),Pt]),pt=Pe(ie.get(),!0,!1)}catch(mt){if(mt instanceof Ze)pt=mt.result;else if(mt instanceof Je)pt=mt.result;else throw mt}finally{ve==ee.asyncId&&(ee.asyncId=Ee,ee.asyncTo=Ee?Me:void 0,ee.promise=Ee?Re:void 0)}return Ne.is.fun(Ae)&&Ne.raf.batchedUpdates(()=>{Ae(pt,ie,ie.item)}),pt})()}function lt(A,W){(0,Ne.flush)(A.timeouts,ee=>ee.cancel()),A.pauseQueue.clear(),A.resumeQueue.clear(),A.asyncId=A.asyncTo=A.promise=void 0,W&&(A.cancelId=W)}var Ze=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Je=class extends Error{constructor(){super("SkipAnimationSignal")}},Ve=nn,Vt=N0,$t=A=>A instanceof Gt,Wt=1,Gt=class extends Ve.FluidValue{constructor(){super(...arguments),this.id=Wt++,this._priority=0}get priority(){return this._priority}set priority(A){this._priority!=A&&(this._priority=A,this._onPriorityChange(A))}get(){let A=(0,Vt.getAnimated)(this);return A&&A.getValue()}to(...A){return Ve.Globals.to(this,A)}interpolate(...A){return(0,Ve.deprecateInterpolate)(),Ve.Globals.to(this,A)}toJSON(){return this.get()}observerAdded(A){A==1&&this._attach()}observerRemoved(A){A==0&&this._detach()}_attach(){}_detach(){}_onChange(A,W=!1){(0,Ve.callFluidObservers)(this,{type:"change",parent:this,value:A,idle:W})}_onPriorityChange(A){this.idle||Ve.frameLoop.sort(this),(0,Ve.callFluidObservers)(this,{type:"priority",parent:this,priority:A})}},Ot=Symbol.for("SpringPhase"),wt=1,ln=2,hn=4,yr=A=>(A[Ot]&wt)>0,yn=A=>(A[Ot]&ln)>0,Zn=A=>(A[Ot]&hn)>0,li=(A,W)=>W?A[Ot]|=ln|wt:A[Ot]&=~ln,Xa=(A,W)=>W?A[Ot]|=hn:A[Ot]&=~hn,un=class extends Gt{constructor(A,W){if(super(),this.animation=new K,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!L.is.und(A)||!L.is.und(W)){let ee=L.is.obj(A)?{...A}:{...W,from:A};L.is.und(ee.default)&&(ee.default=!0),this.start(ee)}}get idle(){return!(yn(this)||this._state.asyncTo)||Zn(this)}get goal(){return(0,L.getFluidValue)(this.animation.to)}get velocity(){let A=(0,Q.getAnimated)(this);return A instanceof Q.AnimatedValue?A.lastVelocity||0:A.getPayload().map(W=>W.lastVelocity||0)}get hasAnimated(){return yr(this)}get isAnimating(){return yn(this)}get isPaused(){return Zn(this)}get isDelayed(){return this._state.delayed}advance(A){let W=!0,ee=!1,ie=this.animation,{toValues:ve}=ie,{config:Ee}=ie,Ae=(0,Q.getPayload)(ie.to);!Ae&&(0,L.hasFluidValue)(ie.to)&&(ve=(0,L.toArray)((0,L.getFluidValue)(ie.to))),ie.values.forEach((Ue,vt)=>{if(Ue.done)return;let ot=Ue.constructor==Q.AnimatedString?1:Ae?Ae[vt].lastPosition:ve[vt],Pt=ie.immediate,St=ot;if(!Pt){if(St=Ue.lastPosition,Ee.tension<=0){Ue.done=!0;return}let Ye=Ue.elapsedTime+=A,pt=ie.fromValues[vt],mt=Ue.v0!=null?Ue.v0:Ue.v0=L.is.arr(Ee.velocity)?Ee.velocity[vt]:Ee.velocity,st,Ct=Ee.precision||(pt==ot?.005:Math.min(1,Math.abs(ot-pt)*.001));if(L.is.und(Ee.duration))if(Ee.decay){let ct=Ee.decay===!0?.998:Ee.decay,kt=Math.exp(-(1-ct)*Ye);St=pt+mt/(1-ct)*(1-kt),Pt=Math.abs(Ue.lastPosition-St)<=Ct,st=mt*kt}else{st=Ue.lastVelocity==null?mt:Ue.lastVelocity;let ct=Ee.restVelocity||Ct/10,kt=Ee.clamp?0:Ee.bounce,lr=!L.is.und(kt),ui=pt==ot?Ue.v0>0:pt<ot,Ht,Gn=!1,Ln=1,_a=Math.ceil(A/Ln);for(let Ya=0;Ya<_a&&(Ht=Math.abs(st)>ct,!(!Ht&&(Pt=Math.abs(ot-St)<=Ct,Pt)));++Ya){lr&&(Gn=St==ot||St>ot==ui,Gn&&(st=-st*kt,St=ot));let No=-Ee.tension*1e-6*(St-ot),Nr=-Ee.friction*.001*st,gt=(No+Nr)/Ee.mass;st=st+gt*Ln,St=St+st*Ln}}else{let ct=1;Ee.duration>0&&(this._memoizedDuration!==Ee.duration&&(this._memoizedDuration=Ee.duration,Ue.durationProgress>0&&(Ue.elapsedTime=Ee.duration*Ue.durationProgress,Ye=Ue.elapsedTime+=A)),ct=(Ee.progress||0)+Ye/this._memoizedDuration,ct=ct>1?1:ct<0?0:ct,Ue.durationProgress=ct),St=pt+Ee.easing(ct)*(ot-pt),st=(St-Ue.lastPosition)/A,Pt=ct==1}Ue.lastVelocity=st,Number.isNaN(St)&&(console.warn("Got NaN while animating:",this),Pt=!0)}Ae&&!Ae[vt].done&&(Pt=!1),Pt?Ue.done=!0:W=!1,Ue.setValue(St,Ee.round)&&(ee=!0)});let Me=(0,Q.getAnimated)(this),Re=Me.getValue();if(W){let Ue=(0,L.getFluidValue)(ie.to);(Re!==Ue||ee)&&!Ee.decay?(Me.setValue(Ue),this._onChange(Ue)):ee&&Ee.decay&&this._onChange(Re),this._stop()}else ee&&this._onChange(Re)}set(A){return L.raf.batchedUpdates(()=>{this._stop(),this._focus(A),this._set(A)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(yn(this)){let{to:A,config:W}=this.animation;L.raf.batchedUpdates(()=>{this._onStart(),W.decay||this._set(A,!1),this._stop()})}return this}update(A){return(this.queue||(this.queue=[])).push(A),this}start(A,W){let ee;return L.is.und(A)?(ee=this.queue||[],this.queue=[]):ee=[L.is.obj(A)?A:{...W,to:A}],Promise.all(ee.map(ie=>this._update(ie))).then(ie=>Se(this,ie))}stop(A){let{to:W}=this.animation;return this._focus(this.get()),lt(this._state,A&&this._lastCallId),L.raf.batchedUpdates(()=>this._stop(W,A)),this}reset(){this._update({reset:!0})}eventObserved(A){A.type=="change"?this._start():A.type=="priority"&&(this.priority=A.priority+1)}_prepareNode(A){let W=this.key||"",{to:ee,from:ie}=A;ee=L.is.obj(ee)?ee[W]:ee,(ee==null||D(ee))&&(ee=void 0),ie=L.is.obj(ie)?ie[W]:ie,ie==null&&(ie=void 0);let ve={to:ee,from:ie};return yr(this)||(A.reverse&&([ee,ie]=[ie,ee]),ie=(0,L.getFluidValue)(ie),L.is.und(ie)?(0,Q.getAnimated)(this)||this._set(ee):this._set(ie)),ve}_update({...A},W){let{key:ee,defaultProps:ie}=this;A.default&&Object.assign(ie,S(A,(Ae,Me)=>/^on/.test(Me)?b(Ae,ee):Ae)),or(this,A,"onProps"),Vn(this,"onProps",A,this);let ve=this._prepareNode(A);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let Ee=this._state;return pe(++this._lastCallId,{key:ee,props:A,defaultProps:ie,state:Ee,actions:{pause:()=>{Zn(this)||(Xa(this,!0),(0,L.flushCalls)(Ee.pauseQueue),Vn(this,"onPause",Pe(this,la(this,this.animation.to)),this))},resume:()=>{Zn(this)&&(Xa(this,!1),yn(this)&&this._resume(),(0,L.flushCalls)(Ee.resumeQueue),Vn(this,"onResume",Pe(this,la(this,this.animation.to)),this))},start:this._merge.bind(this,ve)}}).then(Ae=>{if(A.loop&&Ae.finished&&!(W&&Ae.noop)){let Me=Qa(A);if(Me)return this._update(Me,!0)}return Ae})}_merge(A,W,ee){if(W.cancel)return this.stop(!0),ee(We(this));let ie=!L.is.und(A.to),ve=!L.is.und(A.from);if(ie||ve)if(W.callId>this._lastToId)this._lastToId=W.callId;else return ee(We(this));let{key:Ee,defaultProps:Ae,animation:Me}=this,{to:Re,from:Ue}=Me,{to:vt=Re,from:ot=Ue}=A;ve&&!ie&&(!W.default||L.is.und(vt))&&(vt=ot),W.reverse&&([vt,ot]=[ot,vt]);let Pt=!(0,L.isEqual)(ot,Ue);Pt&&(Me.from=ot),ot=(0,L.getFluidValue)(ot);let St=!(0,L.isEqual)(vt,Re);St&&this._focus(vt);let Ye=D(W.to),{config:pt}=Me,{decay:mt,velocity:st}=pt;(ie||ve)&&(pt.velocity=0),W.config&&!Ye&&ae(pt,y(W.config,Ee),W.config!==Ae.config?y(Ae.config,Ee):void 0);let Ct=(0,Q.getAnimated)(this);if(!Ct||L.is.und(vt))return ee(Pe(this,!0));let ct=L.is.und(W.reset)?ve&&!W.default:!L.is.und(ot)&&v(W.reset,Ee),kt=ct?ot:this.get(),lr=$(vt),ui=L.is.num(lr)||L.is.arr(lr)||(0,L.isAnimatedString)(lr),Ht=!Ye&&(!ui||v(Ae.immediate||W.immediate,Ee));if(St){let Ya=(0,Q.getAnimatedType)(vt);if(Ya!==Ct.constructor)if(Ht)Ct=this._set(lr);else throw Error(`Cannot animate between ${Ct.constructor.name} and ${Ya.name}, as the "to" prop suggests`)}let Gn=Ct.constructor,Ln=(0,L.hasFluidValue)(vt),_a=!1;if(!Ln){let Ya=ct||!yr(this)&&Pt;(St||Ya)&&(_a=(0,L.isEqual)($(kt),lr),Ln=!_a),(!(0,L.isEqual)(Me.immediate,Ht)&&!Ht||!(0,L.isEqual)(pt.decay,mt)||!(0,L.isEqual)(pt.velocity,st))&&(Ln=!0)}if(_a&&yn(this)&&(Me.changed&&!ct?Ln=!0:Ln||this._stop(Re)),!Ye&&((Ln||(0,L.hasFluidValue)(Re))&&(Me.values=Ct.getPayload(),Me.toValues=(0,L.hasFluidValue)(vt)?null:Gn==Q.AnimatedString?[1]:(0,L.toArray)(lr)),Me.immediate!=Ht&&(Me.immediate=Ht,!Ht&&!ct&&this._set(Re)),Ln)){let{onRest:Ya}=Me;(0,L.each)(es,Nr=>or(this,W,Nr));let No=Pe(this,la(this,Re));(0,L.flushCalls)(this._pendingCalls,No),this._pendingCalls.add(ee),Me.changed&&L.raf.batchedUpdates(()=>{var Nr;Me.changed=!ct,Ya?.(No,this),ct?y(Ae.onRest,No):(Nr=Me.onStart)==null||Nr.call(Me,No,this)})}ct&&this._set(kt),Ye?ee($e(W.to,W,this._state,this)):Ln?this._start():yn(this)&&!St?this._pendingCalls.add(ee):ee(Te(kt))}_focus(A){let W=this.animation;A!==W.to&&((0,L.getFluidObservers)(this)&&this._detach(),W.to=A,(0,L.getFluidObservers)(this)&&this._attach())}_attach(){let A=0,{to:W}=this.animation;(0,L.hasFluidValue)(W)&&((0,L.addFluidObserver)(W,this),$t(W)&&(A=W.priority+1)),this.priority=A}_detach(){let{to:A}=this.animation;(0,L.hasFluidValue)(A)&&(0,L.removeFluidObserver)(A,this)}_set(A,W=!0){let ee=(0,L.getFluidValue)(A);if(!L.is.und(ee)){let ie=(0,Q.getAnimated)(this);if(!ie||!(0,L.isEqual)(ee,ie.getValue())){let ve=(0,Q.getAnimatedType)(ee);!ie||ie.constructor!=ve?(0,Q.setAnimated)(this,ve.create(ee)):ie.setValue(ee),ie&&L.raf.batchedUpdates(()=>{this._onChange(ee,W)})}}return(0,Q.getAnimated)(this)}_onStart(){let A=this.animation;A.changed||(A.changed=!0,Vn(this,"onStart",Pe(this,la(this,A.to)),this))}_onChange(A,W){W||(this._onStart(),y(this.animation.onChange,A,this)),y(this.defaultProps.onChange,A,this),super._onChange(A,W)}_start(){let A=this.animation;(0,Q.getAnimated)(this).reset((0,L.getFluidValue)(A.to)),A.immediate||(A.fromValues=A.values.map(W=>W.lastPosition)),yn(this)||(li(this,!0),Zn(this)||this._resume())}_resume(){L.Globals.skipAnimation?this.finish():L.frameLoop.start(this)}_stop(A,W){if(yn(this)){li(this,!1);let ee=this.animation;(0,L.each)(ee.values,ve=>{ve.done=!0}),ee.toValues&&(ee.onChange=ee.onPause=ee.onResume=void 0),(0,L.callFluidObservers)(this,{type:"idle",parent:this});let ie=W?We(this.get()):Pe(this.get(),la(this,A??ee.to));(0,L.flushCalls)(this._pendingCalls,ie),ee.changed&&(ee.changed=!1,Vn(this,"onRest",ie,this))}}};function la(A,W){let ee=$(W),ie=$(A.get());return(0,L.isEqual)(ie,ee)}function Qa(A,W=A.loop,ee=A.to){let ie=y(W);if(ie){let ve=ie!==!0&&T(ie),Ee=(ve||A).reverse,Ae=!ve||ve.reset;return Ea({...A,loop:W,default:!1,pause:void 0,to:!Ee||D(ee)?ee:void 0,from:Ae?A.from:void 0,reset:Ae,...ve})}}function Ea(A){let{to:W,from:ee}=A=T(A),ie=new Set;return L.is.obj(W)&&Kr(W,ie),L.is.obj(ee)&&Kr(ee,ie),A.keys=ie.size?Array.from(ie):null,A}function So(A){let W=Ea(A);return L.is.und(W.default)&&(W.default=S(W)),W}function Kr(A,W){(0,L.eachProp)(A,(ee,ie)=>ee!=null&&W.add(ie))}var es=["onStart","onRest","onChange","onPause","onResume"];function or(A,W,ee){A.animation[ee]=W[ee]!==x(W,ee)?b(W[ee],A.key):void 0}function Vn(A,W,...ee){var ie,ve,Ee,Ae;(ve=(ie=A.animation)[W])==null||ve.call(ie,...ee),(Ae=(Ee=A.defaultProps)[W])==null||Ae.call(Ee,...ee)}var dt=nn,le=["onStart","onChange","onRest"],fe=1,xe=class{constructor(A,W){this.id=fe++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),W&&(this._flush=W),A&&this.start({default:!0,...A})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(A=>A.idle&&!A.isDelayed&&!A.isPaused)}get item(){return this._item}set item(A){this._item=A}get(){let A={};return this.each((W,ee)=>A[ee]=W.get()),A}set(A){for(let W in A){let ee=A[W];dt.is.und(ee)||this.springs[W].set(ee)}}update(A){return A&&this.queue.push(Ea(A)),this}start(A){let{queue:W}=this;return A?W=(0,dt.toArray)(A).map(Ea):this.queue=[],this._flush?this._flush(this,W):(bt(this,W),_e(this,W))}stop(A,W){if(A!==!!A&&(W=A),W){let ee=this.springs;(0,dt.each)((0,dt.toArray)(W),ie=>ee[ie].stop(!!A))}else lt(this._state,this._lastAsyncId),this.each(ee=>ee.stop(!!A));return this}pause(A){if(dt.is.und(A))this.start({pause:!0});else{let W=this.springs;(0,dt.each)((0,dt.toArray)(A),ee=>W[ee].pause())}return this}resume(A){if(dt.is.und(A))this.start({pause:!1});else{let W=this.springs;(0,dt.each)((0,dt.toArray)(A),ee=>W[ee].resume())}return this}each(A){(0,dt.eachProp)(this.springs,A)}_onFrame(){let{onStart:A,onChange:W,onRest:ee}=this._events,ie=this._active.size>0,ve=this._changed.size>0;(ie&&!this._started||ve&&!this._started)&&(this._started=!0,(0,dt.flush)(A,([Me,Re])=>{Re.value=this.get(),Me(Re,this,this._item)}));let Ee=!ie&&this._started,Ae=ve||Ee&&ee.size?this.get():null;ve&&W.size&&(0,dt.flush)(W,([Me,Re])=>{Re.value=Ae,Me(Re,this,this._item)}),Ee&&(this._started=!1,(0,dt.flush)(ee,([Me,Re])=>{Re.value=Ae,Me(Re,this,this._item)}))}eventObserved(A){if(A.type=="change")this._changed.add(A.parent),A.idle||this._active.add(A.parent);else if(A.type=="idle")this._active.delete(A.parent);else return;dt.raf.onFrame(this._onFrame)}};function _e(A,W){return Promise.all(W.map(ee=>ze(A,ee))).then(ee=>Se(A,ee))}async function ze(A,W,ee){let{keys:ie,to:ve,from:Ee,loop:Ae,onRest:Me,onResolve:Re}=W,Ue=dt.is.obj(W.default)&&W.default;Ae&&(W.loop=!1),ve===!1&&(W.to=null),Ee===!1&&(W.from=null);let vt=dt.is.arr(ve)||dt.is.fun(ve)?ve:void 0;vt?(W.to=void 0,W.onRest=void 0,Ue&&(Ue.onRest=void 0)):(0,dt.each)(le,pt=>{let mt=W[pt];if(dt.is.fun(mt)){let st=A._events[pt];W[pt]=({finished:Ct,cancelled:ct})=>{let kt=st.get(mt);kt?(Ct||(kt.finished=!1),ct&&(kt.cancelled=!0)):st.set(mt,{value:null,finished:Ct||!1,cancelled:ct||!1})},Ue&&(Ue[pt]=W[pt])}});let ot=A._state;W.pause===!ot.paused?(ot.paused=W.pause,(0,dt.flushCalls)(W.pause?ot.pauseQueue:ot.resumeQueue)):ot.paused&&(W.pause=!0);let Pt=(ie||Object.keys(A.springs)).map(pt=>A.springs[pt].start(W)),St=W.cancel===!0||x(W,"cancel")===!0;(vt||St&&ot.asyncId)&&Pt.push(pe(++A._lastAsyncId,{props:W,state:ot,actions:{pause:dt.noop,resume:dt.noop,start(pt,mt){St?(lt(ot,A._lastAsyncId),mt(We(A))):(pt.onRest=Me,mt($e(vt,pt,ot,A)))}}})),ot.paused&&await new Promise(pt=>{ot.resumeQueue.add(pt)});let Ye=Se(A,await Promise.all(Pt));if(Ae&&Ye.finished&&!(ee&&Ye.noop)){let pt=Qa(W,Ae,ve);if(pt)return bt(A,[pt]),ze(A,pt,!0)}return Re&&dt.raf.batchedUpdates(()=>Re(Ye,A,A.item)),Ye}function it(A,W){let ee={...A.springs};return W&&(0,dt.each)((0,dt.toArray)(W),ie=>{dt.is.und(ie.keys)&&(ie=Ea(ie)),dt.is.obj(ie.to)||(ie={...ie,to:void 0}),Qe(ee,ie,ve=>at(ve))}),nt(A,ee),ee}function nt(A,W){(0,dt.eachProp)(W,(ee,ie)=>{A.springs[ie]||(A.springs[ie]=ee,(0,dt.addFluidObserver)(ee,A))})}function at(A,W){let ee=new un;return ee.key=A,W&&(0,dt.addFluidObserver)(ee,W),ee}function Qe(A,W,ee){W.keys&&(0,dt.each)(W.keys,ie=>{(A[ie]||(A[ie]=ee(ie)))._prepareNode(W)})}function bt(A,W){(0,dt.each)(W,ee=>{Qe(A.springs,ee,ie=>at(ie,A))})}var cn=c(_),ft=_,Jt=nn,bn=({children:A,...W})=>{let ee=(0,ft.useContext)(Fr),ie=W.pause||!!ee.pause,ve=W.immediate||!!ee.immediate;W=(0,Jt.useMemoOne)(()=>({pause:ie,immediate:ve}),[ie,ve]);let{Provider:Ee}=Fr;return cn.createElement(Ee,{value:W},A)},Fr=sr(bn,{});bn.Provider=Fr.Provider,bn.Consumer=Fr.Consumer;function sr(A,W){return Object.assign(A,cn.createContext(W)),A.Provider._context=A,A.Consumer._context=A,A}var br=nn,ts=()=>{let A=[],W=function(ie){(0,br.deprecateDirectCall)();let ve=[];return(0,br.each)(A,(Ee,Ae)=>{if(br.is.und(ie))ve.push(Ee.start());else{let Me=ee(ie,Ee,Ae);Me&&ve.push(Ee.start(Me))}}),ve};W.current=A,W.add=function(ie){A.includes(ie)||A.push(ie)},W.delete=function(ie){let ve=A.indexOf(ie);~ve&&A.splice(ve,1)},W.pause=function(){return(0,br.each)(A,ie=>ie.pause(...arguments)),this},W.resume=function(){return(0,br.each)(A,ie=>ie.resume(...arguments)),this},W.set=function(ie){(0,br.each)(A,(ve,Ee)=>{let Ae=br.is.fun(ie)?ie(Ee,ve):ie;Ae&&ve.set(Ae)})},W.start=function(ie){let ve=[];return(0,br.each)(A,(Ee,Ae)=>{if(br.is.und(ie))ve.push(Ee.start());else{let Me=this._getProps(ie,Ee,Ae);Me&&ve.push(Ee.start(Me))}}),ve},W.stop=function(){return(0,br.each)(A,ie=>ie.stop(...arguments)),this},W.update=function(ie){return(0,br.each)(A,(ve,Ee)=>ve.update(this._getProps(ie,ve,Ee))),this};let ee=function(ie,ve,Ee){return br.is.fun(ie)?ie(Ee,ve):ie};return W._getProps=ee,W};function Wi(A,W,ee){let ie=H.is.fun(W)&&W;ie&&!ee&&(ee=[]);let ve=(0,Z.useMemo)(()=>ie||arguments.length==3?ts():void 0,[]),Ee=(0,Z.useRef)(0),Ae=(0,H.useForceUpdate)(),Me=(0,Z.useMemo)(()=>({ctrls:[],queue:[],flush(st,Ct){let ct=it(st,Ct);return Ee.current>0&&!Me.queue.length&&!Object.keys(ct).some(kt=>!st.springs[kt])?_e(st,Ct):new Promise(kt=>{nt(st,ct),Me.queue.push(()=>{kt(_e(st,Ct))}),Ae()})}}),[]),Re=(0,Z.useRef)([...Me.ctrls]),Ue=[],vt=(0,H.usePrev)(A)||0;(0,Z.useMemo)(()=>{(0,H.each)(Re.current.slice(A,vt),st=>{B(st,ve),st.stop(!0)}),Re.current.length=A,ot(vt,A)},[A]),(0,Z.useMemo)(()=>{ot(0,Math.min(vt,A))},ee);function ot(st,Ct){for(let ct=st;ct<Ct;ct++){let kt=Re.current[ct]||(Re.current[ct]=new xe(null,Me.flush)),lr=ie?ie(ct,kt):W[ct];lr&&(Ue[ct]=So(lr))}}let Pt=Re.current.map((st,Ct)=>it(st,Ue[Ct])),St=(0,Z.useContext)(bn),Ye=(0,H.usePrev)(St),pt=St!==Ye&&P(St);(0,H.useIsomorphicLayoutEffect)(()=>{Ee.current++,Me.ctrls=Re.current;let{queue:st}=Me;st.length&&(Me.queue=[],(0,H.each)(st,Ct=>Ct())),(0,H.each)(Re.current,(Ct,ct)=>{ve?.add(Ct),pt&&Ct.start({default:St});let kt=Ue[ct];kt&&(z(Ct,kt.ref),Ct.ref?Ct.queue.push(kt):Ct.start(kt))})}),(0,H.useOnce)(()=>()=>{(0,H.each)(Me.ctrls,st=>st.stop(!0))});let mt=Pt.map(st=>({...st}));return ve?[mt,ve]:mt}function Na(A,W){let ee=Y.is.fun(A),[[ie],ve]=Wi(1,ee?A:[A],ee?W||[]:W);return ee||arguments.length==2?[ie,ve]:ie}var Co=_,Ku=()=>ts(),Xu=()=>(0,Co.useState)(Ku)[0],Rl=nn,ns=(A,W)=>{let ee=(0,Rl.useConstant)(()=>new un(A,W));return(0,Rl.useOnce)(()=>()=>{ee.stop()}),ee},Eo=nn;function rn(A,W,ee){let ie=Eo.is.fun(W)&&W;ie&&!ee&&(ee=[]);let ve=!0,Ee,Ae=Wi(A,(Me,Re)=>{let Ue=ie?ie(Me,Re):W;return Ee=Ue.ref,ve=ve&&Ue.reverse,Ue},ee||[{}]);if((0,Eo.useIsomorphicLayoutEffect)(()=>{(0,Eo.each)(Ae[1].current,(Me,Re)=>{let Ue=Ae[1].current[Re+(ve?1:-1)];if(z(Me,Ee),Me.ref){Ue&&Me.update({to:Ue.springs});return}Ue?Me.start({to:Ue.springs}):Me.start()})},ee),ie||arguments.length==3){let Me=Ee??Ae[1];return Me._getProps=(Re,Ue,vt)=>{let ot=Eo.is.fun(Re)?Re(vt,Ue):Re;if(ot){let Pt=Me.current[vt+(ot.reverse?1:-1)];return Pt&&(ot.to=Pt.springs),ot}},Ae}return Ae[0]}var fn=c(_),Er=_,Dt=nn;function $l(A,W,ee){let ie=Dt.is.fun(W)&&W,{reset:ve,sort:Ee,trail:Ae=0,expires:Me=!0,exitBeforeEnter:Re=!1,onDestroyed:Ue,ref:vt,config:ot}=ie?ie():W,Pt=(0,Er.useMemo)(()=>ie||arguments.length==3?ts():void 0,[]),St=(0,Dt.toArray)(A),Ye=[],pt=(0,Er.useRef)(null),mt=ve?null:pt.current;(0,Dt.useIsomorphicLayoutEffect)(()=>{pt.current=Ye}),(0,Dt.useOnce)(()=>((0,Dt.each)(Ye,gt=>{Pt?.add(gt.ctrl),gt.ctrl.ref=Pt}),()=>{(0,Dt.each)(pt.current,gt=>{gt.expired&&clearTimeout(gt.expirationId),B(gt.ctrl,Pt),gt.ctrl.stop(!0)})}));let st=ek(St,ie?ie():W,mt),Ct=ve&&pt.current||[];(0,Dt.useIsomorphicLayoutEffect)(()=>(0,Dt.each)(Ct,({ctrl:gt,item:Mt,key:Tr})=>{B(gt,Pt),y(Ue,Mt,Tr)}));let ct=[];if(mt&&(0,Dt.each)(mt,(gt,Mt)=>{gt.expired?(clearTimeout(gt.expirationId),Ct.push(gt)):(Mt=ct[Mt]=st.indexOf(gt.key),~Mt&&(Ye[Mt]=gt))}),(0,Dt.each)(St,(gt,Mt)=>{Ye[Mt]||(Ye[Mt]={key:st[Mt],item:gt,phase:"mount",ctrl:new xe},Ye[Mt].ctrl.item=gt)}),ct.length){let gt=-1,{leave:Mt}=ie?ie():W;(0,Dt.each)(ct,(Tr,Ir)=>{let mn=mt[Ir];~Tr?(gt=Ye.indexOf(mn),Ye[gt]={...mn,item:St[Tr]}):Mt&&Ye.splice(++gt,0,mn)})}Dt.is.fun(Ee)&&Ye.sort((gt,Mt)=>Ee(gt.item,Mt.item));let kt=-Ae,lr=(0,Dt.useForceUpdate)(),ui=S(W),Ht=new Map,Gn=(0,Er.useRef)(new Map),Ln=(0,Er.useRef)(!1);(0,Dt.each)(Ye,(gt,Mt)=>{let Tr=gt.key,Ir=gt.phase,mn=ie?ie():W,Mn,ua,To=y(mn.delay||0,Tr);if(Ir=="mount")Mn=mn.enter,ua="enter";else{let Za=st.indexOf(Tr)<0;if(Ir!="leave")if(Za)Mn=mn.leave,ua="leave";else if(Mn=mn.update)ua="update";else return;else if(!Za)Mn=mn.enter,ua="enter";else return}if(Mn=y(Mn,gt.item,Mt),Mn=Dt.is.obj(Mn)?T(Mn):{to:Mn},!Mn.config){let Za=ot||ui.config;Mn.config=y(Za,gt.item,Mt,ua)}kt+=Ae;let ca={...ui,delay:To+kt,ref:vt,immediate:mn.immediate,reset:!1,...Mn};if(ua=="enter"&&Dt.is.und(ca.from)){let Za=ie?ie():W,zs=Dt.is.und(Za.initial)||mt?Za.from:Za.initial;ca.from=y(zs,gt.item,Mt)}let{onResolve:Ls}=ca;ca.onResolve=Za=>{y(Ls,Za);let zs=pt.current,ur=zs.find(da=>da.key===Tr);if(ur&&!(Za.cancelled&&ur.phase!="update")&&ur.ctrl.idle){let da=zs.every(an=>an.ctrl.idle);if(ur.phase=="leave"){let an=y(Me,ur.item);if(an!==!1){let Bs=an===!0?0:an;if(ur.expired=!0,!da&&Bs>0){Bs<=2147483647&&(ur.expirationId=setTimeout(lr,Bs));return}}}da&&zs.some(an=>an.expired)&&(Gn.current.delete(ur),Re&&(Ln.current=!0),lr())}};let $h=it(gt.ctrl,ca);ua==="leave"&&Re?Gn.current.set(gt,{phase:ua,springs:$h,payload:ca}):Ht.set(gt,{phase:ua,springs:$h,payload:ca})});let _a=(0,Er.useContext)(bn),Ya=(0,Dt.usePrev)(_a),No=_a!==Ya&&P(_a);(0,Dt.useIsomorphicLayoutEffect)(()=>{No&&(0,Dt.each)(Ye,gt=>{gt.ctrl.start({default:_a})})},[_a]),(0,Dt.each)(Ht,(gt,Mt)=>{if(Gn.current.size){let Tr=Ye.findIndex(Ir=>Ir.key===Mt.key);Ye.splice(Tr,1)}}),(0,Dt.useIsomorphicLayoutEffect)(()=>{(0,Dt.each)(Gn.current.size?Gn.current:Ht,({phase:gt,payload:Mt},Tr)=>{let{ctrl:Ir}=Tr;Tr.phase=gt,Pt?.add(Ir),No&&gt=="enter"&&Ir.start({default:_a}),Mt&&(z(Ir,Mt.ref),(Ir.ref||Pt)&&!Ln.current?Ir.update(Mt):(Ir.start(Mt),Ln.current&&(Ln.current=!1)))})},ve?void 0:ee);let Nr=gt=>fn.createElement(fn.Fragment,null,Ye.map((Mt,Tr)=>{let{springs:Ir}=Ht.get(Mt)||Mt.ctrl,mn=gt({...Ir},Mt.item,Mt,Tr);return mn&&mn.type?fn.createElement(mn.type,{...mn.props,key:Dt.is.str(Mt.key)||Dt.is.num(Mt.key)?Mt.key:Mt.ctrl.id,ref:mn.ref}):mn}));return Pt?[Nr,Pt]:Nr}var _h=1;function ek(A,{key:W,keys:ee=W},ie){if(ee===null){let ve=new Set;return A.map(Ee=>{let Ae=ie&&ie.find(Me=>Me.item===Ee&&Me.phase!=="leave"&&!ve.has(Me));return Ae?(ve.add(Ae),Ae.key):_h++})}return Dt.is.und(ee)?A:Dt.is.fun(ee)?A.map(ee):(0,Dt.toArray)(ee)}var Qu=nn,Ol=({container:A,...W}={})=>{let[ee,ie]=Na(()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...W}),[]);return(0,Qu.useIsomorphicLayoutEffect)(()=>{let ve=(0,Qu.onScroll)(({x:Ee,y:Ae})=>{ie.start({scrollX:Ee.current,scrollXProgress:Ee.progress,scrollY:Ae.current,scrollYProgress:Ae.progress})},{container:A?.current||void 0});return()=>{(0,Qu.each)(Object.values(ee),Ee=>Ee.stop()),ve()}},[]),ee},Gi=nn,En=({container:A,...W})=>{let[ee,ie]=Na(()=>({width:0,height:0,...W}),[]);return(0,Gi.useIsomorphicLayoutEffect)(()=>{let ve=(0,Gi.onResize)(({width:Ee,height:Ae})=>{ie.start({width:Ee,height:Ae,immediate:ee.width.get()===0||ee.height.get()===0})},{container:A?.current||void 0});return()=>{(0,Gi.each)(Object.values(ee),Ee=>Ee.stop()),ve()}},[]),ee},vn=_,Hi=nn,Xr={any:0,all:1};function Ta(A,W){let[ee,ie]=(0,vn.useState)(!1),ve=(0,vn.useRef)(),Ee=Hi.is.fun(A)&&A,Ae=Ee?Ee():{},{to:Me={},from:Re={},...Ue}=Ae,vt=Ee?W:A,[ot,Pt]=Na(()=>({from:Re,...Ue}),[]);return(0,Hi.useIsomorphicLayoutEffect)(()=>{let St=ve.current,{root:Ye,once:pt,amount:mt="any",...st}=vt??{};if(!St||pt&&ee||typeof IntersectionObserver>"u")return;let Ct=new WeakMap,ct=()=>(Me&&Pt.start(Me),ie(!0),pt?void 0:()=>{Re&&Pt.start(Re),ie(!1)}),kt=ui=>{ui.forEach(Ht=>{let Gn=Ct.get(Ht.target);if(Ht.isIntersecting!==!!Gn)if(Ht.isIntersecting){let Ln=ct();Hi.is.fun(Ln)?Ct.set(Ht.target,Ln):lr.unobserve(Ht.target)}else Gn&&(Gn(),Ct.delete(Ht.target))})},lr=new IntersectionObserver(kt,{root:Ye&&Ye.current||void 0,threshold:typeof mt=="number"||Array.isArray(mt)?mt:Xr[mt],...st});return lr.observe(St),()=>lr.unobserve(St)},[vt]),Ee?[ve,ot]:[ve,ee]}function Fs({children:A,...W}){return A(Na(W))}var Ml=nn;function Ia({items:A,children:W,...ee}){let ie=rn(A.length,ee);return A.map((ve,Ee)=>{let Ae=W(ve,Ee);return Ml.is.fun(Ae)?Ae(ie[Ee]):Ae})}function wd({items:A,children:W,...ee}){return $l(A,ee)(W)}var O0=nn,Wn=nn,rs=N0,Yu=class extends Gt{constructor(A,W){super(),this.source=A,this.idle=!0,this._active=new Set,this.calc=(0,Wn.createInterpolator)(...W);let ee=this._get(),ie=(0,rs.getAnimatedType)(ee);(0,rs.setAnimated)(this,ie.create(ee))}advance(A){let W=this._get(),ee=this.get();(0,Wn.isEqual)(W,ee)||((0,rs.getAnimated)(this).setValue(W),this._onChange(W,this.idle)),!this.idle&&M0(this._active)&&Rh(this)}_get(){let A=Wn.is.arr(this.source)?this.source.map(Wn.getFluidValue):(0,Wn.toArray)((0,Wn.getFluidValue)(this.source));return this.calc(...A)}_start(){this.idle&&!M0(this._active)&&(this.idle=!1,(0,Wn.each)((0,rs.getPayload)(this),A=>{A.done=!1}),Wn.Globals.skipAnimation?(Wn.raf.batchedUpdates(()=>this.advance()),Rh(this)):Wn.frameLoop.start(this))}_attach(){let A=1;(0,Wn.each)((0,Wn.toArray)(this.source),W=>{(0,Wn.hasFluidValue)(W)&&(0,Wn.addFluidObserver)(W,this),$t(W)&&(W.idle||this._active.add(W),A=Math.max(A,W.priority+1))}),this.priority=A,this._start()}_detach(){(0,Wn.each)((0,Wn.toArray)(this.source),A=>{(0,Wn.hasFluidValue)(A)&&(0,Wn.removeFluidObserver)(A,this)}),this._active.clear(),Rh(this)}eventObserved(A){A.type=="change"?A.idle?this.advance():(this._active.add(A.parent),this._start()):A.type=="idle"?this._active.delete(A.parent):A.type=="priority"&&(this.priority=(0,Wn.toArray)(this.source).reduce((W,ee)=>Math.max(W,($t(ee)?ee.priority:0)+1),0))}};function Ii(A){return A.idle!==!1}function M0(A){return!A.size||Array.from(A).every(Ii)}function Rh(A){A.idle||(A.idle=!0,(0,Wn.each)((0,rs.getPayload)(A),W=>{W.done=!0}),(0,Wn.callFluidObservers)(A,{type:"idle",parent:A}))}var tk=(A,...W)=>new Yu(A,W),kd=(A,...W)=>((0,O0.deprecateInterpolate)(),new Yu(A,W)),As=nn;As.Globals.assign({createStringInterpolator:As.createStringInterpolator,to:(A,W)=>new Yu(A,W)});var Zu=As.frameLoop.advance,Ds=nn;u(p,FRe(),t.exports)})(ej);var ARe=ej.exports;JB.exports=ARe;var iU=JB.exports;(function(t){var e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,i=(H,L)=>{for(var Q in L)e(H,Q,{get:L[Q],enumerable:!0})},o=(H,L,Q,J)=>{if(L&&typeof L=="object"||typeof L=="function")for(let te of r(L))!a.call(H,te)&&te!==Q&&e(H,te,{get:()=>L[te],enumerable:!(J=n(L,te))||J.enumerable});return H},s=(H,L,Q)=>(o(H,L,"default"),Q&&o(Q,L,"default")),l=H=>o(e({},"__esModule",{value:!0}),H),u={};i(u,{a:()=>Z,animated:()=>Z}),t.exports=l(u);var c=iU,d=zo,p=nn,f=N0,g=/^--/;function y(H,L){return L==null||typeof L=="boolean"||L===""?"":typeof L=="number"&&L!==0&&!g.test(H)&&!(x.hasOwnProperty(H)&&x[H])?L+"px":(""+L).trim()}var v={};function b(H,L){if(!H.nodeType||!H.setAttribute)return!1;let Q=H.nodeName==="filter"||H.parentNode&&H.parentNode.nodeName==="filter",{style:J,children:te,scrollTop:oe,scrollLeft:he,viewBox:ae,...de}=L,ke=Object.values(de),K=Object.keys(de).map(se=>Q||H.hasAttribute(se)?se:v[se]||(v[se]=se.replace(/([A-Z])/g,pe=>"-"+pe.toLowerCase())));te!==void 0&&(H.textContent=te);for(let se in J)if(J.hasOwnProperty(se)){let pe=y(se,J[se]);g.test(se)?H.style.setProperty(se,pe):H.style[se]=pe}K.forEach((se,pe)=>{H.setAttribute(se,ke[pe])}),oe!==void 0&&(H.scrollTop=oe),he!==void 0&&(H.scrollLeft=he),ae!==void 0&&H.setAttribute("viewBox",ae)}var x={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w=(H,L)=>H+L.charAt(0).toUpperCase()+L.substring(1),S=["Webkit","Ms","Moz","O"];x=Object.keys(x).reduce((H,L)=>(S.forEach(Q=>H[w(Q,L)]=H[L]),H),x);var C=N0,E=nn,R=/^(matrix|translate|scale|rotate|skew)/,T=/^(translate)/,$=/^(rotate|skew)/,P=(H,L)=>E.is.num(H)&&H!==0?H+L:H,D=(H,L)=>E.is.arr(H)?H.every(Q=>D(Q,L)):E.is.num(H)?H===L:parseFloat(H)===L,B=class extends C.AnimatedObject{constructor({x:H,y:L,z:Q,...J}){let te=[],oe=[];(H||L||Q)&&(te.push([H||0,L||0,Q||0]),oe.push(he=>[`translate3d(${he.map(ae=>P(ae,"px")).join(",")})`,D(he,0)])),(0,E.eachProp)(J,(he,ae)=>{if(ae==="transform")te.push([he||""]),oe.push(de=>[de,de===""]);else if(R.test(ae)){if(delete J[ae],E.is.und(he))return;let de=T.test(ae)?"px":$.test(ae)?"deg":"";te.push((0,E.toArray)(he)),oe.push(ae==="rotate3d"?([ke,K,se,pe])=>[`rotate3d(${ke},${K},${se},${P(pe,de)})`,D(pe,0)]:ke=>[`${ae}(${ke.map(K=>P(K,de)).join(",")})`,D(ke,ae.startsWith("scale")?1:0)])}}),te.length&&(J.transform=new z(te,oe)),super(J)}},z=class extends E.FluidValue{constructor(H,L){super(),this.inputs=H,this.transforms=L,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let H="",L=!0;return(0,E.each)(this.inputs,(Q,J)=>{let te=(0,E.getFluidValue)(Q[0]),[oe,he]=this.transforms[J](E.is.arr(te)?te:Q.map(E.getFluidValue));H+=" "+oe,L=L&&he}),L?"none":H}observerAdded(H){H==1&&(0,E.each)(this.inputs,L=>(0,E.each)(L,Q=>(0,E.hasFluidValue)(Q)&&(0,E.addFluidObserver)(Q,this)))}observerRemoved(H){H==0&&(0,E.each)(this.inputs,L=>(0,E.each)(L,Q=>(0,E.hasFluidValue)(Q)&&(0,E.removeFluidObserver)(Q,this)))}eventObserved(H){H.type=="change"&&(this._value=null),(0,E.callFluidObservers)(this,H)}},q=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];s(u,iU,t.exports),c.Globals.assign({batchedUpdates:d.unstable_batchedUpdates,createStringInterpolator:p.createStringInterpolator,colors:p.colors});var Y=(0,f.createHost)(q,{applyAnimatedValues:b,createAnimatedStyle:H=>new B(H),getComponentProps:({scrollTop:H,scrollLeft:L,...Q})=>Q}),Z=Y.animated})(ZB);var DRe=ZB.exports;YB.exports=DRe;var LRe=YB.exports;const{useState:zRe,useEffect:BRe}=_;function jRe(){const[t,e]=zRe({width:void 0,height:void 0});return BRe(()=>{function n(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),t}var URe=jRe;const Eh=_,{useSpring:VRe,animated:WRe}=LRe,GRe=URe,Wu={maxTilt:25,rotationPower:50,swipeThreshold:.5},F_={touchResponsive:{friction:50,tension:2e3},animateOut:{friction:30,tension:400},animateBack:{friction:10,tension:200}},oU=(t,e)=>Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),HRe=t=>{const e=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:t.x/e,y:t.y/e}},T0=async(t,e,n,r)=>{const a=oU(n,r),i=oU(t.x,t.y),o=a*t.x,s=a*t.y,l=t.x*45,u=a/i;return e.start({xyrot:[o,s,l],config:{duration:u}}),await new Promise(c=>setTimeout(()=>{c()},u))},sU=t=>new Promise(e=>{t.start({xyrot:[0,0,0],config:F_.animateBack,onRest:e})}),lU=t=>{if(Math.abs(t.x)>Math.abs(t.y)){if(t.x>Wu.swipeThreshold)return"right";if(t.x<-Wu.swipeThreshold)return"left"}else{if(t.y>Wu.swipeThreshold)return"down";if(t.y<-Wu.swipeThreshold)return"up"}return"none"},qRe=WRe.div,KRe=Eh.forwardRef(({flickOnSwipe:t=!0,children:e,onSwipe:n,onCardLeftScreen:r,className:a,preventSwipe:i=[],swipeRequirementType:o="velocity",swipeThreshold:s=Wu.swipeThreshold,onSwipeRequirementFulfilled:l,onSwipeRequirementUnfulfilled:u},c)=>{const{width:d,height:p}=GRe(),[{xyrot:f},g]=VRe(()=>({xyrot:[0,0,0],config:F_.touchResponsive}));Wu.swipeThreshold=s,Eh.useImperativeHandle(c,()=>({async swipe(w="right"){n&&n(w);const S=1.3,C=(Math.random()-.5)/2;w==="right"?await T0({x:S,y:C},g,d,p):w==="left"?await T0({x:-S,y:C},g,d,p):w==="up"?await T0({x:C,y:-S},g,d,p):w==="down"&&await T0({x:C,y:S},g,d,p),r&&r(w)},async restoreCard(){await sU(g)}}));const y=Eh.useCallback(async(w,S)=>{const C=lU({x:o==="velocity"?S.vx:S.dx,y:o==="velocity"?S.vy:S.dy});if(C!=="none"&&t&&!i.includes(C)){n&&n(C),await T0(o==="velocity"?{x:S.vx,y:S.vy}:HRe({x:S.dx,y:S.dy}),w,d,p),r&&r(C);return}sU(w)},[o,t,i,n,r,d,p]);let v="none";const b=(w,S,C,E)=>{let R=E?w.touches[0].clientX-S.x:w.clientX-S.x,T=E?w.touches[0].clientY-S.y:w.clientY-S.y;S.x===0&&S.y===0&&(R=0,T=0);const $=-(R-C.dx)/(C.timeStamp-Date.now()),P=-(T-C.dy)/(C.timeStamp-Date.now());return{dx:R,dy:T,vx:$,vy:P,timeStamp:Date.now()}};Eh.useLayoutEffect(()=>{let w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()},C=!1;const E=z=>{!z.srcElement.className.includes("pressable")&&z.cancelable&&z.preventDefault(),S=b(z,w,S,!0),w={x:z.touches[0].clientX,y:z.touches[0].clientY}};x.current.addEventListener("touchstart",E);const R=z=>{C=!0,S=b(z,w,S,!1),w={x:z.clientX,y:z.clientY}};x.current.addEventListener("mousedown",R);const T=z=>{if(l||u){const Y=lU({x:o==="velocity"?z.vx:z.dx,y:o==="velocity"?z.vy:z.dy});Y!==v&&(v=Y,v==="none"?u&&u():l&&l(Y))}let q=z.vx*15;isNaN(q)&&(q=0),q=Math.max(Math.min(q,Wu.maxTilt),-Wu.maxTilt),g.start({xyrot:[z.dx,z.dy,q],config:F_.touchResponsive})},$=z=>{if(!C)return;const q=b(z,w,S,!1);S=q,T(q)};window.addEventListener("mousemove",$);const P=z=>{C&&(C=!1,y(g,S),w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()})};window.addEventListener("mouseup",P);const D=z=>{const q=b(z,w,S,!0);S=q,T(q)};x.current.addEventListener("touchmove",D);const B=z=>{y(g,S),w={x:0,y:0},S={dx:0,dy:0,vx:0,vy:0,timeStamp:Date.now()}};return x.current.addEventListener("touchend",B),()=>{x.current.removeEventListener("touchstart",E),x.current.removeEventListener("touchmove",D),x.current.removeEventListener("touchend",B),window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",P),x.current.removeEventListener("mousedown",R)}},[y,g,l,u]);const x=Eh.useRef();return Eh.createElement(qRe,{ref:x,className:a,style:{transform:f.to((w,S,C)=>`translate3d(${w}px, ${S}px, 0px) rotate(${C}deg)`)},children:e})});var XRe=KRe;const QRe=Zi(XRe);function Vi(t){return e=>typeof e=="string"&&new RegExp(t.source,t.flags).test(e)}const YRe=Vi(/^[1-9][0-9]*$/),A_=Vi(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/),ZRe=Vi(/^E[1-9][0-9]*$/),W2=Vi(/^Q[1-9][0-9]*$/),G2=Vi(/^P[1-9][0-9]*$/),uU=Vi(/^L[1-9][0-9]*$/),cU=Vi(/^L[1-9][0-9]*-F[1-9][0-9]*$/),dU=Vi(/^L[1-9][0-9]*-S[1-9][0-9]*$/),JRe=Vi(/^M[1-9][0-9]*$/),e$e=Vi(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),t$e=Vi(/^[0-9a-f]{40}$/),pU=Vi(/^\d+$/),hU=Vi(/^(Q|P|L|M)[1-9][0-9]*$/);function n$e(t){if(typeof t!="string")return!1;const[e,n]=t.split("#");return A_(e)&&G2(n)}function fU(t){return typeof t!="string"?!1:t.startsWith("Item:")?W2(t.substring(5)):t.startsWith("Lexeme:")?uU(t.substring(7)):t.startsWith("Property:")?G2(t.substring(9)):W2(t)}function r$e(t){if(!hU(t))throw new Error(`invalid entity id: ${t}`);return t.replace(/^(Q|P|L|M)/,"")}function a$e(t,e){let n=`https://commons.wikimedia.org/wiki/Special:FilePath/${t}`;return typeof e=="number"&&(n+=`?width=${e}`),n}function i$e(t){const e=t.split(/[$-]/);if(e.length===6)return e[0].toUpperCase();if(e.length===7)return e.slice(0,2).join("-").toUpperCase();throw new Error(`invalid guid: ${t}`)}const o$e=Object.freeze(Object.defineProperty({__proto__:null,getEntityIdFromGuid:i$e,getImageUrl:a$e,getNumericId:r$e,isEntityId:A_,isEntityPageTitle:fU,isEntitySchemaId:ZRe,isFormId:cU,isGuid:e$e,isHash:t$e,isItemId:W2,isLexemeId:uU,isMediaInfoId:JRe,isNonNestedEntityId:hU,isNumericId:YRe,isPropertyClaimsId:n$e,isPropertyId:G2,isRevisionId:pU,isSenseId:dU},Symbol.toStringTag,{value:"Module"}));function Ms(t){return typeof t=="string"?[t]:Array.isArray(t)?[...t]:[]}function mU(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}const gU=t=>encodeURIComponent(t).replace(/[!'()*]/g,u$e),s$e=t=>t.replace(/\s/g,"_");function l$e(t){return Array.from(new Set(t))}const u$e=t=>"%"+t.charCodeAt(0).toString(16);function Gu(t){if(t.length!==1||!mU(t[0]))throw new Error(`Since wikibase-sdk v9.0.0, this function expects arguments to be passed in an object
    See https://github.com/maxlath/wikibase-sdk/blob/main/CHANGELOG.md`)}function I0(t,e){return typeof e=="string"&&t.includes(e)}function D_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L_(t){return Object.entries(t)}function z_(t){typeof t=="object"&&(t=t.time);const e=t[0];let[n,r]=t.slice(1).split("T");n=n.replace(/-00/g,"-01");const a=`${n}T${r}`;return c$e(e,a)}const c$e=(t,e)=>{const n=e.split("-")[0];return t==="-"||n.length>4?d$e(t,e,n):new Date(e)},d$e=(t,e,n)=>{let r;return n.length===4?r=`${t}00${e}`:n.length===5?r=`${t}0${e}`:r=t+e,new Date(r)};function B_(t){return e=>{try{return t(e)}catch{e=typeof e=="string"?e:e.time;const n=e[0];let[r,a]=e.slice(1).split("T");if(!n||!r||!a)throw new Error("TimeInput is invalid: "+JSON.stringify(e));return r=r.replace(/-00/g,"-01"),`${n}${r}T${a}`}}}const p$e=t=>z_(t).getTime(),h$e=t=>z_(t).toISOString(),f$e=t=>{if(typeof t=="object"){const{time:e,precision:n}=t;n===9?t=e.replace("-01-01T","-00-00T"):n===10?t=e.replace("-01T","-00T"):t=e}return t.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")},yU=B_(p$e),bU=B_(h$e),vU=B_(f$e),m$e=Object.freeze(Object.defineProperty({__proto__:null,wikibaseTimeToDateObject:z_,wikibaseTimeToEpochTime:yU,wikibaseTimeToISOString:bU,wikibaseTimeToSimpleDay:vU},Symbol.toStringTag,{value:"Module"})),Hu=t=>t.value,g$e=(t,e)=>e.keepRichValues?t.value:t.value.text,Nh=(t,e)=>b$e(t,e.entityPrefix),y$e={item:"Q",lexeme:"L",property:"P"},b$e=(t,e)=>{const{value:n}=t,r=n.id||y$e[n["entity-type"]]+n["numeric-id"];return typeof e=="string"?`${e}:${r}`:r},v$e=(t,e)=>{const{value:n}=t,r=parseFloat(n.amount);if(e.keepRichValues){const a={amount:parseFloat(n.amount),unit:n.unit.replace(/^https?:\/\/.*\/entity\//,"")};return n.upperBound!=null&&(a.upperBound=parseFloat(n.upperBound)),n.lowerBound!=null&&(a.lowerBound=parseFloat(n.lowerBound)),a}else return r},x$e=(t,e)=>e.keepRichValues?t.value:[t.value.latitude,t.value.longitude],w$e=(t,e)=>{let n;if(typeof e.timeConverter=="function"?n=e.timeConverter(t.value):n=k$e(e.timeConverter)(t.value),e.keepRichValues){const{timezone:r,before:a,after:i,precision:o,calendarmodel:s}=t.value;return{time:n,timezone:r,before:a,after:i,precision:o,calendarmodel:s}}else return n},k$e=(t="iso")=>{const e=S$e[t];if(!e)throw new Error(`invalid converter key: ${JSON.stringify(t).substring(0,100)}`);return e},S$e={iso:bU,epoch:yU,"simple-day":vU,none:t=>typeof t=="string"?t:t.time},C$e={commonsMedia:Hu,"external-id":Hu,"geo-shape":Hu,"globe-coordinate":x$e,math:Hu,monolingualtext:g$e,"musical-notation":Hu,quantity:v$e,string:Hu,"tabular-data":Hu,time:w$e,url:Hu,"wikibase-entityid":Nh,"wikibase-form":Nh,"wikibase-item":Nh,"wikibase-lexeme":Nh,"wikibase-property":Nh,"wikibase-sense":Nh},xU=t=>t.toLowerCase().replace(/[\s-]/g,""),wU={};for(const[t,e]of Object.entries(C$e))wU[xU(t)]=e;function E$e(t,e,n,r){t=t||e.type;try{const a=wU[xU(t)];return a(e,n)}catch(a){throw a.message==="parsers[datatype] is not a function"&&(a.message=`${t} claim parser isn't implemented
      Claim id: ${r}
      Please report to https://github.com/maxlath/wikibase-sdk/issues`),a}}function j_(t){const e={};for(const n of t){const{rank:r}=n;e[r]=e[r]||[],e[r].push(n)}return e.preferred||e.normal||[]}function kU(t){return t.filter(e=>e.rank!=="deprecated")}function N$e(t){const e={};for(const[n,r]of L_(t))e[n]=j_(r);return e}const T$e=Object.freeze(Object.defineProperty({__proto__:null,nonDeprecatedPropertyClaims:kU,truthyClaims:N$e,truthyPropertyClaims:j_},Symbol.toStringTag,{value:"Module"}));function U_(t,e){const{propertyPrefix:n}=e,r={};for(let a in t){const i=t[a];n&&(a=n+":"+a),r[a]=V_(i,e)}return r}function V_(t,e){if(t==null||t.length===0)return[];const{keepNonTruthy:n,keepNonDeprecated:r,areSubSnaks:a}=TU(e);return r?t=kU(t):n||a||(t=j_(t)),t=t.map(i=>W_(i,e)).filter(i=>i!==void 0),t[0]&&typeof t[0]!="object"?l$e(t):t}function SU(t,e){const{keepQualifiers:n,keepReferences:r,keepIds:a,keepHashes:i,keepTypes:o,keepSnaktypes:s,keepRanks:l}=TU(e),{mainsnak:u,rank:c}=t;let d,p,f,g,y,v;if(u?(p=u.datatype,f=u.datavalue,g=u.snaktype):(f=t.datavalue,p=t.datatype,g=t.snaktype,t.hash?y=!0:v=!0),f)d=E$e(p,f,e,t.id);else if(g==="somevalue")d=e.somevalueValue;else if(g==="novalue")d=e.novalueValue;else throw new Error("no datavalue or special snaktype found");if(y){if(!(i||o||s))return d;const w={value:d};return i&&(w.hash=t.hash),o&&(w.type=p),s&&(w.snaktype=g),w}if(v)return o?{type:p,value:d}:d;if(!(n||r||a||o||s||l))return d;const b={value:d};o&&(b.type=p),s&&(b.snaktype=g),l&&(b.rank=c);const x=H2(e);return x.keepHashes=i,n&&(b.qualifiers=EU(t.qualifiers,x)),r&&(t.references=t.references||[],b.references=NU(t.references,x)),a&&(b.id=t.id),b}function Th(t,e={}){return U_(t,e)}function CU(t,e={}){return V_(t,e)}function W_(t,e={}){return SU(t,e)}function EU(t,e={}){return U_(t,H2(e))}function I$e(t,e={}){return V_(t,H2(e))}function _$e(t,e={}){return SU(t,e)}function NU(t,e={}){return t.map(n=>R$e(n,e))}function R$e(t,e={}){const n=H2(e),r=U_(t.snaks,n);return n.keepHashes?{snaks:r,hash:t.hash}:r}const H2=(t={})=>t.areSubSnaks?t:Object.assign({},t,{areSubSnaks:!0}),$$e=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],TU=(t={})=>(t.keepAll&&$$e.forEach(e=>{t[e]==null&&(t[e]=!0)}),t);function _0(t){const e={};for(const[n,r]of L_(t))e[n]=r!=null?r.value:null;return e}function O$e(t){const e={};for(const[n,r]of L_(t))e[n]=r!=null?r.map(a=>a.value):[];return e}function IU(t){return _0(t)}function _U(t){return _0(t)}function RU(t){return O$e(t)}function $U(t){return _0(t)}function OU(t){return _0(t)}function MU(t){return _0(t)}const PU=(t,e={})=>{const{id:n,representations:r,grammaticalFeatures:a,claims:i}=t;if(!cU(n))throw new Error("invalid form object");return{id:n,representations:OU(r),grammaticalFeatures:a,claims:Th(i,e)}},FU=(t,e={})=>t.map(n=>PU(n,e)),AU=(t,e={})=>{const{id:n,glosses:r,claims:a}=t;if(!dU(n))throw new Error("invalid sense object");return{id:n,glosses:MU(r),claims:Th(a,e)}};function DU(t,e={}){return t.map(n=>AU(n,e))}const G_={commonswiki:"commons",foundationwiki:"foundation",mediawikiwiki:"mediawiki",metawiki:"meta",outreachwiki:"outreach",sourceswiki:"sources",specieswiki:"species",wikidatawiki:"wikidata",wikifunctionswiki:"wikifunctions",wikimaniawiki:"wikimania"},H_=["aawiki","aawikibooks","aawiktionary","abwiki","abwiktionary","acewiki","adywiki","afwiki","afwikibooks","afwikiquote","afwiktionary","akwiki","akwikibooks","akwiktionary","alswiki","alswikibooks","alswikiquote","alswiktionary","altwiki","amiwiki","amwiki","amwikiquote","amwiktionary","angwiki","angwikibooks","angwikiquote","angwikisource","angwiktionary","anpwiki","anwiki","anwiktionary","arcwiki","arwiki","arwikibooks","arwikinews","arwikiquote","arwikisource","arwikiversity","arwiktionary","arywiki","arzwiki","astwiki","astwikibooks","astwikiquote","astwiktionary","aswiki","aswikibooks","aswikiquote","aswikisource","aswiktionary","atjwiki","avkwiki","avwiki","avwiktionary","awawiki","aywiki","aywikibooks","aywiktionary","azbwiki","azwiki","azwikibooks","azwikiquote","azwikisource","azwiktionary","banwiki","banwikisource","barwiki","bat_smgwiki","bawiki","bawikibooks","bbcwiki","bclwiki","bclwikiquote","bclwiktionary","be_x_oldwiki","bewiki","bewikibooks","bewikiquote","bewikisource","bewiktionary","bgwiki","bgwikibooks","bgwikinews","bgwikiquote","bgwikisource","bgwiktionary","bhwiki","bhwiktionary","biwiki","biwikibooks","biwiktionary","bjnwiki","bjnwikiquote","bjnwiktionary","blkwiki","blkwiktionary","bmwiki","bmwikibooks","bmwikiquote","bmwiktionary","bnwiki","bnwikibooks","bnwikiquote","bnwikisource","bnwikivoyage","bnwiktionary","bowiki","bowikibooks","bowiktionary","bpywiki","brwiki","brwikiquote","brwikisource","brwiktionary","bswiki","bswikibooks","bswikinews","bswikiquote","bswikisource","bswiktionary","btmwiktionary","bugwiki","bxrwiki","cawiki","cawikibooks","cawikinews","cawikiquote","cawikisource","cawiktionary","cbk_zamwiki","cdowiki","cebwiki","cewiki","chowiki","chrwiki","chrwiktionary","chwiki","chwikibooks","chwiktionary","chywiki","ckbwiki","ckbwiktionary","commonswiki","cowiki","cowikibooks","cowikiquote","cowiktionary","crhwiki","crwiki","crwikiquote","crwiktionary","csbwiki","csbwiktionary","cswiki","cswikibooks","cswikinews","cswikiquote","cswikisource","cswikiversity","cswiktionary","cuwiki","cvwiki","cvwikibooks","cywiki","cywikibooks","cywikiquote","cywikisource","cywiktionary","dagwiki","dawiki","dawikibooks","dawikiquote","dawikisource","dawiktionary","dewiki","dewikibooks","dewikinews","dewikiquote","dewikisource","dewikiversity","dewikivoyage","dewiktionary","dgawiki","dinwiki","diqwiki","diqwiktionary","dsbwiki","dtywiki","dvwiki","dvwiktionary","dzwiki","dzwiktionary","eewiki","elwiki","elwikibooks","elwikinews","elwikiquote","elwikisource","elwikiversity","elwikivoyage","elwiktionary","emlwiki","enwiki","enwikibooks","enwikinews","enwikiquote","enwikisource","enwikiversity","enwikivoyage","enwiktionary","eowiki","eowikibooks","eowikinews","eowikiquote","eowikisource","eowikivoyage","eowiktionary","eswiki","eswikibooks","eswikinews","eswikiquote","eswikisource","eswikiversity","eswikivoyage","eswiktionary","etwiki","etwikibooks","etwikiquote","etwikisource","etwiktionary","euwiki","euwikibooks","euwikiquote","euwikisource","euwiktionary","extwiki","fatwiki","fawiki","fawikibooks","fawikinews","fawikiquote","fawikisource","fawikivoyage","fawiktionary","ffwiki","fiu_vrowiki","fiwiki","fiwikibooks","fiwikinews","fiwikiquote","fiwikisource","fiwikiversity","fiwikivoyage","fiwiktionary","fjwiki","fjwiktionary","fonwiki","foundationwiki","fowiki","fowikisource","fowiktionary","frpwiki","frrwiki","frwiki","frwikibooks","frwikinews","frwikiquote","frwikisource","frwikiversity","frwikivoyage","frwiktionary","furwiki","fywiki","fywikibooks","fywiktionary","gagwiki","ganwiki","gawiki","gawikibooks","gawikiquote","gawiktionary","gcrwiki","gdwiki","gdwiktionary","glkwiki","glwiki","glwikibooks","glwikiquote","glwikisource","glwiktionary","gnwiki","gnwikibooks","gnwiktionary","gomwiki","gomwiktionary","gorwiki","gorwiktionary","gotwiki","gotwikibooks","gpewiki","gucwiki","gurwiki","guwiki","guwikibooks","guwikiquote","guwikisource","guwiktionary","guwwiki","guwwikinews","guwwikiquote","guwwiktionary","gvwiki","gvwiktionary","hakwiki","hawiki","hawiktionary","hawwiki","hewiki","hewikibooks","hewikinews","hewikiquote","hewikisource","hewikivoyage","hewiktionary","hifwiki","hifwiktionary","hiwiki","hiwikibooks","hiwikiquote","hiwikisource","hiwikiversity","hiwikivoyage","hiwiktionary","howiki","hrwiki","hrwikibooks","hrwikiquote","hrwikisource","hrwiktionary","hsbwiki","hsbwiktionary","htwiki","htwikisource","huwiki","huwikibooks","huwikinews","huwikiquote","huwikisource","huwiktionary","hywiki","hywikibooks","hywikiquote","hywikisource","hywiktionary","hywwiki","hzwiki","iawiki","iawikibooks","iawiktionary","idwiki","idwikibooks","idwikiquote","idwikisource","idwiktionary","iewiki","iewikibooks","iewiktionary","igwiki","igwikiquote","igwiktionary","iiwiki","ikwiki","ikwiktionary","ilowiki","inhwiki","iowiki","iowiktionary","iswiki","iswikibooks","iswikiquote","iswikisource","iswiktionary","itwiki","itwikibooks","itwikinews","itwikiquote","itwikisource","itwikiversity","itwikivoyage","itwiktionary","iuwiki","iuwiktionary","jamwiki","jawiki","jawikibooks","jawikinews","jawikiquote","jawikisource","jawikiversity","jawikivoyage","jawiktionary","jbowiki","jbowiktionary","jvwiki","jvwikisource","jvwiktionary","kaawiki","kabwiki","kawiki","kawikibooks","kawikiquote","kawiktionary","kbdwiki","kbdwiktionary","kbpwiki","kcgwiki","kcgwiktionary","kgwiki","kiwiki","kjwiki","kkwiki","kkwikibooks","kkwikiquote","kkwiktionary","klwiki","klwiktionary","kmwiki","kmwikibooks","kmwiktionary","knwiki","knwikibooks","knwikiquote","knwikisource","knwiktionary","koiwiki","kowiki","kowikibooks","kowikinews","kowikiquote","kowikisource","kowikiversity","kowiktionary","krcwiki","krwiki","krwikiquote","kshwiki","kswiki","kswikibooks","kswikiquote","kswiktionary","kuwiki","kuwikibooks","kuwikiquote","kuwiktionary","kvwiki","kwwiki","kwwikiquote","kwwiktionary","kywiki","kywikibooks","kywikiquote","kywiktionary","ladwiki","lawiki","lawikibooks","lawikiquote","lawikisource","lawiktionary","lbewiki","lbwiki","lbwikibooks","lbwikiquote","lbwiktionary","lezwiki","lfnwiki","lgwiki","lijwiki","lijwikisource","liwiki","liwikibooks","liwikinews","liwikiquote","liwikisource","liwiktionary","lldwiki","lmowiki","lmowiktionary","lnwiki","lnwikibooks","lnwiktionary","lowiki","lowiktionary","lrcwiki","ltgwiki","ltwiki","ltwikibooks","ltwikiquote","ltwikisource","ltwiktionary","lvwiki","lvwikibooks","lvwiktionary","madwiki","maiwiki","map_bmswiki","mdfwiki","mediawikiwiki","metawiki","mgwiki","mgwikibooks","mgwiktionary","mhrwiki","mhwiki","mhwiktionary","minwiki","minwiktionary","miwiki","miwikibooks","miwiktionary","mkwiki","mkwikibooks","mkwikisource","mkwiktionary","mlwiki","mlwikibooks","mlwikiquote","mlwikisource","mlwiktionary","mniwiki","mniwiktionary","mnwiki","mnwikibooks","mnwiktionary","mnwwiki","mnwwiktionary","mowiki","mowiktionary","mrjwiki","mrwiki","mrwikibooks","mrwikiquote","mrwikisource","mrwiktionary","mswiki","mswikibooks","mswiktionary","mtwiki","mtwiktionary","muswiki","mwlwiki","myvwiki","mywiki","mywikibooks","mywiktionary","mznwiki","nahwiki","nahwikibooks","nahwiktionary","napwiki","napwikisource","nawiki","nawikibooks","nawikiquote","nawiktionary","nds_nlwiki","ndswiki","ndswikibooks","ndswikiquote","ndswiktionary","newiki","newikibooks","newiktionary","newwiki","ngwiki","niawiki","niawiktionary","nlwiki","nlwikibooks","nlwikinews","nlwikiquote","nlwikisource","nlwikivoyage","nlwiktionary","nnwiki","nnwikiquote","nnwiktionary","novwiki","nowiki","nowikibooks","nowikinews","nowikiquote","nowikisource","nowiktionary","nqowiki","nrmwiki","nsowiki","nvwiki","nywiki","ocwiki","ocwikibooks","ocwiktionary","olowiki","omwiki","omwiktionary","orwiki","orwikisource","orwiktionary","oswiki","outreachwiki","pagwiki","pamwiki","papwiki","pawiki","pawikibooks","pawikisource","pawiktionary","pcdwiki","pcmwiki","pdcwiki","pflwiki","pihwiki","piwiki","piwiktionary","plwiki","plwikibooks","plwikinews","plwikiquote","plwikisource","plwikivoyage","plwiktionary","pmswiki","pmswikisource","pnbwiki","pnbwiktionary","pntwiki","pswiki","pswikibooks","pswikivoyage","pswiktionary","ptwiki","ptwikibooks","ptwikinews","ptwikiquote","ptwikisource","ptwikiversity","ptwikivoyage","ptwiktionary","pwnwiki","quwiki","quwikibooks","quwikiquote","quwiktionary","rmwiki","rmwikibooks","rmwiktionary","rmywiki","rnwiki","rnwiktionary","roa_rupwiki","roa_rupwiktionary","roa_tarawiki","rowiki","rowikibooks","rowikinews","rowikiquote","rowikisource","rowikivoyage","rowiktionary","ruewiki","ruwiki","ruwikibooks","ruwikinews","ruwikiquote","ruwikisource","ruwikiversity","ruwikivoyage","ruwiktionary","rwwiki","rwwiktionary","sahwiki","sahwikiquote","sahwikisource","satwiki","sawiki","sawikibooks","sawikiquote","sawikisource","sawiktionary","scnwiki","scnwiktionary","scowiki","scwiki","scwiktionary","sdwiki","sdwikinews","sdwiktionary","sewiki","sewikibooks","sgwiki","sgwiktionary","shiwiki","shnwiki","shnwikibooks","shnwikivoyage","shnwiktionary","shwiki","shwiktionary","shywiktionary","simplewiki","simplewikibooks","simplewikiquote","simplewiktionary","siwiki","siwikibooks","siwiktionary","skrwiki","skrwiktionary","skwiki","skwikibooks","skwikiquote","skwikisource","skwiktionary","slwiki","slwikibooks","slwikiquote","slwikisource","slwikiversity","slwiktionary","smnwiki","smwiki","smwiktionary","snwiki","snwiktionary","sourceswiki","sowiki","sowiktionary","specieswiki","sqwiki","sqwikibooks","sqwikinews","sqwikiquote","sqwiktionary","srnwiki","srwiki","srwikibooks","srwikinews","srwikiquote","srwikisource","srwiktionary","sswiki","sswiktionary","stqwiki","stwiki","stwiktionary","suwiki","suwikibooks","suwikiquote","suwikisource","suwiktionary","svwiki","svwikibooks","svwikinews","svwikiquote","svwikisource","svwikiversity","svwikivoyage","svwiktionary","swwiki","swwikibooks","swwiktionary","szlwiki","szywiki","tawiki","tawikibooks","tawikinews","tawikiquote","tawikisource","tawiktionary","taywiki","tcywiki","tetwiki","tewiki","tewikibooks","tewikiquote","tewikisource","tewiktionary","tgwiki","tgwikibooks","tgwiktionary","thwiki","thwikibooks","thwikinews","thwikiquote","thwikisource","thwiktionary","tiwiki","tiwiktionary","tkwiki","tkwikibooks","tkwikiquote","tkwiktionary","tlwiki","tlwikibooks","tlwikiquote","tlwiktionary","tlywiki","tnwiki","tnwiktionary","towiki","towiktionary","tpiwiki","tpiwiktionary","trvwiki","trwiki","trwikibooks","trwikinews","trwikiquote","trwikisource","trwikivoyage","trwiktionary","tswiki","tswiktionary","ttwiki","ttwikibooks","ttwikiquote","ttwiktionary","tumwiki","twwiki","twwiktionary","tyvwiki","tywiki","udmwiki","ugwiki","ugwikibooks","ugwikiquote","ugwiktionary","ukwiki","ukwikibooks","ukwikinews","ukwikiquote","ukwikisource","ukwikivoyage","ukwiktionary","urwiki","urwikibooks","urwikiquote","urwiktionary","uzwiki","uzwikibooks","uzwikiquote","uzwiktionary","vecwiki","vecwikisource","vecwiktionary","vepwiki","vewiki","viwiki","viwikibooks","viwikiquote","viwikisource","viwikivoyage","viwiktionary","vlswiki","vowiki","vowikibooks","vowikiquote","vowiktionary","warwiki","wawiki","wawikibooks","wawikisource","wawiktionary","wikidatawiki","wikifunctionswiki","wikimaniawiki","wowiki","wowikiquote","wowiktionary","wuuwiki","xalwiki","xhwiki","xhwikibooks","xhwiktionary","xmfwiki","yiwiki","yiwikisource","yiwiktionary","yowiki","yowikibooks","yowiktionary","yuewiktionary","zawiki","zawikibooks","zawikiquote","zawiktionary","zeawiki","zghwiki","zh_classicalwiki","zh_min_nanwiki","zh_min_nanwikibooks","zh_min_nanwikiquote","zh_min_nanwikisource","zh_min_nanwiktionary","zh_yuewiki","zhwiki","zhwikibooks","zhwikinews","zhwikiquote","zhwikisource","zhwikiversity","zhwikivoyage","zhwiktionary","zuwiki","zuwikibooks","zuwiktionary"],M$e="https://www.wikidata.org/wiki/";function LU({site:t,title:e}){if(Gu(arguments),!t)throw new Error("missing a site");if(!e)throw new Error("missing a title");if(D_(q2,t))return q2[t](e);const n=t.replace(/wiki$/,"");if(D_(q2,n))return q2[n](e);const{lang:r,project:a}=zU(t);return e=gU(s$e(e)),`https://${r}.${a}.org/wiki/${e}`}const yd=t=>e=>`https://${t}.wikimedia.org/wiki/${e}`,q2={commons:yd("commons"),foundation:yd("foundation"),mediawiki:t=>`https://www.mediawiki.org/wiki/${t}`,meta:yd("meta"),outreach:yd("outreach"),sources:t=>`https://wikisource.org/wiki/${t}`,species:yd("species"),wikidata:t=>{const e=P$e[t[0]];let n=e?`${e}:${t}`:t;return n=n.replace("-","#"),`${M$e}${n}`},wikifunctions:yd("wikifunctions"),wikimania:yd("wikimania")},P$e={E:"EntitySchema",L:"Lexeme",P:"Property"},F$e=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/;function zU(t){if(t.startsWith("http")){const e=t,n=e.match(F$e);if(!n)throw new Error(`invalid sitelink url: ${e}`);let[r,a,i]=n.slice(1);if(i=decodeURIComponent(i),r==="commons")return{lang:"en",project:"commons",key:"commons",title:i,url:e};if(!I0(D$e,a))throw new Error(`project is unknown: ${a}`);if(r==="www")return{lang:"en",project:a,key:a,title:i,url:e};const o=`${r.replace(/-/g,"_")}${a}`.replace("wikipedia","wiki");return{lang:r,project:a,key:o,title:i,url:e}}else{if(D_(G_,t))return{lang:"en",project:G_[t],key:t};if(!I0(H_,t))throw new Error(`site not found: ${t}. Updating wikibase-sdk to a more recent version might fix the issue.`);let[e,n,r]=t.split("wik");if(r!=null)throw new Error(`invalid sitelink key: ${t}`);e=e.replace(/_/g,"-");const a=jU[n];if(!a)throw new Error(`sitelink project not found: ${a}`);return{lang:e,project:a,key:t}}}const BU=t=>I0(H_,t),A$e=BU,jU={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"},D$e=[...Object.values(jU),...Object.values(G_)],L$e=Object.freeze(Object.defineProperty({__proto__:null,getSitelinkData:zU,getSitelinkUrl:LU,isSite:BU,isSitelinkKey:A$e},Symbol.toStringTag,{value:"Module"}));function UU(t,e={}){let{addUrl:n,keepBadges:r,keepAll:a}=e;return r=r||a,Object.keys(t).reduce(z$e({sitelinks:t,addUrl:n,keepBadges:r}),{})}const z$e=({sitelinks:t,addUrl:e,keepBadges:n})=>(r,a)=>{if(t[a]==null)return r[a]=t[a],r;const{title:i,badges:o}=t[a];return e||n?(r[a]={title:i},e&&(r[a].url=LU({site:a,title:i})),n&&(r[a].badges=o)):r[a]=i,r},B$e={labels:IU,descriptions:_U,aliases:RU,claims:Th,statements:Th,sitelinks:UU,lemmas:$U,forms:FU,senses:DU},VU=(t,e={})=>{const{type:n}=t,r={id:t.id,type:n,modified:t.modified};return n==="item"?(qa(t,r,"labels"),qa(t,r,"descriptions"),qa(t,r,"aliases"),qa(t,r,"claims",e),qa(t,r,"sitelinks",e)):n==="property"?(r.datatype=t.datatype,qa(t,r,"labels"),qa(t,r,"descriptions"),qa(t,r,"aliases"),qa(t,r,"claims",e)):n==="lexeme"?(qa(t,r,"lemmas"),r.lexicalCategory=t.lexicalCategory,r.language=t.language,qa(t,r,"claims",e),qa(t,r,"forms",e),qa(t,r,"senses",e)):n==="mediainfo"&&(qa(t,r,"labels"),qa(t,r,"descriptions"),qa(t,r,"statements",e)),r},qa=(t,e,n,r)=>{t[n]!=null&&(e[n]=B$e[n](t[n],r))},WU=(t,e={})=>{t.entities&&(t=t.entities);const{entityPrefix:n}=e,r={};for(const[a,i]of Object.entries(t)){const o=n?`${n}:${a}`:a;r[o]=VU(i,e)}return r};function j$e(t){t=t.body||t;const{entities:e}=t;return WU(e)}function U$e(t){return t=t.body||t,t.query.search.map(e=>e.title)}const V$e=Object.freeze(Object.defineProperty({__proto__:null,entities:j$e,pagesTitles:U$e},Symbol.toStringTag,{value:"Module"}));function W$e(t,e={}){typeof t=="string"&&(t=JSON.parse(t));const{vars:n}=t.head,r=t.results.bindings;if(n.length===1&&e.minimize){const s=n[0];return r.map(l=>q_(l[s])).filter(l=>l!=null)}const{richVars:a,associatedVars:i,standaloneVars:o}=q$e(n);return r.map(s=>K$e(a,i,o,s))}function q_(t){if(!t||t.type==="bnode")return null;const{value:e}=t;if(t.type==="uri")return G$e(e);const n=(t.datatype||"").replace("http://www.w3.org/2001/XMLSchema#","");return n==="decimal"||n==="integer"||n==="float"||n==="double"?parseFloat(e):n==="boolean"?e==="true":e}function G$e(t){return t.match(/http.*\/entity\/statement\//)?H$e(t):t.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,"")}function H$e(t){t=t.replace(/^https?:\/\/.*\/entity\/statement\//,"");const e=t.split("-");return e[0]+"$"+e.slice(1).join("-")}function q$e(t){let e=t.filter(i=>{const o=new RegExp(`^${i}[A-Z]\\w+`);return t.some(s=>o.test(s))});e=e.filter(i=>!e.some(o=>i!==o&&i.startsWith(o)));const n=new RegExp(`^(${e.join("|")})[A-Z]`),r=t.filter(i=>n.test(i)),a=t.filter(i=>!e.includes(i)&&!n.test(i));return{richVars:e,associatedVars:r,standaloneVars:a}}function K$e(t,e,n,r){const a={};for(const i of t){const o={},s=q_(r[i]);s!=null&&(o.value=s);for(const l of e)l.startsWith(i)&&X$e(r,i,l,o);Object.keys(o).length>0&&(a[i]=o)}for(const i of n){const o=q_(r[i]);o!=null&&(a[i]=o)}return a}function X$e(t,e,n,r){let a=n.split(e)[1];a=a[0].toLowerCase()+a.slice(1),a=a==="altLabel"?"aliases":a;const i=t[n];i!=null&&(r[a]=i.value)}const Q$e=Object.freeze(Object.defineProperty({__proto__:null,aliases:RU,claim:W_,claims:Th,descriptions:_U,entities:WU,entity:VU,form:PU,forms:FU,glosses:MU,labels:IU,lemmas:$U,propertyClaims:CU,propertyQualifiers:I$e,propertySnaks:CU,qualifier:_$e,qualifiers:EU,references:NU,representations:OU,sense:AU,senses:DU,sitelinks:UU,snak:W_,snaks:Th,sparqlResults:W$e},Symbol.toStringTag,{value:"Module"})),Y$e=/^\d+[|\d]*$/;function Z$e(t){return function(e){Gu(arguments);for(const[f,g]of Object.entries(e))if(f.startsWith("sr")){const y=f.replace(/^sr/,"");if(e[y]!=null)throw new Error(`${y} and ${f} are the same`);e[y]=g}const{search:n,haswbstatement:r,format:a="json",limit:i,offset:o,profile:s,sort:l}=e;let{namespace:u,prop:c}=e;if(!(n||r))throw new Error('missing "search" or "haswbstatement" parameter');let d="";if(n&&(d+=n),r){const f=r instanceof Array?r:[r];for(const g of f)g[0]==="-"?d+=` -haswbstatement:${g.slice(1)}`:d+=` haswbstatement:${g}`}if(i!=null&&(typeof i!="number"||i<1))throw new Error(`invalid limit: ${i}`);if(o!=null&&(typeof o!="number"||o<0))throw new Error(`invalid offset: ${o}`);if(u instanceof Array?u=u.join("|"):typeof u=="number"&&(u=u.toString()),u&&!Y$e.test(u))throw new Error(`invalid namespace: ${u}`);if(s!=null&&typeof s!="string")throw new Error(`invalid profile: ${s} (${typeof s}, expected string)`);if(l!=null&&typeof l!="string")throw new Error(`invalid sort: ${l} (${typeof l}, expected string)`);let p;if(c!=null){if(c instanceof Array&&(c=c.join("|")),typeof c!="string")throw new Error(`invalid prop: ${c} (${typeof c}, expected string)`);p=c.toString()}return t({action:"query",list:"search",srsearch:d.trim(),format:a,srnamespace:u,srlimit:i,sroffset:o,srqiprofile:s,srsort:l,srprop:p})}}function K2(t,e){return function(n){if(!e(n))throw new Error(`invalid ${t}: ${n} (type: ${nOe(n)})`)}}const GU=K2("entity id",A_),J$e=K2("property id",G2),eOe=K2("entity page title",fU),tOe=K2("revision id",pU);function nOe(t){const e=typeof t;if(e==="object"){if(t===null)return"null";if(t instanceof Array)return"array";if(t instanceof Promise)return"promise"}return e==="number"&&Number.isNaN(t)?"NaN":e}function HU(t){return function({ids:e,languages:n,props:r,format:a="json",redirects:i}){if(Gu(arguments),!(e&&e.length>0))throw new Error("no id provided");e=Ms(e),e.forEach(s=>GU(s)),e.length>50&&console.warn(`getEntities accepts 50 ids max to match Wikidata API limitations:
      this request won't get all the desired entities.
      You can use getManyEntities instead to generate several request urls
      to work around this limitation`);const o={action:"wbgetentities",ids:e.join("|"),format:a};return i===!1&&(o.redirects="no"),n&&(n=Ms(n),o.languages=n.join("|")),r&&r.length>0&&(o.props=Ms(r).join("|")),t(o)}}function rOe(t){return function({titles:e,sites:n,languages:r,props:a,format:i="json",redirects:o}){if(Gu(arguments),!(e&&e.length>0))throw new Error("no titles provided");n&&n.length>0||(n=["enwiki"]),e=Ms(e),n=Ms(n).map(aOe),a=Ms(a);const s={action:"wbgetentities",titles:e.join("|"),sites:n.join("|"),format:i};return n.length===1&&e.length===1&&(s.normalize=!0),r&&(r=Ms(r),s.languages=r.join("|")),a.length>0&&(s.props=a.join("|")),o===!1&&(s.redirects="no"),t(s)}}function aOe(t){return I0(H_,t)?t:t.replace(/-/g,"_")+"wiki"}function iOe(t,e){return function({id:n,revision:r}){return Gu(arguments),GU(n),tOe(r),`${t}/${e}/index.php?title=Special:EntityData/${n}.json&revision=${r}`}}function oOe(t){const e=HU(t);return function({ids:n,languages:r,props:a,format:i,redirects:o}){if(Gu(arguments),!(n instanceof Array))throw new Error("getManyEntities expects an array of ids");return sOe(n).map(s=>e({ids:s,languages:r,props:a,format:i,redirects:o}))}}function sOe(t){const e=[];for(;t.length>0;){const n=t.slice(0,50);t=t.slice(50),e.push(n)}return e}function qU(t){return function(e){const n=gU(e);return`${t}?format=json&query=${n}`}}const lOe="FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ",uOe=t=>{const e=qU(t);return function(n){let{properties:r}=n;const{values:a,limit:i,caseInsensitive:o,keepProperties:s}=n,l=o?pOe:dOe,u=s?"":lOe;r=Ms(r),r.forEach(d=>J$e(d));let c=`SELECT DISTINCT ?subject WHERE { ${cOe(a,l,r,u)} }`;return i&&(c+=` LIMIT ${i}`),e(c)}},cOe=(t,e,n,r)=>(n=n.map(hOe).join("|"),t instanceof Array?"{ "+t.map(KU).map(a=>e(n,a,r)).join("} UNION {")+" }":e(n,KU(t),r)),KU=t=>(W2(t)?t=`wd:${t}`:typeof t=="string"&&(t=`'${t}'`),t),dOe=(t,e,n)=>`?subject ${t} ${e} .
    ${n}`,pOe=(t,e,n)=>`?subject ${t} ?value .
    FILTER (lcase(?value) = ${e.toLowerCase()})
    ${n}`,hOe=t=>"wdt:"+t;function fOe(t){return function({ids:e,format:n,limit:r,start:a,end:i,prop:o,user:s,excludeuser:l,tag:u}){Gu(arguments),e=Ms(e),e.forEach(p=>eOe(p));const c=e.length===1,d={action:"query",prop:"revisions"};return d.titles=e.join("|"),d.format=n||"json",c&&(d.rvlimit=r||"max"),c&&a&&(d.rvstart=XU(a)),c&&i&&(d.rvend=XU(i)),o?d.rvprop=Ms(o).join("|"):d.rvprop="ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",d.rvslots="*",s&&(d.rvuser=s),l&&(d.rvexcludeuser=l),u&&(d.rvtag=u),t(d)}}const XU=t=>typeof t=="number"&&t<mOe?t:Math.trunc(new Date(t).getTime()/1e3),mOe=new Date("2000-01-01").getTime(),gOe=["item","property","lexeme","form","sense"],yOe=t=>function({search:e,language:n="en",uselang:r,limit:a="20",continue:i="0",format:o="json",type:s="item"}){if(Gu(arguments),r=r||n,!(e&&e.length>0))throw new Error("search can't be empty");if(!I0(gOe,s))throw new Error(`invalid type: ${s}`);return t({action:"wbsearchentities",search:e,language:n,limit:a,continue:i,format:o,uselang:r,type:s})},bOe=typeof location<"u"&&typeof document<"u";function vOe(t){return e=>{bOe&&(e=Object.assign(Object.assign({},e),{origin:"*"}));const n=Object.entries(e).filter(([,a])=>a!=null).map(([a,i])=>[a,String(i)]),r=new URLSearchParams(n).toString();return t+"?"+r}}const xOe=`Tip: if you just want to access functions that don't need an instance or a sparqlEndpoint,
those are also exposed directly on the module object. Exemple:
import { isItemId, simplify } from 'wikibase-sdk'`,wOe=Object.assign(Object.assign(Object.assign(Object.assign({simplify:Q$e,parse:V$e},o$e),L$e),T$e),m$e);function kOe(t){if(!mU(t))throw new Error("invalid config");const{instance:e,sparqlEndpoint:n}=t;let{wgScriptPath:r="w"}=t;if(r=r.replace(/^\//,""),!(e||n))throw new Error(`one of instance or sparqlEndpoint should be set at initialization.
${xOe}`);let a,i,o;if(e){QU("instance",e),i=e.replace(/\/$/,"").replace(`/${r}/api.php`,""),o=`${i}/${r}/api.php`;const l=vOe(o);a={searchEntities:yOe(l),cirrusSearchPages:Z$e(l),getEntities:HU(l),getManyEntities:oOe(l),getRevisions:fOe(l),getEntityRevision:iOe(e,r),getEntitiesFromSitelinks:rOe(l)}}else a={searchEntities:bd("searchEntities"),cirrusSearchPages:bd("cirrusSearchPages"),getEntities:bd("getEntities"),getManyEntities:bd("getManyEntities"),getRevisions:bd("getRevisions"),getEntityRevision:bd("getEntityRevision"),getEntitiesFromSitelinks:bd("getEntitiesFromSitelinks")};let s;return n?(QU("sparqlEndpoint",n),s={sparqlQuery:qU(n),getReverseClaims:uOe(n)}):s={sparqlQuery:ZU("sparqlQuery"),getReverseClaims:ZU("getReverseClaims")},Object.assign(Object.assign(Object.assign({instance:{root:i,apiEndpoint:o}},wOe),a),s)}const QU=(t,e)=>{if(!(typeof e=="string"&&e.startsWith("http")))throw new Error(`invalid ${t}: ${e}`)},YU=t=>e=>()=>{throw new Error(`${e} requires ${t} to be set at initialization`)},ZU=YU("a sparqlEndpoint"),bd=YU("an instance"),SOe={sparqlQuery:(t="")=>{const e=kOe({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"}),n=`
      SELECT ?item ?itemLabel ?artworkLabel ?countryLabel ?genreLabel ?year ?locationLabel ?creatorLabel ?materialLabel ?depictsLabel ?collectionLabel ?iiifManifest (MD5(CONCAT(str(?item),str(RAND()))) as ?random)
      WITH {    
        SELECT ?item (SAMPLE(?artwork) as ?artwork) (SAMPLE(?country) as ?country) (SAMPLE(?genre) as ?genre) (SAMPLE(YEAR(?inception)) as ?year) (SAMPLE(?location) as ?location) (SAMPLE(?creator) as ?creator) (SAMPLE(?material) as ?material) (SAMPLE(?depicts) as ?depicts) (SAMPLE(?collection) as ?collection) (SAMPLE(?iiifManifest) as ?iiifManifest)
        WHERE {
          ?item wdt:P6108 ?iiifManifest ;
                wdt:P195 ?collection ;
                wdt:P31 ?artwork .
                FILTER ( ?artwork = wd:Q3305213 || ?artwork = wd:Q93184 || ?artwork = wd:Q11060274 || ?artwork = wd:Q860861 || ?artwork = wd:Q125191 )
                ${t!==""?`FILTER ( ?material = ${t} )`:""}
                OPTIONAL {
                  ?item wdt:P495 ?countryOfOrigin.
                  FILTER(?countryOfOrigin = wd:Q31 || ?countryOfOrigin = wd:Q213 || ?countryOfOrigin = wd:Q35 || ?countryOfOrigin = wd:Q142 || ?countryOfOrigin = wd:Q36 || ?countryOfOrigin = wd:Q39 || ?countryOfOrigin = wd:Q32 || ?countryOfOrigin = wd:Q40 || ?countryOfOrigin = wd:Q55 || ?countryOfOrigin = wd:Q183 )
                }
                OPTIONAL {
                  ?collection wdt:P17 ?country.
                  FILTER(?country = wd:Q31 || ?country = wd:Q213 || ?country = wd:Q35 || ?country = wd:Q142 || ?country = wd:Q36 || ?country = wd:Q39 || ?country = wd:Q32 || ?country = wd:Q40 || ?country = wd:Q55 || ?country = wd:Q183 )
                }
                BIND(COALESCE(?countryOfOrigin, ?country) AS ?country)
                FILTER(BOUND(?country))

                OPTIONAL { ?item wdt:P136 ?genre. }
                OPTIONAL { ?item wdt:P571 ?inception. }
                OPTIONAL { ?item wdt:P276 ?location. }
                OPTIONAL { ?item wdt:P170 ?creator. }
                OPTIONAL { ?item wdt:P186 ?material. }
                OPTIONAL { ?item wdt:P180 ?depicts. }
        }
        GROUP BY ?item
        LIMIT 100
      } AS %result
      WHERE {
        INCLUDE %result.
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
      } ORDER BY ?random
    `;return e.sparqlQuery(n)}},COe=()=>{const[t,e]=_.useState([]),[n,r]=_.useState(!0),[a,i]=_.useState(null);return _.useEffect(()=>{(async()=>{try{const o=await fetch(SOe.sparqlQuery());if(!o.ok)throw new Error(`Error: ${o.status} - ${o.statusText}`);const s=await o.json();e(s.results.bindings)}catch(o){i(o.message)}finally{r(!1)}})()},[]),{data:t,loading:n,error:a}},JU=({onClick:t,materialIcon:e})=>X.jsx(kr,{className:"p-4 text-xl text-black",onClick:t,rounded:!0,inline:!0,children:X.jsx(La,{material:e})});function EOe(){const{t}=gs(),{addToImageList:e,imageList:n,removeFromImageList:r,likeImage:a}=Ec(),{data:i}=COe(),[o,s]=_.useState(0),l=_.useRef(o),u=_.useRef(null);_.useEffect(()=>{const y=async v=>{if(!v)return;const b=(await Promise.all(v.map(async x=>{var w,S,C,E,R;try{const T=await QB.fetchIIIFIdentifier(x.iiifManifest.value);return T?{id:x.item.value,name:((w=x.itemLabel)==null?void 0:w.value)||"",year:((S=x.year)==null?void 0:S.value)||"",country:((C=x.countryLabel)==null?void 0:C.value)||"",location:((E=x.locationLabel)==null?void 0:E.value)||"",creator:((R=x.creatorLabel)==null?void 0:R.value)||"",url:x.iiifManifest.value,identifier:T,image:`${T}/full/400,/0/default.jpg`,thumbnail:`${T}/full/100,100/0/default.jpg`}:null}catch(T){return console.error("Error processing image:",T),null}}))).filter(x=>x!==null);e(b)};i.length>0&&y(i)},[i,e]);const c=y=>{y==="right"&&o<n.length&&a(n[o]),r(n[o].id),s(v=>v+1)},d=y=>{var v;l.current>=y&&((v=u.current)==null||v.restoreCard())},p=async y=>{var v;o>=0&&o<n.length&&await((v=u.current)==null?void 0:v.swipe(y))},f=n[o],g=y=>y&&!y.includes("http")?y:t("selectionUnknown");return X.jsxs(ba,{margin:"my-4",className:"flex flex-col flex-wrap gap-2 lg:gap-8 justify-center content-center text-center mx-auto",children:[X.jsx("h1",{className:"text-lg leading-6 px-8 md:px-24 md:text-xl lg:px-48",children:t("selectionTitle")}),X.jsx("div",{className:"mx-auto h-2/3",children:X.jsx(aP,{className:"flex shadow-md shadow-[#BC13FE]/90",children:f&&X.jsxs(X.Fragment,{children:[X.jsx(QRe,{ref:u,className:"mb-4",onSwipe:y=>c(y),onCardLeftScreen:()=>d(o),swipeRequirementType:"position",swipeThreshold:100,preventSwipe:["up","down"],children:X.jsx("img",{alt:f.name,src:f.image})},f.id),X.jsxs("div",{className:"flex justify-between",children:[X.jsx(JU,{onClick:()=>p("left"),materialIcon:X.jsx(ZJ,{className:"w-6 h-6"})}),X.jsx(JU,{onClick:()=>p("right"),materialIcon:X.jsx(tee,{className:"w-6 h-6"})})]})]})})}),X.jsxs("div",{className:"mb-8 p-4 bg-white rounded h-1/3 opacity-90 max-w-lg w-3/4 text-center mx-auto shadow-md shadow-[#BC13FE]/90",children:[X.jsx("h2",{className:"text-lg font-bold mb-4 text-black md:text-xl",children:f?.name}),X.jsxs("p",{className:"text-gray-600",children:[t("selectionYear")," ",f?.year||t("selectionUnknown")]}),X.jsxs("p",{className:"text-gray-600",children:[t("selectionCreator")," ",g(f?.creator)]}),X.jsxs("p",{className:"text-gray-600",children:[t("selectionLocation")," ",f?.location||t("selectionUnknown")]})]})]})}const NOe="/collage.webp",TOe="/logo_animated.svg",IOe=()=>X.jsx("img",{src:TOe,alt:"Logo GLAMorous Europe",className:"w-48 md:w-64 lg:w-96 m-auto"}),_Oe=()=>X.jsx("img",{src:NOe,alt:"Collage GLAMorous Europe",className:"w-64 md:w-80 lg:w-1/2 xl:w-1/3 m-auto",decoding:"async"});function ROe(){const{t}=gs(),{imageLikeList:e,resetState:n}=Ec(),[r,a]=_.useState(!1),i=()=>{e.length>0?a(!0):window.location.href="/selection"},o=()=>{a(!1)},s=()=>{a(!1),n()};return X.jsxs(ba,{margin:"mb-16 lg:mb-4",className:"flex flex-col gap-4 lg:gap-8 text-center mx-auto",children:[X.jsx(IOe,{}),X.jsx("h1",{className:"text-lg px-8 md:text-xl",children:t("startTitle")}),X.jsx(_Oe,{}),X.jsx("p",{className:"text-lg px-8 md:px-24 md:text-xl",children:t("startSubtitle")}),X.jsx("p",{className:"text-lg px-8 md:px-24 md:text-xl",children:t("startText")}),X.jsx(kr,{large:!0,className:"text-lg w-1/2 mx-auto h-16 md:text-xl",rounded:!0,inline:!0,onClick:i,children:t("startButtonText")}),r&&X.jsx(cP,{opened:r,onBackdropClick:()=>a(!1),children:X.jsxs(Qy,{children:[X.jsx(qy,{title:t("discardModalTitle")}),X.jsxs(ba,{className:"space-y-4",children:[X.jsx("p",{children:t("discardModalMessage")}),X.jsx(O3,{className:"p-4",to:"/selection",onClick:s,children:X.jsx(kr,{className:"p-4 rounded-full text-lg",children:t("discardModalConfirm")})}),X.jsx(O3,{className:"p-4",to:"/selection",onClick:o,children:X.jsx(kr,{className:"rounded-full text-lg",children:t("discardModalNotConfirm")})})]})]})})]})}const $Oe=dK($3(X.jsxs(du,{path:"/",element:X.jsx(c5e,{}),children:[X.jsx(du,{index:!0,element:X.jsx(ROe,{})}),X.jsx(du,{path:"selection",element:X.jsx(EOe,{})}),X.jsx(du,{path:"collection",element:X.jsx(e5e,{})}),X.jsx(du,{path:"creation",element:X.jsx(Aie,{})}),X.jsx(du,{path:"about",element:X.jsx(xY,{})}),X.jsx(du,{path:"legal",element:X.jsx(d5e,{})})]})));function OOe(){return $K({immediate:!0}),X.jsx(vK,{router:$Oe})}const MOe={about:{license:"Lizenzen",licenseparagraph1:"Der Quellcode von GLAMorous Europe l\xE4uft unter einer MIT Lizenz. Die \xFCber Wikidata eingebundenen Digitalisate von Kunstwerken wurden unter einer Creative Commons Public Domain Dedication 1.0 (CC0) ver\xF6ffentlicht und sind damit gemeinfrei. Alle hier verwendeten Digitalisate weisen zudem IIIF-Manifeste auf.",licenseparagraph2:"Alle erstellten Collagen sind damit ebenfalls als CC0 lizenziert und k\xF6nnen frei und vielf\xE4ltig genutzt und ver\xE4ndert werden, z.B. f\xFCr den Unterricht, f\xFCr kunstp\xE4dagogische Angebote oder einfach f\xFCr private Deko.",title:"\xDCber GLAMorous Europe",titleparagraph1:"Die Webapp GLAMorous Europe nutzt Wikidata-APIs, um dir eine breite Palette von Kunst-Sammlungen zug\xE4nglich zu machen. Um deine k\xFCnstlerischen Interessen zu ermitteln, verwenden wir ein Swipe-System, mithilfe dessen du durch verschiedene digitalisierte Objekte wie Gem\xE4lde, Fotografien, Skizzen und Plastiken navigieren kannst.",titleparagraph2:"Basierend auf deinen Pr\xE4ferenzen erh\xE4ltst du Vorschl\xE4ge f\xFCr digitale Sammlungen, die f\xFCr dich von Interesse sein k\xF6nnten [dieses Feature ist im aktuellen Prototypen noch nicht enthalten].",titleparagraph3:"Lieblingsst\xFCcke und Ausschnitte daraus kannst du dann kombinieren, um ein neues Kunstwerk zu schaffen. Das Kunstwerk kann daraufhin analog oder digital geteilt werden. Weitere Informationen zu den Kulturg\xFCtern kannst du zus\xE4tzlich \xFCber die Daten des IIIF-Manifestes direkt abrufen. Sp\xE4ter soll auch noch eine Einbindung von Wikipedia-Informationen zu den entsprechenden K\xFCnstler:innen erfolgen.",titleparagraph4:"GLAMorous Europe konzentriert sich auf offen lizenzierte Sammlungen aus ganz Europa, wobei der Schwerpunkt auf den Nachbarl\xE4ndern Deutschlands liegt.",titleparagraph5:"GLAMorous Europe ist ein Open-Source-Projekt der Digitalwarenkombinat GbR und wurde im Rahmen der 14. F\xF6rderungsrunde des Prototype Fund von September 2023 bis Februar 2024 gef\xF6rdert. Der Prototype Fund ist ein F\xF6rderprogramm des Bundesministeriums f\xFCr Bildung und Forschung (BMBF), das von der Open Knowledge Foundation Deutschland betreut und ausgewertet wird.",usage:"Und von wem stammen die ganzen Sachen?",usagecollage:"Start-Collage",usagecollage1:"Jacques Antoine Bonebakker (1798\u20121868), Louis Moritz, 1810\u20121830 (CC0, Wikidata)",usagecollage10:"Pozdrowienie znad Ba\u0142tyku, G. S. B., 1948 (Public Domain, Polona)",usagecollage11:"Riesengebirge: Schneekoppe 1605 m., G\xF6rlitz: Photowerkst\xE4tte Bruno Scholz, vor 1945 (Public Domain, Polona)",usagecollage12:"Polesie, Sityck, Henryk Podd\u0119bski, ca. 1936  (Public Domain, Polona)",usagecollage2:"Heuvellandschap met jagers, Mattheus Molanus, ca. 1600\u20121649 (Public Domain, Wikidata)",usagecollage3:"Melancholie, Lucas Cranach der \xC4ltere, 1523 (Public Domain, Wikidata)",usagecollage4:"Et sardineri i Concarneau, Peder Severin Kr\xF8yer, 1879 (Public Domain, Wikidata)",usagecollage5:"Plakat: Moekavandid h\xE4rradele, ohne Hrsg./Autor:in, ca. 1943 (CC0, Europeana)",usagecollage6:"Hagenbund XII. Ausstellung, Christoph Reissers S\xF6hne & Alfred Keller, 1904 (CC0, Europeana)",usagecollage7:"Portret van een vrouw met hoed, zittend voor een wandtapijt met landschap, ohne Hrsg./Autor:in, 1910 (Public Domain, Europeana)",usagecollage8:"Fj\xE4ril p\xE5 blad, Alm C G, 1900\u20121925 (Public Domain, Europeana)",usagecollage9:"Katherine Corri Harris podczas gry w golfa, Underwood & Underwood, vor 1927 (Public Domain, Polona)",usagefonts:"Schriftarten",usagefonts1:"Average Sans von Typo auf 1001fonts.com (OFL-Lizenz)",usagefonts2:"Beauty Scool Dropout Regular von Nick Curtis auf 1001fonts.com (FFC-Lizenz)",usagefonts3:"Neucha Font von Jovanny Lemonad auf 1001fonts.com (OFL-Lizenz)",usageframes:"Rahmen",usageframes1:"Jacques Antoine Bonebakker (1798\u20121868), Louis Moritz, 1810\u20121830 (CC0, Wikidata)",usageframes2:"Zimn\xE1 krajina, Viktor Olgyai, 1910 (Public Domain, Wikidata)",usageframes3:"Poh\u013Ead na Spi\u0161sk\xFA Nov\xFA Ves, Lajos Csord\xE1k, 1900 (Public Domain, Wikidata)",usageframes4:"Picture Frame (CC0, kisscc0)",usageframes5:"Picture Frame (CC0, kisscc0)",usageframes6:"Picture Frame (CC0, kisscc0)",usageparagraph1:"F\xFCr die Startcollage haben wir \xFCber den Tellerrand der Wikidata hinausgeblickt, denn nicht alle L\xE4nder Europas und nicht alle Kultureinrichtungen sind bisher gut genug angebunden oder vertreten. Daher haben wir uns explizit auch bei den Best\xE4nden der Europeana sowie der Plattform Polona der Polnischen Nationalbibliothek bedient.",usageparagraph2:"Da wir gern trotzdem sichtbar machen wollen, wessen Bilder und Fonts wir verwendet haben, findet ihr hier noch einmal alle verwendeten Materialien:",usagesticker:"Sticker",usagesticker1:"I haved\xF8ren. Kunstnerens hustru, Laurits Andersen Ring, 1897 (Public Domain, Wikidata)",usagesticker10:"The Hare, after Albert de Balleroy, F\xE9lix Bracquemond, 1865 (Public Domain, Wikidata)",usagesticker2:"Calvary, Antonello da Messina, 1475 (Public Domain, Wikidata)",usagesticker3:"Business-Man, Frans Masereel, 1920 (Public Domain, Wikidata)",usagesticker4:"Udsigt fra kunstnerens vindue, Martinus R\xF8rbye, 1825 (Public Domain, Wikidata)",usagesticker5:"Festino degli dei, Giovanni Bellini & Titian, 1514/1529 (Public Domain, Wikidata)",usagesticker6:"Bloemen in een vaasje met sprinkhaan en kikvors, Clara Peeters, 17. Jhd (Public Domain, Wikidata)",usagesticker7:"Le Stryge (The Vampire), Charles Meryon, 1853 (Public Domain, Wikidata)",usagesticker8:"Udsigt gennem en d\xF8r til l\xF8bende figurer,  Christoffer Wilhelm Eckersberg, 1845 (Public Domain, Wikidata)",usagesticker9:"Zodiac, Alfons Mucha, 1896/1897 (Public Domain, Wikidata)",vision:"GLAMorous Europe weiterdenken",visionparagraph1:"GLAMorous Europe ist als Open-Source-Anwendung konzipiert und kann auf dieser Basis vielf\xE4ltig weiterentwickelt werden. Beispielweise kann es f\xFCr einzelne Kulturinstitutionen angepasst werden und sogar f\xFCr Medienstationen optimiert werden.",visionparagraph2:"GLAMorous Europe wird au\xDFerdem immer besser, umso besser die Daten von Kunstobjekten in wikidata.org gepflegt und benannt werden. Wir wollen also auch dazu ermutigen, sich selbst bei wikidata einzubringen und Daten zu erg\xE4nzen und zu vernetzen.",visionparagraph3:"Wenn du oder deine Institution Interesse hat, gemeinsam mit uns GLAMorous Europe einzusetzen oder weiterzuentwickeln, dann kontaktiere uns gern unter folgender E-Mail-Adresse: <1>info@digitalwarenkombinat.de</1>",visionparagraph4:"Folge uns gern auf <1>Instagram</1>, <2>LinkedIn</2> und <3>X</3> unter @digitalwarenkombinat #glamorouseurope"},artwork:"Leinwand",artworkCanvasBrightness:"Helligkeit",artworkCanvasContrast:"Kontrast",artworkCanvasOpacity:"Deckkraft",artworkEmpty:"F\xFCge deine eigenen Bildausschnitte hinzu",artworkTitle:"Ziehe die Ausschnitte oder Sticker in die Leinwand. Du kannst sie ver\xE4ndern und die Leinwand austauschen. Gestalte dein eigenes Kunstwerk und teile es!",chooseLanguage:"Sprache w\xE4hlen:",collection:"Sammlung",collectionAddText:"Ausschnitt hinzuf\xFCgen",collectionClose:"Schlie\xDFen",collectionLoading:"Lade...",collectionRemoveText:"Hintergrund entfernen",collectionSwitchLasso:"Lassoauswahl",collectionSwitchViewer:"Zoomauswahl",collectionTitle:"W\xE4hle Bildausschnitte aus deinen Lieblingsobjekten aus, um sie deiner Leinwand hinzuzuf\xFCgen.",collectionToastSuccess:"Ausschnitt hinzugef\xFCgt",discardModalCancel:"Abbrechen",discardModalConfirm:"Ja",discardModalMessage:"M\xF6chtest du deine bisherige Auswahl verwerfen?",discardModalNotConfirm:"Nein",discardModalTitle:"Bisherige Auswahl",legal:{contact:"Kontakt:",contactparagraph1:"E-Mail: <1>info@digitalwarenkombinat.de</1>",contactparagraph2:"Umsatzsteuer-ID: DE350177346",informationtitle:"Angaben gem\xE4\xDF \xA7 5 TMG:",informationtitleparagraph1:"Digitalwarenkombinat GbR",informationtitleparagraph2:"Eilenburger Stra\xDFe 27",informationtitleparagraph3:"04317 Leipzig",legalparagraph1:"Haftung f\xFCr Inhalte",legalparagraph2:"Als Diensteanbieter sind wir gem\xE4\xDF \xA7 7 Abs.1 TMG f\xFCr eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach \xA7\xA7 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, \xFCbermittelte oder gespeicherte fremde Informationen zu \xFCberwachen oder nach Umst\xE4nden zu forschen, die auf eine rechtswidrige T\xE4tigkeit hinweisen. Verpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen nach den allgemeinen Gesetzen bleiben hiervon unber\xFChrt. Eine diesbez\xFCgliche Haftung ist jedoch erst ab dem Zeitpunkt der Kenntnis einer konkreten Rechtsverletzung m\xF6glich. Bei Bekanntwerden von entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend entfernen.",legalparagraph3:"Haftung f\xFCr Links",legalparagraph4:"Unser Angebot enth\xE4lt Links zu externen Webseiten Dritter, auf deren Inhalte wir keinen Einfluss haben. Deshalb k\xF6nnen wir f\xFCr diese fremden Inhalte auch keine Gew\xE4hr \xFCbernehmen. F\xFCr die Inhalte der verlinkten Seiten ist stets der jeweilige Anbieter oder Betreiber der Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der Verlinkung auf m\xF6gliche Rechtsverst\xF6\xDFe \xFCberpr\xFCft. Rechtswidrige Inhalte waren zum Zeitpunkt der Verlinkung nicht erkennbar.",legalparagraph5:"Eine permanente inhaltliche Kontrolle der verlinkten Seiten ist jedoch ohne konkrete Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Links umgehend entfernen.",procedure:"Streitbeilegungsverfahren",procedureparagraph1:"Wir sind nicht bereit oder verpflichtet, an Streitbeilegungsverfahren vor einer Verbraucherschlichtungsstelle teilzunehmen.",representation:"Vertreten durch:",representationparagraph1:"Anne M\xFChlich und Gerd M\xFCller",title:"Impressum"},selection:"Auswahl",selectionCreator:"K\xFCnstler:in:",selectionLocation:"Sammlungsort:",selectionTitle:"W\xE4hle deine Lieblingsobjekte per Swipe oder Klick. F\xFCge sie somit zu deiner Sammlung hinzu.",selectionUnknown:"Unbekannt",selectionYear:"Entstehungsjahr:",sidebarAbout:"\xDCber uns",sidebarChooseLanguage:"Sprache",sidebarLegal:"Impressum",start:"Start",startButtonText:"Los geht's!",startSubtitle:"Durchst\xF6bere Kunstwerke aus Museen, Galerien, Bibliotheken und Archiven.",startText:"Sammle deine Lieblingsobjekte, w\xE4hle daraus Motive aus und gestalte dein ganz pers\xF6nliches Kunstwerk.",startTitle:"Entdecke mit GLAMorous Europe europ\xE4isches Kulturerbe!"},POe={translation:MOe},FOe={about:{license:"Licenses",licenseparagraph1:"The source code of GLAMorous Europe runs under an MIT license. The via Wikidata integrated digital copies of artworks have been published under a Creative Commons Public Domain Dedication 1.0 (CC0). All digital copies used here also own IIIF manifests.",licenseparagraph2:"All collages created are therefore also licensed as CC0 and can be used and modified freely and in a variety of ways, e.g. for teaching, for art education programmes or simply for private decoration.",title:"About GLAMorous Europe",titleparagraph1:"The GLAMorous Europe webapp uses Wikidata APIs to give you access to a wide range of art collections. To identify your artistic interests, we use a swipe system that allows you to navigate through various digitised objects such as paintings, photographs, sketches and sculptures.",titleparagraph2:"Based on your preferences, you will receive suggestions for digital collections that might be of interest to you [this feature is not yet included in the current prototype].",titleparagraph3:"You can then combine your favourite pieces and selected details from them to create a new work of art. The artwork can then be shared in analogue or digital form. You can also access further information on the cultural assets directly via the IIIF manifesto data. Later, Wikipedia information on the artists will also be integrated.",titleparagraph4:"GLAMorous Europe concentrates on openly licensed collections from all over Europe, with a focus on Germany's neighbouring countries.",titleparagraph5:"GLAMorous Europe is an open source project of Digitalwarenkombinat GbR and was financed as part of the 14th funding round of the Prototype Fund from September 2023 to February 2024. The Prototype Fund is a funding programme of the Federal Ministry of Education and Research (BMBF), which is managed and evaluated by the Open Knowledge Foundation Germany.",usage:"And where does all this stuff come from?",usagecollage:"Collage from Mainpage",usagecollage1:"Jacques Antoine Bonebakker (1798\u20121868), Louis Moritz, 1810\u20121830 (CC0, Wikidata)",usagecollage10:"Pozdrowienie znad Ba\u0142tyku, G. S. B., 1948 (Public Domain, Polona)",usagecollage11:"Riesengebirge: Schneekoppe 1605 m., G\xF6rlitz: Photowerkst\xE4tte Bruno Scholz, before 1945 (Public Domain, Polona)",usagecollage12:"Polesie, Sityck, Henryk Podd\u0119bski, ca. 1936  (Public Domain, Polona)",usagecollage2:"Heuvellandschap met jagers, Mattheus Molanus, ca. 1600\u20121649 (Public Domain, Wikidata)",usagecollage3:"Melancholie, Lucas Cranach the Elder, 1523 (Public Domain, Wikidata)",usagecollage4:"Et sardineri i Concarneau, Peder Severin Kr\xF8yer, 1879 (Public Domain, Wikidata)",usagecollage5:"Plakat: Moekavandid h\xE4rradele, without author, ca. 1943 (CC0, Europeana)",usagecollage6:"Hagenbund XII. Ausstellung, Christoph Reissers S\xF6hne & Alfred Keller, 1904 (CC0, Europeana)",usagecollage7:"Portret van een vrouw met hoed, zittend voor een wandtapijt met landschap, without author, 1910 (Public Domain, Europeana)",usagecollage8:"Fj\xE4ril p\xE5 blad, Alm C G, 1900\u20121925 (Public Domain, Europeana)",usagecollage9:"Katherine Corri Harris podczas gry w golfa, Underwood & Underwood, before 1927 (Public Domain, Polona)",usagefonts:"Fonts",usagefonts1:"Average Sans by Typo on 1001fonts.com (OFL license)",usagefonts2:"Beauty Scool Dropout Regular by Nick Curtis on 1001fonts.com (FFC license)",usagefonts3:"Neucha Font by Jovanny Lemonad on 1001fonts.com (OFL license)",usageframes:"Frames",usageframes1:"Jacques Antoine Bonebakker (1798\u20121868), Louis Moritz, 1810\u20121830 (CC0, Wikidata)",usageframes2:"Zimn\xE1 krajina, Viktor Olgyai, 1910 (Public Domain, Wikidata)",usageframes3:"Poh\u013Ead na Spi\u0161sk\xFA Nov\xFA Ves, Lajos Csord\xE1k, 1900 (Public Domain, Wikidata)",usageframes4:"Picture Frame (CC0, kisscc0)",usageframes5:"Picture Frame (CC0, kisscc0)",usageframes6:"Picture Frame (CC0, kisscc0)",usageparagraph1:"For the collage on the mainpage, we looked beyond Wikidata, because not all European countries and not all cultural institutions are sufficiently well connected or represented. That's why we explicitly used the holdings of Europeana and the Polona platform of the National Library of Poland.",usageparagraph2:"As we would still like to make visible whose images and fonts we have used, you will find all the materials used here once again:",usagesticker:"Sticker",usagesticker1:"I haved\xF8ren. Kunstnerens hustru, Laurits Andersen Ring, 1897 (Public Domain, Wikidata)",usagesticker10:"The Hare, after Albert de Balleroy, F\xE9lix Bracquemond, 1865 (Public Domain, Wikidata)",usagesticker2:"Calvary, Antonello da Messina, 1475 (Public Domain, Wikidata)",usagesticker3:"Business-Man, Frans Masereel, 1920 (Public Domain, Wikidata)",usagesticker4:"Udsigt fra kunstnerens vindue, Martinus R\xF8rbye, 1825 (Public Domain, Wikidata)",usagesticker5:"Festino degli dei, Giovanni Bellini & Titian, 1514/1529 (Public Domain, Wikidata)",usagesticker6:"Bloemen in een vaasje met sprinkhaan en kikvors, Clara Peeters, 17th century (Public Domain, Wikidata)",usagesticker7:"Le Stryge (The Vampire), Charles Meryon, 1853 (Public Domain, Wikidata)",usagesticker8:"Udsigt gennem en d\xF8r til l\xF8bende figurer, Christoffer Wilhelm Eckersberg, 1845 (Public Domain, Wikidata)",usagesticker9:"Zodiac, Alfons Mucha, 1896/1897 (Public Domain, Wikidata)",vision:"Thinking GLAMorous Europe further",visionparagraph1:"GLAMorous Europe is designed as an open source application and can be further developed on this basis in a variety of ways. For example, it can be adapted for individual cultural institutions and even optimised for media stations.",visionparagraph2:"GLAMorous Europe will also improve the better the data on art objects is maintained and named in wikidata.org. We also want to encourage people to contribute to wikidata by adding and linking data.",visionparagraph3:"If you or your institution are interested in using or further developing GLAMorous Europe together with us, please contact us at the following e-mail address: <1>info@digitalwarenkombinat.de</1>",visionparagraph4:"Follow us on <1>Instagram</1>, <2>LinkedIn</2> and <3>X</3> with @digitalwarenkombinat #glamorouseurope"},artwork:"Canvas",artworkCanvasBrightness:"Brightness",artworkCanvasContrast:"Contrast",artworkCanvasOpacity:"Opacity",artworkEmpty:"Add your image details.",artworkTitle:"Drag the image details or stickers onto the canvas. You can change them and replace the canvas. Create your own work of art and share it!",chooseLanguage:"Choose Language:",collection:"Collection",collectionAddText:"Add choosen detail",collectionClose:"Close",collectionLoading:"Loading...",collectionRemoveText:"Remove Background",collectionSwitchLasso:"Select Lasso",collectionSwitchViewer:"Select zoom",collectionTitle:"Select image details from your favorites to add them to your canvas.",collectionToastSuccess:"Added choosen detail",discardModalCancel:"Close",discardModalConfirm:"Yes",discardModalMessage:"Would you like to discard your previous selection?",discardModalNotConfirm:"No",discardModalTitle:"Current selection",legal:{contact:"Contact:",contactparagraph1:"E-Mail: <1>info@digitalwarenkombinat.de</1>",contactparagraph2:"VAT ID: DE350177346",informationtitle:"Information in accordance with \xA7 5 TMG:",informationtitleparagraph1:"Digitalwarenkombinat GbR",informationtitleparagraph2:"Eilenburger Stra\xDFe 27",informationtitleparagraph3:"04317 Leipzig/Germany",legalparagraph1:"Liability for content",legalparagraph2:"As a service provider, we are responsible for our own content on these pages in accordance with Section 7 (1) TMG (German Telemedia Act) and general legislation. According to \xA7\xA7 8 to 10 TMG, however, we as a service provider are not obliged to monitor transmitted or stored third-party information or to investigate circumstances that indicate illegal activity. Obligations to remove or block the use of information in accordance with general legislation remain unaffected by this. However, liability in this respect is only possible from the time of knowledge of a specific infringement. As soon as we become aware of such infringements, we will remove this content immediately.",legalparagraph3:"Liability for links",legalparagraph4:"Our website contains links to external third-party websites over whose content we have no influence. Therefore, we cannot accept any liability for this third-party content. The respective provider or operator of the pages is always responsible for the content of the linked pages. The linked pages were checked for possible legal violations at the time of linking. Illegal content was not recognizable at the time of linking.",legalparagraph5:"However, permanent monitoring of the content of the linked pages is not reasonable without concrete evidence of an infringement. If we become aware of any legal infringements, we will remove such links immediately.",procedure:"Dispute resolution procedure",procedureparagraph1:"We are not willing or obliged to participate in dispute resolution proceedings before a consumer arbitration board.",representation:"Represented by:",representationparagraph1:"Anne M\xFChlich und Gerd M\xFCller",title:"Legal notice"},selection:"Selection",selectionCreator:"Artist:",selectionLocation:"Location:",selectionTitle:"Select your favorites by swiping or clicking. This will add them to your collection.",selectionUnknown:"Unknown",selectionYear:"Year of creation:",sidebarAbout:"About",sidebarChooseLanguage:"Language",sidebarLegal:"Legal",start:"Start",startButtonText:"Let's go!",startSubtitle:"Explore works of art from museums, galleries, libraries and archives.",startText:"Collect your favorite objects, select details from them and create your very own work of art.",startTitle:"Dating European cultural heritage with GLAMorous Europe!"},AOe={translation:FOe};fa.init({interpolation:{escapeValue:!1},lng:"auto",fallbackLng:"de",resources:{de:{...POe},en:{...AOe}}}),iM(document.getElementById("root")).render(X.jsx(V.StrictMode,{children:X.jsx(QH,{i18n:fa,children:X.jsx(OOe,{})})}));export{AR as $,zo as a,zL as b,ei as c,aM as d,V as e,Zi as g,_ as r};function R0(t){return R0.viteFileDeps||(R0.viteFileDeps=[]),t.map(e=>R0.viteFileDeps[e])}
